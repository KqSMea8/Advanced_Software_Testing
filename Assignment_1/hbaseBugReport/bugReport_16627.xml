<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 21:16:05 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-16627/HBASE-16627.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-16627] AssignmentManager#isDisabledorDisablingRegionInRIT should check whether table exists</title>
                <link>https://issues.apache.org/jira/browse/HBASE-16627</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; first reported this issue when he played with backup feature.&lt;/p&gt;

&lt;p&gt;The following exception can be observed in backup unit tests:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2016-09-13 16:21:57,661 ERROR [ProcedureExecutor-3] master.TableStateManager(134): Unable to get table hbase:backup state
org.apache.hadoop.hbase.TableNotFoundException: hbase:backup
        at org.apache.hadoop.hbase.master.TableStateManager.getTableState(TableStateManager.java:174)
        at org.apache.hadoop.hbase.master.TableStateManager.isTableState(TableStateManager.java:131)
        at org.apache.hadoop.hbase.master.AssignmentManager.isDisabledorDisablingRegionInRIT(AssignmentManager.java:1221)
        at org.apache.hadoop.hbase.master.AssignmentManager.assign(AssignmentManager.java:739)
        at org.apache.hadoop.hbase.master.AssignmentManager.assign(AssignmentManager.java:1567)
        at org.apache.hadoop.hbase.master.AssignmentManager.assign(AssignmentManager.java:1546)
        at org.apache.hadoop.hbase.util.ModifyRegionUtils.assignRegions(ModifyRegionUtils.java:254)
        at org.apache.hadoop.hbase.master.procedure.CreateTableProcedure.assignRegions(CreateTableProcedure.java:430)
        at org.apache.hadoop.hbase.master.procedure.CreateTableProcedure.executeFromState(CreateTableProcedure.java:127)
        at org.apache.hadoop.hbase.master.procedure.CreateTableProcedure.executeFromState(CreateTableProcedure.java:57)
        at org.apache.hadoop.hbase.procedure2.StateMachineProcedure.execute(StateMachineProcedure.java:119)
        at org.apache.hadoop.hbase.procedure2.Procedure.doExecute(Procedure.java:452)
        at org.apache.hadoop.hbase.procedure2.ProcedureExecutor.execProcedure(ProcedureExecutor.java:1066)
        at org.apache.hadoop.hbase.procedure2.ProcedureExecutor.execLoop(ProcedureExecutor.java:855)
        at org.apache.hadoop.hbase.procedure2.ProcedureExecutor.execLoop(ProcedureExecutor.java:808)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;AssignmentManager#isDisabledorDisablingRegionInRIT should take table existence into account.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13004651">HBASE-16627</key>
            <summary>AssignmentManager#isDisabledorDisablingRegionInRIT should check whether table exists</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="syuanjiang">Stephen Yuan Jiang</assignee>
                                    <reporter username="yuzhihong@gmail.com">Ted Yu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 13 Sep 2016 16:32:26 +0000</created>
                <updated>Tue, 13 Sep 2016 17:35:20 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="15487795" author="syuanjiang" created="Tue, 13 Sep 2016 17:14:19 +0000"  >&lt;p&gt;It is interesting.  This is common code path for creating a table.  We should not throw exception (otherwise, all table creation would fail).  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu&quot; class=&quot;user-hover&quot; rel=&quot;tedyu&quot;&gt;Ted Yu&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;, can this be easily repro by just creating backup table?&lt;/p&gt;

&lt;p&gt;Assignment manager code is in the middle of updating.  Unless this is a easy repro and block your testing, let me hold this bug for now and I will do more investigation later.  If this is a blocker, I will spend some time to unblock you in the backup branch. &lt;/p&gt;</comment>
                            <comment id="15487806" author="yuzhihong@gmail.com" created="Tue, 13 Sep 2016 17:16:23 +0000"  >&lt;p&gt;Backup tests can pass.&lt;/p&gt;

&lt;p&gt;This is not blocker for backup / restore.&lt;/p&gt;

&lt;p&gt;Thanks, Stephen.&lt;/p&gt;</comment>
                            <comment id="15487812" author="mbertozzi" created="Tue, 13 Sep 2016 17:18:45 +0000"  >&lt;p&gt;we don&apos;t throw exception up, TableStateManager try to ask for the state of the table, and table is not found (because we are creating it), so we get that the table is not in that state. &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isTableState(TableName tableName, TableState.State... states) {
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      TableState.State tableState = getTableState(tableName);
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; TableState.isInStates(tableState, states);
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IOException e) {
      LOG.error(&lt;span class=&quot;code-quote&quot;&gt;&quot;Unable to get table &quot;&lt;/span&gt; + tableName + &lt;span class=&quot;code-quote&quot;&gt;&quot; state&quot;&lt;/span&gt;, e);
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
    }
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15487829" author="syuanjiang" created="Tue, 13 Sep 2016 17:24:54 +0000"  >&lt;p&gt;That is true, &lt;tt&gt;isTableState()&lt;/tt&gt; &apos;eats&apos; the TableNotFoundException exception from &lt;tt&gt;getTableState()&lt;/tt&gt; and log an ERROR.  &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  @NonNull
  public TableState.State getTableState(TableName tableName) throws IOException {
    TableState currentState = readMetaState(tableName);
    if (currentState == null) {
      throw new TableNotFoundException(tableName);
    }
    return currentState.getState();
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now, I think we should lower the log level to WARN - this is not error, as caller could legally ask for a non-existing table.&lt;/p&gt;</comment>
                            <comment id="15487858" author="stack" created="Tue, 13 Sep 2016 17:35:20 +0000"  >&lt;p&gt;Not a blocker. Warn sounds better but if not an issue can we save spew in log. Am Fi e waiting till am  further along&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 13 Sep 2016 17:14:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33kv3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>