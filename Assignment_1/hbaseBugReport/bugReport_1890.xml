<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:57:13 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1890/HBASE-1890.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1890] hbase-1506 where assignment is done at regionserver doesn&apos;t work</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1890</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;I have been running testing of 0.20.1 and found a bunch of cases where regionserver adding the bottom half to .META. itself is causing double assignment; we add the regioninfo over on the regionserver and then queue up the opening of the region.  Meantime along comes BaseScanner and it finds the two new regions, one of which its in charge of assigning but one of which its not to assign &amp;#8211; but it does because the server and startcode are empty.&lt;/p&gt;

&lt;p&gt;Here is example:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2009-10-07 03:02:08,792 DEBUG org.apache.hadoop.hbase.master.BaseScanner: Current assignment of TestTable,0033622754,1254884526868 is not valid;  serverAddress=, startCode=0 unknown.
2009-10-07 03:02:08,796 DEBUG org.apache.hadoop.hbase.master.BaseScanner: Current assignment of TestTable,0034099554,1254884526868 is not valid;  serverAddress=, startCode=0 unknown.
2009-10-07 03:02:08,872 DEBUG org.apache.hadoop.hbase.master.RegionManager: Assigning &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; address: XX.XX.XX.142:60020, startcode: 1254862426199, load: (requests=379, regions=125, usedHeap=1856, maxHeap=3391): t
otal nregions to assign=2, nregions to reach balance=0, isMetaAssign=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
2009-10-07 03:02:08,872 DEBUG org.apache.hadoop.hbase.master.RegionManager: Doing &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; address: XX.XX.XX.142:60020, startcode: 1254862426199, load: (requests=379, regions=125, usedHeap=1856, maxHeap=3391) nregio
ns: 2 and nRegionsToAssign: 2
2009-10-07 03:02:08,872 INFO org.apache.hadoop.hbase.master.RegionManager: Assigning region TestTable,0033622754,1254884526868 to aa0-000-15.example.org,60020,1254862426199
2009-10-07 03:02:08,872 INFO org.apache.hadoop.hbase.master.RegionManager: Assigning region TestTable,0034099554,1254884526868 to aa0-000-15.example.org,60020,1254862426199
2009-10-07 03:02:09,908 INFO org.apache.hadoop.hbase.master.ServerManager: Processing MSG_REPORT_SPLIT: TestTable,0033622754,1254873112948: Daughters; TestTable,0033622754,1254884526868, TestTable,0034099554,125
4884526868 from aa0-000-12.example.org,60020,1254862426179; 1 of 4
2009-10-07 03:02:09,915 INFO org.apache.hadoop.hbase.master.RegionManager: Assigning region TestTable,0033622754,1254884526868 to aa0-000-12.example.org,60020,1254862426179
2009-10-07 03:02:09,915 WARN org.apache.hadoop.hbase.master.RegionManager: Cannot assign a region that is not currently unassigned. FIX!! State: name=TestTable,0033622754,1254884526868, unassigned=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, pending
Open=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, open=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, closing=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, pendingClose=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, closed=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, offlined=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
2009-10-07 03:02:09,922 INFO org.apache.hadoop.hbase.master.ServerManager: Processing MSG_REPORT_OPEN: TestTable,0033622754,1254884526868 from aa0-000-12.example.org,60020,1254862426179; 4 of 4
2009-10-07 03:02:09,922 DEBUG org.apache.hadoop.hbase.master.HMaster: Processing todo: PendingOpenOperation from aa0-000-12.example.org,60020,1254862426179
2009-10-07 03:02:09,922 INFO org.apache.hadoop.hbase.master.RegionServerOperation: TestTable,0033622754,1254884526868 open on XX.XX.XX.139:60020
2009-10-07 03:02:09,924 INFO org.apache.hadoop.hbase.master.RegionServerOperation: Updated row TestTable,0033622754,1254884526868 in region .META.,,1 with startcode=1254862426179, server=XX.XX.XX.139:60020
2009-10-07 03:02:11,904 INFO org.apache.hadoop.hbase.master.ServerManager: Processing MSG_REPORT_PROCESS_OPEN: TestTable,0034099554,1254884526868 from aa0-000-15.example.org,60020,1254862426199; 1 of 3
2009-10-07 03:02:11,904 INFO org.apache.hadoop.hbase.master.ServerManager: Processing MSG_REPORT_OPEN: TestTable,0033622754,1254884526868 from aa0-000-15.example.org,60020,1254862426199; 2 of 3
2009-10-07 03:02:11,904 DEBUG org.apache.hadoop.hbase.master.ServerManager: region server XX.XX.XX.142:60020 should not have opened region TestTable,0033622754,1254884526868
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12437456">HBASE-1890</key>
            <summary>hbase-1506 where assignment is done at regionserver doesn&apos;t work</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 Oct 2009 04:38:57 +0000</created>
                <updated>Fri, 20 Nov 2015 13:01:28 +0000</updated>
                            <resolved>Wed, 7 Oct 2009 16:58:55 +0000</resolved>
                                                    <fixVersion>0.20.1</fixVersion>
                    <fixVersion>0.90.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12762867" author="stack" created="Wed, 7 Oct 2009 04:42:51 +0000"  >&lt;p&gt;I should back out regionserver reopening bottom half or I should set the .META. myself over in regionserver adding startcode and server cells to .META..  Regards the latter, what if it takes a long time opening the region?  The alternative is that the new region is without a home until its successfully opened on a new server which isn&apos;t much better.&lt;/p&gt;</comment>
                            <comment id="12762869" author="stack" created="Wed, 7 Oct 2009 04:51:47 +0000"  >&lt;p&gt;Here is an edited hbase-1506 patch.  It leaves in place our immediately sending the master events if the regionserver has anything to tell it but the rest backs out the piece where regionserver opens the lower-half locally.  I looked at adding in server and startcode from the regionserver but I think that this might make new issues (Regionserver ain&apos;t even clear on what master is writing as server address).  This patch needs to be applied with -Rp0.  I&apos;m testing it now.&lt;/p&gt;</comment>
                            <comment id="12763125" author="stack" created="Wed, 7 Oct 2009 16:58:37 +0000"  >&lt;p&gt;I did the same test that provoked above exception with this patch in place and it worked this time.   Applying.&lt;/p&gt;</comment>
                            <comment id="15017811" author="lars_francke" created="Fri, 20 Nov 2015 13:01:28 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12421492" name="1890.patch" size="6228" author="stack" created="Wed, 7 Oct 2009 04:51:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 20 Nov 2015 13:01:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26042</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hfsn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99821</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>