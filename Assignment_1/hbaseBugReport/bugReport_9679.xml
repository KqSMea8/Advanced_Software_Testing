<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:06:35 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-9679/HBASE-9679.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-9679] Binary search in HFile block</title>
                <link>https://issues.apache.org/jira/browse/HBASE-9679</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;It&apos;s not a top priority issue, seems to me.&lt;br/&gt;
Right now hbase do a linear scan to search a key within a hfile block on interst, in special case, e.g. 100% read scenario or high read/write ratio scanario, it&apos;s useful to do a binary search improvement to reduce the CPU cost and response time,  i think the biggest benefit should be the cpu&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12671236">HBASE-9679</key>
            <summary>Binary search in HFile block</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="xieliang007">Liang Xie</assignee>
                                    <reporter username="xieliang007">Liang Xie</reporter>
                        <labels>
                    </labels>
                <created>Sun, 29 Sep 2013 04:36:42 +0000</created>
                <updated>Thu, 28 Aug 2014 23:09:02 +0000</updated>
                            <resolved>Wed, 26 Mar 2014 03:38:19 +0000</resolved>
                                    <version>0.95.2</version>
                    <version>0.94.12</version>
                                                    <component>HFile</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13781249" author="zjushch" created="Sun, 29 Sep 2013 05:03:37 +0000"  >&lt;p&gt;PrefixTree Datablock Encoding would using binary server in HFile block&lt;/p&gt;

&lt;p&gt;And I think it is impossible to do binary search in HFile block for no Datablock Encoding or other Datablock Encoding algorithms&lt;/p&gt;</comment>
                            <comment id="13781251" author="zjushch" created="Sun, 29 Sep 2013 05:08:10 +0000"  >&lt;p&gt;Unless changing the format of HFile block&lt;/p&gt;</comment>
                            <comment id="13781256" author="lhofhansl" created="Sun, 29 Sep 2013 05:26:39 +0000"  >&lt;p&gt;Agreed. Binary search is not possible, because the KVs have variable length and there is no index to indicate where each KV start. We can change that of course - for example we can build up the index when a block is cached.&lt;br/&gt;
In that case, why not just index the KVs accordingly. (In fact I tried that once using a lazily build, sparsely populated SkiplistSet as index, but that did not yield any appreciable performance improvement).&lt;/p&gt;</comment>
                            <comment id="13947517" author="xieliang007" created="Wed, 26 Mar 2014 03:38:19 +0000"  >&lt;p&gt;It&apos;s seems not a good practice to do it in 0.94 branch(0.96+ has the PrefixTree) due to need a HFile index code refactoring.&lt;br/&gt;
Close it now, clean up JIRA&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13948775" author="lhofhansl" created="Thu, 27 Mar 2014 02:14:29 +0000"  >&lt;p&gt;I was just thinking about this. Forgot we have this issue.&lt;br/&gt;
We could scan through an HFileBlock as we bring it into the cache and build an index with the offsets of each KV. Then we can binary search based on those offsets.&lt;/p&gt;</comment>
                            <comment id="13950306" author="xieliang007" created="Fri, 28 Mar 2014 02:58:27 +0000"  >&lt;p&gt;when i filed this issue long long time ago, my thought was that we could impl an adaptive index algo which is similar with Cassandra&apos;s, that means if we detect a hotspot kv inside a HFile block in lots of read requests, then we could build a index upon this kv, the most code be modified should the HFileIndex class.  But there&apos;s is a little risk to just do it only in 0.94 branch&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  since we have PrefixTree already in later branch.&lt;/p&gt;</comment>
                            <comment id="13950358" author="mcorgan" created="Fri, 28 Mar 2014 04:32:18 +0000"  >&lt;p&gt;We could create an encoder format that adds an int[] index to the beginning or end of the block.  Getting even fancier, we could add an index to the delta encoders for every N cells, so the decoder could binary search to a random point in the block but then encode away the common prefixes between cells N and N+1.&lt;/p&gt;</comment>
                            <comment id="13950418" author="lhofhansl" created="Fri, 28 Mar 2014 05:58:55 +0000"  >&lt;p&gt;If PrefixTree solves this for all use cases, I&apos;d say we shouldn&apos;t worry about this in 0.94.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12736238">HBASE-11811</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 29 Sep 2013 05:03:37 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>350942</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 38 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1oic7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>351233</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>