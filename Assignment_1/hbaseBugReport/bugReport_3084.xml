<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:07:13 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-3084/HBASE-3084.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-3084] HLog splitLog : Properly Handle User Interrupts</title>
                <link>https://issues.apache.org/jira/browse/HBASE-3084</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Nicolas reviewed &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2437&quot; title=&quot;Refactor HLog splitLog&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2437&quot;&gt;&lt;del&gt;HBASE-2437&lt;/del&gt;&lt;/a&gt; after it had been committed and raised some issues that need addressing.  The main issue is that splitLog will ignore user interrupts (aka: InterruptException).  Currently, data loss can occur (with &apos;skip.errors&apos; == true) if a user calls &apos;kill &amp;lt;master-pid&amp;gt;&quot; during splits because the code will consider the interrupted file completely split.  If the master receives an interrupt during splitLog, it needs to abort splitting, delete all partially-complete split files, and exit gracefully.  &lt;/p&gt;</description>
                <environment></environment>
        <key id="12475895">HBASE-3084</key>
            <summary>HLog splitLog : Properly Handle User Interrupts</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Oct 2010 21:09:43 +0000</created>
                <updated>Wed, 16 Jul 2014 23:09:47 +0000</updated>
                            <resolved>Wed, 16 Jul 2014 23:09:47 +0000</resolved>
                                    <version>0.89.20100924</version>
                    <version>0.90.0</version>
                    <version>0.92.0</version>
                                                    <component>io</component>
                    <component>master</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12918255" author="nspiegelberg" created="Tue, 5 Oct 2010 22:17:19 +0000"  >&lt;p&gt;My Comments&lt;/p&gt;

&lt;p&gt;1. FSUtils.recoverFileLease() - does the InterruptedException handler need to set Thread.currentThread().interrupt()? What about users actually trying to kill the master?&lt;br/&gt;
2. parseHLog() - the comment says that len==0 can still happen with append support? At least for 0.20, that&apos;s only if the file wasn&apos;t closed. However, we just did that immediately before in recoverFileLease. don&apos;t mind the code, but comment should change or be clarified&lt;br/&gt;
3. writeEditsBatchToRegions() - same thing with InterruptedException. maybe want to have something higher up the call stack notice isInterrupted() and display a Log.info() message. At the very least, we definitely don&apos;t want to delete the log directory in splitLog() if the user interrupts these threads and skipErrors==true&lt;br/&gt;
4. archiveLogs() - by default, we are archiving successfully split logs ala &apos;processedLogs&apos;? I&apos;m not sure we want to do that by default. I think people are mainly interested in problematic logs that couldn&apos;t survive the transition. Having this as an optional toggle is okay, but a naive user wouldn&apos;t know he has these trash items.&lt;/p&gt;</comment>
                            <comment id="12918272" author="nspiegelberg" created="Tue, 5 Oct 2010 22:26:52 +0000"  >&lt;p&gt;My opinion: FSUtils.recoverFileLease() should throw an InterruptedIOException if it catches a user interrupt.  There are multiple sections of HBase code that ignore interrupts (&lt;b&gt;sadness&lt;/b&gt;) but this area is pretty critical since it can lead to data loss if handled incorrectly.&lt;/p&gt;</comment>
                            <comment id="12918299" author="nspiegelberg" created="Tue, 5 Oct 2010 22:53:27 +0000"  >&lt;p&gt;Hairong volunteered to take a look at this issue&lt;/p&gt;</comment>
                            <comment id="14064310" author="apurtell" created="Wed, 16 Jul 2014 23:09:47 +0000"  >&lt;p&gt;Nothing happened&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 5 Oct 2010 22:17:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26636</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 22 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02bq7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11501</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>