<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:20:18 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-11114/HBASE-11114.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-11114] Backport HBASE-10926 (Use global procedure to flush table memstore cache) to 0.98</title>
                <link>https://issues.apache.org/jira/browse/HBASE-11114</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Backport &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10926&quot; title=&quot;Use global procedure to flush table memstore cache&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10926&quot;&gt;&lt;del&gt;HBASE-10926&lt;/del&gt;&lt;/a&gt; to 0.98.&lt;/p&gt;

&lt;p&gt;Description from original issue: Currently, user can trigger table flush through hbase shell or HBaseAdmin API. To flush the table cache, each region server hosting the regions is contacted and flushed sequentially, which is less efficient. In HBase snapshot global procedure is used to coordinate and flush the regions in a distributed way. Let&apos;s provide a distributed table flush for general use.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12712202">HBASE-11114</key>
            <summary>Backport HBASE-10926 (Use global procedure to flush table memstore cache) to 0.98</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="7">Later</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="apurtell">Andrew Purtell</reporter>
                        <labels>
                    </labels>
                <created>Sun, 4 May 2014 18:07:47 +0000</created>
                <updated>Tue, 22 Jul 2014 16:54:19 +0000</updated>
                            <resolved>Tue, 22 Jul 2014 16:54:18 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13989075" author="apurtell" created="Sun, 4 May 2014 18:10:44 +0000"  >&lt;p&gt;The coprocessor API changes in the committed patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11114&quot; title=&quot;Backport HBASE-10926 (Use global procedure to flush table memstore cache) to 0.98&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11114&quot;&gt;&lt;del&gt;HBASE-11114&lt;/del&gt;&lt;/a&gt; add methods only, so would be ok to port back. I think the procedure framework in 0.98 can support the changes also.&lt;/p&gt;

&lt;p&gt;I think the one question is if the flush behavior change is ok to make from one minor release to another. In my opinion we should take a liberal attitude to changes that improve efficiency without changing client facing API, and when security is active flushing is a restricted activity already. A release note should be sufficient.&lt;/p&gt;</comment>
                            <comment id="13993101" author="jmhsieh" created="Thu, 8 May 2014 20:59:17 +0000"  >&lt;p&gt;The frame work should be compat.&lt;/p&gt;

&lt;p&gt;I think we can go case by case with the commands that use it.  Here are some suggested rules:&lt;/p&gt;

&lt;p&gt;1. old clients should be able to issue the command to new servers and new clients should be able to issue to the command to old servers and still succeed.  Also, they should succeed in mixed old/new RS situations (e.g. while we are doing a rolling upgrade).  &lt;/p&gt;

&lt;p&gt;2. I&apos;m ok with having a flag for old behavior and all new clients in 0.98.x default to old behavior.  Switching to the new requires full shutdown/restart unless #1 is met as well.  &lt;/p&gt;

&lt;p&gt;Let me give a more concrete example of a compat requirement for a global flush method:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Old HBaseAdmin clients (say 0.98.0) who use the old style global flush should be able to issue the commands to newer servers (0.98.3 let&apos;s say).&lt;/li&gt;
	&lt;li&gt;New HBaseAdmin clients (say 0.98.3) could try to do the new style flush to old servers (0.98.00 but should fall back to the old style if it is rejected with some sort of not supported error.)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13998654" author="apurtell" created="Thu, 15 May 2014 10:25:32 +0000"  >&lt;p&gt;Sounds good Jon. &lt;/p&gt;</comment>
                            <comment id="14004834" author="apurtell" created="Wed, 21 May 2014 16:05:42 +0000"  >&lt;p&gt;Push to 0.98.4. The compatibility issues will need to be well tested.&lt;/p&gt;</comment>
                            <comment id="14005527" author="jinghe" created="Thu, 22 May 2014 01:56:52 +0000"  >&lt;blockquote&gt;&lt;p&gt;Old HBaseAdmin clients (say 0.98.0) who use the old style global flush should be able to issue the commands to newer servers  (0.98.3 let&apos;s say).&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This should work fine if we backport directly. Old client will still go to region servers to flush without involving the global procedure.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;New HBaseAdmin clients (say 0.98.3) could try to do the new style flush to old servers (0.98.00 but should fall back to the old style if it is rejected with some sort of not supported error.)&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This will break.&lt;/p&gt;</comment>
                            <comment id="14070506" author="apurtell" created="Tue, 22 Jul 2014 16:54:19 +0000"  >&lt;p&gt;I&apos;m going to resolve this as Later as in retrospect there is no priority need for this feature. Let&apos;s reopen when being actively worked on.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12717730">HBASE-11278</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                            <outwardlinks description="requires">
                                        <issuelink>
            <issuekey id="12715709">HBASE-11221</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 8 May 2014 20:59:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>390521</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 21 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1v9m7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>390774</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>