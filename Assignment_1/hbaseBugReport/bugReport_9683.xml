<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:06:37 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-9683/HBASE-9683.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-9683]  Port HTrace support to 0.94</title>
                <link>https://issues.apache.org/jira/browse/HBASE-9683</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Port HTrace (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6524&quot; title=&quot;Hooks for hbase tracing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6524&quot;&gt;&lt;del&gt;HBASE-6524&lt;/del&gt;&lt;/a&gt;) to 0.94. This patch includes a wire-format change on writable RPC. It serializes the traceID and spanID in class Invocation. This should be compatible with old versions.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12671257">HBASE-9683</key>
            <summary> Port HTrace support to 0.94</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stepinto">Chao Shi</reporter>
                        <labels>
                    </labels>
                <created>Sun, 29 Sep 2013 11:20:55 +0000</created>
                <updated>Wed, 22 Apr 2015 00:41:58 +0000</updated>
                            <resolved>Wed, 22 Apr 2015 00:41:58 +0000</resolved>
                                    <version>0.94.12</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                <comments>
                            <comment id="13781478" author="eclark" created="Sun, 29 Sep 2013 19:04:45 +0000"  >&lt;p&gt;This breaks wire compat correct ?&lt;/p&gt;

&lt;p&gt;Also there are much newer versions of HTrace that have change the user facing api, and added some perf gains.  So my preference would be to use 2.0.1 if we even want this in 0.94&lt;/p&gt;</comment>
                            <comment id="13781578" author="stepinto" created="Mon, 30 Sep 2013 02:42:06 +0000"  >&lt;blockquote&gt;&lt;p&gt;This breaks wire compat correct ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;No. The goal of this patch is to add trace support without breaking wire compatibility. This is a little bit tricky. It appends 1 boolean + 2 longs to Invocation. There are two cases (I&apos;ve tested manually):&lt;/p&gt;

&lt;p&gt;1) old client + new server:&lt;br/&gt;
There is no appended trace info, so we will get EOFException in readTraceInfo(). It saliently ignore it and return null, effectively performing no tracing at server side.&lt;/p&gt;

&lt;p&gt;2) new client + old server:&lt;br/&gt;
The client sends request with trace info. The server has no knowledge on this. It will stop reading just after parameters. Not that this unread bytes should have no side effects, as in the data buffer is preceded by its length (in fact, the input stream is a ByteArrayInputStream, and any remaining bytes are discarded, see HBaseServer#processData).&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Also there are much newer versions of HTrace that have change the user facing api, and added some perf gains. So my preference would be to use 2.0.1 if we even want this in 0.94&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Oh, I didn&apos;t notice trunk has update on it. Let me make another patch. As maintaining wire compatibility is so important here. I&apos;d like to ask you guys to review if there is anything missing.&lt;/p&gt;</comment>
                            <comment id="13782206" author="sershe" created="Mon, 30 Sep 2013 20:39:52 +0000"  >&lt;p&gt;It will not break wire compat if the serialized class is not followed by anything else, I assume it&apos;s the case? Otherwise trying to read next object will read these bytes&lt;/p&gt;</comment>
                            <comment id="13788839" author="stepinto" created="Tue, 8 Oct 2013 02:25:00 +0000"  >&lt;blockquote&gt;&lt;p&gt;It will not break wire compat if the serialized class is not followed by anything else, I assume it&apos;s the case?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sershe&quot; class=&quot;user-hover&quot; rel=&quot;sershe&quot;&gt;Sergey Shelukhin&lt;/a&gt;. Sorry for the late reply. To my understanding, I think this would be the only possible case. &lt;/p&gt;</comment>
                            <comment id="13788915" author="stepinto" created="Tue, 8 Oct 2013 05:18:04 +0000"  >&lt;p&gt;Here is port of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9121&quot; title=&quot;Update HTrace to 2.00 and add new example usage.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9121&quot;&gt;&lt;del&gt;HBASE-9121&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9366&quot; title=&quot;TestHTraceHooks.testTraceCreateTable ConcurrentModificationException up in htrace lib&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9366&quot;&gt;&lt;del&gt;HBASE-9366&lt;/del&gt;&lt;/a&gt; to 0.94 branch. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt;, please have a look at this one. I haven&apos;t get zipkin work on my box yet, but TestHTraceHooks can pass thus it should basically work.&lt;/p&gt;</comment>
                            <comment id="13793243" author="stepinto" created="Sat, 12 Oct 2013 04:25:13 +0000"  >&lt;p&gt;I finally get this worked. There is something tricky about thrift version. &lt;/p&gt;

&lt;p&gt;As HTrace is using thrift 0.9.0 and hbase 0.94 is using thrift 0.8.0. HTrace&apos;s code is not able to run with thrift 0.8.0. So I have to configure HBASE_CLASSPATH and add thrift 0.9.0 jar. (I don&apos;t know why this dependency is not propagated to hbase.)&lt;/p&gt;

&lt;p&gt;HBase trunk has been updated to thrift 0.9.0 (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7005&quot; title=&quot;Upgrade Thrift lib to 0.9.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7005&quot;&gt;&lt;del&gt;HBASE-7005&lt;/del&gt;&lt;/a&gt;). Because of compatibility reasons, we can&apos;t get 0.94 upgrade too. Is it possible to make htrace depend on thrift 0.8.0? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tlipcon&quot; class=&quot;user-hover&quot; rel=&quot;tlipcon&quot;&gt;Todd Lipcon&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt;, what do you think of this?&lt;/p&gt;</comment>
                            <comment id="13795024" author="stepinto" created="Tue, 15 Oct 2013 09:19:16 +0000"  >&lt;p&gt;v3 fixes a missing of &quot;Trace.wrap&quot; where put operation was not traced due to thread switch.&lt;/p&gt;</comment>
                            <comment id="13796533" author="hadoopqa" created="Wed, 16 Oct 2013 08:13:49 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12608460/hbase-9683-v3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12608460/hbase-9683-v3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7562//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7562//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13797299" author="eclark" created="Wed, 16 Oct 2013 21:43:43 +0000"  >&lt;p&gt;I&apos;m a pretty strong -0 on this.  While I think tracing is pretty awesome and very useful.  I&apos;m very wary of doing anything to the RPC of 94.  It&apos;s on 94.13.  That&apos;s pretty far into what should be stabilization.&lt;/p&gt;</comment>
                            <comment id="13797545" author="stepinto" created="Thu, 17 Oct 2013 02:14:57 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt;, I agree that the 0.94 RPC is ugly in terms of expansion and it needs much more carefulness and efforts than the PB based one. I believe that the 0.94 series will remain in production for a while (at least for us and for several other users that I know of). Having this back ported to 0.94 will definitely benefit a lot of existing users.&lt;/p&gt;</comment>
                            <comment id="13798952" author="xieliang007" created="Fri, 18 Oct 2013 09:31:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt;, what do you think of this jira as 0.94 release manager? than ks&lt;/p&gt;</comment>
                            <comment id="13799317" author="lhofhansl" created="Fri, 18 Oct 2013 17:29:08 +0000"  >&lt;p&gt;I&apos;ll defer to Elliott on this. Personally I&apos;m +0. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14506130" author="apurtell" created="Wed, 22 Apr 2015 00:41:58 +0000"  >&lt;p&gt;Resolving as Not A Problem based on sentiment on issue&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12607312" name="hbase-9683-v2.patch" size="61256" author="stepinto" created="Tue, 8 Oct 2013 05:18:04 +0000"/>
                            <attachment id="12608460" name="hbase-9683-v3.patch" size="62435" author="stepinto" created="Tue, 15 Oct 2013 09:19:16 +0000"/>
                            <attachment id="12605782" name="hbase-9683.patch" size="25783" author="stepinto" created="Sun, 29 Sep 2013 11:21:31 +0000"/>
                            <attachment id="12608132" name="hbase-zipkin.png" size="134097" author="stepinto" created="Sat, 12 Oct 2013 04:25:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 29 Sep 2013 19:04:45 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>350963</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 34 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1oigv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>351254</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>