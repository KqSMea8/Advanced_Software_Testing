<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:34:21 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6165/HBASE-6165.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6165] Replication can overrun .META. scans on cluster re-start</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6165</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;When restarting a large set of regions on a reasonably small cluster the replication from another cluster tied up every xceiver meaning nothing could be onlined.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12559443">HBASE-6165</key>
            <summary>Replication can overrun .META. scans on cluster re-start</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="v.himanshu">Himanshu Vashishtha</assignee>
                                    <reporter username="eclark">Elliott Clark</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Jun 2012 21:15:01 +0000</created>
                <updated>Sun, 7 Apr 2013 04:35:03 +0000</updated>
                            <resolved>Fri, 31 Aug 2012 00:08:46 +0000</resolved>
                                                    <fixVersion>0.94.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>13</watches>
                                                                <comments>
                            <comment id="13296141" author="lhofhansl" created="Sat, 16 Jun 2012 12:25:33 +0000"  >&lt;p&gt;What&apos;s a good approach to avoid this?&lt;/p&gt;</comment>
                            <comment id="13393636" author="eclark" created="Sun, 17 Jun 2012 23:19:16 +0000"  >&lt;p&gt;Upping the number of privileged ipc threads is the workaround that we&apos;re going to deploy soon.&lt;/p&gt;</comment>
                            <comment id="13396052" author="jdcryans" created="Mon, 18 Jun 2012 17:33:34 +0000"  >&lt;p&gt;The other solution is to have a different set of handlers, but this requires to either hack HBaseServer to add another queue and priority level or refactor it to make it more configurable. &lt;/p&gt;</comment>
                            <comment id="13431978" author="v.himanshu" created="Thu, 9 Aug 2012 17:05:31 +0000"  >&lt;p&gt;I hit this problem while testing a long running replication setup. All priority handlers were blocked by replicationLog method, and cluster became unresponsive.&lt;/p&gt;

&lt;p&gt;Attached is a patch which does the following:&lt;br/&gt;
a) Add a differnt QOS level, customQOS. Methods with this attribute will be processed by a new set of handlers.&lt;br/&gt;
b) Adds customPriorityHandlers, a new set of handlers in Regionserver.&lt;/p&gt;

&lt;p&gt;ReplicationSink#replicateLogEntries uses this attribute. &lt;/p&gt;

&lt;p&gt;Testing: Jenkins is green. Have a long running replication setup, and its up for a few days.&lt;/p&gt;</comment>
                            <comment id="13432014" author="eclark" created="Thu, 9 Aug 2012 17:38:43 +0000"  >&lt;p&gt;A better name is probably needed for the Queue.  Custom doesn&apos;t really get across what&apos;s can go into that qos level (replication).&lt;br/&gt;
Since this starts 0 &quot;custom&quot; priority handlers by default it will add another undocumented step when enabling replication.  We should either make the number of handlers start by default &amp;gt; 0, or have the number depend on if replication is enabled.&lt;br/&gt;
Why choose the number 5 for the priority ?  Since the QOS_THRESHOLD is 10. (Even if they are arbitrary seems like we should have some reason and a comment about the numbering scheme.)&lt;/p&gt;


&lt;p&gt;Thanks for doing this.&lt;/p&gt;</comment>
                            <comment id="13432015" author="lhofhansl" created="Thu, 9 Aug 2012 17:39:01 +0000"  >&lt;p&gt;Patch looks good generally. Few comments:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;The naming is weird. These are not &quot;Custom&quot;QOS, but &quot;Medium&quot;QOS methods, right?&lt;/li&gt;
	&lt;li&gt;Is there a way to generalize this to sets of Handlers with different priority (not important, though).&lt;/li&gt;
	&lt;li&gt;By default now (if hbase.regionserver.custom.priority.handler.count is not set), replicateWALEntry would use non-priority handlers... Which is not right, I think. It should revert back to the current behavior in that case (which is to do use the priorityQOS.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;What I still do not understand... Does this problem always happen? Does it happen because replicateWALEntry takes too long to finish? Does this only happen when the slave is already degraded for other reasons? Should we also work on replicateWALEntry failing faster in case of problems (shorter/fewer retries, etc)?&lt;/p&gt;</comment>
                            <comment id="13432022" author="zhihyu@ebaysf.com" created="Thu, 9 Aug 2012 17:48:28 +0000"  >&lt;p&gt;w.r.t. default value for hbase.regionserver.custom.priority.handler.count, I agree with Lars and Elliot that the default should be &amp;gt; 0.&lt;br/&gt;
Actually we should perform check on the actual value: if user specifies 0 and either replication or security is enabled, we should raise the value to, say, 3.&lt;/p&gt;</comment>
                            <comment id="13432023" author="eclark" created="Thu, 9 Aug 2012 17:50:11 +0000"  >&lt;p&gt;@Lars&lt;br/&gt;
We had this happen when a large cluster is replication to a small cluster.&lt;br/&gt;
Source (Large Cluster)&lt;br/&gt;
Sink (Small cluster)&lt;/p&gt;

&lt;p&gt;After the sink goes down or re-starts, the source waits for meta to come up.  After that lots of replicate wal edits are shipped to all the server.  So many in fact that the server holding meta does not have any left to answer meta scans or edits.&lt;/p&gt;</comment>
                            <comment id="13432029" author="v.himanshu" created="Thu, 9 Aug 2012 18:02:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt;: I used custom, because the current naming scheme is not appropriate in my opinion (I started with medium/semi QOS, but then changed it to Custom). Using priority is kind of a misnomer as there is no priority as such, its just different set of handlers that is serving the requests.&lt;br/&gt;
Though we call them priorityHandlers, etc, they are just like regular handlers but for meta operations. I think we should change their name to metaOpsHandlers (or metaHandlers). Yea, I just used a threshold b/w 0 and 10.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Since this starts 0 &quot;custom&quot; priority handlers by default it will add another undocumented step when enabling replication. We should either make the number of handlers start by default &amp;gt; 0, or have the number depend on if replication is enabled.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I am ok with &amp;gt;0 default; don&apos;t think it should be tied to replication as they can be used for other methods too (such as Security, etc)&lt;/p&gt;

&lt;p&gt;@Lars: &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;The naming is weird. These are not &quot;Custom&quot;QOS, but &quot;Medium&quot;QOS methods, right?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Hope you find it rationale now.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;By default now (if hbase.regionserver.custom.priority.handler.count is not set), replicateWALEntry would use non-priority handlers... Which is not right, I think. It should revert back to the current behavior in that case (which is to do use the priorityQOS.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;default &amp;gt; 0 sounds good?&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;What I still do not understand... Does this problem always happen? Does it happen because replicateWALEntry takes too long to finish? Does this only happen when the slave is already degraded for other reasons? Should we also work on replicateWALEntry failing faster in case of problems (shorter/fewer retries, etc)?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It can occur when the slave cluster is slow. And whenever it happens, it will make the entire cluster unresponsive. I have a patch which adds the fail fast behavior in sink and has been testing it too. It looks good so far. I tried creating a new JIRA but IOE while creating it (see &lt;a href=&quot;https://issues.apache.org/jira/browse/INFRA-5131&quot; title=&quot;IOE when creating a JIRA&quot; class=&quot;issue-link&quot; data-issue-key=&quot;INFRA-5131&quot;&gt;&lt;del&gt;INFRA-5131&lt;/del&gt;&lt;/a&gt;). Will attach the patch once its created.&lt;/p&gt;</comment>
                            <comment id="13432045" author="lhofhansl" created="Thu, 9 Aug 2012 18:28:04 +0000"  >&lt;p&gt;@Himanshu: Thanks. Yes makes sense. I like MetaHandlers.&lt;br/&gt;
Re: failing fast: I think instead of using an HTablePool the sink should create a Connection and ThreadPool and then create HTable on demand using these (see: &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4805&quot; title=&quot;Allow better control of resource consumption in HTable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4805&quot;&gt;&lt;del&gt;HBASE-4805&lt;/del&gt;&lt;/a&gt;), together with short timeouts and few retries.&lt;/p&gt;</comment>
                            <comment id="13432048" author="lhofhansl" created="Thu, 9 Aug 2012 18:34:44 +0000"  >&lt;p&gt;This should be in 0.94&lt;/p&gt;</comment>
                            <comment id="13432050" author="zhihyu@ebaysf.com" created="Thu, 9 Aug 2012 18:36:44 +0000"  >&lt;p&gt;+1 on shifting away from using HTablePool in the JIRA for fail-fast.&lt;/p&gt;</comment>
                            <comment id="13432053" author="v.himanshu" created="Thu, 9 Aug 2012 18:41:26 +0000"  >&lt;p&gt;Lars, Ted and Elliot: Thanks for the feedback.&lt;/p&gt;


&lt;p&gt;@Lars: Changing the name is beyond the scope of this jira, no? Another jira for that?&lt;br/&gt;
re: failfast: Yeah, the patch still uses HTablePool, but submits the batch in a threadpool (of ReplicationSink). Meanwhile, the handler keeps checking whether the client is still alive or not, while waiting for the task to finish. If the client is out, it cancels the task.&lt;br/&gt;
Also, ReplicationSink now has its own conf object where it can decorate it with its own timeout, number of retrials etc. Is there an open jira for ReplicationSink (can&apos;t create a jira yet)?&lt;/p&gt;</comment>
                            <comment id="13432056" author="hadoopqa" created="Thu, 9 Aug 2012 18:45:23 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12540074/HBase-6165-v1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12540074/HBase-6165-v1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    -1 javac.  The applied patch generated 5 javac compiler warnings (more than the trunk&apos;s current 4 warnings).&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 9 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.coprocessor.TestClassLoading&lt;br/&gt;
                  org.apache.hadoop.hbase.master.TestAssignmentManager&lt;br/&gt;
                  org.apache.hadoop.hbase.TestLocalHBaseCluster&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2542//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2542//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2542//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2542//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2542//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2542//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2542//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2542//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2542//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2542//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2542//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2542//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2542//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2542//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13432068" author="v.himanshu" created="Thu, 9 Aug 2012 18:55:41 +0000"  >&lt;p&gt;Created fail-fast replicationSink jira HBase-6550 (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6550&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-6550&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="13432205" author="eclark" created="Thu, 9 Aug 2012 21:59:01 +0000"  >&lt;blockquote&gt;&lt;p&gt;Using priority is kind of a misnomer as there is no priority as such&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The actual handlers don&apos;t imply some sort of QOS, but the naming does correspond to &lt;/p&gt;
{low|medium|high}
&lt;p&gt; priority set of operations that can be in that handler&apos;s queue.&lt;/p&gt;</comment>
                            <comment id="13432224" author="v.himanshu" created="Thu, 9 Aug 2012 22:18:53 +0000"  >&lt;p&gt;Yeah, and I think it should be changed to what it actually do. So, changing the QOS and respective handlers in the line of CLIENT_OPS, CUSTOM_OPS, and META_OPS seems more appropriate. &lt;/p&gt;</comment>
                            <comment id="13433313" author="v.himanshu" created="Mon, 13 Aug 2012 17:10:37 +0000"  >&lt;p&gt;So, shall I upload with a +ve default value for the number of custom handlers then? For the naming of existing handlers, I can another jira? Thoughts?&lt;/p&gt;</comment>
                            <comment id="13433327" author="zhihyu@ebaysf.com" created="Mon, 13 Aug 2012 17:21:01 +0000"  >&lt;p&gt;Sounds good.&lt;br/&gt;
Consider renaming &quot;hbase.regionserver.custom.priority.handler.count&quot; to &quot;hbase.regionserver.custom.handler.count&quot;&lt;/p&gt;</comment>
                            <comment id="13433392" author="v.himanshu" created="Mon, 13 Aug 2012 18:33:23 +0000"  >&lt;p&gt;Making the default custom handlers as 5 instead of 0; Renamed property as per Ted&apos;s suggestion.&lt;/p&gt;</comment>
                            <comment id="13433690" author="zhihyu@ebaysf.com" created="Mon, 13 Aug 2012 22:41:51 +0000"  >&lt;p&gt;From &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2556/console:&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2556/console:&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
/home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/trunk/dev-support/test-patch.sh: line 353:   393 Aborted
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13433700" author="v.himanshu" created="Mon, 13 Aug 2012 22:54:25 +0000"  >&lt;p&gt;On current trunk (with commit 7b9cbf0c0b35468591b3a1cf5c93951461590f8c), it applied clean. Shall I upload again?&lt;/p&gt;</comment>
                            <comment id="13433703" author="zhihyu@ebaysf.com" created="Mon, 13 Aug 2012 22:57:56 +0000"  >&lt;p&gt;Yes, please.&lt;br/&gt;
Aborted test run is different from compilation error.&lt;/p&gt;</comment>
                            <comment id="13433707" author="eclark" created="Mon, 13 Aug 2012 22:59:01 +0000"  >&lt;p&gt;I still don&apos;t understand the naming.  There&apos;s nothing &quot;custom&quot; about these handlers.  They handle replication. REPLICATION_OPS, MISC_OPS, INTERNAL_OPS any of those seem convey more about the type of operations these threads will handle.&lt;/p&gt;
</comment>
                            <comment id="13433718" author="v.himanshu" created="Mon, 13 Aug 2012 23:12:56 +0000"  >&lt;p&gt;@Elliot: I don&apos;t want to tie them with replication. As you see, they have +ve default value now, so it will not be correct to call them REPLICATION_OPS.&lt;br/&gt;
Any method with CUSTOM_OPS attributed will be handled with it. The nearest candidate to use this is Security related methods I think.&lt;br/&gt;
MISC/INTERNAL doesn&apos;t convey anything specific too&lt;br/&gt;
Don&apos;t know, but CUSTOM still looks ok to me... &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; But will be glad to change with more appropriate name. &lt;/p&gt;

&lt;p&gt;@Ted: What does that error mean btw?&lt;/p&gt;</comment>
                            <comment id="13433725" author="eclark" created="Mon, 13 Aug 2012 23:26:40 +0000"  >&lt;p&gt;It&apos;s not that custom doesn&apos;t convey enough meaning (I could live with that).  Custom implies that there&apos;s been some modification from normal or stock.  That is not the case.  These handlers are there for things that are built in.  Replication and security are core pieces of functionality.  Naming things custom gives the impression that they are not as supported as other operation, which is not the case.&lt;/p&gt;</comment>
                            <comment id="13433756" author="zhihyu@ebaysf.com" created="Tue, 14 Aug 2012 00:09:06 +0000"  >&lt;p&gt;@Himanshu:&lt;br/&gt;
I don&apos;t know the root cause for abortion of QA run.&lt;/p&gt;

&lt;p&gt;w.r.t. queue naming, can I assume that misc(ellaneous) is acceptable to everyone ?&lt;/p&gt;</comment>
                            <comment id="13433823" author="apurtell" created="Tue, 14 Aug 2012 01:37:04 +0000"  >&lt;p&gt;MISC doesn&apos;t have any meaning. &lt;/p&gt;

&lt;p&gt;Neither does &quot;custom&quot;.&lt;/p&gt;

&lt;p&gt;IMO, name these after what they actually do. If this is for replication, name it REPLICATION_QOS.&lt;/p&gt;</comment>
                            <comment id="13437444" author="v.himanshu" created="Sun, 19 Aug 2012 02:41:29 +0000"  >&lt;p&gt;Thanks Andrew.&lt;/p&gt;

&lt;p&gt;Revised patch with the following changes:&lt;br/&gt;
a) Call Queue name, QOS are replication specific &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
b) default number of replication handlers is 3&lt;br/&gt;
c) Moved QOS attributes constants to HConstants.&lt;/p&gt;

&lt;p&gt;Tested replication on a cluster; green jenkins&lt;/p&gt;
</comment>
                            <comment id="13437450" author="hadoopqa" created="Sun, 19 Aug 2012 03:43:26 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12541512/HBase-6165-v3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12541512/HBase-6165-v3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    -1 javac.  The applied patch generated 5 javac compiler warnings (more than the trunk&apos;s current 4 warnings).&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 8 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.client.TestFromClientSide&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2616//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2616//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2616//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2616//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2616//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2616//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2616//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2616//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2616//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2616//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2616//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2616//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2616//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2616//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13437452" author="zhihyu@ebaysf.com" created="Sun, 19 Aug 2012 04:06:27 +0000"  >&lt;p&gt;Patch v3 looks clean.&lt;br/&gt;
nit:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(handlers != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
+      &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;(Handler h : handlers) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Space should be added immediately before &apos;(&apos;&lt;/p&gt;</comment>
                            <comment id="13437468" author="v.himanshu" created="Sun, 19 Aug 2012 07:00:06 +0000"  >&lt;p&gt;You are right Sir! Done.&lt;/p&gt;</comment>
                            <comment id="13437478" author="hadoopqa" created="Sun, 19 Aug 2012 08:22:21 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12541517/HBase-6165-v4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12541517/HBase-6165-v4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    -1 javac.  The applied patch generated 5 javac compiler warnings (more than the trunk&apos;s current 4 warnings).&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 8 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.backup.example.TestZooKeeperTableArchiveClient&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2619//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2619//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2619//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2619//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2619//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2619//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2619//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2619//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2619//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2619//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2619//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2619//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2619//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2619//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13441467" author="v.himanshu" created="Fri, 24 Aug 2012 20:32:05 +0000"  >&lt;p&gt;Looking forward for more suggestions/comments, as we are talking about 0.94.2 on the list now.&lt;/p&gt;</comment>
                            <comment id="13441486" author="lhofhansl" created="Fri, 24 Aug 2012 20:45:31 +0000"  >&lt;p&gt;v4 looks good. +1&lt;/p&gt;</comment>
                            <comment id="13441507" author="jdcryans" created="Fri, 24 Aug 2012 21:16:52 +0000"  >&lt;p&gt;I&apos;m -1 for 0.94 until I test it on one of our clusters which I&apos;ll try to do this afternoon. &lt;/p&gt;</comment>
                            <comment id="13442786" author="jdcryans" created="Mon, 27 Aug 2012 23:02:55 +0000"  >&lt;p&gt;FWIW the v4 patch really doesn&apos;t apply on 0.94:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;
su-jdcryans-2:hbase-git-su jdcryans$ patch -p1 -F 10 --dry-run &amp;lt; HBase-6165-v4.patch 
patching file src/main/java/org/apache/hadoop/hbase/HConstants.java
Hunk #1 succeeded at 650 with fuzz 2 (offset -42 lines).
patching file src/main/java/org/apache/hadoop/hbase/ipc/HBaseRpcMetrics.java
Hunk #1 succeeded at 98 (offset -11 lines).
patching file src/main/java/org/apache/hadoop/hbase/ipc/HBaseServer.java
Hunk #1 succeeded at 225 (offset -51 lines).
Hunk #2 succeeded at 1304 (offset -360 lines).
Hunk #3 succeeded at 1335 with fuzz 1 (offset -414 lines).
Hunk #4 succeeded at 1356 (offset -415 lines).
Hunk #5 succeeded at 1526 (offset -405 lines).
Hunk #6 succeeded at 1630 with fuzz 3 (offset -415 lines).
Hunk #7 succeeded at 1652 (offset -423 lines).
Hunk #8 succeeded at 1664 (offset -423 lines).
patching file src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java
Hunk #1 succeeded at 449 with fuzz 2 (offset 153 lines).
Hunk #2 FAILED at 658.
Hunk #3 succeeded at 486 (offset -87 lines).
Hunk #4 succeeded at 504 (offset -87 lines).
Hunk #5 succeeded at 520 (offset -87 lines).
Hunk #6 succeeded at 536 (offset -87 lines).
Hunk #7 succeeded at 3159 (offset 1061 lines).
Hunk #8 succeeded at 3170 with fuzz 1 (offset 1059 lines).
Hunk #9 succeeded at 3630 with fuzz 3 (offset 529 lines).
Hunk #10 FAILED at 3836.
Hunk #11 FAILED at 3883.
Hunk #12 FAILED at 3911.
Hunk #13 FAILED at 3998.
Hunk #14 FAILED at 4037.
Hunk #15 FAILED at 4068.
Hunk #16 FAILED at 4097.
Hunk #17 FAILED at 4131.
9 out of 17 hunks FAILED -- saving rejects to file src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java.rej
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13442790" author="v.himanshu" created="Mon, 27 Aug 2012 23:06:32 +0000"  >&lt;p&gt;The above patch was for trunk;&lt;br/&gt;
will upload a 0.94 one.&lt;/p&gt;</comment>
                            <comment id="13442818" author="v.himanshu" created="Mon, 27 Aug 2012 23:58:11 +0000"  >&lt;p&gt;0.94 patch&lt;/p&gt;</comment>
                            <comment id="13442868" author="hadoopqa" created="Tue, 28 Aug 2012 01:09:43 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12542698/HBase-6165-94-v1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12542698/HBase-6165-94-v1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2710//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2710//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13444232" author="jdcryans" created="Wed, 29 Aug 2012 17:38:31 +0000"  >&lt;p&gt;The 0.94 patch doesn&apos;t set the proper QOS:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-  @QosPriority(priority=HIGH_QOS)
+  @QosPriority(priority=HConstants.HIGH_QOS)
   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void replicateLogEntries(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; HLog.Entry[] entries)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13444277" author="v.himanshu" created="Wed, 29 Aug 2012 18:13:20 +0000"  >&lt;p&gt;replicateLogEntries with replication QOS&lt;/p&gt;</comment>
                            <comment id="13444292" author="hadoopqa" created="Wed, 29 Aug 2012 18:22:37 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12542957/HBase-6165-94-v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12542957/HBase-6165-94-v2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2724//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2724//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13445212" author="jdcryans" created="Thu, 30 Aug 2012 19:18:26 +0000"  >&lt;p&gt;I&apos;ve been running the 0.94 patch since yesterday, +1.&lt;/p&gt;</comment>
                            <comment id="13445263" author="jdcryans" created="Thu, 30 Aug 2012 20:15:59 +0000"  >&lt;p&gt;The trunk patch needs a refresh.&lt;/p&gt;</comment>
                            <comment id="13445299" author="lhofhansl" created="Thu, 30 Aug 2012 21:11:35 +0000"  >&lt;p&gt;I&apos;ll make an updated patch.&lt;/p&gt;</comment>
                            <comment id="13445305" author="v.himanshu" created="Thu, 30 Aug 2012 21:21:52 +0000"  >&lt;p&gt;patch refreshed&lt;/p&gt;</comment>
                            <comment id="13445311" author="lhofhansl" created="Thu, 30 Aug 2012 21:27:18 +0000"  >&lt;p&gt;You beat me &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13445314" author="hadoopqa" created="Thu, 30 Aug 2012 21:32:34 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12543165/HBase-6165-v5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12543165/HBase-6165-v5.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2742//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2742//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13445320" author="v.himanshu" created="Thu, 30 Aug 2012 21:37:35 +0000"  >&lt;p&gt;No, I can&apos;t. You have the superpower to take it one step forward &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13445346" author="lhofhansl" created="Thu, 30 Aug 2012 22:04:44 +0000"  >&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Unfortunately v5 still does not apply cleanly to trunk.&lt;/p&gt;</comment>
                            <comment id="13445348" author="v.himanshu" created="Thu, 30 Aug 2012 22:11:05 +0000"  >&lt;p&gt;It is based on top of commit: e554fa9b0cc06c7a364c38bed53139da5e354b36; I took an update before creating it. Are there more commits after this which git doesn&apos;t has? &lt;/p&gt;

&lt;p&gt;Feel free to create the new patch then.&lt;/p&gt;</comment>
                            <comment id="13445396" author="stack" created="Thu, 30 Aug 2012 23:02:33 +0000"  >&lt;p&gt;git can lag svn.  Would suggest you get an svn checkout and make sure patch applies there.&lt;/p&gt;</comment>
                            <comment id="13445447" author="lhofhansl" created="Thu, 30 Aug 2012 23:41:07 +0000"  >&lt;p&gt;The canonical repository is the SVN repository, Himanshu.&lt;/p&gt;</comment>
                            <comment id="13445464" author="v.himanshu" created="Thu, 30 Aug 2012 23:57:52 +0000"  >&lt;p&gt;good to know; will set up a svn/eclipse environment.&lt;/p&gt;</comment>
                            <comment id="13445465" author="lhofhansl" created="Thu, 30 Aug 2012 23:58:22 +0000"  >&lt;p&gt;I&apos;ll make a patch for now. For folks who like git, svn is a pain (or so I heard) &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13445475" author="lhofhansl" created="Fri, 31 Aug 2012 00:05:26 +0000"  >&lt;p&gt;Trunk patch that I am going to commit. Also fixed TestPriorityRpc, which didn&apos;t compile.&lt;/p&gt;</comment>
                            <comment id="13445478" author="lhofhansl" created="Fri, 31 Aug 2012 00:08:46 +0000"  >&lt;p&gt;Committed to 0.94 and 0.96.&lt;br/&gt;
Thanks for the patch Himanshu.&lt;/p&gt;</comment>
                            <comment id="13445498" author="v.himanshu" created="Fri, 31 Aug 2012 00:19:11 +0000"  >&lt;p&gt;Thanks for the final patch Lars &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13445614" author="hudson" created="Fri, 31 Aug 2012 03:54:19 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #155 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/155/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/155/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6165&quot; title=&quot;Replication can overrun .META. scans on cluster re-start&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6165&quot;&gt;&lt;del&gt;HBASE-6165&lt;/del&gt;&lt;/a&gt; Replication can overrun .META. scans on cluster re-start (Himanshu Vashishtha) (Revision 1379235)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-common/src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/ipc/HBaseRpcMetrics.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/ipc/HBaseServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestPriorityRpc.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13445641" author="hudson" created="Fri, 31 Aug 2012 04:27:32 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #443 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/443/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/443/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6165&quot; title=&quot;Replication can overrun .META. scans on cluster re-start&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6165&quot;&gt;&lt;del&gt;HBASE-6165&lt;/del&gt;&lt;/a&gt; Replication can overrun .META. scans on cluster re-start (Himanshu Vashishtha) (Revision 1379236)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/ipc/HBaseRpcMetrics.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/ipc/HBaseServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13448255" author="hudson" created="Wed, 5 Sep 2012 00:31:37 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #51 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/51/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/51/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6165&quot; title=&quot;Replication can overrun .META. scans on cluster re-start&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6165&quot;&gt;&lt;del&gt;HBASE-6165&lt;/del&gt;&lt;/a&gt; Replication can overrun .META. scans on cluster re-start (Himanshu Vashishtha) (Revision 1379236)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/ipc/HBaseRpcMetrics.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/ipc/HBaseServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13448324" author="hudson" created="Wed, 5 Sep 2012 00:57:15 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security-on-Hadoop-23 #7 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/7/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/7/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6165&quot; title=&quot;Replication can overrun .META. scans on cluster re-start&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6165&quot;&gt;&lt;del&gt;HBASE-6165&lt;/del&gt;&lt;/a&gt; Replication can overrun .META. scans on cluster re-start (Himanshu Vashishtha) (Revision 1379236)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/ipc/HBaseRpcMetrics.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/ipc/HBaseServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13449245" author="whitingj" created="Wed, 5 Sep 2012 23:12:47 +0000"  >&lt;p&gt;I maybe a little late to the party, but why is replication using any kind of higher than normal priority handlers? &lt;/p&gt;

&lt;p&gt;It looks like we all agree that they shouldn&apos;t be using the high priority handlers.  It looks like they now have their own medium priority handlers. But I don&apos;t see an argument as to why they don&apos;t just use the normal handlers priority handlers.&lt;/p&gt;</comment>
                            <comment id="13449382" author="hudson" created="Thu, 6 Sep 2012 03:33:20 +0000"  >&lt;p&gt;Integrated in HBase-0.92 #558 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92/558/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92/558/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6724&quot; title=&quot;Port HBASE-6165 &amp;#39;Replication can overrun .META. scans on cluster re-start&amp;#39; to 0.92&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6724&quot;&gt;&lt;del&gt;HBASE-6724&lt;/del&gt;&lt;/a&gt; Port &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6165&quot; title=&quot;Replication can overrun .META. scans on cluster re-start&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6165&quot;&gt;&lt;del&gt;HBASE-6165&lt;/del&gt;&lt;/a&gt; &apos;Replication can overrun .META. scans on cluster re-start&apos; to 0.92 (Revision 1381451)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
Tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/ipc/HBaseServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13449409" author="stack" created="Thu, 6 Sep 2012 04:38:15 +0000"  >&lt;p&gt;@Jeff IIRC they need to be on a channel other than user priority queue because they can overwhelm user loadings (e.g. big cluster replication into small cluster).  We&apos;ve been learning a bunch of late about replicating and its fair to say that some pieces need a bit of rethink making them more robust around cases such as aforementioned large into small or one we ran into ourselves recently where we couldn&apos;t start the small cluster because the high priority handlers were all occupied by replication soon after startup (This patch would help w/ that scenario).  I see that this patch has just been backported to 0.92 &amp;#8211; hopefully that will be of help to you in your current predicament.&lt;/p&gt;</comment>
                            <comment id="13452491" author="jdcryans" created="Mon, 10 Sep 2012 21:57:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=whitingj&quot; class=&quot;user-hover&quot; rel=&quot;whitingj&quot;&gt;Jeff Whiting&lt;/a&gt;, originally replication was using the normal handlers and was just deadlocking the clusters in a different way. ReplicationSink uses the HBase client which can block for ungodly amounts of time so it would fill up the handlers and the RS would stop serving requests. &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6550&quot; title=&quot;Refactoring ReplicationSink to make it more responsive of cluster health&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6550&quot;&gt;&lt;del&gt;HBASE-6550&lt;/del&gt;&lt;/a&gt; changed the latter that a bit by setting low timeouts via replication-specific client-side configuration parameters (if it was using the normal client configurations it would also affect all the other clients). With &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6165&quot; title=&quot;Replication can overrun .META. scans on cluster re-start&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6165&quot;&gt;&lt;del&gt;HBASE-6165&lt;/del&gt;&lt;/a&gt; it&apos;s even safer since replication is sandboxed.&lt;/p&gt;</comment>
                            <comment id="13452552" author="whitingj" created="Mon, 10 Sep 2012 22:59:58 +0000"  >&lt;p&gt;@stack and @jdcryans  Thanks for the explanation.  I can see how it would deadlock on itself. I also found &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3401&quot; title=&quot;Region IPC operations should be high priority&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3401&quot;&gt;&lt;del&gt;HBASE-3401&lt;/del&gt;&lt;/a&gt; which talks about the deadlock.  We patched our cdh4 cluster with &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6724&quot; title=&quot;Port HBASE-6165 &amp;#39;Replication can overrun .META. scans on cluster re-start&amp;#39; to 0.92&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6724&quot;&gt;&lt;del&gt;HBASE-6724&lt;/del&gt;&lt;/a&gt; and it has been running much smoother.  &lt;/p&gt;</comment>
                            <comment id="13452557" author="v.himanshu" created="Mon, 10 Sep 2012 23:12:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=whitingj&quot; class=&quot;user-hover&quot; rel=&quot;whitingj&quot;&gt;Jeff Whiting&lt;/a&gt; Specifically, replication specific jira about deadlocking on normal handlers is &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4280&quot; title=&quot;[replication] ReplicationSink can deadlock itself via handlers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4280&quot;&gt;&lt;del&gt;HBASE-4280&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13469986" author="hudson" created="Fri, 5 Oct 2012 02:59:34 +0000"  >&lt;p&gt;Integrated in HBase-0.92-security #143 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92-security/143/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92-security/143/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6724&quot; title=&quot;Port HBASE-6165 &amp;#39;Replication can overrun .META. scans on cluster re-start&amp;#39; to 0.92&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6724&quot;&gt;&lt;del&gt;HBASE-6724&lt;/del&gt;&lt;/a&gt; Port &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6165&quot; title=&quot;Replication can overrun .META. scans on cluster re-start&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6165&quot;&gt;&lt;del&gt;HBASE-6165&lt;/del&gt;&lt;/a&gt; &apos;Replication can overrun .META. scans on cluster re-start&apos; to 0.92 (Revision 1381451)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/ipc/HBaseServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13624639" author="stack" created="Sun, 7 Apr 2013 04:35:02 +0000"  >&lt;p&gt;Fix up after bulk move overwrote some 0.94.2 fix versions w/ 0.95.0 (Noticed by Lars Hofhansl)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12543204" name="6165-v6.txt" size="17316" author="lhofhansl" created="Fri, 31 Aug 2012 00:05:26 +0000"/>
                            <attachment id="12542698" name="HBase-6165-94-v1.patch" size="16320" author="v.himanshu" created="Mon, 27 Aug 2012 23:58:11 +0000"/>
                            <attachment id="12542957" name="HBase-6165-94-v2.patch" size="16327" author="v.himanshu" created="Wed, 29 Aug 2012 18:13:20 +0000"/>
                            <attachment id="12540074" name="HBase-6165-v1.patch" size="6024" author="v.himanshu" created="Thu, 9 Aug 2012 17:05:31 +0000"/>
                            <attachment id="12540718" name="HBase-6165-v2.patch" size="6015" author="v.himanshu" created="Mon, 13 Aug 2012 18:33:23 +0000"/>
                            <attachment id="12541512" name="HBase-6165-v3.patch" size="14617" author="v.himanshu" created="Sun, 19 Aug 2012 02:41:29 +0000"/>
                            <attachment id="12541517" name="HBase-6165-v4.patch" size="14637" author="v.himanshu" created="Sun, 19 Aug 2012 07:00:06 +0000"/>
                            <attachment id="12543165" name="HBase-6165-v5.patch" size="14463" author="v.himanshu" created="Thu, 30 Aug 2012 21:21:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 16 Jun 2012 12:25:33 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>241914</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 36 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02grj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12317</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>