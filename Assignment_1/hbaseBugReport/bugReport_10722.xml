<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:16:33 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-10722/HBASE-10722.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-10722] [0.94] HRegion.computeHDFSBlocksDistribution does not account for links and reference files.</title>
                <link>https://issues.apache.org/jira/browse/HBASE-10722</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description></description>
                <environment></environment>
        <key id="12700786">HBASE-10722</key>
            <summary>[0.94] HRegion.computeHDFSBlocksDistribution does not account for links and reference files.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lhofhansl">Lars Hofhansl</assignee>
                                    <reporter username="lhofhansl">Lars Hofhansl</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 Mar 2014 19:07:38 +0000</created>
                <updated>Thu, 14 Aug 2014 20:20:08 +0000</updated>
                            <resolved>Fri, 14 Mar 2014 01:05:19 +0000</resolved>
                                                    <fixVersion>0.94.18</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13930832" author="lhofhansl" created="Tue, 11 Mar 2014 19:34:58 +0000"  >&lt;p&gt;Please have a look.&lt;/p&gt;

&lt;p&gt;Then again, maybe this is pointless, HRegion.computeHDFSBlocksDistribution is only called from two places:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;TestHRegion&lt;/li&gt;
	&lt;li&gt;DefaultLoadBalancer.getTopBlockLocations (which is private is not called from anywhere ?!)&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Seems the entire method could just as well be removed.&lt;/p&gt;</comment>
                            <comment id="13930995" author="ndimiduk" created="Tue, 11 Mar 2014 21:45:42 +0000"  >&lt;p&gt;FSUtils#computeHDFSBlocksDistribution looks like the more commonly used implementation. The fix should go there and this method removed from HRegion.&lt;/p&gt;

&lt;p&gt;Patch looks good otherwise &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13931069" author="lhofhansl" created="Tue, 11 Mar 2014 22:33:32 +0000"  >&lt;p&gt;Thanks Nick.&lt;/p&gt;

&lt;p&gt;Hmm... StoreFile.computeRefFileHDFSBlockDistribution is also calling that, and doing the right thing (in fact that&apos;s where I looked as how it&apos;s done correctly).&lt;br/&gt;
The other place is CompactionInputFormat, and that&apos;s also not right (also wrong in trunk).&lt;br/&gt;
I think FSUtil should stay at the FS level, and not know much about HBase specifics. In trunk we have HRegionFileSystem, but not in 0.94. Then again in trunk I see stuff like getRegionDegreeLocalityMappingFromFS in FSUtil. What a mess.&lt;/p&gt;

&lt;p&gt;I think for 0.94 it&apos;s best to fix it in HRegion. I would just remove it, but coprocessor might call it (and currently get wrong results).&lt;/p&gt;</comment>
                            <comment id="13931333" author="enis" created="Wed, 12 Mar 2014 03:10:02 +0000"  >&lt;p&gt;+1 on fixing it in HRegion. We do not have to clean that up. &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;The other place is CompactionInputFormat, and that&apos;s also not right (also wrong in trunk).&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;It seems like HRegionFS is the right place to make this consumable. &lt;/p&gt;</comment>
                            <comment id="13934383" author="lhofhansl" created="Fri, 14 Mar 2014 00:59:13 +0000"  >&lt;p&gt;OK. Lemme commit this here. (needed for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10642&quot; title=&quot;Add M/R over snapshots to 0.94&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10642&quot;&gt;&lt;del&gt;HBASE-10642&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="13934387" author="lhofhansl" created="Fri, 14 Mar 2014 01:05:19 +0000"  >&lt;p&gt;Committed to 0.94.&lt;/p&gt;</comment>
                            <comment id="13934418" author="hudson" created="Fri, 14 Mar 2014 01:24:40 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.94-JDK7 #84 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-JDK7/84/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-JDK7/84/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10722&quot; title=&quot;[0.94] HRegion.computeHDFSBlocksDistribution does not account for links and reference files.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10722&quot;&gt;&lt;del&gt;HBASE-10722&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;0.94&amp;#93;&lt;/span&gt; HRegion.computeHDFSBlocksDistribution does not account for links and reference files. (larsh: rev 1577404)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13934478" author="hudson" created="Fri, 14 Mar 2014 02:28:55 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.94-on-Hadoop-2 #50 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-on-Hadoop-2/50/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-on-Hadoop-2/50/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10722&quot; title=&quot;[0.94] HRegion.computeHDFSBlocksDistribution does not account for links and reference files.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10722&quot;&gt;&lt;del&gt;HBASE-10722&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;0.94&amp;#93;&lt;/span&gt; HRegion.computeHDFSBlocksDistribution does not account for links and reference files. (larsh: rev 1577404)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13934495" author="hudson" created="Fri, 14 Mar 2014 02:43:23 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.94-security #440 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/440/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/440/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10722&quot; title=&quot;[0.94] HRegion.computeHDFSBlocksDistribution does not account for links and reference files.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10722&quot;&gt;&lt;del&gt;HBASE-10722&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;0.94&amp;#93;&lt;/span&gt; HRegion.computeHDFSBlocksDistribution does not account for links and reference files. (larsh: rev 1577404)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13934500" author="hudson" created="Fri, 14 Mar 2014 02:58:48 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.94 #1321 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/1321/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/1321/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10722&quot; title=&quot;[0.94] HRegion.computeHDFSBlocksDistribution does not account for links and reference files.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10722&quot;&gt;&lt;del&gt;HBASE-10722&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;0.94&amp;#93;&lt;/span&gt; HRegion.computeHDFSBlocksDistribution does not account for links and reference files. (larsh: rev 1577404)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12698006">HBASE-10642</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12633987" name="10722.txt" size="3289" author="lhofhansl" created="Tue, 11 Mar 2014 19:34:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 11 Mar 2014 21:45:42 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>379129</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 40 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1tbsf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>379421</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>