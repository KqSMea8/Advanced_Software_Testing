<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:12:16 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-10281/HBASE-10281.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-10281] TestMultiParallel.testFlushCommitsNoAbort fails frequently in 0.94</title>
                <link>https://issues.apache.org/jira/browse/HBASE-10281</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Here&apos;s a run (with JDK7, but I&apos;ve seen it with 0.96 as well).&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-JDK7/17/testReport/junit/org.apache.hadoop.hbase.client/TestMultiParallel/testFlushCommitsNoAbort/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-JDK7/17/testReport/junit/org.apache.hadoop.hbase.client/TestMultiParallel/testFlushCommitsNoAbort/&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Error Message

Count of regions=10

Stacktrace

java.lang.AssertionError: Count of regions=10
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.assertTrue(Assert.java:41)
	at org.apache.hadoop.hbase.client.TestMultiParallel.doTestFlushCommits(TestMultiParallel.java:289)
	at org.apache.hadoop.hbase.client.TestMultiParallel.testFlushCommitsNoAbort(TestMultiParallel.java:222)
        ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This might be a side-effect of: &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10259&quot; title=&quot;[0.94] Upgrade JUnit to 4.11&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10259&quot;&gt;&lt;del&gt;HBASE-10259&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12687345">HBASE-10281</key>
            <summary>TestMultiParallel.testFlushCommitsNoAbort fails frequently in 0.94</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lhofhansl">Lars Hofhansl</assignee>
                                    <reporter username="lhofhansl">Lars Hofhansl</reporter>
                        <labels>
                    </labels>
                <created>Sun, 5 Jan 2014 04:10:23 +0000</created>
                <updated>Tue, 21 Jan 2014 01:31:39 +0000</updated>
                            <resolved>Fri, 10 Jan 2014 00:52:08 +0000</resolved>
                                                    <fixVersion>0.94.16</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13867321" author="lhofhansl" created="Fri, 10 Jan 2014 00:14:05 +0000"  >&lt;p&gt;So looking at the failure, I do not actually understand what the test is try to do.&lt;br/&gt;
The offending part is here (in doTestFlushCommits called from testFlushCommitsNoAbort):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (JVMClusterUtil.RegionServerThread t: liveRSs) {
      &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; regions = t.getRegionServer().getOnlineRegions().size();
      Assert.assertTrue(&lt;span class=&quot;code-quote&quot;&gt;&quot;Count of regions=&quot;&lt;/span&gt; + regions, regions &amp;gt; 10);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So this verifies that each RS has at least 10 regions. We start out with creating 25 regions, at we have two RSs in this test. So this part would only pass if the cluster is nicely balanced. (It tries to balance before each test, but either that is not finished or it is not doing it perfectly at all time).&lt;/p&gt;

&lt;p&gt;In any case, we&apos;re not testing the balancer. So in the end we only need to check that we have at least 25 regions - &lt;b&gt;if&lt;/b&gt; we want to check that at all. Before we get here we have verified that all rows are expecting are in fact present.&lt;/p&gt;</comment>
                            <comment id="13867328" author="lhofhansl" created="Fri, 10 Jan 2014 00:21:23 +0000"  >&lt;p&gt;And that observation would lead me to this fix.&lt;/p&gt;</comment>
                            <comment id="13867334" author="apurtell" created="Fri, 10 Jan 2014 00:26:13 +0000"  >&lt;p&gt;Seems reasonable to me. +1&lt;/p&gt;</comment>
                            <comment id="13867339" author="lhofhansl" created="Fri, 10 Jan 2014 00:33:40 +0000"  >&lt;p&gt;Looks like 0.96 and later have better mechanisms to wait for a balance to finish.&lt;br/&gt;
I&apos;ll only apply this to 0.94.&lt;/p&gt;</comment>
                            <comment id="13867360" author="lhofhansl" created="Fri, 10 Jan 2014 00:52:08 +0000"  >&lt;p&gt;Committed to 0.94.&lt;br/&gt;
Thanks for taking a look &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12622300" name="10281-0.94.txt" size="1226" author="lhofhansl" created="Fri, 10 Jan 2014 00:21:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 10 Jan 2014 00:26:13 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366344</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 49 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1r5cf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366655</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>