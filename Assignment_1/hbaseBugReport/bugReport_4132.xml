<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:16:11 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-4132/HBASE-4132.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-4132] Extend the WALActionsListener API to accomodate log archival</title>
                <link>https://issues.apache.org/jira/browse/HBASE-4132</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The WALObserver interface exposes the log roll events. It would be nice to extend it to accomodate log archival events as well.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12515175">HBASE-4132</key>
            <summary>Extend the WALActionsListener API to accomodate log archival</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dhruba">dhruba borthakur</assignee>
                                    <reporter username="dhruba">dhruba borthakur</reporter>
                        <labels>
                    </labels>
                <created>Sun, 24 Jul 2011 01:21:07 +0000</created>
                <updated>Fri, 12 Oct 2012 05:35:12 +0000</updated>
                            <resolved>Sun, 25 Sep 2011 13:57:12 +0000</resolved>
                                                    <fixVersion>0.94.0</fixVersion>
                                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                            <comments>
                            <comment id="13070085" author="dhruba" created="Sun, 24 Jul 2011 01:38:36 +0000"  >&lt;p&gt;Added two new methods to the WALObserver interface:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

  /**
   * The WAL needs to be archived. 
   * It is going to be moved from oldPath to newPath.
   * @param oldPath the path to the old hlog
   * @param newPath the path to the &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; hlog
   */
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void logArchiveStart(Path oldPath, Path newPath) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException;

  /**
   * The WAL has been archived.
   * It is moved from oldPath to newPath.
   * @param oldPath the path to the old hlog
   * @param newPath the path to the &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; hlog
   * @param archivalWasSuccessful &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the archival was successful
   */
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void logArchiveComplete(Path oldPath, Path newPath,
    &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; archivalWasSuccessful) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException;

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Any backward compatibility issues I need to think about? Especially since this has been a public API. &lt;/p&gt;</comment>
                            <comment id="13070095" author="stack" created="Sun, 24 Jul 2011 04:11:18 +0000"  >&lt;p&gt;+1 on patch.  We could put it into a 0.90.5 if wanted since this is all internal APIs.  Otherwise it&apos;ll go into 0.92.&lt;/p&gt;

&lt;p&gt;I&apos;ll let it hang out a little while before committing.  J-D or Gary might have opinions.&lt;/p&gt;</comment>
                            <comment id="13070097" author="stack" created="Sun, 24 Jul 2011 04:22:02 +0000"  >&lt;p&gt;There is also master/LogCleaner.java.  You know about that?  It takes plugins that say whether or not a log should be deleted.  You interested in this at all?&lt;/p&gt;</comment>
                            <comment id="13070107" author="dhruba" created="Sun, 24 Jul 2011 05:19:07 +0000"  >&lt;p&gt;stack: I did not even know the existence of master/LogCleaner. Thanks a bunch for pointing it out. Definitely will look into that.&lt;/p&gt;</comment>
                            <comment id="13070246" author="apurtell" created="Sun, 24 Jul 2011 20:49:47 +0000"  >&lt;p&gt;The WALObserver API additions should follow the same practice as providing before (pre) and after (post) hooks as everywhere else.&lt;/p&gt;</comment>
                            <comment id="13070247" author="apurtell" created="Sun, 24 Jul 2011 20:51:13 +0000"  >&lt;p&gt;Cancelling patch.&lt;/p&gt;</comment>
                            <comment id="13070349" author="dhruba" created="Mon, 25 Jul 2011 07:33:05 +0000"  >&lt;p&gt;stack: the LogCleaner api allows archived logs to be deleted according to a configurable policy. One can set hbase.master.logcleaner.plugins to setup his own policy. In that sense, it is already pluggable. Moreover, this is done by the master whereas the WALObserver interface is in the RegionServer. Given the above, do you think that this patch needs to touch LogCleaner at all? If so, what is ur proposal?&lt;/p&gt;

&lt;p&gt;Andrew: &quot;The WALObserver API additions should follow the same practice as providing before (pre) and after (post) hooks as everywhere else&quot;. In that sense, it already has logRollRequested and logRolled. Similarly, I added logArchiveStart and logArchiveCompleted. The remaining one is &quot;visitLogEntryBeforeWrite&quot;. are you suggesting that we add a &quot;visitLogEntryAfterWrite&quot; as well? &lt;/p&gt;</comment>
                            <comment id="13070588" author="apurtell" created="Mon, 25 Jul 2011 16:25:37 +0000"  >&lt;p&gt;@dhruba Thanks. For example should be preArchiveStart and postArchiveStart, preArchiveCompleted and postArchiveCompleted. In part it is a naming convention, in part it is a contract: Pre hooks allow introduction of preprocessing and also important override of default behavior and associated short-circuiting of base processing or any additional coprocessors. Post hooks allow introduction of postprocessing and modification of return values.&lt;/p&gt;</comment>
                            <comment id="13070752" author="stack" created="Mon, 25 Jul 2011 20:57:51 +0000"  >&lt;p&gt;@Dhruba&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Given the above, do you think that this patch needs to touch LogCleaner at all? If so, what is ur proposal?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;No proposal.  Just wanted to point you at some utility we have already that you might not have known about and that might have helped you composing your addition.&lt;/p&gt;
</comment>
                            <comment id="13070825" author="ghelmling" created="Mon, 25 Jul 2011 22:26:48 +0000"  >&lt;p&gt;Hmm, this seems to be a confusion of &lt;tt&gt;org.apache.hadoop.hbase.regionserver.wal.WALObserver&lt;/tt&gt; and &lt;tt&gt;org.apache.hadoop.hbase.coprocessor.WALObserver&lt;/tt&gt;.  Not surprising since both classes have the same name.  I think the former is the &quot;WAL listener&quot; used in replication and the latter is the coprocessor interface for WALs.  I know the former has been around longer, but maybe we should consider renaming it to WALListener.  Or maybe we should bite the bullet and combine these two interfaces to one.  (I say that knowing very little about replication and whether it would make sense/be feasible to convert it to a coprocessor implementation).&lt;/p&gt;

&lt;p&gt;Anyway, I see no problem adding &lt;tt&gt;pre/postArchiveStart&lt;/tt&gt; and &lt;tt&gt;pre/postArchiveCompleted&lt;/tt&gt; to &lt;tt&gt;org.apache.hadoop.hbase.coprocessor.WALObserver&lt;/tt&gt;, as Andy mentions.  Would that be sufficient, or should we look at adding the logRoll and logClose events from &lt;tt&gt;o.a.h.h.regionserver.wal.WALObserver&lt;/tt&gt; as well?&lt;/p&gt;</comment>
                            <comment id="13070832" author="stack" created="Mon, 25 Jul 2011 22:37:43 +0000"  >&lt;p&gt;+1 on one interface only.  J-D!&lt;/p&gt;</comment>
                            <comment id="13070835" author="stack" created="Mon, 25 Jul 2011 22:41:47 +0000"  >&lt;p&gt;Or, one should inherit from the other rather than repeat.&lt;/p&gt;</comment>
                            <comment id="13070863" author="jdcryans" created="Mon, 25 Jul 2011 23:52:21 +0000"  >&lt;p&gt;It could be weird, if we just merge them then the Replication class (and others implementing wal.WALObserver in the future) would have imports for CP classes since ObserverContext is passed in the cp.WALObserver methods. I&apos;d prefer a rename of either or both. &lt;/p&gt;</comment>
                            <comment id="13070877" author="apurtell" created="Tue, 26 Jul 2011 00:45:58 +0000"  >&lt;blockquote&gt;&lt;p&gt;Hmm, this seems to be a confusion of org.apache.hadoop.hbase.regionserver.wal.WALObserver and org.apache.hadoop.hbase.coprocessor.WALObserver. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Aha.&lt;/p&gt;

&lt;p&gt;I agree with J-D, should do a rename.&lt;/p&gt;</comment>
                            <comment id="13070887" author="yuzhihong@gmail.com" created="Tue, 26 Jul 2011 01:08:16 +0000"  >&lt;p&gt;org.apache.hadoop.hbase.regionserver.wal.WALObserver is mostly internal.&lt;br/&gt;
It is used for LogRoller and replication.&lt;br/&gt;
Shall we rename it to org.apache.hadoop.hbase.regionserver.wal.WALActionsListener ?&lt;br/&gt;
See HRegionServer.getWALActionListeners():&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      &lt;span class=&quot;code-comment&quot;&gt;// Replication handler is an implementation of WALActionsListener.
&lt;/span&gt;      listeners.add(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.replicationHandler);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13070946" author="jdcryans" created="Tue, 26 Jul 2011 04:49:50 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13093378" author="yuzhihong@gmail.com" created="Tue, 30 Aug 2011 02:26:46 +0000"  >&lt;p&gt;@Andrew:&lt;br/&gt;
Do you think the following signature is close to what&apos;s in your mind ?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Path preLogArchiveStart(Path oldPath, Path newPath) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Basically null return value means skipping log archival. Otherwise the return value should be used as the effective newPath.&lt;/p&gt;</comment>
                            <comment id="13093403" author="sunnygao" created="Tue, 30 Aug 2011 03:15:23 +0000"  >&lt;p&gt;Whether we can add the following api?&lt;/p&gt;

&lt;p&gt; /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;The WAL needs to be archived. It is going to be moved from oldPath to&lt;/li&gt;
	&lt;li&gt;newPath.&lt;/li&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;@param oldPath&lt;/li&gt;
	&lt;li&gt;the path to the old hlog&lt;/li&gt;
	&lt;li&gt;@param newPath&lt;/li&gt;
	&lt;li&gt;the path to the new hlog&lt;/li&gt;
	&lt;li&gt;@return true if default behavior should be bypassed, false otherwise&lt;br/&gt;
   */&lt;br/&gt;
  boolean preArchiveLog(Path oldPath, Path newPath) throws IOException;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;  /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;The WAL has been archived. It is moved from oldPath to newPath.&lt;/li&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;@param oldPath&lt;/li&gt;
	&lt;li&gt;the path to the old hlog&lt;/li&gt;
	&lt;li&gt;@param newPath&lt;/li&gt;
	&lt;li&gt;the path to the new hlog&lt;/li&gt;
	&lt;li&gt;@param archivalWasSuccessful&lt;/li&gt;
	&lt;li&gt;true, if the archival was successful&lt;br/&gt;
   */&lt;br/&gt;
  void postArchiveLog(Path oldPath, Path newPath,&lt;br/&gt;
      boolean archivalWasSuccessful) throws IOException;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13094296" author="yuzhihong@gmail.com" created="Wed, 31 Aug 2011 04:20:45 +0000"  >&lt;p&gt;Lack of response.&lt;br/&gt;
Can move back into 0.92 when there is a clear use case.&lt;/p&gt;</comment>
                            <comment id="13109793" author="dhruba" created="Wed, 21 Sep 2011 19:14:50 +0000"  >&lt;p&gt;I am getting back to this one. Here is the modified proposal as suggested by Andrew. I will remove WALActionsListener.logRolled and introduce the following methods to WALActionsListener:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;


  /**
   * The WAL is going to be rolled.
   * @param oldPath the path to the old hlog
   * @param newPath the path to the &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; hlog
   */
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void preLogRoll(Path oldPath, Path newPath) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException;

  /**
   * The WAL has been rolled.
   * @param oldPath the path to the old hlog
   * @param newPath the path to the &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; hlog
   */
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void postLogRoll(Path oldPath, Path newPath) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException;

  /**
   * The WAL is going to be archived.
   * @param oldPath the path to the old hlog
   * @param newPath the path to the &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; hlog
   */
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void preLogArchive(Path oldPath, Path newPath) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException;

  /**
   * The WAL has been archived.
   * @param oldPath the path to the old hlog
   * @param newPath the path to the &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; hlog
   */
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void postLogArchive(Path oldPath, Path newPath) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException;

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13109795" author="dhruba" created="Wed, 21 Sep 2011 19:15:38 +0000"  >&lt;p&gt;New patch that introduces pre/post methods in WALActionsListener.&lt;/p&gt;</comment>
                            <comment id="13112249" author="streamy" created="Thu, 22 Sep 2011 00:05:03 +0000"  >&lt;p&gt;Looks good.  One thing:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;oldPath = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Path(&lt;span class=&quot;code-quote&quot;&gt;&quot;/DUMMY-No-preexisting-logfile&quot;&lt;/span&gt;);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Should we support passing a null path or at least use a static?&lt;/p&gt;</comment>
                            <comment id="13112271" author="dhruba" created="Thu, 22 Sep 2011 01:00:05 +0000"  >&lt;p&gt;Addressed Jgrays&apos; review comments. The API documents that oldPath may be null.&lt;/p&gt;</comment>
                            <comment id="13113646" author="stack" created="Fri, 23 Sep 2011 18:35:29 +0000"  >&lt;p&gt;Committed to TRUNK.  Thanks for the patch Dhruba.&lt;/p&gt;</comment>
                            <comment id="13113777" author="hudson" created="Fri, 23 Sep 2011 21:18:09 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2246 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2246/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2246/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4132&quot; title=&quot;Extend the WALActionsListener API to accomodate log archival&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4132&quot;&gt;&lt;del&gt;HBASE-4132&lt;/del&gt;&lt;/a&gt; Extend the WALActionsListener API to accomodate log archival&lt;/p&gt;

&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/LogRoller.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLog.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/wal/WALActionsListener.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/replication/regionserver/Replication.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestHLog.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestLogRolling.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestWALActionsListener.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13113866" author="lhofhansl" created="Sat, 24 Sep 2011 01:43:19 +0000"  >&lt;p&gt;Any plan to also add this to org.apache.hadoop.hbase.coprocessor.WALObserver?&lt;br/&gt;
I&apos;m happy to prepare a patch for that, maybe in a different jira.&lt;/p&gt;</comment>
                            <comment id="13113893" author="yuzhihong@gmail.com" created="Sat, 24 Sep 2011 04:57:43 +0000"  >&lt;p&gt;Running TestLogRolling#testLogRollOnPipelineRestart in debugger, I got:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.AssertionError: preLogRolledCalled has size of 3
	at org.junit.Assert.fail(Assert.java:91)
	at org.junit.Assert.assertTrue(Assert.java:43)
	at org.apache.hadoop.hbase.regionserver.wal.TestLogRolling.testLogRollOnPipelineRestart(TestLogRolling.java:311)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The first two calls were:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
TestLogRolling$1.preLogRoll(Path, Path) line: 245
HLog.rollWriter(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;) line: 564      
LogRoller.run() line: 93
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The third one was:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
TestLogRolling$1.preLogRoll(Path, Path) line: 245	
HLog.rollWriter(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;) line: 564	
TestLogRolling.testLogRollOnPipelineRestart() line: 310	
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13113895" author="yuzhihong@gmail.com" created="Sat, 24 Sep 2011 05:19:27 +0000"  >&lt;p&gt;Here is the addendum.&lt;br/&gt;
TestLogRolling#testLogRollOnPipelineRestart passed on my MacBook.&lt;br/&gt;
Let me see if the addendum helps on Jenkins.&lt;/p&gt;</comment>
                            <comment id="13113929" author="hudson" created="Sat, 24 Sep 2011 08:04:04 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2248 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2248/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2248/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4132&quot; title=&quot;Extend the WALActionsListener API to accomodate log archival&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4132&quot;&gt;&lt;del&gt;HBASE-4132&lt;/del&gt;&lt;/a&gt; Addendum adjusts the expected value for preLogRolledCalled.size()&lt;/p&gt;

&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestLogRolling.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13113947" author="yuzhihong@gmail.com" created="Sat, 24 Sep 2011 10:20:37 +0000"  >&lt;p&gt;Second attempt at making Jenkins happy.&lt;/p&gt;</comment>
                            <comment id="13113956" author="hudson" created="Sat, 24 Sep 2011 12:03:58 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2249 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2249/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2249/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4132&quot; title=&quot;Extend the WALActionsListener API to accomodate log archival&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4132&quot;&gt;&lt;del&gt;HBASE-4132&lt;/del&gt;&lt;/a&gt; Addendum 2 adjusts the expected value for preLogRolledCalled.size()&lt;/p&gt;

&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestLogRolling.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13113978" author="yuzhihong@gmail.com" created="Sat, 24 Sep 2011 14:01:09 +0000"  >&lt;p&gt;This is from TRUNK build 2249:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.AssertionError: preLogRolledCalled has size of 4
	at org.junit.Assert.fail(Assert.java:91)
	at org.junit.Assert.assertTrue(Assert.java:43)
	at org.apache.hadoop.hbase.regionserver.wal.TestLogRolling.testLogRollOnPipelineRestart(TestLogRolling.java:491)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We need to decide the proper assertion w.r.t. preLogRolledCalled which may have size of 3 or 4.&lt;/p&gt;</comment>
                            <comment id="13114096" author="dhruba" created="Sat, 24 Sep 2011 23:06:21 +0000"  >&lt;p&gt;This was an assert that my earlier patch added to the unit test. This assert was incorrect. Here is the correct fix for it. &lt;/p&gt;</comment>
                            <comment id="13114100" author="yuzhihong@gmail.com" created="Sat, 24 Sep 2011 23:22:20 +0000"  >&lt;p&gt;I was thinking along the same line.&lt;br/&gt;
Addendum applied to TRUNK.&lt;/p&gt;

&lt;p&gt;Thanks for the addendum Dhruba.&lt;/p&gt;</comment>
                            <comment id="13114110" author="hudson" created="Sun, 25 Sep 2011 01:18:45 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2253 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2253/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2253/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4132&quot; title=&quot;Extend the WALActionsListener API to accomodate log archival&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4132&quot;&gt;&lt;del&gt;HBASE-4132&lt;/del&gt;&lt;/a&gt; Addendum from Dhruba&lt;/p&gt;

&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestLogRolling.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13114262" author="yuzhihong@gmail.com" created="Sun, 25 Sep 2011 13:57:12 +0000"  >&lt;p&gt;TRUNK build 2257 passed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12496358" name="4132.add2" size="715" author="yuzhihong@gmail.com" created="Sat, 24 Sep 2011 10:20:37 +0000"/>
                            <attachment id="12496352" name="4132.addendum" size="1032" author="yuzhihong@gmail.com" created="Sat, 24 Sep 2011 05:19:27 +0000"/>
                            <attachment id="12487619" name="walArchive.txt" size="5702" author="dhruba" created="Sun, 24 Jul 2011 01:38:36 +0000"/>
                            <attachment id="12495428" name="walArchive2.txt" size="11011" author="dhruba" created="Wed, 21 Sep 2011 19:15:38 +0000"/>
                            <attachment id="12496055" name="walArchive3.txt" size="11458" author="dhruba" created="Thu, 22 Sep 2011 01:00:05 +0000"/>
                            <attachment id="12496374" name="walArchive4.addendum.txt" size="715" author="dhruba" created="Sat, 24 Sep 2011 23:06:21 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12515957">HBASE-4152</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 24 Jul 2011 04:11:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3465</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 12 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08qin:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48896</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Add pre and post archiving methods to WALObserver</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>