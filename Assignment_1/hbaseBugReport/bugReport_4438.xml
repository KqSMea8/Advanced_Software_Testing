<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:18:55 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-4438/HBASE-4438.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-4438] Speed the build test phase</title>
                <link>https://issues.apache.org/jira/browse/HBASE-4438</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;We&apos;re up to 2hrs 15mins running tests on jenkins which is kinda crazy.  Akash started a thread over in dev on fixing this: &lt;a href=&quot;http://search-hadoop.com/m/cZjDH1ykGIA/Running+UnitTests+before+submitting+a+patch&amp;amp;subj=Running+UnitTests+before+submitting+a+patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://search-hadoop.com/m/cZjDH1ykGIA/Running+UnitTests+before+submitting+a+patch&amp;amp;subj=Running+UnitTests+before+submitting+a+patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Jessie brings up &lt;a href=&quot;http://maven.apache.org/plugins/maven-failsafe-plugin/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://maven.apache.org/plugins/maven-failsafe-plugin/&lt;/a&gt; which looks like something we need to start using; having a tiering of our testing would make sense to me.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12523582">HBASE-4438</key>
            <summary>Speed the build test phase</summary>
                <type id="14" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/genericissue.png">Umbrella</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="4">Incomplete</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Mon, 19 Sep 2011 17:08:07 +0000</created>
                <updated>Sat, 11 Apr 2015 00:50:51 +0000</updated>
                            <resolved>Sat, 11 Apr 2015 00:50:51 +0000</resolved>
                                                                    <component>test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13107987" author="ram_krish" created="Mon, 19 Sep 2011 17:09:56 +0000"  >&lt;p&gt;+1 for this JIRA&lt;/p&gt;</comment>
                            <comment id="13108322" author="jesse_yates" created="Tue, 20 Sep 2011 01:58:47 +0000"  >&lt;p&gt;Been thinking about the issue of how we want to handle breaking out the integration tests. &lt;/p&gt;

&lt;p&gt;&lt;b&gt;Option 1&lt;/b&gt;&lt;br/&gt;
we can have all the tests (integration and unit) in a single source folder (hbase/src/test/java/*) which then uses standard conventions for naming to ensure things are run correctly - ie at the right time&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Unit tests would remain in the standard format ( &amp;#42;&amp;#42;/&amp;#42;Test.java, &amp;#42;&amp;#42;/Test&amp;#42;.java, **/*TestCase.java)&lt;/li&gt;
	&lt;li&gt;integration tests would move to a similar format ( &amp;#42;&amp;#42;/&amp;#42;IT.java, &amp;#42;&amp;#42;/IT&amp;#42;.java, **/*ITCase.java)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; we can move integration tests to their own sub-module of hbase. This would be a little more of a radical change. &lt;/p&gt;</comment>
                            <comment id="13108331" author="jesse_yates" created="Tue, 20 Sep 2011 02:15:37 +0000"  >&lt;p&gt;(sorry, miss click - here are the rest of the details)&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Option 2&lt;/b&gt;&lt;br/&gt;
We move refactor hbase into a top level pom w/ several sub-packages. This helps to break out different concerns. It will also be good later if we want to break out core into a couple different pieces. Right now this would just entail a slight change in structure:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hbase/
   /hbase-core
   /hbase-it
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;where hbase-it would have the integration tests, utils for the tests, and unit tests of those utils. It would be a &apos;full&apos; package. Again we stick to the above naming convention (or specify our own) for integration tests&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Option 3&lt;/b&gt;&lt;br/&gt;
Similar to the above, but we only make hbase-it a submodule of hbase (leave the structure the same). This still remains a full featured package. The directory structure looks like this:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hbase/
  /src/main/java
  ...
  /hbase-it
    /src/main/java
    ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Right now, I can&apos;t figure out how to get the maven-failsafe-plugin to read from a directory other than /src/test/java, but if I can figure it out, that would be best when combined with Option 1 - keeps same structure, breaks out integration tests. &lt;/p&gt;

&lt;p&gt;Given that, I am more inclined to go with Option 2 or 3. These helps break out concerns into different packages, rather than munging them all together. &lt;/p&gt;

&lt;p&gt;Working on a patch now for #3  - its the simplest to break out. #2 wouldn&apos;t be terrible, but would require more delicacy. #1 is simple and is a matter of minutes, if we want to go that route.&lt;/p&gt;


&lt;p&gt;What does everyone think? &lt;/p&gt;</comment>
                            <comment id="13108341" author="tlipcon" created="Tue, 20 Sep 2011 03:00:28 +0000"  >&lt;p&gt;My preference is to use JUnit category annotations - with &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-329&quot; title=&quot;Support for JUNIT extensions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-329&quot;&gt;&lt;del&gt;SUREFIRE-329&lt;/del&gt;&lt;/a&gt; we can easily separate long tests from short. Moving tests to separate subdirs seems a little painful to me...&lt;/p&gt;

&lt;p&gt;I agree that true integration/system tests should go to a separate dir - but those should be able to be run against a real cluster without ever accessing daemons directly. We have many minicluster tests that inject failures, etc, and to call them integration tests is a bit misleading. Rather they&apos;re just &quot;long functional tests&quot;.&lt;/p&gt;</comment>
                            <comment id="13108347" author="jesse_yates" created="Tue, 20 Sep 2011 03:23:18 +0000"  >&lt;p&gt;I agree that those kind of tests still count as functional. When you are injecting faults into it, I would also worry about whats going to happen on the backend, when you are reusing the minicluster for multiple tests.&lt;/p&gt;

&lt;p&gt;It would be cool if we can then break out short and long running functional tests and run them as desired.&lt;/p&gt;

&lt;p&gt;However, as Doug commented on the thread though, the mini cluster is used in a lot of cases to do true functional testing (spin up mini cluster w/ a single node, do some stuff, then shut it down). I feel like there should be a fair number of non-daemon-interacting &apos;unit&apos; tests which really shouldn&apos;t be considered unit tests. &lt;/p&gt;

&lt;p&gt;I don&apos;t have any experience tying in annotations to the build system, but I would be interested to see how that would all work.&lt;/p&gt;

&lt;p&gt;I feel like it still makes sense to break out integration tests, we just need to be careful about how we do it. What do you think?&lt;/p&gt;</comment>
                            <comment id="13108373" author="stack" created="Tue, 20 Sep 2011 04:46:59 +0000"  >&lt;p&gt;Regards &apos;Option 2&apos;, the break-up of hbase into modules is going to happen in TRUNK for other reasons so you can assume submodules a non-obstacle &amp;#8211; for TRUNK; modules will not happen for 0.92 branch.&lt;/p&gt;

&lt;p&gt;On integration tests, going by Todd definition, we need to do those too.  On &quot;long-running functional tests&quot;, yes would be grand to break them apart.  I&apos;d be fine with renaming long tests with *LongRunningFunctionalTest suffix or some such so we could distinguish them before a &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-329&quot; title=&quot;Support for JUNIT extensions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-329&quot;&gt;&lt;del&gt;SUREFIRE-329&lt;/del&gt;&lt;/a&gt; shows up (On &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-329&quot; title=&quot;Support for JUNIT extensions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-329&quot;&gt;&lt;del&gt;SUREFIRE-329&lt;/del&gt;&lt;/a&gt;, Todd, you get around).&lt;/p&gt;</comment>
                            <comment id="13108377" author="tlipcon" created="Tue, 20 Sep 2011 05:18:36 +0000"  >&lt;p&gt;Highly recommend this article: &lt;a href=&quot;http://googletesting.blogspot.com/2009/07/software-testing-categorization.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://googletesting.blogspot.com/2009/07/software-testing-categorization.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;ll keep campaigning to get &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-329&quot; title=&quot;Support for JUNIT extensions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-329&quot;&gt;&lt;del&gt;SUREFIRE-329&lt;/del&gt;&lt;/a&gt; in a release &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13108378" author="jesse_yates" created="Tue, 20 Sep 2011 05:24:58 +0000"  >&lt;p&gt;We could easily incorporate splitting out long run tests as part of the split recommended here.&lt;/p&gt;</comment>
                            <comment id="13108379" author="jesse_yates" created="Tue, 20 Sep 2011 05:25:37 +0000"  >&lt;p&gt;And by &quot;here&quot; I mean &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4336&quot; title=&quot;Convert source tree into maven modules&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4336&quot;&gt;&lt;del&gt;HBASE-4336&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13112185" author="mikhail" created="Wed, 21 Sep 2011 22:43:56 +0000"  >&lt;p&gt;If it is possible to annotate integration tests differently from unit tests without moving/renaming a lot of files, that would be a much better approach. We have a lot of patches queued up for open-sourcing, and moving a lot of files will make it very difficult to integrate them into trunk.&lt;/p&gt;</comment>
                            <comment id="13112816" author="jesse_yates" created="Thu, 22 Sep 2011 18:41:59 +0000"  >&lt;p&gt;Right now its not too hard to get the integration tests named differently to run in a separate phase (basically add in the failsafe plugin and rename them all to *&lt;b&gt;/IT&lt;/b&gt;.java, or whatever regex we want). However with the split proposed in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4336&quot; title=&quot;Convert source tree into maven modules&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4336&quot;&gt;&lt;del&gt;HBASE-4336&lt;/del&gt;&lt;/a&gt;, everything is going to move around anyways, so we might as well just get it done all together. &lt;/p&gt;

&lt;p&gt;Granted there is going to be some serious pain when we break out into modules.&lt;/p&gt;

&lt;p&gt;Adding ticket (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4454&quot; title=&quot;Add failsafe plugin to build and rename integration tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4454&quot;&gt;&lt;del&gt;HBASE-4454&lt;/del&gt;&lt;/a&gt;) so we can just do the integration tests with naming, for the moment.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12521509">HBASE-4336</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12527439">HBASE-4602</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 19 Sep 2011 17:09:56 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33555</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 13 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hqvz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>101618</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>