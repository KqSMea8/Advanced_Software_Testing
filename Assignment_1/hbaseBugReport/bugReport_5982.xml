<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:32:44 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5982/HBASE-5982.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5982] HBase Coprocessor Local Aggregation</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5982</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;In our application, we need to handle the following SQL-like process on hbase. There are very complex processes on each region, and the result of &apos;top #&apos; from each region will be sent back to the coprocessor client in the current region-based endpoint framework. &lt;/p&gt;

&lt;p&gt;Let&apos;s take the following SQL as an example. Suppose there are 100 regions in each RS and there are 100 RSs in the cluster, the client will receive 100*100*1M = 10G records from all the region, and then select top 1M records from 10G records. The client need much RAM to handle these data and the network of the cluster maybe the bottleneck.&lt;/p&gt;

&lt;p&gt;If we have the RS-based endpoint, each RS will handle parts of result from its regions, the client will receive 100*1M = 0.1G records. The burden of the client and the network will dramatically reduced. &lt;/p&gt;

&lt;p&gt;example: &lt;br/&gt;
select top 1000000 count(1) as A , sum(intRxlevDL)/count(intRxlevDL) as B , intBscPc as bscPc , intLac as LAC , intCI as CI from ftbMrMsg t1 where ( t1.dtTime &amp;gt;= &apos;2012-03-02 04:00:00.000&apos; and t1.dtTime &amp;lt; &apos;2012-03-02 05:00:00.000&apos; )group by bscPc , LAC , CI having B &amp;gt;= 0.2order by bscPc ASC , LAC ASC , CI ASC&lt;/p&gt;

&lt;p&gt;So far, the network is a bottleneck in our application when using coprocessor to handle the above SQL. I think the RS-based Endpoint is worth doing, especially for the &apos;top #&apos; process. What&apos;s your opinion about this? I think we can open a jira. &lt;/p&gt;</description>
                <environment>&lt;p&gt;cloudera-cdh3u3,hbase-0.92.1&lt;/p&gt;</environment>
        <key id="12554615">HBASE-5982</key>
            <summary>HBase Coprocessor Local Aggregation</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="4">Incomplete</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dengpeng">dengpeng</reporter>
                        <labels>
                            <label>Coprocessor</label>
                    </labels>
                <created>Thu, 10 May 2012 02:48:18 +0000</created>
                <updated>Mon, 11 Nov 2013 22:58:55 +0000</updated>
                            <resolved>Mon, 11 Nov 2013 20:21:36 +0000</resolved>
                                    <version>0.92.1</version>
                                                    <component>Coprocessors</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>11</watches>
                                    <timeoriginalestimate seconds="180">0.05h</timeoriginalestimate>
                            <timeestimate seconds="180">0.05h</timeestimate>
                                        <comments>
                            <comment id="13272044" author="dengpeng" created="Thu, 10 May 2012 02:52:28 +0000"  >&lt;p&gt;Now it realized the feature of locate aggregate based on RegionServer,will realse the first version after test.&lt;/p&gt;</comment>
                            <comment id="13272056" author="dengpeng" created="Thu, 10 May 2012 03:29:58 +0000"  >&lt;p&gt;now through the test for get top100 in the Htable of 20000000 data,with four Regionnserver and 864 regions(each RS is distributed about 200 regions),We find the improvement Coprocessor(base on RS) just takes 5995 millisecond to find the top100,while the Original Coprocessor(base on Region) takes 15079 millesecond.In the same time , the improvement Coprocessor reduces the network&apos;s burden. So I think this improvement is significant.&lt;/p&gt;</comment>
                            <comment id="13273135" author="dengpeng" created="Fri, 11 May 2012 09:29:01 +0000"  >&lt;p&gt;this is the design document&lt;/p&gt;</comment>
                            <comment id="13273217" author="dengpeng" created="Fri, 11 May 2012 13:04:44 +0000"  >&lt;p&gt;now this is the first version&lt;/p&gt;</comment>
                            <comment id="13273262" author="zhihyu@ebaysf.com" created="Fri, 11 May 2012 13:53:58 +0000"  >&lt;p&gt;Considering the size of the patch, design document would help evaluate the feature.&lt;/p&gt;

&lt;p&gt;Please re-attach the desgin doc.&lt;/p&gt;</comment>
                            <comment id="13273377" author="zhihyu@ebaysf.com" created="Fri, 11 May 2012 15:58:17 +0000"  >&lt;p&gt;The patch cannot be applied to trunk.&lt;/p&gt;

&lt;p&gt;Please use trunk as the base for your next patch.&lt;/p&gt;</comment>
                            <comment id="13273413" author="zhihyu@ebaysf.com" created="Fri, 11 May 2012 16:50:15 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+ &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &amp;lt;R, S&amp;gt; List&amp;lt;R&amp;gt; top(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] tableName,
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Please leave two leading spaces for method. See &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5961&quot; title=&quot;New standard HBase code formatter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5961&quot;&gt;&lt;del&gt;HBASE-5961&lt;/del&gt;&lt;/a&gt; for an Eclipse formatter.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+     List&amp;lt;R&amp;gt; getMax() {
+       &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; top;
+     }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;MaxCallBack originally returned one scalar. Please create a new CallBack, TopCallBack, for the &apos;top&apos; operation.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+       &lt;span class=&quot;code-comment&quot;&gt;//log.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;****the top&quot;&lt;/span&gt;+topNum+ &lt;span class=&quot;code-quote&quot;&gt;&quot; value come from RegionServer=&quot;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Please remove all commented out log statements.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+ &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &amp;lt;R, S&amp;gt; R max1(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] tableName,
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Please don&apos;t rename existing public method - this would cause regression.&lt;/p&gt;

&lt;p&gt;For coprocessor/Exec.java, please add versioning since a new field, regionNameList, is serialized.&lt;/p&gt;</comment>
                            <comment id="13408134" author="hewei" created="Fri, 6 Jul 2012 16:29:40 +0000"  >&lt;p&gt;Do you implement sql interface for hbase?&lt;/p&gt;</comment>
                            <comment id="13488061" author="apurtell" created="Wed, 31 Oct 2012 18:30:21 +0000"  >&lt;p&gt;Where are the attachments on this issue?&lt;/p&gt;</comment>
                            <comment id="13819330" author="apurtell" created="Mon, 11 Nov 2013 20:21:36 +0000"  >&lt;p&gt;No patch and no activity for a year, resolving as &apos;Incomplete&apos;&lt;/p&gt;</comment>
                            <comment id="13819553" author="lhofhansl" created="Mon, 11 Nov 2013 22:58:55 +0000"  >&lt;p&gt;This can also be done with Phoenix now.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 11 May 2012 13:53:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>238865</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 5 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02erb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11992</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>