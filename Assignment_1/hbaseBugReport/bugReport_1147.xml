<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:51:08 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1147/HBASE-1147.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1147] Modify the scripts to use Zookeeper</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1147</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description></description>
                <environment></environment>
        <key id="12412931">HBASE-1147</key>
            <summary>Modify the scripts to use Zookeeper</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12392373">HBASE-546</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jdcryans">Jean-Daniel Cryans</assignee>
                                    <reporter username="jdcryans">Jean-Daniel Cryans</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Jan 2009 19:06:39 +0000</created>
                <updated>Tue, 27 Jan 2009 18:21:53 +0000</updated>
                            <resolved>Tue, 27 Jan 2009 18:21:53 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12666402" author="jdcryans" created="Fri, 23 Jan 2009 02:44:59 +0000"  >&lt;p&gt;Request for review.&lt;/p&gt;</comment>
                            <comment id="12666752" author="stack" created="Fri, 23 Jan 2009 22:25:48 +0000"  >&lt;p&gt;I&apos;m guessing zk expects the config file to be named zoo.cfg?&lt;/p&gt;

&lt;p&gt;Whats this: &apos;+    echo kill | nc 127.0.0.1 2181&apos;  Is it platform independent (at least to some degree?  Does nc work same on sunos, bsd, and linux?).  Is it not possible to change the zk port number in its zoo.cfg?  So will 2181 always work?  Or 127.0.0.1 even?  Suggest making these configs.... in hbase-env.sh if you have to or grep them from zoo.cfg.&lt;/p&gt;

&lt;p&gt;nc looks sweet.&lt;/p&gt;

&lt;p&gt;Does zk emit logging on STDOUT?  What if it OOMEs?  Is that caught somewhere or does it come out on STDOUT?  Does start/stop zk not fit the hbase-daemon.sh mold?  If you could shoehorn it in there, could drop PIDs so could kill these shutting it down rather than use nc and logs would be set up for you? (I&apos;m guessing it just does&apos;t fit the mold).&lt;/p&gt;

&lt;p&gt;Make copyright 2009 on new files.&lt;/p&gt;

&lt;p&gt;Otherwise, patch looks good to me.&lt;/p&gt;


</comment>
                            <comment id="12667268" author="jdcryans" created="Mon, 26 Jan 2009 15:40:10 +0000"  >&lt;blockquote&gt;&lt;p&gt;I&apos;m guessing zk expects the config file to be named zoo.cfg&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think I can refactor to make it configurable.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Whats this: &apos;+ echo kill | nc 127.0.0.1 2181&apos; Is it platform independent (at least to some degree? Does nc work same on sunos, bsd, and linux?).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, it is a common command. Probably should use the full name tho (netcat).&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Is it not possible to change the zk port number in its zoo.cfg? So will 2181 always work? Or 127.0.0.1 even?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Nah I should probably grep.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Does zk emit logging on STDOUT? What if it OOMEs? Is that caught somewhere or does it come out on STDOUT? Does start/stop zk not fit the hbase-daemon.sh mold? If you could shoehorn it in there, could drop PIDs so could kill these shutting it down rather than use nc and logs would be set up for you? (I&apos;m guessing it just does&apos;t fit the mold).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Not sure I understand you but... the current situation is that hbase-zookeeper.sh calls hbase-daemon.sh on all machines in conf/zookeepers so the logs are actually setup. &lt;/p&gt;</comment>
                            <comment id="12667332" author="stack" created="Mon, 26 Jan 2009 18:04:43 +0000"  >&lt;blockquote&gt;&lt;p&gt;I think I can refactor to make it configurable.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Not important&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Yes, it is a common command. Probably should use the full name tho (netcat).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;You might try and verify its available on other OSs and that the parameters are same. &lt;/p&gt;

&lt;p&gt;For example, up on hudson:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Sun Microsystems Inc.   SunOS 5.10      Generic January 2005
-bash-3.00$ nc
-bash: nc: command not found
-bash-3.00$ netcat
-bash: netcat: command not found
-bash-3.00$ which netcat
no netcat in /opt/sfw/bin /opt/subversion-1.4.5/bin /usr/bin
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;What happens if you kill the zk process?  Does it run shutdown handler?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Not sure I understand you but... &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I think you got what I was saying.  Was just asking if STDOUT went into a .out file or not.  Sounds like it does.&lt;/p&gt;</comment>
                            <comment id="12667348" author="nitay" created="Mon, 26 Jan 2009 18:52:04 +0000"  >&lt;p&gt;Please see my comments in 1144. I think our configuration scheme is too complicated.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1144?focusedCommentId=12667125#action_12667125&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-1144?focusedCommentId=12667125#action_12667125&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;IRC conversation with Stack about this:&lt;/p&gt;

&lt;p&gt;Jan 26 10:20:21 &amp;lt;St^Ack&amp;gt;	So, whats this about:&lt;br/&gt;
Jan 26 10:20:22 &amp;lt;nitay&amp;gt;	which is really just ripping code out of ZK&apos;s repo&lt;br/&gt;
Jan 26 10:20:32 &amp;lt;St^Ack&amp;gt;	The list of quorum servers specified in &amp;lt;code&amp;gt;$&lt;/p&gt;
{HBASE_HOME}/conf/zoo.cfg&amp;lt;/code&amp;gt; should also be written to &amp;lt;code&amp;gt;${HBASE_HOME}
&lt;p&gt;/conf/zookeepers&amp;lt;/code&amp;gt;.&lt;br/&gt;
Jan 26 10:20:39 &amp;lt;St^Ack&amp;gt;	&quot;The list of quorum servers specified in &amp;lt;code&amp;gt;$&lt;/p&gt;
{HBASE_HOME}/conf/zoo.cfg&amp;lt;/code&amp;gt; should also be written to &amp;lt;code&amp;gt;${HBASE_HOME}
&lt;p&gt;/conf/zookeepers&amp;lt;/code&amp;gt;.&lt;br/&gt;
Jan 26 10:20:43 &amp;lt;St^Ack&amp;gt;	..&quot;&lt;br/&gt;
Jan 26 10:20:49 &amp;lt;St^Ack&amp;gt;	info in two places?&lt;br/&gt;
Jan 26 10:20:55 &amp;lt;nitay&amp;gt;	three actually&lt;br/&gt;
Jan 26 10:21:05 &amp;lt;nitay&amp;gt;	that&apos;s why i wrote in my comment we should fix that&lt;br/&gt;
Jan 26 10:21:07 *	idefine (i=root@twizzler.dreamhost.com) has joined #hbase&lt;br/&gt;
Jan 26 10:21:13 &amp;lt;nitay&amp;gt;	so zoo.cfg is purely for ZK&lt;br/&gt;
Jan 26 10:21:16 *	St^Ack HHHRNHH!!!! wrong answer&lt;br/&gt;
Jan 26 10:21:29 &amp;lt;nitay&amp;gt;	well its a part of 1147&lt;br/&gt;
Jan 26 10:21:39 &amp;lt;nitay&amp;gt;	i was commenting on it saying we should discuss it&lt;br/&gt;
Jan 26 10:21:49 &amp;lt;nitay&amp;gt;	zookeepers is for HBase, its analogous to regionservers file&lt;br/&gt;
Jan 26 10:22:06 *	St^Ack looking&lt;br/&gt;
Jan 26 10:22:07 &amp;lt;nitay&amp;gt;	and then there&apos;s the option in hbase-site.xml&lt;br/&gt;
Jan 26 10:22:12 &amp;lt;nitay&amp;gt;	read my whole comments&lt;br/&gt;
Jan 26 10:22:34 &amp;lt;nitay&amp;gt;	specifically, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1144?focusedCommentId=12667125#action_12667125&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-1144?focusedCommentId=12667125#action_12667125&lt;/a&gt;&lt;br/&gt;
Jan 26 10:23:05 &amp;lt;St^Ack&amp;gt;	oh, you are on it already&lt;br/&gt;
Jan 26 10:23:11 &amp;lt;St^Ack&amp;gt;	sorry missed that&lt;br/&gt;
Jan 26 10:23:16 &amp;lt;idefine&amp;gt;	Hi all, quick question (new to hadoop/hbase). If I have a bunch of data in a database, do I need to write that data to disk inorder to use hadoop to map/reduce? or can the map function pull from the database by offsetting that starting index?&lt;br/&gt;
Jan 26 10:23:37 &amp;lt;idefine&amp;gt;	the starting index*&lt;br/&gt;
Jan 26 10:23:49 &amp;lt;nitay&amp;gt;	so most of that is part of 1147, i wrote the overview.html to match the current way its done, but i think really we should just have zoo.cfg, and parse everything from there&lt;br/&gt;
Jan 26 10:26:34 &amp;lt;St^Ack&amp;gt;	nitay: just commented.  you were on the ball.  i was looking at the cheerleaders&lt;br/&gt;
Jan 26 10:27:28 &amp;lt;St^Ack&amp;gt;	idefine: I believe there db hookups if you go looking through hadoop; if not in hadoop itself or in contrib, then look in JIRAs for a patch&lt;br/&gt;
Jan 26 10:27:38 &amp;lt;nitay&amp;gt;	St^Ack, by populated u mean the whole host:port goodness? cause i was just thinking of a true/false flag&lt;br/&gt;
Jan 26 10:27:57 &amp;lt;nitay&amp;gt;	if true, parse clientPort= and server.X= out of zoo.cfg and start/stop with Hbase&lt;br/&gt;
Jan 26 10:28:09 &amp;lt;nitay&amp;gt;	if not, still have to parse those, but dont try to start/stop&lt;br/&gt;
Jan 26 10:28:22 &amp;lt;St^Ack&amp;gt;	idefine: my faint knowledge comes of quick peruse of hadoop mailing list subject lines so don&apos;t put to much weight on it&lt;br/&gt;
Jan 26 10:29:03 &amp;lt;St^Ack&amp;gt;	nitay: how do hbase clients know which  remote zk cluster? &lt;br/&gt;
Jan 26 10:29:34 &amp;lt;idefine&amp;gt;	St^Ack: what if I am using hbase for my database, would it make a difference?&lt;br/&gt;
Jan 26 10:30:09 &amp;lt;St^Ack&amp;gt;	idefine: in that case, there are existant hookups.  See under the hbase mapred package &lt;br/&gt;
Jan 26 10:30:19 *	St^Ack goes to reread nitay comment&lt;br/&gt;
Jan 26 10:30:24 &amp;lt;idefine&amp;gt;	St^Ack: thanks, will do.&lt;br/&gt;
Jan 26 10:30:40 &amp;lt;nitay&amp;gt;	St^Ack, oh b/c hbase&#160;clients have just the HBaseConfiguration thing in the code u&apos;re saying, no zoo.cfg? &lt;br/&gt;
Jan 26 10:31:37 &amp;lt;St^Ack&amp;gt;	nitay: no, zoo.cfg will be on classpath if its in conf dir.&lt;br/&gt;
Jan 26 10:31:47 &amp;lt;nitay&amp;gt;	St^Ack, right ye so im confused&lt;br/&gt;
Jan 26 10:32:00 &amp;lt;nitay&amp;gt;	why u need to ever specify ZK host:port in hbase-X.xml?&lt;br/&gt;
Jan 26 10:32:01 &amp;lt;St^Ack&amp;gt;	nitay: so, if a remote cluster, zoo.cfg will contain the addresses of the remote zk quorum?&lt;br/&gt;
Jan 26 10:32:06 &amp;lt;nitay&amp;gt;	yes&lt;br/&gt;
Jan 26 10:32:10 &amp;lt;St^Ack&amp;gt;	ok.&lt;br/&gt;
Jan 26 10:32:13 &amp;lt;nitay&amp;gt;	it has to, that&apos;s how zookeeper works&lt;br/&gt;
Jan 26 10:32:18 &amp;lt;St^Ack&amp;gt;	then boolean as you suggest is way to go.&lt;br/&gt;
Jan 26 10:32:25 &amp;lt;nitay&amp;gt;	zoo.cfg:&lt;br/&gt;
Jan 26 10:32:25 &amp;lt;nitay&amp;gt;	tickTime=2000&lt;br/&gt;
Jan 26 10:32:25 &amp;lt;nitay&amp;gt;	dataDir=/var/zookeeper&lt;br/&gt;
Jan 26 10:32:25 &amp;lt;nitay&amp;gt;	clientPort=2181&lt;br/&gt;
Jan 26 10:32:25 &amp;lt;nitay&amp;gt;	initLimit=5&lt;br/&gt;
Jan 26 10:32:25 &amp;lt;nitay&amp;gt;	syncLimit=2&lt;br/&gt;
Jan 26 10:32:25 &amp;lt;nitay&amp;gt;	server.1=zoo1:2888:3888&lt;br/&gt;
Jan 26 10:32:25 &amp;lt;nitay&amp;gt;	server.2=zoo2:2888:3888&lt;br/&gt;
Jan 26 10:32:25 &amp;lt;nitay&amp;gt;	server.3=zoo3:2888:3888&lt;br/&gt;
Jan 26 10:32:49 &amp;lt;nitay&amp;gt;	so if u dont have any server.X lines its a local instance&lt;br/&gt;
Jan 26 10:33:01 &amp;lt;St^Ack&amp;gt;	I didn&apos;t realize that clients would read zoo.conf to get to remote quorum also.&lt;br/&gt;
Jan 26 10:33:34 &amp;lt;nitay&amp;gt;	right i didnt think about that at first too, but then i realized ll the info we need is in ZK&apos;s zoo.conf, untouched by us, just in different forms&lt;br/&gt;
Jan 26 10:33:46 &amp;lt;nitay&amp;gt;	i also think its important we never add stuff to zoo.cfg, keep it exactly the same as ZK&apos;s&lt;br/&gt;
Jan 26 10:34:23 &amp;lt;St^Ack&amp;gt;	agreed&lt;br/&gt;
Jan 26 10:34:28 &amp;lt;St^Ack&amp;gt;	updated my comment in issue&lt;/p&gt;</comment>
                            <comment id="12667349" author="nitay" created="Mon, 26 Jan 2009 18:52:22 +0000"  >&lt;p&gt;Your scripts do not seem to write $&lt;/p&gt;
{dataDir}
&lt;p&gt;/myid in a replicated case. That is say I have a zoo.cfg like:&lt;/p&gt;

&lt;p&gt;tickTime=2000&lt;br/&gt;
dataDir=/var/zookeeper&lt;br/&gt;
clientPort=2181&lt;br/&gt;
initLimit=5&lt;br/&gt;
syncLimit=2&lt;br/&gt;
server.1=zoo1:2888:3888&lt;br/&gt;
server.2=zoo2:2888:3888&lt;br/&gt;
server.3=zoo3:2888:3888&lt;/p&gt;

&lt;p&gt;There needs to be a file called myid with the X in server.X written to /var/zookeeper on each node. Is the user currently required to do this on their own?&lt;/p&gt;</comment>
                            <comment id="12667420" author="jdcryans" created="Mon, 26 Jan 2009 21:04:56 +0000"  >&lt;p&gt;Grossly simplified version of the scripts. A setting in hbase-env tells whether HBase should manage a local instance of ZK or not. If it does manage it, the ZK server will be started on localhost on port 2181. &lt;/p&gt;

&lt;p&gt;Also it no longer uses nc.&lt;/p&gt;</comment>
                            <comment id="12667526" author="jdcryans" created="Tue, 27 Jan 2009 00:57:41 +0000"  >&lt;p&gt;Fixes a comment in zoo.cfg, defaults HBASE_MANAGES_ZK to &quot;true&quot;, removes useless config passed in start/stop-hbase.sh for ZK.&lt;/p&gt;

&lt;p&gt;Another issue will be opened to fix the fact that dataDir will have to be configured in hbase-site and not zoo.cfg.&lt;/p&gt;</comment>
                            <comment id="12667528" author="nitay" created="Tue, 27 Jan 2009 01:01:15 +0000"  >&lt;p&gt;Looks good.&lt;/p&gt;</comment>
                            <comment id="12667594" author="stack" created="Tue, 27 Jan 2009 05:42:16 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12667744" author="jdcryans" created="Tue, 27 Jan 2009 18:21:53 +0000"  >&lt;p&gt;Committed to trunk.&lt;/p&gt;

&lt;p&gt;To those who follow trunk closely, be advise that the start-hbase.sh script now starts a ZK instance unless HBASE_MANAGES_ZK in hbase-env.sh is set to false.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12398766" name="hbase-1147-v2.patch" size="9850" author="jdcryans" created="Mon, 26 Jan 2009 21:04:56 +0000"/>
                            <attachment id="12398784" name="hbase-1147-v3.patch" size="9752" author="jdcryans" created="Tue, 27 Jan 2009 00:57:41 +0000"/>
                            <attachment id="12398530" name="hbase-1147.patch" size="9651" author="jdcryans" created="Fri, 23 Jan 2009 02:48:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 23 Jan 2009 22:25:48 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32006</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 47 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hblr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99142</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>