<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:44:10 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-7269/HBASE-7269.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-7269] Testing in place does not work if not building with default profile</title>
                <link>https://issues.apache.org/jira/browse/HBASE-7269</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;If I build with the Hadoop 2 profile, for example:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;mvn -Dhadoop.profile=2.0 -Dhadoop.version=2.0.3-SNAPSHOT&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;and then try to run daemons like so:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;./bin/hbase master start&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;this will fail, because the launch script will invoke Maven to build the cached classpath selecting whatever is the default profile, currently Hadoop 1. Startup will actually get pretty far, until:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;12/12/04 11:42:13 WARN regionserver.HRegionServer: error telling master we are up
com.google.protobuf.ServiceException: java.lang.NoClassDefFoundError: org/apache/hadoop/net/SocketInputWrapper
	at org.apache.hadoop.hbase.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:189)
	at $Proxy10.regionServerStartup(Unknown Source)
	at org.apache.hadoop.hbase.regionserver.HRegionServer.reportForDuty(HRegionServer.java:1844)
	at org.apache.hadoop.hbase.regionserver.HRegionServer.run(HRegionServer.java:843)
	at java.lang.Thread.run(Thread.java:679)
Caused by: java.lang.NoClassDefFoundError: org/apache/hadoop/net/SocketInputWrapper
	at org.apache.hadoop.hbase.ipc.HBaseClient.createConnection(HBaseClient.java:317)
	at org.apache.hadoop.hbase.ipc.HBaseClient.getConnection(HBaseClient.java:1415)
	at org.apache.hadoop.hbase.ipc.HBaseClient.call(HBaseClient.java:1278)
	at org.apache.hadoop.hbase.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:177)
	... 4 more
Caused by: java.lang.ClassNotFoundException: org.apache.hadoop.net.SocketInputWrapper
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;There doesn&apos;t appear to be a way to supply additional arguments to the launch script for directing Maven which profile(s) to activate.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12618687">HBASE-7269</key>
            <summary>Testing in place does not work if not building with default profile</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="nkeywal">Nicolas Liochon</assignee>
                                    <reporter username="apurtell">Andrew Purtell</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 Dec 2012 03:52:27 +0000</created>
                <updated>Mon, 23 Sep 2013 18:30:57 +0000</updated>
                            <resolved>Fri, 7 Dec 2012 14:39:27 +0000</resolved>
                                    <version>0.95.2</version>
                                    <fixVersion>0.95.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13509510" author="enis" created="Tue, 4 Dec 2012 05:02:59 +0000"  >&lt;p&gt;Maybe bin/hbase should not even invoke mvn, but just refer to cached classpath. We can save the classpath in mvn compile. &lt;/p&gt;</comment>
                            <comment id="13509512" author="stack" created="Tue, 4 Dec 2012 05:05:16 +0000"  >&lt;p&gt;Or at least, not replace it if already exists (if none, it should generate one else every startup will take a long time).&lt;/p&gt;</comment>
                            <comment id="13509518" author="enis" created="Tue, 4 Dec 2012 05:30:08 +0000"  >&lt;p&gt;It already checks for the file existence. We can just add a save cache classpath execution to compile, and that should work. &lt;/p&gt;</comment>
                            <comment id="13509538" author="apurtell" created="Tue, 4 Dec 2012 06:22:24 +0000"  >&lt;blockquote&gt;&lt;p&gt;We can just add a save cache classpath execution to compile, and that should work.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Very reasonable.&lt;/p&gt;</comment>
                            <comment id="13509577" author="nkeywal" created="Tue, 4 Dec 2012 08:12:27 +0000"  >&lt;p&gt;I&apos;ve added the possibility to have options to the mvn command in  &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7168&quot; title=&quot;[dev] in the script called &amp;#39;hbase&amp;#39;, we don&amp;#39;t check for errors when generating the classpath with mvn&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7168&quot;&gt;&lt;del&gt;HBASE-7168&lt;/del&gt;&lt;/a&gt;. But Enis suggestion seems good.&lt;/p&gt;</comment>
                            <comment id="13509917" author="jdcryans" created="Tue, 4 Dec 2012 18:16:13 +0000"  >&lt;p&gt;Wouldn&apos;t running clean first just be cleaner? Another similar problem I got is if switching profile without cleaning and then using the created tarball, it will contain both hadoop 1 and 2 jars.&lt;/p&gt;</comment>
                            <comment id="13510041" author="enis" created="Tue, 4 Dec 2012 21:34:37 +0000"  >&lt;p&gt;@JD running clean + compile + classpath would be too long to be executed from the bin/hbase script I am afraid. If we had save classpath, you can do clean compile before switching to h2. &lt;/p&gt;</comment>
                            <comment id="13510043" author="jdcryans" created="Tue, 4 Dec 2012 21:36:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt;, I meant to say that clean should run by the dev before switching profile.&lt;/p&gt;</comment>
                            <comment id="13510199" author="apurtell" created="Wed, 5 Dec 2012 01:22:45 +0000"  >&lt;p&gt;I did a &apos;mvn clean install&apos; of the Hadoop 2 profile then tried to invoke bin/hbase. It changed the cached classpath and used the Hadoop 1 profile because bin/hbase doesn&apos;t know and had no way to specify what profile was used for building.&#160;&lt;/p&gt;</comment>
                            <comment id="13510483" author="nkeywal" created="Wed, 5 Dec 2012 14:01:05 +0000"  >&lt;p&gt;What do you think of the patch? It&apos;s the implementation of Enis&apos; proposal. Locally it seems to work (but it&apos;s just a brief test, and, well, you know, maven...)&lt;/p&gt;</comment>
                            <comment id="13510793" author="enis" created="Wed, 5 Dec 2012 21:29:07 +0000"  >&lt;p&gt;N, do you know what this was in bin/hbase in the first place? Does not make sense to me. &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; we need hbase-it to always be the last module run. since it has the largest classpath
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Thinking about it, the patch makes sense. We should not be doing mvn invocation from bin/hbase. &lt;/p&gt;</comment>
                            <comment id="13510797" author="stack" created="Wed, 5 Dec 2012 21:32:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt; did the above hbase-it trickery... hey Elliott!&lt;/p&gt;</comment>
                            <comment id="13511512" author="nkeywal" created="Thu, 6 Dec 2012 17:01:41 +0000"  >&lt;p&gt;I suppose it&apos;s quite old, and doing it in the script means not doing in maven. Between the two options, the former is often prefered... I propose to commit the patch if you guys are ok.&lt;/p&gt;</comment>
                            <comment id="13512033" author="enis" created="Thu, 6 Dec 2012 19:24:01 +0000"  >&lt;p&gt;I&apos;m +1 for the patch. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt; would this work for you? &lt;/p&gt;</comment>
                            <comment id="13512109" author="eclark" created="Thu, 6 Dec 2012 20:58:36 +0000"  >&lt;p&gt;hbase-it has everything else on it&apos;s class path (hbase-common, hbase-hadoop-compat, hbase-hadoop1-compat, hbase-server, hbase-examples).  When maven runs the last module in the list is the one that writes out the classpath.  So I wanted to make sure that a module that included as much as possible was always last no matter what happened.&lt;/p&gt;</comment>
                            <comment id="13512110" author="eclark" created="Thu, 6 Dec 2012 20:59:22 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13526115" author="apurtell" created="Fri, 7 Dec 2012 03:23:31 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13526482" author="hudson" created="Fri, 7 Dec 2012 16:06:40 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3597 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3597/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3597/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7269&quot; title=&quot;Testing in place does not work if not building with default profile&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7269&quot;&gt;&lt;del&gt;HBASE-7269&lt;/del&gt;&lt;/a&gt; Testing in place does not work if not building with default profile (Revision 1418333)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
nkeywal : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/bin/hbase&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-it/pom.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13526911" author="hudson" created="Sat, 8 Dec 2012 00:13:07 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #286 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/286/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/286/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7269&quot; title=&quot;Testing in place does not work if not building with default profile&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7269&quot;&gt;&lt;del&gt;HBASE-7269&lt;/del&gt;&lt;/a&gt; Testing in place does not work if not building with default profile (Revision 1418333)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
nkeywal : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/bin/hbase&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-it/pom.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13775194" author="stack" created="Mon, 23 Sep 2013 18:30:57 +0000"  >&lt;p&gt;Marking closed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12556099" name="7269.v1.patch" size="2908" author="nkeywal" created="Wed, 5 Dec 2012 13:59:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 4 Dec 2012 05:02:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>295855</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i141n3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>231728</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>