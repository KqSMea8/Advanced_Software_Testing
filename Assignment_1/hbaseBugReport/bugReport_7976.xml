<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:50:52 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-7976/HBASE-7976.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-7976] Rest of master operations (move, assign, unassign, offline region) should also acquire table locks</title>
                <link>https://issues.apache.org/jira/browse/HBASE-7976</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7305&quot; title=&quot;ZK based Read/Write locks for table operations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7305&quot;&gt;&lt;del&gt;HBASE-7305&lt;/del&gt;&lt;/a&gt; adds table locks to the create/delete/enable/disable/modify table and column operations. We should also acquire the table lock in region admin operations, move, assign, unassign, etc. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12634945">HBASE-7976</key>
            <summary>Rest of master operations (move, assign, unassign, offline region) should also acquire table locks</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="enis">Enis Soztutar</assignee>
                                    <reporter username="enis">Enis Soztutar</reporter>
                        <labels>
                    </labels>
                <created>Sat, 2 Mar 2013 01:10:53 +0000</created>
                <updated>Mon, 12 Aug 2013 18:39:08 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="13591232" author="jmspaggi" created="Sat, 2 Mar 2013 02:28:38 +0000"  >&lt;p&gt;Hi Enis,&lt;/p&gt;

&lt;p&gt;Can you please give me a bit more details? Do you mean that we should lock the table when we are moving a region? So here again, is it not possible to lock just the concerned region instead of the entire table? Or will this be optionnal?&lt;/p&gt;</comment>
                            <comment id="13591244" author="enis" created="Sat, 2 Mar 2013 03:21:07 +0000"  >&lt;blockquote&gt;&lt;p&gt;So here again, is it not possible to lock just the concerned region instead of the entire table?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;As it stands, there is no such thing as per-region locks, only table-level locks. If an admin wants to move a region, we may want to exclude concurrent table operations (alter table). Pls see &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12571721/HBaseTableLocks.pdf&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12571721/HBaseTableLocks.pdf&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13591252" author="jmspaggi" created="Sat, 2 Mar 2013 03:34:44 +0000"  >&lt;p&gt;So if an admin want to move, that will block RS splits, right? Even if they are not touching the same regions.&lt;/p&gt;

&lt;p&gt;I totally understand the idea behind this lock process, but is it not a bit to much restrictive? For small cluster/tables, it might not be an issue, but for very big tables (tens of thousands of regions), might that not cause some issues? Because one region is moving, all the regions servers need to wait before splitting?&lt;/p&gt;

&lt;p&gt;Again, I think this is still good because that will allow some new features are avoid some issues, but maybe we should think about beeing more granular as another improvment?&lt;/p&gt;</comment>
                            <comment id="13591257" author="yuzhihong@gmail.com" created="Sat, 2 Mar 2013 03:39:33 +0000"  >&lt;blockquote&gt;&lt;p&gt;maybe we should think about beeing more granular as another improvment?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13591395" author="nkeywal" created="Sat, 2 Mar 2013 12:03:43 +0000"  >&lt;p&gt;I don&apos;t have the whole picture, but we need to pay a real attention to the performances. Assignment is on the critical path for recovery. ZooKeeper is an expensive beast, it&apos;s a network call + a HD sync: it can&apos;t be worse. And it can become overloaded as anyone (it doesn&apos;t scale that much). We use it only if we have to. Sorry for being generic, I go trough the doc but didn&apos;t get where you want to put it.&lt;/p&gt;</comment>
                            <comment id="13591534" author="enis" created="Sat, 2 Mar 2013 21:47:07 +0000"  >&lt;blockquote&gt;&lt;p&gt;Assignment is on the critical path for recovery. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Sorry the title is not super clear. I was suggesting to add locking to the client-initiated assign and move operations, not the regular AM stuff. &lt;/p&gt;</comment>
                            <comment id="13591552" author="nkeywal" created="Sat, 2 Mar 2013 22:43:11 +0000"  >&lt;p&gt;Fair enough, and good news!&lt;/p&gt;


</comment>
                            <comment id="13737197" author="stack" created="Mon, 12 Aug 2013 18:39:08 +0000"  >&lt;p&gt;This improvement is not being worked on.  Moving out.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 2 Mar 2013 02:28:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>315438</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ifkn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>315782</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>