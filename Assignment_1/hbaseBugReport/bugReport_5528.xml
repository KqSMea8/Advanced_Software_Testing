<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:28:34 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5528/HBASE-5528.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5528] Change retrying splitting log forever  if throws IOException to numbered times, and abort master when retries exhausted</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5528</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;In current log-splitting retry logic, it will retry forever if throws IOException, I think we&apos;d better change it to numbered times, and abort master when retries exhausted.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12545280">HBASE-5528</key>
            <summary>Change retrying splitting log forever  if throws IOException to numbered times, and abort master when retries exhausted</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="zjushch">chunhui shen</reporter>
                        <labels>
                            <label>delete</label>
                    </labels>
                <created>Tue, 6 Mar 2012 05:01:55 +0000</created>
                <updated>Sat, 10 Jan 2015 01:51:12 +0000</updated>
                            <resolved>Sat, 10 Jan 2015 01:51:12 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13223001" author="zhihyu@ebaysf.com" created="Tue, 6 Mar 2012 05:33:39 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!checkFileSystem()) {
+          LOG.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Bad Filesystem, exiting&quot;&lt;/span&gt;);
+          retrySplittingNum = 0;
+        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above code changes the way we respond to filesystem check failure where Runtime.getRuntime().halt(1) should be called.&lt;/p&gt;</comment>
                            <comment id="13223005" author="zjushch" created="Tue, 6 Mar 2012 05:42:32 +0000"  >&lt;p&gt;Patch v2,add Runtime.getRuntime().halt(1) after filesystem check failure&lt;/p&gt;</comment>
                            <comment id="13223021" author="lhofhansl" created="Tue, 6 Mar 2012 06:31:05 +0000"  >&lt;p&gt;This seems like an important fix. Could you upload to review board for easier review?&lt;/p&gt;</comment>
                            <comment id="13223030" author="zjushch" created="Tue, 6 Mar 2012 06:40:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/4194/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4194/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13223475" author="khemani" created="Tue, 6 Mar 2012 17:56:20 +0000"  >&lt;p&gt;I think the log-splitting retry logic is there in ServerShutdownHandler ...&lt;/p&gt;

&lt;p&gt;In ServerShutdownHandler.process() ... the handler is requeued in case of error&lt;/p&gt;

&lt;p&gt;&amp;lt;code&amp;gt;&lt;br/&gt;
     try {&lt;br/&gt;
        if (this.shouldSplitHlog) &lt;/p&gt;
{
          LOG.info(&quot;Splitting logs for &quot; + serverName);
          this.services.getMasterFileSystem().splitLog(serverName);
        }
&lt;p&gt; else &lt;/p&gt;
{
          LOG.info(&quot;Skipping log splitting for &quot; + serverName);
        }
&lt;p&gt;      } catch (IOException ioe) &lt;/p&gt;
{
        this.services.getExecutorService().submit(this);
        this.deadServers.add(serverName);
        throw new IOException(&quot;failed log splitting for &quot; +
          serverName + &quot;, will retry&quot;, ioe);
      }
&lt;p&gt;&amp;lt;code&amp;gt;&lt;/p&gt;</comment>
                            <comment id="13223911" author="zjushch" created="Wed, 7 Mar 2012 02:00:20 +0000"  >&lt;p&gt;@Prakash&lt;br/&gt;
I&apos;m sorry I haven&apos;t found that I&apos;m using 90 version.&lt;br/&gt;
However, in current log-splitting retry logic, it will retry forever if throws IOException, I think it&apos;s unacceptable.&lt;/p&gt;</comment>
                            <comment id="13224007" author="ram_krish" created="Wed, 7 Mar 2012 06:02:59 +0000"  >&lt;p&gt;@Chunhui&lt;br/&gt;
We have faced scenarios where the IOException soemtimes gets thrown when the DN goes down or when a switch happens in NN (Hadoop 0.20 + append is the version we use) .&lt;br/&gt;
In that case the retry logic should work.&lt;/p&gt;

&lt;p&gt;Only if the NN is not available then we may make the master abort.&lt;br/&gt;
If we abort the master, one thing has to be ensured that when the master comes up again or the back up master comes up the same problem should  not happen.&lt;/p&gt;</comment>
                            <comment id="13226637" author="stack" created="Sat, 10 Mar 2012 00:40:08 +0000"  >&lt;p&gt;This is for 0.90?&lt;/p&gt;</comment>
                            <comment id="14267632" author="clehene" created="Wed, 7 Jan 2015 13:46:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zjushch&quot; class=&quot;user-hover&quot; rel=&quot;zjushch&quot;&gt;chunhui shen&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt; is this still valid?&lt;/p&gt;</comment>
                            <comment id="14272234" author="apurtell" created="Sat, 10 Jan 2015 01:51:12 +0000"  >&lt;p&gt;Thanks for looking at this &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=clehene&quot; class=&quot;user-hover&quot; rel=&quot;clehene&quot;&gt;Cosmin Lehene&lt;/a&gt;. I&apos;m going to go out on a bit of a limb and like stack consider this a report against version 0.90. Since we don&apos;t support that version any longer I&apos;m closing this as Wont Fix&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12517195" name="hbase-5528.patch" size="9948" author="zjushch" created="Tue, 6 Mar 2012 05:03:09 +0000"/>
                            <attachment id="12517197" name="hbase-5528v2.patch" size="9989" author="zjushch" created="Tue, 6 Mar 2012 05:42:32 +0000"/>
                            <attachment id="12517354" name="hbase-5528v3.patch" size="11287" author="zjushch" created="Wed, 7 Mar 2012 02:04:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 6 Mar 2012 05:33:39 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>230466</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 48 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02d6f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11736</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>