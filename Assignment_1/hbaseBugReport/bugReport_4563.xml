<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:20:03 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-4563/HBASE-4563.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-4563] When error occurs in this.parent.close(false) of split, the split region cannot write or read</title>
                <link>https://issues.apache.org/jira/browse/HBASE-4563</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Follow below steps to replay the problem:&lt;br/&gt;
1. change the SplitTransaction.java as below,just like mock the hdfs error.&lt;/p&gt;
   &lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;SplitTransaction.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      List&amp;lt;StoreFile&amp;gt; hstoreFilesToSplit = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.parent.close(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
      &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IOException(&lt;span class=&quot;code-quote&quot;&gt;&quot;some unexpected error in close store files&quot;&lt;/span&gt;);
   &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 
&lt;p&gt;2. update the regionserver code,restart;&lt;br/&gt;
3. create a table &amp;amp; put some data to the table;&lt;br/&gt;
4. split the table;&lt;br/&gt;
5. scan the table,then it&apos;ll fail.&lt;/p&gt;

&lt;p&gt;We can fix the bug just use the patch.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12526401">HBASE-4563</key>
            <summary>When error occurs in this.parent.close(false) of split, the split region cannot write or read</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bluedavy">bluedavy</assignee>
                                    <reporter username="bluedavy">bluedavy</reporter>
                        <labels>
                    </labels>
                <created>Mon, 10 Oct 2011 03:13:18 +0000</created>
                <updated>Fri, 20 Nov 2015 11:55:48 +0000</updated>
                            <resolved>Mon, 17 Oct 2011 05:19:39 +0000</resolved>
                                    <version>0.90.4</version>
                    <version>0.92.0</version>
                                    <fixVersion>0.90.5</fixVersion>
                                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13123948" author="bluedavy" created="Mon, 10 Oct 2011 08:30:31 +0000"  >&lt;p&gt;patch &amp;amp; test report.&lt;/p&gt;</comment>
                            <comment id="13123990" author="ram_krish" created="Mon, 10 Oct 2011 10:35:22 +0000"  >&lt;p&gt;Thanks for the patch.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+	&lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt;(IOException e){
+	  &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; e;
+	}

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Why should we catch and again throw exception?&lt;/p&gt;</comment>
                            <comment id="13123992" author="ram_krish" created="Mon, 10 Oct 2011 10:42:59 +0000"  >&lt;p&gt;Is it possible to write a testcase with the scenario you have told in the description?&lt;/p&gt;

&lt;p&gt;Minor comment.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+	}
+	&lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt;(IOException e){
+	  &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; e;
+	}
+	&lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt;{
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Catch block, finally block should start in the same line like&lt;br/&gt;
+	} catch(IOException e)&lt;/p&gt;
{
+	  throw e;
+	}
&lt;p&gt; finally{&lt;/p&gt;</comment>
                            <comment id="13124626" author="bluedavy" created="Tue, 11 Oct 2011 00:56:28 +0000"  >&lt;p&gt;throw exception so CompactSplitThread can catch it then do rollback...&lt;/p&gt;</comment>
                            <comment id="13124630" author="yuzhihong@gmail.com" created="Tue, 11 Oct 2011 01:01:20 +0000"  >&lt;p&gt;Ramkrishna&apos;s comment @ 10/Oct/11 10:35 was saying that the IOException caught didn&apos;t get transformed into another exception type.&lt;br/&gt;
So the catch block isn&apos;t needed.&lt;/p&gt;</comment>
                            <comment id="13124635" author="bluedavy" created="Tue, 11 Oct 2011 01:04:37 +0000"  >&lt;p&gt;@Ted Yu&lt;br/&gt;
Yes,&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;,I&apos;ll change it &amp;amp; attach the patch again.&lt;/p&gt;</comment>
                            <comment id="13124744" author="ram_krish" created="Tue, 11 Oct 2011 06:37:23 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      }
+	} &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
+      &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.journal.add(JournalEntry.CLOSED_PARENT_REGION);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Formatting issue is there in the latest patch&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4563&quot; title=&quot;When error occurs in this.parent.close(false) of split, the split region cannot write or read&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4563&quot;&gt;&lt;del&gt;HBASE-4563&lt;/del&gt;&lt;/a&gt;fortrunk.patch and &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4563&quot; title=&quot;When error occurs in this.parent.close(false) of split, the split region cannot write or read&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4563&quot;&gt;&lt;del&gt;HBASE-4563&lt;/del&gt;&lt;/a&gt;for0.92.patch.  If you submit for trunk the same can be taken for 0.92. I will leave it to others for commenting before we can commit.&lt;/p&gt;



</comment>
                            <comment id="13124751" author="yuzhihong@gmail.com" created="Tue, 11 Oct 2011 06:43:58 +0000"  >&lt;p&gt;Please run through unit tests for 0.92 patch.&lt;/p&gt;</comment>
                            <comment id="13128327" author="yuzhihong@gmail.com" created="Sun, 16 Oct 2011 02:24:40 +0000"  >&lt;p&gt;Thanks for the detailed test report.&lt;br/&gt;
+1 on patches.&lt;br/&gt;
There is some formatting:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+	} &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
+      &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.journal.add(JournalEntry.CLOSED_PARENT_REGION);
+	}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The right curly brace before finally should be moved left by 3 spaces.&lt;br/&gt;
Same with the closing right curly brace.&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3678&quot; title=&quot;Add Eclipse-based Apache Formatter to HBase Wiki&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3678&quot;&gt;&lt;del&gt;HBASE-3678&lt;/del&gt;&lt;/a&gt; for Formatter for Eclipse.&lt;/p&gt;</comment>
                            <comment id="13128350" author="lhofhansl" created="Sun, 16 Oct 2011 05:43:08 +0000"  >&lt;p&gt;+1 on patches (pending all tests pass and Ted&apos;s suggested formatting fix).&lt;/p&gt;</comment>
                            <comment id="13128575" author="bluedavy" created="Mon, 17 Oct 2011 02:09:58 +0000"  >&lt;p&gt;I fix the formatter.&lt;/p&gt;</comment>
                            <comment id="13128620" author="bluedavy" created="Mon, 17 Oct 2011 03:20:09 +0000"  >&lt;p&gt;wait for committer commit to the svn.&lt;/p&gt;</comment>
                            <comment id="13128660" author="lhofhansl" created="Mon, 17 Oct 2011 04:55:15 +0000"  >&lt;p&gt;@Ted... You wanna commit, or should I? I&apos;m happy to.&lt;/p&gt;</comment>
                            <comment id="13128665" author="yuzhihong@gmail.com" created="Mon, 17 Oct 2011 04:57:44 +0000"  >&lt;p&gt;@Lars:&lt;br/&gt;
Go ahead.&lt;/p&gt;</comment>
                            <comment id="13128674" author="lhofhansl" created="Mon, 17 Oct 2011 05:19:39 +0000"  >&lt;p&gt;Committed to 0.90, 0.92, and trunk&lt;/p&gt;</comment>
                            <comment id="13128709" author="hudson" created="Mon, 17 Oct 2011 07:19:04 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2329 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2329/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2329/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4563&quot; title=&quot;When error occurs in this.parent.close(false) of split, the split region cannot write or read&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4563&quot;&gt;&lt;del&gt;HBASE-4563&lt;/del&gt;&lt;/a&gt;  When error occurs in this.parent.close(false) of split, the split region cannot write or read&lt;/p&gt;

&lt;p&gt;larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/SplitTransaction.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13128742" author="hudson" created="Mon, 17 Oct 2011 09:23:26 +0000"  >&lt;p&gt;Integrated in HBase-0.92 #66 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92/66/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92/66/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4563&quot; title=&quot;When error occurs in this.parent.close(false) of split, the split region cannot write or read&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4563&quot;&gt;&lt;del&gt;HBASE-4563&lt;/del&gt;&lt;/a&gt;  When error occurs in this.parent.close(false) of split, the split region cannot write or read&lt;/p&gt;

&lt;p&gt;larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/regionserver/SplitTransaction.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15016580" author="lars_francke" created="Fri, 20 Nov 2015 11:55:48 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12499232" name="HBASE-4563-0.90.patch" size="1968" author="bluedavy" created="Mon, 17 Oct 2011 02:08:24 +0000"/>
                            <attachment id="12499233" name="HBASE-4563-0.92.patch" size="1974" author="bluedavy" created="Mon, 17 Oct 2011 02:08:24 +0000"/>
                            <attachment id="12499234" name="HBASE-4563-trunk.patch" size="1949" author="bluedavy" created="Mon, 17 Oct 2011 02:08:24 +0000"/>
                            <attachment id="12499185" name="test-4563-0.90.txt" size="21163" author="bluedavy" created="Sun, 16 Oct 2011 01:51:25 +0000"/>
                            <attachment id="12499186" name="test-4563-0.92.txt" size="30837" author="bluedavy" created="Sun, 16 Oct 2011 01:51:25 +0000"/>
                            <attachment id="12499187" name="test-4563-trunk.txt" size="31253" author="bluedavy" created="Sun, 16 Oct 2011 01:51:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 10 Oct 2011 10:35:22 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>51141</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hrcn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>101693</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>