<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:55:30 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-8465/HBASE-8465.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-8465] Auto-drop rollback snapshot for snapshot restore</title>
                <link>https://issues.apache.org/jira/browse/HBASE-8465</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Below is an excerpt from snapshot restore javadoc:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
   * Restore the specified snapshot on the original table. (The table must be disabled)
   * Before restoring the table, a &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; snapshot with the current table state is created.
   * In &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; of failure, the table will be rolled back to the its original state.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We can improve the handling of rollbackSnapshot in two ways:&lt;/p&gt;

&lt;p&gt;1. give better name to the rollbackSnapshot (adding &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&apos;-&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;-rollback-&apos;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;). Currently the name is of the form:&lt;br/&gt;
    String rollbackSnapshot = snapshotName + &quot;-&quot; + EnvironmentEdgeManager.currentTimeMillis();&lt;/p&gt;

&lt;p&gt;2. drop rollbackSnapshot at the end of restoreSnapshot() if the restore is successful. We can introduce new config param, named &apos;hbase.snapshot.restore.drop.rollback&apos;, to keep compatibility with current behavior.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12645394">HBASE-8465</key>
            <summary>Auto-drop rollback snapshot for snapshot restore</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mbertozzi">Matteo Bertozzi</assignee>
                                    <reporter username="yuzhihong@gmail.com">Ted Yu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Apr 2013 09:04:00 +0000</created>
                <updated>Mon, 16 Dec 2013 18:46:45 +0000</updated>
                            <resolved>Mon, 25 Nov 2013 18:10:20 +0000</resolved>
                                                    <fixVersion>0.98.0</fixVersion>
                    <fixVersion>0.96.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13645437" author="jmhsieh" created="Tue, 30 Apr 2013 10:36:17 +0000"  >&lt;p&gt;First can we give the jira a more descriptive title?  &apos;Improvement&apos; is vague and subjective &amp;#8211; this is new semantics and not some sort of speed or resource usage improvement.  Maybe something like &quot;restore rollback auto-drop&quot;?&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Does it make more sense to make this a runtime restore snapshot parameter instead of a xml configuration option?   (the &amp;#45;for&amp;#45;rollback addition only makes sense for the proposed style).&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13645570" author="mbertozzi" created="Tue, 30 Apr 2013 13:33:39 +0000"  >&lt;p&gt;my guess is that we could add a new restoreSnapshot() with the new arg and the conf property for the default behavior.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
restore(snapshotName) {
   restore(snapshotName, conf.get(&lt;span class=&quot;code-quote&quot;&gt;&quot;...restore.drop.rollback&quot;&lt;/span&gt;))
}

restore(snapshotName, bool dropSnapshot) { ... }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Anyway I&apos;m more for the reverse, adding a flag &quot;take snapshot&quot; instead of the &quot;drop rollback&quot; since the main idea of restore is that your table is broken... so taking a snapshot before restoring may not be useful and just wasting time.&lt;/p&gt;

&lt;p&gt;+1 on changing the default name, or also making it configurable&lt;/p&gt;</comment>
                            <comment id="13645571" author="yuzhihong@gmail.com" created="Tue, 30 Apr 2013 13:35:05 +0000"  >&lt;blockquote&gt;&lt;p&gt;make this a runtime restore snapshot parameter instead of a xml configuration option?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I thought adding a new &apos;rollback auto-drop&apos; config parameter facilitates back compatibility.&lt;/p&gt;</comment>
                            <comment id="13645575" author="yuzhihong@gmail.com" created="Tue, 30 Apr 2013 13:37:23 +0000"  >&lt;blockquote&gt;&lt;p&gt;adding a flag &quot;take snapshot&quot; instead of the &quot;drop rollback&quot;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Interesting idea. +1&lt;/p&gt;

&lt;p&gt;If Jon thinks the above is Okay, I will modify the subject one more time.&lt;/p&gt;</comment>
                            <comment id="13645603" author="jmhsieh" created="Tue, 30 Apr 2013 14:12:00 +0000"  >&lt;p&gt;+1 for the runtime/xml conf behavior Matteo sketched.&lt;/p&gt;

&lt;p&gt;On take snapshot vs drop rollback.  let&apos;s look at the use cases:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;table ok, use restore to get old data back.  Does it make sense to snapshot on restore?  Yes.&lt;/li&gt;
	&lt;li&gt;table ok, use restore to get old data back but it fails... (leads to next case)&lt;/li&gt;
	&lt;li&gt;table broken, use restore to fix.   Does snapshotting on the next restore attempt make sense? (hm.. not really)&lt;/li&gt;
	&lt;li&gt;table broken, using restore to get valid data back but it fails...  (go back to previous case).&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;As initially envisioned, the snapshot on restore wasn&apos;t for a fixup case, but for retaining &quot;healthy&quot; modifications before the restore.  In the cases of broken tables, cases 3,4 wants the ability to skip taking the snapshot.  I&apos;d argue that case 1 is the common case &amp;#8211; and that case 3 and 4 are arguments for having an option for not snapshotting on restore. &lt;/p&gt;

&lt;p&gt;Dropping the rollback snapshot seems a little gratuitous &amp;#8211; we have the ability to do this with existing commands don&apos;t we?&lt;/p&gt;</comment>
                            <comment id="13645621" author="yuzhihong@gmail.com" created="Tue, 30 Apr 2013 14:26:12 +0000"  >&lt;blockquote&gt;&lt;p&gt;we have the ability to do this with existing commands don&apos;t we?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The name of rollback snapshot is not returned. Person issuing restore command may not be aware of the existence of rollback snapshot. Later, when list_snapshots command reveals the rollback snapshots, people are surprised.&lt;br/&gt;
I think dropping the rollback snapshot is desirable.&lt;/p&gt;

&lt;p&gt;I will provide a patch as outlined by Matteo above.&lt;/p&gt;</comment>
                            <comment id="13645652" author="mbertozzi" created="Tue, 30 Apr 2013 15:07:23 +0000"  >&lt;p&gt;patch looks good to me, &lt;br/&gt;
we have already other conf property name hardcoded in the Admin should we start to move them somewhere like HConfigurationConst or similar?&lt;br/&gt;
do you want also to include the rename of the &quot;rollbackSnapshot&quot; or is abandoned as idea?&lt;/p&gt;</comment>
                            <comment id="13645671" author="yuzhihong@gmail.com" created="Tue, 30 Apr 2013 15:37:43 +0000"  >&lt;p&gt;Patch v2 renames rollbackSnapshot as outlined in JIRA description.&lt;/p&gt;</comment>
                            <comment id="13645688" author="hadoopqa" created="Tue, 30 Apr 2013 16:16:23 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12581176/8465-trunk-v1.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12581176/8465-trunk-v1.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 release audit&lt;/font&gt;.  The applied patch generated 1 release audit warnings (more than the trunk&apos;s current 0 warnings).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5499//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5499//testReport/&lt;/a&gt;&lt;br/&gt;
Release audit warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5499//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5499//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5499//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5499//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5499//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5499//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5499//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5499//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5499//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5499//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5499//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5499//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5499//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5499//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5499//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5499//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5499//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5499//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5499//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5499//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13645710" author="hadoopqa" created="Tue, 30 Apr 2013 16:45:46 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12581179/8465-trunk-v2.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12581179/8465-trunk-v2.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 release audit&lt;/font&gt;.  The applied patch generated 1 release audit warnings (more than the trunk&apos;s current 0 warnings).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.rest.client.TestRemoteAdmin&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5500//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5500//testReport/&lt;/a&gt;&lt;br/&gt;
Release audit warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5500//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5500//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5500//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5500//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5500//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5500//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5500//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5500//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5500//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5500//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5500//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5500//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5500//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5500//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5500//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5500//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5500//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5500//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5500//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5500//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13645739" author="yuzhihong@gmail.com" created="Tue, 30 Apr 2013 17:14:32 +0000"  >&lt;p&gt;The test passed locally:&lt;/p&gt;

&lt;p&gt;Running org.apache.hadoop.hbase.rest.client.TestRemoteAdmin&lt;br/&gt;
2013-04-30 10:09:59.100 java&lt;span class=&quot;error&quot;&gt;&amp;#91;4325:1203&amp;#93;&lt;/span&gt; Unable to load realm info from SCDynamicStore&lt;br/&gt;
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 15.158 sec&lt;/p&gt;</comment>
                            <comment id="13646000" author="mbertozzi" created="Tue, 30 Apr 2013 21:21:35 +0000"  >&lt;p&gt;+1 on v2 patch.&lt;/p&gt;</comment>
                            <comment id="13646012" author="yuzhihong@gmail.com" created="Tue, 30 Apr 2013 21:35:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jmhsieh&quot; class=&quot;user-hover&quot; rel=&quot;jmhsieh&quot;&gt;Jonathan Hsieh&lt;/a&gt;:&lt;br/&gt;
Are you Okay with patch v2 ?&lt;/p&gt;</comment>
                            <comment id="13647024" author="jmhsieh" created="Wed, 1 May 2013 22:43:02 +0000"  >&lt;blockquote&gt;&lt;p&gt;The name of rollback snapshot is not returned. Person issuing restore command may not be aware of the existence of rollback snapshot. Later, when list_snapshots command reveals the rollback snapshots, people are surprised. I think dropping the rollback snapshot is desirable.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think we should have the user specify the snapshot taken on restore.  (and deprecate the autonaming if that is confusing).&lt;/p&gt;

&lt;p&gt;In v2 I don&apos;t see the change from dropRollback wording to snapshotOnRestore wording in the code.  With this option we dropRollback but matteo&apos;s suggestion was to not even take the rollback snapshot in the firstplace.&lt;/p&gt;

&lt;p&gt;Following through would mean converting this &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; RESTORE_DROP_ROLLBACK_SNAPSHOT=&lt;span class=&quot;code-quote&quot;&gt;&quot;hbase.snapshot.restore.drop.rollback&quot;&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;to something like &lt;tt&gt;... TAKE_SNAPSHOT_ON_RESTORE = &quot;hbase.snapshot.restore.takesnapshot&quot;&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;An example would be (default would be after the change would be true instead of false):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
- &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void restoreSnapshot(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] snapshotName, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; dropRollbackSnapshot
+ &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void restoreSnapshot(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] snapshotName, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; takeSnapshot)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13647028" author="yuzhihong@gmail.com" created="Wed, 1 May 2013 22:50:05 +0000"  >&lt;p&gt;Suppose we introduce takeSnapshot for the rollback snapshot, do we still need the dropRollbackSnapshot option (when takeSnapshot is true) ?&lt;/p&gt;</comment>
                            <comment id="13647035" author="mbertozzi" created="Wed, 1 May 2013 22:58:39 +0000"  >&lt;blockquote&gt;&lt;p&gt;With this option we dropRollback but matteo&apos;s suggestion was to not even take the rollback snapshot in the firstplace.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I tought you were against this one... and I guess Ted read it in my same way&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;public void restoreSnapshot(final byte[] snapshotName, final boolean takeSnapshot)&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;wait... instead of doing this at this point we should use &quot;String failsafeSnapshotName&quot; and have the default one in the default method...&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
restore(tableName) {
   &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (conf.restore.failsafe.snapshot == &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)
      restore(tableName, &lt;span class=&quot;code-quote&quot;&gt;&quot;snapshot-&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;-rollback-name&quot;&lt;/span&gt;);
   &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
      restore(tableName, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
}

restore(tableName, failsafeSnapshotName) {
   &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (failsafeSnapshotName != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) takeSnapshot(failsafeSnapshotName);

   restore()
   ...
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13647045" author="jmhsieh" created="Wed, 1 May 2013 23:06:49 +0000"  >&lt;p&gt;This is why I wrote this comment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8465?focusedCommentId=13645603&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13645603&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-8465?focusedCommentId=13645603&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13645603&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;One underlying assumption is that snapshots are in a good state (they have to be to pass the verification step when taking a snapshot).  Operations working on a table can fail, and leave the table in a bad state (for example: master crash mid-restore, mid-alter).  Thus I think it is more likely to have a bad table than a bad snapshot.&lt;/p&gt;

&lt;p&gt;Looking at the cases, it seems to make more sense to provide the admin the option to skip taking the snapshot (if our table is currently bad) so that we only have good snapshots.  Taking the snapshot and then deleting it seems like unnecessary work.  &lt;/p&gt;</comment>
                            <comment id="13647047" author="jmhsieh" created="Wed, 1 May 2013 23:07:43 +0000"  >&lt;p&gt;Also since we have the table disabled, these operations are chainable enabling the admin to chose preferred behavior if we have a restore that doesn&apos;t take a snapshot.&lt;/p&gt;</comment>
                            <comment id="13647057" author="yuzhihong@gmail.com" created="Wed, 1 May 2013 23:16:08 +0000"  >&lt;blockquote&gt;&lt;p&gt;it is more likely to have a bad table than a bad snapshot.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Table being bad can mean two things: hbck would detect inconsistency or, table is in legitimate state but the data inside the table is not desirable. In the second case, taking rollback snapshot would help analyze how the table got into that state.&lt;/p&gt;

&lt;p&gt;If we add takeSnapshot option, do we still need the dropRollbackSnapshot option (when takeSnapshot is true) ?&lt;/p&gt;</comment>
                            <comment id="13647060" author="jmhsieh" created="Wed, 1 May 2013 23:20:20 +0000"  >&lt;blockquote&gt;&lt;p&gt;I tought you were against this one... and I guess Ted read it in my same way&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbertozzi&quot; class=&quot;user-hover&quot; rel=&quot;mbertozzi&quot;&gt;Matteo Bertozzi&lt;/a&gt; We want to have all the mechanisms for any combination.  At this point I want it to act like whatever is most similar to popular existing database&apos;s snapshot features.  I don&apos;t know what this means at the moment, but from talking with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=esammer&quot; class=&quot;user-hover&quot; rel=&quot;esammer&quot;&gt;E. Sammer&lt;/a&gt;, the option of not having an auto-failsafe-snapshot is a good one.&lt;/p&gt;
</comment>
                            <comment id="13647064" author="jmhsieh" created="Wed, 1 May 2013 23:24:25 +0000"  >&lt;blockquote&gt;&lt;p&gt;wait... instead of doing this at this point we should use &quot;String failsafeSnapshotName&quot; and have the default one in the default method...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbertozzi&quot; class=&quot;user-hover&quot; rel=&quot;mbertozzi&quot;&gt;Matteo Bertozzi&lt;/a&gt; +1 for the ability to name the &quot;failsafe&quot; snapshot.  (nice name).  I&apos;m also agreeing the ability to optionally have a failsafe snapshot after a successful run make sense.  There are two options we are taking about here &amp;#8211; the case enumeration make me lean towards having the &quot;don&apos;t take the failsafe snapshot option&quot; over the &quot;always take and then delete the failsafe&quot; approach.&lt;/p&gt;</comment>
                            <comment id="13647067" author="jmhsieh" created="Wed, 1 May 2013 23:27:43 +0000"  >&lt;blockquote&gt;&lt;p&gt;Table being bad can mean two things: hbck would detect inconsistency or, table is in legitimate state but the data inside the table is not desirable. In the second case, taking rollback snapshot would help analyze how the table got into that state.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I believe currently if we fail mid-restore, we will be in a potentially bad data and bad metadata (a table with regions stuck with different schemas!).  hbck can detectt this but I don&apos;t think it could really fix it.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;If we add takeSnapshot option, do we still need the dropRollbackSnapshot option (when takeSnapshot is true)?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Since we are disabled, and if we have the ability to specify the name of the failsafe snapshot, the admin can delete the failsafe before enabling the restored table.  So I don&apos;t think this is necessary to put all these options (e.g. both take failsafe and delete failsafe) into one command.&lt;/p&gt;</comment>
                            <comment id="13647672" author="yuzhihong@gmail.com" created="Thu, 2 May 2013 16:30:20 +0000"  >&lt;blockquote&gt;&lt;p&gt;and if we have the ability to specify the name of the failsafe snapshot, the admin can delete the failsafe before enabling the restored table.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I think it is intuitive to auto-drop the failsafe snapshot after successful restore. Making this action configurable means adding another option (dropFailsafeSnapshot) for the restore command.&lt;/p&gt;</comment>
                            <comment id="13647997" author="jmhsieh" created="Thu, 2 May 2013 22:48:52 +0000"  >&lt;p&gt;If we only have opinions let&apos;s look to how other systems do this as a tie breaker.  What happens when you take do an overwriting snapshot restore of postgres, mysql or oracle databases.&lt;/p&gt;</comment>
                            <comment id="13648072" author="yuzhihong@gmail.com" created="Fri, 3 May 2013 00:56:09 +0000"  >&lt;p&gt;Looking through &lt;a href=&quot;http://dev.mysql.com/doc/refman/5.1/en/point-in-time-recovery.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://dev.mysql.com/doc/refman/5.1/en/point-in-time-recovery.html&lt;/a&gt; , I don&apos;t see mentioning of failsafe snapshot (or its equivalent).&lt;/p&gt;

&lt;p&gt;Will see how Oracle handles snapshot restore.&lt;/p&gt;</comment>
                            <comment id="13816930" author="enis" created="Fri, 8 Nov 2013 02:20:07 +0000"  >&lt;p&gt;I was reading the restore code for something else, and was very surprised by automatic taking of the snapshots. We also do not delete that snapshot even after the restore is successful. &lt;/p&gt;

&lt;p&gt;+1 on introducing an API where taking a snapshot before restore is configurable (through arg passing, not conf). Also in case the snapshot restore is success, we should delete the previous snapshot. The arg name for this (dropRollbackSnapshot) might be confusing since the user might think that it will drop the original snapshot, not the one for restore. &lt;/p&gt;</comment>
                            <comment id="13822003" author="mbertozzi" created="Wed, 13 Nov 2013 23:59:42 +0000"  >&lt;p&gt;v3 adds a new restoreSnapshot() method that takes a boolean that defines if the pre-restore snapshot should be taken or not.&lt;br/&gt;
The old single param method is using a property that allows to enable/disable the pre-restore snapshot.&lt;br/&gt;
The pre-restore snapshot is now deleted at the end of the restore&lt;br/&gt;
The name of the pre-restore snapshot is now configurable using a property&lt;/p&gt;</comment>
                            <comment id="13822016" author="yuzhihong@gmail.com" created="Thu, 14 Nov 2013 00:11:25 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      failSafeSnapshotSnapshotName = conf.get(&lt;span class=&quot;code-quote&quot;&gt;&quot;hbase.snapshot.restore.failsafe.name&quot;&lt;/span&gt;,
+        &lt;span class=&quot;code-quote&quot;&gt;&quot;hbase-restore-failsafe-{table.name}-{restore.timestamp}&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The failsafe snapshot name is pretty long. Can it include the snapshotName for the restore operation ?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+          &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; msg = &lt;span class=&quot;code-quote&quot;&gt;&quot;Restore snapshot=&quot;&lt;/span&gt; + snapshotName +
+            &lt;span class=&quot;code-quote&quot;&gt;&quot; failed. Rollback to snapshot=&quot;&lt;/span&gt; + failSafeSnapshotSnapshotName + &lt;span class=&quot;code-quote&quot;&gt;&quot; succeeded.&quot;&lt;/span&gt;;
+          LOG.error(msg, e);
+          internalRestoreSnapshot(failSafeSnapshotSnapshotName, tableName);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The success message seems to come a bit early.&lt;/p&gt;</comment>
                            <comment id="13822777" author="yuzhihong@gmail.com" created="Thu, 14 Nov 2013 19:07:03 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+        &lt;span class=&quot;code-quote&quot;&gt;&quot;hbase-failsafe-{snapshot.name}-{restore.timestamp}&quot;&lt;/span&gt;);
+      failSafeSnapshotSnapshotName = failSafeSnapshotSnapshotName
+        .replace(&lt;span class=&quot;code-quote&quot;&gt;&quot;{snapshot.name}&quot;&lt;/span&gt;, snapshotName)
+        .replace(&lt;span class=&quot;code-quote&quot;&gt;&quot;{table.name}&quot;&lt;/span&gt;, tableName.toString().replace(TableName.NAMESPACE_DELIM, &apos;.&apos;))
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
{table.name}
&lt;p&gt; doesn&apos;t appear in the default template. Please add comment in hbase-default.xml&lt;/p&gt;</comment>
                            <comment id="13823329" author="hadoopqa" created="Fri, 15 Nov 2013 06:03:40 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12613999/HBASE-8465-v5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12613999/HBASE-8465-v5.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to cause Findbugs (version 1.3.9) to fail.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 site&lt;/font&gt;.  The patch appears to cause mvn site goal to fail.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7874//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7874//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7874//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7874//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13824296" author="yuzhihong@gmail.com" created="Sat, 16 Nov 2013 00:57:41 +0000"  >&lt;p&gt;lgtm&lt;/p&gt;

&lt;p&gt;Please check findbugs.&lt;/p&gt;</comment>
                            <comment id="13826131" author="hadoopqa" created="Tue, 19 Nov 2013 03:21:08 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12614520/HBASE-8465-v6.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12614520/HBASE-8465-v6.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 10 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 site&lt;/font&gt;.  The patch appears to cause mvn site goal to fail.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7924//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7924//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7924//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7924//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7924//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7924//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7924//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7924//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7924//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7924//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7924//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7924//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7924//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7924//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7924//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7924//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7924//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7924//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7924//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7924//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7924//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7924//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13826968" author="yuzhihong@gmail.com" created="Tue, 19 Nov 2013 21:35:28 +0000"  >&lt;p&gt;Patch v6 is good to go.&lt;/p&gt;</comment>
                            <comment id="13831873" author="hudson" created="Mon, 25 Nov 2013 20:24:18 +0000"  >&lt;p&gt;SUCCESS: Integrated in hbase-0.96 #204 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.96/204/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.96/204/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8465&quot; title=&quot;Auto-drop rollback snapshot for snapshot restore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8465&quot;&gt;&lt;del&gt;HBASE-8465&lt;/del&gt;&lt;/a&gt; Auto-drop rollback snapshot for snapshot restore (mbertozzi: rev 1545361)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-client/src/main/java/org/apache/hadoop/hbase/client/HBaseAdmin.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-common/src/main/resources/hbase-default.xml&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestRestoreSnapshotFromClient.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13832184" author="hudson" created="Tue, 26 Nov 2013 01:54:59 +0000"  >&lt;p&gt;SUCCESS: Integrated in hbase-0.96-hadoop2 #132 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.96-hadoop2/132/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.96-hadoop2/132/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8465&quot; title=&quot;Auto-drop rollback snapshot for snapshot restore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8465&quot;&gt;&lt;del&gt;HBASE-8465&lt;/del&gt;&lt;/a&gt; Auto-drop rollback snapshot for snapshot restore (mbertozzi: rev 1545361)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-client/src/main/java/org/apache/hadoop/hbase/client/HBaseAdmin.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-common/src/main/resources/hbase-default.xml&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestRestoreSnapshotFromClient.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13832254" author="hudson" created="Tue, 26 Nov 2013 03:16:22 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #4698 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4698/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4698/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8465&quot; title=&quot;Auto-drop rollback snapshot for snapshot restore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8465&quot;&gt;&lt;del&gt;HBASE-8465&lt;/del&gt;&lt;/a&gt; Auto-drop rollback snapshot for snapshot restore (mbertozzi: rev 1545360)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-client/src/main/java/org/apache/hadoop/hbase/client/HBaseAdmin.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-common/src/main/resources/hbase-default.xml&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestRestoreSnapshotFromClient.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13832508" author="hudson" created="Tue, 26 Nov 2013 11:29:28 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #852 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/852/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/852/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8465&quot; title=&quot;Auto-drop rollback snapshot for snapshot restore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8465&quot;&gt;&lt;del&gt;HBASE-8465&lt;/del&gt;&lt;/a&gt; Auto-drop rollback snapshot for snapshot restore (mbertozzi: rev 1545360)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-client/src/main/java/org/apache/hadoop/hbase/client/HBaseAdmin.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-common/src/main/resources/hbase-default.xml&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestRestoreSnapshotFromClient.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13849496" author="stack" created="Mon, 16 Dec 2013 18:46:45 +0000"  >&lt;p&gt;Released in 0.96.1.  Issue closed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                            <outwardlinks description="supercedes">
                                        <issuelink>
            <issuekey id="12643691">HBASE-8385</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12581176" name="8465-trunk-v1.txt" size="3461" author="yuzhihong@gmail.com" created="Tue, 30 Apr 2013 15:01:45 +0000"/>
                            <attachment id="12581179" name="8465-trunk-v2.txt" size="3960" author="yuzhihong@gmail.com" created="Tue, 30 Apr 2013 15:37:43 +0000"/>
                            <attachment id="12613741" name="HBASE-8465-v3.patch" size="11887" author="mbertozzi" created="Wed, 13 Nov 2013 23:59:42 +0000"/>
                            <attachment id="12613762" name="HBASE-8465-v4.patch" size="13111" author="mbertozzi" created="Thu, 14 Nov 2013 01:52:50 +0000"/>
                            <attachment id="12613999" name="HBASE-8465-v5.patch" size="13275" author="mbertozzi" created="Fri, 15 Nov 2013 02:25:09 +0000"/>
                            <attachment id="12614520" name="HBASE-8465-v6.patch" size="12333" author="mbertozzi" created="Tue, 19 Nov 2013 00:34:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 30 Apr 2013 10:36:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>325756</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1k77z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>326101</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>