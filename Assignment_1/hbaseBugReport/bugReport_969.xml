<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:49:19 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-969/HBASE-969.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-969] Won&apos;t when storefile &gt; 2G (WAS -&gt; Won&apos;t split under load)</title>
                <link>https://issues.apache.org/jira/browse/HBASE-969</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Looks like a new bug where we won&apos;t split when under load.  Some recent refactoring seems to have dropped our split provoker.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12407383">HBASE-969</key>
            <summary>Won&apos;t when storefile &gt; 2G (WAS -&gt; Won&apos;t split under load)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stack">stack</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Tue, 28 Oct 2008 22:19:04 +0000</created>
                <updated>Sun, 13 Sep 2009 22:26:30 +0000</updated>
                            <resolved>Fri, 31 Oct 2008 18:17:11 +0000</resolved>
                                                    <fixVersion>0.19.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12643539" author="stack" created="Wed, 29 Oct 2008 17:37:06 +0000"  >&lt;p&gt;Adding to 0.19.0. Need to check it.   In a subsequent run, regions split fine.  Need to try and recreate.&lt;/p&gt;</comment>
                            <comment id="12643692" author="stack" created="Wed, 29 Oct 2008 23:08:03 +0000"  >&lt;p&gt;Just saw the &apos;no split&apos; happen.   One thing to notice is that with our new batch uploading, we&apos;re overwhelming compaction.  I&apos;m seeing long-running compactions up in the minutes again.  Maybe our algorithm needs tuning &amp;#8211; if lots of store files, pick up more than the smallest &amp;#8211; especially if all close in size as is what I&apos;m seeing here (flushes are 128M, 2x64M configured size).  Need to still figure why no split is happening:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2008-10-29 23:03:02,663 DEBUG org.apache.hadoop.hbase.regionserver.HStore: Compaction size of 1118057853/info: 16.4g; Skipped 139 files , size: 12677739481
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12643745" author="stack" created="Thu, 30 Oct 2008 05:18:33 +0000"  >&lt;p&gt;Regionserver eventually OOME&apos;d, probably because store got so big.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2008-10-29 23:03:02,306 DEBUG org.apache.hadoop.hbase.regionserver.HStore: Completed compaction of 1118057853/info store size is 48.3g; time since last major compaction: 5834 seconds
2008-10-29 23:03:02,420 WARN org.apache.hadoop.hbase.regionserver.HStore: Failed getting store size &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 1118057853/info
java.io.EOFException: End of file reached before reading fully.
        at org.apache.hadoop.fs.FSInputStream.readFully(FSInputStream.java:68)
        at org.apache.hadoop.fs.FSDataInputStream.readFully(FSDataInputStream.java:51)
        at org.apache.hadoop.hbase.io.BlockFSInputStream.blockSeekTo(BlockFSInputStream.java:163)
        at org.apache.hadoop.hbase.io.BlockFSInputStream.read(BlockFSInputStream.java:124)
        at java.io.DataInputStream.readInt(DataInputStream.java:387)
        at org.apache.hadoop.io.SequenceFile$Reader.readRecordLength(SequenceFile.java:1898)
        at org.apache.hadoop.io.SequenceFile$Reader.next(SequenceFile.java:1928)
        at org.apache.hadoop.io.SequenceFile$Reader.next(SequenceFile.java:1833)
        at org.apache.hadoop.io.MapFile$Reader.finalKey(MapFile.java:391)
        at org.apache.hadoop.hbase.regionserver.HStore.checkSplit(HStore.java:1886)
        at org.apache.hadoop.hbase.regionserver.HStore.compact(HStore.java:917)
        at org.apache.hadoop.hbase.regionserver.HRegion.compactStores(HRegion.java:902)
        at org.apache.hadoop.hbase.regionserver.HRegion.compactStores(HRegion.java:860)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12644384" author="stack" created="Fri, 31 Oct 2008 18:15:16 +0000"  >&lt;p&gt;What was actually producing the exception was bad math; when integer math overflowed int, we were trying to do negative offsets.&lt;/p&gt;</comment>
                            <comment id="12644385" author="stack" created="Fri, 31 Oct 2008 18:17:11 +0000"  >&lt;p&gt;Committed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12393175" name="badmath.patch" size="691" author="stack" created="Fri, 31 Oct 2008 18:15:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25501</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 8 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hajz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98972</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>