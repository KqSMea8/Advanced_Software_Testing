<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:10:36 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-10115/HBASE-10115.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-10115] Add a hook for compaction deletes</title>
                <link>https://issues.apache.org/jira/browse/HBASE-10115</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The idea is to add a hook to coprocessors to be able to get triggered when compaction delete a cell before of the number of versions or the TTL.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12683716">HBASE-10115</key>
            <summary>Add a hook for compaction deletes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="jmspaggi">Jean-Marc Spaggiari</assignee>
                                    <reporter username="jmspaggi">Jean-Marc Spaggiari</reporter>
                        <labels>
                    </labels>
                <created>Mon, 9 Dec 2013 23:33:33 +0000</created>
                <updated>Tue, 29 Apr 2014 00:12:35 +0000</updated>
                            <resolved>Tue, 29 Apr 2014 00:12:35 +0000</resolved>
                                    <version>0.99.0</version>
                                                    <component>Compaction</component>
                    <component>Coprocessors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13844163" author="anoop.hbase" created="Tue, 10 Dec 2013 10:18:29 +0000"  >&lt;p&gt;Can u tell the exact use case in your mind?  Can a Scanner wrapper do the work?  We have used wrapper to do some extra work during compaction. I forgot now the details of that.&lt;/p&gt;</comment>
                            <comment id="13844383" author="jmspaggi" created="Tue, 10 Dec 2013 16:15:17 +0000"  >&lt;p&gt;I had few usecases in mind when I wrote that.&lt;/p&gt;

&lt;p&gt;1) You have one table with some events/data/information with a VERSION=5 limit because you want to keep if &quot;small&quot; and efficient. However, when a version is removed, you don&apos;t want to loose it because you need it for other purposes. So you want to &quot;transfer&quot; it to another table where you will have VERSION=MaxInt.&lt;/p&gt;

&lt;p&gt;2) You have a TTL of 30 days in a column because you only need quick access to the last 30 days values. However, you want to keep he full history in HDFS. So each time a value expire from the table, you want to be able to store it into HDFS. You can steam it to flume, or push it on a queue, or write it into HDFS then aggregate the values, or anything else.&lt;/p&gt;

&lt;p&gt;3) You have some mandatory requirements to keep EVERYTHING. Even what has been deleted. So when a delete is applied while compacting, you want to store somewhere else what has been deleted, just in case. Like a &quot;.trash&quot; option, but for cells.&lt;/p&gt;

&lt;p&gt;There might be others, but that was all I had in mind at that time...&lt;/p&gt;</comment>
                            <comment id="13845663" author="apurtell" created="Wed, 11 Dec 2013 19:33:40 +0000"  >&lt;p&gt;I&apos;m not sure I understand how these cases can&apos;t be addressed through appropriate schema options.&lt;/p&gt;</comment>
                            <comment id="13845724" author="jmspaggi" created="Wed, 11 Dec 2013 21:07:47 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;, how will you build a schema for that?&lt;/p&gt;

&lt;p&gt;Like, let&apos;s take this usecase.&lt;/p&gt;

&lt;p&gt;User push data into HBase with versions=10. And want to make sure data after 10 versions is not lost. They can of course run MR jobs, count the versions, and make sure that version 10 is stored somewhere else in case a new version is coming and pushing it out, but will be a pain. Why can&apos;t they just hook on this deletion to do what they want with the version which is going to be purged? I&apos;m not sure how a schema option can help with that.&lt;/p&gt;</comment>
                            <comment id="13845749" author="apurtell" created="Wed, 11 Dec 2013 21:40:14 +0000"  >&lt;p&gt;More like INT_MAX versions and housekeeping via MR tasks. &lt;/p&gt;</comment>
                            <comment id="13845763" author="sershe" created="Wed, 11 Dec 2013 22:02:08 +0000"  >&lt;p&gt;Why not another coproc endpoint or improve the existing one? As long as it doesn&apos;t affect perf too much... we can already wrap (or replace) compaction scanner thru coproc.&lt;br/&gt;
ScanQueryMatcher is what decides what KVs get skipped, so if a wrapping scanner could influence that (or even just be able to react to .match call), it should be almost sufficient. It has KV, it has the default verdict. The only problem is with seek to next something results, which can skip KVs. This will no longer be allowed if all deleted KVs are to be examined if I understand that code correctly, so coproc will have to also prevent matcher from doing that?&lt;/p&gt;</comment>
                            <comment id="13845765" author="sershe" created="Wed, 11 Dec 2013 22:03:11 +0000"  >&lt;p&gt;Um, what I also meant to spell out more clearly is that there&apos;s no place now where we look at KV and decide that it&apos;s discarded that will be necessarily called for all KVs. Afaiu.&lt;/p&gt;</comment>
                            <comment id="13983767" author="jmspaggi" created="Tue, 29 Apr 2014 00:12:35 +0000"  >&lt;p&gt;Duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11054&quot; title=&quot;Create new hook in StoreScanner to help user creating his own delete tracker&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11054&quot;&gt;&lt;del&gt;HBASE-11054&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 10 Dec 2013 10:18:29 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>362788</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 33 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1qj9z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>363082</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>