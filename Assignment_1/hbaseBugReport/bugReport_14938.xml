<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:57:58 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-14938/HBASE-14938.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-14938] Limit the number of znodes for ZK in bulk loaded hfile replication</title>
                <link>https://issues.apache.org/jira/browse/HBASE-14938</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;In ZK the maximum allowable size of the data array is 1 MB. Until we have fixed &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10295&quot; title=&quot;Refactor the replication  implementation to eliminate permanent zk node&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10295&quot;&gt;HBASE-10295&lt;/a&gt; we need to handle this.&lt;br/&gt;
Approach to this problem will be discussed in the comments section.&lt;/p&gt;

&lt;p&gt;Note: We have done internal testing with more than 3k nodes in ZK yet to be replicated.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12919639">HBASE-14938</key>
            <summary>Limit the number of znodes for ZK in bulk loaded hfile replication</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="ashish singhi">Ashish Singhi</assignee>
                                    <reporter username="ashish singhi">Ashish Singhi</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Dec 2015 10:19:23 +0000</created>
                <updated>Sun, 19 Jun 2016 04:45:16 +0000</updated>
                                                            <fixVersion>2.0.0</fixVersion>
                    <fixVersion>1.4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="15067661" author="ashish singhi" created="Tue, 22 Dec 2015 07:13:04 +0000"  >&lt;p&gt;I am planning to add a new configuration &lt;tt&gt;hbase.replication.max.znodes.per.request&lt;/tt&gt; which will control the number of znodes we send for create/delete to ZK in a single request default being 5000.&lt;br/&gt;
For now we do not have any control on the number of znodes we can request from ZK in one request. There is a open jira in ZK(&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2260&quot; title=&quot;Paginated getChildren call&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2260&quot;&gt;ZOOKEEPER-2260&lt;/a&gt;) and work is in progress, once that is complete we can control this part also, I will just add a TODO for this.&lt;/p&gt;

&lt;p&gt;Any concern with above approach or do you have any other thoughts ?&lt;/p&gt;</comment>
                            <comment id="15067885" author="anoop.hbase" created="Tue, 22 Dec 2015 10:03:02 +0000"  >&lt;p&gt;Considering the zk nodes total size , we have to calc the nodes#.  I mean how many bytes each of the hfiles ref node takes.&lt;/p&gt;</comment>
                            <comment id="15067889" author="ashish singhi" created="Tue, 22 Dec 2015 10:05:28 +0000"  >&lt;p&gt;We checked for a hfile name like &apos;ace49052a17246aa83712e48c482a21f_SeqId_4_&apos; it came to 41 bytes.&lt;/p&gt;</comment>
                            <comment id="15068496" author="yuzhihong@gmail.com" created="Tue, 22 Dec 2015 18:07:17 +0000"  >&lt;p&gt;From another angle, should we consider the sum of sizes of HFiles whose refs are stored in znode ?&lt;/p&gt;

&lt;p&gt;The rationale is to control the amount of data to be replicated.&lt;/p&gt;</comment>
                            <comment id="15069593" author="ashish singhi" created="Wed, 23 Dec 2015 12:50:08 +0000"  >&lt;p&gt;SGTM.&lt;br/&gt;
I already had a patch with the approach I mentioned, if required I can post here.&lt;br/&gt;
I will prepare a patch with this approach and post if no other comments.&lt;br/&gt;
Thanks.&lt;/p&gt;</comment>
                            <comment id="15069908" author="ashish singhi" created="Wed, 23 Dec 2015 17:23:07 +0000"  >&lt;p&gt;Regarding Ted&apos;s approach, I checked with him offline, his understanding regarding this was different.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;The rationale is to control the amount of data to be replicated.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Ted, concern is regarding the amount of bulk loaded data we replicate to a peer cluster in a single request. IMO that is a topic of discussion on another jira.&lt;/p&gt;

&lt;p&gt;Attached patch based on the approach I mentioned in my very first comment.&lt;br/&gt;
Please review.&lt;/p&gt;</comment>
                            <comment id="15070181" author="hadoopqa" created="Wed, 23 Dec 2015 20:51:38 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12779273/HBASE-14938.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12779273/HBASE-14938.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit e00a04df10de70b029a2d1f115f97f9d79a05c6a.&lt;br/&gt;
  ATTACHMENT ID: 12779273&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;. The applied patch does not generate new checkstyle errors.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.client.TestHCM&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestMobSnapshotFromClient&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.TestCorruptedRegionStoreFile&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestMultiParallel&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestRestoreSnapshotFromClientWithRegionReplicas&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestMobCloneSnapshotFromClient&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestMobRestoreSnapshotFromClient&lt;br/&gt;
                  org.apache.hadoop.hbase.coprocessor.TestRegionServerCoprocessorEndpoint&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestLeaseRenewal&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestSnapshotFromClient&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestSnapshotFromClientWithRegionReplicas&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestScannersFromClientSide&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestAdmin1&lt;br/&gt;
                  org.apache.hadoop.hbase.coprocessor.TestMasterCoprocessorExceptionWithRemove&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestCloneSnapshotFromClient&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestCloneSnapshotFromClientWithRegionReplicas&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestMetaWithReplicas&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.TestMobStoreScanner&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.TestRegionMergeTransactionOnCluster&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestRestoreSnapshotFromClient&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 zombies&lt;/font&gt;. No zombie tests found running at the end of the build.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16995//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16995//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16995//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16995//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16995//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16995//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16995//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16995//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15070870" author="ashish singhi" created="Thu, 24 Dec 2015 10:57:40 +0000"  >&lt;p&gt;Reattaching again&lt;/p&gt;</comment>
                            <comment id="15070884" author="yuzhihong@gmail.com" created="Thu, 24 Dec 2015 11:05:11 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
458	    } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
459	      List&amp;lt;ZKUtilOp&amp;gt; listOfOps = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;ZKUtil.ZKUtilOp&amp;gt;(totalNoOfFiles);
460	      &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; totalNoOfFiles; i++) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The else branch should be covered by the new controlXX method(s), right (the remainder part) ?&lt;br/&gt;
Can you consolidate if and else branches so that readability is better ?&lt;/p&gt;

&lt;p&gt;lgtm otherwise&lt;/p&gt;</comment>
                            <comment id="15071038" author="hadoopqa" created="Thu, 24 Dec 2015 14:02:54 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12779425/HBASE-14938%281%29.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12779425/HBASE-14938%281%29.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 6fc2596ab37614fe35ccfebda0564e4721bd4b95.&lt;br/&gt;
  ATTACHMENT ID: 12779425&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;. The applied patch does not generate new checkstyle errors.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 zombies&lt;/font&gt;. No zombie tests found running at the end of the build.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/17017//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/17017//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/17017//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/17017//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/17017//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/17017//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/17017//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/17017//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15071187" author="ashish singhi" created="Thu, 24 Dec 2015 18:52:36 +0000"  >&lt;p&gt;Thanks for the review, Ted.&lt;br/&gt;
v1 addresses your comment.&lt;br/&gt;
Please review.&lt;/p&gt;</comment>
                            <comment id="15071199" author="yuzhihong@gmail.com" created="Thu, 24 Dec 2015 19:28:15 +0000"  >&lt;p&gt;Latest patch looks good, pending QA run result.&lt;/p&gt;</comment>
                            <comment id="15071267" author="hadoopqa" created="Thu, 24 Dec 2015 22:10:26 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12779471/HBASE-14938-v1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12779471/HBASE-14938-v1.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit e15c48ed2cf025dd3b0790c55cdc4239cc0fc161.&lt;br/&gt;
  ATTACHMENT ID: 12779471&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;. The applied patch does not generate new checkstyle errors.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 zombies&lt;/font&gt;. No zombie tests found running at the end of the build.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/17022//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/17022//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/17022//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/17022//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/17022//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/17022//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/17022//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/17022//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15071321" author="anoop.hbase" created="Fri, 25 Dec 2015 01:55:02 +0000"  >&lt;blockquote&gt;&lt;p&gt;int totalNoOfRequests = totalNoOfFiles / maxZnodesPerRequest;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Can we avoid having 2 loop code.. When totalNoOfFiles &amp;lt;maxZnodesPerRequest, I initially thought u will get issue in 1st loop..  But then totalNoOfRequests  will be 0 and so we wont go into 1st loop at all..   I would say readability wise this can be improved.&lt;br/&gt;
totalNoOfRequests  = 1 in that case and every case we have one loop doing the work?  Just a suggestion..  See once pls.&lt;/p&gt;

&lt;p&gt;How we have selected the def value to be 5000?&lt;br/&gt;
We will get these many files to be added in one call?&lt;/p&gt;</comment>
                            <comment id="15071447" author="yuzhihong@gmail.com" created="Fri, 25 Dec 2015 09:23:48 +0000"  >&lt;blockquote&gt;&lt;p&gt;totalNoOfRequests = 1 in that case and every case we have one loop doing the work?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Can you clarify the above scenario a bit more ?&lt;br/&gt;
When would totalNoOfRequests be 1 ?&lt;/p&gt;</comment>
                            <comment id="15071505" author="ashish singhi" created="Fri, 25 Dec 2015 11:01:02 +0000"  >&lt;p&gt;Thanks for the comments.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Can we avoid having 2 loop code.. When totalNoOfFiles &amp;lt;maxZnodesPerRequest, I initially thought u will get issue in 1st loop.. But then totalNoOfRequests will be 0 and so we wont go into 1st loop at all.. I would say readability wise this can be improved.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I had that in my first patch, then as per Ted suggestion for better readability I combined them. Anyways when files are less than the max value we will have to do a if condition check to avoid the first loop, that condition check we have now in for loop, is that bad ?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;totalNoOfRequests = 1 in that case and every case we have one loop doing the work?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;No, for example when we have totalNoOfFiles=6000 we will execute both the loops.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;How we have selected the def value to be 5000? We will get these many files to be added in one call?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Mostly not, this is only to control the max data size limit allowed in a ZK request (as mentioned in description).&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu&quot; class=&quot;user-hover&quot; rel=&quot;tedyu&quot;&gt;Ted Yu&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;When would totalNoOfRequests be 1 ?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;When totalNoOfFiles is equal to maxZnodesPerRequest.&lt;/p&gt;</comment>
                            <comment id="15071644" author="yuzhihong@gmail.com" created="Fri, 25 Dec 2015 15:17:20 +0000"  >&lt;blockquote&gt;&lt;p&gt;When totalNoOfFiles is equal to maxZnodesPerRequest.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;To be exact, when totalNoOfFiles is in [maxZnodesPerRequest, 2 &amp;#42; maxZnodesPerRequest)&lt;/p&gt;</comment>
                            <comment id="15071779" author="anoop.hbase" created="Sat, 26 Dec 2015 01:27:55 +0000"  >&lt;blockquote&gt;&lt;p&gt;No, for example when we have totalNoOfFiles=6000 we will execute both the loops.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;No what I was suggesting is if we have one loop irrespective of total#files, that would have been better..  Any way just a suggestion/query that was.&lt;br/&gt;
Some thing coming like totalNoOfRequests =0 look bad..  May be just rename this var?  fullBatches =?&lt;br/&gt;
Just add some code level one liner comments what each loop doing.  &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Mostly not, this is only to control the max data size limit allowed in a ZK request (as mentioned in description).&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes I was just wondering whether/when all this comes.  Ya ok it is good to limit any way.&lt;br/&gt;
But the retrieval part is the main area..  As u stated, we need zk jira issue to be fixed for that...   Pls file a jira for tracking that part.  If the replication is not happening for a while, this list under hfileref can grow big.&lt;/p&gt;</comment>
                            <comment id="15071895" author="ashish singhi" created="Sat, 26 Dec 2015 16:08:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt;, how v2 looks ?&lt;/p&gt;</comment>
                            <comment id="15071962" author="hadoopqa" created="Sat, 26 Dec 2015 20:33:19 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12779551/HBASE-14938-v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12779551/HBASE-14938-v2.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 5eefe1317336714b409500daaebe003f65fd87b6.&lt;br/&gt;
  ATTACHMENT ID: 12779551&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;. The applied patch does not generate new checkstyle errors.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 zombies&lt;/font&gt;. No zombie tests found running at the end of the build.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/17035//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/17035//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/17035//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/17035//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/17035//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/17035//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/17035//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/17035//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15072059" author="ashish singhi" created="Sun, 27 Dec 2015 06:04:34 +0000"  >&lt;p&gt;Retry to get a green build.&lt;/p&gt;</comment>
                            <comment id="15072102" author="hadoopqa" created="Sun, 27 Dec 2015 09:24:47 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12779566/HBASE-14938-v2%281%29.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12779566/HBASE-14938-v2%281%29.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 5eefe1317336714b409500daaebe003f65fd87b6.&lt;br/&gt;
  ATTACHMENT ID: 12779566&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;. The applied patch does not generate new checkstyle errors.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 zombies&lt;/font&gt;. No zombie tests found running at the end of the build.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/17040//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/17040//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/17040//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/17040//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/17040//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/17040//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/17040//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/17040//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15080771" author="ashish singhi" created="Mon, 4 Jan 2016 07:22:39 +0000"  >&lt;p&gt;After a offline discussion with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt;, writing data to ZK is not a concern but fetching data from ZK is a major concern. &lt;br/&gt;
So lets keep this jira open and wait for either &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1162&quot; title=&quot;consistent handling of jute.maxbuffer when attempting to read large zk &amp;quot;directories&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1162&quot;&gt;ZOOKEEPER-1162&lt;/a&gt; or &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2260&quot; title=&quot;Paginated getChildren call&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2260&quot;&gt;ZOOKEEPER-2260&lt;/a&gt; release.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12859778">ZOOKEEPER-2260</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12520055">ZOOKEEPER-1162</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12779355">HBASE-13153</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12919866">HBASE-14945</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12779425" name="HBASE-14938(1).patch" size="9344" author="ashish singhi" created="Thu, 24 Dec 2015 10:57:40 +0000"/>
                            <attachment id="12779471" name="HBASE-14938-v1.patch" size="8111" author="ashish singhi" created="Thu, 24 Dec 2015 18:51:19 +0000"/>
                            <attachment id="12779566" name="HBASE-14938-v2(1).patch" size="8367" author="ashish singhi" created="Sun, 27 Dec 2015 06:04:34 +0000"/>
                            <attachment id="12779551" name="HBASE-14938-v2.patch" size="8367" author="ashish singhi" created="Sat, 26 Dec 2015 16:06:55 +0000"/>
                            <attachment id="12779273" name="HBASE-14938.patch" size="9344" author="ashish singhi" created="Wed, 23 Dec 2015 17:18:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 22 Dec 2015 10:03:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            49 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2piwv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>