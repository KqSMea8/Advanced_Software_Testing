<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:19:54 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-11070/HBASE-11070.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-11070] [AccessController] Restore early-out access denial if the user has no access at the table or CF level</title>
                <link>https://issues.apache.org/jira/browse/HBASE-11070</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;We want to support two different use cases for cell ACLs:&lt;br/&gt;
1. The user can see all cells in a table or CF unless a cell ACL denies access&lt;br/&gt;
2. The user cannot see any cells in a table or CF unless a cell ACL grants access&lt;br/&gt;
For the sake of flexibility we made it a toggle on an operation by operation basis. However this changed the behavior of the AccessController with respect to how requests for which a user has no grant at the table or CF level are handled. Prior to the cell ACL changes if a user had no grant at the table or CF level, they would see an AccessDeniedException. We can&apos;t do that if we want cell ACLs to provide exceptional access. Subsequent to the cell ACL changes if a user has no grant at the table or CF level, there is no exception, they simply won&apos;t see any cells except those granting exceptional access at the cell level. This also brings the AccessController semantics in line with those of the new VisibilityController. &lt;/p&gt;

&lt;p&gt;Feedback on dev@ is this change is a bridge too far for at least three reasons. First, it is surprising (Enis and Vandana). Second, the audit trail is affected or missing (Enis). Third, it allows any user on the cluster to mount targeted queries against all tables looking for timing differences, that depending on schema design could possibly leak the existence in row keys of sensitive information, or leak the size of the table (Todd). Although we can&apos;t prevent timing attacks in general we can limit the scope of what a user can explore by restoring early-out access denial if the user has no access at the table or CF level.&lt;/p&gt;

&lt;p&gt;We can make early-out access denial if the user has no access at the table or CF level configurable on a per table basis. Setting the default to &quot;false&quot;, with a release note and paragraph in the security guide explaining how to reintroduce the old behavior, would address the above and not introduce another surprising change among 0.98 releases. If the consensus is (presumably a milder) surprise due to this change is fine, then the default could be &quot;true&quot;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12710382">HBASE-11070</key>
            <summary>[AccessController] Restore early-out access denial if the user has no access at the table or CF level</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="apurtell">Andrew Purtell</reporter>
                        <labels>
                    </labels>
                <created>Thu, 24 Apr 2014 18:15:57 +0000</created>
                <updated>Mon, 12 May 2014 03:22:30 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                                                            <comments>
                            <comment id="13980146" author="apurtell" created="Thu, 24 Apr 2014 19:39:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tlipcon&quot; class=&quot;user-hover&quot; rel=&quot;tlipcon&quot;&gt;Todd Lipcon&lt;/a&gt; since I see you lurking on this issue, in your email on dev@ you mentioned two distinct read permissions, &apos;READ_VISIBLE&apos; and &apos;READ_INVISIBLE&apos; that could be granted at the table level. (Given how grants via the ACL table work though the same semantics would be available per column family.) We could add those options to the Permission enum and make the current &apos;READ&apos; a synonym for one of them. The distinction would not be meaningful at the cell level but that could be fine. Having the extra bit would make every authorization decision a bit more complicated to implement and expensive. Do we also want WRITE_VISIBLE and WRITE_INVISIBLE? Write perms can be granted independent of read perms. &lt;/p&gt;

&lt;p&gt;Because that gets weird I think a table / CF attribute as mentioned in the description. &lt;/p&gt;

&lt;p&gt;But, soliciting implementation preference. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt;? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=avandana&quot; class=&quot;user-hover&quot; rel=&quot;avandana&quot;&gt;Vandana Ayyalasomayajula&lt;/a&gt; ? &lt;/p&gt;</comment>
                            <comment id="13981344" author="enis" created="Fri, 25 Apr 2014 18:12:03 +0000"  >&lt;p&gt;I think it makes sense to have a separate permission for &quot;being able to read only granted cells&quot;. Also thinking more about this, we want the lack of default READ perm would prevent the users from launching scanners. If the admin wants to allow some users to read some cells than she can explicitly set it so. &lt;/p&gt;</comment>
                            <comment id="13981423" author="apurtell" created="Fri, 25 Apr 2014 18:38:48 +0000"  >&lt;blockquote&gt;&lt;p&gt;I think it makes sense to have a separate permission for &quot;being able to read only granted cells&quot;.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We can tinker and see how this works out. See above comment about WRITE being granted independent of READ. Do we want the same kind of separate permission for &quot;being able to write only granted cells&quot;?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Also thinking more about this, we want the lack of default READ perm would prevent the users from launching scanners. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This could be done pretty easily by varying the permissions tests in preGet and preExists versus preScannerOpen. &lt;/p&gt;</comment>
                            <comment id="13981442" author="apurtell" created="Fri, 25 Apr 2014 18:52:10 +0000"  >&lt;p&gt;Opened subtasks&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                            <subtask id="12710617">HBASE-11077</subtask>
                            <subtask id="12710618">HBASE-11078</subtask>
                            <subtask id="12711600">HBASE-11103</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 25 Apr 2014 18:12:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>388704</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 34 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1uygv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>388955</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>