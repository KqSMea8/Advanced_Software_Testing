<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:06:12 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-9634/HBASE-9634.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-9634] HBase Table few regions are not getting recovered from the &apos;Transition&apos;/&apos;OFFLINE state&apos; </title>
                <link>https://issues.apache.org/jira/browse/HBASE-9634</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;
HBase Table few regions are not getting recovered from the &apos;Transition&apos;/&apos;OFFLINE state&apos;

Test Procedure:
1. Setup Non HA Hadoop Cluster with two nodes (Node1-XX.XX.XX.XX,  Node2-YY.YY.YY.YY)
2. Install Zookeeper &amp;amp; HRegionServer in Node-1
3. Install HMaster &amp;amp; HRegionServer in Node-2
4. From Node2 create HBase Table ( table name &apos;t1&apos; with one column family &apos;cf1&apos; )
5. Perform addrecord 99649 rows 
6. Perform kill and restart of Node1 Region Server &amp;amp; Node2 Region Server in a loop for 10-20 times

2013-09-23 18:28:06,610 INFO org.apache.hadoop.hbase.regionserver.handler.OpenRegionHandler: Opening of region {NAME =&amp;gt; &apos;t1,row507465,1379937224590.2d9fad2aee78103f928d8c7fe16ba6cd.&apos;, STARTKEY =&amp;gt; &apos;row507465&apos;, ENDKEY =&amp;gt; &apos;row508987&apos;, ENCODED =&amp;gt; 2d9fad2aee78103f928d8c7fe16ba6cd,} failed, marking as FAILED_OPEN in ZK

2013-09-23 18:46:12,160 DEBUG org.apache.hadoop.hbase.regionserver.HRegion: Instantiated t1,row507465,1379937224590.2d9fad2aee78103f928d8c7fe16ba6cd.
2013-09-23 18:46:12,160 ERROR org.apache.hadoop.hbase.regionserver.handler.OpenRegionHandler: Failed open of region=t1,row507465,1379937224590.2d9fad2aee78103f928d8c7fe16ba6cd., starting to roll back the global memstore size.

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;  </description>
                <environment>&lt;p&gt;SuSE11&lt;/p&gt;</environment>
        <key id="12670058">HBASE-9634</key>
            <summary>HBase Table few regions are not getting recovered from the &apos;Transition&apos;/&apos;OFFLINE state&apos; </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="shankarlingayya">shankarlingayya</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Sep 2013 13:38:56 +0000</created>
                <updated>Wed, 25 Sep 2013 07:29:52 +0000</updated>
                                            <version>0.94.11</version>
                                                    <component>master</component>
                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13774608" author="nkeywal" created="Mon, 23 Sep 2013 15:03:57 +0000"  >&lt;p&gt;A few questions:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;how many zookeeper instances to you have? Do you kill it/them?&lt;/li&gt;
	&lt;li&gt;what kill is it? unplug, kill 9, kill 15?&lt;/li&gt;
	&lt;li&gt;What&apos;s the replication factor, and do you kill the datanode(s)?&lt;/li&gt;
	&lt;li&gt;after step 5, do you flush the table?&lt;/li&gt;
	&lt;li&gt;what are the logs of the region server which it failing to open the region?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13774656" author="rajesh23" created="Mon, 23 Sep 2013 15:47:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nkeywal&quot; class=&quot;user-hover&quot; rel=&quot;nkeywal&quot;&gt;Nicolas Liochon&lt;/a&gt;&lt;br/&gt;
if region server goes down during split then some regions are in transition(OFFLINE), going through the logs and give the exact reason.&lt;/p&gt;</comment>
                            <comment id="13775963" author="shankarlingayya" created="Tue, 24 Sep 2013 03:38:28 +0000"  >&lt;p&gt;how many zookeeper instances to you have? Do you kill it/them?&lt;br/&gt;
===&amp;gt; 1 zookeeper instance, not killed at all, it is running normal&lt;/p&gt;

&lt;p&gt;what kill is it? unplug, kill 9, kill 15?&lt;br/&gt;
===&amp;gt; used the &apos;hbase-daemon.sh stop regionserver&apos;&lt;/p&gt;

&lt;p&gt;What&apos;s the replication factor, and do you kill the datanode(s)?&lt;br/&gt;
===&amp;gt; Replication factor is 3, no datanode is killed, it is running normally&lt;/p&gt;

&lt;p&gt;after step 5, do you flush the table?&lt;br/&gt;
===&amp;gt; No flush is done, data are added successfuly in the hbase&lt;/p&gt;

&lt;p&gt;what are the logs of the region server which it failing to open the region?&lt;br/&gt;
===&amp;gt; We added huge number of records, but only the below region is transition, but all the other regions are fine.&lt;/p&gt;

&lt;p&gt;2013-09-23 18:28:06,610 INFO org.apache.hadoop.hbase.regionserver.handler.OpenRegionHandler: Opening of region &lt;/p&gt;
{NAME =&amp;gt; &apos;t1,row507465,1379937224590.2d9fad2aee78103f928d8c7fe16ba6cd.&apos;, STARTKEY =&amp;gt; &apos;row507465&apos;, ENDKEY =&amp;gt; &apos;row508987&apos;, ENCODED =&amp;gt; 2d9fad2aee78103f928d8c7fe16ba6cd,}
&lt;p&gt; failed, marking as FAILED_OPEN in ZK&lt;/p&gt;

&lt;p&gt;2013-09-23 18:46:12,160 DEBUG org.apache.hadoop.hbase.regionserver.HRegion: Instantiated t1,row507465,1379937224590.2d9fad2aee78103f928d8c7fe16ba6cd.&lt;br/&gt;
2013-09-23 18:46:12,160 ERROR org.apache.hadoop.hbase.regionserver.handler.OpenRegionHandler: Failed open of region=t1,row507465,1379937224590.2d9fad2aee78103f928d8c7fe16ba6cd., starting to roll back the global memstore size.&lt;/p&gt;

</comment>
                            <comment id="13777225" author="apurtell" created="Wed, 25 Sep 2013 07:29:52 +0000"  >&lt;p&gt;You have a two node cluster but replication is set to 3? &lt;/p&gt;

&lt;p&gt;Seems like a degenerate configuration.&lt;/p&gt;

&lt;p&gt;Probably doesn&apos;t make sense to test with fewer than 3 slaves plus one master - you can&apos;t draw any conclusions on how HBase will work with a normal deploy. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 23 Sep 2013 15:03:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>349888</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 12 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1obw7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>350186</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>