<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:49:09 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-7799/HBASE-7799.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-7799] reassigning region stuck in open still may not work correctly due to leftover ZK node</title>
                <link>https://issues.apache.org/jira/browse/HBASE-7799</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;(logs grepped by region name, and abridged.&lt;/p&gt;

&lt;p&gt;META server was dead so OpenRegionHandler for the region took a while, and was interrupted:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2013-02-08 14:35:01,555 DEBUG [RS_OPEN_REGION-10.11.2.92,64485,1360362800564-2] handler.OpenRegionHandler(255): Interrupting thread &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[PostOpenDeployTasks:871d1c3bdf98a2c93b527cb6cc61327d,5,main]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then master tried to force region offline and reassign:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2013-02-08 14:35:06,500 INFO  [MASTER_SERVER_OPERATIONS-10.11.2.92,64483,1360362800340-1] master.RegionStates(347): Found opening region {IntegrationTestRebalanceAndKillServersTargeted,7333332c,1360362805563.871d1c3bdf98a2c93b527cb6cc61327d. state=OPENING, ts=1360362901596, server=10.11.2.92,64485,1360362800564} to be reassigned by SSH &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 10.11.2.92,64485,1360362800564
2013-02-08 14:35:06,500 INFO  [MASTER_SERVER_OPERATIONS-10.11.2.92,64483,1360362800340-1] master.RegionStates(242): Region {NAME =&amp;gt; &apos;IntegrationTestRebalanceAndKillServersTargeted,7333332c,1360362805563.871d1c3bdf98a2c93b527cb6cc61327d.&apos;, STARTKEY =&amp;gt; &apos;7333332c&apos;, ENDKEY =&amp;gt; &apos;7ffffff8&apos;, ENCODED =&amp;gt; 871d1c3bdf98a2c93b527cb6cc61327d,} transitioned from {IntegrationTestRebalanceAndKillServersTargeted,7333332c,1360362805563.871d1c3bdf98a2c93b527cb6cc61327d. state=OPENING, ts=1360362901596, server=10.11.2.92,64485,1360362800564} to {IntegrationTestRebalanceAndKillServersTargeted,7333332c,1360362805563.871d1c3bdf98a2c93b527cb6cc61327d. state=CLOSED, ts=1360362906500, server=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;}
2013-02-08 14:35:06,505 DEBUG [10.11.2.92,64483,1360362800340-GeneralBulkAssigner-1] master.AssignmentManager(1530): Forcing OFFLINE; was={IntegrationTestRebalanceAndKillServersTargeted,7333332c,1360362805563.871d1c3bdf98a2c93b527cb6cc61327d. state=CLOSED, ts=1360362906500, server=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;}
2013-02-08 14:35:06,506 DEBUG [10.11.2.92,64483,1360362800340-GeneralBulkAssigner-1] zookeeper.ZKAssign(176): master:64483-0x13cbbf1025d0000 Async create of unassigned node &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 871d1c3bdf98a2c93b527cb6cc61327d with OFFLINE state
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;But didn&apos;t delete the original ZK node?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2013-02-08 14:35:06,509 WARN  [main-EventThread] master.OfflineCallback(59): Node &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; /hbase/region-in-transition/871d1c3bdf98a2c93b527cb6cc61327d already exists
2013-02-08 14:35:06,509 DEBUG [main-EventThread] master.OfflineCallback(69): rs={IntegrationTestRebalanceAndKillServersTargeted,7333332c,1360362805563.871d1c3bdf98a2c93b527cb6cc61327d. state=OFFLINE, ts=1360362906506, server=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;}, server=10.11.2.92,64488,1360362800651
2013-02-08 14:35:06,512 DEBUG [main-EventThread] master.OfflineCallback$ExistCallback(106): rs={IntegrationTestRebalanceAndKillServersTargeted,7333332c,1360362805563.871d1c3bdf98a2c93b527cb6cc61327d. state=OFFLINE, ts=1360362906506, server=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;}, server=10.11.2.92,64488,1360362800651
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So it went into infinite cycle of failing to assign due to this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2013-02-08 14:35:06,517 INFO  [PRI IPC Server handler 7 on 64488] regionserver.HRegionServer(3435): Received request to open region: IntegrationTestRebalanceAndKillServersTargeted,7333332c,1360362805563.871d1c3bdf98a2c93b527cb6cc61327d. on 10.11.2.92,64488,1360362800651
2013-02-08 14:35:06,521 WARN  [RS_OPEN_REGION-10.11.2.92,64488,1360362800651-0] zookeeper.ZKAssign(762): regionserver:64488-0x13cbbf1025d0004 Attempt to transition the unassigned node &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 871d1c3bdf98a2c93b527cb6cc61327d from M_ZK_REGION_OFFLINE to RS_ZK_REGION_OPENING failed, the node existed but was in the state RS_ZK_REGION_OPENING set by the server [wrong server name redacted, see HBASE-7798]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Transitioning failed-to-open similarly fails.&lt;/p&gt;

&lt;p&gt;It seems like master needs to nuke ZK node unconditionally to offline?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12631550">HBASE-7799</key>
            <summary>reassigning region stuck in open still may not work correctly due to leftover ZK node</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jxiang">Jimmy Xiang</assignee>
                                    <reporter username="sershe">Sergey Shelukhin</reporter>
                        <labels>
                    </labels>
                <created>Sat, 9 Feb 2013 02:10:33 +0000</created>
                <updated>Mon, 23 Sep 2013 18:30:39 +0000</updated>
                            <resolved>Fri, 15 Feb 2013 21:39:23 +0000</resolved>
                                                    <fixVersion>0.95.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13575043" author="sershe" created="Sat, 9 Feb 2013 02:11:11 +0000"  >&lt;p&gt;I will look at this next week by default?&lt;/p&gt;</comment>
                            <comment id="13575140" author="ram_krish" created="Sat, 9 Feb 2013 11:07:47 +0000"  >&lt;p&gt;Forecful OFFLINE is to change it forcefully irrespective of the previou state right?&lt;br/&gt;
I may be wrong here.  &lt;/p&gt;</comment>
                            <comment id="13575921" author="sershe" created="Mon, 11 Feb 2013 17:32:39 +0000"  >&lt;p&gt;I&apos;d think so, but it looks like it didn&apos;t work, master says that node already exists and doesn&apos;t indicate that it&apos;s overwritten.&lt;/p&gt;</comment>
                            <comment id="13575925" author="ram_krish" created="Mon, 11 Feb 2013 17:35:25 +0000"  >&lt;p&gt;Okie.  If you can attach the logs it would be great.  I can take a more closer look at this if you don&apos;t mind.&lt;/p&gt;</comment>
                            <comment id="13575989" author="sershe" created="Mon, 11 Feb 2013 19:06:40 +0000"  >&lt;p&gt;Attaching log. Note that it has a buggy experimental feature which currently makes HCM retry longer, but this should have no bearing on the problem...&lt;/p&gt;</comment>
                            <comment id="13576835" author="ram_krish" created="Tue, 12 Feb 2013 18:06:51 +0000"  >&lt;p&gt;Found the problem.&lt;br/&gt;
Straight forward scenario.&lt;br/&gt;
A region is in transition and getting moved to RS1.  RS1 gets killed in between and the state in zk is RS_ZK_OPENING.&lt;br/&gt;
Now SSH kicks in.  Jimmy&apos;s HBAS-7701 intelligently picks this region so that SSH can start assigning it.&lt;/p&gt;

&lt;p&gt;The RIT state is forcefully made to CLOSE.  And then the GeneralBulkAssigner kicks in.&lt;br/&gt;
Now here try to create a znode with OFFLINE state. But if node exists we silently return.  &lt;br/&gt;
In AM.asyncSetOfflineInZooKeeper()&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      ZKAssign.asyncCreateNodeOffline(watcher, state.getRegion(),
        destination, cb, state);
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (KeeperException e) {
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (e &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; NodeExistsException) {
        LOG.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Node &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &quot;&lt;/span&gt; + state.getRegion() + &lt;span class=&quot;code-quote&quot;&gt;&quot; already exists&quot;&lt;/span&gt;);
      } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
        server.abort(&lt;span class=&quot;code-quote&quot;&gt;&quot;Unexpected ZK exception creating/setting node OFFLINE&quot;&lt;/span&gt;, e);
      }
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now when the new RS2 tries to transition the znode thinking it to be in M_ZK_OFFLINE state it does not happen. Thus leading to infinite loop.&lt;br/&gt;
Patch i will come up later as its late here.  &lt;br/&gt;
Pls correct me if am wrong here.&lt;/p&gt;</comment>
                            <comment id="13576837" author="ram_krish" created="Tue, 12 Feb 2013 18:08:07 +0000"  >&lt;p&gt;One interesting thing in AM is every time we get new type of issues &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;</comment>
                            <comment id="13576847" author="sershe" created="Tue, 12 Feb 2013 18:16:06 +0000"  >&lt;p&gt;Yeah, I was starting to come to a similar conclusion yesterday, although I didn&apos;t finish looking (that &quot;forcing offline&quot; is &quot;forcing&quot; only internal state, not ZK).&lt;br/&gt;
Wrt issues - there was &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5&quot; title=&quot;Components definition&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5&quot;&gt;&lt;del&gt;HBASE-5&lt;/del&gt;&lt;/a&gt;something-or-other JIRA about making assignment simpler by getting rid/replacing/etc. things &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13576851" author="ram_krish" created="Tue, 12 Feb 2013 18:18:30 +0000"  >&lt;p&gt;One correction here.  I think the code in AM.asyncSetOfflineInZooKeeper() is fine.  But the OfflineCallBack just does not throw NodeExistsException in processResult.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 @Override
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void processResult(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; rc, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; path, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; ctx, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name) {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (rc == KeeperException.Code.NODEEXISTS.intValue()) {
      LOG.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Node &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &quot;&lt;/span&gt; + path + &lt;span class=&quot;code-quote&quot;&gt;&quot; already exists&quot;&lt;/span&gt;);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I see the above log in the log file and not the &quot;LOG.warn(&quot;Node for &quot; + state.getRegion() + &quot; already exists&quot;);&quot; in AM.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
master.OfflineCallback(59): Node &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; /hbase/region-in-transition/871d1c3bdf98a2c93b527cb6cc61327d already exists
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So the OfflineCallBack is eating up the NodeExistsException.  I may be wrong here because i am new to this CallBack code introduced in trunk.&lt;/p&gt;</comment>
                            <comment id="13577739" author="ram_krish" created="Wed, 13 Feb 2013 17:14:41 +0000"  >&lt;p&gt;Debugging the code and reproduced the problem.&lt;br/&gt;
What i observed was &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      ZKAssign.asyncCreateNodeOffline(watcher, state.getRegion(),
        destination, cb, state);
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (KeeperException e) {
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (e &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; NodeExistsException) {
        LOG.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Node &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &quot;&lt;/span&gt; + state.getRegion() + &lt;span class=&quot;code-quote&quot;&gt;&quot; already exists&quot;&lt;/span&gt;);
      } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
        server.abort(&lt;span class=&quot;code-quote&quot;&gt;&quot;Unexpected ZK exception creating/setting node OFFLINE&quot;&lt;/span&gt;, e);
      }
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
    }
&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The asyncCreateNodeOffline just always returns true because it does not wait for the callback to take action.  Also the callback does not throw NodeExistsException.&lt;br/&gt;
In short the catch block is a dead code.  &lt;br/&gt;
So should we make this synchronous or wait till the callback processes the current zk event?  The same thing exists in 0.94 also but bulk assign is not used in SSH except for Create table and enable table.&lt;/p&gt;</comment>
                            <comment id="13577792" author="jxiang" created="Wed, 13 Feb 2013 18:13:22 +0000"  >&lt;blockquote&gt;&lt;p&gt;So should we make this synchronous or wait till the callback processes the current zk event?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I think we still need to do async for performance reason.  This issue should be fixed somewhere else.  &lt;/p&gt;

&lt;p&gt;Good catch. @Ram, I think it is because I didn&apos;t delete the assign znode.  Can you try this patch?  Thanks.&lt;/p&gt;</comment>
                            <comment id="13578034" author="sershe" created="Wed, 13 Feb 2013 23:32:37 +0000"  >&lt;p&gt;On patch - is it final, or just preliminary?&lt;/p&gt;

&lt;p&gt;Should there be separate JIRA for fixing the issue that Ramkrishna indicates?&lt;/p&gt;</comment>
                            <comment id="13578160" author="ram_krish" created="Thu, 14 Feb 2013 05:05:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jxiang&quot; class=&quot;user-hover&quot; rel=&quot;jxiang&quot;&gt;Jimmy Xiang&lt;/a&gt;&lt;br/&gt;
The deletion is needed.  But what am thinking is i remember we made this change when Chunhui made SSH as bulk assignment rather than individual assignment.&lt;br/&gt;
May be we missed out that code while making the new changes.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Should there be separate JIRA for fixing the issue that Ramkrishna indicates?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;May be its needed for sure.&lt;/p&gt;

&lt;p&gt;@Sergey&lt;br/&gt;
Does your integration test suite run with this?  I will also try doing some manual test.&lt;/p&gt;</comment>
                            <comment id="13578163" author="ram_krish" created="Thu, 14 Feb 2013 05:12:52 +0000"  >&lt;p&gt;Anyway let me check more on this later today.  &lt;/p&gt;</comment>
                            <comment id="13578488" author="ram_krish" created="Thu, 14 Feb 2013 16:56:10 +0000"  >&lt;p&gt;This patch solves the problem.&lt;br/&gt;
Going thro that area of the code i see one more issue,&lt;br/&gt;
If suppose SSH is going on for an RS where one of the region is yet to open.  The META update has not happened.&lt;br/&gt;
The Am.procesServerShutdown() picks up this region as it is in RIT.&lt;br/&gt;
But the hris obtained by META scan does not have it in SSH.   So i dont find this region getting populated in toAssignRegions.&lt;br/&gt;
The same has been done in the recent checkin in 0.94 (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7521&quot; title=&quot;fix HBASE-6060 (regions stuck in opening state) in 0.94&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7521&quot;&gt;&lt;del&gt;HBASE-7521&lt;/del&gt;&lt;/a&gt;).&lt;br/&gt;
Correct me if am wrong?  We can raise another JIRA and solve it.  Also the callback issue that i mentioned can be solved in another JIRA.&lt;/p&gt;</comment>
                            <comment id="13578501" author="jxiang" created="Thu, 14 Feb 2013 17:10:04 +0000"  >&lt;p&gt;@Ram, thanks a lot for verifying the patch.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;But the hris obtained by META scan does not have it in SSH. So i dont find this region getting populated in toAssignRegions&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If Am.procesServerShutdown() picks it up, then if should be in toAssignRegions since we add them all even it is not in hris:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; SSH
      List&amp;lt;HRegionInfo&amp;gt; toAssignRegions = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;HRegionInfo&amp;gt;();
      toAssignRegions.addAll(regionsInTransition);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Am.processServerShutdown could skip a region if it is not pending open any more:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; AM
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (regionState == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
            || !regionState.isPendingOpenOrOpeningOnServer(sn)) {
          LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Skip region &quot;&lt;/span&gt; + hri
            + &lt;span class=&quot;code-quote&quot;&gt;&quot; since it is not opening on the dead server any more: &quot;&lt;/span&gt; + sn);
          it.remove();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Could you please check if the region is still pending open?&lt;/p&gt;

&lt;p&gt;As to the callback issue, yes, it can be solved in another jira.&lt;/p&gt;</comment>
                            <comment id="13579342" author="ram_krish" created="Fri, 15 Feb 2013 17:26:52 +0000"  >&lt;p&gt;Am sorry Jimmy.  Don know how i missed that line. I did some changes there for testing something so i deleted that line &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13579343" author="jxiang" created="Fri, 15 Feb 2013 17:28:15 +0000"  >&lt;p&gt;No problem. Should I commit this patch?&lt;/p&gt;</comment>
                            <comment id="13579349" author="ram_krish" created="Fri, 15 Feb 2013 17:36:11 +0000"  >&lt;p&gt;Ok..I am +1 on patch.  May be Sergey wants to take a look?&lt;/p&gt;</comment>
                            <comment id="13579354" author="jxiang" created="Fri, 15 Feb 2013 17:43:03 +0000"  >&lt;p&gt;Sure. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sershe&quot; class=&quot;user-hover&quot; rel=&quot;sershe&quot;&gt;Sergey Shelukhin&lt;/a&gt;, any comments?&lt;/p&gt;</comment>
                            <comment id="13579436" author="sershe" created="Fri, 15 Feb 2013 19:23:39 +0000"  >&lt;p&gt;looks good to me... I will file jira to fix the other part&lt;/p&gt;</comment>
                            <comment id="13579526" author="jxiang" created="Fri, 15 Feb 2013 21:39:23 +0000"  >&lt;p&gt;Integrated into trunk. Thanks Ram a lot for reviewing and verifying the patch.  Thanks Sergey a lot for reviewing the patch and reporting the issue.&lt;/p&gt;</comment>
                            <comment id="13579633" author="hudson" created="Sat, 16 Feb 2013 00:29:47 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3881 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3881/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3881/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7799&quot; title=&quot;reassigning region stuck in open still may not work correctly due to leftover ZK node&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7799&quot;&gt;&lt;del&gt;HBASE-7799&lt;/del&gt;&lt;/a&gt; reassigning region stuck in open still may not work correctly due to leftover ZK node (Revision 1446784)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
jxiang : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13579639" author="hudson" created="Sat, 16 Feb 2013 00:43:04 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #409 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/409/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/409/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7799&quot; title=&quot;reassigning region stuck in open still may not work correctly due to leftover ZK node&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7799&quot;&gt;&lt;del&gt;HBASE-7799&lt;/del&gt;&lt;/a&gt; reassigning region stuck in open still may not work correctly due to leftover ZK node (Revision 1446784)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
jxiang : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13775058" author="stack" created="Mon, 23 Sep 2013 18:30:39 +0000"  >&lt;p&gt;Marking closed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12632638">HBASE-7859</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12568864" name="org.apache.hadoop.hbase.IntegrationTestRebalanceAndKillServersTargeted-output.txt.gz" size="1602710" author="sershe" created="Mon, 11 Feb 2013 19:06:40 +0000"/>
                            <attachment id="12569239" name="trunk-7799.patch" size="976" author="jxiang" created="Wed, 13 Feb 2013 18:13:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 9 Feb 2013 11:07:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>312046</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1hun3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>312392</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>