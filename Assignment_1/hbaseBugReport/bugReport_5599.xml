<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:29:14 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5599/HBASE-5599.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5599] [hbck] handle NO_VERSION_FILE and SHOULD_NOT_BE_DEPLOYED inconsistencies</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5599</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The hbck tool can not fix the six scenarios.&lt;br/&gt;
1. Version file does not exist in root dir.&lt;br/&gt;
   Fix: I try to create a version file by &apos;FSUtils.setVersion&apos; method.&lt;/p&gt;

&lt;p&gt;2. &lt;span class=&quot;error&quot;&gt;&amp;#91;REGIONNAME&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;KEY&amp;#93;&lt;/span&gt; on HDFS, but not listed in META or deployed on any region server.&lt;br/&gt;
   Fix: I get region info form the hdfs file, this region info write to &apos;.META.&apos; table.&lt;/p&gt;

&lt;p&gt;3. &lt;span class=&quot;error&quot;&gt;&amp;#91;REGIONNAME&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;KEY&amp;#93;&lt;/span&gt; not in META, but deployed on &lt;span class=&quot;error&quot;&gt;&amp;#91;SERVERNAME&amp;#93;&lt;/span&gt;&lt;br/&gt;
   Fix: I get region info form the hdfs file, this region info write to &apos;.META.&apos; table.&lt;/p&gt;

&lt;p&gt;4. &lt;span class=&quot;error&quot;&gt;&amp;#91;REGIONNAME&amp;#93;&lt;/span&gt; should not be deployed according to META, but is deployed on &lt;span class=&quot;error&quot;&gt;&amp;#91;SERVERNAME&amp;#93;&lt;/span&gt;&lt;br/&gt;
   Fix: Close this region.&lt;/p&gt;

&lt;p&gt;5. First region should start with an empty key.  You need to  create a new region and regioninfo in HDFS to plug the hole.&lt;br/&gt;
   Fix: The region info is not in hdfs and .META., so it create a empty region for this error.&lt;/p&gt;

&lt;p&gt;6. There is a hole in the region chain between &lt;span class=&quot;error&quot;&gt;&amp;#91;KEY&amp;#93;&lt;/span&gt; and &lt;span class=&quot;error&quot;&gt;&amp;#91;KEY&amp;#93;&lt;/span&gt;. You need to create a new regioninfo and region dir in hdfs to plug the hole.&lt;br/&gt;
  Fix: The region info is not in hdfs and .META., so it create a empty region for this hole.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12546976">HBASE-5599</key>
            <summary>[hbck] handle NO_VERSION_FILE and SHOULD_NOT_BE_DEPLOYED inconsistencies</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fulin">fulin wang</assignee>
                                    <reporter username="fulin">fulin wang</reporter>
                        <labels>
                    </labels>
                <created>Mon, 19 Mar 2012 02:58:32 +0000</created>
                <updated>Tue, 26 Feb 2013 08:12:58 +0000</updated>
                            <resolved>Wed, 11 Apr 2012 17:21:31 +0000</resolved>
                                    <version>0.90.6</version>
                                    <fixVersion>0.94.0</fixVersion>
                    <fixVersion>0.95.0</fixVersion>
                                    <component>hbck</component>
                        <due>Mon, 19 Mar 2012 00:00:00 +0000</due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13232436" author="ram_krish" created="Mon, 19 Mar 2012 04:43:42 +0000"  >&lt;p&gt;Is uber-hbck doing this?&lt;/p&gt;</comment>
                            <comment id="13232451" author="zhihyu@ebaysf.com" created="Mon, 19 Mar 2012 05:12:04 +0000"  >&lt;p&gt;@Fulin:&lt;br/&gt;
Ramkrishna was referring to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5128&quot; title=&quot;[uber hbck] Online automated repair of table integrity and region consistency problems&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5128&quot;&gt;&lt;del&gt;HBASE-5128&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
Jonathan H would prepare a port of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5128&quot; title=&quot;[uber hbck] Online automated repair of table integrity and region consistency problems&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5128&quot;&gt;&lt;del&gt;HBASE-5128&lt;/del&gt;&lt;/a&gt; to 0.90&lt;/p&gt;

&lt;p&gt;Please participate in the review of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5128&quot; title=&quot;[uber hbck] Online automated repair of table integrity and region consistency problems&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5128&quot;&gt;&lt;del&gt;HBASE-5128&lt;/del&gt;&lt;/a&gt; so that your fix becomes part of it.&lt;/p&gt;</comment>
                            <comment id="13232457" author="ram_krish" created="Mon, 19 Mar 2012 05:26:01 +0000"  >&lt;p&gt;@Fulin&lt;br/&gt;
Yes, pls follow as Ted suggested.&lt;/p&gt;</comment>
                            <comment id="13232475" author="fulin" created="Mon, 19 Mar 2012 06:12:29 +0000"  >&lt;p&gt;Yes, I referring to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5128&quot; title=&quot;[uber hbck] Online automated repair of table integrity and region consistency problems&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5128&quot;&gt;&lt;del&gt;HBASE-5128&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
I want to know when Jonathan H will check in 0.90?&lt;/p&gt;</comment>
                            <comment id="13232476" author="ram_krish" created="Mon, 19 Mar 2012 06:16:58 +0000"  >&lt;p&gt;@Fulin&lt;br/&gt;
If you feel it is not present in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5128&quot; title=&quot;[uber hbck] Online automated repair of table integrity and region consistency problems&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5128&quot;&gt;&lt;del&gt;HBASE-5128&lt;/del&gt;&lt;/a&gt; pls add a comment in that JIRA.&lt;br/&gt;
Jonathan can take a look at it and we can take your patch there and integrate it to 0.90?&lt;br/&gt;
Is that fine with you?&lt;/p&gt;</comment>
                            <comment id="13233220" author="jmhsieh" created="Tue, 20 Mar 2012 05:21:02 +0000"  >&lt;p&gt;@ram @fulin&lt;/p&gt;

&lt;p&gt;I&apos;m working on getting &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5128&quot; title=&quot;[uber hbck] Online automated repair of table integrity and region consistency problems&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5128&quot;&gt;&lt;del&gt;HBASE-5128&lt;/del&gt;&lt;/a&gt; into trunk/0.94/0.92/0.90.  I&apos;m focusing on trunk first (0.94/0.92 should fall out) and changes from the trunk versions (max merge and specific table safegurds) should make it into the 0.90 version.&lt;/p&gt;

&lt;p&gt;I believe NOT_IN_META_OR_DEPLOYED, NOT_IN_META, HOLE_IN_REGION_CHAIN are handled by the &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5128&quot; title=&quot;[uber hbck] Online automated repair of table integrity and region consistency problems&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5128&quot;&gt;&lt;del&gt;HBASE-5128&lt;/del&gt;&lt;/a&gt;. I believe the others are shortcomings.&lt;/p&gt;

&lt;p&gt;Fulin, give me a few days to get &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5128&quot; title=&quot;[uber hbck] Online automated repair of table integrity and region consistency problems&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5128&quot;&gt;&lt;del&gt;HBASE-5128&lt;/del&gt;&lt;/a&gt; in &amp;#8211; I&apos;m testing a prerequisite of it currently (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5589&quot; title=&quot;Add of the offline call to the Master Interface&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5589&quot;&gt;&lt;del&gt;HBASE-5589&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;
</comment>
                            <comment id="13233247" author="fulin" created="Tue, 20 Mar 2012 06:16:43 +0000"  >&lt;p&gt;today I will update the patch, I am testing;&lt;br/&gt;
please, it was referring to the patch, I think you should think about this scenarios in my patch.&lt;br/&gt;
I hope that the hbck tool will be strong, thanks.&lt;/p&gt;</comment>
                            <comment id="13234933" author="jmhsieh" created="Wed, 21 Mar 2012 19:39:30 +0000"  >&lt;p&gt;@fulin.  Zhihong&apos;s suggestion is to merge the changes you have into the updates in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5128&quot; title=&quot;[uber hbck] Online automated repair of table integrity and region consistency problems&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5128&quot;&gt;&lt;del&gt;HBASE-5128&lt;/del&gt;&lt;/a&gt;.  I&apos;ll be posting an updated copy of that for 0.92/0.94/trunk this evening and the 0.90 version will follow shortly after that.  &lt;/p&gt;</comment>
                            <comment id="13236304" author="fulin" created="Fri, 23 Mar 2012 03:28:05 +0000"  >&lt;p&gt;close region by HMaster.unassign method, It can clear record in HMaster and close region in regionserver.&lt;/p&gt;</comment>
                            <comment id="13237554" author="jmhsieh" created="Sat, 24 Mar 2012 15:00:01 +0000"  >&lt;p&gt;Hi Fulin,&lt;/p&gt;

&lt;p&gt;I&apos;ve committed &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5128&quot; title=&quot;[uber hbck] Online automated repair of table integrity and region consistency problems&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5128&quot;&gt;&lt;del&gt;HBASE-5128&lt;/del&gt;&lt;/a&gt; so let&apos;s work together to port the functionality you&apos;ve implemented into it as well. &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Some of the methods you&apos;ve added in HBaseFsckRepair are similar in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5128&quot; title=&quot;[uber hbck] Online automated repair of table integrity and region consistency problems&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5128&quot;&gt;&lt;del&gt;HBASE-5128&lt;/del&gt;&lt;/a&gt;.  Let&apos;s consolidate.&lt;/li&gt;
	&lt;li&gt;It seems that you are focused on the 0.90 versions &amp;#8211; it is important that whatever changes we make also make it into the newer 0.92/0.94/trunk versions.  I can definitely help out there.&lt;/li&gt;
	&lt;li&gt;It is important to add some testing for the new scenarios as well &amp;#8211; checkout TestHbckFsck for some example to emulate.  I&apos;ve basically started to have have one test for each error condition.&lt;/li&gt;
&lt;/ul&gt;


</comment>
                            <comment id="13238064" author="fulin" created="Mon, 26 Mar 2012 02:24:34 +0000"  >&lt;p&gt;Today I will make a patch base on 0.90 new codes.&lt;br/&gt;
If I change in 0.90 that it pass the review, this code will merge into 0.92/0.94/trunk versions.&lt;/p&gt;
</comment>
                            <comment id="13239307" author="fulin" created="Tue, 27 Mar 2012 08:23:47 +0000"  >&lt;p&gt;The NOT_IN_META_OR_DEPLOYED,NOT_IN_META,FIRST_REGION_STARTKEY_NOT_EMPTY, HOLE_IN_REGION_CHAIN fault scenarios, Jonathan Hsieh have fixed,&lt;br/&gt;
I have tested this scenarious, not found any issue. &lt;br/&gt;
This patch I will fix NO_VERSION_FILE, SHOULD_NOT_BE_DEPLOYED fault scenarios.&lt;/p&gt;</comment>
                            <comment id="13241452" author="jmhsieh" created="Thu, 29 Mar 2012 18:04:30 +0000"  >&lt;p&gt;Thanks for updating the patches.&lt;/p&gt;

&lt;p&gt;Instead of relying on shouldFixAssignments, could you add a new config flag for fixing the NO_VERSION_FILE? The fix isn&apos;t really a region assignment fix!  Maybe call it -fixVersionFile, and have it on with the combo &apos;-repair*&apos; options? &lt;/p&gt;

&lt;p&gt;Can you add a test case for SHOULD_NOT_BE_DEPLOYED?  You should be able to hack one of the test cases from TestHBaseFsck.  I&apos;ve had problems just using assign before so if tests come back failing, you may want to try HBaseFsckRepair.fixMultiAssignemnt or tryAssignemntRepair.&lt;/p&gt;

&lt;p&gt;The merge addition isn&apos;t really related &amp;#8211; was its inclusion intended?&lt;/p&gt;</comment>
                            <comment id="13242035" author="fulin" created="Fri, 30 Mar 2012 03:22:17 +0000"  >&lt;p&gt;Thanks Jonathan Hsieh for review.&lt;br/&gt;
1. the NO_VERSION_FILE, I will add &apos;-fixVersionFile&apos; to fix this error and test case.&lt;br/&gt;
2. the SHOULD_NOT_BE_DEPLOYED fault scensrios, I change disable code that it is not call bulkAssign method, so the region is deployed but the table is disable.I do not know how to write this test case.&lt;/p&gt;</comment>
                            <comment id="13242113" author="fulin" created="Fri, 30 Mar 2012 06:58:04 +0000"  >&lt;p&gt;I make a hbase-5599-0.90_v6.patch, please review.&lt;br/&gt;
This is test result:&lt;br/&gt;
Tests Errors  Failures Skipped Success Rate Time &lt;br/&gt;
14 0 0 0 100% 181.667 &lt;/p&gt;

&lt;p&gt;TestHBaseFsck testHBaseFsckClean 4.843 &lt;br/&gt;
 testDupeStartKey 10.086 &lt;br/&gt;
 testDupeRegion 10.382 &lt;br/&gt;
 testDegenerateRegions 10.098 &lt;br/&gt;
 testContainedRegionOverlap 9.598 &lt;br/&gt;
 testOverlapAndOrphan 12.687 &lt;br/&gt;
 testCoveredStartKey 10.836 &lt;br/&gt;
 testRegionHole 8.652 &lt;br/&gt;
 testHDFSRegioninfoMissing 11.895 &lt;br/&gt;
 testNotInMetaOrDeployedHole 8.262 &lt;br/&gt;
 testNotInMetaHole 8.387 &lt;br/&gt;
 testNotInHdfs 8.345 &lt;br/&gt;
 testNoHdfsTable 46.275&lt;/p&gt;</comment>
                            <comment id="13245688" author="jmhsieh" created="Tue, 3 Apr 2012 20:20:56 +0000"  >&lt;p&gt;Thanks for the updates, the new patch looks pretty good.  A few things to follow up on before commit:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;If adding a test case is hard, let&apos;s file new issue to &quot;add HBCK test case for SHOULD_NOT_BE_DEPLOYED case&quot;.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Change the text here to be &quot;Try to fix missing hbase.version file in hdfs.&quot;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.err.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;   -fixVersionFile   Try to fix the hbase.version missing.&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; &lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I noticed the Merge.java changes are still present in the newer patch &amp;#8211; is that intended? It don&apos;t seem necessary or related to this issue.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This should be good to commit for 0.90, if you address these issues.  &lt;/p&gt;

&lt;p&gt;Could you provide an updated version for trunk? &lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="13245725" author="hadoopqa" created="Tue, 3 Apr 2012 20:55:03 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12520573/hbase-5599-0.90_v6.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12520573/hbase-5599-0.90_v6.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1378//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1378//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13247197" author="fulin" created="Thu, 5 Apr 2012 12:52:32 +0000"  >&lt;p&gt;The SHOULD_NOT_BE_DEPLOYED fault scenario, I am thinking about how to write this test case.&lt;br/&gt;
Because the fault scenario appear when the table is disabled, but the region of this table is not closed.&lt;/p&gt;</comment>
                            <comment id="13247911" author="jmhsieh" created="Fri, 6 Apr 2012 00:44:31 +0000"  >&lt;p&gt;Have you encountered this in your cluster before?  (I actually have not)&lt;/p&gt;

&lt;p&gt;To test it properly, you would probably disable a table and then do some funny direct calls to a region server to set up a the funky internal state.  I actually spent a lot of time getting tests working for hbck but it definitely  caught some important cornercases.&lt;/p&gt;

&lt;p&gt;I&apos;ve suggested this before, but I&apos;d be happy to commit the versionFile part and push off this SHOULD_NOT_BE_DEPLOYED case to another issue. (Also, still waiting for an answer about the Merge.java edits).&lt;/p&gt;</comment>
                            <comment id="13248337" author="fulin" created="Fri, 6 Apr 2012 13:25:46 +0000"  >&lt;p&gt;I have writed the test case. I am running all the test case,&lt;br/&gt;
But the test case testShouldCheckMasterFailOverWhenMETAIsInOpenedState always failed.&lt;/p&gt;</comment>
                            <comment id="13248485" author="jmhsieh" created="Fri, 6 Apr 2012 16:46:36 +0000"  >&lt;p&gt;Can you share the test code?  Extra sets of eyes might help find the problem!&lt;/p&gt;</comment>
                            <comment id="13249748" author="fulin" created="Mon, 9 Apr 2012 09:08:29 +0000"  >&lt;p&gt;1. I modify the hbck code before the six error and nine skippe,&lt;br/&gt;
the 0.90-surefire-report-hbck.html file is my test result for my changed.&lt;/p&gt;

&lt;p&gt;2. This is a trunk version test result.&lt;br/&gt;
-------------------------------------------------------------------------------&lt;br/&gt;
Test set: org.apache.hadoop.hbase.util.TestHBaseFsck&lt;br/&gt;
-------------------------------------------------------------------------------&lt;br/&gt;
Tests run: 16, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 197.475 sec&lt;/p&gt;</comment>
                            <comment id="13249767" author="hadoopqa" created="Mon, 9 Apr 2012 09:58:23 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12521930/hbase-5599-trunk_v7.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12521930/hbase-5599-trunk_v7.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.regionserver.wal.TestLogRolling&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1453//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1453//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1453//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1453//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1453//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1453//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13250608" author="jmhsieh" created="Tue, 10 Apr 2012 12:47:55 +0000"  >&lt;p&gt;Renaming due to new scope of patch.&lt;/p&gt;</comment>
                            <comment id="13250632" author="jmhsieh" created="Tue, 10 Apr 2012 13:13:38 +0000"  >&lt;p&gt;Fulin.  Great test, and nice patch.  On trunk, the failed test passes for me locally.  On 0.90, failed tests pass for me locally.&lt;/p&gt;

&lt;p&gt;I plan on committing to 0.90, 0.92, 0.94, trunk.&lt;/p&gt;

&lt;p&gt;Fixed a few spacing and a spelling nit (&quot;falut&quot; -&amp;gt; &quot;fault&quot;) that I&apos;ll fix before commit.&lt;/p&gt;

&lt;p&gt;Remaining issues: &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Could you re-upload the same v7 patches but give ASF permission to include?&lt;/li&gt;
	&lt;li&gt;Trunk version of patch applies to 0.94, needs a minor tweak for 0.92.  Mind doing this?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13251243" author="fulin" created="Wed, 11 Apr 2012 01:55:56 +0000"  >&lt;p&gt;Thank Jonathan Hsieh for your comment.&lt;br/&gt;
I do not know what the word &quot;Could you re-upload the same v7 patches but give ASF permission to include&quot; mean?&lt;br/&gt;
you can modify the patch for 0.92 branch and other branch.&lt;/p&gt;</comment>
                            <comment id="13251316" author="jmhsieh" created="Wed, 11 Apr 2012 04:50:58 +0000"  >&lt;p&gt;I can take care of the tweak for 0.92.&lt;/p&gt;

&lt;p&gt;For me to commit the patches you&apos;ve submitted, you need to &quot;Grant license to ASF for inclusion in ASF works (as per the Apache License &#167;5)&quot;.  When you attach files, there is a selector box at the bottom, and you need to select that.&lt;/p&gt;</comment>
                            <comment id="13251317" author="jmhsieh" created="Wed, 11 Apr 2012 04:51:38 +0000"  >&lt;p&gt;Attached a screen shot that shows ASF grant being selected.&lt;/p&gt;</comment>
                            <comment id="13251373" author="fulin" created="Wed, 11 Apr 2012 06:37:47 +0000"  >&lt;p&gt;Thanks for carefully review.&lt;br/&gt;
I have modified the &apos;falut&apos;.&lt;br/&gt;
The patch re-upload and select ASF item.&lt;/p&gt;</comment>
                            <comment id="13251392" author="hadoopqa" created="Wed, 11 Apr 2012 07:26:39 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12522215/hbase-5599-trunk_v8.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12522215/hbase-5599-trunk_v8.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 1 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.master.TestSplitLogManager&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1476//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1476//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1476//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1476//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1476//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1476//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13251762" author="jmhsieh" created="Wed, 11 Apr 2012 17:21:31 +0000"  >&lt;p&gt;Fulin, thanks for the patch!&lt;/p&gt;

&lt;p&gt;Committed to 0.90/0.92/0.94/0.96-trunk&lt;/p&gt;</comment>
                            <comment id="13251763" author="jmhsieh" created="Wed, 11 Apr 2012 17:22:26 +0000"  >&lt;p&gt;Attached tweaked patch applied to 0.92 &lt;/p&gt;</comment>
                            <comment id="13251859" author="hudson" created="Wed, 11 Apr 2012 19:25:13 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2743 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2743/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2743/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5599&quot; title=&quot;[hbck] handle NO_VERSION_FILE and SHOULD_NOT_BE_DEPLOYED inconsistencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5599&quot;&gt;&lt;del&gt;HBASE-5599&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;hbck&amp;#93;&lt;/span&gt; handle NO_VERSION_FILE and SHOULD_NOT_BE_DEPLOYED inconsistencies (fulin wang) (Revision 1324881)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
jmhsieh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/RetriesExhaustedWithDetailsException.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/HBaseFsck.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/TestHBaseFsck.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/hbck/HbckTestingUtil.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13251874" author="hudson" created="Wed, 11 Apr 2012 19:57:24 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #102 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/102/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/102/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5599&quot; title=&quot;[hbck] handle NO_VERSION_FILE and SHOULD_NOT_BE_DEPLOYED inconsistencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5599&quot;&gt;&lt;del&gt;HBASE-5599&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;hbck&amp;#93;&lt;/span&gt; handle NO_VERSION_FILE and SHOULD_NOT_BE_DEPLOYED inconsistencies (fulin wang) (Revision 1324880)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
jmhsieh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/util/HBaseFsck.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/util/TestHBaseFsck.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/util/hbck/HbckTestingUtil.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13251956" author="hudson" created="Wed, 11 Apr 2012 21:48:07 +0000"  >&lt;p&gt;Integrated in HBase-0.92 #367 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92/367/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92/367/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5599&quot; title=&quot;[hbck] handle NO_VERSION_FILE and SHOULD_NOT_BE_DEPLOYED inconsistencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5599&quot;&gt;&lt;del&gt;HBASE-5599&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;hbck&amp;#93;&lt;/span&gt; handle NO_VERSION_FILE and SHOULD_NOT_BE_DEPLOYED inconsistencies (fulin wang) (Revision 1324879)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
jmhsieh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/util/HBaseFsck.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/util/TestHBaseFsck.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/util/hbck/HbckTestingUtil.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13252226" author="hudson" created="Thu, 12 Apr 2012 05:54:06 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-security #168 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-security/168/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-security/168/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5599&quot; title=&quot;[hbck] handle NO_VERSION_FILE and SHOULD_NOT_BE_DEPLOYED inconsistencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5599&quot;&gt;&lt;del&gt;HBASE-5599&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;hbck&amp;#93;&lt;/span&gt; handle NO_VERSION_FILE and SHOULD_NOT_BE_DEPLOYED inconsistencies (fulin wang) (Revision 1324881)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
jmhsieh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/RetriesExhaustedWithDetailsException.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/HBaseFsck.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/TestHBaseFsck.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/hbck/HbckTestingUtil.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13253634" author="hudson" created="Fri, 13 Apr 2012 18:32:54 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #9 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/9/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/9/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5599&quot; title=&quot;[hbck] handle NO_VERSION_FILE and SHOULD_NOT_BE_DEPLOYED inconsistencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5599&quot;&gt;&lt;del&gt;HBASE-5599&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;hbck&amp;#93;&lt;/span&gt; handle NO_VERSION_FILE and SHOULD_NOT_BE_DEPLOYED inconsistencies (fulin wang) (Revision 1324880)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
jmhsieh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/util/HBaseFsck.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/util/TestHBaseFsck.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/util/hbck/HbckTestingUtil.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13259524" author="hudson" created="Mon, 23 Apr 2012 11:00:52 +0000"  >&lt;p&gt;Integrated in HBase-0.92-security #105 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92-security/105/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92-security/105/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5599&quot; title=&quot;[hbck] handle NO_VERSION_FILE and SHOULD_NOT_BE_DEPLOYED inconsistencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5599&quot;&gt;&lt;del&gt;HBASE-5599&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;hbck&amp;#93;&lt;/span&gt; handle NO_VERSION_FILE and SHOULD_NOT_BE_DEPLOYED inconsistencies (fulin wang) (Revision 1324879)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
jmhsieh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/util/HBaseFsck.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/util/TestHBaseFsck.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/util/hbck/HbckTestingUtil.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12537273">HBASE-5128</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12521931" name="0.90-surefire-report-hbck.html" size="208449" author="fulin" created="Mon, 9 Apr 2012 09:08:29 +0000"/>
                            <attachment id="12518865" name="hbase-5599-0.90.patch" size="11279" author="fulin" created="Mon, 19 Mar 2012 03:55:22 +0000"/>
                            <attachment id="12519067" name="hbase-5599-0.90_v2.patch" size="16271" author="fulin" created="Tue, 20 Mar 2012 12:12:43 +0000"/>
                            <attachment id="12519580" name="hbase-5599-0.90_v3.patch" size="15505" author="fulin" created="Fri, 23 Mar 2012 03:28:03 +0000"/>
                            <attachment id="12520078" name="hbase-5599-0.90_v5.patch" size="2449" author="fulin" created="Tue, 27 Mar 2012 08:23:46 +0000"/>
                            <attachment id="12520573" name="hbase-5599-0.90_v6.patch" size="7867" author="fulin" created="Fri, 30 Mar 2012 06:58:03 +0000"/>
                            <attachment id="12521929" name="hbase-5599-0.90_v7.patch" size="11778" author="fulin" created="Mon, 9 Apr 2012 09:08:29 +0000"/>
                            <attachment id="12522214" name="hbase-5599-0.90_v8" size="11778" author="fulin" created="Wed, 11 Apr 2012 06:37:45 +0000"/>
                            <attachment id="12520098" name="hbase-5599-0.92_v5.patch" size="2580" author="fulin" created="Tue, 27 Mar 2012 11:04:45 +0000"/>
                            <attachment id="12520099" name="hbase-5599-0.94_v5.patch" size="2580" author="fulin" created="Tue, 27 Mar 2012 11:04:45 +0000"/>
                            <attachment id="12522278" name="hbase-5599-92-v8.patch" size="11822" author="jmhsieh" created="Wed, 11 Apr 2012 17:22:26 +0000"/>
                            <attachment id="12520100" name="hbase-5599-trunk_v5.patch" size="2580" author="fulin" created="Tue, 27 Mar 2012 11:04:45 +0000"/>
                            <attachment id="12521930" name="hbase-5599-trunk_v7.patch" size="11984" author="fulin" created="Mon, 9 Apr 2012 09:08:29 +0000"/>
                            <attachment id="12522215" name="hbase-5599-trunk_v8.patch" size="11984" author="fulin" created="Wed, 11 Apr 2012 06:37:45 +0000"/>
                            <attachment id="12522208" name="license.png" size="239538" author="jmhsieh" created="Wed, 11 Apr 2012 04:51:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>15.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 19 Mar 2012 04:43:42 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>232134</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 34 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02hdz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12418</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>