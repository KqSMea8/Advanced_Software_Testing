<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:36:27 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-12785/HBASE-12785.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-12785] Use FutureTask to timeout the attempt to get the lock for hbck</title>
                <link>https://issues.apache.org/jira/browse/HBASE-12785</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;In reviewing &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12607&quot; title=&quot;TestHBaseFsck#testParallelHbck fails running against hadoop 2.6.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12607&quot;&gt;&lt;del&gt;HBASE-12607&lt;/del&gt;&lt;/a&gt;, Sean pointed out:&lt;/p&gt;

&lt;p&gt;It would be nice if we used a &lt;a href=&quot;http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/FutureTask.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;FutureTask&lt;/a&gt; to timeout the attempt to get the lock rather than wait the whole period and then fail.&lt;/p&gt;

&lt;p&gt;This issue is to address Sean&apos;s review comment.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12764228">HBASE-12785</key>
            <summary>Use FutureTask to timeout the attempt to get the lock for hbck</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yuzhihong@gmail.com">Ted Yu</assignee>
                                    <reporter username="yuzhihong@gmail.com">Ted Yu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Dec 2014 17:46:53 +0000</created>
                <updated>Wed, 3 Jun 2015 15:29:05 +0000</updated>
                            <resolved>Mon, 5 Jan 2015 22:11:34 +0000</resolved>
                                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>1.1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="14261351" author="stack" created="Tue, 30 Dec 2014 18:49:52 +0000"  >&lt;p&gt;Why not address Sean&apos;s comment in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12607&quot; title=&quot;TestHBaseFsck#testParallelHbck fails running against hadoop 2.6.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12607&quot;&gt;&lt;del&gt;HBASE-12607&lt;/del&gt;&lt;/a&gt; rather than open a new issue? Are you going to work on this &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu&quot; class=&quot;user-hover&quot; rel=&quot;tedyu&quot;&gt;Ted Yu&lt;/a&gt;?  This is a &quot;It would be nice...&quot; in how a test works.  Seems very low priority and unless you are going to work on it now, just close (See @apurtell suggestion we do issue cleanup).&lt;/p&gt;</comment>
                            <comment id="14261357" author="yuzhihong@gmail.com" created="Tue, 30 Dec 2014 18:57:28 +0000"  >&lt;p&gt;I am working on a patch.&lt;/p&gt;

&lt;p&gt;The fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12607&quot; title=&quot;TestHBaseFsck#testParallelHbck fails running against hadoop 2.6.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12607&quot;&gt;&lt;del&gt;HBASE-12607&lt;/del&gt;&lt;/a&gt; was not test fix - previous code depended on a bug which has been fixed in hadoop.&lt;br/&gt;
Meaning, parallel execution of hbck against hadoop 2.6.0+ would not work as expected.&lt;/p&gt;</comment>
                            <comment id="14261364" author="stack" created="Tue, 30 Dec 2014 19:05:12 +0000"  >&lt;blockquote&gt;&lt;p&gt;I am working on a patch.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Good. I won&apos;t close this as friviolous just yet (What I don&apos;t get is that if you are working on it &apos;now&apos;, why did &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12607&quot; title=&quot;TestHBaseFsck#testParallelHbck fails running against hadoop 2.6.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12607&quot;&gt;&lt;del&gt;HBASE-12607&lt;/del&gt;&lt;/a&gt; have to get committed before addressing Seans&apos; comment rather than wait?  Why create a JIRA just to address his comment?)&lt;/p&gt;
</comment>
                            <comment id="14261456" author="yuzhihong@gmail.com" created="Tue, 30 Dec 2014 20:21:22 +0000"  >&lt;p&gt;With this patch, testParallelHbck runs 20 seconds shorter against hadoop 2.6.0 compared with current code.&lt;/p&gt;</comment>
                            <comment id="14261466" author="yuzhihong@gmail.com" created="Tue, 30 Dec 2014 20:35:12 +0000"  >&lt;p&gt;Patch adjusted to current trunk.&lt;/p&gt;</comment>
                            <comment id="14261571" author="hadoopqa" created="Tue, 30 Dec 2014 22:30:40 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12689561/12785-001.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12689561/12785-001.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 734324e80f44be4d40b1ee4612a838b581d504b2.&lt;br/&gt;
  ATTACHMENT ID: 12689561&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12268//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12268//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12268//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12268//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12268//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12268//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12268//artifact/patchprocess/newPatchFindbugsWarningshbase-annotations.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12268//artifact/patchprocess/newPatchFindbugsWarningshbase-annotations.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12268//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12268//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12268//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12268//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12268//artifact/patchprocess/newPatchFindbugsWarningshbase-rest.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12268//artifact/patchprocess/newPatchFindbugsWarningshbase-rest.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12268//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12268//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12268//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12268//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12268//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12268//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12268//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12268//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12268//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12268//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12268//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12268//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12268//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12268//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14262470" author="busbey" created="Wed, 31 Dec 2014 22:37:55 +0000"  >&lt;p&gt;Good start!&lt;/p&gt;

&lt;hr /&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    executor.execute(futureTask);
+    &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; duration = 0;
+    &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (!futureTask.isDone() &amp;amp;&amp;amp; duration &amp;lt;= 30000) {
+      Threads.sleep(10);
+      duration = EnvironmentEdgeManager.currentTime() - start;
+    }
+    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!futureTask.isDone()) {
+      &lt;span class=&quot;code-comment&quot;&gt;// took too &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; to obtain lock
&lt;/span&gt;+      LOG.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Took &quot;&lt;/span&gt; + duration + &lt;span class=&quot;code-quote&quot;&gt;&quot; milliseconds to obtain lock&quot;&lt;/span&gt;);
+      futureTask.cancel(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
+      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
+    }
+    executor.shutdownNow();
+    FSDataOutputStream stream = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
     &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
&amp;lt;snip&amp;gt;
+      stream = futureTask.get();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The above can be simplified to using &lt;a href=&quot;http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/FutureTask.html#get(long, java.util.concurrent.TimeUnit)&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;FutureTask.get with timeout&lt;/a&gt;. It would basically look like&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    executor.execute(futureTask);
+    FSDataOutputStream stream = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
     &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
&amp;lt;snip&amp;gt;
+      stream = futureTask.get(30, TimeUnit.SECONDS);
+    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (TimeoutException exception) {
+      executor.shutdownNow();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (ExecutionException ee) {
+      LOG.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Encountered exception when opening lock file&quot;&lt;/span&gt;, ee);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is a change in behavior, so I want to make sure it&apos;s intentional. Previously, if there was a remote exception (that wasn&apos;t about the file already being created) or a RTE, we&apos;d throw that out of this method instead of returning a lock failure. With this change either of those failure types happening in the Callable will result in us logging and returning a lock failure.&lt;/p&gt;

&lt;p&gt;Since we exit upon lock failure, I think this is all fine?&lt;/p&gt;

&lt;hr /&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (InterruptedException ie) {
+      LOG.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Encountered exception when opening lock file&quot;&lt;/span&gt;, ie);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The message here should specify that we got interrupted. Also since we aren&apos;t re-throwing, we should set the thread&apos;s interrupted status. Something like:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (InterruptedException ie) {
+      LOG.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Interrupted &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; opening lock file&quot;&lt;/span&gt;, ie);
+      &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.currentThread().interrupt();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14262471" author="busbey" created="Wed, 31 Dec 2014 22:40:05 +0000"  >&lt;p&gt;hurm. meant for the timeout bit ot have a log message. :/&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    executor.execute(futureTask);
+    FSDataOutputStream stream = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
     &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
&amp;lt;snip&amp;gt;
+      stream = futureTask.get(30, TimeUnit.SECONDS);
+    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (TimeoutException exception) {
+      LOG.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Timed out &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; attempting to open lock file.&quot;&lt;/span&gt;);
+      executor.shutdownNow();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14262486" author="yuzhihong@gmail.com" created="Wed, 31 Dec 2014 23:16:27 +0000"  >&lt;p&gt;Thanks for the detailed comments, Sean.&lt;/p&gt;

&lt;p&gt;See if patch v2 addresses your comments.&lt;/p&gt;

&lt;p&gt;Ran TestHBaseFsck#testParallelHbck against hadoop 2.6.0 and it passed.&lt;/p&gt;</comment>
                            <comment id="14262515" author="hadoopqa" created="Thu, 1 Jan 2015 01:13:19 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12689732/12785-002.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12689732/12785-002.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit a90e64c6373437e109e6d84adbf11ea8bf296e53.&lt;br/&gt;
  ATTACHMENT ID: 12689732&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12278//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12278//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12278//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12278//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12278//artifact/patchprocess/newPatchFindbugsWarningshbase-annotations.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12278//artifact/patchprocess/newPatchFindbugsWarningshbase-annotations.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12278//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12278//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12278//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12278//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12278//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12278//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12278//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12278//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12278//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12278//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12278//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12278//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12278//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12278//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12278//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12278//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12278//artifact/patchprocess/newPatchFindbugsWarningshbase-rest.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12278//artifact/patchprocess/newPatchFindbugsWarningshbase-rest.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12278//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12278//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12278//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12278//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14265183" author="busbey" created="Mon, 5 Jan 2015 22:02:06 +0000"  >&lt;p&gt;+1, minor issue:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; timeoutInSeconds = 30;
+      stream = futureTask.get(30, TimeUnit.SECONDS);
+    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (ExecutionException ee) {
+      LOG.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Encountered exception when opening lock file&quot;&lt;/span&gt;, ee);
+    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (InterruptedException ie) {
+      LOG.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Interrupted when opening lock file&quot;&lt;/span&gt;, ie);
+      &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.currentThread().interrupt();
+    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (TimeoutException exception) {
+      &lt;span class=&quot;code-comment&quot;&gt;// took too &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; to obtain lock
&lt;/span&gt;+      LOG.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Took more than &quot;&lt;/span&gt; + timeoutInSeconds + &lt;span class=&quot;code-quote&quot;&gt;&quot; seconds in obtaining lock&quot;&lt;/span&gt;);
+      futureTask.cancel(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Either make futureTask.get use the timeoutInSeconds variable or skip it entirely and hard-code &quot;30&quot; in the error message.&lt;/p&gt;</comment>
                            <comment id="14265204" author="yuzhihong@gmail.com" created="Mon, 5 Jan 2015 22:11:34 +0000"  >&lt;p&gt;Addressed above comment on commit.&lt;/p&gt;

&lt;p&gt;Thanks for the review, Sean.&lt;/p&gt;</comment>
                            <comment id="14265356" author="hudson" created="Mon, 5 Jan 2015 23:44:38 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.1 #55 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.1/55/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.1/55/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12785&quot; title=&quot;Use FutureTask to timeout the attempt to get the lock for hbck&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12785&quot;&gt;&lt;del&gt;HBASE-12785&lt;/del&gt;&lt;/a&gt; Use FutureTask to timeout the attempt to get the lock for hbck (tedyu: rev f9873622b86e7d8a912dfa15065e9bf96e10bacf)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/util/HBaseFsck.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14265391" author="hudson" created="Tue, 6 Jan 2015 00:12:51 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #5994 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/5994/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/5994/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12785&quot; title=&quot;Use FutureTask to timeout the attempt to get the lock for hbck&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12785&quot;&gt;&lt;del&gt;HBASE-12785&lt;/del&gt;&lt;/a&gt; Use FutureTask to timeout the attempt to get the lock for hbck (tedyu: rev 37e1bb61f473ecc05af8fb1c547ec566acf7c6fb)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/util/HBaseFsck.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14571117" author="ndimiduk" created="Wed, 3 Jun 2015 15:29:05 +0000"  >&lt;p&gt;Closing issues released in 1.1.0.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12758778">HBASE-12607</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12689561" name="12785-001.patch" size="4218" author="yuzhihong@gmail.com" created="Tue, 30 Dec 2014 20:35:12 +0000"/>
                            <attachment id="12689732" name="12785-002.patch" size="4288" author="yuzhihong@gmail.com" created="Wed, 31 Dec 2014 23:16:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 30 Dec 2014 18:49:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 28 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i23uqv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>