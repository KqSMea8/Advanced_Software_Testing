<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:41:30 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6969/HBASE-6969.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6969] Allow for injecting MiniZookeeperCluster instance</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6969</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;While not an official part of the HBase API, it&apos;d be nice if HBaseTestingUtility allowed for consumer to inject their own instance of the MiniZookeeperCluster when executing tests.&lt;/p&gt;

&lt;p&gt;Currently there is no way to control how the ZK instance is started which we&apos;ve had to hack around when there were ZK version conflicts (3.3 vs 3.4).  Or if you want to control which specific port it starts on vs random.&lt;/p&gt;

&lt;p&gt;Allowing consumers to inject an instance (unstarted) gives them the freedom to implement their own without having to fork the entire HBaseTestingUtility class  &lt;/p&gt;</description>
                <environment></environment>
        <key id="12611107">HBASE-6969</key>
            <summary>Allow for injecting MiniZookeeperCluster instance</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mkwhitacre">Micah Whitacre</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Oct 2012 02:34:56 +0000</created>
                <updated>Sat, 11 Apr 2015 00:23:59 +0000</updated>
                            <resolved>Sat, 11 Apr 2015 00:23:59 +0000</resolved>
                                    <version>0.92.1</version>
                                                    <component>test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13472940" author="mkwhitacre" created="Wed, 10 Oct 2012 02:36:17 +0000"  >&lt;p&gt;Simple patch file that just allows the HBaseTestingUtility to access a base MiniZKCluster instance.&lt;/p&gt;</comment>
                            <comment id="13472946" author="mkwhitacre" created="Wed, 10 Oct 2012 02:38:30 +0000"  >&lt;p&gt;It should be noted I made the patch based off of trunk but I would like it patched back to 0.92.1 (the version I&apos;m currently on).  Trunk has a number of improvements (e.g configuration for the port) but I&apos;m on CDH4.1 which is 0.92.1.&lt;/p&gt;</comment>
                            <comment id="13472973" author="stack" created="Wed, 10 Oct 2012 03:49:05 +0000"  >&lt;p&gt;As written, at end of tests, won&apos;t your passed in zkcluster be shutdown?  That is probably not what you want?  Should there be a getMiniZookeeperCluster to answer your added setMiniZookeeperCluster?  Is baseZKCluster necessary?  Why not just an internal flag which has whether or not HBaseTestingUtility started the zk cluster?  If we didn&apos;t start it, we shouldn&apos;t stop it on the way out?  Otherwise, looks like useful functionality to add.  Thanks Micah.&lt;/p&gt;
</comment>
                            <comment id="13473181" author="mkwhitacre" created="Wed, 10 Oct 2012 12:38:17 +0000"  >&lt;p&gt;I documented it on the method but the assumption was that the injected zkCluster is not started.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;As written, at end of tests, won&apos;t your passed in zkcluster be shutdown? That is probably not what you want? Should there be a getMiniZookeeperCluster to answer your added setMiniZookeeperCluster? Is baseZKCluster necessary?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Since the patch truthfully just swaps out the call to &quot;new MiniZookeeperCluster(...)&quot;, the code which currently manages the startup and shutdown should manage the injected value.  Also when startup is called, the member variable &quot;zkCluster&quot; is initialized to the baseZKCluster and the existing calls to getZKCluster() should return it without needing a new &quot;get&quot;.&lt;/p&gt;

&lt;p&gt;The &quot;don&apos;t start&quot; flag idea could work.  The assumption in that case would be the ZK Quorum would have to be started and relevant configuration set in the injected Configuration object I assume?&lt;/p&gt;</comment>
                            <comment id="13473868" author="stack" created="Thu, 11 Oct 2012 06:05:09 +0000"  >&lt;blockquote&gt;&lt;p&gt;I documented it on the method but the assumption was that the injected zkCluster is not started.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Pardon me.  I missed this.&lt;/p&gt;

&lt;p&gt;I looked at adding an override of startMiniZKCluster that took a MiniZookeeperCluster.  Would the attached patch work for you?&lt;/p&gt;</comment>
                            <comment id="13473869" author="stack" created="Thu, 11 Oct 2012 06:06:21 +0000"  >&lt;p&gt;Adds startMiniZKCluster override that takes a MiniZookeeperCluster.&lt;/p&gt;

&lt;p&gt;Patch is a little bigger than it should be since it removes private methods no longer used.&lt;/p&gt;</comment>
                            <comment id="13474109" author="mkwhitacre" created="Thu, 11 Oct 2012 12:58:26 +0000"  >&lt;p&gt;That should work.  If I can extend HBaseTestingUtility and control how ZK is started it will make my life easier.&lt;/p&gt;</comment>
                            <comment id="13474355" author="stack" created="Thu, 11 Oct 2012 17:35:59 +0000"  >&lt;p&gt;You don&apos;t need to extend it, right?  The patch gives you a version of what your patch did only w/o the special data member and the extra setter?  Thanks Micah.&lt;/p&gt;</comment>
                            <comment id="13474414" author="hadoopqa" created="Thu, 11 Oct 2012 18:33:56 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12548702/6969v2.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12548702/6969v2.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 81 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 5 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.master.TestSplitLogManager&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3033//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3033//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3033//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3033//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3033//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3033//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3033//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3033//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3033//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3033//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3033//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3033//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3033//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3033//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13492744" author="hudson" created="Wed, 7 Nov 2012 22:00:54 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3519 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3519/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3519/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6969&quot; title=&quot;Allow for injecting MiniZookeeperCluster instance&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6969&quot;&gt;&lt;del&gt;HBASE-6969&lt;/del&gt;&lt;/a&gt; Avoid unneceseary regular expression matching in ruby code for &quot;list&quot; command (Revision 1406805)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/ruby/hbase/admin.rb&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/ruby/shell/commands/list.rb&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13492846" author="hudson" created="Thu, 8 Nov 2012 00:22:47 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #252 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/252/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/252/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6969&quot; title=&quot;Allow for injecting MiniZookeeperCluster instance&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6969&quot;&gt;&lt;del&gt;HBASE-6969&lt;/del&gt;&lt;/a&gt; Avoid unneceseary regular expression matching in ruby code for &quot;list&quot; command (Revision 1406805)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/ruby/hbase/admin.rb&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/ruby/shell/commands/list.rb&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14490599" author="apurtell" created="Sat, 11 Apr 2015 00:23:59 +0000"  >&lt;p&gt;Committed ages ago&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12548702" name="6969v2.txt" size="3497" author="stack" created="Thu, 11 Oct 2012 06:06:21 +0000"/>
                            <attachment id="12548511" name="hbase-6969.patch" size="1754" author="mkwhitacre" created="Wed, 10 Oct 2012 02:36:17 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 10 Oct 2012 03:49:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>246577</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 35 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i07rsn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>43269</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>