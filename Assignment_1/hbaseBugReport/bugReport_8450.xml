<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:55:22 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-8450/HBASE-8450.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-8450] Update hbase-default.xml and general recommendations to better suit current hw, h2, experience, etc.</title>
                <link>https://issues.apache.org/jira/browse/HBASE-8450</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;This is a critical task we need to do before we release; review our defaults.&lt;/p&gt;

&lt;p&gt;On cursory review, there are configs in hbase-default.xml that no longer have matching code; there are some that should be changed because we know better now and others that should be amended because hardware and deploys are bigger than they used to be.&lt;/p&gt;

&lt;p&gt;We could also move stuff around so that the must-edit stuff is near the top (zk quorum config. is mid-way down the page) and beef up the descriptions &amp;#8211; especially since these descriptions shine through in the refguide.&lt;/p&gt;

&lt;p&gt;Lastly, I notice that our tgz does not &quot;include&quot; an hbase-default.xml other than the one bundled up in the jar.  Maybe we should make it more accessible.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12644955">HBASE-8450</key>
            <summary>Update hbase-default.xml and general recommendations to better suit current hw, h2, experience, etc.</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stack">stack</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 Apr 2013 22:33:51 +0000</created>
                <updated>Tue, 16 Dec 2014 21:11:52 +0000</updated>
                            <resolved>Thu, 23 May 2013 04:12:23 +0000</resolved>
                                                    <fixVersion>0.95.1</fixVersion>
                                    <component>Usability</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>18</watches>
                                                                <comments>
                            <comment id="13643332" author="stack" created="Fri, 26 Apr 2013 22:39:30 +0000"  >&lt;p&gt;Here is a start:&lt;/p&gt;

&lt;p&gt;Ups handlers to 100 from 10.&lt;/p&gt;

&lt;p&gt;Removes the no longer referenced:&lt;/p&gt;

&lt;p&gt;hbase.regionserver.nbreservationblocks&lt;br/&gt;
hbase.hash.type&lt;/p&gt;

&lt;p&gt;Upps memstore.lowerlimit so it is close to higher limit making it 0.38 instead of 0.35 (high limit is 0.40).&lt;/p&gt;

&lt;p&gt;Make major compactions run once a week instead of every day.&lt;/p&gt;

&lt;p&gt;Remove dfs.support.append &amp;#8211; it only brings on a complaint if present (there is a UI component that also needs updating if this goes away).&lt;/p&gt;

&lt;p&gt;What else can we do to improve basic defaults?&lt;/p&gt;</comment>
                            <comment id="13643493" author="lhofhansl" created="Sat, 27 Apr 2013 03:04:30 +0000"  >&lt;p&gt;Some of this would be good for 0.94 as well.&lt;/p&gt;</comment>
                            <comment id="13643577" author="anoop.hbase" created="Sat, 27 Apr 2013 07:21:04 +0000"  >&lt;blockquote&gt;&lt;p&gt;Lastly, I notice that our tgz does not &quot;include&quot; an hbase-default.xml other than the one bundled up in the jar. Maybe we should make it more accessible.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;+1. &lt;/p&gt;

&lt;p&gt;Also are we adding all the configs to xml when it is getting added to code? I doubt this.. I have checked with 94 code base some time back and I was able to find some of the configs only referred in code but not in hbase-default.xml&lt;/p&gt;</comment>
                            <comment id="13643814" author="stack" created="Sat, 27 Apr 2013 22:16:13 +0000"  >&lt;blockquote&gt;&lt;p&gt;Also are we adding all the configs to xml when it is getting added to code? I doubt this.. I have checked with 94 code base some time back and I was able to find some of the configs only referred in code but not in hbase-default.xml&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;My thought was that we didn&apos;t have to do this; that we only had to add ones we thought folks might want to change.  I know that there others who think otherwise, that hbase-default.xml should be a conprehensive list of all you could possibly change.  My worry is that doing the latter would overwhelm and hide configurations folks might want to actually tweek.&lt;/p&gt;</comment>
                            <comment id="13644248" author="anoop.hbase" created="Mon, 29 Apr 2013 04:02:52 +0000"  >&lt;blockquote&gt;&lt;p&gt;My worry is that doing the latter would overwhelm and hide configurations folks might want to actually tweek.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes Stack. I agree to your concern. I too have that.. We should add configs to some place which is accessible to the users.(May be not in hbase-default.xml) Now to know a config exists the only way is to go through the code which might be difficult for all the users. I have seen in Hive they have a hive-default.xml.template file or so in which all new configs are added. We can go in some way in which all configs are documented. Else we dev team itself wont be knowing all the config items or forgetting certain items. &lt;/p&gt;</comment>
                            <comment id="13650278" author="jdcryans" created="Tue, 7 May 2013 00:20:58 +0000"  >&lt;p&gt;hbase-default.xml:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;hfile.block.cache.size=0.4: Since we let users dedicate up to 80% of the heap for the block cache and Memstores, we should fully use that space by default. I&apos;ve stopped counting the numbers I&apos;ve told people that they had all this memory that&apos;s not being used because they were keeping the configs default... Right now we&apos;re at 25/40 so I&apos;d just bump up the block cache to 40. Even better would be doing &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5349&quot; title=&quot;Automagically tweak global memstore and block cache sizes based on workload&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5349&quot;&gt;&lt;del&gt;HBASE-5349&lt;/del&gt;&lt;/a&gt;...&lt;/li&gt;
	&lt;li&gt;hbase.hregion.majorcompaction=0: disable major compactions, I can&apos;t remember the last time I told someone to run them more often, but just last week I told someone to either disable them or have them running weekly.&lt;/li&gt;
	&lt;li&gt;hbase.regionserver.nbreservationblocks=0: do we even want this now that we kill on OOME?&lt;/li&gt;
	&lt;li&gt;hbase.regionserver.handler.count=50: or it could be 100, I don&apos;t really have data on this.&lt;/li&gt;
	&lt;li&gt;hbase.client.pause=100: make everything snappier? might want to bump up the number of retries. I don&apos;t have data on this.&lt;/li&gt;
	&lt;li&gt;hbase.rpc.timeout=10000: snappier I said!&lt;/li&gt;
	&lt;li&gt;hbase.hstore.compactionThreshold=5: we now have a better compaction algorithm, maybe it&apos;s worth keeping more files around and be more efficient about the whole process?&lt;/li&gt;
	&lt;li&gt;hbase.hstore.blockingStoreFiles=10: I&apos;d give some room to the algo to make good choices so bumping that up too.&lt;/li&gt;
	&lt;li&gt;zookeeper.session.timeout=90000: is 3 minutes still a good default? Now that we have MSLAB it&apos;s rare that I see legit GC issues.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Other:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Enable bloom filters by default, will also help offsetting the higher number of files.&lt;/li&gt;
	&lt;li&gt;Set the default heap higher? 2GB?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13653106" author="ndimiduk" created="Thu, 9 May 2013 19:51:11 +0000"  >&lt;blockquote&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;hfile.block.cache.size=0.4: Since we let users dedicate up to 80% of the heap for the block cache and Memstores, we should fully use that space by default. I&apos;ve stopped counting the numbers I&apos;ve told people that they had all this memory that&apos;s not being used because they were keeping the configs default... Right now we&apos;re at 25/40 so I&apos;d just bump up the block cache to 40. Even better would be doing &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5349&quot; title=&quot;Automagically tweak global memstore and block cache sizes based on workload&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5349&quot;&gt;&lt;del&gt;HBASE-5349&lt;/del&gt;&lt;/a&gt;...&lt;/li&gt;
	&lt;li&gt;hbase.regionserver.handler.count=50: or it could be 100, I don&apos;t really have data on this.&lt;/li&gt;
	&lt;li&gt;hbase.client.pause=100: make everything snappier? might want to bump up the number of retries. I don&apos;t have data on this.&lt;br/&gt;
hbase.rpc.timeout=10000: snappier I said!&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;+1 for the above.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;hbase.client.write.buffer at 2M plus hbase.regionserver.handler.count at 10 sounds conservative to me, even considering JD&apos;s block cache size tweak.&lt;/li&gt;
	&lt;li&gt;hbase.bulkload.retries.number I recall seeing a ticket where the unlimited retries was causing havoc, but I cannot find it this morning.&lt;/li&gt;
	&lt;li&gt;hbase.client.scanner.caching this number is entirely arbitrary, given variance in data shape. Do we still like 100?&lt;/li&gt;
	&lt;li&gt;hbase.hregion.memstore.flush.size is the same value as default hdfs block size. dumb question: should this be slightly less than the hdfs block size in order to accommodate headers and trailers?&lt;/li&gt;
	&lt;li&gt;hbase.config.read.zookeeper.config can this configuration point be removed entirely? Is there ever a reason to read zoo.cfg?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Cleaning up the file with spell-check and sort by property name would be nice too &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13653130" author="eclark" created="Thu, 9 May 2013 20:17:06 +0000"  >&lt;blockquote&gt;&lt;p&gt;hbase.hstore.compactionThreshold=5: we now have a better compaction algorithm, maybe it&apos;s worth keeping more files around and be more efficient about the whole process?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I would disagree here.  Better to choose fewer files and be less spiky on io and latency.  Though upping the number of blocking files seems ok.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Lower the number of versions on a table by default.  Most new users don&apos;t really need three.  I think putting it at 2 by default helps users know the feature is there without wasting space.&lt;/li&gt;
	&lt;li&gt;Turn on bloom filters. (ROW)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13655109" author="enis" created="Sat, 11 May 2013 02:06:38 +0000"  >&lt;blockquote&gt;&lt;p&gt;Also are we adding all the configs to xml when it is getting added to code? I doubt this.. I have checked with 94 code base some time back and I was able to find some of the configs only referred in code but not in hbase-default.xml&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I agree to the concern. I always saw this as a three tiered approach. (1)There are configs which are changed in every hbase-site. (2) There are some configs that you may or may not want to changed. (3) And there are configs that only if you know the code, and something crazy happens, you want to change it. &lt;br/&gt;
For 1, and 2, they should live in hbase-default. for 3, I agree with Stack, that we should not pollute hbase-default too much. However, I have seen some (2) cases but the config was not in hbase-default. I think we should just fix those cases. &lt;/p&gt;</comment>
                            <comment id="13655148" author="aoxiang" created="Sat, 11 May 2013 04:36:20 +0000"  >&lt;p&gt;HLog&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;hbase.regionserver.hlog.blocksize and dfs.block.size = 128M or 256M&lt;/li&gt;
	&lt;li&gt;io.bytes.per.checksum = 4096&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13655324" author="stack" created="Sat, 11 May 2013 17:36:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aoxiang&quot; class=&quot;user-hover&quot; rel=&quot;aoxiang&quot;&gt;binlijin&lt;/a&gt; Why you think we need bigger block size?  Changing it will ripple through out (larger WALs, etc.).  I am not averse, just would like a reason.  Thakns.&lt;/p&gt;</comment>
                            <comment id="13655341" author="jdcryans" created="Sat, 11 May 2013 19:20:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aoxiang&quot; class=&quot;user-hover&quot; rel=&quot;aoxiang&quot;&gt;binlijin&lt;/a&gt; if you change the block size but not the number of logs it means it will take longer to replay logs by default. Is this what you want? Maybe you do, but you don&apos;t explain why you want to change it.&lt;/p&gt;

&lt;p&gt;Also, when I tested bigger block sizes for the HLogs, I saw that it had detrimental effects in heavy writes situation because you spend more time writing to each log, meaning that if you have a slow pipeline it stays slow for a longer amount of time. The overall throughput is worse.&lt;/p&gt;</comment>
                            <comment id="13655417" author="aoxiang" created="Sun, 12 May 2013 01:06:28 +0000"  >&lt;p&gt;The bigger block size, the lesser namenode rpc call. &lt;br/&gt;
We have a cluster with hbase.regionserver.hlog.blocksize=128m and the write performance is improved a lot with hbase.regionserver.hlog.blocksize=64m, the cell is big and most is 15K+.&lt;/p&gt;</comment>
                            <comment id="13655418" author="aoxiang" created="Sun, 12 May 2013 01:09:10 +0000"  >&lt;p&gt;If we adjust hbase.regionserver.hlog.blocksize, the number of logs should be adjusted together.&lt;/p&gt;</comment>
                            <comment id="13655419" author="aoxiang" created="Sun, 12 May 2013 01:11:15 +0000"  >&lt;p&gt;We have a cluster with hbase.regionserver.hlog.blocksize=128m and the write performance is improved a lot compare with hbase.regionserver.hlog.blocksize=64m, the cell is big and most is 15K+.&lt;/p&gt;</comment>
                            <comment id="13656219" author="jdcryans" created="Mon, 13 May 2013 18:28:43 +0000"  >&lt;blockquote&gt;
&lt;p&gt;The bigger block size, the lesser namenode rpc call. &lt;br/&gt;
We have a cluster with hbase.regionserver.hlog.blocksize=128m and the write performance is improved a lot compare with hbase.regionserver.hlog.blocksize=64m, the cell is big and most is 15K+.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t think less RPCs to the NN really matters a lot here, other parts of HBase abuse the NN a lot more, but most likely your write performance improved because you are spending less time locking when rolling the logs. I pushed this to the extreme and tried 1GB and 2GB blocksizes and that&apos;s when I got the bad performance mostly.&lt;/p&gt;

&lt;p&gt;Now that I think about it more, it might make sense to keep bigger logs but keep the block size itself low. For example, have hbase.regionserver.hlog.blocksize=64MB but hbase.regionserver.logroll.multiplier=3.95 instead of 0.95. Is this something you have tried or considered &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aoxiang&quot; class=&quot;user-hover&quot; rel=&quot;aoxiang&quot;&gt;binlijin&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="13656628" author="aoxiang" created="Tue, 14 May 2013 01:48:26 +0000"  >&lt;p&gt;No, i do not consider this method, according to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1394&quot; title=&quot;Uploads sometimes fall to 0 requests/second (Binding up on HLog#append?)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1394&quot;&gt;&lt;del&gt;HBASE-1394&lt;/del&gt;&lt;/a&gt; we should have less block transition.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Also, when I tested bigger block sizes for the HLogs, I saw that it had detrimental effects in heavy writes situation because you spend more time writing to each log, meaning that if you have a slow pipeline it stays slow for a longer amount of time. The overall throughput is worse.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;So, we should have muti hlog, if one is slow, use the other one.&lt;/p&gt;</comment>
                            <comment id="13656679" author="jdcryans" created="Tue, 14 May 2013 03:28:45 +0000"  >&lt;blockquote&gt;&lt;p&gt;No, i do not consider this method, according to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1394&quot; title=&quot;Uploads sometimes fall to 0 requests/second (Binding up on HLog#append?)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1394&quot;&gt;&lt;del&gt;HBASE-1394&lt;/del&gt;&lt;/a&gt; we should have less block transition.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;1394 is old and unrelated, we did 1MB blocks because we didn&apos;t have durability.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;So, we should have muti hlog, if one is slow, use the other one.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I agree we should get &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5699&quot; title=&quot;Run with &amp;gt; 1 WAL in HRegionServer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5699&quot;&gt;&lt;del&gt;HBASE-5699&lt;/del&gt;&lt;/a&gt; but we don&apos;t have it at the moment so it won&apos;t help.&lt;/p&gt;</comment>
                            <comment id="13656721" author="aoxiang" created="Tue, 14 May 2013 04:41:18 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Now that I think about it more, it might make sense to keep bigger logs but keep the block size itself low. For example, have hbase.regionserver.hlog.blocksize=64MB but hbase.regionserver.logroll.multiplier=3.95 instead of 0.95. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;If this have a good performance, so may be this is a good choice right now.&lt;br/&gt;
Jean-Daniel Cryans &lt;/p&gt;</comment>
                            <comment id="13658829" author="dsw" created="Wed, 15 May 2013 21:12:56 +0000"  >&lt;p&gt;What&apos;s the plan to validate any changes that are made here?  e.g. throw code onto a cluster of size X with reasonably-modern specs, run YCSB workload &amp;lt;A,B,C etc.&amp;gt;, then change defaults, reboot entire cluster, and run same workloads?  That may cover some performance-related areas, but not sure what else to do to validate.&lt;/p&gt;</comment>
                            <comment id="13661693" author="stack" created="Sun, 19 May 2013 23:28:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsw&quot; class=&quot;user-hover&quot; rel=&quot;dsw&quot;&gt;David S. Wang&lt;/a&gt; Yeah, there are a class of changes that we need to experiment w/ under load; e.g. the WAL size.&lt;/p&gt;


&lt;p&gt;On the making it more lively, I&apos;ll make it 100ms rather 1000ms for pause but will up the retries to 20.  Because of our expotential backoff, we end up waiting about the same time.  Here is what happens currently:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
4 testTimeout(org.apache.hadoop.hbase.client.TestClientNoCluster)  Time elapsed: 40.055 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
  5 org.apache.hadoop.hbase.client.RetriesExhaustedException: Failed after attempts=10, exceptions:
  6 Sun May 19 16:01:29 PDT 2013, org.apache.hadoop.hbase.client.ScannerCallable@20d12eea, org.apache.hadoop.hbase.exceptions.RegionServerStoppedException: From Mockito
  7 Sun May 19 16:01:30 PDT 2013, org.apache.hadoop.hbase.client.ScannerCallable@20d12eea, org.apache.hadoop.hbase.exceptions.RegionServerStoppedException: From Mockito
  8 Sun May 19 16:01:31 PDT 2013, org.apache.hadoop.hbase.client.ScannerCallable@20d12eea, org.apache.hadoop.hbase.exceptions.RegionServerStoppedException: From Mockito
  9 Sun May 19 16:01:32 PDT 2013, org.apache.hadoop.hbase.client.ScannerCallable@20d12eea, org.apache.hadoop.hbase.exceptions.RegionServerStoppedException: From Mockito
 10 Sun May 19 16:01:34 PDT 2013, org.apache.hadoop.hbase.client.ScannerCallable@20d12eea, org.apache.hadoop.hbase.exceptions.RegionServerStoppedException: From Mockito
 11 Sun May 19 16:01:36 PDT 2013, org.apache.hadoop.hbase.client.ScannerCallable@20d12eea, org.apache.hadoop.hbase.exceptions.RegionServerStoppedException: From Mockito
 12 Sun May 19 16:01:40 PDT 2013, org.apache.hadoop.hbase.client.ScannerCallable@20d12eea, org.apache.hadoop.hbase.exceptions.RegionServerStoppedException: From Mockito
 13 Sun May 19 16:01:44 PDT 2013, org.apache.hadoop.hbase.client.ScannerCallable@20d12eea, org.apache.hadoop.hbase.exceptions.RegionServerStoppedException: From Mockito
 14 Sun May 19 16:01:52 PDT 2013, org.apache.hadoop.hbase.client.ScannerCallable@20d12eea, org.apache.hadoop.hbase.exceptions.RegionServerStoppedException: From Mockito
 15 Sun May 19 16:02:08 PDT 2013, org.apache.hadoop.hbase.client.ScannerCallable@20d12eea, org.apache.hadoop.hbase.exceptions.RegionServerStoppedException: From Mockito
 16
 17 ,...at org.apache.hadoop.hbase.client.ServerCallable.withRetries(ServerCallable.java:197)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here is w/ 100ms pause and 20 retries:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  2 Tests run: 4, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 37.124 sec &amp;lt;&amp;lt;&amp;lt; FAILURE!
  3 testTimeout(org.apache.hadoop.hbase.client.TestClientNoCluster)  Time elapsed: 36.884 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
  4 org.apache.hadoop.hbase.client.RetriesExhaustedException: Failed after attempts=20, exceptions:
  5 Sun May 19 16:25:02 PDT 2013, org.apache.hadoop.hbase.client.ScannerCallable@5edf2d38, org.apache.hadoop.hbase.exceptions.RegionServerStoppedException: From Mockito
  6 Sun May 19 16:25:03 PDT 2013, org.apache.hadoop.hbase.client.ScannerCallable@5edf2d38, org.apache.hadoop.hbase.exceptions.RegionServerStoppedException: From Mockito
  7 Sun May 19 16:25:03 PDT 2013, org.apache.hadoop.hbase.client.ScannerCallable@5edf2d38, org.apache.hadoop.hbase.exceptions.RegionServerStoppedException: From Mockito
  8 Sun May 19 16:25:03 PDT 2013, org.apache.hadoop.hbase.client.ScannerCallable@5edf2d38, org.apache.hadoop.hbase.exceptions.RegionServerStoppedException: From Mockito
  9 Sun May 19 16:25:03 PDT 2013, org.apache.hadoop.hbase.client.ScannerCallable@5edf2d38, org.apache.hadoop.hbase.exceptions.RegionServerStoppedException: From Mockito
 10 Sun May 19 16:25:03 PDT 2013, org.apache.hadoop.hbase.client.ScannerCallable@5edf2d38, org.apache.hadoop.hbase.exceptions.RegionServerStoppedException: From Mockito
 11 Sun May 19 16:25:04 PDT 2013, org.apache.hadoop.hbase.client.ScannerCallable@5edf2d38, org.apache.hadoop.hbase.exceptions.RegionServerStoppedException: From Mockito
 12 Sun May 19 16:25:04 PDT 2013, org.apache.hadoop.hbase.client.ScannerCallable@5edf2d38, org.apache.hadoop.hbase.exceptions.RegionServerStoppedException: From Mockito
 13 Sun May 19 16:25:05 PDT 2013, org.apache.hadoop.hbase.client.ScannerCallable@5edf2d38, org.apache.hadoop.hbase.exceptions.RegionServerStoppedException: From Mockito
 14 Sun May 19 16:25:06 PDT 2013, org.apache.hadoop.hbase.client.ScannerCallable@5edf2d38, org.apache.hadoop.hbase.exceptions.RegionServerStoppedException: From Mockito
 15 Sun May 19 16:25:10 PDT 2013, org.apache.hadoop.hbase.client.ScannerCallable@5edf2d38, org.apache.hadoop.hbase.exceptions.RegionServerStoppedException: From Mockito
 16 Sun May 19 16:25:13 PDT 2013, org.apache.hadoop.hbase.client.ScannerCallable@5edf2d38, org.apache.hadoop.hbase.exceptions.RegionServerStoppedException: From Mockito
 17 Sun May 19 16:25:16 PDT 2013, org.apache.hadoop.hbase.client.ScannerCallable@5edf2d38, org.apache.hadoop.hbase.exceptions.RegionServerStoppedException: From Mockito
 18 Sun May 19 16:25:19 PDT 2013, org.apache.hadoop.hbase.client.ScannerCallable@5edf2d38, org.apache.hadoop.hbase.exceptions.RegionServerStoppedException: From Mockito
 19 Sun May 19 16:25:22 PDT 2013, org.apache.hadoop.hbase.client.ScannerCallable@5edf2d38, org.apache.hadoop.hbase.exceptions.RegionServerStoppedException: From Mockito
 20 Sun May 19 16:25:26 PDT 2013, org.apache.hadoop.hbase.client.ScannerCallable@5edf2d38, org.apache.hadoop.hbase.exceptions.RegionServerStoppedException: From Mockito
 21 Sun May 19 16:25:29 PDT 2013, org.apache.hadoop.hbase.client.ScannerCallable@5edf2d38, org.apache.hadoop.hbase.exceptions.RegionServerStoppedException: From Mockito
 22 Sun May 19 16:25:32 PDT 2013, org.apache.hadoop.hbase.client.ScannerCallable@5edf2d38, org.apache.hadoop.hbase.exceptions.RegionServerStoppedException: From Mockito
 23 Sun May 19 16:25:35 PDT 2013, org.apache.hadoop.hbase.client.ScannerCallable@5edf2d38, org.apache.hadoop.hbase.exceptions.RegionServerStoppedException: From Mockito
 24 Sun May 19 16:25:39 PDT 2013, org.apache.hadoop.hbase.client.ScannerCallable@5edf2d38, org.apache.hadoop.hbase.exceptions.RegionServerStoppedException: From Mockito
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="13661772" author="stack" created="Mon, 20 May 2013 05:11:20 +0000"  >&lt;p&gt;I left default heap at 1G for now.&lt;/p&gt;

&lt;p&gt;Made default minimum versions 2 instead of 3.&lt;/p&gt;

&lt;p&gt;Enabled ROW blooms by default.&lt;/p&gt;

&lt;p&gt;Added disabled TestClientNoClient that is useful for looking at how timeouts and retries work.&lt;/p&gt;

&lt;p&gt;Added an overview section to hbase-default.xml that talks the &quot;important&quot; configs up top and that not ALL configs are mentioned in this file because we think they would overwhelm and that most won&apos;t care about the exotics.&lt;/p&gt;

&lt;p&gt;Grouped configs by &apos;important&apos;, master, regionserver, client, zookeeper and misc.&lt;/p&gt;

&lt;p&gt;Primary config is now hbase.tmp.dir.  Made hbase.rootdir be made of hbase.tmp.dir (previous it was hardcoded /tmp).&lt;/p&gt;

&lt;p&gt;Moved zk quorum up into &apos;important&apos;.&lt;/p&gt;

&lt;p&gt;Upped handlers to 30 from 10.&lt;/p&gt;

&lt;p&gt;Did the jd suggested up of blockcache limit from 0.25 to 0.4.&lt;/p&gt;

&lt;p&gt;Changed client pause from 1000 to 100 and upped retries from 10 to 20 so more responsive but we wait the same amount of time overall (we should probably down the overall time but need to do testing first... 20 is too much... should just adjust the expotential rate... will do in another issue).&lt;/p&gt;

&lt;p&gt;Turned off major compactions.&lt;/p&gt;

&lt;p&gt;Upped blockingStoreFiles to 10 from 7 (left the compaction trigger at 3 after Elliott comment)&lt;/p&gt;

&lt;p&gt;Downed the rpc timeout from 60 to 10 as per JD.&lt;/p&gt;

&lt;p&gt;Enabled FAST_DIFF prefix as default.&lt;/p&gt;

&lt;p&gt;TODO: having hbase-default.xml show up somewhere convenient in the tgz.&lt;/p&gt;</comment>
                            <comment id="13661779" author="lhofhansl" created="Mon, 20 May 2013 05:28:01 +0000"  >&lt;p&gt;Are these good defaults:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Turned off major compactions.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Enabled FAST_DIFF prefix as default.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The former will lead to delete marker to &lt;b&gt;never&lt;/b&gt; get deleted.&lt;br/&gt;
The latter will make scanning slower.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Made default minimum versions 2 instead of 3.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I assume you meant maximum versions? Why not just set it to 1 by default?&lt;/p&gt;</comment>
                            <comment id="13661791" author="hadoopqa" created="Mon, 20 May 2013 05:42:28 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12583791/8450v2.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12583791/8450v2.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.filter.TestDependentColumnFilter&lt;br/&gt;
                  org.apache.hadoop.hbase.filter.TestMultipleColumnPrefixFilter&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5745//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5745//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5745//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5745//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5745//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5745//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5745//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5745//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5745//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5745//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5745//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5745//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5745//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5745//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5745//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5745//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5745//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5745//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5745//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5745//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13662095" author="stack" created="Mon, 20 May 2013 15:54:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt; On delete marker never getting deleted, my thinking is that this would not be the end of the world and second, frequently compactions are promoted to major compaction because all files are selected so deletes would get purged (The general call is that disabling major compactions will be overall better than retention of deletes; do you disagree w/ this?).  On the suggestion that FAST_DIFF slows down scan, let me put up a new patch that does not enable it; your comment puts it into that bucket of configs that we should change only after we do some testing.&lt;/p&gt;

&lt;p&gt;Let me make a new patch.&lt;/p&gt;</comment>
                            <comment id="13662110" author="stack" created="Mon, 20 May 2013 16:27:45 +0000"  >&lt;p&gt;Undid our setting of FAST_DIFF and set max versions to 1 as default.&lt;/p&gt;

&lt;p&gt;Here is complete list:&lt;/p&gt;

&lt;p&gt;+ max versions now 1 instead of 3&lt;br/&gt;
+ row blooms on by default&lt;br/&gt;
+ handlers 30 instead of 10&lt;br/&gt;
+ upped memstore lower limit from .35 to .38&lt;br/&gt;
+ zookeeper timeout default is 90seconds instead of 180&lt;br/&gt;
+ client pause is 100ms instead of 1000ms&lt;br/&gt;
+ retries are now 20 instead of 10 (so overall we still wait same amount of time)&lt;br/&gt;
+ bulkload retries is 10 instead of infinite&lt;br/&gt;
+ major compactions are off&lt;br/&gt;
+ blockingstorefiles is 10 instead of 7&lt;br/&gt;
+ block cache is 0.4 instead of 0.25&lt;br/&gt;
+ rpc timeout is 10seconds instead of 60seconds&lt;/p&gt;</comment>
                            <comment id="13662134" author="nkeywal" created="Mon, 20 May 2013 16:45:06 +0000"  >&lt;p&gt;I would even increase the number of retries to 30.&lt;br/&gt;
+1 for zookeeper timeout.&lt;/p&gt;

&lt;p&gt;I don&apos;t understand this one:&lt;br/&gt;
 + rpc timeout is 10seconds instead of 60seconds&lt;/p&gt;

&lt;p&gt;From what I&apos;ve seen, it&apos;s not that uncommon to have something above 60s, and retrying just adds some workload on the server?&lt;/p&gt;</comment>
                            <comment id="13662142" author="hadoopqa" created="Mon, 20 May 2013 16:52:36 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12583846/8450v3.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12583846/8450v3.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.regionserver.TestColumnSeeking&lt;br/&gt;
                  org.apache.hadoop.hbase.filter.TestColumnPrefixFilter&lt;br/&gt;
                  org.apache.hadoop.hbase.filter.TestDependentColumnFilter&lt;br/&gt;
                  org.apache.hadoop.hbase.filter.TestMultipleColumnPrefixFilter&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5751//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5751//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5751//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5751//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5751//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5751//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5751//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5751//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5751//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5751//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5751//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5751//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5751//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5751//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5751//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5751//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5751//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5751//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5751//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5751//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13662162" author="stack" created="Mon, 20 May 2013 17:10:18 +0000"  >&lt;p&gt;I put the rpc timeout back to 60 at @nkeywal query&lt;/p&gt;

&lt;p&gt;Left retries at 20 for now.&lt;/p&gt;

&lt;p&gt;Fixed tests that depend on maxversions == 3&lt;/p&gt;</comment>
                            <comment id="13662170" author="lhofhansl" created="Mon, 20 May 2013 17:20:54 +0000"  >&lt;p&gt;I&apos;d still be concerned about disabling major compactions. If kvs are deleted the delete markers will hang around forever slowing down scans.&lt;/p&gt;</comment>
                            <comment id="13662205" author="stack" created="Mon, 20 May 2013 17:50:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt; Then what would you suggest for a major compaction interval?  If you think a week, then I&apos;d say might as well just turn it off.  If you say a day, i&apos;d suggest that is too frequent rewriting all of a deploys&apos; data.  I can add to the refguide a section on &quot;If your scans start to slow over time...&quot;  Would that help?&lt;/p&gt;

&lt;p&gt;Looks like there are more tests that expect max versions of 3 as default.  Fixing... new patch coming.&lt;/p&gt;</comment>
                            <comment id="13662234" author="hadoopqa" created="Mon, 20 May 2013 18:19:02 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12583855/8450v5.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12583855/8450v5.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 15 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.io.encoding.TestEncodedSeekers&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.TestHRegionBusyWait&lt;br/&gt;
                  org.apache.hadoop.hbase.security.access.TestAccessController&lt;br/&gt;
                  org.apache.hadoop.hbase.TestMultiVersions&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestFromClientSideWithCoprocessor&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.TestHRegion&lt;br/&gt;
                  org.apache.hadoop.hbase.replication.TestReplicationSmallTests&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestFromClientSide&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.TestGetClosestAtOrBefore&lt;br/&gt;
                  org.apache.hadoop.hbase.thrift2.TestThriftHBaseServiceHandler&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestImportExport&lt;br/&gt;
                  org.apache.hadoop.hbase.rest.client.TestRemoteTable&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.TestSeekOptimizations&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5752//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5752//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5752//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5752//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5752//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5752//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5752//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5752//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5752//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5752//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5752//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5752//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5752//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5752//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5752//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5752//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5752//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5752//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5752//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5752//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13662290" author="lhofhansl" created="Mon, 20 May 2013 19:09:46 +0000"  >&lt;p&gt;This is a bit of a fundamental flaw in HBase.&lt;/p&gt;

&lt;p&gt;True, if you never delete stuff, you don&apos;t need major compactions.&lt;br/&gt;
But if you do, especially when you place a lot of delete markers, you definitely want major compactions. Sergey&apos;s striped compaction will make this a moot point, but until then it seems that we need to be able to clean up.&lt;/p&gt;

&lt;p&gt;Major compactions also help to eventually regain data locality if regions were moved.&lt;/p&gt;

&lt;p&gt;Whether it&apos;s a day or a week almost does not matter. A week seems fine to me as default. Can always document to disable major compactions if you do not delete a lot.&lt;/p&gt;

&lt;p&gt;Otherwise we need to introduce a &quot;Routine Maintenance&quot; section to the book and instruct to run major compactions &quot;when it makes sense&quot; (they have no metric to go by really).&lt;/p&gt;

&lt;p&gt;Maybe a way to tackle this is to have &quot;remove delete marker&quot; compaction, which will still read all files but only rewrites HFile when a delete marker was found.&lt;/p&gt;</comment>
                            <comment id="13662295" author="lhofhansl" created="Mon, 20 May 2013 19:13:23 +0000"  >&lt;p&gt;Just saw this comment:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;second, frequently compactions are promoted to major compaction because all files are selected so deletes would get purged&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That is true too. How frequently does that happen?&lt;/p&gt;</comment>
                            <comment id="13662296" author="jdcryans" created="Mon, 20 May 2013 19:15:42 +0000"  >&lt;blockquote&gt;&lt;p&gt;That is true too. How frequently does that happen?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Unfortunately it really depends on how big the files are in the region such that it would decide to include all the files.&lt;/p&gt;</comment>
                            <comment id="13662369" author="jdcryans" created="Mon, 20 May 2013 21:22:55 +0000"  >&lt;blockquote&gt;&lt;p&gt;From what I&apos;ve seen, it&apos;s not that uncommon to have something above 60s, and retrying just adds some workload on the server?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;So originally I opened &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4462&quot; title=&quot;Properly treating SocketTimeoutException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4462&quot;&gt;&lt;del&gt;HBASE-4462&lt;/del&gt;&lt;/a&gt; so that we stop retrying those timeouts, but people agreed that &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2937&quot; title=&quot;Facilitate Timeouts In HBase Client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2937&quot;&gt;&lt;del&gt;HBASE-2937&lt;/del&gt;&lt;/a&gt; (the operation timeout included in 0.92.0) was covering that case. Passing an operation timeout actually changes the rpc timeout at the same time, and it does cancel the retries in ServerCallable (although in trunk I found out we don&apos;t change the rpc timeout, see &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8581&quot; title=&quot;rpc refactor dropped passing the operation timeout through to the rpcclient&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8581&quot;&gt;&lt;del&gt;HBASE-8581&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;I agree with you that setting that down to 10 would currently mean that we might retry timeouts on the region servers. What I&apos;m wondering now is how we can make this better. Should we also tweak the default operation timeout lower? Maybe it set it higher for MR jobs?&lt;/p&gt;</comment>
                            <comment id="13662599" author="enis" created="Tue, 21 May 2013 02:29:39 +0000"  >&lt;p&gt;I would also +1 for 1 week major compactions, rather than disabling that. &lt;br/&gt;
We should definitely do a release note on this for default max versions. &lt;/p&gt;</comment>
                            <comment id="13663737" author="stack" created="Wed, 22 May 2013 03:50:50 +0000"  >&lt;p&gt;Let me put back major compactions on a week period for now.  I added jitter of 0.5 so hopefully the major compactions are spread over the week rather than all happening together monday morning just as the load is coming on.&lt;/p&gt;

&lt;p&gt;Let me fix the tests broke by changed defaults and post another patch.&lt;/p&gt;</comment>
                            <comment id="13664467" author="stack" created="Wed, 22 May 2013 19:47:37 +0000"  >&lt;p&gt;Fix unit tests.  Turned off blooms on .META.; messes w/ getClosestOrBefore near flushes.  Did not dig in.&lt;/p&gt;</comment>
                            <comment id="13664473" author="stack" created="Wed, 22 May 2013 19:58:20 +0000"  >&lt;p&gt;Just to add that I had to fix a bunch of unit tests because they were expecting max values to be the default 3 and because a few tests were expecting one encoding type only in block cache (w/ blooms on, it has blocks in the cache w/ encoding NONE which was messing up some expectations)&lt;/p&gt;</comment>
                            <comment id="13664512" author="hadoopqa" created="Wed, 22 May 2013 20:55:48 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12584369/8450v5.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12584369/8450v5.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 45 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 site&lt;/font&gt;.  The patch appears to cause mvn site goal to fail.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5785//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5785//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5785//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5785//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5785//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5785//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5785//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5785//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5785//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5785//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5785//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5785//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5785//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5785//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5785//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5785//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5785//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5785//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5785//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5785//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13664538" author="eclark" created="Wed, 22 May 2013 21:12:56 +0000"  >&lt;p&gt;I&apos;m +1 assuming that the mvn site failure isn&apos;t related.&lt;/p&gt;</comment>
                            <comment id="13664542" author="stack" created="Wed, 22 May 2013 21:20:23 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt;.  I think I fixed the site prob. elsewhere (bad commit of a doc change).&lt;/p&gt;

&lt;p&gt;May I have another +1 since this fundamental.  Let me update the release notes because it might help understand the set of changes introduced here.&lt;/p&gt;</comment>
                            <comment id="13664545" author="stack" created="Wed, 22 May 2013 21:28:17 +0000"  >&lt;p&gt;Let me make sure that old tables post-migration do not all of a sudden start have max version of 1.&lt;/p&gt;</comment>
                            <comment id="13664570" author="stack" created="Wed, 22 May 2013 21:43:36 +0000"  >&lt;p&gt;I tested creating a table before this patch, viewing its versions, adding this patch, and then viewing versions and it looks like we do the right thing.  The .tableinfo that is persisted under the table dir has the value for VERSIONS that was in place at time of table creation so we should be good.&lt;/p&gt;</comment>
                            <comment id="13664726" author="jdcryans" created="Thu, 23 May 2013 00:17:47 +0000"  >&lt;p&gt;+1, will be good to put this in the hands of some devs with 0.95.1&lt;/p&gt;</comment>
                            <comment id="13664825" author="anoop.hbase" created="Thu, 23 May 2013 03:32:03 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13664837" author="stack" created="Thu, 23 May 2013 04:12:23 +0000"  >&lt;p&gt;Committed to trunk and 0.95.  Thanks for reviews and input.&lt;/p&gt;</comment>
                            <comment id="13664934" author="hudson" created="Thu, 23 May 2013 06:59:05 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #4138 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4138/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4138/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8450&quot; title=&quot;Update hbase-default.xml and general recommendations to better suit current hw, h2, experience, etc.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8450&quot;&gt;&lt;del&gt;HBASE-8450&lt;/del&gt;&lt;/a&gt; Update hbase-default.xml and general recommendations to better suit current hw, h2, experience, etc. (Revision 1485561)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-client/src/main/java/org/apache/hadoop/hbase/HColumnDescriptor.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-client/src/main/java/org/apache/hadoop/hbase/HTableDescriptor.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-common/src/main/resources/hbase-default.xml&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/compactions/CompactionConfiguration.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/TestMultiVersions.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestFromClientSide.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/filter/TestColumnPrefixFilter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/filter/TestDependentColumnFilter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/filter/TestMultipleColumnPrefixFilter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/io/encoding/TestEncodedSeekers.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/mapreduce/TestImportExport.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestColumnSeeking.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegionBusyWait.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestSeekOptimizations.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationBase.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/rest/client/TestRemoteTable.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/thrift2/TestThriftHBaseServiceHandler.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13664967" author="hudson" created="Thu, 23 May 2013 08:03:07 +0000"  >&lt;p&gt;Integrated in hbase-0.95 #210 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95/210/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95/210/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8450&quot; title=&quot;Update hbase-default.xml and general recommendations to better suit current hw, h2, experience, etc.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8450&quot;&gt;&lt;del&gt;HBASE-8450&lt;/del&gt;&lt;/a&gt; Update hbase-default.xml and general recommendations to better suit current hw, h2, experience, etc. (Revision 1485562)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-client/src/main/java/org/apache/hadoop/hbase/HColumnDescriptor.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-client/src/main/java/org/apache/hadoop/hbase/HTableDescriptor.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-common/src/main/resources/hbase-default.xml&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/compactions/CompactionConfiguration.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/TestMultiVersions.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestFromClientSide.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/filter/TestColumnPrefixFilter.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/filter/TestDependentColumnFilter.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/filter/TestMultipleColumnPrefixFilter.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/io/encoding/TestEncodedSeekers.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/mapreduce/TestImportExport.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestColumnSeeking.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegionBusyWait.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestSeekOptimizations.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationBase.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/rest/client/TestRemoteTable.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/thrift2/TestThriftHBaseServiceHandler.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13665268" author="hudson" created="Thu, 23 May 2013 15:33:38 +0000"  >&lt;p&gt;Integrated in hbase-0.95-on-hadoop2 #109 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95-on-hadoop2/109/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95-on-hadoop2/109/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8450&quot; title=&quot;Update hbase-default.xml and general recommendations to better suit current hw, h2, experience, etc.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8450&quot;&gt;&lt;del&gt;HBASE-8450&lt;/del&gt;&lt;/a&gt; Update hbase-default.xml and general recommendations to better suit current hw, h2, experience, etc. (Revision 1485562)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-client/src/main/java/org/apache/hadoop/hbase/HColumnDescriptor.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-client/src/main/java/org/apache/hadoop/hbase/HTableDescriptor.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-common/src/main/resources/hbase-default.xml&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/compactions/CompactionConfiguration.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/TestMultiVersions.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestFromClientSide.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/filter/TestColumnPrefixFilter.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/filter/TestDependentColumnFilter.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/filter/TestMultipleColumnPrefixFilter.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/io/encoding/TestEncodedSeekers.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/mapreduce/TestImportExport.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestColumnSeeking.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegionBusyWait.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestSeekOptimizations.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationBase.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/rest/client/TestRemoteTable.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/thrift2/TestThriftHBaseServiceHandler.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13665363" author="hudson" created="Thu, 23 May 2013 17:10:51 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #540 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/540/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/540/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8450&quot; title=&quot;Update hbase-default.xml and general recommendations to better suit current hw, h2, experience, etc.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8450&quot;&gt;&lt;del&gt;HBASE-8450&lt;/del&gt;&lt;/a&gt; Update hbase-default.xml and general recommendations to better suit current hw, h2, experience, etc. (Revision 1485561)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-client/src/main/java/org/apache/hadoop/hbase/HColumnDescriptor.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-client/src/main/java/org/apache/hadoop/hbase/HTableDescriptor.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-common/src/main/resources/hbase-default.xml&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/compactions/CompactionConfiguration.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/TestMultiVersions.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestFromClientSide.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/filter/TestColumnPrefixFilter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/filter/TestDependentColumnFilter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/filter/TestMultipleColumnPrefixFilter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/io/encoding/TestEncodedSeekers.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/mapreduce/TestImportExport.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestColumnSeeking.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegionBusyWait.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestSeekOptimizations.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationBase.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/rest/client/TestRemoteTable.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/thrift2/TestThriftHBaseServiceHandler.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13665531" author="nkeywal" created="Thu, 23 May 2013 19:34:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdcryans&quot; class=&quot;user-hover&quot; rel=&quot;jdcryans&quot;&gt;Jean-Daniel Cryans&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;I agree with you that setting that down to 10 would currently mean that we might retry timeouts on the region servers. What I&apos;m wondering now is how we can make this better. Should we also tweak the default operation timeout lower? Maybe it set it higher for MR jobs?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7590&quot; title=&quot;Add a costless notifications mechanism from master to regionservers &amp;amp; clients&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7590&quot;&gt;&lt;del&gt;HBASE-7590&lt;/del&gt;&lt;/a&gt; helps here, because you can set a high timeout without beeing stuck on dead servers. May be we could have different timeouts for read &amp;amp; writes, as read can be reexecuted without risks). But on the long term I think that the best option is around the approach of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7590&quot; title=&quot;Add a costless notifications mechanism from master to regionservers &amp;amp; clients&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7590&quot;&gt;&lt;del&gt;HBASE-7590&lt;/del&gt;&lt;/a&gt;: just wait, if the server is dead we will tell you...&lt;/p&gt;</comment>
                            <comment id="13671133" author="anoop.hbase" created="Fri, 31 May 2013 04:11:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; We have changed the config values in xml file. Still in the code, some places it refers to the old values. Sorry missed this point in the review.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
HConstants
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt; HFILE_BLOCK_CACHE_SIZE_DEFAULT = 0.25f;

MemStoreFlusher
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt; DEFAULT_LOWER = 0.35f;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It might look confusing for developers later.  We can correct this?&lt;/p&gt;</comment>
                            <comment id="13696108" author="lhofhansl" created="Sat, 29 Jun 2013 12:14:32 +0000"  >&lt;p&gt;I would like to solicit opinions about whether we make some of these config changes in 0.94 as well.&lt;/p&gt;

&lt;p&gt;If so, I would suggest the following changes:&lt;/p&gt;

&lt;p&gt;+ handlers 30 instead of 10&lt;br/&gt;
+ upped memstore lower limit from .35 to .38&lt;br/&gt;
+ bulkload retries is 10 instead of infinite&lt;br/&gt;
+ blockingstorefiles is 10 instead of 7&lt;br/&gt;
+ block cache is 0.4 instead of 0.25&lt;/p&gt;

&lt;p&gt;And maybe this:&lt;/p&gt;

&lt;p&gt;+ major compactions are now once a week instead of once every 24 hours; they are staggered so all regionservers do not start compacting at the same time&lt;/p&gt;</comment>
                            <comment id="13697029" author="jdcryans" created="Mon, 1 Jul 2013 18:09:55 +0000"  >&lt;p&gt;Not a big fan of late 0.94 changes to defaults. Imagine a situation where the user tweaked the memstore lower/upper limits to use that 20% of the heap we&apos;re not assigning, so now it would be &amp;gt;80%, and then deploys 0.94.10 via rolling restart and the RS refuse to come back up because of that.&lt;/p&gt;

&lt;p&gt;Basically the dynamics of the cluster would be different (maybe in a good way or maybe not?).&lt;/p&gt;

&lt;p&gt;To be fair, serious deploys would have those configurations tweaked so it wouldn&apos;t change anything for them.&lt;/p&gt;</comment>
                            <comment id="13697063" author="lhofhansl" created="Mon, 1 Jul 2013 18:53:25 +0000"  >&lt;p&gt;Fair enough. I agree.&lt;/p&gt;</comment>
                            <comment id="13697311" author="stack" created="Mon, 1 Jul 2013 23:12:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt; You have a patch sir with stuff I missed?  Could apply here or probably better in a new issue?&lt;/p&gt;</comment>
                            <comment id="13697583" author="anoop.hbase" created="Tue, 2 Jul 2013 07:45:26 +0000"  >&lt;p&gt;I have seen one issue raised by our &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt; and I commented in that so as to make this change also there.. He agreed..&lt;/p&gt;</comment>
                            <comment id="13744617" author="jeffreyz" created="Tue, 20 Aug 2013 02:03:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=saint.ack%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;saint.ack@gmail.com&quot;&gt;Stack&lt;/a&gt; &lt;blockquote&gt;&lt;p&gt;max versions now 1 instead of 3&lt;/p&gt;&lt;/blockquote&gt; Is there any place we can document this? After upgraded to 0.96, the script or client code may think data loss with statements such as &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;scan &apos;mytable&apos;, {VERSIONS =&amp;gt; 3}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; with the same table creation statement &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;create &apos;mytable&apos;, &apos;f1&apos;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; ported from 0.94 code.&lt;/p&gt;</comment>
                            <comment id="13744654" author="stack" created="Tue, 20 Aug 2013 03:22:13 +0000"  >&lt;p&gt;Well, it is in these release notes.  We should probably have a doc. that goes out w/ the release that highlights the major differences.  We could add a note there on this difference?&lt;/p&gt;</comment>
                            <comment id="13744658" author="stack" created="Tue, 20 Aug 2013 03:24:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jeffreyz&quot; class=&quot;user-hover&quot; rel=&quot;jeffreyz&quot;&gt;Jeffrey Zhong&lt;/a&gt; Something like a &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9271&quot; title=&quot;Doc the major differences between 0.94 and 0.96; a distillation of release notes for those w/ limited attention&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9271&quot;&gt;&lt;del&gt;HBASE-9271&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="13745174" author="jeffreyz" created="Tue, 20 Aug 2013 17:34:54 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=saint.ack%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;saint.ack@gmail.com&quot;&gt;Stack&lt;/a&gt;! HBase-9271 is a good way in order not to surprise our users later.&lt;/p&gt;</comment>
                            <comment id="13757402" author="jeffreyz" created="Wed, 4 Sep 2013 02:44:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=saint.ack%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;saint.ack@gmail.com&quot;&gt;Stack&lt;/a&gt; I happened to check current defaults. The &apos;hbase.bulkload.retries.number&apos; is still set as 0. Do we want the value to be set as 10? Thanks.&lt;/p&gt;

</comment>
                            <comment id="13757733" author="stack" created="Wed, 4 Sep 2013 13:14:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jeffreyz&quot; class=&quot;user-hover&quot; rel=&quot;jeffreyz&quot;&gt;Jeffrey Zhong&lt;/a&gt; Thank you for looking.  I must have messed up setting bulkload.retries.  I made &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9431&quot; title=&quot;Set  &amp;#39;hbase.bulkload.retries.number&amp;#39; to 10 as HBASE-8450 claims&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9431&quot;&gt;&lt;del&gt;HBASE-9431&lt;/del&gt;&lt;/a&gt; to change it to what this issue says it is (smile)&lt;/p&gt;</comment>
                            <comment id="14248920" author="hudson" created="Tue, 16 Dec 2014 20:57:14 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.0 #589 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/589/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.0/589/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9431&quot; title=&quot;Set  &amp;#39;hbase.bulkload.retries.number&amp;#39; to 10 as HBASE-8450 claims&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9431&quot;&gt;&lt;del&gt;HBASE-9431&lt;/del&gt;&lt;/a&gt; Set &apos;hbase.bulkload.retries.number&apos; to 10 as &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8450&quot; title=&quot;Update hbase-default.xml and general recommendations to better suit current hw, h2, experience, etc.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8450&quot;&gt;&lt;del&gt;HBASE-8450&lt;/del&gt;&lt;/a&gt; claims (stack: rev 36269b64038c6fcf076a1d8df90ea087559eb208)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-common/src/main/resources/hbase-default.xml&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/LoadIncrementalHFiles.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14248944" author="hudson" created="Tue, 16 Dec 2014 21:11:52 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #5930 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/5930/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/5930/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9431&quot; title=&quot;Set  &amp;#39;hbase.bulkload.retries.number&amp;#39; to 10 as HBASE-8450 claims&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9431&quot;&gt;&lt;del&gt;HBASE-9431&lt;/del&gt;&lt;/a&gt; Set &apos;hbase.bulkload.retries.number&apos; to 10 as &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8450&quot; title=&quot;Update hbase-default.xml and general recommendations to better suit current hw, h2, experience, etc.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8450&quot;&gt;&lt;del&gt;HBASE-8450&lt;/del&gt;&lt;/a&gt; claims (stack: rev e5d813c46b41ab4fb48d72731eb34422f260b81a)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-common/src/main/resources/hbase-default.xml&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/LoadIncrementalHFiles.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12580770" name="8450.txt" size="3565" author="stack" created="Fri, 26 Apr 2013 22:39:30 +0000"/>
                            <attachment id="12583791" name="8450v2.txt" size="46943" author="stack" created="Mon, 20 May 2013 05:11:20 +0000"/>
                            <attachment id="12583846" name="8450v3.txt" size="46943" author="stack" created="Mon, 20 May 2013 16:27:45 +0000"/>
                            <attachment id="12584369" name="8450v5.txt" size="67621" author="stack" created="Wed, 22 May 2013 19:47:37 +0000"/>
                            <attachment id="12583855" name="8450v5.txt" size="52772" author="stack" created="Mon, 20 May 2013 17:10:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 27 Apr 2013 03:04:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>325317</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1k4if:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>325662</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Changed defaults:&lt;br/&gt;
&lt;br/&gt;
+ max versions now 1 instead of 3&lt;br/&gt;
+ row blooms on by default (except on .META. table)&lt;br/&gt;
+ handlers 30 instead of 10&lt;br/&gt;
+ upped memstore lower limit from .35 to .38&lt;br/&gt;
+ zookeeper timeout default is 90seconds instead of 180&lt;br/&gt;
+ client pause is 100ms instead of 1000ms&lt;br/&gt;
+ retries are now 20 instead of 10 (so overall we still wait same amount of time)&lt;br/&gt;
+ bulkload retries is 10 instead of infinite&lt;br/&gt;
+ major compactions are now once a week instead of once every 24 hours; they are staggered so all regionservers do not start compacting at the same time&lt;br/&gt;
+ blockingstorefiles is 10 instead of 7&lt;br/&gt;
+ block cache is 0.4 instead of 0.25&lt;br/&gt;
+ Previous, default for hbase.rootdir was /tmp/hbase-${user.name}.  Now it is ${java.io.tmpdir}/hbase-${user.name} which is usually the same location but may not be (on macos, it points to /var/tmp....).&lt;br/&gt;
&lt;br/&gt;
</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.96notable</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>