<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:39:05 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-13044/HBASE-13044.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-13044] Configuration option for disabling coprocessor loading</title>
                <link>https://issues.apache.org/jira/browse/HBASE-13044</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Some users would like complete assurance coprocessors cannot be loaded. Add a configuration option that prevents coprocessors from ever being loaded by ignoring any load directives found in the site file or table metadata. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12775060">HBASE-13044</key>
            <summary>Configuration option for disabling coprocessor loading</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="apurtell">Andrew Purtell</assignee>
                                    <reporter username="apurtell">Andrew Purtell</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 Feb 2015 23:03:05 +0000</created>
                <updated>Fri, 7 Aug 2015 11:22:42 +0000</updated>
                            <resolved>Sun, 15 Feb 2015 19:22:13 +0000</resolved>
                                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>1.0.1</fixVersion>
                    <fixVersion>1.1.0</fixVersion>
                    <fixVersion>0.98.11</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                <comments>
                            <comment id="14320926" author="apurtell" created="Fri, 13 Feb 2015 23:03:44 +0000"  >&lt;p&gt;Also, add a related configuration option that only disables table coprocessor loading.&lt;/p&gt;</comment>
                            <comment id="14321148" author="apurtell" created="Sat, 14 Feb 2015 02:09:12 +0000"  >&lt;p&gt;Patch adds two new configuration options, set to current default behavior, and documents them in hbase-defaults.xml. New unit test. &lt;/p&gt;

&lt;p&gt;&lt;tt&gt;hbase.coprocessor.enabled&lt;/tt&gt; controls globally if any coprocessors will be loaded. Set to &quot;false&quot; to disable. Defaults to &quot;true&quot;.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;hbase.coprocessor.user.enabled&lt;/tt&gt; controls if any user (aka table) coprocessors will be loaded. Set to &quot;false&quot; to disable. Defaults to &quot;true&quot;.&lt;/p&gt;

&lt;p&gt;I use &quot;user&quot; rather than &quot;table&quot; following naming convention of other coprocessor related configuration keys.&lt;/p&gt;

&lt;p&gt;While &quot;hbase.coprocessor.enabled&quot; would be included in the site file along with any system coprocessor specifications, it is a useful global toggle as described, and will override any other settings if the site file happens to be assembled from fragments. &lt;/p&gt;</comment>
                            <comment id="14321197" author="srikanth235" created="Sat, 14 Feb 2015 03:28:56 +0000"  >&lt;p&gt;Patch looks good to me.&lt;br/&gt;
nit: In testTableLoadingDisabled, do we need &quot;conf.setBoolean(CoprocessorHost.COPROCESSORS_ENABLED_CONF_KEY, true);&quot; ?&lt;br/&gt;
Also, I&apos;m curious about why &quot;AtomicBoolean&quot; is used for *loaded variables instead of boolean?&lt;/p&gt;</comment>
                            <comment id="14321253" author="hadoopqa" created="Sat, 14 Feb 2015 05:42:04 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12698874/HBASE-13044.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12698874/HBASE-13044.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit f286797fbf063a929b0dc841c6071edb8eae2dd6.&lt;br/&gt;
  ATTACHMENT ID: 12698874&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 4 new or modified tests.&lt;br/&gt;
    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.1 2.5.2 2.6.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 2 zombie test(s): 	at org.apache.hadoop.hbase.coprocessor.TestMasterObserver.testRegionTransitionOperations(TestMasterObserver.java:1604)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12849//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12849//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12849//artifact/patchprocess/newPatchFindbugsWarningshbase-annotations.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12849//artifact/patchprocess/newPatchFindbugsWarningshbase-annotations.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12849//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12849//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12849//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12849//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12849//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12849//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12849//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12849//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12849//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12849//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12849//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12849//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12849//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12849//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12849//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12849//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12849//artifact/patchprocess/newPatchFindbugsWarningshbase-rest.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12849//artifact/patchprocess/newPatchFindbugsWarningshbase-rest.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12849//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12849//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12849//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12849//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12849//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12849//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14321276" author="apurtell" created="Sat, 14 Feb 2015 06:59:16 +0000"  >&lt;p&gt;Thanks for the review. &lt;/p&gt;

&lt;p&gt;I set the configuration like that just to be explicit. &lt;/p&gt;

&lt;p&gt;No need for the atomic booleans, I can change that. &lt;/p&gt;</comment>
                            <comment id="14321279" author="lhofhansl" created="Sat, 14 Feb 2015 07:08:43 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14321280" author="busbey" created="Sat, 14 Feb 2015 07:09:12 +0000"  >&lt;p&gt;Please print an INFO log message for wether or not each of the coprocessor types are loading.&lt;/p&gt;

&lt;p&gt;Is it worth adding a test where both are expressly enabled? I guess in case we change defaults?&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;+  private static AtomicBoolean systemCoprocessorLoaded = new AtomicBoolean();&lt;br/&gt;
+  private static AtomicBoolean tableCoprocessorLoaded = new AtomicBoolean();&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;should be final.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;nit: In testTableLoadingDisabled, do we need &quot;conf.setBoolean(CoprocessorHost.COPROCESSORS_ENABLED_CONF_KEY, true);&quot; ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Because the default might not be to have things enabled.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Also, I&apos;m curious about why &quot;AtomicBoolean&quot; is used for *loaded variables instead of boolean?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;because the variables are being modified from multiple threads. we could also use &lt;tt&gt;volatile&lt;/tt&gt; instead of AtomicBoolean, but most people find that more confusing.&lt;/p&gt;</comment>
                            <comment id="14321544" author="apurtell" created="Sat, 14 Feb 2015 15:53:51 +0000"  >&lt;blockquote&gt;&lt;p&gt;Please print an INFO log message for wether or not each of the coprocessor types are loading.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I assume you mean in the host not the test. I thought about doing this but RegionCoprocessorHosts are created per region so this will be printed every time a region is opened in the RS logs. Too chatty. I can add logging in the MasterCoprocessorHost and RegionServerCoprocessorHost, that would only appear once per daemon log in 0.98 and 1.0, twice on trunk where master and RS services are colocated. &lt;/p&gt;</comment>
                            <comment id="14321552" author="apurtell" created="Sat, 14 Feb 2015 16:22:24 +0000"  >&lt;p&gt;Updated patch.&lt;/p&gt;

&lt;p&gt;Adds logging in MasterCoprocessorHost and RegionServerCoprocessorHost at INFO level if coprocessor loading is enabled or not. &lt;/p&gt;

&lt;p&gt;Updates unit test with some comments and some coverage for the other coprocessor host types besides RegionCoprocessorHost.&lt;/p&gt;</comment>
                            <comment id="14321625" author="hadoopqa" created="Sat, 14 Feb 2015 18:31:43 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12698913/HBASE-13044.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12698913/HBASE-13044.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 6f904fe4caa026d4e0d050d97b2d8a1be6ca0785.&lt;br/&gt;
  ATTACHMENT ID: 12698913&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 4 new or modified tests.&lt;br/&gt;
    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.1 2.5.2 2.6.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.master.TestDistributedLogSplitting&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12854//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12854//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12854//artifact/patchprocess/newPatchFindbugsWarningshbase-rest.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12854//artifact/patchprocess/newPatchFindbugsWarningshbase-rest.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12854//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12854//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12854//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12854//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12854//artifact/patchprocess/newPatchFindbugsWarningshbase-annotations.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12854//artifact/patchprocess/newPatchFindbugsWarningshbase-annotations.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12854//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12854//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12854//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12854//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12854//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12854//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12854//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12854//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12854//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12854//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12854//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12854//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12854//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12854//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12854//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12854//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12854//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12854//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14321640" author="busbey" created="Sat, 14 Feb 2015 18:54:29 +0000"  >&lt;p&gt;Presuming the setting can&apos;t change after initialization, this sounds perfect. thanks.&lt;/p&gt;</comment>
                            <comment id="14321641" author="busbey" created="Sat, 14 Feb 2015 18:54:47 +0000"  >&lt;p&gt;+1 LGTM&lt;/p&gt;</comment>
                            <comment id="14322153" author="apurtell" created="Sun, 15 Feb 2015 19:22:13 +0000"  >&lt;p&gt;Pushed to 0.98+. Thanks for the reviews!&lt;/p&gt;</comment>
                            <comment id="14322163" author="hudson" created="Sun, 15 Feb 2015 19:47:01 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.1 #183 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.1/183/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.1/183/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13044&quot; title=&quot;Configuration option for disabling coprocessor loading&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13044&quot;&gt;&lt;del&gt;HBASE-13044&lt;/del&gt;&lt;/a&gt; Configuration option for disabling coprocessor loading (apurtell: rev b33f50e1d40afc64b4f62b38b5f4edbf46a44596)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/MasterCoprocessorHost.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/coprocessor/CoprocessorHost.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/coprocessor/TestCoprocessorConfiguration.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RegionServerCoprocessorHost.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RegionCoprocessorHost.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/resources/hbase-default.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14322173" author="hudson" created="Sun, 15 Feb 2015 20:20:57 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #6134 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/6134/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/6134/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13044&quot; title=&quot;Configuration option for disabling coprocessor loading&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13044&quot;&gt;&lt;del&gt;HBASE-13044&lt;/del&gt;&lt;/a&gt; Configuration option for disabling coprocessor loading (apurtell: rev 9b2e4ed064e5a832af12616167ce9dee794cdb33)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/MasterCoprocessorHost.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RegionServerCoprocessorHost.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/coprocessor/CoprocessorHost.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RegionCoprocessorHost.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/resources/hbase-default.xml&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/coprocessor/TestCoprocessorConfiguration.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14322190" author="hudson" created="Sun, 15 Feb 2015 21:01:06 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.0 #747 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/747/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.0/747/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13044&quot; title=&quot;Configuration option for disabling coprocessor loading&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13044&quot;&gt;&lt;del&gt;HBASE-13044&lt;/del&gt;&lt;/a&gt; Configuration option for disabling coprocessor loading (apurtell: rev 021bbf34548d8d124151181c1309ce84652c61c3)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-common/src/main/resources/hbase-default.xml&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RegionServerCoprocessorHost.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/coprocessor/TestCoprocessorConfiguration.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/MasterCoprocessorHost.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RegionCoprocessorHost.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/coprocessor/CoprocessorHost.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14322227" author="hudson" created="Sun, 15 Feb 2015 22:58:47 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.98 #855 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/855/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/855/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13044&quot; title=&quot;Configuration option for disabling coprocessor loading&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13044&quot;&gt;&lt;del&gt;HBASE-13044&lt;/del&gt;&lt;/a&gt; Configuration option for disabling coprocessor loading (apurtell: rev 96711bfc0e2bdce360da43775272b4fb48965be1)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RegionCoprocessorHost.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RegionServerCoprocessorHost.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/resources/hbase-default.xml&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/MasterCoprocessorHost.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/coprocessor/CoprocessorHost.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/coprocessor/TestCoprocessorConfiguration.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14322275" author="hudson" created="Mon, 16 Feb 2015 00:48:54 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98-on-Hadoop-1.1 #813 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/813/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/813/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13044&quot; title=&quot;Configuration option for disabling coprocessor loading&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13044&quot;&gt;&lt;del&gt;HBASE-13044&lt;/del&gt;&lt;/a&gt; Configuration option for disabling coprocessor loading (apurtell: rev 96711bfc0e2bdce360da43775272b4fb48965be1)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/MasterCoprocessorHost.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RegionCoprocessorHost.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/coprocessor/CoprocessorHost.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/resources/hbase-default.xml&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/coprocessor/TestCoprocessorConfiguration.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RegionServerCoprocessorHost.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14517758" author="enis" created="Tue, 28 Apr 2015 19:18:36 +0000"  >&lt;p&gt;Closing this issue after 1.0.1 release.&lt;/p&gt;</comment>
                            <comment id="14659763" author="yuzhihong@gmail.com" created="Thu, 6 Aug 2015 09:51:03 +0000"  >&lt;p&gt;When hbase.coprocessor.enabled is set false, system coprocessors such as MultiRowMutationEndpoint should still be loaded. Right ?&lt;/p&gt;</comment>
                            <comment id="14659900" author="lhofhansl" created="Thu, 6 Aug 2015 12:04:25 +0000"  >&lt;p&gt;That would be the idea? The only dangerous ones are the user provided one on HDFS.&lt;/p&gt;</comment>
                            <comment id="14660130" author="yuzhihong@gmail.com" created="Thu, 6 Aug 2015 15:01:25 +0000"  >&lt;p&gt;With this change: &lt;a href=&quot;http://pastebin.com/1hYN8PtD&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://pastebin.com/1hYN8PtD&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I saw the following in org.apache.hadoop.hbase.regionserver.TestSplitTransactionOnCluster-output.txt :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2015-08-06 07:49:31,314 DEBUG [B.defaultRpcServer.handler=4,queue=0,port=56411] ipc.CallRunner(109): B.defaultRpcServer.handler=4,queue=0,port=56411: callId: 295 service:        ClientService methodName: ExecService size: 1.2 K connection: 192.168.0.12:56464
org.apache.hadoop.hbase.exceptions.UnknownProtocolException: No registered coprocessor service found &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; name hbase.pb.MultiRowMutationService in region hbase:meta,,1
  at org.apache.hadoop.hbase.regionserver.HRegion.execService(HRegion.java:7348)
  at org.apache.hadoop.hbase.regionserver.RSRpcServices.execServiceOnRegion(RSRpcServices.java:1939)
  at org.apache.hadoop.hbase.regionserver.RSRpcServices.execService(RSRpcServices.java:1921)
  at org.apache.hadoop.hbase.protobuf.generated.ClientProtos$ClientService$2.callBlockingMethod(ClientProtos.java:32458)
  at org.apache.hadoop.hbase.ipc.RpcServer.call(RpcServer.java:2131)
  at org.apache.hadoop.hbase.ipc.CallRunner.run(CallRunner.java:106)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This was what effectively a customer went through when hbase.coprocessor.enabled was mistakenly set to false.&lt;/p&gt;</comment>
                            <comment id="14660204" author="apurtell" created="Thu, 6 Aug 2015 16:00:42 +0000"  >&lt;p&gt;Ted/Lars,&lt;/p&gt;

&lt;p&gt;Please review this issue. The answers you seek can be found in the comment history. &lt;/p&gt;

&lt;p&gt;HBase.coprocessor.enabled = false disables everything, as intended.&lt;/p&gt;

&lt;p&gt;HBase,coprocessor.user.enabled = false only disables table coprocessor loading so allows system coprocessors to load. &lt;/p&gt;</comment>
                            <comment id="14660224" author="apurtell" created="Thu, 6 Aug 2015 16:10:34 +0000"  >&lt;p&gt;I came back here to add the above to the release note now that I&apos;m off the mobile version of JIRA and find it&apos;s already there. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14660225" author="yuzhihong@gmail.com" created="Thu, 6 Aug 2015 16:11:14 +0000"  >&lt;p&gt;In customer&apos;s case:&lt;br/&gt;
hbase.coprocessor.user.enabled = true&lt;br/&gt;
hbase.coprocessor.enabled = false&lt;/p&gt;

&lt;p&gt;How should the above combination be interpreted ?&lt;/p&gt;</comment>
                            <comment id="14660311" author="apurtell" created="Thu, 6 Aug 2015 16:51:37 +0000"  >&lt;blockquote&gt;&lt;p&gt;How should the above combination be interpreted ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It doesn&apos;t make sense. Coprocessors should be disabled except for table coprocessors? And then the complaint is system coprocessors do not load? &lt;/p&gt;

&lt;p&gt;If I recall correctly, the setting for hbase.coprocessor.enabled will override the setting for hbase.coprocessor.user.enabled. If you want to globally disable coprocessors, use only hbase.coprocessor.enabled=false. If you want to disable table coprocessors but allow system coprocessors, use only hbase.coprocessor.user.enabled=false&lt;/p&gt;

&lt;p&gt;I&apos;m sure we&apos;d take up a doc patch that describes these settings in detail somewhere in the online manual.&lt;/p&gt;
</comment>
                            <comment id="14661675" author="lhofhansl" created="Fri, 7 Aug 2015 11:22:42 +0000"  >&lt;p&gt;I see. Agree with Andy, such a combination does not make sense. The customer wants to allow user provided table coprocessors, but disable their own (and the built in) system ones?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12698913" name="HBASE-13044.patch" size="16728" author="apurtell" created="Sat, 14 Feb 2015 16:22:24 +0000"/>
                            <attachment id="12698874" name="HBASE-13044.patch" size="10775" author="apurtell" created="Sat, 14 Feb 2015 02:09:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 14 Feb 2015 03:28:56 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 19 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i25mlb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>This change adds two new configuration options:&lt;br/&gt;
- &amp;quot;hbase.coprocessor.enabled&amp;quot; controls globally if any coprocessors will be loaded. Set to &amp;quot;false&amp;quot; to disable. Defaults to &amp;quot;true&amp;quot; for compatibility with previous releases.&lt;br/&gt;
- &amp;quot;hbase.coprocessor.user.enabled&amp;quot; controls if any user (aka table) coprocessors will be loaded. Set to &amp;quot;false&amp;quot; to disable. Defaults to &amp;quot;true&amp;quot; for compatibility with previous releases.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>