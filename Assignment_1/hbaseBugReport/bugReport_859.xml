<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:48:10 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-859/HBASE-859.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-859] HStoreKey needs a reworking</title>
                <link>https://issues.apache.org/jira/browse/HBASE-859</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-832&quot; title=&quot;Problem with row keys beginnig with characters &amp;lt; than &amp;#39;,&amp;#39; and the region location cache&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-832&quot;&gt;&lt;del&gt;HBASE-832&lt;/del&gt;&lt;/a&gt; had to make an ugly hack to address fact that rows that included the delimiter &amp;#8211; or a byte &amp;lt; delimiter &amp;#8211; messed up sorting in .META.  Fix the ugly hack, and while we&apos;re at it, add a byte for flags to the HSK so can mark if key is a meta key, a delete key (cell/family/row), etc.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12403432">HBASE-859</key>
            <summary>HStoreKey needs a reworking</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stack">stack</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Sun, 31 Aug 2008 05:21:19 +0000</created>
                <updated>Thu, 2 May 2013 02:29:18 +0000</updated>
                            <resolved>Tue, 3 Mar 2009 06:51:55 +0000</resolved>
                                                    <fixVersion>0.20.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12627310" author="jdcryans" created="Sun, 31 Aug 2008 13:23:51 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12629012" author="stack" created="Sun, 7 Sep 2008 22:06:11 +0000"  >&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-868&quot; title=&quot;Incrementing binary rows cause strange behavior once table splits&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-868&quot;&gt;&lt;del&gt;HBASE-868&lt;/del&gt;&lt;/a&gt; for the lengths the lads had to go to to avoid a migration and hack in a fix for fact we couldn&apos;t do binary keys.  Need to undo most of it when HSK gets done properly.   This issue needs to include a unit test that uses binary keys and many regions.  See &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-868&quot; title=&quot;Incrementing binary rows cause strange behavior once table splits&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-868&quot;&gt;&lt;del&gt;HBASE-868&lt;/del&gt;&lt;/a&gt; for note on how to make PE do binary keys.&lt;/p&gt;</comment>
                            <comment id="12629036" author="jimk" created="Mon, 8 Sep 2008 01:41:38 +0000"  >&lt;p&gt;+1 on adding a test for binary keys&lt;/p&gt;</comment>
                            <comment id="12629841" author="stack" created="Wed, 10 Sep 2008 15:56:40 +0000"  >&lt;p&gt;After the &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-868&quot; title=&quot;Incrementing binary rows cause strange behavior once table splits&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-868&quot;&gt;&lt;del&gt;HBASE-868&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-877&quot; title=&quot;HCM is unable to find table with multiple regions which contains binary&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-877&quot;&gt;&lt;del&gt;HBASE-877&lt;/del&gt;&lt;/a&gt; escapades,  we might need a METAHSK and possibly a ROOTHSK.  While a normal HSK has row/column/ts, a METAHSK would have table/row/column/ts or maybe even table/table-row/table-ts/column/ts; in other words, rather than rely on breaking row on delimiter, instead, rely on field lengths.  The new classes would know how to compare themselves.  The two types should never be mixed since their detail is contained beneath a Store (I suppose, clients would have to know how to deal w/ the new type).&lt;/p&gt;</comment>
                            <comment id="12629844" author="jimk" created="Wed, 10 Sep 2008 16:08:12 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;Yes, with separate fields, we wouldn&apos;t have to parse the keys, which worked for Text, but not for binary row keys.&lt;/p&gt;

&lt;p&gt;For METAHSK I would have table, startkey, endkey. With the right compareTo method we would know how to sort the keys so that the children of a split would come after the parent.&lt;/p&gt;

&lt;p&gt;I&apos;d also like to get rid of the region id, since it was only used for sorting purposes.&lt;/p&gt;</comment>
                            <comment id="12629911" author="stack" created="Wed, 10 Sep 2008 18:53:56 +0000"  >&lt;p&gt;Text had same problem as binary keys. If keys were URLs and URL included any of below characters, then we had same problem:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
       0 nul    1 soh    2 stx    3 etx    4 eot    5 enq    6 ack    7 bel
       8 bs     9 ht    10 nl    11 vt    12 np    13 cr    14 so    15 si
      16 dle   17 dc1   18 dc2   19 dc3   20 dc4   21 nak   22 syn   23 etb
      24 can   25 em    26 sub   27 esc   28 fs    29 gs    30 rs    31 us
      32 sp    33  !    34  &quot;    35  #    36  $    37  %    38  &amp;amp;    39  &apos;
      40  (    41  )    42  *    43  +   
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12629912" author="stack" created="Wed, 10 Sep 2008 18:54:34 +0000"  >&lt;p&gt;On other suggestions, start/end key in meta row, no objections.. or dropping the regionid.&lt;/p&gt;</comment>
                            <comment id="12629915" author="jimk" created="Wed, 10 Sep 2008 19:00:48 +0000"  >&lt;p&gt;&amp;gt; stack - 10/Sep/08 11:53 AM&lt;br/&gt;
&amp;gt; Text had same problem as binary keys. If keys were URLs and URL included any of below characters,&lt;br/&gt;
&amp;gt; then we had same problem:&lt;/p&gt;

&lt;p&gt;True, but the problem didn&apos;t really rear its ugly head until the keys were completely binary data. Then it became obvious that it was really broken.&lt;/p&gt;</comment>
                            <comment id="12634243" author="jimk" created="Wed, 24 Sep 2008 18:27:28 +0000"  >&lt;p&gt;This needs to get done soon, and will require a migration.&lt;/p&gt;

&lt;p&gt;Can we drop the old migration classes (org.apache.hadoop.hbase.util.migration.v5) from trunk at this point?&lt;/p&gt;</comment>
                            <comment id="12634246" author="jimk" created="Wed, 24 Sep 2008 18:31:13 +0000"  >&lt;p&gt;Making blocker for 0.19.&lt;/p&gt;

&lt;p&gt;We need to get out of trying to parse binary keys. Trying to look for a particular delimiter in a key is meaningless since a binary key could easily include a byte that matches the delimiter.&lt;/p&gt;</comment>
                            <comment id="12643100" author="stack" created="Mon, 27 Oct 2008 23:31:54 +0000"  >&lt;p&gt;++1 on it being a Blocker.  We pay for this bigtime looking at hbase under load with a profiler.&lt;/p&gt;</comment>
                            <comment id="12643552" author="stack" created="Wed, 29 Oct 2008 17:51:08 +0000"  >&lt;p&gt;Do this in 0.19.0 if we&apos;re going to have to migrate data anyway (Lets see).&lt;/p&gt;</comment>
                            <comment id="12644035" author="stack" created="Thu, 30 Oct 2008 16:52:36 +0000"  >&lt;p&gt;Moving out of 0.19.  I was under impression that &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-839&quot; title=&quot;Update hadoop libs in hbase; move hbase TRUNK on to an hadoop 0.19.0 RC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-839&quot;&gt;&lt;del&gt;HBASE-839&lt;/del&gt;&lt;/a&gt; required migration.  It doesn&apos;t.  0.19.0 doesn&apos;t look like it&apos;ll have any migrations if I move this out.  Lets do this fix along with new file format.&lt;/p&gt;</comment>
                            <comment id="12677613" author="stack" created="Sat, 28 Feb 2009 00:59:04 +0000"  >&lt;p&gt;Patch that adds new config to HCD, fixes store keys so we can do binary keys again, etc.  Not ready yet.&lt;/p&gt;</comment>
                            <comment id="12677656" author="stack" created="Sat, 28 Feb 2009 06:34:30 +0000"  >&lt;p&gt;Needs more testing.&lt;/p&gt;

&lt;p&gt;To do binary keys, we now use a different comparator dependent on whether its a root, meta or plain context.&lt;/p&gt;</comment>
                            <comment id="12677873" author="stack" created="Mon, 2 Mar 2009 01:53:30 +0000"  >&lt;p&gt;Not all tests pass.  Still a few to go.&lt;/p&gt;</comment>
                            <comment id="12678247" author="stack" created="Tue, 3 Mar 2009 06:45:09 +0000"  >&lt;p&gt;This patch passes all tests.  I&apos;ll go ahead and commit.  Will attach a fat commit message.  I opened a new issue, hbase-1234, to deal with changing key format.  Should be easier to do after this work goes in.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12397399">HBASE-661</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12401162" name="859-v2.patch" size="117858" author="stack" created="Sat, 28 Feb 2009 06:34:30 +0000"/>
                            <attachment id="12401213" name="859-v4.patch" size="131971" author="stack" created="Mon, 2 Mar 2009 01:53:30 +0000"/>
                            <attachment id="12401290" name="859-v6.patch" size="150682" author="stack" created="Tue, 3 Mar 2009 06:45:09 +0000"/>
                            <attachment id="12401152" name="hcd.patch" size="103352" author="stack" created="Sat, 28 Feb 2009 00:59:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 31 Aug 2008 13:23:51 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31880</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10342"><![CDATA[Incompatible change]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 42 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h9vz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98864</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>