<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 21:09:13 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-15988/HBASE-15988.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-15988] User needs to initiate full backup for new table(s) being added for incremental backup</title>
                <link>https://issues.apache.org/jira/browse/HBASE-15988</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;When a new table is added to backup table set, the incremental backup involving the new table should be full backup.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12976679">HBASE-15988</key>
            <summary>User needs to initiate full backup for new table(s) being added for incremental backup</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yuzhihong@gmail.com">Ted Yu</assignee>
                                    <reporter username="vrodionov">Vladimir Rodionov</reporter>
                        <labels>
                            <label>backup</label>
                    </labels>
                <created>Wed, 8 Jun 2016 01:04:45 +0000</created>
                <updated>Thu, 7 Jul 2016 23:23:11 +0000</updated>
                            <resolved>Thu, 7 Jul 2016 23:23:11 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="15348667" author="yuzhihong@gmail.com" created="Fri, 24 Jun 2016 21:21:26 +0000"  >&lt;p&gt;Looking at BackupSystemTable#addToBackupSet() :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
     Put put = BackupSystemTableHelper.createPutForBackupSet(name, union);
     table.put(put);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;There is no indication (metadata) as to which table(s) in the table set are new.&lt;/p&gt;

&lt;p&gt;Do you think we should add such metadata ?&lt;/p&gt;</comment>
                            <comment id="15348887" author="yuzhihong@gmail.com" created="Fri, 24 Jun 2016 23:37:38 +0000"  >&lt;p&gt;Another option is to obtain backup history and check whether the table set has gone through successful full backup previously.&lt;br/&gt;
If not, do full backup for the table set.&lt;/p&gt;</comment>
                            <comment id="15364721" author="yuzhihong@gmail.com" created="Wed, 6 Jul 2016 17:46:15 +0000"  >&lt;p&gt;Ran tests in org.apache.hadoop.hbase.backup package which all passed.&lt;/p&gt;</comment>
                            <comment id="15364730" author="hadoopqa" created="Wed, 6 Jul 2016 17:49:10 +0000"  >&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;&lt;/b&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Vote &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Runtime &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Comment &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt;0&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt; patch &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt; 0m 1s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt; The patch file was not named according to hbase&apos;s naming conventions. Please see &lt;a href=&quot;https://yetus.apache.org/documentation/0.2.1/precommit-patchnames&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://yetus.apache.org/documentation/0.2.1/precommit-patchnames&lt;/a&gt; for instructions. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; patch &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; 0m 3s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15988&quot; title=&quot;User needs to initiate full backup for new table(s) being added for incremental backup&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15988&quot;&gt;&lt;del&gt;HBASE-15988&lt;/del&gt;&lt;/a&gt; does not apply to master. Rebase required? Wrong Branch? See &lt;a href=&quot;https://yetus.apache.org/documentation/0.2.1/precommit-patchnames&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://yetus.apache.org/documentation/0.2.1/precommit-patchnames&lt;/a&gt; for help. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Report/Notes &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Patch URL &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12816459/15988.v2.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12816459/15988.v2.txt&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Issue &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15988&quot; title=&quot;User needs to initiate full backup for new table(s) being added for incremental backup&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15988&quot;&gt;&lt;del&gt;HBASE-15988&lt;/del&gt;&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Console output &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2545/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2545/console&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Powered by &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Apache Yetus 0.2.1   &lt;a href=&quot;http://yetus.apache.org&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://yetus.apache.org&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;This message was automatically generated.&lt;/p&gt;
</comment>
                            <comment id="15364798" author="vrodionov" created="Wed, 6 Jul 2016 18:19:58 +0000"  >&lt;p&gt;-1 on patch.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu&quot; class=&quot;user-hover&quot; rel=&quot;tedyu&quot;&gt;Ted Yu&lt;/a&gt;, can you trigger full backup for tables on add tables to table set operation? &lt;/p&gt;

&lt;p&gt;BackupAdmin.addToBackupSet() &amp;lt;- here&lt;/p&gt;</comment>
                            <comment id="15364812" author="yuzhihong@gmail.com" created="Wed, 6 Jul 2016 18:24:31 +0000"  >&lt;p&gt;Since table(s) can be added to backup set in batches, I don&apos;t see why full backup should be triggered (for each addition to backup set).&lt;/p&gt;

&lt;p&gt;This also deviates from user&apos;s perspective of addition to backup set.&lt;/p&gt;</comment>
                            <comment id="15364855" author="vrodionov" created="Wed, 6 Jul 2016 18:39:09 +0000"  >&lt;p&gt;Hmm.&lt;/p&gt;

&lt;p&gt;Suppose you have table set of 150 tables and all of them are OK (with full backup), you add new one, which does not have backup yet. Next time you run incremental backup on this set, the backup will be converted to FULL for all 151 tables, or to FULL for only 1&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/help_16.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. I do not think user expects either one. &lt;/p&gt;

&lt;p&gt;When we add new tables to a backup set, we need to check 3 conditions:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;all tables have backups - nothing to do&lt;/li&gt;
	&lt;li&gt;all tables do not have backups - nothing to do&lt;/li&gt;
	&lt;li&gt;some have, some do not - trigger FULL backup for tables which do not have backups yet or throw exception (&quot;Can not add ..., run FULL backup first for tables ...). This can be configurable, say &lt;b&gt;-force&lt;/b&gt; will trigger full backup automatically.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="15364932" author="yuzhihong@gmail.com" created="Wed, 6 Jul 2016 19:25:02 +0000"  >&lt;blockquote&gt;&lt;p&gt;I do not think user expects either one.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;some have, some do not&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;For the above case, how about throwing DoNotRetryIOException informing user that incremental backup for the current table set cannot be performed ?&lt;br/&gt;
User can decide whether to shrink the table set or trigger full backup on the newly added tables.&lt;/p&gt;</comment>
                            <comment id="15364952" author="vrodionov" created="Wed, 6 Jul 2016 19:38:50 +0000"  >&lt;blockquote&gt;
&lt;p&gt;User can decide whether to shrink the table set or trigger full backup on the newly added tables.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;User will need to compile list of tables, which failed incremental backup, then run backup on these tables in a full mode, then retry incremental backup on backup set again? This is going to confuse users. What do you think, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu&quot; class=&quot;user-hover&quot; rel=&quot;tedyu&quot;&gt;Ted Yu&lt;/a&gt;? cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15364976" author="yuzhihong@gmail.com" created="Wed, 6 Jul 2016 20:00:35 +0000"  >&lt;p&gt;Incremental backup follows full backup.&lt;br/&gt;
Once user goes through the above process, he / she would get to know the above better.&lt;/p&gt;</comment>
                            <comment id="15365001" author="yuzhihong@gmail.com" created="Wed, 6 Jul 2016 20:14:02 +0000"  >&lt;p&gt;Thinking about option #3&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;trigger FULL backup for tables which do not have backups yet&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This can be done before doing the incremental backup. However, the combined duration for full + incremental backups would be quite long.&lt;/p&gt;</comment>
                            <comment id="15365179" author="yuzhihong@gmail.com" created="Wed, 6 Jul 2016 21:56:52 +0000"  >&lt;p&gt;Patch v3 throws exception if there is table which hasn&apos;t gone through full backup yet.&lt;/p&gt;</comment>
                            <comment id="15365364" author="yuzhihong@gmail.com" created="Thu, 7 Jul 2016 00:08:09 +0000"  >&lt;p&gt;The reason I don&apos;t want to trigger full backup when BackupAdmin#addToBackupSet() is called is that the user may later drop the new table from the table set (before performing the next backup).&lt;/p&gt;</comment>
                            <comment id="15365434" author="vrodionov" created="Thu, 7 Jul 2016 01:05:56 +0000"  >&lt;p&gt;No check if tables in tableList have all full backup. This check used to be before.&lt;/p&gt;

&lt;p&gt;This is the current code. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu&quot; class=&quot;user-hover&quot; rel=&quot;tedyu&quot;&gt;Ted Yu&lt;/a&gt;, as you can see, we do not check if tableList is fully covered by incrTableSet. Means, all tables&lt;br/&gt;
from tableList have backups already.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Pair&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; backupTables(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; BackupType type,
        List&amp;lt;TableName&amp;gt; tableList, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; targetRootDir, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; workers,
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; bandwidth) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; procId;
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; backupId = BackupRestoreConstants.BACKUPID_PREFIX + 
        EnvironmentEdgeManager.currentTime();
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (type == BackupType.INCREMENTAL) {
      Set&amp;lt;TableName&amp;gt; incrTableSet = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
      &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (BackupSystemTable table = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BackupSystemTable(getConnection())) {
        incrTableSet = table.getIncrementalBackupTableSet(targetRootDir);
      }
         
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (incrTableSet.isEmpty()) {
        LOG.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Incremental backup table set contains no table.\n&quot;&lt;/span&gt;
            + &lt;span class=&quot;code-quote&quot;&gt;&quot;Use &apos;backup create full&apos; or &apos;backup stop&apos; to \n &quot;&lt;/span&gt;
            + &lt;span class=&quot;code-quote&quot;&gt;&quot;change the tables covered by incremental backup.&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DoNotRetryIOException(&lt;span class=&quot;code-quote&quot;&gt;&quot;No table covered by incremental backup.&quot;&lt;/span&gt;);
      }

      LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Incremental backup &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the following table set: &quot;&lt;/span&gt; + incrTableSet);
      tableList = Lists.newArrayList(incrTableSet);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That should be fixed in a separate JIRA. As for the current, as I pointed that out already, the proposed implementation will be the source of confusion. We can not postpone failure until first backup run. Operation of adding table to backup set should either fail or succeed immediately.&lt;/p&gt;</comment>
                            <comment id="15365441" author="yuzhihong@gmail.com" created="Thu, 7 Jul 2016 01:14:09 +0000"  >&lt;blockquote&gt;&lt;p&gt;Operation of adding table to backup set should either fail or succeed immediately.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;What if user intends to add a table to existing backup set and perform full backup on the updated backup set ?&lt;/p&gt;</comment>
                            <comment id="15366435" author="vrodionov" created="Thu, 7 Jul 2016 17:20:30 +0000"  >&lt;blockquote&gt;
&lt;p&gt;What if user intends to add a table to existing backup set and perform full backup on the updated backup set ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu&quot; class=&quot;user-hover&quot; rel=&quot;tedyu&quot;&gt;Ted Yu&lt;/a&gt;, they can take a full backup on a set first, then add new tables with &lt;b&gt;-force&lt;/b&gt; key.  Command must provide immediate feedback (failed, succeeded) - not postponed one.&lt;/p&gt;</comment>
                            <comment id="15366480" author="yuzhihong@gmail.com" created="Thu, 7 Jul 2016 17:46:38 +0000"  >&lt;p&gt;Here is how incremental table set is retrieved:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        incrTableSet = table.getIncrementalBackupTableSet(targetRootDir);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Here is API for adding table(s) to backup set:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void addToBackupSet(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name, TableName[] tables) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Without backup root dir, how would the check be done ?&lt;/p&gt;</comment>
                            <comment id="15366497" author="vrodionov" created="Thu, 7 Jul 2016 17:54:46 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Without backup root dir, how would the check be done ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I do not think that we need backup set per backup destination. You get incremental backup set (using backup root), then retrieve backup set (no backup root), compare them and make decision. &lt;/p&gt;</comment>
                            <comment id="15366500" author="yuzhihong@gmail.com" created="Thu, 7 Jul 2016 17:57:51 +0000"  >&lt;blockquote&gt;&lt;p&gt;You get incremental backup set (using backup root)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Backup root is not part of backup set addition command.&lt;/p&gt;</comment>
                            <comment id="15366570" author="vrodionov" created="Thu, 7 Jul 2016 18:38:05 +0000"  >&lt;p&gt;Yeah, you right. And it should not be. OK, in this case, incremental backup for table set should be split into two parts:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;full backup for new tables&lt;/li&gt;
	&lt;li&gt;followed by incremental backup for all tables in a backup set&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;What do you think, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu&quot; class=&quot;user-hover&quot; rel=&quot;tedyu&quot;&gt;Ted Yu&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="15366594" author="yuzhihong@gmail.com" created="Thu, 7 Jul 2016 18:56:36 +0000"  >&lt;p&gt;As I mentioned previously, running incremental backup would be longer than expected if we trigger full backup first for the new table(s).&lt;br/&gt;
RPC timeout would result.&lt;/p&gt;

&lt;p&gt;I suggest using patch v3.&lt;/p&gt;</comment>
                            <comment id="15366716" author="vrodionov" created="Thu, 7 Jul 2016 20:32:09 +0000"  >&lt;p&gt;-1 on patch v3. User will have no idea what to do in this case. Delete tables from the set? Which one? They will need to analyze log file to understand what to do next? How are you going to provide full instructions in a log file, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu&quot; class=&quot;user-hover&quot; rel=&quot;tedyu&quot;&gt;Ted Yu&lt;/a&gt;? You will need to explain user, that &lt;br/&gt;
he(she) needs to run some tables full backup first, then repeat incremental for backup set. You do not have this information (which backup set is used) in HMaster. cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="15366742" author="yuzhihong@gmail.com" created="Thu, 7 Jul 2016 20:48:57 +0000"  >&lt;p&gt;In the exception message, it is very obvious which tables need to go through full backup.&lt;br/&gt;
There is no need to dig through log file.&lt;/p&gt;</comment>
                            <comment id="15366798" author="vrodionov" created="Thu, 7 Jul 2016 21:25:12 +0000"  >&lt;ol&gt;
	&lt;li&gt;Please replace concat with StringUtils.join&lt;/li&gt;
	&lt;li&gt;Fix wording in exception message: &quot;Perform full backup on &quot; + extraTables + &quot; first, then retry the command.&quot;)&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="15366846" author="yuzhihong@gmail.com" created="Thu, 7 Jul 2016 21:55:34 +0000"  >&lt;p&gt;Patch v4 addresses Vlad&apos;s latest comment&lt;/p&gt;</comment>
                            <comment id="15366955" author="vrodionov" created="Thu, 7 Jul 2016 23:18:24 +0000"  >&lt;p&gt;+1, if tests OK.&lt;/p&gt;</comment>
                            <comment id="15366961" author="yuzhihong@gmail.com" created="Thu, 7 Jul 2016 23:23:11 +0000"  >&lt;p&gt;Thanks for the review.&lt;/p&gt;

&lt;p&gt;Ran tests which passed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12863549">HBASE-14414</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12816358" name="15988.v1.txt" size="1764" author="yuzhihong@gmail.com" created="Wed, 6 Jul 2016 01:53:12 +0000"/>
                            <attachment id="12816459" name="15988.v2.txt" size="2999" author="yuzhihong@gmail.com" created="Wed, 6 Jul 2016 17:06:30 +0000"/>
                            <attachment id="12816536" name="15988.v3.txt" size="1954" author="yuzhihong@gmail.com" created="Thu, 7 Jul 2016 00:06:41 +0000"/>
                            <attachment id="12816711" name="15988.v4.txt" size="1790" author="yuzhihong@gmail.com" created="Thu, 7 Jul 2016 21:55:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 24 Jun 2016 21:21:26 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            23 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2z4nj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>