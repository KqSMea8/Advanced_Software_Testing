<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:26:11 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5259/HBASE-5259.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5259] Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5259</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Assuming the HBase and MapReduce running in the same cluster, the TableInputFormat is to override the split function which divides all the regions from one particular table into a series of mapper tasks. So each mapper task can process a region or one part of a region. Ideally, the mapper task should run on the same machine on which the region server hosts the corresponding region. That&apos;s the motivation that the TableInputFormat sets the RegionLocation so that the MapReduce framework can respect the node locality. &lt;/p&gt;

&lt;p&gt;The code simply set the host name of the region server as the HRegionLocation. However, the host name of the region server may have different format with the host name of the task tracker (Mapper task). The task tracker always gets its hostname by the reverse DNS lookup. And the DNS service may return different host name format. For example, the host name of the region server is correctly set as a.b.c.d while the reverse DNS lookup may return a.b.c.d. (With an additional doc in the end).&lt;/p&gt;

&lt;p&gt;So the solution is to set the RegionLocation by the reverse DNS lookup as well. No matter what host name format the DNS system is using, the TableInputFormat has the responsibility to keep the consistent host name format with the MapReduce framework.&lt;/p&gt;




</description>
                <environment></environment>
        <key id="12539508">HBASE-5259</key>
            <summary>Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="liyin">Liyin Tang</assignee>
                                    <reporter username="liyin">Liyin Tang</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Jan 2012 18:38:03 +0000</created>
                <updated>Fri, 12 Oct 2012 05:34:50 +0000</updated>
                            <resolved>Tue, 31 Jan 2012 20:03:30 +0000</resolved>
                                                    <fixVersion>0.94.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13192768" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 01:36:38 +0000"  >&lt;p&gt;Liyin requested code review of &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;br/&gt;
Reviewers: Kannan, Karthik, mbautin&lt;/p&gt;

&lt;p&gt;  Assuming the HBase and MapReduce running in the same cluster, the TableInputFormat is to override the split function which divides all the regions from one particular table into a series of mapper tasks. So each mapper task can process a region or one part of a region. Ideally, the mapper task should run on the same machine on which the region server hosts the corresponding region. That&apos;s the motivation that the TableInputFormat sets the RegionLocation so that the MapReduce framework can respect the node locality.&lt;/p&gt;

&lt;p&gt;  The code simply set the host name of the region server as the HRegionLocation. However, the host name of the region server may have different format with the host name of the task tracker (Mapper task). The task tracker always gets its hostname by the reverse DNS lookup. And the DNS service may return different host name format. For example, the host name of the region server is correctly set as a.b.c.d while the reverse DNS lookup may return a.b.c.d. (With an additional doc in the end).&lt;/p&gt;

&lt;p&gt;  So the solution is to set the RegionLocation by the reverse DNS lookup as well. No matter what host name format the DNS system is using, the TableInputFormat has the responsibility to keep the consistent host name format with the MapReduce framework.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  running all the unit tests&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/2937/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/2937/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13192769" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 01:36:40 +0000"  >&lt;p&gt;Liyin requested code review of &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;br/&gt;
Reviewers: Kannan, Karthik, mbautin&lt;/p&gt;

&lt;p&gt;  Assuming the HBase and MapReduce running in the same cluster, the TableInputFormat is to override the split function which divides all the regions from one particular table into a series of mapper tasks. So each mapper task can process a region or one part of a region. Ideally, the mapper task should run on the same machine on which the region server hosts the corresponding region. That&apos;s the motivation that the TableInputFormat sets the RegionLocation so that the MapReduce framework can respect the node locality.&lt;/p&gt;

&lt;p&gt;  The code simply set the host name of the region server as the HRegionLocation. However, the host name of the region server may have different format with the host name of the task tracker (Mapper task). The task tracker always gets its hostname by the reverse DNS lookup. And the DNS service may return different host name format. For example, the host name of the region server is correctly set as a.b.c.d while the reverse DNS lookup may return a.b.c.d. (With an additional doc in the end).&lt;/p&gt;

&lt;p&gt;  So the solution is to set the RegionLocation by the reverse DNS lookup as well. No matter what host name format the DNS system is using, the TableInputFormat has the responsibility to keep the consistent host name format with the MapReduce framework.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  running all the unit tests&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/2937/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/2937/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13192770" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 01:36:43 +0000"  >&lt;p&gt;Liyin requested code review of &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;br/&gt;
Reviewers: Kannan, Karthik, mbautin&lt;/p&gt;

&lt;p&gt;  Assuming the HBase and MapReduce running in the same cluster, the TableInputFormat is to override the split function which divides all the regions from one particular table into a series of mapper tasks. So each mapper task can process a region or one part of a region. Ideally, the mapper task should run on the same machine on which the region server hosts the corresponding region. That&apos;s the motivation that the TableInputFormat sets the RegionLocation so that the MapReduce framework can respect the node locality.&lt;/p&gt;

&lt;p&gt;  The code simply set the host name of the region server as the HRegionLocation. However, the host name of the region server may have different format with the host name of the task tracker (Mapper task). The task tracker always gets its hostname by the reverse DNS lookup. And the DNS service may return different host name format. For example, the host name of the region server is correctly set as a.b.c.d while the reverse DNS lookup may return a.b.c.d. (With an additional doc in the end).&lt;/p&gt;

&lt;p&gt;  So the solution is to set the RegionLocation by the reverse DNS lookup as well. No matter what host name format the DNS system is using, the TableInputFormat has the responsibility to keep the consistent host name format with the MapReduce framework.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  running all the unit tests&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/2937/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/2937/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13192772" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 01:36:47 +0000"  >&lt;p&gt;Liyin requested code review of &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;br/&gt;
Reviewers: Kannan, Karthik, mbautin&lt;/p&gt;

&lt;p&gt;  Assuming the HBase and MapReduce running in the same cluster, the TableInputFormat is to override the split function which divides all the regions from one particular table into a series of mapper tasks. So each mapper task can process a region or one part of a region. Ideally, the mapper task should run on the same machine on which the region server hosts the corresponding region. That&apos;s the motivation that the TableInputFormat sets the RegionLocation so that the MapReduce framework can respect the node locality.&lt;/p&gt;

&lt;p&gt;  The code simply set the host name of the region server as the HRegionLocation. However, the host name of the region server may have different format with the host name of the task tracker (Mapper task). The task tracker always gets its hostname by the reverse DNS lookup. And the DNS service may return different host name format. For example, the host name of the region server is correctly set as a.b.c.d while the reverse DNS lookup may return a.b.c.d. (With an additional doc in the end).&lt;/p&gt;

&lt;p&gt;  So the solution is to set the RegionLocation by the reverse DNS lookup as well. No matter what host name format the DNS system is using, the TableInputFormat has the responsibility to keep the consistent host name format with the MapReduce framework.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  running all the unit tests&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/2937/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/2937/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13192882" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 06:32:39 +0000"  >&lt;p&gt;tedyu has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:153 I briefly went over DNS.reverseDns() and didn&apos;t see caching there.&lt;br/&gt;
  Can we introduce caching here to avoid looking up the same address again and again ?&lt;/p&gt;

&lt;p&gt;  The second parameter is supposed to be &apos;The host name of a reachable DNS server&apos;&lt;br/&gt;
  Should we allow the user to specify such a server ?&lt;/p&gt;


&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13192883" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 06:32:40 +0000"  >&lt;p&gt;tedyu has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:153 I briefly went over DNS.reverseDns() and didn&apos;t see caching there.&lt;br/&gt;
  Can we introduce caching here to avoid looking up the same address again and again ?&lt;/p&gt;

&lt;p&gt;  The second parameter is supposed to be &apos;The host name of a reachable DNS server&apos;&lt;br/&gt;
  Should we allow the user to specify such a server ?&lt;/p&gt;


&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13192884" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 06:32:41 +0000"  >&lt;p&gt;tedyu has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:153 I briefly went over DNS.reverseDns() and didn&apos;t see caching there.&lt;br/&gt;
  Can we introduce caching here to avoid looking up the same address again and again ?&lt;/p&gt;

&lt;p&gt;  The second parameter is supposed to be &apos;The host name of a reachable DNS server&apos;&lt;br/&gt;
  Should we allow the user to specify such a server ?&lt;/p&gt;


&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13192885" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 06:32:43 +0000"  >&lt;p&gt;tedyu has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:153 I briefly went over DNS.reverseDns() and didn&apos;t see caching there.&lt;br/&gt;
  Can we introduce caching here to avoid looking up the same address again and again ?&lt;/p&gt;

&lt;p&gt;  The second parameter is supposed to be &apos;The host name of a reachable DNS server&apos;&lt;br/&gt;
  Should we allow the user to specify such a server ?&lt;/p&gt;


&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13193269" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 20:09:38 +0000"  >&lt;p&gt;Liyin updated the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;br/&gt;
Reviewers: Kannan, Karthik, mbautin&lt;/p&gt;

&lt;p&gt;  Address Ted&apos;s comments.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java&lt;/p&gt;</comment>
                            <comment id="13193270" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 20:09:40 +0000"  >&lt;p&gt;Liyin updated the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;br/&gt;
Reviewers: Kannan, Karthik, mbautin&lt;/p&gt;

&lt;p&gt;  Address Ted&apos;s comments.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java&lt;/p&gt;</comment>
                            <comment id="13193271" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 20:09:42 +0000"  >&lt;p&gt;Liyin updated the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;br/&gt;
Reviewers: Kannan, Karthik, mbautin&lt;/p&gt;

&lt;p&gt;  Address Ted&apos;s comments.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java&lt;/p&gt;</comment>
                            <comment id="13193272" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 20:09:45 +0000"  >&lt;p&gt;Liyin updated the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;br/&gt;
Reviewers: Kannan, Karthik, mbautin&lt;/p&gt;

&lt;p&gt;  Address Ted&apos;s comments.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java&lt;/p&gt;</comment>
                            <comment id="13193287" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 20:23:40 +0000"  >&lt;p&gt;tedyu has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:89 I think reverseDNSCache is a good enough name.&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:202 Should NamingException be handled here ?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13193288" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 20:23:41 +0000"  >&lt;p&gt;tedyu has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:89 I think reverseDNSCache is a good enough name.&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:202 Should NamingException be handled here ?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13193289" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 20:23:42 +0000"  >&lt;p&gt;tedyu has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:89 I think reverseDNSCache is a good enough name.&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:202 Should NamingException be handled here ?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13193290" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 20:23:43 +0000"  >&lt;p&gt;tedyu has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:89 I think reverseDNSCache is a good enough name.&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:202 Should NamingException be handled here ?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194462" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 05:19:38 +0000"  >&lt;p&gt;Liyin updated the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;br/&gt;
Reviewers: Kannan, Karthik, mbautin&lt;/p&gt;

&lt;p&gt;  refactoring the code.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java&lt;/p&gt;</comment>
                            <comment id="13194463" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 05:19:40 +0000"  >&lt;p&gt;Liyin updated the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;br/&gt;
Reviewers: Kannan, Karthik, mbautin&lt;/p&gt;

&lt;p&gt;  refactoring the code.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java&lt;/p&gt;</comment>
                            <comment id="13194464" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 05:19:43 +0000"  >&lt;p&gt;Liyin updated the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;br/&gt;
Reviewers: Kannan, Karthik, mbautin&lt;/p&gt;

&lt;p&gt;  refactoring the code.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java&lt;/p&gt;</comment>
                            <comment id="13194465" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 05:19:49 +0000"  >&lt;p&gt;Liyin updated the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;br/&gt;
Reviewers: Kannan, Karthik, mbautin&lt;/p&gt;

&lt;p&gt;  refactoring the code.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java&lt;/p&gt;</comment>
                            <comment id="13194467" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 05:23:39 +0000"  >&lt;p&gt;tedyu has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:202 I think NamingException handling @ line 166 should be moved here.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194468" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 05:23:39 +0000"  >&lt;p&gt;tedyu has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:202 I think NamingException handling @ line 166 should be moved here.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194469" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 05:23:41 +0000"  >&lt;p&gt;tedyu has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:202 I think NamingException handling @ line 166 should be moved here.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194470" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 05:23:42 +0000"  >&lt;p&gt;tedyu has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:202 I think NamingException handling @ line 166 should be moved here.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194472" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 05:25:39 +0000"  >&lt;p&gt;Liyin has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:89 @tedyu, I prefer to name this variable as reverseDNSCacheMap. Do you have any specific reason to changing it to reverseDNSCache ?&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:198 @tedyu, This function is a wrapper function of DNS.reverseDNS which also provides caching as you suggest.&lt;br/&gt;
  However I believe this function is supposed to keep the same behavior as DNS.reverseDNS including throwing out NamingException.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194473" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 05:25:40 +0000"  >&lt;p&gt;Liyin has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:89 @tedyu, I prefer to name this variable as reverseDNSCacheMap. Do you have any specific reason to changing it to reverseDNSCache ?&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:198 @tedyu, This function is a wrapper function of DNS.reverseDNS which also provides caching as you suggest.&lt;br/&gt;
  However I believe this function is supposed to keep the same behavior as DNS.reverseDNS including throwing out NamingException.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194474" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 05:25:40 +0000"  >&lt;p&gt;Liyin has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:89 @tedyu, I prefer to name this variable as reverseDNSCacheMap. Do you have any specific reason to changing it to reverseDNSCache ?&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:198 @tedyu, This function is a wrapper function of DNS.reverseDNS which also provides caching as you suggest.&lt;br/&gt;
  However I believe this function is supposed to keep the same behavior as DNS.reverseDNS including throwing out NamingException.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194475" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 05:25:41 +0000"  >&lt;p&gt;Liyin has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:89 @tedyu, I prefer to name this variable as reverseDNSCacheMap. Do you have any specific reason to changing it to reverseDNSCache ?&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:198 @tedyu, This function is a wrapper function of DNS.reverseDNS which also provides caching as you suggest.&lt;br/&gt;
  However I believe this function is supposed to keep the same behavior as DNS.reverseDNS including throwing out NamingException.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194480" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 05:35:38 +0000"  >&lt;p&gt;Kannan has accepted the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;  Liyin &amp;#8211; looks good to me. One minor suggestion inlined.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:171 logging here is unnecessary because of logging in line 191. The &quot;split&quot; (TableSplit&apos;s toString() method already will print the regionLocation along with the start/stop keys for each map task.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194481" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 05:35:40 +0000"  >&lt;p&gt;Kannan has accepted the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;  Liyin &amp;#8211; looks good to me. One minor suggestion inlined.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:171 logging here is unnecessary because of logging in line 191. The &quot;split&quot; (TableSplit&apos;s toString() method already will print the regionLocation along with the start/stop keys for each map task.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194482" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 05:35:41 +0000"  >&lt;p&gt;Kannan has accepted the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;  Liyin &amp;#8211; looks good to me. One minor suggestion inlined.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:171 logging here is unnecessary because of logging in line 191. The &quot;split&quot; (TableSplit&apos;s toString() method already will print the regionLocation along with the start/stop keys for each map task.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194483" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 05:35:44 +0000"  >&lt;p&gt;Kannan has accepted the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;  Liyin &amp;#8211; looks good to me. One minor suggestion inlined.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:171 logging here is unnecessary because of logging in line 191. The &quot;split&quot; (TableSplit&apos;s toString() method already will print the regionLocation along with the start/stop keys for each map task.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194487" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 05:43:39 +0000"  >&lt;p&gt;tedyu has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:89 Map is reflected in the type of this field.&lt;br/&gt;
  My suggestion was only for your reference.&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:198 If NamingException is thrown out of line 201, line 202 would be skipped.&lt;br/&gt;
  Line 169 might be executed multiple times because regionServerAddress across multiple iterations may carry the same (unresolvable) value.&lt;/p&gt;

&lt;p&gt;  Correct me if I am wrong.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194489" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 05:43:41 +0000"  >&lt;p&gt;tedyu has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:89 Map is reflected in the type of this field.&lt;br/&gt;
  My suggestion was only for your reference.&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:198 If NamingException is thrown out of line 201, line 202 would be skipped.&lt;br/&gt;
  Line 169 might be executed multiple times because regionServerAddress across multiple iterations may carry the same (unresolvable) value.&lt;/p&gt;

&lt;p&gt;  Correct me if I am wrong.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194490" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 05:43:42 +0000"  >&lt;p&gt;tedyu has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:89 Map is reflected in the type of this field.&lt;br/&gt;
  My suggestion was only for your reference.&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:198 If NamingException is thrown out of line 201, line 202 would be skipped.&lt;br/&gt;
  Line 169 might be executed multiple times because regionServerAddress across multiple iterations may carry the same (unresolvable) value.&lt;/p&gt;

&lt;p&gt;  Correct me if I am wrong.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194491" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 05:43:43 +0000"  >&lt;p&gt;tedyu has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:89 Map is reflected in the type of this field.&lt;br/&gt;
  My suggestion was only for your reference.&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:198 If NamingException is thrown out of line 201, line 202 would be skipped.&lt;br/&gt;
  Line 169 might be executed multiple times because regionServerAddress across multiple iterations may carry the same (unresolvable) value.&lt;/p&gt;

&lt;p&gt;  Correct me if I am wrong.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194492" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 05:49:39 +0000"  >&lt;p&gt;Kannan has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:198 Ted: If you are trying to optimize for the performance of this error case which isn&apos;t supposed to happen, I don&apos;t think it is really worth it. Furthermore, the defaulting logic of falling back to the old style hostname is in the caller.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194493" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 05:49:40 +0000"  >&lt;p&gt;Kannan has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:198 Ted: If you are trying to optimize for the performance of this error case which isn&apos;t supposed to happen, I don&apos;t think it is really worth it. Furthermore, the defaulting logic of falling back to the old style hostname is in the caller.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194494" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 05:49:40 +0000"  >&lt;p&gt;Kannan has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:198 Ted: If you are trying to optimize for the performance of this error case which isn&apos;t supposed to happen, I don&apos;t think it is really worth it. Furthermore, the defaulting logic of falling back to the old style hostname is in the caller.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194495" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 05:49:41 +0000"  >&lt;p&gt;Kannan has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:198 Ted: If you are trying to optimize for the performance of this error case which isn&apos;t supposed to happen, I don&apos;t think it is really worth it. Furthermore, the defaulting logic of falling back to the old style hostname is in the caller.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194511" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 06:23:38 +0000"  >&lt;p&gt;gqchen has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:89 I guess this is more like a personal preference. For non-trivial data structures, I personally find it helpful to have the type in the variable name, so that when you read the code where the variable is being used, you don&apos;t have to guess.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194512" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 06:23:41 +0000"  >&lt;p&gt;gqchen has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:89 I guess this is more like a personal preference. For non-trivial data structures, I personally find it helpful to have the type in the variable name, so that when you read the code where the variable is being used, you don&apos;t have to guess.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194513" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 06:23:42 +0000"  >&lt;p&gt;gqchen has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:89 I guess this is more like a personal preference. For non-trivial data structures, I personally find it helpful to have the type in the variable name, so that when you read the code where the variable is being used, you don&apos;t have to guess.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194514" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 06:23:44 +0000"  >&lt;p&gt;gqchen has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:89 I guess this is more like a personal preference. For non-trivial data structures, I personally find it helpful to have the type in the variable name, so that when you read the code where the variable is being used, you don&apos;t have to guess.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194924" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 17:20:09 +0000"  >&lt;p&gt;tedyu has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:198 I am learning about the possibilities of reverse DNS failure:&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;http://www.crucialp.com/resources/tutorials/web-hosting/how-reverse-dns-works-rdns.php&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.crucialp.com/resources/tutorials/web-hosting/how-reverse-dns-works-rdns.php&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  I think we should be prepared for such occasion as I outlined @ 9:43pm.&lt;br/&gt;
  Just for your reference.&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:198 bq. this error case which isn&apos;t supposed to happen&lt;br/&gt;
  If I understand the statement correctly, you didn&apos;t say &apos;definitely not possible&apos;.&lt;/p&gt;

&lt;p&gt;  My earlier analysis w.r.t. NamingException shows that we would incur extra delay in case reverse DNS fails since the assignment on line 169 doesn&apos;t put the fall back value into cache.&lt;br/&gt;
  This can be regarded as performance regression compared to previous implementation where reverse DNS is not taken into account.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194926" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 17:22:08 +0000"  >&lt;p&gt;tedyu has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:198 I am learning about the possibilities of reverse DNS failure:&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;http://www.crucialp.com/resources/tutorials/web-hosting/how-reverse-dns-works-rdns.php&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.crucialp.com/resources/tutorials/web-hosting/how-reverse-dns-works-rdns.php&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  I think we should be prepared for such occasion as I outlined @ 9:43pm.&lt;br/&gt;
  Just for your reference.&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:198 bq. this error case which isn&apos;t supposed to happen&lt;br/&gt;
  If I understand the statement correctly, you didn&apos;t say &apos;definitely not possible&apos;.&lt;/p&gt;

&lt;p&gt;  My earlier analysis w.r.t. NamingException shows that we would incur extra delay in case reverse DNS fails since the assignment on line 169 doesn&apos;t put the fall back value into cache.&lt;br/&gt;
  This can be regarded as performance regression compared to previous implementation where reverse DNS is not taken into account.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194927" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 17:22:10 +0000"  >&lt;p&gt;tedyu has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:198 I am learning about the possibilities of reverse DNS failure:&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;http://www.crucialp.com/resources/tutorials/web-hosting/how-reverse-dns-works-rdns.php&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.crucialp.com/resources/tutorials/web-hosting/how-reverse-dns-works-rdns.php&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  I think we should be prepared for such occasion as I outlined @ 9:43pm.&lt;br/&gt;
  Just for your reference.&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:198 bq. this error case which isn&apos;t supposed to happen&lt;br/&gt;
  If I understand the statement correctly, you didn&apos;t say &apos;definitely not possible&apos;.&lt;/p&gt;

&lt;p&gt;  My earlier analysis w.r.t. NamingException shows that we would incur extra delay in case reverse DNS fails since the assignment on line 169 doesn&apos;t put the fall back value into cache.&lt;br/&gt;
  This can be regarded as performance regression compared to previous implementation where reverse DNS is not taken into account.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194928" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 17:22:10 +0000"  >&lt;p&gt;tedyu has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:198 I am learning about the possibilities of reverse DNS failure:&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;http://www.crucialp.com/resources/tutorials/web-hosting/how-reverse-dns-works-rdns.php&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.crucialp.com/resources/tutorials/web-hosting/how-reverse-dns-works-rdns.php&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  I think we should be prepared for such occasion as I outlined @ 9:43pm.&lt;br/&gt;
  Just for your reference.&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:198 bq. this error case which isn&apos;t supposed to happen&lt;br/&gt;
  If I understand the statement correctly, you didn&apos;t say &apos;definitely not possible&apos;.&lt;/p&gt;

&lt;p&gt;  My earlier analysis w.r.t. NamingException shows that we would incur extra delay in case reverse DNS fails since the assignment on line 169 doesn&apos;t put the fall back value into cache.&lt;br/&gt;
  This can be regarded as performance regression compared to previous implementation where reverse DNS is not taken into account.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194950" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 17:50:08 +0000"  >&lt;p&gt;Kannan has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;  typo:&lt;br/&gt;
  &amp;lt;&amp;lt;this error case which isn&apos;t supposed to happen&amp;gt;&amp;gt;&lt;br/&gt;
  I meant to say:&lt;br/&gt;
  &amp;lt;&amp;lt;this error case which isn&apos;t supposed to happen normally&amp;gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194951" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 17:50:09 +0000"  >&lt;p&gt;Kannan has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;  typo:&lt;br/&gt;
  &amp;lt;&amp;lt;this error case which isn&apos;t supposed to happen&amp;gt;&amp;gt;&lt;br/&gt;
  I meant to say:&lt;br/&gt;
  &amp;lt;&amp;lt;this error case which isn&apos;t supposed to happen normally&amp;gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194952" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 17:50:10 +0000"  >&lt;p&gt;Kannan has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;  typo:&lt;br/&gt;
  &amp;lt;&amp;lt;this error case which isn&apos;t supposed to happen&amp;gt;&amp;gt;&lt;br/&gt;
  I meant to say:&lt;br/&gt;
  &amp;lt;&amp;lt;this error case which isn&apos;t supposed to happen normally&amp;gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194953" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 17:50:11 +0000"  >&lt;p&gt;Kannan has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;  typo:&lt;br/&gt;
  &amp;lt;&amp;lt;this error case which isn&apos;t supposed to happen&amp;gt;&amp;gt;&lt;br/&gt;
  I meant to say:&lt;br/&gt;
  &amp;lt;&amp;lt;this error case which isn&apos;t supposed to happen normally&amp;gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194958" author="zhihyu@ebaysf.com" created="Fri, 27 Jan 2012 17:56:15 +0000"  >&lt;p&gt;Since each review comment results in 4 copies on the JIRA and 4 copies in each of email Inboxes, allow me to continue here.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;&amp;lt;&amp;lt;this error case which isn&apos;t supposed to happen normally&amp;gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I understand.&lt;br/&gt;
But we should be prepared for abnormal cases, right ?&lt;/p&gt;</comment>
                            <comment id="13194990" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 18:34:09 +0000"  >&lt;p&gt;Liyin has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:202 I don&apos;t think so. In your suggestion, you won&apos;t have a change to recovery from a transitent DNS look up failure, will you?&lt;/p&gt;

&lt;p&gt;  And also the reverseDNSCacheMap is sopposed to cache the DNS lookup result instead of caching other falt tolerant result.&lt;/p&gt;

&lt;p&gt;  In addition, If your DNS server has some failures, your task tracker and job tracker will be slow down as well.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194991" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 18:34:10 +0000"  >&lt;p&gt;Liyin has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:202 I don&apos;t think so. In your suggestion, you won&apos;t have a change to recovery from a transitent DNS look up failure, will you?&lt;/p&gt;

&lt;p&gt;  And also the reverseDNSCacheMap is sopposed to cache the DNS lookup result instead of caching other falt tolerant result.&lt;/p&gt;

&lt;p&gt;  In addition, If your DNS server has some failures, your task tracker and job tracker will be slow down as well.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194992" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 18:34:11 +0000"  >&lt;p&gt;Liyin has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:202 I don&apos;t think so. In your suggestion, you won&apos;t have a change to recovery from a transitent DNS look up failure, will you?&lt;/p&gt;

&lt;p&gt;  And also the reverseDNSCacheMap is sopposed to cache the DNS lookup result instead of caching other falt tolerant result.&lt;/p&gt;

&lt;p&gt;  In addition, If your DNS server has some failures, your task tracker and job tracker will be slow down as well.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194993" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 18:34:13 +0000"  >&lt;p&gt;Liyin has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java:202 I don&apos;t think so. In your suggestion, you won&apos;t have a change to recovery from a transitent DNS look up failure, will you?&lt;/p&gt;

&lt;p&gt;  And also the reverseDNSCacheMap is sopposed to cache the DNS lookup result instead of caching other falt tolerant result.&lt;/p&gt;

&lt;p&gt;  In addition, If your DNS server has some failures, your task tracker and job tracker will be slow down as well.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194999" author="zhihyu@ebaysf.com" created="Fri, 27 Jan 2012 18:40:54 +0000"  >&lt;blockquote&gt;&lt;p&gt;recovery from a transitent DNS look up failure&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Correction: I was talking about reverse DNS failure which is caused by loss of PTR record. This aspect is new due to the inclusion of reverse DNS lookup.&lt;/p&gt;</comment>
                            <comment id="13195061" author="liyin" created="Fri, 27 Jan 2012 20:12:11 +0000"  >&lt;p&gt;Hi Ted, &lt;br/&gt;
I totally understand your concern and appreciate your feedback.&lt;br/&gt;
It would be nice to fault tolerant all kinds of DNS server failures, which could be transient failures, loss of PTR or DNS service crash. The tradeoff is to select a most frequent happening failure case and try to tolerate it gracefully. In my perspective, for some large impact failures such as DNS server crash, sometimes it would be better to fire alarm and try to fix it as soon as possible. Also for minor impact failures, it would be great to recovery it naturally. For others, it would be fine to pay some cost. &lt;/p&gt;


&lt;p&gt;If you believe the loss of PTR record is the normal failure case in your systems, I would encourage to open a new jira to handle it properly across all the code base of HBase, DFS and MapReduce. I do believe we need a better fault tolerant policy across all these dependent components.&lt;/p&gt;</comment>
                            <comment id="13195153" author="zhihyu@ebaysf.com" created="Fri, 27 Jan 2012 22:22:16 +0000"  >&lt;p&gt;I agree that handling general DNS failure cases is outside the scope of this JIRA.&lt;/p&gt;</comment>
                            <comment id="13195183" author="hadoopqa" created="Fri, 27 Jan 2012 22:42:56 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12512226/HBASE-5259.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12512226/HBASE-5259.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -140 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 161 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.replication.TestReplication&lt;br/&gt;
                  org.apache.hadoop.hbase.io.hfile.TestHFileBlock&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestImportTsv&lt;br/&gt;
                  org.apache.hadoop.hbase.mapred.TestTableMapReduce&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/859//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/859//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/859//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/859//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/859//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/859//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13195311" author="zhihyu@ebaysf.com" created="Sat, 28 Jan 2012 01:02:20 +0000"  >&lt;p&gt;@Liyin:&lt;br/&gt;
There is also src/main/java/org/apache/hadoop/hbase/mapred/TableInputFormatBase.java&lt;/p&gt;

&lt;p&gt;I guess similar change is applicable there ?&lt;/p&gt;</comment>
                            <comment id="13195345" author="liyin" created="Sat, 28 Jan 2012 02:00:44 +0000"  >&lt;p&gt;Has that package been deprecated ?&lt;br/&gt;
Two similar packages look confusing to me.&lt;/p&gt;</comment>
                            <comment id="13195355" author="zhihyu@ebaysf.com" created="Sat, 28 Jan 2012 02:18:33 +0000"  >&lt;p&gt;Even in hadoop, mapred has been un-deprecated.&lt;br/&gt;
I assume there&apos;re users who are dependent on mapred/TableInputFormatBase.java&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="13195360" author="liyin" created="Sat, 28 Jan 2012 02:28:39 +0000"  >&lt;p&gt;I see. I will generate another patch including /mapred.&lt;br/&gt;
Thanks Ted.&lt;/p&gt;</comment>
                            <comment id="13196315" author="liyin" created="Mon, 30 Jan 2012 19:00:40 +0000"  >&lt;p&gt;@Ted, the TableInputFormatBase in the mapred package has already Deprecated as the code marked. No need to update the patch.&lt;/p&gt;

&lt;p&gt;@Deprecated&lt;br/&gt;
public abstract class TableInputFormatBase {}&lt;/p&gt;</comment>
                            <comment id="13196330" author="zhihyu@ebaysf.com" created="Mon, 30 Jan 2012 19:09:43 +0000"  >&lt;p&gt;Changing TableInputFormatBase in mapreduce should be good enough.&lt;/p&gt;</comment>
                            <comment id="13197162" author="zhihyu@ebaysf.com" created="Tue, 31 Jan 2012 19:53:31 +0000"  >&lt;p&gt;Integrated to TRUNK.&lt;/p&gt;

&lt;p&gt;Thanks for the patch, Liyin.&lt;/p&gt;

&lt;p&gt;Thanks for the review Kannan and Jerry.&lt;/p&gt;</comment>
                            <comment id="13197508" author="hudson" created="Wed, 1 Feb 2012 02:08:51 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2649 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2649/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2649/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup (Liyin Tang)&lt;/p&gt;

&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13209155" author="phabricator@reviews.facebook.net" created="Thu, 16 Feb 2012 06:52:57 +0000"  >&lt;p&gt;mbautin has committed the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMIT&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHBASEEIGHTNINEFBBRANCH1239892&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHBASEEIGHTNINEFBBRANCH1239892&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13209164" author="phabricator@reviews.facebook.net" created="Thu, 16 Feb 2012 06:53:03 +0000"  >&lt;p&gt;mbautin has committed the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMIT&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHBASEEIGHTNINEFBBRANCH1239892&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHBASEEIGHTNINEFBBRANCH1239892&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13209169" author="phabricator@reviews.facebook.net" created="Thu, 16 Feb 2012 06:53:06 +0000"  >&lt;p&gt;mbautin has committed the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMIT&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHBASEEIGHTNINEFBBRANCH1239892&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHBASEEIGHTNINEFBBRANCH1239892&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13209175" author="phabricator@reviews.facebook.net" created="Thu, 16 Feb 2012 06:53:11 +0000"  >&lt;p&gt;mbautin has committed the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5259&quot; title=&quot;Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5259&quot;&gt;&lt;del&gt;HBASE-5259&lt;/del&gt;&lt;/a&gt; Normalize the RegionLocation in TableInputFormat by the reverse DNS lookup.&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1413&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1413&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMIT&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHBASEEIGHTNINEFBBRANCH1239892&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHBASEEIGHTNINEFBBRANCH1239892&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12511777" name="ASF.LICENSE.NOT.GRANTED--D1413.1.patch" size="2623" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 01:36:48 +0000"/>
                            <attachment id="12511776" name="ASF.LICENSE.NOT.GRANTED--D1413.1.patch" size="2623" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 01:36:44 +0000"/>
                            <attachment id="12511775" name="ASF.LICENSE.NOT.GRANTED--D1413.1.patch" size="2623" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 01:36:41 +0000"/>
                            <attachment id="12511774" name="ASF.LICENSE.NOT.GRANTED--D1413.1.patch" size="2623" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 01:36:39 +0000"/>
                            <attachment id="12511877" name="ASF.LICENSE.NOT.GRANTED--D1413.2.patch" size="3935" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 20:09:46 +0000"/>
                            <attachment id="12511876" name="ASF.LICENSE.NOT.GRANTED--D1413.2.patch" size="3935" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 20:09:43 +0000"/>
                            <attachment id="12511875" name="ASF.LICENSE.NOT.GRANTED--D1413.2.patch" size="3935" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 20:09:41 +0000"/>
                            <attachment id="12511874" name="ASF.LICENSE.NOT.GRANTED--D1413.2.patch" size="3935" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 20:09:39 +0000"/>
                            <attachment id="12512082" name="ASF.LICENSE.NOT.GRANTED--D1413.3.patch" size="3886" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 05:19:51 +0000"/>
                            <attachment id="12512081" name="ASF.LICENSE.NOT.GRANTED--D1413.3.patch" size="3886" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 05:19:45 +0000"/>
                            <attachment id="12512080" name="ASF.LICENSE.NOT.GRANTED--D1413.3.patch" size="3886" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 05:19:41 +0000"/>
                            <attachment id="12512079" name="ASF.LICENSE.NOT.GRANTED--D1413.3.patch" size="3886" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 05:19:39 +0000"/>
                            <attachment id="12512226" name="HBASE-5259.patch" size="4453" author="liyin" created="Fri, 27 Jan 2012 20:17:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>13.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 25 Jan 2012 01:36:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>225010</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 44 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i016cf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4797</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>