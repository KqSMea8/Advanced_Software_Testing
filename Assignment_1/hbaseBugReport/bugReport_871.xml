<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:48:18 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-871/HBASE-871.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-871] Major compaction periodicity should be specifyable at the column family level, not cluster wide</title>
                <link>https://issues.apache.org/jira/browse/HBASE-871</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;jon gray has a table of ten rows and a couple of columns that is constantly being updated.  Has max versions of 2.  This table is growing fast because all versions written are kept until a major compaction.  The way this table is being used is different than that of others.  Would be good if he could have major compactions run more often than the default once a day.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12403717">HBASE-871</key>
            <summary>Major compaction periodicity should be specifyable at the column family level, not cluster wide</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="streamy">Jonathan Gray</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Sep 2008 21:40:49 +0000</created>
                <updated>Sat, 13 Sep 2008 23:22:48 +0000</updated>
                            <resolved>Sun, 7 Sep 2008 22:17:18 +0000</resolved>
                                    <version>0.2.1</version>
                    <version>0.18.0</version>
                                    <fixVersion>0.2.1</fixVersion>
                    <fixVersion>0.18.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12628490" author="stack" created="Thu, 4 Sep 2008 22:27:21 +0000"  >&lt;p&gt;A patch should do like the following. &lt;/p&gt;

&lt;p&gt;In the HStore constructor, it does this to get the major compaction time:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.majorCompactionTime = conf.getLong(&lt;span class=&quot;code-quote&quot;&gt;&quot;hbase.hregion.majorcompaction&quot;&lt;/span&gt;, 86400000);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Just below it, it does this to get the config. for compression from HCD:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
family.getCompression()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;d think you&apos;d do something like:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
family.getValue(&lt;span class=&quot;code-quote&quot;&gt;&quot;hbase.hregion.majorcompaction&quot;&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;... if it came back null, you&apos;d use the default.  Otherwise, use its value.&lt;/p&gt;

&lt;p&gt;Add a define to HConstants for &quot;hbase.hregion.majorcompaction&quot; to make your life easier.&lt;/p&gt;

&lt;p&gt;That takes care of the reading.&lt;/p&gt;

&lt;p&gt;For setting it, the addtion to HConstants will help.  See the head of bin/HBase.rb.  See how we define constants there, constants that can then be used specifying stuff in the shell..&lt;/p&gt;</comment>
                            <comment id="12628689" author="streamy" created="Fri, 5 Sep 2008 18:19:53 +0000"  >&lt;p&gt;Per stacks recommendations, this patch just adds a check in HStore to see if a MAJOR_COMPACTION_PERIOD / hbase.hregion.majorcompaction was set for the family, and sets it if so.  Otherwise it remains at the default.&lt;/p&gt;

&lt;p&gt;Also added MAJOR_COMPACTION_PERIOD to HConstants =&amp;gt; &quot;hbase.hregion.majorcompaction&quot;&lt;/p&gt;</comment>
                            <comment id="12628690" author="streamy" created="Fri, 5 Sep 2008 18:21:52 +0000"  >&lt;p&gt;Confirmed that patch applies to 0.2 branch and trunk&lt;/p&gt;</comment>
                            <comment id="12628697" author="streamy" created="Fri, 5 Sep 2008 18:45:55 +0000"  >&lt;p&gt;Previous patch did not compile.&lt;/p&gt;

&lt;p&gt;HCD.getValue/setValue works only with Strings/byte[] so we must store period as String representation of long and do conversion when we fetch.&lt;/p&gt;

&lt;p&gt;Could also add getLong/setLong to HCD but this will suffice for me.&lt;/p&gt;</comment>
                            <comment id="12628713" author="stack" created="Fri, 5 Sep 2008 19:58:02 +0000"  >&lt;p&gt;Suggest that this piece of your patch...&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (family.getValue(MAJOR_COMPACTION_PERIOD) != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
      &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; strCompactionTime = family.getValue(HConstants.MAJOR_COMPACTION_PERIOD);
      &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.majorCompactionTime = (&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;(strCompactionTime)).longValue();
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;... go in under this line of code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.majorCompactionTime = conf.getLong(&lt;span class=&quot;code-quote&quot;&gt;&quot;hbase.hregion.majorcompaction&quot;&lt;/span&gt;, 86400000);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Also, use the new define in the line above now you&apos;ve added it to HConstants.&lt;/p&gt;

&lt;p&gt;We need to change the shell so you can pass arbitrary key/values to HCD and HTD but let that be another issue, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-873&quot; title=&quot;Add getting/setting arbitrary key/value in HColumnDescriptor and HTableDescriptor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-873&quot;&gt;&lt;del&gt;HBASE-873&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12628738" author="streamy" created="Fri, 5 Sep 2008 20:41:00 +0000"  >&lt;p&gt;Fixes described by stack&lt;/p&gt;</comment>
                            <comment id="12629015" author="stack" created="Sun, 7 Sep 2008 22:17:18 +0000"  >&lt;p&gt;Applied trunk and branch.  Thanks for patch Jon&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12401847">HBASE-800</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12389575" name="hbase-871-v1.patch" size="1383" author="streamy" created="Fri, 5 Sep 2008 18:19:53 +0000"/>
                            <attachment id="12389578" name="hbase-871-v2.patch" size="1471" author="streamy" created="Fri, 5 Sep 2008 18:45:55 +0000"/>
                            <attachment id="12389586" name="hbase-871-v3.patch" size="1614" author="streamy" created="Fri, 5 Sep 2008 20:41:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 5 Sep 2008 18:19:53 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25451</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 15 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h9yn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98876</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>