<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:06:57 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-3052/HBASE-3052.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-3052] Add ability to have multiple ZK servers in a quorum in MiniZooKeeperCluster for test writing</title>
                <link>https://issues.apache.org/jira/browse/HBASE-3052</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Interesting things can happen when you have a ZK quorum of multiple servers and one of them dies.  Doing testing here on clusters, this has turned up some bugs with HBase interaction with ZK.&lt;/p&gt;

&lt;p&gt;Would be good to add the ability to have multiple ZK servers in unit tests and be able to kill them individually.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12475457">HBASE-3052</key>
            <summary>Add ability to have multiple ZK servers in a quorum in MiniZooKeeperCluster for test writing</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="liyin">Liyin Tang</assignee>
                                    <reporter username="streamy">Jonathan Gray</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Sep 2010 23:19:20 +0000</created>
                <updated>Fri, 25 Mar 2011 23:10:30 +0000</updated>
                            <resolved>Mon, 21 Mar 2011 22:49:06 +0000</resolved>
                                                                    <component>test</component>
                    <component>Zookeeper</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12924033" author="stack" created="Fri, 22 Oct 2010 21:20:43 +0000"  >&lt;p&gt;hurray!!!  Nitay is back!!!&lt;/p&gt;</comment>
                            <comment id="13009446" author="liyin" created="Mon, 21 Mar 2011 22:24:22 +0000"  >&lt;p&gt;This is my HBase Hackthon project.&lt;br/&gt;
Now the MiniZooKeeperCluster can have multiple ZK servers. And the client can kill the current ZK and start another candiate ZK. &lt;/p&gt;</comment>
                            <comment id="13009452" author="stack" created="Mon, 21 Mar 2011 22:31:00 +0000"  >&lt;p&gt;Made you a contributor Liyin and assigned you the issue.&lt;/p&gt;</comment>
                            <comment id="13009454" author="streamy" created="Mon, 21 Mar 2011 22:34:20 +0000"  >&lt;p&gt;Patch is looking good but I&apos;m confused by a few things.&lt;/p&gt;

&lt;p&gt;Are you starting all the servers at the beginning?  Or do the ZK servers only actually start/run once you kill another one?&lt;/p&gt;

&lt;p&gt;The idea for this is to create a ZK quorum of servers and then be able to kill individual ones.  Ideally, we&apos;d also be able to specifically kill whichever server is the quorum leader.&lt;/p&gt;

&lt;p&gt;Also, I&apos;m unclear on the meaning of &quot;candidate&quot; in this context.  Is the candidate server the &quot;active&quot; server?  Does that mean it&apos;s online?  Maybe change the name or at least add some javadoc explaining what exactly is happening.&lt;/p&gt;</comment>
                            <comment id="13009458" author="stack" created="Mon, 21 Mar 2011 22:49:06 +0000"  >&lt;p&gt;Applied to TRUNK.  Thank you for the patch Liyin.&lt;/p&gt;</comment>
                            <comment id="13009460" author="liyin" created="Mon, 21 Mar 2011 23:02:15 +0000"  >&lt;p&gt;Yes, the candiate is ambiguous,I should change to backupZooKeeperServers.&lt;br/&gt;
right now, there is only one active ZK running.&lt;br/&gt;
It sounds like I need to make all of ZK servers running together at beginning &lt;br/&gt;
and the client can kill anyone of them. &lt;/p&gt;

&lt;p&gt;Is it true that there is still only one of ZK server is active ?&lt;/p&gt;

&lt;p&gt;Thanks &lt;/p&gt;</comment>
                            <comment id="13009487" author="liyin" created="Tue, 22 Mar 2011 00:25:57 +0000"  >&lt;p&gt;I attached a new patch: HBASE_3052&lt;span class=&quot;error&quot;&gt;&amp;#91;r1084033&amp;#93;&lt;/span&gt;.patch here.&lt;/p&gt;

&lt;p&gt;In this patch, the miniZKCluster will start to run multiple ZK servers together. One of them is the current active one, others are the backup ZK servers.&lt;/p&gt;

&lt;p&gt;So the client can killCurrentActiveZooKeeperServer or killOneBackupZooKeeperServer.&lt;/p&gt;

&lt;p&gt;When calling killCurrentActiveZooKeeperServer, it will return next available backup ZooKeeper servers to client. If no more backups, return -1;&lt;/p&gt;

&lt;p&gt;When calling killOneBackupZooKeeperServer, it will kill one backup if there are backups.&lt;/p&gt;


</comment>
                            <comment id="13009962" author="hudson" created="Wed, 23 Mar 2011 01:44:13 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #1803 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/HBase-TRUNK/1803/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/HBase-TRUNK/1803/&lt;/a&gt;)&lt;/p&gt;
</comment>
                            <comment id="13010999" author="stack" created="Thu, 24 Mar 2011 23:21:52 +0000"  >&lt;p&gt;Committed to TRUNK.  Thanks for the patch Liyin&lt;/p&gt;</comment>
                            <comment id="13011042" author="liyin" created="Fri, 25 Mar 2011 00:31:16 +0000"  >&lt;p&gt;Actually, this task is not completed. &lt;br/&gt;
The patch I submitted is too simple. &lt;br/&gt;
I should keep multiple zookeeper servers running in the minZK cluster at the same.&lt;br/&gt;
And any one of them can be killed.&lt;/p&gt;

&lt;p&gt;I will keep working on this&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
Liyin&lt;/p&gt;</comment>
                            <comment id="13011070" author="streamy" created="Fri, 25 Mar 2011 02:11:54 +0000"  >&lt;p&gt;How the heck do you re-open a task on this new jira? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13011086" author="stack" created="Fri, 25 Mar 2011 03:48:44 +0000"  >&lt;p&gt;@Jon I think Closed means done.  We should open a new issue.  I promise not to commit it!&lt;/p&gt;</comment>
                            <comment id="13011494" author="hudson" created="Fri, 25 Mar 2011 23:10:30 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #1814 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/HBase-TRUNK/1814/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/HBase-TRUNK/1814/&lt;/a&gt;)&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12474242" name="HBASE_3052[r1083993].patch" size="8903" author="liyin" created="Mon, 21 Mar 2011 22:24:22 +0000"/>
                            <attachment id="12474251" name="HBASE_3052[r1084033].patch" size="14053" author="liyin" created="Tue, 22 Mar 2011 00:25:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 22 Oct 2010 21:20:43 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32887</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 38 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hkin:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>100586</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>