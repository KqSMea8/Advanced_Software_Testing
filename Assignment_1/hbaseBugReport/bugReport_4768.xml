<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:21:51 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-4768/HBASE-4768.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-4768] Per-(table, columnFamily) metrics with configurable table name inclusion</title>
                <link>https://issues.apache.org/jira/browse/HBASE-4768</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;As we kept adding more granular block read and block cache usage statistics, a combinatorial explosion of various cases to monitor started to happen, especially when we wanted both per-table/column family/block type statistics and aggregate statistics on various subsets of these dimensions. Here, we un-clutters HFile readers, LruBlockCache, StoreFile, etc. by creating a centralized class that knows how to update all kinds of per-table/CF/block type counters. &lt;/p&gt;

&lt;p&gt;Table name and column family configuration have been pushed to a base class, SchemaConfigured. This is convenient as many of existing classes that have these properties (HFile readers/writers, HFile blocks, etc.) did not have a base class. Whether to collect per-(table, columnFamily) or per-columnFamily only metrics can be configured with the hbase.metrics.showTableName configuration key. We don&apos;t expect this configuration to change at runtime, so we cache the setting statically and log a warning when an attempt is made to flip it once already set. This way we don&apos;t have to pass configuration to a lot more places, e.g. everywhere an HFile reader is instantiated.&lt;/p&gt;

&lt;p&gt;Thanks to Liyin for his initial version of per-table metrics patch and a lot of valuable feedback.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12530972">HBASE-4768</key>
            <summary>Per-(table, columnFamily) metrics with configurable table name inclusion</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mikhail">Mikhail Bautin</assignee>
                                    <reporter username="mikhail">Mikhail Bautin</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Nov 2011 08:50:06 +0000</created>
                <updated>Fri, 12 Oct 2012 05:34:59 +0000</updated>
                            <resolved>Wed, 16 Nov 2011 15:05:33 +0000</resolved>
                                                    <fixVersion>0.94.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13147965" author="phabricator@reviews.facebook.net" created="Thu, 10 Nov 2011 19:49:52 +0000"  >&lt;p&gt;mbautin requested code review of &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4768&quot; title=&quot;Per-(table, columnFamily) metrics with configurable table name inclusion&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4768&quot;&gt;&lt;del&gt;HBASE-4768&lt;/del&gt;&lt;/a&gt; Per-(table, columnFamily) metrics with configurable table name inclusion&quot;.&lt;br/&gt;
Reviewers: jgray, nspiegelberg, stack, tedyu, todd, JIRA&lt;/p&gt;

&lt;p&gt;  This is an initial version of an HBase trunk diff for per-table/CF metrics (see JIRA for details). Unit tests mostly pass &amp;#8211; need to look into TestDistributedLogSplitting. Also still doing cluster testing.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  Unit tests, single-node cluster, dev cluster. Need to try bulk-load map-reduce jobs as well. Observe metrics through JMX.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D363&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D363&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/AbstractHFileReader.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/AbstractHFileWriter.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/BlockType.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/Cacheable.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFile.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlock.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlockIndex.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlockInfo.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileReaderV1.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileReaderV2.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileWriterV1.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileWriterV2.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/LruBlockCache.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/Store.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/StoreFile.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/metrics/SchemaConfigured.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/metrics/SchemaMetrics.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/hfile/CacheTestUtils.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/hfile/TestCachedBlockQueue.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFile.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFileBlock.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFileReaderV1.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/hfile/TestLruBlockCache.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/TestMultiColumnScanner.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionServerMetrics.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/TestStoreFile.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/metrics/TestSchemaConfigured.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/metrics/TestSchemaMetrics.java&lt;/p&gt;</comment>
                            <comment id="13148103" author="phabricator@reviews.facebook.net" created="Thu, 10 Nov 2011 23:25:51 +0000"  >&lt;p&gt;Liyin has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4768&quot; title=&quot;Per-(table, columnFamily) metrics with configurable table name inclusion&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4768&quot;&gt;&lt;del&gt;HBASE-4768&lt;/del&gt;&lt;/a&gt; Per-(table, columnFamily) metrics with configurable table name inclusion&quot;.&lt;/p&gt;

&lt;p&gt;  Yes, I have reviewed this diff internally and this looks good to me.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D363&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D363&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13148941" author="phabricator@reviews.facebook.net" created="Sat, 12 Nov 2011 02:14:51 +0000"  >&lt;p&gt;mbautin updated the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4768&quot; title=&quot;Per-(table, columnFamily) metrics with configurable table name inclusion&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4768&quot;&gt;&lt;del&gt;HBASE-4768&lt;/del&gt;&lt;/a&gt; Per-(table, columnFamily) metrics with configurable table name inclusion&quot;.&lt;br/&gt;
Reviewers: jgray, nspiegelberg, stack, tedyu, todd, JIRA&lt;/p&gt;

&lt;p&gt;  Addressing Nicolas&apos;s comments and removing two unused fields.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D363&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D363&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/AbstractHFileReader.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/AbstractHFileWriter.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/BlockType.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/Cacheable.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFile.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlock.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlockIndex.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlockInfo.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileReaderV1.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileReaderV2.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileWriterV1.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileWriterV2.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/LruBlockCache.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/Store.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/StoreFile.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/metrics/SchemaConfigured.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/metrics/SchemaMetrics.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/hfile/CacheTestUtils.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/hfile/TestCachedBlockQueue.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFile.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFileBlock.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFileReaderV1.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/hfile/TestLruBlockCache.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/TestMultiColumnScanner.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionServerMetrics.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/TestStoreFile.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/metrics/TestSchemaConfigured.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/metrics/TestSchemaMetrics.java&lt;/p&gt;</comment>
                            <comment id="13149026" author="phabricator@reviews.facebook.net" created="Sat, 12 Nov 2011 09:46:51 +0000"  >&lt;p&gt;mbautin updated the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4768&quot; title=&quot;Per-(table, columnFamily) metrics with configurable table name inclusion&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4768&quot;&gt;&lt;del&gt;HBASE-4768&lt;/del&gt;&lt;/a&gt; Per-(table, columnFamily) metrics with configurable table name inclusion&quot;.&lt;br/&gt;
Reviewers: jgray, nspiegelberg, stack, tedyu, todd, JIRA&lt;/p&gt;

&lt;p&gt;  During cluster testing I found a mysterious column family name &quot;.tmp&quot;. It turns out that with cache-on-write the &quot;.tmp&quot; directory name was erroneously picked up as column family. Fixing this by setting table name and column family name from Store for temporary StoreFiles.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D363&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D363&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/AbstractHFileReader.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/AbstractHFileWriter.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/BlockType.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/Cacheable.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFile.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlock.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlockIndex.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlockInfo.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileReaderV1.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileReaderV2.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileWriterV1.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileWriterV2.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/LruBlockCache.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/Store.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/StoreFile.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/metrics/SchemaConfigured.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/metrics/SchemaMetrics.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/hfile/CacheTestUtils.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/hfile/TestCachedBlockQueue.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFile.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFileBlock.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFileReaderV1.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/hfile/TestLruBlockCache.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/TestMultiColumnScanner.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionServerMetrics.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/TestStoreFile.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/metrics/TestSchemaConfigured.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/metrics/TestSchemaMetrics.java&lt;/p&gt;</comment>
                            <comment id="13149085" author="phabricator@reviews.facebook.net" created="Sat, 12 Nov 2011 14:52:51 +0000"  >&lt;p&gt;tedyu has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4768&quot; title=&quot;Per-(table, columnFamily) metrics with configurable table name inclusion&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4768&quot;&gt;&lt;del&gt;HBASE-4768&lt;/del&gt;&lt;/a&gt; Per-(table, columnFamily) metrics with configurable table name inclusion&quot;.&lt;/p&gt;

&lt;p&gt;  Nice work.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/metrics/SchemaConfigured.java:2 Year isn&apos;t needed.&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/metrics/SchemaConfigured.java:43 The class should be SchemaConfigured.&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/metrics/SchemaConfigured.java:37 Should read &apos;can be associated with table&apos;&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/metrics/SchemaConfigured.java:89 We shouldn&apos;t say HFile path because the path is too shallow, right ?&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/metrics/SchemaConfigured.java:153 Since either tableName or cfName may not be null, should we include them in the exception message ?&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/metrics/SchemaConfigured.java:166 Would passSchemaMetricsTo() be a better name for this method ?&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/metrics/SchemaMetrics.java:170 I didn&apos;t find reference to this constant in the patch.&lt;br/&gt;
  From its format, it doesn&apos;t look like a prefix (no trailing .).&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D363&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D363&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13149232" author="phabricator@reviews.facebook.net" created="Sun, 13 Nov 2011 06:27:51 +0000"  >&lt;p&gt;mbautin has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4768&quot; title=&quot;Per-(table, columnFamily) metrics with configurable table name inclusion&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4768&quot;&gt;&lt;del&gt;HBASE-4768&lt;/del&gt;&lt;/a&gt; Per-(table, columnFamily) metrics with configurable table name inclusion&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/metrics/SchemaConfigured.java:2 FYI, &quot;no year in copyright message&quot; is the least frequent option in the current codebase, but since it doesn&apos;t really matter, I can remove the year.&lt;/p&gt;

&lt;p&gt;      854 Copyright 2010 The Apache Software Foundation&lt;br/&gt;
      360 Copyright 2011 The Apache Software Foundation&lt;br/&gt;
      158 Copyright 2009 The Apache Software Foundation&lt;br/&gt;
      108 Copyright 2007 The Apache Software Foundation&lt;br/&gt;
       40 Copyright 2008 The Apache Software Foundation&lt;br/&gt;
        6 Copyright The Apache Software Foundation&lt;/p&gt;


&lt;p&gt;  src/main/java/org/apache/hadoop/hbase/regionserver/metrics/SchemaConfigured.java:37 Fixed.&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/metrics/SchemaConfigured.java:43 Fixed.&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/metrics/SchemaConfigured.java:89 Replaced with:&lt;/p&gt;

&lt;p&gt;          LOG.warn(&quot;Could not determine table and column family of the HFile &quot;&lt;br/&gt;
              + &quot;path &quot; + path + &quot;. Expecting at least &quot;&lt;br/&gt;
              + HFile.MIN_NUM_HFILE_PATH_LEVELS + &quot; path components.&quot;);&lt;/p&gt;

&lt;p&gt;  src/main/java/org/apache/hadoop/hbase/regionserver/metrics/SchemaMetrics.java:170 Good catch. These are actually used in some metrics in hbase-89 that are not yet ported to trunk. Removing them from this patch.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D363&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D363&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13149245" author="phabricator@reviews.facebook.net" created="Sun, 13 Nov 2011 07:45:56 +0000"  >&lt;p&gt;mbautin updated the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4768&quot; title=&quot;Per-(table, columnFamily) metrics with configurable table name inclusion&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4768&quot;&gt;&lt;del&gt;HBASE-4768&lt;/del&gt;&lt;/a&gt; Per-(table, columnFamily) metrics with configurable table name inclusion&quot;.&lt;br/&gt;
Reviewers: jgray, nspiegelberg, stack, tedyu, todd, JIRA&lt;/p&gt;

&lt;p&gt;  Addressing Ted&apos;s comments. All unit tests passed.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D363&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D363&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/AbstractHFileReader.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/AbstractHFileWriter.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/BlockType.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/Cacheable.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFile.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlock.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlockIndex.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlockInfo.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileReaderV1.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileReaderV2.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileWriterV1.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileWriterV2.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/LruBlockCache.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/Store.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/StoreFile.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/metrics/SchemaConfigured.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/metrics/SchemaMetrics.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/hfile/CacheTestUtils.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/hfile/TestCachedBlockQueue.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFile.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFileBlock.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFileReaderV1.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/hfile/TestLruBlockCache.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/TestMultiColumnScanner.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionServerMetrics.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/TestStoreFile.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/metrics/TestSchemaConfigured.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/metrics/TestSchemaMetrics.java&lt;/p&gt;</comment>
                            <comment id="13150119" author="hadoopqa" created="Tue, 15 Nov 2011 00:44:36 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12503521/D363.4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12503521/D363.4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 37 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -163 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 51 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.io.hfile.TestHFileBlock&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/246//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/246//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/246//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/246//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/246//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/246//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13150150" author="phabricator@reviews.facebook.net" created="Tue, 15 Nov 2011 01:21:51 +0000"  >&lt;p&gt;nspiegelberg has accepted the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4768&quot; title=&quot;Per-(table, columnFamily) metrics with configurable table name inclusion&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4768&quot;&gt;&lt;del&gt;HBASE-4768&lt;/del&gt;&lt;/a&gt; Per-(table, columnFamily) metrics with configurable table name inclusion&quot;.&lt;/p&gt;

&lt;p&gt;  lgtm&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D363&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D363&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13150151" author="phabricator@reviews.facebook.net" created="Tue, 15 Nov 2011 01:21:52 +0000"  >&lt;p&gt;mbautin updated the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4768&quot; title=&quot;Per-(table, columnFamily) metrics with configurable table name inclusion&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4768&quot;&gt;&lt;del&gt;HBASE-4768&lt;/del&gt;&lt;/a&gt; Per-(table, columnFamily) metrics with configurable table name inclusion&quot;.&lt;br/&gt;
Reviewers: jgray, nspiegelberg, stack, tedyu, todd, JIRA&lt;/p&gt;

&lt;p&gt;  Rebasing on most recent change from trunk.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D363&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D363&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/AbstractHFileReader.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/AbstractHFileWriter.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/BlockType.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/Cacheable.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFile.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlock.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlockIndex.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlockInfo.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileReaderV1.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileReaderV2.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileWriterV1.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileWriterV2.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/LruBlockCache.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/Store.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/StoreFile.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/metrics/SchemaConfigured.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/metrics/SchemaMetrics.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/hfile/CacheTestUtils.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/hfile/TestCachedBlockQueue.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFile.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFileBlock.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFileReaderV1.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/hfile/TestLruBlockCache.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/TestMultiColumnScanner.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionServerMetrics.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/TestStoreFile.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/metrics/TestSchemaConfigured.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/metrics/TestSchemaMetrics.java&lt;/p&gt;</comment>
                            <comment id="13150154" author="phabricator@reviews.facebook.net" created="Tue, 15 Nov 2011 01:28:51 +0000"  >&lt;p&gt;mbautin has committed the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4768&quot; title=&quot;Per-(table, columnFamily) metrics with configurable table name inclusion&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4768&quot;&gt;&lt;del&gt;HBASE-4768&lt;/del&gt;&lt;/a&gt; Per-(table, columnFamily) metrics with configurable table name inclusion&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D363&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D363&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMIT&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHBASE1201994&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHBASE1201994&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13150241" author="hudson" created="Tue, 15 Nov 2011 05:14:51 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2439 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2439/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2439/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4768&quot; title=&quot;Per-(table, columnFamily) metrics with configurable table name inclusion&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4768&quot;&gt;&lt;del&gt;HBASE-4768&lt;/del&gt;&lt;/a&gt; Per-(table, columnFamily) metrics with configurable table name inclusion&lt;/p&gt;

&lt;p&gt;Summary: This is an initial version of an HBase trunk diff for per-table/CF&lt;br/&gt;
metrics (see JIRA for details). Unit tests mostly pass &amp;#8211; need to look into&lt;br/&gt;
TestDistributedLogSplitting. Also still doing cluster testing.&lt;/p&gt;

&lt;p&gt;Test Plan: Unit tests, single-node cluster, dev cluster. Need to try bulk-load&lt;br/&gt;
map-reduce jobs as well. Observe metrics through JMX.&lt;/p&gt;

&lt;p&gt;Reviewers: jgray, nspiegelberg, stack, tedyu, todd, JIRA&lt;/p&gt;

&lt;p&gt;Reviewed By: nspiegelberg&lt;/p&gt;

&lt;p&gt;CC: nspiegelberg, Liyin, mbautin, tedyu&lt;/p&gt;

&lt;p&gt;Differential Revision: 363&lt;/p&gt;

&lt;p&gt;nspiegelberg : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/io/hfile/AbstractHFileReader.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/io/hfile/AbstractHFileWriter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/io/hfile/BlockType.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/io/hfile/Cacheable.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/io/hfile/HFile.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlock.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlockIndex.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlockInfo.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileReaderV1.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileReaderV2.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileWriterV1.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileWriterV2.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/io/hfile/LruBlockCache.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/Store.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/StoreFile.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/metrics/SchemaConfigured.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/metrics/SchemaMetrics.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/io/hfile/CacheTestUtils.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/io/hfile/TestCachedBlockQueue.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFile.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFileBlock.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFileReaderV1.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/io/hfile/TestLruBlockCache.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/regionserver/TestMultiColumnScanner.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionServerMetrics.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/regionserver/TestStoreFile.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/regionserver/metrics&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/regionserver/metrics/TestSchemaConfigured.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/regionserver/metrics/TestSchemaMetrics.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13150662" author="yuzhihong@gmail.com" created="Tue, 15 Nov 2011 18:29:50 +0000"  >&lt;p&gt;TestHFileBlock fails on Jenkins.&lt;/p&gt;</comment>
                            <comment id="13150664" author="yuzhihong@gmail.com" created="Tue, 15 Nov 2011 18:32:49 +0000"  >&lt;p&gt;Proposed addendum removes duplicate assertion.&lt;/p&gt;</comment>
                            <comment id="13150684" author="stack" created="Tue, 15 Nov 2011 19:10:33 +0000"  >&lt;p&gt;+1 on addendum.  Will this make TestHFileBlock pass again?  Let me try it w/ patch build.&lt;/p&gt;</comment>
                            <comment id="13150686" author="mikhail" created="Tue, 15 Nov 2011 19:12:00 +0000"  >&lt;p&gt;@Ted: actually, TestHFileBlock passes when I run it locally, and I don&apos;t see how BYTE_BUFFER_HEAP_SIZE could have changed with my changes. Does the unit test pass or fail when you run it locally?&lt;/p&gt;

&lt;p&gt;  public static final int BYTE_BUFFER_HEAP_SIZE = (int) ClassSize.estimateBase(&lt;br/&gt;
      ByteBuffer.wrap(new byte&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;, 0, 0).getClass(), false);&lt;/p&gt;

&lt;p&gt;Do you know of anything in the Hudson testing environment that could have affected this?&lt;/p&gt;</comment>
                            <comment id="13150693" author="yuzhihong@gmail.com" created="Tue, 15 Nov 2011 19:21:45 +0000"  >&lt;p&gt;We faced similar issue when working on HFile V2.&lt;br/&gt;
Two sizes (64 and 80) are allowed for BYTE_BUFFER_HEAP_SIZE. This is related to JDK + OS combination.&lt;br/&gt;
HadoopQA reported the failure in &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/246//testReport&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/246//testReport&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The assertion causing failure isn&apos;t needed - it is covered by the assertion at the entry to the method.&lt;/p&gt;</comment>
                            <comment id="13150754" author="mikhail" created="Tue, 15 Nov 2011 20:39:54 +0000"  >&lt;p&gt;@Ted: thanks for clarifying and for taking care of this! Sorry for breaking the unit test. Now I remember that this issue also came up when porting HFile v2.&lt;/p&gt;

&lt;p&gt;+1 on the addendum&lt;/p&gt;</comment>
                            <comment id="13150769" author="yuzhihong@gmail.com" created="Tue, 15 Nov 2011 20:58:06 +0000"  >&lt;p&gt;Applied addendum to TRUNK.&lt;/p&gt;</comment>
                            <comment id="13150776" author="hadoopqa" created="Tue, 15 Nov 2011 21:03:37 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12503778/4768.addendum&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12503778/4768.addendum&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -163 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 51 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.io.hfile.TestHFileBlock&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/257//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/257//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/257//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/257//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/257//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/257//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13150802" author="yuzhihong@gmail.com" created="Tue, 15 Nov 2011 21:46:06 +0000"  >&lt;p&gt;Second attempt to fixing assertion error: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/257//testReport/org.apache.hadoop.hbase.io.hfile/TestHFileBlock/testBlockHeapSize/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/257//testReport/org.apache.hadoop.hbase.io.hfile/TestHFileBlock/testBlockHeapSize/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13150804" author="yuzhihong@gmail.com" created="Tue, 15 Nov 2011 21:46:35 +0000"  >&lt;p&gt;Patch testing addendum v2.&lt;/p&gt;</comment>
                            <comment id="13150889" author="hadoopqa" created="Tue, 15 Nov 2011 23:32:03 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12503799/4768.addendum2&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12503799/4768.addendum2&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -163 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 51 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.TestDrainingServer&lt;br/&gt;
                  org.apache.hadoop.hbase.io.hfile.TestHFileBlock&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/259//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/259//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/259//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/259//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/259//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/259//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13150906" author="hudson" created="Tue, 15 Nov 2011 23:50:42 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2444 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2444/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2444/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4768&quot; title=&quot;Per-(table, columnFamily) metrics with configurable table name inclusion&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4768&quot;&gt;&lt;del&gt;HBASE-4768&lt;/del&gt;&lt;/a&gt; Addendum removes unnecessary assertion&lt;/p&gt;

&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFileBlock.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13151249" author="yuzhihong@gmail.com" created="Wed, 16 Nov 2011 15:05:33 +0000"  >&lt;p&gt;Test fixed by &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4795&quot; title=&quot;Fix TestHFileBlock when running on a 32-bit JVM&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4795&quot;&gt;&lt;del&gt;HBASE-4795&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12531744">HBASE-4809</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12528011">HBASE-4638</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12503778" name="4768.addendum" size="714" author="yuzhihong@gmail.com" created="Tue, 15 Nov 2011 18:32:49 +0000"/>
                            <attachment id="12503799" name="4768.addendum2" size="543" author="yuzhihong@gmail.com" created="Tue, 15 Nov 2011 21:46:06 +0000"/>
                            <attachment id="12503283" name="ASF.LICENSE.NOT.GRANTED--D363.1.patch" size="145656" author="phabricator@reviews.facebook.net" created="Thu, 10 Nov 2011 19:49:53 +0000"/>
                            <attachment id="12503461" name="ASF.LICENSE.NOT.GRANTED--D363.2.patch" size="145234" author="phabricator@reviews.facebook.net" created="Sat, 12 Nov 2011 02:14:52 +0000"/>
                            <attachment id="12503484" name="ASF.LICENSE.NOT.GRANTED--D363.3.patch" size="151973" author="phabricator@reviews.facebook.net" created="Sat, 12 Nov 2011 09:46:52 +0000"/>
                            <attachment id="12503521" name="ASF.LICENSE.NOT.GRANTED--D363.4.patch" size="152957" author="phabricator@reviews.facebook.net" created="Sun, 13 Nov 2011 07:45:57 +0000"/>
                            <attachment id="12503705" name="ASF.LICENSE.NOT.GRANTED--D363.5.patch" size="152957" author="phabricator@reviews.facebook.net" created="Tue, 15 Nov 2011 01:21:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 10 Nov 2011 19:49:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>216710</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 5 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08r6n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>49004</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Trying to get the most recent patch tested on Hudson.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>