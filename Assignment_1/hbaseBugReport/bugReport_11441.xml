<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:23:15 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-11441/HBASE-11441.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-11441] [hadoopqa] jenkinsEnv paths are stale/wrong; JAVA_HOME in particular</title>
                <link>https://issues.apache.org/jira/browse/HBASE-11441</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;jenkinsEnv paths are off.&lt;/p&gt;

&lt;p&gt;We moved to jdk1.7 for master branch.  Though we&apos;d set hadoopqa to run with java 1.7, the jenkinsEnv overrides what jenkins sets for JAVA_HOME so we&apos;ve been running 1.6 java over this last couple of months rather than 1.7.&lt;/p&gt;

&lt;p&gt;Trying to work around jenkinsEnv settings reveals that there is no 1.7 at the location jenkins goes to find it at (&quot;Latest JDK 7&quot; option):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ls: cannot access /home/hudson/tools/java/latest1.7/..: No such file or directory
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Messing w/ the options in the jenkins UI and then putting script in text box to expose paths, almost none of the advertised options are available.&lt;/p&gt;

&lt;p&gt;Something changed.&lt;/p&gt;

&lt;p&gt;I got a 1.7 working by setting jdk7-u51 explicitly and then setting PATH and JAVA_HOME just before our test script runs (it downloaded it)&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
...
ls $JAVA_HOME/..
which java
java -version
echo $JAVA_HOME
saveJavaHome=$JAVA_HOME
$JAVA_HOME/bin/java -version
ulimit -a
set +x
source ${WORKSPACE}/dev-support/jenkinsEnv.sh
export JAVA_HOME=&lt;span class=&quot;code-quote&quot;&gt;&quot;$saveJavaHome&quot;&lt;/span&gt;
export PATH=$JAVA_HOME/bin:$PATH
which java
java -version
echo &lt;span class=&quot;code-quote&quot;&gt;&quot;Resetting java_home -- FIX jenkinsEnv.sh!!! $JAVA_HOME&quot;&lt;/span&gt;
....
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;HBase builds on hadoop1||hadoop2||hadoop3||hadoop8&lt;/p&gt;

&lt;p&gt;I ain&apos;t sure how this stuff is supposed to be set.  Asking Andrew Bayer on our end (He said &apos;credits&apos; needed refresh last night but that doesn&apos;t seem to have helped here).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12724499">HBASE-11441</key>
            <summary>[hadoopqa] jenkinsEnv paths are stale/wrong; JAVA_HOME in particular</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Mon, 30 Jun 2014 18:11:42 +0000</created>
                <updated>Fri, 9 Sep 2016 20:23:16 +0000</updated>
                            <resolved>Fri, 9 Sep 2016 20:23:16 +0000</resolved>
                                                                    <component>build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="14047928" author="stack" created="Mon, 30 Jun 2014 18:15:36 +0000"  >&lt;p&gt;Talking to Andrew, he is afraid to mess on these boxes.  Says the jdk1.7 trick above should work for now.&lt;/p&gt;

&lt;p&gt;Seems like this jenkinsEnv stuff needs revamp but ain&apos;t sure what to revamp it too... just yet.&lt;/p&gt;</comment>
                            <comment id="14048099" author="enis" created="Mon, 30 Jun 2014 20:24:34 +0000"  >&lt;p&gt;The trunk build is using that path from &lt;a href=&quot;https://builds.apache.org/view/All/job/HBase-TRUNK/5249/consoleFull:&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/view/All/job/HBase-TRUNK/5249/consoleFull:&lt;/a&gt; &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+ which java
/home/hudson/tools/java/latest1.7/bin/java
+ java -version
java version &lt;span class=&quot;code-quote&quot;&gt;&quot;1.7.0_25&quot;&lt;/span&gt;
Java(TM) SE &lt;span class=&quot;code-object&quot;&gt;Runtime&lt;/span&gt; Environment (build 1.7.0_25-b15)
Java HotSpot(TM) Server VM (build 23.25-b01, mixed mode)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14048117" author="enis" created="Mon, 30 Jun 2014 20:34:59 +0000"  >&lt;p&gt;Should we try to set the precommit to use 1.7 latest, then set JAVA_HOME in jenkinsEnv.sh to &lt;tt&gt;/home/hudson/tools/java/latest1.7/&lt;/tt&gt; ? &lt;br/&gt;
It seems that setting the jdk works for hbase-trunk build. &lt;/p&gt;</comment>
                            <comment id="14048181" author="stack" created="Mon, 30 Jun 2014 21:23:07 +0000"  >&lt;p&gt;Are they running on the same machines; hadoopqa vs master build?  I&apos;ve not done the research.&lt;/p&gt;</comment>
                            <comment id="14048222" author="enis" created="Mon, 30 Jun 2014 21:59:09 +0000"  >&lt;p&gt;I think not. Precommit runs in &lt;tt&gt;hadoop1||hadoop2||hadoop3||hadoop8&lt;/tt&gt; and hbase-trunk runs in &lt;tt&gt;ubuntu &amp;amp;&amp;amp; !ubuntu4&lt;/tt&gt;. Although, I though jenkins will provide the JVM if you select it in the job&apos;s configuration. &lt;/p&gt;</comment>
                            <comment id="14048245" author="stack" created="Mon, 30 Jun 2014 22:20:12 +0000"  >&lt;blockquote&gt;&lt;p&gt;Although, I though jenkins will provide the JVM if you select it in the job&apos;s configuration.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That works sometimes, for some of the options.  Other times it fails for want of a login and password against oracle I presume (Sometimes it caches the jdk but I&apos;ve also seen it do a redownload on each build).&lt;/p&gt;

&lt;p&gt;I don&apos;t have the full picture on build infrastructure.  Learning it by running jobs just to list directories and their content takes a bunch of time.&lt;/p&gt;</comment>
                            <comment id="14048251" author="enis" created="Mon, 30 Jun 2014 22:25:27 +0000"  >&lt;p&gt;I see. It seems that precommit builds are working now with jdk7-u51. keep this setup, and move on? &lt;/p&gt;</comment>
                            <comment id="14048282" author="stack" created="Mon, 30 Jun 2014 23:06:52 +0000"  >&lt;p&gt;Example of failed download of JDK:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Installing JDK jdk-7u51-oth-JPR
Downloading JDK from http:&lt;span class=&quot;code-comment&quot;&gt;//download.oracle.com/otn/java/jdk/7u51-b13/jdk-7u51-linux-i586.tar.gz
&lt;/span&gt;
Your Oracle account doesn&apos;t appear valid. Please specify a valid username/password
ERROR: Unable to install JDK unless a valid username/password is provided.
Retrying after 10 seconds

Installing JDK jdk-7u51-oth-JPR
Downloading JDK from http:&lt;span class=&quot;code-comment&quot;&gt;//download.oracle.com/otn/java/jdk/7u51-b13/jdk-7u51-linux-i586.tar.gz
&lt;/span&gt;
Your Oracle account doesn&apos;t appear valid. Please specify a valid username/password
ERROR: Unable to install JDK unless a valid username/password is provided.
Retrying after 10 seconds
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15478148" author="busbey" created="Fri, 9 Sep 2016 20:23:16 +0000"  >&lt;p&gt;closing as obviated by our current JDK woes and the docker work in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-16591&quot; title=&quot;Add a docker file only contains java 8 for running pre commit on master&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-16591&quot;&gt;&lt;del&gt;HBASE-16591&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                                                <inwardlinks description="is superceded by">
                                        <issuelink>
            <issuekey id="13003780">HBASE-16591</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 30 Jun 2014 20:24:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>402682</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1xb6n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>402749</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>