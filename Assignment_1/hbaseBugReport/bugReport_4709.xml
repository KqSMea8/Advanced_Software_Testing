<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:21:20 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-4709/HBASE-4709.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-4709] Hadoop metrics2 setup in test MiniDFSClusters spewing JMX errors</title>
                <link>https://issues.apache.org/jira/browse/HBASE-4709</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Since switching over HBase to build with Hadoop 0.20.205.0, we&apos;ve been getting a lot of metrics related errors in the log files for tests:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2011-10-30 22:00:22,858 INFO  [main] log.Slf4jLog(67): jetty-6.1.26
2011-10-30 22:00:22,871 INFO  [main] log.Slf4jLog(67): Extract jar:file:/home/jenkins/.m2/repository/org/apache/hadoop/hadoop-core/0.20.205.0/hadoop-core-0.20.205.0.jar!/webapps/datanode to /tmp/Jetty_localhost_55751_datanode____.kw16hy/webapp
2011-10-30 22:00:23,048 INFO  [main] log.Slf4jLog(67): Started SelectChannelConnector@localhost:55751
Starting DataNode 1 with dfs.data.dir: /home/jenkins/jenkins-slave/workspace/HBase-TRUNK/trunk/target/test-data/7ba65a16-03ad-4624-b769-57405945ef58/dfscluster_3775fc23-1b51-4966-8133-205564bae762/dfs/data/data3,/home/jenkins/jenkins-slave/workspace/HBase-TRUNK/trunk/target/test-data/7ba65a16-03ad-4624-b769-57405945ef58/dfscluster_3775fc23-1b51-4966-8133-205564bae762/dfs/data/data4
2011-10-30 22:00:23,237 WARN  [main] impl.MetricsSystemImpl(137): Metrics system not started: Cannot locate configuration: tried hadoop-metrics2-datanode.properties, hadoop-metrics2.properties
2011-10-30 22:00:23,237 WARN  [main] util.MBeans(59): Hadoop:service=DataNode,name=MetricsSystem,sub=Control
javax.management.InstanceAlreadyExistsException: MXBean already registered with name Hadoop:service=NameNode,name=MetricsSystem,sub=Control
	at com.sun.jmx.mbeanserver.MXBeanLookup.addReference(MXBeanLookup.java:120)
	at com.sun.jmx.mbeanserver.MXBeanSupport.register(MXBeanSupport.java:143)
	at com.sun.jmx.mbeanserver.MBeanSupport.preRegister2(MBeanSupport.java:183)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:941)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:917)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:312)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:482)
	at org.apache.hadoop.metrics2.util.MBeans.register(MBeans.java:56)
	at org.apache.hadoop.metrics2.impl.MetricsSystemImpl.initSystemMBean(MetricsSystemImpl.java:500)
	at org.apache.hadoop.metrics2.impl.MetricsSystemImpl.init(MetricsSystemImpl.java:140)
	at org.apache.hadoop.metrics2.lib.DefaultMetricsSystem.init(DefaultMetricsSystem.java:40)
	at org.apache.hadoop.metrics2.lib.DefaultMetricsSystem.initialize(DefaultMetricsSystem.java:50)
	at org.apache.hadoop.hdfs.server.datanode.DataNode.instantiateDataNode(DataNode.java:1483)
	at org.apache.hadoop.hdfs.server.datanode.DataNode.instantiateDataNode(DataNode.java:1459)
	at org.apache.hadoop.hdfs.MiniDFSCluster.startDataNodes(MiniDFSCluster.java:417)
	at org.apache.hadoop.hdfs.MiniDFSCluster.&amp;lt;init&amp;gt;(MiniDFSCluster.java:280)
	at org.apache.hadoop.hbase.HBaseTestingUtility.startMiniDFSCluster(HBaseTestingUtility.java:349)
	at org.apache.hadoop.hbase.HBaseTestingUtility.startMiniCluster(HBaseTestingUtility.java:518)
	at org.apache.hadoop.hbase.HBaseTestingUtility.startMiniCluster(HBaseTestingUtility.java:474)
	at org.apache.hadoop.hbase.HBaseTestingUtility.startMiniCluster(HBaseTestingUtility.java:461)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This seems to be due to errors initializing the new hadoop metrics2 code by default, when running in a mini cluster.  The errors themselves seem to be harmless &amp;#8211; they&apos;re not breaking any tests &amp;#8211; but we should figure out what configuration we need to eliminate them.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12529581">HBASE-4709</key>
            <summary>Hadoop metrics2 setup in test MiniDFSClusters spewing JMX errors</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ghelmling">Gary Helmling</reporter>
                        <labels>
                    </labels>
                <created>Mon, 31 Oct 2011 23:21:43 +0000</created>
                <updated>Mon, 23 Sep 2013 18:30:37 +0000</updated>
                            <resolved>Fri, 11 Jan 2013 07:09:59 +0000</resolved>
                                    <version>0.90.4</version>
                    <version>0.92.0</version>
                    <version>0.94.0</version>
                    <version>0.94.1</version>
                    <version>0.95.2</version>
                                    <fixVersion>0.95.0</fixVersion>
                                    <component>test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>14</watches>
                                                                <comments>
                            <comment id="13247557" author="lewismc" created="Thu, 5 Apr 2012 19:31:15 +0000"  >&lt;p&gt;We have the exact same issues over at Apache Gora. As you mention, the build is not failing but there are many metrics WARN instances, with identical output. I came across this when looking for a solution. I can confirm that this is replicated on hadoop-core 1.0.1, hadoop-tests 1.0.1 and hbase 0.90.4 core and tests.&lt;/p&gt;</comment>
                            <comment id="13247614" author="stack" created="Thu, 5 Apr 2012 20:19:04 +0000"  >&lt;p&gt;This particular complaint is about namenode trying to register same bean twice which seems a little odd:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
InstanceAlreadyExistsException: MXBean already registered with name Hadoop:service=NameNode,name=MetricsSystem,sub=Control
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13247674" author="lewismc" created="Thu, 5 Apr 2012 21:09:55 +0000"  >&lt;p&gt;An example of our typical stack trace.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
3287 [main] INFO org.mortbay.log - jetty-6.1.26
3333 [main] INFO org.mortbay.log - Extract jar:file:/export/home/hudson/hudson-slave/maven-repositories/0/org/apache/hadoop/hadoop-core/1.0.1/hadoop-core-1.0.1.jar!/webapps/hdfs to /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/tmp/Jetty_localhost_54201_hdfs____txys7y/webapp
3598 [main] INFO org.mortbay.log - Started SelectChannelConnector@localhost:54201
12/04/05 16:56:06 INFO namenode.NameNode: Web-server up at: localhost:54201
12/04/05 16:56:06 INFO ipc.Server: IPC Server Responder: starting
12/04/05 16:56:06 INFO ipc.Server: IPC Server listener on 54200: starting
12/04/05 16:56:06 INFO ipc.Server: IPC Server handler 0 on 54200: starting
12/04/05 16:56:06 INFO ipc.Server: IPC Server handler 3 on 54200: starting
12/04/05 16:56:07 INFO ipc.Server: IPC Server handler 7 on 54200: starting
12/04/05 16:56:06 INFO ipc.Server: IPC Server handler 2 on 54200: starting
12/04/05 16:56:06 INFO ipc.Server: IPC Server handler 1 on 54200: starting
12/04/05 16:56:07 INFO ipc.Server: IPC Server handler 9 on 54200: starting
12/04/05 16:56:07 INFO ipc.Server: IPC Server handler 8 on 54200: starting
12/04/05 16:56:07 INFO ipc.Server: IPC Server handler 6 on 54200: starting
12/04/05 16:56:06 INFO ipc.Server: IPC Server handler 4 on 54200: starting
12/04/05 16:56:06 INFO ipc.Server: IPC Server handler 5 on 54200: starting
Starting DataNode 0 with dfs.data.dir: /export/home/hudson/hudson-slave/workspace/gora-trunk/trunk./gora-core/target/test-data/dfs/data/data1,/export/home/hudson/hudson-slave/workspace/gora-trunk/trunk./gora-core/target/test-data/dfs/data/data2
12/04/05 16:56:07 WARN impl.MetricsSystemImpl: Metrics system not started: Cannot locate configuration: tried hadoop-metrics2-datanode.properties, hadoop-metrics2.properties
12/04/05 16:56:07 WARN util.MBeans: Hadoop:service=DataNode,name=MetricsSystem,sub=Control
javax.management.InstanceAlreadyExistsException: MXBean already registered with name Hadoop:service=NameNode,name=MetricsSystem,sub=Control
	at com.sun.jmx.mbeanserver.MXBeanLookup.addReference(MXBeanLookup.java:120)
	at com.sun.jmx.mbeanserver.MXBeanSupport.register(MXBeanSupport.java:143)
	at com.sun.jmx.mbeanserver.MBeanSupport.preRegister2(MBeanSupport.java:183)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:941)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:917)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:312)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:482)
	at org.apache.hadoop.metrics2.util.MBeans.register(MBeans.java:56)
	at org.apache.hadoop.metrics2.impl.MetricsSystemImpl.initSystemMBean(MetricsSystemImpl.java:500)
	at org.apache.hadoop.metrics2.impl.MetricsSystemImpl.init(MetricsSystemImpl.java:140)
	at org.apache.hadoop.metrics2.lib.DefaultMetricsSystem.init(DefaultMetricsSystem.java:40)
	at org.apache.hadoop.metrics2.lib.DefaultMetricsSystem.initialize(DefaultMetricsSystem.java:50)
	at org.apache.hadoop.hdfs.server.datanode.DataNode.instantiateDataNode(DataNode.java:1520)
	at org.apache.hadoop.hdfs.server.datanode.DataNode.instantiateDataNode(DataNode.java:1496)
	at org.apache.hadoop.hdfs.MiniDFSCluster.startDataNodes(MiniDFSCluster.java:417)
	at org.apache.hadoop.hdfs.MiniDFSCluster.&amp;lt;init&amp;gt;(MiniDFSCluster.java:280)
	at org.apache.hadoop.hdfs.MiniDFSCluster.&amp;lt;init&amp;gt;(MiniDFSCluster.java:124)
	at org.apache.hadoop.mapred.HadoopTestCase.setUp(HadoopTestCase.java:148)
	at org.apache.gora.mapreduce.DataStoreMapReduceTestBase.setUp(DataStoreMapReduceTestBase.java:61)
	at junit.framework.TestCase.runBare(TestCase.java:132)
	at junit.framework.TestResult$1.protect(TestResult.java:110)
	at junit.framework.TestResult.runProtected(TestResult.java:128)
	at junit.framework.TestResult.run(TestResult.java:113)
	at junit.framework.TestCase.run(TestCase.java:124)
	at junit.framework.TestSuite.runTest(TestSuite.java:243)
	at junit.framework.TestSuite.run(TestSuite.java:238)
	at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:83)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:236)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:134)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:113)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
	at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
	at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:103)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:74)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You will however notice a difference between the original and my trace, where this particular one is not using HBaseTestingUtility, however instead relying on HadoopTestCase which in turn invokes MiniDFSCluster... the problem to that end is identical. I must state that there is ONE previous &apos;metrics system not starting&apos; warning identical to the one you see above. E.g. two in all the 2nd being followed by the full stack trace.&lt;/p&gt;</comment>
                            <comment id="13433121" author="merve" created="Mon, 13 Aug 2012 13:15:31 +0000"  >&lt;p&gt;The issue does not allow me to build and test Apache James.&lt;/p&gt;</comment>
                            <comment id="13433191" author="stack" created="Mon, 13 Aug 2012 14:54:08 +0000"  >&lt;p&gt;Its just a WARN message?  Is it preventing JAMEs coming up?&lt;/p&gt;</comment>
                            <comment id="13433959" author="merve" created="Tue, 14 Aug 2012 07:29:44 +0000"  >&lt;p&gt;Yes it is preventing JAMEs coming up. &lt;/p&gt;

&lt;p&gt;Maybe because of me that do not change anything in JAMES and only try &lt;/p&gt;

&lt;p&gt;mvn clean package &lt;/p&gt;

&lt;p&gt;or &lt;/p&gt;

&lt;p&gt;mvn clean install&lt;/p&gt;

&lt;p&gt;Should i try to edit something to by pass HBase test?&lt;/p&gt;

&lt;p&gt;In issue page someone tells it does not prevent James to come up.&lt;/p&gt;</comment>
                            <comment id="13437596" author="stack" created="Sun, 19 Aug 2012 22:04:14 +0000"  >&lt;blockquote&gt;&lt;p&gt;In issue page someone tells it does not prevent James to come up.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Can you tell us more why the above WARN message is preventing James launching?  Maybe its not coming up for some other reason?  You have more logs for us to look at?  Ask on dev list and add log there rather than here?&lt;/p&gt;</comment>
                            <comment id="13503702" author="nkeywal" created="Mon, 26 Nov 2012 10:01:30 +0000"  >&lt;p&gt;A workaround, proposed on the mailing list Friday 23th November.&lt;/p&gt;</comment>
                            <comment id="13503727" author="hadoopqa" created="Mon, 26 Nov 2012 10:59:52 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12554834/4709_workaround.v1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12554834/4709_workaround.v1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 98 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 24 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.client.TestHCM&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3400//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3400//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3400//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3400//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3400//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3400//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3400//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3400//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3400//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3400//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3400//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3400//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3400//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3400//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3400//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3400//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3400//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3400//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13504010" author="stack" created="Mon, 26 Nov 2012 19:28:05 +0000"  >&lt;p&gt;+1 if the TestHCM is not because of this patch.  Thanks for doing this N.&lt;/p&gt;</comment>
                            <comment id="13504028" author="eclark" created="Mon, 26 Nov 2012 19:45:32 +0000"  >&lt;p&gt;Should the static logger definitions be moved into hbase-hadoop&lt;/p&gt;
{1|2}
&lt;p&gt;-compat? Though right now it works because hadoop 1 and 2 both happen to have that class in the same location.&lt;/p&gt;</comment>
                            <comment id="13505367" author="nkeywal" created="Wed, 28 Nov 2012 11:15:12 +0000"  >&lt;p&gt;Sorry for the delay, I haven&apos;t seen the comments.&lt;br/&gt;
Elliott, I don&apos;t understand your proposition? May be it&apos;s unrelated, but I though having it in test only was useful because it&apos;s a workaround useful for tests only: there is no reason to have this workaround in production.&lt;/p&gt;</comment>
                            <comment id="13505709" author="eclark" created="Wed, 28 Nov 2012 17:54:02 +0000"  >&lt;p&gt;So I had two thoughts.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;I&apos;m not 100% sure that this kind of work around isn&apos;t needed in production.  Right now lots of messages are logged by the metrics system that are really scary to users but not really a bad thing (Specifically when starting/stopping the metrics system there are tons of errors thrown).  So we could want this logging change for more than just one logger.&lt;/li&gt;
	&lt;li&gt;If we decide that we shouldn&apos;t silence things in a real server there are already test utilities that reach into Hadoop&apos;s guts that are in hbase-hadoop1-compat and hbase-hadoop2-compat.  Seems like we should try and make the main jar have very few places where Hadoop internals are touched just in case different versions diverge more in the future.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="13505731" author="sershe" created="Wed, 28 Nov 2012 18:11:48 +0000"  >&lt;p&gt;Is this issue to fix the error, or get rid of the message? +1 to get rid of the message even if the error is acceptable, it clogs logs. Also &quot;Illegal stop&quot; exception dump when clearing JMX cache...&lt;/p&gt;</comment>
                            <comment id="13505788" author="eclark" created="Wed, 28 Nov 2012 19:00:03 +0000"  >&lt;p&gt;It&apos;s the same way to fix both log spams, so we should fix both at the same time if it&apos;s thought to be a good idea.&lt;/p&gt;</comment>
                            <comment id="13505882" author="nkeywal" created="Wed, 28 Nov 2012 20:53:28 +0000"  >&lt;p&gt;Ok, then we could also put them in the default log4j property (in conf) + the HBaseTestingUtility for people linking directly with it for a reason or another? Or you think we should force the values anyway?&lt;/p&gt;</comment>
                            <comment id="13506707" author="eclark" created="Thu, 29 Nov 2012 19:29:22 +0000"  >&lt;p&gt;My thought was putting the defaults in the log4j conf + in both of the MetricsAssertHelpers.&lt;/p&gt;</comment>
                            <comment id="13526399" author="nkeywal" created="Fri, 7 Dec 2012 14:09:02 +0000"  >&lt;p&gt;I&apos;ve done the log4j &amp;amp; HBaseTestingUtility in v2. Note sure about what to do in MetricsAssertHelper, but may be I can commit this part first? Waiting for a +1 before doing so.&lt;/p&gt;</comment>
                            <comment id="13526811" author="yuzhihong@gmail.com" created="Fri, 7 Dec 2012 21:49:18 +0000"  >&lt;p&gt;Verified that the following no longer appears in test output after applying this patch:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
target/surefire-reports/TEST-org.apache.hadoop.hbase.replication.TestMasterReplication.xml:javax.management.InstanceAlreadyExistsException: MXBean already registered with name Hadoop:service=NameNode,name=MetricsSystem,sub=Control
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13527806" author="nkeywal" created="Mon, 10 Dec 2012 09:47:39 +0000"  >&lt;p&gt;V2 committed.&lt;/p&gt;</comment>
                            <comment id="13527834" author="hudson" created="Mon, 10 Dec 2012 10:15:08 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3603 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3603/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3603/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4709&quot; title=&quot;Hadoop metrics2 setup in test MiniDFSClusters spewing JMX errors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4709&quot;&gt;&lt;del&gt;HBASE-4709&lt;/del&gt;&lt;/a&gt; Hadoop metrics2 setup in test MiniDFSClusters spewing JMX errors (Revision 1419296)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
nkeywal : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/resources/log4j.properties&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13527895" author="hudson" created="Mon, 10 Dec 2012 11:54:40 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #290 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/290/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/290/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4709&quot; title=&quot;Hadoop metrics2 setup in test MiniDFSClusters spewing JMX errors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4709&quot;&gt;&lt;del&gt;HBASE-4709&lt;/del&gt;&lt;/a&gt; Hadoop metrics2 setup in test MiniDFSClusters spewing JMX errors (Revision 1419296)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
nkeywal : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/resources/log4j.properties&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13529227" author="lewismc" created="Tue, 11 Dec 2012 19:08:00 +0000"  >&lt;p&gt;Hi, I&apos;ve been watching the thread with interest. Can I please confirm that this will be integrated into 0.96.0. Correct?&lt;/p&gt;</comment>
                            <comment id="13529330" author="nkeywal" created="Tue, 11 Dec 2012 20:57:12 +0000"  >&lt;p&gt;Yes, the file 4709.v2.patch is committed to trunk, so the 0.96 will have it.&lt;/p&gt;</comment>
                            <comment id="13530766" author="hadoopqa" created="Thu, 13 Dec 2012 07:52:28 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12559861/4709.v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12559861/4709.v2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3524//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3524//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13550906" author="stack" created="Fri, 11 Jan 2013 07:09:59 +0000"  >&lt;p&gt;This was committed to trunk a while back.  Resolving.&lt;/p&gt;</comment>
                            <comment id="13563565" author="yuzhihong@gmail.com" created="Sat, 26 Jan 2013 18:07:27 +0000"  >&lt;p&gt;InstanceAlreadyExistsException appears in 0.94 test output as well&lt;br/&gt;
e.g. &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/776/testReport/junit/org.apache.hadoop.hbase.coprocessor/TestRegionServerCoprocessorExceptionWithAbort/testExceptionFromCoprocessorDuringPut/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/776/testReport/junit/org.apache.hadoop.hbase.coprocessor/TestRegionServerCoprocessorExceptionWithAbort/testExceptionFromCoprocessorDuringPut/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Shall we port the fix to 0.94 ?&lt;/p&gt;</comment>
                            <comment id="13775040" author="stack" created="Mon, 23 Sep 2013 18:30:37 +0000"  >&lt;p&gt;Marking closed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12549779">GORA-111</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12559861" name="4709.v2.patch" size="1764" author="nkeywal" created="Fri, 7 Dec 2012 14:07:43 +0000"/>
                            <attachment id="12559860" name="4709.v2.patch" size="1764" author="nkeywal" created="Fri, 7 Dec 2012 14:06:13 +0000"/>
                            <attachment id="12554834" name="4709_workaround.v1.patch" size="1079" author="nkeywal" created="Mon, 26 Nov 2012 10:00:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 5 Apr 2012 19:31:15 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>215441</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02con:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11656</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>