<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:46:57 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-727/HBASE-727.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-727] Client caught in an infinite loop when trying to connect to cached server locations</title>
                <link>https://issues.apache.org/jira/browse/HBASE-727</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;HbaseRPC, which (to my understanding) is used whenever there is a need to connect to a server, enters an infinite loop to continually retry the connection until it succeeds.  This makes sense for server-to-server interaction, but it doesn&apos;t necessarily make sense for all client-to-server interaction.&lt;/p&gt;

&lt;p&gt;The problem I first observed was in doing fast restarts of HBase.  When I attempted to reload the UI after a restart, it would infinitely try to re-contact the cached server location from before the restart.  The correct behavior would be to break out of the loop as soon as possible in situations like the one above.  I think that throwing a RetriesExhaustedException would be the best way to do this, although if anyone has any suggestions please let me know.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12399768">HBASE-727</key>
            <summary>Client caught in an infinite loop when trying to connect to cached server locations</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="irubin">Izaak Rubin</assignee>
                                    <reporter username="irubin">Izaak Rubin</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Jul 2008 22:40:28 +0000</created>
                <updated>Fri, 22 Aug 2008 21:13:19 +0000</updated>
                            <resolved>Tue, 8 Jul 2008 23:20:16 +0000</resolved>
                                                    <fixVersion>0.2.0</fixVersion>
                                    <component>Client</component>
                    <component>IPC/RPC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12611389" author="irubin" created="Mon, 7 Jul 2008 22:58:44 +0000"  >&lt;p&gt;Here&apos;s some of a log file that demonstrates the problem:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2008-07-03 15:28:03,890 INFO org.apache.hadoop.hbase.master.ServerManager: Received MSG_REPORT_OPEN: -ROOT-,,0 from 127.0.0.1:56998
2008-07-03 15:28:03,891 DEBUG org.apache.hadoop.hbase.master.ServerManager: Total Load: 1, Num Servers: 1, Avg Load: 1.0
2008-07-03 15:28:03,892 INFO org.apache.hadoop.hbase.master.BaseScanner: RegionManager.rootScanner scanning meta region {regionname: -ROOT-,,0, startKey: &amp;lt;&amp;gt;, server: 127.0.0.1:56998}
2008-07-03 15:28:03,951 DEBUG org.apache.hadoop.hbase.master.BaseScanner: RegionManager.rootScannerREGION =&amp;gt; {NAME =&amp;gt; &apos;.META.,,1&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;, ENCODED =&amp;gt; 1028785192, TABLE =&amp;gt; {NAME =&amp;gt; &apos;.META.&apos;, FAMILIES =&amp;gt; [{NAME =&amp;gt; &apos;historian&apos;, VERSIONS =&amp;gt; 2147483647, COMPRESSION =&amp;gt; &apos;NONE&apos;, IN_MEMORY =&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, BLOCKCACHE =&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, LENGTH =&amp;gt; 2147483647, TTL =&amp;gt; FOREVER, BLOOMFILTER =&amp;gt; NONE}, {NAME =&amp;gt; &apos;info&apos;, VERSIONS =&amp;gt; 1, COMPRESSION =&amp;gt; &apos;NONE&apos;, IN_MEMORY =&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, BLOCKCACHE =&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, LENGTH =&amp;gt; 2147483647, TTL =&amp;gt; FOREVER, BLOOMFILTER =&amp;gt; NONE}]}}, SERVER =&amp;gt; &apos;127.0.0.1:56544&apos;, STARTCODE =&amp;gt; 1215123936723
2008-07-03 15:28:03,951 DEBUG org.apache.hadoop.hbase.master.BaseScanner: Current assignment of .META.,,1 is not valid: serverInfo: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, passed startCode: 1215123936723, storedInfo.startCode: -1, unassignedRegions: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, pendingRegions: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
2008-07-03 15:28:03,953 INFO org.apache.hadoop.hbase.master.BaseScanner: RegionManager.rootScanner scan of meta region {regionname: -ROOT-,,0, startKey: &amp;lt;&amp;gt;, server: 127.0.0.1:56998} complete
2008-07-03 15:28:04,815 DEBUG org.apache.hadoop.hbase.master.ServerManager: Total Load: 1, Num Servers: 1, Avg Load: 1.0
2008-07-03 15:28:04,821 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$TableServers: Found ROOT REGION =&amp;gt; {NAME =&amp;gt; &apos;-ROOT-,,0&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;, ENCODED =&amp;gt; 70236052, TABLE =&amp;gt; {NAME =&amp;gt; &apos;-ROOT-&apos;, FAMILIES =&amp;gt; [{NAME =&amp;gt; &apos;info&apos;, VERSIONS =&amp;gt; 1, COMPRESSION =&amp;gt; &apos;NONE&apos;, IN_MEMORY =&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, BLOCKCACHE =&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, LENGTH =&amp;gt; 2147483647, TTL =&amp;gt; FOREVER, BLOOMFILTER =&amp;gt; NONE}]}
2008-07-03 15:28:04,834 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: /127.0.0.1:56544. Already tried 1 time(s).
2008-07-03 15:28:05,834 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: /127.0.0.1:56544. Already tried 2 time(s).
2008-07-03 15:28:06,835 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: /127.0.0.1:56544. Already tried 3 time(s).
2008-07-03 15:28:07,836 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: /127.0.0.1:56544. Already tried 4 time(s).
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For reference, 127.0.0.1:56544 was the server being used before the restart, and port 56998 is the one being used after the restart.  The retry messages continue infinitely (only the first 4 are shown above).  I&apos;ll attach a text file with more of the surrounding log.&lt;/p&gt;</comment>
                            <comment id="12611394" author="irubin" created="Mon, 7 Jul 2008 23:09:06 +0000"  >&lt;p&gt;A patch that alters HbaseRPC.waitForProxy() such that it takes an additional argument specifying how long it should stay in the loop (positive numbers indicating the number of iterations, negative numbers indicating infinite). The two locations (one server, one client) where this method is called are also updated.&lt;/p&gt;

&lt;p&gt;(Forgot to mention): hbase_727.patch passed all HBase tests.&lt;/p&gt;</comment>
                            <comment id="12611843" author="stack" created="Tue, 8 Jul 2008 23:20:16 +0000"  >&lt;p&gt;Committed.  Thanks for the patch Izaak.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12385449" name="hbase-727_logfile_sample.txt" size="29444" author="irubin" created="Mon, 7 Jul 2008 22:59:57 +0000"/>
                            <attachment id="12385450" name="hbase_727.patch" size="4544" author="irubin" created="Mon, 7 Jul 2008 23:09:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 8 Jul 2008 23:20:16 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25364</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 24 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h92v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98733</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>