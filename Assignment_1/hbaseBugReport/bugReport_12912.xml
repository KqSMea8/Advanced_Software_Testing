<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:37:40 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-12912/HBASE-12912.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-12912] Cache Configuration used during scanner creation</title>
                <link>https://issues.apache.org/jira/browse/HBASE-12912</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;There is a clear CPU drain and iterator creation when creating store scanners under high load.  Splice was running a TPCC test of our database and we are seeing object creation and CPU waste on the boolean check....&lt;/p&gt;


&lt;p&gt;Code Snippet...&lt;/p&gt;

&lt;p&gt;if (store != null &amp;amp;&amp;amp; ((HStore)store).getHRegion() != null&lt;br/&gt;
        &amp;amp;&amp;amp; store.getStorefilesCount() &amp;gt; 1) &lt;/p&gt;
{
      RegionServerServices rsService = ((HStore)store).getHRegion().getRegionServerServices();
      if (rsService == null || !rsService.getConfiguration().getBoolean(
            STORESCANNER_PARALLEL_SEEK_ENABLE, false)) return;
      isParallelSeekEnabled = true;
      executor = rsService.getExecutorService();
    }

&lt;p&gt;Will attach profile...&lt;/p&gt;</description>
                <environment></environment>
        <key id="12769749">HBASE-12912</key>
            <summary>Cache Configuration used during scanner creation</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12857463">HBASE-14266</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jleach">John Leach</reporter>
                        <labels>
                    </labels>
                <created>Fri, 23 Jan 2015 21:45:41 +0000</created>
                <updated>Sat, 31 Oct 2015 21:19:06 +0000</updated>
                            <resolved>Sat, 31 Oct 2015 21:19:06 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                        <comments>
                            <comment id="14290038" author="jleach" created="Fri, 23 Jan 2015 21:46:33 +0000"  >&lt;p&gt;A picture of the CPU effect of the boolean check...&lt;/p&gt;</comment>
                            <comment id="14290053" author="apurtell" created="Fri, 23 Jan 2015 21:51:56 +0000"  >&lt;p&gt;Thanks, let me look into it. If one of your guys has a patch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jleach&quot; class=&quot;user-hover&quot; rel=&quot;jleach&quot;&gt;John Leach&lt;/a&gt;, I&apos;ll be happy to reassign.&lt;/p&gt;</comment>
                            <comment id="14290064" author="jleach" created="Fri, 23 Jan 2015 21:59:24 +0000"  >&lt;p&gt;Assign to me in the near term, and I will have someone fix.&lt;/p&gt;</comment>
                            <comment id="14290074" author="apurtell" created="Fri, 23 Jan 2015 22:03:10 +0000"  >&lt;p&gt;Reassigned as requested, thanks!&lt;/p&gt;</comment>
                            <comment id="14290178" author="lhofhansl" created="Fri, 23 Jan 2015 23:00:27 +0000"  >&lt;p&gt;I see two calls to getBoolean in there:&lt;/p&gt;

&lt;p&gt;This one:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (rsService == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || !rsService.getConfiguration().getBoolean(
            STORESCANNER_PARALLEL_SEEK_ENABLE, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)) &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and this (which I added recently):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.scanUsePread = conf.getBoolean(&lt;span class=&quot;code-quote&quot;&gt;&quot;hbase.storescanner.use.pread&quot;&lt;/span&gt;, scan.isSmall());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We can remove the latter one as far as I am concerned. I added that mostly for experimentation until we have &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-6735&quot; title=&quot;A minor optimization to avoid pread() be blocked by read() inside the same DFSInputStream&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-6735&quot;&gt;&lt;del&gt;HDFS-6735&lt;/del&gt;&lt;/a&gt; (which has now been committed).&lt;/p&gt;</comment>
                            <comment id="14344066" author="apurtell" created="Tue, 3 Mar 2015 00:02:59 +0000"  >&lt;p&gt;Moved out to 0.98.12&lt;/p&gt;</comment>
                            <comment id="14344241" author="lhofhansl" created="Tue, 3 Mar 2015 01:22:02 +0000"  >&lt;p&gt;I&apos;m happy to remove that latter one (&lt;tt&gt;conf.getBoolean(&quot;hbase.storescanner.use.pread&quot;, scan.isSmall());&lt;/tt&gt;.&lt;br/&gt;
Just put that in, so that one can play with forcing p-reads. If that&apos;s a perf issue, let&apos;s get rid of it.&lt;/p&gt;</comment>
                            <comment id="14390147" author="enis" created="Wed, 1 Apr 2015 07:30:16 +0000"  >&lt;p&gt;We do not need to remove the configs I think. We can do a StoreScannerConfig object, and construct it once by passing the conf from Store. Then the StoreScanners are constructed with that the Config object which contains the parsed configs (see TableConfiguration as an example). &lt;/p&gt;</comment>
                            <comment id="14612228" author="busbey" created="Thu, 2 Jul 2015 17:13:29 +0000"  >&lt;p&gt;Still working on this &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jleach&quot; class=&quot;user-hover&quot; rel=&quot;jleach&quot;&gt;John Leach&lt;/a&gt;, or would you prefer we have someone else get a patch together?&lt;/p&gt;</comment>
                            <comment id="14630216" author="jleach" created="Thu, 16 Jul 2015 19:32:26 +0000"  >&lt;p&gt;Let me take a shot at it.&lt;/p&gt;</comment>
                            <comment id="14984163" author="apurtell" created="Sat, 31 Oct 2015 21:19:06 +0000"  >&lt;p&gt;Resolved by parent.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12694254" name="StoreScannerStall.tiff" size="408676" author="jleach" created="Fri, 23 Jan 2015 21:46:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 23 Jan 2015 21:51:56 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 6 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i24qqf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>