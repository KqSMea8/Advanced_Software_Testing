<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:39:04 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6698/HBASE-6698.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6698] Refactor checkAndPut and checkAndDelete to use doMiniBatchMutation</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6698</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Currently the checkAndPut and checkAndDelete api internally calls the internalPut and internalDelete.  May be we can just call doMiniBatchMutation&lt;br/&gt;
only.  This will help in future like if we have some hooks and the CP&lt;br/&gt;
handles certain cases in the doMiniBatchMutation the same can be done while&lt;br/&gt;
doing a put thro checkAndPut or while doing a delete thro checkAndDelete.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12605507">HBASE-6698</key>
            <summary>Refactor checkAndPut and checkAndDelete to use doMiniBatchMutation</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="priyadarshini">Priyadarshini</assignee>
                                    <reporter username="ram_krish">ramkrishna.s.vasudevan</reporter>
                        <labels>
                    </labels>
                <created>Thu, 30 Aug 2012 11:37:30 +0000</created>
                <updated>Mon, 23 Sep 2013 18:31:01 +0000</updated>
                            <resolved>Thu, 20 Sep 2012 18:00:34 +0000</resolved>
                                                    <fixVersion>0.95.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>11</watches>
                                                                <comments>
                            <comment id="13445800" author="priyadarshini.r" created="Fri, 31 Aug 2012 09:35:29 +0000"  >&lt;p&gt;Attached the patch for trunk. Pls review &lt;/p&gt;</comment>
                            <comment id="13445808" author="hadoopqa" created="Fri, 31 Aug 2012 09:56:51 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12543246/HBASE-6698.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12543246/HBASE-6698.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2749//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2749//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13446418" author="yuzhihong@gmail.com" created="Fri, 31 Aug 2012 21:52:52 +0000"  >&lt;p&gt;internalPut() is still called in a few other methods. Do you plan to replace those calls as well ?&lt;/p&gt;

&lt;p&gt;Please base patch on trunk code base.&lt;/p&gt;</comment>
                            <comment id="13446453" author="hadoopqa" created="Fri, 31 Aug 2012 22:32:35 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12543246/HBASE-6698.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12543246/HBASE-6698.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2758//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2758//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13447481" author="ram_krish" created="Tue, 4 Sep 2012 04:33:38 +0000"  >&lt;p&gt;@Ted&lt;br/&gt;
We did not remove internalPut and internalDelete because mostly they were getting used in HBaseFSck and in Merge tools.&lt;br/&gt;
Others were in testcases only.&lt;br/&gt;
What do you feel Ted?  &lt;/p&gt;</comment>
                            <comment id="13447484" author="yuzhihong@gmail.com" created="Tue, 4 Sep 2012 04:47:25 +0000"  >&lt;p&gt;internalPut() is called by put(). So its use is widespread.&lt;/p&gt;

&lt;p&gt;Since this JIRA aims to facilitate coprocessor hooks, I think we should examine the usage carefully.&lt;/p&gt;

&lt;p&gt;BTW, Hadoop QA is temporarily out of order because of non-zero return value from mvn command.&lt;/p&gt;</comment>
                            <comment id="13447491" author="ram_krish" created="Tue, 4 Sep 2012 05:10:06 +0000"  >&lt;p&gt;One thing i can find here is we need to make use of prePut hook which after the refactoring will not be used in checkAndMutate case.  &lt;br/&gt;
So will be it be ok to replace all internalPut() to batchMutate()?  &lt;/p&gt;</comment>
                            <comment id="13448697" author="priyadarshini.r" created="Wed, 5 Sep 2012 13:08:03 +0000"  >&lt;p&gt;Refactored internalPut() and internalDelete().&lt;/p&gt;
</comment>
                            <comment id="13448737" author="hadoopqa" created="Wed, 5 Sep 2012 13:53:36 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12543846/HBASE-6698_2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12543846/HBASE-6698_2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated 108 warning messages.&lt;/p&gt;

&lt;p&gt;    -1 javac.  The applied patch generated 5 javac compiler warnings (more than the trunk&apos;s current 4 warnings).&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 7 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.regionserver.TestRegionServerMetrics&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2787//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2787//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2787//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2787//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2787//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2787//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2787//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2787//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2787//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2787//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2787//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2787//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2787//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2787//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13449441" author="priyadarshini.r" created="Thu, 6 Sep 2012 05:55:55 +0000"  >&lt;p&gt;Attached patch for testcase modification.&lt;br/&gt;
Now completely internalPut() and internalDelete() are removed to use batchmutate &lt;/p&gt;</comment>
                            <comment id="13449444" author="ram_krish" created="Thu, 6 Sep 2012 06:04:36 +0000"  >&lt;p&gt;Deleted the attachment as the attached had one problem while creating patch.  &lt;/p&gt;</comment>
                            <comment id="13449493" author="hadoopqa" created="Thu, 6 Sep 2012 07:33:30 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12543996/HBASE-6698_3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12543996/HBASE-6698_3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated 108 warning messages.&lt;/p&gt;

&lt;p&gt;    -1 javac.  The applied patch generated 5 javac compiler warnings (more than the trunk&apos;s current 4 warnings).&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 7 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2799//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2799//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2799//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2799//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2799//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2799//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2799//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2799//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2799//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2799//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2799//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2799//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2799//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2799//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13449821" author="ram_krish" created="Thu, 6 Sep 2012 17:15:28 +0000"  >&lt;p&gt;Latest patch attached.  Pls provide your reviews/comments.&lt;/p&gt;</comment>
                            <comment id="13449924" author="yuzhihong@gmail.com" created="Thu, 6 Sep 2012 18:39:08 +0000"  >&lt;p&gt;PreCommit build #2799 timed out.&lt;br/&gt;
Please run latest patch through test suite.&lt;br/&gt;
nit:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+            batchOp[0] = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Pair&amp;lt;Mutation, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;(((Put) w), lid);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The cast to Put should be to Mutation, right ?&lt;/p&gt;</comment>
                            <comment id="13449972" author="yuzhihong@gmail.com" created="Thu, 6 Sep 2012 19:34:57 +0000"  >&lt;p&gt;nit: line is too long:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (batchMutate[0].getOperationStatusCode().equals(OperationStatusCode.SANITY_CHECK_FAILURE)) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The code snippet of creating Pair&amp;lt;Mutation, Integer&amp;gt;, calling batchMutate(), etc is repeated multiple times. Consider refactoring into a utility method.&lt;/p&gt;</comment>
                            <comment id="13450272" author="stack" created="Fri, 7 Sep 2012 02:03:54 +0000"  >&lt;p&gt;Patch looks great.  Thanks for working on this important stuff.  The Ted comment on factoring out common code sounds good.&lt;/p&gt;</comment>
                            <comment id="13450551" author="priyadarshini.r" created="Fri, 7 Sep 2012 12:13:22 +0000"  >&lt;p&gt;Attached patch addressing Ted&apos;s review comments.&lt;br/&gt;
Pls review..&lt;/p&gt;</comment>
                            <comment id="13450567" author="ram_krish" created="Fri, 7 Sep 2012 12:39:42 +0000"  >&lt;p&gt;@Ted&lt;br/&gt;
We tried to run the test suite on trunk but every time we were getting OOME.  The internal jenkins is on 0.94 so not able to use that too.&lt;br/&gt;
From the &apos;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2799//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2799//testReport/&lt;/a&gt;&apos; found that there was a heap space issue.&lt;/p&gt;</comment>
                            <comment id="13450607" author="hadoopqa" created="Fri, 7 Sep 2012 13:17:21 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12544205/HBASE-6698_5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12544205/HBASE-6698_5.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    -1 javac.  The patch appears to cause mvn compile goal to fail.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to cause Findbugs (version 1.3.9) to fail.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2814//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2814//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2814//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2814//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13450832" author="yuzhihong@gmail.com" created="Fri, 7 Sep 2012 17:54:14 +0000"  >&lt;p&gt;Latest patch is much cleaner.&lt;br/&gt;
Please remind me what the following change is for:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-    Delete delete = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Delete();
+    Delete delete = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Delete(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[0]);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Please rename the variable below to reflect the nature of this change:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    putsAndLocks[0] = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Pair&amp;lt;Mutation, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;(mutation, lid);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;From &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2814/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2814/console&lt;/a&gt;, it was clear TestReplication hung.&lt;/p&gt;</comment>
                            <comment id="13451881" author="priyadarshini.r" created="Mon, 10 Sep 2012 10:51:56 +0000"  >&lt;p&gt;Latest patch has renamed putsAndLocks to mutateWithLocks&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Delete delete = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Delete(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[0]);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now, delete tries to obtain row lock through mutation.getRow(). To get the row lock, for test case purpose this change is required.This delete api is used only in testcases.&lt;/p&gt;</comment>
                            <comment id="13451909" author="hadoopqa" created="Mon, 10 Sep 2012 11:48:03 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12544448/HBASE-6698_6.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12544448/HBASE-6698_6.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    -1 javac.  The patch appears to cause mvn compile goal to fail.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to cause Findbugs (version 1.3.9) to fail.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.client.TestFromClientSide&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestFromClientSideWithCoprocessor&lt;br/&gt;
                  org.apache.hadoop.hbase.coprocessor.TestRegionServerCoprocessorExceptionWithAbort&lt;br/&gt;
                  org.apache.hadoop.hbase.master.TestAssignmentManager&lt;br/&gt;
                  org.apache.hadoop.hbase.master.TestSplitLogManager&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2837//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2837//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2837//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2837//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13451996" author="yuzhihong@gmail.com" created="Mon, 10 Sep 2012 14:11:09 +0000"  >&lt;p&gt;From &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2837//testReport/org.apache.hadoop.hbase.master/TestAssignmentManager/testShutdownHandler/:&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2837//testReport/org.apache.hadoop.hbase.master/TestAssignmentManager/testShutdownHandler/:&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.mockito.exceptions.misusing.WrongTypeOfReturnValue: 
CatalogTracker$$EnhancerByMockitoWithCGLIB$$5da9aeb6 cannot be returned by isStopped()
isStopped() should &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13452148" author="ram_krish" created="Mon, 10 Sep 2012 17:09:46 +0000"  >&lt;p&gt;I tried running all the failed testcases.  All of them passed.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2012-09-10 22:38:21,013 INFO  [main] hbase.HBaseTestingUtility(288): Created &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; mini-cluster data directory: D:\HBase\Trunk\hbase-server\target\test-data\1b34c2bc-9ae2-4c2c-a17e-a7a7ef73b1b6\dfscluster_1f11df5c-39e2-47e7-bf7b-634dbebf785a
2012-09-10 22:38:21,540 INFO  [main] zookeeper.MiniZooKeeperCluster(196): Started MiniZK Cluster and connect 1 ZK server on client port: 50620
2012-09-10 22:38:21,549 ERROR [main] hbase.ResourceChecker(129): Bad configuration: the operating systems file handles maximum is 0 our is 1024
2012-09-10 22:38:21,971 INFO  [main] hbase.ResourceChecker(144): before master.TestAssignmentManager#testShutdownHandler: 10 threads, 0 file descriptors 0 connections, 
2012-09-10 22:38:22,371 DEBUG [main] zookeeper.ZKUtil(102): mockedServer opening connection to ZooKeeper with ensemble (localhost:50620)
2012-09-10 22:38:22,435 INFO  [main] zookeeper.RecoverableZooKeeper(101): The identifier of &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; process is 4624@Ram
2012-09-10 22:38:22,569 DEBUG [main-EventThread] zookeeper.ZooKeeperWatcher(261): mockedServer Received ZooKeeper Event, type=None, state=SyncConnected, path=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
2012-09-10 22:38:22,580 DEBUG [main-EventThread] zookeeper.ZooKeeperWatcher(338): mockedServer-0x139b127390f0000 connected
2012-09-10 22:38:24,517 DEBUG [main] executor.ExecutorService(132): Starting executor service name=MASTER_OPEN_REGION-testShutdownHandler, corePoolSize=3, maxPoolSize=3
2012-09-10 22:38:24,518 DEBUG [main] executor.ExecutorService(132): Starting executor service name=MASTER_CLOSE_REGION-testShutdownHandler, corePoolSize=3, maxPoolSize=3
2012-09-10 22:38:24,518 DEBUG [main] executor.ExecutorService(132): Starting executor service name=MASTER_SERVER_OPERATIONS-testShutdownHandler, corePoolSize=3, maxPoolSize=3
2012-09-10 22:38:24,518 DEBUG [main] executor.ExecutorService(132): Starting executor service name=MASTER_META_SERVER_OPERATIONS-testShutdownHandler, corePoolSize=3, maxPoolSize=3
2012-09-10 22:38:26,200 INFO  [main] handler.ServerShutdownHandler(181): Skipping log splitting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; example.org,1234,5678
2012-09-10 22:38:26,461 DEBUG [main] client.ClientScanner(94): Creating scanner over .META. starting at key &apos;&apos;
2012-09-10 22:38:26,461 DEBUG [main] client.ClientScanner(205): Advancing internal scanner to startKey at &apos;&apos;
2012-09-10 22:38:26,781 DEBUG [main] client.ClientScanner(192): Finished with scanning at {NAME =&amp;gt; &apos;t,,1347296900866.db9424ce7e14acb58b9420b098b996ea.&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;, ENCODED =&amp;gt; db9424ce7e14acb58b9420b098b996ea,}
2012-09-10 22:38:26,801 INFO  [main] handler.ServerShutdownHandler(282): Reassigning 1 region(s) that example.org,1234,5678 was carrying (skipping 0 regions(s) that are already in transition)
2012-09-10 22:38:26,801 INFO  [main] handler.ServerShutdownHandler(378): The table t was deleted.  Hence not proceeding.
2012-09-10 22:38:26,801 INFO  [main] master.AssignmentManager(1372): Quickly assigning 0 region(s) across 2 server(s)
2012-09-10 22:38:26,801 INFO  [main] master.AssignmentManager(1377): Failed getting bulk plan, assigning region singly
2012-09-10 22:38:26,801 INFO  [main] handler.ServerShutdownHandler(359): Finished processing of shutdown of example.org,1234,5678
2012-09-10 22:38:26,801 DEBUG [main] zookeeper.ZKAssign(538): mockedServer-0x139b127390f0000 Deleting any existing unassigned nodes
2012-09-10 22:38:26,832 DEBUG [main] zookeeper.ZKAssign(538): mockedServer-0x139b127390f0000 Deleting any existing unassigned nodes
2012-09-10 22:38:26,853 INFO  [main] hbase.ResourceChecker(144): after master.TestAssignmentManager#testShutdownHandler: 12 threads (was 10), 0 file descriptors 1 connections,  -thread leak?- 
2012-09-10 22:38:27,863 INFO  [main] zookeeper.MiniZooKeeperCluster(238): Shutdown MiniZK cluster with all ZK servers

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Also could not find the error that occured while running testShutDownHandler.  The code is the updated one? Am i missing something here?&lt;/p&gt;</comment>
                            <comment id="13452248" author="stack" created="Mon, 10 Sep 2012 18:01:46 +0000"  >&lt;p&gt;I ran the tests individually and they passed for me.  Let me retry the patch.&lt;/p&gt;

&lt;p&gt;Rather than &apos;+    Delete delete = new Delete(new byte&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;);&apos;, could pass HConstants.EMPTY_BYTE_ARRAY (I could add on commit)... thats minor.  Let me do a more extensive review.  This patch is great. It could be too good to be true.  I just want to check....&lt;/p&gt;
</comment>
                            <comment id="13452250" author="stack" created="Mon, 10 Sep 2012 18:02:26 +0000"  >&lt;p&gt;Retry&lt;/p&gt;</comment>
                            <comment id="13452325" author="hadoopqa" created="Mon, 10 Sep 2012 19:07:01 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12544495/HBASE-6698_6.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12544495/HBASE-6698_6.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    -1 javac.  The patch appears to cause mvn compile goal to fail.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to cause Findbugs (version 1.3.9) to fail.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2838//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2838//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2838//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2838//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13452336" author="stack" created="Mon, 10 Sep 2012 19:18:02 +0000"  >&lt;p&gt;try again...&lt;/p&gt;</comment>
                            <comment id="13452405" author="hadoopqa" created="Mon, 10 Sep 2012 20:18:17 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12544509/HBASE-6698_6.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12544509/HBASE-6698_6.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    -1 javac.  The patch appears to cause mvn compile goal to fail.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to cause Findbugs (version 1.3.9) to fail.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2840//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2840//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2840//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2840//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13452423" author="stack" created="Mon, 10 Sep 2012 20:38:35 +0000"  >&lt;p&gt;The first rerun above OOME&apos;d.  The second shows no obvious hang.  Retry again.&lt;/p&gt;</comment>
                            <comment id="13452432" author="stack" created="Mon, 10 Sep 2012 20:51:31 +0000"  >&lt;p&gt;I took a look at the first change:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-        prepareDelete(delete);
-        internalDelete(delete, delete.getClusterId(), writeToWAL);
+        doBatchMutate(delete, lid);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If I look at doBatchMutate, it is missing special handling that prepareDelete does: e.g. the piece in prepareDelete where if no column family is specified, we set for each column family in the HTableDescriptor, a special cell w/ the current timestamp.&lt;/p&gt;

&lt;p&gt;My worry is that corner cases are not covered by this mass replace.  Please convince me its just my bad review not catching them.  Thanks Priyadarshini.&lt;/p&gt;</comment>
                            <comment id="13452495" author="hadoopqa" created="Mon, 10 Sep 2012 22:00:31 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12544525/HBASE-6698_6.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12544525/HBASE-6698_6.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    -1 javac.  The patch appears to cause mvn compile goal to fail.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to cause Findbugs (version 1.3.9) to fail.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2843//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2843//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2843//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2843//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13452705" author="ram_krish" created="Tue, 11 Sep 2012 04:36:02 +0000"  >&lt;p&gt;@Stack&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;If I look at doBatchMutate, it is missing special handling that prepareDelete&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;You feel that the prepareDelete is not called at all ?&lt;br/&gt;
If you see doBatchMutate it internally calls &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
OperationStatus[] batchMutate = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.batchMutate(mutateWithLocks);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Inside batchMutate we have&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; addedSize = doMiniBatchMutation(batchOp);
        newSize = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.addAndGetGlobalMemstoreSize(addedSize);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This code takes care of both Puts and deletes.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
          &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (isPutMutation) {
            &lt;span class=&quot;code-comment&quot;&gt;// Check the families in the put. If bad, skip &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; one.
&lt;/span&gt;            checkFamilies(familyMap.keySet());
            checkTimestamps(mutation.getFamilyMap(), now);
          } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
            prepareDelete((Delete) mutation);
          }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Pls correct me if am not addressing your concern? Thanks Stack.&lt;/p&gt;</comment>
                            <comment id="13452754" author="stack" created="Tue, 11 Sep 2012 06:12:26 +0000"  >&lt;p&gt;Sorry Ram.  That looks right.  Let me take another look.  I like this patch because of all the cleanup ; just afraid it was skipping out on checks.  Thanks for the above.&lt;/p&gt;</comment>
                            <comment id="13454899" author="ram_krish" created="Thu, 13 Sep 2012 13:58:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=saint.ack%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;saint.ack@gmail.com&quot;&gt;Stack&lt;/a&gt;&lt;br/&gt;
Is this patch fine Stack? &lt;/p&gt;</comment>
                            <comment id="13457856" author="ram_krish" created="Tue, 18 Sep 2012 14:32:39 +0000"  >&lt;p&gt;@Stack&lt;br/&gt;
Can you take a look at this? So that the patch is not stale.&lt;/p&gt;</comment>
                            <comment id="13458423" author="stack" created="Wed, 19 Sep 2012 05:33:41 +0000"  >&lt;p&gt;Sorry lads.  Distracted.&lt;/p&gt;

&lt;p&gt;+1 on committing this patch.  It removes two fat delete and put methods and instead has us go by the batch mutate path.   Nice improvement.&lt;/p&gt;

&lt;p&gt;Below are some comments.  You can address on commit Ram.&lt;/p&gt;

&lt;p&gt;Why we do this?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-    Delete delete = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Delete();
+    Delete delete = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Delete(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[0]);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Null row in Delete is handled differently to a row that is an empty byte array (Would suggest HConstants.EMPTY_BYTE_ARRAY instead of creating a new byte array each time through).&lt;/p&gt;

&lt;p&gt;Is this cast necessary?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+          doBatchMutate((Mutation)w, lid);  
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This comment should be removed?  Its going to seem funny when its not followed by Put and Delete stuff:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
           &lt;span class=&quot;code-comment&quot;&gt;// Using &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; cluster id, as &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; can only happen in the
&lt;/span&gt;           &lt;span class=&quot;code-comment&quot;&gt;// originating cluster. A slave cluster receives the result as a Put
&lt;/span&gt;           &lt;span class=&quot;code-comment&quot;&gt;// or Delete&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here you put the square brackets after the variable name:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    Pair&amp;lt;Mutation, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; mutateWithLocks[] = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Pair[1];
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In the rest of the method, the square brackets precede the variable name.  Would suggest you be consistent.&lt;/p&gt;
</comment>
                            <comment id="13458432" author="lhofhansl" created="Wed, 19 Sep 2012 05:56:42 +0000"  >&lt;p&gt;Super minor nit:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    Pair&amp;lt;Mutation, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; mutateWithLocks[] = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Pair[1];
+    mutateWithLocks[0] = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Pair&amp;lt;Mutation, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;(mutation, lid);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;can be written as:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      Pair&amp;lt;Mutation, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; mutateWithLocks[] = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Pair[] {&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Pair&amp;lt;Mutation, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;(mutation, lid)};
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Also, this method should be marked with:&lt;br/&gt;
&lt;tt&gt;@SuppressWarnings(&quot;unchecked&quot;)&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="13458866" author="stack" created="Wed, 19 Sep 2012 17:17:19 +0000"  >&lt;p&gt;lol I tried doing the above but forgot how.... I was missing the Pair[]... was complaining that my [] was generic... so I let it pass.  Let me make an addendum.&lt;/p&gt;</comment>
                            <comment id="13458867" author="stack" created="Wed, 19 Sep 2012 17:17:52 +0000"  >&lt;p&gt;Or, its not committed yet... mind addressing Lars&apos;s comment above lads?&lt;/p&gt;</comment>
                            <comment id="13458998" author="ram_krish" created="Wed, 19 Sep 2012 19:20:28 +0000"  >&lt;p&gt;Addressed Lar&apos;s comments in the latest patch.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    Delete delete = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Delete(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[0]);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Currently used in testcase only.  We need a row object to obtain lock.  Anyway changed it to  use HConstants.EMPTY_BYTE_ARRAY.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
doBatchMutate((Mutation)w, lid);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Cast is needed as w is of type Writable here.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;This comment should be removed?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Removed the comment.&lt;/p&gt;</comment>
                            <comment id="13459000" author="ram_krish" created="Wed, 19 Sep 2012 19:20:47 +0000"  >&lt;p&gt;Will commit this tomorrow unless no objections.&lt;/p&gt;</comment>
                            <comment id="13459053" author="hadoopqa" created="Wed, 19 Sep 2012 20:25:21 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12545776/HBASE-6698_7.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12545776/HBASE-6698_7.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated 139 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 14 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.regionserver.TestHRegion&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2900//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2900//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2900//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2900//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2900//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2900//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2900//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2900//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2900//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2900//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2900//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2900//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2900//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2900//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13459064" author="stack" created="Wed, 19 Sep 2012 20:34:10 +0000"  >&lt;p&gt;That TestHRegion failure looks suspicious.  Does this patch really introduce 14 findbugs issues (Its removing code mostly)&lt;/p&gt;</comment>
                            <comment id="13459086" author="yuzhihong@gmail.com" created="Wed, 19 Sep 2012 20:52:24 +0000"  >&lt;p&gt;Looks like the patch has to be adjusted since &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6769&quot; title=&quot;HRS.multi eats NoSuchColumnFamilyException since HBASE-5021&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6769&quot;&gt;&lt;del&gt;HBASE-6769&lt;/del&gt;&lt;/a&gt; has gone in already.&lt;/p&gt;</comment>
                            <comment id="13459540" author="ram_krish" created="Thu, 20 Sep 2012 11:54:36 +0000"  >&lt;p&gt;Oops, yes &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6769&quot; title=&quot;HRS.multi eats NoSuchColumnFamilyException since HBASE-5021&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6769&quot;&gt;&lt;del&gt;HBASE-6769&lt;/del&gt;&lt;/a&gt; is the reason.  I will update the patch.. &lt;/p&gt;</comment>
                            <comment id="13459548" author="ram_krish" created="Thu, 20 Sep 2012 12:12:06 +0000"  >&lt;p&gt;Hope fully this should be fine.  I have handled FailedSanitycheckException and NoSuchColumnFamilyException seperately.    &lt;/p&gt;</comment>
                            <comment id="13459597" author="hadoopqa" created="Thu, 20 Sep 2012 13:44:59 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12545896/HBASE-6698_8.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12545896/HBASE-6698_8.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated 139 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 14 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.regionserver.TestRegionServerMetrics&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2906//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2906//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2906//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2906//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2906//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2906//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2906//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2906//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2906//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2906//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2906//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2906//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2906//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2906//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13459694" author="ram_krish" created="Thu, 20 Sep 2012 15:55:21 +0000"  >&lt;p&gt;org.apache.hadoop.hbase.regionserver.TestRegionServerMetrics.  This test cases passes locally.&lt;br/&gt;
The error in the QA build seems to be different&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.io.IOException: Shutting down
	at org.apache.hadoop.hbase.MiniHBaseCluster.init(MiniHBaseCluster.java:227)
	at org.apache.hadoop.hbase.MiniHBaseCluster.&amp;lt;init&amp;gt;(MiniHBaseCluster.java:89)
	at org.apache.hadoop.hbase.HBaseTestingUtility.startMiniHBaseCluster(HBaseTestingUtility.java:693)
	at org.apache.hadoop.hbase.HBaseTestingUtility.startMiniHBaseCluster(HBaseTestingUtility.java:666)
	at org.apache.hadoop.hbase.HBaseTestingUtility.startMiniCluster(HBaseTestingUtility.java:661)
	at org.apache.hadoop.hbase.HBaseTestingUtility.startMiniCluster(HBaseTestingUtility.java:603)
	at org.apache.hadoop.hbase.HBaseTestingUtility.startMiniCluster(HBaseTestingUtility.java:572)
	at org.apache.hadoop.hbase.regionserver.TestRegionServerMetrics.setUp(TestRegionServerMetrics.java:86)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13459730" author="ram_krish" created="Thu, 20 Sep 2012 16:47:45 +0000"  >&lt;p&gt;As per my analysis, before the HBaseRPCServer on the RS could start and set the volatile variable &apos;started&apos; the master started the assignment because the RS  registration got completed successfully.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: org.apache.hadoop.ipc.RemoteException: org.apache.hadoop.hbase.ipc.ServerNotRunningYetException: Server is not running yet
	at org.apache.hadoop.hbase.ipc.HBaseServer$Handler.run(HBaseServer.java:1798)

	at org.apache.hadoop.hbase.ipc.HBaseClient.call(HBaseClient.java:1300)
	at org.apache.hadoop.hbase.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:178)
	... 11 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This shows that the assignment failed due to Servernotrunningexcep.&lt;br/&gt;
Connected to master logs comes even before this&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2012-09-20 13:10:31,810 INFO  [RegionServer:0;asf011.sp2.ygridcore.net,34620,1348146629931] regionserver.HRegionServer(1943): Attempting connect to Master server at asf011.sp2.ygridcore.net,49804,1348146629519
2012-09-20 13:10:31,841 INFO  [RegionServer:0;asf011.sp2.ygridcore.net,34620,1348146629931] regionserver.HRegionServer(1952): Connected to master at asf011.sp2.ygridcore.net/67.195.138.20:49804
2012-09-20 13:10:31,841 INFO  [RegionServer:0;asf011.sp2.ygridcore.net,34620,1348146629931] regionserver.HRegionServer(1998): Telling master at asf011.sp2.ygridcore.net,49804,1348146629519 that we are up with port=34620, startcode=1348146629931
2012-09-20 13:10:31,882 INFO  [IPC Server handler 0 on 49804] master.ServerManager(307): Registering server=asf011.sp2.ygridcore.net,34620,1348146629931
2012-09-20 13:10:31,893 DEBUG [RegionServer:0;asf011.sp2.ygridcore.net,34620,1348146629931] regionserver.HRegionServer(1171): Config from master: hbase.rootdir=hdfs:&lt;span class=&quot;code-comment&quot;&gt;//localhost:52552/user/jenkins/hbase
&lt;/span&gt;2012-09-20 13:10:31,894 DEBUG [RegionServer:0;asf011.sp2.ygridcore.net,34620,1348146629931] regionserver.HRegionServer(1171): Config from master: fs.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;.name=hdfs:&lt;span class=&quot;code-comment&quot;&gt;//localhost:52552
&lt;/span&gt;2012-09-20 13:10:31,894 INFO  [RegionServer:0;asf011.sp2.ygridcore.net,34620,1348146629931] regionserver.HRegionServer(1164): Master passed us hostname to use. Was=asf011.sp2.ygridcore.net, Now=asf011.sp2.ygridcore.net
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;And the ROOT assignment also started&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
012-09-20 13:10:33,811 INFO  [Master:0;asf011.sp2.ygridcore.net,49804,1348146629519] master.AssignmentManager(1579): Assigning region -ROOT-,,0.70236052 to asf011.sp2.ygridcore.net,34620,1348146629931
2012-09-20 13:10:33,811 INFO  [Master:0;asf011.sp2.ygridcore.net,49804,1348146629519] master.RegionStates(250): Region {NAME =&amp;gt; &apos;-ROOT-,,0&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;, ENCODED =&amp;gt; 70236052,} transitioned from {-ROOT-,,0.70236052 state=OFFLINE, ts=1348146633581, server=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;} to {-ROOT-,,0.70236052 state=PENDING_OPEN, ts=1348146633811, server=asf011.sp2.ygridcore.net,34620,1348146629931}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I think this should be addressed in a seperate JIRA.  Let me know if i can commit the patch?&lt;/p&gt;</comment>
                            <comment id="13459746" author="ram_krish" created="Thu, 20 Sep 2012 17:07:52 +0000"  >&lt;p&gt;Retrying the patch.&lt;/p&gt;</comment>
                            <comment id="13459748" author="stack" created="Thu, 20 Sep 2012 17:10:00 +0000"  >&lt;p&gt;Nice analysis Ram.  Commit your patch and open a new one for the failed test especially since you&apos;ve done the work to figure why it failed.&lt;/p&gt;</comment>
                            <comment id="13459805" author="ram_krish" created="Thu, 20 Sep 2012 18:00:34 +0000"  >&lt;p&gt;thanks for the patch Priya.&lt;br/&gt;
Thanks for the review Ted, Lars, Stack&lt;/p&gt;</comment>
                            <comment id="13459808" author="hadoopqa" created="Thu, 20 Sep 2012 18:03:40 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12545931/HBASE-6698_8.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12545931/HBASE-6698_8.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated 139 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 14 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2907//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2907//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2907//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2907//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2907//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2907//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2907//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2907//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2907//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2907//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2907//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2907//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2907//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2907//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13459877" author="hudson" created="Thu, 20 Sep 2012 19:32:30 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3359 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3359/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3359/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6698&quot; title=&quot;Refactor checkAndPut and checkAndDelete to use doMiniBatchMutation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6698&quot;&gt;&lt;del&gt;HBASE-6698&lt;/del&gt;&lt;/a&gt; Refactor checkAndPut and checkAndDelete to use doMiniBatchMutation&lt;br/&gt;
(Priya)&lt;/p&gt;

&lt;p&gt;Submitted by:PrIya&lt;br/&gt;
Reviewed by:Ram, Stack, Ted, Lars (Revision 1388141)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
ramkrishna : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionServerMetrics.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13460079" author="hudson" created="Fri, 21 Sep 2012 00:11:45 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #184 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/184/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/184/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6698&quot; title=&quot;Refactor checkAndPut and checkAndDelete to use doMiniBatchMutation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6698&quot;&gt;&lt;del&gt;HBASE-6698&lt;/del&gt;&lt;/a&gt; Refactor checkAndPut and checkAndDelete to use doMiniBatchMutation&lt;br/&gt;
(Priya)&lt;/p&gt;

&lt;p&gt;Submitted by:PrIya&lt;br/&gt;
Reviewed by:Ram, Stack, Ted, Lars (Revision 1388141)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
ramkrishna : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionServerMetrics.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13775227" author="stack" created="Mon, 23 Sep 2013 18:31:01 +0000"  >&lt;p&gt;Marking closed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12543246" name="HBASE-6698.patch" size="1225" author="priyadarshini.r" created="Fri, 31 Aug 2012 09:34:05 +0000"/>
                            <attachment id="12543613" name="HBASE-6698_1.patch" size="1266" author="priyadarshini.r" created="Tue, 4 Sep 2012 04:25:45 +0000"/>
                            <attachment id="12543846" name="HBASE-6698_2.patch" size="9346" author="priyadarshini.r" created="Wed, 5 Sep 2012 12:58:30 +0000"/>
                            <attachment id="12543996" name="HBASE-6698_3.patch" size="10612" author="priyadarshini.r" created="Thu, 6 Sep 2012 06:34:31 +0000"/>
                            <attachment id="12544205" name="HBASE-6698_5.patch" size="9439" author="priyadarshini.r" created="Fri, 7 Sep 2012 12:12:17 +0000"/>
                            <attachment id="12544525" name="HBASE-6698_6.patch" size="9448" author="stack" created="Mon, 10 Sep 2012 20:38:50 +0000"/>
                            <attachment id="12544509" name="HBASE-6698_6.patch" size="9448" author="stack" created="Mon, 10 Sep 2012 19:17:53 +0000"/>
                            <attachment id="12544495" name="HBASE-6698_6.patch" size="9448" author="stack" created="Mon, 10 Sep 2012 18:02:26 +0000"/>
                            <attachment id="12544448" name="HBASE-6698_6.patch" size="9448" author="priyadarshini.r" created="Mon, 10 Sep 2012 10:43:52 +0000"/>
                            <attachment id="12545776" name="HBASE-6698_7.patch" size="9630" author="ram_krish" created="Wed, 19 Sep 2012 19:17:57 +0000"/>
                            <attachment id="12545931" name="HBASE-6698_8.patch" size="9846" author="ram_krish" created="Thu, 20 Sep 2012 17:08:27 +0000"/>
                            <attachment id="12545896" name="HBASE-6698_8.patch" size="9846" author="ram_krish" created="Thu, 20 Sep 2012 12:33:46 +0000"/>
                            <attachment id="12545894" name="HBASE-6698_8.patch" size="9813" author="ram_krish" created="Thu, 20 Sep 2012 12:12:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>13.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 31 Aug 2012 09:35:29 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>242521</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02vfj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14693</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>