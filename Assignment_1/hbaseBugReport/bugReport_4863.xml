<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:22:42 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-4863/HBASE-4863.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-4863] Make Thrift server thread pool bounded and add a command-line UI test</title>
                <link>https://issues.apache.org/jira/browse/HBASE-4863</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;This started as an internal hotfix where we found out that the Thrift server spawned 15000 threads. To bound the thread pool size I added a custom thread pool server implementation called HBaseThreadPoolServer into HBase codebase, and made the following parameters configurable from both command line and as config settings: minWorkerThreads, maxWorkerThreads, and maxQueuedRequests. Under an increasing load, the server creates new threads for every connection before the pool size reaches minWorkerThreads. After that, the server puts new connections into the queue and only creates a new thread when the queue is full. If an attempt to create a new thread fails, the server drops connection. The default TThreadPoolServer would crash in that case, but it never happened because the thread pool was unbounded, so the server would hang indefinitely, consume a lot of memory, and cause huge latency spikes on the client side.&lt;/p&gt;

&lt;p&gt;Another part of this fix is refactoring and unit testing of the command-line part of the Thrift server. The logic there is sufficiently complicated, and the existing ThriftServer class does not test that part at all. The new TestThriftServerCmdLine test starts the Thrift server on a random port with various combinations of options and talks to it through the client API from another thread.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12532591">HBASE-4863</key>
            <summary>Make Thrift server thread pool bounded and add a command-line UI test</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mikhail">Mikhail Bautin</assignee>
                                    <reporter username="mikhail">Mikhail Bautin</reporter>
                        <labels>
                    </labels>
                <created>Thu, 24 Nov 2011 09:47:33 +0000</created>
                <updated>Fri, 12 Jul 2013 11:16:33 +0000</updated>
                            <resolved>Fri, 25 Nov 2011 23:17:38 +0000</resolved>
                                                    <fixVersion>0.94.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13156614" author="phabricator@reviews.facebook.net" created="Thu, 24 Nov 2011 09:50:39 +0000"  >&lt;p&gt;mbautin requested code review of &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4863&quot; title=&quot;Make Thrift server thread pool bounded and add a command-line UI test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4863&quot;&gt;&lt;del&gt;HBASE-4863&lt;/del&gt;&lt;/a&gt; Make HBase Thrift server more configurable and add a command-line UI test&quot;.&lt;br/&gt;
Reviewers: JIRA, Kannan, tedyu, stack&lt;/p&gt;

&lt;p&gt;  This started as an internal hotfix where we found out that the Thrift server spawned 15000 threads. To bound the thread pool size I added a custom thread pool server implementation called HBaseThreadPoolServer into HBase codebase, and made the following parameters configurable from both command line and as config settings: minWorkerThreads, maxWorkerThreads, and maxQueuedRequests. Under an increasing load, the server creates new threads for every connection before the pool size reaches minWorkerThreads. After that, the server puts new connections into the queue and only creates a new thread when the queue is full. If an attempt to create a new thread fails, the server drops connection. The default TThreadPoolServer would crash in that case, but it never happened because the thread pool was unbounded, so the server would hang indefinitely, consume a lot of memory, and cause huge latency spikes on the client side.&lt;/p&gt;

&lt;p&gt;  Another part of this fix is refactoring and unit testing of the command-line part of the Thrift server. The logic there is sufficiently complicated, and the existing ThriftServer class does not test that part at all. The new TestThriftServerCmdLine test starts the Thrift server on a random port with various combinations of options and talks to it through the client API from another thread.&lt;/p&gt;


&lt;p&gt;TEST PLAN&lt;br/&gt;
  Unit tests, cluster test with a Python Thrift client.&lt;br/&gt;
  I will post an update when I&apos;m done with testing.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D531&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D531&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/HBaseThreadPoolServer.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/ThriftServer.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/Threads.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/thrift/TestThriftServer.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/thrift/TestThriftServerCmdLine.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/TestThreads.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/1167/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/1167/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13156616" author="phabricator@reviews.facebook.net" created="Thu, 24 Nov 2011 09:54:39 +0000"  >&lt;p&gt;mbautin updated the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4863&quot; title=&quot;Make Thrift server thread pool bounded and add a command-line UI test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4863&quot;&gt;&lt;del&gt;HBASE-4863&lt;/del&gt;&lt;/a&gt; Make HBase Thrift server more configurable and add a command-line UI test&quot;.&lt;br/&gt;
Reviewers: JIRA, Kannan, tedyu, stack&lt;/p&gt;

&lt;p&gt;  Updating with the most recent version. Posted a stale version at first &amp;#8211; sorry for spam.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D531&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D531&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/HBaseThreadPoolServer.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/ThriftServer.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/Threads.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/thrift/TestThriftServer.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/thrift/TestThriftServerCmdLine.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/TestThreads.java&lt;/p&gt;</comment>
                            <comment id="13156821" author="yuzhihong@gmail.com" created="Thu, 24 Nov 2011 16:55:40 +0000"  >&lt;p&gt;I got &lt;em&gt;compilation error&lt;/em&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
testRunThriftServer[0](org.apache.hadoop.hbase.thrift.TestThriftServerCmdLine)  Time elapsed: 2.047 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
java.lang.Error: Unresolved compilation problem:
  Cannot make a &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; reference to the non-&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; method getColumnDescriptors() from the type TestThriftServer

  at org.apache.hadoop.hbase.thrift.TestThriftServer.createDropTable(TestThriftServer.java:111)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Since HBaseThreadPoolServer extends TServer, I think a better name for the class would be TBoundedThreadPoolServer (TThreadPoolServer is in thrift).&lt;/p&gt;</comment>
                            <comment id="13156828" author="phabricator@reviews.facebook.net" created="Thu, 24 Nov 2011 17:11:39 +0000"  >&lt;p&gt;tedyu has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4863&quot; title=&quot;Make Thrift server thread pool bounded and add a command-line UI test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4863&quot;&gt;&lt;del&gt;HBASE-4863&lt;/del&gt;&lt;/a&gt; Make HBase Thrift server more configurable and add a command-line UI test&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/HBaseThreadPoolServer.java:64 Please add javadoc for the keys.&lt;br/&gt;
  These keys should be placed into hbase-default.xml&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/HBaseThreadPoolServer.java:80 Is TIME_TO_WAIT_AFTER_SHUTDOWN_MS a better name for this constant ?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D531&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D531&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13156883" author="phabricator@reviews.facebook.net" created="Thu, 24 Nov 2011 19:46:40 +0000"  >&lt;p&gt;tedyu has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4863&quot; title=&quot;Make Thrift server thread pool bounded and add a command-line UI test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4863&quot;&gt;&lt;del&gt;HBASE-4863&lt;/del&gt;&lt;/a&gt; Make HBase Thrift server more configurable and add a command-line UI test&quot;.&lt;/p&gt;

&lt;p&gt;  Should similar changes in thrift/ThriftServer.java be applied to thrift2/ThriftServer.java ?&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/HBaseThreadPoolServer.java:111 Should this become a parameter user can adjust ?&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/HBaseThreadPoolServer.java:263 Should ttx.getType() be logged ?&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/ThriftServer.java:179 Should read &apos;Exactly one &apos;&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D531&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D531&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13156901" author="phabricator@reviews.facebook.net" created="Thu, 24 Nov 2011 20:52:39 +0000"  >&lt;p&gt;mbautin updated the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4863&quot; title=&quot;Make Thrift server thread pool bounded and add a command-line UI test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4863&quot;&gt;&lt;del&gt;HBASE-4863&lt;/del&gt;&lt;/a&gt; Make HBase Thrift server more configurable and add a command-line UI test&quot;.&lt;br/&gt;
Reviewers: JIRA, Kannan, tedyu, stack&lt;/p&gt;

&lt;p&gt;  Addressing Ted&apos;s comments. I will re-run unit tests and cluster tests, and post an update.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D531&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D531&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/TBoundedThreadPoolServer.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/ThriftServer.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/Threads.java&lt;br/&gt;
  src/main/resources/hbase-default.xml&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/thrift/TestThriftServer.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/thrift/TestThriftServerCmdLine.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/TestThreads.java&lt;/p&gt;</comment>
                            <comment id="13156902" author="mikhail" created="Thu, 24 Nov 2011 20:54:25 +0000"  >&lt;p&gt;The same as D531.3.patch but generated using &quot;git format-patch --no-prefix HEAD^..HEAD&quot; so that it can be applied using the normal patch command.&lt;/p&gt;</comment>
                            <comment id="13156923" author="hadoopqa" created="Thu, 24 Nov 2011 22:52:20 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12505038/0001-Fix-thread-leaks-in-the-HBase-thread-pool-server.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12505038/0001-Fix-thread-leaks-in-the-HBase-thread-pool-server.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 15 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -162 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 67 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.client.TestAdmin&lt;br/&gt;
                  org.apache.hadoop.hbase.util.TestThreads&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/364//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/364//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/364//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/364//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/364//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/364//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13156956" author="yuzhihong@gmail.com" created="Fri, 25 Nov 2011 01:56:37 +0000"  >&lt;p&gt;In thrift2/ThriftServer.java:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
        server = getTThreadPoolServer(protocolFactory, processor, transportFactory, inetSocketAddress);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;where&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    TThreadPoolServer.Args serverArgs = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TThreadPoolServer.Args(serverTransport);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It would be nice to incorporate TBoundedThreadPoolServer into the above module. This can be done in a separate JIRA.&lt;/p&gt;</comment>
                            <comment id="13156964" author="yuzhihong@gmail.com" created="Fri, 25 Nov 2011 02:32:26 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
testSleepWithoutInterrupt(org.apache.hadoop.hbase.util.TestThreads)  Time elapsed: 5.004 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
java.lang.AssertionError
  at org.junit.Assert.fail(Assert.java:92)
  at org.junit.Assert.assertTrue(Assert.java:43)
  at org.junit.Assert.assertTrue(Assert.java:54)
  at org.apache.hadoop.hbase.util.TestThreads.testSleepWithoutInterrupt(TestThreads.java:57)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;points to this line:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      assertTrue(sleeper.isInterrupted());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13157081" author="phabricator@reviews.facebook.net" created="Fri, 25 Nov 2011 10:32:39 +0000"  >&lt;p&gt;mbautin updated the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4863&quot; title=&quot;Make Thrift server thread pool bounded and add a command-line UI test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4863&quot;&gt;&lt;del&gt;HBASE-4863&lt;/del&gt;&lt;/a&gt; Make HBase Thrift server more configurable and add a command-line UI test&quot;.&lt;br/&gt;
Reviewers: JIRA, Kannan, tedyu, stack&lt;/p&gt;

&lt;p&gt;  Fixing a bug in TestThreads. Cluster testing is going well. I will kick off a unit test run on Jenkins.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D531&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D531&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/TBoundedThreadPoolServer.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/ThriftServer.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/Threads.java&lt;br/&gt;
  src/main/resources/hbase-default.xml&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/thrift/TestThriftServer.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/thrift/TestThriftServerCmdLine.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/TestThreads.java&lt;/p&gt;</comment>
                            <comment id="13157126" author="hadoopqa" created="Fri, 25 Nov 2011 12:33:06 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12505097/D531.4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12505097/D531.4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 10 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -162 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 67 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.client.TestAdmin&lt;br/&gt;
                  org.apache.hadoop.hbase.replication.TestReplication&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestInstantSchemaChange&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/366//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/366//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/366//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/366//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/366//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/366//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13157195" author="yuzhihong@gmail.com" created="Fri, 25 Nov 2011 15:30:03 +0000"  >&lt;p&gt;+1 on patch v2.&lt;br/&gt;
The test failures reported by HadoopQA weren&apos;t related to the patch.&lt;/p&gt;</comment>
                            <comment id="13157257" author="yuzhihong@gmail.com" created="Fri, 25 Nov 2011 17:28:41 +0000"  >&lt;p&gt;Integrated to TRUNK.&lt;/p&gt;

&lt;p&gt;Thanks for the patch Mikhail.&lt;/p&gt;</comment>
                            <comment id="13157290" author="hudson" created="Fri, 25 Nov 2011 20:24:01 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2482 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2482/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2482/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4863&quot; title=&quot;Make Thrift server thread pool bounded and add a command-line UI test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4863&quot;&gt;&lt;del&gt;HBASE-4863&lt;/del&gt;&lt;/a&gt; Phabricator D531 Make Thrift server thread pool bounded and add a command-line UI test&lt;/p&gt;

&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/thrift/TBoundedThreadPoolServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/thrift/ThriftServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/Threads.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/resources/hbase-default.xml&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/thrift/TestThriftServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/thrift/TestThriftServerCmdLine.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/TestThreads.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13157323" author="yuzhihong@gmail.com" created="Fri, 25 Nov 2011 23:03:38 +0000"  >&lt;p&gt;Addendum to add category for TestThreads&lt;/p&gt;</comment>
                            <comment id="13157328" author="hadoopqa" created="Fri, 25 Nov 2011 23:11:48 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12505163/4863.addendum&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12505163/4863.addendum&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/372//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/372//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13157330" author="yuzhihong@gmail.com" created="Fri, 25 Nov 2011 23:17:38 +0000"  >&lt;p&gt;Addendum applied to TRUNK.&lt;/p&gt;</comment>
                            <comment id="13157356" author="hudson" created="Sat, 26 Nov 2011 01:01:53 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2484 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2484/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2484/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4863&quot; title=&quot;Make Thrift server thread pool bounded and add a command-line UI test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4863&quot;&gt;&lt;del&gt;HBASE-4863&lt;/del&gt;&lt;/a&gt; Addendum to add category for TestThreads&lt;/p&gt;

&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/TestThreads.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13157397" author="hudson" created="Sat, 26 Nov 2011 07:07:18 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-security #10 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-security/10/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-security/10/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4863&quot; title=&quot;Make Thrift server thread pool bounded and add a command-line UI test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4863&quot;&gt;&lt;del&gt;HBASE-4863&lt;/del&gt;&lt;/a&gt; Addendum to add category for TestThreads&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4863&quot; title=&quot;Make Thrift server thread pool bounded and add a command-line UI test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4863&quot;&gt;&lt;del&gt;HBASE-4863&lt;/del&gt;&lt;/a&gt; Phabricator D531 Make Thrift server thread pool bounded and add a command-line UI test&lt;/p&gt;

&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/TestThreads.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/thrift/TBoundedThreadPoolServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/thrift/ThriftServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/Threads.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/resources/hbase-default.xml&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/thrift/TestThriftServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/thrift/TestThriftServerCmdLine.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/TestThreads.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13161526" author="phabricator@reviews.facebook.net" created="Fri, 2 Dec 2011 10:11:39 +0000"  >&lt;p&gt;mbautin has abandoned the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4863&quot; title=&quot;Make Thrift server thread pool bounded and add a command-line UI test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4863&quot;&gt;&lt;del&gt;HBASE-4863&lt;/del&gt;&lt;/a&gt; Make HBase Thrift server more configurable and add a command-line UI test&quot;.&lt;/p&gt;

&lt;p&gt;  This diff was committed by @TedYu (&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk@1206267&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk@1206267&lt;/a&gt;, &lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk@1206369&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk@1206369&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D531&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D531&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12655600">HBASE-8840</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12505038" name="0001-Fix-thread-leaks-in-the-HBase-thread-pool-server.patch" size="59124" author="mikhail" created="Thu, 24 Nov 2011 20:54:25 +0000"/>
                            <attachment id="12505096" name="0002-Fix-thread-leaks-in-the-HBase-thread-pool-server.patch" size="59466" author="mikhail" created="Fri, 25 Nov 2011 10:32:11 +0000"/>
                            <attachment id="12505163" name="4863.addendum" size="784" author="yuzhihong@gmail.com" created="Fri, 25 Nov 2011 23:03:38 +0000"/>
                            <attachment id="12504999" name="ASF.LICENSE.NOT.GRANTED--D531.1.patch" size="51347" author="phabricator@reviews.facebook.net" created="Thu, 24 Nov 2011 09:50:40 +0000"/>
                            <attachment id="12505000" name="ASF.LICENSE.NOT.GRANTED--D531.2.patch" size="51323" author="phabricator@reviews.facebook.net" created="Thu, 24 Nov 2011 09:54:40 +0000"/>
                            <attachment id="12505037" name="ASF.LICENSE.NOT.GRANTED--D531.3.patch" size="56452" author="phabricator@reviews.facebook.net" created="Thu, 24 Nov 2011 20:52:40 +0000"/>
                            <attachment id="12505097" name="ASF.LICENSE.NOT.GRANTED--D531.4.patch" size="56794" author="phabricator@reviews.facebook.net" created="Fri, 25 Nov 2011 10:32:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 24 Nov 2011 09:50:39 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>218324</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 3 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08r0v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48978</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>