<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:02:39 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-9239/HBASE-9239.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-9239] TestStoreFileBlockCacheSummary#testBlockCacheSummary occasionally fails</title>
                <link>https://issues.apache.org/jira/browse/HBASE-9239</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;From &lt;a href=&quot;https://builds.apache.org/job/HBase-0.95/455/testReport/org.apache.hadoop.hbase.regionserver/TestStoreFileBlockCacheSummary/testBlockCacheSummary/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.95/455/testReport/org.apache.hadoop.hbase.regionserver/TestStoreFileBlockCacheSummary/testBlockCacheSummary/&lt;/a&gt; :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.AssertionError: blockCache summary has entries expected:&amp;lt;2&amp;gt; but was:&amp;lt;3&amp;gt;
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.failNotEquals(Assert.java:743)
	at org.junit.Assert.assertEquals(Assert.java:118)
	at org.junit.Assert.assertEquals(Assert.java:555)
	at org.apache.hadoop.hbase.regionserver.TestStoreFileBlockCacheSummary.testBlockCacheSummary(TestStoreFileBlockCacheSummary.java:112)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This was due to an additional entry for namespace table:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2013-08-16 00:24:25,337 INFO  [pool-1-thread-1] regionserver.TestStoreFileBlockCacheSummary(110): blockCacheSummary: [BlockCacheSummaryEntry [table=namespace, columnFamily=info, blocks=1, heapSize=512], BlockCacheSummaryEntry [table=testTable, columnFamily=testFamily, blocks=1, heapSize=664], BlockCacheSummaryEntry [table=testTable2, columnFamily=testFamily, blocks=1, heapSize=664]]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12663964">HBASE-9239</key>
            <summary>TestStoreFileBlockCacheSummary#testBlockCacheSummary occasionally fails</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yuzhihong@gmail.com">Ted Yu</assignee>
                                    <reporter username="yuzhihong@gmail.com">Ted Yu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Aug 2013 01:00:11 +0000</created>
                <updated>Fri, 20 Nov 2015 11:53:35 +0000</updated>
                            <resolved>Sat, 24 Aug 2013 01:18:52 +0000</resolved>
                                                    <fixVersion>0.98.0</fixVersion>
                    <fixVersion>0.96.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13741779" author="yuzhihong@gmail.com" created="Fri, 16 Aug 2013 01:17:51 +0000"  >&lt;p&gt;Patch v1 allows more than 2 BlockCacheColumnFamilySummary entries to be retrieved.&lt;/p&gt;

&lt;p&gt;Subsequent assertions work on the last two entries.&lt;/p&gt;

&lt;p&gt;Test passed locally.&lt;/p&gt;</comment>
                            <comment id="13741825" author="hadoopqa" created="Fri, 16 Aug 2013 02:34:00 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12598339/9239-v1.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12598339/9239-v1.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6772//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6772//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6772//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6772//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6772//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6772//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6772//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6772//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6772//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6772//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6772//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6772//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6772//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6772//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6772//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6772//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6772//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6772//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6772//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6772//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13741864" author="ram_krish" created="Fri, 16 Aug 2013 03:37:38 +0000"  >&lt;p&gt;@Ted&lt;br/&gt;
Patch is good.  &lt;br/&gt;
I have a suggestion, from the logs could see that the NameSpaceJanitor issues a scan on the Meta and that includes Namespace into the blockcache summary.&lt;br/&gt;
From code am not getting where the scan is happening through NameSpaceJanitor.  &lt;br/&gt;
May be instead working with the index, we can just check if the testTable and testTable2 are available in the list that we are checking.  &lt;br/&gt;
If the catalog janitor adds any other namespace entries this may fail?  So we will check if the list contains those two tables then it may be easier.&lt;/p&gt;</comment>
                            <comment id="13741865" author="yuzhihong@gmail.com" created="Fri, 16 Aug 2013 03:43:27 +0000"  >&lt;p&gt;I thought about extracting entries for the test tables.&lt;br/&gt;
However I think that is not needed because of the following (javadoc of getBlockCacheColumnFamilySummaries()):&lt;/p&gt;

&lt;p&gt;The contract of this interface is to return the List in sorted order by Table name, then ColumnFamily.&lt;/p&gt;

&lt;p&gt;Meaning the test tables would always follow namespace table in the list.&lt;/p&gt;</comment>
                            <comment id="13741867" author="ram_krish" created="Fri, 16 Aug 2013 03:45:34 +0000"  >&lt;p&gt;Yes Ted.  I read that javadoc.  But anyother namespace entry could be added?  If so again this index may change.  So i suggested that way.&lt;/p&gt;</comment>
                            <comment id="13741877" author="yuzhihong@gmail.com" created="Fri, 16 Aug 2013 03:52:47 +0000"  >&lt;p&gt;I think implementation for namespace is complete.&lt;br/&gt;
So no new entry would be added, I assume.&lt;/p&gt;</comment>
                            <comment id="13741883" author="ram_krish" created="Fri, 16 Aug 2013 03:57:59 +0000"  >&lt;p&gt;Okie.. So +1 then. Thanks Ted.&lt;/p&gt;</comment>
                            <comment id="13741894" author="anoop.hbase" created="Fri, 16 Aug 2013 04:14:20 +0000"  >&lt;p&gt;Just seeing the patch I also got the same doubt as Ram mentioned.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;The contract of this interface is to return the List in sorted order by Table name, then ColumnFamily.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Said above , +1 then&lt;/p&gt;</comment>
                            <comment id="13742348" author="yuzhihong@gmail.com" created="Fri, 16 Aug 2013 16:17:13 +0000"  >&lt;p&gt;Integrated to trunk.&lt;/p&gt;

&lt;p&gt;Thanks for the reviews.&lt;/p&gt;</comment>
                            <comment id="13742564" author="yuzhihong@gmail.com" created="Fri, 16 Aug 2013 20:13:45 +0000"  >&lt;p&gt;TestBlockCacheColumnFamilySummary passed in trunk builds.&lt;/p&gt;

&lt;p&gt;Integrated to 0.95 branch as well since the cited test failure happened in 0.95 build.&lt;/p&gt;</comment>
                            <comment id="13742574" author="hudson" created="Fri, 16 Aug 2013 20:31:23 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-TRUNK #4403 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4403/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4403/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9239&quot; title=&quot;TestStoreFileBlockCacheSummary#testBlockCacheSummary occasionally fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9239&quot;&gt;&lt;del&gt;HBASE-9239&lt;/del&gt;&lt;/a&gt; TestStoreFileBlockCacheSummary#testBlockCacheSummary occasionally fails (Ted Yu) (tedyu: rev 1514770)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestStoreFileBlockCacheSummary.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13742591" author="hudson" created="Fri, 16 Aug 2013 20:53:11 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #681 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/681/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/681/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9239&quot; title=&quot;TestStoreFileBlockCacheSummary#testBlockCacheSummary occasionally fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9239&quot;&gt;&lt;del&gt;HBASE-9239&lt;/del&gt;&lt;/a&gt; TestStoreFileBlockCacheSummary#testBlockCacheSummary occasionally fails (Ted Yu) (tedyu: rev 1514770)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestStoreFileBlockCacheSummary.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13742662" author="hudson" created="Fri, 16 Aug 2013 22:23:06 +0000"  >&lt;p&gt;FAILURE: Integrated in hbase-0.95-on-hadoop2 #247 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95-on-hadoop2/247/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95-on-hadoop2/247/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9239&quot; title=&quot;TestStoreFileBlockCacheSummary#testBlockCacheSummary occasionally fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9239&quot;&gt;&lt;del&gt;HBASE-9239&lt;/del&gt;&lt;/a&gt; TestStoreFileBlockCacheSummary#testBlockCacheSummary occasionally fails (tedyu: rev 1514878)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestStoreFileBlockCacheSummary.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13742716" author="hudson" created="Fri, 16 Aug 2013 23:35:40 +0000"  >&lt;p&gt;SUCCESS: Integrated in hbase-0.95 #460 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95/460/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95/460/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9239&quot; title=&quot;TestStoreFileBlockCacheSummary#testBlockCacheSummary occasionally fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9239&quot;&gt;&lt;del&gt;HBASE-9239&lt;/del&gt;&lt;/a&gt; TestStoreFileBlockCacheSummary#testBlockCacheSummary occasionally fails (tedyu: rev 1514878)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestStoreFileBlockCacheSummary.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15016017" author="lars_francke" created="Fri, 20 Nov 2015 11:53:35 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12598339" name="9239-v1.txt" size="1312" author="yuzhihong@gmail.com" created="Fri, 16 Aug 2013 01:17:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 16 Aug 2013 02:34:00 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>343965</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1nbfz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>344267</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>