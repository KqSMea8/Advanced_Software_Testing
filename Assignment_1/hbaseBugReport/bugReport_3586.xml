<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:11:27 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-3586/HBASE-3586.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-3586] Improve the selection of regions to balance</title>
                <link>https://issues.apache.org/jira/browse/HBASE-3586</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Currently LoadBalancer goes through the list of regions per RS and grabs the few first ones to balance. This is not bad, but that list is often sorted naturally since the a RS that boots will open the regions in a sequential and sorted order (since it comes from .META.) which means that we&apos;re balancing regions starting in an almost sorted fashion.&lt;/p&gt;

&lt;p&gt;We discovered that because one of our internal users created a new table starting with letter &quot;p&quot; which has now grown to 100 regions in the last few hours and they are all served by 1 region server. Looking at the master&apos;s log, the balancer has moved as many regions from that region server but they are all from the same table that starts with letter &quot;a&quot; (and the regions that were moved all come one after the other).&lt;/p&gt;

&lt;p&gt;The part of the code that should be modified is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (HRegionInfo hri: regions) {
  &lt;span class=&quot;code-comment&quot;&gt;// Don&apos;t rebalance meta regions.
&lt;/span&gt;  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (hri.isMetaRegion()) &lt;span class=&quot;code-keyword&quot;&gt;continue&lt;/span&gt;; 
  regionsToMove.add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RegionPlan(hri, serverInfo, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;));
  numTaken++;
  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (numTaken &amp;gt;= numToOffload) &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12500087">HBASE-3586</key>
            <summary>Improve the selection of regions to balance</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yuzhihong@gmail.com">Ted Yu</assignee>
                                    <reporter username="jdcryans">Jean-Daniel Cryans</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Mar 2011 19:09:46 +0000</created>
                <updated>Fri, 20 Nov 2015 12:43:09 +0000</updated>
                            <resolved>Mon, 7 Mar 2011 23:38:43 +0000</resolved>
                                    <version>0.90.1</version>
                                    <fixVersion>0.90.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13001047" author="yuzhihong@gmail.com" created="Tue, 1 Mar 2011 19:34:34 +0000"  >&lt;p&gt;See my comment at 29/Jan/11 00:53 in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3373&quot; title=&quot;Allow regions to be load-balanced by table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3373&quot;&gt;&lt;del&gt;HBASE-3373&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13001075" author="jdcryans" created="Tue, 1 Mar 2011 19:57:30 +0000"  >&lt;p&gt;You&apos;re talking of sorting regionsToMove by creation time, in this jira I&apos;m talking about filling this structure by choosing regions in a slightly different way. Unless that&apos;s what you meant too, that we should choose regions from those lists according to their creation time?&lt;/p&gt;</comment>
                            <comment id="13001087" author="yuzhihong@gmail.com" created="Tue, 1 Mar 2011 20:11:01 +0000"  >&lt;p&gt;That&apos;s what I meant. LoadBalancer should select/move young regions.&lt;/p&gt;</comment>
                            <comment id="13001093" author="jdcryans" created="Tue, 1 Mar 2011 20:20:41 +0000"  >&lt;p&gt;Ah ok that wasn&apos;t clear, well let&apos;s try it out!&lt;/p&gt;</comment>
                            <comment id="13002324" author="apurtell" created="Thu, 3 Mar 2011 23:32:40 +0000"  >&lt;p&gt;Something like so?&lt;/p&gt;</comment>
                            <comment id="13002332" author="yuzhihong@gmail.com" created="Thu, 3 Mar 2011 23:48:00 +0000"  >&lt;p&gt;Looking at how HRegionInfo gets added into AssignmentManager.servers:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; 
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void addToServers(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; HServerInfo hsi, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; HRegionInfo hri) {
    List&amp;lt;HRegionInfo&amp;gt; hris = servers.get(hsi);
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (hris == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
      hris = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;HRegionInfo&amp;gt;();
      servers.put(hsi, hris);
    }
    hris.add(hri);
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 
&lt;p&gt;I think we can traverse List&amp;lt;HRegionInfo&amp;gt; in reverse order because young regions are added to the tail of the List.&lt;br/&gt;
I have this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; sz = regions.size();
      &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = sz-1; i &amp;gt;= 0; i--) {
    	  HRegionInfo hri = regions.get(i);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13002343" author="apurtell" created="Fri, 4 Mar 2011 00:03:33 +0000"  >&lt;p&gt;Sure that&apos;s lighter weight. Your idea as patch.&lt;/p&gt;</comment>
                            <comment id="13002345" author="yuzhihong@gmail.com" created="Fri, 4 Mar 2011 00:13:37 +0000"  >&lt;p&gt;I also have the following:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-comment&quot;&gt;// put young regions at the beginning of regionsToMove
&lt;/span&gt;    Collections.sort(regionsToMove, rpComparator);

    &lt;span class=&quot;code-comment&quot;&gt;// Walk down least loaded, filling each to the min&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;where RegionPlanComparator is defined as:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; class RegionPlanComparator &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; Comparator&amp;lt;RegionPlan&amp;gt; {
      @Override
      &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; compare(RegionPlan l, RegionPlan r) {
    	  &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; diff = r.getRegionInfo().getRegionId() - l.getRegionInfo().getRegionId();
    	  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (diff &amp;lt; 0) &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; -1;
    	  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (diff &amp;gt; 0) &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; 1;
    	  &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; 0;
      }	  
  }
  &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; RegionPlanComparator rpComparator = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RegionPlanComparator();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13002354" author="apurtell" created="Fri, 4 Mar 2011 00:29:23 +0000"  >&lt;p&gt;@Ted: So maybe you should post a patch here? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13002360" author="yuzhihong@gmail.com" created="Fri, 4 Mar 2011 00:35:39 +0000"  >&lt;p&gt;I can try.&lt;br/&gt;
But I need to trim down my changes for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3373&quot; title=&quot;Allow regions to be load-balanced by table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3373&quot;&gt;&lt;del&gt;HBASE-3373&lt;/del&gt;&lt;/a&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
I don&apos;t want to repeat the experience of my previous submission. So I would wait for other dev&apos;s comment first.&lt;/p&gt;</comment>
                            <comment id="13002370" author="apurtell" created="Fri, 4 Mar 2011 00:45:59 +0000"  >&lt;p&gt;I wouldn&apos;t wait for comment, you have someone giving you a +1 on approach. Next we need a patch to test.&lt;/p&gt;</comment>
                            <comment id="13002428" author="yuzhihong@gmail.com" created="Fri, 4 Mar 2011 02:56:00 +0000"  >&lt;p&gt;Per Andrew&apos;s request, here is my patch.&lt;br/&gt;
Pardon me for possible white space issue.&lt;/p&gt;</comment>
                            <comment id="13002465" author="stack" created="Fri, 4 Mar 2011 06:24:05 +0000"  >&lt;p&gt;+1 on Ted&apos;s patch.  LGTM.&lt;/p&gt;</comment>
                            <comment id="13002643" author="yuzhihong@gmail.com" created="Fri, 4 Mar 2011 15:03:06 +0000"  >&lt;p&gt;Added import statement.&lt;/p&gt;</comment>
                            <comment id="13002682" author="apurtell" created="Fri, 4 Mar 2011 16:00:19 +0000"  >&lt;p&gt;Committed to trunk and 0.90 branch.&lt;/p&gt;</comment>
                            <comment id="13003060" author="yuzhihong@gmail.com" created="Sat, 5 Mar 2011 23:02:27 +0000"  >&lt;p&gt;The patch actually aggravates unbalanced load in a situation where one or more region servers weren&apos;t assigned (any) region and a table with multiple regions is created.&lt;br/&gt;
All the new regions from this table would be assigned to the region servers which didn&apos;t carry any region.&lt;/p&gt;</comment>
                            <comment id="13003065" author="yuzhihong@gmail.com" created="Sat, 5 Mar 2011 23:25:19 +0000"  >&lt;p&gt;Although balanceCluster() can be made more complex by considering both old and new regions, the new patch achieves the same effect.&lt;br/&gt;
When creating a table with multiple regions, I check whether there&apos;re online region servers which don&apos;t carry region (this can be relaxed by introducing a threshold which separates overloaded and underloaded servers). If there&apos;re such servers, balance() is called to balance the (relatively old) regions.&lt;br/&gt;
Since assignmentManager.assignUserRegions() uses round-robin assignment, cluster would still be balanced when createTable() returns.&lt;/p&gt;</comment>
                            <comment id="13003074" author="ryanobjc" created="Sun, 6 Mar 2011 00:23:45 +0000"  >&lt;p&gt;Can you try a random approach? Often random can be more predictable and not&lt;br/&gt;
have weak edge cases that different use patterns can tickle.&lt;/p&gt;</comment>
                            <comment id="13003075" author="yuzhihong@gmail.com" created="Sun, 6 Mar 2011 00:29:30 +0000"  >&lt;p&gt;@Ryan: I think you&apos;re referring to my first patch. I partially agree. We may provide (at least two) policies - one favoring moving young regions and the other doing random region selection.&lt;/p&gt;

&lt;p&gt;I think my second patch establishes condition for the first to function as expected.&lt;br/&gt;
I would like to hear about other use patterns which are not covered by both patches.&lt;/p&gt;</comment>
                            <comment id="13003092" author="yuzhihong@gmail.com" created="Sun, 6 Mar 2011 03:55:40 +0000"  >&lt;p&gt;One of the goals of load balancer is to minimize the number of region movements so that scanner timeout is minimized.&lt;br/&gt;
The current approach to balancing young regions aligns better with this goal.&lt;br/&gt;
For random approach, we may need to constantly move some regions to achieve balanced load.&lt;/p&gt;</comment>
                            <comment id="13003093" author="stack" created="Sun, 6 Mar 2011 05:17:07 +0000"  >&lt;p&gt;Yeah, agree w/ Ryan that we should try random as baseline.  Lets do other policies in a different issue (Thanks for testing your patch Ted and finding that it may be suboptimal).&lt;/p&gt;
</comment>
                            <comment id="13003094" author="stack" created="Sun, 6 Mar 2011 05:18:28 +0000"  >&lt;p&gt;Oh, just to say that at our house, we had a pathological condition where balancer ended up assigning all regions for a table to one server, then as it split, the balancer kept landing the new splits back to the same origin server.  Chatting, random would have done for our case.&lt;/p&gt;</comment>
                            <comment id="13003099" author="yuzhihong@gmail.com" created="Sun, 6 Mar 2011 05:36:43 +0000"  >&lt;p&gt;I assume the above situation happened without my first patch &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
Can you describe how that server had lower than average number of regions ?&lt;/p&gt;

&lt;p&gt;There&apos;re two scenarios which would make my first patch suboptimal:&lt;br/&gt;
1. After cluster starts up, some region servers aren&apos;t immediately detected by master as being online. Therefore they carry no regions.&lt;br/&gt;
2. When region server crashes and is brought back up back monitoring script.&lt;br/&gt;
If one or more tables get created immediately after either of the above two scenarios, balancer would assign (young) regions from the new table to the few region servers which didn&apos;t carry regions.&lt;/p&gt;</comment>
                            <comment id="13003110" author="yuzhihong@gmail.com" created="Sun, 6 Mar 2011 07:10:14 +0000"  >&lt;p&gt;Although random selection statistically achieves balance, I still prefer a deterministic approach.&lt;br/&gt;
Consider the following variant for my patches:&lt;br/&gt;
Instead of using the following loop to fill out regionsToMove:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = sz-1; i &amp;gt;= 0; i--) {
    	  HRegionInfo hri = regions.get(i);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We alternate between the head and tail of regions (picking both young and old ones).&lt;/p&gt;

&lt;p&gt;We still keep the following sort():&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    Collections.sort(regionsToMove, rpComparator);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We then iterate through underloadedServers repeatedly, doing the following action alternately:&lt;br/&gt;
picking one region from head of regionsToMove in passes 1, 3, 5, etc&lt;br/&gt;
picking one region from tail of regionsToMove in passes 2, 4, 6, etc.&lt;/p&gt;

&lt;p&gt;E.g. suppose RS1 has regions with region Ids of 42, 54, 105 and 201&lt;br/&gt;
RS2 has regions with region Ids of 34, 104, 110 and 154&lt;br/&gt;
Suppose we need to offload some regions to RS3 and RS4 which didn&apos;t carry regions.&lt;/p&gt;

&lt;p&gt;regionsToMove would contain regions (201, 42, 154, 34) before sorting and regions (201, 154, 42, 34) after sorting.&lt;br/&gt;
Then we assign&lt;br/&gt;
region 201 to RS3, region 154 to RS4&lt;br/&gt;
region 34 to RS3, region 42 to RS4&lt;/p&gt;

&lt;p&gt;Please comment.&lt;/p&gt;</comment>
                            <comment id="13003600" author="stack" created="Mon, 7 Mar 2011 21:00:15 +0000"  >&lt;p&gt;I&apos;d suggest we checkin random for now then experiment thereafter?&lt;/p&gt;</comment>
                            <comment id="13003611" author="hudson" created="Mon, 7 Mar 2011 21:07:33 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #1771 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/HBase-TRUNK/1771/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/HBase-TRUNK/1771/&lt;/a&gt;)&lt;/p&gt;
</comment>
                            <comment id="13003612" author="yuzhihong@gmail.com" created="Mon, 7 Mar 2011 21:08:42 +0000"  >&lt;p&gt;Random selection approach would make debugging harder.&lt;/p&gt;

&lt;p&gt;A patch using random selection is welcome.&lt;/p&gt;</comment>
                            <comment id="13003664" author="stack" created="Mon, 7 Mar 2011 22:35:49 +0000"  >&lt;p&gt;How is this.  Adds a test too.&lt;/p&gt;</comment>
                            <comment id="13003665" author="ryanobjc" created="Mon, 7 Mar 2011 22:40:31 +0000"  >&lt;p&gt;+1 lgtm&lt;/p&gt;</comment>
                            <comment id="13003666" author="stack" created="Mon, 7 Mar 2011 22:47:02 +0000"  >&lt;p&gt;Here is version that does not include pollution patching FSUtils.&lt;/p&gt;</comment>
                            <comment id="13003681" author="yuzhihong@gmail.com" created="Mon, 7 Mar 2011 23:19:45 +0000"  >&lt;p&gt;Overall +1&lt;/p&gt;

&lt;p&gt;For TestLoadBalancer.java, I would use simpler form because LoadBalancer.randomize() is only called once for each server in balanceCluster():&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        List&amp;lt;HRegionInfo&amp;gt; copy = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;HRegionInfo&amp;gt;(original);
        List&amp;lt;HRegionInfo&amp;gt; randomized = LoadBalancer.randomize(copy);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (original.equals(randomized)) {
        	assertFalse(e.getKey().toString() + &lt;span class=&quot;code-quote&quot;&gt;&quot; has identical region list&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I removed some logging which should have been done using LOG.info().&lt;br/&gt;
I also ran TestAdmin which passed.&lt;/p&gt;

&lt;p&gt;This approach is smart and should avoid common pitfalls statistically.&lt;/p&gt;

&lt;p&gt;Let&apos;s observe its efficacy in production. &lt;/p&gt;</comment>
                            <comment id="13003683" author="apurtell" created="Mon, 7 Mar 2011 23:26:29 +0000"  >&lt;p&gt;@Ted: Thank you for your contributions.&lt;/p&gt;</comment>
                            <comment id="13003686" author="yuzhihong@gmail.com" created="Mon, 7 Mar 2011 23:29:35 +0000"  >&lt;p&gt;I feel sweat on my back &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I am still a beginner. Let&apos;s make HBase better together.&lt;/p&gt;</comment>
                            <comment id="13003691" author="stack" created="Mon, 7 Mar 2011 23:38:43 +0000"  >&lt;p&gt;Committed patch to branch and trunk.  Thanks for review Ryan.  Lets open new issue Ted to do other balancing algorithms.&lt;/p&gt;</comment>
                            <comment id="13003703" author="stack" created="Mon, 7 Mar 2011 23:54:49 +0000"  >&lt;p&gt;I opened new issue for continuing the above balancer explorations: &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3609&quot; title=&quot;Improve the selection of regions to balance; part 2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3609&quot;&gt;&lt;del&gt;HBASE-3609&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13003823" author="stack" created="Tue, 8 Mar 2011 06:03:58 +0000"  >&lt;p&gt;Thanks for review Ted.&lt;/p&gt;</comment>
                            <comment id="13005589" author="hudson" created="Fri, 11 Mar 2011 10:34:12 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #1781 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/HBase-TRUNK/1781/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/HBase-TRUNK/1781/&lt;/a&gt;)&lt;/p&gt;
</comment>
                            <comment id="13006283" author="yuzhihong@gmail.com" created="Sun, 13 Mar 2011 21:54:45 +0000"  >&lt;p&gt;I ran the random region selector on staging cluster (15 region servers, 4600 regions).&lt;br/&gt;
In terms of region count, load is balanced.&lt;br/&gt;
I observed that a few region servers received around 0 requests even though they carried some regions of the table which was actively written to.&lt;/p&gt;</comment>
                            <comment id="13006471" author="stack" created="Mon, 14 Mar 2011 15:48:39 +0000"  >&lt;p&gt;@Ted So you tested the patch that was submitted here?  The random assignment?  The balancer only does count of regions, not load on the regions, so yes, I&apos;d imagine that its possible some regions would be taking no load.&lt;/p&gt;</comment>
                            <comment id="13006493" author="yuzhihong@gmail.com" created="Mon, 14 Mar 2011 16:29:33 +0000"  >&lt;p&gt;Right.&lt;br/&gt;
I am continuing my effort toward better load balancing through &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3507&quot; title=&quot;requests count per HRegion&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3507&quot;&gt;&lt;del&gt;HBASE-3507&lt;/del&gt;&lt;/a&gt;, etc.&lt;/p&gt;</comment>
                            <comment id="15017446" author="lars_francke" created="Fri, 20 Nov 2015 12:43:09 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12503142">HBASE-3724</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12472871" name="3586-randomize-v2.txt" size="6171" author="stack" created="Mon, 7 Mar 2011 22:47:02 +0000"/>
                            <attachment id="12472869" name="3586-randomize.txt" size="8704" author="stack" created="Mon, 7 Mar 2011 22:35:49 +0000"/>
                            <attachment id="12472633" name="HBASE-3586-by-region-age.patch" size="1591" author="apurtell" created="Fri, 4 Mar 2011 00:03:33 +0000"/>
                            <attachment id="12472631" name="HBASE-3586-by-region-age.patch" size="1903" author="apurtell" created="Thu, 3 Mar 2011 23:36:44 +0000"/>
                            <attachment id="12472762" name="hbase-3586-table-creation.txt" size="1297" author="yuzhihong@gmail.com" created="Sat, 5 Mar 2011 23:19:14 +0000"/>
                            <attachment id="12472677" name="hbase-3586-with-sort.txt" size="2051" author="yuzhihong@gmail.com" created="Fri, 4 Mar 2011 15:03:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 1 Mar 2011 19:34:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33100</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hmw7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>100971</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>