<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:31:44 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5873/HBASE-5873.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5873] TimeOut Monitor thread should be started after atleast one region server registers.</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5873</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Currently timeout monitor thread is started even before the region server has registered with the master.&lt;br/&gt;
In timeout monitor we depend on the region server to be online &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; allRSsOffline = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.serverManager.getOnlineServersList().
        isEmpty();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now when the master starts up it sees there are no online servers and hence sets &lt;br/&gt;
allRSsOffline to true.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
setAllRegionServersOffline(allRSsOffline);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So this.allRegionServersOffline is also true.&lt;br/&gt;
By this time an RS has come up,&lt;br/&gt;
Now timeout comes up again (after 10secs) in the next cycle he sees allRSsOffline  as false.&lt;br/&gt;
Hence &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.allRegionServersOffline &amp;amp;&amp;amp; !allRSsOffline) {
            &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; some RSs just came back online, we can start the
&lt;/span&gt;            &lt;span class=&quot;code-comment&quot;&gt;// the assignment right away
&lt;/span&gt;            actOnTimeOut(regionState);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This condition makes him to take action based on timeout.&lt;br/&gt;
Because of this even if one Region assignment of ROOT is going on, this piece of code triggers another assignment and thus we get RegionAlreadyinTransition Exception. Later we need to wait for 30 mins for assigning ROOT itself.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12552533">HBASE-5873</key>
            <summary>TimeOut Monitor thread should be started after atleast one region server registers.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rajesh23">rajeshbabu</assignee>
                                    <reporter username="ram_krish">ramkrishna.s.vasudevan</reporter>
                        <labels>
                    </labels>
                <created>Wed, 25 Apr 2012 08:17:50 +0000</created>
                <updated>Tue, 26 Feb 2013 08:12:30 +0000</updated>
                            <resolved>Wed, 25 Apr 2012 20:58:08 +0000</resolved>
                                    <version>0.90.6</version>
                                    <fixVersion>0.94.0</fixVersion>
                    <fixVersion>0.95.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13261710" author="rajesh23" created="Wed, 25 Apr 2012 15:20:11 +0000"  >&lt;p&gt;Attached patch.Please review and provide your comments/suggestions.&lt;/p&gt;</comment>
                            <comment id="13261713" author="hadoopqa" created="Wed, 25 Apr 2012 15:22:11 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12524287/HBASE-5873.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12524287/HBASE-5873.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1645//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1645//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13261742" author="rajesh23" created="Wed, 25 Apr 2012 15:57:52 +0000"  >&lt;p&gt;This patch uploaded for 0.94&lt;/p&gt;</comment>
                            <comment id="13261753" author="lhofhansl" created="Wed, 25 Apr 2012 16:03:14 +0000"  >&lt;p&gt;Trunk patch for HadoopQA&lt;/p&gt;</comment>
                            <comment id="13261755" author="lhofhansl" created="Wed, 25 Apr 2012 16:03:51 +0000"  >&lt;p&gt;Oops, rajesh, we crossed comments.&lt;/p&gt;</comment>
                            <comment id="13261763" author="zhihyu@ebaysf.com" created="Wed, 25 Apr 2012 16:10:52 +0000"  >&lt;p&gt;+1 if tests pass.&lt;/p&gt;</comment>
                            <comment id="13261802" author="hadoopqa" created="Wed, 25 Apr 2012 16:55:45 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12524297/5873-trunk.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12524297/5873-trunk.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 5 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1647//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1647//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1647//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1647//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1647//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1647//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13261908" author="lhofhansl" created="Wed, 25 Apr 2012 18:34:05 +0000"  >&lt;p&gt;Looks good, tests pass. +1 from me.&lt;/p&gt;</comment>
                            <comment id="13261940" author="lhofhansl" created="Wed, 25 Apr 2012 18:52:25 +0000"  >&lt;p&gt;This change does violate encapsulation a bit.&lt;br/&gt;
I double checked where in the code we create instances of AssignmentManager. Besides the HMaster it is only from tests (and they all pass it&apos;s good).&lt;/p&gt;</comment>
                            <comment id="13262061" author="lhofhansl" created="Wed, 25 Apr 2012 20:44:00 +0000"  >&lt;p&gt;Committed to 0.94 and trunk.&lt;br/&gt;
Creating 0.90 and 0.92 patches now.&lt;/p&gt;</comment>
                            <comment id="13262075" author="lhofhansl" created="Wed, 25 Apr 2012 20:58:08 +0000"  >&lt;p&gt;And committed to 0.90 and 0.92&lt;/p&gt;</comment>
                            <comment id="13262159" author="hudson" created="Wed, 25 Apr 2012 21:50:45 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2814 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2814/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2814/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5873&quot; title=&quot;TimeOut Monitor thread should be started after atleast one region server registers.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5873&quot;&gt;&lt;del&gt;HBASE-5873&lt;/del&gt;&lt;/a&gt; TimeOut Monitor thread should be started after atleast one region server registers. (Revision 1330551)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13262164" author="hudson" created="Wed, 25 Apr 2012 21:54:40 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #149 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/149/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/149/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5873&quot; title=&quot;TimeOut Monitor thread should be started after atleast one region server registers.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5873&quot;&gt;&lt;del&gt;HBASE-5873&lt;/del&gt;&lt;/a&gt; TimeOut Monitor thread should be started after atleast one region server registers. (Revision 1330549)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13262236" author="hudson" created="Wed, 25 Apr 2012 23:19:12 +0000"  >&lt;p&gt;Integrated in HBase-0.92 #391 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92/391/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92/391/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5873&quot; title=&quot;TimeOut Monitor thread should be started after atleast one region server registers.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5873&quot;&gt;&lt;del&gt;HBASE-5873&lt;/del&gt;&lt;/a&gt; TimeOut Monitor thread should be started after atleast one region server registers. (Revision 1330558)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13262275" author="hudson" created="Thu, 26 Apr 2012 00:21:57 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-security #184 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-security/184/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-security/184/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5873&quot; title=&quot;TimeOut Monitor thread should be started after atleast one region server registers.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5873&quot;&gt;&lt;del&gt;HBASE-5873&lt;/del&gt;&lt;/a&gt; TimeOut Monitor thread should be started after atleast one region server registers. (Revision 1330551)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13262360" author="ram_krish" created="Thu, 26 Apr 2012 03:50:46 +0000"  >&lt;p&gt;@Lars&lt;br/&gt;
Thanks for taking care of committing to the other branches also. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13263135" author="hudson" created="Thu, 26 Apr 2012 20:53:48 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #22 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/22/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/22/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5873&quot; title=&quot;TimeOut Monitor thread should be started after atleast one region server registers.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5873&quot;&gt;&lt;del&gt;HBASE-5873&lt;/del&gt;&lt;/a&gt; TimeOut Monitor thread should be started after atleast one region server registers. (Revision 1330549)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13268874" author="hudson" created="Sat, 5 May 2012 02:28:21 +0000"  >&lt;p&gt;Integrated in HBase-0.92-security #106 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92-security/106/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92-security/106/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5873&quot; title=&quot;TimeOut Monitor thread should be started after atleast one region server registers.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5873&quot;&gt;&lt;del&gt;HBASE-5873&lt;/del&gt;&lt;/a&gt; TimeOut Monitor thread should be started after atleast one region server registers. (Revision 1330558)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12524297" name="5873-trunk.txt" size="1794" author="lhofhansl" created="Wed, 25 Apr 2012 16:03:14 +0000"/>
                            <attachment id="12524287" name="HBASE-5873.patch" size="1788" author="rajesh23" created="Wed, 25 Apr 2012 15:16:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 25 Apr 2012 15:20:11 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>236753</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 32 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i068p3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34340</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>