<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:36:23 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-12779/HBASE-12779.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-12779] SplitTransaction: Add metrics</title>
                <link>https://issues.apache.org/jira/browse/HBASE-12779</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description></description>
                <environment></environment>
        <key id="12764104">HBASE-12779</key>
            <summary>SplitTransaction: Add metrics</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12763912">HBASE-12765</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lhofhansl">Lars Hofhansl</assignee>
                                    <reporter username="lhofhansl">Lars Hofhansl</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Dec 2014 00:55:12 +0000</created>
                <updated>Sat, 21 Feb 2015 23:49:41 +0000</updated>
                            <resolved>Tue, 6 Jan 2015 01:19:07 +0000</resolved>
                                                    <fixVersion>1.0.0</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>0.98.10</fixVersion>
                    <fixVersion>1.1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="14260633" author="lhofhansl" created="Tue, 30 Dec 2014 01:05:24 +0000"  >&lt;p&gt;Initial patch. Completely untested, only know that it compiles. Parking it here.&lt;br/&gt;
This was easy since it all fit into SpliRequest.&lt;/p&gt;

&lt;p&gt;I also want to add the number of files splits and the number of files for daughter A and daughter B. That would have to caught in SplitTransaction.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt;, FYI.&lt;/p&gt;</comment>
                            <comment id="14260710" author="apurtell" created="Tue, 30 Dec 2014 02:51:58 +0000"  >&lt;p&gt;lgtm&lt;/p&gt;

&lt;p&gt;If checking in to 0.98 don&apos;t forget hadoop1 metrics (we sometimes do).&lt;/p&gt;</comment>
                            <comment id="14260764" author="lhofhansl" created="Tue, 30 Dec 2014 04:30:00 +0000"  >&lt;p&gt;I did forget... This seems good to have in 0.98. I&apos;ll see what it takes to do the hadoop1 metrics.&lt;/p&gt;</comment>
                            <comment id="14260772" author="apurtell" created="Tue, 30 Dec 2014 04:32:11 +0000"  >&lt;p&gt;Easy. About the same as in hadoop2-compat with minor differences. &lt;/p&gt;</comment>
                            <comment id="14260793" author="lhofhansl" created="Tue, 30 Dec 2014 04:54:29 +0000"  >&lt;p&gt;Cool... I&apos;ll add the file count metric and then create a 0.98 patch. Actually for the file count metric it&apos;s a bit less obvious.&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;should it report the requested hfiles to split?&lt;/li&gt;
	&lt;li&gt;successfully split hfiles?&lt;/li&gt;
	&lt;li&gt;successful files separated by what goes to daughter A vs B?&lt;/li&gt;
	&lt;li&gt;all of the above?&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;I guess #4 makes the most sense. Maybe commit this one first as is, then discuss what to do with split file counts in another jira.&lt;br/&gt;
This would allow tracking splits as they happen per region server and to monitor the split queue.&lt;/p&gt;

&lt;p&gt;Would also be nice to track the provenance of the regions. That was suggested before, but it was never clear where to store this information... Another issue...&lt;/p&gt;</comment>
                            <comment id="14260797" author="lhofhansl" created="Tue, 30 Dec 2014 04:58:12 +0000"  >&lt;p&gt;(after I test this, of course)&lt;/p&gt;</comment>
                            <comment id="14260895" author="lhofhansl" created="Tue, 30 Dec 2014 07:50:39 +0000"  >&lt;p&gt;Fixed metric names.&lt;/p&gt;</comment>
                            <comment id="14264013" author="lhofhansl" created="Sun, 4 Jan 2015 21:18:57 +0000"  >&lt;p&gt;0.98 patch. Compiles... Untested.&lt;/p&gt;</comment>
                            <comment id="14264143" author="apurtell" created="Mon, 5 Jan 2015 02:38:54 +0000"  >&lt;p&gt;lgtm&lt;/p&gt;</comment>
                            <comment id="14264231" author="lhofhansl" created="Mon, 5 Jan 2015 06:42:16 +0000"  >&lt;p&gt;Hmm... So while testing the metrics I find we already have this as a region server metric:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    &quot;splitTime_num_ops&quot; : 1,
    &quot;splitTime_min&quot; : 261,
    &quot;splitTime_max&quot; : 261,
    &quot;splitTime_mean&quot; : 261.0,
    &quot;splitTime_median&quot; : 261.0,
    &quot;splitTime_75th_percentile&quot; : 261.0,
    &quot;splitTime_95th_percentile&quot; : 261.0,
    &quot;splitTime_99th_percentile&quot; : 261.0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;While perhaps not entirely intuitive we already have the number of splits in &lt;tt&gt;splitTime_num_ops&lt;/tt&gt;, which acts just as a counter. That counter is increased whether the split was successful or not. So, not sure whether this patch is going to add much.&lt;/p&gt;

&lt;p&gt;Maybe the splitTime histogram metric should instead be more prominently explained in the book...?&lt;/p&gt;</comment>
                            <comment id="14264266" author="apurtell" created="Mon, 5 Jan 2015 07:18:01 +0000"  >&lt;p&gt;Probably because it is new. I added it in 0.98.8 IIRC with the split transaction journal timestamp logging. &lt;/p&gt;</comment>
                            <comment id="14264854" author="lhofhansl" created="Mon, 5 Jan 2015 18:25:13 +0000"  >&lt;p&gt;Still useful to see the split queue size over time and to track failed split (i.e. the difference between requests and successful splits).&lt;br/&gt;
So I&apos;m ready to commit to 0.98+&lt;/p&gt;</comment>
                            <comment id="14264943" author="apurtell" created="Mon, 5 Jan 2015 19:18:48 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14265486" author="lhofhansl" created="Tue, 6 Jan 2015 01:16:41 +0000"  >&lt;p&gt;Committed to 1.0, 1.1, and 2.0.&lt;/p&gt;</comment>
                            <comment id="14265490" author="apurtell" created="Tue, 6 Jan 2015 01:18:34 +0000"  >&lt;p&gt;Not 0.98?&lt;/p&gt;</comment>
                            <comment id="14265494" author="lhofhansl" created="Tue, 6 Jan 2015 01:19:07 +0000"  >&lt;p&gt;And... 0.98&lt;/p&gt;</comment>
                            <comment id="14265501" author="lhofhansl" created="Tue, 6 Jan 2015 01:25:31 +0000"  >&lt;p&gt;Cross commenting &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
Just did 1.0, 1.1, 2.0 via cherry-picking and 0.98 with its own patch.&lt;/p&gt;</comment>
                            <comment id="14265580" author="hudson" created="Tue, 6 Jan 2015 02:33:39 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #5996 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/5996/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/5996/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12779&quot; title=&quot;SplitTransaction: Add metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12779&quot;&gt;&lt;del&gt;HBASE-12779&lt;/del&gt;&lt;/a&gt; SplitTransaction: Add metrics. (larsh: rev 7774f964e62842806d849cae1a6af830c137d737)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/SplitRequest.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/MetricsRegionServerWrapperStub.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/MetricsRegionServer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/CompactSplitThread.java&lt;/li&gt;
	&lt;li&gt;hbase-hadoop2-compat/src/main/java/org/apache/hadoop/hbase/regionserver/MetricsRegionServerSourceImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/MetricsRegionServerWrapperImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-hadoop-compat/src/main/java/org/apache/hadoop/hbase/regionserver/MetricsRegionServerSource.java&lt;/li&gt;
	&lt;li&gt;hbase-hadoop-compat/src/main/java/org/apache/hadoop/hbase/regionserver/MetricsRegionServerWrapper.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14265612" author="hudson" created="Tue, 6 Jan 2015 03:09:07 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.0 #636 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/636/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.0/636/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12779&quot; title=&quot;SplitTransaction: Add metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12779&quot;&gt;&lt;del&gt;HBASE-12779&lt;/del&gt;&lt;/a&gt; SplitTransaction: Add metrics. (larsh: rev 82dc2e62bdec3c56b2ed0731d054579a2f1052c9)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/SplitRequest.java&lt;/li&gt;
	&lt;li&gt;hbase-hadoop-compat/src/main/java/org/apache/hadoop/hbase/regionserver/MetricsRegionServerWrapper.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/MetricsRegionServerWrapperStub.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/MetricsRegionServer.java&lt;/li&gt;
	&lt;li&gt;hbase-hadoop2-compat/src/main/java/org/apache/hadoop/hbase/regionserver/MetricsRegionServerSourceImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/MetricsRegionServerWrapperImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/CompactSplitThread.java&lt;/li&gt;
	&lt;li&gt;hbase-hadoop-compat/src/main/java/org/apache/hadoop/hbase/regionserver/MetricsRegionServerSource.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14265626" author="hudson" created="Tue, 6 Jan 2015 03:21:56 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.98 #777 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/777/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/777/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12779&quot; title=&quot;SplitTransaction: Add metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12779&quot;&gt;&lt;del&gt;HBASE-12779&lt;/del&gt;&lt;/a&gt; SplitTransaction: Add metrics. (larsh: rev 652da5404336e15064e12e2e278c68985ec25a3a)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/MetricsRegionServerWrapperStub.java&lt;/li&gt;
	&lt;li&gt;hbase-hadoop1-compat/src/main/java/org/apache/hadoop/hbase/regionserver/MetricsRegionServerSourceImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-hadoop-compat/src/main/java/org/apache/hadoop/hbase/regionserver/MetricsRegionServerWrapper.java&lt;/li&gt;
	&lt;li&gt;hbase-hadoop2-compat/src/main/java/org/apache/hadoop/hbase/regionserver/MetricsRegionServerSourceImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-hadoop-compat/src/main/java/org/apache/hadoop/hbase/regionserver/MetricsRegionServerSource.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/SplitRequest.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/MetricsRegionServerWrapperImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/MetricsRegionServer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/CompactSplitThread.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14265638" author="hudson" created="Tue, 6 Jan 2015 03:35:11 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.1 #58 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.1/58/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.1/58/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12779&quot; title=&quot;SplitTransaction: Add metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12779&quot;&gt;&lt;del&gt;HBASE-12779&lt;/del&gt;&lt;/a&gt; SplitTransaction: Add metrics. (larsh: rev e491f337f1092d2c826ede24fcb975be146f38df)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-hadoop-compat/src/main/java/org/apache/hadoop/hbase/regionserver/MetricsRegionServerWrapper.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/SplitRequest.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/MetricsRegionServerWrapperStub.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/MetricsRegionServer.java&lt;/li&gt;
	&lt;li&gt;hbase-hadoop2-compat/src/main/java/org/apache/hadoop/hbase/regionserver/MetricsRegionServerSourceImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-hadoop-compat/src/main/java/org/apache/hadoop/hbase/regionserver/MetricsRegionServerSource.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/CompactSplitThread.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/MetricsRegionServerWrapperImpl.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14265746" author="hudson" created="Tue, 6 Jan 2015 06:16:36 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.98-on-Hadoop-1.1 #742 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/742/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/742/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12779&quot; title=&quot;SplitTransaction: Add metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12779&quot;&gt;&lt;del&gt;HBASE-12779&lt;/del&gt;&lt;/a&gt; SplitTransaction: Add metrics. (larsh: rev 652da5404336e15064e12e2e278c68985ec25a3a)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/MetricsRegionServerWrapperStub.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/SplitRequest.java&lt;/li&gt;
	&lt;li&gt;hbase-hadoop1-compat/src/main/java/org/apache/hadoop/hbase/regionserver/MetricsRegionServerSourceImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-hadoop-compat/src/main/java/org/apache/hadoop/hbase/regionserver/MetricsRegionServerSource.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/CompactSplitThread.java&lt;/li&gt;
	&lt;li&gt;hbase-hadoop-compat/src/main/java/org/apache/hadoop/hbase/regionserver/MetricsRegionServerWrapper.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/MetricsRegionServerWrapperImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/MetricsRegionServer.java&lt;/li&gt;
	&lt;li&gt;hbase-hadoop2-compat/src/main/java/org/apache/hadoop/hbase/regionserver/MetricsRegionServerSourceImpl.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14331869" author="enis" created="Sat, 21 Feb 2015 23:49:41 +0000"  >&lt;p&gt;Closing this issue after 1.0.0 release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12689987" name="12779-v2-0.98.txt" size="10716" author="lhofhansl" created="Sun, 4 Jan 2015 21:18:57 +0000"/>
                            <attachment id="12689450" name="12779-v2.txt" size="9093" author="lhofhansl" created="Tue, 30 Dec 2014 07:50:39 +0000"/>
                            <attachment id="12689416" name="12779.txt" size="9087" author="lhofhansl" created="Tue, 30 Dec 2014 01:05:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 30 Dec 2014 02:51:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i23tzz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>