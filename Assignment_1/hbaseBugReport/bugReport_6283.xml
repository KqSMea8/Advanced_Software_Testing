<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:35:23 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6283/HBASE-6283.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6283] [region_mover.rb] Add option to exclude list of hosts on unload instead of just assuming the source node.</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6283</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Currently, the region_mover.rb script excludes a single host, the host offloading data, as a region move target.  This essentially limits the number of machines that can be shutdown at a time to one.  For larger clusters, it is manageable to have several nodes down at a time and desirable to get this process done more quickly.&lt;/p&gt;

&lt;p&gt;The proposed patch adds an exclude file option, that allows multiple hosts to be excluded as targets.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12596151">HBASE-6283</key>
            <summary>[region_mover.rb] Add option to exclude list of hosts on unload instead of just assuming the source node.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jmhsieh">Jonathan Hsieh</assignee>
                                    <reporter username="jmhsieh">Jonathan Hsieh</reporter>
                        <labels>
                            <label>jruby</label>
                    </labels>
                <created>Wed, 27 Jun 2012 20:05:55 +0000</created>
                <updated>Tue, 26 Feb 2013 08:16:03 +0000</updated>
                            <resolved>Fri, 6 Jul 2012 22:13:33 +0000</resolved>
                                                    <fixVersion>0.94.1</fixVersion>
                    <fixVersion>0.95.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13402527" author="jmhsieh" created="Wed, 27 Jun 2012 20:20:44 +0000"  >&lt;p&gt;Patch for trunk.  Was originally developed and tested against 0.90 (should apply to all active branches).&lt;/p&gt;

&lt;p&gt;Manually tested by having TestLoadAndVerify running and executing region_mover.rb unloads while running.&lt;/p&gt;</comment>
                            <comment id="13404332" author="gchanan" created="Sat, 30 Jun 2012 00:09:13 +0000"  >&lt;p&gt;Looks good to me, but I am not a ruby expert &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;</comment>
                            <comment id="13404526" author="stack" created="Sat, 30 Jun 2012 16:02:13 +0000"  >&lt;p&gt;This should IOError or whatever the ruby equiv of FNFE is:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ! File.exist?(filename)  
+      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; java.util.ArrayList.&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;()
..
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;... rather than just return empty array?&lt;/p&gt;

&lt;p&gt;Else looks good to me.&lt;/p&gt;

&lt;p&gt;Does this change relate to Aravind&apos;s work?  See down in his blog where he says:&lt;/p&gt;

&lt;p&gt;&quot;The region_mover.rb script is an extension of the standard region_mover.rb that ships with stock HBase. I hacked it a little to add slow balancing support and automatic region balancing while unloading regions from a server. This version is also aware of draining servers and avoids them during region assignment and balancing. Again, look for the older commit if you want to use this with 0.90.x HBase releases. The latest version is for the 0.92 release.&quot;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://inchoate-clatter.blogspot.com.es/2012/03/hbase-ops-automation.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://inchoate-clatter.blogspot.com.es/2012/03/hbase-ops-automation.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13406189" author="jmhsieh" created="Wed, 4 Jul 2012 00:03:51 +0000"  >&lt;p&gt;@Stack I&apos;ll look into making it throw an exn or at least print a nice warning message.&lt;/p&gt;

&lt;p&gt;Thanks for the pointer to Aravind&apos;s work &amp;#8211; this is the first I&apos;ve seen the blog.  Have we encouraged Aravind to contribute his work?&lt;/p&gt;</comment>
                            <comment id="13406301" author="stack" created="Wed, 4 Jul 2012 06:34:01 +0000"  >&lt;blockquote&gt;&lt;p&gt;Thanks for the pointer to Aravind&apos;s work &#8211; this is the first I&apos;ve seen the blog. Have we encouraged Aravind to contribute his work?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;He has contrib&apos;d the non-SU stuff: i.e. the bit where can register in zk what regionservers are being rolled.&lt;/p&gt;</comment>
                            <comment id="13406614" author="jmhsieh" created="Wed, 4 Jul 2012 16:39:11 +0000"  >&lt;blockquote&gt;&lt;p&gt;He has contrib&apos;d the non-SU stuff: i.e. the bit where can register in zk what regionservers are being rolled.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I diffed his region_mover.rb script from trunk&apos;s and they are still some significant differences between the two related to the zk bits in the ruby script side.  In my case, I&apos;m trying to help a customer in a particular situation who is still on 0.90 (didn&apos;t get included as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4298&quot; title=&quot;Support to drain RS nodes through ZK&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4298&quot;&gt;&lt;del&gt;HBASE-4298&lt;/del&gt;&lt;/a&gt;) so the draining zk bit isn&apos;t going to be helpful.&lt;/p&gt;

&lt;p&gt;For this patch, I think I&apos;ll tweak to address you comments, commit to trunk (should I do the other versions too?), and then we should encourage aravind to contribute/port the jruby bits as well.&lt;/p&gt;

&lt;p&gt;Sound good?&lt;/p&gt;</comment>
                            <comment id="13406712" author="stack" created="Wed, 4 Jul 2012 20:17:06 +0000"  >&lt;p&gt;Other versions, yes.&lt;/p&gt;

&lt;p&gt;Aravind doesn&apos;t work on this stuff any more.  If you open new issue, one of the two of us can take in the diff.  Good on you J.&lt;/p&gt;</comment>
                            <comment id="13408395" author="jmhsieh" created="Fri, 6 Jul 2012 22:13:05 +0000"  >&lt;p&gt;This it the version I applied to 0.90/0.92/0.94/trunk.  Thanks for the review stack.&lt;/p&gt;</comment>
                            <comment id="13408397" author="jmhsieh" created="Fri, 6 Jul 2012 22:19:22 +0000"  >&lt;p&gt;Created &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6344&quot; title=&quot;[region_mover.rb] Look into porting updates found in Aravind G&amp;#39;s work over into hbase.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6344&quot;&gt;HBASE-6344&lt;/a&gt; with the follow up work.&lt;/p&gt;</comment>
                            <comment id="13408486" author="hudson" created="Sat, 7 Jul 2012 00:34:28 +0000"  >&lt;p&gt;Integrated in HBase-0.92 #469 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92/469/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92/469/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6283&quot; title=&quot;[region_mover.rb] Add option to exclude list of hosts on unload instead of just assuming the source node.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6283&quot;&gt;&lt;del&gt;HBASE-6283&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;region_mover.rb&amp;#93;&lt;/span&gt; Add option to exclude list of hosts on unload instead of just assuming the source node (Revision 1358450)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
jmhsieh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/bin/region_mover.rb&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13411155" author="hudson" created="Wed, 11 Jul 2012 02:36:55 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #39 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/39/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/39/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6283&quot; title=&quot;[region_mover.rb] Add option to exclude list of hosts on unload instead of just assuming the source node.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6283&quot;&gt;&lt;del&gt;HBASE-6283&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;region_mover.rb&amp;#93;&lt;/span&gt; Add option to exclude list of hosts on unload instead of just assuming the source node (Revision 1358449)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
jmhsieh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/bin/region_mover.rb&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13428713" author="hudson" created="Sun, 5 Aug 2012 00:51:11 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security-on-Hadoop-23 #6 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/6/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/6/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6283&quot; title=&quot;[region_mover.rb] Add option to exclude list of hosts on unload instead of just assuming the source node.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6283&quot;&gt;&lt;del&gt;HBASE-6283&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;region_mover.rb&amp;#93;&lt;/span&gt; Add option to exclude list of hosts on unload instead of just assuming the source node (Revision 1358449)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
jmhsieh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/bin/region_mover.rb&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12597843">HBASE-6344</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12535440" name="hbase-6283-v2.patch" size="2404" author="jmhsieh" created="Fri, 6 Jul 2012 22:13:05 +0000"/>
                            <attachment id="12533697" name="hbase-6283.patch" size="2352" author="jmhsieh" created="Wed, 27 Jun 2012 20:21:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 30 Jun 2012 00:09:13 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>241962</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 19 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02h7z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12391</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>