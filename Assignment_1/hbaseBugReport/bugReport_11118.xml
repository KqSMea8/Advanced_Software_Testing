<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:20:20 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-11118/HBASE-11118.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-11118] non environment variable solution for &quot;IllegalAccessError: class com.google.protobuf.ZeroCopyLiteralByteString cannot access its superclass com.google.protobuf.LiteralByteString&quot;</title>
                <link>https://issues.apache.org/jira/browse/HBASE-11118</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;I am running into the problem described in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10304&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-10304&lt;/a&gt;, while trying to use a newer version within cascading.hbase (&lt;a href=&quot;https://github.com/cascading/cascading.hbase&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/cascading/cascading.hbase&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;One of the features of cascading.hbase is that you can use it from lingual (&lt;a href=&quot;http://www.cascading.org/projects/lingual/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.cascading.org/projects/lingual/&lt;/a&gt;), our SQL layer for hadoop. lingual has a notion of providers, which are fat jars that we pull down dynamically at runtime. Those jars give users the ability to talk to any system or format from SQL. They are added to the classpath  programmatically before we submit jobs to a hadoop cluster.&lt;/p&gt;

&lt;p&gt;Since lingual does not know upfront , which providers are going to be used in a given run, the HADOOP_CLASSPATH trick proposed in the JIRA above is really clunky and breaks the ease of use we had before. No other provider requires this right now.&lt;/p&gt;

&lt;p&gt;It would be great to have a programmatical way to fix this, when using fat jars.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12712613">HBASE-11118</key>
            <summary>non environment variable solution for &quot;IllegalAccessError: class com.google.protobuf.ZeroCopyLiteralByteString cannot access its superclass com.google.protobuf.LiteralByteString&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stack">stack</assignee>
                                    <reporter username="fs111">Andr&#233; Kelpe</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 May 2014 16:09:15 +0000</created>
                <updated>Sat, 21 Feb 2015 23:34:25 +0000</updated>
                            <resolved>Fri, 11 Jul 2014 23:59:39 +0000</resolved>
                                    <version>0.98.2</version>
                                    <fixVersion>0.99.0</fixVersion>
                    <fixVersion>0.98.4</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                    <component>mapreduce</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>21</watches>
                                                                <comments>
                            <comment id="13990892" author="apurtell" created="Tue, 6 May 2014 18:01:35 +0000"  >&lt;p&gt;Let&apos;s look at this again for 0.98.3. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;, thoughts?&lt;/p&gt;</comment>
                            <comment id="13990971" author="ndimiduk" created="Tue, 6 May 2014 18:44:11 +0000"  >&lt;p&gt;Getting this working for everyone will be tricky. Allow me to ask a silly question: can we build the provider to work around this issue? I don&apos;t know how the provider stuff works, but I&apos;m looking at this bit &lt;a href=&quot;https://github.com/Cascading/cascading.hbase/blob/2.2/build.gradle#L116-L120&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/Cascading/cascading.hbase/blob/2.2/build.gradle#L116-L120&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13991026" author="fs111" created="Tue, 6 May 2014 19:23:51 +0000"  >&lt;p&gt;For the provider mechanism:&lt;/p&gt;

&lt;p&gt;Lingual is a cascading app that submits itself to the cluster. You can use a provider to talk to different data formats/sources. You basically tell lingual in the table definition &quot;this table is actually in Hbase, use  this jar file over there to talk to it&quot;. lingual itself does not really know about Hbase or any other format/system, but HDFS and delimited files. We create fat jars for those providers to keep the dependency fetching &quot;sane&quot;. Only lingual uses those jars. We could def. make them shaded jars, but that will not work in this case, since protobuf is the mechanism to talk to the HBase cluster. &lt;/p&gt;

&lt;p&gt;Next to that, my understanding of the problem at hand is that it also breaks the classic hadoop jars with lib folders. For those we do not have any control, since our users are just going to use cascading.hbase, build a jar and submit it to the cluster.&lt;/p&gt;</comment>
                            <comment id="13991281" author="apurtell" created="Tue, 6 May 2014 22:51:22 +0000"  >&lt;p&gt;Can we either:&lt;/p&gt;

&lt;p&gt;1. Relocate the protobuf Java runtime library classes somewhere under org.apache.hbase at package time using Maven&apos;s shader module (&lt;a href=&quot;http://maven.apache.org/plugins/maven-shade-plugin/examples/class-relocation.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://maven.apache.org/plugins/maven-shade-plugin/examples/class-relocation.html&lt;/a&gt;) when producing HBase JARs? If my read of the doc is correct all references in HBase code will be relocated at the bytecode level. &lt;/p&gt;

&lt;p&gt;2. Fork the BSD-licensed protobuf Java runtime library classes into a package under org.apache.hbase.&lt;/p&gt;

&lt;p&gt;?&lt;/p&gt;</comment>
                            <comment id="13992399" author="ndimiduk" created="Thu, 8 May 2014 00:59:50 +0000"  >&lt;p&gt;Class relocation with shade may work. I wonder what it&apos;ll break &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13992917" author="ndimiduk" created="Thu, 8 May 2014 16:54:17 +0000"  >&lt;p&gt;I experimented a bit this morning with shade plugin. Performing the rewrite in hbase-protocol/pom.xml leads to errors building hbase-client.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[ERROR] /Users/ndimiduk/repos/hbase/hbase-client/src/main/java/org/apache/hadoop/hbase/client/ConnectionManager.java:[1494,33] error: method newBlockingStub in class MasterService cannot be applied to g
iven types;
[ERROR]   required: com.shaded.google.protobuf.BlockingRpcChannel
  found: com.google.protobuf.BlockingRpcChannel
  reason: actual argument com.google.protobuf.BlockingRpcChannel cannot be converted to com.shaded.google.protobuf.BlockingRpcChannel by method invocation conversion
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We need the shade plugin to cascade bytecode rewrite down to the dependent modules in the project. I don&apos;t see a way to do that.&lt;/p&gt;</comment>
                            <comment id="13994524" author="apurtell" created="Sun, 11 May 2014 11:17:51 +0000"  >&lt;p&gt;Thanks for trying that out &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;So then are we down to forking the BSD-licensed protobuf Java runtime library classes into a package under org.apache.hbase?&lt;/p&gt;

&lt;p&gt;Making a blocker for 0.98.3 since it&apos;s causing downstreamers grief.&lt;/p&gt;</comment>
                            <comment id="13995264" author="ndimiduk" created="Mon, 12 May 2014 17:14:57 +0000"  >&lt;p&gt;I took the shade question to &lt;a href=&quot;http://www.mail-archive.com/users@maven.apache.org/msg133791.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;user@maven&lt;/a&gt;. Maybe some helpful insight will surface.&lt;/p&gt;</comment>
                            <comment id="14004837" author="apurtell" created="Wed, 21 May 2014 16:08:09 +0000"  >&lt;p&gt;So do we include the Java protobuf library into our code under the desired (presume eventually shaded) package, as a temporary measure? Need to resolve the blocker and issue for downstreamers. Should proceed with a patch for that. &lt;/p&gt;</comment>
                            <comment id="14004905" author="ndimiduk" created="Wed, 21 May 2014 16:56:55 +0000"  >&lt;p&gt;Still no word on my query to the maven group...&lt;/p&gt;</comment>
                            <comment id="14006824" author="apurtell" created="Fri, 23 May 2014 05:29:05 +0000"  >&lt;p&gt;You may want to avert your eyes from the horrors committed in the attached compressed patches for trunk and 0.98. Java sources from protobufs 2.5.0 are imported into hbase-protocol, protobuf-java deps are removed from POM files (though will still be brought in transitively for some modules, so the POM changes can be left out as meaningless), and the remainder of the changes are made with&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;sed -i -e/com\.google\.protobuf/org\.apache\.hadoop\.hbase\.protobuf/g
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;including generated files (except the descriptor string in DescriptorProtos).&lt;/p&gt;

&lt;p&gt;The changes leak in many places because we use Service, generated message builders, and other protobuf classes directly, but it can be done. All unit tests pass.&lt;/p&gt;</comment>
                            <comment id="14007560" author="apurtell" created="Fri, 23 May 2014 19:15:51 +0000"  >&lt;p&gt;I hate to push a blocker issue, but I don&apos;t see an alternative, moving it to .4. &lt;/p&gt;

&lt;p&gt;Shading isn&apos;t viable thus far, removing HBase&apos;s zero copy literal byte string would return the significant performance penalty seen with early versions of 0.96, and the patches I&apos;ve put up demonstrating how we might incorporate protobuf wholesale are sure to be objectionable. It is my fear however that we will have to do this last thing in order for downstreamers to avoid the classloading issues. I think cascading.hbase is already blocked on this.&lt;/p&gt;</comment>
                            <comment id="14007563" author="apurtell" created="Fri, 23 May 2014 19:17:33 +0000"  >&lt;p&gt;Pinging the RM crew, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14007704" author="stack" created="Fri, 23 May 2014 21:07:41 +0000"  >&lt;p&gt;Thanks for doing this smelly work &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt;.  If we bring in protobuf, how big is that?  I count 93 files including tests.  That wouldn&apos;t be too bad. On plus side, we could make more perf changes.&lt;/p&gt;</comment>
                            <comment id="14007734" author="apurtell" created="Fri, 23 May 2014 21:30:18 +0000"  >&lt;blockquote&gt;&lt;p&gt;If we bring in protobuf, how big is that?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I rebased on latest trunk. The HBase patch is 293 files changed, 72401 insertions, 24126 deletions. I left out the protobuf tests and only brought over what is in protobuf-2.5.0/java/src/main/java, including also the generated DescriptorProtos.java from generated-sources/. That produces 45 new files in hbase-protocol. There are 31 additional test files in protobuf-2.5.0/java/src/test/. Simple enough to bring them over into hbase-protocol also with substitution.&lt;/p&gt;

&lt;p&gt;If going this route, we would also need to update the compile-protobuf Maven magic to run a substitution over the generated result with sed. I didn&apos;t want to spend quality time with Maven if it wasn&apos;t necessary.&lt;/p&gt;

&lt;p&gt;Edit: Fix formatting&lt;/p&gt;</comment>
                            <comment id="14007742" author="apurtell" created="Fri, 23 May 2014 21:35:52 +0000"  >&lt;p&gt;One other detail. In the 0.98 patch, because of the ClusterStatusPublisher/Listener&apos;s use of a Netty 3 components for marshalling/unmarshalling protobuf, I had to pull in two additional source files from Netty 3 and perform the appropriate substitutions to fix compliation issues. Netty 3 is ASL licensed. I left the RedHat copyright headers alone. This is only necessary for 0.98, trunk is now on Netty 4 and doesn&apos;t seem to have the same problem.  &lt;/p&gt;</comment>
                            <comment id="14007803" author="apurtell" created="Fri, 23 May 2014 22:38:03 +0000"  >&lt;p&gt;I had a quick look at bringing over the tests from protobuf-2.5.0. It will be time consuming and involve many substitutions. Probably we can pick a few over that don&apos;t represent too much effort and cover the runtime parts.&lt;/p&gt;</comment>
                            <comment id="14009887" author="apurtell" created="Tue, 27 May 2014 16:49:02 +0000"  >&lt;p&gt;Comparing against master: &lt;a href=&quot;https://github.com/apurtell/hbase/compare/master...HBASE-11118&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apurtell/hbase/compare/master...HBASE-11118&lt;/a&gt;&lt;br/&gt;
Comparing against 0.98: &lt;a href=&quot;https://github.com/apurtell/hbase/compare/0.98...HBASE-11118-0.98&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apurtell/hbase/compare/0.98...HBASE-11118-0.98&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14027409" author="apurtell" created="Wed, 11 Jun 2014 04:51:33 +0000"  >&lt;p&gt;So dare we do this for .4 &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt; ?&lt;/p&gt;</comment>
                            <comment id="14027410" author="apurtell" created="Wed, 11 Jun 2014 04:52:57 +0000"  >&lt;p&gt;Rebased on latest trunk. The GitHub comparison links above will work against the latest.&lt;/p&gt;</comment>
                            <comment id="14027916" author="ndimiduk" created="Wed, 11 Jun 2014 15:50:23 +0000"  >&lt;p&gt;I was gun-shy at first, but i think this isn&apos;t too bad after all. I&apos;d really prefer a shade solution, but not so much so that I&apos;m willing to try hacking it.&lt;/p&gt;

&lt;p&gt;+1 to forking protobuf. It solves this issue and will allow us to continue make performance improvements as we see fit. Can we bring in the tests as well? How about placing it in it&apos;s own module to make this easier to undo down the road? hbase-protobuf?&lt;/p&gt;

&lt;p&gt;Now there&apos;s the question of API compatibility. I see our dependency libraries as part of the public API, do others agree? We should not be removing a dependency for a patch release?&lt;/p&gt;

&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nkeywal&quot; class=&quot;user-hover&quot; rel=&quot;nkeywal&quot;&gt;Nicolas Liochon&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14028241" author="nkeywal" created="Wed, 11 Jun 2014 19:06:27 +0000"  >&lt;p&gt;Let&apos;s do that. I don&apos;t think removing a dependency is an issue: people should not depend on transitive dependencies and anyway it&apos;s an easy fix for them imho. &lt;/p&gt;</comment>
                            <comment id="14028799" author="apurtell" created="Thu, 12 Jun 2014 03:58:41 +0000"  >&lt;p&gt;Thanks for publicizing this on dev@ &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt;. Let&apos;s see what happens.&lt;/p&gt;</comment>
                            <comment id="14028801" author="apurtell" created="Thu, 12 Jun 2014 04:03:07 +0000"  >&lt;blockquote&gt;&lt;p&gt;Can we bring in the tests as well? &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It&apos;s more difficult than the sed based editing I used for the library, because the protobuf for tests specify odd packages deliberately, and also want to test broken cases. Maybe we can bring some over now and more later?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;How about placing it in it&apos;s own module to make this easier to undo down the road? hbase-protobuf?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We could, but any module depending on one will pull in the other, right? I think it makes sense to put runtime, protos, and generated code into the same module. &lt;/p&gt;</comment>
                            <comment id="14029336" author="tlipcon" created="Thu, 12 Jun 2014 16:33:40 +0000"  >&lt;p&gt;Have we already considered using our own classloader to isolate our dependency?&lt;/p&gt;

&lt;p&gt;Forking PB into HBase makes me nervous from a maintenance perspective. PB does new releases once a year or so and they tend to have good improvements - aren&apos;t we going to end up stuck on a past version?&lt;/p&gt;

&lt;p&gt;Instead, could we put some more pressure on the upstream protobuf maintainers to include the ZeroCopyLiteralByteString, or at least make its super-class non-final in order to support this?&lt;/p&gt;

&lt;p&gt;Alternatively, could we get shading to work by adding an extra indirection package that builds a &quot;jar-with-dependencies&quot; of both hbase-protocol and protobuf, and then shades that and re-publishes as an &quot;hbase-protocol-with-shaded-pb&quot; pom? Then the rest of HBase could depend on that?&lt;/p&gt;</comment>
                            <comment id="14029433" author="apurtell" created="Thu, 12 Jun 2014 17:15:12 +0000"  >&lt;blockquote&gt;&lt;p&gt;Instead, could we put some more pressure on the upstream protobuf maintainers to include the ZeroCopyLiteralByteString, or at least make its super-class non-final in order to support this?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think Stack had a conversation without a positive result. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Alternatively, could we get shading to work by adding an extra indirection package that builds a &quot;jar-with-dependencies&quot; of both hbase-protocol and protobuf, and then shades that and re-publishes as an &quot;hbase-protocol-with-shaded-pb&quot; pom? Then the rest of HBase could depend on that?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Perhaps. I think I don&apos;t have the necessary Maven expertise to pull that off because I can&apos;t envision how to accomplish that.&lt;/p&gt;</comment>
                            <comment id="14029454" author="apurtell" created="Thu, 12 Jun 2014 17:24:24 +0000"  >&lt;p&gt;I&apos;m also not sure upstream changes to protobuf can help HBase 0.98 / Hadoop 2 users. &lt;/p&gt;</comment>
                            <comment id="14030982" author="jmhsieh" created="Fri, 13 Jun 2014 18:44:47 +0000"  >&lt;p&gt;Has using an alternative protobuf java lib like protostuff been considered?  With that we could likely have more influence and get performance-oriented changes int and eventually percolate it to other ecosystem projects.&lt;/p&gt;</comment>
                            <comment id="14031044" author="apurtell" created="Fri, 13 Jun 2014 19:25:31 +0000"  >&lt;p&gt;No. Sounds interesting. Do we have a volunteer to replace our use of protobuf with protostuff (or whatever) and benchmark the performance delta under load on a cluster? Not sure I can find the time for that. Meanwhile some downstreamers like cascading are not able to use 0.98 or recent 0.96. &lt;/p&gt;</comment>
                            <comment id="14031049" author="apurtell" created="Fri, 13 Jun 2014 19:28:42 +0000"  >&lt;p&gt;How do we sync our use of google&apos;s protoc in the compile-protobuf build target with an alternative runtime? I&apos;m not familiar with protostuff. Does it have it&apos;s own compiler ?&lt;/p&gt;</comment>
                            <comment id="14031053" author="stack" created="Fri, 13 Jun 2014 19:30:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tlipcon&quot; class=&quot;user-hover&quot; rel=&quot;tlipcon&quot;&gt;Todd Lipcon&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Have we already considered using our own classloader to isolate our dependency?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;There is a bit of messy research done at the head of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10304&quot; title=&quot;Running an hbase job jar: IllegalAccessError: class com.google.protobuf.ZeroCopyLiteralByteString cannot access its superclass com.google.protobuf.LiteralByteString&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10304&quot;&gt;&lt;del&gt;HBASE-10304&lt;/del&gt;&lt;/a&gt;.  IIRC, we don&apos;t get chance to do interception.  RunJar is running the show.  That is the case here too &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fs111&quot; class=&quot;user-hover&quot; rel=&quot;fs111&quot;&gt;Andr&#233; Kelpe&lt;/a&gt;?  Are you using hadoop runjar or a similar mechanism?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Instead, could we put some more pressure on the upstream protobuf maintainers to include the ZeroCopyLiteralByteString, or at least make its super-class non-final in order to support this?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://code.google.com/p/protobuf/issues/detail?id=374&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://code.google.com/p/protobuf/issues/detail?id=374&lt;/a&gt; asks and gets shutdown because it would break base precept that all is immutable in pb.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Alternatively, could we get shading to work by adding an extra indirection package that builds a &quot;jar-with-dependencies&quot; of both hbase-protocol and protobuf, and then shades that and re-publishes as an &quot;hbase-protocol-with-shaded-pb&quot; pom? Then the rest of HBase could depend on that?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Let me try it Todd.&lt;/p&gt;</comment>
                            <comment id="14031064" author="stack" created="Fri, 13 Jun 2014 19:40:29 +0000"  >&lt;p&gt;I was looking at protostuff last night.  Seems dead but for a few recent commits and no mention of pb 2.5. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ryanobjc&quot; class=&quot;user-hover&quot; rel=&quot;ryanobjc&quot;&gt;ryan rawson&lt;/a&gt; or &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=posix4e&quot; class=&quot;user-hover&quot; rel=&quot;posix4e&quot;&gt;Alex Newman&lt;/a&gt;?  Any input?&lt;/p&gt;</comment>
                            <comment id="14031108" author="ryanobjc" created="Fri, 13 Jun 2014 20:26:27 +0000"  >&lt;p&gt;Protostuff is wireline compatible with protobuf 2.5.  The project is in active use, and we maintain, improve and fix it.  &lt;/p&gt;

&lt;p&gt;In terms of API, it has a different API than protobuf, by necessity, since ByteString, by design, forces a copy on you.  Our solution is to use ByteBuffer as an alternative fundamental byte-holder type. &lt;/p&gt;

&lt;p&gt;Additionally, fixing and improving the project is really trivial.  The code is easy to work with, it&apos;s fully in Java (including the compiler), the code-generation is a templating engine, and no more committing generated code (big anti-pattern).&lt;/p&gt;</comment>
                            <comment id="14031121" author="posix4e" created="Fri, 13 Jun 2014 20:36:31 +0000"  >&lt;p&gt;piling on&lt;/p&gt;

&lt;p&gt; Daniel Yu, the project creator is definitely still very responsible and involved. He has been very helpful and easy to work with.&lt;/p&gt;

&lt;p&gt; We recently got some pull requests from some new contributors which is very exciting. We intend on merging them soon.&lt;/p&gt;

&lt;p&gt; OhmData is about to push some patches to further improve read performance, expect them soonish. After those hit, we will cut a new&lt;br/&gt;
release.&lt;/p&gt;</comment>
                            <comment id="14031190" author="apurtell" created="Fri, 13 Jun 2014 21:26:07 +0000"  >&lt;p&gt;Protostuff sounds really interesting &lt;/p&gt;</comment>
                            <comment id="14032427" author="fs111" created="Mon, 16 Jun 2014 13:41:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=todd%40lipcon.org&quot; class=&quot;user-hover&quot; rel=&quot;todd@lipcon.org&quot;&gt;Todd Lipcon&lt;/a&gt; Cascading uses the JobClient to submit the jobs on the fly, but we don&apos;t call the hadoop shell wrapper for each job, like hive does. All submission is handled internally. The initial program gets started with hadoop/yarn jar myJar, and then we handle everything ourselves. In the lingual case, it is even more complicated, since we fetch jars dynamically at runtime and add them to the classpath of the jobs, which means we cannot know upfront, if the job is going to use cascading-hbase or not.&lt;/p&gt;</comment>
                            <comment id="14033118" author="apurtell" created="Mon, 16 Jun 2014 22:36:10 +0000"  >&lt;p&gt;I looked at protostuff a bit more. According to ohloh.net, &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;In a Nutshell, protostuff...&lt;br/&gt;
... has had 1,090 commits made by 7 contributors representing 68,359 lines of code&lt;br/&gt;
... is mostly written in Java with a low number of source code comments&lt;br/&gt;
... has a codebase with a long source history maintained by by one developer with stable Y-O-Y commits&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This might be all from before the fork from Google Code to GitHub. The GitHub project has 3 contributors.&lt;/p&gt;

&lt;p&gt;It&apos;s nice the compiler is Java. There is an available Maven build plugin.&lt;/p&gt;

&lt;p&gt;Extensions are not supported (but we don&apos;t use them)&lt;/p&gt;

&lt;p&gt;We will need to support any coprocessor implementor who coded an Endpoint, using the com.google.protobuf API. This means adding classes in a com.google.protobuf package that forward to the real implementation. The current patch also has this issue.&lt;/p&gt;

&lt;p&gt;The API is quite different from protobuf-java 2.5 and missing all of the RpcChannel and Service bits. We will need to reimplement our RPC one way or another, probably by bringing over RpcChannel and Service from protobuf and implementing them on top of protostuff if we want to be API compatible with coprocessors as above and our existing codebase.&lt;/p&gt;

&lt;p&gt;All this for a ByteString that doesn&apos;t copy...&lt;/p&gt;</comment>
                            <comment id="14034608" author="stack" created="Tue, 17 Jun 2014 23:38:35 +0000"  >&lt;p&gt;My comment was lost.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;This means adding classes in a com.google.protobuf package that forward to the real implementation.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Will this put us back in the same spot? i.e. we&apos;ll load the wrong c.g.p classes?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;...and missing all of the RpcChannel and Service bits.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Bad.  This will be bunch of work.&lt;/p&gt;</comment>
                            <comment id="14034634" author="apurtell" created="Wed, 18 Jun 2014 00:10:13 +0000"  >&lt;blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This means adding classes in a com.google.protobuf package that forward to the real implementation.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Will this put us back in the same spot? i.e. we&apos;ll load the wrong c.g.p classes?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Good point. &lt;/p&gt;

&lt;p&gt;Well, there will be a compatibility break then, for coprocessors. Best make it for 0.99+. Let me remove 0.98 from the target versions for now. We can put it back if we figure out something there.&lt;/p&gt;</comment>
                            <comment id="14034755" author="stack" created="Wed, 18 Jun 2014 03:08:34 +0000"  >&lt;p&gt;Thinking on it more, not generating the rpc/server bindings is a blocker.  It would be mountains of work hand coding something that is now generated hooking up rpc invocation w/ Service call through to server/client.... unless &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ryanobjc&quot; class=&quot;user-hover&quot; rel=&quot;ryanobjc&quot;&gt;ryan rawson&lt;/a&gt; or &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=posix4e&quot; class=&quot;user-hover&quot; rel=&quot;posix4e&quot;&gt;Alex Newman&lt;/a&gt; you fellows have a patch?&lt;/p&gt;

&lt;p&gt;Let me attach a suggestion.  It moves HBaseZeroCopyLiteralByteString into hbase-server so it is out of the way of client dependencies. Means we have the speedup serverside only.&lt;/p&gt;</comment>
                            <comment id="14034758" author="stack" created="Wed, 18 Jun 2014 03:14:31 +0000"  >&lt;p&gt;And it should be out of the way of mr dependencies....&lt;/p&gt;</comment>
                            <comment id="14034821" author="hadoopqa" created="Wed, 18 Jun 2014 05:00:31 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12650953/1118.suggested.undoing.optimization.on.clientside.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12650953/1118.suggested.undoing.optimization.on.clientside.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12650953&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 1 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 1 zombie test(s): 	at org.apache.hadoop.hbase.regionserver.TestHRegion.testWritesWhileGetting(TestHRegion.java:3499)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9787//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9787//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9787//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9787//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9787//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9787//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9787//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9787//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9787//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9787//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9787//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9787//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9787//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9787//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9787//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9787//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9787//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9787//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9787//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9787//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9787//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9787//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14035928" author="stack" created="Wed, 18 Jun 2014 16:48:15 +0000"  >&lt;p&gt;Retry.  The failure seems unrelated.  The findbugs is not mine.&lt;/p&gt;</comment>
                            <comment id="14036141" author="hadoopqa" created="Wed, 18 Jun 2014 18:49:14 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12651183/1118.suggested.undoing.optimization.on.clientside.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12651183/1118.suggested.undoing.optimization.on.clientside.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12651183&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 1 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 1 zombie test(s): &lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9790//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9790//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9790//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9790//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9790//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9790//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9790//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9790//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9790//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9790//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9790//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9790//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9790//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9790//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9790//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9790//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9790//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9790//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9790//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9790//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9790//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9790//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14036402" author="ryanobjc" created="Wed, 18 Jun 2014 21:15:30 +0000"  >&lt;p&gt;Sounds like you found the right solution.  Glad we could help give some perspective on protostuff.&lt;/p&gt;</comment>
                            <comment id="14036667" author="enis" created="Wed, 18 Jun 2014 23:41:59 +0000"  >&lt;blockquote&gt;&lt;p&gt;Thinking on it more, not generating the rpc/server bindings is a blocker. It would be mountains of work hand coding something that is now generated hooking up rpc invocation w/ Service call through to server/client&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Agreed. &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;It moves HBaseZeroCopyLiteralByteString into hbase-server so it is out of the way of client dependencies. Means we have the speedup serverside only.  &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;And it should be out of the way of mr dependencies....&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;We do not have a module for mapreduce. You mean the MR code should not import the class, hence it won&apos;t be loaded. Sounds good. &lt;br/&gt;
Can we do a util class, which checks whether it can load up ZCLBS and uses it if so, otherwise defaults to BS.copyFrom()? &lt;/p&gt;</comment>
                            <comment id="14036729" author="stack" created="Thu, 19 Jun 2014 00:28:47 +0000"  >&lt;blockquote&gt;&lt;p&gt;You mean the MR code should not import the class, hence it won&apos;t be loaded.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I mean these fat jars that want to talk to hbase won&apos;t be bundling hbase-server (unless by mistake) so they shouldn&apos;t be trying to load HBaseZeroCopyLiteralString.&lt;/p&gt;

&lt;p&gt;But maybe I need to do more pruning and get it out of these MR utilities too, at least I&apos;d have to to fix &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10304&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-10304&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fs111&quot; class=&quot;user-hover&quot; rel=&quot;fs111&quot;&gt;Andr&#233; Kelpe&lt;/a&gt; What exception trace are you seeing?  Is it same as &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10304&quot; title=&quot;Running an hbase job jar: IllegalAccessError: class com.google.protobuf.ZeroCopyLiteralByteString cannot access its superclass com.google.protobuf.LiteralByteString&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10304&quot;&gt;&lt;del&gt;HBASE-10304&lt;/del&gt;&lt;/a&gt;?  i.e. Lingual wants to run mapreduce job?  It is making use of hbase mapreduce formats?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Can we do a util class, which checks whether it can load up ZCLBS and uses it if so, otherwise defaults to BS.copyFrom()&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Let me see.  Maybe if it loads before everything else...&lt;/p&gt;</comment>
                            <comment id="14036962" author="dyu" created="Thu, 19 Jun 2014 04:57:02 +0000"  >&lt;p&gt;&amp;#8211; protostuff dev here&lt;br/&gt;
Reading from your comments, I think the most logical choice is to fork protobuf and override the ByteString behavior to wrap instead of copy (either modify ByteString.copyFrom or modify the protoc-codegen to emit ByteString.wrap).&lt;br/&gt;
Maintenance is easy with upstream since you&apos;re only modifying one source (ByteString) which will not be evolving much at all.&lt;/p&gt;

&lt;p&gt;&quot;Thinking on it more, not generating the rpc/server bindings is a blocker. It would be mountains of work hand coding something that is now generated hooking up rpc invocation w/ Service call through to server/client&quot;&lt;br/&gt;
If you still want to experiment with protostuff, I can help with this.&lt;br/&gt;
Its only a matter of having existing code, then converting that into a template.&lt;/p&gt;

&lt;p&gt;Looking at the codebase, is it safe to assume that hbase&apos;s use of protobuf-rpc are all blocking (not asynchronous)?&lt;br/&gt;
Do you use the reflection bits at all (e.g newReflectiveService)?&lt;br/&gt;
I see some hacks like &quot;Ugly delegation just so we can add in a Close method.&quot;, which I guess is caused by the inability to customize the codegen.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=posix4e&quot; class=&quot;user-hover&quot; rel=&quot;posix4e&quot;&gt;Alex Newman&lt;/a&gt; Daniel aye?&lt;/p&gt;</comment>
                            <comment id="14036979" author="stack" created="Thu, 19 Jun 2014 05:35:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=d4niel&quot; class=&quot;user-hover&quot; rel=&quot;d4niel&quot;&gt;Daniel Yu&lt;/a&gt; Thank you for taking the time to stop by.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Reading from your comments, I think the most logical choice is to fork protobuf and override the ByteString behavior to wrap instead of copy (either modify ByteString.copyFrom or modify the protoc-codegen to emit ByteString.wrap).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The problem is classloading a protobuf ahead of our doctored one, one that is in the CLASPATH already put there by hadoop.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Its only a matter of having existing code, then converting that into a template.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Thank you.  What happens then if we add new methods to the Interfaces?  We&apos;d have to modify the template? (The protobuf generated classes are massive, they are half our lines of code).&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Looking at the codebase, is it safe to assume that hbase&apos;s use of protobuf-rpc are all blocking...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;You are correct.&lt;/p&gt;

&lt;p&gt;We want to move to async but its a bit of work that we&apos;ve put off for the moment.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;.... which I guess is caused by the inability to customize the codegen.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yeah, I suppose we&apos;re being lazy and we should be going back modifying protoc generation (that is one of the attractive things about protostuff... that we could add it into our inline build along w/ any mods we&apos;d want to package).&lt;/p&gt;

&lt;p&gt;Again, thanks for coming by Daniel.&lt;/p&gt;


</comment>
                            <comment id="14037034" author="dyu" created="Thu, 19 Jun 2014 06:38:49 +0000"  >&lt;p&gt;First off, I&apos;m not Daniel &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;The problem is classloading a protobuf ahead of our doctored one, one that is in the CLASPATH already put there by hadoop.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I see.  Would hadoop consider moving to your forked protobuf?  If adding ByteString.wrap is the only modification, along with a field option (wrap = true) to make the protoc codegen emit ByteString.wrap, I&apos;m sure its not a problem since no incompatibility will arise (new behavior is only activated by a new field option).&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Thank you. What happens then if we add new methods to the Interfaces? We&apos;d have to modify the template? &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;No modification needed.  You&apos;ll just have to use a service option/annotation that activates the extra method generation in the template.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;(The protobuf generated classes are massive, they are half our lines of code).&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Indeed they are.  There are variants (LITE_RUNTIME, etc) when you do not need the extra stuff (reflection, extension, descriptor, unknown fields, etc).&lt;br/&gt;
Ofc you can always customize the output by working with protoc-gen&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Yeah, I suppose we&apos;re being lazy and we should be going back modifying protoc generation&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes and yes&lt;/p&gt;</comment>
                            <comment id="14037318" author="fs111" created="Thu, 19 Jun 2014 12:57:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; : We do have the hbase-server deps in the jars. This is due to the fact that we are based on a fork of the mapred InputFormat/OutputFormat, which uses the TableSplit class to calculate the InputSplits. The problem is that we cannot use the mapreduce apis in cascading and our version of the Input and OutputFormat has evolved and we want to keep it for backwards compatibility.&lt;/p&gt;


&lt;p&gt;If there is a way to get this working w/o the hbase-server deps, I am more than happy to drop it. The code is here, if that helps: &lt;a href=&quot;https://github.com/Cascading/cascading.hbase&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/Cascading/cascading.hbase&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14037391" author="stack" created="Thu, 19 Jun 2014 14:53:11 +0000"  >&lt;blockquote&gt;&lt;p&gt;First off, I&apos;m not Daniel &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sorry &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=david.yu&quot; class=&quot;user-hover&quot; rel=&quot;david.yu&quot;&gt;David Yu&lt;/a&gt;.  I messed up.  &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Would hadoop consider moving to your forked protobuf?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This would work for future hadoops but not for what is currently out in the world (folks tend to mix and match what version runs on what).  Besides, by the time it was widely available, we&apos;ll be up on protostuff so won&apos;t matter (smile).&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fs111&quot; class=&quot;user-hover&quot; rel=&quot;fs111&quot;&gt;Andr&#233; Kelpe&lt;/a&gt; Ok. Thanks.  So, the exception stack is same as over in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10304&quot; title=&quot;Running an hbase job jar: IllegalAccessError: class com.google.protobuf.ZeroCopyLiteralByteString cannot access its superclass com.google.protobuf.LiteralByteString&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10304&quot;&gt;&lt;del&gt;HBASE-10304&lt;/del&gt;&lt;/a&gt;?  You are coming in via TableMapReduceUtil (from mapred package?)  Thanks.&lt;/p&gt;</comment>
                            <comment id="14037654" author="stack" created="Thu, 19 Jun 2014 18:41:03 +0000"  >&lt;p&gt;This seems to work.  Verified using Nicks nice &lt;a href=&quot;https://github.com/ndimiduk/hbase-fatjar&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/ndimiduk/hbase-fatjar&lt;/a&gt; project.&lt;/p&gt;

&lt;p&gt;Adds new ByteStringer class that on class loading tries to make use of HBaseZeroCopyByteString.  If fails to load &amp;#8211; IllegalAccessError &amp;#8211; then we set flag and everafter, do ByteString.copyFrom instead.&lt;/p&gt;

&lt;p&gt;Patch is big because lots of HBZCBS replacements.&lt;/p&gt;

&lt;p&gt;My other patch moving HBZCBS to hbase-server wouldn&apos;t have worked given mr classes are in hbase-server (duh!) and these are the gateway used that brings on this problem (need to work on breaking out the hbase-mapreduce module).&lt;/p&gt;</comment>
                            <comment id="14037657" author="stack" created="Thu, 19 Jun 2014 18:42:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fs111&quot; class=&quot;user-hover&quot; rel=&quot;fs111&quot;&gt;Andr&#233; Kelpe&lt;/a&gt; Any chance of your trying out this last patch?  If too much work for you to do, just say and I&apos;ll borrow the head of 0.98, apply this patch temporarily and make you a SNAPSHOT to try.&lt;/p&gt;</comment>
                            <comment id="14037662" author="apurtell" created="Thu, 19 Jun 2014 18:46:12 +0000"  >&lt;blockquote&gt;&lt;p&gt;Adds new ByteStringer class that on class loading tries to make use of HBaseZeroCopyByteString. If fails to load &#8211; IllegalAccessError &#8211; then we set flag and everafter, do ByteString.copyFrom instead.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This sounds like a good solution for 0.98.&lt;/p&gt;</comment>
                            <comment id="14038172" author="apurtell" created="Fri, 20 Jun 2014 00:38:55 +0000"  >&lt;p&gt;For future reference, there are three post-protobuf options for consideration (at least): &lt;a href=&quot;https://kentonv.github.io/capnproto/news/2014-06-17-capnproto-flatbuffers-sbe.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://kentonv.github.io/capnproto/news/2014-06-17-capnproto-flatbuffers-sbe.html&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="14038246" author="stack" created="Fri, 20 Jun 2014 01:37:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt; None are pb compat on quick read?  (Its not mentioned in the matrix...)&lt;/p&gt;</comment>
                            <comment id="14038252" author="ryanobjc" created="Fri, 20 Jun 2014 01:47:26 +0000"  >&lt;p&gt;Does it make sense to have a non-protobuf dependent RPC framework?  At this&lt;br/&gt;
point isn&apos;t protobuf not just &apos;turn structs into bytes&apos; but also deeply&lt;br/&gt;
entangled in to HBase?  Seems like a longer term project.&lt;/p&gt;</comment>
                            <comment id="14038283" author="apurtell" created="Fri, 20 Jun 2014 02:30:46 +0000"  >&lt;p&gt;No, none are PB compatible. Can&apos;t be if meeting the desired goal of eliminating serde and copying costs. As a longer term project absolutely. Making a note here. &lt;/p&gt;</comment>
                            <comment id="14038719" author="fs111" created="Fri, 20 Jun 2014 11:54:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; I have tried getting this to work. I took the master, applied the patch, created a tarball, as explained here: &lt;a href=&quot;http://hbase.apache.org/book/releasing.html#maven.release&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hbase.apache.org/book/releasing.html#maven.release&lt;/a&gt; and tried to fire up a cluster. The regionservers come up cleanly, but the master is not available on &lt;a href=&quot;http://host:60010&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://host:60010&lt;/a&gt;.  I can&apos;t find anything in the logs. Is there something I overlooked?&lt;/p&gt;</comment>
                            <comment id="14038932" author="fs111" created="Fri, 20 Jun 2014 15:45:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; I figured out how where the master web ui is now, but I fail to put working jars in my local maven repo. I can&apos;t find a way to resolve $&lt;/p&gt;
{compat.module}
&lt;p&gt; correctly. What is the exact invocation I need to get this working?&lt;/p&gt;</comment>
                            <comment id="14039105" author="ndimiduk" created="Fri, 20 Jun 2014 18:02:05 +0000"  >&lt;p&gt;master has dropped support for hadoop-1. Can you provide the commands you&apos;ve used and the error you&apos;re seeing? Thanks.&lt;/p&gt;</comment>
                            <comment id="14040969" author="stack" created="Mon, 23 Jun 2014 17:05:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fs111&quot; class=&quot;user-hover&quot; rel=&quot;fs111&quot;&gt;Andr&#233; Kelpe&lt;/a&gt; Tell us what to do so testing is easy for you?  I could branch 0.98, commit this patch, then push a build to mvn if that would help you.&lt;/p&gt;</comment>
                            <comment id="14041156" author="fs111" created="Mon, 23 Jun 2014 19:18:23 +0000"  >&lt;p&gt;Here is what I did:&lt;/p&gt;

&lt;p&gt;    mvn versions:set -DnewVersion=0.99-Cascading&lt;br/&gt;
    mvn install -DskipTests site assembly:single -Prelease&lt;/p&gt;

&lt;p&gt;I then took the binary tarball to deploy a cluster. Now if I want to rebuild the cascading.hbase module, it always fails with an error related to the compat.module. It seems the variable hasn&apos;t been expanded and that confuses gradle:&lt;/p&gt;

</comment>
                            <comment id="14041160" author="fs111" created="Mon, 23 Jun 2014 19:19:16 +0000"  >&lt;p&gt;Sorry, forgot the gradle error:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 $ gradle cascading-hbase-hadoop2-mr1:build
The TaskContainer.add() method has been deprecated and is scheduled to be removed in Gradle 2.0. Please use the create() method instead.
:cascading-hbase-hadoop2-mr1:compileJava

FAILURE: Build failed with an exception.

* What went wrong:
Could not resolve all dependencies &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; configuration &apos;:cascading-hbase-hadoop2-mr1:compile&apos;.
&amp;gt; Could not resolve org.apache.hbase:${compat.module}:0.99-CASCADING.
  Required by:
      cascading-hbase:cascading-hbase-hadoop2-mr1:2.5.0-wip-dev &amp;gt; org.apache.hbase:hbase-server:0.99-CASCADING
      cascading-hbase:cascading-hbase-hadoop2-mr1:2.5.0-wip-dev &amp;gt; org.apache.hbase:hbase-server:0.99-CASCADING &amp;gt; org.apache.hbase:hbase-prefix-tree:0.99-CASCADING
   &amp;gt; java.lang.NullPointerException (no error message)
   &amp;gt; java.lang.IllegalArgumentException (no error message)
   &amp;gt; java.lang.IllegalArgumentException (no error message)
   &amp;gt; java.lang.IllegalArgumentException (no error message)

* Try:
Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.

BUILD FAILED

Total time: 8.848 secs
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14041185" author="stack" created="Mon, 23 Jun 2014 19:41:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fs111&quot; class=&quot;user-hover&quot; rel=&quot;fs111&quot;&gt;Andr&#233; Kelpe&lt;/a&gt; Can you pass a property?  compat.module=hbase-hadoop2-compat ?  Or hard-code it in the pom?&lt;/p&gt;</comment>
                            <comment id="14048267" author="enis" created="Mon, 30 Jun 2014 22:44:27 +0000"  >&lt;p&gt;+1 for the ByteStringer patch. It seems we do not need to do reflection on the HZCLBS, so that we can import that class, right? &lt;/p&gt;</comment>
                            <comment id="14048275" author="stack" created="Mon, 30 Jun 2014 22:54:31 +0000"  >&lt;blockquote&gt;&lt;p&gt;It seems we do not need to do reflection on the HZCLBS, so that we can import that class, right?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Not for it, no.  I was hoping to get some confirmation from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fs111&quot; class=&quot;user-hover&quot; rel=&quot;fs111&quot;&gt;Andr&#233; Kelpe&lt;/a&gt; that this patch works for him but I could commit (I reproduced using Nick&apos;s fatjar project and this patches fixes the issue in that case).&lt;/p&gt;</comment>
                            <comment id="14048289" author="apurtell" created="Mon, 30 Jun 2014 23:13:25 +0000"  >&lt;p&gt;I think we can go ahead and commit this to trunk and 0.98&lt;/p&gt;</comment>
                            <comment id="14048300" author="fs111" created="Mon, 30 Jun 2014 23:28:55 +0000"  >&lt;p&gt;Sorry for not coming back to this. I haven&apos;t been able to test this, since I am busy with more important matters. If you could point me to a snapshot build, that I could use, I can give this a spin. I seem to be unable to build a custom HBase.&lt;/p&gt;</comment>
                            <comment id="14049364" author="stack" created="Tue, 1 Jul 2014 21:57:09 +0000"  >&lt;p&gt;I published a SNAPSHOT for you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fs111&quot; class=&quot;user-hover&quot; rel=&quot;fs111&quot;&gt;Andr&#233; Kelpe&lt;/a&gt; up at &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/org/apache/hbase/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://repository.apache.org/content/repositories/snapshots/org/apache/hbase/&lt;/a&gt;  SNAPSHOT is named:&lt;/p&gt;

&lt;p&gt;0.98.4-11118-SNAPSHOT&lt;/p&gt;

&lt;p&gt;Hopefully you get a chance to test.  Thanks.&lt;/p&gt;</comment>
                            <comment id="14049369" author="stack" created="Tue, 1 Jul 2014 21:58:41 +0000"  >&lt;p&gt;Patch for 0.98.&lt;/p&gt;</comment>
                            <comment id="14049408" author="hadoopqa" created="Tue, 1 Jul 2014 22:53:37 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12653477/11118.098.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12653477/11118.098.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12653477&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 21 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9930//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9930//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14050356" author="fs111" created="Wed, 2 Jul 2014 17:19:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; Thanks for the snapshot. I hope I will find a window of time to give it a spin in the next few days. I will post results here.&lt;/p&gt;</comment>
                            <comment id="14050696" author="ndimiduk" created="Wed, 2 Jul 2014 20:48:34 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;. Taking 11118.098.txt for a spin. I applied the patch to 0.98 and launched local mode. I&apos;m seeing this in my log&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2014-07-02 13:24:53,899 ERROR [htable-pool9-t1] client.AsyncProcess: #6, Caught throwable while calling. This is unexpected. Retrying. Server is 10.11.5.156,54722,1404332679793, tableName=hbase:meta
java.lang.RuntimeException: java.lang.StackOverflowError
	at org.apache.hadoop.hbase.client.RpcRetryingCaller.callWithoutRetries(RpcRetryingCaller.java:188)
	at org.apache.hadoop.hbase.client.AsyncProcess$1.run(AsyncProcess.java:543)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
	at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
	at java.util.concurrent.FutureTask.run(FutureTask.java:166)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.Thread.run(Thread.java:724)
Caused by: java.lang.StackOverflowError
	at org.apache.hadoop.hbase.util.ByteStringer.wrap(ByteStringer.java:65)
	at org.apache.hadoop.hbase.util.ByteStringer.wrap(ByteStringer.java:65)
	at org.apache.hadoop.hbase.util.ByteStringer.wrap(ByteStringer.java:65)
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Attaching a fixed patch, simple interdiff:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;diff -u b/hbase-protocol/src/main/java/org/apache/hadoop/hbase/util/ByteStringer.java b/hbase-protocol/src/main/java/org/apache/hadoop/hbase/util/ByteStringer.java
--- b/hbase-protocol/src/main/java/org/apache/hadoop/hbase/util/ByteStringer.java
+++ b/hbase-protocol/src/main/java/org/apache/hadoop/hbase/util/ByteStringer.java
@@ -62,7 +62,7 @@
    * Wraps a subset of a byte array in a {@link ByteString} without copying it.
    */
   public static ByteString wrap(final byte[] array, int offset, int length) {
-    return USE_ZEROCOPYBYTESTRING? ByteStringer.wrap(array, offset, length):
+    return USE_ZEROCOPYBYTESTRING? HBaseZeroCopyByteString.wrap(array, offset, length):
       ByteString.copyFrom(array, offset, length);
   }
 }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I also updated the hbase-fatjar to include the apache repo to make it easier to test snapshots.&lt;/p&gt;</comment>
                            <comment id="14050711" author="hadoopqa" created="Wed, 2 Jul 2014 21:08:36 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12653686/11118.098-0.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12653686/11118.098-0.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12653686&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 21 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9946//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9946//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14050849" author="stack" created="Wed, 2 Jul 2014 23:09:16 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fs111&quot; class=&quot;user-hover&quot; rel=&quot;fs111&quot;&gt;Andr&#233; Kelpe&lt;/a&gt; I refreshed the snapshot to include fix that Nick posted.  Just FYI.&lt;/p&gt;</comment>
                            <comment id="14053963" author="ndimiduk" created="Mon, 7 Jul 2014 18:22:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; FYI, building my fat-jar project with -Dhbase.version=0.98.4-11118-SNAPSHOT isn&apos;t pulling the snapshot jars from the apache repo. I don&apos;t know if it&apos;s something wrong with that project&apos;s pom or with the snapshot release itself.&lt;/p&gt;</comment>
                            <comment id="14053984" author="ndimiduk" created="Mon, 7 Jul 2014 18:31:05 +0000"  >&lt;p&gt;You patch includes the necessary changes to pom.xml files, excellent! I installed this build and ran the fat-jar tests. This patch fixes the issue, at least as far as this test case is concerned.&lt;/p&gt;

&lt;p&gt;Nice one &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="14054159" author="ndimiduk" created="Mon, 7 Jul 2014 20:18:20 +0000"  >&lt;p&gt;Attaching patches for 0.98 and master. Please consider these candidates for commit. These are basically just &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;&apos;s patches, rebased to appropriate HEAD and omitting the pom changes.&lt;/p&gt;</comment>
                            <comment id="14054165" author="hadoopqa" created="Mon, 7 Jul 2014 20:23:11 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12654375/HBASE-11118.00.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12654375/HBASE-11118.00.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12654375&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 28 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javac&lt;/font&gt;.  The patch appears to cause mvn compile goal to fail.&lt;/p&gt;

&lt;p&gt;    Compilation errors resume:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; COMPILATION ERROR : &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-protocol/src/main/java/org/apache/hadoop/hbase/util/ByteStringer.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;20,33&amp;#93;&lt;/span&gt; error: package org.apache.commons.logging does not exist&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-protocol/src/main/java/org/apache/hadoop/hbase/util/ByteStringer.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;21,33&amp;#93;&lt;/span&gt; error: package org.apache.commons.logging does not exist&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-protocol/src/main/java/org/apache/hadoop/hbase/util/ByteStringer.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;31,23&amp;#93;&lt;/span&gt; error: cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt;   symbol:   class Log&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.5.1:compile (default-compile) on project hbase-protocol: Compilation failure: Compilation failure:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-protocol/src/main/java/org/apache/hadoop/hbase/util/ByteStringer.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;20,33&amp;#93;&lt;/span&gt; error: package org.apache.commons.logging does not exist&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-protocol/src/main/java/org/apache/hadoop/hbase/util/ByteStringer.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;21,33&amp;#93;&lt;/span&gt; error: package org.apache.commons.logging does not exist&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-protocol/src/main/java/org/apache/hadoop/hbase/util/ByteStringer.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;31,23&amp;#93;&lt;/span&gt; error: cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; symbol:   class Log&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; location: class ByteStringer&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-protocol/src/main/java/org/apache/hadoop/hbase/util/ByteStringer.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;31,33&amp;#93;&lt;/span&gt; error: cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; To see the full stack trace of the errors, re-run Maven with the -e switch.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Re-run Maven using the -X switch to enable full debug logging.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; For more information about the errors and possible solutions, please read the following articles:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; After correcting the problems, you can resume the build with the command&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt;   mvn &amp;lt;goals&amp;gt; -rf :hbase-protocol&lt;/p&gt;


&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9983//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9983//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14054296" author="apurtell" created="Mon, 7 Jul 2014 23:41:37 +0000"  >&lt;p&gt;+1 for 0.98. Please fix imports on commit &lt;/p&gt;</comment>
                            <comment id="14054314" author="hadoopqa" created="Tue, 8 Jul 2014 00:05:13 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12654382/HBASE-11118.01.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12654382/HBASE-11118.01.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12654382&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 28 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 4 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.client.TestMultiParallel&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9985//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9985//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9985//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9985//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9985//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9985//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9985//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9985//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9985//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9985//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9985//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9985//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9985//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9985//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9985//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9985//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9985//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9985//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9985//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9985//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9985//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9985//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14054317" author="enis" created="Tue, 8 Jul 2014 00:11:01 +0000"  >&lt;p&gt;+1 for branch-1. &lt;/p&gt;</comment>
                            <comment id="14054429" author="ndimiduk" created="Tue, 8 Jul 2014 02:13:21 +0000"  >&lt;blockquote&gt;&lt;p&gt;Please fix imports on commit&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I went through all files touched by both patches, removing unused imports. Attaching the results as v02. Please let me know if something else was intended.&lt;/p&gt;</comment>
                            <comment id="14054506" author="hadoopqa" created="Tue, 8 Jul 2014 04:34:08 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12654444/HBASE-11118.02.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12654444/HBASE-11118.02.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12654444&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 28 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 4 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.coprocessor.TestRegionObserverInterface&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9988//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9988//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9988//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9988//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9988//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9988//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9988//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9988//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9988//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9988//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9988//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9988//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9988//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9988//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9988//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9988//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9988//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9988//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9988//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9988//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9988//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9988//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14055050" author="apurtell" created="Tue, 8 Jul 2014 15:39:51 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14055052" author="apurtell" created="Tue, 8 Jul 2014 15:40:46 +0000"  >&lt;p&gt;Really happy we didn&apos;t have to pull the trigger on forking protobuf after all, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14055153" author="ndimiduk" created="Tue, 8 Jul 2014 17:15:56 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fs111&quot; class=&quot;user-hover&quot; rel=&quot;fs111&quot;&gt;Andr&#233; Kelpe&lt;/a&gt;, we have a solution. It would be great if you could verify it works for you before we pull the trigger and declare success. Thanks.&lt;/p&gt;</comment>
                            <comment id="14057426" author="fs111" created="Thu, 10 Jul 2014 12:42:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt; no luck with the snapshot repository: &lt;/p&gt;

&lt;p&gt;    $ gradle clean build &lt;br/&gt;
    The TaskContainer.add() method has been deprecated and is scheduled to be removed in Gradle 2.0. Please use the create() method instead.&lt;br/&gt;
    :cascading-hbase-hadoop2-mr1:clean UP-TO-DATE&lt;br/&gt;
    :cascading-hbase-hadoop2-mr1:compileJava&lt;br/&gt;
    Download &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/org/apache/hbase/hbase-hadoop2-compat/0.98.4-11118-SNAPSHOT/hbase-hadoop2-compat-0.98.4-11118-20140702.231131-2.pom&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://repository.apache.org/content/repositories/snapshots/org/apache/hbase/hbase-hadoop2-compat/0.98.4-11118-SNAPSHOT/hbase-hadoop2-compat-0.98.4-11118-20140702.231131-2.pom&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    FAILURE: Build failed with an exception.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;What went wrong:&lt;br/&gt;
    Could not resolve all dependencies for configuration &apos;:cascading-hbase-hadoop2-mr1:compile&apos;.&lt;br/&gt;
    &amp;gt; Could not resolve org.apache.hbase:$
{compat.module}:0.98.4-11118-SNAPSHOT.&lt;br/&gt;
      Required by: &lt;br/&gt;
          cascading-hbase:cascading-hbase-hadoop2-mr1:2.5.0-wip-dev &amp;gt; org.apache.hbase:hbase-server:0.98.4-11118-SNAPSHOT&lt;br/&gt;
          cascading-hbase:cascading-hbase-hadoop2-mr1:2.5.0-wip-dev &amp;gt; org.apache.hbase:hbase-server:0.98.4-11118-SNAPSHOT &amp;gt; org.apache.hbase:hbase-prefix-tree:0.98.4-11118-SNAPSHOT&lt;br/&gt;
       &amp;gt; java.lang.NullPointerException (no error message)&lt;br/&gt;
       &amp;gt; Unable to load Maven meta-data from &lt;a href=&quot;http://repo1.maven.org/maven2/org/apache/hbase/$&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://repo1.maven.org/maven2/org/apache/hbase/$&lt;/a&gt;{compat.module}
&lt;p&gt;/0.98.4-11118-SNAPSHOT/maven-metadata.xml.&lt;br/&gt;
          &amp;gt; java.lang.IllegalArgumentException (no error message)&lt;br/&gt;
       &amp;gt; Unable to load Maven meta-data from &lt;a href=&quot;http://conjars.org/repo/org/apache/hbase/$&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://conjars.org/repo/org/apache/hbase/$&lt;/a&gt;&lt;/p&gt;
{compat.module}/0.98.4-11118-SNAPSHOT/maven-metadata.xml.&lt;br/&gt;
          &amp;gt; java.lang.IllegalArgumentException (no error message)&lt;br/&gt;
       &amp;gt; Unable to load Maven meta-data from &lt;a href=&quot;https://repository.apache.org/content/repositories/releases/org/apache/hbase/$&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://repository.apache.org/content/repositories/releases/org/apache/hbase/$&lt;/a&gt;{compat.module}
&lt;p&gt;/0.98.4-11118-SNAPSHOT/maven-metadata.xml.&lt;br/&gt;
          &amp;gt; java.lang.IllegalArgumentException (no error message)&lt;br/&gt;
       &amp;gt; Unable to load Maven meta-data from &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/org/apache/hbase/$&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://repository.apache.org/content/repositories/snapshots/org/apache/hbase/$&lt;/a&gt;&lt;/p&gt;
{compat.module}
&lt;p&gt;/0.98.4-11118-SNAPSHOT/maven-metadata.xml.&lt;br/&gt;
          &amp;gt; java.lang.IllegalArgumentException (no error message)&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Try:&lt;br/&gt;
    Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    BUILD FAILED&lt;/p&gt;

&lt;p&gt;    Total time: 18.433 secs&lt;/p&gt;
</comment>
                            <comment id="14057802" author="ndimiduk" created="Thu, 10 Jul 2014 18:41:30 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fs111&quot; class=&quot;user-hover&quot; rel=&quot;fs111&quot;&gt;Andr&#233; Kelpe&lt;/a&gt;. I think I&apos;ve reproduced the repo issue, let me see about fixing it.&lt;/p&gt;

&lt;p&gt;In the mean time, I&apos;ve pushed a branch to my github. Can you test against a local repo? If so, checkout the branch, `mvn clean install -DskipTests` will install an artifact version 0.98.4-SNAPSHOT built against hadoop2. Can you give that a spin instead? Thanks.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/ndimiduk/hbase/tree/11118-0.98-ZeroCopyLiteralByteString-fix&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/ndimiduk/hbase/tree/11118-0.98-ZeroCopyLiteralByteString-fix&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14058003" author="ndimiduk" created="Thu, 10 Jul 2014 21:42:50 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fs111&quot; class=&quot;user-hover&quot; rel=&quot;fs111&quot;&gt;Andr&#233; Kelpe&lt;/a&gt;. I&apos;ve &quot;published&quot; a built of this branch. Add the following repository info and give it another spin. Thanks&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;repository&amp;gt;
  &amp;lt;id&amp;gt;apache.people.ndimiduk&amp;lt;/id&amp;gt;
  &amp;lt;url&amp;gt;http://people.apache.org/~ndimiduk/repository&amp;lt;/url&amp;gt;
  &amp;lt;snapshots&amp;gt;
    &amp;lt;enabled&amp;gt;true&amp;lt;/enabled&amp;gt;
  &amp;lt;/snapshots&amp;gt;
&amp;lt;/repository&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14058006" author="ndimiduk" created="Thu, 10 Jul 2014 21:44:06 +0000"  >&lt;p&gt;Same as before, artifact version is still 0.98.4-SNAPSHOT, built against hadoop2.&lt;/p&gt;</comment>
                            <comment id="14058281" author="apurtell" created="Fri, 11 Jul 2014 02:59:47 +0000"  >&lt;p&gt;This issue seems stuck on Maven/repo madness. We think we have a patch that fixes the issue, it has a +1, so I am going to commit this tomorrow so we can make forward progress and get out a 0.98.4 release, unless someone vetoes between now and then. Confirmation would be great but the snapshot repos have not been working out. We can verify through normal Maven channels with .4.&lt;/p&gt;</comment>
                            <comment id="14058403" author="ndimiduk" created="Fri, 11 Jul 2014 05:24:24 +0000"  >&lt;p&gt;Precisely my plan. I&apos;ll take care of it if I see you haven&apos;t. Don&apos;t want to hold up the RC any longer.&lt;/p&gt;</comment>
                            <comment id="14058738" author="fs111" created="Fri, 11 Jul 2014 13:05:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt; I tried your repo and installing it myself locally, but none of it works. The compat.module variable is never expanded and breaks everything.&lt;/p&gt;</comment>
                            <comment id="14058839" author="ndimiduk" created="Fri, 11 Jul 2014 14:33:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fs111&quot; class=&quot;user-hover&quot; rel=&quot;fs111&quot;&gt;Andr&#233; Kelpe&lt;/a&gt; I pulled cascading.hbase and did a &lt;tt&gt;gradle clean build&lt;/tt&gt;. I think the reason you&apos;re seeing compat.module issues is because this project has dependencies against hbase/hadoop1 and I only pushed hadoop2 artifacts.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;:check UP-TO-DATE
:build
:cascading-hbase-hadoop:compileJava
Download http://repo1.maven.org/maven2/org/apache/hbase/hbase-client/0.98.1-hadoop1/hbase-client-0.98.1-hadoop1.pom
Download http://repo1.maven.org/maven2/org/apache/hbase/hbase/0.98.1-hadoop1/hbase-0.98.1-hadoop1.pom
Download http://repo1.maven.org/maven2/org/apache/hbase/hbase-server/0.98.1-hadoop1/hbase-server-0.98.1-hadoop1.pom
Download http://repo1.maven.org/maven2/org/apache/hbase/hbase-common/0.98.1-hadoop1/hbase-common-0.98.1-hadoop1.pom
Download http://repo1.maven.org/maven2/org/apache/hbase/hbase-hadoop1-compat/0.98.1-hadoop1/hbase-hadoop1-compat-0.98.1-hadoop1.pom
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Let me build both hadoop compat modules and give this a try.&lt;/p&gt;</comment>
                            <comment id="14058848" author="fs111" created="Fri, 11 Jul 2014 14:46:32 +0000"  >&lt;p&gt;yes, but I was doing my tests in cascading-hbase-hadoop2-mr1, which is only using hadoop2.&lt;/p&gt;</comment>
                            <comment id="14058936" author="ndimiduk" created="Fri, 11 Jul 2014 16:10:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fs111&quot; class=&quot;user-hover&quot; rel=&quot;fs111&quot;&gt;Andr&#233; Kelpe&lt;/a&gt; please give it another shot. The compat.module issues are a side-effect of how the HBase build is managed for hadoop1/hadoop2 compatibility. Basically, Stack and I were both lazy in how we built and published jars. I&apos;ve done it properly now and the build of cascading.hbase is now working for me with the following patch applied.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;diff --git a/build.gradle b/build.gradle
index 75f3b46..5f25ea9 100644
--- a/build.gradle
+++ b/build.gradle
@@ -60,6 +60,7 @@ allprojects {
     mavenCentral()
     maven{ url &apos;http://conjars.org/repo/&apos; }
     maven{ url &apos;https://repository.apache.org/content/repositories/releases/&apos; }
+    maven{ url &apos;http://people.apache.org/~ndimiduk/repository/&apos; }
   }
   version = releaseVersion
 }
diff --git a/cascading-hbase-hadoop/build.gradle b/cascading-hbase-hadoop/build.gradle
index 6507a1a..d631762 100644
--- a/cascading-hbase-hadoop/build.gradle
+++ b/cascading-hbase-hadoop/build.gradle
@@ -20,7 +20,7 @@
 
 apply from: &quot;${rootDir}/etc/hadoop-shared-config.gradle&quot;
 
-ext.hbaseVersion = &apos;0.98.1-hadoop1&apos;
+ext.hbaseVersion = &apos;0.98.4-hadoop1-SNAPSHOT&apos;
 ext.hadoopVersion = &apos;1.2.1&apos;
 
 dependencies {
diff --git a/cascading-hbase-hadoop2-mr1/build.gradle b/cascading-hbase-hadoop2-mr1/build.gradle
index f36fc99..91e62ad 100644
--- a/cascading-hbase-hadoop2-mr1/build.gradle
+++ b/cascading-hbase-hadoop2-mr1/build.gradle
@@ -24,7 +24,7 @@ idea {
   pathVariables MODULE_DIR: file( &quot;${rootDir}/cascading-hbase-hadoop&quot; )
 }
 
-ext.hbaseVersion = &apos;0.98.1-hadoop2&apos;
+ext.hbaseVersion = &apos;0.98.4-hadoop2-SNAPSHOT&apos;
 ext.hadoopVersion = &apos;2.2.0&apos;
 
 dependencies {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14058964" author="apurtell" created="Fri, 11 Jul 2014 16:34:23 +0000"  >&lt;p&gt;Ok &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14059518" author="ndimiduk" created="Fri, 11 Jul 2014 23:58:02 +0000"  >&lt;p&gt;Patch for 0.98 needed slit update after rebase, uploading what was committed.&lt;/p&gt;</comment>
                            <comment id="14059520" author="ndimiduk" created="Fri, 11 Jul 2014 23:59:39 +0000"  >&lt;p&gt;I have it on good authority that &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fs111&quot; class=&quot;user-hover&quot; rel=&quot;fs111&quot;&gt;Andr&#233; Kelpe&lt;/a&gt; has finished work for the day, so committing what&apos;s here. Please re-open for addendum or open a new ticket if this issue persists.&lt;/p&gt;

&lt;p&gt;Pushed to 0.98, branch-1, and master.&lt;/p&gt;</comment>
                            <comment id="14059525" author="ndimiduk" created="Sat, 12 Jul 2014 00:03:51 +0000"  >&lt;p&gt;Just realized I pushed a commit message that neglected to honor &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; as the contribution&apos;s primary author. My apologies sir!&lt;/p&gt;</comment>
                            <comment id="14059618" author="hudson" created="Sat, 12 Jul 2014 03:20:42 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98 #389 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/389/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/389/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11118&quot; title=&quot;non environment variable solution for &amp;quot;IllegalAccessError: class com.google.protobuf.ZeroCopyLiteralByteString cannot access its superclass com.google.protobuf.LiteralByteString&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11118&quot;&gt;&lt;del&gt;HBASE-11118&lt;/del&gt;&lt;/a&gt; non environment variable solution for &quot;IllegalAccessError: class com.google.protobuf.ZeroCopyLiteralByteString cannot access its superclass com.google.protobuf.LiteralByteString&quot; (ndimiduk: rev 8884ad0444cada23dfbd4dbde9db9e2a20ae262a)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestPriorityRpc.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/security/visibility/VisibilityUtils.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/coprocessor/TestCoprocessorEndpoint.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/coprocessor/TestRowProcessorEndpoint.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/protobuf/ReplicationProtbufUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/FirstKeyValueMatchingQualifiersFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/util/ByteStringer.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/protobuf/TestProtobufUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/InclusiveStopFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/rest/model/CellSetModel.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/security/access/AccessControlClient.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/test/java/org/apache/hadoop/hbase/client/TestClientNoCluster.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/HTableDescriptor.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/coprocessor/SecureBulkLoadClient.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/security/visibility/VisibilityController.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/FuzzyRowFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/ColumnRangeFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/codec/MessageCodec.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/HFile.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/ByteArrayComparable.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/ColumnPrefixFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/rest/model/CellModel.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/Reference.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/security/EncryptionUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/rest/model/ScannerModel.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogKey.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ClusterStatus.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/DependentColumnFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/pom.xml&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/RegionCoprocessorRpcChannel.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/coprocessor/BigDecimalColumnInterpreter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/regionserver/TestReplicationSink.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/SecureProtobufLogWriter.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/MasterCoprocessorRpcChannel.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/HRegionInfo.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/SingleColumnValueFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlock.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/MultipleColumnPrefixFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/HColumnDescriptor.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/FixedFileTrailer.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/com/google/protobuf/HBaseZeroCopyByteString.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/security/visibility/VisibilityClient.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/rest/model/TableInfoModel.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/coprocessor/TestBatchCoprocessorEndpoint.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/RegionTransition.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/zookeeper/ZKUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/PrefixFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/rest/model/StorageClusterStatusModel.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/ColumnPaginationFilter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14059638" author="hudson" created="Sat, 12 Jul 2014 04:33:56 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #5290 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/5290/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/5290/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11118&quot; title=&quot;non environment variable solution for &amp;quot;IllegalAccessError: class com.google.protobuf.ZeroCopyLiteralByteString cannot access its superclass com.google.protobuf.LiteralByteString&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11118&quot;&gt;&lt;del&gt;HBASE-11118&lt;/del&gt;&lt;/a&gt; non environment variable solution for &quot;IllegalAccessError: class com.google.protobuf.ZeroCopyLiteralByteString cannot access its superclass com.google.protobuf.LiteralByteString&quot; (ndimiduk: rev c01e7e50c1047565da1b0c6ed6fe8bfdf25e03b4)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/SecureProtobufLogWriter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/rest/model/TableInfoModel.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogKey.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/coprocessor/TestRowProcessorEndpoint.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlock.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/RegionCoprocessorRpcChannel.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/coprocessor/BigDecimalColumnInterpreter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/regionserver/TestReplicationSink.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/security/access/AccessControlClient.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/FirstKeyValueMatchingQualifiersFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ClusterStatus.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/ByteArrayComparable.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/ColumnPaginationFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/PrefixFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/ColumnRangeFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/HTableDescriptor.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/codec/MessageCodec.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/FixedFileTrailer.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/ColumnPrefixFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/protobuf/ReplicationProtbufUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/coprocessor/SecureBulkLoadClient.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/DependentColumnFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/rest/model/ScannerModel.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/protobuf/TestProtobufUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/util/ByteStringer.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/FuzzyRowFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/HFile.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/rest/model/CellSetModel.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/test/java/org/apache/hadoop/hbase/client/TestClientNoCluster.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/HRegionInfo.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/InclusiveStopFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/MasterCoprocessorRpcChannel.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/rest/model/StorageClusterStatusModel.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/Reference.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/security/visibility/VisibilityController.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestPriorityRpc.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/com/google/protobuf/HBaseZeroCopyByteString.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/zookeeper/ZKUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/security/visibility/VisibilityUtils.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/RegionTransition.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/pom.xml&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/SingleColumnValueFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/rest/model/CellModel.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/security/visibility/VisibilityClient.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/coprocessor/TestBatchCoprocessorEndpoint.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/HColumnDescriptor.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/coprocessor/TestCoprocessorEndpoint.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/security/EncryptionUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/MultipleColumnPrefixFilter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14059673" author="hudson" created="Sat, 12 Jul 2014 06:06:59 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.0 #31 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/31/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.0/31/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11118&quot; title=&quot;non environment variable solution for &amp;quot;IllegalAccessError: class com.google.protobuf.ZeroCopyLiteralByteString cannot access its superclass com.google.protobuf.LiteralByteString&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11118&quot;&gt;&lt;del&gt;HBASE-11118&lt;/del&gt;&lt;/a&gt; non environment variable solution for &quot;IllegalAccessError: class com.google.protobuf.ZeroCopyLiteralByteString cannot access its superclass com.google.protobuf.LiteralByteString&quot; (ndimiduk: rev c3628579013d7f5e1dbfdf0b9ceca0221c1c1e66)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/ColumnPrefixFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/FixedFileTrailer.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/RegionTransition.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/security/visibility/VisibilityUtils.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/FirstKeyValueMatchingQualifiersFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/protobuf/ReplicationProtbufUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/PrefixFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/util/ByteStringer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestPriorityRpc.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/SecureProtobufLogWriter.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/security/visibility/VisibilityClient.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/rest/model/CellModel.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/security/access/AccessControlClient.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/security/EncryptionUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlock.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/codec/MessageCodec.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/RegionCoprocessorRpcChannel.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/zookeeper/ZKUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogKey.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/HFile.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/pom.xml&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/ByteArrayComparable.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/rest/model/TableInfoModel.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/HColumnDescriptor.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/rest/model/CellSetModel.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/coprocessor/TestRowProcessorEndpoint.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/regionserver/TestReplicationSink.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/MultipleColumnPrefixFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/HRegionInfo.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/rest/model/StorageClusterStatusModel.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/protobuf/TestProtobufUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/FuzzyRowFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/InclusiveStopFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/coprocessor/SecureBulkLoadClient.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/coprocessor/TestBatchCoprocessorEndpoint.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/coprocessor/TestCoprocessorEndpoint.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/SingleColumnValueFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/coprocessor/BigDecimalColumnInterpreter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/rest/model/ScannerModel.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/Reference.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/ColumnRangeFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/MasterCoprocessorRpcChannel.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/com/google/protobuf/HBaseZeroCopyByteString.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/test/java/org/apache/hadoop/hbase/client/TestClientNoCluster.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ClusterStatus.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/security/visibility/VisibilityController.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/DependentColumnFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/ColumnPaginationFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/HTableDescriptor.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14059684" author="hudson" created="Sat, 12 Jul 2014 06:36:39 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.98-on-Hadoop-1.1 #369 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/369/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/369/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11118&quot; title=&quot;non environment variable solution for &amp;quot;IllegalAccessError: class com.google.protobuf.ZeroCopyLiteralByteString cannot access its superclass com.google.protobuf.LiteralByteString&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11118&quot;&gt;&lt;del&gt;HBASE-11118&lt;/del&gt;&lt;/a&gt; non environment variable solution for &quot;IllegalAccessError: class com.google.protobuf.ZeroCopyLiteralByteString cannot access its superclass com.google.protobuf.LiteralByteString&quot; (ndimiduk: rev 8884ad0444cada23dfbd4dbde9db9e2a20ae262a)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/FuzzyRowFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/ColumnPrefixFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/MasterCoprocessorRpcChannel.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/coprocessor/TestCoprocessorEndpoint.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/security/visibility/VisibilityController.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/com/google/protobuf/HBaseZeroCopyByteString.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/InclusiveStopFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogKey.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/HColumnDescriptor.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/pom.xml&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/MultipleColumnPrefixFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/codec/MessageCodec.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestPriorityRpc.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/FixedFileTrailer.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/ByteArrayComparable.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/HFile.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/HTableDescriptor.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/zookeeper/ZKUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/rest/model/ScannerModel.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/ColumnPaginationFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/RegionCoprocessorRpcChannel.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/HRegionInfo.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/rest/model/CellModel.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/ColumnRangeFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/security/visibility/VisibilityUtils.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/FirstKeyValueMatchingQualifiersFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/coprocessor/SecureBulkLoadClient.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/SingleColumnValueFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlock.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/Reference.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/protobuf/ReplicationProtbufUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/coprocessor/TestBatchCoprocessorEndpoint.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/SecureProtobufLogWriter.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ClusterStatus.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/protobuf/TestProtobufUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/security/visibility/VisibilityClient.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/security/access/AccessControlClient.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/util/ByteStringer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/rest/model/TableInfoModel.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/security/EncryptionUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/DependentColumnFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/PrefixFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/test/java/org/apache/hadoop/hbase/client/TestClientNoCluster.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/regionserver/TestReplicationSink.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/rest/model/StorageClusterStatusModel.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/RegionTransition.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/coprocessor/TestRowProcessorEndpoint.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/rest/model/CellSetModel.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/coprocessor/BigDecimalColumnInterpreter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14059790" author="anoop.hbase" created="Sat, 12 Jul 2014 13:50:17 +0000"  >&lt;p&gt;Still some 2,3 places in code, directly refer HBaseZeroCopyByteString rather than ByteStringer.  I think all places we can change.&lt;/p&gt;</comment>
                            <comment id="14059792" author="anoop.hbase" created="Sat, 12 Jul 2014 13:56:04 +0000"  >&lt;p&gt;Addendum for master branch&lt;/p&gt;</comment>
                            <comment id="14059808" author="yuzhihong@gmail.com" created="Sat, 12 Jul 2014 14:45:33 +0000"  >&lt;p&gt;+1 on addendum - some were due to recent checkins&lt;/p&gt;</comment>
                            <comment id="14059818" author="anoop.hbase" created="Sat, 12 Jul 2014 15:06:01 +0000"  >&lt;p&gt;Thanks Ted.&lt;br/&gt;
master patch applies to branch-1 also.&lt;br/&gt;
Attaching patch for 0.98&lt;br/&gt;
Will commit to all versions in some time unless objections.&lt;/p&gt;</comment>
                            <comment id="14059841" author="anoop.hbase" created="Sat, 12 Jul 2014 16:37:33 +0000"  >&lt;p&gt;Addendum pushed to all branches.&lt;/p&gt;</comment>
                            <comment id="14059842" author="hudson" created="Sat, 12 Jul 2014 16:42:40 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.0 #32 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/32/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.0/32/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11118&quot; title=&quot;non environment variable solution for &amp;quot;IllegalAccessError: class com.google.protobuf.ZeroCopyLiteralByteString cannot access its superclass com.google.protobuf.LiteralByteString&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11118&quot;&gt;&lt;del&gt;HBASE-11118&lt;/del&gt;&lt;/a&gt; non environment variable solution for &quot;IllegalAccessError: class com.google.protobuf.ZeroCopyLiteralByteString cannot access its superclass com.google.protobuf.LiteralByteString&quot;. -Addendum (anoopsamjohn: rev 15ba35b59330b408c76e18d9c8bb41329a11472b)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/SnapshotManifestV1.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RSRpcServices.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/SnapshotManifestV2.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14059843" author="ndimiduk" created="Sat, 12 Jul 2014 16:42:42 +0000"  >&lt;p&gt;Thanks Anoop.&lt;/p&gt;</comment>
                            <comment id="14059847" author="hudson" created="Sat, 12 Jul 2014 17:07:25 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #5293 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/5293/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/5293/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11118&quot; title=&quot;non environment variable solution for &amp;quot;IllegalAccessError: class com.google.protobuf.ZeroCopyLiteralByteString cannot access its superclass com.google.protobuf.LiteralByteString&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11118&quot;&gt;&lt;del&gt;HBASE-11118&lt;/del&gt;&lt;/a&gt; non environment variable solution for &quot;IllegalAccessError: class com.google.protobuf.ZeroCopyLiteralByteString cannot access its superclass com.google.protobuf.LiteralByteString&quot;. -Addendum (anoopsamjohn: rev f5e13c7460dabd6909146e79f511af5bf7f5f977)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RSRpcServices.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/SnapshotManifestV2.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/SnapshotManifestV1.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14059859" author="hudson" created="Sat, 12 Jul 2014 17:29:37 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98 #390 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/390/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/390/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11118&quot; title=&quot;non environment variable solution for &amp;quot;IllegalAccessError: class com.google.protobuf.ZeroCopyLiteralByteString cannot access its superclass com.google.protobuf.LiteralByteString&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11118&quot;&gt;&lt;del&gt;HBASE-11118&lt;/del&gt;&lt;/a&gt; non environment variable solution for &quot;IllegalAccessError: class com.google.protobuf.ZeroCopyLiteralByteString cannot access its superclass com.google.protobuf.LiteralByteString&quot;. -Addendum (anoopsamjohn: rev cedd53a75eebe507da220785cb6c44e97300092c)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/TableSnapshotInputFormatImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14059907" author="hudson" created="Sat, 12 Jul 2014 20:12:43 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.98-on-Hadoop-1.1 #370 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/370/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/370/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11118&quot; title=&quot;non environment variable solution for &amp;quot;IllegalAccessError: class com.google.protobuf.ZeroCopyLiteralByteString cannot access its superclass com.google.protobuf.LiteralByteString&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11118&quot;&gt;&lt;del&gt;HBASE-11118&lt;/del&gt;&lt;/a&gt; non environment variable solution for &quot;IllegalAccessError: class com.google.protobuf.ZeroCopyLiteralByteString cannot access its superclass com.google.protobuf.LiteralByteString&quot;. -Addendum (anoopsamjohn: rev cedd53a75eebe507da220785cb6c44e97300092c)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/TableSnapshotInputFormatImpl.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14061768" author="hudson" created="Tue, 15 Jul 2014 06:47:03 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #5304 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/5304/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/5304/&lt;/a&gt;)&lt;br/&gt;
Add note on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11118&quot; title=&quot;non environment variable solution for &amp;quot;IllegalAccessError: class com.google.protobuf.ZeroCopyLiteralByteString cannot access its superclass com.google.protobuf.LiteralByteString&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11118&quot;&gt;&lt;del&gt;HBASE-11118&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10877&quot; title=&quot;HBase non-retriable exception list should be expanded&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10877&quot;&gt;&lt;del&gt;HBASE-10877&lt;/del&gt;&lt;/a&gt; HBaseZeroCopyByteString woes to troubleshooting section (stack: rev bf2933e08ab65af3643bdadbc3d59c943d40602f)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;src/main/docbkx/troubleshooting.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14184253" author="ariforu" created="Sat, 25 Oct 2014 20:21:53 +0000"  >&lt;p&gt;What is the workaround for running such application through Oozie? Setting HADOOP_CLASSPATH in Java and MapReduce actions are not possible. There seems to be no provision to do that. &lt;/p&gt;</comment>
                            <comment id="14184287" author="ndimiduk" created="Sat, 25 Oct 2014 21:43:53 +0000"  >&lt;p&gt;hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ariforu&quot; class=&quot;user-hover&quot; rel=&quot;ariforu&quot;&gt;Arijit Banerjee&lt;/a&gt;. Per the JIRA subject, after this commit, no environment variable manipulation is required. Are you seeing something different? Please send a note to the user@hbase list describing your hbase version, ooze, environment and any stack trace you&apos;re seeing in job launching. We&apos;ll help you get it resolved.&lt;/p&gt;</comment>
                            <comment id="14184296" author="ariforu" created="Sat, 25 Oct 2014 22:07:06 +0000"  >&lt;p&gt;Thanks Nick for the quick response. We are using CDH5.1.0 with HBase 0.98.1. It seems from &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11118&quot; title=&quot;non environment variable solution for &amp;quot;IllegalAccessError: class com.google.protobuf.ZeroCopyLiteralByteString cannot access its superclass com.google.protobuf.LiteralByteString&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11118&quot;&gt;&lt;del&gt;HBASE-11118&lt;/del&gt;&lt;/a&gt; that this issue is fixed as of hbase 0.98.4 . Our application works fine when submitting directly from commandline after setting the following environment variable but it fails when spawned via Oozie. We have set the env variable in all data nodes, hadoop-env.sh for all users but without luck(probably being overridden somewhere). Wondering if there is any workaround for 0.98.1 with Oozie 4.0.&lt;/p&gt;

&lt;p&gt;export HADOOP_CLASSPATH=/usr/share/cmf/lib/cdh5/hbase-protocol-0.98.1-cdh5.1.0.jar:/etc/hbase/conf &lt;/p&gt;</comment>
                            <comment id="14331210" author="enis" created="Sat, 21 Feb 2015 23:34:25 +0000"  >&lt;p&gt;Closing this issue after 0.99.0 release. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12728752">HIVE-7467</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12687997">HBASE-10304</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12653686" name="11118.098-0.txt" size="108619" author="ndimiduk" created="Wed, 2 Jul 2014 20:48:34 +0000"/>
                            <attachment id="12653477" name="11118.098.txt" size="108608" author="stack" created="Tue, 1 Jul 2014 21:58:41 +0000"/>
                            <attachment id="12651465" name="11118.bytestringer.txt" size="104688" author="stack" created="Thu, 19 Jun 2014 18:41:03 +0000"/>
                            <attachment id="12651183" name="1118.suggested.undoing.optimization.on.clientside.txt" size="66622" author="stack" created="Wed, 18 Jun 2014 16:48:15 +0000"/>
                            <attachment id="12650953" name="1118.suggested.undoing.optimization.on.clientside.txt" size="66622" author="stack" created="Wed, 18 Jun 2014 03:10:13 +0000"/>
                            <attachment id="12654374" name="HBASE-11118-0.98.00.patch" size="105882" author="ndimiduk" created="Mon, 7 Jul 2014 20:18:20 +0000"/>
                            <attachment id="12654381" name="HBASE-11118-0.98.01.patch" size="106403" author="ndimiduk" created="Mon, 7 Jul 2014 21:46:12 +0000"/>
                            <attachment id="12654443" name="HBASE-11118-0.98.02.patch" size="107470" author="ndimiduk" created="Tue, 8 Jul 2014 02:13:21 +0000"/>
                            <attachment id="12655341" name="HBASE-11118-0.98.03.patch" size="107196" author="ndimiduk" created="Fri, 11 Jul 2014 23:58:02 +0000"/>
                            <attachment id="12646451" name="HBASE-11118-0.98.patch.gz" size="635811" author="apurtell" created="Fri, 23 May 2014 05:29:05 +0000"/>
                            <attachment id="12646452" name="HBASE-11118-trunk.patch.gz" size="641224" author="apurtell" created="Fri, 23 May 2014 05:29:05 +0000"/>
                            <attachment id="12654375" name="HBASE-11118.00.patch" size="109750" author="ndimiduk" created="Mon, 7 Jul 2014 20:18:20 +0000"/>
                            <attachment id="12654382" name="HBASE-11118.01.patch" size="110271" author="ndimiduk" created="Mon, 7 Jul 2014 21:46:12 +0000"/>
                            <attachment id="12654444" name="HBASE-11118.02.patch" size="111028" author="ndimiduk" created="Tue, 8 Jul 2014 02:13:21 +0000"/>
                            <attachment id="12655404" name="HBASE-11118_0.98_addendum.patch" size="2729" author="anoop.hbase" created="Sat, 12 Jul 2014 15:06:01 +0000"/>
                            <attachment id="12655400" name="HBASE-11118_master_addendum.patch" size="5527" author="anoop.hbase" created="Sat, 12 Jul 2014 13:56:04 +0000"/>
                            <attachment id="12643970" name="shade_attempt.patch" size="2415" author="ndimiduk" created="Thu, 8 May 2014 16:54:17 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>17.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 6 May 2014 18:01:35 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>390929</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1vc0f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>391164</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>The workaround documented in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10304&quot; title=&quot;Running an hbase job jar: IllegalAccessError: class com.google.protobuf.ZeroCopyLiteralByteString cannot access its superclass com.google.protobuf.LiteralByteString&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10304&quot;&gt;&lt;strike&gt;HBASE-10304&lt;/strike&gt;&lt;/a&gt; for running a mapreduce job with a &amp;quot;fat jar&amp;quot; is no longer required. Such applications can be launched without adding hbase-protocol.jar to the HADOOP_CLASSPATH.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>