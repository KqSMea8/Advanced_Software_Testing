<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:55:14 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-14663/HBASE-14663.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-14663] HStore::close does not honor config hbase.rs.evictblocksonclose</title>
                <link>https://issues.apache.org/jira/browse/HBASE-14663</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;I noticed moving regions was slow and due to the wait for the bucket cache to clear.  I tried setting hbase.rs.evictblocksonclose and it did not help.&lt;/p&gt;

&lt;p&gt;I see the HStore::close method has evictonclose hard coded to true instead of letting the config dictate:&lt;/p&gt;

&lt;p&gt;// close each store file in parallel&lt;br/&gt;
CompletionService&amp;lt;Void&amp;gt; completionService =&lt;br/&gt;
   new ExecutorCompletionService&amp;lt;Void&amp;gt;(storeFileCloserThreadPool);&lt;br/&gt;
for (final StoreFile f : result) {&lt;br/&gt;
   completionService.submit(new Callable&amp;lt;Void&amp;gt;() {&lt;br/&gt;
     @Override&lt;br/&gt;
     public Void call() throws IOException &lt;/p&gt;
{
       f.closeReader(true);
       return null;
     }
&lt;p&gt;   });&lt;br/&gt;
}&lt;/p&gt;</description>
                <environment></environment>
        <key id="12906829">HBASE-14663</key>
            <summary>HStore::close does not honor config hbase.rs.evictblocksonclose</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vrodionov">Vladimir Rodionov</assignee>
                                    <reporter username="randy.fox">Randy Fox</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Oct 2015 18:28:28 +0000</created>
                <updated>Wed, 27 Jan 2016 15:28:56 +0000</updated>
                            <resolved>Thu, 22 Oct 2015 05:00:36 +0000</resolved>
                                    <version>1.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>1.2.0</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                    <fixVersion>1.0.3</fixVersion>
                    <fixVersion>1.1.3</fixVersion>
                    <fixVersion>0.98.16</fixVersion>
                                    <component>BlockCache</component>
                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="14968221" author="hadoopqa" created="Thu, 22 Oct 2015 00:06:06 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12767853/HBASE-14663-v1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12767853/HBASE-14663-v1.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit b3afdb8de1a9fa88c553159b2d2d2aa96902a345.&lt;br/&gt;
  ATTACHMENT ID: 12767853&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16148//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16148//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16148//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16148//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16148//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16148//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16148//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16148//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14968565" author="stack" created="Thu, 22 Oct 2015 05:00:36 +0000"  >&lt;p&gt;Pushed to branch-1.0+. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vrodionov&quot; class=&quot;user-hover&quot; rel=&quot;vrodionov&quot;&gt;Vladimir Rodionov&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randy.fox&quot; class=&quot;user-hover&quot; rel=&quot;randy.fox&quot;&gt;Randy Fox&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14968598" author="hudson" created="Thu, 22 Oct 2015 05:45:27 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.0 #1094 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/1094/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.0/1094/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14663&quot; title=&quot;HStore::close does not honor config hbase.rs.evictblocksonclose&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14663&quot;&gt;&lt;del&gt;HBASE-14663&lt;/del&gt;&lt;/a&gt; HStore::close does not honor config (stack: rev 252b641e2f0f51b4fa0a2329870a984fe7ce45ac)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14968675" author="hudson" created="Thu, 22 Oct 2015 07:15:23 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.1 #717 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.1/717/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.1/717/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14663&quot; title=&quot;HStore::close does not honor config hbase.rs.evictblocksonclose&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14663&quot;&gt;&lt;del&gt;HBASE-14663&lt;/del&gt;&lt;/a&gt; HStore::close does not honor config (stack: rev acadfb55278a8e474979ac78b543b4da222e03fc)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14968694" author="hudson" created="Thu, 22 Oct 2015 07:25:02 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.3 #289 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3/289/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3/289/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14663&quot; title=&quot;HStore::close does not honor config hbase.rs.evictblocksonclose&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14663&quot;&gt;&lt;del&gt;HBASE-14663&lt;/del&gt;&lt;/a&gt; HStore::close does not honor config (stack: rev aed33c9cca15e7c70847521385080b8f6c71d16a)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14968809" author="hudson" created="Thu, 22 Oct 2015 08:44:44 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #6937 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/6937/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/6937/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14663&quot; title=&quot;HStore::close does not honor config hbase.rs.evictblocksonclose&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14663&quot;&gt;&lt;del&gt;HBASE-14663&lt;/del&gt;&lt;/a&gt; HStore::close does not honor config (stack: rev ab677a19fc5d909890b4f74ddc3087e4699d81a1)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14968811" author="hudson" created="Thu, 22 Oct 2015 08:47:39 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.2-IT #232 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2-IT/232/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2-IT/232/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14663&quot; title=&quot;HStore::close does not honor config hbase.rs.evictblocksonclose&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14663&quot;&gt;&lt;del&gt;HBASE-14663&lt;/del&gt;&lt;/a&gt; HStore::close does not honor config (stack: rev 1faee4ca7b0aca16f414352fe96890d672ca0505)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14968823" author="hudson" created="Thu, 22 Oct 2015 08:56:56 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.3-IT #259 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3-IT/259/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3-IT/259/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14663&quot; title=&quot;HStore::close does not honor config hbase.rs.evictblocksonclose&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14663&quot;&gt;&lt;del&gt;HBASE-14663&lt;/del&gt;&lt;/a&gt; HStore::close does not honor config (stack: rev aed33c9cca15e7c70847521385080b8f6c71d16a)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14968871" author="hudson" created="Thu, 22 Oct 2015 09:40:23 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.2 #288 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2/288/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2/288/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14663&quot; title=&quot;HStore::close does not honor config hbase.rs.evictblocksonclose&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14663&quot;&gt;&lt;del&gt;HBASE-14663&lt;/del&gt;&lt;/a&gt; HStore::close does not honor config (stack: rev 1faee4ca7b0aca16f414352fe96890d672ca0505)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14969425" author="randy.fox" created="Thu, 22 Oct 2015 16:47:03 +0000"  >&lt;p&gt;tested in my production cluster and it seems to work fine&lt;/p&gt;</comment>
                            <comment id="14971612" author="apurtell" created="Fri, 23 Oct 2015 18:51:41 +0000"  >&lt;p&gt;Picked back to 0.98&lt;/p&gt;</comment>
                            <comment id="14971960" author="hudson" created="Fri, 23 Oct 2015 22:04:21 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98-on-Hadoop-1.1 #1118 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/1118/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/1118/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14663&quot; title=&quot;HStore::close does not honor config hbase.rs.evictblocksonclose&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14663&quot;&gt;&lt;del&gt;HBASE-14663&lt;/del&gt;&lt;/a&gt; HStore::close does not honor config (apurtell: rev ba02635a47fda86ae88cbc32c2ec5e3a0defe1fc)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14972050" author="hudson" created="Fri, 23 Oct 2015 23:01:46 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98 #1165 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/1165/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/1165/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14663&quot; title=&quot;HStore::close does not honor config hbase.rs.evictblocksonclose&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14663&quot;&gt;&lt;del&gt;HBASE-14663&lt;/del&gt;&lt;/a&gt; HStore::close does not honor config (apurtell: rev ba02635a47fda86ae88cbc32c2ec5e3a0defe1fc)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15119576" author="ndimiduk" created="Wed, 27 Jan 2016 15:28:56 +0000"  >&lt;p&gt;Bulk closing 1.1.3 issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12767853" name="HBASE-14663-v1.patch" size="801" author="vrodionov" created="Wed, 21 Oct 2015 19:50:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 22 Oct 2015 00:06:06 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            46 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2nc5r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>