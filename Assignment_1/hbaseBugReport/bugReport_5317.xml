<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:26:40 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5317/HBASE-5317.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5317] Fix TestHFileOutputFormat to work against hadoop 0.23</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5317</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Running&lt;br/&gt;
mvn -Dhadoop.profile=23 test -P localTests -Dtest=org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat&lt;/p&gt;

&lt;p&gt;yields this on 0.92:&lt;br/&gt;
Failed tests:   testColumnFamilyCompression(org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat): HFile for column family info-A not found&lt;/p&gt;

&lt;p&gt;Tests in error: &lt;br/&gt;
  test_TIMERANGE(org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat): /home/gchanan/workspace/apache92/target/test-data/276cbd0c-c771-4f81-9ba8-c464c9dd7486/test_TIMERANGE_present/_temporary/0/_temporary/_attempt_200707121733_0001_m_000000_0 (Is a directory)&lt;br/&gt;
  testMRIncrementalLoad(org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat): TestTable&lt;br/&gt;
  testMRIncrementalLoadWithSplit(org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat): TestTable&lt;/p&gt;

&lt;p&gt;It looks like on trunk, this also results in an error:&lt;br/&gt;
  testExcludeMinorCompaction(org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat): TestTable&lt;/p&gt;

&lt;p&gt;I have a patch that fixes testColumnFamilyCompression and test_TIMERANGE, but haven&apos;t fixed the other 3 yet.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12540848">HBASE-5317</key>
            <summary>Fix TestHFileOutputFormat to work against hadoop 0.23</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gchanan">Gregory Chanan</assignee>
                                    <reporter username="gchanan">Gregory Chanan</reporter>
                        <labels>
                    </labels>
                <created>Thu, 2 Feb 2012 00:11:01 +0000</created>
                <updated>Fri, 12 Oct 2012 05:35:10 +0000</updated>
                            <resolved>Thu, 1 Mar 2012 23:18:58 +0000</resolved>
                                    <version>0.92.0</version>
                    <version>0.94.0</version>
                                    <fixVersion>0.92.1</fixVersion>
                    <fixVersion>0.94.0</fixVersion>
                                    <component>test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                            <comments>
                            <comment id="13200299" author="gchanan" created="Sat, 4 Feb 2012 03:00:20 +0000"  >&lt;p&gt;Patch v0 fixes test_TIMERANGE and testColumnFamilyCompression&lt;/p&gt;

&lt;p&gt;Other tests are a little more involved.&lt;/p&gt;</comment>
                            <comment id="13200303" author="gchanan" created="Sat, 4 Feb 2012 03:02:14 +0000"  >&lt;p&gt;testMRIncrementalLoad (and probably the other 2) fail with TestTable; this is pretty easy to get past.&lt;/p&gt;

&lt;p&gt;But after that MR Job fails with:&lt;br/&gt;
2012-02-03 17:02:37,982 FATAL &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; org.apache.hadoop.mapreduce.v2.app.MRAppMaster: Error starting MRAppMaster&lt;br/&gt;
org.apache.hadoop.yarn.YarnException: java.lang.RuntimeException: java.lang.ClassNotFoundException: org.apache.hadoop.hbase.mapreduce.HFileOutputFormat&lt;br/&gt;
	at org.apache.hadoop.mapreduce.v2.app.MRAppMaster.createOutputCommitter(MRAppMaster.java:320)&lt;br/&gt;
	at org.apache.hadoop.mapreduce.v2.app.MRAppMaster.init(MRAppMaster.java:213)&lt;/p&gt;</comment>
                            <comment id="13200348" author="zhihyu@ebaysf.com" created="Sat, 4 Feb 2012 06:43:01 +0000"  >&lt;p&gt;Running TestHFileOutputFormat on MacBook, I don&apos;t see the &apos;Error starting MRAppMaster&apos; message above.&lt;br/&gt;
Three tests failed (after applying patch):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  testMRIncrementalLoad(org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat): TestTable
  testMRIncrementalLoadWithSplit(org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat): TestTable
  testExcludeMinorCompaction(org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat): TestTable
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13200575" author="jxiang" created="Sat, 4 Feb 2012 22:23:22 +0000"  >&lt;p&gt;@Ted, did you run it with Hadoop 0.23?&lt;/p&gt;</comment>
                            <comment id="13200580" author="zhihyu@ebaysf.com" created="Sat, 4 Feb 2012 22:45:45 +0000"  >&lt;p&gt;Here was the command I used:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
mvn clean -Dhadoop.profile=23 test -P localTests -Dtest=org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13200632" author="gchanan" created="Sun, 5 Feb 2012 01:58:13 +0000"  >&lt;p&gt;@Ted:&lt;br/&gt;
your output is correct.  There is another patch required to get past the TestTable error and to the &quot;Error starting MRAppMaster.&quot;  I didn&apos;t include it because it doesn&apos;t solve the issue, only lets you further along.  I wanted to leave the patch in a &quot;fresh&quot; state that actually solves the issue addressed by the JIRA.&lt;/p&gt;

&lt;p&gt;Perhaps the best thing to do is narrow the scope of this JIRA (to just get test_TIMERANGE and testColumnFamilyCompression to pass) and then open a new JIRA to solve the remaining issues.  Do you think that makes the most sense?&lt;/p&gt;</comment>
                            <comment id="13200644" author="hadoopqa" created="Sun, 5 Feb 2012 03:12:34 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12513229/HBASE-5317-v0.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12513229/HBASE-5317-v0.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -136 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 156 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.mapreduce.TestImportTsv&lt;br/&gt;
                  org.apache.hadoop.hbase.mapred.TestTableMapReduce&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/904//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/904//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/904//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/904//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/904//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/904//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13200650" author="zhihyu@ebaysf.com" created="Sun, 5 Feb 2012 03:48:05 +0000"  >&lt;p&gt;The subject of this JIRA is for all of TestHFileOutputFormat to pass for 0.23&lt;br/&gt;
I think we should try to achieve that goal.&lt;/p&gt;</comment>
                            <comment id="13200651" author="zhihyu@ebaysf.com" created="Sun, 5 Feb 2012 04:41:43 +0000"  >&lt;p&gt;I found the following in test output (when using hadoop 0.23):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2012-02-04 20:18:30,563 WARN  [main] conf.Configuration(326): mapred.job.tracker is deprecated. Instead, use mapreduce.jobtracker.address2012-02-04 20:18:30,578 WARN  [main] conf.Configuration(343): mapred.working.dir is deprecated. Instead, use mapreduce.job.working.dir
2012-02-04 20:18:30,579 INFO  [main] mapreduce.HFileOutputFormat(320): Writing partition information to /Users/zhihyu/trunk-hbase/target/test-data/67a9efc5-8b7c-4afd-b516-39dd454334b8/mapred-working-dir/partitions_864c11de-4d4f-45a3-ba94-26aac1c751e6
2012-02-04 20:18:30,604 WARN  [IPC Server handler 4 on 63830] master.HMaster(1725): Failed getting all descriptors
org.apache.hadoop.hbase.TableExistsException: No descriptor &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; target, hdfs:&lt;span class=&quot;code-comment&quot;&gt;//localhost:63821/user/zhihyu
&lt;/span&gt;  at org.apache.hadoop.hbase.util.FSTableDescriptors.get(FSTableDescriptors.java:164)
  at org.apache.hadoop.hbase.util.FSTableDescriptors.getAll(FSTableDescriptors.java:182)
  at org.apache.hadoop.hbase.master.HMaster.getHTableDescriptors(HMaster.java:1723)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;When using hadoop 1.0, there is no such error.&lt;/p&gt;</comment>
                            <comment id="13200661" author="gchanan" created="Sun, 5 Feb 2012 05:53:19 +0000"  >&lt;p&gt;@Ted:&lt;br/&gt;
Yes, that is the problem that causes the &quot;TestTable&quot; error.  I&apos;ll post a patch for that tomorrow.&lt;/p&gt;</comment>
                            <comment id="13201057" author="gchanan" created="Mon, 6 Feb 2012 06:01:49 +0000"  >&lt;p&gt;This patch gets past the &quot;TestTable&quot; errors.  Now, the problem is the job never completes (you get an assertion of job.waitForCompletion).  From digging through the mapreduce logs, I found the ClassNotFoundException listed above.&lt;/p&gt;</comment>
                            <comment id="13201085" author="hadoopqa" created="Mon, 6 Feb 2012 06:52:36 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12513394/HBASE-5317-v1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12513394/HBASE-5317-v1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -136 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 156 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.replication.TestReplicationPeer&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestImportTsv&lt;br/&gt;
                  org.apache.hadoop.hbase.mapred.TestTableMapReduce&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/906//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/906//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/906//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/906//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/906//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/906//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13201431" author="zhihyu@ebaysf.com" created="Mon, 6 Feb 2012 17:59:02 +0000"  >&lt;p&gt;I don&apos;t see ClassNotFoundException in test output but the following may provide a clue:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2012-02-06 09:44:48,377 WARN  [main] mapreduce.JobSubmitter(139): Use GenericOptionsParser &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; parsing the arguments. Applications should implement Tool &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the same.
2012-02-06 09:44:48,380 WARN  [main] mapreduce.JobSubmitter(241): No job jar file set.  User classes may not be found. See Job or Job#setJar(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;).
2012-02-06 09:44:51,163 WARN  [ContainersLauncher #0] nodemanager.DefaultContainerExecutor(192): Exit code from task is : 127
2012-02-06 09:44:51,165 WARN  [ContainersLauncher #0] launcher.ContainerLaunch(273): Container exited with a non-zero exit code 127
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13201444" author="zhihyu@ebaysf.com" created="Mon, 6 Feb 2012 18:24:44 +0000"  >&lt;p&gt;For &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5317&quot; title=&quot;Fix TestHFileOutputFormat to work against hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5317&quot;&gt;&lt;del&gt;HBASE-5317&lt;/del&gt;&lt;/a&gt;-v1.patch, I think we shouldn&apos;t simply catch TableExistsException.&lt;br/&gt;
We should add missing Configuration parameters in MRv2 so that there is no TableExistsException during test.&lt;/p&gt;</comment>
                            <comment id="13201460" author="zhihyu@ebaysf.com" created="Mon, 6 Feb 2012 18:45:57 +0000"  >&lt;p&gt;Configuration.handleDeprecation() is private.&lt;br/&gt;
We may need to borrow deprecatedKeyMap and come up with good strategy of providing up-to-date config parameters to MRv2 (when hadoop.profile property carries value of 23).&lt;/p&gt;</comment>
                            <comment id="13201473" author="gchanan" created="Mon, 6 Feb 2012 19:06:14 +0000"  >&lt;p&gt;@Ted:&lt;br/&gt;
I agree we shouldn&apos;t just catch the TableExistsException &amp;#8211; that&apos;s why I didn&apos;t initially post that part of the patch.  My recollection of that issue was that the MiniMRCluster is creating a &quot;target&quot; directory in hbase.rootdir &lt;span class=&quot;error&quot;&gt;&amp;#91;I could be wrong about the exact location&amp;#93;&lt;/span&gt;.  When we call &quot;table.getTableDescriptor()&quot; it can&apos;t get a table descriptor for &quot;target&quot;, so throws a TableExistsException.  Can the handleDeprecation call prevent the target directory from being created?  Or are you thinking of something else?&lt;/p&gt;

&lt;p&gt;It also seems a little strange to me that calling &quot;table.getTableDescriptor();&quot; tries to get table descriptors for &lt;b&gt;everything&lt;/b&gt; in hbase.rootdir.  Why should I get an exception thrown if hbase can&apos;t find a TableDescriptor for &quot;target&quot; when I am only asking about &quot;table&quot;?&lt;/p&gt;</comment>
                            <comment id="13201488" author="zhihyu@ebaysf.com" created="Mon, 6 Feb 2012 19:19:31 +0000"  >&lt;p&gt;handleDeprecation() call may not prevent the target directory from being created.&lt;br/&gt;
We should try to find out why &apos;target&apos; directory was only created for hadoop 0.23.&lt;/p&gt;</comment>
                            <comment id="13201491" author="zhihyu@ebaysf.com" created="Mon, 6 Feb 2012 19:21:12 +0000"  >&lt;p&gt;Not every directory under hbase.rootdir is deemed corresponding to a table.&lt;br/&gt;
See the following javadoc in FSUtils.getTableDirs():&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
   * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; All the table directories under &amp;lt;code&amp;gt;rootdir&amp;lt;/code&amp;gt;. Ignore non table hbase folders such as
   * .logs, .oldlogs, .corrupt, .META., and -ROOT- folders.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13201841" author="gchanan" created="Tue, 7 Feb 2012 00:04:15 +0000"  >&lt;p&gt;@Ted:&lt;br/&gt;
FSUtils.getTableDirs() excludes a specific list of directories.  Specifically:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
     Arrays.asList(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[]{ HREGION_LOGDIR_NAME, HREGION_OLDLOGDIR_NAME,
          CORRUPT_DIR_NAME, Bytes.toString(META_TABLE_NAME),
          Bytes.toString(ROOT_TABLE_NAME), SPLIT_LOGDIR_NAME }));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So if the MiniMRCluster creates a &quot;target&quot; directory, it will be returned.&lt;/p&gt;</comment>
                            <comment id="13201848" author="zhihyu@ebaysf.com" created="Tue, 7 Feb 2012 00:06:58 +0000"  >&lt;p&gt;Right.&lt;br/&gt;
Can we find out why this &quot;target&quot; directory was created ?&lt;/p&gt;</comment>
                            <comment id="13202813" author="gchanan" created="Tue, 7 Feb 2012 21:29:06 +0000"  >&lt;p&gt;The new MiniMRCluster in 0.23 copies some new MrApp jars into the working directory of the filesystem (which is the home directory of that file system):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    FileSystem fs = FileSystem.get(conf);
    Path testRootDir = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Path(&lt;span class=&quot;code-quote&quot;&gt;&quot;target&quot;&lt;/span&gt;, caller.getName() + &lt;span class=&quot;code-quote&quot;&gt;&quot;-tmpDir&quot;&lt;/span&gt;)
        .makeQualified(fs);
    Path appJar = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Path(testRootDir, &lt;span class=&quot;code-quote&quot;&gt;&quot;MRAppJar.jar&quot;&lt;/span&gt;);

    &lt;span class=&quot;code-comment&quot;&gt;// Copy MRAppJar and make it &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt;.
&lt;/span&gt;    Path appMasterJar = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Path(MiniMRYarnCluster.APPJAR);
    fs.copyFromLocalFile(appMasterJar, appJar);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This also happens to be the HBASE_DIR:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
     Path hbaseRootdir = fs.makeQualified(fs.getHomeDirectory());
     &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.conf.set(HConstants.HBASE_DIR, hbaseRootdir.toString());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I created a subdirectory under fs.getHomeDirectory called &quot;hbase&quot; and made this the HBASE_DIR.  This gets past the &quot;TestTable&quot; issue and back to the ClassNotFoundException.&lt;/p&gt;

&lt;p&gt;Since these issues appear to be issues with the test utilities, rather than the test themselves, I am going to create a subtask for fixing the test themselves (which will just be the v0 patch).&lt;/p&gt;</comment>
                            <comment id="13205982" author="gchanan" created="Sat, 11 Feb 2012 02:19:55 +0000"  >&lt;p&gt;Ok, did some more digging.&lt;/p&gt;

&lt;p&gt;In 0.23 the MRAppMaster tries to load up the OutputFileFormat, so we have to load that, which we didn&apos;t have to do prior to 0.23.&lt;br/&gt;
It looks like:  TableMapReduceUtil.addDependencyJars(job)&lt;br/&gt;
is supposed to do this, but when I run it, no jars can be found for the classes associated with the job.&lt;/p&gt;

&lt;p&gt;By default, it looks like the classpath in the test is:&lt;/p&gt;
{basedir}/target/test-classes:{basedir}
&lt;p&gt;/target/classes:...&lt;br/&gt;
but the relevant jars are in:&lt;br/&gt;
target/&lt;br/&gt;
target/hbase-&lt;/p&gt;
{VERSION}/hbase-{VERSION}
&lt;p&gt;/&lt;/p&gt;

&lt;p&gt;By the way, when I add hbase jars manually to &quot;tmpjars&quot; &lt;span class=&quot;error&quot;&gt;&amp;#91;which is what addDependencyJars does&amp;#93;&lt;/span&gt;, the test passes.&lt;/p&gt;

&lt;p&gt;So it seems like the solution is either:&lt;br/&gt;
1) Modify the classpath to include those jars &lt;br/&gt;
2) Build a jar myself of the relevant classes&lt;/p&gt;

&lt;p&gt;I&apos;m not sure what the correct answer is; please advise.&lt;/p&gt;</comment>
                            <comment id="13205983" author="zhihyu@ebaysf.com" created="Sat, 11 Feb 2012 02:26:35 +0000"  >&lt;p&gt;@Gregory:&lt;br/&gt;
I think we should try approach #1 first.&lt;/p&gt;

&lt;p&gt;Thanks for your persistence.&lt;/p&gt;</comment>
                            <comment id="13206877" author="evertot" created="Mon, 13 Feb 2012 13:47:04 +0000"  >&lt;p&gt;@Gregory:&lt;br/&gt;
I&apos;m also encountering the &quot;No descriptor for target&quot; issue when using HBaseTestingUtility. And after reading this issue and &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4025&quot; title=&quot;Server startup fails during startup due to failure in loading all table descriptors. We should ignore .logs,.oldlogs,.corrupt,.META.,-ROOT- folders while reading descriptors &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4025&quot;&gt;&lt;del&gt;HBASE-4025&lt;/del&gt;&lt;/a&gt;, it seems to me having HBaseTestingUtility create a subdirectory &quot;hbase&quot; is the right thing to do here. Are you effectively planning to do so?&lt;/p&gt;</comment>
                            <comment id="13207090" author="gchanan" created="Mon, 13 Feb 2012 19:12:03 +0000"  >&lt;p&gt;@Evert:&lt;br/&gt;
Yes, that is the idea.  I&apos;m hoping to have a patch that does that and solves the jar issue above by the end of today.&lt;/p&gt;</comment>
                            <comment id="13207272" author="gchanan" created="Mon, 13 Feb 2012 22:19:55 +0000"  >&lt;p&gt;@Ted:&lt;/p&gt;

&lt;p&gt;I tried approach #1, but it seems like it is not kosher to have the test depend on the maven packaging step.  For example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
mvn -Dhadoop.profile=23 -DskipTests &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;
mvn -Dhadoop.profile=23 test ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;works, but&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
mvn -Dhadoop.profile=23 clean test ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;fails because the jars aren&apos;t even built without the package step.&lt;/p&gt;

&lt;p&gt;#2 will probably work in both cases.  It don&apos;t think it&apos;s great either, because ideally the tests should exercise the jars, because that is what downstream users would be running against.  I think testing against the jars requires making hbase a multi-module project and is therefore probably:&lt;br/&gt;
0) outside the scope of this JIRA&lt;br/&gt;
1) a lot of work&lt;br/&gt;
2) should be discussed in the community&lt;/p&gt;

&lt;p&gt;Therefore, I propose getting attempt #2 to work and filing a JIRA to figure out a better packaging story so we can later get rid of #2.&lt;/p&gt;</comment>
                            <comment id="13207280" author="zhihyu@ebaysf.com" created="Mon, 13 Feb 2012 22:26:41 +0000"  >&lt;p&gt;I agree with the proposal.&lt;/p&gt;

&lt;p&gt;Another option is to put the tests which depend on hbase jar(s) into a dedicated category. That category would run after hbase jar(s) are built.&lt;/p&gt;

&lt;p&gt;Thanks for digging.&lt;/p&gt;</comment>
                            <comment id="13209784" author="jiraposter@reviews.apache.org" created="Thu, 16 Feb 2012 21:58:58 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/3939/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3939/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hbase, Ted Yu and Michael Stack.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;NOTE: To get TestHFileOutputFormat passing also requires &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5346&quot; title=&quot; Fix testColumnFamilyCompression and test_TIMERANGE in TestHFileOutputFormat&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5346&quot;&gt;&lt;del&gt;HBASE-5346&lt;/del&gt;&lt;/a&gt;, which has been reviewed but not committed yet.&lt;/p&gt;

&lt;p&gt;Fixes a few issues interacting with the new mapreduce in 0.23:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Maven dependency issue&lt;/li&gt;
	&lt;li&gt;Change the hbaseRootDir so that mrv2 output is not confused with an hbase table&lt;/li&gt;
	&lt;li&gt;Create Jars necessary to run mrv2 jobs at unit test time (before hbase jars have been built)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5317&quot; title=&quot;Fix TestHFileOutputFormat to work against hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5317&quot;&gt;&lt;del&gt;HBASE-5317&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5317&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-5317&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  pom.xml f24b389 &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/HFileOutputFormat.java c5222c2 &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java ff38731 &lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java ec9d581 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/3939/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3939/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Gregory&lt;/p&gt;
</comment>
                            <comment id="13209929" author="jiraposter@reviews.apache.org" created="Fri, 17 Feb 2012 00:35:59 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/3939/#review5179&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3939/#review5179&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;Good progress.&lt;br/&gt;
Please submit to Hadoop QA for test run.&lt;/p&gt;


&lt;p&gt;src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/3939/#comment11338&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3939/#comment11338&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Please put a comma or period after avilable which is misspelled.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Ted&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2012-02-16 21:57:38, Gregory Chanan wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/3939/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3939/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2012-02-16 21:57:38)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hbase, Ted Yu and Michael Stack.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;NOTE: To get TestHFileOutputFormat passing also requires &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5346&quot; title=&quot; Fix testColumnFamilyCompression and test_TIMERANGE in TestHFileOutputFormat&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5346&quot;&gt;&lt;del&gt;HBASE-5346&lt;/del&gt;&lt;/a&gt;, which has been reviewed but not committed yet.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Fixes a few issues interacting with the new mapreduce in 0.23:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;- Maven dependency issue&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;- Change the hbaseRootDir so that mrv2 output is not confused with an hbase table&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;- Create Jars necessary to run mrv2 jobs at unit test time (before hbase jars have been built) &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5317&quot; title=&quot;Fix TestHFileOutputFormat to work against hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5317&quot;&gt;&lt;del&gt;HBASE-5317&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5317&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-5317&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;pom.xml f24b389 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;src/main/java/org/apache/hadoop/hbase/mapreduce/HFileOutputFormat.java c5222c2 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java ff38731 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java ec9d581 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/3939/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3939/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Gregory&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13209938" author="jiraposter@reviews.apache.org" created="Fri, 17 Feb 2012 00:49:58 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/3939/#review5180&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3939/#review5180&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;Minor nits.  +1 otherwise.&lt;/p&gt;


&lt;p&gt;pom.xml&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/3939/#comment11342&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3939/#comment11342&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Whats DS? (Sorry if I&apos;m being extra thick here)&lt;/p&gt;



&lt;p&gt;src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/3939/#comment11343&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3939/#comment11343&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    rad!&lt;/p&gt;



&lt;p&gt;src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/3939/#comment11345&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3939/#comment11345&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Excellent&lt;/p&gt;



&lt;p&gt;src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/3939/#comment11346&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3939/#comment11346&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Is this because we&apos;re running against target/classes dir?&lt;/p&gt;



&lt;p&gt;src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/3939/#comment11347&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3939/#comment11347&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Something is wrong w/ the indent here.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Michael&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2012-02-16 21:57:38, Gregory Chanan wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/3939/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3939/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2012-02-16 21:57:38)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hbase, Ted Yu and Michael Stack.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;NOTE: To get TestHFileOutputFormat passing also requires &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5346&quot; title=&quot; Fix testColumnFamilyCompression and test_TIMERANGE in TestHFileOutputFormat&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5346&quot;&gt;&lt;del&gt;HBASE-5346&lt;/del&gt;&lt;/a&gt;, which has been reviewed but not committed yet.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Fixes a few issues interacting with the new mapreduce in 0.23:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;- Maven dependency issue&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;- Change the hbaseRootDir so that mrv2 output is not confused with an hbase table&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;- Create Jars necessary to run mrv2 jobs at unit test time (before hbase jars have been built) &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5317&quot; title=&quot;Fix TestHFileOutputFormat to work against hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5317&quot;&gt;&lt;del&gt;HBASE-5317&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5317&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-5317&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;pom.xml f24b389 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;src/main/java/org/apache/hadoop/hbase/mapreduce/HFileOutputFormat.java c5222c2 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java ff38731 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java ec9d581 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/3939/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3939/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Gregory&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13210639" author="hudson" created="Fri, 17 Feb 2012 22:53:37 +0000"  >&lt;p&gt;Integrated in HBase-0.92 #287 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92/287/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92/287/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5317&quot; title=&quot;Fix TestHFileOutputFormat to work against hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5317&quot;&gt;&lt;del&gt;HBASE-5317&lt;/del&gt;&lt;/a&gt; Fix testColumnFamilyCompression and test_TIMERANGE in TestHFileOutputFormat (Revision 1245724)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/mapreduce/TestHFileOutputFormat.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13210678" author="jiraposter@reviews.apache.org" created="Fri, 17 Feb 2012 23:51:57 +0000"  >

&lt;blockquote&gt;&lt;p&gt;On 2012-02-17 00:49:13, Michael Stack wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; Minor nits.  +1 otherwise.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Thanks for the reviews, Ted and Stack.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2012-02-17 00:49:13, Michael Stack wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; pom.xml, line 2001&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/3939/diff/1/?file=75517#file75517line2001&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3939/diff/1/?file=75517#file75517line2001&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Whats DS? (Sorry if I&apos;m being extra thick here)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Distributed Shell (hadoop-yarn-applications-distributedshell)&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2012-02-17 00:49:13, Michael Stack wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java, line 515&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/3939/diff/1/?file=75519#file75519line515&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3939/diff/1/?file=75519#file75519line515&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Is this because we&apos;re running against target/classes dir?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Right.  HBase is a single module project and the maven test phase is before the maven package phase (when the jars are built).&lt;/p&gt;

&lt;p&gt;This is discussed briefly on the JIRA, but I think the correct long-term solution is to make HBase a multi-module project (see &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4336&quot; title=&quot;Convert source tree into maven modules&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4336&quot;&gt;&lt;del&gt;HBASE-4336&lt;/del&gt;&lt;/a&gt;) and make a test module that depends on the core module.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Gregory&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/3939/#review5180&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3939/#review5180&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;On 2012-02-16 21:57:38, Gregory Chanan wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/3939/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3939/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2012-02-16 21:57:38)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hbase, Ted Yu and Michael Stack.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;NOTE: To get TestHFileOutputFormat passing also requires &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5346&quot; title=&quot; Fix testColumnFamilyCompression and test_TIMERANGE in TestHFileOutputFormat&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5346&quot;&gt;&lt;del&gt;HBASE-5346&lt;/del&gt;&lt;/a&gt;, which has been reviewed but not committed yet.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Fixes a few issues interacting with the new mapreduce in 0.23:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;- Maven dependency issue&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;- Change the hbaseRootDir so that mrv2 output is not confused with an hbase table&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;- Create Jars necessary to run mrv2 jobs at unit test time (before hbase jars have been built) &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5317&quot; title=&quot;Fix TestHFileOutputFormat to work against hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5317&quot;&gt;&lt;del&gt;HBASE-5317&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5317&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-5317&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;pom.xml f24b389 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;src/main/java/org/apache/hadoop/hbase/mapreduce/HFileOutputFormat.java c5222c2 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java ff38731 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java ec9d581 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/3939/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3939/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Gregory&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13210741" author="hadoopqa" created="Sat, 18 Feb 2012 01:46:58 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12515057/HBASE-5317-v3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12515057/HBASE-5317-v3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 7 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -136 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 158 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/985//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/985//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/985//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/985//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/985//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/985//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13211118" author="stack" created="Sat, 18 Feb 2012 21:52:46 +0000"  >&lt;p&gt;Gregory it failed with this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[INFO] --- maven-compiler-plugin:2.0.2:testCompile (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-testCompile) @ hbase ---
[INFO] Compiling 331 source files to /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/trunk/target/test-classes
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 23.287s
[INFO] Finished at: Sat Feb 18 01:46:56 UTC 2012
[INFO] Final Memory: 41M/424M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.0.2:testCompile (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-testCompile) on project hbase: Compilation failure
[ERROR] /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/trunk/src/test/java/org/apache/hadoop/hbase/client/TestMetaMigrationRemovingHTD.java:[79,33] cannot find symbol
[ERROR] symbol  : method getDefaultRootDirPath()
[ERROR] location: class org.apache.hadoop.hbase.HBaseTestingUtility
[ERROR] -&amp;gt; [Help 1]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;What you reckon thats about?  Is it the 0.23 profile? leaking?&lt;/p&gt;</comment>
                            <comment id="13212154" author="hudson" created="Mon, 20 Feb 2012 22:19:08 +0000"  >&lt;p&gt;Integrated in HBase-0.92-security #91 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92-security/91/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92-security/91/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5317&quot; title=&quot;Fix TestHFileOutputFormat to work against hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5317&quot;&gt;&lt;del&gt;HBASE-5317&lt;/del&gt;&lt;/a&gt; Fix testColumnFamilyCompression and test_TIMERANGE in TestHFileOutputFormat (Revision 1245724)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/mapreduce/TestHFileOutputFormat.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13212376" author="gchanan" created="Tue, 21 Feb 2012 05:30:59 +0000"  >&lt;p&gt;@stack:&lt;br/&gt;
I&apos;m new to git and didn&apos;t add one of the files I modified &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;</comment>
                            <comment id="13212386" author="hadoopqa" created="Tue, 21 Feb 2012 05:42:47 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12515322/HBASE-5317-v4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12515322/HBASE-5317-v4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 7 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -136 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 159 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/995//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/995//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/995//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/995//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/995//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/995//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13212390" author="gchanan" created="Tue, 21 Feb 2012 05:54:35 +0000"  >&lt;p&gt;One more try at this...&lt;/p&gt;</comment>
                            <comment id="13212413" author="hadoopqa" created="Tue, 21 Feb 2012 06:50:05 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12515326/HBASE-5317-v5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12515326/HBASE-5317-v5.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 7 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -136 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 159 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.mapreduce.TestImportTsv&lt;br/&gt;
                  org.apache.hadoop.hbase.mapred.TestTableMapReduce&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/996//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/996//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/996//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/996//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/996//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/996//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13213130" author="jiraposter@reviews.apache.org" created="Wed, 22 Feb 2012 00:02:48 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/3939/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3939/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2012-02-22 00:01:33.392779)&lt;/p&gt;


&lt;p&gt;Review request for hbase, Ted Yu and Michael Stack.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Small changes as suggested by Ted and stack.&lt;/p&gt;

&lt;p&gt;Also updates a test case that was assuming the root dir was the homedir.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;NOTE: To get TestHFileOutputFormat passing also requires &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5346&quot; title=&quot; Fix testColumnFamilyCompression and test_TIMERANGE in TestHFileOutputFormat&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5346&quot;&gt;&lt;del&gt;HBASE-5346&lt;/del&gt;&lt;/a&gt;, which has been reviewed but not committed yet.&lt;/p&gt;

&lt;p&gt;Fixes a few issues interacting with the new mapreduce in 0.23:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Maven dependency issue&lt;/li&gt;
	&lt;li&gt;Change the hbaseRootDir so that mrv2 output is not confused with an hbase table&lt;/li&gt;
	&lt;li&gt;Create Jars necessary to run mrv2 jobs at unit test time (before hbase jars have been built)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5317&quot; title=&quot;Fix TestHFileOutputFormat to work against hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5317&quot;&gt;&lt;del&gt;HBASE-5317&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5317&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-5317&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  pom.xml 066c027 &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/HFileOutputFormat.java c5222c2 &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java ff38731 &lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java ec9d581 &lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/client/TestMetaMigrationRemovingHTD.java 7c5e108 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/3939/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3939/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Gregory&lt;/p&gt;
</comment>
                            <comment id="13213132" author="gchanan" created="Wed, 22 Feb 2012 00:04:06 +0000"  >&lt;p&gt;This is just to match up the version on Review Board.  Only minor spacing differences.&lt;/p&gt;</comment>
                            <comment id="13213147" author="zhihyu@ebaysf.com" created="Wed, 22 Feb 2012 00:35:42 +0000"  >&lt;p&gt;Based on latest patch, I got:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Failed tests:   testMRIncrementalLoad(org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat)
  testMRIncrementalLoadWithSplit(org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat)
  testExcludeMinorCompaction(org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Here is one of the test failures:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
testExcludeMinorCompaction(org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat)  Time elapsed: 29.375 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
java.lang.AssertionError
  at org.junit.Assert.fail(Assert.java:92)
  at org.junit.Assert.assertTrue(Assert.java:43)
  at org.junit.Assert.assertTrue(Assert.java:54)
  at org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat.runIncrementalPELoad(TestHFileOutputFormat.java:478)
  at org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat.testExcludeMinorCompaction(TestHFileOutputFormat.java:723)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13213155" author="hadoopqa" created="Wed, 22 Feb 2012 00:54:12 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12515510/HBASE-5317-v6.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12515510/HBASE-5317-v6.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 7 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -136 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 159 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.mapreduce.TestImportTsv&lt;br/&gt;
                  org.apache.hadoop.hbase.mapred.TestTableMapReduce&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1000//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1000//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1000//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1000//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1000//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1000//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13213212" author="gchanan" created="Wed, 22 Feb 2012 02:45:44 +0000"  >&lt;p&gt;@Ted:&lt;br/&gt;
Hmm...just to check I fetched the latest applied the patch and both:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
mvn -Dhadoop.profile=23 clean test -P localTests -Dtest=org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
mvn clean test -P localTests -Dtest=org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;passed.  Can you clarify exactly what you ran?&lt;/p&gt;

&lt;p&gt;I don&apos;t know what is going on.  I&apos;ve noticed those tests have been failing Hadoop QA as well for a few days, and I can&apos;t reproduce those either.  Do you have any idea what is going on?&lt;/p&gt;</comment>
                            <comment id="13213221" author="zhihyu@ebaysf.com" created="Wed, 22 Feb 2012 03:00:28 +0000"  >&lt;p&gt;Here is what I did on MacBook:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  527  patch -p0 -i  HBASE-5317-v6.patch 
  528  mvn clean -Dhadoop.profile=23 test -P localTests -Dtest=org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I will attach test output.&lt;/p&gt;</comment>
                            <comment id="13213229" author="hadoopqa" created="Wed, 22 Feb 2012 03:11:29 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12515531/TEST-org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12515531/TEST-org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat.xml&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 48 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1003//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1003//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13214025" author="gchanan" created="Wed, 22 Feb 2012 21:47:35 +0000"  >&lt;p&gt;@Ted:&lt;br/&gt;
Checked it on a mac, seeing the same failure as you.  Can you confirm something for me?  If you cd to target/org.apache.hadoop.mapred.MiniMRCluster and run the following commands, do you see something similar?&lt;/p&gt;

&lt;p&gt;$ find . -name stderr&lt;br/&gt;
./org.apache.hadoop.mapred.MiniMRCluster-logDir-nm-0_2/application_1329939539132_0001/container_1329939539132_0001_01_000001/stderr&lt;br/&gt;
find . -name syslog&lt;br/&gt;
$ &lt;br/&gt;
$ cat ./org.apache.hadoop.mapred.MiniMRCluster-logDir-nm-0_2/application_1329939539132_0001/container_1329939539132_0001_01_000001/stderr&lt;br/&gt;
/bin/bash: /bin/java: No such file or directory&lt;/p&gt;</comment>
                            <comment id="13214037" author="zhihyu@ebaysf.com" created="Wed, 22 Feb 2012 22:05:58 +0000"  >&lt;p&gt;I do see similar output:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
LM-SJN-00713032:org.apache.hadoop.mapred.MiniMRCluster zhihyu$ find . -name stderr
./org.apache.hadoop.mapred.MiniMRCluster-logDir-nm-0_3/application_1329947593635_0001/container_1329947593635_0001_01_000001/stderr
LM-SJN-00713032:org.apache.hadoop.mapred.MiniMRCluster zhihyu$ find . -name syslog
LM-SJN-00713032:org.apache.hadoop.mapred.MiniMRCluster zhihyu$ cat org.apache.hadoop.mapred.MiniMRCluster-logDir-nm-0_3/application_1329947593635_0001/container_1329947593635_0001_01_000001/stderr
/bin/bash: /bin/java: No such file or directory
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13214353" author="gchanan" created="Thu, 23 Feb 2012 06:09:01 +0000"  >&lt;p&gt;Thanks very much, Ted.&lt;/p&gt;

&lt;p&gt;Could also you post the output of &quot;mvn --version&quot; where you ran the test?  I&apos;m particularly interested in the value of &quot;Java home:&quot; &amp;#8211; is there something valid at the location it is giving you?&lt;/p&gt;</comment>
                            <comment id="13214356" author="zhihyu@ebaysf.com" created="Thu, 23 Feb 2012 06:11:26 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
LM-SJN-00713032:205-hadoop zhihyu$ mvn --version
Apache Maven 3.0.3 (r1075438; 2011-02-28 09:31:09-0800)
Maven home: /usr/share/maven
Java version: 1.6.0_29, vendor: Apple Inc.
Java home: /&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home
Default locale: en_US, platform encoding: MacRoman
OS name: &lt;span class=&quot;code-quote&quot;&gt;&quot;mac os x&quot;&lt;/span&gt;, version: &lt;span class=&quot;code-quote&quot;&gt;&quot;10.6.8&quot;&lt;/span&gt;, arch: &lt;span class=&quot;code-quote&quot;&gt;&quot;x86_64&quot;&lt;/span&gt;, family: &lt;span class=&quot;code-quote&quot;&gt;&quot;mac&quot;&lt;/span&gt;
LM-SJN-00713032:205-hadoop zhihyu$ ls /&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home
bin	bundle	include	lib	man
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13214998" author="gchanan" created="Thu, 23 Feb 2012 20:06:26 +0000"  >&lt;p&gt;Okay, this looks like a mvn issue.&lt;/p&gt;

&lt;p&gt;On linux, if JAVA_HOME is not set, mvn sets JAVA_HOME to be whatever shows up in &quot;mvn --version&quot;&lt;br/&gt;
On mac, mvn appears to not set JAVA_HOME if it is not already set.&lt;/p&gt;

&lt;p&gt;So if you set JAVA_HOME to &quot;/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home&quot; the test should pass.&lt;br/&gt;
The new version of mapreduce requires JAVA_HOME to be set and tries to execute $JAVA_HOME + &quot;bin/java&quot; &amp;#8211; they should probably report a bug if JAVA_HOME is not set.&lt;/p&gt;

&lt;p&gt;Let me know if you want me to do anything else wrt this issue.&lt;/p&gt;</comment>
                            <comment id="13215017" author="zhihyu@ebaysf.com" created="Thu, 23 Feb 2012 20:24:11 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
echo ${JAVA_HOME}
/&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home

mvn -Dhadoop.profile=23 clean test -P localTests -Dtest=org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Same test failures, e.g.:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
testMRIncrementalLoadWithSplit(org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat)  Time elapsed: 60.857 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
java.lang.AssertionError
  at org.junit.Assert.fail(Assert.java:92)
  at org.junit.Assert.assertTrue(Assert.java:43)
  at org.junit.Assert.assertTrue(Assert.java:54)
  at org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat.runIncrementalPELoad(TestHFileOutputFormat.java:478)
  at org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat.doIncrementalLoadTest(TestHFileOutputFormat.java:390)
  at org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat.testMRIncrementalLoadWithSplit(TestHFileOutputFormat.java:369)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13215024" author="zhihyu@ebaysf.com" created="Thu, 23 Feb 2012 20:29:28 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
LM-SJN-00713032:org.apache.hadoop.mapred.MiniMRCluster zhihyu$ find . -name stderr
./org.apache.hadoop.mapred.MiniMRCluster-logDir-nm-0_0/application_1330028372796_0001/container_1330028372796_0001_01_000007/stderr
./org.apache.hadoop.mapred.MiniMRCluster-logDir-nm-0_2/application_1330028372796_0001/container_1330028372796_0001_01_000001/stderr
./org.apache.hadoop.mapred.MiniMRCluster-logDir-nm-0_2/application_1330028372796_0001/container_1330028372796_0001_01_000006/stderr
./org.apache.hadoop.mapred.MiniMRCluster-logDir-nm-0_3/application_1330028372796_0001/container_1330028372796_0001_01_000004/stderr
./org.apache.hadoop.mapred.MiniMRCluster-logDir-nm-0_3/application_1330028372796_0001/container_1330028372796_0001_01_000005/stderr
./org.apache.hadoop.mapred.MiniMRCluster-logDir-nm-1_2/application_1330028372796_0001/container_1330028372796_0001_01_000002/stderr
./org.apache.hadoop.mapred.MiniMRCluster-logDir-nm-1_3/application_1330028372796_0001/container_1330028372796_0001_01_000003/stderr
LM-SJN-00713032:org.apache.hadoop.mapred.MiniMRCluster zhihyu$ cat org.apache.hadoop.mapred.MiniMRCluster-logDir-nm-0_0/application_1330028372796_0001/container_1330028372796_0001_01_000007/stderr
WARNING: org.apache.hadoop.metrics.jvm.EventCounter is deprecated. Please use org.apache.hadoop.log.metrics.EventCounter in all the log4j.properties files.
LM-SJN-00713032:org.apache.hadoop.mapred.MiniMRCluster zhihyu$ cat org.apache.hadoop.mapred.MiniMRCluster-logDir-nm-1_3/application_1330028372796_0001/container_1330028372796_0001_01_000003/stderr
WARNING: org.apache.hadoop.metrics.jvm.EventCounter is deprecated. Please use org.apache.hadoop.log.metrics.EventCounter in all the log4j.properties files.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;From org.apache.hadoop.mapred.MiniMRCluster-logDir-nm-0_0/application_1330028372796_0001/container_1330028372796_0001_01_000007/syslog:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2012-02-23 12:22:34,208 INFO [fetcher#2] org.apache.hadoop.mapreduce.task.reduce.ShuffleScheduler: Assiging lm-sjn-00713032.corp.ebay.com:61263 with 1 to fetcher#2
2012-02-23 12:22:34,208 INFO [fetcher#2] org.apache.hadoop.mapreduce.task.reduce.ShuffleScheduler: assigned 1 of 1 to lm-sjn-00713032.corp.ebay.com:61263 to fetcher#2
2012-02-23 12:22:34,469 WARN [fetcher#2] org.apache.hadoop.mapreduce.task.reduce.Fetcher: Failed to connect to lm-sjn-00713032.corp.ebay.com:61263 with 1 map outputs
java.io.IOException: Server returned HTTP response code: 503 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; URL: http:&lt;span class=&quot;code-comment&quot;&gt;//lm-sjn-00713032.corp.ebay.com:61263/mapOutput?job=job_1330028372796_0001&amp;amp;reduce=0&amp;amp;map=attempt_1330028372796_0001_m_000000_1
&lt;/span&gt;  at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1436)
  at org.apache.hadoop.mapreduce.task.reduce.Fetcher.copyFromHost(Fetcher.java:220)
  at org.apache.hadoop.mapreduce.task.reduce.Fetcher.run(Fetcher.java:152)
2012-02-23 12:22:34,471 INFO [fetcher#2] org.apache.hadoop.mapreduce.task.reduce.ShuffleScheduler: Reporting fetch failure &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; attempt_1330028372796_0001_m_000000_1 to jobtracker.
2012-02-23 12:22:34,471 FATAL [fetcher#2] org.apache.hadoop.mapreduce.task.reduce.ShuffleScheduler: Shuffle failed with too many fetch failures and insufficient progress!
2012-02-23 12:22:34,472 INFO [fetcher#2] org.apache.hadoop.mapreduce.task.reduce.ShuffleScheduler: lm-sjn-00713032.corp.ebay.com:61263 freed by fetcher#2 in 264s
2012-02-23 12:22:34,472 ERROR [main] org.apache.hadoop.security.UserGroupInformation: PriviledgedActionException as:zhihyu (auth:SIMPLE) cause:org.apache.hadoop.mapreduce.task.reduce.Shuffle$ShuffleError: error in shuffle in fetcher#2
2012-02-23 12:22:34,472 WARN [main] org.apache.hadoop.mapred.YarnChild: Exception running child : org.apache.hadoop.mapreduce.task.reduce.Shuffle$ShuffleError: error in shuffle in fetcher#2
  at org.apache.hadoop.mapreduce.task.reduce.Shuffle.run(Shuffle.java:123)
  at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:371)
  at org.apache.hadoop.mapred.YarnChild$2.run(YarnChild.java:147)
  at java.security.AccessController.doPrivileged(Native Method)
  at javax.security.auth.Subject.doAs(Subject.java:396)
  at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1177)
  at org.apache.hadoop.mapred.YarnChild.main(YarnChild.java:142)
Caused by: java.io.IOException: Exceeded MAX_FAILED_UNIQUE_FETCHES; bailing-out.
  at org.apache.hadoop.mapreduce.task.reduce.ShuffleScheduler.checkReducerHealth(ShuffleScheduler.java:253)
  at org.apache.hadoop.mapreduce.task.reduce.ShuffleScheduler.copyFailed(ShuffleScheduler.java:187)
  at org.apache.hadoop.mapreduce.task.reduce.Fetcher.copyFromHost(Fetcher.java:247)
  at org.apache.hadoop.mapreduce.task.reduce.Fetcher.run(Fetcher.java:152)

2012-02-23 12:22:34,476 INFO [main] org.apache.hadoop.mapred.Task: Runnning cleanup &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the task
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Looks like 503 caused fetch failure.&lt;/p&gt;</comment>
                            <comment id="13215066" author="gchanan" created="Thu, 23 Feb 2012 21:25:29 +0000"  >&lt;p&gt;I am unable to reproduce either on my machine or on a coworker&apos;s Mac.&lt;/p&gt;

&lt;p&gt;Is it possible for you to try it on another machine?  Perhaps some (security?) setting on your machine makes mapreduce unable to open the required port or something?&lt;/p&gt;
</comment>
                            <comment id="13215069" author="zhihyu@ebaysf.com" created="Thu, 23 Feb 2012 21:31:07 +0000"  >&lt;p&gt;I will try again when I get home.&lt;br/&gt;
I noticed weird connection issues at work - inability to use Colloquy, etc&lt;/p&gt;</comment>
                            <comment id="13215222" author="zhihyu@ebaysf.com" created="Thu, 23 Feb 2012 23:59:00 +0000"  >&lt;p&gt;I was able to get the test to pass on Linux for patch v6.&lt;br/&gt;
I will integrate patch v6 later if I don&apos;t hear objection.&lt;/p&gt;

&lt;p&gt;Thanks for the persistent digging, Gregory.&lt;/p&gt;</comment>
                            <comment id="13215290" author="zhihyu@ebaysf.com" created="Fri, 24 Feb 2012 01:07:46 +0000"  >&lt;p&gt;Integrated patch v6 to TRUNK.&lt;/p&gt;

&lt;p&gt;Thanks for the patch Gregory.&lt;br/&gt;
In the future, please grant license to Apache when you attach patches.&lt;/p&gt;</comment>
                            <comment id="13215410" author="hudson" created="Fri, 24 Feb 2012 05:55:08 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-security #121 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-security/121/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-security/121/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5317&quot; title=&quot;Fix TestHFileOutputFormat to work against hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5317&quot;&gt;&lt;del&gt;HBASE-5317&lt;/del&gt;&lt;/a&gt; Fix TestHFileOutputFormat to work against hadoop 0.23 (Gregory Chanan) (Revision 1293049)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/pom.xml&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/mapreduce/HFileOutputFormat.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/client/TestMetaMigrationRemovingHTD.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13215437" author="gchanan" created="Fri, 24 Feb 2012 06:40:14 +0000"  >&lt;p&gt;Thanks, Ted.&lt;/p&gt;

&lt;p&gt;I&apos;ll grant the license in the future.&lt;/p&gt;

&lt;p&gt;Any objection to also getting this into 0.92?&lt;/p&gt;</comment>
                            <comment id="13215442" author="stack" created="Fri, 24 Feb 2012 06:44:46 +0000"  >&lt;p&gt;It can go into 0.92 if you make a version (I see a bunch of failures trying to apply trunk patch).  Thanks Gregory.&lt;/p&gt;</comment>
                            <comment id="13215475" author="gchanan" created="Fri, 24 Feb 2012 07:51:19 +0000"  >&lt;p&gt;patch for 0.92&lt;/p&gt;</comment>
                            <comment id="13215477" author="hadoopqa" created="Fri, 24 Feb 2012 08:02:56 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12515901/HBASE-5317to0.92.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12515901/HBASE-5317to0.92.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 7 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1040//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1040//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13215703" author="zhihyu@ebaysf.com" created="Fri, 24 Feb 2012 15:57:49 +0000"  >&lt;p&gt;Integrated to 0.92 branch.&lt;/p&gt;</comment>
                            <comment id="13215784" author="hudson" created="Fri, 24 Feb 2012 18:10:06 +0000"  >&lt;p&gt;Integrated in HBase-0.92 #302 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92/302/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92/302/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5317&quot; title=&quot;Fix TestHFileOutputFormat to work against hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5317&quot;&gt;&lt;del&gt;HBASE-5317&lt;/del&gt;&lt;/a&gt;  Fix TestHFileOutputFormat to work against hadoop 0.23&lt;br/&gt;
               (Gregory Taylor) (Revision 1293306)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/pom.xml&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/mapreduce/HFileOutputFormat.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/client/TestMetaMigrationRemovingHTD.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13216339" author="hudson" created="Sat, 25 Feb 2012 06:08:55 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2669 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2669/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2669/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5317&quot; title=&quot;Fix TestHFileOutputFormat to work against hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5317&quot;&gt;&lt;del&gt;HBASE-5317&lt;/del&gt;&lt;/a&gt; Fix TestHFileOutputFormat to work against hadoop 0.23 (Gregory Chanan) (Revision 1293049)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/pom.xml&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/mapreduce/HFileOutputFormat.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/client/TestMetaMigrationRemovingHTD.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13222119" author="hudson" created="Mon, 5 Mar 2012 02:15:31 +0000"  >&lt;p&gt;Integrated in HBase-0.92-security #96 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92-security/96/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92-security/96/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5317&quot; title=&quot;Fix TestHFileOutputFormat to work against hadoop 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5317&quot;&gt;&lt;del&gt;HBASE-5317&lt;/del&gt;&lt;/a&gt;  Fix TestHFileOutputFormat to work against hadoop 0.23&lt;br/&gt;
               (Gregory Taylor) (Revision 1293306)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/pom.xml&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/mapreduce/HFileOutputFormat.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/client/TestMetaMigrationRemovingHTD.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12513229" name="HBASE-5317-v0.patch" size="1920" author="gchanan" created="Sat, 4 Feb 2012 03:00:20 +0000"/>
                            <attachment id="12513394" name="HBASE-5317-v1.patch" size="2526" author="gchanan" created="Mon, 6 Feb 2012 06:01:49 +0000"/>
                            <attachment id="12515057" name="HBASE-5317-v3.patch" size="6773" author="gchanan" created="Sat, 18 Feb 2012 01:33:42 +0000"/>
                            <attachment id="12515322" name="HBASE-5317-v4.patch" size="6773" author="gchanan" created="Tue, 21 Feb 2012 05:30:58 +0000"/>
                            <attachment id="12515326" name="HBASE-5317-v5.patch" size="7453" author="gchanan" created="Tue, 21 Feb 2012 05:54:35 +0000"/>
                            <attachment id="12515510" name="HBASE-5317-v6.patch" size="7451" author="gchanan" created="Wed, 22 Feb 2012 00:04:06 +0000"/>
                            <attachment id="12515901" name="HBASE-5317to0.92.patch" size="7463" author="gchanan" created="Fri, 24 Feb 2012 07:51:17 +0000"/>
                            <attachment id="12515531" name="TEST-org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat.xml" size="1559381" author="zhihyu@ebaysf.com" created="Wed, 22 Feb 2012 03:01:48 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12541695">HBASE-5346</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 4 Feb 2012 06:43:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>226202</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 41 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i069hj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34468</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>