<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:23:21 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-11451/HBASE-11451.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-11451] HBase MapReduce job loads configuration (hbase-site.xml), but actually doesn&apos;t use the values read.</title>
                <link>https://issues.apache.org/jira/browse/HBASE-11451</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;I am writing a MapReduce job which reads from (a) HBase table(s). Almost everything works as it is supposed to except the &lt;tt&gt;Configuration&lt;/tt&gt; class. So I did this,&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Configuration config = HBaseConfiguration.create();
GenericOptionsParser parser = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GenericOptionsParser(config, args);
&lt;span class=&quot;code-comment&quot;&gt;// This should work but is not working.
&lt;/span&gt;config.addResource(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Path(parser.getCommandLine().getOptionValue(&lt;span class=&quot;code-quote&quot;&gt;&quot;conf&quot;&lt;/span&gt;, DEFAULT_HBASE_CONF)));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When I run the job like this (passing the path to `hbase-site.xml` correctly), I get this error.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
14/06/30 23:02:30 WARN zookeeper.ClientCnxn: Session 0x0 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; server &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
    at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
    at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:735)
    at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:350)
    at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1075)
    14/06/30 23:02:30 INFO zookeeper.ClientCnxn: Opening socket connection to server localhost/127.0.0.1:2181. Will not attempt to authenticate using SASL (unknown error)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But when I add the following two lines, it works like a charm (even though it seems completely ridiculous).&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// So these are the workarounds.
&lt;/span&gt;config.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;hbase.rootdir&quot;&lt;/span&gt;, config.get(&lt;span class=&quot;code-quote&quot;&gt;&quot;hbase.rootdir&quot;&lt;/span&gt;));
config.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;hbase.zookeeper.quorum&quot;&lt;/span&gt;, config.get(&lt;span class=&quot;code-quote&quot;&gt;&quot;hbase.zookeeper.quorum&quot;&lt;/span&gt;));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Basically, read the parameters back from the &lt;tt&gt;Configuration&lt;/tt&gt; object and set them back in the same object, which is bonkers.&lt;/p&gt;

&lt;p&gt;I read a bug raised about it &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11066&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;HBASE-11066&lt;/a&gt;, but it seems to have been closed citing local configuration problem (I think not). I use CDH 5.0.2 with HBase 0.96.1.1. &lt;/p&gt;

&lt;p&gt;I don&apos;t know if it is an issue with the Cloudera build or the general one. Please let me know if you need any more details.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux Debain 7.4 &quot;Wheezy&quot;&lt;/p&gt;</environment>
        <key id="12724766">HBASE-11451</key>
            <summary>HBase MapReduce job loads configuration (hbase-site.xml), but actually doesn&apos;t use the values read.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="arunallamsetty">Arun Allamsetty</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Jul 2014 16:43:19 +0000</created>
                <updated>Tue, 1 Jul 2014 16:51:04 +0000</updated>
                                            <version>0.96.1.1</version>
                                                    <component>mapreduce</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="14049059" author="yuzhihong@gmail.com" created="Tue, 1 Jul 2014 16:51:04 +0000"  >&lt;p&gt;Seems to be related to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11378&quot; title=&quot;TableMapReduceUtil overwrites user supplied options for multiple tables/scaners job&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11378&quot;&gt;&lt;del&gt;HBASE-11378&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 1 Jul 2014 16:51:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>402949</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 24 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1xcrj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>403009</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>