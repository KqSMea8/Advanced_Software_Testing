<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:49:33 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-990/HBASE-990.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-990] NoSuchElementException in flushSomeRegions</title>
                <link>https://issues.apache.org/jira/browse/HBASE-990</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;From Billy&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2008-11-10 18:14:53,157 INFO org.apache.hadoop.ipc.Server: IPC Server handler 69 on 60020, call batchUpdates([B@68e97c, [Lorg.apache.hadoop.hbase.io.BatchUpdate;@1b8e8d2) from 192.168.1.201:37077: error: java.io.IOException: java.util.NoSuchElementException
java.io.IOException: java.util.NoSuchElementException
       at java.util.TreeMap.key(TreeMap.java:1206)
       at java.util.TreeMap.firstKey(TreeMap.java:267)
       at org.apache.hadoop.hbase.regionserver.MemcacheFlusher.flushSomeRegions(MemcacheFlusher.java:227)
       at org.apache.hadoop.hbase.regionserver.MemcacheFlusher.reclaimMemcacheMemory(MemcacheFlusher.java:213)
       at org.apache.hadoop.hbase.regionserver.HRegionServer.batchUpdates(HRegionServer.java:1227)
       at sun.reflect.GeneratedMethodAccessor5.invoke(Unknown Source)
       at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
       at java.lang.reflect.Method.invoke(Method.java:597)
       at org.apache.hadoop.hbase.ipc.HbaseRPC$Server.call(HbaseRPC.java:634)
       at org.apache.hadoop.ipc.Server$Handler.run(Server.java:888) 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12408215">HBASE-990</key>
            <summary>NoSuchElementException in flushSomeRegions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stack">stack</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 Nov 2008 05:29:49 +0000</created>
                <updated>Sun, 13 Sep 2009 22:26:32 +0000</updated>
                            <resolved>Tue, 18 Nov 2008 15:50:29 +0000</resolved>
                                                    <fixVersion>0.19.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12646474" author="stack" created="Tue, 11 Nov 2008 05:31:22 +0000"  >&lt;p&gt;Committed.&lt;/p&gt;</comment>
                            <comment id="12648470" author="rafan" created="Tue, 18 Nov 2008 03:13:40 +0000"  >&lt;p&gt;I&apos;m still seeing this with default settings regarding memcache / flush size with trunk r718159 (I use hadoop 0.19.0 rc1 instead of the one in the trunk). The stack trace is exactly the same as the one in the description. However, I didn&apos;t see the new INFO message in my region server logs. It seems to me that even after flush all online regions, global memory cache is still larger than its low mark.&lt;/p&gt;

&lt;p&gt;I&apos;m writing ~2M rows in each run, within 10 runs, each runs has 1~3 errors like this one.&lt;/p&gt;</comment>
                            <comment id="12648496" author="stack" created="Tue, 18 Nov 2008 04:55:25 +0000"  >&lt;p&gt;I&apos;d think the line numbers would at least be different Rong-en? Want to post the stack trace?&lt;/p&gt;</comment>
                            <comment id="12648503" author="rafan" created="Tue, 18 Nov 2008 05:51:16 +0000"  >&lt;p&gt;indeed, the line # in flushSomeRegions() is different, I missed it.&lt;/p&gt;

&lt;p&gt;java.io.IOException: java.util.NoSuchElementException&lt;br/&gt;
        at java.util.TreeMap.key(TreeMap.java:1206)&lt;br/&gt;
        at java.util.TreeMap.firstKey(TreeMap.java:267)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.MemcacheFlusher.flushSomeRegions(MemcacheFlusher.java:231)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.MemcacheFlusher.reclaimMemcacheMemory(MemcacheFlusher.java:213)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegionServer.batchUpdates(HRegionServer.java:1312)&lt;br/&gt;
        at sun.reflect.GeneratedMethodAccessor7.invoke(Unknown Source)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.HbaseRPC$Server.call(HbaseRPC.java:634)&lt;br/&gt;
        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:892)&lt;/p&gt;
</comment>
                            <comment id="12648504" author="stack" created="Tue, 18 Nov 2008 06:10:36 +0000"  >&lt;p&gt;I see.  Looks like we succeed the first time through the loop at #229 but if we keep going around without freeing enough memory, eventually we&apos;ll empty the Map and get a NSSE.  Silly mistake.&lt;/p&gt;</comment>
                            <comment id="12648516" author="stack" created="Tue, 18 Nov 2008 07:11:30 +0000"  >&lt;p&gt;Here is something for you to try Rong-en.  Should &apos;cure&apos; the exception.  Next though is to figure why though all regions have flushed, you still do not have enough free memory.&lt;/p&gt;</comment>
                            <comment id="12648628" author="rafan" created="Tue, 18 Nov 2008 15:46:22 +0000"  >&lt;p&gt;Thanks stack, The new patch helps. &lt;/p&gt;</comment>
                            <comment id="12648630" author="stack" created="Tue, 18 Nov 2008 15:50:29 +0000"  >&lt;p&gt;Ok.  Will try resolving again (Committed).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12394145" name="990.patch" size="1471" author="stack" created="Tue, 18 Nov 2008 07:11:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 18 Nov 2008 03:13:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25513</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 5 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0haon:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98993</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>