<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:47:59 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-7675/HBASE-7675.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-7675] region_mover.rb clashes with shell&apos;s move command</title>
                <link>https://issues.apache.org/jira/browse/HBASE-7675</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description></description>
                <environment></environment>
        <key id="12629355">HBASE-7675</key>
            <summary>region_mover.rb clashes with shell&apos;s move command</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="lhofhansl">Lars Hofhansl</reporter>
                        <labels>
                    </labels>
                <created>Sat, 26 Jan 2013 00:48:50 +0000</created>
                <updated>Tue, 29 Jan 2013 21:29:00 +0000</updated>
                            <resolved>Sat, 26 Jan 2013 01:34:57 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13563233" author="stack" created="Sat, 26 Jan 2013 00:57:23 +0000"  >&lt;p&gt;Can we see the error sir?&lt;/p&gt;</comment>
                            <comment id="13563259" author="lhofhansl" created="Sat, 26 Jan 2013 01:04:31 +0000"  >&lt;p&gt;Endless loop of this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
3/01/26 01:03:16 [main] INFO  reflect.GeneratedMethodAccessor12(?): Moving region 97229dc004dc07f7945b46c002c19a7a (1 of 3) to server=shared-dnds1-1-sfm.ops.sfdc.net,60020,1359148003389

ERROR: wrong number of arguments (4 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 2)

Here is some help &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; command:
Move a region.  Optionally specify target regionserver &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; we choose one
at random.  NOTE: You pass the encoded region name, not the region name so
&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; command is a little different to the others.  The encoded region name
is the hash suffix on region names: e.g. &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the region name were
TestTable,0094429456,1289497600452.527db22f95c8a9e0116f0cc13c680396. then
the encoded region name portion is 527db22f95c8a9e0116f0cc13c680396
A server name is its host, port plus startcode. For example:
host187.example.com,60020,1289493121758
Examples:

  hbase&amp;gt; move &apos;ENCODED_REGIONNAME&apos;
  hbase&amp;gt; move &apos;ENCODED_REGIONNAME&apos;, &apos;SERVER_NAME&apos;


13/01/26 01:03:16 [main] INFO  reflect.GeneratedMethodAccessor12(?): Moving region 0090dd62800e7fd8e36a3b112c82f3f7 (2 of 3) to server=shared-dnds1-3-sfm.ops.sfdc.net,60020,1359147981154
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13563262" author="lhofhansl" created="Sat, 26 Jan 2013 01:06:53 +0000"  >&lt;p&gt;If I rename the move method to move1 I get this after the first region was moved:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ArgumentError: wrong number of arguments (2 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 0)
   start at /home/sfdc/current/bigdata-hbase/hbase/hbase/bin/../bin/hirb.rb:174
  (root) at /home/sfdc/current/bigdata-hbase/hbase/hbase/bin/../bin/hirb.rb:188
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13563266" author="lhofhansl" created="Sat, 26 Jan 2013 01:09:10 +0000"  >&lt;p&gt;Sorry I meant after all regions were moved.&lt;/p&gt;</comment>
                            <comment id="13563273" author="lhofhansl" created="Sat, 26 Jan 2013 01:17:36 +0000"  >&lt;p&gt;We get the last error, because of a missing call to exit when we actually move regions.&lt;/p&gt;</comment>
                            <comment id="13563284" author="lhofhansl" created="Sat, 26 Jan 2013 01:34:57 +0000"  >&lt;p&gt;Never mind.&lt;br/&gt;
This is supposed to be run like this:&lt;br/&gt;
&lt;tt&gt;hbase org.jruby.Main region_mover.rb unload &amp;lt;host&amp;gt;&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;But I ran it like this:&lt;br/&gt;
&lt;tt&gt;hbase shell region_mover.rb unload &amp;lt;host&amp;gt;&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="13564764" author="ndimiduk" created="Mon, 28 Jan 2013 22:23:36 +0000"  >&lt;p&gt;Are you the only person getting confused by this? Should region_mover.rb be incorporated into the shell as a first-class citizen?&lt;/p&gt;</comment>
                            <comment id="13565066" author="lhofhansl" created="Tue, 29 Jan 2013 04:31:03 +0000"  >&lt;p&gt;Normally you&apos;d use graceful_stop.sh, which calls region_mover.rb correctly. In our case we have special needs to I wanted to use region_mover directly. So, yes, I might be special here &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Having this available through the shell makes sense to me, though (was discussing that idea with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=saint.ack%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;saint.ack@gmail.com&quot;&gt;Stack&lt;/a&gt; offline).&lt;/p&gt;</comment>
                            <comment id="13565073" author="stack" created="Tue, 29 Jan 2013 04:42:04 +0000"  >&lt;p&gt;That is two people who have independently arrived at the notion that region_mover.rb should be part of the shell.  Maybe we should do it (smile).&lt;/p&gt;</comment>
                            <comment id="13565079" author="lhofhansl" created="Tue, 29 Jan 2013 04:58:13 +0000"  >&lt;p&gt;The only difficulty is that region_mover is stateful in that it stores the unloaded regions into a local file in order to be able to move them back. Through the shell that might be awkward an unexpected.&lt;/p&gt;

&lt;p&gt;Could store that information in ZK, but that&apos;d be strange as well.&lt;/p&gt;</comment>
                            <comment id="13565608" author="ndimiduk" created="Tue, 29 Jan 2013 18:08:55 +0000"  >&lt;blockquote&gt;&lt;p&gt;The only difficulty is that region_mover is stateful...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Now I&apos;m a little terrified. Does the work performed need to be pushed to the HMaster instead of keeping state on the client? Give us the chance for recovery of the operation.&lt;/p&gt;

&lt;p&gt;Caveat: My expertise in region_mover.rb is derived entirely from the name &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13565830" author="stack" created="Tue, 29 Jan 2013 21:29:00 +0000"  >&lt;p&gt;It could be state kept in the master, that&apos;d be ideal.  Was done outside of master written in files for now.  If the file goes missing, it is not the end of the world.  Some locality may be lost.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 26 Jan 2013 00:57:23 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>309696</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 46 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1g81z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>302898</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>