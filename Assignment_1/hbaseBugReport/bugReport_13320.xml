<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:42:04 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-13320/HBASE-13320.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-13320] &apos;hbase.bucketcache.size&apos; configuration value is not correct in hbase-default.xml </title>
                <link>https://issues.apache.org/jira/browse/HBASE-13320</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;In  hbase-default.xml  file &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&apos;hbase.bucketcache.size&apos; is not correct&lt;br/&gt;
We either specify it as a float or in MB&apos;s and the default value that is mentioned is never used&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;hbase.bucketcache.size&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;65536&amp;lt;/value&amp;gt;
&amp;lt;source&amp;gt;hbase-&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;.xml&amp;lt;/source&amp;gt;
&amp;lt;/property&amp;gt;

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12785138">HBASE-13320</key>
            <summary>&apos;hbase.bucketcache.size&apos; configuration value is not correct in hbase-default.xml </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="sreenivasulureddy">Y. SREENIVASULU REDDY</assignee>
                                    <reporter username="sreenivasulureddy">Y. SREENIVASULU REDDY</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Mar 2015 11:18:23 +0000</created>
                <updated>Wed, 10 Feb 2016 22:01:55 +0000</updated>
                                            <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>BucketCache</component>
                    <component>hbase</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="14377762" author="ram_krish" created="Tue, 24 Mar 2015 12:08:01 +0000"  >&lt;p&gt;Thanks for raising this.  You going to give patch for this?&lt;/p&gt;</comment>
                            <comment id="14377882" author="sreenivasulureddy" created="Tue, 24 Mar 2015 13:46:55 +0000"  >&lt;p&gt;yes i will provide the patch for this &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ram_krish&quot; class=&quot;user-hover&quot; rel=&quot;ram_krish&quot;&gt;ramkrishna.s.vasudevan&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14378265" author="sreenivasulureddy" created="Tue, 24 Mar 2015 17:55:12 +0000"  >&lt;p&gt;please review the attached patch.&lt;/p&gt;</comment>
                            <comment id="14378333" author="hadoopqa" created="Tue, 24 Mar 2015 18:29:59 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12706952/HBASE-13320.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12706952/HBASE-13320.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit fcc09dcd38b8543a9dd40212206cb4231620dac9.&lt;br/&gt;
  ATTACHMENT ID: 12706952&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.1 2.5.2 2.6.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 site&lt;/font&gt;.  The patch appears to cause mvn site goal to fail.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.util.TestDynamicClassLoader&lt;br/&gt;
                  org.apache.hadoop.hbase.io.crypto.TestKeyStoreKeyProvider&lt;br/&gt;
                  org.apache.hadoop.hbase.io.crypto.TestCipherProvider&lt;br/&gt;
                  org.apache.hadoop.hbase.TestClassFinder&lt;br/&gt;
                  org.apache.hadoop.hbase.io.crypto.aes.TestAES&lt;br/&gt;
                  org.apache.hadoop.hbase.io.crypto.TestEncryption&lt;br/&gt;
                  org.apache.hadoop.hbase.TestHBaseConfiguration&lt;br/&gt;
                  org.apache.hadoop.hbase.io.crypto.TestKeyProvider&lt;br/&gt;
                  org.apache.hadoop.hbase.util.TestCoprocessorClassLoader&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 1 zombie test(s): 	at org.apache.camel.test.blueprint.CamelBlueprintHelper.getOsgiService(CamelBlueprintHelper.java:227)&lt;br/&gt;
	at org.apache.camel.test.blueprint.CamelBlueprintHelper.getOsgiService(CamelBlueprintHelper.java:202)&lt;br/&gt;
	at org.apache.camel.test.blueprint.Main.doStart(Main.java:104)&lt;br/&gt;
	at org.apache.camel.test.blueprint.MyMainAppTest.run(MyMainAppTest.java:59)&lt;br/&gt;
	at org.apache.camel.test.blueprint.MyMainAppTest.testMyMain(MyMainAppTest.java:39)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13390//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13390//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13390//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13390//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13390//artifact/patchprocess/newPatchFindbugsWarningshbase-annotations.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13390//artifact/patchprocess/newPatchFindbugsWarningshbase-annotations.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13390//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13390//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13390//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13390//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13390//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13390//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13390//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13390//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13390//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13390//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13390//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13390//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13390//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13390//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13390//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13390//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13390//artifact/patchprocess/newPatchFindbugsWarningshbase-rest.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13390//artifact/patchprocess/newPatchFindbugsWarningshbase-rest.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13390//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13390//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13390//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13390//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14379386" author="sreenivasulureddy" created="Wed, 25 Mar 2015 06:44:31 +0000"  >&lt;p&gt;Test failures are not because of this patch.&lt;/p&gt;</comment>
                            <comment id="14382273" author="sreenivasulureddy" created="Thu, 26 Mar 2015 17:28:39 +0000"  >&lt;p&gt;In previous patch &lt;br/&gt;
xml parser exception is throwing because of &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;cache (if &amp;lt; 1.0) OR, it is the capacity
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;so changing it to&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;cache (if lessthan 1.0) OR, it is the capacity
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14382517" author="hadoopqa" created="Thu, 26 Mar 2015 19:48:46 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12707545/HBASE-v2-13320.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12707545/HBASE-v2-13320.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 69f6a2e7b44d33e01866928672700cde1366f429.&lt;br/&gt;
  ATTACHMENT ID: 12707545&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.1 2.5.2 2.6.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.util.TestProcessBasedCluster&lt;br/&gt;
                  org.apache.hadoop.hbase.security.token.TestGenerateDelegationToken&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestImportExport&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13444//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13444//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13444//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13444//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13444//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13444//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13444//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13444//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14383686" author="ram_krish" created="Fri, 27 Mar 2015 11:35:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sreenivasulureddy&quot; class=&quot;user-hover&quot; rel=&quot;sreenivasulureddy&quot;&gt;Y. SREENIVASULU REDDY&lt;/a&gt;&lt;br/&gt;
Did you try to start a region server with the above changed default value?&lt;br/&gt;
Because here&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; blockSize = c.getInt(BLOCKCACHE_BLOCKSIZE_KEY, HConstants.DEFAULT_BLOCKSIZE);
    &lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt; bucketCachePercentage = c.getFloat(BUCKET_CACHE_SIZE_KEY, 0F);
    &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; bucketCacheSize = (&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;) (bucketCachePercentage &amp;lt; 1? mu.getMax() * bucketCachePercentage:
      bucketCachePercentage * 1024 * 1024);
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (bucketCacheSize &amp;lt;= 0) {
      &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IllegalStateException(&lt;span class=&quot;code-quote&quot;&gt;&quot;bucketCacheSize &amp;lt;= 0; Check &quot;&lt;/span&gt; +
        BUCKET_CACHE_SIZE_KEY + &lt;span class=&quot;code-quote&quot;&gt;&quot; setting and/or server java heap size&quot;&lt;/span&gt;);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Setting 0 would mean that we may end up bucketCacheSize as 0?  If we allow the hbase-default.xml to have this default value then it would mean that we would get a bucketCacheSize as 65536 * 1024 * 1024 as default. (The comment for the property is anyway wrong)&lt;br/&gt;
If we make the default as 1 in the hbase-default.xml then we will always get 1024*1024 as the default bucket cache size. &lt;/p&gt;</comment>
                            <comment id="14384062" author="sreenivasulureddy" created="Fri, 27 Mar 2015 16:12:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ram_krish&quot; class=&quot;user-hover&quot; rel=&quot;ram_krish&quot;&gt;ramkrishna.s.vasudevan&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;hbase.bucketcache.size&lt;/b&gt; this configuration will use when we configured this &lt;b&gt;hbase.bucketcache.ioengine&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;In my case  &lt;b&gt;hbase.bucketcache.ioengine=heap&lt;/b&gt;&lt;br/&gt;
then if configure &lt;b&gt;hbase.bucketcache.size=0&lt;/b&gt;&lt;br/&gt;
then regionserver is failing with the following exception.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2015-03-27 20:45:57,470 INFO  [regionserver/VM1:16040] regionserver.HRegionServer: STOPPED: Failed initialization
2015-03-27 20:45:57,470 ERROR [regionserver/VM1:16040] regionserver.HRegionServer: Failed init
java.lang.IllegalStateException: bucketCacheSize &amp;lt;= 0; Check hbase.bucketcache.size setting and/or server java heap size
        at org.apache.hadoop.hbase.io.hfile.CacheConfig.getL2(CacheConfig.java:491)
        at org.apache.hadoop.hbase.io.hfile.CacheConfig.instantiateBlockCache(CacheConfig.java:536)
        at org.apache.hadoop.hbase.io.hfile.CacheConfig.&amp;lt;init&amp;gt;(CacheConfig.java:213)
        at org.apache.hadoop.hbase.regionserver.HRegionServer.handleReportForDutyResponse(HRegionServer.java:1318)
        at org.apache.hadoop.hbase.regionserver.HRegionServer.run(HRegionServer.java:874)
        at java.lang.Thread.run(Thread.java:745)
2015-03-27 20:45:57,473 FATAL [regionserver/VM1:16040] regionserver.HRegionServer: ABORTING region server VM1,16040,1427469355207: Unhandled: Region server startup failed
java.io.IOException: Region server startup failed
        at org.apache.hadoop.hbase.regionserver.HRegionServer.convertThrowableToIOE(HRegionServer.java:2879)
        at org.apache.hadoop.hbase.regionserver.HRegionServer.handleReportForDutyResponse(HRegionServer.java:1337)
        at org.apache.hadoop.hbase.regionserver.HRegionServer.run(HRegionServer.java:874)
        at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.IllegalStateException: bucketCacheSize &amp;lt;= 0; Check hbase.bucketcache.size setting and/or server java heap size
        at org.apache.hadoop.hbase.io.hfile.CacheConfig.getL2(CacheConfig.java:491)
        at org.apache.hadoop.hbase.io.hfile.CacheConfig.instantiateBlockCache(CacheConfig.java:536)
        at org.apache.hadoop.hbase.io.hfile.CacheConfig.&amp;lt;init&amp;gt;(CacheConfig.java:213)
        at org.apache.hadoop.hbase.regionserver.HRegionServer.handleReportForDutyResponse(HRegionServer.java:1318)
        ... 2 more
2015-03-27 20:45:57,473 FATAL [regionserver/VM1:16040] regionserver.HRegionServer: RegionServer abort: loaded coprocessors are: []
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;if configure &lt;b&gt;hbase.bucketcache.size=1&lt;/b&gt;&lt;br/&gt;
then regionserver is failing with the following exception.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2015-03-27 20:50:14,469 ERROR [regionserver/VM1:16040] hfile.CacheConfig: Can&apos;t instantiate bucket cache
org.apache.hadoop.hbase.io.hfile.bucket.BucketAllocatorException: Bucket allocator size too small - must have room for at least 14 buckets
        at org.apache.hadoop.hbase.io.hfile.bucket.BucketAllocator.&amp;lt;init&amp;gt;(BucketAllocator.java:309)
        at org.apache.hadoop.hbase.io.hfile.bucket.BucketCache.&amp;lt;init&amp;gt;(BucketCache.java:231)
        at org.apache.hadoop.hbase.io.hfile.CacheConfig.getL2(CacheConfig.java:513)
        at org.apache.hadoop.hbase.io.hfile.CacheConfig.instantiateBlockCache(CacheConfig.java:536)
        at org.apache.hadoop.hbase.io.hfile.CacheConfig.&amp;lt;init&amp;gt;(CacheConfig.java:213)
        at org.apache.hadoop.hbase.regionserver.HRegionServer.handleReportForDutyResponse(HRegionServer.java:1318)
        at org.apache.hadoop.hbase.regionserver.HRegionServer.run(HRegionServer.java:874)
        at java.lang.Thread.run(Thread.java:745)
2015-03-27 20:50:14,471 INFO  [regionserver/VM1:16040] regionserver.HRegionServer: STOPPED: Failed initialization
2015-03-27 20:50:14,471 ERROR [regionserver/VM1:16040] regionserver.HRegionServer: Failed init
java.lang.RuntimeException: org.apache.hadoop.hbase.io.hfile.bucket.BucketAllocatorException: Bucket allocator size too small - must have room for at least 14 buckets
        at org.apache.hadoop.hbase.io.hfile.CacheConfig.getL2(CacheConfig.java:517)
        at org.apache.hadoop.hbase.io.hfile.CacheConfig.instantiateBlockCache(CacheConfig.java:536)
        at org.apache.hadoop.hbase.io.hfile.CacheConfig.&amp;lt;init&amp;gt;(CacheConfig.java:213)
        at org.apache.hadoop.hbase.regionserver.HRegionServer.handleReportForDutyResponse(HRegionServer.java:1318)
        at org.apache.hadoop.hbase.regionserver.HRegionServer.run(HRegionServer.java:874)
        at java.lang.Thread.run(Thread.java:745)
Caused by: org.apache.hadoop.hbase.io.hfile.bucket.BucketAllocatorException: Bucket allocator size too small - must have room for at least 14 buckets
        at org.apache.hadoop.hbase.io.hfile.bucket.BucketAllocator.&amp;lt;init&amp;gt;(BucketAllocator.java:309)
        at org.apache.hadoop.hbase.io.hfile.bucket.BucketCache.&amp;lt;init&amp;gt;(BucketCache.java:231)
        at org.apache.hadoop.hbase.io.hfile.CacheConfig.getL2(CacheConfig.java:513)
        ... 5 more
2015-03-27 20:50:14,472 FATAL [regionserver/VM1:16040] regionserver.HRegionServer: ABORTING region server VM1,16040,1427469612267: Unhandled: Region server startup failed
java.io.IOException: Region server startup failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14390036" author="ram_krish" created="Wed, 1 Apr 2015 06:02:01 +0000"  >&lt;p&gt;Thanks for checking this. Going through the complete calculation based on these configs, with the default for &apos;hbase.bucketcache.size&apos; being 65536 (64*1024), then the capacity that we pass would be 64 * 1024*1024*1024 = 68719476736.&lt;br/&gt;
In the Bucketallocator assuming we have not configured any bucket sizes(going by default), the maximum size would be (512 * 1024 + 1024). = 525312.&lt;br/&gt;
So &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.bucketCapacity = FEWEST_ITEMS_IN_BUCKET * bigItemSize;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;would be 2101248 where the FEWEST_ITEMS_IN_BUCKET  = 4.&lt;br/&gt;
For the buckets array&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
buckets = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Bucket[(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) (availableSpace / bucketCapacity)];
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;which is approx 32704.  &lt;/p&gt;

&lt;p&gt;When you configure it as 1, then the problem is this calculation leads to an array which is less than 14.  So any default value which is more than 14 should be accounted for.  If for any reason we have to keep the default ie. create 32704 sized bucket array only then I would suggest we leave the default as is, but say that by default we would create buckets of size 64*1024*1024*1024.&lt;br/&gt;
Other wise we will just pass 64 in the hbase-default.xml so that we would alway get 64*1024*1024 which would lead to an array size of 31. I think that would be fine.  But before changing it let us confirm on this size that has been calculated.&lt;br/&gt;
Any thoughts on this &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zjushch&quot; class=&quot;user-hover&quot; rel=&quot;zjushch&quot;&gt;chunhui shen&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=saint.ack%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;saint.ack@gmail.com&quot;&gt;Stack&lt;/a&gt;,&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt;,&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="14390242" author="anoop.hbase" created="Wed, 1 Apr 2015 08:52:31 +0000"  >&lt;p&gt;Any value btw o and 1 treated as heap size %..  1 means it is treated as the exact size and 1 MB size is too small.&lt;/p&gt;</comment>
                            <comment id="14390280" author="ram_krish" created="Wed, 1 Apr 2015 09:34:13 +0000"  >&lt;p&gt;So we will leave it as it is and only update the doc saying the default is 64G? Or will make the default as 64MB?&lt;/p&gt;</comment>
                            <comment id="14480999" author="ram_krish" created="Mon, 6 Apr 2015 06:49:32 +0000"  >&lt;p&gt;Can we update the hbase-default.xml to a value 64*1024*1024?  And in the CacheConfig&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; bucketCacheSize = (&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;) (bucketCachePercentage &amp;lt; 1? mu.getMax() * bucketCachePercentage:
      bucketCachePercentage * 1024 * 1024);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We will remove that 1024 * 1024 multiplier?&lt;/p&gt;</comment>
                            <comment id="14481238" author="anoop.hbase" created="Mon, 6 Apr 2015 14:08:47 +0000"  >&lt;p&gt;That will be a BC issue.&lt;br/&gt;
In xml we can just keep the value as 0?  Any way user has to configure hbase.bucketcache.ioengine to use BucketCache and there is no default value for this.  So this size of heap also should be configured.&lt;/p&gt;</comment>
                            <comment id="14482599" author="ram_krish" created="Tue, 7 Apr 2015 05:05:00 +0000"  >&lt;p&gt;Leaving it as 0 is also a BC issue?  Not sure. Just asking. Because without overriding that config in hbase-site.xml the cluster would not start, hence asking?&lt;/p&gt;</comment>
                            <comment id="14502337" author="ram_krish" created="Mon, 20 Apr 2015 04:43:08 +0000"  >&lt;p&gt;Just forgot this JIRA. After further discussion it seems the best possible option is to remove the default from the hbase-default.xml and allow the user to config some value based on the internal assumptions on how much we expect the bucketcache size to be.  The minimum expected value could be documented?  As said in earlier comments currently the default value is not 64k but is 64G. (because the code internally multiplies the default 64 K with 1024*1024).&lt;/p&gt;</comment>
                            <comment id="14502499" author="anoop.hbase" created="Mon, 20 Apr 2015 08:29:05 +0000"  >&lt;p&gt;Ya that would be better IMO also.&lt;br/&gt;
64K make  no sense at all and 64G may be large value which can not be give as default.  There is no default BC.  User has to configure it as heap or offheap or file.  So better user only configure this value too. It can be documented clearly in book&lt;/p&gt;</comment>
                            <comment id="14503034" author="stack" created="Mon, 20 Apr 2015 15:32:00 +0000"  >&lt;p&gt;I don&apos;t see this config in an hbase-default.xml Am I looking in wrong place?&lt;/p&gt;</comment>
                            <comment id="14503082" author="ram_krish" created="Mon, 20 Apr 2015 16:01:27 +0000"  >&lt;p&gt;  &amp;lt;property&amp;gt;&lt;br/&gt;
    &amp;lt;name&amp;gt;hbase.bucketcache.size&amp;lt;/name&amp;gt;&lt;br/&gt;
    &amp;lt;value&amp;gt;65536&amp;lt;/value&amp;gt;&lt;br/&gt;
    &amp;lt;description&amp;gt;The size of the buckets for the bucketcache if you only use a single size. &lt;br/&gt;
      Defaults to the default blocksize, which is 64 * 1024.&amp;lt;/description&amp;gt;&lt;br/&gt;
  &amp;lt;/property&amp;gt;&lt;/p&gt;

&lt;p&gt;This is under hbase-common/src/main/resources/hbase-default.xml.&lt;/p&gt;</comment>
                            <comment id="14503321" author="stack" created="Mon, 20 Apr 2015 18:13:29 +0000"  >&lt;p&gt;Duh. Thanks.&lt;/p&gt;

&lt;p&gt;Patch is big improvement over what was there (Looks like we explain it in the book but failed to do it in hbase-default).&lt;/p&gt;

&lt;p&gt;So, you fellows suggesting that rather than supply a &apos;0&apos; as the patch does, just supply nothing?  Or you saying remove this config? If remove it, why not remove all to do w/ bucketcache since all but one value are unset (hbase.bucketcache.sizes description should list default values too?)&lt;/p&gt;</comment>
                            <comment id="14504319" author="ram_krish" created="Tue, 21 Apr 2015 04:47:34 +0000"  >&lt;blockquote&gt;&lt;p&gt;Looks like we explain it in the book but failed to do it in hbase-default&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13281&quot; title=&quot;&amp;#39;hbase.bucketcache.size&amp;#39; description in hbase book is not correct&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13281&quot;&gt;&lt;del&gt;HBASE-13281&lt;/del&gt;&lt;/a&gt; did it but was  not aware that the default was there in the hbase-default.  Any ways the value is not right seeing the code and its calculation.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;If remove it, why not remove all to do w/ bucketcache since all but one value are unset (hbase.bucketcache.sizes description should list default values too?)&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;+1 on doing this. &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &amp;lt;/property&amp;gt;
    &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;hbase.bucketcache.ioengine&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;&amp;lt;/value&amp;gt;
    &amp;lt;description&amp;gt;Where to store the contents of the bucketcache. One of: onheap, 
      offheap, or file. If a file, set it to file:PATH_TO_FILE. See https:&lt;span class=&quot;code-comment&quot;&gt;//hbase.apache.org/apidocs/org/apache/hadoop/hbase/io/hfile/CacheConfig.html &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; more information.
&lt;/span&gt;    &amp;lt;/description&amp;gt;
  &amp;lt;/property&amp;gt;
&amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;hbase.bucketcache.combinedcache.enabled&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;lt;/value&amp;gt;
    &amp;lt;description&amp;gt;Whether or not the bucketcache is used in league with the LRU 
      on-heap block cache. In &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; mode, indices and blooms are kept in the LRU 
      blockcache and the data blocks are kept in the bucketcache.&amp;lt;/description&amp;gt;
  &amp;lt;/property&amp;gt;
  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;hbase.bucketcache.size&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;65536&amp;lt;/value&amp;gt;
    &amp;lt;description&amp;gt;The size of the buckets &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the bucketcache &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; you only use a single size. 
      Defaults to the &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; blocksize, which is 64 * 1024.&amp;lt;/description&amp;gt;
  &amp;lt;/property&amp;gt;
  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;hbase.bucketcache.sizes&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;&amp;lt;/value&amp;gt;
    &amp;lt;description&amp;gt;A comma-separated list of sizes &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; buckets &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the bucketcache 
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; you use multiple sizes. Should be a list of block sizes in order from smallest 
      to largest. The sizes you use will depend on your data access patterns.&amp;lt;/description&amp;gt;
  &amp;lt;/property&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Currenly even hbase.bucketcache.sizes are not set.  We can just describe the default value.&lt;/p&gt;</comment>
                            <comment id="14528008" author="ram_krish" created="Tue, 5 May 2015 06:19:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sreenivasulu&quot; class=&quot;user-hover&quot; rel=&quot;sreenivasulu&quot;&gt;sreenivasulu&lt;/a&gt; - Are you ready to prepare a patch based on the above comment?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12706952" name="HBASE-13320.patch" size="1508" author="sreenivasulureddy" created="Tue, 24 Mar 2015 17:55:12 +0000"/>
                            <attachment id="12707545" name="HBASE-v2-13320.patch" size="1515" author="sreenivasulureddy" created="Thu, 26 Mar 2015 17:28:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 24 Mar 2015 12:08:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 32 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i279uv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>