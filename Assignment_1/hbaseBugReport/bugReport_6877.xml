<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:40:40 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6877/HBASE-6877.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6877] Coprocessor exec result is incorrect when region is in splitting </title>
                <link>https://issues.apache.org/jira/browse/HBASE-6877</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;When we execute the coprocessor, we will called HTable#getStartKeysInRange first and get the Keys to exec coprocessor,&lt;br/&gt;
if then some regions are split before execCoprocessor RPC, the Keys are something wrong now, and the result we get is not integrated, &lt;/p&gt;

&lt;p&gt;for example:&lt;br/&gt;
parent region is split into daughter region A and daughter region B,&lt;br/&gt;
we executed coprocessor on the parent region, but the result data is only daughter region A or daughter region B&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12608970">HBASE-6877</key>
            <summary>Coprocessor exec result is incorrect when region is in splitting </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="zjushch">chunhui shen</assignee>
                                    <reporter username="zjushch">chunhui shen</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 Sep 2012 06:09:31 +0000</created>
                <updated>Mon, 9 Mar 2015 13:44:48 +0000</updated>
                                            <version>0.94.1</version>
                                                    <component>Coprocessors</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>10</watches>
                                                                <comments>
                            <comment id="13462474" author="zjushch" created="Tue, 25 Sep 2012 06:11:42 +0000"  >&lt;p&gt;There is a test case in the patch to show this bug&lt;/p&gt;</comment>
                            <comment id="13462482" author="apurtell" created="Tue, 25 Sep 2012 06:29:11 +0000"  >&lt;p&gt;Reissuing requests to the other daughter when a split is detected makes sense. Minor issue with the patch is by dropping &quot;actual&quot; in method names and variables, the result seems to read better.&lt;/p&gt;</comment>
                            <comment id="13594453" author="apurtell" created="Wed, 6 Mar 2013 07:13:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt; you said on dev list you are seeing this? Does applying the patch fix it for you? Presumably &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zjushch&quot; class=&quot;user-hover&quot; rel=&quot;zjushch&quot;&gt;chunhui shen&lt;/a&gt; you&apos;ve fixed this locally already?&lt;/p&gt;

&lt;p&gt;We should commit this if people are hitting it. &lt;/p&gt;</comment>
                            <comment id="13594491" author="anoopsamjohn" created="Wed, 6 Mar 2013 08:31:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt; I have not hit with this issue. I was checking with &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6870&quot; title=&quot;HTable#coprocessorExec always scan the whole table &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6870&quot;&gt;&lt;del&gt;HBASE-6870&lt;/del&gt;&lt;/a&gt; and seen this. More over I am checking the coprocessorExe code as part of test failures with Trunk in examples module ( BulkDelete) I will be able to give the reasoning there after some more checking.&lt;/p&gt;</comment>
                            <comment id="13794959" author="asafm" created="Tue, 15 Oct 2013 07:28:27 +0000"  >&lt;p&gt;We ran into the same issue. We had to return the last rowkey was read in the coprocessor, and check if it matched the expected region endKey. During split, it didn&apos;t, so issue another execCoprocessor with new adjusted startKey, endKey. It was definitely a work-around. It makes perfect sense for the execCoprocessor to check it covered the endKey which is defined as inclusive.&lt;br/&gt;
I&apos;m putting my vote here.&lt;/p&gt;</comment>
                            <comment id="14352976" author="ploder" created="Mon, 9 Mar 2015 13:44:48 +0000"  >&lt;p&gt;We ran into exactly the same issue. It doesn&apos;t affect Scans, because they run server-side. It also does not affect Gets, because they issue multiple requests. The faulty code inside the rpc channel of the hbase client resubmits a &lt;b&gt;single&lt;/b&gt; call to a region if the region can not be found anymore on the region server (because it was splitted in this case). However when a region has been splitted a single call to the region server will not suffice, hence this problem. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12546452" name="HBASE-6877.patch" size="14532" author="zjushch" created="Tue, 25 Sep 2012 06:11:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 25 Sep 2012 06:29:11 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>241722</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 40 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02blz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11482</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>