<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:46:39 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-694/HBASE-694.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-694] HStore.rowAtOrBeforeFromMapFile() fails to locate the row if # of mapfiles &gt;= 2</title>
                <link>https://issues.apache.org/jira/browse/HBASE-694</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;After &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-528&quot; title=&quot;table &amp;#39;does not exist&amp;#39; when it does&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-528&quot;&gt;&lt;del&gt;HBASE-528&lt;/del&gt;&lt;/a&gt; committed, a misplaced return statement and } cause &lt;br/&gt;
rowAtOrBeforeFromMapFile() never look into 2nd (and latter) MapFile&lt;br/&gt;
if candidateKeys.firstKey() &amp;lt;= map.finalKey().&lt;/p&gt;</description>
                <environment>&lt;p&gt;Hadoop 0.17.0 release + HBase trunk &lt;/p&gt;</environment>
        <key id="12398398">HBASE-694</key>
            <summary>HStore.rowAtOrBeforeFromMapFile() fails to locate the row if # of mapfiles &gt;= 2</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bryanduxbury">Bryan Duxbury</assignee>
                                    <reporter username="rafan">Rong-En Fan</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Jun 2008 06:30:05 +0000</created>
                <updated>Fri, 22 Aug 2008 21:13:18 +0000</updated>
                            <resolved>Wed, 18 Jun 2008 16:28:47 +0000</resolved>
                                    <version>0.2.0</version>
                                    <fixVersion>0.2.0</fixVersion>
                                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12605508" author="rafan" created="Tue, 17 Jun 2008 06:32:23 +0000"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;add a unit test case for this problem&lt;/li&gt;
	&lt;li&gt;propose a fix for HStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12605509" author="rafan" created="Tue, 17 Jun 2008 06:34:37 +0000"  >&lt;p&gt;patch available&lt;/p&gt;</comment>
                            <comment id="12605632" author="rafan" created="Tue, 17 Jun 2008 15:23:30 +0000"  >&lt;p&gt;This bug will cause client see WrongRegionException if META has &lt;br/&gt;
more than one MapFile. And this can only be solved after the META&lt;br/&gt;
is compacted (so we have only one file).&lt;/p&gt;</comment>
                            <comment id="12605801" author="bryanduxbury" created="Wed, 18 Jun 2008 01:41:28 +0000"  >&lt;p&gt;This is a pretty big issue. If META is flushing often enough, then you&apos;ll get really mixed up results at times. &lt;/p&gt;

&lt;p&gt;I think part of the problem here is that the rowAtOrBeforeFromMapfile method is far too large and unruly. Maybe it should be factored into a few smaller methods?&lt;/p&gt;

&lt;p&gt;I&apos;m going to run the unit tests later tonight and possibly take a crack at the refactoring.&lt;/p&gt;</comment>
                            <comment id="12605971" author="bryanduxbury" created="Wed, 18 Jun 2008 14:45:05 +0000"  >&lt;p&gt;Here&apos;s the patch with a little refactoring in it.&lt;/p&gt;

&lt;p&gt;In general, I like the patch. I think it&apos;s fixing an issue we have. However, when I run the full test suite, I get a few weird errors. TestRegionRebalancing and TestMetaUtils both fail. Are other people seeing this problem when running the test suite?&lt;/p&gt;</comment>
                            <comment id="12605987" author="stack" created="Wed, 18 Jun 2008 15:31:50 +0000"  >&lt;p&gt;Welcome back Bryan.&lt;/p&gt;

&lt;p&gt;TRB is failing pretty consistently.  It needs looking at.  TMU usually passes IIRC.  If you run tests w/o this patch do you have same failures?&lt;/p&gt;</comment>
                            <comment id="12606003" author="bryanduxbury" created="Wed, 18 Jun 2008 16:28:47 +0000"  >&lt;p&gt;I just committed the v2 patch to TRUNK. Thanks Rong-En!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12384217" name="694-v2.patch" size="17422" author="bryanduxbury" created="Wed, 18 Jun 2008 14:45:05 +0000"/>
                            <attachment id="12384107" name="694.diff" size="10420" author="rafan" created="Tue, 17 Jun 2008 06:32:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 18 Jun 2008 01:41:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25340</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 27 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h8vj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98700</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>