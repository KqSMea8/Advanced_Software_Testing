<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:21:52 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-11297/HBASE-11297.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-11297] Remove some synchros in the rpcServer responder</title>
                <link>https://issues.apache.org/jira/browse/HBASE-11297</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;This is on top of another patch that I&apos;m going to put into another jira.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12718410">HBASE-11297</key>
            <summary>Remove some synchros in the rpcServer responder</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="nkeywal">Nicolas Liochon</assignee>
                                    <reporter username="nkeywal">Nicolas Liochon</reporter>
                        <labels>
                    </labels>
                <created>Wed, 4 Jun 2014 16:43:08 +0000</created>
                <updated>Sat, 21 Feb 2015 23:31:36 +0000</updated>
                            <resolved>Mon, 4 Aug 2014 09:46:14 +0000</resolved>
                                    <version>0.99.0</version>
                                    <fixVersion>0.99.0</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>12</watches>
                                                                <comments>
                            <comment id="14017845" author="nkeywal" created="Wed, 4 Jun 2014 16:44:42 +0000"  >&lt;p&gt;v1. Tests are in progress.&lt;/p&gt;</comment>
                            <comment id="14017881" author="apurtell" created="Wed, 4 Jun 2014 17:15:22 +0000"  >&lt;p&gt;Please consider 0.98 also. Or I could do a back port.&lt;/p&gt;</comment>
                            <comment id="14017889" author="apurtell" created="Wed, 4 Jun 2014 17:19:10 +0000"  >&lt;p&gt;Let me try &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11298&quot; title=&quot;Simplification in RpcServer code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11298&quot;&gt;&lt;del&gt;HBASE-11298&lt;/del&gt;&lt;/a&gt; and this under load&lt;/p&gt;</comment>
                            <comment id="14017902" author="stack" created="Wed, 4 Jun 2014 17:27:39 +0000"  >&lt;p&gt;Can you write up high-level what has been changed?  There is code movement and I see the queue now is unsynchronized &amp;#8211; is this going to be safe? &amp;#8211; but what else?  A few high level notes would help us review.  Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nkeywal&quot; class=&quot;user-hover&quot; rel=&quot;nkeywal&quot;&gt;Nicolas Liochon&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14017936" author="nkeywal" created="Wed, 4 Jun 2014 17:58:52 +0000"  >&lt;p&gt;The real changes are only on the doRespond path.&lt;br/&gt;
There are some changes in purge, but the behavior should not change there: the documentation was saying that were discarding the calls, but the implementation was closing the connection. It&apos;s not really safe to do something different anyway: imagine a half-replied call, you can&apos;t discard it.&lt;/p&gt;

&lt;p&gt;for the doRespond, instead of locking when we wanted to add a call to the list, we lock only if we want to write on the channel. We also to a tryLock to return immediately, so the handler does not wait.&lt;/p&gt;

&lt;p&gt;The test are still running here (I&apos;ve done multiple versions, the previous versions were ok, but...). I haven&apos;t yet ran the perf tests. It targets the scenario with multiple clients on the same connection. It&apos;s more or less a first step for having more Responders (depending on the test results). I will do another deep review, but I wanted to show what I was working on.&lt;/p&gt;</comment>
                            <comment id="14018666" author="xieliang007" created="Thu, 5 Jun 2014 10:48:59 +0000"  >&lt;p&gt;will look at the patch, since i observed this &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; (call.connection.responseQueue) 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;hotspot during one of my read-only testing&lt;/p&gt;</comment>
                            <comment id="14025402" author="nkeywal" created="Mon, 9 Jun 2014 17:32:06 +0000"  >&lt;p&gt;Hum, it&apos;s difficult to have something obviously better. The attach patch seems to bring some improvements.  It&apos;s very difficult to test. Some points:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;with the current code, if we stay under the socket buffer size, we just queue on the lock. The responder is not really involved. That&apos;s also why we&apos;re seeing the lock on responseQueue. When the buffer size is reached, then the behavior changes. This depends a lot on the network or client (mis)behavior. The patch changes this.&lt;/li&gt;
	&lt;li&gt;I&apos;ve used  &lt;cite&gt;sudo sysctl net.ipv4.tcp_wmem=&quot;1024 1024 1024&quot;&lt;/cite&gt; to change the buffer size and test the correctness.&lt;/li&gt;
	&lt;li&gt;the performances are very sensitive to warming.&lt;/li&gt;
	&lt;li&gt;I&apos;ve also changed PerformanceEvaluation to share the connection.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I haven&apos;t run all the unit test, I&apos;m going to use hadoop qa for this...&lt;/p&gt;</comment>
                            <comment id="14025407" author="nkeywal" created="Mon, 9 Jun 2014 17:33:18 +0000"  >&lt;p&gt;feedback welcome on v2, so. It includes &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11298&quot; title=&quot;Simplification in RpcServer code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11298&quot;&gt;&lt;del&gt;HBASE-11298&lt;/del&gt;&lt;/a&gt;, I will do another version once &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11298&quot; title=&quot;Simplification in RpcServer code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11298&quot;&gt;&lt;del&gt;HBASE-11298&lt;/del&gt;&lt;/a&gt; is committed (I will do that tomorrow).&lt;/p&gt;</comment>
                            <comment id="14025456" author="apurtell" created="Mon, 9 Jun 2014 18:00:31 +0000"  >&lt;p&gt;If you can and are willing to put up 0.98 patches along with trunk versions, I can drop modified server jars into the testbed I have set up for 0.98 perf tests.&lt;/p&gt;</comment>
                            <comment id="14025503" author="nkeywal" created="Mon, 9 Jun 2014 18:31:42 +0000"  >&lt;p&gt;Thanks a lot Andrew. I&apos;m doing the patch.&lt;/p&gt;</comment>
                            <comment id="14025518" author="nkeywal" created="Mon, 9 Jun 2014 18:44:00 +0000"  >&lt;p&gt;Here it is. Basic tests seems to say it&apos;s ok (small tests + TestHCM + random mediums).&lt;/p&gt;</comment>
                            <comment id="14025582" author="hadoopqa" created="Mon, 9 Jun 2014 19:14:37 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12649416/11297.v2.v98.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12649416/11297.v2.v98.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12649416&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9727//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9727//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14026199" author="xieliang007" created="Tue, 10 Jun 2014 07:19:48 +0000"  >&lt;p&gt;yeh, confirmed no obvious benefit from another type testing.&lt;br/&gt;
In my previous testing which observed this doRespond hotspot, i employed single YCSB process with 64 threads. and saw lots of thread blocked at doRespond&lt;br/&gt;
then i reran with 64 YCSB process with 1 thread, those blocking had gone away, but still no obvious throughput improvement be found.&lt;/p&gt;</comment>
                            <comment id="14026209" author="nkeywal" created="Tue, 10 Jun 2014 07:31:12 +0000"  >&lt;p&gt;Thanks Liang. What was your test exactly? 64 YCSB clients sharing a single connection?&lt;/p&gt;</comment>
                            <comment id="14026217" author="xieliang007" created="Tue, 10 Jun 2014 07:46:19 +0000"  >&lt;p&gt;no sharing.  i just want to see w/o that doRespond hotspot(it was confirm also from the thread dumps that no thread waiting on doRespond()), is there any throughput improvement or not&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14026223" author="nkeywal" created="Tue, 10 Jun 2014 07:54:00 +0000"  >&lt;p&gt;If the network is the bottleneck, we&apos;re not going to be much faster &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. However, we&apos;re freeing the handlers sooner w/ this patch so it can help with some workloads. I&apos;m going to do a try w/o the writes in the handlers at all. Previously it was slower, but I improved the code around the nio stuff, so maybe we&apos;re better now.&lt;/p&gt;</comment>
                            <comment id="14027364" author="apurtell" created="Wed, 11 Jun 2014 03:21:46 +0000"  >&lt;p&gt;Thanks for the 98 patch. I am out of the office today and tomorrow, back Thursday, will run the usual YCSB tests for 98 with the patch applied then.&lt;/p&gt;</comment>
                            <comment id="14038711" author="nkeywal" created="Fri, 20 Jun 2014 11:38:42 +0000"  >&lt;p&gt;I&apos;m nearly ready to commit the v3. It includes &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11298&quot; title=&quot;Simplification in RpcServer code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11298&quot;&gt;&lt;del&gt;HBASE-11298&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
I&apos;ve done very little changes vs. v2, I will be running some performance tests today to validate them (medium unit tests ran ok already).&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andrew.purtell%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;andrew.purtell@gmail.com&quot;&gt;Andrew Purtell&lt;/a&gt;, did you have time to try the v2 patch on your cluster?&lt;/p&gt;</comment>
                            <comment id="14039019" author="apurtell" created="Fri, 20 Jun 2014 16:52:05 +0000"  >&lt;blockquote&gt;&lt;p&gt;Andrew Purtell, did you have time to try the v2 patch on your cluster?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;No, I got sidetracked. Starting now.&lt;/p&gt;</comment>
                            <comment id="14039905" author="apurtell" created="Sat, 21 Jun 2014 17:55:55 +0000"  >&lt;p&gt;I&apos;ve collected before and after data for all YCSB workloads using the typical scenario. The patch was stable under 100k ops/sec load. Will process the data a bit later.&lt;/p&gt;</comment>
                            <comment id="14040576" author="nkeywal" created="Mon, 23 Jun 2014 09:42:33 +0000"  >&lt;p&gt;I&apos;ve tested the v3 on master. Still around 3 to 5% faster on my test (read with a single client, 1 to 16 threads), so if Andrew&apos;s tests are ok I will commit this.&lt;/p&gt;</comment>
                            <comment id="14041607" author="apurtell" created="Tue, 24 Jun 2014 02:15:32 +0000"  >&lt;p&gt;I measure a small trade of latency for throughput on most workloads. I piggybacked this on something else so the test was run on 8u20 b17 . I would expect very similar results with 7u60.
&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Workload A&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;0.98.4-SNAPSHOT&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;0.98.4-SNAPSHOT+11297&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;OVERALL RunTime(ms)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100996&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100738&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;OVERALL Throughput(ops/sec)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;99013&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;99267&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;READ Operations&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4999690&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;5000163&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;READ AverageLatency(us)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;651.6789&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;651.97&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;READ MinLatency(us)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;255&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;260&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;READ MaxLatency(us)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;655882&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;651083&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;READ 95thPercentileLatency(ms)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;READ 99thPercentileLatency(ms)	&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;UPDATE Operations&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;5000470&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4999996&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;UPDATE AverageLatency(us)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;32.80&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;27.25&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;UPDATE MinLatency(us)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;UPDATE MaxLatency(us)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;652182&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;687377&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;UPDATE 95thPercentileLatency(ms)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;UPDATE 99thPercentileLatency(ms)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Workload B&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;0.98.4-SNAPSHOT&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;0.98.4-SNAPSHOT+11297&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;OVERALL RunTime(ms)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100536&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100480&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;OVERALL Throughput(ops/sec)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;99466&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;99521&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;READ Operations&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;9499944&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;9499498&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;READ AverageLatency(us)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;599.54&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;653.32&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;READ MinLatency(us)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;259&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;271&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;READ MaxLatency(us)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;710357&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;727001&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;READ 95thPercentileLatency(ms)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;READ 99thPercentileLatency(ms)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;UPDATE Operations&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;500216&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;500661&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;UPDATE AverageLatency(us)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;119.18&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;145.18&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;UPDATE MinLatency(us)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;UPDATE MaxLatency(us)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;664203&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;666895&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;UPDATE 95thPercentileLatency(ms)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;UPDATE 99thPercentileLatency(ms)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Workload C&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;0.98.4-SNAPSHOT&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;0.98.4-SNAPSHOT+11297&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;OVERALL RunTime(ms)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100021&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100021&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;OVERALL Throughput(ops/sec)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;99979&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;99979&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;READ Operations&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000000&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;READ AverageLatency(us)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;543.22&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;550.31&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;READ MinLatency(us)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;256&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;259&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;READ MaxLatency(us)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;735497&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;721836&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;READ 95thPercentileLatency(ms)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;READ 99thPercentileLatency(ms)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Workload D&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;0.98.4-SNAPSHOT&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;0.98.4-SNAPSHOT+11297&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;OVERALL RunTime(ms)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;103916&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;103250&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;OVERALL Throughput(ops/sec)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;96237&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;96854&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;READ Operations&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;9500043&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;9499220&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;READ AverageLatency(us)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;662.044&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;674.25&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;READ MinLatency(us)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;262&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;261&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;READ MaxLatency(us)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1054555&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;742158&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;READ 95thPercentileLatency(ms)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;READ 99thPercentileLatency(ms)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;INSERT Operations&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4999567&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;500780&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;INSERT AverageLatency(us)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;14.38&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;15.61&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;INSERT MinLatency(us)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;INSERT MaxLatency(us)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;492058&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;482944&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;INSERT 95thPercentileLatency(ms)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;INSERT 99thPercentileLatency(ms)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Workload E&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;0.98.4-SNAPSHOT&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;0.98.4-SNAPSHOT+11297&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;OVERALL RunTime(ms)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1302270&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1309841&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;OVERALL Throughput(ops/sec)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;7823&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;7777&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;INSERT Operations&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;499441&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;499751&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;INSERT AverageLatency(us)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;18.06&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;15.86&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;INSERT MinLatency(us)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;INSERT MaxLatency(us)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;544490&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;576905&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;INSERT 95thPercentileLatency(ms)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;INSERT 99thPercentileLatency(ms)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;SCAN Operations&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;9500559&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;9500248&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;SCAN AverageLatency(us)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;21637.25&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;21770.74&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;SCAN MinLatency(us)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;750&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;770&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;SCAN MaxLatency(us)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3134120&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3399749&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;SCAN 95thPercentileLatency(ms)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;124&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;123&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;SCAN 99thPercentileLatency(ms)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;171&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;174&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Workload F&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;0.98.4-SNAPSHOT&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;0.98.4-SNAPSHOT+11297&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;OVERALL RunTime(ms)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;95554&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;94002&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;OVERALL Throughput(ops/sec)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;92446&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;92670&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;READ Operations&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;9333650&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;9333350&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;READ AverageLatency(us)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;701.67&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;716.06&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;READ MinLatency(us)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;264&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;272&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;READ MaxLatency(us)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;773925&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;745086&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;READ 95thPercentileLatency(ms)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;READ 99thPercentileLatency(ms)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;7&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;READ-MODIFY-WRITE Operations&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4666526&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4667535&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;READ-MODIFY-WRITE AverageLatency(us)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;706.91&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;719.93&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;READ-MODIFY-WRITE MinLatency(us)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;268&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;276&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;READ-MODIFY-WRITE MaxLatency(us)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;773996&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;738262&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;READ-MODIFY-WRITE 95thPercentileLatency(ms)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;READ-MODIFY-WRITE 99thPercentileLatency(ms)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;7&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;UPDATE Operations&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4666675&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4667684&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;UPDATE AverageLatency(us)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;23.40&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;17.86&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;UPDATE MinLatency(us)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;UPDATE MaxLatency(us)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1264590&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1261227&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;UPDATE 95thPercentileLatency(ms)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;UPDATE 99thPercentileLatency(ms)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
</comment>
                            <comment id="14042250" author="nkeywal" created="Tue, 24 Jun 2014 15:26:26 +0000"  >&lt;p&gt;Thanks. &lt;br/&gt;
In theory, this patch impacts A, B &amp;amp; D, as YCSB use a single connection per client: so it&apos;s only the multiput that does have multiple threads on the same connections.&lt;/p&gt;

&lt;p&gt;My results (on a different test, on master, and with the v3) are a little bit better. I think the code with this patch is slightly better, so I would like to commit it. Are you guys ok? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=saint.ack%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;saint.ack@gmail.com&quot;&gt;Stack&lt;/a&gt; any opinion?&lt;/p&gt;</comment>
                            <comment id="14042665" author="stack" created="Tue, 24 Jun 2014 20:51:31 +0000"  >&lt;p&gt;Very nice numbers there &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I am good w/ the tradeoff.  I like the patch.&lt;/p&gt;</comment>
                            <comment id="14043223" author="nkeywal" created="Wed, 25 Jun 2014 09:06:40 +0000"  >&lt;p&gt;Committed to master. It includes &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11298&quot; title=&quot;Simplification in RpcServer code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11298&quot;&gt;&lt;del&gt;HBASE-11298&lt;/del&gt;&lt;/a&gt;, already reviewed. I can revert if you want more time to review it.&lt;br/&gt;
For 0.98, there are 3 options:&lt;br/&gt;
 1) commit like it is right now (then it will be in 0.98.4)&lt;br/&gt;
 2) commit but remove the log category change (that was the point in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11298&quot; title=&quot;Simplification in RpcServer code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11298&quot;&gt;&lt;del&gt;HBASE-11298&lt;/del&gt;&lt;/a&gt;).&lt;br/&gt;
 3) commit just after to 0.98.4 to have more time it it breaks anything.&lt;/p&gt;

&lt;p&gt;As it has been tested, I&apos;m good w/ all options, but I let you decide, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;.&lt;br/&gt;
The advantage for 1 or 3 is that the code remain the same on master &amp;amp; 0.98, and so it will be easier to backport other patchs later...&lt;/p&gt;
</comment>
                            <comment id="14043434" author="hudson" created="Wed, 25 Jun 2014 13:26:55 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #5233 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/5233/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/5233/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11297&quot; title=&quot;Remove some synchros in the rpcServer responder&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11297&quot;&gt;&lt;del&gt;HBASE-11297&lt;/del&gt;&lt;/a&gt; Remove some synchros in the rpcServer responder (nkeywal: rev 07a771866f18e8ec532c14f624fa908815bd88c7)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/ipc/TestDelayedRpc.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/ipc/RpcServer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/ipc/CallRunner.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14043606" author="mbertozzi" created="Wed, 25 Jun 2014 15:18:58 +0000"  >&lt;p&gt;This patch is using ConcurrentLinkedDeque, which is java7 only.&lt;br/&gt;
Is trunk supposed to be compiled only with jdk &amp;gt;= 7?&lt;br/&gt;
(same question for 0.98, if we backport it)&lt;/p&gt;</comment>
                            <comment id="14043617" author="nkeywal" created="Wed, 25 Jun 2014 15:25:10 +0000"  >&lt;p&gt;Sorry. I can amend if necessary. I think that we should build the trunk with 1.7 only, but I didn&apos;t want to force it here, and I don&apos;t remember if we concluded anything when we discussed this previously.&lt;/p&gt;

&lt;p&gt;For 0.98 I suppose that we can&apos;t change this now...&lt;/p&gt;</comment>
                            <comment id="14043652" author="apurtell" created="Wed, 25 Jun 2014 16:02:39 +0000"  >&lt;p&gt;Although ConcurrentLinkedDeque does not use any Unsafe methods not available in the 6 runtime, we cannot clone the source from the JDK into our distribution for JRE &amp;lt; 7 because OpenJDK is GPL 2.&lt;/p&gt;

&lt;p&gt;Changing the patch to use another data structure invalidates the performance analysis done on this issue.&lt;/p&gt;

&lt;p&gt;Therefore sadly let&apos;s not include this in 0.98. Supporting JDK &amp;gt;= 7 only for trunk sounds reasonable to me. We should discuss it on dev@. Depending on the outcome of that discussion amending trunk may not be necessary.&lt;/p&gt;</comment>
                            <comment id="14043723" author="nkeywal" created="Wed, 25 Jun 2014 16:45:55 +0000"  >&lt;blockquote&gt;&lt;p&gt;We should discuss it on dev@.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Done. Depending on how fast it goes I will revert this patch...&lt;/p&gt;</comment>
                            <comment id="14045699" author="nkeywal" created="Fri, 27 Jun 2014 08:14:19 +0000"  >&lt;blockquote&gt;&lt;p&gt;Changing the patch to use another data structure invalidates the performance analysis done on this issue.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yeah, you&apos;re right. Let&apos;s keep it for 1.0 only then. Thanks a lot for you time, Andrew.&lt;/p&gt;</comment>
                            <comment id="14084483" author="nkeywal" created="Mon, 4 Aug 2014 09:46:14 +0000"  >&lt;p&gt;This was committed a while ago...&lt;/p&gt;</comment>
                            <comment id="14330846" author="enis" created="Sat, 21 Feb 2015 23:31:36 +0000"  >&lt;p&gt;Closing this issue after 0.99.0 release. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12718413">HBASE-11298</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12648348" name="11297.v1.patch" size="10493" author="nkeywal" created="Wed, 4 Jun 2014 16:44:03 +0000"/>
                            <attachment id="12649399" name="11297.v2.patch" size="43037" author="nkeywal" created="Mon, 9 Jun 2014 17:32:25 +0000"/>
                            <attachment id="12649416" name="11297.v2.v98.patch" size="38923" author="nkeywal" created="Mon, 9 Jun 2014 18:43:19 +0000"/>
                            <attachment id="12651655" name="11297.v3.patch" size="44187" author="nkeywal" created="Fri, 20 Jun 2014 11:36:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 4 Jun 2014 17:15:22 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>396609</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1wa5z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>396730</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>