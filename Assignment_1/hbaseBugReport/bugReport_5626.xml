<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:29:30 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5626/HBASE-5626.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5626] Compactions simulator tool for proofing algorithms</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5626</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;A tool to run compaction simulations would be a nice to have.   We could use it to see how well an algo ran under different circumstances loaded w/ different value types with different rates of flushes and splits, etc. &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2462&quot; title=&quot;Review compaction heuristic and move compaction code out so standalone and independently testable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2462&quot;&gt;&lt;del&gt;HBASE-2462&lt;/del&gt;&lt;/a&gt; had one (see in patch).  Or we could try doing it using something like this: &lt;a href=&quot;http://en.wikipedia.org/wiki/Discrete_event_simulation&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://en.wikipedia.org/wiki/Discrete_event_simulation&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12547898">HBASE-5626</key>
            <summary>Compactions simulator tool for proofing algorithms</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="Sreeram">Sreeram Venkatasubramanian</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                            <label>beginner</label>
                    </labels>
                <created>Fri, 23 Mar 2012 22:27:58 +0000</created>
                <updated>Thu, 25 Feb 2016 12:30:49 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                <comments>
                            <comment id="13238838" author="nspiegelberg" created="Mon, 26 Mar 2012 21:11:36 +0000"  >&lt;p&gt;How is this different from the compaction simulation python script?  The unit of measurement should be a flush, since we flush after a certain memstore memory size, regardless of flow rate or KV length.&lt;/p&gt;</comment>
                            <comment id="13238853" author="stack" created="Mon, 26 Mar 2012 21:22:28 +0000"  >&lt;p&gt;Where is the python simulation script?  Is it uploaded anywhere?  (Pardon me if I missed it)&lt;/p&gt;

&lt;p&gt;Simulator needs to also factor in splitting.&lt;/p&gt;</comment>
                            <comment id="13238897" author="nspiegelberg" created="Mon, 26 Mar 2012 22:04:37 +0000"  >&lt;p&gt;Attached the current python script that I use to emulate compactions given different params.&lt;/p&gt;</comment>
                            <comment id="13238907" author="nspiegelberg" created="Mon, 26 Mar 2012 22:16:47 +0000"  >&lt;p&gt;A little more explanation.  &lt;/p&gt;

&lt;p&gt;Basic Concept:&lt;br/&gt;
We wish to model the amount of compaction IO and file dispersion.  The unit of measurement for compactions is a flush.  This is because a flush is always 64MB (or whatever you configure) regardless of other properties about the CF/KV.  Column families might trigger flushes at different intervals, but they usually flush a consistent amount of data.  You can understand the behavior of a compaction algorithm based upon how it behaves over X amount of flushes.  Does this test make a lot of assumptions and simplifications?  Yes!&lt;/p&gt;

&lt;p&gt;Inputs:&lt;br/&gt;
1. ratio = compaction.ratio between files.  (same as the HBase config)&lt;br/&gt;
2. min.files = minimum count of files that must be selected for a compaction to occur (same as HBase config)&lt;br/&gt;
3. duplication = percentage of KVs within a file that are mutations and will be deduped on compaction (0 &amp;lt;= DUPLICATION &amp;lt;= 1)&lt;br/&gt;
4. iterations = number of flushes to simulate&lt;/p&gt;

&lt;p&gt;Output:&lt;br/&gt;
1. The StoreFile dispersion after every flush (and, possibly, compaction triggered by that flush)&lt;br/&gt;
2. The average storefile count over &amp;lt;iterations&amp;gt; flushes&lt;br/&gt;
3. The amount of IO consumed by compactions after those &amp;lt;iterations&amp;gt; flushes.&lt;/p&gt;</comment>
                            <comment id="13238908" author="stack" created="Mon, 26 Mar 2012 22:18:32 +0000"  >&lt;p&gt;Nice. Let me take a looksee...&lt;/p&gt;</comment>
                            <comment id="13562267" author="sershe" created="Fri, 25 Jan 2013 01:48:07 +0000"  >&lt;p&gt;IMHO it may make sense to have it in java... if we could have some sort of pluggability in policy and compactor, which would cause them to not read or write the files but just report what they &quot;read&quot; and &quot;wrote&quot;, we could use normal compaction code without having to keep the script in sync.&lt;/p&gt;</comment>
                            <comment id="13562449" author="stack" created="Fri, 25 Jan 2013 05:51:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sershe&quot; class=&quot;user-hover&quot; rel=&quot;sershe&quot;&gt;Sergey Shelukhin&lt;/a&gt; Sounds good (Could do jython and then you could play in both worlds).  We will need something to run the scenarios; stripe, sigma, tiered, leveled (We have quite the menagerie of compacting algos now...)&lt;/p&gt;</comment>
                            <comment id="14067807" author="nitish" created="Sun, 20 Jul 2014 05:34:17 +0000"  >&lt;p&gt;I am a newbie (student), learning about HBase and want to get started contributing to the project. I have been scanning through the HBase &quot;noob&quot; tag and found this issue interesting to work on. As this issue was last updated on 24/Jan/13 21:51, is the community still interested in this Task? &lt;/p&gt;

&lt;p&gt;I understand the overall concepts of log-structured merge tree and reducing the maximum number of disk seeks needed by compaction. I also understand how HBase has pluggable a compaction component  where we can exploit performance benefits by knowing our data and request patterns in depth.&lt;/p&gt;

&lt;p&gt;What are the relevant packages / source files / API References I should look into for this task? Any general pointers from the community for working on this task will be of great help. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14068019" author="stack" created="Sun, 20 Jul 2014 18:47:25 +0000"  >&lt;p&gt;This would be an excellent item to work on &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nitish&quot; class=&quot;user-hover&quot; rel=&quot;nitish&quot;&gt;Nitish Upreti&lt;/a&gt;.  A means of being able to view write amplification would be sweet and being able to compare compaction algoritims would be great.&lt;/p&gt;

&lt;p&gt;I see another issue filed recently where FB talk of adding metadata to the files we write so more data for analyzing provenance/history.&lt;/p&gt;

&lt;p&gt;The script attached might be a start.&lt;/p&gt;

&lt;p&gt;Folks have used excel spreadsheet functions in the past, etc., looking at compactions.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12547899">HBASE-5627</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12626643">HBASE-7519</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12520022" name="cf_compact.py" size="3268" author="nspiegelberg" created="Mon, 26 Mar 2012 22:04:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 26 Mar 2012 21:11:36 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>232995</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 21 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0htrj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>102084</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>beginner</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>