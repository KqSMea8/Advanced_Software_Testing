<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:56:39 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-8586/HBASE-8586.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-8586] Revisit of hbase-8483, &quot;HConnectionManager can leak ZooKeeper connections when using deleteStaleConnection&quot;</title>
                <link>https://issues.apache.org/jira/browse/HBASE-8586</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;hbase-8483 did not fix testDeleteForZKConnLeak definitively.  Here is a follow on issue.&lt;/p&gt;

&lt;p&gt;Eric Yu has suggested something to try.  Will attach the patch.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12648697">HBASE-8586</key>
            <summary>Revisit of hbase-8483, &quot;HConnectionManager can leak ZooKeeper connections when using deleteStaleConnection&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 May 2013 19:50:04 +0000</created>
                <updated>Mon, 23 Sep 2013 19:22:22 +0000</updated>
                            <resolved>Wed, 19 Jun 2013 04:54:16 +0000</resolved>
                                                    <fixVersion>0.98.0</fixVersion>
                    <fixVersion>0.95.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13663311" author="stack" created="Tue, 21 May 2013 20:01:49 +0000"  >&lt;p&gt;Here is what Eric says:&lt;/p&gt;

&lt;p&gt;&quot;I noticed the zk leak test still runs a little bit slow and fails occasionally. I suspect the test fails because zk isn&#8217;t shutdown fast enough by the build server. Is the build server very busy? I increased the sleep time before checking if zk is closed. I also noticed that there is a 10s MIN_WAIT_DEAD_SERVER in org.apache.hadoop.hbase.client.ServerCallable that overrides smaller sleep times for retry in the client. I changed retry value to 1 (which makes it not retry at all) which prevents the 10s sleep from happening in the loop in the test.&quot;&lt;/p&gt;

&lt;p&gt;Let me commit this and see...&lt;/p&gt;</comment>
                            <comment id="13663314" author="stack" created="Tue, 21 May 2013 20:04:03 +0000"  >&lt;p&gt;Here is the most recent fail: &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4134/testReport/org.apache.hadoop.hbase.client/TestHCM/testDeleteForZKConnLeak/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4134/testReport/org.apache.hadoop.hbase.client/TestHCM/testDeleteForZKConnLeak/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I committed the patch to 0.95 and to 0.98.  Will leave the issue open to see if it fixes things.&lt;/p&gt;</comment>
                            <comment id="13663706" author="hudson" created="Wed, 22 May 2013 03:00:09 +0000"  >&lt;p&gt;Integrated in hbase-0.95 #208 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95/208/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95/208/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8586&quot; title=&quot;Revisit of hbase-8483, &amp;quot;HConnectionManager can leak ZooKeeper connections when using deleteStaleConnection&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8586&quot;&gt;&lt;del&gt;HBASE-8586&lt;/del&gt;&lt;/a&gt; Revisit of hbase-8483, &quot;HConnectionManager can leak ZooKeeper connections when using deleteStaleConnection&quot; (Revision 1484926)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestHCM.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13663774" author="hudson" created="Wed, 22 May 2013 05:00:08 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #4135 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4135/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4135/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8586&quot; title=&quot;Revisit of hbase-8483, &amp;quot;HConnectionManager can leak ZooKeeper connections when using deleteStaleConnection&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8586&quot;&gt;&lt;del&gt;HBASE-8586&lt;/del&gt;&lt;/a&gt; Revisit of hbase-8483, &quot;HConnectionManager can leak ZooKeeper connections when using deleteStaleConnection&quot; (Revision 1484925)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestHCM.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13663825" author="hudson" created="Wed, 22 May 2013 06:10:31 +0000"  >&lt;p&gt;Integrated in hbase-0.95-on-hadoop2 #107 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95-on-hadoop2/107/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95-on-hadoop2/107/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8586&quot; title=&quot;Revisit of hbase-8483, &amp;quot;HConnectionManager can leak ZooKeeper connections when using deleteStaleConnection&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8586&quot;&gt;&lt;del&gt;HBASE-8586&lt;/del&gt;&lt;/a&gt; Revisit of hbase-8483, &quot;HConnectionManager can leak ZooKeeper connections when using deleteStaleConnection&quot; (Revision 1484926)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestHCM.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13663896" author="hudson" created="Wed, 22 May 2013 07:42:13 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #538 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/538/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/538/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8586&quot; title=&quot;Revisit of hbase-8483, &amp;quot;HConnectionManager can leak ZooKeeper connections when using deleteStaleConnection&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8586&quot;&gt;&lt;del&gt;HBASE-8586&lt;/del&gt;&lt;/a&gt; Revisit of hbase-8483, &quot;HConnectionManager can leak ZooKeeper connections when using deleteStaleConnection&quot; (Revision 1484925)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestHCM.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13687609" author="stack" created="Wed, 19 Jun 2013 04:54:16 +0000"  >&lt;p&gt;Resolving.  I&apos;ve not seen this fail in a long time.  Thank you for the patch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ericyu&quot; class=&quot;user-hover&quot; rel=&quot;ericyu&quot;&gt;Eric Yu&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13711541" author="hudson" created="Wed, 17 Jul 2013 19:54:30 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.94-security #213 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/213/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/213/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8969&quot; title=&quot;Backport HBASE-8535+HBASE-8586 TestHCM#testDeleteForZKConnLeak  enhancement to 0.94&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8969&quot;&gt;&lt;del&gt;HBASE-8969&lt;/del&gt;&lt;/a&gt; Backport &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8535&quot; title=&quot;Test for zk leak does not account for unsynchronized access to zk watcher&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8535&quot;&gt;&lt;del&gt;HBASE-8535&lt;/del&gt;&lt;/a&gt;+&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8586&quot; title=&quot;Revisit of hbase-8483, &amp;quot;HConnectionManager can leak ZooKeeper connections when using deleteStaleConnection&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8586&quot;&gt;&lt;del&gt;HBASE-8586&lt;/del&gt;&lt;/a&gt; TestHCM#testDeleteForZKConnLeak enhancement to 0.94 (jxiang: rev 1504215)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/client/TestHCM.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13711603" author="hudson" created="Wed, 17 Jul 2013 20:52:48 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.94 #1059 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/1059/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/1059/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8969&quot; title=&quot;Backport HBASE-8535+HBASE-8586 TestHCM#testDeleteForZKConnLeak  enhancement to 0.94&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8969&quot;&gt;&lt;del&gt;HBASE-8969&lt;/del&gt;&lt;/a&gt; Backport &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8535&quot; title=&quot;Test for zk leak does not account for unsynchronized access to zk watcher&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8535&quot;&gt;&lt;del&gt;HBASE-8535&lt;/del&gt;&lt;/a&gt;+&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8586&quot; title=&quot;Revisit of hbase-8483, &amp;quot;HConnectionManager can leak ZooKeeper connections when using deleteStaleConnection&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8586&quot;&gt;&lt;del&gt;HBASE-8586&lt;/del&gt;&lt;/a&gt; TestHCM#testDeleteForZKConnLeak enhancement to 0.94 (jxiang: rev 1504215)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/client/TestHCM.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12584062" name="8586.txt" size="1272" author="stack" created="Tue, 21 May 2013 20:01:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 22 May 2013 03:00:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>329052</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 22 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1krt3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>329394</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>