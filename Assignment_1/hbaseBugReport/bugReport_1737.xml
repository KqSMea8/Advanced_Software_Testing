<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:55:57 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1737/HBASE-1737.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1737] Regions unbalanced when adding new node</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1737</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;When adding a new RegionServer to a cluster, the new RS will receive some regions but not enough to actually be considered balanced.&lt;/p&gt;

&lt;p&gt;To recreate, just take an RS offline, allow regions to be reassigned, and then bring it back up.&lt;/p&gt;

&lt;p&gt;Master will get itself into a broken, stuck state where it continuously outputs a line like this:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2009-08-03 12:54:57,812 DEBUG org.apache.hadoop.hbase.master.RegionManager: Server dn4,60020,1249329081079 will be unloaded for balance. Server load: 341 avg: 318.0, regions can be moved: 55
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This line is output every 3 seconds and never stops until another RS joins/leaves the cluster.&lt;/p&gt;

&lt;p&gt;Making this a blocker because when your new RS only gets some regions (in my case, about half as many as it should have), then all new regions will be assigned to that RS.  This basically destroys any possibility for good load distribution with new data.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12432090">HBASE-1737</key>
            <summary>Regions unbalanced when adding new node</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="streamy">Jonathan Gray</assignee>
                                    <reporter username="streamy">Jonathan Gray</reporter>
                        <labels>
                    </labels>
                <created>Mon, 3 Aug 2009 21:10:15 +0000</created>
                <updated>Sun, 13 Sep 2009 22:24:53 +0000</updated>
                            <resolved>Tue, 25 Aug 2009 23:18:28 +0000</resolved>
                                    <version>0.20.0</version>
                                    <fixVersion>0.20.0</fixVersion>
                    <fixVersion>0.90.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12738618" author="streamy" created="Mon, 3 Aug 2009 21:35:05 +0000"  >&lt;p&gt;The errant section of code was introduced with &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1017&quot; title=&quot;Region balancing does not bring newly added node within acceptable range&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1017&quot;&gt;&lt;del&gt;HBASE-1017&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12738620" author="streamy" created="Mon, 3 Aug 2009 21:41:23 +0000"  >&lt;p&gt;Fixes small bug in RegionManager.&lt;/p&gt;

&lt;p&gt;When looking at the most loaded server, we check to see if there is another server that is underloaded.  When we determine we should unassign from it (numRegionsToClose = 0) then we determine how many to unassign.  However, we don&apos;t re-set numRegionsToClose to the number determine for reassignment (so it stays at 0, and thus 0 are reassigned).&lt;/p&gt;

&lt;p&gt;Also has a few small formatting changes and an extra variable in log line.&lt;/p&gt;</comment>
                            <comment id="12738621" author="streamy" created="Mon, 3 Aug 2009 21:42:02 +0000"  >&lt;p&gt;Newly added regionserver does not reach the exact level as others, but with this patch all RS load are within slop.&lt;/p&gt;</comment>
                            <comment id="12738624" author="stack" created="Mon, 3 Aug 2009 21:45:40 +0000"  >&lt;p&gt;+1 on patch.&lt;/p&gt;</comment>
                            <comment id="12738627" author="streamy" created="Mon, 3 Aug 2009 21:49:23 +0000"  >&lt;p&gt;Committed.  Thanks for review stack.&lt;/p&gt;</comment>
                            <comment id="12738675" author="stack" created="Mon, 3 Aug 2009 23:22:46 +0000"  >&lt;p&gt;Backported to 0.20 branch.&lt;/p&gt;</comment>
                            <comment id="12747696" author="streamy" created="Tue, 25 Aug 2009 22:41:13 +0000"  >&lt;p&gt;Commit of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1743&quot; title=&quot;[debug tool] Add regionsInTransition list to ClusterStatus detailed output&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1743&quot;&gt;&lt;del&gt;HBASE-1743&lt;/del&gt;&lt;/a&gt; undid this patch, need to reapply.&lt;/p&gt;</comment>
                            <comment id="12747708" author="streamy" created="Tue, 25 Aug 2009 23:18:28 +0000"  >&lt;p&gt;Recommitted to trunk and branch.&lt;/p&gt;

&lt;p&gt;This patch was not included in RC2.  I&apos;m going to -1 RC2 as I consider this a blocker.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12415413" name="HBASE-1737-v1.patch" size="1893" author="streamy" created="Mon, 3 Aug 2009 21:41:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 3 Aug 2009 21:45:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25948</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 17 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hezj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99690</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>