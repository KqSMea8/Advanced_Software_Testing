<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:21:16 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-11223/HBASE-11223.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-11223] Limit the actions number of a call in the batch </title>
                <link>https://issues.apache.org/jira/browse/HBASE-11223</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Huge batch operation will make regionserver crash for GC.&lt;br/&gt;
The extreme code like this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; List&amp;lt;Delete&amp;gt; deletes = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;Delete&amp;gt;();
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; rows = 4000000;
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; i = 0; i &amp;lt; rows; ++i) {
      deletes.add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Delete(Bytes.toBytes(i)));
    }
    table.delete(deletes);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We should limit the actions number of a call in the batch. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12715723">HBASE-11223</key>
            <summary>Limit the actions number of a call in the batch </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="liushaohui">Liu Shaohui</assignee>
                                    <reporter username="liushaohui">Liu Shaohui</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 May 2014 11:58:13 +0000</created>
                <updated>Thu, 22 May 2014 10:02:32 +0000</updated>
                                            <version>0.99.0</version>
                                                    <component>Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="14004651" author="nkeywal" created="Wed, 21 May 2014 13:23:43 +0000"  >&lt;p&gt;This should be managed in the server rather than the client: there are other clients around. There is already some code in the server around this category of issue (gc due to request queue, this kind of things).&lt;/p&gt;</comment>
                            <comment id="14004675" author="liushaohui" created="Wed, 21 May 2014 13:47:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nkeywal&quot; class=&quot;user-hover&quot; rel=&quot;nkeywal&quot;&gt;Nicolas Liochon&lt;/a&gt;&lt;br/&gt;
Good advice!&lt;br/&gt;
What about limit the dataLength when reading the request data from the channel in the rpc server?&lt;br/&gt;
Eg, if the dataLength is larger than 2M,  just throw an exception.&lt;/p&gt;</comment>
                            <comment id="14004682" author="nkeywal" created="Wed, 21 May 2014 13:56:55 +0000"  >&lt;blockquote&gt;&lt;p&gt;What about limit the dataLength when reading the request data from the channel in the rpc server?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes, I agree.&lt;/p&gt;

&lt;p&gt;IIRC, there is some code that does that, so may be this code comes too late and the rs crashed already, or this code is broken...&lt;/p&gt;</comment>
                            <comment id="14005561" author="fenghh" created="Thu, 22 May 2014 03:03:09 +0000"  >&lt;blockquote&gt;&lt;p&gt;This should be managed in the server rather than the client: there are other clients around.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Agree that the server rather than the client should handle such case. But even the server handles it, it also sounds reasonable to let the client check-and-reject such huge batch request immediately and prevent transferring it to the server, right?&lt;/p&gt;</comment>
                            <comment id="14005802" author="nkeywal" created="Thu, 22 May 2014 10:02:32 +0000"  >&lt;blockquote&gt;&lt;p&gt;right?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;For sure &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
But as it needs to be done server side anyway; and it&apos;s should remain an extreme case (i.e. a bug in the client code) that we don&apos;t need to optimize, imho there is no much value in doing it client side.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 21 May 2014 13:23:43 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>394008</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 30 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1vuav:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>394147</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>