<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:28:24 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-11974/HBASE-11974.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-11974] When a disabled table is scanned, NotServingRegionException is thrown instead of TableNotEnabledException</title>
                <link>https://issues.apache.org/jira/browse/HBASE-11974</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;When a disabled table is scanned, TableNotEnabledException should be thrown.&lt;br/&gt;
However, currently NotServingRegionException is thrown.&lt;/p&gt;

&lt;p&gt;Thanks to Romil Choksi who discovered this problem.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12741299">HBASE-11974</key>
            <summary>When a disabled table is scanned, NotServingRegionException is thrown instead of TableNotEnabledException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yuzhihong@gmail.com">Ted Yu</assignee>
                                    <reporter username="yuzhihong@gmail.com">Ted Yu</reporter>
                        <labels>
                    </labels>
                <created>Sun, 14 Sep 2014 03:54:12 +0000</created>
                <updated>Sat, 21 Feb 2015 23:41:18 +0000</updated>
                            <resolved>Sun, 21 Sep 2014 22:28:35 +0000</resolved>
                                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>0.99.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                <comments>
                            <comment id="14133069" author="yuzhihong@gmail.com" created="Sun, 14 Sep 2014 03:55:17 +0000"  >&lt;p&gt;Test patch that demonstrates the problem.&lt;/p&gt;</comment>
                            <comment id="14134105" author="yuzhihong@gmail.com" created="Mon, 15 Sep 2014 16:47:56 +0000"  >&lt;p&gt;This bug exists for 0.99+ , not for 0.98&lt;/p&gt;</comment>
                            <comment id="14134409" author="hadoopqa" created="Mon, 15 Sep 2014 20:16:08 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12668833/11974-v1.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12668833/11974-v1.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12668833&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 1 new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 2 zombie test(s): 	at org.apache.camel.test.junit4.CamelTestSupport.doStopCamelContext(CamelTestSupport.java:450)&lt;br/&gt;
	at org.apache.camel.test.junit4.CamelTestSupport.tearDown(CamelTestSupport.java:351)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.TestClientNoCluster.testRegionServerStoppedOnScannerOpen(TestClientNoCluster.java:238)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10896//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10896//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10896//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10896//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10896//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10896//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10896//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10896//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10896//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10896//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10896//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10896//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10896//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10896//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10896//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10896//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10896//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10896//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10896//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10896//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10896//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10896//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14134551" author="octo47" created="Mon, 15 Sep 2014 21:53:32 +0000"  >&lt;p&gt;may be it is better to check table state in RS? org.apache.hadoop.hbase.regionserver.HRegionServer#getRegionByEncodedName(byte[], java.lang.String) is a good to place check (right before NSRE is througn)&lt;/p&gt;</comment>
                            <comment id="14134559" author="yuzhihong@gmail.com" created="Mon, 15 Sep 2014 21:59:09 +0000"  >&lt;p&gt;Current patch is consistent with existing check in relocateRegion().&lt;br/&gt;
Meaning, from client side, if the table is disabled, scan request shouldn&apos;t be sent out.&lt;/p&gt;</comment>
                            <comment id="14134565" author="octo47" created="Mon, 15 Sep 2014 22:02:46 +0000"  >&lt;p&gt;Just thinking that client need to be changed in all places, where table can be disabled during get/scanner/etc, and that will be confusing message thrown.&lt;br/&gt;
For this jira seems that it is okay, I agree.&lt;/p&gt;</comment>
                            <comment id="14134590" author="octo47" created="Mon, 15 Sep 2014 22:19:48 +0000"  >&lt;p&gt;+1, client side check looks good.&lt;/p&gt;</comment>
                            <comment id="14134623" author="enis" created="Mon, 15 Sep 2014 22:41:03 +0000"  >&lt;p&gt;Yes, it seems that we changed the default behavior in 0.99 for relocateRegion while changing meta lookups. However, &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (isTableDisabled(tableName))
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;is a zk RPC which is pretty costly. We do not want to do that for every rpc retry I think. But I do not have a clean solution. It may be ok to keep the 0.98 behaviour for now. &lt;/p&gt;

&lt;p&gt;Howver, in this patch, the zk lookup happens even before a retry. We should only do that if this is a retry. &lt;/p&gt;</comment>
                            <comment id="14134650" author="hadoopqa" created="Mon, 15 Sep 2014 22:57:32 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12668865/11974-v2.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12668865/11974-v2.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12668865&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 1 new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.security.visibility.TestVisibilityLabelsWithSLGStack&lt;br/&gt;
                  org.apache.hadoop.hbase.replication.regionserver.TestRegionReplicaReplicationEndpoint&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestClientOperationInterrupt&lt;br/&gt;
                  org.apache.hadoop.hbase.snapshot.TestFlushSnapshotFromClient&lt;br/&gt;
                  org.apache.hadoop.hbase.security.access.TestCellACLWithMultipleVersions&lt;br/&gt;
                  org.apache.hadoop.hbase.security.access.TestNamespaceCommands&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat2&lt;br/&gt;
                  org.apache.hadoop.hbase.replication.regionserver.TestRegionReplicaReplicationEndpointNoMaster&lt;br/&gt;
                  org.apache.hadoop.hbase.security.access.TestCellACLs&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat&lt;br/&gt;
                  org.apache.hadoop.hbase.security.access.TestAccessController&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 1 zombie test(s): 	at org.apache.hadoop.hbase.client.TestReplicasClient.testGetNoResultNotStaleSleepRegionWithReplica(TestReplicasClient.java:367)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10898//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10898//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10898//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10898//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10898//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10898//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10898//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10898//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10898//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10898//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10898//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10898//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10898//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10898//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10898//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10898//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10898//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10898//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10898//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10898//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10898//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10898//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14134751" author="yuzhihong@gmail.com" created="Tue, 16 Sep 2014 00:33:23 +0000"  >&lt;p&gt;Turns out that changes to HConnectionImplementation.locateRegion() are not easy to manage.&lt;/p&gt;

&lt;p&gt;Patch v3 is less intrusive.&lt;/p&gt;

&lt;p&gt;TestAdmin#testDisableAndEnableTable and TestHFileOutputFormat2#testMRIncrementalLoadWithSplit passed.&lt;/p&gt;</comment>
                            <comment id="14134808" author="hadoopqa" created="Tue, 16 Sep 2014 01:25:48 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12668921/11974-v3.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12668921/11974-v3.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12668921&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 1 new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 1 zombie test(s): 	at org.apache.hadoop.hbase.client.TestClientNoCluster.testRegionServerStoppedOnScannerOpen(TestClientNoCluster.java:238)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10905//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10905//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10905//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10905//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10905//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10905//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10905//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10905//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10905//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10905//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10905//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10905//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10905//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10905//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10905//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10905//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10905//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10905//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10905//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10905//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10905//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10905//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14134837" author="hadoopqa" created="Tue, 16 Sep 2014 02:09:37 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12668938/11974-v4.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12668938/11974-v4.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12668938&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 1 new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.TestClassFinder&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10906//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10906//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10906//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10906//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10906//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10906//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10906//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10906//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10906//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10906//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10906//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10906//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10906//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10906//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10906//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10906//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10906//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10906//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10906//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10906//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10906//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10906//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14134841" author="enis" created="Tue, 16 Sep 2014 02:20:06 +0000"  >&lt;blockquote&gt;&lt;p&gt;may be it is better to check table state in RS? org.apache.hadoop.hbase.regionserver.HRegionServer#getRegionByEncodedName(byte[], java.lang.String) is a good to place check (right before NSRE is througn)&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;We&apos;ve discussed this with Ted offline a bit. It seems that this will not work because of the way our meta works. &lt;/p&gt;

&lt;p&gt;Meta contains regions -&amp;gt; server mapping, and only when the table is first created and not opened yet, the serverName is null. Other times, the server will always point to the current location or the last location if the region is closed. So, if a region X, is opened at serverA, meta will contain regionX -&amp;gt; serverA mapping. If you disable the table, the region will be closed on serverA, but the meta will still keep the same mapping. The client cannot rely on RS to throw the TableNotEnabledException because if serverA is then killed, the client will never get this exception, but instead keep retrying until it runs out of retries. &lt;/p&gt;</comment>
                            <comment id="14134897" author="enis" created="Tue, 16 Sep 2014 03:30:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu&quot; class=&quot;user-hover&quot; rel=&quot;tedyu&quot;&gt;Ted Yu&lt;/a&gt; isTableAvailable() check should still be at the ConnectionManager layer, no? &lt;/p&gt;</comment>
                            <comment id="14134906" author="yuzhihong@gmail.com" created="Tue, 16 Sep 2014 03:39:27 +0000"  >&lt;p&gt;I haven&apos;t found a clean way to do the check in ConnectionManager layer.&lt;/p&gt;

&lt;p&gt;e.g. In TestHFileOutputFormat2#testMRIncrementalLoadWithSplit:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        admin.disableTable(table.getTableName());
...
        util.createMultiRegions(
            util.getConfiguration(), table, FAMILIES[0], newStartKeys);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The createMultiRegions() call doesn&apos;t expect TableNotEnabledException.&lt;/p&gt;</comment>
                            <comment id="14134914" author="yuzhihong@gmail.com" created="Tue, 16 Sep 2014 03:56:22 +0000"  >&lt;p&gt;TestCreateTableHandler#testCreateTableCalledTwiceAndFirstOneInProgress fails in QA run.&lt;br/&gt;
Locally this test passes. I placed a breakpoint in openScanner() on the line where TableNotEnabledException is thrown - it was not hit during the test run.&lt;/p&gt;</comment>
                            <comment id="14134922" author="yuzhihong@gmail.com" created="Tue, 16 Sep 2014 04:13:28 +0000"  >&lt;p&gt;TestAccessController and TestEnforcingScanLabelGenerator passed locally.&lt;/p&gt;

&lt;p&gt;For TestCellACLWithMultipleVersions, it passed locally and the above breakpoint wasn&apos;t hit.&lt;/p&gt;</comment>
                            <comment id="14134960" author="hadoopqa" created="Tue, 16 Sep 2014 04:57:28 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12668950/11974-v4.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12668950/11974-v4.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12668950&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 1 new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.security.access.TestCellACLWithMultipleVersions&lt;br/&gt;
                  org.apache.hadoop.hbase.security.access.TestAccessController&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestMultiParallel&lt;br/&gt;
                  org.apache.hadoop.hbase.security.visibility.TestEnforcingScanLabelGenerator&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestReplicaWithCluster&lt;br/&gt;
                  org.apache.hadoop.hbase.rest.TestScannersWithLabels&lt;br/&gt;
                  org.apache.hadoop.hbase.master.handler.TestCreateTableHandler&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 1 zombie test(s): 	at org.apache.hadoop.hbase.client.TestReplicasClient.testScanWithReplicas(TestReplicasClient.java:531)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10907//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10907//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10907//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10907//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10907//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10907//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10907//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10907//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10907//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10907//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10907//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10907//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10907//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10907//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10907//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10907//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10907//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10907//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10907//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10907//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10907//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10907//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14135041" author="octo47" created="Tue, 16 Sep 2014 06:28:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; yeah, you are right. and that creates additional load to master (with &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7767&quot; title=&quot;Get rid of ZKTable, and table enable/disable state in ZK &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7767&quot;&gt;&lt;del&gt;HBASE-7767&lt;/del&gt;&lt;/a&gt; master will serve isEnabled requests). Client should do that and may be cache.&lt;/p&gt;</comment>
                            <comment id="14135055" author="enis" created="Tue, 16 Sep 2014 06:39:55 +0000"  >&lt;blockquote&gt;&lt;p&gt;I haven&apos;t found a clean way to do the check in ConnectionManager layer.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;We cannot do it the way in v4 patch. Doing a zk rpc for every scanner open is very costly. &lt;/p&gt;</comment>
                            <comment id="14135152" author="hadoopqa" created="Tue, 16 Sep 2014 08:53:11 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12668993/11974-v5.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12668993/11974-v5.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12668993&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 1 new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.rest.TestScannersWithLabels&lt;br/&gt;
                  org.apache.hadoop.hbase.security.access.TestScanEarlyTermination&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10919//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10919//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10919//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10919//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10919//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10919//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10919//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10919//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10919//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10919//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10919//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10919//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10919//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10919//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10919//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10919//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10919//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10919//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10919//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10919//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10919//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10919//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14135750" author="yuzhihong@gmail.com" created="Tue, 16 Sep 2014 17:13:34 +0000"  >&lt;p&gt;TestScanEarlyTermination failed in trunk build #5511.&lt;br/&gt;
TestScannersWithLabels passes locally with patch.&lt;/p&gt;</comment>
                            <comment id="14135761" author="eclark" created="Tue, 16 Sep 2014 17:24:56 +0000"  >&lt;p&gt;Being able to have master down and still serve requests is very important. I&apos;d rather have a misleading exception than add a single point of failure into the critical path.&lt;/p&gt;</comment>
                            <comment id="14135776" author="yuzhihong@gmail.com" created="Tue, 16 Sep 2014 17:31:41 +0000"  >&lt;p&gt;In patch v5, isTableDisabled() is only called when scanner open encounters NotServingRegionException.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt;:&lt;br/&gt;
Can you clarify if your comment is for patch v5 or for some earlier patch ?&lt;/p&gt;</comment>
                            <comment id="14135787" author="eclark" created="Tue, 16 Sep 2014 17:37:20 +0000"  >&lt;p&gt;That means that a scanner will hang if the master is down.&lt;br/&gt;
Additionally on heavy region movement. The master will get pounded when it&apos;s already under stress.&lt;/p&gt;</comment>
                            <comment id="14136003" author="octo47" created="Tue, 16 Sep 2014 19:14:00 +0000"  >&lt;p&gt;But if scanner fails with NSRE it anyway need to try meta lookup anyway, right? And with current master meta is always collocated. Without master it will not be available anyway. &lt;br/&gt;
Table availability method is relatively lightweight. Not measured it, but it should be very fast.&lt;/p&gt;</comment>
                            <comment id="14136021" author="eclark" created="Tue, 16 Sep 2014 19:19:25 +0000"  >&lt;blockquote&gt;&lt;p&gt;And with current master meta is always collocated.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Thats configurable and probably off for 1. &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Table availability method is relatively lightweight. Not measured it, but it should be very fast.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Either way adding another rpc call just for cleanliness of exception name is not a good trade off imo.&lt;/p&gt;</comment>
                            <comment id="14136130" author="stack" created="Tue, 16 Sep 2014 20:19:51 +0000"  >&lt;blockquote&gt;&lt;p&gt;Either way adding another rpc call just for cleanliness of exception name is not a good trade off imo.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Where is that?  At head of openscanner?&lt;/p&gt;

&lt;p&gt;RS knows about regions, not about tables.  How it ever going to know if &apos;table is disabled&apos;,  not unless it starts doing master-like function or asking master questions to which it relays answers.&lt;/p&gt;</comment>
                            <comment id="14138341" author="yuzhihong@gmail.com" created="Thu, 18 Sep 2014 01:23:10 +0000"  >&lt;p&gt;TestVisibilityLabelsWithCustomVisLabService failed in QA run #10958&lt;br/&gt;
It passed on Linux locally.&lt;/p&gt;</comment>
                            <comment id="14138344" author="hadoopqa" created="Thu, 18 Sep 2014 01:23:54 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12669562/11974-v6.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12669562/11974-v6.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12669562&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 2 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 1 new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.security.visibility.TestVisibilityLabelsWithSLGStack&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 2 zombie test(s): 	at org.apache.olingo.odata2.testutil.server.TestServer.stopServer(TestServer.java:186)&lt;br/&gt;
	at org.apache.olingo.odata2.testutil.fit.AbstractFitTest.after(AbstractFitTest.java:95)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10958//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10958//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10958//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10958//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10958//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10958//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10958//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10958//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10958//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10958//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10958//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10958//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10958//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10958//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10958//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10958//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10958//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10958//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10958//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10958//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10958//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10958//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14139002" author="yuzhihong@gmail.com" created="Thu, 18 Sep 2014 14:39:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt;:&lt;br/&gt;
Can you take a look at patch v6 ?&lt;/p&gt;</comment>
                            <comment id="14139178" author="octo47" created="Thu, 18 Sep 2014 17:06:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yuzhihong%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;yuzhihong@gmail.com&quot;&gt;Ted Yu&lt;/a&gt;, looks like any cache reload will trigger isTableDisabled() RPC call. So on any NSRE client will reload caches and call RPC for isTabelDisabled? Will that generate additional calls to master or zk?&lt;/p&gt;</comment>
                            <comment id="14139194" author="yuzhihong@gmail.com" created="Thu, 18 Sep 2014 17:17:18 +0000"  >&lt;p&gt;Patch v6 is consistent with behavior from 0.98&lt;br/&gt;
Take a look at hbase-client/src/main/java/org/apache/hadoop/hbase/client/RpcRetryingCaller.java around line 121:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        beforeCall();
        callable.prepare(tries != 0); &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; called with &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, check table status on ZK&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;NotServingRegionException would cause reload parameter to become true, leading to call of HConnectionImplementation.relocateRegion()&lt;/p&gt;</comment>
                            <comment id="14139210" author="octo47" created="Thu, 18 Sep 2014 17:30:11 +0000"  >&lt;p&gt;Hmm, didn&apos;t look at 0.98, looking at master.&lt;br/&gt;
RpcRetryingCallable#callWithRetries on failure will call prepare(true).&lt;br/&gt;
prepare() calls in general will call RpcRetryingCallerWithReadReplicas#getRegionLocations. Old version used to scan only meta region for new region location. But patched version will scan meta &lt;em&gt;and&lt;/em&gt; issue isTableDisable RPC. That what about I asked, is it desirable to have an additional call?&lt;/p&gt;</comment>
                            <comment id="14139226" author="yuzhihong@gmail.com" created="Thu, 18 Sep 2014 17:37:50 +0000"  >&lt;p&gt;Throwing NotServingRegionException to client for disabled table is a regression.&lt;br/&gt;
NotServingRegionException doesn&apos;t extend DoNotRetryIOException. So client would likely retry, without the fix.&lt;br/&gt;
At some point, client may issue isTableDisable call and stop retrying.&lt;/p&gt;

&lt;p&gt;The proposed fix doesn&apos;t add extra RPC compared with 0.98&lt;/p&gt;</comment>
                            <comment id="14139261" author="eclark" created="Thu, 18 Sep 2014 17:59:38 +0000"  >&lt;p&gt;An rpc to master for NSRE isn&apos;t something that&apos;s a good trade off. Master shouldn&apos;t be on the read path at all.&lt;/p&gt;</comment>
                            <comment id="14139265" author="yuzhihong@gmail.com" created="Thu, 18 Sep 2014 18:04:41 +0000"  >&lt;p&gt;Looks like &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7767&quot; title=&quot;Get rid of ZKTable, and table enable/disable state in ZK &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7767&quot;&gt;&lt;del&gt;HBASE-7767&lt;/del&gt;&lt;/a&gt; is related to this aspect: previously isTableDisable went to zk.&lt;/p&gt;</comment>
                            <comment id="14139267" author="octo47" created="Thu, 18 Sep 2014 18:06:50 +0000"  >&lt;p&gt;Ted, just to clarify:&lt;br/&gt;
before this patch client didn&apos;t call isTableEnabled, just reload meta for failed region, right?&lt;br/&gt;
with this patch, NSRE will cause prepare(true), which in turn will force relocateRegion instead of locateRegion, right?&lt;br/&gt;
locateRegion didn&apos;t call isTableEnabled, but relocateRegion did. So replacing locateRegion with relocateRegion we introduce additional call to isTableEnabled on any retryable exceptions, right?&lt;br/&gt;
in pre2.0 zk call will be issued, with 2.0 master call will be issued.&lt;/p&gt;</comment>
                            <comment id="14139282" author="yuzhihong@gmail.com" created="Thu, 18 Sep 2014 18:21:02 +0000"  >&lt;blockquote&gt;&lt;p&gt;NSRE will cause prepare(true), which in turn will force relocateRegion instead of locateRegion, right?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes.&lt;/p&gt;

&lt;p&gt;relocateRegion() calls isTableDisabled().&lt;br/&gt;
The rest of description above is correct.&lt;/p&gt;</comment>
                            <comment id="14139312" author="octo47" created="Thu, 18 Sep 2014 18:40:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ted_yu&quot; class=&quot;user-hover&quot; rel=&quot;ted_yu&quot;&gt;Ted Yu&lt;/a&gt;, actually v5 is much better in terms of master/zk load, but it is not good from design point of view, latest patch is more clean and cosine, but issue roc to zk/master on every NSRE. Not sure which one is better. May be there can be a better alternative, for example issue isTableEnabled only once at first retry.&lt;/p&gt;</comment>
                            <comment id="14139332" author="yuzhihong@gmail.com" created="Thu, 18 Sep 2014 18:53:25 +0000"  >&lt;blockquote&gt;&lt;p&gt;issue isTableEnabled only once at first retry.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This implies changing reload from boolean to enum.&lt;/p&gt;</comment>
                            <comment id="14139335" author="octo47" created="Thu, 18 Sep 2014 18:56:17 +0000"  >&lt;p&gt;yes. and even better, let&apos;s make it configurable, do we really need to ensure, that table is disabled.&lt;/p&gt;

&lt;p&gt;so in general patch can be improved:&lt;br/&gt;
1. adding enum (or additional parameter) to prepare() to ensure, that table checked only once&lt;br/&gt;
2. add configuration parameter to minimise master RPC (say let it be general configuration to ensure, that different part of the codebase will try to not issue needless RPC to precious parts of the system, like masters)&lt;/p&gt;</comment>
                            <comment id="14139411" author="yuzhihong@gmail.com" created="Thu, 18 Sep 2014 20:04:32 +0000"  >&lt;blockquote&gt;&lt;p&gt;adding enum (or additional parameter) to prepare()&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Additional parameter may cause confusion for future maintenance.&lt;/p&gt;

&lt;p&gt;We can either add enum or, an int which is the retry count.&lt;/p&gt;</comment>
                            <comment id="14139477" author="stack" created="Thu, 18 Sep 2014 20:40:39 +0000"  >&lt;p&gt;-1 if we are doing extra RPC just to throw better exception.&lt;/p&gt;

&lt;p&gt;-1 until my question is answered: i.e. &quot;RS knows about regions, not about tables. How it ever going to know if &apos;table is disabled&apos; ... unless it starts doing master-like function or asking master questions to which it relays answers?&quot;&lt;/p&gt;</comment>
                            <comment id="14139507" author="octo47" created="Thu, 18 Sep 2014 21:00:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; there is a rationale to have such RPC call. Suppose that if NSRE is thrown of disabled table clients retry 6 times to get region, which will never exists (until table will be eventually enabled). So there definitely should be some way to know, that table will never be available and we should not retry. But I have only one idea to how do it better (from my point of view). Only if we move that checks into region server. Region server can have a short lived cache (say for 1 second) which effectively limit number of requests to reasonable numbers.&lt;/p&gt;</comment>
                            <comment id="14139508" author="yuzhihong@gmail.com" created="Thu, 18 Sep 2014 21:00:52 +0000"  >&lt;blockquote&gt;&lt;p&gt;RS knows about regions, not about tables. How it ever going to know if &apos;table is disabled&apos;, not unless it starts doing master-like function or asking master questions to which it relays answers.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;None of the patches places the check on region server. Region server still deals with regions.&lt;br/&gt;
The check is done client side.&lt;/p&gt;

&lt;p&gt;The above discussion is to reduce the impact of the extra RPC call.&lt;/p&gt;</comment>
                            <comment id="14139522" author="stack" created="Thu, 18 Sep 2014 21:10:32 +0000"  >&lt;blockquote&gt;&lt;p&gt;Suppose that if NSRE is thrown of disabled table clients retry 6 times to get region...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Why would it retry 6 times?  What is stopping client discovering the table disabled (by asking master or zk)?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Only if we move that checks into region server. Region server can have a short lived cache (say for 1 second) which effectively limit number of requests to reasonable numbers.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If NSRE, client goes back to meta.  Meta can&apos;t be marked in a way which says table is disabled?&lt;/p&gt;</comment>
                            <comment id="14139525" author="octo47" created="Thu, 18 Sep 2014 21:13:58 +0000"  >&lt;blockquote&gt;&lt;p&gt;Why would it retry 6 times? What is stopping client discovering the table disabled (by asking master or zk)?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;That is what last patch exactly does. And I proposed to do that only once (currently last patch does it every retry).&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;If NSRE, client goes back to meta. Meta can&apos;t be marked in a way which says table is disabled?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;That will complicate meta table requests (need to do some coprocessor&apos;s work).&lt;/p&gt;</comment>
                            <comment id="14139558" author="stack" created="Thu, 18 Sep 2014 21:35:25 +0000"  >&lt;p&gt;Buried in here is a call to the master?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
     RegionLocations rl;
     &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
+      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!useCache &amp;amp;&amp;amp; !tableName.equals(TableName.META_TABLE_NAME) &amp;amp;&amp;amp;
+          RegionReplicaUtil.DEFAULT_REPLICA_ID == replicaId) {
+        HRegionLocation location = cConnection.getRegionLocation(tableName, row, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
+        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RegionLocations(location);
+      }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;... because &quot;....locateRegion didn&apos;t call isTableEnabled, but relocateRegion did. So replacing locateRegion with relocateRegion we introduce additional call to isTableEnabled on any retryable exceptions, right?&quot;&lt;/p&gt;

&lt;p&gt;And meta has already been marked that the table is disabled?  We&apos;ll not do more rpcs from the client?&lt;/p&gt;

&lt;p&gt;That sounds right to me.  I undo my -1s.&lt;/p&gt;

&lt;p&gt;What does &apos;any retryable exception&apos; mean?  More than just NSRE?&lt;/p&gt;
</comment>
                            <comment id="14139579" author="octo47" created="Thu, 18 Sep 2014 21:47:09 +0000"  >&lt;blockquote&gt;&lt;p&gt;And meta has already been marked that the table is disabled? We&apos;ll not do more rpcs from the client?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;As I know, regions simply unassigned, so there is not information in meta, that table was disabled. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;What does &apos;any retryable exception&apos; mean? More than just NSRE?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I know about PleaseHoldException and NSRE, may be more of them, not sure.&lt;/p&gt;</comment>
                            <comment id="14139631" author="stack" created="Thu, 18 Sep 2014 22:37:53 +0000"  >&lt;blockquote&gt;&lt;p&gt;As I know, regions simply unassigned, so there is not information in meta, that table was disabled.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I see. So we&apos;ll just NSRE all day long?&lt;/p&gt;</comment>
                            <comment id="14139641" author="stack" created="Thu, 18 Sep 2014 22:45:32 +0000"  >&lt;p&gt;v5 looks hacky:&lt;/p&gt;

&lt;p&gt;+      if (e instanceof NotServingRegionException &amp;amp;&amp;amp;!tn.equals(TableName.META_TABLE_NAME)&lt;br/&gt;
+          &amp;amp;&amp;amp; this.cConnection.isTableDisabled(tn)) {&lt;br/&gt;
+        throw new TableNotEnabledException(tableName.getNameAsString() + &quot; is disabled.&quot;);&lt;/p&gt;

&lt;p&gt;...we&apos;d be doing the master ping on each NSRE but only in ScannerCallable.&lt;/p&gt;

&lt;p&gt;v6 looks cleaner but how does the TableNotEnabledException show up?&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="14139651" author="yuzhihong@gmail.com" created="Thu, 18 Sep 2014 22:52:12 +0000"  >&lt;p&gt;Here is the call stack corresponding to the scanner open request:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ConnectionManager$HConnectionImplementation.relocateRegion(TableName, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[], &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) line: 1076	
ConnectionManager$HConnectionImplementation.relocateRegion(TableName, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[]) line: 1066	
ConnectionManager$HConnectionImplementation.getRegionLocation(TableName, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[], &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;) line: 886	
RpcRetryingCallerWithReadReplicas.getRegionLocations(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, ClusterConnection, TableName, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[]) line: 288	
ScannerCallable.prepare(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;) line: 135	
RpcRetryingCaller&amp;lt;T&amp;gt;.callWithRetries(RetryingCallable&amp;lt;T&amp;gt;, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) line: 110	
ScannerCallableWithReplicas$RetryingRPC.call() line: 294	
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14139700" author="enis" created="Thu, 18 Sep 2014 23:19:32 +0000"  >&lt;p&gt;I think the approach in v6 is right. The way is works is that we have locateRegion, and relocateRegion calls. relocateRegion() just checks the table status, and delegates to locateRegion. getRegionLocation() checks reload argument to decide whether to call locateRegion or relocateRegion. &lt;/p&gt;

&lt;p&gt;I think we should also get rid of this complex logic and various method types. The only thing is that HConnection has been a public class containing all this garbage. It may not be possible to just remove them from branch-1 codeline yet. &lt;/p&gt;

&lt;p&gt;Let me take a stab at whether I can simply a bit. &lt;/p&gt;</comment>
                            <comment id="14139798" author="yuzhihong@gmail.com" created="Fri, 19 Sep 2014 00:48:14 +0000"  >&lt;p&gt;Patch v7 cleans up API a little bit.&lt;br/&gt;
Thanks to Enis for his suggestions.&lt;/p&gt;</comment>
                            <comment id="14139883" author="hadoopqa" created="Fri, 19 Sep 2014 02:25:42 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12669875/11974-v7.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12669875/11974-v7.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12669875&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 2 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 1 zombie test(s): 	at org.apache.hadoop.hbase.client.TestReplicasClient.testSmallScanWithReplicas(TestReplicasClient.java:537)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10982//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10982//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10982//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10982//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10982//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10982//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10982//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10982//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10982//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10982//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10982//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10982//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10982//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10982//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10982//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10982//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10982//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10982//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10982//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10982//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10982//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10982//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14140040" author="octo47" created="Fri, 19 Sep 2014 05:56:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yuzhihong%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;yuzhihong@gmail.com&quot;&gt;Ted Yu&lt;/a&gt; looks good, for me. One thing, is it still ping master on reach reload?&lt;/p&gt;</comment>
                            <comment id="14140766" author="yuzhihong@gmail.com" created="Fri, 19 Sep 2014 15:50:25 +0000"  >&lt;p&gt;There is no difference in this regard between patch v6 and v7.&lt;/p&gt;</comment>
                            <comment id="14141593" author="enis" created="Sat, 20 Sep 2014 00:13:40 +0000"  >&lt;p&gt;Attaching v8 patch, which is very similar to Ted&apos;s v7 patch, but does not contain the changes in RegionServerCallable which was introduced because of hanging test TestReplicasClient. &lt;/p&gt;

&lt;p&gt;The test caused a hang because the test itself shuts down the master, so any relocateRegion() call hangs waiting to do the isTableDisabled() call. v8 patch instead mocks the Connection to not rely on master for isTableDisabled() call. &lt;/p&gt;

&lt;p&gt;I think we can get this patch in which makes the behavior on par with 0.98 in branch-1. In master instead of going to zk, we go to hmaster. The hmaster RPC is already there even w/o this patch (in regular get). If we want to eliminate hmaster dependency, we can either get rid of relocateRegion() call all together (which will cause an rpc to a disable table take very long via retries), or somehow mark the table state in meta. My proposal is we commit this patch, and do a follow up issue for this.  &lt;/p&gt;</comment>
                            <comment id="14141601" author="enis" created="Sat, 20 Sep 2014 00:22:20 +0000"  >&lt;p&gt;I&apos;ve created &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12035&quot; title=&quot;Keep table state in META&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12035&quot;&gt;&lt;del&gt;HBASE-12035&lt;/del&gt;&lt;/a&gt; for any further work in master. Goes hand in hand with &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7767&quot; title=&quot;Get rid of ZKTable, and table enable/disable state in ZK &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7767&quot;&gt;&lt;del&gt;HBASE-7767&lt;/del&gt;&lt;/a&gt; (meaning if we backport &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7767&quot; title=&quot;Get rid of ZKTable, and table enable/disable state in ZK &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7767&quot;&gt;&lt;del&gt;HBASE-7767&lt;/del&gt;&lt;/a&gt;, we should backport that as well). &lt;/p&gt;</comment>
                            <comment id="14141615" author="stack" created="Sat, 20 Sep 2014 00:36:19 +0000"  >&lt;blockquote&gt;&lt;p&gt;we can either get rid of relocateRegion() call all together  (which will cause an rpc to a disable table take very long via retries)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;... this don&apos;t sound too bad.&lt;/p&gt;

&lt;p&gt;Live tables shouldn&apos;t pay penalty to cater to disabled ones.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;....or somehow mark the table state in meta.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yeah I think we need this (commented over in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12035&quot; title=&quot;Keep table state in META&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12035&quot;&gt;&lt;del&gt;HBASE-12035&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;I&apos;d +1 the patch only I have hanging questions...... repeated below:&lt;/p&gt;

&lt;p&gt;&quot;...we&apos;d be doing the master ping on each NSRE but only in ScannerCallable.&quot;&lt;/p&gt;

&lt;p&gt;So we go to master on each NSRE?  And we are doing it for scanners only..... shouldn&apos;t we do it for all calls that want to go to a region?&lt;/p&gt;

&lt;p&gt;&quot;....ow does the TableNotEnabledException show up?&quot;&lt;/p&gt;

&lt;p&gt;When we go to the master?&lt;/p&gt;

</comment>
                            <comment id="14141625" author="yuzhihong@gmail.com" created="Sat, 20 Sep 2014 00:50:30 +0000"  >&lt;blockquote&gt;&lt;p&gt;how does the TableNotEnabledException show up?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;See stack trace below:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ConnectionManager$HConnectionImplementation.relocateRegion(TableName, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[], &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) line: 1076	
ConnectionManager$HConnectionImplementation.relocateRegion(TableName, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[]) line: 1066	
ConnectionManager$HConnectionImplementation.getRegionLocation(TableName, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[], &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;) line: 886	
RpcRetryingCallerWithReadReplicas.getRegionLocations(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, ClusterConnection, TableName, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[]) line: 288	
ScannerCallable.prepare(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;) line: 135	
RpcRetryingCaller&amp;lt;T&amp;gt;.callWithRetries(RetryingCallable&amp;lt;T&amp;gt;, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) line: 110	
ScannerCallableWithReplicas$RetryingRPC.call() line: 294	
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;When ScannerCallable.prepare() is called for a retry, relocateRegion() would throw TableNotEnabledException to client.&lt;/p&gt;</comment>
                            <comment id="14141659" author="enis" created="Sat, 20 Sep 2014 01:34:13 +0000"  >&lt;blockquote&gt;&lt;p&gt;&quot;...we&apos;d be doing the master ping on each NSRE but only in ScannerCallable.&quot;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I think this is a bit more complex than that. We have three kinds of methods in HConnectionImpl: &lt;br/&gt;
 locateRegion    -&amp;gt;  locates region&lt;br/&gt;
 relocateRegion -&amp;gt; calls isTableDisabled(), then either throws TableNotEnabledException, or delegates to locateRegion&lt;br/&gt;
 getRegionLocation -&amp;gt; calls either locateRegion() OR relocateRegion() depending on whether this is a retry or now. &lt;br/&gt;
Given above, it is clear that these API&apos;s are unmaintainable, and hence my comment above (will open another jira for cleanup). As far as I can trace, &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;RegionServerCallable calls getRegionLocation, hence throws TNEE. get/delete/checkAndPut, etc uses RegionServerCallable.&lt;/li&gt;
	&lt;li&gt;AsyncProcess does call locateRegion directly. Hence put does not throw TNEE (I&apos;ve not tested this yet).&lt;/li&gt;
	&lt;li&gt;Scanner callable extends RegionServerCallable in 0.98, hence throws TNEE. In trunk, scanners are using ScannerCallableWithReplicas which calls RpcRetryingCallerWithReadReplicas.getRegionLocations() which in turn calls locateRegions directly. This patch mainly fixes that condition.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Maybe we should also unify all paths to do the zk/master check and throw TNEE? &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;&quot;....ow does the TableNotEnabledException show up?&quot; When we go to the master?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;When we call HConnectionImpl.isTableDisabled() which goes to master or zookeeper to get the table state. If the table state is disabled, then relocateRegions() call throws TableNotEnabledException. &lt;/p&gt;</comment>
                            <comment id="14141671" author="hadoopqa" created="Sat, 20 Sep 2014 01:53:20 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12670153/hbase-11974_v8.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12670153/hbase-11974_v8.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12670153&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 2 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.client.TestMultiParallel&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11000//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11000//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11000//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11000//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11000//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11000//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11000//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11000//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11000//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11000//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11000//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11000//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11000//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11000//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11000//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11000//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11000//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11000//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11000//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11000//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11000//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11000//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14141739" author="stack" created="Sat, 20 Sep 2014 04:19:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ted_yu&quot; class=&quot;user-hover&quot; rel=&quot;ted_yu&quot;&gt;Ted Yu&lt;/a&gt; You have a special talent for answering half the question, only, and then with your answer, you manage to provoke only more questions.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; Thanks for the explaination. Helps.&lt;/p&gt;

&lt;p&gt;+1 on this patch.  It adds workarounds for master branch and in branch-1, after some doctoring, the situation is no worse than it was. Messing with &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7767&quot; title=&quot;Get rid of ZKTable, and table enable/disable state in ZK &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7767&quot;&gt;&lt;del&gt;HBASE-7767&lt;/del&gt;&lt;/a&gt; this afternoon, its not coming back into branch-1 any time soon so till then, we&apos;re not going to be bouncing off master.&lt;/p&gt;

&lt;p&gt;We are ok changing return type on some of these signatures (I think some of these methods are new to 1.0 so probably ok).&lt;/p&gt;

&lt;p&gt;This issue has been enlightening.  This stuff needs fix up.  Its is becoming plain that supporting notions of &apos;table&apos; in client and regionserver cost and we should let go as much as we can.  A bounce to master to check if table is disabled for each NSRE is untenable &amp;#8211; master can&apos;t be in read/write path.... Going to zk as frequently is also untenable but not as bad as being dependent on master. We&apos;ll take it up in master branch.  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jxiang&quot; class=&quot;user-hover&quot; rel=&quot;jxiang&quot;&gt;Jimmy Xiang&lt;/a&gt; you probably have input here boss, especially around marking meta table so clients can tell the table is diabled (or region is offline and client then infers table is offline)&lt;/p&gt;</comment>
                            <comment id="14141744" author="yuzhihong@gmail.com" created="Sat, 20 Sep 2014 04:46:36 +0000"  >&lt;p&gt;I see special talent in other people, too.&lt;/p&gt;</comment>
                            <comment id="14142021" author="yuzhihong@gmail.com" created="Sat, 20 Sep 2014 14:56:16 +0000"  >&lt;p&gt;Patch for branch-1&lt;/p&gt;</comment>
                            <comment id="14142028" author="hadoopqa" created="Sat, 20 Sep 2014 15:05:47 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12670220/11974-1.0-v8.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12670220/11974-1.0-v8.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12670220&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11002//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11002//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14142746" author="enis" created="Sun, 21 Sep 2014 22:19:00 +0000"  >&lt;blockquote&gt;&lt;p&gt;We are ok changing return type on some of these signatures (I think some of these methods are new to 1.0 so probably ok).&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes, those interfaces are ClusterConnection only which is hbase-private. &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;This issue has been enlightening. This stuff needs fix up. Its is becoming plain that supporting notions of &apos;table&apos; in client and regionserver cost and we should let go as much as we can. A bounce to master to check if table is disabled for each NSRE is untenable &#8211; master can&apos;t be in read/write path&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Agreed. The natural place to do this is meta or some other table. I was not very involved with &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7767&quot; title=&quot;Get rid of ZKTable, and table enable/disable state in ZK &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7767&quot;&gt;&lt;del&gt;HBASE-7767&lt;/del&gt;&lt;/a&gt;. I though we would instead do a &quot;tables&quot; table and keep the HTD + Table state there. This would have solved the problem of client lookups. &lt;br/&gt;
Let me commit this, and continue discussion at &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12035&quot; title=&quot;Keep table state in META&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12035&quot;&gt;&lt;del&gt;HBASE-12035&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;</comment>
                            <comment id="14142747" author="stack" created="Sun, 21 Sep 2014 22:27:45 +0000"  >&lt;blockquote&gt;&lt;p&gt;I was not very involved with &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7767&quot; title=&quot;Get rid of ZKTable, and table enable/disable state in ZK &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7767&quot;&gt;&lt;del&gt;HBASE-7767&lt;/del&gt;&lt;/a&gt;. I though we would instead do a &quot;tables&quot; table and keep the HTD + Table state there.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I was. The reasoning seemed grand just extending the existing HTD file in the FS to keep state.  Worth revisiting in light of the findings here.  &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12035&quot; title=&quot;Keep table state in META&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12035&quot;&gt;&lt;del&gt;HBASE-12035&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14142787" author="hudson" created="Mon, 22 Sep 2014 00:19:07 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-TRUNK #5539 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/5539/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/5539/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11974&quot; title=&quot;When a disabled table is scanned, NotServingRegionException is thrown instead of TableNotEnabledException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11974&quot;&gt;&lt;del&gt;HBASE-11974&lt;/del&gt;&lt;/a&gt; When a disabled table is scanned, NotServingRegionException is thrown instead of TableNotEnabledException (Ted Yu) (enis: rev d568aa22b8dd07073b0a454fc0ca15beac638994)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/ConnectionUtils.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/ConnectionManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestReplicasClient.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/ConnectionAdapter.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/RpcRetryingCallerWithReadReplicas.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/ClusterConnection.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14142798" author="hudson" created="Mon, 22 Sep 2014 00:44:34 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.0 #212 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/212/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.0/212/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11974&quot; title=&quot;When a disabled table is scanned, NotServingRegionException is thrown instead of TableNotEnabledException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11974&quot;&gt;&lt;del&gt;HBASE-11974&lt;/del&gt;&lt;/a&gt; When a disabled table is scanned, NotServingRegionException is thrown instead of TableNotEnabledException (Ted Yu) (enis: rev f5305c60390232892983c6990c2fa571a0a2d94a)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/RpcRetryingCallerWithReadReplicas.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/ClusterConnection.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestReplicasClient.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/ConnectionAdapter.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/ConnectionUtils.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/ConnectionManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14142824" author="adityakishore" created="Mon, 22 Sep 2014 01:29:31 +0000"  >&lt;p&gt;Thank you for fixing this. This impacted the C API implementation as well.&lt;/p&gt;</comment>
                            <comment id="14143287" author="octo47" created="Mon, 22 Sep 2014 15:09:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; bq. Agreed. The natural place to do this is meta or some other table. I was not very involved with &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7767&quot; title=&quot;Get rid of ZKTable, and table enable/disable state in ZK &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7767&quot;&gt;&lt;del&gt;HBASE-7767&lt;/del&gt;&lt;/a&gt;. I though we would instead do a &quot;tables&quot; table and keep the HTD + Table state there. This would have solved the problem of client lookups. &lt;/p&gt;

&lt;p&gt;I commented on idea of separate table: &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7767?focusedCommentId=14098407&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14098407&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-7767?focusedCommentId=14098407&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14098407&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7767?focusedCommentId=14098497&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14098497&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-7767?focusedCommentId=14098497&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14098497&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;If we don&apos;t want to hit master, why not proxy this requests via RegionServers with short living caching and throttling? (we can cache more different requests actually and offload master a bit). That is for 1.0 versions.&lt;/p&gt;</comment>
                            <comment id="14331486" author="enis" created="Sat, 21 Feb 2015 23:41:18 +0000"  >&lt;p&gt;Closing this issue after 0.99.1 release.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12742895">HBASE-12035</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12741525">HBASE-11978</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12670220" name="11974-1.0-v8.txt" size="9887" author="yuzhihong@gmail.com" created="Sat, 20 Sep 2014 14:56:16 +0000"/>
                            <attachment id="12668633" name="11974-test.patch" size="937" author="yuzhihong@gmail.com" created="Sun, 14 Sep 2014 03:55:17 +0000"/>
                            <attachment id="12668833" name="11974-v1.txt" size="1757" author="yuzhihong@gmail.com" created="Mon, 15 Sep 2014 19:29:27 +0000"/>
                            <attachment id="12668865" name="11974-v2.txt" size="1916" author="yuzhihong@gmail.com" created="Mon, 15 Sep 2014 21:08:06 +0000"/>
                            <attachment id="12668921" name="11974-v3.txt" size="2193" author="yuzhihong@gmail.com" created="Tue, 16 Sep 2014 00:32:03 +0000"/>
                            <attachment id="12668950" name="11974-v4.txt" size="2259" author="yuzhihong@gmail.com" created="Tue, 16 Sep 2014 02:19:50 +0000"/>
                            <attachment id="12668993" name="11974-v5.txt" size="2611" author="yuzhihong@gmail.com" created="Tue, 16 Sep 2014 07:11:03 +0000"/>
                            <attachment id="12669562" name="11974-v6.txt" size="2139" author="yuzhihong@gmail.com" created="Wed, 17 Sep 2014 23:34:56 +0000"/>
                            <attachment id="12669875" name="11974-v7.txt" size="6496" author="yuzhihong@gmail.com" created="Fri, 19 Sep 2014 00:48:14 +0000"/>
                            <attachment id="12670153" name="hbase-11974_v8.patch" size="11002" author="enis" created="Sat, 20 Sep 2014 00:13:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>10.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 15 Sep 2014 20:16:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i200k7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>