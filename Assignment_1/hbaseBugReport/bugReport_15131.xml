<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 21:00:02 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-15131/HBASE-15131.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-15131] Turn on multi-WAL by default</title>
                <link>https://issues.apache.org/jira/browse/HBASE-15131</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Something to discuss for 2.0 or even 1.3 or 1.4. Should we turn on multi-WAL by default now that it has seen some production use. &lt;/p&gt;

&lt;p&gt;Most of the known issues has been fixed I believe for replication, metrics etc. See &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14457&quot; title=&quot;Umbrella: Improve Multiple WAL for production usage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14457&quot;&gt;&lt;del&gt;HBASE-14457&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;Using bounded provider with default 4 (assuming 12 disks). Should we also look at the number of disks from datanode dirs and auto-configure? &lt;/p&gt;</description>
                <environment></environment>
        <key id="12932598">HBASE-15131</key>
            <summary>Turn on multi-WAL by default</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="enis">Enis Soztutar</reporter>
                        <labels>
                    </labels>
                <created>Wed, 20 Jan 2016 02:24:44 +0000</created>
                <updated>Sat, 18 Jun 2016 00:18:06 +0000</updated>
                                                            <fixVersion>2.0.0</fixVersion>
                    <fixVersion>1.4.0</fixVersion>
                                    <component>wal</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="15107862" author="busbey" created="Wed, 20 Jan 2016 02:41:53 +0000"  >&lt;p&gt;I&apos;d like to see some perf numbers on a shipped version of HBase before we make this the default.  IIRC, the benchmarks from &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14457&quot; title=&quot;Umbrella: Improve Multiple WAL for production usage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14457&quot;&gt;&lt;del&gt;HBASE-14457&lt;/del&gt;&lt;/a&gt; used a custom backport on top of 0.98.&lt;/p&gt;

&lt;p&gt;I have some numbers from a small test cluster, but I&apos;m not sure how useful such a small scale is.&lt;/p&gt;</comment>
                            <comment id="15107918" author="carp84" created="Wed, 20 Jan 2016 03:21:56 +0000"  >&lt;p&gt;Thanks for bring this up &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt;.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Using bounded provider with default 4 (assuming 12 disks). Should we also look at the number of disks from datanode dirs and auto-configure?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;FWIW, in our production cluster (for Alibaba search engine) each machine has 3 SATA-SSD plus 9 SATA disks, and we did a comparison test with storage type of the WALs directory set to ALL_SSD, the result is (in brief):&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;WAL number&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;AverageLatency&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4.4ms&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4.2ms&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4.4ms&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;

&lt;p&gt;So we chose 4 as the best suit&lt;/p&gt;

&lt;p&gt;As for pure SATA environment, we didn&apos;t do the comparison test against WAL number. However, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=busbey&quot; class=&quot;user-hover&quot; rel=&quot;busbey&quot;&gt;Sean Busbey&lt;/a&gt; has done a great work on comparing perf result with different WAL number in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5699&quot; title=&quot;Run with &amp;gt; 1 WAL in HRegionServer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5699&quot;&gt;&lt;del&gt;HBASE-5699&lt;/del&gt;&lt;/a&gt; and I&apos;d like to quote some here:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;INCREASING NUMBER OF PIPELINES&lt;br/&gt;
If you look at each of the &lt;tt&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5699&quot; title=&quot;Run with &amp;gt; 1 WAL in HRegionServer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5699&quot;&gt;&lt;del&gt;HBASE-5699&lt;/del&gt;&lt;/a&gt;_write_iops_multiwal-X_10,50,120,190,260,330,400_threads.tiff&lt;/tt&gt; charts, as we ramp up the number of writers we manage to push more overall activity through the cluster.&lt;br/&gt;
It&apos;s not a linear gain because splitting out the pipelines means that we do more overall syncs since fewer of them get obviated by our sync grouping.&lt;br/&gt;
In this test, expanding from 2 to 4 or 6 pipelines didn&apos;t provide much benefit because at up to 400 concurrent sync-heavy writers we just get to maxing out the number of iops that can be done with 2 pipelines.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Since we are still using hflush and pipeline write, I think Sean&apos;s result still applies.&lt;/p&gt;</comment>
                            <comment id="15107921" author="busbey" created="Wed, 20 Jan 2016 03:26:18 +0000"  >&lt;p&gt;I have some more recent results, both for multiwal settings by themselves and in conjunction with ALL_SSD for hte WALs. Let me try to get them cleaned up an sharable.&lt;/p&gt;</comment>
                            <comment id="15107923" author="carp84" created="Wed, 20 Jan 2016 03:29:04 +0000"  >&lt;blockquote&gt;&lt;p&gt;IIRC, the benchmarks from &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14457&quot; title=&quot;Umbrella: Improve Multiple WAL for production usage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14457&quot;&gt;&lt;del&gt;HBASE-14457&lt;/del&gt;&lt;/a&gt; used a custom backport on top of 0.98.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;You are right &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=busbey&quot; class=&quot;user-hover&quot; rel=&quot;busbey&quot;&gt;Sean Busbey&lt;/a&gt;. But recently we&apos;re preparing to upgrade our cluster to 1.1.2 and have just done a comparison test between 0.98.12 and 1.1.2 with 4 WALs, the result shows a matchable performance, JFYI.&lt;/p&gt;

&lt;p&gt;And &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt; may have more experience of using multiple WAL in facebook. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt; could you share with us? Many thanks &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15107924" author="carp84" created="Wed, 20 Jan 2016 03:31:11 +0000"  >&lt;p&gt;Great, look forward to your numbers sir &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15337282" author="mantonov" created="Sat, 18 Jun 2016 00:18:06 +0000"  >&lt;p&gt;Kicked out of 1.3.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12895145">HBASE-14457</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 20 Jan 2016 02:41:53 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            25 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2rptz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>