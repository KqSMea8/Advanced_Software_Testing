<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:35:10 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6258/HBASE-6258.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6258] Backport some region splitting fixes into 0.90.7</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6258</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Issue tracking backport of some relatively small region splitting fixes into 0.90.7:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4816&quot; title=&quot;Regionserver wouldn&amp;#39;t go down because split happened exactly at same time we issued bulk user region close call on our way out&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4816&quot;&gt;&lt;del&gt;HBASE-4816&lt;/del&gt;&lt;/a&gt;: Regionserver wouldn&apos;t go down because split happened exactly at same time we issued bulk user region close call on our way out - fixed in 0.92&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4881&quot; title=&quot;Unhealthy region is on service caused by rollback of region splitting&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4881&quot;&gt;&lt;del&gt;HBASE-4881&lt;/del&gt;&lt;/a&gt;: Unhealthy region is on service caused by rollback of region splitting - fixed in 0.92&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5189&quot; title=&quot;Add metrics to keep track of region-splits in RS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5189&quot;&gt;&lt;del&gt;HBASE-5189&lt;/del&gt;&lt;/a&gt;: Add metrics to keep track of region-splits in RS - fixed in 0.94&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6158&quot; title=&quot;Data loss if the words &amp;#39;merges&amp;#39; or &amp;#39;splits&amp;#39; are used as Column Family name&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6158&quot;&gt;&lt;del&gt;HBASE-6158&lt;/del&gt;&lt;/a&gt;: Data loss if the words &apos;merges&apos; or &apos;splits&apos; are used as Column Family name - fixed in 0.92 and 0.94&lt;/p&gt;</description>
                <environment></environment>
        <key id="12595612">HBASE-6258</key>
            <summary>Backport some region splitting fixes into 0.90.7</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="dsw">David S. Wang</assignee>
                                    <reporter username="dsw">David S. Wang</reporter>
                        <labels>
                    </labels>
                <created>Fri, 22 Jun 2012 17:28:34 +0000</created>
                <updated>Fri, 29 Jun 2012 17:49:03 +0000</updated>
                            <resolved>Fri, 29 Jun 2012 17:49:03 +0000</resolved>
                                    <version>0.90.6</version>
                                                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13399458" author="dsw" created="Fri, 22 Jun 2012 17:30:16 +0000"  >&lt;p&gt;Patch for the backport into 0.90.&lt;/p&gt;</comment>
                            <comment id="13399460" author="hadoopqa" created="Fri, 22 Jun 2012 17:32:43 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12533075/HBASE-4816%2B4881%2B5189%2B6158.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12533075/HBASE-4816%2B4881%2B5189%2B6158.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2224//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2224//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13399470" author="jdcryans" created="Fri, 22 Jun 2012 17:41:16 +0000"  >&lt;p&gt;Is the inclusion of SplitRequest an error? It&apos;s not being used.&lt;/p&gt;

&lt;p&gt;I wonder what changing the SPLITDIR does in the context of a rolling restart. It seems that by calling SplitTransaction.cleanupAnySplitDetritus on an upgraded server you&apos;d miss the old folder.&lt;/p&gt;

&lt;p&gt;I haven&apos;t followed the 4 jiras closely but I don&apos;t see any unit tests in there and this worries me considering that we want to include this in a branch that has been through many bug fix releases eg it should be really stable.&lt;/p&gt;</comment>
                            <comment id="13399934" author="dsw" created="Sat, 23 Jun 2012 12:38:57 +0000"  >&lt;p&gt;JD,&lt;/p&gt;

&lt;p&gt;Thanks for the timely comments.&lt;/p&gt;

&lt;p&gt;Yes, including SplitRequest is an error on my end.  I will remove it and apply the few changes that went into it accordingly.&lt;/p&gt;

&lt;p&gt;Changing the SPLITDIR is from &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6158&quot; title=&quot;Data loss if the words &amp;#39;merges&amp;#39; or &amp;#39;splits&amp;#39; are used as Column Family name&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6158&quot;&gt;&lt;del&gt;HBASE-6158&lt;/del&gt;&lt;/a&gt;, which went into 0.92.2 and 0.94.1.  I think you bring up a good point, and it sounds like we will have the same problem in those releases as well.  Perhaps the original patch needs to be changed to handle this case for the aforementioned releases.&lt;/p&gt;

&lt;p&gt;I&apos;ll take a look at what region splitting tests we have today and add as necessary.  It looks like we need to add at least a test for when SPLITDIR is changed.&lt;/p&gt;</comment>
                            <comment id="13399946" author="dsw" created="Sat, 23 Jun 2012 13:11:19 +0000"  >&lt;p&gt;I see this comment from &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6158&quot; title=&quot;Data loss if the words &amp;#39;merges&amp;#39; or &amp;#39;splits&amp;#39; are used as Column Family name&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6158&quot;&gt;&lt;del&gt;HBASE-6158&lt;/del&gt;&lt;/a&gt;: &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6158?focusedCommentId=13288890&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13288890&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-6158?focusedCommentId=13288890&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13288890&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&amp;gt; Is this change incompatible for rolling upgrade?&lt;br/&gt;
I don&apos;t think so. These are temporary work folders which get cleaned up routinely and particularly at Region Server (re)start for each region through HRegion.initialize().&lt;br/&gt;
However, a possible side effect could be that &quot;merges&quot; and &quot;splits&quot; folders created by pre-upgrade code (which somehow did not get cleaned up during a shutdown) may continue to exist on the file system as the cleanup code would no longer be looking for them. But this is better fixed in the upgrade scripts by deleting these folders if they are found to be a work folder instead of a CF container folder.&lt;/p&gt;

&lt;p&gt;I&apos;ll continue the conversation over on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6158&quot; title=&quot;Data loss if the words &amp;#39;merges&amp;#39; or &amp;#39;splits&amp;#39; are used as Column Family name&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6158&quot;&gt;&lt;del&gt;HBASE-6158&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13402882" author="jmhsieh" created="Thu, 28 Jun 2012 06:14:08 +0000"  >&lt;p&gt;I think part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4816&quot; title=&quot;Regionserver wouldn&amp;#39;t go down because split happened exactly at same time we issued bulk user region close call on our way out&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4816&quot;&gt;&lt;del&gt;HBASE-4816&lt;/del&gt;&lt;/a&gt; seems low risk (extra closing checks on splitrequest) but the part eventually gets rooted to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1502&quot; title=&quot;Remove need for heartbeats in HBase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1502&quot;&gt;&lt;del&gt;HBASE-1502&lt;/del&gt;&lt;/a&gt; (removing heartbeats) so sounds like it is best to probably avoid.  &lt;/p&gt;

&lt;p&gt;In discussion you mentioned that &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4881&quot; title=&quot;Unhealthy region is on service caused by rollback of region splitting&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4881&quot;&gt;&lt;del&gt;HBASE-4881&lt;/del&gt;&lt;/a&gt; was pointless because the exception signature changed between 0.90 and 0.92 and suggested not including it.  I&apos;d be fine with that.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6158&quot; title=&quot;Data loss if the words &amp;#39;merges&amp;#39; or &amp;#39;splits&amp;#39; are used as Column Family name&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6158&quot;&gt;&lt;del&gt;HBASE-6158&lt;/del&gt;&lt;/a&gt; is embarrassing and a simple fix, but it sounds best to avoid porting the fix to avoid the potential for compatibility problems.  The good news is that this one has an easy work around (don&apos;t use merges or splits as colfams).  Instead can we add a patch to warn if a user tries to create/alter tables to have &apos;merges&apos; or &apos;splits&apos; as column families names?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5189&quot; title=&quot;Add metrics to keep track of region-splits in RS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5189&quot;&gt;&lt;del&gt;HBASE-5189&lt;/del&gt;&lt;/a&gt;: I think metrics are always useful and seem low risk (I don&apos;t think we have a strict contract staying that adding metrics breaks compatibility). Since this is 0.94, ff we backport this to 0.90 we&apos;d need to get into 0.92 as well.&lt;/p&gt;</comment>
                            <comment id="13404064" author="dsw" created="Fri, 29 Jun 2012 17:49:03 +0000"  >&lt;p&gt;There&apos;s not enough value here to do the backports into 0.90.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12533075" name="HBASE-4816+4881+5189+6158.patch" size="12505" author="dsw" created="Fri, 22 Jun 2012 17:30:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 22 Jun 2012 17:32:43 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>245364</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 25 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0682f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34238</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>