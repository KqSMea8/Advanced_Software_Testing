<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:46:44 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-703/HBASE-703.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-703] Invalid regions listed by regionserver.jsp</title>
                <link>https://issues.apache.org/jira/browse/HBASE-703</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The region list displayed by regionserver.jsp contains regions that have ceased existence due to splits.&lt;/p&gt;

&lt;p&gt;Example:&lt;br/&gt;
Region Name	Encoded Name	Start Key	End Key&lt;br/&gt;
...&lt;br/&gt;
maxentriestest,acacdk,1214292085212	732557990 	acacdk	&lt;br/&gt;
maxentriestest,acacdk,1214297936860	1583424516 	acacdk	acqtzk&lt;br/&gt;
maxentriestest,acacdk,1214293855954	1509492302 	acacdk	adhlxw&lt;br/&gt;
maxentriestest,acqtzk,1214297936862	1120286366 	acqtzk	adhlxw&lt;br/&gt;
maxentriestest,adhlxw,1214293855955	400707061 	adhlxw	&lt;br/&gt;
maxentriestest,adhlxw,1214299372674	2060549477 	adhlxw	aelrxo&lt;br/&gt;
maxentriestest,adhlxw,1214297324386	336026175 	adhlxw	afpxzs&lt;br/&gt;
maxentriestest,aelrxo,1214299372674	1352588233 	aelrxo	afpxzs&lt;br/&gt;
maxentriestest,afpxzs,1214297324387	1235754353 	afpxzs	&lt;/p&gt;</description>
                <environment></environment>
        <key id="12398967">HBASE-703</key>
            <summary>Invalid regions listed by regionserver.jsp</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="irubin">Izaak Rubin</assignee>
                                    <reporter username="mbu">Michaela Buergle</reporter>
                        <labels>
                    </labels>
                <created>Wed, 25 Jun 2008 06:40:45 +0000</created>
                <updated>Fri, 22 Aug 2008 21:13:18 +0000</updated>
                            <resolved>Thu, 3 Jul 2008 19:27:25 +0000</resolved>
                                    <version>0.2.0</version>
                                    <fixVersion>0.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12608140" author="stack" created="Wed, 25 Jun 2008 18:26:30 +0000"  >&lt;p&gt;Fix for 0.2&lt;/p&gt;</comment>
                            <comment id="12609063" author="viper799" created="Sun, 29 Jun 2008 06:25:42 +0000"  >&lt;p&gt;I am also seeing this, It also effects the master rebalance Total Load numbers so region server are not balanced correctly.&lt;/p&gt;
</comment>
                            <comment id="12610024" author="stack" created="Wed, 2 Jul 2008 19:54:21 +0000"  >&lt;p&gt;Giving this one to Izaak.&lt;/p&gt;</comment>
                            <comment id="12610297" author="irubin" created="Thu, 3 Jul 2008 17:53:29 +0000"  >&lt;p&gt;I&apos;ve attached a patch (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-703&quot; title=&quot;Invalid regions listed by regionserver.jsp&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-703&quot;&gt;&lt;del&gt;HBASE-703&lt;/del&gt;&lt;/a&gt;.patch) that fixes the problem.&lt;/p&gt;

&lt;p&gt;The problem originated in the HRegion splitting code. Each HRegionServer maintains a collection of its daughter HRegions that are currently online. When an HRegion was split, the parent HRegion would be correctly closed and taken offline; however, the responsible HRegionServer was never informed of the change. regionserver.jsp would display the HRegionServer&apos;s improperly updated collection of online HRegions. The result was that all regions, even those that were split and offline, were displayed in the UI.&lt;/p&gt;

&lt;p&gt;The patch makes changes to HRegionServer.java and CompactSplitThread.java. There is a new method in HRegionServer, removeFromOnlineRegions(region), which removes the HRegion from the collection of online regions. This method is called in CompactSplitThread.split().&lt;/p&gt;

&lt;p&gt;What changed that created this bug? In branch/0.1, there was a notion of both online regions and retiring regions, and there were separate collections for each. There was also a listener structure (RegionUnavailableListener) built into the splitting process that correctly handled the region transitions from online to retiring to their removal. However, since this branch, the splitting code has been simplified such that the listener and &quot;retiring&quot; regions no longer exist. Since the listener was responsible for updating the HRegionServer, its removal created the bug.&lt;/p&gt;


&lt;p&gt;**A note on the patch: all HBase tests passed.  However, in running all tests together, a few tests (including TestMetaUtils) timed out.  I re-ran these tests individually and they passed.&lt;/p&gt;</comment>
                            <comment id="12610325" author="stack" created="Thu, 3 Jul 2008 19:27:25 +0000"  >&lt;p&gt;Committed.  Thanks for the patch Izaak.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12385221" name="HBASE-703.patch" size="2391" author="irubin" created="Thu, 3 Jul 2008 17:54:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 25 Jun 2008 18:26:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25346</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 25 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h8xj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98709</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>