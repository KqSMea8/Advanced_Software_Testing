<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:40:23 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6847/HBASE-6847.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6847] HBASE-6649 broke replication</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6847</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;After running with &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6646&quot; title=&quot;Upgrade to 0.96 section in the book&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6646&quot;&gt;&lt;del&gt;HBASE-6646&lt;/del&gt;&lt;/a&gt; and replication enabled I encountered this:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2012-09-17 20:04:08,111 DEBUG org.apache.hadoop.hbase.replication.regionserver.ReplicationSource: Opening log for replication va1r3s24%2C10304%2C1347911704238.1347911706318 at 78617132
2012-09-17 20:04:08,120 DEBUG org.apache.hadoop.hbase.replication.regionserver.ReplicationSource: Break on IOE: hdfs://va1r5s41:10101/va1-backup/.logs/va1r3s24,10304,1347911704238/va1r3s24%2C10304%2C1347911704238.1347911706318, entryStart=78641557, pos=78771200, end=78771200, edit=84
2012-09-17 20:04:08,120 DEBUG org.apache.hadoop.hbase.replication.regionserver.ReplicationSource: currentNbOperations:164529 and seenEntries:84 and size: 154068
2012-09-17 20:04:08,120 DEBUG org.apache.hadoop.hbase.replication.regionserver.ReplicationSource: Replicating 84
2012-09-17 20:04:08,146 INFO org.apache.hadoop.hbase.replication.regionserver.ReplicationSourceManager: Going to report log #va1r3s24%2C10304%2C1347911704238.1347911706318 for position 78771200 in hdfs://va1r5s41:10101/va1-backup/.logs/va1r3s24,10304,1347911704238/va1r3s24%2C10304%2C1347911704238.1347911706318
2012-09-17 20:04:08,158 INFO org.apache.hadoop.hbase.replication.regionserver.ReplicationSourceManager: Removing 0 logs in the list: []
2012-09-17 20:04:08,158 DEBUG org.apache.hadoop.hbase.replication.regionserver.ReplicationSource: Replicated in total: 93234
2012-09-17 20:04:08,158 DEBUG org.apache.hadoop.hbase.replication.regionserver.ReplicationSource: Opening log for replication va1r3s24%2C10304%2C1347911704238.1347911706318 at 78771200
2012-09-17 20:04:08,163 ERROR org.apache.hadoop.hbase.replication.regionserver.ReplicationSource: Unexpected exception in ReplicationSource, currentPath=hdfs://va1r5s41:10101/va1-backup/.logs/va1r3s24,10304,1347911704238/va1r3s24%2C10304%2C1347911704238.1347911706318
java.lang.IndexOutOfBoundsException
        at java.io.DataInputStream.readFully(DataInputStream.java:175)
        at org.apache.hadoop.io.DataOutputBuffer$Buffer.write(DataOutputBuffer.java:63)
        at org.apache.hadoop.io.DataOutputBuffer.write(DataOutputBuffer.java:101)
        at org.apache.hadoop.io.SequenceFile$Reader.next(SequenceFile.java:2001)
        at org.apache.hadoop.io.SequenceFile$Reader.next(SequenceFile.java:1901)
        at org.apache.hadoop.io.SequenceFile$Reader.next(SequenceFile.java:1947)
        at org.apache.hadoop.hbase.regionserver.wal.SequenceFileLogReader.next(SequenceFileLogReader.java:235)
        at org.apache.hadoop.hbase.replication.regionserver.ReplicationSource.readAllEntriesToReplicateOrNextFile(ReplicationSource.java:394)
        at org.apache.hadoop.hbase.replication.regionserver.ReplicationSource.run(ReplicationSource.java:307)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;There&apos;s something weird at the end of the file and it&apos;s killing replication. We used to just retry.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12608496">HBASE-6847</key>
            <summary>HBASE-6649 broke replication</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="devaraj">Devaraj Das</assignee>
                                    <reporter username="jdcryans">Jean-Daniel Cryans</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 Sep 2012 17:25:56 +0000</created>
                <updated>Sun, 7 Apr 2013 05:02:05 +0000</updated>
                            <resolved>Thu, 20 Sep 2012 19:00:54 +0000</resolved>
                                                    <fixVersion>0.94.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13459773" author="jdcryans" created="Thu, 20 Sep 2012 17:37:17 +0000"  >&lt;p&gt;Attaching the patches that Devaraj posted in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6649&quot; title=&quot;[0.92 UNIT TESTS] TestReplication.queueFailover occasionally fails [Part-1]&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6649&quot;&gt;&lt;del&gt;HBASE-6649&lt;/del&gt;&lt;/a&gt; except that I changed the &quot;position&quot; into &quot;startPosition&quot; since it&apos;s more relevant and it&apos;s not the same name as a class member.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=devaraj&quot; class=&quot;user-hover&quot; rel=&quot;devaraj&quot;&gt;Devaraj Das&lt;/a&gt; I saw you also fixed an issue with the position giving the wrong size for the batch when trying to decide when to stop. Very good!&lt;/p&gt;</comment>
                            <comment id="13459791" author="devaraj" created="Thu, 20 Sep 2012 17:51:00 +0000"  >&lt;p&gt;Thanks, JD for posting the patches (and yes, noticed that other place where position was used and fixed that as well). The variable name change looks good. +1.&lt;/p&gt;</comment>
                            <comment id="13459831" author="v.himanshu" created="Thu, 20 Sep 2012 18:26:49 +0000"  >&lt;p&gt;I wonder about the IndexOutOfBound exception. Is this hlog part of a failover regionserver?&lt;/p&gt;</comment>
                            <comment id="13459836" author="jdcryans" created="Thu, 20 Sep 2012 18:30:19 +0000"  >&lt;blockquote&gt;&lt;p&gt;I wonder about the IndexOutOfBound exception. Is this hlog part of a failover regionserver?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;No.&lt;/p&gt;</comment>
                            <comment id="13459855" author="jdcryans" created="Thu, 20 Sep 2012 19:00:54 +0000"  >&lt;p&gt;Committed to 0.92, 0.94 and trunk. Thanks Devaraj!&lt;/p&gt;</comment>
                            <comment id="13459918" author="hudson" created="Thu, 20 Sep 2012 20:26:26 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3360 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3360/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3360/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6847&quot; title=&quot;HBASE-6649 broke replication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6847&quot;&gt;&lt;del&gt;HBASE-6847&lt;/del&gt;&lt;/a&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6649&quot; title=&quot;[0.92 UNIT TESTS] TestReplication.queueFailover occasionally fails [Part-1]&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6649&quot;&gt;&lt;del&gt;HBASE-6649&lt;/del&gt;&lt;/a&gt; broke replication (Devaraj Das via JD) (Revision 1388161)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
jdcryans : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13459924" author="hudson" created="Thu, 20 Sep 2012 20:31:08 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #476 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/476/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/476/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6847&quot; title=&quot;HBASE-6649 broke replication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6847&quot;&gt;&lt;del&gt;HBASE-6847&lt;/del&gt;&lt;/a&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6649&quot; title=&quot;[0.92 UNIT TESTS] TestReplication.queueFailover occasionally fails [Part-1]&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6649&quot;&gt;&lt;del&gt;HBASE-6649&lt;/del&gt;&lt;/a&gt; broke replication (Devaraj Das via JD) (Revision 1388160)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
jdcryans : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13459978" author="hudson" created="Thu, 20 Sep 2012 21:23:49 +0000"  >&lt;p&gt;Integrated in HBase-0.92 #583 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92/583/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92/583/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6847&quot; title=&quot;HBASE-6649 broke replication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6847&quot;&gt;&lt;del&gt;HBASE-6847&lt;/del&gt;&lt;/a&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6649&quot; title=&quot;[0.92 UNIT TESTS] TestReplication.queueFailover occasionally fails [Part-1]&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6649&quot;&gt;&lt;del&gt;HBASE-6649&lt;/del&gt;&lt;/a&gt; broke replication (Devaraj Das via JD) (Revision 1388159)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
jdcryans : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13460082" author="hudson" created="Fri, 21 Sep 2012 00:11:46 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #184 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/184/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/184/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6847&quot; title=&quot;HBASE-6649 broke replication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6847&quot;&gt;&lt;del&gt;HBASE-6847&lt;/del&gt;&lt;/a&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6649&quot; title=&quot;[0.92 UNIT TESTS] TestReplication.queueFailover occasionally fails [Part-1]&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6649&quot;&gt;&lt;del&gt;HBASE-6649&lt;/del&gt;&lt;/a&gt; broke replication (Devaraj Das via JD) (Revision 1388161)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
jdcryans : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13460756" author="hudson" created="Fri, 21 Sep 2012 19:28:49 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #53 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/53/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/53/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6847&quot; title=&quot;HBASE-6649 broke replication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6847&quot;&gt;&lt;del&gt;HBASE-6847&lt;/del&gt;&lt;/a&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6649&quot; title=&quot;[0.92 UNIT TESTS] TestReplication.queueFailover occasionally fails [Part-1]&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6649&quot;&gt;&lt;del&gt;HBASE-6649&lt;/del&gt;&lt;/a&gt; broke replication (Devaraj Das via JD) (Revision 1388160)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
jdcryans : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13469886" author="hudson" created="Fri, 5 Oct 2012 00:37:47 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security-on-Hadoop-23 #8 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/8/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/8/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6847&quot; title=&quot;HBASE-6649 broke replication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6847&quot;&gt;&lt;del&gt;HBASE-6847&lt;/del&gt;&lt;/a&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6649&quot; title=&quot;[0.92 UNIT TESTS] TestReplication.queueFailover occasionally fails [Part-1]&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6649&quot;&gt;&lt;del&gt;HBASE-6649&lt;/del&gt;&lt;/a&gt; broke replication (Devaraj Das via JD) (Revision 1388160)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
jdcryans : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13469988" author="hudson" created="Fri, 5 Oct 2012 02:59:34 +0000"  >&lt;p&gt;Integrated in HBase-0.92-security #143 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92-security/143/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92-security/143/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6847&quot; title=&quot;HBASE-6649 broke replication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6847&quot;&gt;&lt;del&gt;HBASE-6847&lt;/del&gt;&lt;/a&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6649&quot; title=&quot;[0.92 UNIT TESTS] TestReplication.queueFailover occasionally fails [Part-1]&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6649&quot;&gt;&lt;del&gt;HBASE-6649&lt;/del&gt;&lt;/a&gt; broke replication (Devaraj Das via JD) (Revision 1388159)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
jdcryans : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13624691" author="stack" created="Sun, 7 Apr 2013 05:02:05 +0000"  >&lt;p&gt;Fix up after bulk move overwrote some 0.94.2 fix versions w/ 0.95.0 (Noticed by Lars Hofhansl)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12545934" name="HBASE-6847-0.94.patch" size="2752" author="jdcryans" created="Thu, 20 Sep 2012 17:37:17 +0000"/>
                            <attachment id="12545933" name="HBASE-6847.patch" size="2786" author="jdcryans" created="Thu, 20 Sep 2012 17:37:17 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 20 Sep 2012 17:51:00 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>241986</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 36 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02hnz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12463</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>