<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:41:44 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-174/HBASE-174.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-174] HBASE: Un-openable tablename bug</title>
                <link>https://issues.apache.org/jira/browse/HBASE-174</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;If you create a table whose name is the beginning of an already existing table name, you will not be able to open the table.&lt;/p&gt;

&lt;p&gt;Try:&lt;br/&gt;
1) Create table TESTOne&lt;br/&gt;
2) Create table TEST&lt;br/&gt;
3) Open table TEST&lt;/p&gt;

&lt;p&gt;The reason is that the the META keys augment the table name with &lt;em&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;regionID&amp;#93;&lt;/span&gt;.  So when looking up table TEST, a scanner is opened on the HMemCache Meta region with a start key of &quot;TEST&quot;.  But the HMemcacheScanner backingMaps (TreeMaps) are keyed with the augmented table names where TESTOne&lt;/em&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;regionid1&amp;#93;&lt;/span&gt; comes before TEST_&lt;span class=&quot;error&quot;&gt;&amp;#91;regionid2&amp;#93;&lt;/span&gt; because &apos;O&apos; is lower than _ in the ASCII table.  The backingMaps&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt;.tailMap(firstKey).keySet().iterator() line in HMemCache returns an iterator starting from TestOne_... and not Test_... like it should.  &lt;/p&gt;

&lt;p&gt;The &quot;if(!regionInfo.tableDesc.getName().equals(tableName)) {&quot;  line in HClient will cause the method to stop searching for more regions of that table and the number of found tables for tableName will be 0.  Incidentally that IF statement will report &quot;table found&quot; even when that is not the case.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12373346">HBASE-174</key>
            <summary>HBASE: Un-openable tablename bug</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="james.kennedy">James Kennedy</reporter>
                        <labels>
                    </labels>
                <created>Mon, 9 Jul 2007 23:57:05 +0000</created>
                <updated>Mon, 4 Feb 2008 18:40:58 +0000</updated>
                            <resolved>Sun, 15 Jul 2007 01:20:52 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12511953" author="stack" created="Thu, 12 Jul 2007 03:09:36 +0000"  >&lt;p&gt;Suggested fix for this issue.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-174&quot; title=&quot;HBASE: Un-openable tablename bug&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-174&quot;&gt;&lt;del&gt;HADOOP-1581&lt;/del&gt;&lt;/a&gt; HBASE: Un-openable tablename bug&lt;br/&gt;
Change format of region names from TABLENAME_STARTROW_ENDROW-RANDOMID&lt;br/&gt;
to TABLENAME,STARTROW,ENDROW-RANDOMID. Makes it so lone table name will&lt;br/&gt;
sort before any region of said table.&lt;br/&gt;
M src/contrib/hbase/src/test/hbase-site.xml&lt;br/&gt;
    (hbase.client.retries.number): Removed. Wasdefault value for this property.&lt;br/&gt;
    (hbase.master.meta.thread.rescanfrequency,&lt;br/&gt;
    hbase.server.thread.wakefrequency,&lt;br/&gt;
    hbase.regionserver.handler.count): Add values that are less than&lt;br/&gt;
    default so unit tests are even more responsive (and finished&lt;br/&gt;
    quicker).&lt;br/&gt;
M src/contrib/hbase/src/test/org/apache/hadoop/hbase/TestToString.java&lt;br/&gt;
    Change test so it expects region info name that has &apos;,&apos; delimiters&lt;br/&gt;
    rather than &apos;_&apos; delimiters.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;src/contrib/hbase/src/test/org/apache/hadoop/hbase/TestTable.java&lt;br/&gt;
    Rename testTable as testCreateTable.&lt;br/&gt;
    (testTableNameClash): Test for this issue.&lt;/li&gt;
	&lt;li&gt;src/contrib/hbase/src/java/org/apache/hadoop/hbase/HTableDescriptor.java&lt;br/&gt;
    Comment on table name sorting.&lt;/li&gt;
	&lt;li&gt;src/contrib/hbase/src/java/org/apache/hadoop/hbase/HRegionInfo.java&lt;br/&gt;
    Change format of region names so delimiter is &apos;,&apos; rather than &apos;_&apos;.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12511957" author="stack" created="Thu, 12 Jul 2007 03:32:01 +0000"  >&lt;p&gt;Version 2 adds fix for &quot;Incidentally that IF statement will report &quot;table found&quot; even when that is not the case.&quot;&lt;/p&gt;</comment>
                            <comment id="12512738" author="stack" created="Sat, 14 Jul 2007 20:39:09 +0000"  >&lt;p&gt;Version that will apply after hadoop-1574 commit&lt;/p&gt;</comment>
                            <comment id="12512739" author="stack" created="Sat, 14 Jul 2007 20:39:33 +0000"  >&lt;p&gt;Builds and passes all tests locally.  Trying on hudson.&lt;/p&gt;</comment>
                            <comment id="12512742" author="hadoopqa" created="Sat, 14 Jul 2007 21:39:37 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12361839/hadoop-1581-v3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12361839/hadoop-1581-v3.patch&lt;/a&gt; applied and successfully tested against trunk revision r556335.&lt;/p&gt;

&lt;p&gt;Test results:   &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/414/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/414/testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/414/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/414/console&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12512752" author="stack" created="Sat, 14 Jul 2007 22:37:11 +0000"  >&lt;p&gt;Committed.&lt;/p&gt;</comment>
                            <comment id="12512762" author="jimk" created="Sun, 15 Jul 2007 01:02:25 +0000"  >&lt;p&gt;Rather than extracting the table name from the region name, why not get it from the HRegionInfo since it contains the HTableDescriptor which has the name of the table in it?&lt;/p&gt;

&lt;p&gt;static Text getRegionName(HRegionInfo info) &lt;/p&gt;
{
  return info.getTableDesc().getName();
}

&lt;p&gt;or is it the case that all you have is the region name and not the HRegionInfo?&lt;/p&gt;
</comment>
                            <comment id="12512763" author="stack" created="Sun, 15 Jul 2007 01:08:23 +0000"  >&lt;p&gt;I only have the name (Its used parsing meta table rows).&lt;/p&gt;</comment>
                            <comment id="12512765" author="jimk" created="Sun, 15 Jul 2007 01:20:52 +0000"  >&lt;p&gt;Ok, now that I see the context in which it is being used (comparing a row key to a table name), I understand why you can&apos;t do what I suggested in the previous comment.&lt;/p&gt;

&lt;p&gt;Closing issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12361639" name="hadoop-1581-2.patch" size="7358" author="stack" created="Thu, 12 Jul 2007 03:32:01 +0000"/>
                            <attachment id="12361839" name="hadoop-1581-v3.patch" size="5282" author="stack" created="Sat, 14 Jul 2007 20:39:09 +0000"/>
                            <attachment id="12361637" name="hadoop-1581.patch" size="6699" author="stack" created="Thu, 12 Jul 2007 03:09:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 12 Jul 2007 03:09:36 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24958</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 23 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h53r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98089</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>