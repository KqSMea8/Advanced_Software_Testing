<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:43:12 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-7163/HBASE-7163.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-7163] Low-hanging perf  improvements in HBase client</title>
                <link>https://issues.apache.org/jira/browse/HBASE-7163</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>
&lt;p&gt;1. Change cachedRegionsLocations in HConnectionManager from SoftValueSortedMap to ConcurrentSkipListMap:&lt;br/&gt;
This change saves 15% CPU on the client side per profiling. In using the ConcurrentSkipListMap, we can do:&lt;br/&gt;
tableLocations.floorEntry(row).getValue()&lt;/p&gt;

&lt;p&gt;instead of doing:&lt;br/&gt;
SortedMap&amp;lt;byte[], HRegionLocation&amp;gt; matchingRegions =&lt;br/&gt;
        tableLocations.floorEntry(row).getValue();&lt;br/&gt;
if (!matchingRegions.isEmpty()) &lt;/p&gt;
{
  HRegionLocation possibleRegion = 
    matchingRegions.get(matchingRegions.lastKey());
}


&lt;p&gt;2. NetUtils.getDefaultSocketFactory is very inefficient, use &lt;/p&gt;</description>
                <environment></environment>
        <key id="12616144">HBASE-7163</key>
            <summary>Low-hanging perf  improvements in HBase client</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12613973">HBASE-7067</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="karthik.ranga">Karthik Ranganathan</assignee>
                                    <reporter username="karthik.ranga">Karthik Ranganathan</reporter>
                        <labels>
                    </labels>
                <created>Wed, 14 Nov 2012 23:12:25 +0000</created>
                <updated>Wed, 29 Jun 2016 19:05:11 +0000</updated>
                            <resolved>Wed, 29 Jun 2016 19:05:11 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                <comments>
                            <comment id="13497584" author="yuzhihong@gmail.com" created="Wed, 14 Nov 2012 23:29:33 +0000"  >&lt;p&gt;@Karthik:&lt;br/&gt;
The second snippet contains your proposed change.&lt;br/&gt;
Were you referring to the following code in getCachedLocation() ?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      &lt;span class=&quot;code-comment&quot;&gt;// Cut the cache so that we only get the part that could contain
&lt;/span&gt;      &lt;span class=&quot;code-comment&quot;&gt;// regions that match our key
&lt;/span&gt;      SortedMap&amp;lt;&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[], HRegionLocation&amp;gt; matchingRegions =
        tableLocations.headMap(row);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="13498416" author="karthik.ranga" created="Thu, 15 Nov 2012 22:52:53 +0000"  >&lt;p&gt;@Ted - yes that&apos;s the part, fix has another component to it though. Also, changed this task to add one more perf improvement.&lt;/p&gt;</comment>
                            <comment id="13498466" author="lhofhansl" created="Fri, 16 Nov 2012 00:09:35 +0000"  >&lt;p&gt;Presumably SoftValueSortedMap was used to allow GC&apos;ing cached entries when memory is tight.&lt;br/&gt;
Not that I am a big fan of that, but I just want to point out that we loose this with ConcurrentSkipListMap.&lt;/p&gt;</comment>
                            <comment id="13498501" author="karthik.ranga" created="Fri, 16 Nov 2012 01:07:28 +0000"  >&lt;p&gt;Yes, thanks for explicitly mentioning, forgot to mention that point. The thought was that the overhead of caching all regions would not be too large.&lt;/p&gt;</comment>
                            <comment id="13498635" author="lhofhansl" created="Fri, 16 Nov 2012 06:35:48 +0000"  >&lt;p&gt;Probably right.&lt;br/&gt;
A region name is what 20 bytes, start and stop key in HRegionInfo can be long, let&apos;s say 40, plus region name again and encoded regionname 20 each, plus tablename 20, plus hostname 20. That&apos;s 20+40*2+20*2+20+20 = 180 bytes, let&apos;s round up to 200 bytes.&lt;br/&gt;
(I hope that is roughly right)&lt;br/&gt;
Even with 100k regions that&apos;d only be ~19MB.&lt;/p&gt;</comment>
                            <comment id="13498639" author="stack" created="Fri, 16 Nov 2012 06:42:24 +0000"  >&lt;p&gt;Sounds right &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15355666" author="stack" created="Wed, 29 Jun 2016 19:05:11 +0000"  >&lt;p&gt;Old. Code has changed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 14 Nov 2012 23:29:33 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>257890</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            24 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0kkof:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>118167</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>