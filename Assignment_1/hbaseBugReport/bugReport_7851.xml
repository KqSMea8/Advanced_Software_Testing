<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:49:39 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-7851/HBASE-7851.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-7851] Include the guava classes as a dependency for jobs using mapreduce.TableMapReduceUtil</title>
                <link>https://issues.apache.org/jira/browse/HBASE-7851</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The guava classes go as a dependency for jobs using TableMapReduceUtil from the  org.apache.hadoop.hbase.mapred package but the same doesn&apos;t happen for jobs using the same class from org.apache.hadoop.hbase.mapreduce package. Due to this, tasks of the mapreduce jobs that wants to communicate with a secure cluster fails. The stack trace of the failing tasks:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Error: java.lang.ClassNotFoundException: com.google.common.collect.ImmutableSet&lt;br/&gt;
	at java.net.URLClassLoader$1.run(URLClassLoader.java:202)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at java.net.URLClassLoader.findClass(URLClassLoader.java:190)&lt;br/&gt;
	at java.lang.ClassLoader.loadClass(ClassLoader.java:306)&lt;br/&gt;
	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)&lt;br/&gt;
	at java.lang.ClassLoader.loadClass(ClassLoader.java:247)&lt;br/&gt;
	at org.apache.hadoop.hbase.ipc.SecureServer.&amp;lt;clinit&amp;gt;(SecureServer.java:96)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We just need to add the dependency on the guava classes in the mapreduce.TableMapReduceUtil class.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12632503">HBASE-7851</key>
            <summary>Include the guava classes as a dependency for jobs using mapreduce.TableMapReduceUtil</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="devaraj">Devaraj Das</assignee>
                                    <reporter username="devaraj">Devaraj Das</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Feb 2013 23:32:54 +0000</created>
                <updated>Wed, 3 Apr 2013 05:55:03 +0000</updated>
                            <resolved>Fri, 15 Feb 2013 07:32:28 +0000</resolved>
                                    <version>0.94.4</version>
                                    <fixVersion>0.94.6</fixVersion>
                    <fixVersion>0.95.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="13578806" author="devaraj" created="Thu, 14 Feb 2013 23:34:45 +0000"  >&lt;p&gt;The patch for 0.94. This issue doesn&apos;t affect trunk. &lt;/p&gt;</comment>
                            <comment id="13578814" author="sershe" created="Thu, 14 Feb 2013 23:44:20 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13578822" author="yuzhihong@gmail.com" created="Thu, 14 Feb 2013 23:56:50 +0000"  >&lt;p&gt;+1 from me.&lt;/p&gt;</comment>
                            <comment id="13578902" author="lhofhansl" created="Fri, 15 Feb 2013 02:21:20 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13579012" author="devaraj" created="Fri, 15 Feb 2013 07:32:28 +0000"  >&lt;p&gt;Committed to 0.94.&lt;/p&gt;</comment>
                            <comment id="13579049" author="hudson" created="Fri, 15 Feb 2013 09:06:54 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #843 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/843/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/843/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7851&quot; title=&quot;Include the guava classes as a dependency for jobs using mapreduce.TableMapReduceUtil&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7851&quot;&gt;&lt;del&gt;HBASE-7851&lt;/del&gt;&lt;/a&gt;. Include the guava classes as a dependency for jobs using mapreduce.TableMapReduceUtil (ddas). (Revision 1446468)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
ddas : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13579355" author="stack" created="Fri, 15 Feb 2013 17:47:36 +0000"  >&lt;p&gt;Did we figure what needs guava?  We try to minimize dependencies required by mr and in the past we worked to remove guava as a dependency after it was introduced as a dependency for what turned out to be a non-critical need.  Perhaps we did not eliminate it everywhere or it snuck back in?&lt;/p&gt;</comment>
                            <comment id="13579364" author="devaraj" created="Fri, 15 Feb 2013 18:02:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;, the guava dependency comes from a reference to it from SecureServer.java (look at the stack trace in the jira description). This problem shouldn&apos;t happen on trunk since there is no SecureServer and the RPC client code-path doesn&apos;t reference anything from guava there.&lt;/p&gt;

&lt;p&gt;Now coming back to the point on removing guava as a dependency, I wasn&apos;t aware of it. In theory, the patch could have been written to remove the reference to the guava class in SecureServer.java and instead implement the required functionality using JDK classes... What do you think?&lt;/p&gt;</comment>
                            <comment id="13579371" author="devaraj" created="Fri, 15 Feb 2013 18:10:26 +0000"  >&lt;p&gt;Just a note that the guava dependency was already there in the mapred.TableMapReduceUtil class. This patch just makes the mapreduce.TableMapReduceUtil be in sync with that. I guess if we decide to remove the guava dependency, we should do the same in both places..&lt;/p&gt;</comment>
                            <comment id="13579484" author="stack" created="Fri, 15 Feb 2013 20:28:04 +0000"  >&lt;p&gt;Here is the issue where we stripped back guava: &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3264&quot; title=&quot;Remove unnecessary Guava Dependency&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3264&quot;&gt;&lt;del&gt;HBASE-3264&lt;/del&gt;&lt;/a&gt;  Sounds like it was not comprehensive enough stripping (i.e. missed security).  The notion that we minimize MR dependencies and  that we try to strip guava because its not heavily used comes through in the issue.&lt;/p&gt;</comment>
                            <comment id="13579541" author="ghelmling" created="Fri, 15 Feb 2013 22:07:45 +0000"  >&lt;p&gt;The Guava dependency in SecureServer apparently came in with &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5735&quot; title=&quot;Clearer warning message when connecting a non-secure HBase client to a secure HBase server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5735&quot;&gt;&lt;del&gt;HBASE-5735&lt;/del&gt;&lt;/a&gt;.  Looking around, there are quite a few other dependencies on Guava that might be exposed to clients, though, including in o.a.h.h.util.Bytes, and in KeyValue.  Is it still worth extracting at this point?&lt;/p&gt;</comment>
                            <comment id="13579647" author="lhofhansl" created="Sat, 16 Feb 2013 00:53:09 +0000"  >&lt;p&gt;Hmm... It&apos;s easy enough to express the change in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5735&quot; title=&quot;Clearer warning message when connecting a non-secure HBase client to a secure HBase server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5735&quot;&gt;&lt;del&gt;HBASE-5735&lt;/del&gt;&lt;/a&gt; without using Guava.&lt;br/&gt;
So in this specific case removing that seems to be better approach.&lt;/p&gt;

&lt;p&gt;Or we just do further changes in trunk and leave this be as is in 0.94.&lt;/p&gt;</comment>
                            <comment id="13579659" author="devaraj" created="Sat, 16 Feb 2013 01:13:40 +0000"  >&lt;p&gt;This change doesn&apos;t impact trunk. In trunk, this situation doesn&apos;t arise. I think we should leave this issue as it is for 0.94. As Gary pointed out, there are other things to take care of if we remove guava dependency.&lt;/p&gt;</comment>
                            <comment id="13579661" author="stack" created="Sat, 16 Feb 2013 01:19:07 +0000"  >&lt;p&gt;OK.  Thanks for entertaining my comment.&lt;/p&gt;</comment>
                            <comment id="13579849" author="lhofhansl" created="Sat, 16 Feb 2013 17:43:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=devaraj&quot; class=&quot;user-hover&quot; rel=&quot;devaraj&quot;&gt;Devaraj Das&lt;/a&gt; I see the actual patch committed also includes a change to CHANGES.txt. That is no longer necessary, as I generate the change log at the time of the release.&lt;/p&gt;</comment>
                            <comment id="13585394" author="hudson" created="Sun, 24 Feb 2013 15:49:04 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #111 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/111/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/111/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7851&quot; title=&quot;Include the guava classes as a dependency for jobs using mapreduce.TableMapReduceUtil&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7851&quot;&gt;&lt;del&gt;HBASE-7851&lt;/del&gt;&lt;/a&gt;. Include the guava classes as a dependency for jobs using mapreduce.TableMapReduceUtil (ddas). (Revision 1446468)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
ddas : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13593167" author="hudson" created="Tue, 5 Mar 2013 07:52:10 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security-on-Hadoop-23 #12 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/12/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/12/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7851&quot; title=&quot;Include the guava classes as a dependency for jobs using mapreduce.TableMapReduceUtil&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7851&quot;&gt;&lt;del&gt;HBASE-7851&lt;/del&gt;&lt;/a&gt;. Include the guava classes as a dependency for jobs using mapreduce.TableMapReduceUtil (ddas). (Revision 1446468)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
ddas : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12569421" name="7851-1.patch" size="672" author="devaraj" created="Thu, 14 Feb 2013 23:34:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 14 Feb 2013 23:44:20 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>312999</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 41 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1i0j3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>313345</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>