<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:57:21 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1908/HBASE-1908.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1908] ROOT not reassigned if only one regionserver left</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1908</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Yannis on the list uncovered an assignment bug:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;I performed additional testing with some alternate configurations and the problem arises (ONLY) when there is only one regionserver left which has the META table already assigned to it. &lt;/p&gt;

&lt;p&gt;In this case the ROOT table does not get assigned to the last regionserver (which holds the META table).&lt;/p&gt;

&lt;p&gt;Interestingly enough though when there is only one regionserver left that has the ROOT table already assign to it then it can also have the META table re-assigned to it (if again is the only server - i.e. in this scenario you can have one regionserver holding both the META and ROOT tables).&lt;/p&gt;

&lt;p&gt;Unless I am missing something I cannot find any reason why we cannot assign the ROOT table to the regionserver that manages the META table if it is the only one remaining (again it is an extreme case I agree that this can happen).&lt;/p&gt;

&lt;p&gt;I applied and tested a fix (at the hbase-0.20.0 codebase) in the RegionManager::regionsAwaitingAssignment where I add the root table in the regionstoAssign set if the it is the metaServer and also the only server.&lt;/p&gt;&lt;/blockquote&gt;</description>
                <environment></environment>
        <key id="12438225">HBASE-1908</key>
            <summary>ROOT not reassigned if only one regionserver left</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="streamy">Jonathan Gray</assignee>
                                    <reporter username="streamy">Jonathan Gray</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Oct 2009 18:23:24 +0000</created>
                <updated>Fri, 12 Oct 2012 06:13:24 +0000</updated>
                            <resolved>Tue, 20 Oct 2009 00:08:34 +0000</resolved>
                                    <version>0.20.1</version>
                                    <fixVersion>0.20.2</fixVersion>
                    <fixVersion>0.90.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12766160" author="streamy" created="Thu, 15 Oct 2009 18:38:47 +0000"  >&lt;p&gt;Yannis proposed fix:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;diff RegionManager.java.FIXES RegionManager.java
414c414
&amp;lt;       if ((!isMetaServer) || (isMetaServer &amp;amp;&amp;amp; isSingleServer)) {
---
&amp;gt;       if (!isMetaServer) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12766167" author="davelatham" created="Thu, 15 Oct 2009 18:51:33 +0000"  >&lt;p&gt;How about:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;if (!isMetaServer || isSingleServer) {&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="12766168" author="streamy" created="Thu, 15 Oct 2009 18:52:33 +0000"  >&lt;p&gt;Binary logic ftw!&lt;/p&gt;</comment>
                            <comment id="12766169" author="streamy" created="Thu, 15 Oct 2009 18:56:15 +0000"  >&lt;p&gt;Trying to reproduce and then will test with this patch.&lt;/p&gt;</comment>
                            <comment id="12766183" author="streamy" created="Thu, 15 Oct 2009 19:14:20 +0000"  >&lt;p&gt;Reproduced on clean branch as described.  If you have two regionservers, one with META and one with ROOT, if you kill the regionserver hosting ROOT it doesn&apos;t ever get reassigned.&lt;/p&gt;

&lt;p&gt;Odd behavior though.  The META region gets reassigned to the regionserver tho it was never unassigned.&lt;/p&gt;

&lt;p&gt;Master log:  &lt;a href=&quot;http://pastebin.com/mb4fed51&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://pastebin.com/mb4fed51&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;RegionServer log: &lt;a href=&quot;http://pastebin.com/m3e079b36&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://pastebin.com/m3e079b36&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12766245" author="streamy" created="Thu, 15 Oct 2009 20:55:34 +0000"  >&lt;p&gt;Patch fixes the problem.  It does re-assign META, but doesn&apos;t seem to matter (since it&apos;s being reassigned to regionserver already hosting it).&lt;/p&gt;

&lt;p&gt;Also tested killing server hosting META instead of ROOT and all seems fine.  Did uncover a client issue though.&lt;/p&gt;</comment>
                            <comment id="12767609" author="streamy" created="Mon, 19 Oct 2009 23:21:37 +0000"  >&lt;p&gt;Will commit after someone reviews&lt;/p&gt;</comment>
                            <comment id="12767610" author="stack" created="Mon, 19 Oct 2009 23:25:56 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;What about issue where client would not go elsewhere after a connection refused exception?  Is that a different issue?&lt;/p&gt;</comment>
                            <comment id="12767629" author="streamy" created="Tue, 20 Oct 2009 00:06:07 +0000"  >&lt;p&gt;Opened &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1920&quot; title=&quot;Client with cached region location pointing at dead server does not recover&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1920&quot;&gt;&lt;del&gt;HBASE-1920&lt;/del&gt;&lt;/a&gt; for that issue, it is completely distinct I just uncovered it while testing for this.&lt;/p&gt;</comment>
                            <comment id="12767632" author="streamy" created="Tue, 20 Oct 2009 00:08:34 +0000"  >&lt;p&gt;Committed to branch and trunk, thanks for review stack.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12422259" name="HBASE-1908-v1.patch" size="827" author="streamy" created="Thu, 15 Oct 2009 18:56:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 15 Oct 2009 18:51:33 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26051</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 9 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08s3b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>49151</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>