<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:36:00 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6353/HBASE-6353.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6353] Snapshots shell</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6353</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;h6&gt;&lt;a name=&quot;hbaseshellwithsnapshotcommands&quot;&gt;&lt;/a&gt;hbase shell with snapshot commands&lt;/h6&gt;
&lt;ul&gt;
	&lt;li&gt;snapshot &amp;lt;snapshot name&amp;gt; &amp;lt;table name&amp;gt;
	&lt;ul&gt;
		&lt;li&gt;Take a snapshot of the specified name with the specified name&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;restore_snapshot &amp;lt;snapshot name&amp;gt;
	&lt;ul&gt;
		&lt;li&gt;Restore specified snapshot on the original table&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;clone_snapshot &amp;lt;snapshot name&amp;gt; &amp;lt;table name&amp;gt;
	&lt;ul&gt;
		&lt;li&gt;Create a new table based on the snapshot content&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;list_snapshots &lt;span class=&quot;error&quot;&gt;&amp;#91;filter&amp;#93;&lt;/span&gt;
	&lt;ul&gt;
		&lt;li&gt;Show the list of snapshots taken&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;delete_snapshot &amp;lt;snapshot name&amp;gt;
	&lt;ul&gt;
		&lt;li&gt;Remove a specified snapshot&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;rename_snapshot &amp;lt;snapshot name&amp;gt; &amp;lt;new snapshot name&amp;gt;
	&lt;ul&gt;
		&lt;li&gt;Rename a snapshot to a new name&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;h6&gt;&lt;a name=&quot;RestoreTable&quot;&gt;&lt;/a&gt;Restore Table&lt;/h6&gt;
&lt;p&gt;Given a &quot;snapshot name&quot; restore override the original table with the snapshot content.&lt;br/&gt;
Before restoring a new snapshot of the table is taken, just to avoid bad situations.&lt;br/&gt;
This allows a full and quick rollback to a previous snapshot.&lt;/p&gt;

&lt;h6&gt;&lt;a name=&quot;ClonefromSnapshot&quot;&gt;&lt;/a&gt;Clone from Snapshot&lt;/h6&gt;
&lt;p&gt;Given a &quot;snapshot name&quot; a new table is created with the content of the specified snapshot.&lt;/p&gt;

&lt;p&gt;This operation allows:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;To have an old version of the table in parallel with the current one.
	&lt;ul&gt;
		&lt;li&gt;Look at snapshot side-by-side with the &quot;current&quot; before making the decision whether to roll back or not&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;To Add/Remove data from this table without affecting the original one or the snapshot.&lt;/li&gt;
	&lt;li&gt;To Restore only &quot;individual items&quot; (only some small range of data was lost from &quot;current&quot;)
	&lt;ul&gt;
		&lt;li&gt;MR job that scan the cloned table and update the data in the original one. (Partial restore of the data)&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;h6&gt;&lt;a name=&quot;Openpoints&quot;&gt;&lt;/a&gt;Open points&lt;/h6&gt;
&lt;ul&gt;
	&lt;li&gt;Add snapshot type option on take snapshot command (global, timestamp)?&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12597899">HBASE-6353</key>
            <summary>Snapshots shell</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12556488">HBASE-6055</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mbertozzi">Matteo Bertozzi</assignee>
                                    <reporter username="mbertozzi">Matteo Bertozzi</reporter>
                        <labels>
                    </labels>
                <created>Sat, 7 Jul 2012 11:56:32 +0000</created>
                <updated>Mon, 23 Sep 2013 18:30:27 +0000</updated>
                            <resolved>Wed, 7 Nov 2012 16:00:52 +0000</resolved>
                                                    <fixVersion>0.95.0</fixVersion>
                                    <component>shell</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13409062" author="jesse_yates" created="Sun, 8 Jul 2012 20:58:34 +0000"  >&lt;p&gt;Woah, that patch is massive &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Do you think you can break it into two jiras? The shell stuff should be here, but not the restore functionality which you seem to be adding. Also, those tickets should probably be dependencies, rather than relates (so you don&apos;t need to include all the restore/snapshot code here).&lt;/p&gt;

&lt;p&gt;Can you add the features such that you can also do it from a table reference (see the shell&apos;s Table class for adding the admin functions to a table). Good stuff Matteo.&lt;/p&gt;</comment>
                            <comment id="13409162" author="lhofhansl" created="Mon, 9 Jul 2012 04:10:06 +0000"  >&lt;p&gt;To be fair, without the generated protobuf stuff the patch is &quot;only&quot; 47k.&lt;br/&gt;
Still big, and no tests. A feature like this should have tests.&lt;/p&gt;</comment>
                            <comment id="13409204" author="mbertozzi" created="Mon, 9 Jul 2012 06:06:35 +0000"  >&lt;p&gt;This patch is just an initial draft to describe and discuss the snapshot operations.&lt;/p&gt;

&lt;p&gt;@Lars Yes, the patch should be just the ruby files for the shell.&lt;br/&gt;
There&apos;s also the protobuf + HMasterInterface + HBaseAdmin since you need to be able to run it, but once we&apos;ve &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6055&quot; title=&quot;Offline Snapshots in HBase 0.96&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6055&quot;&gt;&lt;del&gt;HBASE-6055&lt;/del&gt;&lt;/a&gt; all this code will not be here.&lt;/p&gt;

&lt;p&gt;@Jesse yes restore code will not be here, and I agree to add restore to the table class&lt;/p&gt;

&lt;p&gt;What do you think about having mount and restore as separate feature? From a code point of view are almost the same, but for the user is a different operation/use case.&lt;/p&gt;</comment>
                            <comment id="13410689" author="jesse_yates" created="Tue, 10 Jul 2012 18:41:12 +0000"  >&lt;p&gt;general comments:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&apos;take snapshot&apos; should have an type field (maybe -t option since timestamp is the default).&lt;/li&gt;
	&lt;li&gt;we should probably slow down on this until the restore operations are in the java code first. Makes the shell super easy and generally how people roll in stuff (also helps keep stuff logically separate).&lt;/li&gt;
&lt;/ul&gt;


&lt;blockquote&gt;&lt;p&gt;What do you think about having mount and restore as separate feature? &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I feel like it should track the outline from &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6230&quot; title=&quot;[brainstorm] &amp;quot;Restore&amp;quot; snapshots for HBase 0.96&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6230&quot;&gt;&lt;del&gt;HBASE-6230&lt;/del&gt;&lt;/a&gt; in terms of naming. See my latest comments (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6230?focusedCommentId=13410682&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13410682&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-6230?focusedCommentId=13410682&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13410682&lt;/a&gt;) for thoughts on how the operations could also be named and a little bit of thought on how they could work. &lt;/p&gt;</comment>
                            <comment id="13487401" author="jmhsieh" created="Wed, 31 Oct 2012 00:27:05 +0000"  >&lt;p&gt;Hey Jesse, I believe this got all +1&apos;s on the review.  Can we commit this to the snapshot branch so this isn&apos;t hanging around anymore?  &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/7583/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/7583/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13487409" author="jesse_yates" created="Wed, 31 Oct 2012 00:34:58 +0000"  >&lt;p&gt;Yeah. Matteo - do you want to attach the latest version and I&apos;ll roll it in?&lt;/p&gt;</comment>
                            <comment id="13487893" author="jesse_yates" created="Wed, 31 Oct 2012 16:04:00 +0000"  >&lt;p&gt;Last minute realization - do we need to add some tests for this? I don&apos;t think they would be very telling - it would mostly be mocks of the underlying objects (e.g. a mock HBaseAdmin) and that they get a call (e.g. admin.snapshot) - but figured it would be prudent to ask what everyone else thought&lt;/p&gt;</comment>
                            <comment id="13487911" author="jmhsieh" created="Wed, 31 Oct 2012 16:22:39 +0000"  >&lt;p&gt;Hey Matteo, there was a test script that executed the commands attached to the review.  Attach a copy of it to this jira so that other folks can try it?  Jesse &amp;#8211; do you think that is sufficient?&lt;/p&gt;</comment>
                            <comment id="13487912" author="jmhsieh" created="Wed, 31 Oct 2012 16:23:01 +0000"  >&lt;p&gt;(Most of the shell code in hbase isn&apos;t really tested sadly).&lt;/p&gt;</comment>
                            <comment id="13487917" author="jesse_yates" created="Wed, 31 Oct 2012 16:25:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jmhsieh&quot; class=&quot;user-hover&quot; rel=&quot;jmhsieh&quot;&gt;Jonathan Hsieh&lt;/a&gt; doesn&apos;t mean we shouldn&apos;t test it &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Any way the tests can be pulled into real tests?&lt;/p&gt;</comment>
                            <comment id="13487925" author="jmhsieh" created="Wed, 31 Oct 2012 16:35:32 +0000"  >&lt;p&gt;I don&apos;t think the ruby stuff fits into a unit test nicely (or the effort to do so would be a huge project unto itself).   I agree with the testing concern but feel that the shell script / hbase script and documentation on how to run it here in the jira would be sufficient.&lt;/p&gt;</comment>
                            <comment id="13491858" author="jmhsieh" created="Tue, 6 Nov 2012 21:51:20 +0000"  >&lt;p&gt;Jesse, where do we stand on this?  Do we need more or is this good to go?  &lt;/p&gt;</comment>
                            <comment id="13491862" author="hadoopqa" created="Tue, 6 Nov 2012 21:53:58 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12551976/snapshot-offline-test-demo.shell&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12551976/snapshot-offline-test-demo.shell&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3235//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3235//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13491869" author="hadoopqa" created="Tue, 6 Nov 2012 22:02:24 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12551976/snapshot-offline-test-demo.shell&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12551976/snapshot-offline-test-demo.shell&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3236//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3236//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13492019" author="hadoopqa" created="Wed, 7 Nov 2012 01:06:48 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12551976/snapshot-offline-test-demo.shell&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12551976/snapshot-offline-test-demo.shell&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3244//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3244//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13492409" author="jesse_yates" created="Wed, 7 Nov 2012 15:05:31 +0000"  >&lt;p&gt;yeah, this should be good for the moment. I&apos;ll roll it in.&lt;/p&gt;</comment>
                            <comment id="13492449" author="jesse_yates" created="Wed, 7 Nov 2012 16:00:52 +0000"  >&lt;p&gt;Closing as committed to &lt;a href=&quot;https://github.com/jyates/hbase/tree/snapshots&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/jyates/hbase/tree/snapshots&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13526874" author="jmhsieh" created="Fri, 7 Dec 2012 23:30:22 +0000"  >&lt;p&gt;nit: There is a enable &apos;test-table&apos; command missing after the restore_snapshot &apos;test-snapshot&apos; command the the test script&lt;/p&gt;</comment>
                            <comment id="13527579" author="mbertozzi" created="Sun, 9 Dec 2012 18:51:18 +0000"  >&lt;p&gt;Thanks Jon, added a v2 of the test script&lt;/p&gt;</comment>
                            <comment id="13774962" author="stack" created="Mon, 23 Sep 2013 18:30:26 +0000"  >&lt;p&gt;Marking closed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12594958">HBASE-6230</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12556488">HBASE-6055</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12649945">HBASE-8642</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12623876">HBASE-7353</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12535523" name="HBASE-6353-v0.patch" size="275227" author="mbertozzi" created="Sat, 7 Jul 2012 11:57:29 +0000"/>
                            <attachment id="12551497" name="HBASE-6353-v1.patch" size="13196" author="mbertozzi" created="Wed, 31 Oct 2012 06:59:56 +0000"/>
                            <attachment id="12560109" name="snapshot-offline-test-demo-v2.shell" size="2737" author="mbertozzi" created="Sun, 9 Dec 2012 18:51:18 +0000"/>
                            <attachment id="12551976" name="snapshot-offline-test-demo.shell" size="2717" author="mbertozzi" created="Sat, 3 Nov 2012 09:04:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 8 Jul 2012 20:58:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>253238</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dcnz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>75981</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>