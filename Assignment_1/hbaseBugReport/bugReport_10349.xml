<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:12:56 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-10349/HBASE-10349.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-10349] Table became unusable when master balanced its region after table was dropped</title>
                <link>https://issues.apache.org/jira/browse/HBASE-10349</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;0.98 was used.&lt;br/&gt;
This was sequence of events:&lt;/p&gt;

&lt;p&gt;create &apos;tablethree_mod&apos;&lt;br/&gt;
snapshot &apos;tablethree_mod&apos;, &apos;snapshot_tablethree_mod&apos;&lt;br/&gt;
disable &apos;tablethree_mod&apos;&lt;br/&gt;
2014-01-15 09:34:51,749   restore_snapshot &apos;snapshot_tablethree_mod&apos;&lt;br/&gt;
2014-01-15 09:35:07,210   enable &apos;tablethree_mod&apos;&lt;br/&gt;
2014-01-15 09:35:46,134   delete_snapshot &apos;snapshot_tablethree_mod&apos;&lt;br/&gt;
2014-01-15 09:41:42,210   disable &apos;tablethree_mod&apos;&lt;br/&gt;
2014-01-15 09:41:43,610   drop &apos;tablethree_mod&apos;&lt;br/&gt;
create &apos;tablethree_mod&apos;&lt;/p&gt;

&lt;p&gt;For the last table creation request:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; 
2014-01-15 10:03:52,999|beaver.component.hbase|INFO| &apos;create &apos;tablethree_mod&apos;,
{NAME =&amp;gt; &apos;f1&apos;, VERSIONS =&amp;gt; 3}

,
{NAME =&amp;gt; &apos;f2&apos;, VERSIONS =&amp;gt; 3}

,
{NAME =&amp;gt; &apos;f3&apos;, VERSIONS =&amp;gt; 3}

&apos;
2014-01-15 10:03:52,999|beaver.component.hbase|INFO| &apos;exists &apos;tablethree_mod&apos;&apos;
2014-01-15 10:03:52,999|beaver.component.hbase|INFO| &apos;put &apos;tablethree_mod&apos;, &apos;0&apos;, &apos;f1:q1&apos;, &apos;value-0&apos;, 10&apos;
2014-01-15 10:03:52,999|beaver.component.hbase|INFO| &apos;put &apos;tablethree_mod&apos;, &apos;1&apos;, &apos;f1:q1&apos;, &apos;value-1&apos;, 20&apos;
2014-01-15 10:03:53,000|beaver.component.hbase|INFO| &apos;put &apos;tablethree_mod&apos;, &apos;2&apos;, &apos;f2:q2&apos;, &apos;value-2&apos;, 30&apos;
2014-01-15 10:03:53,000|beaver.component.hbase|INFO| &apos;put &apos;tablethree_mod&apos;, &apos;3&apos;, &apos;f3:q3&apos;, &apos;value-3&apos;, 40&apos;
2014-01-15 10:03:53,000|beaver.component.hbase|INFO| &apos;put &apos;tablethree_mod&apos;, &apos;4&apos;, &apos;f3:q3&apos;, &apos;value-4&apos;, 50&apos;
2014-01-15 10:03:53,000|beaver.component.hbase|INFO|Done writing commands to file. Will execute them now.
2014-01-15 10:03:53,000|beaver.machine|INFO|RUNNING: /usr/lib/hbase/bin/hbase shell /grid/0/tmp/hwqe/artifacts/tmp-471142
2014-01-15 10:03:55,878|beaver.machine|INFO|2014-01-15 10:03:55,878 INFO [main] Configuration.deprecation: hadoop.&lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;.lib is deprecated. Instead, use io.&lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;.lib.available
2014-01-15 10:03:57,283|beaver.machine|INFO|2014-01-15 10:03:57,283 WARN [main] conf.Configuration: hbase-site.xml:an attempt to override &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; parameter: dfs.support.append; Ignoring.
2014-01-15 10:03:57,669|beaver.machine|INFO|2014-01-15 10:03:57,669 WARN [main] conf.Configuration: hbase-site.xml:an attempt to override &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; parameter: dfs.support.append; Ignoring.
2014-01-15 10:03:57,720|beaver.machine|INFO|2014-01-15 10:03:57,720 WARN [main] conf.Configuration: hbase-site.xml:an attempt to override &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; parameter: dfs.support.append; Ignoring.
2014-01-15 10:03:57,997|beaver.machine|INFO|
2014-01-15 10:03:57,997|beaver.machine|INFO|ERROR: Table already exists: tablethree_mod!
2014-01-15 10:03:57,997|beaver.machine|INFO|
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This was an intermittent issue after using Snapshots, a table is not properly dropped / and not able to properly re-create with the same name. And a HRegion is empty or null Error occurs. (When you try to drop the table it says it does not exist, and when you try to create the table it says that it does already exist).&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2014-01-15 10:04:02,462|beaver.machine|INFO|ERROR: HRegionInfo was &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; or empty in hbase:meta, row=keyvalues=
{tablethree_mod,,1389778226606.afc82d1ceabbaca36a504b83b65fc0c9./info:seqnumDuringOpen/1389778905355/Put/vlen=8/mvcc=0, tablethree_mod,,1389778226606.afc82d1ceabbaca36a504b83b65fc0c9./info:server/1389778905355/Put/vlen=32/mvcc=0, tablethree_mod,,1389778226606.afc82d1ceabbaca36a504b83b65fc0c9./info:serverstartcode/1389778905355/Put/vlen=8/mvcc=0} 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Thanks to Huned who discovered this issue.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12689110">HBASE-10349</key>
            <summary>Table became unusable when master balanced its region after table was dropped</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jxiang">Jimmy Xiang</assignee>
                                    <reporter username="yuzhihong@gmail.com">Ted Yu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Jan 2014 22:48:10 +0000</created>
                <updated>Mon, 30 Mar 2015 21:48:49 +0000</updated>
                            <resolved>Sat, 18 Jan 2014 03:38:40 +0000</resolved>
                                    <version>0.98.0</version>
                                    <fixVersion>0.98.0</fixVersion>
                    <fixVersion>0.96.2</fixVersion>
                    <fixVersion>0.99.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13872765" author="yuzhihong@gmail.com" created="Wed, 15 Jan 2014 23:11:32 +0000"  >&lt;p&gt;The master started balancing the single region of tablethree_mod after tablethree_mod was deleted:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2014-01-15 09:41:42,395 INFO  [AM.ZK.Worker-pool2-t857] master.RegionStates: Offlined afc82d1ceabbaca36a504b83b65fc0c9 from hor15n07.gq1.ygridcore.net,60020,1389770493951
...
2014-01-15 09:41:43,751 DEBUG [MASTER_TABLE_OPERATIONS-hor15n05:60000-0] handler.DeleteTableHandler: Removing &apos;tablethree_mod&apos; descriptor.
2014-01-15 09:41:43,752 DEBUG [MASTER_TABLE_OPERATIONS-hor15n05:60000-0] handler.DeleteTableHandler: Marking &apos;tablethree_mod&apos; as deleted.
2014-01-15 09:41:43,768 DEBUG [MASTER_TABLE_OPERATIONS-hor15n05:60000-0] lock.ZKInterProcessLockBase: Released /hbase/table-lock/tablethree_mod/write-master:
...
2014-01-15 09:41:44,643 INFO  [hor15n05.gq1.ygridcore.net,60000,1389770492644-BalancerChore] master.HMaster: balance hri=tablethree_mod,,1389778226606.                    afc82d1ceabbaca36a504b83b65fc0c9., src=hor15n07.gq1.ygridcore.net,60020,1389770493951, dest=hor15n09.gq1.ygridcore.net,60020,1389770493998
...
2014-01-15 09:41:44,668 DEBUG [hor15n05.gq1.ygridcore.net,60000,1389770492644-BalancerChore] master.AssignmentManager: Setting table tablethree_mod to ENABLED state.
...
2014-01-15 09:41:44,761 DEBUG [AM.ZK.Worker-pool2-t873] master.AssignmentManager: Found an existing plan &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; tablethree_mod,,1389778226606.                                afc82d1ceabbaca36a504b83b65fc0c9. destination server is hor15n09.gq1.ygridcore.net,60020,1389770493998 accepted as a dest server = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
2014-01-15 09:41:44,761 DEBUG [AM.ZK.Worker-pool2-t873] master.AssignmentManager: No previous transition plan found (or ignoring an existing plan) &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; tablethree_mod,,    1389778226606.afc82d1ceabbaca36a504b83b65fc0c9.; generated random plan=hri=tablethree_mod,,1389778226606.afc82d1ceabbaca36a504b83b65fc0c9., src=, dest=hor15n12.gq1.       ygridcore.net,60020,1389770493928; 5 (online=5, available=4) available servers, forceNewPlan=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
...
2014-01-15 09:41:57,784 WARN  [MASTER_TABLE_OPERATIONS-hor15n05:60000-0] catalog.MetaReader: No serialized HRegionInfo in keyvalues={tablethree_mod,,1389778226606.        afc82d1ceabbaca36a504b83b65fc0c9./info:seqnumDuringOpen/1389778905355/Put/vlen=8/mvcc=0, tablethree_mod,,1389778226606.afc82d1ceabbaca36a504b83b65fc0c9./info:server/      1389778905355/Put/vlen=32/mvcc=0, tablethree_mod,,1389778226606.afc82d1ceabbaca36a504b83b65fc0c9./info:serverstartcode/1389778905355/Put/vlen=8/mvcc=0}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13872776" author="yuzhihong@gmail.com" created="Wed, 15 Jan 2014 23:19:55 +0000"  >&lt;p&gt;From hbase-hbase-regionserver-hor15n07.gq1.ygridcore.net.log:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2014-01-15 09:41:42,342 INFO  [RS_CLOSE_REGION-hor15n07:60020-0] regionserver.DefaultStoreFlusher: Flushed, sequenceid=2999677, memsize=168, hasBloomFilter=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, into tmp file hdfs:&lt;span class=&quot;code-comment&quot;&gt;//hor11n14.gq1.ygridcore.net:8020/apps/hbase/data/data/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/tablethree_mod/afc82d1ceabbaca36a504b83b65fc0c9/.tmp/2281cdbf37c54ab3b8dcc57069cae993
&lt;/span&gt;2014-01-15 09:41:42,352 DEBUG [RS_CLOSE_REGION-hor15n07:60020-0] regionserver.HRegionFileSystem: Committing store file hdfs:&lt;span class=&quot;code-comment&quot;&gt;//hor11n14.gq1.ygridcore.net:8020/apps/hbase/  data/data/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/tablethree_mod/afc82d1ceabbaca36a504b83b65fc0c9/.tmp/2281cdbf37c54ab3b8dcc57069cae993 as hdfs://hor11n14.gq1.ygridcore.net:8020/apps/hbase/data/data/    &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/tablethree_mod/afc82d1ceabbaca36a504b83b65fc0c9/f3/2281cdbf37c54ab3b8dcc57069cae993
&lt;/span&gt;2014-01-15 09:41:42,366 INFO  [RS_CLOSE_REGION-hor15n07:60020-0] regionserver.HStore: Added hdfs:&lt;span class=&quot;code-comment&quot;&gt;//hor11n14.gq1.ygridcore.net:8020/apps/hbase/data/data/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/           tablethree_mod/afc82d1ceabbaca36a504b83b65fc0c9/f3/2281cdbf37c54ab3b8dcc57069cae993, entries=1, sequenceid=2999677, filesize=1.0 K
&lt;/span&gt;2014-01-15 09:41:42,366 INFO  [RS_CLOSE_REGION-hor15n07:60020-0] regionserver.HRegion: Finished memstore flush of ~168/168, currentsize=0/0 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; region tablethree_mod,,    1389778226606.afc82d1ceabbaca36a504b83b65fc0c9. in 71ms, sequenceid=2999677, compaction requested=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
2014-01-15 09:41:42,368 INFO  [StoreCloserThread-tablethree_mod,,1389778226606.afc82d1ceabbaca36a504b83b65fc0c9.-1] regionserver.HStore: Closed f1
2014-01-15 09:41:42,370 INFO  [StoreCloserThread-tablethree_mod,,1389778226606.afc82d1ceabbaca36a504b83b65fc0c9.-1] regionserver.HStore: Closed f2
2014-01-15 09:41:42,373 INFO  [StoreCloserThread-tablethree_mod,,1389778226606.afc82d1ceabbaca36a504b83b65fc0c9.-1] regionserver.HStore: Closed f3
2014-01-15 09:41:42,374 INFO  [RS_CLOSE_REGION-hor15n07:60020-0] regionserver.HRegion: Closed tablethree_mod,,1389778226606.afc82d1ceabbaca36a504b83b65fc0c9.
2014-01-15 09:41:42,374 DEBUG [RS_CLOSE_REGION-hor15n07:60020-0] zookeeper.ZKAssign: regionserver:60020-0x14394c5bdde0004, quorum=hor15n09.gq1.ygridcore.net:2181,hor15n07.gq1.ygridcore.net:2181,hor15n10.gq1.ygridcore.net:2181, baseZNode=/hbase Transitioning afc82d1ceabbaca36a504b83b65fc0c9 from M_ZK_REGION_CLOSING to RS_ZK_REGION_CLOSED
2014-01-15 09:41:42,385 DEBUG [RS_CLOSE_REGION-hor15n07:60020-0] zookeeper.ZKAssign: regionserver:60020-0x14394c5bdde0004, quorum=hor15n09.gq1.ygridcore.net:2181,hor15n07.gq1.ygridcore.net:2181,hor15n10.gq1.ygridcore.net:2181, baseZNode=/hbase Transitioned node afc82d1ceabbaca36a504b83b65fc0c9 from M_ZK_REGION_CLOSING to RS_ZK_REGION_CLOSED
2014-01-15 09:41:42,386 DEBUG [RS_CLOSE_REGION-hor15n07:60020-0] handler.CloseRegionHandler: Set closed state in zk &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; tablethree_mod,,1389778226606.                     afc82d1ceabbaca36a504b83b65fc0c9. on hor15n07.gq1.ygridcore.net,60020,1389770493951
2014-01-15 09:41:42,386 DEBUG [RS_CLOSE_REGION-hor15n07:60020-0] handler.CloseRegionHandler: Closed tablethree_mod,,1389778226606.afc82d1ceabbaca36a504b83b65fc0c9.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;There was no log entry for tablethree_mod after the last line.&lt;/p&gt;</comment>
                            <comment id="13872823" author="mbertozzi" created="Wed, 15 Jan 2014 23:48:03 +0000"  >&lt;p&gt;I guess the problem has more to do with the disable step.&lt;/p&gt;

&lt;p&gt;from the logs looks like the region afc82d1ceabbaca36a504b83b65fc0c9 was in the list of region to delete, &lt;br/&gt;
since there is the log of &quot;Archiving region&quot;. so it should also be removed from meta by the MetaEditor.deleteRegions()&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
15909  2014-01-15 09:41:43,651 DEBUG [MASTER_TABLE_OPERATIONS-hor15n05:60000-0] handler.DeleteTableHandler: Archiving region tablethree_mod,,1389778226606.afc82d1ceabbaca36a504b83b65fc0c9. from FS
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;looking at the MetaEditor.tableExists() to see if is reading from META or from the znode..&lt;/p&gt;</comment>
                            <comment id="13872853" author="mbertozzi" created="Thu, 16 Jan 2014 00:06:25 +0000"  >&lt;p&gt;was MetaReader.tableExists()... and the rows seems directly from the meta table...&lt;br/&gt;
any chances that we failed the MetaEditor.deleteRegions() or we are reading old data from META?&lt;br/&gt;
the request to delete the region was sent&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 15908  2014-01-15 09:41:43,639 INFO  [MASTER_TABLE_OPERATIONS-hor15n05:60000-0] catalog.MetaEditor: Deleted [{ENCODED =&amp;gt; afc82d1ceabbaca36a504b83b65fc0c9, NAME =&amp;gt; &apos;tablethree_mod,,1389778226606.afc82d1ceabbaca36a504b83b65fc0c9.&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;}]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13872858" author="yuzhihong@gmail.com" created="Thu, 16 Jan 2014 00:13:33 +0000"  >&lt;p&gt;Here is namenode log&lt;/p&gt;</comment>
                            <comment id="13872864" author="mbertozzi" created="Thu, 16 Jan 2014 00:17:52 +0000"  >&lt;p&gt;maybe related to this.. &lt;br/&gt;
META should have DELETE -&amp;gt; PUT (restore snapshot) -&amp;gt; DELETE... but the row looks not deleted from MetaReader.tableExists()&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void overwriteRegions(CatalogTracker catalogTracker,
      List&amp;lt;HRegionInfo&amp;gt; regionInfos) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    deleteRegions(catalogTracker, regionInfos);
    &lt;span class=&quot;code-comment&quot;&gt;// Why sleep? This is the easiest way to ensure that the previous deletes does not
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// eclipse the following puts, that might happen in the same ts from the server.
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// See HBASE-9906, and HBASE-9879. Once either HBASE-9879, HBASE-8770 is fixed,
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// or HBASE-9905 is fixed and meta uses seqIds, we &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; not need the sleep.
&lt;/span&gt;    Threads.sleep(20);
    addRegionsToMeta(catalogTracker, regionInfos);
    LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Overwritten &quot;&lt;/span&gt; + regionInfos);
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13872891" author="yuzhihong@gmail.com" created="Thu, 16 Jan 2014 00:54:36 +0000"  >&lt;p&gt;In the master log:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2014-01-15 09:41:42,395 INFO  [AM.ZK.Worker-pool2-t857] master.RegionStates: Offlined afc82d1ceabbaca36a504b83b65fc0c9 from hor15n07.gq1.ygridcore.net,60020,1389770493951
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This should correspond to this line in regionOffline():&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Offlined &quot;&lt;/span&gt; + hri.getShortNameToLog() + &lt;span class=&quot;code-quote&quot;&gt;&quot; from &quot;&lt;/span&gt; + oldServerName);
        Set&amp;lt;HRegionInfo&amp;gt; oldRegions = serverHoldings.get(oldServerName);
        oldRegions.remove(hri);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;But if hri was removed from oldRegions, I don&apos;t see why master would issue balance to the same region: afc82d1ceabbaca36a504b83b65fc0c9&lt;/p&gt;</comment>
                            <comment id="13873033" author="yuzhihong@gmail.com" created="Thu, 16 Jan 2014 04:37:58 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      Map&amp;lt;TableName, Map&amp;lt;ServerName, List&amp;lt;HRegionInfo&amp;gt;&amp;gt;&amp;gt; assignmentsByTable =
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.assignmentManager.getRegionStates().getAssignmentsByTable();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;One possibility is that afc82d1ceabbaca36a504b83b65fc0c9 went offline after the above call where HMaster#balance() call was still running.&lt;/p&gt;</comment>
                            <comment id="13873035" author="yuzhihong@gmail.com" created="Thu, 16 Jan 2014 04:39:25 +0000"  >&lt;p&gt;Patch v1 adds a check that source server of the region hasn&apos;t changed.&lt;/p&gt;</comment>
                            <comment id="13873074" author="hadoopqa" created="Thu, 16 Jan 2014 06:11:34 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12623306/10349-v1.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12623306/10349-v1.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12623306&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.1&lt;/font&gt;.  The patch compiles against the hadoop 1.1 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 site&lt;/font&gt;.  The patch appears to cause mvn site goal to fail.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8441//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8441//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8441//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8441//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8441//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8441//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8441//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8441//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8441//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8441//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8441//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8441//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8441//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8441//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8441//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8441//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8441//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8441//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8441//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8441//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8441//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8441//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13873246" author="mbertozzi" created="Thu, 16 Jan 2014 10:42:25 +0000"  >&lt;p&gt;I think that 10348-v1 a good check to have, for the assignment&lt;br/&gt;
but is probably just half of the fix.&lt;/p&gt;

&lt;p&gt;the other part is on table creation, the region is still visible in META.&lt;br/&gt;
and I don&apos;t think that the assignment adds the region back to META.&lt;/p&gt;</comment>
                            <comment id="13873313" author="hadoopqa" created="Thu, 16 Jan 2014 12:11:39 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12623348/HBASE-10349-meta-test-and-debug.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12623348/HBASE-10349-meta-test-and-debug.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12623348&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.1&lt;/font&gt;.  The patch compiles against the hadoop 1.1 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 site&lt;/font&gt;.  The patch appears to cause mvn site goal to fail.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8444//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8444//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8444//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8444//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8444//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8444//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8444//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8444//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8444//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8444//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8444//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8444//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8444//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8444//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8444//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8444//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8444//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8444//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8444//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8444//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8444//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8444//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13873616" author="yuzhihong@gmail.com" created="Thu, 16 Jan 2014 17:08:58 +0000"  >&lt;p&gt;Patch v2 combines patch v1 with Matteo&apos;s patch.&lt;/p&gt;</comment>
                            <comment id="13873698" author="jxiang" created="Thu, 16 Jan 2014 18:20:26 +0000"  >&lt;p&gt;Looked into the log. I think it is because the load balancer brings back those deleted regions. Let me post a new patch. The current patch should not be able to fix this issue.&lt;/p&gt;</comment>
                            <comment id="13873725" author="hadoopqa" created="Thu, 16 Jan 2014 18:36:36 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12623420/10349-v2.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12623420/10349-v2.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12623420&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.1&lt;/font&gt;.  The patch compiles against the hadoop 1.1 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 site&lt;/font&gt;.  The patch appears to cause mvn site goal to fail.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 1 zombie test(s): 	at org.apache.hadoop.hbase.TestAcidGuarantees.testMixedAtomicity(TestAcidGuarantees.java:351)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8445//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8445//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8445//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8445//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8445//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8445//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8445//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8445//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8445//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8445//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8445//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8445//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8445//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8445//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8445//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8445//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8445//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8445//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8445//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8445//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8445//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8445//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13873973" author="apurtell" created="Thu, 16 Jan 2014 21:29:23 +0000"  >&lt;p&gt;Ted said he saw this while testing 0.98, bringing it in&lt;/p&gt;</comment>
                            <comment id="13874239" author="jxiang" created="Fri, 17 Jan 2014 00:58:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yuzhihong%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;yuzhihong@gmail.com&quot;&gt;Ted Yu&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbertozzi&quot; class=&quot;user-hover&quot; rel=&quot;mbertozzi&quot;&gt;Matteo Bertozzi&lt;/a&gt;, could you please take a look the patch? Whenever a table is deleted, we remove all its regions from the region states. So we won&apos;t assign it by mistake any more (either from balancer, or move region from shell).&lt;/p&gt;</comment>
                            <comment id="13874454" author="hadoopqa" created="Fri, 17 Jan 2014 05:34:51 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12623550/hbase-10349.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12623550/hbase-10349.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12623550&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.1&lt;/font&gt;.  The patch compiles against the hadoop 1.1 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 site&lt;/font&gt;.  The patch appears to cause mvn site goal to fail.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.coprocessor.TestMasterObserver&lt;br/&gt;
                  org.apache.hadoop.hbase.master.TestAssignmentManagerOnCluster&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8455//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8455//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8455//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8455//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8455//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8455//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8455//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8455//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8455//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8455//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8455//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8455//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8455//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8455//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8455//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8455//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8455//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8455//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8455//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8455//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8455//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8455//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13874613" author="mbertozzi" created="Fri, 17 Jan 2014 10:04:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jxiang&quot; class=&quot;user-hover&quot; rel=&quot;jxiang&quot;&gt;Jimmy Xiang&lt;/a&gt; can you explain why the region is still in META?&lt;br/&gt;
the patch looks good to me to avoid any assignment transition after delete,&lt;br/&gt;
but I still don&apos;t see anything in the balancer/assignment manager that can add back the region to META.&lt;/p&gt;</comment>
                            <comment id="13874924" author="jxiang" created="Fri, 17 Jan 2014 16:38:52 +0000"  >&lt;p&gt;The test is ok locally.  Let me take a look and post a new patch.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbertozzi&quot; class=&quot;user-hover&quot; rel=&quot;mbertozzi&quot;&gt;Matteo Bertozzi&lt;/a&gt;, it is a racing between table deletion and balancer.  The balancer operates on a &quot;copy&quot; of the region assignments. When the balancer tries to balance a region, the region has been deleted (including the meta entry), and the table is removed (including the znode).  In assigning the deleted region, the region server puts the region back in the meta again with just the server info. That&apos;s why the region info in the meta row is missing.&lt;/p&gt;</comment>
                            <comment id="13875020" author="jxiang" created="Fri, 17 Jan 2014 18:01:21 +0000"  >&lt;p&gt;Attached v2 that fixed the test failures.&lt;/p&gt;</comment>
                            <comment id="13875169" author="hadoopqa" created="Fri, 17 Jan 2014 19:37:36 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12623695/hbase-10349_v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12623695/hbase-10349_v2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12623695&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.1&lt;/font&gt;.  The patch compiles against the hadoop 1.1 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 site&lt;/font&gt;.  The patch appears to cause mvn site goal to fail.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8461//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8461//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8461//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8461//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8461//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8461//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8461//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8461//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8461//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8461//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8461//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8461//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8461//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8461//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8461//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8461//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8461//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8461//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8461//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8461//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8461//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8461//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13875188" author="mbertozzi" created="Fri, 17 Jan 2014 19:48:53 +0000"  >&lt;p&gt;+1 on jimmy v2 for me.&lt;br/&gt;
(it will be nice also having the MetaEditor.overwriteRegions test and the add regions debug committed, but I guess i can create another jira for them)&lt;/p&gt;</comment>
                            <comment id="13875247" author="yuzhihong@gmail.com" created="Fri, 17 Jan 2014 20:44:11 +0000"  >&lt;p&gt;+1 on patch v2.&lt;/p&gt;

&lt;p&gt;New tests are good.&lt;/p&gt;</comment>
                            <comment id="13875530" author="jxiang" created="Sat, 18 Jan 2014 03:38:40 +0000"  >&lt;p&gt;Integrated into 0.96, 0.98, and trunk. Thanks a lot for reporting the issue, and reviewing the patch.&lt;/p&gt;</comment>
                            <comment id="13875546" author="hudson" created="Sat, 18 Jan 2014 05:07:02 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.98 #94 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/94/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/94/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10349&quot; title=&quot;Table became unusable when master balanced its region after table was dropped&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10349&quot;&gt;&lt;del&gt;HBASE-10349&lt;/del&gt;&lt;/a&gt; Table became unusable when master balanced its region after table was dropped (jxiang: rev 1559312)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-server/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-server/src/main/java/org/apache/hadoop/hbase/master/RegionStates.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-server/src/main/java/org/apache/hadoop/hbase/master/handler/DeleteTableHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestAssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestAssignmentManagerOnCluster.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13875560" author="hudson" created="Sat, 18 Jan 2014 06:02:44 +0000"  >&lt;p&gt;FAILURE: Integrated in hbase-0.96 #262 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.96/262/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.96/262/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10349&quot; title=&quot;Table became unusable when master balanced its region after table was dropped&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10349&quot;&gt;&lt;del&gt;HBASE-10349&lt;/del&gt;&lt;/a&gt; Table became unusable when master balanced its region after table was dropped (jxiang: rev 1559313)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/main/java/org/apache/hadoop/hbase/master/RegionStates.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/main/java/org/apache/hadoop/hbase/master/handler/DeleteTableHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestAssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestAssignmentManagerOnCluster.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13875566" author="hudson" created="Sat, 18 Jan 2014 06:34:22 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #4834 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4834/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4834/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10349&quot; title=&quot;Table became unusable when master balanced its region after table was dropped&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10349&quot;&gt;&lt;del&gt;HBASE-10349&lt;/del&gt;&lt;/a&gt; Table became unusable when master balanced its region after table was dropped (jxiang: rev 1559311)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/RegionStates.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/handler/DeleteTableHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestAssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestAssignmentManagerOnCluster.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13875577" author="hudson" created="Sat, 18 Jan 2014 07:35:28 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98-on-Hadoop-1.1 #85 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/85/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/85/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10349&quot; title=&quot;Table became unusable when master balanced its region after table was dropped&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10349&quot;&gt;&lt;del&gt;HBASE-10349&lt;/del&gt;&lt;/a&gt; Table became unusable when master balanced its region after table was dropped (jxiang: rev 1559312)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-server/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-server/src/main/java/org/apache/hadoop/hbase/master/RegionStates.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-server/src/main/java/org/apache/hadoop/hbase/master/handler/DeleteTableHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestAssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestAssignmentManagerOnCluster.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13875638" author="hudson" created="Sat, 18 Jan 2014 12:34:59 +0000"  >&lt;p&gt;FAILURE: Integrated in hbase-0.96-hadoop2 #179 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.96-hadoop2/179/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.96-hadoop2/179/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10349&quot; title=&quot;Table became unusable when master balanced its region after table was dropped&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10349&quot;&gt;&lt;del&gt;HBASE-10349&lt;/del&gt;&lt;/a&gt; Table became unusable when master balanced its region after table was dropped (jxiang: rev 1559313)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/main/java/org/apache/hadoop/hbase/master/RegionStates.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/main/java/org/apache/hadoop/hbase/master/handler/DeleteTableHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestAssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestAssignmentManagerOnCluster.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13875787" author="hudson" created="Sun, 19 Jan 2014 01:04:42 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-TRUNK-on-Hadoop-1.1 #58 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-1.1/58/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-1.1/58/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10349&quot; title=&quot;Table became unusable when master balanced its region after table was dropped&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10349&quot;&gt;&lt;del&gt;HBASE-10349&lt;/del&gt;&lt;/a&gt; Table became unusable when master balanced its region after table was dropped (jxiang: rev 1559311)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/RegionStates.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/handler/DeleteTableHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestAssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestAssignmentManagerOnCluster.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14330711" author="enis" created="Sat, 21 Feb 2015 23:30:35 +0000"  >&lt;p&gt;Closing this issue after 0.99.0 release. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12673134">HBASE-9738</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12623269" name="10349-hadoop-hdfs-namenode-hor11n14.gq1.ygridcore.net.zip" size="819624" author="yuzhihong@gmail.com" created="Thu, 16 Jan 2014 00:13:33 +0000"/>
                            <attachment id="12623252" name="10349-output.log" size="4949551" author="yuzhihong@gmail.com" created="Wed, 15 Jan 2014 22:51:05 +0000"/>
                            <attachment id="12623306" name="10349-v1.txt" size="904" author="yuzhihong@gmail.com" created="Thu, 16 Jan 2014 04:39:25 +0000"/>
                            <attachment id="12623420" name="10349-v2.txt" size="3106" author="yuzhihong@gmail.com" created="Thu, 16 Jan 2014 17:08:58 +0000"/>
                            <attachment id="12623348" name="HBASE-10349-meta-test-and-debug.patch" size="2131" author="mbertozzi" created="Thu, 16 Jan 2014 10:36:55 +0000"/>
                            <attachment id="12623550" name="hbase-10349.patch" size="8347" author="jxiang" created="Fri, 17 Jan 2014 00:53:31 +0000"/>
                            <attachment id="12623695" name="hbase-10349_v2.patch" size="8756" author="jxiang" created="Fri, 17 Jan 2014 18:01:21 +0000"/>
                            <attachment id="12623251" name="hbase-hbase-master-hor15n05.gq1.ygridcore.net.log.tar.gz" size="2341289" author="yuzhihong@gmail.com" created="Wed, 15 Jan 2014 22:50:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 15 Jan 2014 23:48:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368077</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1rfyf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368383</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>