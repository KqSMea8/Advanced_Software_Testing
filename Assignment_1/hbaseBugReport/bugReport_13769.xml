<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:46:29 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-13769/HBASE-13769.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-13769] Some ZK ACLs are unnecessarily permissive</title>
                <link>https://issues.apache.org/jira/browse/HBASE-13769</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Some ZK ACLs are unnecessarily permissive. We can remove permissions for &apos;world&apos; on backup-masters/, region-in-transition/, rs/, and table/.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12832543">HBASE-13769</key>
            <summary>Some ZK ACLs are unnecessarily permissive</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="4" iconUrl="https://issues.apache.org/jira/images/icons/statuses/reopened.png" description="This issue was once resolved, but the resolution was deemed incorrect. From here issues are either marked assigned or resolved.">Reopened</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="apurtell">Andrew Purtell</reporter>
                        <labels>
                    </labels>
                <created>Mon, 25 May 2015 17:06:21 +0000</created>
                <updated>Wed, 1 Jul 2015 23:22:20 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="14559684" author="apurtell" created="Tue, 26 May 2015 19:28:01 +0000"  >&lt;p&gt;This will be resolved as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13768&quot; title=&quot;ZooKeeper znodes are bootstrapped with insecure ACLs in a secure configuration&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13768&quot;&gt;&lt;del&gt;HBASE-13768&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14559799" author="enis" created="Tue, 26 May 2015 20:26:27 +0000"  >&lt;p&gt;The patch at &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13768&quot; title=&quot;ZooKeeper znodes are bootstrapped with insecure ACLs in a secure configuration&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13768&quot;&gt;&lt;del&gt;HBASE-13768&lt;/del&gt;&lt;/a&gt; does not change the perms for rs/, table/ and region-in-transition, only the /table-lock.&lt;br/&gt;
We should do these case-by-case: &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;table/ : I think this is needed to be world readable since clients check the table status in locate region in Connection (to check if table is disabled)&lt;/li&gt;
	&lt;li&gt;rs/      : ZooKeeperRegistry uses it. And my understanding is that ConnectionImpl.getCurrentNrHRS() uses it. Seems like this should instead work over getClusterStatus() instead of this.&lt;/li&gt;
	&lt;li&gt;backup-masters/   : I could not find why this is needed to be client-visible.&lt;/li&gt;
	&lt;li&gt;region-in-transition/ : I could not find why this is needed to be client-visible.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14559811" author="apurtell" created="Tue, 26 May 2015 20:33:08 +0000"  >&lt;blockquote&gt;&lt;p&gt;- table/ : I think this is needed to be world readable since clients check the table status in locate region in Connection (to check if table is disabled)&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This should not be allowed. Any client API that does this can be fixed to query meta or ask the master. Agree we can handle this as a separate case.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;- rs/      : ZooKeeperRegistry uses it. And my understanding is that ConnectionImpl.getCurrentNrHRS() uses it. Seems like this should instead work over getClusterStatus() instead of this.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This should not be allowed. Any client API that does this should be fixed to ask the master. Also agree this can be a separate issue.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;- backup-masters/   : I could not find why this is needed to be client-visible.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Let&apos;s handle on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13768&quot; title=&quot;ZooKeeper znodes are bootstrapped with insecure ACLs in a secure configuration&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13768&quot;&gt;&lt;del&gt;HBASE-13768&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;- region-in-transition/ : I could not find why this is needed to be client-visible&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Let&apos;s handle on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13768&quot; title=&quot;ZooKeeper znodes are bootstrapped with insecure ACLs in a secure configuration&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13768&quot;&gt;&lt;del&gt;HBASE-13768&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14559823" author="enis" created="Tue, 26 May 2015 20:41:29 +0000"  >&lt;blockquote&gt;&lt;p&gt;This should not be allowed. Any client API that does this can be fixed to query meta or ask the master. Agree we can handle this as a separate case.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Agreed, table states in zk does not make sense. The table state is checked everytime we re-lookup a region location, so we should be careful to not add the master RPC to the client code path. It is already moved to META in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12035&quot; title=&quot;Keep table state in META&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12035&quot;&gt;&lt;del&gt;HBASE-12035&lt;/del&gt;&lt;/a&gt; for master branch. &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13017&quot; title=&quot;Backport HBASE-12035 Keep table state in Meta to branch-1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13017&quot;&gt;HBASE-13017&lt;/a&gt; is reverted though since BC for old clients is not complete from my understanding. &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Let&apos;s handle on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13768&quot; title=&quot;ZooKeeper znodes are bootstrapped with insecure ACLs in a secure configuration&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13768&quot;&gt;&lt;del&gt;HBASE-13768&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Ok, let me do these in the next version of the patch. &lt;/p&gt;</comment>
                            <comment id="14610814" author="busbey" created="Wed, 1 Jul 2015 18:52:43 +0000"  >&lt;p&gt;did this ticket get covered by &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13768&quot; title=&quot;ZooKeeper znodes are bootstrapped with insecure ACLs in a secure configuration&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13768&quot;&gt;&lt;del&gt;HBASE-13768&lt;/del&gt;&lt;/a&gt;? if not, can we set a target version?&lt;/p&gt;</comment>
                            <comment id="14611165" author="enis" created="Wed, 1 Jul 2015 23:22:20 +0000"  >&lt;p&gt;This is the current logic for isClientReadable after 13768: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isClientReadable(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; node) {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;
        node.equals(baseZNode) ||
        isAnyMetaReplicaZnode(node) ||
        node.equals(getMasterAddressZNode()) ||
        node.equals(clusterIdZNode)||
        node.equals(rsZNode) ||
        &lt;span class=&quot;code-comment&quot;&gt;// /hbase/table and /hbase/table/foo is allowed, /hbase/table-lock is not
&lt;/span&gt;        node.equals(tableZNode) ||
        node.startsWith(tableZNode + &lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;from the above list, the only fishy one is rsZNode. Not sure whether that needs to be visible to the clients. Other than that, all others should be needed. &lt;br/&gt;
We can abstract away zk altogether from the client side, but it is a different discussion. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12832541">HBASE-13768</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 26 May 2015 20:26:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 24 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2f65r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>