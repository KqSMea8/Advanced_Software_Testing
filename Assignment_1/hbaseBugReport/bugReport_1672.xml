<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:55:25 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1672/HBASE-1672.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1672] Map tasks not local to RS</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1672</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The number of data local map tasks while scanning a table is only about 10% of the total map tasks...&lt;br/&gt;
My table had 280 regions and 13M records... The number of map tasks in the scan job were equal to the number of regions (280). Only 25 of them were data local tasks.&lt;/p&gt;</description>
                <environment>&lt;p&gt;DN, TT and RS running on the same nodes.&lt;/p&gt;</environment>
        <key id="12430867">HBASE-1672</key>
            <summary>Map tasks not local to RS</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="amansk">Amandeep Khurana</reporter>
                        <labels>
                    </labels>
                <created>Sun, 19 Jul 2009 06:26:15 +0000</created>
                <updated>Thu, 20 Sep 2012 22:10:39 +0000</updated>
                            <resolved>Fri, 24 Jul 2009 22:06:52 +0000</resolved>
                                    <version>0.20.0</version>
                    <version>0.19.3</version>
                                    <fixVersion>0.20.0</fixVersion>
                                    <component>master</component>
                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12733256" author="streamy" created="Mon, 20 Jul 2009 16:07:47 +0000"  >&lt;p&gt;This needs to be tested on trunk, thought we had fixed this.&lt;/p&gt;</comment>
                            <comment id="12733258" author="streamy" created="Mon, 20 Jul 2009 16:08:35 +0000"  >&lt;p&gt;Bringing in to 0.20.0 so someone can verify whether this works in trunk or not.  I can do it later this week if no one else does.&lt;/p&gt;</comment>
                            <comment id="12733651" author="jdcryans" created="Tue, 21 Jul 2009 14:56:19 +0000"  >&lt;p&gt;We already do this inside TableInputFormatBase:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; regionLocation = table.getRegionLocation(startKeys[startPos]).
  getServerAddress().getHostname(); 
splits[i] = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TableSplit(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.table.getTableName(),
  startKeys[startPos], ((i + 1) &amp;lt; realNumSplits) ? startKeys[lastPos]:
  HConstants.EMPTY_START_ROW, regionLocation);
LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;split: &quot;&lt;/span&gt; + i + &lt;span class=&quot;code-quote&quot;&gt;&quot;-&amp;gt;&quot;&lt;/span&gt; + splits[i]);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I don&apos;t know if we can do anything more than that. One difference in HBase compared to mapred on HDFS is that a region is only on one node, not 3 which is the default replication factor. So being able to get the right map task on the right RS at the right moment may be difficult for the JobTracker.&lt;/p&gt;</comment>
                            <comment id="12733774" author="stack" created="Tue, 21 Jul 2009 18:36:10 +0000"  >&lt;p&gt;So, what is the indicator in the MR UI measuring?  TT+DN locality?  Or is it TT+RS?  If the latter, and we are only 10% of the time doing TT mapper local to the region hosting server, then our TT+RS locality would seem to be broke &amp;#8211; or ineffective (either would be good to know).&lt;/p&gt;</comment>
                            <comment id="12735185" author="stack" created="Fri, 24 Jul 2009 22:06:52 +0000"  >&lt;p&gt;I ran a rowcounter job against a 100 region table of ~20M rows.  Cluster was small (4 regionservers).  Tasktrackers ran beside the RS.  Every task was scheduled on the TT that was local to the RS (&quot;Input Split Locations&quot; always had same value as &quot;Machine&quot; in the taskdetails page).&lt;/p&gt;</comment>
                            <comment id="12735207" author="streamy" created="Fri, 24 Jul 2009 23:32:03 +0000"  >&lt;p&gt;Thank you for researching, stack.&lt;/p&gt;

&lt;p&gt;Next week we&apos;ll have a ton of MR running on trunk so will report if we find anything strange.&lt;/p&gt;</comment>
                            <comment id="12735302" author="amansk" created="Sat, 25 Jul 2009 17:22:12 +0000"  >&lt;p&gt;I had this issue in 0.19. Not facing the problem in 0.20 though.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="12558267">HBASE-6111</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 20 Jul 2009 16:07:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25905</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 21 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hem7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99630</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>