<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:22:24 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-4833/HBASE-4833.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-4833] HRegionServer stops could be 0.5s faster</title>
                <link>https://issues.apache.org/jira/browse/HBASE-4833</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The current implementation of HRegionServer#stop is&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  public void stop(final String msg) {
    this.stopped = true;
    LOG.info(&quot;STOPPED: &quot; + msg);
    synchronized (this) {
      // Wakes run() if it is sleeping
      notifyAll(); // FindBugs NN_NAKED_NOTIFY
    }
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The notification is sent on the wrong object and does nothing. As a consequence, the region server continues to sleep instead of waking up and stopping immediately. A correct implementation is:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  public void stop(final String msg) {
    this.stopped = true;
    LOG.info(&quot;STOPPED: &quot; + msg);
    // Wakes run() if it is sleeping
    sleeper.skipSleepCycle();
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then the region server stops immediately. This makes the region server stops 0,5s faster on average, which is quite useful for unit tests.&lt;/p&gt;

&lt;p&gt;However, with this fix, TestRegionServerCoprocessorExceptionWithAbort does not work.&lt;br/&gt;
It likely because the code does no expect the region server to stop that fast. See &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4832&quot; title=&quot;TestRegionServerCoprocessorExceptionWithAbort fails if the region server stops too fast&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4832&quot;&gt;&lt;del&gt;HBASE-4832&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;
</description>
                <environment>&lt;p&gt;all&lt;/p&gt;</environment>
        <key id="12532085">HBASE-4833</key>
            <summary>HRegionServer stops could be 0.5s faster</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="nkeywal">Nicolas Liochon</assignee>
                                    <reporter username="nkeywal">Nicolas Liochon</reporter>
                        <labels>
                    </labels>
                <created>Sun, 20 Nov 2011 08:51:35 +0000</created>
                <updated>Mon, 5 Dec 2011 18:09:16 +0000</updated>
                            <resolved>Mon, 5 Dec 2011 18:09:16 +0000</resolved>
                                    <version>0.94.0</version>
                                                    <component>regionserver</component>
                    <component>test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13153981" author="stack" created="Mon, 21 Nov 2011 04:38:05 +0000"  >&lt;p&gt;+1 on patch but can&apos;t commit it if it breaks TestRegionServerCoprocessorExceptionWithAbort.  Any chance of including fix for that N?&lt;/p&gt;</comment>
                            <comment id="13154129" author="nkeywal" created="Mon, 21 Nov 2011 11:56:34 +0000"  >&lt;p&gt;I created &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4832&quot; title=&quot;TestRegionServerCoprocessorExceptionWithAbort fails if the region server stops too fast&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4832&quot;&gt;&lt;del&gt;HBASE-4832&lt;/del&gt;&lt;/a&gt; to follow the fix on TestRegionServerCoprocessorExceptionWithAbort and added a link.&lt;/p&gt;</comment>
                            <comment id="13157478" author="nkeywal" created="Sat, 26 Nov 2011 13:24:52 +0000"  >&lt;p&gt;The v2 is for the new trunk, can be integrated after or together with hbase-4832.&lt;/p&gt;</comment>
                            <comment id="13157543" author="yuzhihong@gmail.com" created="Sat, 26 Nov 2011 16:51:28 +0000"  >&lt;p&gt;Integrated to TRUNK.&lt;/p&gt;

&lt;p&gt;Thanks for the patch, N.&lt;/p&gt;</comment>
                            <comment id="13157593" author="hudson" created="Sat, 26 Nov 2011 19:48:38 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2486 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2486/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2486/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4833&quot; title=&quot;HRegionServer stops could be 0.5s faster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4833&quot;&gt;&lt;del&gt;HBASE-4833&lt;/del&gt;&lt;/a&gt; HRegionServer stops could be 0.5s faster (N Keywal)&lt;/p&gt;

&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13157686" author="hudson" created="Sun, 27 Nov 2011 07:02:15 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-security #11 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-security/11/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-security/11/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4833&quot; title=&quot;HRegionServer stops could be 0.5s faster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4833&quot;&gt;&lt;del&gt;HBASE-4833&lt;/del&gt;&lt;/a&gt; HRegionServer stops could be 0.5s faster (N Keywal)&lt;/p&gt;

&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                            <outwardlinks description="requires">
                                        <issuelink>
            <issuekey id="12532084">HBASE-4832</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is required by">
                                        <issuelink>
            <issuekey id="12527439">HBASE-4602</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12504424" name="4833_trunk_hregionserver.patch" size="741" author="nkeywal" created="Sun, 20 Nov 2011 08:53:25 +0000"/>
                            <attachment id="12505196" name="4833_trunk_hregionserver.v2.patch" size="698" author="nkeywal" created="Sat, 26 Nov 2011 13:23:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 21 Nov 2011 04:38:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>217821</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 3 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hsc7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>101853</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>