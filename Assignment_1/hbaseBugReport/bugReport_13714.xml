<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:45:58 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-13714/HBASE-13714.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-13714] Add tracking of the total response queue size</title>
                <link>https://issues.apache.org/jira/browse/HBASE-13714</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;I noticed this behavior while working on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13694&quot; title=&quot;CallQueueSize is incorrectly decremented until the response is sent&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13694&quot;&gt;&lt;del&gt;HBASE-13694&lt;/del&gt;&lt;/a&gt;:&lt;br/&gt;
Once we are done processing a request, we decrement the call queue size on the RPC server. However, responses can be very large and sometimes sending them can take a long time. Since we don&apos;t keep track the response queue via metrics it is hard to spot when the responses are using too much resources on the RS. &lt;/p&gt;

&lt;p&gt;Ideally we should be tracking on the RS how much data we have in-flight in the response queue via metrics and not just in the logs if the size of the response exceeds a threshold (e.g hbase.ipc.warn.response.size or hbase.ipc.warn.response.time)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12831157">HBASE-13714</key>
            <summary>Add tracking of the total response queue size</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="esteban">Esteban Gutierrez</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 May 2015 20:25:32 +0000</created>
                <updated>Fri, 18 Dec 2015 05:10:04 +0000</updated>
                                            <version>2.0.0</version>
                    <version>1.0.2</version>
                    <version>1.2.0</version>
                                                    <component>IPC/RPC</component>
                    <component>master</component>
                    <component>metrics</component>
                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="14650011" author="esteban" created="Fri, 31 Jul 2015 23:44:28 +0000"  >&lt;p&gt;This can be useful. For the last few months I&apos;ve been chasing a memstore/block cache/heap issue and until I analyzed a heap dump I discovered about 400 calls in-flight to the client using nearly 300MB of heap (the byte buffer used for the respohnse in some calls was close to 1MB) The cluster wasn&apos;t unstable at all but at certain times the heap utilization was very close to the maximum and even after flushes there was always an overhead that was not easy to identify.&lt;/p&gt;</comment>
                            <comment id="14650463" author="anoop.hbase" created="Sat, 1 Aug 2015 17:08:53 +0000"  >&lt;blockquote&gt;&lt;p&gt;the byte buffer used for the respohnse in some calls was close to 1MB&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This call was actually returning result of this size? Or much lesser?  Any idea u have?  We had an issue with the buffer (for cell block creation) size calculation in BoundedByteBufferPool&lt;/p&gt;</comment>
                            <comment id="14650470" author="esteban" created="Sat, 1 Aug 2015 17:28:58 +0000"  >&lt;p&gt;Correct, the call was returning a result of that size and no BoundedByteBufferPool involved here since this is an ancient HBase 0.92 cluster.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 1 Aug 2015 17:08:53 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 19 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ey9b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>