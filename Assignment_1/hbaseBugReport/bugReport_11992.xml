<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:28:36 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-11992/HBASE-11992.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-11992] Backport HBASE-11367 (Pluggable replication endpoint) to 0.98</title>
                <link>https://issues.apache.org/jira/browse/HBASE-11992</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;ReplicationSource tails the logs for each peer. &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11367&quot; title=&quot;Pluggable replication endpoint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11367&quot;&gt;&lt;del&gt;HBASE-11367&lt;/del&gt;&lt;/a&gt; introduces ReplicationEndpoint which is customizable per peer. ReplicationEndpoint is run in the same RS process and instantiated per replication peer per region server. Implementations of this interface handle the actual shipping of WAL edits to the remote cluster.&lt;/p&gt;

&lt;p&gt;This issue is for backporting &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11367&quot; title=&quot;Pluggable replication endpoint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11367&quot;&gt;&lt;del&gt;HBASE-11367&lt;/del&gt;&lt;/a&gt; to 0.98.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12741854">HBASE-11992</key>
            <summary>Backport HBASE-11367 (Pluggable replication endpoint) to 0.98</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ram_krish">ramkrishna.s.vasudevan</assignee>
                                    <reporter username="apurtell">Andrew Purtell</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Sep 2014 17:04:43 +0000</created>
                <updated>Fri, 20 Nov 2015 11:56:06 +0000</updated>
                            <resolved>Sat, 22 Nov 2014 17:32:27 +0000</resolved>
                                                    <fixVersion>0.98.9</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                                                            <comments>
                            <comment id="14135733" author="apurtell" created="Tue, 16 Sep 2014 17:05:27 +0000"  >&lt;p&gt;Attached 0.98 patch from &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11367&quot; title=&quot;Pluggable replication endpoint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11367&quot;&gt;&lt;del&gt;HBASE-11367&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14135737" author="ram_krish" created="Tue, 16 Sep 2014 17:07:08 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt; for raising this.  I will continue on this.  In a couple of days or probably beginning of next week.&lt;/p&gt;</comment>
                            <comment id="14135889" author="apurtell" created="Tue, 16 Sep 2014 18:24:56 +0000"  >&lt;p&gt;Preliminary comments on the patch, or things that should be in it.&lt;/p&gt;

&lt;p&gt;In hbase-client, the following classes don&apos;t have interface stability annotations but should all be marked Private: ReplicationFactory, ReplicationPeersZKImpl, ReplicationQueueInfo, ReplicationQueuesClient,  ReplicationQueuesClientZKImpl , ReplicationQueuesZKImpl, ReplicationStateZKBase, ReplicationTrackerZKImpl. I don&apos;t think users should have expected these be other than internal implementation. Changes to these should be fine. &lt;/p&gt;

&lt;p&gt;We don&apos;t have known users referencing these types. I checked Phoenix. &lt;/p&gt;

&lt;p&gt;Remove this TODO? We&apos;re not going to do this in 0.98, right?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@@ -80,6 +86,8 @@ &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; class ReplicationAdmin &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; Closeable {
       .toString(HConstants.REPLICATION_SCOPE_GLOBAL);
 
   &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; HConnection connection;
+  &lt;span class=&quot;code-comment&quot;&gt;// TODO: replication should be managed by master. All the classes except ReplicationAdmin should
&lt;/span&gt;+  &lt;span class=&quot;code-comment&quot;&gt;// be moved to hbase-server. Resolve it in HBASE-11392.
&lt;/span&gt;   &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; ReplicationQueuesClient replicationQueuesClient;
   &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; ReplicationPeers replicationPeers;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Synchronize methods that call reconnect() in the new class HBaseReplicationEndpoint:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
diff --git hbase-server/src/main/java/org/apache/hadoop/hbase/replication/HBaseReplicationEndpoint.java hbase-server/src/main/java/org/apache/hadoop/hbase/replication/HBaseReplicationEndpoint.java
&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; file mode 100644
index 0000000..4b9a28f
--- /dev/&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
+++ hbase-server/src/main/java/org/apache/hadoop/hbase/replication/HBaseReplicationEndpoint.java
[...]
+  @Override
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; UUID getPeerUUID() {
+    UUID peerUUID = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
+    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
+      peerUUID = ZKClusterId.getUUIDForCluster(zkw);
+    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (KeeperException ke) {
---&amp;gt; +      reconnect(ke);
+    }
+    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; peerUUID;
+  }
[...]
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; List&amp;lt;ServerName&amp;gt; getRegionServers() {
+    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
+      setRegionServers(fetchSlavesAddresses(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.getZkw()));
+    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (KeeperException ke) {
+      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (LOG.isDebugEnabled()) {
+        LOG.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Fetch salves addresses failed.&quot;&lt;/span&gt;, ke);
+      }
---&amp;gt; +      reconnect(ke);
+    }
+    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; regionServers;
+  }
[...]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The additional state in the ReplicationPeer znode pbuf introduces mixed-version-compatibility issues:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
diff --git hbase-protocol/src/main/protobuf/ZooKeeper.proto hbase-protocol/src/main/protobuf/ZooKeeper.proto
index 37816da..598385c 100644
--- hbase-protocol/src/main/protobuf/ZooKeeper.proto
+++ hbase-protocol/src/main/protobuf/ZooKeeper.proto
@@ -119,6 +119,9 @@ message ReplicationPeer {
   &lt;span class=&quot;code-comment&quot;&gt;// clusterkey is the concatenation of the slave cluster&apos;s
&lt;/span&gt;   &lt;span class=&quot;code-comment&quot;&gt;// hbase.zookeeper.quorum:hbase.zookeeper.property.clientPort:zookeeper.znode.parent
&lt;/span&gt;   required string clusterkey = 1;
+  optional string replicationEndpointImpl = 2;
+  repeated BytesBytesPair data = 3;
+  repeated NameStringPair configuration = 4;
 }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here, will this be enough for a mixed version deployment where add_peer might be executed on an older version and won&apos;t write the new fields of ReplicationState into the ZK node for the peer? Should we be checking a site file setting also? &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@@ -372,9 +381,32 @@ &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; class ReplicationSourceManager &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; ReplicationListener {
       LOG.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Passed replication source implementation &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; errors, &quot;&lt;/span&gt; +
           &lt;span class=&quot;code-quote&quot;&gt;&quot;defaulting to ReplicationSource&quot;&lt;/span&gt;, e);
       src = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ReplicationSource();
+    }
 
+    ReplicationEndpoint replicationEndpoint = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
+    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
+      &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; replicationEndpointImpl = peerConfig.getReplicationEndpointImpl();
+      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (replicationEndpointImpl == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
+        &lt;span class=&quot;code-comment&quot;&gt;// Default to HBase inter-cluster replication endpoint
&lt;/span&gt;+        replicationEndpointImpl = HBaseInterClusterReplicationEndpoint.class.getName();
+      }
+      @SuppressWarnings(&lt;span class=&quot;code-quote&quot;&gt;&quot;rawtypes&quot;&lt;/span&gt;)
+      &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; c = &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.forName(replicationEndpointImpl);
+      replicationEndpoint = (ReplicationEndpoint) c.newInstance();
+    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
+      LOG.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Passed replication endpoint implementation &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; errors&quot;&lt;/span&gt;, e);
+      &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IOException(e);
     }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Likewise, what happens when you add a peer with a custom replication endpoint impl setting but the work gets picked up by an older server? We can&apos;t ask a user or admin to disable replication while performing a rolling upgrade of either the source or destination clusters so I think it&apos;s necessary to document that customized replication endpoints are not supported in mixed version deployments, the fleet must be up to date before customized peer settings can be put in place. If we could ask older servers that cannot honor the new customization settings to stop replicating and let their work be transferred to the newer servers, that would also work, but we do not have this capability in the older code as far as I know. It may still be a good idea to add the notion of replication work versioning in case additional changes happen in this area, and forward port it to branch-1 and trunk. Thoughts?&lt;/p&gt;</comment>
                            <comment id="14135891" author="apurtell" created="Tue, 16 Sep 2014 18:25:55 +0000"  >&lt;p&gt;Ping &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jesse_yates&quot; class=&quot;user-hover&quot; rel=&quot;jesse_yates&quot;&gt;Jesse Yates&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14135909" author="apurtell" created="Tue, 16 Sep 2014 18:32:32 +0000"  >&lt;p&gt;I also wonder about service migration when upgrading from 0.98 to 1.0, which is supposed to be wire compatible and should have the same mixed-version deployment tolerance as 0.98. In order to stage in customized replication endpoints do we require remove_peer then add_peer, instead of an online migration and update of existing replication sources? The former implies service downtime or some edits that should have been replicated will be missed between remove and (re)add, the latter does not. &lt;/p&gt;

&lt;p&gt;Of course, if we add this feature in 0.98 the upgrade concerns to 1.0 are moot, but we then need to deal with this intra 0.98 minor release variations.&lt;/p&gt;</comment>
                            <comment id="14136399" author="enis" created="Tue, 16 Sep 2014 22:40:08 +0000"  >&lt;blockquote&gt;&lt;p&gt;I think it&apos;s necessary to document that customized replication endpoints are not supported in mixed version deployments, the fleet must be up to date before customized peer settings can be put in place&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I think this is reasonable. Usually, admins should finish for any rolling upgrade to finish before using a particular feature. &lt;/p&gt;</comment>
                            <comment id="14169084" author="ram_krish" created="Mon, 13 Oct 2014 08:49:37 +0000"  >&lt;p&gt;Created an udpated patch on this.  Will run all the testcases before I address the review comments.&lt;/p&gt;</comment>
                            <comment id="14170699" author="ram_krish" created="Tue, 14 Oct 2014 09:00:52 +0000"  >&lt;p&gt;Patch for 0.98. All tests passes.  All the replication related tests also passes.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;&lt;br/&gt;
Address your review comments also.&lt;br/&gt;
Coming to the cross version compatibility issues&lt;br/&gt;
-&amp;gt; Documentation would definitely be needed.&lt;br/&gt;
But is it ok to take this up in a 0.98 minor release even? &lt;/p&gt;</comment>
                            <comment id="14170835" author="ram_krish" created="Tue, 14 Oct 2014 12:01:22 +0000"  >&lt;p&gt;Tested upgrade scenarios before and after the patch.&lt;br/&gt;
1) Without patch started two servers and inserted some data.  Ensure replication was on between these two servers.  Read back the data from the peer cluster.  Data was found.&lt;br/&gt;
2) Stopped the parent cluster region server and master.&lt;br/&gt;
3) Applied the patch on the parent cluster. &lt;br/&gt;
4) Read back the data from both the clusters.  &lt;br/&gt;
5) Inserted new data in the parent cluster. &lt;br/&gt;
6) Read back the data from the peer cluster.  New data was found.&lt;br/&gt;
7) Stopped the peer cluster -both master and region server.&lt;br/&gt;
8) Applied the patch on the peer cluster.&lt;br/&gt;
9) Read back the data from peer cluster.&lt;br/&gt;
10) Inserted new data from the parent cluster.&lt;br/&gt;
11) Read back the data from the peer cluster. New data was found.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;,&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt;&lt;br/&gt;
Anything else to be verified?  Let me know. Thanks!!&lt;/p&gt;</comment>
                            <comment id="14171068" author="apurtell" created="Tue, 14 Oct 2014 15:26:36 +0000"  >&lt;blockquote&gt;&lt;p&gt;Tested upgrade scenarios before and after the patch.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;So you started two clusters, one master and one RS each? That won&apos;t test exactly the scenario of concern. Would it be possible for you to test again with two clusters where at least two RSes are replicating in each? Only upgrade the RSes, one at a time. &lt;/p&gt;</comment>
                            <comment id="14171162" author="ram_krish" created="Tue, 14 Oct 2014 16:19:49 +0000"  >&lt;blockquote&gt;&lt;p&gt;Would it be possible for you to test again with two clusters where at least two RSes are replicating in each?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;For now I don&apos;t have such a set up with me &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;. I will see what can I do. &lt;/p&gt;</comment>
                            <comment id="14172145" author="ram_krish" created="Wed, 15 Oct 2014 08:37:16 +0000"  >&lt;blockquote&gt;&lt;p&gt;Would it be possible for you to test again with two clusters where at least two RSes are replicating in each? Only upgrade the RSes, one at a time.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I did this test as suggested. &lt;br/&gt;
1) Started two clusters with one master and 2 RSes each.&lt;br/&gt;
2) Created 3 tables in each cluster with REPLICATION_SCOPE and ensured that atleast one table is present in each RS.&lt;br/&gt;
3) Inserted data into all tables&lt;br/&gt;
4) Scanned the peer cluster and read back all the data from all the tables.&lt;br/&gt;
5) Stopped one RS in the main cluster.&lt;br/&gt;
6) Applied the patch and issued balance such that the newly started RS also has some table.&lt;br/&gt;
7) Inserted data into that table &lt;br/&gt;
8) Scan the peer cluster to read back all the data&lt;br/&gt;
9) Stop the RS in the peer cluster.&lt;br/&gt;
10) Apply the patch in the peer cluster for one RS.  Read back all the data and do balancing such that we have tables in this RS also&lt;br/&gt;
11) Insert new data from the main cluster.&lt;br/&gt;
12) Scan the data in the peer cluster and ensure all the new data is also available&lt;br/&gt;
13) Apply patch on the other RS in the main cluster.&lt;br/&gt;
14) Balance the cluster and add new data to all the tables.&lt;br/&gt;
15) Scan the peer clusters and ensure all the data is available.&lt;br/&gt;
I think the basic scenarios are working fine.  What do you think &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;,&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="14172542" author="apurtell" created="Wed, 15 Oct 2014 16:27:24 +0000"  >&lt;p&gt;Thanks, yes that sounds better. Please consider putting the patch up on RB, it&apos;s a large one.&lt;/p&gt;</comment>
                            <comment id="14172554" author="apurtell" created="Wed, 15 Oct 2014 16:32:49 +0000"  >&lt;p&gt;When doing the test above did you ensure/observe both the old version peer and new version peer were both picking up replication work at the same time in the same source cluster? &lt;/p&gt;</comment>
                            <comment id="14172602" author="ram_krish" created="Wed, 15 Oct 2014 17:03:01 +0000"  >&lt;blockquote&gt;&lt;p&gt;When doing the test above did you ensure/observe both the old version peer and new version peer were both picking up replication work at the same time in the same source cluster?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;You mean both the peers were able to get the new edits? Yes.  It was able to.  Do you suspect any specific behaviour?&lt;/p&gt;</comment>
                            <comment id="14172608" author="ram_krish" created="Wed, 15 Oct 2014 17:05:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/26756&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/26756&lt;/a&gt; - RB link&lt;/p&gt;</comment>
                            <comment id="14184840" author="ram_krish" created="Mon, 27 Oct 2014 05:03:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;,&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell%40yahoo.com&quot; class=&quot;user-hover&quot; rel=&quot;apurtell@yahoo.com&quot;&gt;Andrew Purtell&lt;/a&gt;&lt;br/&gt;
Pls a take a look at the RB. Would be useful to get the feature dependent on this to 0.98. (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11639&quot; title=&quot;[Visibility controller] Replicate the visibility of Cells as strings&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11639&quot;&gt;&lt;del&gt;HBASE-11639&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="14189325" author="apurtell" created="Wed, 29 Oct 2014 23:55:07 +0000"  >&lt;p&gt;So far I&apos;ve confirmed the patch on RB contains the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11963&quot; title=&quot;Synchronize peer cluster replication connection attempts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11963&quot;&gt;&lt;del&gt;HBASE-11963&lt;/del&gt;&lt;/a&gt; and does &lt;b&gt;not&lt;/b&gt; contain configuration changes in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11964&quot; title=&quot;Improve spreading replication load from failed regionservers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11964&quot;&gt;&lt;del&gt;HBASE-11964&lt;/del&gt;&lt;/a&gt; or other changes from defaults in 0.98. &lt;/p&gt;

&lt;p&gt;The TODO I mentioned above is still there but that&apos;s a trivial matter.&lt;/p&gt;

&lt;p&gt;Let me try this out on a cluster. I will also be back for another pass over the patch.&lt;/p&gt;</comment>
                            <comment id="14192855" author="apurtell" created="Sat, 1 Nov 2014 01:10:25 +0000"  >&lt;p&gt;Got sidetracked. Will look at this next week. Here&apos;s an updated patch that I will be testing, fixed up to include &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12386&quot; title=&quot;Replication gets stuck following a transient zookeeper error to remote peer cluster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12386&quot;&gt;&lt;del&gt;HBASE-12386&lt;/del&gt;&lt;/a&gt;, which I just committed. &lt;/p&gt;</comment>
                            <comment id="14194241" author="ram_krish" created="Mon, 3 Nov 2014 04:46:01 +0000"  >&lt;blockquote&gt;&lt;p&gt;fixed up to include &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12386&quot; title=&quot;Replication gets stuck following a transient zookeeper error to remote peer cluster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12386&quot;&gt;&lt;del&gt;HBASE-12386&lt;/del&gt;&lt;/a&gt;, &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;.  This would ensure that we have the updated code in 0.98 also.  Thanks for your time too.&lt;/p&gt;</comment>
                            <comment id="14195653" author="apurtell" created="Tue, 4 Nov 2014 03:28:23 +0000"  >&lt;p&gt;Let&apos;s schedule this for 0.98.9&lt;/p&gt;</comment>
                            <comment id="14217349" author="ram_krish" created="Wed, 19 Nov 2014 03:43:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;&lt;br/&gt;
Do you have time to check this now?  &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11639&quot; title=&quot;[Visibility controller] Replicate the visibility of Cells as strings&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11639&quot;&gt;&lt;del&gt;HBASE-11639&lt;/del&gt;&lt;/a&gt; is getting some feedback now and may be once we are coming to a closure on that we may need to apply the same on 0.98 over this JIRA. What do you think?&lt;/p&gt;</comment>
                            <comment id="14217395" author="apurtell" created="Wed, 19 Nov 2014 04:27:25 +0000"  >&lt;p&gt;Yes sir, the release is out so let&apos;s get this in. Will try it on two small clusters with chaos this week. &lt;/p&gt;</comment>
                            <comment id="14217443" author="ram_krish" created="Wed, 19 Nov 2014 05:31:12 +0000"  >&lt;p&gt;Thanks a lot &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14221665" author="apurtell" created="Sat, 22 Nov 2014 00:52:36 +0000"  >&lt;p&gt;Thanks for your patience &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ram_krish&quot; class=&quot;user-hover&quot; rel=&quot;ram_krish&quot;&gt;ramkrishna.s.vasudevan&lt;/a&gt;. I tested the following scenarios with the latest patch on this issue rebased on top of 7750a1f (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12346&quot; title=&quot;Scan&amp;#39;s default auths behavior under Visibility labels&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12346&quot;&gt;&lt;del&gt;HBASE-12346&lt;/del&gt;&lt;/a&gt; addendum): &lt;a href=&quot;https://github.com/apurtell/hbase/commit/aca7161&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apurtell/hbase/commit/aca7161&lt;/a&gt; &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Cluster 1 to 2 unidirectional, load 1M rows on 1: All 1M rows OK on 1 and 2&lt;/li&gt;
	&lt;li&gt;Clusters 1 and 2 bidirectional, load 1M rows on 1: All 1M rows OK on 1 and 2&lt;/li&gt;
	&lt;li&gt;Clusters 1 and 2 bidirectional, load 1M rows on 1 and 2: All 2M rows OK on 1 and 2&lt;/li&gt;
	&lt;li&gt;Cluster 1 to 2 unidirectional, load 1M rows on 1, kill RS on 1 and restart during load: All 1M rows OK on 1 and 2&lt;/li&gt;
	&lt;li&gt;Cluster 1 to 2 unidirectional, load on 1, kill RS on 2 and restart during load: All 1M rows OK on 1 and 2&lt;/li&gt;
	&lt;li&gt;Cluster 1 and 2 bidirectional, load 10M rows on 1 and 2: All 20M rows OK on 1 and 2&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;m going to commit this shortly to 0.98 unless objection.&lt;/p&gt;</comment>
                            <comment id="14221692" author="virag" created="Sat, 22 Nov 2014 01:16:15 +0000"  >&lt;p&gt;Skimmed the patch and looks fine to me. &lt;br/&gt;
Only one problem I could notice in TableCFsTracker: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Override
     &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; void nodeDataChanged(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; path) {
       &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (path.equals(node)) {
         &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.nodeDataChanged(path);
         readTableCFsZnode();
       }
     }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This isn&apos;t right. Master branch doesn&apos;t have readTableCFsZnode() in this method. &lt;/p&gt;
</comment>
                            <comment id="14221708" author="apurtell" created="Sat, 22 Nov 2014 01:29:16 +0000"  >&lt;blockquote&gt;&lt;p&gt;Only one problem I could notice in TableCFsTracker:&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Alright, holding off commit until &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ram_krish&quot; class=&quot;user-hover&quot; rel=&quot;ram_krish&quot;&gt;ramkrishna.s.vasudevan&lt;/a&gt; can comment on this and/or provide an updated patch.&lt;/p&gt;</comment>
                            <comment id="14221857" author="ram_krish" created="Sat, 22 Nov 2014 07:05:56 +0000"  >&lt;p&gt;This JIRA&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12136&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-12136&lt;/a&gt; has done some change here. I will update the patch accordingly.&lt;br/&gt;
Many thanks to @apurtell for the testing and to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=virag&quot; class=&quot;user-hover&quot; rel=&quot;virag&quot;&gt;Virag Kothari&lt;/a&gt; for the reviews.&lt;/p&gt;</comment>
                            <comment id="14221864" author="ram_krish" created="Sat, 22 Nov 2014 07:38:57 +0000"  >&lt;p&gt;Updated patch that addresses &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=virag&quot; class=&quot;user-hover&quot; rel=&quot;virag&quot;&gt;Virag Kothari&lt;/a&gt;&apos;s comment.&lt;/p&gt;</comment>
                            <comment id="14222040" author="apurtell" created="Sat, 22 Nov 2014 16:47:59 +0000"  >&lt;p&gt;The latest patch contains two changes, this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
diff --git a/hbase-client/src/main/java/org/apache/hadoop/hbase/replication/Repl
index 537fd60..33eaba3 100644
--- a/hbase-client/src/main/java/org/apache/hadoop/hbase/replication/Replication
+++ b/hbase-client/src/main/java/org/apache/hadoop/hbase/replication/Replication
@@ -321,7 +321,6 @@ &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; class ReplicationPeerZKImpl &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; ReplicationPee
     &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; void nodeDataChanged(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; path) {
       &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (path.equals(node)) {
         &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.nodeDataChanged(path);
-        readTableCFsZnode();
       }
     }
   }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and a change to the imports of ZooKeeperScanPolicyObserver in hbase-examples, changing wildcards to class-by-class imports, etc. I&apos;m going to drop that hunk. Attaching updated patch.&lt;/p&gt;

&lt;p&gt;The other change in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12136&quot; title=&quot;Race condition between client adding tableCF replication znode and  server triggering TableCFsTracker&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12136&quot;&gt;&lt;del&gt;HBASE-12136&lt;/del&gt;&lt;/a&gt;, to ReplicationPeersZKImpl, was previously incorporated.&lt;/p&gt;</comment>
                            <comment id="14222047" author="apurtell" created="Sat, 22 Nov 2014 16:57:31 +0000"  >&lt;p&gt;Reran tests:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Cluster 1 to 2 unidirectional, load 1M rows on 1: All 1M rows OK on 1 and 2&lt;/li&gt;
	&lt;li&gt;Clusters 1 and 2 bidirectional, load 1M rows on 1: All 1M rows OK on 1 and 2&lt;/li&gt;
	&lt;li&gt;Clusters 1 and 2 bidirectional, load 1M rows on 1 and 2: All 2M rows OK on 1 and 2&lt;/li&gt;
	&lt;li&gt;Cluster 1 to 2 unidirectional, load 1M rows on 1, kill RS on 1 and restart during load: All 1M rows OK on 1 and 2&lt;/li&gt;
	&lt;li&gt;Cluster 1 to 2 unidirectional, load on 1, kill RS on 2 and restart during load: All 1M rows OK on 1 and 2&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;And a new one:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Cluster 1 to 2 unidirectional, load on 1, kill RS on 1 and restart, then kill RS on 2 and restart, repeat kills in sequence until load completes: All 1M rows OK on 1 and 2&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14222057" author="apurtell" created="Sat, 22 Nov 2014 17:32:27 +0000"  >&lt;p&gt;Replication unit tests pass locally. Pushed to 0.98. &lt;/p&gt;</comment>
                            <comment id="14222153" author="hudson" created="Sat, 22 Nov 2014 20:03:34 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98 #695 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/695/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/695/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11992&quot; title=&quot;Backport HBASE-11367 (Pluggable replication endpoint) to 0.98&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11992&quot;&gt;&lt;del&gt;HBASE-11992&lt;/del&gt;&lt;/a&gt; Backport &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11367&quot; title=&quot;Pluggable replication endpoint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11367&quot;&gt;&lt;del&gt;HBASE-11367&lt;/del&gt;&lt;/a&gt; (Pluggable replication endpoint) to 0.98 (Ramkrishna S. Vasudevan) (apurtell: rev 25be14686f281949c0e9e16d0c3875a11e990518)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationPeers.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesZKImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationPeerConfig.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/HBaseInterfaceAudience.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogKey.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/ScopeWALEntryFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/ReplicationEndpoint.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationFactory.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/zookeeper/ZKClusterId.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSinkManager.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/protobuf/ZooKeeper.proto&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/ReplicationSourceDummy.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/client/replication/TestReplicationAdmin.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationStateBasic.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSourceInterface.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/MetricsSource.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesClient.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/ZooKeeperProtos.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSourceManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/ChainWALEntryFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationWALEntryFilters.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationTrackerZKImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/regionserver/TestReplicationSinkManager.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationPeer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/WALEntryFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesClientZKImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLog.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/HBaseReplicationEndpoint.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestPerTableCFReplication.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationPeersZKImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/master/ReplicationLogCleaner.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/SystemTableWALEntryFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/TableCfWALEntryFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationPeerZKImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/WALEdit.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationTrackerZKImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationStateZKBase.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/replication/ReplicationAdmin.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/BaseReplicationEndpoint.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationEndpoint.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueueInfo.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/HBaseInterClusterReplicationEndpoint.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/replication/VerifyReplication.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14222169" author="hudson" created="Sat, 22 Nov 2014 20:31:55 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98-on-Hadoop-1.1 #662 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/662/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/662/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11992&quot; title=&quot;Backport HBASE-11367 (Pluggable replication endpoint) to 0.98&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11992&quot;&gt;&lt;del&gt;HBASE-11992&lt;/del&gt;&lt;/a&gt; Backport &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11367&quot; title=&quot;Pluggable replication endpoint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11367&quot;&gt;&lt;del&gt;HBASE-11367&lt;/del&gt;&lt;/a&gt; (Pluggable replication endpoint) to 0.98 (Ramkrishna S. Vasudevan) (apurtell: rev 25be14686f281949c0e9e16d0c3875a11e990518)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/WALEntryFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogKey.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesClient.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/ReplicationSourceDummy.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationTrackerZKImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/HBaseReplicationEndpoint.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationStateBasic.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationStateZKBase.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSinkManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/WALEdit.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueueInfo.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationPeersZKImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationPeer.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/protobuf/ZooKeeper.proto&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/BaseReplicationEndpoint.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/ScopeWALEntryFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/ChainWALEntryFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesZKImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestPerTableCFReplication.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSourceManager.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesClientZKImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLog.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/replication/VerifyReplication.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationTrackerZKImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/client/replication/TestReplicationAdmin.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/replication/ReplicationAdmin.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationWALEntryFilters.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/MetricsSource.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationPeers.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationFactory.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationEndpoint.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/HBaseInterClusterReplicationEndpoint.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/ReplicationEndpoint.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationPeerZKImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/regionserver/TestReplicationSinkManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSourceInterface.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/HBaseInterfaceAudience.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationPeerConfig.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/master/ReplicationLogCleaner.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/zookeeper/ZKClusterId.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/ZooKeeperProtos.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/TableCfWALEntryFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/SystemTableWALEntryFilter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14222654" author="ram_krish" created="Mon, 24 Nov 2014 04:44:03 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt; for the tests and committing this to 0.98 branch.&lt;/p&gt;</comment>
                            <comment id="15016659" author="lars_francke" created="Fri, 20 Nov 2015 11:56:06 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12759075">HBASE-12619</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12721560">HBASE-11367</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12745175">HBASE-12136</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12751777">HBASE-12386</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12683059" name="HBASE-11992-0.98.patch" size="252745" author="apurtell" created="Sat, 22 Nov 2014 16:49:04 +0000"/>
                            <attachment id="12674728" name="HBASE-11992_0.98_1.patch" size="251016" author="ram_krish" created="Tue, 14 Oct 2014 09:00:52 +0000"/>
                            <attachment id="12678639" name="HBASE-11992_0.98_2.patch" size="252757" author="apurtell" created="Sat, 1 Nov 2014 01:10:25 +0000"/>
                            <attachment id="12683042" name="HBASE-11992_0.98_3.patch" size="253281" author="ram_krish" created="Sat, 22 Nov 2014 07:38:57 +0000"/>
                            <attachment id="12669098" name="hbase-11367_0.98.patch" size="234065" author="apurtell" created="Tue, 16 Sep 2014 17:05:07 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12747960">HBASE-12253</subtask>
                            <subtask id="12748017">HBASE-12254</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 16 Sep 2014 17:07:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i203yv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>