<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:58:28 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-2039/HBASE-2039.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-2039] G1 GC issues</title>
                <link>https://issues.apache.org/jira/browse/HBASE-2039</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Lets keep an issue where we report on g1 issues.  Lets keep list of crashes we see.&lt;/p&gt;

&lt;p&gt;I filed an issue up on bug parade.  Lets see if it becomes actual bug.  Below I note version of vm and the type of crash (Internal Error (nmethod.cpp:1981), pid=32319..... Its a &apos;fatal error&apos;).  It happens for me after 5-10 minutes when a loading test.  Same thing each time.&lt;/p&gt;

&lt;p&gt;G1 in 1.6 seems plain broke; crashes on use of stuff in concurrent utils package.&lt;/p&gt;

&lt;p&gt;Date Created: Thu Dec 10 13:33:04 MST 2009&lt;br/&gt;
..&lt;br/&gt;
Synopsis:    Running G1 GC, crashes with &quot; Internal Error (nmethod.cpp:1981), pid=32319...&quot;&lt;br/&gt;
Description:&lt;br/&gt;
 FULL PRODUCT VERSION :&lt;br/&gt;
java version &quot;1.7.0-ea&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.7.0-ea-b77)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 17.0-b05, mixed mode)&lt;/p&gt;

&lt;p&gt;FULL OS VERSION :&lt;br/&gt;
Fedora Core release 6 (Zod)&lt;/p&gt;

&lt;p&gt;EXTRA RELEVANT SYSTEM CONFIGURATION :&lt;br/&gt;
Here are the JVM args:&lt;/p&gt;

&lt;p&gt;-XX:+HeapDumpOnOutOfMemoryError -XX:+UnlockExperimentalVMOptions -XX:+UseG1GC&lt;/p&gt;</description>
                <environment></environment>
        <key id="12443037">HBASE-2039</key>
            <summary>G1 GC issues</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12539516">HBASE-5261</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Dec 2009 21:30:39 +0000</created>
                <updated>Tue, 9 Jul 2013 15:50:10 +0000</updated>
                            <resolved>Tue, 9 Jul 2013 15:50:10 +0000</resolved>
                                                                        <due></due>
                            <votes>1</votes>
                                    <watches>11</watches>
                                                                <comments>
                            <comment id="12789648" author="stack" created="Sat, 12 Dec 2009 01:49:10 +0000"  >&lt;p&gt;The way we get heap size doesn&apos;t seem to work when G1 in operation:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2009-12-10 22:50:50,216 [IPC Server handler 8 on 60020] INFO org.apache.hadoop.hbase.regionserver.MemStoreFlusher: Forced flushing of TestTable,0012079792,1260483094491 because global memstore limit of 3.2m exceeded; currently 
19.1m and flushing till 2.0m
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Heap in above is actually 3.4G&lt;/p&gt;</comment>
                            <comment id="12789650" author="ryanobjc" created="Sat, 12 Dec 2009 01:55:23 +0000"  >&lt;p&gt;I&apos;ve seen this before... the solution is to set Xms=Xmx. Not ideal but a workaround for now.&lt;/p&gt;</comment>
                            <comment id="12791281" author="apurtell" created="Wed, 16 Dec 2009 09:28:26 +0000"  >&lt;p&gt;I thought I would try G1 out again tonight. Simple all-localhost config, using &lt;a href=&quot;file:///&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:///&lt;/a&gt; rootdir on /tmp, running PE randomWrite 1:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;#  SIGSEGV (0xb) at pc=0x00007f05f888f201, pid=19186, tid=139663553251600
#
# JRE version: 6.0_16-b01
# Java VM: Java HotSpot(TM) 64-Bit Server VM (14.2-b01 mixed mode linux-amd64 )
# Problematic frame:
# V  [libjvm.so+0x31d201]

Current thread (0x00000000419b6000):  GCTaskThread 
    [stack: 0x0000000000000000,0x0000000000000000] [id=19199]
siginfo:si_signo=SIGSEGV: si_errno=0, si_code=128 (), si_addr=0x0000000000000000

Registers:
RAX=0x0000000000000001, RBX=0x00007f05d3e52b00, RCX=0x00007f05f8e26d70, 
RDX=0x4141414158585858, RSP=0x00007f05f47a6fc0, RBP=0x00007f05f47a7010, 
RSI=0x00007f05d3e52b00, RDI=0x4141414158585868,R8 =0x00007f05ef100000,
R9 =0x0000000007d00000, R10=0x00000000419da520, R11=0x0000000000000235,
R12=0x00007f05f47ab5c0, R13=0x00007f05d3e52b00, R14=0x00007f05f47ab5c0,
R15=0x00000000419b9830, RIP=0x00007f05f888f201, EFL=0x0000000000010246,
CSGSFS=0x0000000000000033, ERR=0x0000000000000000
TRAPNO=0x000000000000000d
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12792039" author="stack" created="Thu, 17 Dec 2009 18:14:23 +0000"  >&lt;p&gt;The G1 in 1.6 fails for me in concurrent utils package with a regularity, something it doesn&apos;t do in 1.7.  I get further when I use jdk7.  Maybe try it?  I did a search on &apos;IGSEGV (0xb) at pc=0x00007f05f888f201, pid=19186&apos;  It turned up a few hits.  Were you running on xen?  There is also this: &lt;a href=&quot;http://icedtea.classpath.org/bugzilla/show_bug.cgi?id=109&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://icedtea.classpath.org/bugzilla/show_bug.cgi?id=109&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12800647" author="apurtell" created="Fri, 15 Jan 2010 10:00:53 +0000"  >&lt;p&gt;6u18 is out with a number of G1 fixes listed in the release notes. Might be worth trying out.&lt;/p&gt;</comment>
                            <comment id="12835597" author="stack" created="Fri, 19 Feb 2010 05:47:19 +0000"  >&lt;p&gt;6u18 running CMS crashes on me though adding  -XX:-ReduceInitialCardMarks  might help if I read a recent note up on the gc list properly.  Its the datanode that crashes on me.&lt;/p&gt;

&lt;p&gt;1.7.0b83 is best I&apos;ve run so far.  It ran the longest.  It OOME&apos;d and then SIGSEGV&apos;d dumping the heap.  I reported it.  Still not there it seems.&lt;/p&gt;</comment>
                            <comment id="12835614" author="stack" created="Fri, 19 Feb 2010 06:53:15 +0000"  >&lt;p&gt;I removed -XX:-ReduceInitialCardMarks from list of JVM args when running with G1 and got the below pretty quickly.&lt;/p&gt;

&lt;p&gt;#&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;A fatal error has been detected by the Java Runtime Environment:&lt;br/&gt;
#&lt;/li&gt;
	&lt;li&gt;Internal Error (nmethod.cpp:2013), pid=31341, tid=1093945664&lt;/li&gt;
	&lt;li&gt;Error: guarantee(cont_offset != 0,&quot;unhandled implicit exception in compiled code&quot;)&lt;br/&gt;
#&lt;/li&gt;
	&lt;li&gt;JRE version: 7.0-b83&lt;/li&gt;
	&lt;li&gt;Java VM: Java HotSpot(TM) 64-Bit Server VM (17.0-b09 mixed mode linux-amd64 )&lt;/li&gt;
	&lt;li&gt;An error report file with more information is saved as:&lt;/li&gt;
	&lt;li&gt;/home/stack/0.20-head/hs_err_pid31341.log&lt;br/&gt;
#&lt;/li&gt;
	&lt;li&gt;If you would like to submit a bug report, please visit:&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://java.sun.com/webapps/bugreport/crash.jsp&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://java.sun.com/webapps/bugreport/crash.jsp&lt;/a&gt;&lt;br/&gt;
#&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;I reported it.&lt;/p&gt;

&lt;p&gt;Adding back in the option, I seem to get the pretty-good stability again. &lt;/p&gt;

&lt;p&gt;i got the above option from this email: &lt;a href=&quot;http://mail.openjdk.java.net/pipermail/hotspot-gc-use/2010-February/000512.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://mail.openjdk.java.net/pipermail/hotspot-gc-use/2010-February/000512.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12835849" author="stack" created="Fri, 19 Feb 2010 17:46:44 +0000"  >&lt;p&gt;I ran more loadings overnight and it crashed again with above &quot;Internal Error&quot; after a while.  Its better, but it crashes too much still.&lt;/p&gt;

&lt;p&gt;The thread cited above had more added to it overnight.  A few interesting points made:&lt;/p&gt;

&lt;p&gt;+ G1 uses way more CPU and its much spikier than CMS&lt;br/&gt;
+ Pauses are longer than those in CMS it seems&lt;/p&gt;

&lt;p&gt;Looks like it has a ways to go yet.&lt;/p&gt;

&lt;p&gt;The thread also talks of stuff being done in jdk7 not yet available to help with fragmentation running CMS (currently only available if support contract): &lt;a href=&quot;http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6631166&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6631166&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="12973034" author="stack" created="Sun, 19 Dec 2010 18:47:43 +0000"  >&lt;p&gt;Up on the list Friso says u21 stays up for him.&lt;/p&gt;

&lt;p&gt;Also, here is link to Todds thread w/ GC team trying to get to the bottom of stop-the-world pauses in G1 and in CMS: &lt;a href=&quot;http://mail.openjdk.java.net/pipermail/hotspot-gc-use/2010-July/000653.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://mail.openjdk.java.net/pipermail/hotspot-gc-use/2010-July/000653.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13227253" author="stack" created="Sun, 11 Mar 2012 22:24:08 +0000"  >&lt;p&gt;A post by Jonathan Payne on G1 not working for him: &lt;a href=&quot;http://printfdebugger.tumblr.com/post/19142660766/how-i-learned-to-love-cms-and-had-my-heart-broken-by-g1&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://printfdebugger.tumblr.com/post/19142660766/how-i-learned-to-love-cms-and-had-my-heart-broken-by-g1&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13227254" author="stack" created="Sun, 11 Mar 2012 22:24:08 +0000"  >&lt;p&gt;A post by Jonathan Payne on G1 not working for him: &lt;a href=&quot;http://printfdebugger.tumblr.com/post/19142660766/how-i-learned-to-love-cms-and-had-my-heart-broken-by-g1&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://printfdebugger.tumblr.com/post/19142660766/how-i-learned-to-love-cms-and-had-my-heart-broken-by-g1&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13506374" author="xieliang007" created="Thu, 29 Nov 2012 10:33:09 +0000"  >&lt;p&gt;en, it&apos;s not recommented to enable G1 before jdk7u4&lt;br/&gt;
we need to reevaluate this issue with jdk7u4+ again,IMHO&lt;/p&gt;</comment>
                            <comment id="13703406" author="apurtell" created="Tue, 9 Jul 2013 15:50:10 +0000"  >&lt;p&gt;7u4 was the release where G1 is officially marked as stable. Sematext is running with G1 enabled: &lt;a href=&quot;http://blog.sematext.com/2013/06/24/g1-cms-java-garbage-collector&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://blog.sematext.com/2013/06/24/g1-cms-java-garbage-collector&lt;/a&gt;. I&apos;ve been running cluster tests with G1 and haven&apos;t observed issues. Resolving as &apos;Cannot Reproduce&apos;. Reopen if G1 crashes are observed post 7u4.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12430163">HBASE-1648</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 12 Dec 2009 01:55:23 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26113</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 23 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02dy7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11861</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>