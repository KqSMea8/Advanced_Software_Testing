<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:16:40 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-4188/HBASE-4188.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-4188] c</title>
                <link>https://issues.apache.org/jira/browse/HBASE-4188</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;This issue is a continuation of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1938&quot; title=&quot;Make in-memory table scanning faster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1938&quot;&gt;&lt;del&gt;HBASE-1938&lt;/del&gt;&lt;/a&gt; work (That issue is closed).  This issue is about getting the last patch posted by nkeywal over in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1938&quot; title=&quot;Make in-memory table scanning faster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1938&quot;&gt;&lt;del&gt;HBASE-1938&lt;/del&gt;&lt;/a&gt; applied (assigned nkeywal since he&apos;s done the work).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12518510">HBASE-4188</key>
            <summary>c</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="nkeywal">Nicolas Liochon</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Aug 2011 20:16:38 +0000</created>
                <updated>Fri, 20 Nov 2015 11:55:22 +0000</updated>
                            <resolved>Fri, 16 Sep 2011 20:26:47 +0000</resolved>
                                                    <fixVersion>0.92.0</fixVersion>
                                    <component>Performance</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13089796" author="stack" created="Tue, 23 Aug 2011 21:51:42 +0000"  >&lt;p&gt;Here is the patch we are talking about: &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12489104/20110802_MemStore.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12489104/20110802_MemStore.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Patch looks good.  Running 50 TestHRegions on 0.90 in a row....&lt;/p&gt;
</comment>
                            <comment id="13089821" author="stack" created="Tue, 23 Aug 2011 22:25:24 +0000"  >&lt;p&gt;So, it looks like timing difference seen by Andrew is no longer present: with patch loads happen faster and though the timings have wide variance, after a few runs, with patch we seem to faster.&lt;/p&gt;

&lt;p&gt;Here is a run of MemStoreScanPerformance before I applied above patch:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
stack-7:0.90 Stack$ ./bin/hbase org.apache.hadoop.hbase.regionserver.MemStoreScanPerformance
JUnit version 4.8.1
.Loaded in 2479 ms
Scan with size 50000: 177 ms
Scan with size 50000: 185 ms
Scan with size 50000: 234 ms
Scan with size 50000: 86 ms
Scan with size 50000: 115 ms
Scan with size 50000: 92 ms
Scan with size 50000: 53 ms
Scan with size 50000: 58 ms
Scan with size 50000: 69 ms
Scan with size 50000: 61 ms
Loaded in 3134 ms
Scan with size 75000: 77 ms
Scan with size 75000: 87 ms
Scan with size 75000: 88 ms
Scan with size 75000: 84 ms
Scan with size 75000: 71 ms
Scan with size 75000: 110 ms
Scan with size 75000: 109 ms
Scan with size 75000: 100 ms
Scan with size 75000: 114 ms
Scan with size 75000: 111 ms
Loaded in 4748 ms
Scan with size 100000: 101 ms
Scan with size 100000: 85 ms
Scan with size 100000: 75 ms
Scan with size 100000: 91 ms
Scan with size 100000: 106 ms
Scan with size 100000: 84 ms
Scan with size 100000: 100 ms
Scan with size 100000: 91 ms
Scan with size 100000: 102 ms
Scan with size 100000: 81 ms
Loaded in 5904 ms
Scan with size 125000: 138 ms
Scan with size 125000: 175 ms
Scan with size 125000: 163 ms
Scan with size 125000: 145 ms
Scan with size 125000: 150 ms
Scan with size 125000: 122 ms
Scan with size 125000: 112 ms
Scan with size 125000: 118 ms
Scan with size 125000: 146 ms
Scan with size 125000: 136 ms
Loaded in 6125 ms
Scan with size 150000: 126 ms
Scan with size 150000: 106 ms
Scan with size 150000: 117 ms
Scan with size 150000: 119 ms
Scan with size 150000: 118 ms
Scan with size 150000: 118 ms
Scan with size 150000: 126 ms
Scan with size 150000: 122 ms
Scan with size 150000: 127 ms
Scan with size 150000: 117 ms
Total load time: 22390 ms (i.e:22 seconds)
Total scan time: 5597 ms (i.e:5 seconds)
Rows scanned per seconds: 893335
Rows loaded per seconds: 223313

Time: 28.787

OK (1 test)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here is afterward:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
stack-7:0.90 Stack$ ./bin/hbase org.apache.hadoop.hbase.regionserver.MemStoreScanPerformance
JUnit version 4.8.1
.Loaded in 2293 ms
Scan with size 50000: 147 ms
Scan with size 50000: 195 ms
Scan with size 50000: 164 ms
Scan with size 50000: 88 ms
Scan with size 50000: 98 ms
Scan with size 50000: 80 ms
Scan with size 50000: 86 ms
Scan with size 50000: 57 ms
Scan with size 50000: 61 ms
Scan with size 50000: 48 ms
Loaded in 2447 ms
Scan with size 75000: 54 ms
Scan with size 75000: 94 ms
Scan with size 75000: 60 ms
Scan with size 75000: 61 ms
Scan with size 75000: 75 ms
Scan with size 75000: 59 ms
Scan with size 75000: 69 ms
Scan with size 75000: 71 ms
Scan with size 75000: 83 ms
Scan with size 75000: 57 ms
Loaded in 3381 ms
Scan with size 100000: 81 ms
Scan with size 100000: 84 ms
Scan with size 100000: 84 ms
Scan with size 100000: 85 ms
Scan with size 100000: 83 ms
Scan with size 100000: 85 ms
Scan with size 100000: 108 ms
Scan with size 100000: 78 ms
Scan with size 100000: 85 ms
Scan with size 100000: 75 ms
Loaded in 4395 ms
Scan with size 125000: 102 ms
Scan with size 125000: 104 ms
Scan with size 125000: 106 ms
Scan with size 125000: 88 ms
Scan with size 125000: 109 ms
Scan with size 125000: 99 ms
Scan with size 125000: 99 ms
Scan with size 125000: 110 ms
Scan with size 125000: 105 ms
Scan with size 125000: 105 ms
Loaded in 6552 ms
Scan with size 150000: 110 ms
Scan with size 150000: 112 ms
Scan with size 150000: 107 ms
Scan with size 150000: 126 ms
Scan with size 150000: 114 ms
Scan with size 150000: 118 ms
Scan with size 150000: 131 ms
Scan with size 150000: 110 ms
Scan with size 150000: 113 ms
Scan with size 150000: 117 ms
Total load time: 19068 ms (i.e:19 seconds)
Total scan time: 4731 ms (i.e:4 seconds)
Rows scanned per seconds: 1056859
Rows loaded per seconds: 262219

Time: 24.52

OK (1 test)

stack-7:0.90 Stack$ 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="13089823" author="stack" created="Tue, 23 Aug 2011 22:26:53 +0000"  >&lt;p&gt;Here is MemStoreScanPerformance with apache license.  We should add this when we commit this patch.&lt;/p&gt;</comment>
                            <comment id="13090047" author="stack" created="Wed, 24 Aug 2011 07:11:47 +0000"  >&lt;p&gt;Hmm... so I still see fails.   Out of 42 runs, three failed which is less than previous....&lt;/p&gt;</comment>
                            <comment id="13090558" author="stack" created="Wed, 24 Aug 2011 22:19:21 +0000"  >&lt;p&gt;Did more.  8 of 60 runs failed.  All were testWritesWhileGetting failures.&lt;/p&gt;</comment>
                            <comment id="13090625" author="nkeywal" created="Wed, 24 Aug 2011 23:57:29 +0000"  >&lt;p&gt;Yes, I would expect them to be the scenario with consistency between read&lt;br/&gt;
and flush mentioned in the bug&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4195&quot; title=&quot;Possible inconsistency in a memstore read after a reseek, possible performance improvement&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4195&quot;&gt;&lt;del&gt;HBASE-4195&lt;/del&gt;&lt;/a&gt;&amp;lt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4195&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-4195&lt;/a&gt;&amp;gt;(and&lt;br/&gt;
already managed in&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2856&quot; title=&quot;TestAcidGuarantee broken on trunk &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2856&quot;&gt;&lt;del&gt;HBASE-2856&lt;/del&gt;&lt;/a&gt; &amp;lt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2856&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-2856&lt;/a&gt;&amp;gt;). You can&lt;br/&gt;
check this by changing &quot;int flushInterval = 10;&quot; in the method&lt;br/&gt;
&quot;testWritesWhileGetting&quot;, for example by setting it to 2 or 3. This should&lt;br/&gt;
increase the number of failure. As well, the MemStoreTS of the KV in error&lt;br/&gt;
will be 0 (it comes from a file). This error (or at least the error I&lt;br/&gt;
analyzed) comes from the fact that the flush is finished before the end of&lt;br/&gt;
the Store#next, and not directly to the MemStore.&lt;/p&gt;

&lt;p&gt;A xarning as well the patch in&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4195&quot; title=&quot;Possible inconsistency in a memstore read after a reseek, possible performance improvement&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4195&quot;&gt;&lt;del&gt;HBASE-4195&lt;/del&gt;&lt;/a&gt;&amp;lt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4195&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-4195&lt;/a&gt;&amp;gt;will&lt;br/&gt;
conflict with this one, because they both touch the &quot;seek&quot; &amp;amp; &quot;reseek&quot;&lt;br/&gt;
function (even if it is actually different parts that are modified). Nothing&lt;br/&gt;
complex, but I won&apos;t be able to do the followup on this until end of next&lt;br/&gt;
week.&lt;/p&gt;

</comment>
                            <comment id="13090758" author="stack" created="Thu, 25 Aug 2011 04:26:25 +0000"  >&lt;p&gt;I changed the int flushInterval to 3 and now I get no failures.  Trying 5.&lt;/p&gt;</comment>
                            <comment id="13090787" author="stack" created="Thu, 25 Aug 2011 05:18:47 +0000"  >&lt;p&gt;Same for 5. No errors.  Putting it back to 10.&lt;/p&gt;</comment>
                            <comment id="13098948" author="nkeywal" created="Wed, 7 Sep 2011 13:41:32 +0000"  >&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4195&quot; title=&quot;Possible inconsistency in a memstore read after a reseek, possible performance improvement&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4195&quot;&gt;&lt;del&gt;HBASE-4195&lt;/del&gt;&lt;/a&gt;. It&apos;s the same test.&lt;/p&gt;</comment>
                            <comment id="13106634" author="nkeywal" created="Fri, 16 Sep 2011 17:51:35 +0000"  >&lt;p&gt;Patch for this jira bug is included in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4195&quot; title=&quot;Possible inconsistency in a memstore read after a reseek, possible performance improvement&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4195&quot;&gt;&lt;del&gt;HBASE-4195&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13106781" author="stack" created="Fri, 16 Sep 2011 20:26:47 +0000"  >&lt;p&gt;Resolving as fixed by hbase-4195 application.&lt;/p&gt;</comment>
                            <comment id="15016462" author="lars_francke" created="Fri, 20 Nov 2015 11:55:22 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12491397" name="4188-mssp.txt" size="8054" author="stack" created="Tue, 23 Aug 2011 22:26:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 24 Aug 2011 23:57:29 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33412</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hpsv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>101442</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>