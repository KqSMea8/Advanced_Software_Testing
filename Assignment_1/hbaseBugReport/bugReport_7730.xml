<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:48:32 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-7730/HBASE-7730.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-7730] HBaseAdmin#synchronousBalanceSwitch is not compatible with 0.92</title>
                <link>https://issues.apache.org/jira/browse/HBASE-7730</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4429&quot; title=&quot;Provide synchronous balanceSwitch()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4429&quot;&gt;&lt;del&gt;HBASE-4429&lt;/del&gt;&lt;/a&gt; introduced synchronousBalanceSwitch to HMaster.  HBaseAdmin uses this call (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5630&quot; title=&quot;hbck should disable the balancer using synchronousBalanceSwitch.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5630&quot;&gt;&lt;del&gt;HBASE-5630&lt;/del&gt;&lt;/a&gt;).  Therefore, hbck and hbase shell are not backward compatible with 0.92.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12630179">HBASE-7730</key>
            <summary>HBaseAdmin#synchronousBalanceSwitch is not compatible with 0.92</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jxiang">Jimmy Xiang</assignee>
                                    <reporter username="jxiang">Jimmy Xiang</reporter>
                        <labels>
                    </labels>
                <created>Thu, 31 Jan 2013 17:50:01 +0000</created>
                <updated>Sat, 16 Feb 2013 04:14:22 +0000</updated>
                            <resolved>Thu, 31 Jan 2013 23:21:27 +0000</resolved>
                                    <version>0.94.2</version>
                                    <fixVersion>0.94.5</fixVersion>
                                    <component>Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13567905" author="jmhsieh" created="Thu, 31 Jan 2013 18:28:58 +0000"  >&lt;p&gt;I&apos;d think just changing the calls in hbck in 0.94 to use the now deprecated method that is in 0.92 (and commenting why we didn&apos;t change it) would be sufficient.  Would we expect the cross version shell accesses?&lt;/p&gt;</comment>
                            <comment id="13567927" author="jxiang" created="Thu, 31 Jan 2013 18:46:31 +0000"  >&lt;p&gt;Good point.  I was wondering if it will be used somewhere else in the future.  I already have a simple fix, just need to make sure it works.&lt;/p&gt;</comment>
                            <comment id="13568011" author="lhofhansl" created="Thu, 31 Jan 2013 19:34:17 +0000"  >&lt;p&gt;We&apos;ve said in the past that 0.92 and 0.94 should be fully backward and forward compatible. That would imply supporting cross version shell access.&lt;/p&gt;</comment>
                            <comment id="13568142" author="jxiang" created="Thu, 31 Jan 2013 21:41:49 +0000"  >&lt;p&gt;We don&apos;t have a way to get the actual NoSuchMethodException exception object.  So I used the string match thing, which doesn&apos;t look good, but works.&lt;/p&gt;

&lt;p&gt;I tested the patch with a 0.92 version cluster and hbck works fine.&lt;/p&gt;

&lt;p&gt;TestHBaseFsck and TestAdmin are green too.&lt;/p&gt;</comment>
                            <comment id="13568143" author="jxiang" created="Thu, 31 Jan 2013 21:43:35 +0000"  >&lt;p&gt;Here is a sample stacktrace to show the problem&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.reflect.UndeclaredThrowableException
at $Proxy7.synchronousBalanceSwitch(Unknown Source)
at org.apache.hadoop.hbase.client.HBaseAdmin.setBalancerRunning(HBaseAdmin.java:1504)
at org.apache.hadoop.hbase.util.HBaseFsck.onlineHbck(HBaseFsck.java:434)
at com.cloudera.cmf.cdh4client.hbase.HBaseFsckImpl.onlineHbck(HBaseFsckImpl.java:35)
at systest.cdhclient.hbasefsck.Cdh4HbaseFsckClientTestTask.doWork(Cdh4HbaseFsckClientTestTask.java:80)
at systest.cdhclient.hbasefsck.Cdh4HbaseFsckClientTestTask$1.run(Cdh4HbaseFsckClientTestTask.java:41)
at com.cloudera.cmf.cdh4client.CDH4TaskRunner.run(CDH4TaskRunner.java:41)
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662)
Caused by: org.apache.hadoop.ipc.RemoteException(java.io.IOException): java.io.IOException: java.lang.NoSuchMethodException: org.apache.hadoop.hbase.ipc.HMasterInterface.synchronousBalanceSwitch(boolean)
at java.lang.Class.getMethod(Class.java:1605)
at org.apache.hadoop.hbase.ipc.WritableRpcEngine$Server.call(WritableRpcEngine.java:334)
at org.apache.hadoop.hbase.ipc.HBaseServer$Handler.run(HBaseServer.java:1345)

at org.apache.hadoop.hbase.ipc.HBaseClient.call(HBaseClient.java:1021)
at org.apache.hadoop.hbase.ipc.WritableRpcEngine$Invoker.invoke(WritableRpcEngine.java:150)
... 13 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13568182" author="yuzhihong@gmail.com" created="Thu, 31 Jan 2013 22:20:08 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (UndeclaredThrowableException ute) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Can you use this check ?&lt;br/&gt;
ute.getCause() instanceof NoSuchMethodException&lt;/p&gt;

&lt;p&gt;We were calling synchronousBalanceSwitch(). So if the cause of exception was NoSuchMethodException, it is implied that synchronousBalanceSwitch() isn&apos;t supported.&lt;/p&gt;</comment>
                            <comment id="13568189" author="jxiang" created="Thu, 31 Jan 2013 22:27:24 +0000"  >&lt;p&gt;ute.getCause() is actually a RemoteException. After unwrappred, it is an IOException, whose cause is the previous RemoteException again.&lt;/p&gt;</comment>
                            <comment id="13568195" author="yuzhihong@gmail.com" created="Thu, 31 Jan 2013 22:34:06 +0000"  >&lt;p&gt;Alright.&lt;/p&gt;

&lt;p&gt;+1 on patch.&lt;/p&gt;</comment>
                            <comment id="13568199" author="hadoopqa" created="Thu, 31 Jan 2013 22:37:20 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12567440/0.94-7730_v1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12567440/0.94-7730_v1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4277//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4277//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13568208" author="lhofhansl" created="Thu, 31 Jan 2013 22:46:22 +0000"  >&lt;p&gt;Eeeek. But I cannot think of anything better... +1&lt;/p&gt;</comment>
                            <comment id="13568234" author="jxiang" created="Thu, 31 Jan 2013 23:21:27 +0000"  >&lt;p&gt;Integrated into 0.94.  Thanks all for reviewing it.&lt;/p&gt;</comment>
                            <comment id="13568301" author="hudson" created="Fri, 1 Feb 2013 00:40:50 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #814 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/814/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/814/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7730&quot; title=&quot;HBaseAdmin#synchronousBalanceSwitch is not compatible with 0.92&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7730&quot;&gt;&lt;del&gt;HBASE-7730&lt;/del&gt;&lt;/a&gt; HBaseAdmin#synchronousBalanceSwitch is not compatible with 0.92 (Revision 1441252)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
jxiang : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/client/HBaseAdmin.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13571012" author="hudson" created="Tue, 5 Feb 2013 03:58:33 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security-on-Hadoop-23 #11 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/11/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/11/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7730&quot; title=&quot;HBaseAdmin#synchronousBalanceSwitch is not compatible with 0.92&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7730&quot;&gt;&lt;del&gt;HBASE-7730&lt;/del&gt;&lt;/a&gt; HBaseAdmin#synchronousBalanceSwitch is not compatible with 0.92 (Revision 1441252)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
jxiang : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/client/HBaseAdmin.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12567440" name="0.94-7730_v1.patch" size="1844" author="jxiang" created="Thu, 31 Jan 2013 21:41:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 31 Jan 2013 18:28:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>310675</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 45 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1hm6n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>311020</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>