<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:05:42 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-9576/HBASE-9576.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-9576] Fixups in hbase protobuf</title>
                <link>https://issues.apache.org/jira/browse/HBASE-9576</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Benoit was looking at out pbs.  Had following remarks:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
...there is something that doesn&apos;t make sense to me...a MutateRequest can have a Condition...the Condition has row/family/qualifier...so &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; a single KV CAS, one needs to specify the...row/family/qualifier twice...once in the MutationProto and once in the Condition...not a huge deal...just weird

...also in Comparator.proto, both BinaryComparator and BinaryPrefixComparator (and BitComparator too actually) would have been better off without ByteArrayComparable, which seems a useless pb, but no big deal either
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Will keep this issue open as place to accumulate pb fixups.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12669360">HBASE-9576</key>
            <summary>Fixups in hbase protobuf</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 Sep 2013 23:10:27 +0000</created>
                <updated>Mon, 30 Sep 2013 21:35:09 +0000</updated>
                                                                            <component>Protobufs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                            <comments>
                            <comment id="13772413" author="danburkert" created="Thu, 19 Sep 2013 22:44:36 +0000"  >&lt;p&gt;Recently I have been looking a lot at the RPCs as I&apos;m trying to implement an HBase client.  I have some opinions on changes/cleanups that should happen.  I&apos;m coming at this as someone who, for the most part, doesn&apos;t know how far reaching these changes these would be, and in particular have not considered backwards-compatibility issues.  Nonetheless, here is a list of some of the more attainable cleanups I would like to see:&lt;/p&gt;

&lt;p&gt;1) MultiRowMutationProcessorMessages.protos defines two messages, neither of which is ever used&lt;br/&gt;
2) Consider combining MasterAdmin.proto and MasterMonitor.proto. The distinction between the two is unclear, and there is a lot of overlap.  Which brings us to,&lt;br/&gt;
3) IsMasterRunning RPC is repeated in Master.proto, MasterAdmin.proto, and MasterMonitor.proto.  Consider removing Master.proto.&lt;br/&gt;
4) The confusion and overlap between the RowProcessor endpoint and MultiRowMutation exists even at the proto level.  This is definitely an issue throughout more (all) of the codebase, but nonetheless there are two different RPCs to accomplish the same task: atomically update intra-region cells.  My opinion is that these two things need to be combined all the way through the codebase, in the client, the protos, and the server.  In the case of protos, it should just be an addition RPC in Client.proto&lt;br/&gt;
5) Consider renaming Admin.proto to RegionServerAdmin.proto, and Client.proto to RegionClient.proto.  This would be more inline with MasterAdmin.proto and RegionServerStatus.proto.&lt;br/&gt;
6) I understand that message components being required/optional is usually driven by the peculiarities of ProtoBuffers and planning for backwards compatibility, but the .proto files should indicate which of the components in the messages are in actuality optional in the comments.  For instance, RPC.proto/RequestHeader.method_name is labeled as optional, but I think in the code now it is always included.  It is a barrier to creating a client if it is unclear which parts of messages are in actuality optional.&lt;/p&gt;</comment>
                            <comment id="13772449" author="stack" created="Thu, 19 Sep 2013 23:19:21 +0000"  >&lt;p&gt;How soon could you make a patch?&lt;/p&gt;

&lt;p&gt;.protos evolved.  Had 5 or 6 different folks working  on it independently often at different times.&lt;/p&gt;

&lt;p&gt;On 1., lets remove now&lt;br/&gt;
2. The model is from what was there previous.  Merge would simpify (IIRC)&lt;br/&gt;
3. ok.  We are trying to do a pseudo proto subclassing w this class &amp;#8211; should have done as you suggest a while ago&lt;br/&gt;
4. looks like large effort that needs its own issue and wont be done for this release&lt;br/&gt;
5. Sounds good&lt;br/&gt;
6. Erred on the side of keeping things optional rather than required.  Understood two camps on this...&lt;/p&gt;

&lt;p&gt;Other criticism came in recently from another currently trying to write a client against hbase, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9576&quot; title=&quot;Fixups in hbase protobuf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9576&quot;&gt;HBASE-9576&lt;/a&gt; (&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tsuna&quot; class=&quot;user-hover&quot; rel=&quot;tsuna&quot;&gt;Benoit Sigoure&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;Thanks Dan&lt;/p&gt;</comment>
                            <comment id="13773285" author="danburkert" created="Fri, 20 Sep 2013 18:37:55 +0000"  >&lt;p&gt;Hey Stack,&lt;/p&gt;

&lt;p&gt;I could probably have a patch ready tomorrow, mid next week at the latest. I can definitely nock some of them out by tomorrow, I&apos;ll put them up.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Dan&lt;/li&gt;
&lt;/ul&gt;


</comment>
                            <comment id="13773307" author="stack" created="Fri, 20 Sep 2013 19:03:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=danburkert&quot; class=&quot;user-hover&quot; rel=&quot;danburkert&quot;&gt;Dan Burkert&lt;/a&gt; Ok.  I&apos;d suggest do multiple patches w/ the highest win first.  My hope would be that this would make the 0.96.0 but it is not critial enough to hold up 0.96.0 for (I hate saying that.. but is so). Thanks Dan.&lt;/p&gt;</comment>
                            <comment id="13780537" author="danburkert" created="Fri, 27 Sep 2013 23:02:36 +0000"  >&lt;p&gt;Here&apos;s my followup on my issues, sorry this is so late:&lt;/p&gt;

&lt;p&gt;Most of these tasks ended up being more complicated than I expected, but I have attached a patch for #1.&lt;/p&gt;

&lt;p&gt;1) The messages in MultiRowMutationProcessorMessages are in fact used (as empty messages), so I rolled them into MultiRowMutationProtos&lt;br/&gt;
2) Merging MasterAdmin and MasterMonitor will require many changes to HConnectionManager; definitely big enough to have its own JIRA.  Not sure it&apos;s worth the effort, though.&lt;br/&gt;
3) Accordingly, IsMasterRunning can&apos;t be de-duped because it depends on #2.&lt;br/&gt;
5) This will have pretty big repercussions throughout the codebase as well.  To do it right, some methods in the HConnection interface would need to be renamed (i.e. getAdmin, which is package private), and that may be a breaker.  Again, maybe not worth the effort.&lt;br/&gt;
6)  My thoughts on this is that the .proto files should be further documented in order to indicate what actually constitutes a valid message, for each type.  At this point, I&apos;m not up to the challenge.  &lt;/p&gt;</comment>
                            <comment id="13780562" author="stack" created="Fri, 27 Sep 2013 23:21:04 +0000"  >&lt;p&gt;+1 on this patch.  Let me submit to see if it passes.  Will commit as a subtask of this issue if all good.&lt;/p&gt;</comment>
                            <comment id="13781563" author="stack" created="Mon, 30 Sep 2013 01:42:06 +0000"  >&lt;p&gt;The patch that was on this issue went in as a sub-task.&lt;/p&gt;

&lt;p&gt;This is item #1.  #2 and #3 are another subtask looking for a +1.&lt;/p&gt;</comment>
                            <comment id="13782062" author="eclark" created="Mon, 30 Sep 2013 18:10:22 +0000"  >&lt;p&gt;+1 lgtm.  love simplifying these things.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12605597" name="0001-HBASE-9576-task1.patch" size="73980" author="danburkert" created="Fri, 27 Sep 2013 23:02:36 +0000"/>
                            <attachment id="12605978" name="9612revert096.txt" size="268638" author="stack" created="Mon, 30 Sep 2013 21:31:48 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12671231">HBASE-9677</subtask>
                            <subtask id="12671270">HBASE-9684</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 19 Sep 2013 22:44:36 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>349292</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 11 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1o87r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>349590</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>