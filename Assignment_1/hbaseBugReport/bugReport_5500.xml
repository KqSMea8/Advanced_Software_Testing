<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:28:19 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5500/HBASE-5500.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5500] [Coprocessors] Add hooks for bulk loading actions</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5500</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The API gap for bulk HFile loading was discussed on the mailing list but it didn&apos;t make it into a JIRA. It also came up on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5498&quot; title=&quot;Secure Bulk Load&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5498&quot;&gt;&lt;del&gt;HBASE-5498&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;http://search-hadoop.com/m/eEUHK1s4fo81/bulk+loading+and+RegionObservers&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://search-hadoop.com/m/eEUHK1s4fo81/bulk+loading+and+RegionObservers&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The salient detail:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;    A simple and straightforward course of action is to give the CP the option of rewriting the submitted store file(s) before the regionserver attempts to validate and move them into the store. This is similar to how CPs are hooked into compaction: CPs hook compaction by allowing one to wrap the scanner that is iterating over the store files. So the wrapper gets a chance to examine the KeyValues being processed and also has an opportunity to modify or drop them.&lt;/p&gt;

&lt;p&gt;    Similarly for incoming HFiles for bulk load, the CP could be given a scanner iterating over those files, if you had a RegionObserver installed. You would be given the option in effect to rewrite the incoming HFiles before they are handed over to the RegionServer for addition to the region.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think this is a reasonable approach to interface design, because the fact you are given a scanner highlights the bulk nature of the input. However I think there should be two hooks here: one that allows for a simple yes/no answer as to whether the bulk load should proceed; and one that allows for a more expensive filtering or transformation or whatever via scanner-like interface. Bulk loads could be potentially very large so requiring a scan over them always is not a good idea.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12544738">HBASE-5500</key>
            <summary>[Coprocessors] Add hooks for bulk loading actions</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="apurtell">Andrew Purtell</reporter>
                        <labels>
                    </labels>
                <created>Thu, 1 Mar 2012 07:31:18 +0000</created>
                <updated>Mon, 11 Nov 2013 20:39:53 +0000</updated>
                            <resolved>Mon, 11 Nov 2013 20:39:53 +0000</resolved>
                                                                    <component>Coprocessors</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13220396" author="apurtell" created="Thu, 1 Mar 2012 21:43:00 +0000"  >&lt;p&gt;A relevant question from Francis Liu on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5498&quot; title=&quot;Secure Bulk Load&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5498&quot;&gt;&lt;del&gt;HBASE-5498&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Andrew, thanks for point that discussion out. Can&apos;t those two hooks be combined into one? The user can just ignore the scanner if he doesn&apos;t need it. Or is there a large overhead on even just creating the scanner?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;There would be some overhead involved with scanning the files. This is necessary if the CP wants to rewrite or filter some KVs before the HFiles are installed in the region but otherwise I think the cost can be avoided. &lt;/p&gt;</comment>
                            <comment id="13487587" author="anoopsamjohn" created="Wed, 31 Oct 2012 06:44:56 +0000"  >&lt;p&gt;This is already done as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6224&quot; title=&quot;add Pre and Post coprocessor hooks for BulkLoad&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6224&quot;&gt;&lt;del&gt;HBASE-6224&lt;/del&gt;&lt;/a&gt; right?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 31 Oct 2012 06:44:56 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>229924</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 7 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02eqn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11989</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>