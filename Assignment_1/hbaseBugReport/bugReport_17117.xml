<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 21:21:21 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-17117/HBASE-17117.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-17117] Reversed scan returns deleted versions and breaks RegionLocator</title>
                <link>https://issues.apache.org/jira/browse/HBASE-17117</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;We started seeing clients persistently throwing errors as they were trying to talk to a region that was non existent (split a few days ago). We verified that the region was deleted from meta when the split happened.&lt;/p&gt;

&lt;p&gt;On performing a raw scan on meta, the deleted version for the split region appears, which also does on performing a normal reversed scan. Since MetaScanner uses a reversed scan, this explains why clients see non existent regions.&lt;/p&gt;

&lt;p&gt;We also verified that there was no in-memory corrupt state by failing over the master. When we trigger major compaction on meta, the problem goes away further confirming the fact that we were seeing deleted versions.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13021297">HBASE-17117</key>
            <summary>Reversed scan returns deleted versions and breaks RegionLocator</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ashu210890">Ashu Pachauri</reporter>
                        <labels>
                    </labels>
                <created>Wed, 16 Nov 2016 22:53:43 +0000</created>
                <updated>Sat, 19 Nov 2016 00:52:28 +0000</updated>
                                            <version>1.3.0</version>
                                    <fixVersion>1.3.0</fixVersion>
                                    <component>Scanners</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                <comments>
                            <comment id="15678242" author="ashu210890" created="Sat, 19 Nov 2016 00:43:17 +0000"  >&lt;p&gt;reverseScanMetaDeleteFamily : Output of raw, forward and reversed scan on meta during the issue.&lt;br/&gt;
I have replaced the start and end keys with dummy values (but in correct order).&lt;/p&gt;

&lt;p&gt;We did not back up the store files for meta, and I am unable to reproduce the issue just by creating a delete family marker in meta and doing a reverse scan. This is not happening consistently during splits either.  So, I am dropping the priority down to major from blocker. I&apos;ll try to research edge cases in the scanner code and come up with a unit test for reproducing this. Any ideas are welcome.&lt;/p&gt;</comment>
                            <comment id="15678257" author="ashu210890" created="Sat, 19 Nov 2016 00:52:27 +0000"  >&lt;p&gt;reverseScanMetaDeleteFamily.txt : Reattaching with txt extension (Jira does not open the file in browser otherwise! )&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12839659" name="reverseScanMetaDeleteFamily.txt" size="5763" author="ashu210890" created="Sat, 19 Nov 2016 00:52:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36fd3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>