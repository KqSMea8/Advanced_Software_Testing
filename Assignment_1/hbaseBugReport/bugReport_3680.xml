<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:12:12 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-3680/HBASE-3680.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-3680] Publish more metrics about mslab</title>
                <link>https://issues.apache.org/jira/browse/HBASE-3680</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;We have been using mslab on all our clusters for a while now and it seems it tends to OOME or send us into GC loops of death a lot more than it used to. For example, one RS with mslab enabled and 7GB of heap died out of OOME this afternoon; it had .55GB in the block cache and 2.03GB in the memstores which doesn&apos;t account for much... but it could be that because of mslab a lot of space was lost in those incomplete 2MB blocks and without metrics we can&apos;t really tell. Compactions were running at the time of the OOME and I see block cache activity. The average load on that cluster is 531.&lt;/p&gt;

&lt;p&gt;We should at least publish the total size of all those blocks and maybe even take actions based on that (like force flushing).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12501998">HBASE-3680</key>
            <summary>Publish more metrics about mslab</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jdcryans">Jean-Daniel Cryans</reporter>
                        <labels>
                    </labels>
                <created>Mon, 21 Mar 2011 23:27:53 +0000</created>
                <updated>Tue, 17 May 2016 05:41:06 +0000</updated>
                                            <version>0.90.1</version>
                                    <fixVersion>0.92.3</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13009478" author="jdcryans" created="Mon, 21 Mar 2011 23:59:27 +0000"  >&lt;p&gt;Hoping Todd can take a quick look.&lt;/p&gt;</comment>
                            <comment id="13018919" author="cftarnas" created="Tue, 12 Apr 2011 17:20:47 +0000"  >&lt;p&gt;I have been seeing similar problems with MSLAB enabled. When under heavy read/write workloads we&apos;ve seen regionservers OOME and some, what appear to be, long GC pauses. When I get a chance i&apos;ll do more testing with GC logging re-enabled and MSLAB enabled. &lt;/p&gt;</comment>
                            <comment id="13047601" author="stack" created="Fri, 10 Jun 2011 22:46:01 +0000"  >&lt;p&gt;Moving out of 0.92.0. Pull it back in if you think different.&lt;/p&gt;</comment>
                            <comment id="13132293" author="tlipcon" created="Fri, 21 Oct 2011 02:59:02 +0000"  >&lt;p&gt;Here&apos;s a patch which adds the metric. I tested by firing up a standalone instance and using jconsole to check that it showed the right value in JMX.&lt;/p&gt;</comment>
                            <comment id="13139768" author="stack" created="Sun, 30 Oct 2011 21:07:01 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13139769" author="stack" created="Sun, 30 Oct 2011 21:07:23 +0000"  >&lt;p&gt;Trying patch build.&lt;/p&gt;</comment>
                            <comment id="13140950" author="stack" created="Tue, 1 Nov 2011 05:32:06 +0000"  >&lt;p&gt;Reuploading same patch so can get patch build to work.&lt;/p&gt;</comment>
                            <comment id="13141014" author="hadoopqa" created="Tue, 1 Nov 2011 08:08:57 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12501741/hbase-3680.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12501741/hbase-3680.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/120//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/120//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13141482" author="stack" created="Tue, 1 Nov 2011 19:32:30 +0000"  >&lt;p&gt;I committed this patch already by mistake as part of this commit:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
------------------------------------------------------------------------
r1195833 | stack | 2011-10-31 22:36:12 -0700 (Mon, 31 Oct 2011) | 1 line

HBASE-4703 Improvements in tests
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I did all but the change to MemStore.java.  Let me commit that now.&lt;/p&gt;</comment>
                            <comment id="13141489" author="stack" created="Tue, 1 Nov 2011 19:40:09 +0000"  >&lt;p&gt;Forget it.  I reverted this patch from TRUNK.  It doesn&apos;t apply to 0.92.  Metrics have changed there in a way that is not similar to TRUNK.   Will look into this later.  REVERT in the time being.&lt;/p&gt;</comment>
                            <comment id="13141751" author="hudson" created="Tue, 1 Nov 2011 23:25:52 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2397 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2397/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2397/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3680&quot; title=&quot;Publish more metrics about mslab&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3680&quot;&gt;HBASE-3680&lt;/a&gt; Publish more metrics about mslab; REVERTED&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3680&quot; title=&quot;Publish more metrics about mslab&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3680&quot;&gt;HBASE-3680&lt;/a&gt; Publish more metrics about mslab&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3680&quot; title=&quot;Publish more metrics about mslab&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3680&quot;&gt;HBASE-3680&lt;/a&gt; Publish more metrics about mslab&lt;/p&gt;

&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/MemStore.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/MemStoreLAB.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/metrics/RegionServerMetrics.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/regionserver/TestMemStoreLAB.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/MemStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13141928" author="hudson" created="Wed, 2 Nov 2011 05:15:59 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2398 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2398/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2398/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3680&quot; title=&quot;Publish more metrics about mslab&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3680&quot;&gt;HBASE-3680&lt;/a&gt; Publish more metrics about mslab; REVERT&lt;/p&gt;

&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/MemStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13648918" author="jdcryans" created="Fri, 3 May 2013 23:34:43 +0000"  >&lt;p&gt;Patch doesn&apos;t apply and needs to be changed apparently, unmarking as available.&lt;/p&gt;</comment>
                            <comment id="13822261" author="asafm" created="Thu, 14 Nov 2013 09:03:43 +0000"  >&lt;p&gt;I fix you should reset fix-version field, since it&apos;s not really fixed and confusing.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12501741" name="hbase-3680.txt" size="8139" author="stack" created="Tue, 1 Nov 2011 05:32:06 +0000"/>
                            <attachment id="12500065" name="hbase-3680.txt" size="8139" author="tlipcon" created="Fri, 21 Oct 2011 02:59:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 12 Apr 2011 17:20:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33144</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 5 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i00svr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2611</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>