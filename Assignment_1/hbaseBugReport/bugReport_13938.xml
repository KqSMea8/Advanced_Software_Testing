<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:48:07 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-13938/HBASE-13938.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-13938] Deletes done during the region merge transaction may get eclipsed</title>
                <link>https://issues.apache.org/jira/browse/HBASE-13938</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Was looking at an issue from our internal testing. It seems the Deletes of the region rows from the meta done during the merge transaction could be eclipsed by the Put of a region row that might have happened moments before.&lt;br/&gt;
The master logs this for the merge:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2015-06-18 13:13:46,018 INFO  [AM.ZK.Worker-pool2-t12] master.AssignmentManager: Handled MERGED event; merged=IntegrationTestIngest,a666665c,1434633226681.0927319db6bf5e128e3bec2a420819aa., region_a=IntegrationTestIngest,a666665c,1434631353820.8b911862d7705ac808b8d132d0154c16., region_b=IntegrationTestIngest,acccccc2,1434631353820.1bdaf759862f45d133ef77fdbda21aec., on ddas-2-5.openstacklocal,16020,1434632778438
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;One of the regions that got merged got Opened a few seconds back:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2015-06-18 13:13:46,591 INFO  [RS_OPEN_REGION-ddas-2-5:16020-1] regionserver.HRegion: Onlined 1bdaf759862f45d133ef77fdbda21aec; next sequenceid=182988
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above would have done a Put in the meta.&lt;/p&gt;

&lt;p&gt;Looking at the raw scan of the meta, for the new merged region, the creation timestamp is 1434633226101:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; IntegrationTestIngest,a666665c,1434633226681.0927319db6bf5e128e3bec2a420819aa. column=info:regioninfo, timestamp=1434633226101, value={ENCODED =&amp;gt; 0927319db6bf5e128e3bec2a420819aa, NAME =&amp;gt; &apos;IntegrationTestIngest,a666665c,1434633226681.0927319db6bf5e128e3bec2a420819aa.&apos;, STARTKEY =&amp;gt; &apos;a666665c&apos;, ENDKEY =&amp;gt; &apos;b3333328&apos;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Looking at the raw scan of the meta, the timestamp for the region open of the already merged region is 1434633226600. This is a little after the merge transaction&apos;s timestamp.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;IntegrationTestIngest,acccccc2,1434631353820.1bdaf759862f45d133ef77fdbda21aec. column=info:seqnumDuringOpen, timestamp=1434633226600, value=\x00\x00\x00\x00\x00\x02\xCA\xCC
 IntegrationTestIngest,acccccc2,1434631353820.1bdaf759862f45d133ef77fdbda21aec. column=info:server, timestamp=1434633226600, value=ddas-2-5.openstacklocal:16020
 IntegrationTestIngest,acccccc2,1434631353820.1bdaf759862f45d133ef77fdbda21aec. column=info:serverstartcode, timestamp=1434633226600, value=1434632778438
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We need to fix it so that the merge region transaction also takes the master&apos;s timestamp. Similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13875&quot; title=&quot;Clock skew between master and region server may render restored region without server address&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13875&quot;&gt;&lt;del&gt;HBASE-13875&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;When this happens, clients start to see a row in the meta with an empty HRegionInfo (this is because the Put done during the region open only updates the location information but not the HRI, and the HRI deleted during the merge transaction &quot;remains deleted&quot;).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12839054">HBASE-13938</key>
            <summary>Deletes done during the region merge transaction may get eclipsed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="enis">Enis Soztutar</assignee>
                                    <reporter username="devaraj">Devaraj Das</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Jun 2015 04:46:50 +0000</created>
                <updated>Fri, 18 Mar 2016 22:38:13 +0000</updated>
                            <resolved>Tue, 23 Jun 2015 18:18:15 +0000</resolved>
                                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>0.98.14</fixVersion>
                    <fixVersion>1.0.2</fixVersion>
                    <fixVersion>1.2.0</fixVersion>
                    <fixVersion>1.1.1</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                                    <component>master</component>
                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="14593120" author="devaraj" created="Fri, 19 Jun 2015 06:57:50 +0000"  >&lt;p&gt;Quick patch for 1.1&lt;/p&gt;</comment>
                            <comment id="14593785" author="enis" created="Fri, 19 Jun 2015 18:56:05 +0000"  >&lt;p&gt;Yes, this is very similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13709&quot; title=&quot;Updates to meta table server columns may be eclipsed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13709&quot;&gt;&lt;del&gt;HBASE-13709&lt;/del&gt;&lt;/a&gt; and a fix to the issues initially triggered by &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11536&quot; title=&quot;Puts of region location to Meta may be out of order which causes inconsistent of region location&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11536&quot;&gt;&lt;del&gt;HBASE-11536&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;The patch looks good. We are doing the exact same thing that we did in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13709&quot; title=&quot;Updates to meta table server columns may be eclipsed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13709&quot;&gt;&lt;del&gt;HBASE-13709&lt;/del&gt;&lt;/a&gt; by sending the masters time stamp together with the merge region request, and for the delete meta row for merged regions, we should be using &lt;tt&gt;max(masterSystemTime, EnvEdgeManager.currentTime())&lt;/tt&gt;. &lt;/p&gt;

&lt;p&gt;Let me attach a v2 patch. &lt;/p&gt;</comment>
                            <comment id="14593788" author="enis" created="Fri, 19 Jun 2015 18:58:02 +0000"  >&lt;p&gt;v2 patch uses &lt;tt&gt;max&lt;/tt&gt; and adds a simple unit test. cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt;. &lt;/p&gt;</comment>
                            <comment id="14593847" author="ndimiduk" created="Fri, 19 Jun 2015 19:38:43 +0000"  >&lt;p&gt;Okay, yes, this makes sense. Tried out your test without the rest of the fixes, i get the failure i was expecting. +1.&lt;/p&gt;</comment>
                            <comment id="14593863" author="devaraj" created="Fri, 19 Jun 2015 19:51:15 +0000"  >&lt;p&gt;Don&apos;t we need the &quot;max&quot; computation in the RegionMergeTransaction.prepareMutationsForMerge as well...&lt;/p&gt;</comment>
                            <comment id="14593897" author="enis" created="Fri, 19 Jun 2015 20:12:46 +0000"  >&lt;blockquote&gt;&lt;p&gt;Don&apos;t we need the &quot;max&quot; computation in the RegionMergeTransaction.prepareMutationsForMerge as well...&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Nice catch. v3 handles that as well. &lt;/p&gt;</comment>
                            <comment id="14593931" author="devaraj" created="Fri, 19 Jun 2015 20:37:30 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14594435" author="hadoopqa" created="Sat, 20 Jun 2015 06:26:12 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12740723/hbase-13938_v3-branch-1.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12740723/hbase-13938_v3-branch-1.1.patch&lt;/a&gt;&lt;br/&gt;
  against branch-1.1 branch at commit db08013ebeeaa85802d9795cc72b4c29c5338a47.&lt;br/&gt;
  ATTACHMENT ID: 12740723&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.1 2.5.2 2.6.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 3813 checkstyle errors (more than the master&apos;s current 3811 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +      regionServer.compactSplitThread.requestRegionsMerge(regionA, regionB, forcible, masterSystemTime);&lt;br/&gt;
+      MetaTableAccessor.mergeRegions(connection, merged, parentA, parentB, serverName0, 3, HConstants.LATEST_TIMESTAMP);&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14478//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14478//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14478//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14478//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14478//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14478//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14478//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14478//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14596276" author="ndimiduk" created="Mon, 22 Jun 2015 17:26:07 +0000"  >&lt;p&gt;Patch applies cleanly to branch-1 and branch-1.2 (FYI &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=busbey&quot; class=&quot;user-hover&quot; rel=&quot;busbey&quot;&gt;Sean Busbey&lt;/a&gt;). Resolving conflicts for master.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=devaraj&quot; class=&quot;user-hover&quot; rel=&quot;devaraj&quot;&gt;Devaraj Das&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; this needed for branch-1.0 and 0.98 also?&lt;/p&gt;</comment>
                            <comment id="14596279" author="busbey" created="Mon, 22 Jun 2015 17:29:03 +0000"  >&lt;p&gt;(thanks for the heads up, sounds good)&lt;/p&gt;</comment>
                            <comment id="14596351" author="enis" created="Mon, 22 Jun 2015 18:13:08 +0000"  >&lt;blockquote&gt;&lt;p&gt;this needed for branch-1.0 and 0.98 also?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes. All branches that &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11536&quot; title=&quot;Puts of region location to Meta may be out of order which causes inconsistent of region location&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11536&quot;&gt;&lt;del&gt;HBASE-11536&lt;/del&gt;&lt;/a&gt; was committed. &lt;/p&gt;</comment>
                            <comment id="14596383" author="ndimiduk" created="Mon, 22 Jun 2015 18:33:08 +0000"  >&lt;p&gt;I think this is not needed on master because meta updates are run from master.&lt;/p&gt;</comment>
                            <comment id="14596538" author="ndimiduk" created="Mon, 22 Jun 2015 19:53:48 +0000"  >&lt;p&gt;backport patches. FYI &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=busbey&quot; class=&quot;user-hover&quot; rel=&quot;busbey&quot;&gt;Sean Busbey&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14596540" author="ndimiduk" created="Mon, 22 Jun 2015 19:55:18 +0000"  >&lt;p&gt;0.98 backport took a bit of work, and it&apos;s not clear to me which tests cover this code, so let&apos;s see a buildbot run; maybe someone more familiar can have a look?&lt;/p&gt;</comment>
                            <comment id="14596560" author="apurtell" created="Mon, 22 Jun 2015 20:11:18 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;I&apos;ll defer to the performers of the work on correctness. &lt;/p&gt;

&lt;p&gt;Skimmed the patch looking for compat issues. The modified interfaces are marked Private. In addition I tested Apache Phoenix compilation after these changes are applied using the head of 4.x-HBase-0.98 branch. Compilation succeeded, unit tests passed.&lt;/p&gt;</comment>
                            <comment id="14596561" author="apurtell" created="Mon, 22 Jun 2015 20:13:17 +0000"  >&lt;p&gt;Yes, as Nick mentioned could either &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; or &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=devaraj&quot; class=&quot;user-hover&quot; rel=&quot;devaraj&quot;&gt;Devaraj Das&lt;/a&gt; have a look at the 0.98 changes?&lt;/p&gt;

&lt;p&gt;This JIRA is in Patch Available state so a precommit build should come around for 0.98 also.&lt;/p&gt;</comment>
                            <comment id="14596782" author="hadoopqa" created="Mon, 22 Jun 2015 22:38:15 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12741112/hbase-13938_v3-branch-1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12741112/hbase-13938_v3-branch-1.patch&lt;/a&gt;&lt;br/&gt;
  against branch-1 branch at commit d51a184051d968dc3bdc00b1c9257c0a9e5ff8a6.&lt;br/&gt;
  ATTACHMENT ID: 12741112&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.1 2.5.2 2.6.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 3828 checkstyle errors (more than the master&apos;s current 3826 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +      regionServer.compactSplitThread.requestRegionsMerge(regionA, regionB, forcible, masterSystemTime);&lt;br/&gt;
+      MetaTableAccessor.mergeRegions(connection, merged, parentA, parentB, serverName0, 3, HConstants.LATEST_TIMESTAMP);&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14505//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14505//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14505//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14505//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14505//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14505//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14505//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14505//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14596852" author="enis" created="Mon, 22 Jun 2015 23:38:05 +0000"  >&lt;p&gt;Did an interdiff between 1.1 and 1.2/1.0 and 0.98 patches. They look good. &lt;/p&gt;

&lt;p&gt;In 1.0 patch this is not needed (but it is ignorable): &lt;br/&gt;
&amp;gt; +  private Random random = new Random();&lt;/p&gt;

&lt;p&gt;Did you re-generate the PB files? &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I think this is not needed on master because meta updates are run from master.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Now thinking about it, I think we should at least make the PB changes in master, otherwise the wire compat might be broken accidentally. Let me put up a patch for master. &lt;/p&gt;</comment>
                            <comment id="14596863" author="ndimiduk" created="Mon, 22 Jun 2015 23:42:43 +0000"  >&lt;blockquote&gt;
&lt;p&gt;In 1.0 patch this is not needed (but it is ignorable): &lt;br/&gt;
&amp;gt; + private Random random = new Random();&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Ah thanks. I can remove that on commit.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Did you re-generate the PB files?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I &lt;b&gt;think&lt;/b&gt; I did this on all branches, but I&apos;ll be sure to do so again before pushing; at worst it&apos;ll be a no-op.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I think we should at least make the PB changes in master&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yeah, that&apos;s a good point.&lt;/p&gt;</comment>
                            <comment id="14596864" author="devaraj" created="Mon, 22 Jun 2015 23:43:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt; i think you missed the unit tests in the backport patches.&lt;/p&gt;</comment>
                            <comment id="14596870" author="ndimiduk" created="Mon, 22 Jun 2015 23:47:21 +0000"  >&lt;blockquote&gt;&lt;p&gt;i think you missed the unit tests in the backport patches&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yeah, there&apos;s no &lt;tt&gt;TestMetaTableAccessor&lt;/tt&gt; on 0.98 and I didn&apos;t find anything else as an obvious corollary. Can you point me in the right direction? I&apos;ll update the patch.&lt;/p&gt;

&lt;p&gt;Were you meaning one of the other ports as well?&lt;/p&gt;</comment>
                            <comment id="14596875" author="enis" created="Mon, 22 Jun 2015 23:53:01 +0000"  >&lt;p&gt;Here is the master patch. It should not have any behavioral change, since MTA.mergeRegions() is only called by master. The patch is needed for forward compatibility for PB. The rest of the changes are good for patch portability. &lt;/p&gt;</comment>
                            <comment id="14596881" author="devaraj" created="Mon, 22 Jun 2015 23:59:36 +0000"  >&lt;p&gt;If it&apos;s not straightforward guess it&apos;s okay to go without unit tests on the older versions. But TestMetaReaderEditor seems like a plausible candidate.&lt;/p&gt;</comment>
                            <comment id="14596893" author="ndimiduk" created="Tue, 23 Jun 2015 00:07:00 +0000"  >&lt;blockquote&gt;&lt;p&gt;TestMetaReaderEditor seems like a plausible candidate&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Good point, I&apos;ll give this a go.&lt;/p&gt;</comment>
                            <comment id="14596926" author="ndimiduk" created="Tue, 23 Jun 2015 00:43:46 +0000"  >&lt;p&gt;Updated 0.98 backport, adds test and fixes the other issues originally missed. Particularly worrisome are these lines, but I guess it&apos;s what &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=devaraj&quot; class=&quot;user-hover&quot; rel=&quot;devaraj&quot;&gt;Devaraj Das&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; had in mind:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   private static Put addLocation(final Put p, final ServerName sn, long openSeqNum) {
-    // using regionserver&apos;s local time as the timestamp of Put.
-    // See: HBASE-11536
-    long now = EnvironmentEdgeManager.currentTimeMillis();
-    p.addImmutable(HConstants.CATALOG_FAMILY, HConstants.SERVER_QUALIFIER, now,
+    p.addImmutable(HConstants.CATALOG_FAMILY, HConstants.SERVER_QUALIFIER,
       Bytes.toBytes(sn.getHostAndPort()));
-    p.addImmutable(HConstants.CATALOG_FAMILY, HConstants.STARTCODE_QUALIFIER, now,
+    p.addImmutable(HConstants.CATALOG_FAMILY, HConstants.STARTCODE_QUALIFIER,
       Bytes.toBytes(sn.getStartcode()));
-    p.addImmutable(HConstants.CATALOG_FAMILY, HConstants.SEQNUM_QUALIFIER, now,
-        Bytes.toBytes(openSeqNum));
+    p.addImmutable(HConstants.CATALOG_FAMILY, HConstants.SEQNUM_QUALIFIER,
+      Bytes.toBytes(openSeqNum));
     return p;
   }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14597031" author="hadoopqa" created="Tue, 23 Jun 2015 02:39:19 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12741172/hbase-13938_master.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12741172/hbase-13938_master.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit d51a184051d968dc3bdc00b1c9257c0a9e5ff8a6.&lt;br/&gt;
  ATTACHMENT ID: 12741172&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.1 2.5.2 2.6.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 1944 checkstyle errors (more than the master&apos;s current 1942 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +      regionServer.compactSplitThread.requestRegionsMerge(regionA, regionB, forcible, masterSystemTime);&lt;br/&gt;
+      MetaTableAccessor.mergeRegions(connection, merged, parentA, parentB, serverName0, 3, HConstants.LATEST_TIMESTAMP);&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14513//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14513//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14513//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14513//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14513//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14513//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14513//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14513//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14597122" author="hadoopqa" created="Tue, 23 Jun 2015 03:40:18 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12741184/hbase-13938_v3-0.98.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12741184/hbase-13938_v3-0.98.patch&lt;/a&gt;&lt;br/&gt;
  against 0.98 branch at commit d51a184051d968dc3bdc00b1c9257c0a9e5ff8a6.&lt;br/&gt;
  ATTACHMENT ID: 12741184&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.1 2.5.2 2.6.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 24 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14515//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14515//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14515//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14515//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14515//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14515//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Javadoc warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14515//artifact/patchprocess/patchJavadocWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14515//artifact/patchprocess/patchJavadocWarnings.txt&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14515//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14515//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14597804" author="ndimiduk" created="Tue, 23 Jun 2015 15:22:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; your master patch looks good to me.&lt;/p&gt;

&lt;p&gt;Does anyone have any further comments? I plan to clean up the line-length and other nits from above comments and commit this morning. Thanks.&lt;/p&gt;</comment>
                            <comment id="14598112" author="ndimiduk" created="Tue, 23 Jun 2015 18:18:15 +0000"  >&lt;p&gt;Pushed to 0.98+. Thanks everyone!&lt;/p&gt;</comment>
                            <comment id="14598118" author="hudson" created="Tue, 23 Jun 2015 18:21:44 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98-on-Hadoop-1.1 #988 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/988/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/988/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13938&quot; title=&quot;Deletes done during the region merge transaction may get eclipsed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13938&quot;&gt;&lt;del&gt;HBASE-13938&lt;/del&gt;&lt;/a&gt; Deletes done during the region merge transaction may get eclipsed (ddas, enis, ndimiduk) (ndimiduk: rev 605fd4f33f6284ee818359911ddbea77111efb27)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/RegionStateStore.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RegionMergeRequest.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/catalog/MetaEditor.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/protobuf/Admin.proto&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/VisibilityLabelsProtos.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/catalog/TestMetaReaderEditor.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RegionMergeTransaction.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/CompactSplitThread.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/AdminProtos.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14598292" author="hudson" created="Tue, 23 Jun 2015 20:18:00 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.3 #12 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3/12/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3/12/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13938&quot; title=&quot;Deletes done during the region merge transaction may get eclipsed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13938&quot;&gt;&lt;del&gt;HBASE-13938&lt;/del&gt;&lt;/a&gt; Deletes done during the region merge transaction may get eclipsed (ddas, enis, ndimiduk) (ndimiduk: rev 5a24d16f4cf29ba8f1ea1fc46a335d140f3397d8)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/TestMetaTableAccessor.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RSRpcServices.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/protobuf/Admin.proto&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/AdminProtos.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/MetaTableAccessor.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/CompactSplitThread.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RegionMergeTransactionImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RegionMergeRequest.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/RegionStateStore.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14598306" author="hudson" created="Tue, 23 Jun 2015 20:24:51 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.1 #553 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.1/553/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.1/553/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13938&quot; title=&quot;Deletes done during the region merge transaction may get eclipsed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13938&quot;&gt;&lt;del&gt;HBASE-13938&lt;/del&gt;&lt;/a&gt; Deletes done during the region merge transaction may get eclipsed (ddas, enis, ndimiduk) (ndimiduk: rev e262190888dfa73654f8909a1e72c30d547ecbd5)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RSRpcServices.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/protobuf/Admin.proto&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/TestMetaTableAccessor.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RegionMergeTransactionImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/AdminProtos.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/MetaTableAccessor.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/CompactSplitThread.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RegionMergeRequest.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/RegionStateStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14598404" author="hudson" created="Tue, 23 Jun 2015 21:30:07 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.2-IT #18 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2-IT/18/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2-IT/18/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13938&quot; title=&quot;Deletes done during the region merge transaction may get eclipsed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13938&quot;&gt;&lt;del&gt;HBASE-13938&lt;/del&gt;&lt;/a&gt; Deletes done during the region merge transaction may get eclipsed (ddas, enis, ndimiduk) (ndimiduk: rev 525a27f0cad0d6afa4dacb2435db0f7ec953fa4d)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RSRpcServices.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/TestMetaTableAccessor.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/AdminProtos.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/CompactSplitThread.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/protobuf/Admin.proto&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/MetaTableAccessor.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RegionMergeTransactionImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/RegionStateStore.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RegionMergeRequest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14598409" author="hudson" created="Tue, 23 Jun 2015 21:32:32 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.2 #26 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2/26/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2/26/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13938&quot; title=&quot;Deletes done during the region merge transaction may get eclipsed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13938&quot;&gt;&lt;del&gt;HBASE-13938&lt;/del&gt;&lt;/a&gt; Deletes done during the region merge transaction may get eclipsed (ddas, enis, ndimiduk) (ndimiduk: rev 525a27f0cad0d6afa4dacb2435db0f7ec953fa4d)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/CompactSplitThread.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/TestMetaTableAccessor.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/protobuf/Admin.proto&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/RegionStateStore.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/AdminProtos.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RegionMergeRequest.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RSRpcServices.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RegionMergeTransactionImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/MetaTableAccessor.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14598416" author="hudson" created="Tue, 23 Jun 2015 21:35:33 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #6594 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/6594/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/6594/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13938&quot; title=&quot;Deletes done during the region merge transaction may get eclipsed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13938&quot;&gt;&lt;del&gt;HBASE-13938&lt;/del&gt;&lt;/a&gt; Deletes done during the region merge transaction may get eclipsed (ddas, enis, ndimiduk) (ndimiduk: rev 3e72dc9f08a82cb3a3572eaec2766f55b1991843)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-protocol/src/main/protobuf/Admin.proto&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/RegionStateStore.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/MetaTableAccessor.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RegionMergeRequest.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RegionMergeTransactionImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RSRpcServices.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/CompactSplitThread.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/TestMetaTableAccessor.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/AdminProtos.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14598439" author="hudson" created="Tue, 23 Jun 2015 21:49:46 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.3-IT #3 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3-IT/3/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3-IT/3/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13938&quot; title=&quot;Deletes done during the region merge transaction may get eclipsed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13938&quot;&gt;&lt;del&gt;HBASE-13938&lt;/del&gt;&lt;/a&gt; Deletes done during the region merge transaction may get eclipsed (ddas, enis, ndimiduk) (ndimiduk: rev 5a24d16f4cf29ba8f1ea1fc46a335d140f3397d8)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/RegionStateStore.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/AdminProtos.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/MetaTableAccessor.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RegionMergeTransactionImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RegionMergeRequest.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RSRpcServices.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/CompactSplitThread.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/protobuf/Admin.proto&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/TestMetaTableAccessor.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14598504" author="hudson" created="Tue, 23 Jun 2015 22:35:31 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.98 #1035 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/1035/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/1035/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13938&quot; title=&quot;Deletes done during the region merge transaction may get eclipsed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13938&quot;&gt;&lt;del&gt;HBASE-13938&lt;/del&gt;&lt;/a&gt; Deletes done during the region merge transaction may get eclipsed (ddas, enis, ndimiduk) (ndimiduk: rev 605fd4f33f6284ee818359911ddbea77111efb27)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/CompactSplitThread.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RegionMergeTransaction.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RegionMergeRequest.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/RegionStateStore.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/AdminProtos.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/catalog/MetaEditor.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/catalog/TestMetaReaderEditor.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/protobuf/Admin.proto&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/VisibilityLabelsProtos.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14724211" author="enis" created="Mon, 31 Aug 2015 22:39:36 +0000"  >&lt;p&gt;Closing this issue after 1.0.2 release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12740592" name="13938-branch-1.1.txt" size="27845" author="devaraj" created="Fri, 19 Jun 2015 07:03:06 +0000"/>
                            <attachment id="12741172" name="hbase-13938_master.patch" size="30680" author="enis" created="Mon, 22 Jun 2015 23:53:01 +0000"/>
                            <attachment id="12740709" name="hbase-13938_v2-branch-1.1.patch" size="30936" author="enis" created="Fri, 19 Jun 2015 18:58:02 +0000"/>
                            <attachment id="12741184" name="hbase-13938_v3-0.98.patch" size="39594" author="ndimiduk" created="Tue, 23 Jun 2015 00:43:46 +0000"/>
                            <attachment id="12741109" name="hbase-13938_v3-0.98.patch" size="31405" author="ndimiduk" created="Mon, 22 Jun 2015 19:53:48 +0000"/>
                            <attachment id="12741110" name="hbase-13938_v3-branch-1.0.patch" size="32146" author="ndimiduk" created="Mon, 22 Jun 2015 19:53:48 +0000"/>
                            <attachment id="12740723" name="hbase-13938_v3-branch-1.1.patch" size="32777" author="enis" created="Fri, 19 Jun 2015 20:13:01 +0000"/>
                            <attachment id="12741111" name="hbase-13938_v3-branch-1.2.patch" size="33856" author="ndimiduk" created="Mon, 22 Jun 2015 19:53:48 +0000"/>
                            <attachment id="12741112" name="hbase-13938_v3-branch-1.patch" size="33856" author="ndimiduk" created="Mon, 22 Jun 2015 19:53:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 19 Jun 2015 18:56:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 15 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2g93r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Use the master&amp;#39;s timestamp when sending hbase:meta edits on region merge to ensure proper ordering of new region addition and old region deletes.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>