<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:26:38 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5312/HBASE-5312.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5312] Closed parent region present in Hlog.lastSeqWritten</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5312</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;This is in reference to the mail sent in the dev mailing list&lt;br/&gt;
&quot;Closed parent region present in Hlog.lastSeqWritten&quot;.&lt;/p&gt;

&lt;p&gt;The sceanrio described is&lt;/p&gt;

&lt;p&gt;We had a region that was split into two daughters.  When the hlog roll tried to flush the region there was an entry in the HLog.lastSeqWritten that was not flushed or removed from the lastSeqWritten during the parent close.&lt;br/&gt;
Because this flush was not happening subsequent flushes were getting blocked&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 05:06:44,422 INFO org.apache.hadoop.hbase.regionserver.wal.HLog: Too many
 hlogs: logs=122, maxlogs=32; forcing flush of 1 regions(s):
 2acaf8e3acfd2e8a5825a1f6f0aca4a8
 05:06:44,422 WARN org.apache.hadoop.hbase.regionserver.LogRoller: Failed
 to schedule flush of 2acaf8e3acfd2e8a5825a1f6f0aca4a8r=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;,
requester=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
 05:10:48,666 INFO org.apache.hadoop.hbase.regionserver.wal.HLog: Too many
 hlogs: logs=123, maxlogs=32; forcing flush of 1 regions(s):
 2acaf8e3acfd2e8a5825a1f6f0aca4a8
 05:10:48,666 WARN org.apache.hadoop.hbase.regionserver.LogRoller: Failed
 to schedule flush of 2acaf8e3acfd2e8a5825a1f6f0aca4a8r=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;,
requester=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
 05:14:46,075 INFO org.apache.hadoop.hbase.regionserver.wal.HLog: Too many
 hlogs: logs=124, maxlogs=32; forcing flush of 1 regions(s):
 2acaf8e3acfd2e8a5825a1f6f0aca4a8
 05:14:46,075 WARN org.apache.hadoop.hbase.regionserver.LogRoller: Failed
 to schedule flush of 2acaf8e3acfd2e8a5825a1f6f0aca4a8r=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;,
requester=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
 05:15:41,584 INFO org.apache.hadoop.hbase.regionserver.wal.HLog: Too many
 hlogs: logs=125, maxlogs=32; forcing flush of 1 regions(s):
 2acaf8e3acfd2e8a5825a1f6f0aca4a8
 05:15:41,584 WARN org.apache.hadoop.hbase.regionserver.LogRoller: Failed
 to schedule flush of 2acaf8e3acfd2e8a5825a1f6f0aca4a8r=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;,

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Lets see what happened for the region 2acaf8e3acfd2e8a5825a1f6f0aca4a8&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2012-01-06 00:30:55,214 INFO org.apache.hadoop.hbase.regionserver.Store: Renaming flushed file at hdfs:&lt;span class=&quot;code-comment&quot;&gt;//192.168.1.103:9000/hbase/Htable_UFDR_031/2acaf8e3acfd2e8a5825a1f6f0aca4a8/.tmp/1755862026714756815 to hdfs://192.168.1.103:9000/hbase/Htable_UFDR_031/2acaf8e3acfd2e8a5825a1f6f0aca4a8/value/973789709483406123
&lt;/span&gt;2012-01-06 00:30:58,946 DEBUG org.apache.hadoop.hbase.regionserver.HRegion: Instantiated Htable_UFDR_016,049790700093168-04565200000,1325809837958.0ebe5bd7fcbc09ee074d5600b9d4e062.
2012-01-06 00:30:59,614 INFO org.apache.hadoop.hbase.regionserver.Store: Added hdfs:&lt;span class=&quot;code-comment&quot;&gt;//192.168.1.103:9000/hbase/Htable_UFDR_031/2acaf8e3acfd2e8a5825a1f6f0aca4a8/value/973789709483406123, entries=7537, sequenceid=20312223, memsize=4.2m, filesize=2.9m
&lt;/span&gt;2012-01-06 00:30:59,787 DEBUG org.apache.hadoop.hbase.regionserver.HRegion: Finished snapshotting, commencing flushing stores
2012-01-06 00:30:59,787 INFO org.apache.hadoop.hbase.regionserver.HRegion: Finished memstore flush of ~133.5m &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; region Htable_UFDR_031,00332,1325808823997.2acaf8e3acfd2e8a5825a1f6f0aca4a8. in 21816ms, sequenceid=20312223, compaction requested=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
2012-01-06 00:30:59,787 DEBUG org.apache.hadoop.hbase.regionserver.CompactSplitThread: Compaction requested &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Htable_UFDR_031,00332,1325808823997.2acaf8e3acfd2e8a5825a1f6f0aca4a8. because regionserver20020.cacheFlusher; priority=0, compaction queue size=5840

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A user triggered split has been issued to this region which can be seen in the above logs.&lt;br/&gt;
The flushing of this region has resulted in a seq id 20312223.&lt;/p&gt;

&lt;p&gt;The region has been splitted and the parent region has been closed&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
00:31:12,607 INFO org.apache.hadoop.hbase.regionserver.SplitTransaction: Starting split of region Htable_UFDR_031,00332,1325808823997.2acaf8e3acfd2e8a5825a1f6f0aca4a8.
00:31:13,694 DEBUG org.apache.hadoop.hbase.regionserver.HRegion: Closing Htable_UFDR_031,00332,1325808823997.2acaf8e3acfd2e8a5825a1f6f0aca4a8.: disabling compactions &amp;amp; flushes
00:31:13,694 DEBUG org.apache.hadoop.hbase.regionserver.HRegion: Updates disabled &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; region Htable_UFDR_031,00332,1325808823997.2acaf8e3acfd2e8a5825a1f6f0aca4a8.
00:31:13,718 INFO org.apache.hadoop.hbase.regionserver.HRegion: Closed Htable_UFDR_031,00332,1325808823997.2acaf8e3acfd2e8a5825a1f6f0aca4a8.
00:31:39,552 INFO org.apache.hadoop.hbase.catalog.MetaEditor: Offlined parent region Htable_UFDR_031,00332,1325808823997.2acaf8e3acfd2e8a5825a1f6f0aca4a8. in META
00:31:41,374 DEBUG org.apache.hadoop.hbase.regionserver.Store: loaded hdfs:&lt;span class=&quot;code-comment&quot;&gt;//192.168.1.103:9000/hbase/Htable_UFDR_031/259d0c620c9105928e52713f4a5a252e/value/239119195230239381.2acaf8e3acfd2e8a5825a1f6f0aca4a8, isReference=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, isBulkLoadResult=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, seqid=20201181, majorCompaction=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
&lt;/span&gt;

2012-01-06 00:31:42,529 DEBUG org.apache.hadoop.hbase.regionserver.Store: loaded hdfs:&lt;span class=&quot;code-comment&quot;&gt;//192.168.1.103:9000/hbase/Htable_UFDR_031/52ff3c7c6df6e0337876bbca29cee84a/value/973789709483406123.2acaf8e3acfd2e8a5825a1f6f0aca4a8, isReference=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, isBulkLoadResult=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, seqid=20312224, majorCompaction=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
&lt;/span&gt;
2012-01-06 00:31:42,532 DEBUG org.apache.hadoop.hbase.regionserver.Store: loaded hdfs:&lt;span class=&quot;code-comment&quot;&gt;//192.168.1.103:9000/hbase/Htable_UFDR_031/259d0c620c9105928e52713f4a5a252e/value/973789709483406123.2acaf8e3acfd2e8a5825a1f6f0aca4a8, isReference=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, isBulkLoadResult=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, seqid=20312223, majorCompaction=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
&lt;/span&gt;
INFO org.apache.hadoop.hbase.regionserver.CompactSplitThread: Region split, META updated, and report to master. Parent=Htable_UFDR_031,00332,1325808823997.2acaf8e3acfd2e8a5825a1f6f0aca4a8., &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; regions: Htable_UFDR_031,00332,1325809872607.259d0c620c9105928e52713f4a5a252e., Htable_UFDR_031,003732800093168-03594291912,1325809872607.52ff3c7c6df6e0337876bbca29cee84a.. Split took 29sec

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In the above logs we can also see that the new daugher regions have the next seq id as 20312223 and 20312224.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
DEBUG org.apache.hadoop.hbase.regionserver.wal.HLog: Found 1 hlogs to remove out of total 4; oldest outstanding sequenceid is 20312224 from region 2acaf8e3acfd2e8a5825a1f6f0aca4a8
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Now we see that the parent region which was clsoed has a seq id 20312224 which is not flushed.&lt;br/&gt;
So further flush are failing as the region is already removed from onlineRegionList.&lt;br/&gt;
The doubt here is before the region could be closed, a put has arrived for this region.  But due to some reason the flush has  not happened for that. We tried to dig this, but not able to get this problem again.&lt;br/&gt;
0.90.5 version + few 0.90.6 patches ( before 0.90.6RC0)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12540682">HBASE-5312</key>
            <summary>Closed parent region present in Hlog.lastSeqWritten</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ram_krish">ramkrishna.s.vasudevan</reporter>
                        <labels>
                            <label>delete</label>
                    </labels>
                <created>Wed, 1 Feb 2012 06:08:22 +0000</created>
                <updated>Sat, 10 Jan 2015 02:17:13 +0000</updated>
                            <resolved>Sat, 10 Jan 2015 02:17:13 +0000</resolved>
                                    <version>0.90.5</version>
                                    <fixVersion>0.90.7</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                                                            <comments>
                            <comment id="13197606" author="ram_krish" created="Wed, 1 Feb 2012 06:08:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5225&quot; title=&quot;Backport HBASE-3845 -data loss because lastSeqWritten can miss memstore edits&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5225&quot;&gt;&lt;del&gt;HBASE-5225&lt;/del&gt;&lt;/a&gt; is not present in this version .&lt;/p&gt;</comment>
                            <comment id="13204313" author="tlipcon" created="Thu, 9 Feb 2012 07:01:28 +0000"  >&lt;p&gt;This bug has been around a while, see:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3481?focusedCommentId=12987965&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12987965&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-3481?focusedCommentId=12987965&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12987965&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;We also experienced it on a customer cluster this week.&lt;/p&gt;

&lt;p&gt;Any leads on this, Ram?&lt;/p&gt;</comment>
                            <comment id="13204455" author="ram_krish" created="Thu, 9 Feb 2012 11:29:48 +0000"  >&lt;p&gt;We have tried to reproduce this bug in different ways.  But still unclear.&lt;br/&gt;
May be i will check the defect &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3481&quot; title=&quot;max seq id in flushed file can be larger than its correct value causing data loss during recovery&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3481&quot;&gt;&lt;del&gt;HBASE-3481&lt;/del&gt;&lt;/a&gt; to see if it helps.  &lt;/p&gt;</comment>
                            <comment id="13205214" author="jxiang" created="Fri, 10 Feb 2012 04:18:07 +0000"  >&lt;p&gt;Have anyone seen this issue on 0.92 release?  Could we add some logging so that we will have some clue when it happens again?&lt;/p&gt;</comment>
                            <comment id="13205580" author="ram_krish" created="Fri, 10 Feb 2012 17:51:40 +0000"  >&lt;p&gt;+1 on adding logs but need to ensure we don&apos;t slow down the hlog append and flush flow.&lt;br/&gt;
By the way Jimmy, you have any suspects in this issue?&lt;/p&gt;</comment>
                            <comment id="13205596" author="jxiang" created="Fri, 10 Feb 2012 18:18:53 +0000"  >&lt;p&gt;I checked the lock mechanism and it looks fine.  If it is not a bug in java reentrant lock, I suspect the region is removed from the online regions list before it is properly closed, either during region spliting, or region closing.&lt;/p&gt;</comment>
                            <comment id="13229005" author="zjushch" created="Wed, 14 Mar 2012 06:05:23 +0000"  >&lt;p&gt;@ram&lt;br/&gt;
We also see the same wrong log&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; 05:10:48,666 INFO org.apache.hadoop.hbase.regionserver.wal.HLog: Too many
 hlogs: logs=123, maxlogs=32; forcing flush of 1 regions(s):
 2acaf8e3acfd2e8a5825a1f6f0aca4a8
 05:10:48,666 WARN org.apache.hadoop.hbase.regionserver.LogRoller: Failed
 to schedule flush of 2acaf8e3acfd2e8a5825a1f6f0aca4a8r=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;,
requester=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;But I&apos;m not sure the cause is also the same.&lt;br/&gt;
Could you use the patch of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5569&quot; title=&quot;Do not collect deleted KVs when they are still in use by a scanner.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5569&quot;&gt;&lt;del&gt;HBASE-5569&lt;/del&gt;&lt;/a&gt;, and try again?&lt;br/&gt;
In our case for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5569&quot; title=&quot;Do not collect deleted KVs when they are still in use by a scanner.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5569&quot;&gt;&lt;del&gt;HBASE-5569&lt;/del&gt;&lt;/a&gt;, I&apos;m sure the cause is that we concurrently call region.flushcach().&lt;br/&gt;
For this issue, is there any possibility concurrently calling region.flushcach() or region.internalFlushcache(). If so, that&apos;s the reason.&lt;/p&gt;</comment>
                            <comment id="13229011" author="ram_krish" created="Wed, 14 Mar 2012 06:17:48 +0000"  >&lt;p&gt;@Chunhui&lt;br/&gt;
Thanks for your explantion. Now in your latest patch you avoid two flushes happening in parallel if it comes through flush case.&lt;/p&gt;

&lt;p&gt;Yes in our case there was an explicit split call also that happened which will do one more flush.&lt;br/&gt;
Very good analysis. Excellent !!.&lt;/p&gt;</comment>
                            <comment id="13229012" author="ram_krish" created="Wed, 14 Mar 2012 06:18:24 +0000"  >&lt;p&gt;@Jimmy/Todd&lt;br/&gt;
Want to take a look at the patch in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5568&quot; title=&quot;Multi concurrent flushcache() for one region could cause data loss&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5568&quot;&gt;&lt;del&gt;HBASE-5568&lt;/del&gt;&lt;/a&gt;?&lt;br/&gt;
Chunhui mistakenly used &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5569&quot; title=&quot;Do not collect deleted KVs when they are still in use by a scanner.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5569&quot;&gt;&lt;del&gt;HBASE-5569&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13230334" author="ram_krish" created="Thu, 15 Mar 2012 17:24:54 +0000"  >&lt;p&gt;@Todd/Jimmy&lt;br/&gt;
Do you feel &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5568&quot; title=&quot;Multi concurrent flushcache() for one region could cause data loss&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5568&quot;&gt;&lt;del&gt;HBASE-5568&lt;/del&gt;&lt;/a&gt; solves the problem for your scenario also? If so we can close this issue i feel?&lt;/p&gt;</comment>
                            <comment id="13240340" author="jeason" created="Wed, 28 Mar 2012 10:31:11 +0000"  >&lt;p&gt;I&apos;m afraid it&apos;s not the same issue with &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5568&quot; title=&quot;Multi concurrent flushcache() for one region could cause data loss&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5568&quot;&gt;&lt;del&gt;HBASE-5568&lt;/del&gt;&lt;/a&gt;. No concurrent flushing happened when the edit with the sequenceId 20312224 added into Region 2acaf8e3acfd2e8a5825a1f6f0aca4a8. Though that problem may also happened in this issue.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;00:28:25,460 INFO org.apache.hadoop.hbase.regionserver.HRegion: Finished memstore flush of ~153.9m for region Htable_UFDR_031,00332,1325808823997.2acaf8e3acfd2e8a5825a1f6f0aca4a8. in 8444ms, sequenceid=20294110, compaction requested=true
00:28:25,460 DEBUG org.apache.hadoop.hbase.regionserver.CompactSplitThread: Compaction requested for Htable_UFDR_031,00332,1325808823997.2acaf8e3acfd2e8a5825a1f6f0aca4a8. because regionserver20020.cacheFlusher; priority=2, compaction queue size=5835
00:30:35,328 DEBUG org.apache.hadoop.hbase.regionserver.HRegion: Flush requested on Htable_UFDR_031,00332,1325808823997.2acaf8e3acfd2e8a5825a1f6f0aca4a8.
00:30:35,943 DEBUG org.apache.hadoop.hbase.regionserver.HRegion: Started memstore flush for Htable_UFDR_031,00332,1325808823997.2acaf8e3acfd2e8a5825a1f6f0aca4a8., current region memstore size 129.5m
00:30:37,963 DEBUG org.apache.hadoop.hbase.regionserver.HRegion: NOT flushing memstore for region Htable_UFDR_031,00332,1325808823997.2acaf8e3acfd2e8a5825a1f6f0aca4a8., flushing=true, writesEnabled=true
00:30:37,971 DEBUG org.apache.hadoop.hbase.regionserver.HRegion: Flush requested on Htable_UFDR_031,00332,1325808823997.2acaf8e3acfd2e8a5825a1f6f0aca4a8.
00:30:37,971 DEBUG org.apache.hadoop.hbase.regionserver.HRegion: Started memstore flush for Htable_UFDR_031,00332,1325808823997.2acaf8e3acfd2e8a5825a1f6f0aca4a8., current region memstore size 129.7m
00:30:47,907 INFO org.apache.hadoop.hbase.regionserver.Store: Renaming flushed file at hdfs://192.168.1.103:9000/hbase/Htable_UFDR_031/2acaf8e3acfd2e8a5825a1f6f0aca4a8/.tmp/5960455867013769207 to hdfs://192.168.1.103:9000/hbase/Htable_UFDR_031/2acaf8e3acfd2e8a5825a1f6f0aca4a8/value/3682074154882687307
00:30:47,907 INFO org.apache.hadoop.hbase.regionserver.Store: Renaming flushed file at hdfs://192.168.1.103:9000/hbase/Htable_UFDR_031/2acaf8e3acfd2e8a5825a1f6f0aca4a8/.tmp/5960455867013769207 to hdfs://192.168.1.103:9000/hbase/Htable_UFDR_031/2acaf8e3acfd2e8a5825a1f6f0aca4a8/value/3682074154882687307
00:30:49,241 INFO org.apache.hadoop.hbase.regionserver.Store: Added hdfs://192.168.1.103:9000/hbase/Htable_UFDR_031/2acaf8e3acfd2e8a5825a1f6f0aca4a8/value/3682074154882687307, entries=233841, sequenceid=20311822, memsize=129.5m, filesize=89.5m
00:30:49,242 INFO org.apache.hadoop.hbase.regionserver.HRegion: Finished memstore flush of ~129.5m for region Htable_UFDR_031,00332,1325808823997.2acaf8e3acfd2e8a5825a1f6f0aca4a8. in 13299ms, sequenceid=20311822, compaction requested=true
00:30:49,242 DEBUG org.apache.hadoop.hbase.regionserver.CompactSplitThread: Compaction requested for Htable_UFDR_031,00332,1325808823997.2acaf8e3acfd2e8a5825a1f6f0aca4a8. because User-triggered split; priority=1, compaction queue size=5840
00:30:55,214 INFO org.apache.hadoop.hbase.regionserver.Store: Renaming flushed file at hdfs://192.168.1.103:9000/hbase/Htable_UFDR_031/2acaf8e3acfd2e8a5825a1f6f0aca4a8/.tmp/1755862026714756815 to hdfs://192.168.1.103:9000/hbase/Htable_UFDR_031/2acaf8e3acfd2e8a5825a1f6f0aca4a8/value/973789709483406123
00:30:55,214 INFO org.apache.hadoop.hbase.regionserver.Store: Renaming flushed file at hdfs://192.168.1.103:9000/hbase/Htable_UFDR_031/2acaf8e3acfd2e8a5825a1f6f0aca4a8/.tmp/1755862026714756815 to hdfs://192.168.1.103:9000/hbase/Htable_UFDR_031/2acaf8e3acfd2e8a5825a1f6f0aca4a8/value/973789709483406123
00:30:59,614 INFO org.apache.hadoop.hbase.regionserver.Store: Added hdfs://192.168.1.103:9000/hbase/Htable_UFDR_031/2acaf8e3acfd2e8a5825a1f6f0aca4a8/value/973789709483406123, entries=7537, sequenceid=20312223, memsize=4.2m, filesize=2.9m
00:30:59,787 INFO org.apache.hadoop.hbase.regionserver.HRegion: Finished memstore flush of ~133.5m for region Htable_UFDR_031,00332,1325808823997.2acaf8e3acfd2e8a5825a1f6f0aca4a8. in 21816ms, sequenceid=20312223, compaction requested=true
00:30:59,787 DEBUG org.apache.hadoop.hbase.regionserver.CompactSplitThread: Compaction requested for Htable_UFDR_031,00332,1325808823997.2acaf8e3acfd2e8a5825a1f6f0aca4a8. because regionserver20020.cacheFlusher; priority=0, compaction queue size=5840
00:31:12,605 INFO org.apache.hadoop.hbase.regionserver.HRegion: Starting compaction on region Htable_UFDR_031,00332,1325808823997.2acaf8e3acfd2e8a5825a1f6f0aca4a8.
00:31:12,607 INFO org.apache.hadoop.hbase.regionserver.HRegion: completed compaction on region Htable_UFDR_031,00332,1325808823997.2acaf8e3acfd2e8a5825a1f6f0aca4a8. after 0sec
00:31:12,607 INFO org.apache.hadoop.hbase.regionserver.SplitTransaction: Starting split of region Htable_UFDR_031,00332,1325808823997.2acaf8e3acfd2e8a5825a1f6f0aca4a8.
00:31:13,694 DEBUG org.apache.hadoop.hbase.regionserver.HRegion: Closing Htable_UFDR_031,00332,1325808823997.2acaf8e3acfd2e8a5825a1f6f0aca4a8.: disabling compactions &amp;amp; flushes
00:31:13,694 DEBUG org.apache.hadoop.hbase.regionserver.HRegion: Updates disabled for region Htable_UFDR_031,00332,1325808823997.2acaf8e3acfd2e8a5825a1f6f0aca4a8.
00:31:13,718 INFO org.apache.hadoop.hbase.regionserver.HRegion: Closed Htable_UFDR_031,00332,1325808823997.2acaf8e3acfd2e8a5825a1f6f0aca4a8.
00:31:39,552 INFO org.apache.hadoop.hbase.catalog.MetaEditor: Offlined parent region Htable_UFDR_031,00332,1325808823997.2acaf8e3acfd2e8a5825a1f6f0aca4a8. in META
00:31:42,529 DEBUG org.apache.hadoop.hbase.regionserver.Store: loaded hdfs://192.168.1.103:9000/hbase/Htable_UFDR_031/52ff3c7c6df6e0337876bbca29cee84a/value/973789709483406123.2acaf8e3acfd2e8a5825a1f6f0aca4a8, isReference=true, isBulkLoadResult=false, seqid=20312224, majorCompaction=false
00:31:42,532 DEBUG org.apache.hadoop.hbase.regionserver.Store: loaded hdfs://192.168.1.103:9000/hbase/Htable_UFDR_031/259d0c620c9105928e52713f4a5a252e/value/973789709483406123.2acaf8e3acfd2e8a5825a1f6f0aca4a8, isReference=true, isBulkLoadResult=false, seqid=20312223, majorCompaction=false
00:31:42,575 INFO org.apache.hadoop.hbase.regionserver.CompactSplitThread: Region split, META updated, and report to master. Parent=Htable_UFDR_031,00332,1325808823997.2acaf8e3acfd2e8a5825a1f6f0aca4a8., new regions: Htable_UFDR_031,00332,1325809872607.259d0c620c9105928e52713f4a5a252e., Htable_UFDR_031,003732800093168-03594291912,1325809872607.52ff3c7c6df6e0337876bbca29cee84a.. Split took 29sec
00:34:48,061 DEBUG org.apache.hadoop.hbase.regionserver.wal.HLog: Found 1 hlogs to remove out of total 4; oldest outstanding sequenceid is 20312224 from region 2acaf8e3acfd2e8a5825a1f6f0aca4a8
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;My doubt is:&lt;/p&gt;

&lt;p&gt;From the below log, we can see the sequenceId was 20312223. &lt;b&gt;So the sequenceId of 20312224 must be generated after this&lt;/b&gt;:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;00:30:59,787 INFO org.apache.hadoop.hbase.regionserver.HRegion: Finished memstore flush of ~133.5m for region Htable_UFDR_031,00332,1325808823997.2acaf8e3acfd2e8a5825a1f6f0aca4a8. in 21816ms, sequenceid=20312223, compaction requested=true
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Concurrent flush may cause the wrong memstoresize which is mentioned in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5568&quot; title=&quot;Multi concurrent flushcache() for one region could cause data loss&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5568&quot;&gt;&lt;del&gt;HBASE-5568&lt;/del&gt;&lt;/a&gt;(A edit larger than 20312223 could not be lost in this issue, right?). I don&apos;t think any relationships with this issue. &lt;br/&gt;
Correct me if am wrong. Thank you.&lt;/p&gt;</comment>
                            <comment id="14269213" author="clehene" created="Thu, 8 Jan 2015 11:30:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jeason&quot; class=&quot;user-hover&quot; rel=&quot;jeason&quot;&gt;Jieshan Bean&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ram_krish&quot; class=&quot;user-hover&quot; rel=&quot;ram_krish&quot;&gt;ramkrishna.s.vasudevan&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt; can we close this?&lt;/p&gt;</comment>
                            <comment id="14272267" author="apurtell" created="Sat, 10 Jan 2015 02:17:13 +0000"  >&lt;p&gt;Reported against a now unsupported version, resolving as Wont Fix. Thanks for the nudge &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=clehene&quot; class=&quot;user-hover&quot; rel=&quot;clehene&quot;&gt;Cosmin Lehene&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12546183">HBASE-5568</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                            <subtask id="12542070">HBASE-5376</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 9 Feb 2012 07:01:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>226077</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 48 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02dvj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11849</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>