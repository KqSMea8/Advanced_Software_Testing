<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:09:14 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-9965/HBASE-9965.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-9965] hbase-0.94.13 fails to start hbase master: java.lang.RuntimeException: Failed suppression of fs shutdown hook</title>
                <link>https://issues.apache.org/jira/browse/HBASE-9965</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Having installed the latest stable hbase-0.94.13 version, and following the instructions at    hbase-0.94.13/docs/book/quickstart.html  ,  &lt;br/&gt;
the hbase master fails to start and hbase is unusable, owing to this Java RuntimeException occurring, as shown in the log file :&lt;/p&gt;

&lt;p&gt;2013-11-13 13:52:06,316 INFO org.apache.hadoop.hbase.master.ActiveMasterManager: Deleting ZNode for /hbase/backup-masters/jvds,52926,1384350725521 from backup master directory&lt;br/&gt;
2013-11-13 13:52:06,318 INFO org.apache.zookeeper.server.PrepRequestProcessor: Got user-level KeeperException when processing sessionid:0x14251bbb3d40000 type:delete cxid:0x13 zxid:0xb txntype:-1 reqpath:n/a Error Path:/hbase/backup-masters/jvds,52926,1384350725521 Error:KeeperErrorCode = NoNode for /hbase/backup-masters/jvds,52926,1384350725521&lt;br/&gt;
2013-11-13 13:52:06,320 WARN org.apache.hadoop.hbase.zookeeper.RecoverableZooKeeper: Node /hbase/backup-masters/jvds,52926,1384350725521 already deleted, and this is not a retry&lt;br/&gt;
2013-11-13 13:52:06,320 INFO org.apache.hadoop.hbase.master.ActiveMasterManager: Master=jvds,52926,1384350725521&lt;br/&gt;
2013-11-13 13:52:06,348 INFO org.apache.hadoop.hbase.master.SplitLogManager: timeout = 300000&lt;br/&gt;
2013-11-13 13:52:06,348 INFO org.apache.hadoop.hbase.master.SplitLogManager: unassigned timeout = 180000&lt;br/&gt;
2013-11-13 13:52:06,348 INFO org.apache.hadoop.hbase.master.SplitLogManager: resubmit threshold = 3&lt;br/&gt;
2013-11-13 13:52:06,352 INFO org.apache.hadoop.hbase.master.SplitLogManager: found 0 orphan tasks and 0 rescan nodes&lt;br/&gt;
2013-11-13 13:52:06,385 INFO org.apache.hadoop.util.NativeCodeLoader: Loaded the native-hadoop library&lt;br/&gt;
2013-11-13 13:52:06,385 ERROR org.apache.hadoop.hbase.master.HMasterCommandLine: Failed to start master&lt;br/&gt;
java.lang.RuntimeException: Failed suppression of fs shutdown hook: Thread&lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-27,5,main&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.ShutdownHook.suppressHdfsShutdownHook(ShutdownHook.java:196)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.ShutdownHook.install(ShutdownHook.java:83)&lt;br/&gt;
	at org.apache.hadoop.hbase.util.JVMClusterUtil.startup(JVMClusterUtil.java:191)&lt;br/&gt;
	at org.apache.hadoop.hbase.LocalHBaseCluster.startup(LocalHBaseCluster.java:420)&lt;br/&gt;
	at org.apache.hadoop.hbase.master.HMasterCommandLine.startMaster(HMasterCommandLine.java:149)&lt;br/&gt;
	at org.apache.hadoop.hbase.master.HMasterCommandLine.run(HMasterCommandLine.java:104)&lt;br/&gt;
	at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)&lt;br/&gt;
	at org.apache.hadoop.hbase.util.ServerCommandLine.doMain(ServerCommandLine.java:76)&lt;br/&gt;
	at org.apache.hadoop.hbase.master.HMaster.main(HMaster.java:2120)&lt;br/&gt;
2013-11-13 13:52:06,386 ERROR org.apache.hadoop.io.nativeio.NativeIO: Unable to initialize NativeIO libraries&lt;br/&gt;
java.lang.NoSuchFieldError: workaroundNonThreadSafePasswdCalls&lt;br/&gt;
	at org.apache.hadoop.io.nativeio.NativeIO.initNative(Native Method)&lt;br/&gt;
	at org.apache.hadoop.io.nativeio.NativeIO.&amp;lt;clinit&amp;gt;(NativeIO.java:58)&lt;br/&gt;
	at org.apache.hadoop.fs.FileUtil.setPermission(FileUtil.java:653)&lt;br/&gt;
	at org.apache.hadoop.fs.RawLocalFileSystem.setPermission(RawLocalFileSystem.java:509)&lt;br/&gt;
	at org.apache.hadoop.fs.FilterFileSystem.setPermission(FilterFileSystem.java:286)&lt;br/&gt;
	at org.apache.hadoop.fs.ChecksumFileSystem.create(ChecksumFileSystem.java:385)&lt;br/&gt;
	at org.apache.hadoop.fs.ChecksumFileSystem.create(ChecksumFileSystem.java:364)&lt;br/&gt;
	at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:555)&lt;br/&gt;
	at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:536)&lt;br/&gt;
	at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:443)&lt;br/&gt;
	at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:435)&lt;br/&gt;
	at org.apache.hadoop.hbase.util.FSUtils.setVersion(FSUtils.java:475)&lt;br/&gt;
	at org.apache.hadoop.hbase.util.FSUtils.setVersion(FSUtils.java:375)&lt;br/&gt;
	at org.apache.hadoop.hbase.master.MasterFileSystem.checkRootDir(MasterFileSystem.java:436)&lt;br/&gt;
	at org.apache.hadoop.hbase.master.MasterFileSystem.createInitialFileSystemLayout(MasterFileSystem.java:148)&lt;br/&gt;
	at org.apache.hadoop.hbase.master.MasterFileSystem.&amp;lt;init&amp;gt;(MasterFileSystem.java:133)&lt;br/&gt;
	at org.apache.hadoop.hbase.master.HMaster.finishInitialization(HMaster.java:573)&lt;br/&gt;
	at org.apache.hadoop.hbase.master.HMaster.run(HMaster.java:432)&lt;br/&gt;
	at org.apache.hadoop.hbase.master.HMasterCommandLine$LocalHMaster.run(HMasterCommandLine.java:226)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:744)&lt;br/&gt;
2013-11-13 13:52:06,388 DEBUG org.apache.hadoop.hbase.util.FSUtils: Created version file at &lt;a href=&quot;file:/home/jason/3P/hbase/data&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/home/jason/3P/hbase/data&lt;/a&gt; set its version at:7&lt;/p&gt;

&lt;p&gt;I would expect after downloading the latest stable version and following the instructions closely that the hbase master should start and hbase should be usable.  &lt;/p&gt;

&lt;p&gt;As specified in quickstart.html, the only file I edited was conf/hbase-site.xml, which is :&lt;br/&gt;
 &amp;lt;configuration&amp;gt;&lt;/p&gt;

&lt;p&gt;  &amp;lt;property&amp;gt;&lt;br/&gt;
    &amp;lt;name&amp;gt;hbase.rootdir&amp;lt;/name&amp;gt;&lt;br/&gt;
    &amp;lt;value&amp;gt;&lt;a href=&quot;file:///home/jason/3P/hbase/data&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:///home/jason/3P/hbase/data&lt;/a&gt;&amp;lt;/value&amp;gt;&lt;br/&gt;
  &amp;lt;/property&amp;gt;&lt;/p&gt;

&lt;p&gt;  &amp;lt;property&amp;gt;&lt;br/&gt;
    &amp;lt;name&amp;gt;hbase.zookeeper.property.dataDir&amp;lt;/name&amp;gt;&lt;br/&gt;
    &amp;lt;value&amp;gt;/home/jason/3P/hbase/zookeeper-data&amp;lt;/value&amp;gt;&lt;br/&gt;
  &amp;lt;/property&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;/configuration&amp;gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux x86_64 (Centos 6.4)&lt;/p&gt;</environment>
        <key id="12679027">HBASE-9965</key>
            <summary>hbase-0.94.13 fails to start hbase master: java.lang.RuntimeException: Failed suppression of fs shutdown hook</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="JVD66">Jason Vas Dias</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 Nov 2013 14:33:29 +0000</created>
                <updated>Tue, 20 May 2014 10:39:25 +0000</updated>
                            <resolved>Wed, 13 Nov 2013 17:41:54 +0000</resolved>
                                    <version>0.94.13</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13821509" author="jvd66" created="Wed, 13 Nov 2013 16:44:30 +0000"  >&lt;p&gt;I think this happens because the global  &apos;fsShutdownHooks&apos; object has a null value:&lt;br/&gt;
org.apache.hadoop.hbase.regionserver.ShutdownHook.suppressHdfsShutdownHook(ShutdownHook.java:196):&lt;br/&gt;
if (!fsShutdownHooks.containsKey(hdfsClientFinalizer) &amp;amp;&amp;amp;&lt;br/&gt;
          !ShutdownHookManager.deleteShutdownHook(hdfsClientFinalizer)) &lt;/p&gt;
{
        throw new RuntimeException(&quot;Failed suppression of fs shutdown hook: &quot; +
          hdfsClientFinalizer);
      }
&lt;p&gt;Running the base master with the java debugger, &apos;jdb&apos;, and stopping in suppressHdfsShutdownHook , shows that &lt;br/&gt;
&apos;fsShutdownHooks&apos; is an undefined symbol and has a null value.  &lt;br/&gt;
The code should be checking if the fsShutdownHooks object is null before it is accessed, and should return if so.&lt;br/&gt;
I&apos;ve now checked out the hbase SVN and will try building with the suggested change, testing, &amp;amp; will report back.&lt;/p&gt;</comment>
                            <comment id="13821513" author="jvd66" created="Wed, 13 Nov 2013 16:46:42 +0000"  >&lt;p&gt;Has anybody tried to run hbase-0.94.13 / hbase-0.94.12 and done any tests with it before releasing it as the latest &quot;stable&quot; version ?&lt;br/&gt;
It would appear not.&lt;/p&gt;</comment>
                            <comment id="13821576" author="lhofhansl" created="Wed, 13 Nov 2013 17:41:54 +0000"  >&lt;p&gt;You&apos;ll get a better response from the mailing.&lt;br/&gt;
And, yes, we do carefully test releases before we release them.&lt;/p&gt;</comment>
                            <comment id="13930881" author="jdcryans" created="Tue, 11 Mar 2014 20:15:26 +0000"  >&lt;p&gt;FWIW I found the reason some users get this issue. It happens when HBase is compiled against Hadoop 1 and has Hadoop 2 jars on its classpath. Someone on IRC just had the same issue and I was able to repro after seeing the classpath. In his case the machines default classpath had those Hadoop 2 jars coming from something unrelated to HBase.&lt;/p&gt;</comment>
                            <comment id="14002696" author="wengad" created="Tue, 20 May 2014 01:39:38 +0000"  >&lt;p&gt;so how can i resolve this case?&lt;/p&gt;</comment>
                            <comment id="14002766" author="stack" created="Tue, 20 May 2014 04:09:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wengad&quot; class=&quot;user-hover&quot; rel=&quot;wengad&quot;&gt;wengad&lt;/a&gt; Check your CLASSPATH for hadoop2 jars.  CLASSPATH is printed in the logs soon after startup.&lt;/p&gt;</comment>
                            <comment id="14003061" author="wengad" created="Tue, 20 May 2014 10:39:25 +0000"  >&lt;p&gt;i really get the latest stable version hbase-0.94.19., and following the &quot;Quick Start&quot;,runnig as standalone HBase Instance. But it still failed to start up &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 13 Nov 2013 17:41:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>358392</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 30 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ps5z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>358682</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>