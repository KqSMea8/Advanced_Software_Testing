<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:23:05 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-4908/HBASE-4908.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-4908] HBase cluster test tool (port from 0.89-fb)</title>
                <link>https://issues.apache.org/jira/browse/HBASE-4908</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Porting one of our HBase cluster test tools (a single-process multi-threaded load generator and verifier) from 0.89-fb to trunk.&lt;br/&gt;
I cleaned up the code a bit compared to what&apos;s in 0.89-fb, and discovered that it has some features that I have not tried yet (some kind of a kill test, and some way to run HBase as multiple processes on one machine).&lt;br/&gt;
The main utility of this piece of code for us has been the HBaseClusterTest command-line tool (called HBaseTest in 0.89-fb), which we usually invoke as a load test in our five-node dev cluster testing, e.g.:&lt;/p&gt;

&lt;p&gt;hbase org.apache.hadoop.hbase.manual.HBaseTest -load 1000000000:50:100:20 -tn load_test -read 1:1000000000:50:20 -zk &amp;lt;zk_quorum&amp;gt; -bloom ROWCOL -compression GZIP&lt;/p&gt;

&lt;p&gt;I will be using this code to load-test the delta encoding patch and making fixes, but I am submitting the patch for early feedback. I will probably try out its other functionality and comment on how it works.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12533360">HBASE-4908</key>
            <summary>HBase cluster test tool (port from 0.89-fb)</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12533357">HBASE-4907</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mikhail">Mikhail Bautin</assignee>
                                    <reporter username="mikhail">Mikhail Bautin</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Nov 2011 22:47:57 +0000</created>
                <updated>Fri, 12 Oct 2012 05:35:04 +0000</updated>
                            <resolved>Thu, 8 Dec 2011 02:39:40 +0000</resolved>
                                                    <fixVersion>0.94.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13160425" author="phabricator@reviews.facebook.net" created="Wed, 30 Nov 2011 22:55:39 +0000"  >&lt;p&gt;mbautin requested code review of &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4908&quot; title=&quot;HBase cluster test tool (port from 0.89-fb)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4908&quot;&gt;&lt;del&gt;HBASE-4908&lt;/del&gt;&lt;/a&gt; HBase cluster test tool (port from 0.89-fb)&quot;.&lt;br/&gt;
Reviewers: stack, Karthik, Kannan, nspiegelberg, JIRA&lt;/p&gt;

&lt;p&gt;  Porting one of our HBase cluster test tools (a single-process multi-threaded load generator and verifier) from 0.89-fb to trunk.&lt;br/&gt;
  I cleaned up the code a bit compared to what&apos;s in 0.89-fb, and discovered that it has some features that I have not tried yet (some kind of a kill test, and some way to run HBase as multiple processes on one machine).&lt;br/&gt;
  The main utility of this piece of code for us has been the HBaseClusterTest command-line tool (called HBaseTest in 0.89-fb), which we usually invoke as a load test in our five-node dev cluster testing, e.g.:&lt;/p&gt;

&lt;p&gt;  hbase org.apache.hadoop.hbase.manual.HBaseTest -load 1000000000:50:100:20 -tn load_test -read 1:1000000000:50:20 -zk &amp;lt;zk_quorum&amp;gt; -bloom ROWCOL -compression GZIP&lt;/p&gt;

&lt;p&gt;  I will be using this code to load-test the delta encoding patch and making fixes, but I am submitting the patch for early feedback. I will probably try out its other functionality and comment on how it works.&lt;/p&gt;


&lt;p&gt;TEST PLAN&lt;br/&gt;
  Run this on a dev cluster. Explore various modes of the tool (I&apos;ve only tried the load test mode before). Probably make a unit test that runs a small local load test.&lt;/p&gt;


&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D549&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D549&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/HBaseClusterTest.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/RestartMetaTest.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/DataGenerator.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/DisplayFormatUtils.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/HBaseUtils.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/HdfsAppender.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/KillProcessesAndVerify.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/MultiThreadedAction.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/MultiThreadedActionMBean.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/MultiThreadedReader.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/MultiThreadedWriter.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/ProcessBasedLocalHBaseCluster.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/1227/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/1227/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13160476" author="phabricator@reviews.facebook.net" created="Wed, 30 Nov 2011 23:53:39 +0000"  >&lt;p&gt;stack has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4908&quot; title=&quot;HBase cluster test tool (port from 0.89-fb)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4908&quot;&gt;&lt;del&gt;HBASE-4908&lt;/del&gt;&lt;/a&gt; HBase cluster test tool (port from 0.89-fb)&quot;.&lt;/p&gt;

&lt;p&gt;  Kinda close to PE but I suppose different enough.  This can give constant update on rates of read and write.  Could add that to PE.  Also, can do load+read at same time.  Would have to do that in different threads in PE.  Has more variable load too.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/HBaseClusterTest.java:17 is this the right package M?   util?&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/HBaseClusterTest.java:47 A bit of class doc on what it is might help.&lt;/p&gt;

&lt;p&gt;  Might also just point them at usage it seems since that looks like it might be pretty good.&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/HBaseClusterTest.java:52 No biggie but these data member names with a trailing underscore a bit silly (smile)&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/HBaseClusterTest.java:58 I suppose its fine this is hard-coded for now.&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/HBaseClusterTest.java:92 No biggie: check cols is at least 3 in size so we can return &apos;nicer&apos; message if less than 3&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/HBaseClusterTest.java:103 This hard coding should be explained somewhere?  Maybe in class comment?  The 20/1.  Or in usage.&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/HBaseClusterTest.java:204 Yeah, I think these &apos;features&apos; need to bubble it up to the class comment so folks can see whats in here w/o having to read code.&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/HBaseClusterTest.java:275 Hmm... maybe this is good enough when it prints out for figuring whats in here?&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/RestartMetaTest.java:36 Class comment&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/RestartMetaTest.java:17 ditto on package.  Should this be in under src/test or under src/main?  Maybe package should be tool rather than manual?&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/RestartMetaTest.java:152 There is a lot of overlap w/ previous test here, the HBaseClusterTest tool?&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/DataGenerator.java:24 comment on what this does?&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/DisplayFormatUtils.java:24 This class not needed?  Use &lt;a href=&quot;http://hadoop.apache.org/common/docs/r0.20.1/api/org/apache/hadoop/util/StringUtils.html#humanReadableInt(long&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hadoop.apache.org/common/docs/r0.20.1/api/org/apache/hadoop/util/StringUtils.html#humanReadableInt(long&lt;/a&gt;)&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/HBaseUtils.java:38 Class comment.  HBaseUtils is a pretty generic name; says nothing about content.&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/HBaseUtils.java:53 Remove&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/HBaseUtils.java:54 Why not just let this out?  Should at least say in javadoc that it can return a null?&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/HBaseUtils.java:59 This method does not look like it belongs in a generic hbaseutils class.  It looks like it belongs to the testing tool that makes up the bulk of this patch.   Doesn&apos;t seem like method name describes properly what it does either.  Why not let out exceptions rather than catch and log.&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/HBaseUtils.java:92 HSA is deprecated.&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/HBaseUtils.java:96 Use MetaReader? e.g:&lt;/p&gt;

&lt;p&gt;  public static Pair&amp;lt;HRegionInfo, ServerName&amp;gt; getRegion(&lt;br/&gt;
        CatalogTracker catalogTracker, byte [] regionName)&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/HBaseUtils.java:99 Odd name for this method and it also looks a bit dodgy returning an HBC but it only has zk location set into it.&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/HBaseUtils.java:111 This looks like it belongs in Keying class under util?  Or in HBaseSplitter?&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/HBaseUtils.java:124 ditto&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/HBaseUtils.java:139 This should be in Bytes (is it not already?)&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/HBaseUtils.java:151 ditto&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/HdfsAppender.java:36 Does this belong in an hbase test class?&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/KillProcessesAndVerify.java:33 class comment.&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/KillProcessesAndVerify.java:119 Let these out rather than just print them?&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/KillProcessesAndVerify.java:152 What keys are being passed here?&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/MultiThreadedAction.java:31 Class comment&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/MultiThreadedReader.java:156 Remove&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/ProcessBasedLocalHBaseCluster.java:36 Class comment.  Is this doing what minihbasecluster does?&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/ProcessBasedLocalHBaseCluster.java:256 Not sure this a good idea.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D549&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D549&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13160490" author="phabricator@reviews.facebook.net" created="Thu, 1 Dec 2011 00:09:40 +0000"  >&lt;p&gt;nspiegelberg has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4908&quot; title=&quot;HBase cluster test tool (port from 0.89-fb)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4908&quot;&gt;&lt;del&gt;HBASE-4908&lt;/del&gt;&lt;/a&gt; HBase cluster test tool (port from 0.89-fb)&quot;.&lt;/p&gt;

&lt;p&gt;  @stack : We should have a distinction:&lt;/p&gt;

&lt;p&gt;  PerformanceEvaluation - meant to get an idea of the performance of your system setup.  Able to find performance regressions or understand theoretical performance gains of datapath changes&lt;/p&gt;

&lt;p&gt;  Load Tester - meant to provide deterministic, long-running load on a system.  Allows for large scale verification to catch race conditions resulting from logic error or process failure (in a distributed system setting).&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D549&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D549&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13160495" author="phabricator@reviews.facebook.net" created="Thu, 1 Dec 2011 00:21:39 +0000"  >&lt;p&gt;stack has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4908&quot; title=&quot;HBase cluster test tool (port from 0.89-fb)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4908&quot;&gt;&lt;del&gt;HBASE-4908&lt;/del&gt;&lt;/a&gt; HBase cluster test tool (port from 0.89-fb)&quot;.&lt;/p&gt;

&lt;p&gt;  @Nicolas Sure on the distinction but PE can do threaded or MR&apos;d workloads and has a means of plugging in different loading profiles (subclass Client and then implement run).  I&apos;d think it would be better able to put up a sustained loading when loading is coming out of MR (in spite of its ugly name &amp;#8211; name comes from BT paper).&lt;/p&gt;

&lt;p&gt;  I&apos;m fine w/ this tool going in as is (after some cleanup).  Can work then separately on unifying the two if it makes sense as a different project.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D549&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D549&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13160608" author="phabricator@reviews.facebook.net" created="Thu, 1 Dec 2011 03:01:40 +0000"  >&lt;p&gt;mbautin updated the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4908&quot; title=&quot;HBase cluster test tool (port from 0.89-fb)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4908&quot;&gt;&lt;del&gt;HBASE-4908&lt;/del&gt;&lt;/a&gt; HBase cluster test tool (port from 0.89-fb)&quot;.&lt;br/&gt;
Reviewers: stack, Karthik, Kannan, nspiegelberg, JIRA&lt;/p&gt;

&lt;p&gt;  Partially addressing Stack&apos;s comments (I will address the rest of them in the next version of this diff). The load test seems to work fine on a dev cluster. I also tried out RestartMetaTest. The idea is to start a local HBase cluster with multiple regionservers on different ports, load some data, kill a regionserver, restart it, and do some checks. I like the of a &quot;process-based local HBase cluster&quot; because it opens up a possibility for a whole new range of unit tests (integration tests?) where we are allowed to kill processes for real, but cannot inspect the internals of those processes. This also allows us to test cluster management scripts (the hbase script, hbase-daemon.sh, etc.) from Java itself. Of course, we need to make sure we don&apos;t leave those processes hanging, but that can be addressed in the shutdown hook of the unit test (or @After handler).&lt;/p&gt;

&lt;p&gt;  RestartMetaTest still needs some work to make it robust and usable, and we probably want to make it a unit test.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D549&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D549&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/HFileOutputFormat.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/CompactSplitThread.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/ConstantSizeRegionSplitPolicy.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/HMerge.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/RegionSplitter.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/coprocessor/TestCoprocessorInterface.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/mapreduce/TestHFileOutputFormat.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionSplitPolicy.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestLogRolling.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/ClusterTestUtils.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/DataGenerator.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/HBaseClusterTest.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/HdfsAppender.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/KillProcessesAndVerify.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/MultiThreadedAction.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/MultiThreadedReader.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/MultiThreadedWriter.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/ProcessBasedLocalHBaseCluster.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/RestartMetaTest.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/TestMergeTable.java&lt;/p&gt;</comment>
                            <comment id="13161524" author="phabricator@reviews.facebook.net" created="Fri, 2 Dec 2011 10:09:39 +0000"  >&lt;p&gt;mbautin updated the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4908&quot; title=&quot;HBase cluster test tool (port from 0.89-fb)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4908&quot;&gt;&lt;del&gt;HBASE-4908&lt;/del&gt;&lt;/a&gt; HBase cluster test tool (port from 0.89-fb)&quot;.&lt;br/&gt;
Reviewers: stack, Karthik, Kannan, nspiegelberg, JIRA&lt;/p&gt;

&lt;p&gt;  Debugged and significantly improved RestartMetaTest and its dependency ProcessBasedLocalHBaseCluster to the point of actually being able to run a local multi-process test of an HBase cluster that kills the region server with the .META. region and splits the logs. Discovered that our log splitting does not work correctly with RawLocalFileSystem or checksum-enabled local filesystem, and added a fix to the hack in SequenceFileLogReader to only apply reflection logic to DFSInputStream.&lt;/p&gt;

&lt;p&gt;  Still need to clean up the code, re-run unit tests, and re-test HBaseClusterTest on a live cluster.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D549&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D549&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  pom.xml&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/EmptyWatcher.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/EmptyWatcher.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/HFileOutputFormat.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/CompactSplitThread.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/ConstantSizeRegionSplitPolicy.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/wal/SequenceFileLogReader.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/HMerge.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/RegionSplitter.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/zookeeper/ZKConfig.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/zookeeper/ZKUtil.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/coprocessor/TestCoprocessorInterface.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/mapreduce/TestHFileOutputFormat.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionSplitPolicy.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestLogRolling.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/ClusterTestUtils.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/DataGenerator.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/HBaseClusterTest.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/HdfsAppender.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/KillProcessesAndVerify.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/MultiThreadedAction.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/MultiThreadedReader.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/MultiThreadedWriter.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/ProcessBasedLocalHBaseCluster.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/RestartMetaTest.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/TestMergeTable.java&lt;/p&gt;</comment>
                            <comment id="13162040" author="phabricator@reviews.facebook.net" created="Sat, 3 Dec 2011 03:45:40 +0000"  >&lt;p&gt;mbautin updated the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4908&quot; title=&quot;HBase cluster test tool (port from 0.89-fb)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4908&quot;&gt;&lt;del&gt;HBASE-4908&lt;/del&gt;&lt;/a&gt; HBase cluster test tool (port from 0.89-fb)&quot;.&lt;br/&gt;
Reviewers: stack, Karthik, Kannan, nspiegelberg, JIRA&lt;/p&gt;

&lt;p&gt;  Addressed some more of Stack&apos;s comments. Got rid of the kill test &amp;#8211; it is a large area by itself and is best left out of the scope of this diff. Refactored the common part of RestartMetaTest and HBaseClusterTest into IntegrationTestTool. I think eventually we need to be able to run integration tests both from command line and through the JUnit framework. Also, we can probably unify the mini-cluster framework with the process-based HBase cluster stuff later, and have a subset of integration tests run in both modes.&lt;/p&gt;

&lt;p&gt;  I also added two unit tests: TestMiniClusterLoad&lt;/p&gt;
{Sequential,Parallel}
&lt;p&gt;. The former runs a write workload followed by a separate read workload, and the latter one runs a read workload concurrently with the writes (which is noticeably slower &amp;#8211; maybe that&apos;s something to investigate).&lt;/p&gt;

&lt;p&gt;  A thorough round of testing and cleanup is still necessary before this diff can be finalized.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D549&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D549&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  pom.xml&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/EmptyWatcher.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/EmptyWatcher.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/HFileOutputFormat.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/CompactSplitThread.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/ConstantSizeRegionSplitPolicy.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/wal/SequenceFileLogReader.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/HMerge.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/Keying.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/RegionSplitter.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/zookeeper/ZKConfig.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/zookeeper/ZKUtil.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/coprocessor/TestCoprocessorInterface.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/mapreduce/TestHFileOutputFormat.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionSplitPolicy.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestLogRolling.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/ClusterTestUtils.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/HBaseClusterTest.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/HdfsAppender.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/IntegrationTestTool.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/LoadTestKVGenerator.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/MultiThreadedAction.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/MultiThreadedReader.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/MultiThreadedWriter.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/ProcessBasedLocalHBaseCluster.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/RestartMetaTest.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/TestLoadTestKVGenerator.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/TestMergeTable.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/TestMiniClusterLoadParallel.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/TestMiniClusterLoadSequential.java&lt;/p&gt;</comment>
                            <comment id="13162041" author="phabricator@reviews.facebook.net" created="Sat, 3 Dec 2011 03:49:39 +0000"  >&lt;p&gt;mbautin has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4908&quot; title=&quot;HBase cluster test tool (port from 0.89-fb)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4908&quot;&gt;&lt;del&gt;HBASE-4908&lt;/del&gt;&lt;/a&gt; HBase cluster test tool (port from 0.89-fb)&quot;.&lt;/p&gt;

&lt;p&gt;  Some replies inline. I will remove HdfsAppender test as well &amp;#8211; it seems unrelated to the main purpose of the load tester tool.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/HBaseClusterTest.java:17 Moved to org.apache.hadoop.hbase.util.&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/HBaseClusterTest.java:92 Done.&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/HBaseClusterTest.java:103 Made 20 a constant and removed separate logic for the (endKey - startKey) &amp;lt;= 1000 case.&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/HBaseClusterTest.java:204 Mentioned this in the class comment.&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/RestartMetaTest.java:36 Added.&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/RestartMetaTest.java:152 There is not a lot of overlap of functionality, but perhaps some overlap in structure, e.g. command-line argument processing. I&apos;d like to avoid doing a lot of refactoring until the next iteration. Ideally it should be possible to run every integration test both as a JUnit test and as a command-line tool.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D549&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D549&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13162610" author="phabricator@reviews.facebook.net" created="Mon, 5 Dec 2011 05:19:40 +0000"  >&lt;p&gt;mbautin has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4908&quot; title=&quot;HBase cluster test tool (port from 0.89-fb)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4908&quot;&gt;&lt;del&gt;HBASE-4908&lt;/del&gt;&lt;/a&gt; HBase cluster test tool (port from 0.89-fb)&quot;.&lt;/p&gt;

&lt;p&gt;  @stack: see responses to your comments inline. A new version of the diff will follow.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/HBaseClusterTest.java:47 Added class documentation.&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/HBaseClusterTest.java:52 Removed trailing underscores.&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/HBaseClusterTest.java:275 I added some class comment anyway, and removed kill test and append test from this tool (we can port them over separately).&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/HBaseUtils.java:38 Moved these tool methods to Keying and HBaseTestingUtility and got rid of this class.&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/HBaseUtils.java:53 Got rid of this method entirely and started using the HTable constructor directly.&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/HBaseUtils.java:54 See above (got rid of this method).&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/HBaseUtils.java:59 Moved this to HBaseTestingUtility.&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/HBaseUtils.java:92 Changed to &quot;getMetaRSPort&quot; (because we only need the port number in this use case) and modified to use getRegionLocation.&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/HBaseUtils.java:96 See the above comment.&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/HBaseUtils.java:99 Got rid of this method.&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/HBaseUtils.java:111 Moved to Keying. Not sure where HBaseSplitter is (could not find that type or file).&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/HBaseUtils.java:124 Moved to Keying.&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/HBaseUtils.java:139 Moved to Bytes.&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/HBaseUtils.java:151 Moved to Bytes.&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/HdfsAppender.java:36 Removed HdfsAppender from this diff.&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/KillProcessesAndVerify.java:33 Removed the kill test from this diff.&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/KillProcessesAndVerify.java:119 Removed this entire class from the diff for now.&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/KillProcessesAndVerify.java:152 Removed this entire class (kill test) for now.&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/MultiThreadedAction.java:31 Added.&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/MultiThreadedActionMBean.java:19 Removed this class. Its only purpose was to collect stats from the distributed load test through JMX.&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/ProcessBasedLocalHBaseCluster.java:36 Added a class comment. Unlike MiniHBaseCluster, this starts each daemon as a separate process and allows to do real kill testing.&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/manual/utils/ProcessBasedLocalHBaseCluster.java:256 Refactored this to generate configuration from a map. Does that address your concern, or are you objecting to the whole idea of auto-generating configuration for daemon processes in a process-based local HBase cluster?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D549&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D549&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13162651" author="phabricator@reviews.facebook.net" created="Mon, 5 Dec 2011 07:49:40 +0000"  >&lt;p&gt;mbautin updated the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4908&quot; title=&quot;HBase cluster test tool (port from 0.89-fb)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4908&quot;&gt;&lt;del&gt;HBASE-4908&lt;/del&gt;&lt;/a&gt; HBase cluster test tool (port from 0.89-fb)&quot;.&lt;br/&gt;
Reviewers: stack, Karthik, Kannan, nspiegelberg, JIRA&lt;/p&gt;

&lt;p&gt;  This passes unit tests (I will confirm this again &amp;#8211; please do not commit yet), and is successfully running a load test in a 5-node cluster.&lt;/p&gt;

&lt;p&gt;  The reader verifies keys sequentially in the current version, and if it catches up with the reader it sleeps until more keys are written. This is different from the original version of HBaseTest in 0.89-fb (renamed LoadTest in this version), and I think I will modify the reader to read some previous keys that are known to have been written when the &quot;current key&quot; of the reader catches up with the last key written by the writer.&lt;/p&gt;

&lt;p&gt;  I also made the number of read errors to tolerate configurable (the --max_read_errors option).&lt;/p&gt;

&lt;p&gt;  I think it will take me a couple more iterations on this diff before it can be committed. Sorry for a lot of updates and emails.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D549&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D549&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  pom.xml&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/EmptyWatcher.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/EmptyWatcher.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/HFileOutputFormat.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/CompactSplitThread.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/ConstantSizeRegionSplitPolicy.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/wal/SequenceFileLogReader.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/Bytes.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/HMerge.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/Keying.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/RegionSplitter.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/zookeeper/ZKConfig.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/zookeeper/ZKUtil.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/coprocessor/TestCoprocessorInterface.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/mapreduce/TestHFileOutputFormat.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionSplitPolicy.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestLogRolling.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/IntegrationTestTool.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/LoadTest.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/LoadTestKVGenerator.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/MultiThreadedAction.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/MultiThreadedReader.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/MultiThreadedWriter.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/ProcessBasedLocalHBaseCluster.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/RestartMetaTest.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/TestBytes.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/TestLoadTestKVGenerator.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/TestMergeTable.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/TestMiniClusterLoadParallel.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/TestMiniClusterLoadSequential.java&lt;/p&gt;</comment>
                            <comment id="13163151" author="phabricator@reviews.facebook.net" created="Mon, 5 Dec 2011 23:12:39 +0000"  >&lt;p&gt;mbautin updated the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4908&quot; title=&quot;HBase cluster test tool (port from 0.89-fb)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4908&quot;&gt;&lt;del&gt;HBASE-4908&lt;/del&gt;&lt;/a&gt; HBase cluster test tool (port from 0.89-fb)&quot;.&lt;br/&gt;
Reviewers: stack, Karthik, Kannan, nspiegelberg, JIRA&lt;/p&gt;

&lt;p&gt;  The unit tests run fine (except TestReplication.queueFailover, which is flaky), and cluster testing works well. I rewrote the writer/reader synchronization mechanism after talking to Kannan, so that the reader gets the precise knowledge of what is the last key in the contiguous sequence of keys starting from startKey that the writer has written. This required implementing a producer/consumer pattern with a special InsertedKeyTracker thread sorting inserted keys and advancing the &quot;last contiguous key&quot; marker. Also clarified and improved a bunch of command-line stuff in LoadTest.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D549&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D549&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  pom.xml&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/EmptyWatcher.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/EmptyWatcher.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/HFileOutputFormat.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/CompactSplitThread.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/ConstantSizeRegionSplitPolicy.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/wal/SequenceFileLogReader.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/Bytes.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/HMerge.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/Keying.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/RegionSplitter.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/zookeeper/ZKConfig.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/zookeeper/ZKUtil.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/coprocessor/TestCoprocessorInterface.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/mapreduce/TestHFileOutputFormat.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionSplitPolicy.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestLogRolling.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/IntegrationTestTool.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/LoadTest.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/LoadTestKVGenerator.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/MultiThreadedAction.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/MultiThreadedReader.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/MultiThreadedWriter.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/ProcessBasedLocalHBaseCluster.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/RestartMetaTest.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/TestBytes.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/TestLoadTestKVGenerator.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/TestMergeTable.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/TestMiniClusterLoadParallel.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/TestMiniClusterLoadSequential.java&lt;/p&gt;</comment>
                            <comment id="13163154" author="phabricator@reviews.facebook.net" created="Mon, 5 Dec 2011 23:14:39 +0000"  >&lt;p&gt;mbautin updated the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4908&quot; title=&quot;HBase cluster test tool (port from 0.89-fb)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4908&quot;&gt;&lt;del&gt;HBASE-4908&lt;/del&gt;&lt;/a&gt; HBase cluster test tool (port from 0.89-fb)&quot;.&lt;br/&gt;
Reviewers: stack, Karthik, Kannan, nspiegelberg, JIRA&lt;/p&gt;

&lt;p&gt;  Rebased on changes from trunk.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D549&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D549&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  pom.xml&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/EmptyWatcher.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/EmptyWatcher.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/HFileOutputFormat.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/CompactSplitThread.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/ConstantSizeRegionSplitPolicy.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/wal/SequenceFileLogReader.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/Bytes.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/HMerge.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/Keying.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/RegionSplitter.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/zookeeper/ZKConfig.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/zookeeper/ZKUtil.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/coprocessor/TestCoprocessorInterface.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/mapreduce/TestHFileOutputFormat.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionSplitPolicy.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestLogRolling.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/IntegrationTestTool.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/LoadTest.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/LoadTestKVGenerator.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/MultiThreadedAction.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/MultiThreadedReader.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/MultiThreadedWriter.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/ProcessBasedLocalHBaseCluster.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/RestartMetaTest.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/TestBytes.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/TestLoadTestKVGenerator.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/TestMergeTable.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/TestMiniClusterLoadParallel.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/TestMiniClusterLoadSequential.java&lt;/p&gt;</comment>
                            <comment id="13163179" author="phabricator@reviews.facebook.net" created="Mon, 5 Dec 2011 23:42:40 +0000"  >&lt;p&gt;nspiegelberg has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4908&quot; title=&quot;HBase cluster test tool (port from 0.89-fb)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4908&quot;&gt;&lt;del&gt;HBASE-4908&lt;/del&gt;&lt;/a&gt; HBase cluster test tool (port from 0.89-fb)&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/Bytes.java:1658-1680 this seems util-specific.  this should probably be in some more specialized class rather than Bytes.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/Keying.java:41-43 all the changes in Keying.java are already found in RegionSplitter.java under HexStringSplit.  I would reuse that class&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java:1820-1821 better to use&lt;/p&gt;

&lt;p&gt;      splits = RegionSplitter.HexStringSplit.split(totalNumberOfRegions)&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D549&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D549&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13163185" author="phabricator@reviews.facebook.net" created="Mon, 5 Dec 2011 23:48:41 +0000"  >&lt;p&gt;nspiegelberg has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4908&quot; title=&quot;HBase cluster test tool (port from 0.89-fb)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4908&quot;&gt;&lt;del&gt;HBASE-4908&lt;/del&gt;&lt;/a&gt; HBase cluster test tool (port from 0.89-fb)&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/IntegrationTestTool.java:129 isn&apos;t the standard width 80?  Is there a system setting we can use?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D549&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D549&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13163201" author="hadoopqa" created="Tue, 6 Dec 2011 00:11:52 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12506189/0001-HBase-cluster-test-tool.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12506189/0001-HBase-cluster-test-tool.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 77 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -160 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 72 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.util.TestRegionSplitter&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestMultiParallel&lt;br/&gt;
                  org.apache.hadoop.hbase.thrift2.TestThriftHBaseServiceHandler&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.wal.TestHLogBench&lt;br/&gt;
                  org.apache.hadoop.hbase.rest.TestGzipFilter&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestMetaMigrationRemovingHTD&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.TestAtomicOperation&lt;br/&gt;
                  org.apache.hadoop.hbase.rest.TestScannersWithFilters&lt;br/&gt;
                  org.apache.hadoop.hbase.TestInfoServers&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.TestParallelPut&lt;br/&gt;
                  org.apache.hadoop.hbase.coprocessor.TestClassLoading&lt;br/&gt;
                  org.apache.hadoop.hbase.filter.TestColumnRangeFilter&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestHCM&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.TestStoreFileBlockCacheSummary&lt;br/&gt;
                  org.apache.hadoop.hbase.util.hbck.TestOfflineMetaRebuildHole&lt;br/&gt;
                  org.apache.hadoop.hbase.coprocessor.TestMasterObserver&lt;br/&gt;
                  org.apache.hadoop.hbase.rest.TestStatusResource&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.wal.TestLogRollAbort&lt;br/&gt;
                  org.apache.hadoop.hbase.rest.TestVersionResource&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.TestFSErrorsExposed&lt;br/&gt;
                  org.apache.hadoop.hbase.coprocessor.TestAggregateProtocol&lt;br/&gt;
                  org.apache.hadoop.hbase.rest.TestRowResource&lt;br/&gt;
                  org.apache.hadoop.hbase.rest.TestScannerResource&lt;br/&gt;
                  org.apache.hadoop.hbase.ipc.TestDelayedRpc&lt;br/&gt;
                  org.apache.hadoop.hbase.rest.client.TestRemoteAdmin&lt;br/&gt;
                  org.apache.hadoop.hbase.util.TestFSUtils&lt;br/&gt;
                  org.apache.hadoop.hbase.rest.TestTableResource&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.wal.TestWALReplay&lt;br/&gt;
                  org.apache.hadoop.hbase.util.TestIdLock&lt;br/&gt;
                  org.apache.hadoop.hbase.rest.TestTransform&lt;br/&gt;
                  org.apache.hadoop.hbase.coprocessor.TestCoprocessorEndpoint&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.TestHRegion&lt;br/&gt;
                  org.apache.hadoop.hbase.coprocessor.TestRegionServerCoprocessorExceptionWithAbort&lt;br/&gt;
                  org.apache.hadoop.hbase.catalog.TestMetaReaderEditor&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestMetaScanner&lt;br/&gt;
                  org.apache.hadoop.hbase.io.hfile.TestHFileBlock&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestTimestampsFilter&lt;br/&gt;
                  org.apache.hadoop.hbase.master.TestMaster&lt;br/&gt;
                  org.apache.hadoop.hbase.TestDrainingServer&lt;br/&gt;
                  org.apache.hadoop.hbase.coprocessor.TestRegionObserverBypass&lt;br/&gt;
                  org.apache.hadoop.hbase.rest.TestSchemaResource&lt;br/&gt;
                  org.apache.hadoop.hbase.TestAcidGuarantees&lt;br/&gt;
                  org.apache.hadoop.hbase.master.TestZKBasedOpenCloseRegion&lt;br/&gt;
                  org.apache.hadoop.hbase.util.hbck.TestOfflineMetaRebuildBase&lt;br/&gt;
                  org.apache.hadoop.hbase.avro.TestAvroServer&lt;br/&gt;
                  org.apache.hadoop.hbase.rest.client.TestRemoteTable&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.TestServerCustomProtocol&lt;br/&gt;
                  org.apache.hadoop.hbase.util.TestHBaseFsck&lt;br/&gt;
                  org.apache.hadoop.hbase.coprocessor.TestMasterCoprocessorExceptionWithRemove&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestHTableUtil&lt;br/&gt;
                  org.apache.hadoop.hbase.thrift.TestThriftServer&lt;br/&gt;
                  org.apache.hadoop.hbase.coprocessor.TestRegionObserverInterface&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.TestRegionServerMetrics&lt;br/&gt;
                  org.apache.hadoop.hbase.util.TestMergeTable&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestImportTsv&lt;br/&gt;
                  org.apache.hadoop.hbase.rest.TestMultiRowResource&lt;br/&gt;
                  org.apache.hadoop.hbase.TestMultiVersions&lt;br/&gt;
                  org.apache.hadoop.hbase.util.hbck.TestOfflineMetaRebuildOverlap&lt;br/&gt;
                  org.apache.hadoop.hbase.coprocessor.TestRegionServerCoprocessorExceptionWithRemove&lt;br/&gt;
                  org.apache.hadoop.hbase.coprocessor.TestWALObserver&lt;br/&gt;
                  org.apache.hadoop.hbase.master.TestOpenedRegionHandler&lt;br/&gt;
                  org.apache.hadoop.hbase.coprocessor.TestMasterCoprocessorExceptionWithAbort&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/450//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/450//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/450//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/450//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/450//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/450//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13163401" author="phabricator@reviews.facebook.net" created="Tue, 6 Dec 2011 06:47:39 +0000"  >&lt;p&gt;Karthik has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4908&quot; title=&quot;HBase cluster test tool (port from 0.89-fb)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4908&quot;&gt;&lt;del&gt;HBASE-4908&lt;/del&gt;&lt;/a&gt; HBase cluster test tool (port from 0.89-fb)&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/LoadTest.java:318 One question - when does this integration test exit? Both for the write and read paths?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D549&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D549&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13163946" author="phabricator@reviews.facebook.net" created="Tue, 6 Dec 2011 22:54:39 +0000"  >&lt;p&gt;stack has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4908&quot; title=&quot;HBase cluster test tool (port from 0.89-fb)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4908&quot;&gt;&lt;del&gt;HBASE-4908&lt;/del&gt;&lt;/a&gt; HBase cluster test tool (port from 0.89-fb)&quot;.&lt;/p&gt;

&lt;p&gt;  This is looking great Mikhail.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/EmptyWatcher.java:28 When would I want one of these?&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/HFileOutputFormat.java:176 Is this from another issue Mikhail?  (No matter if it is... we can take care of it on commit).&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/ConstantSizeRegionSplitPolicy.java:37 Thanks for doing this.&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/wal/SequenceFileLogReader.java:111 Thanks for fixing this.&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java:1798 Good&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/IntegrationTestTool.java:39 Will this be run as an IntegrationTest because it has the IntegrationTest prefix; (see the Integration Test section on this page, &lt;a href=&quot;http://hbase.apache.org/book/hbase.tests.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hbase.apache.org/book/hbase.tests.html&lt;/a&gt;, if you don&apos;t have cluse what I&apos;m on about)?&lt;/p&gt;

&lt;p&gt;  I like the idea of this class.  We need it.  Nice how you subclass tool.&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/LoadTest.java:40 Should this class have the IntegrationTest prefix or you think this is just a tool not part of IntegrationTests?&lt;/p&gt;

&lt;p&gt;  Since its sitting beside PerformanceEvaluation tool, should you say something on how it differs from it?&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/RestartMetaTest.java:37 Should this be an IntegrationTest?  (We can do the convertion in another issue).&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D549&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D549&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13164079" author="phabricator@reviews.facebook.net" created="Wed, 7 Dec 2011 02:33:41 +0000"  >&lt;p&gt;mbautin has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4908&quot; title=&quot;HBase cluster test tool (port from 0.89-fb)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4908&quot;&gt;&lt;del&gt;HBASE-4908&lt;/del&gt;&lt;/a&gt; HBase cluster test tool (port from 0.89-fb)&quot;.&lt;/p&gt;

&lt;p&gt;  Thanks for reviews, Nicolas and Stack! See responses below. A new version of the code will follow. Still have to re-run the unit tests (I&apos;ve been having some trouble with those recently &amp;#8211; &lt;a href=&quot;http://pastebin.com/1G1ZcPeV&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://pastebin.com/1G1ZcPeV&lt;/a&gt;) and sanity-check the command-line load tester. On a side note, here are some stats from my recent load test run on a 5-node cluster:&lt;/p&gt;

&lt;p&gt;  11/12/06 18:30:25 INFO util.MultiThreadedAction: &lt;span class=&quot;error&quot;&gt;&amp;#91;W:21&amp;#93;&lt;/span&gt; Keys=17180542, cols=819.4m, time=27:49:20 Overall: &lt;span class=&quot;error&quot;&gt;&amp;#91;keys/s= 171, latency=116 ms&amp;#93;&lt;/span&gt; Current: &lt;span class=&quot;error&quot;&gt;&amp;#91;keys/s=219, latency=90 ms&amp;#93;&lt;/span&gt;, insertedUpTo=17180495, insertedQSize=26&lt;br/&gt;
  11/12/06 18:30:25 INFO util.MultiThreadedAction: &lt;span class=&quot;error&quot;&gt;&amp;#91;R:10&amp;#93;&lt;/span&gt; Keys=250690067, cols=11.8g, time=27:49:20 Overall: &lt;span class=&quot;error&quot;&gt;&amp;#91;keys/s= 2502, latency=3 ms&amp;#93;&lt;/span&gt; Current: &lt;span class=&quot;error&quot;&gt;&amp;#91;keys/s=261, latency=38 ms&amp;#93;&lt;/span&gt;, verified=250690067&lt;/p&gt;

&lt;p&gt;  (The number of writer&apos;s threads is reported as 21 because there is an &quot;inserted keys tracker&quot; thread that keeps track of the most recent contiguous key written by all writers.)&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/IntegrationTestTool.java:129 Changed this to 80. There is no standard way to get terminal width in Java. &lt;a href=&quot;http://stackoverflow.com/questions/1286461/can-i-find-the-console-width-with-java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://stackoverflow.com/questions/1286461/can-i-find-the-console-width-with-java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  src/test/java/org/apache/hadoop/hbase/util/LoadTest.java:40 This is the command-line part of LoadTest, so it should not run as part of the test suite. The same multithreaded writer/verifier code is reused in a couple of &quot;large&quot; unit tests, namely TestMiniClusterLoad&lt;/p&gt;
{Parallel,Sequential}
&lt;p&gt;.&lt;/p&gt;

&lt;p&gt;  I added a line about the differences between this load tester and PerformanceEvaluation.&lt;/p&gt;

&lt;p&gt;  Renamed this to LoadTestTool.&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/LoadTest.java:318 We first wait for all writers to finish and then wait for all readers to finish, so we should exit when all of those threads stop.&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/RestartMetaTest.java:37 Yes, this can be converted to an IntegrationTest. I think making this a unit test was proposed in the past but the controversy was that it spawns a bunch of child processes and extra care should be taken to shut down all of them. We can leave this as a command-line tool for now and convert to a unit test when it is more stable.&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/Bytes.java:1658-1680 Removed these methods and reused the existing RegionSetting.HexStringSplit class.&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/EmptyWatcher.java:28 I moved this to from the test jar to the main jar because of the waitForBaseZNode method that I added to ZKUtil. We need this kind of watcher for quick ZK checks when we don&apos;t want to use a callback. Passing a null instead of a watcher does not work.&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/HFileOutputFormat.java:176 Not sure what changes you are talking about. I made a few conf options that I needed to use constants in HConstants.&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/Keying.java:41-43 Removed this.&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java:1820-1821 Done. Thanks!&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/IntegrationTestTool.java:39 Renamed this to AbstractHBaseTool and moved to the main jar, since this is general-purpose command line processing functionality. This also avoids the confusion with the IntegrationTest notation (thanks for the link!)  I think we will be creating a lot of integration tests very soon.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D549&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D549&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13164084" author="phabricator@reviews.facebook.net" created="Wed, 7 Dec 2011 02:35:40 +0000"  >&lt;p&gt;mbautin updated the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4908&quot; title=&quot;HBase cluster test tool (port from 0.89-fb)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4908&quot;&gt;&lt;del&gt;HBASE-4908&lt;/del&gt;&lt;/a&gt; HBase cluster test tool (port from 0.89-fb)&quot;.&lt;br/&gt;
Reviewers: stack, Karthik, Kannan, nspiegelberg, JIRA&lt;/p&gt;

&lt;p&gt;  Addressing Stack&apos;s and Nicolas&apos;s comments. Still need to re-run the unit tests.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D549&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D549&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  pom.xml&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/EmptyWatcher.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/EmptyWatcher.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/HFileOutputFormat.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/CompactSplitThread.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/ConstantSizeRegionSplitPolicy.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/wal/SequenceFileLogReader.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/AbstractHBaseTool.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/Bytes.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/HMerge.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/Keying.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/RegionSplitter.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/zookeeper/ZKConfig.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/zookeeper/ZKUtil.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/coprocessor/TestCoprocessorInterface.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/mapreduce/TestHFileOutputFormat.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionSplitPolicy.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestLogRolling.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/LoadTestKVGenerator.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/LoadTestTool.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/MultiThreadedAction.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/MultiThreadedReader.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/MultiThreadedWriter.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/ProcessBasedLocalHBaseCluster.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/RestartMetaTest.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/TestBytes.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/TestLoadTestKVGenerator.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/TestMergeTable.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/TestMiniClusterLoadParallel.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/TestMiniClusterLoadSequential.java&lt;/p&gt;</comment>
                            <comment id="13164087" author="hadoopqa" created="Wed, 7 Dec 2011 02:44:24 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12506381/D549.8.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12506381/D549.8.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 52 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/455//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/455//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13164089" author="mikhail" created="Wed, 7 Dec 2011 02:50:14 +0000"  >&lt;p&gt;Uploading a patch for Jenkins testing.&lt;/p&gt;</comment>
                            <comment id="13164120" author="hadoopqa" created="Wed, 7 Dec 2011 03:57:30 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12506382/0002-HBase-cluster-test-tool.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12506382/0002-HBase-cluster-test-tool.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 74 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -160 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 74 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.util.hbck.TestOfflineMetaRebuildHole&lt;br/&gt;
                  org.apache.hadoop.hbase.util.hbck.TestOfflineMetaRebuildOverlap&lt;br/&gt;
                  org.apache.hadoop.hbase.util.hbck.TestOfflineMetaRebuildBase&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/456//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/456//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/456//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/456//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/456//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/456//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13164891" author="phabricator@reviews.facebook.net" created="Thu, 8 Dec 2011 01:02:39 +0000"  >&lt;p&gt;mbautin updated the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4908&quot; title=&quot;HBase cluster test tool (port from 0.89-fb)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4908&quot;&gt;&lt;del&gt;HBASE-4908&lt;/del&gt;&lt;/a&gt; HBase cluster test tool (port from 0.89-fb)&quot;.&lt;br/&gt;
Reviewers: stack, Karthik, Kannan, nspiegelberg, JIRA&lt;/p&gt;

&lt;p&gt;  Fixing how reader and writer are linked together in the mixed workload. Verified that LoadTestTool works in both reader-only, writer-only, and writer/reader modes on a dev cluster. Unit test failures with and without the patch are identical. I think this patch is good to be committed.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D549&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D549&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  pom.xml&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/EmptyWatcher.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/EmptyWatcher.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/mapreduce/HFileOutputFormat.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/CompactSplitThread.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/ConstantSizeRegionSplitPolicy.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/wal/SequenceFileLogReader.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/AbstractHBaseTool.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/Bytes.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/HMerge.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/Keying.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/RegionSplitter.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/zookeeper/ZKConfig.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/zookeeper/ZKUtil.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/coprocessor/TestCoprocessorInterface.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/mapreduce/TestHFileOutputFormat.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionSplitPolicy.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestLogRolling.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/LoadTestKVGenerator.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/LoadTestTool.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/MultiThreadedAction.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/MultiThreadedReader.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/MultiThreadedWriter.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/ProcessBasedLocalHBaseCluster.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/RestartMetaTest.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/TestBytes.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/TestLoadTestKVGenerator.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/TestMergeTable.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/TestMiniClusterLoadParallel.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/TestMiniClusterLoadSequential.java&lt;/p&gt;</comment>
                            <comment id="13164893" author="mikhail" created="Thu, 8 Dec 2011 01:04:47 +0000"  >&lt;p&gt;Attaching the most recent patch.&lt;/p&gt;</comment>
                            <comment id="13164894" author="mikhail" created="Thu, 8 Dec 2011 01:06:00 +0000"  >&lt;p&gt;One more round of Jenkins testing for the patch.&lt;/p&gt;</comment>
                            <comment id="13164922" author="hadoopqa" created="Thu, 8 Dec 2011 01:53:09 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12506552/0003-HBase-cluster-test-tool.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12506552/0003-HBase-cluster-test-tool.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 74 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -160 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 74 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/471//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/471//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/471//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/471//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/471//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/471//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13164926" author="phabricator@reviews.facebook.net" created="Thu, 8 Dec 2011 01:58:39 +0000"  >&lt;p&gt;mbautin has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4908&quot; title=&quot;HBase cluster test tool (port from 0.89-fb)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4908&quot;&gt;&lt;del&gt;HBASE-4908&lt;/del&gt;&lt;/a&gt; HBase cluster test tool (port from 0.89-fb)&quot;.&lt;/p&gt;

&lt;p&gt;  Some more unit tests results: 1189 test methods, 252 test classes succeeded. TestLogRolling failed when running on the cluster using mrunit, but succeeded locally.&lt;/p&gt;

&lt;p&gt;    mvn -Dtest=TestLogRolling#testLogRollOnDatanodeDeath -P localTests test&lt;/p&gt;

&lt;p&gt;  This patch should be OK to commit.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D549&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D549&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13164938" author="phabricator@reviews.facebook.net" created="Thu, 8 Dec 2011 02:16:39 +0000"  >&lt;p&gt;nspiegelberg has accepted the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4908&quot; title=&quot;HBase cluster test tool (port from 0.89-fb)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4908&quot;&gt;&lt;del&gt;HBASE-4908&lt;/del&gt;&lt;/a&gt; HBase cluster test tool (port from 0.89-fb)&quot;.&lt;/p&gt;

&lt;p&gt;  lgtm&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D549&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D549&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13164950" author="phabricator@reviews.facebook.net" created="Thu, 8 Dec 2011 02:45:39 +0000"  >&lt;p&gt;mbautin has committed the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4908&quot; title=&quot;HBase cluster test tool (port from 0.89-fb)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4908&quot;&gt;&lt;del&gt;HBASE-4908&lt;/del&gt;&lt;/a&gt; HBase cluster test tool (port from 0.89-fb)&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D549&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D549&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMIT&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHBASE1211746&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHBASE1211746&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13165041" author="hudson" created="Thu, 8 Dec 2011 06:47:18 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-security #25 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-security/25/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-security/25/&lt;/a&gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4908&quot; title=&quot;HBase cluster test tool (port from 0.89-fb)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4908&quot;&gt;&lt;del&gt;HBASE-4908&lt;/del&gt;&lt;/a&gt; HBase cluster test tool (port from 0.89-fb)&lt;/p&gt;

&lt;p&gt;Summary:&lt;br/&gt;
Porting one of our HBase cluster test tools (a single-process multi-threaded&lt;br/&gt;
load generator and verifier) from 0.89-fb to trunk.&lt;br/&gt;
I cleaned up the code a bit compared to what&apos;s in 0.89-fb, and discovered that&lt;br/&gt;
it has some features that I have not tried yet (some kind of a kill test, and&lt;br/&gt;
some way to run HBase as multiple processes on one machine).&lt;br/&gt;
The main utility of this piece of code for us has been the HBaseClusterTest&lt;br/&gt;
command-line tool (called HBaseTest in 0.89-fb), which we usually invoke as a&lt;br/&gt;
load test in our five-node dev cluster testing, e.g.:&lt;/p&gt;

&lt;p&gt;hbase org.apache.hadoop.hbase.util.LoadTestTool -write 50:100:20 -tn loadtest4&lt;br/&gt;
-read 100:10 -zk &amp;lt;zk_quorum_node&amp;gt; -bloom ROWCOL -compression LZO -key_window 5&lt;br/&gt;
-max_read_errors 10000 -num_keys 10000000000 -start_key 0&lt;/p&gt;

&lt;p&gt;Test Plan:&lt;br/&gt;
Run this on a dev cluster. Run all unit tests.&lt;/p&gt;

&lt;p&gt;Reviewers: stack, Karthik, Kannan, nspiegelberg, JIRA&lt;/p&gt;

&lt;p&gt;Reviewed By: nspiegelberg&lt;/p&gt;

&lt;p&gt;CC: stack, nspiegelberg, mbautin, Karthik&lt;/p&gt;

&lt;p&gt;Differential Revision: 549&lt;/p&gt;

&lt;p&gt;nspiegelberg : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/pom.xml&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/EmptyWatcher.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/mapreduce/HFileOutputFormat.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/CompactSplitThread.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/ConstantSizeRegionSplitPolicy.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/wal/SequenceFileLogReader.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/AbstractHBaseTool.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/Bytes.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/HMerge.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/Keying.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/RegionSplitter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/zookeeper/ZKConfig.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/zookeeper/ZKUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/EmptyWatcher.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/coprocessor/TestCoprocessorInterface.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/mapreduce/TestHFileOutputFormat.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionSplitPolicy.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestLogRolling.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/LoadTestKVGenerator.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/LoadTestTool.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/MultiThreadedAction.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/MultiThreadedReader.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/MultiThreadedWriter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/ProcessBasedLocalHBaseCluster.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/RestartMetaTest.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/TestBytes.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/TestLoadTestKVGenerator.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/TestMergeTable.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/TestMiniClusterLoadParallel.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/TestMiniClusterLoadSequential.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13165091" author="hudson" created="Thu, 8 Dec 2011 08:44:05 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2526 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2526/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2526/&lt;/a&gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4908&quot; title=&quot;HBase cluster test tool (port from 0.89-fb)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4908&quot;&gt;&lt;del&gt;HBASE-4908&lt;/del&gt;&lt;/a&gt; HBase cluster test tool (port from 0.89-fb)&lt;/p&gt;

&lt;p&gt;Summary:&lt;br/&gt;
Porting one of our HBase cluster test tools (a single-process multi-threaded&lt;br/&gt;
load generator and verifier) from 0.89-fb to trunk.&lt;br/&gt;
I cleaned up the code a bit compared to what&apos;s in 0.89-fb, and discovered that&lt;br/&gt;
it has some features that I have not tried yet (some kind of a kill test, and&lt;br/&gt;
some way to run HBase as multiple processes on one machine).&lt;br/&gt;
The main utility of this piece of code for us has been the HBaseClusterTest&lt;br/&gt;
command-line tool (called HBaseTest in 0.89-fb), which we usually invoke as a&lt;br/&gt;
load test in our five-node dev cluster testing, e.g.:&lt;/p&gt;

&lt;p&gt;hbase org.apache.hadoop.hbase.util.LoadTestTool -write 50:100:20 -tn loadtest4&lt;br/&gt;
-read 100:10 -zk &amp;lt;zk_quorum_node&amp;gt; -bloom ROWCOL -compression LZO -key_window 5&lt;br/&gt;
-max_read_errors 10000 -num_keys 10000000000 -start_key 0&lt;/p&gt;

&lt;p&gt;Test Plan:&lt;br/&gt;
Run this on a dev cluster. Run all unit tests.&lt;/p&gt;

&lt;p&gt;Reviewers: stack, Karthik, Kannan, nspiegelberg, JIRA&lt;/p&gt;

&lt;p&gt;Reviewed By: nspiegelberg&lt;/p&gt;

&lt;p&gt;CC: stack, nspiegelberg, mbautin, Karthik&lt;/p&gt;

&lt;p&gt;Differential Revision: 549&lt;/p&gt;

&lt;p&gt;nspiegelberg : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/pom.xml&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/EmptyWatcher.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/mapreduce/HFileOutputFormat.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/CompactSplitThread.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/ConstantSizeRegionSplitPolicy.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/wal/SequenceFileLogReader.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/AbstractHBaseTool.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/Bytes.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/HMerge.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/Keying.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/RegionSplitter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/zookeeper/ZKConfig.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/zookeeper/ZKUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/EmptyWatcher.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/coprocessor/TestCoprocessorInterface.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/mapreduce/TestHFileOutputFormat.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionSplitPolicy.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestLogRolling.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/LoadTestKVGenerator.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/LoadTestTool.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/MultiThreadedAction.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/MultiThreadedReader.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/MultiThreadedWriter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/ProcessBasedLocalHBaseCluster.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/RestartMetaTest.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/TestBytes.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/TestLoadTestKVGenerator.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/TestMergeTable.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/TestMiniClusterLoadParallel.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/TestMiniClusterLoadSequential.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13171336" author="stack" created="Sat, 17 Dec 2011 00:10:22 +0000"  >&lt;p&gt;Backed out SequenceFileLogReader.java change &amp;#8211; will address in a way that doesn&apos;t break us going against 0.22 and 0.23 in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4935&quot; title=&quot;hbase 0.92.0 doesn&amp;#39;t work going against 0.20.205.0, its packaged hadoop&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4935&quot;&gt;&lt;del&gt;HBASE-4935&lt;/del&gt;&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="13171453" author="hudson" created="Sat, 17 Dec 2011 04:48:13 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2553 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2553/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2553/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4935&quot; title=&quot;hbase 0.92.0 doesn&amp;#39;t work going against 0.20.205.0, its packaged hadoop&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4935&quot;&gt;&lt;del&gt;HBASE-4935&lt;/del&gt;&lt;/a&gt; hbase 0.92.0 doesn&apos;t work going against 0.20.205.0, its packaged hadoop &amp;#8211; revert from TRUNK though this change was added as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4908&quot; title=&quot;HBase cluster test tool (port from 0.89-fb)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4908&quot;&gt;&lt;del&gt;HBASE-4908&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/wal/SequenceFileLogReader.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13171486" author="hudson" created="Sat, 17 Dec 2011 07:25:05 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-security #35 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-security/35/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-security/35/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4935&quot; title=&quot;hbase 0.92.0 doesn&amp;#39;t work going against 0.20.205.0, its packaged hadoop&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4935&quot;&gt;&lt;del&gt;HBASE-4935&lt;/del&gt;&lt;/a&gt; hbase 0.92.0 doesn&apos;t work going against 0.20.205.0, its packaged hadoop &amp;#8211; revert from TRUNK though this change was added as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4908&quot; title=&quot;HBase cluster test tool (port from 0.89-fb)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4908&quot;&gt;&lt;del&gt;HBASE-4908&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/wal/SequenceFileLogReader.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13180717" author="zhihyu@ebaysf.com" created="Thu, 5 Jan 2012 19:08:19 +0000"  >&lt;p&gt;We have OPT_ZK_QUORUM.&lt;br/&gt;
I think adding a config parameter for zookeeper client port would make using this tool more easily.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                                                <inwardlinks description="is required by">
                                        <issuelink>
            <issuekey id="12532006">HBASE-4821</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12506189" name="0001-HBase-cluster-test-tool.patch" size="168423" author="mikhail" created="Mon, 5 Dec 2011 23:19:16 +0000"/>
                            <attachment id="12506382" name="0002-HBase-cluster-test-tool.patch" size="165039" author="mikhail" created="Wed, 7 Dec 2011 02:50:14 +0000"/>
                            <attachment id="12506552" name="0003-HBase-cluster-test-tool.patch" size="160952" author="mikhail" created="Thu, 8 Dec 2011 01:04:47 +0000"/>
                            <attachment id="12505677" name="ASF.LICENSE.NOT.GRANTED--D549.1.patch" size="78174" author="phabricator@reviews.facebook.net" created="Wed, 30 Nov 2011 22:55:41 +0000"/>
                            <attachment id="12505709" name="ASF.LICENSE.NOT.GRANTED--D549.2.patch" size="78944" author="phabricator@reviews.facebook.net" created="Thu, 1 Dec 2011 03:01:41 +0000"/>
                            <attachment id="12505867" name="ASF.LICENSE.NOT.GRANTED--D549.3.patch" size="95155" author="phabricator@reviews.facebook.net" created="Fri, 2 Dec 2011 10:09:40 +0000"/>
                            <attachment id="12505967" name="ASF.LICENSE.NOT.GRANTED--D549.4.patch" size="99284" author="phabricator@reviews.facebook.net" created="Sat, 3 Dec 2011 03:45:41 +0000"/>
                            <attachment id="12506094" name="ASF.LICENSE.NOT.GRANTED--D549.5.patch" size="99003" author="phabricator@reviews.facebook.net" created="Mon, 5 Dec 2011 07:49:41 +0000"/>
                            <attachment id="12506186" name="ASF.LICENSE.NOT.GRANTED--D549.6.patch" size="107834" author="phabricator@reviews.facebook.net" created="Mon, 5 Dec 2011 23:12:40 +0000"/>
                            <attachment id="12506187" name="ASF.LICENSE.NOT.GRANTED--D549.7.patch" size="107834" author="phabricator@reviews.facebook.net" created="Mon, 5 Dec 2011 23:14:40 +0000"/>
                            <attachment id="12506381" name="ASF.LICENSE.NOT.GRANTED--D549.8.patch" size="153132" author="phabricator@reviews.facebook.net" created="Wed, 7 Dec 2011 02:35:40 +0000"/>
                            <attachment id="12506551" name="ASF.LICENSE.NOT.GRANTED--D549.9.patch" size="149670" author="phabricator@reviews.facebook.net" created="Thu, 8 Dec 2011 01:02:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 30 Nov 2011 22:55:39 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>219088</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 50 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08qx3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48961</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>