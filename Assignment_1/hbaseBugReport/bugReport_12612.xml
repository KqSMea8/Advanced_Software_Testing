<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:34:42 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-12612/HBASE-12612.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-12612] WALFactory use in upgrade path must clean up properly</title>
                <link>https://issues.apache.org/jira/browse/HBASE-12612</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The namespace upgrade code from pre-0.96 requires a clean shutdown prior to run. Right now the NamespaceUpgrade code does the following&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;instantiate wal factory&lt;/li&gt;
	&lt;li&gt;ask for a meta-wal&lt;/li&gt;
	&lt;li&gt;online meta and make changes&lt;/li&gt;
	&lt;li&gt;clean up meta-wal&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;That last bit is done instead of closing the factory itself. Since the factory initializes a non-meta-wal as a part of its constructor, not closing it leaves behind an empty wal. The rest of hte upgrade process sees that empty wal as an indicator that there&apos;s been a failure and goes into recovery.&lt;/p&gt;

&lt;p&gt;The recovery process skips the loading of the hbase:acl table, which then causes the upgrade after master initialization to fail.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12758945">HBASE-12612</key>
            <summary>WALFactory use in upgrade path must clean up properly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="busbey">Sean Busbey</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Dec 2014 17:09:15 +0000</created>
                <updated>Fri, 5 Dec 2014 02:34:40 +0000</updated>
                            <resolved>Wed, 3 Dec 2014 19:14:16 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>wal</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="14231754" author="busbey" created="Tue, 2 Dec 2014 17:09:56 +0000"  >&lt;p&gt;The test that caught htis in branch-1, TestNamespaceUpgrade, is no longer present in master. Adding back in some version of that test to catch this problem going forward would be nice.&lt;/p&gt;</comment>
                            <comment id="14233079" author="busbey" created="Wed, 3 Dec 2014 15:04:15 +0000"  >&lt;p&gt;replacing this with a ticket to clean out the problematic NamespaceUpgrade code, presuming the conversation on dev@ around upgrades doesn&apos;t raise any objections.&lt;/p&gt;</comment>
                            <comment id="14233372" author="busbey" created="Wed, 3 Dec 2014 19:14:16 +0000"  >&lt;p&gt;obviated by removal of NamespaceUpgrade in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12623&quot; title=&quot;Remove pre-0.96 to 0.96 upgrade code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12623&quot;&gt;&lt;del&gt;HBASE-12623&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14233810" author="enis" created="Thu, 4 Dec 2014 02:01:20 +0000"  >&lt;p&gt;The NSUpgrade is still applicable in 1.0. Is this issue not present there? &lt;/p&gt;</comment>
                            <comment id="14233886" author="busbey" created="Thu, 4 Dec 2014 03:55:49 +0000"  >&lt;p&gt;Nope, it was fixed as a part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12522&quot; title=&quot;Backport WAL refactoring to branch-1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12522&quot;&gt;&lt;del&gt;HBASE-12522&lt;/del&gt;&lt;/a&gt;. I believe the description of what got included calls out that the fix for this problem is present.&lt;/p&gt;</comment>
                            <comment id="14234961" author="enis" created="Fri, 5 Dec 2014 02:34:40 +0000"  >&lt;p&gt;Ok, Thanks Sean. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                                                <inwardlinks description="is superceded by">
                                        <issuelink>
            <issuekey id="12759192">HBASE-12623</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12756200">HBASE-12522</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 4 Dec 2014 02:01:20 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 2 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i22z1j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>