<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:54:55 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-14629/HBASE-14629.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-14629] Create replication zk node in postLogRoll instead of preLogRoll</title>
                <link>https://issues.apache.org/jira/browse/HBASE-14629</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Currently the hlog zk node is added before creating the log file, so it&apos;s possible to raise FileNotFoundException if the server crash between these tow operations. Move this step after file creating can avoid this exception (then FNFE will be certainly treated as an error). If there is an crash after log creation before creating the zk node, the log will be replayed and there should be no data loss either.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12905516">HBASE-14629</key>
            <summary>Create replication zk node in postLogRoll instead of preLogRoll</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="heliangliang">He Liangliang</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Oct 2015 13:02:39 +0000</created>
                <updated>Fri, 3 Jun 2016 19:42:35 +0000</updated>
                                                                            <component>Replication</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="14960887" author="ashish singhi" created="Fri, 16 Oct 2015 15:31:08 +0000"  >&lt;p&gt;The first thought that stuck to me while looking into the code was that why we add log in ZK during preLogRoll and and in queue during postLogRoll. But ignored at that time thinking there might be some reason which I may not be able to find out at that moment.&lt;/p&gt;</comment>
                            <comment id="14963048" author="heliangliang" created="Mon, 19 Oct 2015 09:29:24 +0000"  >&lt;p&gt;Just can&apos;t figure out the reason. From our case, ignoring FNFE is dangerous and it&apos;s disabled in production cluster. So avoiding FNFE is a helpful improvement.&lt;/p&gt;

&lt;p&gt;+ &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdcryans&quot; class=&quot;user-hover&quot; rel=&quot;jdcryans&quot;&gt;Jean-Daniel Cryans&lt;/a&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; any hints?&lt;/p&gt;</comment>
                            <comment id="15314672" author="vincentpoon" created="Fri, 3 Jun 2016 19:42:35 +0000"  >&lt;p&gt;&amp;gt; If there is an crash after log creation before creating the zk node, the log will be replayed and there should be no data loss either.&lt;/p&gt;

&lt;p&gt;Does the replay include a log roll on the old log?  Because otherwise if the ZK queue is updated in the postLogRoll, if you roll the log, write some data, and crash before postLogRoll, your log is never queued up and some data is never replicated?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 16 Oct 2015 15:31:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            28 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2n47b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>