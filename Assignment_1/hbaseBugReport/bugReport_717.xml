<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:46:51 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-717/HBASE-717.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-717] alter table broke with new shell returns InvalidColumnNameException</title>
                <link>https://issues.apache.org/jira/browse/HBASE-717</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;create table disable table alter table output below:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;hbase(main):041:0&amp;gt; create &apos;t1&apos;, {NAME =&amp;gt; &apos;f1&apos;, VERSIONS =&amp;gt; 5}
08/06/30 01:26:43 DEBUG client.HConnectionManager$TableServers: reloading table servers because: No server address listed in .META. &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; region t1,,1214807203247
08/06/30 01:26:43 DEBUG client.HConnectionManager$TableServers: Removed .META.,,1 from cache because of t1,,99999999999999
08/06/30 01:26:43 DEBUG client.HConnectionManager$TableServers: Found ROOT REGION =&amp;gt; {NAME =&amp;gt; &apos;-ROOT-,,0&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;, ENCODED =&amp;gt; 70236052, TABLE =&amp;gt; {NAME =&amp;gt; &apos;-ROOT-&apos;, FAMILIES =&amp;gt; [{NAME =&amp;gt; &apos;info&apos;, VERSIONS =&amp;gt; 1, COMPRESSION =&amp;gt; &apos;NONE&apos;, IN_MEMORY =&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, BLOCKCACHE =&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, LENGTH =&amp;gt; 2147483647, TTL =&amp;gt; FOREVER, BLOOMFILTER =&amp;gt; NONE}]}
0 row(s) in 10.4300 seconds

hbase(main):042:0&amp;gt; disable &apos;t1&apos;
08/06/30 01:27:08 DEBUG client.HBaseAdmin: Sleep. Waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; first region to be disabled from t1
08/06/30 01:27:18 DEBUG client.HBaseAdmin: Wake. Waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; first region to be disabled from [B@1bc93a7
08/06/30 01:27:18 INFO client.HBaseAdmin: Disabled t1
0 row(s) in 10.0810 seconds

hbase(main):043:0&amp;gt; alter &apos;t1&apos;, {NAME =&amp;gt; &apos;f1&apos;, VERSIONS =&amp;gt; 1}
NativeException: org.apache.hadoop.hbase.InvalidColumnNameException: org.apache.hadoop.hbase.InvalidColumnNameException: Column family &apos;f1&apos; doesn&apos;t exist, so cannot be modified.
        at org.apache.hadoop.hbase.master.ModifyColumn.postProcessMeta(ModifyColumn.java:51)
        at org.apache.hadoop.hbase.master.TableOperation$ProcessTableOperation.call(TableOperation.java:130)
        at org.apache.hadoop.hbase.master.TableOperation$ProcessTableOperation.call(TableOperation.java:67)
        at org.apache.hadoop.hbase.master.RetryableMetaOperation.doWithRetries(RetryableMetaOperation.java:62)
        at org.apache.hadoop.hbase.master.TableOperation.process(TableOperation.java:141)
        at org.apache.hadoop.hbase.master.HMaster.modifyColumn(HMaster.java:655)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.hadoop.hbase.ipc.HbaseRPC$Server.call(HbaseRPC.java:424)
        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:896)

        from sun/reflect/NativeConstructorAccessorImpl.java:-2:in `newInstance0&apos;
        from sun/reflect/NativeConstructorAccessorImpl.java:39:in `newInstance&apos;
        from sun/reflect/DelegatingConstructorAccessorImpl.java:27:in `newInstance&apos;
        from java/lang/reflect/Constructor.java:513:in `newInstance&apos;
        from org/apache/hadoop/hbase/RemoteExceptionHandler.java:82:in `decodeRemoteException&apos;
        from org/apache/hadoop/hbase/client/HBaseAdmin.java:658:in `modifyColumn&apos;
        from org/apache/hadoop/hbase/client/HBaseAdmin.java:636:in `modifyColumn&apos;
        from sun/reflect/NativeMethodAccessorImpl.java:-2:in `invoke0&apos;
        from sun/reflect/NativeMethodAccessorImpl.java:39:in `invoke&apos;
        from sun/reflect/DelegatingMethodAccessorImpl.java:25:in `invoke&apos;
        from java/lang/reflect/Method.java:597:in `invoke&apos;
        from org/jruby/javasupport/JavaMethod.java:250:in `invokeWithExceptionHandling&apos;
        from org/jruby/javasupport/JavaMethod.java:219:in `invoke&apos;
        from org/jruby/javasupport/JavaClass.java:416:in `execute&apos;
        from org/jruby/internal/runtime/methods/SimpleCallbackMethod.java:67:in `call&apos;
        from org/jruby/internal/runtime/methods/DynamicMethod.java:94:in `call&apos;
... 118 levels...
        from ruby.hbase_minus_671438.bin.hirbInvokermethod__23$RUBY$startOpt:-1:in `call&apos;
        from org/jruby/internal/runtime/methods/DynamicMethod.java:74:in `call&apos;
        from org/jruby/internal/runtime/methods/CompiledMethod.java:48:in `call&apos;
        from org/jruby/runtime/CallSite.java:123:in `cacheAndCall&apos;
        from org/jruby/runtime/CallSite.java:298:in `call&apos;
        from ruby/hbase_minus_671438/bin&lt;span class=&quot;code-comment&quot;&gt;//hbase/bin/hirb.rb:348:in `__file__&apos;
&lt;/span&gt;        from ruby/hbase_minus_671438/bin&lt;span class=&quot;code-comment&quot;&gt;//hbase/bin/hirb.rb:-1:in `__file__&apos;
&lt;/span&gt;        from ruby/hbase_minus_671438/bin&lt;span class=&quot;code-comment&quot;&gt;//hbase/bin/hirb.rb:-1:in `load&apos;
&lt;/span&gt;        from org/jruby/Ruby.java:512:in `runScript&apos;
        from org/jruby/Ruby.java:432:in `runNormally&apos;
        from org/jruby/Ruby.java:312:in `runFromMain&apos;
        from org/jruby/Main.java:144:in `run&apos;
        from org/jruby/Main.java:89:in `run&apos;
        from org/jruby/Main.java:80:in `main&apos;
        from /hbase/bin/hirb.rb:229:in `alter&apos;
        from (hbase):44:in `binding&apos;hbase(main):044:0&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;hbase trunk rev:671438&lt;/p&gt;</environment>
        <key id="12399257">HBASE-717</key>
            <summary>alter table broke with new shell returns InvalidColumnNameException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stack">stack</assignee>
                                    <reporter username="viper799">Billy Pearson</reporter>
                        <labels>
                    </labels>
                <created>Mon, 30 Jun 2008 06:32:52 +0000</created>
                <updated>Fri, 22 Aug 2008 21:13:19 +0000</updated>
                            <resolved>Tue, 1 Jul 2008 05:13:03 +0000</resolved>
                                    <version>0.2.0</version>
                                    <fixVersion>0.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12609166" author="viper799" created="Mon, 30 Jun 2008 06:37:39 +0000"  >&lt;p&gt;I also get the same output if I add the &quot;:&quot; on the column name&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
alter &apos;t1&apos;, {NAME =&amp;gt; &apos;f1:&apos;, VERSIONS =&amp;gt; 1}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12609458" author="stack" created="Tue, 1 Jul 2008 05:13:03 +0000"  >&lt;p&gt;Thanks for reporting the bug Billy (and thanks for exercising the shell).&lt;/p&gt;

&lt;p&gt;Was a small bug in the alter column code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
durruti:~/Documents/checkouts/trunk stack$ svn diff
Index: src/java/org/apache/hadoop/hbase/master/ModifyColumn.java
===================================================================
--- src/java/org/apache/hadoop/hbase/master/ModifyColumn.java   (revision 672999)
+++ src/java/org/apache/hadoop/hbase/master/ModifyColumn.java   (working copy)
@@ -44,7 +44,7 @@
   &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void postProcessMeta(MetaRegion m, HRegionInterface server)
   &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
     &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (HRegionInfo i: unservedRegions) {
-      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!i.getTableDesc().hasFamily(columnName)) {
+      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (i.getTableDesc().hasFamily(columnName)) {
         i.getTableDesc().addFamily(descriptor);
         updateRegionInfo(server, m.getRegionName(), i);
       } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; { &lt;span class=&quot;code-comment&quot;&gt;// otherwise, we have an error.&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now it seems to work, with or without the colon:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
durruti:~/Documents/checkouts/trunk stack$ ./bin/hbase shell
HBase Shell; enter &apos;help&amp;lt;RETURN&amp;gt;&apos; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; list of supported commands.
Version: 0.2.0-dev, r672988, Mon Jun 30 22:06:16 PDT 2008
hbase(main):001:0&amp;gt; create &apos;t1&apos;, &apos;f1&apos;
0 row(s) in 10.1930 seconds
hbase(main):002:0&amp;gt; disable &apos;t1&apos;
08/06/30 22:09:20 INFO client.HBaseAdmin: Disabled t1
0 row(s) in 10.0340 seconds
hbase(main):003:0&amp;gt; describe &apos;t1&apos; 
NAME =&amp;gt; &apos;t1&apos;, FAMILIES =&amp;gt; [{NAME =&amp;gt; &apos;f1&apos;, VERSIONS =&amp;gt; 3, COMPRESSION =&amp;gt; &apos;NONE&apos;, IN_MEMORY =&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, BLOCKCACHE
 =&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, LENGTH =&amp;gt; 2147483647, TTL =&amp;gt; FOREVER, BLOOMFILTER =&amp;gt; NONE}]                                        
1 row(s) in 0.0110 seconds
hbase(main):004:0&amp;gt; alter &apos;t1&apos;, {NAME =&amp;gt; &apos;f1&apos;, VERSIONS =&amp;gt; 1}
0 row(s) in 0.0130 seconds
hbase(main):005:0&amp;gt; describe &apos;t1&apos;                            
NAME =&amp;gt; &apos;t1&apos;, FAMILIES =&amp;gt; [{NAME =&amp;gt; &apos;f1&apos;, VERSIONS =&amp;gt; 1, COMPRESSION =&amp;gt; &apos;NONE&apos;, IN_MEMORY =&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, BLOCKCACHE
 =&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, LENGTH =&amp;gt; 2147483647, TTL =&amp;gt; FOREVER, BLOOMFILTER =&amp;gt; NONE}]                                        
1 row(s) in 0.0050 seconds
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Resolving&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 1 Jul 2008 05:13:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25358</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 25 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h90n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98723</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>