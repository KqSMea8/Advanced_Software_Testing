<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:26:18 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5274/HBASE-5274.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5274] Filter out the expired store file scanner during the compaction</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5274</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;During the compaction time, HBase will generate a store scanner which will scan a list of store files. And it would be more efficient to filer out the expired store file since there is no need to read any key values from these store files.&lt;/p&gt;

&lt;p&gt;This optimization has been already implemented on 89-fb and this is the building block for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5199&quot; title=&quot;Delete out of TTL store files before compaction selection&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5199&quot;&gt;&lt;del&gt;HBASE-5199&lt;/del&gt;&lt;/a&gt; as well. It is supposed to be no-ops to compact the expired store files.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12539693">HBASE-5274</key>
            <summary>Filter out the expired store file scanner during the compaction</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mikhail">Mikhail Bautin</assignee>
                                    <reporter username="liyin">Liyin Tang</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Jan 2012 23:16:40 +0000</created>
                <updated>Tue, 31 Jan 2012 05:34:26 +0000</updated>
                            <resolved>Fri, 27 Jan 2012 02:12:39 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13192688" author="tlipcon" created="Wed, 25 Jan 2012 00:22:05 +0000"  >&lt;p&gt;Hey Liyin. Can you take a look at the use case in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4717&quot; title=&quot;More efficient age-off of old data during major compaction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4717&quot;&gt;&lt;del&gt;HBASE-4717&lt;/del&gt;&lt;/a&gt;? It looks related - maybe it or one of these can be closed as dup.&lt;/p&gt;</comment>
                            <comment id="13192715" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 00:38:39 +0000"  >&lt;p&gt;Liyin requested code review of &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5274&quot; title=&quot;Filter out the expired store file scanner during the compaction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5274&quot;&gt;&lt;del&gt;HBASE-5274&lt;/del&gt;&lt;/a&gt; Filter out the expired store file scanner during the compaction&quot;.&lt;br/&gt;
Reviewers: Kannan, Karthik, khemani, mbautin&lt;/p&gt;

&lt;p&gt;  During the compaction time, HBase will generate a store scanner which will scan a list of store files. And it would be more efficient to filer out the expired store file since there is no need to read any key values from these store files.&lt;/p&gt;

&lt;p&gt;  This optimization has been already implemented on 89-fb and this is the building block for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5199&quot; title=&quot;Delete out of TTL store files before compaction selection&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5199&quot;&gt;&lt;del&gt;HBASE-5199&lt;/del&gt;&lt;/a&gt; as well. It is supposed to be no-ops to compact the expired store files.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  running all the unit tests&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1407&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1407&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/2931/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/2931/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13192716" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 00:38:40 +0000"  >&lt;p&gt;Liyin requested code review of &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5274&quot; title=&quot;Filter out the expired store file scanner during the compaction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5274&quot;&gt;&lt;del&gt;HBASE-5274&lt;/del&gt;&lt;/a&gt; Filter out the expired store file scanner during the compaction&quot;.&lt;br/&gt;
Reviewers: Kannan, Karthik, khemani, mbautin&lt;/p&gt;

&lt;p&gt;  During the compaction time, HBase will generate a store scanner which will scan a list of store files. And it would be more efficient to filer out the expired store file since there is no need to read any key values from these store files.&lt;/p&gt;

&lt;p&gt;  This optimization has been already implemented on 89-fb and this is the building block for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5199&quot; title=&quot;Delete out of TTL store files before compaction selection&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5199&quot;&gt;&lt;del&gt;HBASE-5199&lt;/del&gt;&lt;/a&gt; as well. It is supposed to be no-ops to compact the expired store files.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  running all the unit tests&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1407&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1407&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/2931/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/2931/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13192717" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 00:38:42 +0000"  >&lt;p&gt;Liyin requested code review of &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5274&quot; title=&quot;Filter out the expired store file scanner during the compaction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5274&quot;&gt;&lt;del&gt;HBASE-5274&lt;/del&gt;&lt;/a&gt; Filter out the expired store file scanner during the compaction&quot;.&lt;br/&gt;
Reviewers: Kannan, Karthik, khemani, mbautin&lt;/p&gt;

&lt;p&gt;  During the compaction time, HBase will generate a store scanner which will scan a list of store files. And it would be more efficient to filer out the expired store file since there is no need to read any key values from these store files.&lt;/p&gt;

&lt;p&gt;  This optimization has been already implemented on 89-fb and this is the building block for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5199&quot; title=&quot;Delete out of TTL store files before compaction selection&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5199&quot;&gt;&lt;del&gt;HBASE-5199&lt;/del&gt;&lt;/a&gt; as well. It is supposed to be no-ops to compact the expired store files.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  running all the unit tests&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1407&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1407&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/2931/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/2931/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13192719" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 00:38:45 +0000"  >&lt;p&gt;Liyin requested code review of &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5274&quot; title=&quot;Filter out the expired store file scanner during the compaction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5274&quot;&gt;&lt;del&gt;HBASE-5274&lt;/del&gt;&lt;/a&gt; Filter out the expired store file scanner during the compaction&quot;.&lt;br/&gt;
Reviewers: Kannan, Karthik, khemani, mbautin&lt;/p&gt;

&lt;p&gt;  During the compaction time, HBase will generate a store scanner which will scan a list of store files. And it would be more efficient to filer out the expired store file since there is no need to read any key values from these store files.&lt;/p&gt;

&lt;p&gt;  This optimization has been already implemented on 89-fb and this is the building block for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5199&quot; title=&quot;Delete out of TTL store files before compaction selection&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5199&quot;&gt;&lt;del&gt;HBASE-5199&lt;/del&gt;&lt;/a&gt; as well. It is supposed to be no-ops to compact the expired store files.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  running all the unit tests&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1407&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1407&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/2931/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/2931/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13192720" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 00:38:47 +0000"  >&lt;p&gt;Liyin requested code review of &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5274&quot; title=&quot;Filter out the expired store file scanner during the compaction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5274&quot;&gt;&lt;del&gt;HBASE-5274&lt;/del&gt;&lt;/a&gt; Filter out the expired store file scanner during the compaction&quot;.&lt;br/&gt;
Reviewers: Kannan, Karthik, khemani, mbautin&lt;/p&gt;

&lt;p&gt;  During the compaction time, HBase will generate a store scanner which will scan a list of store files. And it would be more efficient to filer out the expired store file since there is no need to read any key values from these store files.&lt;/p&gt;

&lt;p&gt;  This optimization has been already implemented on 89-fb and this is the building block for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5199&quot; title=&quot;Delete out of TTL store files before compaction selection&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5199&quot;&gt;&lt;del&gt;HBASE-5199&lt;/del&gt;&lt;/a&gt; as well. It is supposed to be no-ops to compact the expired store files.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  running all the unit tests&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1407&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1407&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/2931/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/2931/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13192730" author="liyin" created="Wed, 25 Jan 2012 00:50:27 +0000"  >&lt;p&gt;I am not sure why the Phabricator add so many duplicated comments. Sorry about the spamming.&lt;br/&gt;
@Todd, HBase-5274 tries to avoid scanning any data from the expired store file scanner. So compacting the expired store file will be very cheap. And HBase-5199 actually is related to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4717&quot; title=&quot;More efficient age-off of old data during major compaction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4717&quot;&gt;&lt;del&gt;HBASE-4717&lt;/del&gt;&lt;/a&gt;. which performs the &quot;age-out&quot; compaction.&lt;/p&gt;</comment>
                            <comment id="13192760" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 01:26:39 +0000"  >&lt;p&gt;tedyu has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5274&quot; title=&quot;Filter out the expired store file scanner during the compaction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5274&quot;&gt;&lt;del&gt;HBASE-5274&lt;/del&gt;&lt;/a&gt; Filter out the expired store file scanner during the compaction&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java:71 javadoc for the new fields, please.&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java:224 Can we have a more intuitive method name ?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1407&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1407&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13192761" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 01:26:40 +0000"  >&lt;p&gt;tedyu has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5274&quot; title=&quot;Filter out the expired store file scanner during the compaction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5274&quot;&gt;&lt;del&gt;HBASE-5274&lt;/del&gt;&lt;/a&gt; Filter out the expired store file scanner during the compaction&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java:71 javadoc for the new fields, please.&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java:224 Can we have a more intuitive method name ?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1407&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1407&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13192762" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 01:26:40 +0000"  >&lt;p&gt;tedyu has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5274&quot; title=&quot;Filter out the expired store file scanner during the compaction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5274&quot;&gt;&lt;del&gt;HBASE-5274&lt;/del&gt;&lt;/a&gt; Filter out the expired store file scanner during the compaction&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java:71 javadoc for the new fields, please.&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java:224 Can we have a more intuitive method name ?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1407&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1407&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13192763" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 01:26:44 +0000"  >&lt;p&gt;tedyu has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5274&quot; title=&quot;Filter out the expired store file scanner during the compaction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5274&quot;&gt;&lt;del&gt;HBASE-5274&lt;/del&gt;&lt;/a&gt; Filter out the expired store file scanner during the compaction&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java:71 javadoc for the new fields, please.&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java:224 Can we have a more intuitive method name ?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1407&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1407&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13192764" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 01:26:44 +0000"  >&lt;p&gt;tedyu has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5274&quot; title=&quot;Filter out the expired store file scanner during the compaction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5274&quot;&gt;&lt;del&gt;HBASE-5274&lt;/del&gt;&lt;/a&gt; Filter out the expired store file scanner during the compaction&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java:71 javadoc for the new fields, please.&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java:224 Can we have a more intuitive method name ?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1407&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1407&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13193274" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 20:11:40 +0000"  >&lt;p&gt;Liyin has abandoned the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5274&quot; title=&quot;Filter out the expired store file scanner during the compaction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5274&quot;&gt;&lt;del&gt;HBASE-5274&lt;/del&gt;&lt;/a&gt; Filter out the expired store file scanner during the compaction&quot;.&lt;/p&gt;

&lt;p&gt;  This could be part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5010&quot; title=&quot;Filter HFiles based on TTL&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5010&quot;&gt;&lt;del&gt;HBASE-5010&lt;/del&gt;&lt;/a&gt; Filter HFiles based on TTL.  Mikhail will help to followup for fixing this issue.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1407&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1407&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13193275" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 20:11:40 +0000"  >&lt;p&gt;Liyin has abandoned the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5274&quot; title=&quot;Filter out the expired store file scanner during the compaction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5274&quot;&gt;&lt;del&gt;HBASE-5274&lt;/del&gt;&lt;/a&gt; Filter out the expired store file scanner during the compaction&quot;.&lt;/p&gt;

&lt;p&gt;  This could be part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5010&quot; title=&quot;Filter HFiles based on TTL&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5010&quot;&gt;&lt;del&gt;HBASE-5010&lt;/del&gt;&lt;/a&gt; Filter HFiles based on TTL.  Mikhail will help to followup for fixing this issue.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1407&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1407&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13193276" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 20:11:42 +0000"  >&lt;p&gt;Liyin has abandoned the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5274&quot; title=&quot;Filter out the expired store file scanner during the compaction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5274&quot;&gt;&lt;del&gt;HBASE-5274&lt;/del&gt;&lt;/a&gt; Filter out the expired store file scanner during the compaction&quot;.&lt;/p&gt;

&lt;p&gt;  This could be part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5010&quot; title=&quot;Filter HFiles based on TTL&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5010&quot;&gt;&lt;del&gt;HBASE-5010&lt;/del&gt;&lt;/a&gt; Filter HFiles based on TTL.  Mikhail will help to followup for fixing this issue.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1407&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1407&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13193277" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 20:11:43 +0000"  >&lt;p&gt;Liyin has abandoned the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5274&quot; title=&quot;Filter out the expired store file scanner during the compaction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5274&quot;&gt;&lt;del&gt;HBASE-5274&lt;/del&gt;&lt;/a&gt; Filter out the expired store file scanner during the compaction&quot;.&lt;/p&gt;

&lt;p&gt;  This could be part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5010&quot; title=&quot;Filter HFiles based on TTL&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5010&quot;&gt;&lt;del&gt;HBASE-5010&lt;/del&gt;&lt;/a&gt; Filter HFiles based on TTL.  Mikhail will help to followup for fixing this issue.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1407&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1407&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13193278" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 20:11:44 +0000"  >&lt;p&gt;Liyin has abandoned the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5274&quot; title=&quot;Filter out the expired store file scanner during the compaction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5274&quot;&gt;&lt;del&gt;HBASE-5274&lt;/del&gt;&lt;/a&gt; Filter out the expired store file scanner during the compaction&quot;.&lt;/p&gt;

&lt;p&gt;  This could be part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5010&quot; title=&quot;Filter HFiles based on TTL&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5010&quot;&gt;&lt;del&gt;HBASE-5010&lt;/del&gt;&lt;/a&gt; Filter HFiles based on TTL.  Mikhail will help to followup for fixing this issue.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1407&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1407&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194198" author="mikhail" created="Thu, 26 Jan 2012 21:35:44 +0000"  >&lt;p&gt;This JIRA is a follow-up for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5010&quot; title=&quot;Filter HFiles based on TTL&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5010&quot;&gt;&lt;del&gt;HBASE-5010&lt;/del&gt;&lt;/a&gt; Filter HFiles based on TTL.&lt;/p&gt;</comment>
                            <comment id="13194206" author="phabricator@reviews.facebook.net" created="Thu, 26 Jan 2012 21:43:38 +0000"  >&lt;p&gt;mbautin requested code review of &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5274&quot; title=&quot;Filter out the expired store file scanner during the compaction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5274&quot;&gt;&lt;del&gt;HBASE-5274&lt;/del&gt;&lt;/a&gt; Filter out expired scanners on compaction as well&quot;.&lt;br/&gt;
Reviewers: Liyin, JIRA, lhofhansl, Kannan&lt;/p&gt;

&lt;p&gt;  This is a followup for D1017 to make it similar to D909 (89-fb). The fix for 89-fb used the TTL-based scanner filtering logic on both normal scanners and compactions, while the trunk fix D1017 did not. This is just the delta between the two diffs that brings filtering expired store files on compaction to trunk.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  Unit tests&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1473&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1473&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/Store.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/metrics/SchemaMetrics.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/hfile/TestScannerSelectionUsingTTL.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/TestCompaction.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/3063/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/3063/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13194213" author="phabricator@reviews.facebook.net" created="Thu, 26 Jan 2012 21:51:39 +0000"  >&lt;p&gt;Liyin has accepted the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5274&quot; title=&quot;Filter out the expired store file scanner during the compaction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5274&quot;&gt;&lt;del&gt;HBASE-5274&lt;/del&gt;&lt;/a&gt; Filter out expired scanners on compaction as well&quot;.&lt;/p&gt;

&lt;p&gt;  LGTM. Thanks Mikhail !&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1473&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1473&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194220" author="phabricator@reviews.facebook.net" created="Thu, 26 Jan 2012 22:01:39 +0000"  >&lt;p&gt;tedyu has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5274&quot; title=&quot;Filter out the expired store file scanner during the compaction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5274&quot;&gt;&lt;del&gt;HBASE-5274&lt;/del&gt;&lt;/a&gt; Filter out expired scanners on compaction as well&quot;.&lt;/p&gt;

&lt;p&gt;  Looks good.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java:218 isCompaction is not needed, can pass false directly.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1473&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1473&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194224" author="phabricator@reviews.facebook.net" created="Thu, 26 Jan 2012 22:09:40 +0000"  >&lt;p&gt;Kannan has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5274&quot; title=&quot;Filter out the expired store file scanner during the compaction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5274&quot;&gt;&lt;del&gt;HBASE-5274&lt;/del&gt;&lt;/a&gt; Filter out expired scanners on compaction as well&quot;.&lt;/p&gt;

&lt;p&gt;  +1&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1473&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1473&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194238" author="phabricator@reviews.facebook.net" created="Thu, 26 Jan 2012 22:51:40 +0000"  >&lt;p&gt;mbautin has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5274&quot; title=&quot;Filter out the expired store file scanner during the compaction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5274&quot;&gt;&lt;del&gt;HBASE-5274&lt;/del&gt;&lt;/a&gt; Filter out expired scanners on compaction as well&quot;.&lt;/p&gt;

&lt;p&gt;  Ted: replying to your comment inline. Please let me know if this is OK to be committed.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java:218 @tedyu: this is just for clarity. Boolean parameters are inherently confusing, and this is an equivalent of a comment saying that &quot;false&quot; means &quot;isCompaction&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1473&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1473&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194246" author="phabricator@reviews.facebook.net" created="Thu, 26 Jan 2012 22:59:39 +0000"  >&lt;p&gt;tedyu has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5274&quot; title=&quot;Filter out the expired store file scanner during the compaction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5274&quot;&gt;&lt;del&gt;HBASE-5274&lt;/del&gt;&lt;/a&gt; Filter out expired scanners on compaction as well&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java:218 That should be fine.&lt;br/&gt;
  Another approach is to use comment directly.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1473&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1473&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194249" author="phabricator@reviews.facebook.net" created="Thu, 26 Jan 2012 23:01:39 +0000"  >&lt;p&gt;lhofhansl has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5274&quot; title=&quot;Filter out the expired store file scanner during the compaction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5274&quot;&gt;&lt;del&gt;HBASE-5274&lt;/del&gt;&lt;/a&gt; Filter out expired scanners on compaction as well&quot;.&lt;/p&gt;

&lt;p&gt;  +1&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/Store.java:975 Minor comment: Is there no way to move the tests into the same package and leave this protected?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1473&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1473&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194268" author="phabricator@reviews.facebook.net" created="Thu, 26 Jan 2012 23:25:39 +0000"  >&lt;p&gt;mbautin has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5274&quot; title=&quot;Filter out the expired store file scanner during the compaction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5274&quot;&gt;&lt;del&gt;HBASE-5274&lt;/del&gt;&lt;/a&gt; Filter out expired scanners on compaction as well&quot;.&lt;/p&gt;

&lt;p&gt;  Lars: please see my response inline.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/Store.java:975 In that case I would have to make LruBlockCache.getCachedFileNamesForTest public. In addition, this patch makes &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5010&quot; title=&quot;Filter HFiles based on TTL&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5010&quot;&gt;&lt;del&gt;HBASE-5010&lt;/del&gt;&lt;/a&gt; implementation consistent in 89-fb and trunk, and moving the unit test around might create confusion.&lt;/p&gt;

&lt;p&gt;  Please let me know if this is OK to commit.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1473&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1473&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194286" author="phabricator@reviews.facebook.net" created="Thu, 26 Jan 2012 23:45:38 +0000"  >&lt;p&gt;lhofhansl has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5274&quot; title=&quot;Filter out the expired store file scanner during the compaction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5274&quot;&gt;&lt;del&gt;HBASE-5274&lt;/del&gt;&lt;/a&gt; Filter out expired scanners on compaction as well&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/Store.java:975 Fair enough. +1 &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1473&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1473&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194344" author="phabricator@reviews.facebook.net" created="Fri, 27 Jan 2012 01:31:39 +0000"  >&lt;p&gt;mbautin has committed the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5274&quot; title=&quot;Filter out the expired store file scanner during the compaction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5274&quot;&gt;&lt;del&gt;HBASE-5274&lt;/del&gt;&lt;/a&gt; Filter out expired scanners on compaction as well&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1473&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1473&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMIT&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHBASE1236483&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHBASE1236483&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194364" author="mikhail" created="Fri, 27 Jan 2012 02:12:39 +0000"  >&lt;p&gt;Fix committed to trunk.&lt;/p&gt;</comment>
                            <comment id="13194501" author="hudson" created="Fri, 27 Jan 2012 06:01:21 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-security #92 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-security/92/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-security/92/&lt;/a&gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5274&quot; title=&quot;Filter out the expired store file scanner during the compaction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5274&quot;&gt;&lt;del&gt;HBASE-5274&lt;/del&gt;&lt;/a&gt; Filter out expired scanners on compaction as well&lt;/p&gt;

&lt;p&gt;Summary: This is a followup for D1017 to make it similar to D909 (89-fb). The&lt;br/&gt;
fix for 89-fb used the TTL-based scanner filtering logic on both normal scanners&lt;br/&gt;
and compactions, while the trunk fix D1017 did not. This is just the delta&lt;br/&gt;
between the two diffs that brings filtering expired store files on compaction to&lt;br/&gt;
trunk.&lt;/p&gt;

&lt;p&gt;Test Plan: Unit tests&lt;/p&gt;

&lt;p&gt;Reviewers: Liyin, JIRA, lhofhansl, Kannan&lt;/p&gt;

&lt;p&gt;Reviewed By: Liyin&lt;/p&gt;

&lt;p&gt;CC: Liyin, tedyu, Kannan, mbautin, lhofhansl&lt;/p&gt;

&lt;p&gt;Differential Revision: &lt;a href=&quot;https://reviews.facebook.net/D1473&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1473&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;mbautin : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/Store.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/metrics/SchemaMetrics.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/io/hfile/TestScannerSelectionUsingTTL.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/regionserver/TestCompaction.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13196715" author="hudson" created="Tue, 31 Jan 2012 05:34:26 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2648 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2648/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2648/&lt;/a&gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5274&quot; title=&quot;Filter out the expired store file scanner during the compaction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5274&quot;&gt;&lt;del&gt;HBASE-5274&lt;/del&gt;&lt;/a&gt; Filter out expired scanners on compaction as well&lt;/p&gt;

&lt;p&gt;Summary: This is a followup for D1017 to make it similar to D909 (89-fb). The&lt;br/&gt;
fix for 89-fb used the TTL-based scanner filtering logic on both normal scanners&lt;br/&gt;
and compactions, while the trunk fix D1017 did not. This is just the delta&lt;br/&gt;
between the two diffs that brings filtering expired store files on compaction to&lt;br/&gt;
trunk.&lt;/p&gt;

&lt;p&gt;Test Plan: Unit tests&lt;/p&gt;

&lt;p&gt;Reviewers: Liyin, JIRA, lhofhansl, Kannan&lt;/p&gt;

&lt;p&gt;Reviewed By: Liyin&lt;/p&gt;

&lt;p&gt;CC: Liyin, tedyu, Kannan, mbautin, lhofhansl&lt;/p&gt;

&lt;p&gt;Differential Revision: &lt;a href=&quot;https://reviews.facebook.net/D1473&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1473&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;mbautin : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/Store.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/metrics/SchemaMetrics.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/io/hfile/TestScannerSelectionUsingTTL.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/regionserver/TestCompaction.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12538374">HBASE-5199</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12529705">HBASE-4717</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12534821">HBASE-5010</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12511766" name="ASF.LICENSE.NOT.GRANTED--D1407.1.patch" size="4227" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 00:38:48 +0000"/>
                            <attachment id="12511765" name="ASF.LICENSE.NOT.GRANTED--D1407.1.patch" size="4227" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 00:38:46 +0000"/>
                            <attachment id="12511764" name="ASF.LICENSE.NOT.GRANTED--D1407.1.patch" size="4227" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 00:38:44 +0000"/>
                            <attachment id="12511763" name="ASF.LICENSE.NOT.GRANTED--D1407.1.patch" size="4227" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 00:38:41 +0000"/>
                            <attachment id="12511762" name="ASF.LICENSE.NOT.GRANTED--D1407.1.patch" size="4227" author="phabricator@reviews.facebook.net" created="Wed, 25 Jan 2012 00:38:40 +0000"/>
                            <attachment id="12512040" name="ASF.LICENSE.NOT.GRANTED--D1473.1.patch" size="12245" author="phabricator@reviews.facebook.net" created="Thu, 26 Jan 2012 21:43:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 25 Jan 2012 00:22:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>225196</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 46 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ht3b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>101975</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>