<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:31:59 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-12331/HBASE-12331.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-12331] Shorten the mob snapshot unit tests</title>
                <link>https://issues.apache.org/jira/browse/HBASE-12331</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The mob snapshot patch introduced a whole log of tests that take a long time to run and would be better as integration tests.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running org.apache.hadoop.hbase.client.TestMobRestoreSnapshotFromClientWithRegionReplicas
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 394.803 sec - in org.apache.hadoop.hbase.client.TestMobRestoreSnapshotFromClientWithRegionReplicas
Running org.apache.hadoop.hbase.client.TestMobRestoreSnapshotFromClient
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 212.377 sec - in org.apache.hadoop.hbase.client.TestMobRestoreSnapshotFromClient
Running org.apache.hadoop.hbase.client.TestMobSnapshotFromClientWithRegionReplicas
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 49.463 sec - in org.apache.hadoop.hbase.client.TestMobSnapshotFromClientWithRegionReplicas
Running org.apache.hadoop.hbase.client.TestMobSnapshotFromClient
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 46.724 sec - in org.apache.hadoop.hbase.client.TestMobSnapshotFromClient
Running org.apache.hadoop.hbase.client.TestMobCloneSnapshotFromClient
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 204.03 sec - in org.apache.hadoop.hbase.client.TestMobCloneSnapshotFromClient
Running org.apache.hadoop.hbase.client.TestMobCloneSnapshotFromClientWithRegionReplicas
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 214.052 sec - in org.apache.hadoop.hbase.client.TestMobCloneSnapshotFromClientWithRegionReplicas
Running org.apache.hadoop.hbase.client.TestMobSnapshotCloneIndependence
Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 105.139 sec - in org.apache.hadoop.hbase.client.TestMobSnapshotCloneIndependence
Running org.apache.hadoop.hbase.regionserver.TestMobStoreScanner
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 24.42 sec - in org.apache.hadoop.hbase.regionserver.TestMobStoreScanner
Running org.apache.hadoop.hbase.regionserver.TestDeleteMobTable
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 18.136 sec - in org.apache.hadoop.hbase.regionserver.TestDeleteMobTable
Running org.apache.hadoop.hbase.regionserver.TestHMobStore
Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 6.09 sec - in org.apache.hadoop.hbase.regionserver.TestHMobStore
Running org.apache.hadoop.hbase.regionserver.TestMobCompaction
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 20.629 sec - in org.apache.hadoop.hbase.regionserver.TestMobCompaction
Running org.apache.hadoop.hbase.mob.TestCachedMobFile
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 5.301 sec - in org.apache.hadoop.hbase.mob.TestCachedMobFile
Running org.apache.hadoop.hbase.mob.mapreduce.TestMobSweepJob
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 14.752 sec - in org.apache.hadoop.hbase.mob.mapreduce.TestMobSweepJob
Running org.apache.hadoop.hbase.mob.mapreduce.TestMobSweepReducer
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 16.276 sec - in org.apache.hadoop.hbase.mob.mapreduce.TestMobSweepReducer
Running org.apache.hadoop.hbase.mob.mapreduce.TestMobSweepMapper
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 13.46 sec - in org.apache.hadoop.hbase.mob.mapreduce.TestMobSweepMapper
Running org.apache.hadoop.hbase.mob.mapreduce.TestMobSweeper
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 173.05 sec - in org.apache.hadoop.hbase.mob.mapreduce.TestMobSweeper
Running org.apache.hadoop.hbase.mob.TestMobDataBlockEncoding
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 20.86 sec - in org.apache.hadoop.hbase.mob.TestMobDataBlockEncoding
Running org.apache.hadoop.hbase.mob.TestExpiredMobFileCleaner
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 16.029 sec - in org.apache.hadoop.hbase.mob.TestExpiredMobFileCleaner
Running org.apache.hadoop.hbase.mob.TestMobFile
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 3.562 sec - in org.apache.hadoop.hbase.mob.TestMobFile
Running org.apache.hadoop.hbase.mob.TestMobFileCache
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 5.173 sec - in org.apache.hadoop.hbase.mob.TestMobFileCache
Running org.apache.hadoop.hbase.mob.TestDefaultMobStoreFlusher
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 16.586 sec - in org.apache.hadoop.hbase.mob.TestDefaultMobStoreFlusher
Running org.apache.hadoop.hbase.mob.TestMobFileName
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.034 sec - in org.apache.hadoop.hbase.mob.TestMobFileName
Running org.apache.hadoop.hbase.snapshot.TestMobSecureExportSnapshot
Tests run: 9, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 707.528 sec - in org.apache.hadoop.hbase.snapshot.TestMobSecureExportSnapshot
Running org.apache.hadoop.hbase.snapshot.TestMobExportSnapshot
Tests run: 9, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 492.225 sec - in org.apache.hadoop.hbase.snapshot.TestMobExportSnapshot
Running org.apache.hadoop.hbase.snapshot.TestMobRestoreSnapshotHelper
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 4.818 sec - in org.apache.hadoop.hbase.snapshot.TestMobRestoreSnapshotHelper
Running org.apache.hadoop.hbase.snapshot.TestMobFlushSnapshotFromClient
Tests run: 9, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 83.69 sec - in org.apache.hadoop.hbase.snapshot.TestMobFlushSnapshotFromClient
Running org.apache.hadoop.hbase.snapshot.TestMobRestoreFlushSnapshotFromClient
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 144.088 sec - in org.apache.hadoop.hbase.snapshot.TestMobRestoreFlushSnapshotFromClient

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12750150">HBASE-12331</key>
            <summary>Shorten the mob snapshot unit tests</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12721032">HBASE-11339</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jiajia">Jiajia Li</assignee>
                                    <reporter username="jmhsieh">Jonathan Hsieh</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Oct 2014 18:21:10 +0000</created>
                <updated>Wed, 22 Jul 2015 22:48:54 +0000</updated>
                            <resolved>Thu, 25 Dec 2014 22:08:01 +0000</resolved>
                                    <version>hbase-11339</version>
                                    <fixVersion>hbase-11339</fixVersion>
                                    <component>mob</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="14182349" author="jiajia" created="Fri, 24 Oct 2014 02:47:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jmhsieh&quot; class=&quot;user-hover&quot; rel=&quot;jmhsieh&quot;&gt;Jonathan Hsieh&lt;/a&gt;all the snapshot tests as integration tests, or only partially (the UT takes time more than 100s)?&lt;/p&gt;</comment>
                            <comment id="14189261" author="jmhsieh" created="Wed, 29 Oct 2014 23:20:48 +0000"  >&lt;p&gt;I did a little more digging &amp;#8211; there are a few general requests&lt;/p&gt;

&lt;p&gt;1) some tests like TestCloneSnapshotFromclientWithRegionReplicas/TestMobCloneSnapshotFromClientWithRegionReplicas seems like overkill.  I&apos;d think that read replicas are orthogonal to snapshots or have specific tests for the combination of features instead of running the exact same tests.  If you want to run the same tests it shoudl be just a configuration of an IT rig.&lt;/p&gt;

&lt;p&gt;2) Could we refactor combine these so that we don&apos;t spin up clusters as often?  Maybe parameterize tests?   Each of the MobSnashot tests is essentially a modified clone of the original snapshot test, and we&apos;ve added a lot of code for that.&lt;/p&gt;

&lt;p&gt;3) For the tests that take &amp;gt;100s, can we write less data or do less setup so that they finish in less time?  Could we set lower thresholds so that the code paths are exercise but we write less data?&lt;/p&gt;</comment>
                            <comment id="14191477" author="jiajia" created="Fri, 31 Oct 2014 06:40:27 +0000"  >&lt;p&gt;change some UTs to be integration tests and shorten some UTs.&lt;/p&gt;</comment>
                            <comment id="14201790" author="jiajia" created="Fri, 7 Nov 2014 08:30:00 +0000"  >&lt;p&gt;hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jmhsieh&quot; class=&quot;user-hover&quot; rel=&quot;jmhsieh&quot;&gt;Jonathan Hsieh&lt;/a&gt; , in the &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12332&quot; title=&quot;[mob] improve how we resolve mobfiles in reads&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12332&quot;&gt;&lt;del&gt;HBASE-12332&lt;/del&gt;&lt;/a&gt; has some improvement of read clone cell, and drop some time cost of unit tests.  We can write less data to finish in less time, then most of them(except the case of exporting snapshot) are finished within 100 seconds. And the TestExportSnapshot also takes a long time, so do we still need to move these unit tests to integration tests? Please advise. Thanks.&lt;/p&gt;</comment>
                            <comment id="14206152" author="jiajia" created="Tue, 11 Nov 2014 08:33:55 +0000"  >&lt;p&gt;hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jmhsieh&quot; class=&quot;user-hover&quot; rel=&quot;jmhsieh&quot;&gt;Jonathan Hsieh&lt;/a&gt;, do you have any advise?&lt;/p&gt;</comment>
                            <comment id="14256371" author="jmhsieh" created="Tue, 23 Dec 2014 00:43:23 +0000"  >&lt;p&gt;Let&apos;s just drop the *WithRegionReplicas and SecureExport.  that should just cut the time down roughly in half as a start.  We can revisit to see if we need to cull more.&lt;/p&gt;</comment>
                            <comment id="14256456" author="jiajia" created="Tue, 23 Dec 2014 01:57:14 +0000"  >&lt;p&gt;Thanks Jon, I will drop these tests and upload a new patch.&lt;/p&gt;</comment>
                            <comment id="14256760" author="jiajia" created="Tue, 23 Dec 2014 09:04:54 +0000"  >&lt;p&gt;upload the &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12331&quot; title=&quot;Shorten the mob snapshot unit tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12331&quot;&gt;&lt;del&gt;HBASE-12331&lt;/del&gt;&lt;/a&gt;-V2.patch(remove the TestMob *WithRegionReplicas and TestMobSecureExportSnapshot)&lt;/p&gt;</comment>
                            <comment id="14258862" author="jmhsieh" created="Thu, 25 Dec 2014 22:07:30 +0000"  >&lt;p&gt;thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jiajia&quot; class=&quot;user-hover&quot; rel=&quot;jiajia&quot;&gt;Jiajia Li&lt;/a&gt;.  I&apos;ve committed the path.&lt;/p&gt;</comment>
                            <comment id="14637860" author="hudson" created="Wed, 22 Jul 2015 22:48:54 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #6672 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/6672/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/6672/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12331&quot; title=&quot;Shorten the mob snapshot unit tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12331&quot;&gt;&lt;del&gt;HBASE-12331&lt;/del&gt;&lt;/a&gt; Shorten the mob snapshot unit tests (Jiajia Li) (jmhsieh: rev 36bec4fa0778a6b9326e4a7d59acd0dace1bc834)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestMobSnapshotFromClientWithRegionReplicas.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestMobRestoreSnapshotFromClientWithRegionReplicas.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestMobCloneSnapshotFromClientWithRegionReplicas.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/snapshot/TestMobSecureExportSnapshot.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12678426" name="HBASE-12331-V1.diff" size="114880" author="jiajia" created="Fri, 31 Oct 2014 06:40:27 +0000"/>
                            <attachment id="12688816" name="HBASE-12331-V2.patch" size="7356" author="jiajia" created="Tue, 23 Dec 2014 09:04:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 24 Oct 2014 02:47:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 21 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i21ief:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>