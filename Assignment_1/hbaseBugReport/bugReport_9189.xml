<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:02:12 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-9189/HBASE-9189.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-9189] IncreasingToUpperBoundRegionSplitPolicy.shouldSplit() should check all the stores before returning.</title>
                <link>https://issues.apache.org/jira/browse/HBASE-9189</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;IncreasingToUpperBoundRegionSplitPolicy.shouldSplit() return as soon as it found any store big enough to be split. However, it should first go trough all all the stores to make sure they are all splittable before returning.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12663089">HBASE-9189</key>
            <summary>IncreasingToUpperBoundRegionSplitPolicy.shouldSplit() should check all the stores before returning.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jmspaggi">Jean-Marc Spaggiari</assignee>
                                    <reporter username="jmspaggi">Jean-Marc Spaggiari</reporter>
                        <labels>
                    </labels>
                <created>Sun, 11 Aug 2013 16:02:46 +0000</created>
                <updated>Wed, 21 Aug 2013 00:08:47 +0000</updated>
                            <resolved>Tue, 13 Aug 2013 00:02:50 +0000</resolved>
                                    <version>0.95.1</version>
                    <version>0.94.10</version>
                    <version>0.96.0</version>
                                    <fixVersion>0.98.0</fixVersion>
                    <fixVersion>0.95.2</fixVersion>
                    <fixVersion>0.94.11</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13736399" author="jmspaggi" created="Sun, 11 Aug 2013 20:09:11 +0000"  >&lt;p&gt;Patch for 0.94 attached. Ran the tests successfuly for it. Tests running for the trunk version...&lt;/p&gt;</comment>
                            <comment id="13736410" author="yuzhihong@gmail.com" created="Sun, 11 Aug 2013 20:34:52 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
       &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ((!store.canSplit())) {
+        foundABigStore = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Is the above change intentional ?&lt;/p&gt;</comment>
                            <comment id="13736449" author="jmspaggi" created="Sun, 11 Aug 2013 22:41:27 +0000"  >&lt;p&gt;&amp;gt; Is the above change intentional ?&lt;/p&gt;

&lt;p&gt;Not at all! Updated version attached.. Thanks for looking at it.&lt;/p&gt;</comment>
                            <comment id="13736450" author="jmspaggi" created="Sun, 11 Aug 2013 22:42:06 +0000"  >&lt;p&gt;Trunk version. Tests passed locally, but I don&apos;t really think there is any test testing that.&lt;/p&gt;</comment>
                            <comment id="13736457" author="lhofhansl" created="Sun, 11 Aug 2013 22:59:24 +0000"  >&lt;p&gt;Looks good. What was the implication of this? We&apos;d get a split request, but then not split because there are unsplittable stores?&lt;/p&gt;</comment>
                            <comment id="13736473" author="hadoopqa" created="Mon, 12 Aug 2013 00:02:39 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12597388/HBASE-9189-v0-trunk.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12597388/HBASE-9189-v0-trunk.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 3 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 release audit&lt;/font&gt;.  The applied patch generated 1 release audit warnings (more than the trunk&apos;s current 0 warnings).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6696//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6696//testReport/&lt;/a&gt;&lt;br/&gt;
Release audit warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6696//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6696//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6696//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6696//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6696//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6696//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6696//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6696//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6696//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6696//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6696//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6696//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6696//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6696//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6696//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6696//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6696//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6696//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6696//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6696//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13736509" author="jmspaggi" created="Mon, 12 Aug 2013 02:36:02 +0000"  >&lt;blockquote&gt;
&lt;p&gt;What was the implication of this? We&apos;d get a split request, but then not split because there are unsplittable stores?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Regions with references will be marked as &quot;splittable&quot;. So when the memstore flush and check for compactions, even if there is a reference file they might emit a split request.&lt;/p&gt;

&lt;p&gt;However, in the SplitRequest, there is a check for &quot;st.prepare&quot; which will validate if region is splittable which, in turn, will verify if there is references. And if any, will wait. So impact seems to be just few more pending threads waiting for the references on the stores to be removed but I&apos;m not 100% sure if it&apos;s the only impact.&lt;/p&gt;

&lt;p&gt;Also, DelimitedKeyPrefixRegionSplitPolicy and KeyPrefixRegionSplitPolicy are extending IncreasingToUpperBoundRegionSplitPolicy so are impacted the same way.&lt;/p&gt;</comment>
                            <comment id="13737353" author="lhofhansl" created="Mon, 12 Aug 2013 21:03:38 +0000"  >&lt;p&gt;Any chance for running the full 0.94 suite, JM? I know this is tiny patch, but changes to the split logic always scare me &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13737358" author="jmspaggi" created="Mon, 12 Aug 2013 21:07:59 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;I already ran it and it passed. Let me restart it right now. &lt;/p&gt;</comment>
                            <comment id="13737388" author="stack" created="Mon, 12 Aug 2013 21:42:10 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;Committed to trunk and 0.95.  Thanks JMS.&lt;/p&gt;

&lt;p&gt;Will wait on your second test run.   If passes I can commit for Lars.&lt;/p&gt;</comment>
                            <comment id="13737477" author="lhofhansl" created="Mon, 12 Aug 2013 22:57:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jmspaggi&quot; class=&quot;user-hover&quot; rel=&quot;jmspaggi&quot;&gt;Jean-Marc Spaggiari&lt;/a&gt;, if it passed before, no need to run it again. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;+1 as well. Will commit to 0.94.&lt;/p&gt;</comment>
                            <comment id="13737575" author="lhofhansl" created="Tue, 13 Aug 2013 00:02:50 +0000"  >&lt;p&gt;Committed to 0.94 as well. Thanks, JM.&lt;/p&gt;</comment>
                            <comment id="13737577" author="hudson" created="Tue, 13 Aug 2013 00:04:24 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-TRUNK #4375 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4375/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4375/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9189&quot; title=&quot;IncreasingToUpperBoundRegionSplitPolicy.shouldSplit() should check all the stores before returning.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9189&quot;&gt;&lt;del&gt;HBASE-9189&lt;/del&gt;&lt;/a&gt; IncreasingToUpperBoundRegionSplitPolicy.shouldSplit() should check all the stores before returning (stack: rev 1513262)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/IncreasingToUpperBoundRegionSplitPolicy.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RegionSplitPolicy.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13737639" author="hudson" created="Tue, 13 Aug 2013 00:40:50 +0000"  >&lt;p&gt;FAILURE: Integrated in hbase-0.95-on-hadoop2 #237 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95-on-hadoop2/237/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95-on-hadoop2/237/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9189&quot; title=&quot;IncreasingToUpperBoundRegionSplitPolicy.shouldSplit() should check all the stores before returning.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9189&quot;&gt;&lt;del&gt;HBASE-9189&lt;/del&gt;&lt;/a&gt; IncreasingToUpperBoundRegionSplitPolicy.shouldSplit() should check all the stores before returning (stack: rev 1513263)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/IncreasingToUpperBoundRegionSplitPolicy.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RegionSplitPolicy.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13737647" author="hudson" created="Tue, 13 Aug 2013 00:44:15 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #670 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/670/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/670/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9189&quot; title=&quot;IncreasingToUpperBoundRegionSplitPolicy.shouldSplit() should check all the stores before returning.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9189&quot;&gt;&lt;del&gt;HBASE-9189&lt;/del&gt;&lt;/a&gt; IncreasingToUpperBoundRegionSplitPolicy.shouldSplit() should check all the stores before returning (stack: rev 1513262)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/IncreasingToUpperBoundRegionSplitPolicy.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RegionSplitPolicy.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13737656" author="hudson" created="Tue, 13 Aug 2013 00:50:19 +0000"  >&lt;p&gt;FAILURE: Integrated in hbase-0.95 #435 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95/435/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95/435/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9189&quot; title=&quot;IncreasingToUpperBoundRegionSplitPolicy.shouldSplit() should check all the stores before returning.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9189&quot;&gt;&lt;del&gt;HBASE-9189&lt;/del&gt;&lt;/a&gt; IncreasingToUpperBoundRegionSplitPolicy.shouldSplit() should check all the stores before returning (stack: rev 1513263)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/IncreasingToUpperBoundRegionSplitPolicy.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RegionSplitPolicy.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13737693" author="hudson" created="Tue, 13 Aug 2013 01:32:45 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.94-security #252 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/252/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/252/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9189&quot; title=&quot;IncreasingToUpperBoundRegionSplitPolicy.shouldSplit() should check all the stores before returning.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9189&quot;&gt;&lt;del&gt;HBASE-9189&lt;/del&gt;&lt;/a&gt;  IncreasingToUpperBoundRegionSplitPolicy.shouldSplit() should check all the stores before returning. (Jean-Marc Spaggiari) (larsh: rev 1513304)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/IncreasingToUpperBoundRegionSplitPolicy.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/RegionSplitPolicy.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13737705" author="hudson" created="Tue, 13 Aug 2013 01:52:09 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.94 #1104 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/1104/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/1104/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9189&quot; title=&quot;IncreasingToUpperBoundRegionSplitPolicy.shouldSplit() should check all the stores before returning.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9189&quot;&gt;&lt;del&gt;HBASE-9189&lt;/del&gt;&lt;/a&gt;  IncreasingToUpperBoundRegionSplitPolicy.shouldSplit() should check all the stores before returning. (Jean-Marc Spaggiari) (larsh: rev 1513304)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/IncreasingToUpperBoundRegionSplitPolicy.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/RegionSplitPolicy.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13738318" author="stack" created="Tue, 13 Aug 2013 15:02:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jmspaggi&quot; class=&quot;user-hover&quot; rel=&quot;jmspaggi&quot;&gt;Jean-Marc Spaggiari&lt;/a&gt; Do you think this fail could be related boss: &lt;a href=&quot;http://54.241.6.143/job/HBase-0.95-Hadoop-2/org.apache.hbase$hbase-server/809/testReport/org.apache.hadoop.hbase.client/TestAdmin/testForceSplitMultiFamily/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://54.241.6.143/job/HBase-0.95-Hadoop-2/org.apache.hbase$hbase-server/809/testReport/org.apache.hadoop.hbase.client/TestAdmin/testForceSplitMultiFamily/&lt;/a&gt;  ? Thanks.&lt;/p&gt;</comment>
                            <comment id="13738332" author="stack" created="Tue, 13 Aug 2013 15:07:47 +0000"  >&lt;p&gt;It failed here too: &lt;a href=&quot;http://54.241.6.143/job/HBase-0.95-Hadoop-2/org.apache.hbase$hbase-server/809/testReport/junit/org.apache.hadoop.hbase.client/TestAdmin/testForceSplitMultiFamily/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://54.241.6.143/job/HBase-0.95-Hadoop-2/org.apache.hbase$hbase-server/809/testReport/junit/org.apache.hadoop.hbase.client/TestAdmin/testForceSplitMultiFamily/&lt;/a&gt;  It passed subsequently.   My guess is the test doesn&apos;t accomodate your change &amp;#8211; or it is unrelated.  Thanks.&lt;/p&gt;</comment>
                            <comment id="13738365" author="jmspaggi" created="Tue, 13 Aug 2013 15:29:51 +0000"  >&lt;p&gt;Hum. Patch and tests are both related to split, so can be related, but I will be surprised. Let me re-run that locally and see...&lt;/p&gt;</comment>
                            <comment id="13738561" author="jmspaggi" created="Tue, 13 Aug 2013 17:49:34 +0000"  >&lt;p&gt;Works for me in trunk. I will try in 0.94 and also export 0.95 and test with it too...&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building HBase - Assembly 0.97.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-remote-resources-plugin:1.4:process (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;) @ hbase-assembly ---
[INFO] 
[INFO] --- maven-dependency-plugin:2.1:build-classpath (create-hbase-generated-classpath) @ hbase-assembly ---
[INFO] Wrote classpath file &apos;/home/jmspaggi/workspace/hbase-TRUNK/hbase-assembly/target/../../target/cached_classpath.txt&apos;.
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] HBase ............................................. SUCCESS [6.128s]
[INFO] HBase - Common .................................... SUCCESS [22.205s]
[INFO] HBase - Protocol .................................. SUCCESS [0.665s]
[INFO] HBase - Client .................................... SUCCESS [19.061s]
[INFO] HBase - Hadoop Compatibility ...................... SUCCESS [5.205s]
[INFO] HBase - Hadoop One Compatibility .................. SUCCESS [1.108s]
[INFO] HBase - Prefix Tree ............................... SUCCESS [2.586s]
[INFO] HBase - Server .................................... SUCCESS [1:14:43.249s]
[INFO] HBase - Integration Tests ......................... SUCCESS [0.911s]
[INFO] HBase - Examples .................................. SUCCESS [3.640s]
[INFO] HBase - Assembly .................................. SUCCESS [1.286s]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1:15:46.843s
[INFO] Finished at: Tue Aug 13 13:03:41 EDT 2013
[INFO] Final Memory: 48M/538M
[INFO] ------------------------------------------------------------------------
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13738653" author="lhofhansl" created="Tue, 13 Aug 2013 18:43:27 +0000"  >&lt;p&gt;We&apos;ve had a clean 0.94 (both Apache Jenkins and EC2) with this patch.&lt;/p&gt;</comment>
                            <comment id="13738923" author="stack" created="Tue, 13 Aug 2013 22:20:51 +0000"  >&lt;p&gt;Yeah, I had some subsequent good builds too.  Was wondering if related or if we made a new flakey?  No worries &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jmspaggi&quot; class=&quot;user-hover&quot; rel=&quot;jmspaggi&quot;&gt;Jean-Marc Spaggiari&lt;/a&gt;.  If you see nothing, I can keep an eye on it....&lt;/p&gt;</comment>
                            <comment id="13738935" author="jmspaggi" created="Tue, 13 Aug 2013 22:29:33 +0000"  >&lt;p&gt;I just got 0.94 passed too:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Results :&lt;/p&gt;

&lt;p&gt;Tests run: 1378, Failures: 0, Errors: 0, Skipped: 13&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; BUILD SUCCESS&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Total time: 1:20:03.365s&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Finished at: Tue Aug 13 15:10:05 EDT 2013&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Final Memory: 36M/470M&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
jmspaggi@buldo:~/workspace/hbase-0.94.11-SNAPSHOT$ &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;So we should be fine. Just ping me if there is anything I need to loop at, I will be happy to. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12597369" name="HBASE-9189-v0-0.94.patch" size="2308" author="jmspaggi" created="Sun, 11 Aug 2013 20:09:11 +0000"/>
                            <attachment id="12597388" name="HBASE-9189-v0-trunk.patch" size="2209" author="jmspaggi" created="Sun, 11 Aug 2013 22:42:06 +0000"/>
                            <attachment id="12597387" name="HBASE-9189-v1-0.94.patch" size="2079" author="jmspaggi" created="Sun, 11 Aug 2013 22:41:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 11 Aug 2013 20:34:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>343090</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 18 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1n61z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>343394</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>