<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:08:46 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-3265/HBASE-3265.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-3265] Regionservers waiting for ROOT while Master waiting for RegionServers</title>
                <link>https://issues.apache.org/jira/browse/HBASE-3265</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;After a cluster disastrophe due to a disconnected switch, I ended up in a state where the master was up with no region servers (see &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3263&quot; title=&quot;Stack overflow in AssignmentManager&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3263&quot;&gt;&lt;del&gt;HBASE-3263&lt;/del&gt;&lt;/a&gt;). When I brought the RS back up, because of the aforementioned bug, the master didn&apos;t get itself into a happy state (internal datastructure had some null in it). So I killed the master and started it again. Now, the master is in &quot;Waiting for region servers to check in&quot; mode, and the region servers are in the following stack:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;locked &amp;lt;0x00002aaab1bda5d0&amp;gt; (a org.apache.hadoop.hbase.zookeeper.RootRegionTracker)&lt;br/&gt;
        at org.apache.hadoop.hbase.catalog.CatalogTracker.waitForRoot(CatalogTracker.java:177)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegionServer.run(HRegionServer.java:537)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:619)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I imagine what happened is that the RS got through &quot;tryReportForDuty&quot; with the old master, but the old master was unable to assign anything due to bad state. So, when it crashed, all the RS were stuck in waitForRoot(), and when I brought the new one up, no one was reporting for duty.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12480650">HBASE-3265</key>
            <summary>Regionservers waiting for ROOT while Master waiting for RegionServers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stack">stack</assignee>
                                    <reporter username="tlipcon">Todd Lipcon</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Nov 2010 08:18:13 +0000</created>
                <updated>Fri, 20 Nov 2015 12:41:20 +0000</updated>
                            <resolved>Mon, 29 Nov 2010 22:31:16 +0000</resolved>
                                    <version>0.90.0</version>
                                    <fixVersion>0.90.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12934921" author="streamy" created="Tue, 23 Nov 2010 17:41:00 +0000"  >&lt;p&gt;The RSs should also be heartbeating in to the master as well.  Can you post full stack dumps from one of the stuck RS and the master?&lt;/p&gt;</comment>
                            <comment id="12935021" author="stack" created="Tue, 23 Nov 2010 20:11:26 +0000"  >&lt;p&gt;Bringing in for triage&lt;/p&gt;</comment>
                            <comment id="12964928" author="streamy" created="Mon, 29 Nov 2010 20:31:49 +0000"  >&lt;p&gt;I dug into this one and had a hard time understanding what was preventing the RS from heartbeating in.  I&apos;d need a stack dump to see what was up on that RS.  Otherwise not sure how to address this besides a larger overhaul of reconciling our two data points for RS availability (ZK ephemeral nodes and RPC heartbeats).&lt;/p&gt;</comment>
                            <comment id="12964957" author="stack" created="Mon, 29 Nov 2010 21:40:54 +0000"  >&lt;p&gt;Here is a suggestion &amp;#8211; don&apos;t have HRS hang waiting on ROOT location. &lt;/p&gt;</comment>
                            <comment id="12964960" author="streamy" created="Mon, 29 Nov 2010 21:54:51 +0000"  >&lt;p&gt;+1.  We need to handle root (un)availability whenever we actually use it, so there &lt;em&gt;should&lt;/em&gt; be no reason for this waitOnRoot.  I imagine it was there for a reason at some point but hopefully we&apos;ve removed the need for this check by handling it properly elsewhere.  grin.&lt;/p&gt;</comment>
                            <comment id="12964988" author="stack" created="Mon, 29 Nov 2010 22:31:16 +0000"  >&lt;p&gt;Ok. Committed to trunk and branch.  Lets see if removal breaks stuff elsewhere.&lt;/p&gt;</comment>
                            <comment id="15016948" author="lars_francke" created="Fri, 20 Nov 2015 12:41:20 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12464902" name="3265.patch" size="3747" author="stack" created="Mon, 29 Nov 2010 21:40:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 23 Nov 2010 17:41:00 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26747</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hlhr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>100744</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>