<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:57:14 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1891/HBASE-1891.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1891] Scanner is jumping a full cache of rows</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1891</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;I ran my program multiple times and this is happening almost all the time.&lt;/p&gt;

&lt;p&gt;Basically, the ResultScanner is skipping a full cache of rows. I set my caching size to 1000, and when I expect to see row 60000 it gave me 60999.&lt;/p&gt;

&lt;p&gt;My code (will attach here) is creating a new table with a single column family and qualifier, and then write 1 million rows with ascending keys, then immediately read them back to verify.&lt;/p&gt;


&lt;p&gt;The HBase code is from:&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/hbase/trunk&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/hbase/trunk&lt;/a&gt; at&lt;br/&gt;
Exported revision 821973.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12437460">HBASE-1891</key>
            <summary>Scanner is jumping a full cache of rows</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="amansk">Amandeep Khurana</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 Oct 2009 07:08:57 +0000</created>
                <updated>Thu, 5 May 2011 07:10:28 +0000</updated>
                            <resolved>Thu, 5 May 2011 07:10:28 +0000</resolved>
                                                                    <component>Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12762906" author="zshao" created="Wed, 7 Oct 2009 07:11:31 +0000"  >&lt;p&gt;This is the code.&lt;/p&gt;

&lt;p&gt;To run the code, compile it into a jar, add the jar to CLASSPATH, and start:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
bin/hbase com.example.hbase.Tester -rows 2000000 -length 100 -autoflush &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; -writebuffersize 250000 -caching 1000
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12763831" author="stack" created="Fri, 9 Oct 2009 04:33:46 +0000"  >&lt;p&gt;This looks bad.... let me check it out....&lt;/p&gt;</comment>
                            <comment id="12763843" author="zshao" created="Fri, 9 Oct 2009 05:02:12 +0000"  >&lt;p&gt;Thanks for helping out, stack! I really appreciate it.&lt;/p&gt;</comment>
                            <comment id="12764187" author="zshao" created="Fri, 9 Oct 2009 20:27:59 +0000"  >&lt;p&gt;Thanks Amandeep!&lt;br/&gt;
Actually the skip is one full cache less one rows - &quot;I set my caching size to 1000, and when I expect to see row 60000 it gave me 60999.&quot;.&lt;/p&gt;</comment>
                            <comment id="12764189" author="amansk" created="Fri, 9 Oct 2009 20:31:17 +0000"  >&lt;p&gt;Looking into it. I&apos;ll try to replicate it and see whats going on.&lt;/p&gt;</comment>
                            <comment id="12764358" author="stack" created="Sat, 10 Oct 2009 16:50:37 +0000"  >&lt;p&gt;I like your little Tester program Zheng.&lt;/p&gt;

&lt;p&gt;Help me out.   I think I figured how to use it.  After loading a table, I then ran it multiple times with following arguments:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-read &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; -caching 1000 -create &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; -write &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I keep doing it, multiple times, and I get this &amp;#8211; success &amp;#8211; every time it seems.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
09/10/10 09:46:51 DEBUG client.HTable$ClientScanner: Creating scanner over myLittleHBaseTable starting at key &apos;&apos;
09/10/10 09:46:51 DEBUG client.HTable$ClientScanner: Advancing internal scanner to startKey at &apos;&apos;
09/10/10 09:46:51 DEBUG client.HConnectionManager$TableServers: Cache hit &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; row &amp;lt;&amp;gt; in tableName myLittleHBaseTable: location server 192.168.1.149:61385, location region name myLittleHBaseTable,,1255192797711
09/10/10 09:46:52 INFO Tester: 152001 records/second
09/10/10 09:46:53 INFO Tester: 171502 records/second
09/10/10 09:46:54 INFO Tester: 149498 records/second
09/10/10 09:46:55 INFO Tester: 162000 records/second
09/10/10 09:46:56 INFO Tester: 195338 records/second
09/10/10 09:46:57 INFO Tester: 150662 records/second
09/10/10 09:46:57 DEBUG client.HTable$ClientScanner: Finished with scanning at REGION =&amp;gt; {NAME =&amp;gt; &apos;myLittleHBaseTable,,1255192797711&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;, ENCODED =&amp;gt; 684003008, TABLE =&amp;gt; {{NAME =&amp;gt; &apos;myLittleHBaseTable&apos;, FAMILIES =&amp;gt; [{NAME =&amp;gt; &apos;myLittleFamily&apos;, COMPRESSION =&amp;gt; &apos;NONE&apos;, VERSIONS =&amp;gt; &apos;3&apos;, TTL =&amp;gt; &apos;2147483647&apos;, BLOCKSIZE =&amp;gt; &apos;65536&apos;, IN_MEMORY =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&apos;, BLOCKCACHE =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&apos;}]}}
Data verified successfully!
Average speed: 158252 records/second
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I get same whether I run inside in eclipse or out on command line.&lt;/p&gt;

&lt;p&gt;I&apos;m on hbase trunk (r823874).&lt;/p&gt;</comment>
                            <comment id="12764359" author="stack" created="Sat, 10 Oct 2009 16:58:10 +0000"  >&lt;p&gt;I do not see any thing in the diff between my version and yours that would change behavior scanning.  Let me check the 0.20 branch of hbase.&lt;/p&gt;</comment>
                            <comment id="12764372" author="stack" created="Sat, 10 Oct 2009 20:01:09 +0000"  >&lt;p&gt;I tried it on head of 0.20 hbase branch but it doesn&apos;t seem to fail (I&apos;m doing a ~200k scans a second on my little mac os x laptop).  I&apos;m expecting it to do this if error: &quot;              System.err.println(&quot;Missing &quot; + expect + &quot; got &quot; + v + &quot; instead!&quot;);&quot;... is that right?&lt;/p&gt;</comment>
                            <comment id="12769708" author="stack" created="Sat, 24 Oct 2009 21:02:41 +0000"  >&lt;p&gt;You see this still Zheng?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12421495" name="Tester.java" size="11352" author="zshao" created="Wed, 7 Oct 2009 07:11:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 9 Oct 2009 04:33:46 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26043</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 8 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hfsv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99822</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>