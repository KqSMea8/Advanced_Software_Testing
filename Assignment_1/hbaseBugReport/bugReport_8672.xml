<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:57:26 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-8672/HBASE-8672.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-8672] Create an Integration test for Bulk Loads</title>
                <link>https://issues.apache.org/jira/browse/HBASE-8672</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Bulk loads and MR are not well tested using our IT tests.  We should add a test that bulk loads hfiles and then scans over the resulting table to make sure that all the data is there.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12650411">HBASE-8672</key>
            <summary>Create an Integration test for Bulk Loads</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="eclark">Elliott Clark</assignee>
                                    <reporter username="eclark">Elliott Clark</reporter>
                        <labels>
                    </labels>
                <created>Fri, 31 May 2013 22:44:54 +0000</created>
                <updated>Mon, 23 Sep 2013 19:22:37 +0000</updated>
                            <resolved>Tue, 11 Jun 2013 00:15:21 +0000</resolved>
                                    <version>0.98.0</version>
                    <version>0.95.1</version>
                                    <fixVersion>0.98.0</fixVersion>
                    <fixVersion>0.95.2</fixVersion>
                                    <component>regionserver</component>
                    <component>test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13671877" author="eclark" created="Fri, 31 May 2013 22:48:36 +0000"  >&lt;p&gt;Here&apos;s a path that should test bulk loads.&lt;/p&gt;

&lt;p&gt;It starts an MR job that creates linked chains&lt;/p&gt;


&lt;p&gt;The format of rows is like this:&lt;/p&gt;

&lt;p&gt;rk -&amp;gt; Long&lt;br/&gt;
d:&amp;lt;&amp;lt; Chain Id &amp;gt;&amp;gt; -&amp;gt; Random Data.&lt;br/&gt;
l:&amp;lt;&amp;lt; Chain Id &amp;gt;&amp;gt; -&amp;gt; Row Key of the next link in the chain&lt;br/&gt;
s:&amp;lt;&amp;lt; Chain Id &amp;gt;&amp;gt; -&amp;gt; The step in the chain that his link is.&lt;/p&gt;

&lt;p&gt;All chains start on row 0.&lt;/p&gt;

&lt;p&gt;So we create these chains and then walk over them in an MR job.&lt;/p&gt;</comment>
                            <comment id="13674681" author="eclark" created="Tue, 4 Jun 2013 18:35:04 +0000"  >&lt;ul&gt;
	&lt;li&gt;Added lots of java doc comments.&lt;/li&gt;
	&lt;li&gt;Added a delete table to the initial setup to allow running this repeatedly on the same cluster.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13675164" author="aleksshulman" created="Tue, 4 Jun 2013 20:00:47 +0000"  >&lt;p&gt;First read of the patch looks good. Will take a second look shortly.&lt;/p&gt;</comment>
                            <comment id="13675169" author="mbertozzi" created="Tue, 4 Jun 2013 20:04:33 +0000"  >&lt;p&gt;+1, v1 looks good to me&lt;/p&gt;</comment>
                            <comment id="13675178" author="eclark" created="Tue, 4 Jun 2013 20:12:27 +0000"  >&lt;p&gt;Version that should work with security.&lt;/p&gt;

&lt;p&gt;Thanks for the reviews.&lt;/p&gt;</comment>
                            <comment id="13675204" author="ndimiduk" created="Tue, 4 Jun 2013 20:32:11 +0000"  >&lt;p&gt;IntegrationTestBulkLoad.java is missing the license header.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+          if (lc.getRk() != 0l) throw new RuntimeException(&quot;Chains should all start at 0 rk&quot;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;nit: use &apos;0L&apos; instead of &apos;0l&apos; which looks a lot like &apos;01&apos;.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+    conf.setStrings(&quot;io.serializations&quot;, conf.get(&quot;io.serializations&quot;),
+        KeyValueSerialization.class.getName());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Why does this become necessary (or, rather, why wasn&apos;t it necessary before)?&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+
+    void setFirstRow(byte[] userInput);
+
+    void setLastRow(byte[] userInput);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;nit: please javadoc interface methods.&lt;/p&gt;</comment>
                            <comment id="13675206" author="ndimiduk" created="Tue, 4 Jun 2013 20:33:13 +0000"  >&lt;p&gt;Looks like a nice addition, Elliott. Once you get this merged, would you mind adding launch instructions and any relevant parameters to the release notes?&lt;/p&gt;</comment>
                            <comment id="13675260" author="eclark" created="Tue, 4 Jun 2013 21:19:00 +0000"  >&lt;ul&gt;
	&lt;li&gt;Changed 0l -&amp;gt; 0L&lt;/li&gt;
	&lt;li&gt;Added header&lt;/li&gt;
	&lt;li&gt;Moved initCredentials to HFileOutputFormat.configureIncrementalLoad&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Not sure why the io serializations weren&apos;t there before.  Outputing KeyValues null pointers for me without it.  Maybe everyone was just adding that during testing ?&lt;/p&gt;</comment>
                            <comment id="13675325" author="aleksshulman" created="Tue, 4 Jun 2013 22:04:55 +0000"  >&lt;p&gt;Minor issue &amp;#8211; in &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;runLinkedListMRJob(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; iteration)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;, your delete comes at the end of the function. Should there be an issue and the test fails, it will not reach that point and there will be leftover cruft that could affect other tests. One way to get around this is to use a try-catch-finally (or just try-finally) pattern, with the deletion being in the &apos;finally&apos; portion. &lt;/p&gt;

&lt;p&gt;Granted, you only have one test, but if you write more, or if you run this on an actual cluster, cleanup becomes important.&lt;/p&gt;</comment>
                            <comment id="13675328" author="ndimiduk" created="Tue, 4 Jun 2013 22:05:14 +0000"  >&lt;blockquote&gt;&lt;p&gt;Not sure why the io serializations weren&apos;t there before. Outputing KeyValues null pointers for me without it. Maybe everyone was just adding that during testing ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Very strange indeed. Does TableOutputFormat suffer the same pain? Perhaps this can be set in TableMapReduceUtils instead of on a per-output formatter basis? I wonder if this is related to the refactoring &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; was doing around these interfaces?&lt;/p&gt;

&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13675374" author="eclark" created="Tue, 4 Jun 2013 22:49:43 +0000"  >&lt;p&gt;Added a timestamp to the path name so left over files can be correlated to error&apos;s in tests.&lt;/p&gt;</comment>
                            <comment id="13675387" author="eclark" created="Tue, 4 Jun 2013 22:56:20 +0000"  >&lt;blockquote&gt;&lt;p&gt;Does TableOutputFormat suffer the same pain?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;TableOutputFormat adds a serializer for mutations.&lt;/p&gt;</comment>
                            <comment id="13675457" author="enis" created="Wed, 5 Jun 2013 00:13:34 +0000"  >&lt;p&gt;+1. Skimmed the patch looks great. Can you add your first comment to the class javadoc so that users do not have to read this jira or whole code. &lt;/p&gt;</comment>
                            <comment id="13679967" author="eclark" created="Mon, 10 Jun 2013 22:03:14 +0000"  >&lt;p&gt;Here&apos;s what I&apos;m planning to commit soon.  It has an expanded Javadoc like Enis was asking for.&lt;/p&gt;</comment>
                            <comment id="13680078" author="eclark" created="Tue, 11 Jun 2013 00:15:21 +0000"  >&lt;p&gt;Committed revision 1491657.&lt;/p&gt;</comment>
                            <comment id="13680168" author="hudson" created="Tue, 11 Jun 2013 03:14:11 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #4171 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4171/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4171/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8672&quot; title=&quot;Create an Integration test for Bulk Loads&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8672&quot;&gt;&lt;del&gt;HBASE-8672&lt;/del&gt;&lt;/a&gt; Create an Integration test for Bulk Loads (Revision 1491656)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
eclark : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-it/src/test/java/org/apache/hadoop/hbase/mapreduce/IntegrationTestBulkLoad.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/HFileOutputFormat.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/util/RegionSplitter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13680184" author="hudson" created="Tue, 11 Jun 2013 03:38:37 +0000"  >&lt;p&gt;Integrated in hbase-0.95 #235 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95/235/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95/235/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8672&quot; title=&quot;Create an Integration test for Bulk Loads&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8672&quot;&gt;&lt;del&gt;HBASE-8672&lt;/del&gt;&lt;/a&gt; Create an Integration test for Bulk Loads (Revision 1491657)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
eclark : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-it/src/test/java/org/apache/hadoop/hbase/mapreduce/IntegrationTestBulkLoad.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/HFileOutputFormat.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/util/RegionSplitter.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12585680" name="HBASE-8672-0.patch" size="20170" author="eclark" created="Fri, 31 May 2013 22:48:36 +0000"/>
                            <attachment id="12586144" name="HBASE-8672-1.patch" size="22577" author="eclark" created="Tue, 4 Jun 2013 18:35:04 +0000"/>
                            <attachment id="12586165" name="HBASE-8672-2.patch" size="23089" author="eclark" created="Tue, 4 Jun 2013 20:12:27 +0000"/>
                            <attachment id="12586177" name="HBASE-8672-3.patch" size="24176" author="eclark" created="Tue, 4 Jun 2013 21:19:00 +0000"/>
                            <attachment id="12586213" name="HBASE-8672-4.patch" size="24442" author="eclark" created="Tue, 4 Jun 2013 22:49:43 +0000"/>
                            <attachment id="12587141" name="HBASE-8672-5.patch" size="25357" author="eclark" created="Mon, 10 Jun 2013 22:03:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 4 Jun 2013 20:00:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>330738</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 27 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1l253:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>331071</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>