<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:09:19 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-3331/HBASE-3331.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-3331] Kill -STOP of RS hosting META does not recover</title>
                <link>https://issues.apache.org/jira/browse/HBASE-3331</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;If you find the server hosting META and kill -STOP its region server, it will eventually lose its ZK session and the master will split its logs and try to reassign. However, at some point along here it tries to access the old META, and gets SocketTimeoutExceptions, which cause it to keep retrying forever. Once I kill -9ed the stopped server, things came back to life.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12492957">HBASE-3331</key>
            <summary>Kill -STOP of RS hosting META does not recover</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tlipcon">Todd Lipcon</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Dec 2010 16:59:51 +0000</created>
                <updated>Fri, 20 Nov 2015 12:41:58 +0000</updated>
                            <resolved>Wed, 10 Aug 2011 02:40:07 +0000</resolved>
                                    <version>0.90.0</version>
                                    <fixVersion>0.92.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12970320" author="stack" created="Fri, 10 Dec 2010 21:40:56 +0000"  >&lt;p&gt;Bringing it into 0.90.0 so I can take a look at it. This case should work.  The server shutdown knows which server had .META. and will not try scanning .META. to find down&apos;d servers regions if the server hosting .META. is the one we are processing.   So need to see whats up here.  Jon has said in the past that we should use our in-memory state rather than go to .META. but thats awkward to do IIRC given current structures.  Let me look at that again.&lt;/p&gt;</comment>
                            <comment id="12995592" author="tlipcon" created="Wed, 16 Feb 2011 23:58:54 +0000"  >&lt;p&gt;This is still true as of 0.90.1&lt;/p&gt;</comment>
                            <comment id="13082090" author="mingma" created="Wed, 10 Aug 2011 01:53:56 +0000"  >&lt;p&gt;I tested it couple times on trunk. Couldn&apos;t repro it. The system will recover in couple minutes.&lt;/p&gt;</comment>
                            <comment id="13082108" author="tlipcon" created="Wed, 10 Aug 2011 02:40:07 +0000"  >&lt;p&gt;Thanks for trying to reproduce, Ming. I&apos;ll resolve it as Cannot Reproduce.&lt;/p&gt;</comment>
                            <comment id="13090844" author="sudhan65" created="Thu, 25 Aug 2011 07:29:10 +0000"  >&lt;p&gt;I am facing this issue in 0.90.1 version. I have two servers in my test environment with one server hosting both master and regionserver and the other only regionserver. HBase manages the ZK. The quorum contains both these servers. Both the ROOT and the META regions are on one of my region server. If that regionserver is stopped/killed the master web page does not come up and throws Connection Refused on attempting to conatct the region server. The master server logs seems to be more related to the ROOT region though. Should I open a new issue?&lt;/p&gt;



&lt;p&gt;2011-08-25 12:50:23,531 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: locateRegionInMeta parentTable=&lt;del&gt;ROOT&lt;/del&gt;, metaLocation=address: &amp;lt;&amp;lt;server&amp;gt;&amp;gt;:60020, regioninfo: &lt;del&gt;ROOT&lt;/del&gt;,,0.70236052, attempt=8 of 10 failed; retrying after sleep of 16000 because: Connection refused&lt;br/&gt;
2011-08-25 12:50:23,531 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: Lookedup root region location, connection=org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation@62135133; hsa=&amp;lt;&amp;lt;server&amp;gt;&amp;gt;:60020&lt;br/&gt;
2011-08-25 12:50:39,531 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: Lookedup root region location, connection=org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation@62135133; hsa=&amp;lt;&amp;lt;server&amp;gt;&amp;gt;:60020&lt;br/&gt;
2011-08-25 12:50:39,532 WARN org.mortbay.log: /master.jsp: org.apache.hadoop.hbase.client.RetriesExhaustedException: Trying to contact region server null for region , row &apos;&apos;, but failed after 10 attempts.&lt;br/&gt;
Exceptions:&lt;br/&gt;
java.net.ConnectException: Connection refused&lt;/p&gt;</comment>
                            <comment id="13090942" author="sudhan65" created="Thu, 25 Aug 2011 11:19:27 +0000"  >&lt;p&gt;Its more related to the META region only. Followimg debug info is printed before throwing exception&lt;/p&gt;


&lt;p&gt;2011-08-25 12:46:52,443 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: locateRegionInMeta parentTable=&lt;del&gt;ROOT&lt;/del&gt;, metaLocation=address: sb6270x1664:60020, regioninfo: &lt;del&gt;ROOT&lt;/del&gt;,,0.70236052, attempt=0 of 10 failed; retrying after sleep of 1000 because: Connection refused&lt;/p&gt;</comment>
                            <comment id="13092182" author="stack" created="Sat, 27 Aug 2011 03:38:26 +0000"  >&lt;p&gt;webui needs to be able to scan root/meta to show whats in them.  the ui will come back after the root and meta come back up on line again (There will be connection refused until the regions get redeployed).  I&apos;m not sure we work so we well w/ two servers only.  Does it ever come back?&lt;/p&gt;</comment>
                            <comment id="13092754" author="sudhan65" created="Mon, 29 Aug 2011 10:40:32 +0000"  >&lt;p&gt;Thanks. Yes. It came back after a while. Will raise a different issue if seen again.&lt;/p&gt;</comment>
                            <comment id="13092786" author="ram_krish" created="Mon, 29 Aug 2011 11:54:55 +0000"  >&lt;p&gt;@Sudharsan&lt;br/&gt;
Pls check if the ROOT and META is assigned completely and the znode corresponding to META is deleted.&lt;br/&gt;
Otherwise the scenario could be as in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4203&quot; title=&quot;While master restarts and if the META region&amp;#39;s state is OPENING then master cannot assign META until timeout monitor deducts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4203&quot;&gt;&lt;del&gt;HBASE-4203&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15017124" author="lars_francke" created="Fri, 20 Nov 2015 12:41:58 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12466006" name="timeouts.log.txt" size="14135" author="tlipcon" created="Fri, 10 Dec 2010 18:05:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 10 Dec 2010 21:40:56 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26788</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hls7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>100791</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>