<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:17:09 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-4238/HBASE-4238.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-4238] CatalogJanitor can clear a daughter that split before processing its parent</title>
                <link>https://issues.apache.org/jira/browse/HBASE-4238</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;I didn&apos;t dig a lot into this issue, but by splitting a table twice in a row I was able to trigger a situation where a daughter of the first split was deleted by the CatalogJanitor before it processed its parent. Will post log in a comment.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12519744">HBASE-4238</key>
            <summary>CatalogJanitor can clear a daughter that split before processing its parent</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stack">stack</assignee>
                                    <reporter username="jdcryans">Jean-Daniel Cryans</reporter>
                        <labels>
                    </labels>
                <created>Mon, 22 Aug 2011 22:33:59 +0000</created>
                <updated>Fri, 20 Nov 2015 11:55:05 +0000</updated>
                            <resolved>Tue, 13 Sep 2011 19:13:09 +0000</resolved>
                                    <version>0.90.4</version>
                                    <fixVersion>0.90.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13089099" author="jdcryans" created="Mon, 22 Aug 2011 22:35:07 +0000"  >&lt;p&gt;Log of the issue (daughter region being d06b3b8c85af53ccbe139df7f0877e51):&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;2011-08-22 15:06:50,227 INFO org.apache.hadoop.hbase.catalog.MetaEditor: Deleted daughter reference TestTable,,1314050587746.7ada9de242de30a4e91f00a8dfcbf693., qualifier=splitA, from parent TestTable,,1314050584480.d06b3b8c85af53ccbe139df7f0877e51.&lt;br/&gt;
2011-08-22 15:06:50,229 INFO org.apache.hadoop.hbase.catalog.MetaEditor: Deleted daughter reference TestTable,0000013824,1314050587746.66c3c9f067203cfb7c0a541e9207766d., qualifier=splitB, from parent TestTable,,1314050584480.d06b3b8c85af53ccbe139df7f0877e51.&lt;br/&gt;
2011-08-22 15:06:50,230 DEBUG org.apache.hadoop.hbase.master.CatalogJanitor: Deleting region TestTable,,1314050584480.d06b3b8c85af53ccbe139df7f0877e51. because daughter splits no longer hold references&lt;br/&gt;
2011-08-22 15:06:50,230 DEBUG org.apache.hadoop.hbase.regionserver.HRegion: DELETING region &lt;a href=&quot;file:/tmp/hbase-jdcryans/hbase/TestTable/d06b3b8c85af53ccbe139df7f0877e51&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/tmp/hbase-jdcryans/hbase/TestTable/d06b3b8c85af53ccbe139df7f0877e51&lt;/a&gt;&lt;br/&gt;
2011-08-22 15:06:50,234 INFO org.apache.hadoop.hbase.catalog.MetaEditor: Deleted region TestTable,,1314050584480.d06b3b8c85af53ccbe139df7f0877e51. from META&lt;br/&gt;
2011-08-22 15:06:50,235 WARN org.apache.hadoop.hbase.master.CatalogJanitor: Daughter regiondir does not exist: &lt;a href=&quot;file:/tmp/hbase-jdcryans/hbase/TestTable/d06b3b8c85af53ccbe139df7f0877e51&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/tmp/hbase-jdcryans/hbase/TestTable/d06b3b8c85af53ccbe139df7f0877e51&lt;/a&gt;&lt;br/&gt;
2011-08-22 15:11:50,220 WARN org.apache.hadoop.hbase.master.CatalogJanitor: Daughter regiondir does not exist: &lt;a href=&quot;file:/tmp/hbase-jdcryans/hbase/TestTable/d06b3b8c85af53ccbe139df7f0877e51&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/tmp/hbase-jdcryans/hbase/TestTable/d06b3b8c85af53ccbe139df7f0877e51&lt;/a&gt;&lt;br/&gt;
2011-08-22 15:16:50,224 WARN org.apache.hadoop.hbase.master.CatalogJanitor: Daughter regiondir does not exist: &lt;a href=&quot;file:/tmp/hbase-jdcryans/hbase/TestTable/d06b3b8c85af53ccbe139df7f0877e51&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/tmp/hbase-jdcryans/hbase/TestTable/d06b3b8c85af53ccbe139df7f0877e51&lt;/a&gt;&lt;br/&gt;
...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Those last lines will happen forever, and .META. will be littered with that row.&lt;/p&gt;</comment>
                            <comment id="13091419" author="jdcryans" created="Thu, 25 Aug 2011 23:31:31 +0000"  >&lt;p&gt;Another way this problem appears is if the 2 daughters are removed from parent and one of them was split and already cleaned before the CJ went to delete the parent, this will fail (CJ.cleanParent):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ((a.getFirst() &amp;amp;&amp;amp; !a.getSecond()) &amp;amp;&amp;amp; (b.getFirst() &amp;amp;&amp;amp; !b.getSecond())) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here we check if the directory of each daughter exists and if they don&apos;t have a reference. In my case, they don&apos;t exist since they were already cleaned, which means that the parent will &lt;em&gt;never&lt;/em&gt; get cleaned.&lt;/p&gt;</comment>
                            <comment id="13103181" author="stack" created="Mon, 12 Sep 2011 23:38:06 +0000"  >&lt;p&gt;Not finished yet.  Needs more tests.&lt;/p&gt;</comment>
                            <comment id="13103403" author="stack" created="Tue, 13 Sep 2011 06:41:32 +0000"  >&lt;p&gt;Submitting patch.  Review J-D?&lt;/p&gt;</comment>
                            <comment id="13103404" author="jiraposter@reviews.apache.org" created="Tue, 13 Sep 2011 06:42:08 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1819/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1819/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hbase.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Previous, we&apos;d not clean up a parent if its daughter region didn&apos;t exist in the fs.  This stipulation was added by &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3872&quot; title=&quot;Hole in split transaction rollback; edits to .META. need to be rolled back even if it seems like they didn&amp;#39;t make it&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3872&quot;&gt;&lt;del&gt;HBASE-3872&lt;/del&gt;&lt;/a&gt;.  This patch undoes this barrier to parent cleanup (See  &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3872&quot; title=&quot;Hole in split transaction rollback; edits to .META. need to be rolled back even if it seems like they didn&amp;#39;t make it&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3872&quot;&gt;&lt;del&gt;HBASE-3872&lt;/del&gt;&lt;/a&gt; for why its ok to do this).&lt;/p&gt;

&lt;p&gt;CatalogJanitor&lt;/p&gt;

&lt;p&gt;+ Break out the Comparator used by CatalogJanitor.  It was an anonymous class.  Instead we make it a static inner class so can add test that its actually sorting properly.&lt;br/&gt;
+ Added method hasNoReferences that will return true if no daughter dir OR no refs in daughter dir&lt;/p&gt;

&lt;p&gt;Added some TODOs around SplitTransaction &amp;#8211; vaguely related to this patch.&lt;/p&gt;

&lt;p&gt;Added new Test that checks cleanParent to ensure it works properly.  Refactored bits of previous tests so they use common code.&lt;/p&gt;


&lt;p&gt;This addresses bug hbase-4238.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/hbase-4238&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/hbase-4238&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  src/main/java/org/apache/hadoop/hbase/master/CatalogJanitor.java b53e9a0 &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/master/handler/ServerShutdownHandler.java 742aea4 &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/SplitTransaction.java abafe5e &lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/master/TestCatalogJanitor.java 78e7d62 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1819/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1819/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Michael&lt;/p&gt;
</comment>
                            <comment id="13103875" author="jiraposter@reviews.apache.org" created="Tue, 13 Sep 2011 18:33:08 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1819/#review1876&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1819/#review1876&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Ship it!&lt;/p&gt;


&lt;p&gt;+1&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Jean-Daniel&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-09-13 06:41:15, Michael Stack wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/1819/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1819/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-09-13 06:41:15)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hbase.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Previous, we&apos;d not clean up a parent if its daughter region didn&apos;t exist in the fs.  This stipulation was added by &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3872&quot; title=&quot;Hole in split transaction rollback; edits to .META. need to be rolled back even if it seems like they didn&amp;#39;t make it&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3872&quot;&gt;&lt;del&gt;HBASE-3872&lt;/del&gt;&lt;/a&gt;.  This patch undoes this barrier to parent cleanup (See  &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3872&quot; title=&quot;Hole in split transaction rollback; edits to .META. need to be rolled back even if it seems like they didn&amp;#39;t make it&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3872&quot;&gt;&lt;del&gt;HBASE-3872&lt;/del&gt;&lt;/a&gt; for why its ok to do this).&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;CatalogJanitor&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;+ Break out the Comparator used by CatalogJanitor.  It was an anonymous class.  Instead we make it a static inner class so can add test that its actually sorting properly.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;+ Added method hasNoReferences that will return true if no daughter dir OR no refs in daughter dir&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Added some TODOs around SplitTransaction &amp;#8211; vaguely related to this patch.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Added new Test that checks cleanParent to ensure it works properly.  Refactored bits of previous tests so they use common code.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug hbase-4238.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/hbase-4238&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/hbase-4238&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;src/main/java/org/apache/hadoop/hbase/master/CatalogJanitor.java b53e9a0 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;src/main/java/org/apache/hadoop/hbase/master/handler/ServerShutdownHandler.java 742aea4 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;src/main/java/org/apache/hadoop/hbase/regionserver/SplitTransaction.java abafe5e &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;src/test/java/org/apache/hadoop/hbase/master/TestCatalogJanitor.java 78e7d62 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1819/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1819/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Michael&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13103915" author="stack" created="Tue, 13 Sep 2011 19:13:09 +0000"  >&lt;p&gt;Committed to trunk and branch (didn&apos;t add test to branch because wouldn&apos;t apply &amp;#8211; uses TRUNK stuff like ServerName)&lt;/p&gt;</comment>
                            <comment id="13104020" author="hudson" created="Tue, 13 Sep 2011 21:46:29 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2205 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2205/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2205/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4238&quot; title=&quot;CatalogJanitor can clear a daughter that split before processing its parent&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4238&quot;&gt;&lt;del&gt;HBASE-4238&lt;/del&gt;&lt;/a&gt; CatalogJanitor can clear a daughter that split before processing its parent&lt;/p&gt;

&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/CatalogJanitor.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/handler/ServerShutdownHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/SplitTransaction.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/master/TestCatalogJanitor.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13105849" author="ram_krish" created="Fri, 16 Sep 2011 04:36:46 +0000"  >&lt;p&gt;@Stack&lt;br/&gt;
TestCatalogJanitor.testCleanParent is failing in 0.90.x.  In trunk &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    assertTrue(fs.delete(p, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;));
    &lt;span class=&quot;code-comment&quot;&gt;// We will fail!!! Because split b is empty, which is right... we should
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// not remove parent &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; daughters &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; not exist in fs.
&lt;/span&gt;    assertFalse(janitor.cleanParent(parent, r));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;this part of code has been removed whereas in 0.90 it is not.&lt;/p&gt;</comment>
                            <comment id="13105852" author="ram_krish" created="Fri, 16 Sep 2011 04:38:43 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-    &lt;span class=&quot;code-comment&quot;&gt;// We will fail!!! Because split b is empty, which is right... we should
&lt;/span&gt;-    &lt;span class=&quot;code-comment&quot;&gt;// not remove parent &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; daughters &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; not exist in fs.
&lt;/span&gt;-    assertFalse(janitor.cleanParent(parent, r));
-    &lt;span class=&quot;code-comment&quot;&gt;// Put in place daughter dir &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; b... that should make it so parent gets
&lt;/span&gt;-    &lt;span class=&quot;code-comment&quot;&gt;// cleaned up.
&lt;/span&gt;-    storedir = Store.getStoreHomedir(tabledir, splitb.getEncodedName(),
-      htd.getColumnFamilies()[0].getName());

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This part of code is removed.  Not the one in the previous comment. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13105855" author="stack" created="Fri, 16 Sep 2011 04:49:47 +0000"  >&lt;p&gt;Let me fix.  Thanks for finding this Ram.&lt;/p&gt;</comment>
                            <comment id="15016394" author="lars_francke" created="Fri, 20 Nov 2015 11:55:05 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12549583">HBASE-5719</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12494191" name="4238-v2.txt" size="19591" author="stack" created="Tue, 13 Sep 2011 06:34:03 +0000"/>
                            <attachment id="12494149" name="4238.txt" size="14832" author="stack" created="Mon, 12 Sep 2011 23:38:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 12 Sep 2011 23:38:06 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>27230</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hq13:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>101479</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>