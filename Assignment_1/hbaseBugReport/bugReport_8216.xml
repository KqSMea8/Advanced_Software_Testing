<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:53:08 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-8216/HBASE-8216.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-8216] Be able to differentiate Power failures from Rack switch reboot</title>
                <link>https://issues.apache.org/jira/browse/HBASE-8216</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The master in 0.89-fb waits for 5-6 mins to check if RS&apos;es become accessible; when it sees a co-related failure such as a rack-switch-reboot.&lt;/p&gt;

&lt;p&gt;The rationale behind doing this is that it is not worth assigning and reassigning regions &amp;#8211; causing churn, when the rack switch reboots are expected to heal themselves in 5-6 mins. In earlier deployments, where this feature was not present, we used to find ourselves in a bad situation for 30mins-1hr.&lt;/p&gt;

&lt;p&gt;However, co-related failures also happen when there is a power failure for the rack. These cases take much longer to heal; so waiting for 5-6 mins is a wasted effort.&lt;/p&gt;

&lt;p&gt;The master should be able to differentiate the two scenario, by checking if &lt;b&gt;any&lt;/b&gt; of the RS in the rack is able to communicate. Unless all the servers in the rack are unaccessible, we should proceed with reassigning the regions.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12639658">HBASE-8216</key>
            <summary>Be able to differentiate Power failures from Rack switch reboot</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="amitanand">Amitanand Aiyer</assignee>
                                    <reporter username="amitanand">Amitanand Aiyer</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Mar 2013 18:54:08 +0000</created>
                <updated>Fri, 5 Apr 2013 17:33:20 +0000</updated>
                            <resolved>Thu, 28 Mar 2013 18:59:35 +0000</resolved>
                                                    <fixVersion>0.89-fb</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13616662" author="amitanand" created="Thu, 28 Mar 2013 21:16:10 +0000"  >&lt;p&gt;this change needs hbase.region.server.missed.report.max.expired.per.rack to be set to the # of servers in the rack. So that if anything less than the number is unaccessible, we will not wait for them to come back.&lt;/p&gt;</comment>
                            <comment id="13616710" author="nkeywal" created="Thu, 28 Mar 2013 22:03:58 +0000"  >&lt;p&gt;Do you do something similar at the HDFS level?&lt;/p&gt;</comment>
                            <comment id="13616724" author="amitanand" created="Thu, 28 Mar 2013 22:14:10 +0000"  >&lt;p&gt;The HDFS timeouts are much longer in comparision to HBase (abt 10 mins) so we don&apos;t do anything special there.&lt;/p&gt;

&lt;p&gt;However, if there is no heartbeat from a certain node(s) long enough, they get put at the bottom of the preference list to access data from.&lt;/p&gt;</comment>
                            <comment id="13616739" author="nkeywal" created="Thu, 28 Mar 2013 22:26:01 +0000"  >&lt;p&gt;Ok, thanks for the info!&lt;/p&gt;</comment>
                            <comment id="13617375" author="jmspaggi" created="Fri, 29 Mar 2013 14:28:38 +0000"  >&lt;p&gt;Should we display a warning on the initialization phase if hbase.region.server.missed.report.max.expired.per.rack is not setup since this patch is expecting it to be there?&lt;/p&gt;</comment>
                            <comment id="13623821" author="amitanand" created="Fri, 5 Apr 2013 17:29:24 +0000"  >&lt;p&gt;The diff can be found at:&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=r1462571&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=r1462571&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13623823" author="amitanand" created="Fri, 5 Apr 2013 17:33:20 +0000"  >&lt;p&gt;@Jean-Marc If the code doesn&apos;t find hbase.region.server.missed.report.max.expired.per.rack , it will assume a default value of 1. This will make it consider any failures of 2 or more machines as a collective failures; and it will wait for the znode to expire, before processing the region servers as dead.&lt;/p&gt;

&lt;p&gt;This is not necessarily a problem. (in fact, this used to be the setting we had earlier). But, is sub-optimal because power failures/partial-rack failures will be treated as a rack switch reboot; delaying the region assignment by 7-10 mins.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12551766">HBASE-5843</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12575934" name="hbase-8216.diff" size="5513" author="amitanand" created="Thu, 28 Mar 2013 19:36:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 28 Mar 2013 22:03:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>320127</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 37 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1j8hj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>320468</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>