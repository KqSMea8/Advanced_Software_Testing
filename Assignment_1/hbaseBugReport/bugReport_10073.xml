<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:10:14 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-10073/HBASE-10073.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-10073] Revert HBASE-9718 (Add a test scope dependency on org.slf4j:slf4j-api to hbase-client)</title>
                <link>https://issues.apache.org/jira/browse/HBASE-10073</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Observed behavior:&lt;br/&gt;
In my automation, I have a call to hbase zkcli. That call recently broke with this checkin: &lt;a href=&quot;https://github.com/apache/hbase/commit/5af0a60efed91ac2084f25f13edb21db0f510e7c&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hbase/commit/5af0a60efed91ac2084f25f13edb21db0f510e7c&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The error that is reported is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;++ ./hbase zkcli
11:19:58  Warning: $HADOOP_HOME is deprecated.
11:19:58  
11:20:00  Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.lang.IllegalAccessError: tried to access field org.slf4j.impl.StaticLoggerBinder.SINGLETON from class org.slf4j.LoggerFactory
11:20:00  	at org.slf4j.LoggerFactory.&amp;lt;clinit&amp;gt;(LoggerFactory.java:60)
11:20:00  	at org.apache.zookeeper.ZooKeeperMain.&amp;lt;clinit&amp;gt;(ZooKeeperMain.java:50)
11:20:00  	at org.apache.hadoop.hbase.zookeeper.ZooKeeperMainServer.main(ZooKeeperMainServer.java:78)
11:20:00  Build step &apos;Execute shell&apos; marked build as failure&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That said, this checkin is perfectly valid as each component should be allowed to specify its own dependencies.&lt;/p&gt;

&lt;p&gt;The issue is a deeper one of dependency mismatches.&lt;/p&gt;

&lt;p&gt;Note: This issue only affects hadoop1, not hadoop2. It also appears in trunk, where there is a similar checkin, but since trunk is not required to work against hadoop1, this is not an issue for trunk.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Centos6, sun-jdk-64bit-1.7.0.25&lt;/p&gt;</environment>
        <key id="12682505">HBASE-10073</key>
            <summary>Revert HBASE-9718 (Add a test scope dependency on org.slf4j:slf4j-api to hbase-client)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="apurtell">Andrew Purtell</assignee>
                                    <reporter username="aleksshulman">Aleksandr Shulman</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Dec 2013 20:11:02 +0000</created>
                <updated>Mon, 16 Dec 2013 18:46:54 +0000</updated>
                            <resolved>Fri, 6 Dec 2013 07:42:28 +0000</resolved>
                                    <version>0.96.1</version>
                                    <fixVersion>0.98.0</fixVersion>
                    <fixVersion>0.96.1</fixVersion>
                    <fixVersion>0.99.0</fixVersion>
                                    <component>Zookeeper</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13840904" author="aleksshulman" created="Fri, 6 Dec 2013 03:11:35 +0000"  >&lt;p&gt;Assigned to Andrew Purtell to have a look, since he is the author of the patch. The patch itself is not incorrect, but reveals a larger issue of maintaining compatibility and harmony among the dependencies.&lt;/p&gt;</comment>
                            <comment id="13840960" author="apurtell" created="Fri, 6 Dec 2013 04:27:04 +0000"  >&lt;p&gt;Do we care about calling zkcli from with HBase? Should ZK users call ZK CLI from their separate ZK install?&lt;/p&gt;

&lt;p&gt;How about removing &apos;./bin/hbase zkcli&apos;?&lt;/p&gt;</comment>
                            <comment id="13840981" author="apurtell" created="Fri, 6 Dec 2013 04:54:55 +0000"  >&lt;p&gt;Attached a patch that reverts the change to the hbase-client POM and adds a warning that &apos;hbase zkcli&apos; is deprecated and will be removed. Another patch to actually remove this from 0.98 and trunk forthcoming.&lt;/p&gt;</comment>
                            <comment id="13841014" author="aleksshulman" created="Fri, 6 Dec 2013 06:08:46 +0000"  >&lt;p&gt;I think the problem runs a little deeper. If there are two versions of slf4j (or any dependency for that matter) on the classpath, then something will be affected by a resulting incompatibility. Because of changes in the ordering of the classpath in 0.96, I had to make some changes to my own setup scripts. Both configurations one could consider reasonable or representative of what a common user would do. &lt;/p&gt;

&lt;p&gt;Before my change, I reported this issue.&lt;br/&gt;
After the change, hbase zkcli works fine, but there is a similar error now when starting master (much worse!). The revert you are suggesting may fix it though. I&apos;ll test it.&lt;/p&gt;

&lt;p&gt;Here&apos;s the master startup error:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;21:53:54  2013-12-05 21:53:40,596 INFO  [main] impl.MetricsSourceAdapter: MBean &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; source jvm registered.
21:53:54  2013-12-05 21:53:40,604 INFO  [main] impl.MetricsSourceAdapter: MBean &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; source IPC,sub=IPC registered.
21:53:54  2013-12-05 21:53:41,250 INFO  [main] impl.MetricsSourceAdapter: MBean &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; source ugi registered.
21:53:54  2013-12-05 21:53:41,628 INFO  [main] master.HMaster: hbase.rootdir=hdfs:&lt;span class=&quot;code-comment&quot;&gt;//snapshot-tarball-vm-6.ent.cloudera.com:8020/hbase, hbase.cluster.distributed=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
&lt;/span&gt;21:53:54  2013-12-05 21:53:41,758 ERROR [main] master.HMasterCommandLine: Master exiting
21:53:54  java.lang.RuntimeException: Failed construction of Master: class org.apache.hadoop.hbase.master.HMaster
21:53:54  	at org.apache.hadoop.hbase.master.HMaster.constructMaster(HMaster.java:2779)
21:53:54  	at org.apache.hadoop.hbase.master.HMasterCommandLine.startMaster(HMasterCommandLine.java:184)
21:53:54  	at org.apache.hadoop.hbase.master.HMasterCommandLine.run(HMasterCommandLine.java:134)
21:53:54  	at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
21:53:54  	at org.apache.hadoop.hbase.util.ServerCommandLine.doMain(ServerCommandLine.java:126)
21:53:54  	at org.apache.hadoop.hbase.master.HMaster.main(HMaster.java:2793)
21:53:54  Caused by: java.lang.IllegalAccessError: tried to access field org.slf4j.impl.StaticLoggerBinder.SINGLETON from class org.slf4j.LoggerFactory
21:53:54  	at org.slf4j.LoggerFactory.&amp;lt;clinit&amp;gt;(LoggerFactory.java:60)
21:53:54  	at org.apache.zookeeper.ZooKeeper.&amp;lt;clinit&amp;gt;(ZooKeeper.java:94)
21:53:54  	at org.apache.hadoop.hbase.zookeeper.RecoverableZooKeeper.&amp;lt;init&amp;gt;(RecoverableZooKeeper.java:112)
21:53:54  	at org.apache.hadoop.hbase.zookeeper.ZKUtil.connect(ZKUtil.java:132)
21:53:54  	at org.apache.hadoop.hbase.zookeeper.ZooKeeperWatcher.&amp;lt;init&amp;gt;(ZooKeeperWatcher.java:165)
21:53:54  	at org.apache.hadoop.hbase.master.HMaster.&amp;lt;init&amp;gt;(HMaster.java:472)
21:53:54  	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
21:53:54  	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
21:53:54  	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
21:53:54  	at java.lang.reflect.Constructor.newInstance(Constructor.java:526)
21:53:54  	at org.apache.hadoop.hbase.master.HMaster.constructMaster(HMaster.java:2774)
21:53:54  	... 5 more&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13841028" author="apurtell" created="Fri, 6 Dec 2013 06:38:03 +0000"  >&lt;p&gt;I see. Well then we can just revert the change. And manually edit maven generated eclipse project files over and over  &lt;/p&gt;</comment>
                            <comment id="13841032" author="aleksshulman" created="Fri, 6 Dec 2013 06:39:57 +0000"  >&lt;blockquote&gt;&lt;p&gt;The revert you are suggesting may fix it though. I&apos;ll test it.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;As expected, even with the different classpath, when applying your revert, everything builds and runs correctly.&lt;/p&gt;</comment>
                            <comment id="13841066" author="apurtell" created="Fri, 6 Dec 2013 07:42:00 +0000"  >&lt;p&gt;Attaching what I committed&lt;/p&gt;</comment>
                            <comment id="13841067" author="aleksshulman" created="Fri, 6 Dec 2013 07:43:26 +0000"  >&lt;p&gt;Thanks Andrew!&lt;/p&gt;</comment>
                            <comment id="13841120" author="hudson" created="Fri, 6 Dec 2013 09:19:30 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #865 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/865/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/865/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10073&quot; title=&quot;Revert HBASE-9718 (Add a test scope dependency on org.slf4j:slf4j-api to hbase-client)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10073&quot;&gt;&lt;del&gt;HBASE-10073&lt;/del&gt;&lt;/a&gt;. Revert &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9718&quot; title=&quot;Add a test scope dependency on org.slf4j:slf4j-api to hbase-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9718&quot;&gt;&lt;del&gt;HBASE-9718&lt;/del&gt;&lt;/a&gt; (Add a test scope dependency on org.slf4j:slf4j-api to hbase-client) (apurtell: rev 1548390)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-client/pom.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13841164" author="hudson" created="Fri, 6 Dec 2013 10:42:16 +0000"  >&lt;p&gt;SUCCESS: Integrated in hbase-0.96-hadoop2 #142 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.96-hadoop2/142/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.96-hadoop2/142/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10073&quot; title=&quot;Revert HBASE-9718 (Add a test scope dependency on org.slf4j:slf4j-api to hbase-client)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10073&quot;&gt;&lt;del&gt;HBASE-10073&lt;/del&gt;&lt;/a&gt;. Revert &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9718&quot; title=&quot;Add a test scope dependency on org.slf4j:slf4j-api to hbase-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9718&quot;&gt;&lt;del&gt;HBASE-9718&lt;/del&gt;&lt;/a&gt; (Add a test scope dependency on org.slf4j:slf4j-api to hbase-client) (apurtell: rev 1548392)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-client/pom.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13841483" author="hudson" created="Fri, 6 Dec 2013 18:04:50 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-TRUNK #4714 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4714/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4714/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10073&quot; title=&quot;Revert HBASE-9718 (Add a test scope dependency on org.slf4j:slf4j-api to hbase-client)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10073&quot;&gt;&lt;del&gt;HBASE-10073&lt;/del&gt;&lt;/a&gt;. Revert &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9718&quot; title=&quot;Add a test scope dependency on org.slf4j:slf4j-api to hbase-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9718&quot;&gt;&lt;del&gt;HBASE-9718&lt;/del&gt;&lt;/a&gt; (Add a test scope dependency on org.slf4j:slf4j-api to hbase-client) (apurtell: rev 1548390)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-client/pom.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13841509" author="hudson" created="Fri, 6 Dec 2013 18:22:46 +0000"  >&lt;p&gt;SUCCESS: Integrated in hbase-0.96 #216 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.96/216/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.96/216/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10073&quot; title=&quot;Revert HBASE-9718 (Add a test scope dependency on org.slf4j:slf4j-api to hbase-client)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10073&quot;&gt;&lt;del&gt;HBASE-10073&lt;/del&gt;&lt;/a&gt;. Revert &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9718&quot; title=&quot;Add a test scope dependency on org.slf4j:slf4j-api to hbase-client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9718&quot;&gt;&lt;del&gt;HBASE-9718&lt;/del&gt;&lt;/a&gt; (Add a test scope dependency on org.slf4j:slf4j-api to hbase-client) (apurtell: rev 1548392)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-client/pom.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13841890" author="stack" created="Fri, 6 Dec 2013 23:33:55 +0000"  >&lt;p&gt;Ugh.  Yeah, this is awful.  I was trying to update the logging lib in hbase and noticed that there four versions of slf4j being pulled in by our dependencies and that these four versions cannot be replaced by one only as they are incompatible.  slf4j is also doing us the favor of spewing any console w/ a message if it finds more than one version of slf4j on the classpath.  Nice.  Let me link this issue to my log4j update issue to be sure I don&apos;t break it.  At the moment I cannot upgrade because of this issue in slf4j.&lt;/p&gt;</comment>
                            <comment id="13849540" author="stack" created="Mon, 16 Dec 2013 18:46:54 +0000"  >&lt;p&gt;Released in 0.96.1.  Issue closed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12683027">HBASE-10092</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12617351" name="10073.patch" size="462" author="apurtell" created="Fri, 6 Dec 2013 07:42:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 6 Dec 2013 04:27:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>361762</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10342"><![CDATA[Incompatible change]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1qcyv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>362059</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>