<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:44:09 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-427/HBASE-427.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-427] org.onelab.filter.BloomFilter class uses 8X the memory it should be using</title>
                <link>https://issues.apache.org/jira/browse/HBASE-427</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The org.onelab.filter.BloomFilter uses a boolean[] to store the filter, however in most Java implementations this will use a byte per bit stored, meaning that 8X the actual used memory is required.  This is unfortunate as the whole point of a BloomFilter is to save memory.&lt;/p&gt;

&lt;p&gt;As a sidebar, the implementation looks a bit shaky in other ways, such as the way hashes are generated from a SHA1 digest in the Filter class, such as the way that it just assumes the digestBytes array will be long enough in the hash() method.&lt;/p&gt;

&lt;p&gt;I discovered this while looking for a good Bloom Filter implementation to use in my own project.  In the end I went ahead and implemented my own, its very simple and pretty elegant (even if I do say so myself &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; - you are welcome to use it:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://locut.us/blog/2008/01/12/a-decent-stand-alone-java-bloom-filter-implementation/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://locut.us/blog/2008/01/12/a-decent-stand-alone-java-bloom-filter-implementation/&lt;/a&gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;n/a&lt;/p&gt;</environment>
        <key id="12386110">HBASE-427</key>
            <summary>org.onelab.filter.BloomFilter class uses 8X the memory it should be using</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sanity">Ian Clarke</reporter>
                        <labels>
                    </labels>
                <created>Sat, 12 Jan 2008 15:23:55 +0000</created>
                <updated>Fri, 22 Aug 2008 21:35:04 +0000</updated>
                            <resolved>Mon, 14 Jan 2008 08:10:08 +0000</resolved>
                                                    <fixVersion>0.16.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12558272" author="jimk" created="Sat, 12 Jan 2008 17:55:12 +0000"  >&lt;p&gt;You must be looking at an older version than what is in trunk.&lt;/p&gt;

&lt;p&gt;The current implementation uses a Jenkins hash rather than SHA-1.&lt;/p&gt;

&lt;p&gt;You are correct that there is no guarantee how JVMs implement an array of boolean.&lt;br/&gt;
Perhaps using a java.util.BitSet would be better.&lt;/p&gt;</comment>
                            <comment id="12558274" author="sanity" created="Sat, 12 Jan 2008 18:09:02 +0000"  >&lt;p&gt;You are right, the current implementation in trunk looks like an improvement, and is probably much faster than SHA1 (which was way-overkill for a Bloom Filter).&lt;/p&gt;

&lt;p&gt;The fact that the datastructure, which is supposed to save RAM, is using 8X more RAM than it needs to strikes me as a pretty serious issue if this class sees much use in the codebase, but I will leave the prioritization up to your good judgement.&lt;/p&gt;

&lt;p&gt;Correcting the problem through use of a BitSet should be trivial enough anyway.&lt;/p&gt;</comment>
                            <comment id="12558481" author="jimk" created="Mon, 14 Jan 2008 01:40:41 +0000"  >&lt;p&gt;Replace vector of boolean with BitSet&lt;/p&gt;</comment>
                            <comment id="12558535" author="hadoopqa" created="Mon, 14 Jan 2008 08:05:19 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
&lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12373071/patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12373071/patch.txt&lt;/a&gt;&lt;br/&gt;
against trunk revision r611727.&lt;/p&gt;

&lt;p&gt;    @author +1.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    javadoc +1.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    javac +1.  The applied patch does not generate any new compiler warnings.&lt;/p&gt;

&lt;p&gt;    findbugs +1.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    core tests +1.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    contrib tests +1.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/1577/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/1577/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/1577/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/1577/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle results: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/1577/artifact/trunk/build/test/checkstyle-errors.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/1577/artifact/trunk/build/test/checkstyle-errors.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/1577/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/1577/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12558537" author="jimk" created="Mon, 14 Jan 2008 08:10:08 +0000"  >&lt;p&gt;Tests passed. Committed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12373071" name="patch.txt" size="12904" author="jimk" created="Mon, 14 Jan 2008 01:40:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 12 Jan 2008 17:55:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31698</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 49 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h78v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98436</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>