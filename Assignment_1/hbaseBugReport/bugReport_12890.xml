<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:37:26 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-12890/HBASE-12890.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-12890] Provide a way to throttle the number of regions moved by the balancer</title>
                <link>https://issues.apache.org/jira/browse/HBASE-12890</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;We have a very large cluster and we frequently add remove quite a few regionservers from our cluster.  Whenever we do this the balancer moves thousands of regions at once.  Instead we provide a configuration parameter: hbase.balancer.max.regions.  This limits the number of regions that are balanced per iteration.  &lt;/p&gt;</description>
                <environment></environment>
        <key id="12768838">HBASE-12890</key>
            <summary>Provide a way to throttle the number of regions moved by the balancer</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="churromorales">churro morales</assignee>
                                    <reporter username="churromorales">churro morales</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Jan 2015 00:18:23 +0000</created>
                <updated>Mon, 28 Nov 2016 15:30:55 +0000</updated>
                            <resolved>Tue, 23 Feb 2016 17:31:14 +0000</resolved>
                                    <version>0.98.10</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>13</watches>
                                                                <comments>
                            <comment id="14284705" author="churromorales" created="Wed, 21 Jan 2015 00:20:48 +0000"  >&lt;p&gt;I believe the patch works for all the versions affected&lt;/p&gt;</comment>
                            <comment id="14285308" author="eclark" created="Wed, 21 Jan 2015 07:54:46 +0000"  >&lt;p&gt;I think the best way to do this is to make the balancer know how to slowly move the regions.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;hbase.master.balancer.stochastic.maxMoveRegions&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; is the setting for to limit the max number of regions the balancer will move in one invocation.&lt;/p&gt;</comment>
                            <comment id="14286004" author="churromorales" created="Wed, 21 Jan 2015 18:16:29 +0000"  >&lt;p&gt;Hi Elliott, &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; hbase.master.balancer.stochastic.maxMoveRegions &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;is never used anywhere, i noticed that there was a comment in the header of the StochasticLoadBalancer but never mentioned anywhere else.&lt;/p&gt;
</comment>
                            <comment id="14286088" author="eclark" created="Wed, 21 Jan 2015 19:13:48 +0000"  >&lt;p&gt;Hmmmm not sure how that happened. I could have sworn that it used to be there. It should be added back. Blah sorry about that. Good catch.&lt;/p&gt;</comment>
                            <comment id="14286261" author="churromorales" created="Wed, 21 Jan 2015 21:03:12 +0000"  >&lt;p&gt;No worries at all.  I did not want to put this code in HMaster but the added bonus is it will work regardless of which implementation of balancer you use. &lt;/p&gt;</comment>
                            <comment id="14596252" author="busbey" created="Mon, 22 Jun 2015 17:12:20 +0000"  >&lt;p&gt;bumped to 1.3. Still working on this &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=churromorales&quot; class=&quot;user-hover&quot; rel=&quot;churromorales&quot;&gt;churro morales&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="14635722" author="hadoopqa" created="Tue, 21 Jul 2015 20:05:45 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12693449/HBASE-12890.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12693449/HBASE-12890.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 5ec5552be0534dbf4b07ef6607741ae6f9ab0495.&lt;br/&gt;
  ATTACHMENT ID: 12693449&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.mapreduce.TestImportExport&lt;br/&gt;
                  org.apache.hadoop.hbase.util.TestProcessBasedCluster&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 1 zombie test(s): 	at org.apache.sentry.tests.e2e.hive.TestPrivilegesAtTableScope.testTableViewJoin4(TestPrivilegesAtTableScope.java:401)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14853//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14853//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14853//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14853//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14853//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14853//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14853//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14853//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14650374" author="yuzhihong@gmail.com" created="Sat, 1 Aug 2015 14:56:10 +0000"  >&lt;p&gt;lgtm&lt;/p&gt;</comment>
                            <comment id="14650424" author="apurtell" created="Sat, 1 Aug 2015 16:18:29 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14652192" author="davelatham" created="Mon, 3 Aug 2015 18:02:28 +0000"  >&lt;p&gt;Thanks, Ted and Andrew.  Can it be committed?&lt;/p&gt;</comment>
                            <comment id="14694404" author="apurtell" created="Wed, 12 Aug 2015 23:24:18 +0000"  >&lt;p&gt;Ok, going to commit shortly.&lt;/p&gt;</comment>
                            <comment id="14694426" author="eclark" created="Wed, 12 Aug 2015 23:50:44 +0000"  >&lt;p&gt;We already have something pretty close to this in the balancer. Why not put that in there?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;hbase.master.balancer.stochastic.maxMovePercent&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That sets the max percent. Then we also will only move Max of the percent and 600 regions at a time. We could just make the 600 configurable. That would make the balancer smarter rather than generating plans that won&apos;t do much.&lt;/p&gt;</comment>
                            <comment id="14694427" author="apurtell" created="Wed, 12 Aug 2015 23:51:39 +0000"  >&lt;p&gt;Moving out to 0.98.15&lt;/p&gt;</comment>
                            <comment id="14703188" author="churromorales" created="Wed, 19 Aug 2015 15:28:56 +0000"  >&lt;p&gt;Agreed, it does work for the stochastic load balancer. Reason why i suggested the patch was this will work for any balancer you decide to go with.  The patch however has the downfall where the respective balancer creates plans for everything then we filter away......but we use the table level and not stochastic.   &lt;/p&gt;</comment>
                            <comment id="14704383" author="anoop.hbase" created="Thu, 20 Aug 2015 06:36:19 +0000"  >&lt;p&gt;This has to be a balancer implementation detail. If the balancer in use is not having support, will be best to extend it and use the new one.&lt;/p&gt;</comment>
                            <comment id="15702228" author="davelatham" created="Mon, 28 Nov 2016 15:30:55 +0000"  >&lt;p&gt;Watchers may be interested in a new attempt at &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-17178&quot; title=&quot;Add region balance throttling&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-17178&quot;&gt;&lt;del&gt;HBASE-17178&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13023622">HBASE-17178</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12693449" name="HBASE-12890.patch" size="2618" author="churromorales" created="Wed, 21 Jan 2015 00:20:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 21 Jan 2015 07:54:46 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i24l93:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>