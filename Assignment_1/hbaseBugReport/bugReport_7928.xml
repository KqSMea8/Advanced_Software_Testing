<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:50:23 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-7928/HBASE-7928.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-7928] Scanning .META. with startRow and/or stopRow is not giving proper results</title>
                <link>https://issues.apache.org/jira/browse/HBASE-7928</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      HTable metaTable = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HTable(config, Bytes.toBytes(&lt;span class=&quot;code-quote&quot;&gt;&quot;.META.&quot;&lt;/span&gt;));
      Scan scan = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Scan();
      scan.setStartRow(Bytes.toBytes(&lt;span class=&quot;code-quote&quot;&gt;&quot;e&quot;&lt;/span&gt;));
      scan.setStopRow(Bytes.toBytes(&lt;span class=&quot;code-quote&quot;&gt;&quot;z&quot;&lt;/span&gt;));
      ResultScanner scanner = metaTable.getScanner(scan);
      Result[] results = scanner.next(100);
      &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (results.length &amp;gt; 0) {
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Result result : results) {
          &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(Bytes.toString(result.getRow()));
        }
        results = scanner.next(100);
      }
      scanner.close();
      metaTable.close();
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
      e.printStackTrace();
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This code will not return any result even if there is 10 tables with names starting with &quot;d&quot; to &quot;w&quot;, including one table called &quot;entry&quot;. If you comment the setStopRow you will get results, but will still get rows starting with &quot;d&quot; even if setStartRow is set to &quot;e&quot;.&lt;/p&gt;

&lt;p&gt;Same code using with a user table is working fine.&lt;/p&gt;

&lt;p&gt;Facing the same issue with the shell.&lt;/p&gt;

&lt;p&gt;scan &apos;.META.&apos; , &lt;/p&gt;
{STARTROW =&amp;gt; &apos;e&apos;, LIMIT =&amp;gt; 10}
&lt;p&gt; is returning rows starting by &quot;d&quot;.&lt;/p&gt;

&lt;p&gt;scan &apos;.META.&apos; , &lt;/p&gt;
{STARTROW =&amp;gt; &apos;e&apos;, STOPROW =&amp;gt; &apos;v&apos;, LIMIT =&amp;gt; 10}
&lt;p&gt; is not returning anything.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12633926">HBASE-7928</key>
            <summary>Scanning .META. with startRow and/or stopRow is not giving proper results</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="ram_krish">ramkrishna.s.vasudevan</assignee>
                                    <reporter username="jmspaggi">Jean-Marc Spaggiari</reporter>
                        <labels>
                    </labels>
                <created>Mon, 25 Feb 2013 16:00:01 +0000</created>
                <updated>Wed, 23 Jul 2014 05:23:00 +0000</updated>
                            <resolved>Wed, 23 Jul 2014 05:23:00 +0000</resolved>
                                    <version>0.94.5</version>
                                                    <component>Usability</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>11</watches>
                                                                <comments>
                            <comment id="13585952" author="ram_krish" created="Mon, 25 Feb 2013 16:03:08 +0000"  >&lt;p&gt;@JM&lt;br/&gt;
Are you planning to work on this?  If not can i take this up.&lt;/p&gt;</comment>
                            <comment id="13585955" author="stack" created="Mon, 25 Feb 2013 16:04:55 +0000"  >&lt;p&gt;Is it just the .META. table that has this behavior?  (.META. table is a bit odd because rows have a special format: tablename &apos;,&apos;, regionname... it might because of this).&lt;/p&gt;</comment>
                            <comment id="13585967" author="jmspaggi" created="Mon, 25 Feb 2013 16:14:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ram_krish&quot; class=&quot;user-hover&quot; rel=&quot;ram_krish&quot;&gt;ramkrishna.s.vasudevan&lt;/a&gt; No, you can take it. Thanks. I&apos;m focusing on HBCK for now.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=saint.ack%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;saint.ack@gmail.com&quot;&gt;Stack&lt;/a&gt; Just the .META. for user table it&apos;s working fine.&lt;/p&gt;</comment>
                            <comment id="13585971" author="jmspaggi" created="Mon, 25 Feb 2013 16:23:11 +0000"  >&lt;p&gt;It seems it&apos;s only impacting .META. (and maybe a bit &lt;del&gt;ROOT&lt;/del&gt; too...)&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      HTable metaTable = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HTable(config, Bytes.toBytes(&lt;span class=&quot;code-quote&quot;&gt;&quot;-ROOT-&quot;&lt;/span&gt;));
      Scan scan = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Scan();
      scan.setStartRow(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[]{0});
      &lt;span class=&quot;code-comment&quot;&gt;//scan.setStopRow(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[]{127});
&lt;/span&gt;      ResultScanner scanner = metaTable.getScanner(scan);
      Result[] results = scanner.next(100);
      &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (results.length &amp;gt; 0) {
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Result result : results) {
          &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(Bytes.toString(result.getRow()));
        }
        results = scanner.next(100);
      }
      scanner.close();
      metaTable.close();
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
      e.printStackTrace();
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is working for for ROOT, but not if I setup the stoprow.&lt;/p&gt;</comment>
                            <comment id="13585973" author="ram_krish" created="Mon, 25 Feb 2013 16:26:24 +0000"  >&lt;p&gt;YA.. Just verified.  Let me take a look.&lt;/p&gt;</comment>
                            <comment id="13585977" author="kevin.odell" created="Mon, 25 Feb 2013 16:36:34 +0000"  >&lt;p&gt;hbase(main):003:0&amp;gt; create &apos;test2&apos;, &apos;cf1&apos;, &lt;/p&gt;
{SPLITS =&amp;gt; [&apos;111&apos;, &apos;222&apos;, &apos;333&apos;]}
&lt;p&gt;0 row(s) in 1.1520 seconds&lt;/p&gt;

&lt;p&gt;hbase(main):005:0&amp;gt; put &apos;test2&apos;, &apos;111&apos;, &apos;cf1:1&apos;, &apos;1111&apos;&lt;br/&gt;
0 row(s) in 0.1180 seconds&lt;/p&gt;

&lt;p&gt;hbase(main):006:0&amp;gt; put &apos;test2&apos;, &apos;111&apos;, &apos;cf1:1&apos;, &apos;1112&apos;&lt;br/&gt;
0 row(s) in 0.0080 seconds&lt;/p&gt;

&lt;p&gt;hbase(main):007:0&amp;gt; put &apos;test2&apos;, &apos;112&apos;, &apos;cf1:1&apos;, &apos;1112&apos;&lt;br/&gt;
0 row(s) in 0.0070 seconds&lt;/p&gt;

&lt;p&gt;hbase(main):008:0&amp;gt; put &apos;test2&apos;, &apos;113&apos;, &apos;cf1:1&apos;, &apos;1112&apos;&lt;br/&gt;
0 row(s) in 0.0070 seconds&lt;/p&gt;

&lt;p&gt;hbase(main):009:0&amp;gt; put &apos;test2&apos;, &apos;211&apos;, &apos;cf1:1&apos;, &apos;1112&apos;&lt;br/&gt;
0 row(s) in 0.0070 seconds&lt;/p&gt;

&lt;p&gt;hbase(main):010:0&amp;gt; put &apos;test2&apos;, &apos;212&apos;, &apos;cf1:1&apos;, &apos;1112&apos;&lt;br/&gt;
0 row(s) in 0.0630 seconds&lt;/p&gt;

&lt;p&gt;hbase(main):011:0&amp;gt; put &apos;test2&apos;, &apos;213&apos;, &apos;cf1:1&apos;, &apos;1112&apos;&lt;br/&gt;
0 row(s) in 0.0070 seconds&lt;/p&gt;

&lt;p&gt;hbase(main):012:0&amp;gt; put &apos;test2&apos;, &apos;311&apos;, &apos;cf1:1&apos;, &apos;1112&apos;&lt;br/&gt;
0 row(s) in 0.0150 seconds&lt;/p&gt;

&lt;p&gt;hbase(main):013:0&amp;gt; put &apos;test2&apos;, &apos;312&apos;, &apos;cf1:1&apos;, &apos;1112&apos;&lt;br/&gt;
0 row(s) in 0.0090 seconds&lt;/p&gt;

&lt;p&gt;hbase(main):014:0&amp;gt; put &apos;test2&apos;, &apos;313&apos;, &apos;cf1:1&apos;, &apos;1112&apos;&lt;br/&gt;
0 row(s) in 0.0060 seconds&lt;/p&gt;

&lt;p&gt;hbase(main):020:0&amp;gt; scan &apos;test2&apos;, &lt;/p&gt;
{STARTROW =&amp;gt; &apos;1&apos;, LIMIT =&amp;gt; 2}
&lt;p&gt;ROW                                                   COLUMN+CELL                                                                                                                                                &lt;br/&gt;
 111                                                  column=cf1:1, timestamp=1361809376535, value=1112                                                                                                          &lt;br/&gt;
 112                                                  column=cf1:1, timestamp=1361809383138, value=1112&lt;/p&gt;

&lt;p&gt;hbase(main):021:0&amp;gt; scan &apos;test2&apos;, &lt;/p&gt;
{STARTROW =&amp;gt; &apos;2&apos;, LIMIT =&amp;gt; 2}
&lt;p&gt;ROW                                                   COLUMN+CELL                                                                                                                                                &lt;br/&gt;
 211                                                  column=cf1:1, timestamp=1361809393858, value=1112                                                                                                          &lt;br/&gt;
 212                                                  column=cf1:1, timestamp=1361809398016, value=1112&lt;/p&gt;

&lt;p&gt;hbase(main):029:0&amp;gt; scan &apos;.META.&apos;, &lt;/p&gt;
{STARTROW =&amp;gt; &apos;111&apos;, LIMIT =&amp;gt; 2}
&lt;p&gt;ROW                                                   COLUMN+CELL                                                                                                                                                &lt;br/&gt;
 brian,,1360685707510.81752ad34514d0d73735574fcb5280d column=info:regioninfo, timestamp=1360685707961, value=&lt;/p&gt;
{NAME =&amp;gt; &apos;brian,,1360685707510.81752ad34514d0d73735574fcb5280d7.&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;, ENC
 7.                                                   ODED =&amp;gt; 81752ad34514d0d73735574fcb5280d7,}
&lt;p&gt;                                                                                                                 &lt;br/&gt;
 brian,,1360685707510.81752ad34514d0d73735574fcb5280d column=info:server, timestamp=1360685708115, value=cdh4-hbase-02:60020                                                                                     &lt;br/&gt;
 7.                                                                                                                                                                                                              &lt;br/&gt;
 brian,,1360685707510.81752ad34514d0d73735574fcb5280d column=info:serverstartcode, timestamp=1360685708115, value=1357233940879                                                                                  &lt;br/&gt;
 7.                                                                                                                                                                                                              &lt;br/&gt;
 sent_email_su_lapse1d,,1360634184398.44fee2ed9f35ece column=info:regioninfo, timestamp=1360634184882, value={NAME =&amp;gt; &apos;sent_email_su_lapse1d,,1360634184398.44fee2ed9f35ece213df06ac6f69a908.&apos;, STARTKEY =&amp;gt; &apos;&apos;, E&lt;br/&gt;
 213df06ac6f69a908.&lt;/p&gt;

&lt;p&gt;.META. appears to be ignoring any of the extra flags.&lt;/p&gt;



</comment>
                            <comment id="13586007" author="ram_krish" created="Mon, 25 Feb 2013 17:15:33 +0000"  >&lt;p&gt;So the META_COMPARATOR is not able to find the row that starts with the start row specified.&lt;br/&gt;
We try to create a DELETE_FAMILY row with the specified row.  So that the scan starts from there and all other rows are less than that.&lt;/p&gt;

&lt;p&gt;In case of META it does not happen.  So let me come up with a test case tomorrow.&lt;/p&gt;</comment>
                            <comment id="13586825" author="ram_krish" created="Tue, 26 Feb 2013 05:57:40 +0000"  >&lt;p&gt;Ok so solved the problem.  As Stack correctly said, incase of META the entry is nothing but the regioninfos.&lt;br/&gt;
So which means it has the regionname followed by two commas and the region id.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
a,,1361857755997.2309408bd4369ee6e7c0ccbaa0bf61fa
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So when the user tries to set the start row as &apos;b&apos;. The METAKEYCOMPARATOR tries to search for &apos;,&apos; in the key.  In our case this is not found.&lt;br/&gt;
So ideally what we should do is append &quot;,,00000000000000&quot; in case of start row&lt;br/&gt;
and incase of stoprow &quot;,,99999999999999&quot;. This will help us to exactly apply start and stop row for META scan.&lt;/p&gt;

&lt;p&gt;Now one thing to see is at what level should we do this,&lt;br/&gt;
Because in case of META scans internally happening we already have the current format in it.  Only an user induced META scan has to undergo some changes to the start and stop row.&lt;br/&gt;
I tweaked and got the required output but that is just ugly.&lt;br/&gt;
Could someone suggest a better approach?&lt;/p&gt;</comment>
                            <comment id="13586856" author="stack" created="Tue, 26 Feb 2013 06:38:43 +0000"  >&lt;p&gt;In shell, could you just add the above constants when you notice it is .META. table and it has startrow arg?  Ugly but user wouldn&apos;t see it.   Or you could just throw exception warning user they need to add &apos;,,&apos; at least to make it work on .META. &amp;#8211; ugly but less surprising.&lt;/p&gt;</comment>
                            <comment id="13587124" author="jmspaggi" created="Tue, 26 Feb 2013 13:45:56 +0000"  >&lt;p&gt;What&apos;s about the STOPROW?&lt;/p&gt;

&lt;p&gt;scan &apos;.META.&apos;, &lt;/p&gt;
{STARTROW =&amp;gt; &apos;e,,00000000000000&apos;}
&lt;p&gt; is giving me the expected results&lt;br/&gt;
scan &apos;.META.&apos;, &lt;/p&gt;
{STARTROW =&amp;gt; &apos;e,,00000000000000&apos;, STOPROW =&amp;gt; &apos;f&apos;}
&lt;p&gt; is NOT giving me anything.&lt;br/&gt;
scan &apos;.META.&apos;, &lt;/p&gt;
{STARTROW =&amp;gt; &apos;e,,&apos;}
&lt;p&gt; is giving me the expected results&lt;br/&gt;
scan &apos;.META.&apos;, &lt;/p&gt;
{STARTROW =&amp;gt; &apos;e,,00000000000000&apos;, STOPROW =&amp;gt; &apos;f,,&apos;}
&lt;p&gt; is giving me anything.&lt;/p&gt;

&lt;p&gt;Again, the table I&apos;m looking for is &apos;entry&apos;.&lt;/p&gt;

&lt;p&gt;Can we not just add the &apos;,,&apos; in the filter keys in the comparator if we don&apos;t find it?&lt;/p&gt;

&lt;p&gt;Like if user try to call &apos;e&apos; as the start key, the comparator will append &apos;,,&apos; at the end, but if user is passing &apos;f,,&apos; then we don&apos;t modify the key?&lt;/p&gt;</comment>
                            <comment id="13587192" author="ram_krish" created="Tue, 26 Feb 2013 15:22:38 +0000"  >&lt;p&gt;JM&lt;br/&gt;
Can you try with e,,99999999999999 for stop row.&lt;/p&gt;
</comment>
                            <comment id="13587199" author="jmspaggi" created="Tue, 26 Feb 2013 15:36:19 +0000"  >&lt;p&gt;Not working, but should be I think.&lt;/p&gt;

&lt;p&gt;hbase(main):178:0&amp;gt; scan &apos;.META.&apos;, &lt;/p&gt;
{STARTROW =&amp;gt; &apos;e,,&apos;, STOPROW =&amp;gt; &apos;e,,99999999999999&apos;}
&lt;p&gt;ROW                                                                   COLUMN+CELL                                                                                                                                                                                             &lt;br/&gt;
0 row(s) in 0.0040 seconds&lt;/p&gt;</comment>
                            <comment id="13587220" author="ram_krish" created="Tue, 26 Feb 2013 16:03:01 +0000"  >&lt;p&gt;A patch for 0.94.  &lt;br/&gt;
@Stack &lt;br/&gt;
I have applied the changes in Java code so that both shell and java client will be able to use it.&lt;/p&gt;</comment>
                            <comment id="13587237" author="jmspaggi" created="Tue, 26 Feb 2013 16:36:05 +0000"  >&lt;p&gt;scan &apos;.META.&apos;, &lt;/p&gt;
{STARTROW =&amp;gt; &apos;e&apos;, STOPROW =&amp;gt; &apos;f&apos;}
&lt;p&gt;27 row(s) in 0.4560 seconds&lt;/p&gt;

&lt;p&gt;Like a charm!&lt;/p&gt;

&lt;p&gt;scan &apos;.META.&apos;, &lt;/p&gt;
{STARTROW =&amp;gt; &apos;e&apos;, STOPROW =&amp;gt; &apos;ez&apos;}
&lt;p&gt;Working too.&lt;/p&gt;

&lt;p&gt;Also working fine with Java Client.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      HTable metaTable = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HTable(config, Bytes.toBytes(&lt;span class=&quot;code-quote&quot;&gt;&quot;.META.&quot;&lt;/span&gt;));
      Scan scan = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Scan();
      scan.setStartRow(Bytes.toBytes(&lt;span class=&quot;code-quote&quot;&gt;&quot;e&quot;&lt;/span&gt;));
      scan.setStopRow(Bytes.toBytes(&lt;span class=&quot;code-quote&quot;&gt;&quot;f&quot;&lt;/span&gt;));
      ResultScanner scanner = metaTable.getScanner(scan);
      Result[] results = scanner.next(100);
      &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; regionsCount = 0;
      &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (results.length &amp;gt; 0) {
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Result result : results) {
          &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(Bytes.toString(result.getRow()));
          regionsCount++;
        }
        results = scanner.next(100);
      }
      scanner.close();
      metaTable.close();
      &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println (regionsCount);
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Throwable throwable) {
      throwable.printStackTrace();
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Is giving me 27 too.&lt;/p&gt;

&lt;p&gt;+1 for me. Thanks Ramkrishna for the fix!&lt;/p&gt;</comment>
                            <comment id="13587293" author="stack" created="Tue, 26 Feb 2013 17:38:14 +0000"  >&lt;p&gt;There is a DELIMITER in HConstants already.  Fix on commit I&apos;d say.  +1&lt;/p&gt;
</comment>
                            <comment id="13587295" author="stack" created="Tue, 26 Feb 2013 17:38:58 +0000"  >&lt;p&gt;I am trying to imagine a situation where this would make for unexpected behavior but cannot conjure one at the moment so yeah, +1&lt;/p&gt;</comment>
                            <comment id="13588045" author="ram_krish" created="Wed, 27 Feb 2013 06:08:10 +0000"  >&lt;p&gt;Tests are passing for trunk.  Will attach a patch soon.&lt;/p&gt;</comment>
                            <comment id="13588095" author="hadoopqa" created="Wed, 27 Feb 2013 08:03:34 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12571147/HBASE-7928_trunk.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12571147/HBASE-7928_trunk.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.client.TestAdmin&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4570//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4570//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4570//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4570//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4570//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4570//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4570//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4570//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4570//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4570//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4570//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4570//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4570//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4570//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4570//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4570//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4570//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4570//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4570//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4570//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13588101" author="ram_krish" created="Wed, 27 Feb 2013 08:08:54 +0000"  >&lt;p&gt;The testcase that i added fails.  I thought i ran it in my local test cases.  Will check what went wrong.&lt;/p&gt;</comment>
                            <comment id="13588113" author="ram_krish" created="Wed, 27 Feb 2013 08:17:54 +0000"  >&lt;p&gt;This is what happened.  I ran the test case declaring DELIMITER in htable  Then i changed it into HConstants.  &lt;br/&gt;
To my surprise the HConstants declared was an int for &apos;,&apos;. Got fooled by it &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;</comment>
                            <comment id="13588158" author="hadoopqa" created="Wed, 27 Feb 2013 09:20:46 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12571162/HBASE-7928_trunk_1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12571162/HBASE-7928_trunk_1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.regionserver.TestAtomicOperation&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4573//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4573//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4573//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4573//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4573//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4573//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4573//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4573//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4573//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4573//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4573//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4573//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4573//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4573//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4573//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4573//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4573//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4573//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4573//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4573//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13588160" author="ram_krish" created="Wed, 27 Feb 2013 09:23:19 +0000"  >&lt;p&gt;TestAtomicOperation passes locally.&lt;/p&gt;</comment>
                            <comment id="13588220" author="anoopsamjohn" created="Wed, 27 Feb 2013 10:59:02 +0000"  >&lt;p&gt;Ram&lt;br/&gt;
Can we avoid the convertion byte-&amp;gt;string and then string-&amp;gt;byte some how?&lt;br/&gt;
I have seen somewhere an API to check index of byte[] in another byte[]&lt;/p&gt;</comment>
                            <comment id="13588223" author="anoopsamjohn" created="Wed, 27 Feb 2013 11:00:57 +0000"  >&lt;p&gt;In Guava&lt;br/&gt;
com.google.common.primitives.Bytes.indexOf(byte array[], byte target)&lt;/p&gt;</comment>
                            <comment id="13588548" author="ram_krish" created="Wed, 27 Feb 2013 17:39:33 +0000"  >&lt;p&gt;@Anoop&lt;br/&gt;
Thanks for the review.  So that will induce a new import.  &lt;br/&gt;
Any specific advantage?  If its a must to change i can change it not a problem.&lt;/p&gt;</comment>
                            <comment id="13589139" author="anoopsamjohn" created="Thu, 28 Feb 2013 03:37:24 +0000"  >&lt;p&gt;What I thought was if it is byte[] operations alone it might look cleaner than conversions (2 times). Not a must. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  You can decide&lt;br/&gt;
May be our util Bytes class can add this kind of indexOf API also?  May be useful. We wanted similar kind of byte index logic in our sec index code.&lt;br/&gt;
Will open a new JIRA? I can work on that.&lt;/p&gt;</comment>
                            <comment id="13589381" author="ram_krish" created="Thu, 28 Feb 2013 09:37:53 +0000"  >&lt;p&gt;Updated patches.  Will wait for hadoopQA.  &lt;/p&gt;</comment>
                            <comment id="13589420" author="hadoopqa" created="Thu, 28 Feb 2013 10:41:36 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12571388/HBASE-7928_trunk_2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12571388/HBASE-7928_trunk_2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4601//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4601//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4601//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4601//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4601//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4601//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4601//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4601//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4601//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4601//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4601//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4601//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4601//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4601//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4601//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4601//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4601//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4601//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4601//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4601//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13589631" author="ram_krish" created="Thu, 28 Feb 2013 16:17:13 +0000"  >&lt;p&gt;Anoop,&lt;/p&gt;

&lt;p&gt;Can i commit this patch.  I have updated as per your comments.  &lt;/p&gt;</comment>
                            <comment id="13589685" author="yuzhihong@gmail.com" created="Thu, 28 Feb 2013 17:29:05 +0000"  >&lt;p&gt;Indentation is off:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+		&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (Bytes.equals(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.getTableName(), HConstants.META_TABLE_NAME)) {
+			changeStartAndStopRowIfMeta(scan);
+		}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;+1 otherwise.&lt;/p&gt;</comment>
                            <comment id="13590211" author="anoopsamjohn" created="Fri, 1 Mar 2013 03:43:10 +0000"  >&lt;p&gt;Ram&lt;br/&gt;
 We can have HConstants.META_ROW_DELIMITER_STR constant as byte[] rather than String?&lt;br/&gt;
You can avoid Bytes.toBytes() in&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; (com.google.common.primitives.Bytes.indexOf(metaRow,
+        Bytes.toBytes(HConstants.META_ROW_DELIMITER_STR)) != -1);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Also &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Bytes.add(
+          scan.getStartRow(),
+          Bytes.toBytes(HConstants.META_ROW_DELIMITER_STR + HConstants.META_ROW_DELIMITER_STR
+              + HConstants.ZEROES)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;can be like&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Bytes.add(scan.getStartRow(),HConstants.META_ROW_DELIMITER_BYTES,Bytes.toBytes(HConstants.ZEROES))
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;HConstants.META_ROW_DELIMITER_BYTES  can be byte[] from &quot;,,&quot; rather than from &quot;,&quot;?&lt;/p&gt;

&lt;p&gt;What do you say Ram?&lt;/p&gt;

&lt;p&gt;I will open another issue and will add the indexOf() API into HBase util Bytes class (May be some other useful items also there? I will see). IMO that util may help other users. Any way that is out of scope of this issue.&lt;/p&gt;</comment>
                            <comment id="13590673" author="ram_krish" created="Fri, 1 Mar 2013 16:24:39 +0000"  >&lt;p&gt;Updated once again as per Anoop&apos;s comments.&lt;/p&gt;</comment>
                            <comment id="13590693" author="ram_krish" created="Fri, 1 Mar 2013 16:41:43 +0000"  >&lt;p&gt;Committed to all three branches.&lt;br/&gt;
Thanks to  Anoop, Ted and Stack for the review. &lt;br/&gt;
Thanks to Jean for verifying the patch.&lt;/p&gt;</comment>
                            <comment id="13590695" author="hadoopqa" created="Fri, 1 Mar 2013 16:42:12 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12571606/HBASE-7928_0.94_3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12571606/HBASE-7928_0.94_3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4620//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4620//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13590745" author="hadoopqa" created="Fri, 1 Mar 2013 17:32:07 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12571603/HBASE-7928_trunk_2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12571603/HBASE-7928_trunk_2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.catalog.TestMetaMigrationConvertingToPB&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4618//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4618//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4618//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4618//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4618//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4618//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4618//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4618//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4618//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4618//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4618//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4618//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4618//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4618//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4618//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4618//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4618//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4618//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4618//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4618//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13591300" author="hudson" created="Sat, 2 Mar 2013 05:07:47 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #874 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/874/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/874/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7928&quot; title=&quot;Scanning .META. with startRow and/or stopRow is not giving proper results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7928&quot;&gt;&lt;del&gt;HBASE-7928&lt;/del&gt;&lt;/a&gt;  Scanning .META. with startRow and/or stopRow is not giving proper results (Ram) (Revision 1451645)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
ramkrishna : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/client/HTable.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13591332" author="lhofhansl" created="Sat, 2 Mar 2013 06:49:43 +0000"  >&lt;p&gt;This has not worked correctly since the beginning, right? What&apos;s the use case? Why does this have to be in 0.94? (Many questions &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; )&lt;/p&gt;

&lt;p&gt;This also breaks TestMetaMigrationRemovingHTD. I suggest reverting at least from 0.94.&lt;/p&gt;</comment>
                            <comment id="13591336" author="ram_krish" created="Sat, 2 Mar 2013 07:05:44 +0000"  >&lt;p&gt;@Lars&lt;br/&gt;
 Got a successful trunk precommit build before the last patch.  Hence committed.  &lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4618//testReport/org.apache.hadoop.hbase.catalog/TestMetaMigrationConvertingToPB/org_apache_hadoop_hbase_catalog_TestMetaMigrationConvertingToPB/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4618//testReport/org.apache.hadoop.hbase.catalog/TestMetaMigrationConvertingToPB/org_apache_hadoop_hbase_catalog_TestMetaMigrationConvertingToPB/&lt;/a&gt;.  &lt;br/&gt;
Checked out this.  Seems to be a diff problem.  Passes locally Lars.&lt;/p&gt;

&lt;p&gt;You dont want this in 0.94?  Any specific reason Lars. I don&apos;t mind backing it out.&lt;/p&gt;</comment>
                            <comment id="13591337" author="lhofhansl" created="Sat, 2 Mar 2013 07:12:30 +0000"  >&lt;p&gt;I was just wondering why we need this. (And I also put a &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; in there)&lt;br/&gt;
Breaking TestMetaMigrationRemovingHTD worries me, and it is reproducible locally.&lt;/p&gt;</comment>
                            <comment id="13591340" author="lhofhansl" created="Sat, 2 Mar 2013 07:36:31 +0000"  >&lt;p&gt;I think the massaging on the start/stop key is not valid for META formatted in 0.90, which is why this test breaks.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;, do you have a suggestion about how we can fix this easily? Or should we just not do this in 0.94?&lt;/p&gt;

&lt;p&gt;(And does that also mean that we cannot upgrade from 0.90 to 0.96 - even with a full restart?)&lt;/p&gt;</comment>
                            <comment id="13591341" author="ram_krish" created="Sat, 2 Mar 2013 07:41:32 +0000"  >&lt;p&gt;Ok Lars.  I was checking for TestMetaMigrationConvertingToPB in trunk.&lt;br/&gt;
So can i revert it for now from 0.94 and leave the patch over there incase someone needs it?&lt;/p&gt;</comment>
                            <comment id="13591344" author="lhofhansl" created="Sat, 2 Mar 2013 07:48:27 +0000"  >&lt;p&gt;Yeah, trunk&apos;s different here, I think.&lt;/p&gt;

&lt;p&gt;Thanks Ram, I think we should do that. We can also document a workaround, namely add ,,0 as start key suffix and ,,9 as stop key suffix.&lt;/p&gt;</comment>
                            <comment id="13591345" author="lhofhansl" created="Sat, 2 Mar 2013 07:50:35 +0000"  >&lt;p&gt;Would you like me to revert? That way I am the bad guy &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13591349" author="ram_krish" created="Sat, 2 Mar 2013 08:00:25 +0000"  >&lt;p&gt;I reverted Lars. You are the RM of 0.94. So that is responsibility &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
And if something is breaking its better to revert.  +1 Lars.&lt;/p&gt;</comment>
                            <comment id="13591351" author="lhofhansl" created="Sat, 2 Mar 2013 08:03:41 +0000"  >&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Thanks Ram.&lt;br/&gt;
I removed the 0.94 tag. We can also regroup and find a solution that does not break the migration.&lt;/p&gt;</comment>
                            <comment id="13591399" author="jmspaggi" created="Sat, 2 Mar 2013 12:35:31 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I&apos;m not sure to get why we don&apos;t want this in 0.94. Can&apos;t we try to fix it and re-apply it? It&apos;s a fix, not a new feature. And if we have it only in trunk, thank mean 0.96 will also have this bug, right?&lt;/p&gt;</comment>
                            <comment id="13591418" author="hudson" created="Sat, 2 Mar 2013 14:30:57 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #427 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/427/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/427/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7928&quot; title=&quot;Scanning .META. with startRow and/or stopRow is not giving proper results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7928&quot;&gt;&lt;del&gt;HBASE-7928&lt;/del&gt;&lt;/a&gt; Scanning .META. with startRow and/or stopRow is not giving proper results (Ram) (Revision 1451643)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
ramkrishna : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-client/src/main/java/org/apache/hadoop/hbase/client/HTable.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-common/src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13591433" author="lhofhansl" created="Sat, 2 Mar 2013 16:15:02 +0000"  >&lt;p&gt;Happy to reapply if we can make the test pass. In the meanwhile there is a simple workaround.&lt;/p&gt;</comment>
                            <comment id="13591434" author="yuzhihong@gmail.com" created="Sat, 2 Mar 2013 16:16:20 +0000"  >&lt;p&gt;Looks like TestMetaMigrationConvertingToPB sometimes fails in QA run. e.g.:&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4633//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4633//testReport/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13591437" author="lhofhansl" created="Sat, 2 Mar 2013 16:20:42 +0000"  >&lt;p&gt;TestMetaMigrationRemovingHTD fail reliably locally with this patch and not without it.&lt;/p&gt;

&lt;p&gt;Personally I would revert this from all branches until we make sure it does not break the upgrade path (unless we&apos;re saying there is no upgrade path form 0.90 to 0.96, which is a perfectly valid scenario)&lt;/p&gt;</comment>
                            <comment id="13591458" author="ram_krish" created="Sat, 2 Mar 2013 17:44:45 +0000"  >&lt;p&gt;@Ted&lt;br/&gt;
TestMetaMigrationRemovingHTD failed with the patch.  But TestMetaMigrationConvertingToPB  is running locally and tried doing it.  Anyway will take a closer look at it.&lt;br/&gt;
@Lars&lt;br/&gt;
For 0.94 i will check if i can make the TestMetaMigrationRemovingHTD  to pass.  Till then let it be reverted.&lt;br/&gt;
Sorry about the trouble caused here. &lt;/p&gt;</comment>
                            <comment id="13591511" author="lhofhansl" created="Sat, 2 Mar 2013 20:41:24 +0000"  >&lt;p&gt;No trouble, Ram.&lt;br/&gt;
Running a patch through trunk&apos;s HadoopQA is good enough, for the odd failure in 0.94 we just do what we did here and revert if we need to.&lt;/p&gt;</comment>
                            <comment id="13591523" author="hudson" created="Sat, 2 Mar 2013 21:10:46 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #875 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/875/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/875/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7928&quot; title=&quot;Scanning .META. with startRow and/or stopRow is not giving proper results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7928&quot;&gt;&lt;del&gt;HBASE-7928&lt;/del&gt;&lt;/a&gt;-Scanning .META. with startRow and/or stopRow is not giving proper results - Revert(Ram).  Affects TestMetaMigrationRemovingHTD (Revision 1451846)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
ramkrishna : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/client/HTable.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13591769" author="hudson" created="Sun, 3 Mar 2013 15:41:07 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #115 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/115/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/115/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7928&quot; title=&quot;Scanning .META. with startRow and/or stopRow is not giving proper results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7928&quot;&gt;&lt;del&gt;HBASE-7928&lt;/del&gt;&lt;/a&gt;-Scanning .META. with startRow and/or stopRow is not giving proper results - Revert(Ram).  Affects TestMetaMigrationRemovingHTD (Revision 1451846)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7928&quot; title=&quot;Scanning .META. with startRow and/or stopRow is not giving proper results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7928&quot;&gt;&lt;del&gt;HBASE-7928&lt;/del&gt;&lt;/a&gt;  Scanning .META. with startRow and/or stopRow is not giving proper results (Ram) (Revision 1451645)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
ramkrishna : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/client/HTable.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;ramkrishna : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/client/HTable.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13593187" author="hudson" created="Tue, 5 Mar 2013 07:52:15 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security-on-Hadoop-23 #12 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/12/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/12/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7928&quot; title=&quot;Scanning .META. with startRow and/or stopRow is not giving proper results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7928&quot;&gt;&lt;del&gt;HBASE-7928&lt;/del&gt;&lt;/a&gt;-Scanning .META. with startRow and/or stopRow is not giving proper results - Revert(Ram).  Affects TestMetaMigrationRemovingHTD (Revision 1451846)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7928&quot; title=&quot;Scanning .META. with startRow and/or stopRow is not giving proper results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7928&quot;&gt;&lt;del&gt;HBASE-7928&lt;/del&gt;&lt;/a&gt;  Scanning .META. with startRow and/or stopRow is not giving proper results (Ram) (Revision 1451645)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
ramkrishna : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/client/HTable.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;ramkrishna : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/client/HTable.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13594410" author="ram_krish" created="Wed, 6 Mar 2013 06:11:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8010&quot; title=&quot;TestMetaMigrationConvertingToPB failing on trunk and 0.95&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8010&quot;&gt;&lt;del&gt;HBASE-8010&lt;/del&gt;&lt;/a&gt; is doubted to be caused by this.  We can revert this from Trunk and 0.95 also if it breaks the compatability.&lt;br/&gt;
But still need to analyse why there is a randomness.&lt;/p&gt;</comment>
                            <comment id="13594413" author="yuzhihong@gmail.com" created="Wed, 6 Mar 2013 06:15:37 +0000"  >&lt;p&gt;I don&apos;t think we need to revert.&lt;br/&gt;
As I showed in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8010&quot; title=&quot;TestMetaMigrationConvertingToPB failing on trunk and 0.95&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8010&quot;&gt;&lt;del&gt;HBASE-8010&lt;/del&gt;&lt;/a&gt;, the check for valid META table row should be changed to account for two commas which are not adjacent.&lt;/p&gt;</comment>
                            <comment id="13594427" author="stack" created="Wed, 6 Mar 2013 06:36:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt; -1 on this one.  Small patch but causes big headache that is still being worked though (I think I know what &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ted_yu&quot; class=&quot;user-hover&quot; rel=&quot;ted_yu&quot;&gt;Ted Yu&lt;/a&gt; is up to over in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8010&quot; title=&quot;TestMetaMigrationConvertingToPB failing on trunk and 0.95&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8010&quot;&gt;&lt;del&gt;HBASE-8010&lt;/del&gt;&lt;/a&gt; but it is by no means a comprehensive solution and is looking like it will cause a ripple all over the code base given the way it is being addressed).&lt;/p&gt;</comment>
                            <comment id="13594438" author="lhofhansl" created="Wed, 6 Mar 2013 06:54:55 +0000"  >&lt;p&gt;Agreed. It&apos;s already reverted (and in fact unscheduled) from 0.94.&lt;/p&gt;

&lt;p&gt;You gonna revert from the other branches and close as &quot;won&apos;t fix&quot;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="13594447" author="stack" created="Wed, 6 Mar 2013 07:07:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt; Let me revert from other branches.    Will leave it open.  A fix would be nice but in light of what subsequently transpired, study of what is going on in KeyValue comparators in particular the Meta Comparator would help here; see how it figures out if a row is meta with its careful examination of values up to the &apos;,&apos; ensuring they are printables and then of how it looks for the other &apos;,&apos; by coming in from the end of the KV.&lt;/p&gt;</comment>
                            <comment id="13594450" author="stack" created="Wed, 6 Mar 2013 07:12:33 +0000"  >&lt;p&gt;I reverted from 0.95 and trunk.&lt;/p&gt;</comment>
                            <comment id="13594451" author="stack" created="Wed, 6 Mar 2013 07:12:55 +0000"  >&lt;p&gt;Reopening.  Needs work still.  Reverted from all branches.&lt;/p&gt;</comment>
                            <comment id="13594589" author="hudson" created="Wed, 6 Mar 2013 10:39:44 +0000"  >&lt;p&gt;Integrated in hbase-0.95 #29 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95/29/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95/29/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7928&quot; title=&quot;Scanning .META. with startRow and/or stopRow is not giving proper results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7928&quot;&gt;&lt;del&gt;HBASE-7928&lt;/del&gt;&lt;/a&gt; Scanning .META. with startRow and/or stopRow is not giving proper results; REVERT.  NEEDS SOME MORE WORK (Revision 1453177)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-client/src/main/java/org/apache/hadoop/hbase/client/HTable.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-common/src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13594608" author="hudson" created="Wed, 6 Mar 2013 11:03:21 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3918 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3918/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3918/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7928&quot; title=&quot;Scanning .META. with startRow and/or stopRow is not giving proper results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7928&quot;&gt;&lt;del&gt;HBASE-7928&lt;/del&gt;&lt;/a&gt; Scanning .META. with startRow and/or stopRow is not giving proper results; REVERT.  NEEDS SOME MORE WORK (Revision 1453175)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-client/src/main/java/org/apache/hadoop/hbase/client/HTable.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-common/src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13594704" author="hudson" created="Wed, 6 Mar 2013 13:31:18 +0000"  >&lt;p&gt;Integrated in hbase-0.95-on-hadoop2 #13 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95-on-hadoop2/13/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95-on-hadoop2/13/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7928&quot; title=&quot;Scanning .META. with startRow and/or stopRow is not giving proper results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7928&quot;&gt;&lt;del&gt;HBASE-7928&lt;/del&gt;&lt;/a&gt; Scanning .META. with startRow and/or stopRow is not giving proper results; REVERT.  NEEDS SOME MORE WORK (Revision 1453177)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-client/src/main/java/org/apache/hadoop/hbase/client/HTable.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-common/src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13594707" author="hudson" created="Wed, 6 Mar 2013 13:35:11 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #432 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/432/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/432/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7928&quot; title=&quot;Scanning .META. with startRow and/or stopRow is not giving proper results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7928&quot;&gt;&lt;del&gt;HBASE-7928&lt;/del&gt;&lt;/a&gt; Scanning .META. with startRow and/or stopRow is not giving proper results; REVERT.  NEEDS SOME MORE WORK (Revision 1453175)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-client/src/main/java/org/apache/hadoop/hbase/client/HTable.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-common/src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13595448" author="v.himanshu" created="Thu, 7 Mar 2013 02:18:40 +0000"  >&lt;p&gt;Yeah, it caused HBase-7981. +1 on reverting this patch.&lt;/p&gt;</comment>
                            <comment id="13598591" author="ram_krish" created="Mon, 11 Mar 2013 07:11:45 +0000"  >&lt;p&gt;Tried to checkout the KeyComparator but it ends up trickier because we are not very sure if explicitly user has tried to set up the startkey and endkey.    Will check on this more.&lt;/p&gt;</comment>
                            <comment id="13749515" author="jmspaggi" created="Sun, 25 Aug 2013 02:26:26 +0000"  >&lt;p&gt;Any update on this?&lt;/p&gt;</comment>
                            <comment id="14071379" author="ram_krish" created="Wed, 23 Jul 2014 05:23:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11541&quot; title=&quot;Wrong result when scaning meta with startRow&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11541&quot;&gt;&lt;del&gt;HBASE-11541&lt;/del&gt;&lt;/a&gt; fixes the issue. Hence resolving.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12635025">HBASE-7984</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12570996" name="HBASE-7928_0.94.patch" size="3424" author="ram_krish" created="Tue, 26 Feb 2013 16:03:01 +0000"/>
                            <attachment id="12571146" name="HBASE-7928_0.94_1.patch" size="3234" author="ram_krish" created="Wed, 27 Feb 2013 06:53:21 +0000"/>
                            <attachment id="12571161" name="HBASE-7928_0.94_2.patch" size="3837" author="ram_krish" created="Wed, 27 Feb 2013 08:17:54 +0000"/>
                            <attachment id="12571606" name="HBASE-7928_0.94_3.patch" size="3800" author="ram_krish" created="Fri, 1 Mar 2013 16:32:31 +0000"/>
                            <attachment id="12571387" name="HBASE-7928_0.94_3.patch" size="3828" author="ram_krish" created="Thu, 28 Feb 2013 09:37:53 +0000"/>
                            <attachment id="12571147" name="HBASE-7928_trunk.patch" size="3295" author="ram_krish" created="Wed, 27 Feb 2013 06:53:21 +0000"/>
                            <attachment id="12571162" name="HBASE-7928_trunk_1.patch" size="4004" author="ram_krish" created="Wed, 27 Feb 2013 08:17:54 +0000"/>
                            <attachment id="12571603" name="HBASE-7928_trunk_2.patch" size="3858" author="ram_krish" created="Fri, 1 Mar 2013 16:24:39 +0000"/>
                            <attachment id="12571388" name="HBASE-7928_trunk_2.patch" size="3973" author="ram_krish" created="Thu, 28 Feb 2013 09:37:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 25 Feb 2013 16:03:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>314420</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 21 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1i9an:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>314765</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>