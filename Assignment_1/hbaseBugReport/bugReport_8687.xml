<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:57:35 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-8687/HBASE-8687.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-8687] When moving region with region_mover.rb, there is long stack trace for RegionMovedException</title>
                <link>https://issues.apache.org/jira/browse/HBASE-8687</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;When gracefully rolling restart region servers, I saw the following in output:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2013-06-04 20:44:40,135 DEBUG [main] client.ClientScanner: Scan table=usertable, startRow=user8129671889902366092
2013-06-04 20:44:40,141 DEBUG [main] client.ClientScanner: Scan table=.META., startRow=usertable,user8129671889902366092,00000000000000
2013-06-04 20:44:40,158 INFO  [main] region_mover: Moving region 13168d8b86f1ace9472f60555207a707 (2 of 2) to server=hor8n09.gq1.ygridcore.net,60020,1370378675859
2013-06-04 20:44:40,405 DEBUG [main] client.ClientScanner: Scan table=usertable, startRow=user8129671889902366092
2013-06-04 20:44:40,407 WARN  [main] client.ServerCallable: Call exception, tries=0, numRetries=100
org.apache.hadoop.hbase.exceptions.RegionMovedException: Region moved to: hostname=hor8n09.gq1.ygridcore.net port=60020 startCode=1370378675859. As of locationSeqNum=194375.
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
	at org.apache.hadoop.ipc.RemoteException.instantiateException(RemoteException.java:106)
	at org.apache.hadoop.ipc.RemoteException.unwrapRemoteException(RemoteException.java:95)
	at org.apache.hadoop.hbase.protobuf.ProtobufUtil.getRemoteException(ProtobufUtil.java:230)
	at org.apache.hadoop.hbase.client.ScannerCallable.openScanner(ScannerCallable.java:299)
	at org.apache.hadoop.hbase.client.ScannerCallable.call(ScannerCallable.java:147)
	at org.apache.hadoop.hbase.client.ScannerCallable.call(ScannerCallable.java:55)
	at org.apache.hadoop.hbase.client.ServerCallable.withRetries(ServerCallable.java:174)
	at org.apache.hadoop.hbase.client.ClientScanner.nextScanner(ClientScanner.java:215)
	at org.apache.hadoop.hbase.client.ClientScanner.&amp;lt;init&amp;gt;(ClientScanner.java:130)
	at org.apache.hadoop.hbase.client.HTable.getScanner(HTable.java:585)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.jruby.javasupport.JavaMethod.invokeDirectWithExceptionHandling(JavaMethod.java:450)
	at org.jruby.javasupport.JavaMethod.invokeDirect(JavaMethod.java:311)
	at org.jruby.java.invokers.InstanceMethodInvoker.call(InstanceMethodInvoker.java:59)
	at org.jruby.runtime.callsite.CachingCallSite.call(CachingCallSite.java:167)
	at homes.hortonzy.hbase_minus_0_dot_95_dot_1.bin.region_mover.method__6$RUBY$isSuccessfulScan(/homes/hortonzy/hbase-0.95.1/bin/region_mover.rb:121)
	at homes$hortonzy$hbase_minus_0_dot_95_dot_1$bin$region_mover$method__6$RUBY$isSuccessfulScan.call(homes$hortonzy$hbase_minus_0_dot_95_dot_1$bin$region_mover$method__6$RUBY$isSuccessfulScan:65535)
	at homes$hortonzy$hbase_minus_0_dot_95_dot_1$bin$region_mover$method__6$RUBY$isSuccessfulScan.call(homes$hortonzy$hbase_minus_0_dot_95_dot_1$bin$region_mover$method__6$RUBY$isSuccessfulScan:65535)
	at org.jruby.runtime.callsite.CachingCallSite.call(CachingCallSite.java:201)
	at homes.hortonzy.hbase_minus_0_dot_95_dot_1.bin.region_mover.method__8$RUBY$move(/homes/hortonzy/hbase-0.95.1/bin/region_mover.rb:164)
	at homes$hortonzy$hbase_minus_0_dot_95_dot_1$bin$region_mover$method__8$RUBY$move.call(homes$hortonzy$hbase_minus_0_dot_95_dot_1$bin$region_mover$method__8$RUBY$move:65535)
	at org.jruby.internal.runtime.methods.DynamicMethod.call(DynamicMethod.java:181)
	at org.jruby.runtime.callsite.CachingCallSite.call(CachingCallSite.java:69)
	at homes.hortonzy.hbase_minus_0_dot_95_dot_1.bin.region_mover.block_6$RUBY$__for__(/homes/hortonzy/hbase-0.95.1/bin/region_mover.rb:381)
	at homes$hortonzy$hbase_minus_0_dot_95_dot_1$bin$region_mover$block_6$RUBY$__for__.call(homes$hortonzy$hbase_minus_0_dot_95_dot_1$bin$region_mover$block_6$RUBY$__for__:65535)
	at org.jruby.runtime.CompiledBlock.yield(CompiledBlock.java:112)
	at org.jruby.runtime.CompiledBlock.yield(CompiledBlock.java:95)
	at org.jruby.runtime.Block.yield(Block.java:130)
	at org.jruby.ast.YieldNode.interpret(YieldNode.java:119)
	at org.jruby.ast.NewlineNode.interpret(NewlineNode.java:104)
	at org.jruby.ast.WhileNode.interpret(WhileNode.java:131)
	at org.jruby.ast.NewlineNode.interpret(NewlineNode.java:104)
	at org.jruby.ast.BlockNode.interpret(BlockNode.java:71)
	at org.jruby.evaluator.ASTInterpreter.INTERPRET_METHOD(ASTInterpreter.java:74)
	at org.jruby.internal.runtime.methods.InterpretedMethod.call(InterpretedMethod.java:169)
	at org.jruby.internal.runtime.methods.DefaultMethod.call(DefaultMethod.java:191)
	at org.jruby.runtime.callsite.CachingCallSite.cacheAndCall(CachingCallSite.java:302)
	at org.jruby.runtime.callsite.CachingCallSite.callBlock(CachingCallSite.java:144)
	at org.jruby.runtime.callsite.CachingCallSite.callIter(CachingCallSite.java:153)
	at homes.hortonzy.hbase_minus_0_dot_95_dot_1.bin.region_mover.method__27$RUBY$loadRegions(/homes/hortonzy/hbase-0.95.1/bin/region_mover.rb:363)
	at homes$hortonzy$hbase_minus_0_dot_95_dot_1$bin$region_mover$method__27$RUBY$loadRegions.call(homes$hortonzy$hbase_minus_0_dot_95_dot_1$bin$region_mover$method__27$RUBY$loadRegions:65535)
	at homes$hortonzy$hbase_minus_0_dot_95_dot_1$bin$region_mover$method__27$RUBY$loadRegions.call(homes$hortonzy$hbase_minus_0_dot_95_dot_1$bin$region_mover$method__27$RUBY$loadRegions:65535)
	at org.jruby.runtime.callsite.CachingCallSite.cacheAndCall(CachingCallSite.java:332)
	at org.jruby.runtime.callsite.CachingCallSite.call(CachingCallSite.java:203)
	at homes.hortonzy.hbase_minus_0_dot_95_dot_1.bin.region_mover.__file__(/homes/hortonzy/hbase-0.95.1/bin/region_mover.rb:454)
	at homes.hortonzy.hbase_minus_0_dot_95_dot_1.bin.region_mover.load(/homes/hortonzy/hbase-0.95.1/bin/region_mover.rb)
	at org.jruby.Ruby.runScript(Ruby.java:697)
	at org.jruby.Ruby.runScript(Ruby.java:690)
	at org.jruby.Ruby.runNormally(Ruby.java:597)
	at org.jruby.Ruby.runFromMain(Ruby.java:446)
	at org.jruby.Main.doRunFromMain(Main.java:369)
	at org.jruby.Main.internalRun(Main.java:258)
	at org.jruby.Main.run(Main.java:224)
	at org.jruby.Main.run(Main.java:208)
	at org.jruby.Main.main(Main.java:188)
Caused by: org.apache.hadoop.hbase.ipc.RemoteWithExtrasException(org.apache.hadoop.hbase.exceptions.RegionMovedException): org.apache.hadoop.hbase.exceptions.RegionMovedException: Region moved to: hostname=hor8n09.gq1.ygridcore.net port=60020 startCode=1370378675859. As of locationSeqNum=194375.
	at org.apache.hadoop.hbase.regionserver.HRegionServer.getRegionByEncodedName(HRegionServer.java:2550)
	at org.apache.hadoop.hbase.regionserver.HRegionServer.getRegion(HRegionServer.java:3844)
	at org.apache.hadoop.hbase.regionserver.HRegionServer.scan(HRegionServer.java:2997)
	at org.apache.hadoop.hbase.protobuf.generated.ClientProtos$ClientService$2.callBlockingMethod(ClientProtos.java:20932)
	at org.apache.hadoop.hbase.ipc.RpcServer.call(RpcServer.java:2122)
	at org.apache.hadoop.hbase.ipc.RpcServer$Handler.run(RpcServer.java:1829)

	at org.apache.hadoop.hbase.ipc.RpcClient.call(RpcClient.java:1336)
	at org.apache.hadoop.hbase.ipc.RpcClient.callBlockingMethod(RpcClient.java:1540)
	at org.apache.hadoop.hbase.ipc.RpcClient$BlockingRpcChannelImplementation.callBlockingMethod(RpcClient.java:1597)
	at org.apache.hadoop.hbase.protobuf.generated.ClientProtos$ClientService$BlockingStub.scan(ClientProtos.java:21367)
	at org.apache.hadoop.hbase.client.ScannerCallable.openScanner(ScannerCallable.java:290)
	... 54 more
2013-06-04 20:44:40,912 DEBUG [main] client.HConnectionManager$HConnectionImplementation: Removed hor8n02.gq1.ygridcore.net:60020 as a location of usertable,user8129671889902366092,1370373946456.13168d8b86f1ace9472f60555207a707. &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; tableName=usertable from cache
Reloaded hor8n09.gq1.ygridcore.net region(s)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The script tried to move region to hor8n09.&lt;br/&gt;
RegionMovedException involving hor8n09 is misleading because hor8n09 is the recipient of the region movement.&lt;/p&gt;

&lt;p&gt;Looks like such exception should be suppressed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12650989">HBASE-8687</key>
            <summary>When moving region with region_mover.rb, there is long stack trace for RegionMovedException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="yuzhihong@gmail.com">Ted Yu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 Jun 2013 21:21:12 +0000</created>
                <updated>Wed, 27 Nov 2013 23:20:42 +0000</updated>
                                                                            <component>Region Assignment</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13680475" author="stack" created="Tue, 11 Jun 2013 16:52:23 +0000"  >&lt;p&gt;Did the script keep going?  Select a new location and move the region there?  Was it moving the region to where the region was already sitting and that was why the exception?&lt;/p&gt;</comment>
                            <comment id="13680477" author="stack" created="Tue, 11 Jun 2013 16:57:08 +0000"  >&lt;p&gt;Looking in code, the RegionMovedException uses a cache of regions recently moved to point out where the region has gone too.  The server above that threw the exception was or was not hor8n09?  If it was, then that is odd.  If region is still on this server, we should be fixing up the recently moved cache.&lt;/p&gt;</comment>
                            <comment id="13680480" author="yuzhihong@gmail.com" created="Tue, 11 Jun 2013 16:57:56 +0000"  >&lt;blockquote&gt;&lt;p&gt;Did the script keep going?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Was it moving the region to where the region was already sitting and that was why the exception?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I checked cluster status afterwards: region servers came back up and cluster was balanced.&lt;br/&gt;
So I think the exception was red herring.&lt;/p&gt;</comment>
                            <comment id="13680495" author="stack" created="Tue, 11 Jun 2013 17:03:31 +0000"  >&lt;p&gt;The region_mover.rb script does spew a bunch which can disorientate an operator.  No harm cleanup up some of it.&lt;/p&gt;</comment>
                            <comment id="13834323" author="apurtell" created="Wed, 27 Nov 2013 23:20:42 +0000"  >&lt;p&gt;No patch, moving out of 0.98&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 11 Jun 2013 16:52:23 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>331315</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 3 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1l5p3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>331648</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>