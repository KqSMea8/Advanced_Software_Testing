<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:45:50 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-605/HBASE-605.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-605] allow scanners which return results ordred by a column value</title>
                <link>https://issues.apache.org/jira/browse/HBASE-605</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;We would like to be able to scan though tables with results ordered by (deserialized) column values. This approach maintains an in-memory sorted set for each ordered-by column in each HStore. This allows us to iterate through the keys in column order, and to random reads on the key to get the full row.&lt;/p&gt;

&lt;p&gt;Without the index, then we have to scan through all the rows to get the first result ordered by a column. Thus, when R is the number of rows in a table,  N is the number of ordered-by rows we want, and R &amp;gt;&amp;gt; N we can save a lot of work by not doing the full table scan.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12395019">HBASE-605</key>
            <summary>allow scanners which return results ordred by a column value</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="clint.morgan">Clint Morgan</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Apr 2008 21:49:32 +0000</created>
                <updated>Sun, 13 Sep 2009 22:26:25 +0000</updated>
                            <resolved>Tue, 21 Oct 2008 21:33:33 +0000</resolved>
                                    <version>0.2.0</version>
                                    <fixVersion>0.19.0</fixVersion>
                                    <component>Client</component>
                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12593139" author="clint.morgan" created="Tue, 29 Apr 2008 21:53:59 +0000"  >&lt;p&gt;This patch contains a minimal implementation, and small unit test.&lt;/p&gt;

&lt;p&gt;One known deficiency is that the sorted set is build twice per hregion upon splitting. This is due to hergions being opened then immediately closed upon a split.&lt;/p&gt;

&lt;p&gt;I&apos;ve tested a bit more in our layers above hbase and it works for me (so far). &lt;/p&gt;</comment>
                            <comment id="12597304" author="stack" created="Thu, 15 May 2008 22:49:36 +0000"  >&lt;p&gt;Mark this as patch available so it gets a review&lt;/p&gt;</comment>
                            <comment id="12598057" author="stack" created="Mon, 19 May 2008 19:38:15 +0000"  >&lt;p&gt;This patch has much merit if only for the fact that it verifies (after making few tweaks) that a subclass of HRegionServer is possible.&lt;/p&gt;

&lt;p&gt;+ Source is &amp;lt; 80 columns wide in hadoop&lt;br/&gt;
+ Should you be subclassing HColumnDescriptor too?  Should it be versioned too?&lt;br/&gt;
+ Should we instead add accesors to HRS for the data members you changed from private to protected? (leases and requestCount)&lt;br/&gt;
+ We need to make HRegion subclassable or at least be configurable about which HStore to use?  HTable too (As is they are &apos;polluted&apos; with your sorted column code)&lt;/p&gt;
</comment>
                            <comment id="12598827" author="clint.morgan" created="Wed, 21 May 2008 22:24:36 +0000"  >&lt;p&gt;updated to trunk and responded to comments. Subclassing minimizes pollution with core code...&lt;/p&gt;</comment>
                            <comment id="12598902" author="stack" created="Thu, 22 May 2008 04:14:42 +0000"  >&lt;p&gt;In TestOrderedScanner, do you want to remove commented out code?  Do you want to add a class comment that says this test depends/uses a &apos;special&apos; version of HRegionServer.  Would suggest that all classes that depend on this custom HRegionServer also get marked appropriately in their class comment (@see?): e.g. OrderedScanner won&apos;t work unless its going against the ordered HRS &amp;#8211; same for OrderedHRegion.&lt;/p&gt;

&lt;p&gt;Some classes are missing licenses.&lt;/p&gt;

&lt;p&gt;I suppose package protection prevents you putting all these new classes into a new orderedregionserver package or into a subpackage named regionserver.ordered and client.ordered or some such?&lt;/p&gt;

&lt;p&gt;You need to explain somewhere in javadoc what this OrderedRegionServer is, how it works, and how to enable it.  Would suggest that the class comment in the OrderedRegionServer or in the Ordered Interface as good places (otherwise, should I put in place a package.html to which you can add?).  What would be great is that the next time someone shows up asking how they can customize regionserver behavior, we can just point them to your OrderedRegionServer javadoc as an example.&lt;/p&gt;

&lt;p&gt;Thanks for adding accessors rather than making data members protected in RegionServer and for making HStore, etc., subclassable.&lt;/p&gt;

&lt;p&gt;Otherwise, the patch looks great.&lt;/p&gt;</comment>
                            <comment id="12599112" author="clint.morgan" created="Thu, 22 May 2008 18:40:27 +0000"  >&lt;p&gt;responded to comments:&lt;/p&gt;

&lt;p&gt;high level overview in javadoc for OrderedRegionServer&lt;/p&gt;

&lt;p&gt;moved stuff into own packages in client.ordred and regionserver.ordered&lt;/p&gt;
</comment>
                            <comment id="12599164" author="stack" created="Thu, 22 May 2008 19:52:36 +0000"  >&lt;p&gt;Unfortunately, we&apos;re still java5.  We probably won&apos;t go to java6 as a requirement until hbase 0.3, to match hadoop 0.18.  Please purge the java6isms (NavigableSet in SortedColumn).&lt;/p&gt;

&lt;p&gt;Also, I get this compiling:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    [javac] /Users/stack/Documents/checkouts/trunk/src/java/org/apache/hadoop/hbase/LocalHBaseCluster.java:121: cannot find symbol
    [javac] symbol  : constructor IOException(java.lang.Exception)
    [javac] location: class java.io.IOException
    [javac]         &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IOException(e);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Do you?&lt;/p&gt;

&lt;p&gt;Thanks Clint (I already updated the FAQ to point to OrderedRegionServer as example modifying HRegionServer behavior).&lt;/p&gt;</comment>
                            <comment id="12599181" author="clint.morgan" created="Thu, 22 May 2008 20:45:26 +0000"  >&lt;p&gt;Unfortunately I need the NavigableSet to get a descending iterator. SortedSet does not provide this functionality. Could use some 3rd party data structure but, ...&lt;/p&gt;

&lt;p&gt;I don&apos;t get the IOException compile error, thats a java6 change too...&lt;/p&gt;

&lt;p&gt;For the time being, I&apos;m inclined to just leave this as a java6 patch and wait until java6 adoption to apply it. Works for me now, and I need to spend time on other things.&lt;/p&gt;</comment>
                            <comment id="12599186" author="stack" created="Thu, 22 May 2008 21:05:03 +0000"  >&lt;p&gt;OK Clint.  I moved this to 0.3 hbase for now.&lt;/p&gt;</comment>
                            <comment id="12599188" author="bryanduxbury" created="Thu, 22 May 2008 21:11:42 +0000"  >&lt;p&gt;You can&apos;t supply a Comparator to SortedSet that you code to act in reverse?&lt;/p&gt;</comment>
                            <comment id="12599192" author="clint.morgan" created="Thu, 22 May 2008 21:18:56 +0000"  >&lt;p&gt;Nope. A single SortedSet is created/maintained per order-able column. The we&apos;d like to iterate through it forwards or backwards to respond to the client&apos;s scanner request.&lt;/p&gt;

&lt;p&gt;I suppose we could maintain two such Sorted (forwards and backwards) by inverting the Comparator, but this seems a waste of space and time....&lt;/p&gt;</comment>
                            <comment id="12641604" author="clint.morgan" created="Tue, 21 Oct 2008 21:33:33 +0000"  >&lt;p&gt;Resolving this issue, as I&apos;ve decided to go the table indexed approach of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-883&quot; title=&quot;Secondary Indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-883&quot;&gt;&lt;del&gt;HBASE-883&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12382521" name="hbase-605-v2.patch" size="49864" author="clint.morgan" created="Wed, 21 May 2008 22:24:36 +0000"/>
                            <attachment id="12382589" name="hbase-605-v3.patch" size="62489" author="clint.morgan" created="Thu, 22 May 2008 18:40:27 +0000"/>
                            <attachment id="12381144" name="hbase-605.patch" size="42235" author="clint.morgan" created="Tue, 29 Apr 2008 21:53:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 15 May 2008 22:49:36 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31779</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 9 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h8bz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98612</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>