<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:14:29 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-3945/HBASE-3945.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-3945] Load balancer shouldn&apos;t move the same region in two consective balancing actions</title>
                <link>https://issues.apache.org/jira/browse/HBASE-3945</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Keeping a region on the same region server would give good stability for active scanners.&lt;br/&gt;
We shouldn&apos;t reassign the same region in two successive calls to balanceCluster().&lt;/p&gt;</description>
                <environment></environment>
        <key id="12509018">HBASE-3945</key>
            <summary>Load balancer shouldn&apos;t move the same region in two consective balancing actions</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="yuzhihong@gmail.com">Ted Yu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 1 Jun 2011 20:24:10 +0000</created>
                <updated>Tue, 8 Sep 2015 17:13:50 +0000</updated>
                            <resolved>Tue, 8 Sep 2015 17:13:50 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13044001" author="yuzhihong@gmail.com" created="Fri, 3 Jun 2011 19:57:39 +0000"  >&lt;p&gt;Motivation for this JIRA was to reduce disruption to long running compactions.&lt;br/&gt;
Since the decision of compaction is solely made by region server, it is not easy for load balancer to know the exact timing and duration of compactions.&lt;br/&gt;
Shall we introduce new parameter, e.g. hbase.balancer.inert.duration, specifying the duration of keeping region on the same region server ?&lt;/p&gt;</comment>
                            <comment id="13044017" author="streamy" created="Fri, 3 Jun 2011 20:25:29 +0000"  >&lt;p&gt;I worry about this approach of more and more knobs, especially when they don&apos;t directly address what a good/bad load balance really is.&lt;/p&gt;

&lt;p&gt;If a region gets moved in two consecutive balancing actions, then something is wrong with the balancer in the first place.  While I agree in principle that regions moving multiple times and quickly is not desirable, this will be a common outcome if the balancing algorithm isn&apos;t already taking into account metrics over time (rather than short snapshots).  If we&apos;re using load but then adding all these limits/controls, it&apos;s hard to ever understand the behavior of the balancer.&lt;/p&gt;</comment>
                            <comment id="13044027" author="yuzhihong@gmail.com" created="Fri, 3 Jun 2011 20:38:56 +0000"  >&lt;p&gt;@Jonathan:&lt;br/&gt;
I agree with your comment.&lt;br/&gt;
I think we should use as few knobs as possible.&lt;/p&gt;

&lt;p&gt;Stack suggested this approach for the problem reported by Schubert and Anty. See his comment in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3943&quot; title=&quot;Propagate compaction status from HRegion to HServerLoad.RegionLoad&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3943&quot;&gt;&lt;del&gt;HBASE-3943&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13044046" author="yuzhihong@gmail.com" created="Fri, 3 Jun 2011 20:56:52 +0000"  >&lt;p&gt;Without new parameter, we can keep any region on its region server for at least two cycles of balancing.&lt;br/&gt;
This somehow relates hbase.balancer.period with the expected duration of compaction(s).&lt;/p&gt;

&lt;p&gt;Or maybe I misinterpreted Stack&apos;s comment.&lt;/p&gt;</comment>
                            <comment id="13444447" author="lhofhansl" created="Wed, 29 Aug 2012 21:48:25 +0000"  >&lt;p&gt;@Ted: Do you want to keep this open?&lt;/p&gt;</comment>
                            <comment id="13444463" author="yuzhihong@gmail.com" created="Wed, 29 Aug 2012 22:03:55 +0000"  >&lt;p&gt;Let&apos;s keep this open for a while.&lt;br/&gt;
At least I expect some unit test what can tell us such consecutive moves wouldn&apos;t happen.&lt;/p&gt;</comment>
                            <comment id="14735190" author="stack" created="Tue, 8 Sep 2015 17:13:50 +0000"  >&lt;p&gt;No progress in years. Resolving.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 3 Jun 2011 20:25:29 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33285</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 14 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0homv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>101253</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>