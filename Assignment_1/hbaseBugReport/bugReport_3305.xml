<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:09:07 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-3305/HBASE-3305.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-3305] Allow round-robin distribution for table created with multiple regions</title>
                <link>https://issues.apache.org/jira/browse/HBASE-3305</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;We can distribute the initial regions created for a new table in round-robin fashion.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12491962">HBASE-3305</key>
            <summary>Allow round-robin distribution for table created with multiple regions</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yuzhihong@gmail.com">Ted Yu</assignee>
                                    <reporter username="yuzhihong@gmail.com">Ted Yu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 3 Dec 2010 05:35:54 +0000</created>
                <updated>Fri, 20 Nov 2015 12:41:53 +0000</updated>
                            <resolved>Fri, 28 Jan 2011 23:39:01 +0000</resolved>
                                    <version>0.20.6</version>
                                    <fixVersion>0.90.1</fixVersion>
                    <fixVersion>0.92.0</fixVersion>
                                    <component>master</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12966772" author="yuzhihong@gmail.com" created="Sat, 4 Dec 2010 01:10:04 +0000"  >&lt;p&gt;Currently we have this in HMaster:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; void createTable(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; HRegionInfo [] newRegions, &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; sync)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Maybe we should change the second parameter to EnumSet&amp;lt;TableCreationFlag&amp;gt; so that both sync and round-robin options can be expressed.&lt;/p&gt;</comment>
                            <comment id="12966855" author="yuzhihong@gmail.com" created="Sat, 4 Dec 2010 21:40:45 +0000"  >&lt;p&gt;First attempt for this JIRA.&lt;/p&gt;</comment>
                            <comment id="12966883" author="streamy" created="Sun, 5 Dec 2010 01:51:16 +0000"  >&lt;p&gt;Seems reasonable to me that we&apos;d have this as the default rather than all of the new option enum stuff.  When would you not want round robin?  I think the one thing to change in the round robin assignment is to start at a random starting point.&lt;/p&gt;</comment>
                            <comment id="12966884" author="yuzhihong@gmail.com" created="Sun, 5 Dec 2010 01:54:10 +0000"  >&lt;p&gt;I wasn&apos;t able to get RPC working using EnumSet.&lt;br/&gt;
Here is another version that uses arrays in place of EnumSet.&lt;/p&gt;

&lt;p&gt;I exposed the TableCreationFlag to client so that client has better control over the distribution of regions.&lt;/p&gt;</comment>
                            <comment id="12966885" author="yuzhihong@gmail.com" created="Sun, 5 Dec 2010 02:00:16 +0000"  >&lt;p&gt;I wasn&apos;t able to get RPC working using EnumSet.&lt;br/&gt;
Here is another version that uses arrays in place of EnumSet.&lt;/p&gt;

&lt;p&gt;I exposed the TableCreationFlag to client so that client has better control over the distribution of regions.&lt;/p&gt;

&lt;p&gt;I will attach another patch which changes the starting server for roundRobinAssignment().&lt;/p&gt;</comment>
                            <comment id="12966886" author="yuzhihong@gmail.com" created="Sun, 5 Dec 2010 02:07:46 +0000"  >&lt;p&gt;Third version randomizes the starting region server in LoadBalancer.roundRobinAssignment()&lt;/p&gt;</comment>
                            <comment id="12966892" author="streamy" created="Sun, 5 Dec 2010 03:45:11 +0000"  >&lt;p&gt;I would rather not complicate the API and introduce new enums all the way to the client.  I see no reason why you&apos;d want random assignment not round-robin w/ random starting point, so I see no reason to make this configurable (at least on a per create table call basis).  If anything, make it a Configuration parameter but I don&apos;t even think that&apos;s necessary.&lt;/p&gt;</comment>
                            <comment id="12966899" author="yuzhihong@gmail.com" created="Sun, 5 Dec 2010 04:58:06 +0000"  >&lt;p&gt;If the total number of regions is small compared to the number of region servers, the benefit of round-robin is less obvious.&lt;br/&gt;
Our use case would do round-robin assignment for every table we create. I have no problem making this the default.&lt;/p&gt;

&lt;p&gt;I plan to move the initialization of mRandomizer out of roundRobinAssignment()  for better randomness.&lt;/p&gt;</comment>
                            <comment id="12966902" author="yuzhihong@gmail.com" created="Sun, 5 Dec 2010 05:49:30 +0000"  >&lt;p&gt;This patch makes round-robin default assignment when creating tables.&lt;/p&gt;</comment>
                            <comment id="12966905" author="yuzhihong@gmail.com" created="Sun, 5 Dec 2010 06:36:49 +0000"  >&lt;p&gt;Rewrote roundRobinAssignment() with two loops - the outer loop for iterating servers and the inner for iterating over regions.&lt;/p&gt;</comment>
                            <comment id="12967012" author="streamy" created="Sun, 5 Dec 2010 20:28:18 +0000"  >&lt;p&gt;Ted, you want to put this patch up on review board?  Looks pretty close to being done but a few small comments.  You can reuse that numServers variable in the LoadBalancer method rather than calling .size() every time.  Get rid of the &quot;there are x servers online&quot; debug message.&lt;/p&gt;

&lt;p&gt;Is there a unit test for the round-robin method?  Want to write on?  It&apos;s a simple algorithm but always good to have something to detect regressions.&lt;/p&gt;

&lt;p&gt;Also, looks like you have tabs in the diff.  HBase style is 2 spaces and no tabs.&lt;/p&gt;</comment>
                            <comment id="12967013" author="streamy" created="Sun, 5 Dec 2010 20:30:29 +0000"  >&lt;p&gt;Added Ted as contributor and assigning.&lt;/p&gt;</comment>
                            <comment id="12967038" author="yuzhihong@gmail.com" created="Sun, 5 Dec 2010 22:41:25 +0000"  >&lt;p&gt;Piggyback unit test on TestAdmin.testCreateTableWithRegions()&lt;/p&gt;</comment>
                            <comment id="12968354" author="hbasereviewboard" created="Mon, 6 Dec 2010 18:44:09 +0000"  >&lt;p&gt;Message from: &quot;Ted Yu&quot; &amp;lt;ted_yu@yahoo.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.cloudera.org/r/1271/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1271/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2010-12-06 10:42:26.792838)&lt;/p&gt;


&lt;p&gt;Review request for hbase, stack and Jonathan Gray.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Add hbase group as reviewer&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Adopted round-robin assignment as default for regions specified when table is created.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3305&quot; title=&quot;Allow round-robin distribution for table created with multiple regions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3305&quot;&gt;&lt;del&gt;HBASE-3305&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;http://issues.apache.org/jira/browse/HBASE-3305&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/HBASE-3305&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/src/main/java/org/apache/hadoop/hbase/master/HMaster.java 1042725 &lt;br/&gt;
  trunk/src/main/java/org/apache/hadoop/hbase/master/LoadBalancer.java 1042725 &lt;br/&gt;
  trunk/src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java 1042725 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;http://review.cloudera.org/r/1271/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1271/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Put unit tests for this change inside TestAdmin.testCreateTableWithRegions()&lt;br/&gt;
They passed.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Ted&lt;/p&gt;

</comment>
                            <comment id="12968579" author="hbasereviewboard" created="Tue, 7 Dec 2010 05:43:11 +0000"  >&lt;p&gt;Message from: stack@duboce.net&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.cloudera.org/r/1271/#review2037&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1271/#review2037&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Ship it!&lt;/p&gt;


&lt;p&gt;Looks good Ted.  Below are a few pointers mostly on formatting and then a few questions.  Thanks for making the patch.&lt;/p&gt;


&lt;p&gt;trunk/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1271/#comment6430&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1271/#comment6430&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Do you need to pollute HMaster with this AssignmentManager inner class?&lt;/p&gt;



&lt;p&gt;trunk/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1271/#comment6431&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1271/#comment6431&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    FYI, don&apos;t make these kinda formatting changes in a patch... its distracting and the change you are making is against the convention used in the rest of this file.  Just FYI.  No biggie.&lt;/p&gt;



&lt;p&gt;trunk/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1271/#comment6432&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1271/#comment6432&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Yeah, maybe these lines belong inside a method that is inside AssignmentManager?  What you think Ted?&lt;/p&gt;



&lt;p&gt;trunk/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1271/#comment6433&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1271/#comment6433&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    What changed on this line?  White space?&lt;/p&gt;



&lt;p&gt;trunk/src/main/java/org/apache/hadoop/hbase/master/LoadBalancer.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1271/#comment6434&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1271/#comment6434&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Convention is two spaces for tab in hbase and hadoop.  This seems like something else?&lt;/p&gt;



&lt;p&gt;trunk/src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1271/#comment6435&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1271/#comment6435&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    FYI, tab is two spaces... we indent in multiples of two spaces.&lt;/p&gt;



&lt;p&gt;trunk/src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1271/#comment6437&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1271/#comment6437&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Good.  Nice test.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;stack&lt;/li&gt;
&lt;/ul&gt;



</comment>
                            <comment id="12968608" author="hbasereviewboard" created="Tue, 7 Dec 2010 07:19:11 +0000"  >&lt;p&gt;Message from: &quot;Ted Yu&quot; &amp;lt;ted_yu@yahoo.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.cloudera.org/r/1271/#review2038&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1271/#review2038&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;trunk/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1271/#comment6438&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1271/#comment6438&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    A new patch will be uploaded that reverts such changes.&lt;/p&gt;



&lt;p&gt;trunk/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1271/#comment6439&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1271/#comment6439&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    I think you&apos;re implying rewriting&lt;br/&gt;
    AssignmentManager.assignAllUserRegions().&lt;/p&gt;

&lt;p&gt;    How about creating this method:&lt;br/&gt;
    assignAllUserRegions(List&amp;lt;HRegionInfo&amp;gt; regions).&lt;/p&gt;

&lt;p&gt;    finishInitialization() would pass null to the above method to indicate that all user regions should be assigned.&lt;br/&gt;
    createTable() would pass the list of regions for the new table.&lt;/p&gt;

&lt;p&gt;    This way, BulkStartupAssigner doesn&apos;t appear in HMaster.&lt;/p&gt;



&lt;p&gt;trunk/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1271/#comment6440&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1271/#comment6440&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Yes. I prefer space between if and left parenthesis.&lt;/p&gt;

&lt;p&gt;    I will revert anyway.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Ted&lt;/li&gt;
&lt;/ul&gt;



</comment>
                            <comment id="12968610" author="hbasereviewboard" created="Tue, 7 Dec 2010 07:24:09 +0000"  >&lt;p&gt;Message from: &quot;Ted Yu&quot; &amp;lt;ted_yu@yahoo.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.cloudera.org/r/1271/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1271/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2010-12-06 23:22:29.259676)&lt;/p&gt;


&lt;p&gt;Review request for hbase, stack and Jonathan Gray.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Removes tabs.&lt;br/&gt;
Format code using multiple of two spaces.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Adopted round-robin assignment as default for regions specified when table is created.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3305&quot; title=&quot;Allow round-robin distribution for table created with multiple regions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3305&quot;&gt;&lt;del&gt;HBASE-3305&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;http://issues.apache.org/jira/browse/HBASE-3305&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/HBASE-3305&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/src/main/java/org/apache/hadoop/hbase/master/HMaster.java 1042922 &lt;br/&gt;
  trunk/src/main/java/org/apache/hadoop/hbase/master/LoadBalancer.java 1042922 &lt;br/&gt;
  trunk/src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java 1042922 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;http://review.cloudera.org/r/1271/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1271/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Put unit tests for this change inside TestAdmin.testCreateTableWithRegions()&lt;br/&gt;
They passed.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Ted&lt;/p&gt;

</comment>
                            <comment id="12969080" author="hbasereviewboard" created="Wed, 8 Dec 2010 00:00:29 +0000"  >&lt;p&gt;Message from: &quot;Jonathan Gray&quot; &amp;lt;jgray@apache.org&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.cloudera.org/r/1271/#review2042&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1271/#review2042&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;Almost there.  Some spacing only changes still in here and need to move out logic into AM method.&lt;/p&gt;


&lt;p&gt;trunk/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1271/#comment6445&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1271/#comment6445&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    still tabbing changes here and next method signature as well&lt;/p&gt;



&lt;p&gt;trunk/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1271/#comment6446&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1271/#comment6446&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    same as stack&apos;s original comment.  this logic should be in AssignmentManager.  I wouldn&apos;t reuse the method &apos;assignAllUserRegions&apos; because it says &quot;all&quot; in it.  A method &apos;assignUserRegions&apos; which takes a list and does a bulk assign w/ round-robin would make sense . &apos;assignAllUserRegions&apos; could then call it once it makes a list of regions.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Jonathan&lt;/li&gt;
&lt;/ul&gt;



</comment>
                            <comment id="12969107" author="hbasereviewboard" created="Wed, 8 Dec 2010 00:58:01 +0000"  >&lt;p&gt;Message from: &quot;Ted Yu&quot; &amp;lt;ted_yu@yahoo.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.cloudera.org/r/1271/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1271/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2010-12-07 16:56:46.150530)&lt;/p&gt;


&lt;p&gt;Review request for hbase, stack and Jonathan Gray.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Added AssignmentManager.assignUserRegions() which is called from createTable() and assignAllUserRegions()&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Adopted round-robin assignment as default for regions specified when table is created.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3305&quot; title=&quot;Allow round-robin distribution for table created with multiple regions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3305&quot;&gt;&lt;del&gt;HBASE-3305&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;http://issues.apache.org/jira/browse/HBASE-3305&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/HBASE-3305&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java 1043216 &lt;br/&gt;
  trunk/src/main/java/org/apache/hadoop/hbase/master/HMaster.java 1043216 &lt;br/&gt;
  trunk/src/main/java/org/apache/hadoop/hbase/master/LoadBalancer.java 1043216 &lt;br/&gt;
  trunk/src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java 1043216 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;http://review.cloudera.org/r/1271/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1271/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Put unit tests for this change inside TestAdmin.testCreateTableWithRegions()&lt;br/&gt;
They passed.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Ted&lt;/p&gt;

</comment>
                            <comment id="12969135" author="hbasereviewboard" created="Wed, 8 Dec 2010 01:53:01 +0000"  >&lt;p&gt;Message from: &quot;Jonathan Gray&quot; &amp;lt;jgray@apache.org&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.cloudera.org/r/1271/#review2047&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1271/#review2047&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;almost &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;


&lt;p&gt;trunk/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1271/#comment6451&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1271/#comment6451&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    why is this and above import of EventType moved in your diff?&lt;/p&gt;



&lt;p&gt;trunk/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1271/#comment6452&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1271/#comment6452&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    white space here and two lines below&lt;/p&gt;



&lt;p&gt;trunk/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1271/#comment6453&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1271/#comment6453&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    put back the previous comment about round-robin, and whitespace (tabs?)&lt;/p&gt;



&lt;p&gt;trunk/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1271/#comment6454&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1271/#comment6454&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Generally it&apos;s not good or &quot;right&quot; to catch, log, and ignore an IE.  How is this handled elsewhere?&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Jonathan&lt;/li&gt;
&lt;/ul&gt;



</comment>
                            <comment id="12969148" author="hbasereviewboard" created="Wed, 8 Dec 2010 02:23:01 +0000"  >&lt;p&gt;Message from: &quot;Ted Yu&quot; &amp;lt;ted_yu@yahoo.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.cloudera.org/r/1271/#review2048&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1271/#review2048&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;trunk/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1271/#comment6455&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1271/#comment6455&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    I wrap InterruptedException in IOException.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Ted&lt;/li&gt;
&lt;/ul&gt;



</comment>
                            <comment id="12969149" author="hbasereviewboard" created="Wed, 8 Dec 2010 02:27:01 +0000"  >&lt;p&gt;Message from: &quot;Ted Yu&quot; &amp;lt;ted_yu@yahoo.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.cloudera.org/r/1271/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1271/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2010-12-07 18:25:05.129171)&lt;/p&gt;


&lt;p&gt;Review request for hbase, stack and Jonathan Gray.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;I used Organize Imports in Eclipse for AssignmentManager&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Adopted round-robin assignment as default for regions specified when table is created.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3305&quot; title=&quot;Allow round-robin distribution for table created with multiple regions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3305&quot;&gt;&lt;del&gt;HBASE-3305&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;http://issues.apache.org/jira/browse/HBASE-3305&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/HBASE-3305&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java 1043216 &lt;br/&gt;
  trunk/src/main/java/org/apache/hadoop/hbase/master/HMaster.java 1043216 &lt;br/&gt;
  trunk/src/main/java/org/apache/hadoop/hbase/master/LoadBalancer.java 1043216 &lt;br/&gt;
  trunk/src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java 1043216 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;http://review.cloudera.org/r/1271/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1271/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Put unit tests for this change inside TestAdmin.testCreateTableWithRegions()&lt;br/&gt;
They passed.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Ted&lt;/p&gt;

</comment>
                            <comment id="12969153" author="hbasereviewboard" created="Wed, 8 Dec 2010 02:31:01 +0000"  >&lt;p&gt;Message from: &quot;Ted Yu&quot; &amp;lt;ted_yu@yahoo.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.cloudera.org/r/1271/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1271/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2010-12-07 18:28:46.368066)&lt;/p&gt;


&lt;p&gt;Review request for hbase, stack and Jonathan Gray.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Reverted movement of imports&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Adopted round-robin assignment as default for regions specified when table is created.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3305&quot; title=&quot;Allow round-robin distribution for table created with multiple regions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3305&quot;&gt;&lt;del&gt;HBASE-3305&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;http://issues.apache.org/jira/browse/HBASE-3305&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/HBASE-3305&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java 1043216 &lt;br/&gt;
  trunk/src/main/java/org/apache/hadoop/hbase/master/HMaster.java 1043216 &lt;br/&gt;
  trunk/src/main/java/org/apache/hadoop/hbase/master/LoadBalancer.java 1043216 &lt;br/&gt;
  trunk/src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java 1043216 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;http://review.cloudera.org/r/1271/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1271/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Put unit tests for this change inside TestAdmin.testCreateTableWithRegions()&lt;br/&gt;
They passed.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Ted&lt;/p&gt;

</comment>
                            <comment id="12969162" author="hbasereviewboard" created="Wed, 8 Dec 2010 03:09:03 +0000"  >&lt;p&gt;Message from: &quot;Jonathan Gray&quot; &amp;lt;jgray@apache.org&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.cloudera.org/r/1271/#review2049&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1271/#review2049&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Ship it!&lt;/p&gt;


&lt;p&gt;looks good, thanks ted!  i will commit the final patch to trunk.&lt;/p&gt;


&lt;p&gt;trunk/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1271/#comment6456&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1271/#comment6456&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    line is &amp;gt; 80 chars but will fix on commit, don&apos;t worry&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Jonathan&lt;/li&gt;
&lt;/ul&gt;



</comment>
                            <comment id="12988309" author="streamy" created="Fri, 28 Jan 2011 23:39:01 +0000"  >&lt;p&gt;Committed to branch and trunk.  Thanks Ted, sorry about the long delay!&lt;/p&gt;</comment>
                            <comment id="12989219" author="hudson" created="Tue, 1 Feb 2011 14:44:06 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #1726 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/HBase-TRUNK/1726/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/HBase-TRUNK/1726/&lt;/a&gt;)&lt;/p&gt;
</comment>
                            <comment id="15017101" author="lars_francke" created="Fri, 20 Nov 2015 12:41:53 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12465321" name="hbase-3305-array.patch" size="10061" author="yuzhihong@gmail.com" created="Sun, 5 Dec 2010 02:00:16 +0000"/>
                            <attachment id="12465329" name="hbase-3305-default-round-robin.patch" size="4328" author="yuzhihong@gmail.com" created="Sun, 5 Dec 2010 06:36:49 +0000"/>
                            <attachment id="12465347" name="hbase-3305-round-robin-unit-test.patch" size="7049" author="yuzhihong@gmail.com" created="Sun, 5 Dec 2010 22:41:25 +0000"/>
                            <attachment id="12465312" name="hbase-3305.patch" size="8707" author="yuzhihong@gmail.com" created="Sat, 4 Dec 2010 21:40:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 5 Dec 2010 01:51:16 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32980</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hlnr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>100771</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>