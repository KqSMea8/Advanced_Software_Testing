<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:05:46 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-9583/HBASE-9583.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-9583] add document for getShortMidpointKey</title>
                <link>https://issues.apache.org/jira/browse/HBASE-9583</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;add the faked key to documentation &lt;a href=&quot;http://hbase.apache.org/book.html#hfilev2&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hbase.apache.org/book.html#hfilev2&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12669461">HBASE-9583</key>
            <summary>add document for getShortMidpointKey</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="xieliang007">Liang Xie</assignee>
                                    <reporter username="xieliang007">Liang Xie</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Sep 2013 14:11:25 +0000</created>
                <updated>Fri, 20 Nov 2015 11:53:30 +0000</updated>
                            <resolved>Fri, 27 Sep 2013 17:39:31 +0000</resolved>
                                    <version>0.98.0</version>
                                    <fixVersion>0.98.0</fixVersion>
                    <fixVersion>0.96.0</fixVersion>
                                    <component>HFile</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13772107" author="jmspaggi" created="Thu, 19 Sep 2013 17:53:57 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xieliang007&quot; class=&quot;user-hover&quot; rel=&quot;xieliang007&quot;&gt;Liang Xie&lt;/a&gt;, are you going to provide a patch for that?&lt;/p&gt;</comment>
                            <comment id="13773746" author="xieliang007" created="Sat, 21 Sep 2013 07:19:05 +0000"  >&lt;p&gt;not start yet, it&apos;d be better if a native speaker could make a patch for it. I&apos;ll make one if nobody take it&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13775648" author="jmhsieh" created="Mon, 23 Sep 2013 20:55:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xieliang007&quot; class=&quot;user-hover&quot; rel=&quot;xieliang007&quot;&gt;Liang Xie&lt;/a&gt; Write draft with the content, and we&apos;ll do a pass to make it more native speaker sounding?&lt;/p&gt;</comment>
                            <comment id="13775923" author="xieliang007" created="Tue, 24 Sep 2013 02:05:08 +0000"  >&lt;p&gt;sound good to me, let me try it today&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13776170" author="xieliang007" created="Tue, 24 Sep 2013 10:12:54 +0000"  >&lt;p&gt;please help to review, thanks!&lt;br/&gt;
it costs more than one hour, seems to me, it&apos;s more difficult to write doc than coding&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13776731" author="jmspaggi" created="Tue, 24 Sep 2013 20:48:56 +0000"  >&lt;p&gt;Some might want to take a look took because I&apos;m neither native English, but here is my review:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Before HBASE-7845, &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; finalizing a data block (e.g. reach blocksize setting or close file), HBase picks up the start key of current data block as an index entry adding into the current leaf index block, however in some way, indexing on the stop key of previous data block can be treated as a better choice (see HBASE-5987 and HBASE-4443 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; more details). It&apos;s not an easy thing to change &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; behavior without refactoring lots of low level codes. HBASE-7845 implemented the getShortMidpointKey method which is similar with Leveldb&apos;s ByteWiseComparatorImpl::FindShortestSeparator() and FindShortSuccessor(). The core of getShortMidpointKey is to generate a &lt;span class=&quot;code-quote&quot;&gt;&quot;virtual&quot;&lt;/span&gt; key bigger than the stop key of previous data block, and smaller or equal to the start key of the current data block. The gap between the stop key of previous data block and the &lt;span class=&quot;code-quote&quot;&gt;&quot;virtual&quot;&lt;/span&gt; key is as small as possible. Also we make sure that the length of the &lt;span class=&quot;code-quote&quot;&gt;&quot;virtual&quot;&lt;/span&gt; key is as small as possible. e.g. the stop key of previous block is &lt;span class=&quot;code-quote&quot;&gt;&quot;the quick brown fox&quot;&lt;/span&gt;, the start key of current block is &lt;span class=&quot;code-quote&quot;&gt;&quot;the who&quot;&lt;/span&gt;, then getShortMidpointKey can generate a &lt;span class=&quot;code-quote&quot;&gt;&quot;virtual&quot;&lt;/span&gt; key like &lt;span class=&quot;code-quote&quot;&gt;&quot;the r&quot;&lt;/span&gt; as the &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; index entry. It brings two benefits at least:1) Reduce the hfile data index size. 2) Avoid extra seeking to the previous data block request &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the target key is in the range of [&lt;span class=&quot;code-quote&quot;&gt;&quot;virtual key&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;start key of current block&quot;&lt;/span&gt;]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13777131" author="xieliang007" created="Wed, 25 Sep 2013 04:06:38 +0000"  >&lt;p&gt;uploaded v2 per &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jmspaggi&quot; class=&quot;user-hover&quot; rel=&quot;jmspaggi&quot;&gt;Jean-Marc Spaggiari&lt;/a&gt;&apos;s comments&lt;/p&gt;</comment>
                            <comment id="13779452" author="jmhsieh" created="Thu, 26 Sep 2013 23:34:33 +0000"  >&lt;p&gt;I&apos;m going to give it an editing pass &amp;#8211; fix some typos an reorganize a little.&lt;/p&gt;</comment>
                            <comment id="13779483" author="jmhsieh" created="Fri, 27 Sep 2013 00:17:01 +0000"  >&lt;p&gt;HFiles contain many blocks that contain a range of sorted Cells.  Each cell has a key.  To save IO when reading Cells, the HFile also has an index that maps a Cell&apos;s start key to the offset of the beginning of a particular block.  Prior to this optimization, HBase would use the key of the first cell in each data block as the index key.  &lt;/p&gt;

&lt;p&gt;In &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7845&quot; title=&quot;optimize hfile index key&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7845&quot;&gt;&lt;del&gt;HBASE-7845&lt;/del&gt;&lt;/a&gt;, we generate a new key that is lexicographically larger than the last key of the previous block and lexicographically equal or smaller than the start key of the current block.  While actual keys can potentially be very long, this &quot;fake key&quot; or &quot;virtual key&quot; can be much shorter.  For example, if the stop key of previous block is &quot;the quick brown fox&quot;, the start key of current block is &quot;the who&quot;, we could use &quot;the r&quot; as our virtual key in our hfile index. &lt;/p&gt;

&lt;p&gt;There are two benefits to this: &lt;br/&gt;
  1) having shorter keys reduces the hfile index size, (allowing us to keep more indexes in memory), and &lt;br/&gt;
  2) using something closer to the end key of the previous block allows us to avoid a potential extra IO when the target key lives in between the &quot;virtual key&quot; and the key of the first element in the target block.&lt;/p&gt;

&lt;p&gt;This optimization (implemented by the getShortMidpointKey method) is inspired by LevelDB&apos;s ByteWiseComparatorImpl::FindShortestSeparator() and FindShortSuccessor().  &lt;/p&gt;</comment>
                            <comment id="13779579" author="xieliang007" created="Fri, 27 Sep 2013 02:38:06 +0000"  >&lt;p&gt;attached v3 rev took &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jmhsieh&quot; class=&quot;user-hover&quot; rel=&quot;jmhsieh&quot;&gt;Jonathan Hsieh&lt;/a&gt;&apos;s latest comments&lt;/p&gt;</comment>
                            <comment id="13780134" author="jmhsieh" created="Fri, 27 Sep 2013 17:39:31 +0000"  >&lt;p&gt;Thanks Liang Xie and JMS.   This will get published next time we push the website.&lt;/p&gt;</comment>
                            <comment id="13780291" author="hudson" created="Fri, 27 Sep 2013 19:25:56 +0000"  >&lt;p&gt;SUCCESS: Integrated in hbase-0.96 #102 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.96/102/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.96/102/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9583&quot; title=&quot;add document for getShortMidpointKey&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9583&quot;&gt;&lt;del&gt;HBASE-9583&lt;/del&gt;&lt;/a&gt; add documentation for getShortMidpointKey (Liang Xie) (jmhsieh: rev 1526993)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.96/src/main/docbkx/book.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13780394" author="hudson" created="Fri, 27 Sep 2013 21:03:37 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #4569 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4569/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4569/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9583&quot; title=&quot;add document for getShortMidpointKey&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9583&quot;&gt;&lt;del&gt;HBASE-9583&lt;/del&gt;&lt;/a&gt; add documentation for getShortMidpointKey (Liang Xie) (jmhsieh: rev 1526992)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/docbkx/book.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13780615" author="hudson" created="Sat, 28 Sep 2013 00:34:54 +0000"  >&lt;p&gt;FAILURE: Integrated in hbase-0.96-hadoop2 #62 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.96-hadoop2/62/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.96-hadoop2/62/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9583&quot; title=&quot;add document for getShortMidpointKey&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9583&quot;&gt;&lt;del&gt;HBASE-9583&lt;/del&gt;&lt;/a&gt; add documentation for getShortMidpointKey (Liang Xie) (jmhsieh: rev 1526993)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.96/src/main/docbkx/book.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13780622" author="hudson" created="Sat, 28 Sep 2013 00:50:26 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #766 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/766/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/766/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9583&quot; title=&quot;add document for getShortMidpointKey&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9583&quot;&gt;&lt;del&gt;HBASE-9583&lt;/del&gt;&lt;/a&gt; add documentation for getShortMidpointKey (Liang Xie) (jmhsieh: rev 1526992)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/docbkx/book.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15015996" author="lars_francke" created="Fri, 20 Nov 2015 11:53:30 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12604960" name="HBase-9583-v2.txt" size="2035" author="xieliang007" created="Wed, 25 Sep 2013 04:06:11 +0000"/>
                            <attachment id="12605376" name="HBase-9583-v3.txt" size="2164" author="xieliang007" created="Fri, 27 Sep 2013 02:37:30 +0000"/>
                            <attachment id="12604768" name="HBase-9583.txt" size="2039" author="xieliang007" created="Tue, 24 Sep 2013 10:09:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 19 Sep 2013 17:53:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>349393</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1o8u7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>349691</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>