<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:43:28 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-13452/HBASE-13452.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-13452] HRegion warning about memstore size miscalculation is not actionable</title>
                <link>https://issues.apache.org/jira/browse/HBASE-13452</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;During normal operation the HRegion class reports a message related to memstore flushing in HRegion.class :&lt;/p&gt;

&lt;p&gt;      if (!canFlush) &lt;/p&gt;
{
        addAndGetGlobalMemstoreSize(-memstoreSize.get());
      }
&lt;p&gt; else if (memstoreSize.get() != 0) &lt;/p&gt;
{
        LOG.error(&quot;Memstore size is &quot; + memstoreSize.get());
      }

&lt;p&gt;The log file is filled with lots of &lt;/p&gt;

&lt;p&gt;Memstore size is 558744&lt;br/&gt;
Memstore size is 4390632&lt;br/&gt;
Memstore size is 558744 &lt;br/&gt;
...&lt;/p&gt;

&lt;p&gt;These message are uninformative, clog up the logs and offers no root cause nor solution. Maybe the message needs to be more informative, changed to WARN or some further information provided.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12820072">HBASE-13452</key>
            <summary>HRegion warning about memstore size miscalculation is not actionable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="devl.development">Dev Lakhani</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Apr 2015 13:48:10 +0000</created>
                <updated>Sat, 18 Jun 2016 02:36:01 +0000</updated>
                                            <version>1.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>1.4.0</fixVersion>
                    <fixVersion>1.3.1</fixVersion>
                                        <due></due>
                            <votes>5</votes>
                                    <watches>12</watches>
                                                                <comments>
                            <comment id="14490049" author="apurtell" created="Fri, 10 Apr 2015 18:19:31 +0000"  >&lt;p&gt;This came in on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10514&quot; title=&quot;Forward port HBASE-10466, possible data loss when failed flushes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10514&quot;&gt;&lt;del&gt;HBASE-10514&lt;/del&gt;&lt;/a&gt;. Ping &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;. Can we remove this or does this amount to a lurking FIXME ? &lt;/p&gt;</comment>
                            <comment id="14490064" author="stack" created="Fri, 10 Apr 2015 18:25:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt; Looks bad to me that our size calculation is &apos;off&apos;. We depend on it being correct.&lt;/p&gt;</comment>
                            <comment id="14490068" author="stack" created="Fri, 10 Apr 2015 18:26:22 +0000"  >&lt;p&gt;Need to figure root cause of the &apos;error&apos; message. Making blocker.&lt;/p&gt;</comment>
                            <comment id="14490070" author="apurtell" created="Fri, 10 Apr 2015 18:26:40 +0000"  >&lt;p&gt;Cool, I updated the summary too&lt;/p&gt;</comment>
                            <comment id="14490102" author="devl.development" created="Fri, 10 Apr 2015 18:45:11 +0000"  >&lt;p&gt;Just so you know the example above:&lt;/p&gt;

&lt;p&gt;Memstore size is: 190192&lt;br/&gt;
Memstore size is: 442232&lt;br/&gt;
Memstore size is: 190192&lt;/p&gt;

&lt;p&gt;is just an example of made up data, I was unable to paste the actual log. However as mentioned below the root cause should be known and more information should be provided on the log message.&lt;/p&gt;</comment>
                            <comment id="14496487" author="mantonov" created="Wed, 15 Apr 2015 16:42:38 +0000"  >&lt;p&gt;Technically, this error message is shown when we calculate the flushable size of each memstore in internalPrepareFlushCache(), sum up and subtract from membstoreSize of the region.&lt;/p&gt;

&lt;p&gt;Also, in this method there&apos;s call:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; s = &lt;span class=&quot;code-quote&quot;&gt;&quot;Finished memstore snapshotting &quot;&lt;/span&gt; + &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; +
        &lt;span class=&quot;code-quote&quot;&gt;&quot;, syncing WAL and waiting on mvcc, flushsize=&quot;&lt;/span&gt; + totalFlushableSizeOfFlushableStores;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;which should&apos;ve been present in the logs, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=devl.development&quot; class=&quot;user-hover&quot; rel=&quot;devl.development&quot;&gt;Dev Lakhani&lt;/a&gt; - did you have it in the logs? How does it compare to the numbers you cites?&lt;/p&gt;

&lt;p&gt;I&apos;ll look at it more.&lt;/p&gt;</comment>
                            <comment id="14496711" author="enis" created="Wed, 15 Apr 2015 19:05:27 +0000"  >&lt;p&gt;Agreed, the warning message should be more descriptive. In cases where the memstore size is not 0, we log it, since it may indicate a data loss. It can either be that the size calculation is off, or we skip memstore flush in close(). If the region server is aborting we skip the memstore flush for example. Is it the case? &lt;/p&gt;</comment>
                            <comment id="14501268" author="devl.development" created="Sat, 18 Apr 2015 11:11:56 +0000"  >&lt;p&gt;I don&apos;t see that anywhere before or after the &quot;Memstore size&quot; error or indeed anywhere in our logs for master and regions. We have INFO level logging though.&lt;/p&gt;

&lt;p&gt;Real examples of memstore sizes are:&lt;/p&gt;

&lt;p&gt;Memstore size is 4390632&lt;br/&gt;
Memstore size is 558744&lt;br/&gt;
Memstore size is 4390632&lt;br/&gt;
Memstore size is 558744 &lt;/p&gt;</comment>
                            <comment id="14501269" author="devl.development" created="Sat, 18 Apr 2015 11:12:00 +0000"  >&lt;p&gt;I don&apos;t see that anywhere before or after the &quot;Memstore size&quot; error or indeed anywhere in our logs for master and regions. We have INFO level logging though.&lt;/p&gt;

&lt;p&gt;Real examples of memstore sizes are:&lt;/p&gt;

&lt;p&gt;Memstore size is 4390632&lt;br/&gt;
Memstore size is 558744&lt;br/&gt;
Memstore size is 4390632&lt;br/&gt;
Memstore size is 558744 &lt;/p&gt;</comment>
                            <comment id="14516432" author="ndimiduk" created="Tue, 28 Apr 2015 05:53:58 +0000"  >&lt;p&gt;Kicking out of 1.1.0, dropping to Critical. Do bring it back if a patch surfaces.&lt;/p&gt;</comment>
                            <comment id="14526459" author="mantonov" created="Mon, 4 May 2015 09:37:52 +0000"  >&lt;p&gt;Oops, somehow I stopped receiving email notifications and this jira slid off my plate &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Sorry. I&apos;ll try to take a look at it tomorrow.&lt;/p&gt;</comment>
                            <comment id="14610491" author="busbey" created="Wed, 1 Jul 2015 15:43:12 +0000"  >&lt;p&gt;bumping out of 1.2.0.&lt;/p&gt;</comment>
                            <comment id="14654525" author="ndimiduk" created="Tue, 4 Aug 2015 23:30:00 +0000"  >&lt;p&gt;Bumping from 1.1.2.&lt;/p&gt;</comment>
                            <comment id="14934795" author="ndimiduk" created="Tue, 29 Sep 2015 07:40:32 +0000"  >&lt;p&gt;Any movement here?&lt;/p&gt;</comment>
                            <comment id="14936082" author="mantonov" created="Tue, 29 Sep 2015 23:22:12 +0000"  >&lt;p&gt;No, no movement yet, sorry.&lt;/p&gt;</comment>
                            <comment id="14936085" author="mantonov" created="Tue, 29 Sep 2015 23:22:53 +0000"  >&lt;p&gt;I&apos;ll try to get back to it, but feel free to reassign if you&apos;d like.&lt;/p&gt;</comment>
                            <comment id="14988749" author="apurtell" created="Wed, 4 Nov 2015 02:18:21 +0000"  >&lt;p&gt;No movement. Unscheduled except from master and branch-1.&lt;/p&gt;</comment>
                            <comment id="15337445" author="mantonov" created="Sat, 18 Jun 2016 02:35:40 +0000"  >&lt;p&gt;Dropped to major and kicked to 1.4&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 10 Apr 2015 18:19:31 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            25 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2d3ov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>