<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:17:41 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-4301/HBASE-4301.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-4301] META migration from 0.90 to trunk fails</title>
                <link>https://issues.apache.org/jira/browse/HBASE-4301</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;I started a trunk cluster as an upgrade from 0.90.4ish, and now I can&apos;t scan my .META. table, etc, and other operations fail.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12520797">HBASE-4301</key>
            <summary>META migration from 0.90 to trunk fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="iamknome">Subbu M Iyer</assignee>
                                    <reporter username="tlipcon">Todd Lipcon</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Aug 2011 19:49:10 +0000</created>
                <updated>Fri, 20 Nov 2015 11:52:54 +0000</updated>
                            <resolved>Fri, 9 Sep 2011 20:09:50 +0000</resolved>
                                    <version>0.92.0</version>
                                    <fixVersion>0.92.0</fixVersion>
                                    <component>master</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13094035" author="tlipcon" created="Tue, 30 Aug 2011 19:56:36 +0000"  >&lt;p&gt;Interestnig. It appears that something&apos;s actually up with my .META. - I can&apos;t even scan it. So, the &quot;disable&quot; command is getting TablenotFoundException on .META., and thus it&apos;s mis-reporting the error.&lt;/p&gt;</comment>
                            <comment id="13094286" author="iamknome" created="Wed, 31 Aug 2011 03:45:51 +0000"  >&lt;p&gt;Hi Todd,&lt;/p&gt;

&lt;p&gt;Can you check your master log and let me know if you see &quot;Meta has HRI with HTDs. Updating meta now.&quot; and &quot;Meta updated with new HRI.&quot; and &quot;Updated &lt;del&gt;ROOT&lt;/del&gt; row with metaMigrated status = true&quot; ?&lt;/p&gt;

&lt;p&gt;So, just FYI: &lt;/p&gt;

&lt;p&gt;We migrate old HRI&apos;s (i.e HRI with HTD information) to new HRI (with out HTD, and creating the HTD&apos;s in HDFS) at server startup for the first time and if the process is successful we also update &lt;del&gt;ROOT&lt;/del&gt; with a flag metaMigrated=true.&lt;/p&gt;

&lt;p&gt;Based on your symptoms it seems to me that either the migration did not go through properly, or some thing else is missing, and we need to troubleshoot further to determine the root cause and the resolution.&lt;/p&gt;

&lt;p&gt;Please let me know what you see in your logs and also if possible post your logs.&lt;/p&gt;

&lt;p&gt;thanks&lt;br/&gt;
Subbu&lt;/p&gt;</comment>
                            <comment id="13094290" author="iamknome" created="Wed, 31 Aug 2011 03:49:06 +0000"  >&lt;p&gt;Sorry missed your log attachment. &lt;/p&gt;

&lt;p&gt;From the log it seems that the meta migration went through fine and I do see that all tables have .tableinfo created in HDFS. Can you validate in your HDFS whether you see .tableinfo for all your tables?&lt;/p&gt;

&lt;p&gt;Let me go over the log to see if there is some thing else that related to meta migration.&lt;/p&gt;

&lt;p&gt;Subbu&lt;/p&gt;</comment>
                            <comment id="13094292" author="tlipcon" created="Wed, 31 Aug 2011 03:53:45 +0000"  >&lt;p&gt;I have .tableinfo for my user tables, but not for &lt;del&gt;ROOT&lt;/del&gt; or .META. The same is true, though, of a fresh trunk cluster I started later, so I don&apos;t think that&apos;s the issue.&lt;/p&gt;

&lt;p&gt;It&apos;s worth noting that I did the upgrade following an unclean shutdown of 0.90, if that helps your attempts to understand.&lt;/p&gt;</comment>
                            <comment id="13094335" author="anih" created="Wed, 31 Aug 2011 06:10:17 +0000"  >&lt;p&gt;I have situation when after upgrading to trunk even scanning META show TableNotFoundException. Full logs with DEBUG are here: &lt;a href=&quot;http://s2.e-back.net/hbase_logs2.tar.gz&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://s2.e-back.net/hbase_logs2.tar.gz&lt;/a&gt; , thread on mailing list: &lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/hbase-dev/201108.mbox/%3C4E442574.20103@ugame.net.pl%3E&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://mail-archives.apache.org/mod_mbox/hbase-dev/201108.mbox/%3C4E442574.20103@ugame.net.pl%3E&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13094549" author="iamknome" created="Wed, 31 Aug 2011 14:03:50 +0000"  >&lt;p&gt;Todd,&lt;/p&gt;

&lt;p&gt;From startup log it seems that ROOT and META were assigned fine, followed by meta migration and user region assignment. I do see that all 101 regions were assigned, but noticing a disable table request after that.&lt;/p&gt;

&lt;p&gt;11/08/30 12:44:05 INFO master.AssignmentManager: Bulk assigning done&lt;br/&gt;
11/08/30 12:44:05 INFO master.HMaster: Master has completed initialization&lt;br/&gt;
11/08/30 12:44:06 WARN master.AssignmentManager: Received OPENED for region 08027caad32ade9887e6da234ba4d2a2 from server c0336.xxxxxxxxx,60020,1314733427177 but region was in  the state usertable,user807964132,1314670560271.08027caad32ade9887e6da234ba4d2a2. state=OPEN, ts=1314733445675, server=c0336.xxxxxxxxx,60020,1314733427177 and not in expected PENDING_OPEN or OPENING states&lt;br/&gt;
11/08/30 12:45:38 INFO handler.DisableTableHandler: Attemping to disable table usertable&lt;br/&gt;
11/08/30 12:45:38 INFO handler.DisableTableHandler: Offlining 101 regions.&lt;/p&gt;

&lt;p&gt;Similar patter for table t1:&lt;/p&gt;

&lt;p&gt;11/08/30 12:53:09 INFO master.AssignmentManager: Bulk assigning done&lt;br/&gt;
11/08/30 12:53:09 INFO master.AssignmentManager: c0317.xxxxxxxxx,60020,1314733427170 unassigned znodes=1 of total=1&lt;br/&gt;
11/08/30 12:53:09 WARN master.AssignmentManager: Node deleted but still in RIT: t1,,1314733988388.8e368edb82720ee77312988c9d4cf496. state=OPEN, ts=1314733989131, server=c0317.xxxxxxxxx,60020,1314733427170&lt;br/&gt;
11/08/30 12:53:19 INFO handler.DisableTableHandler: Attemping to disable table t1&lt;br/&gt;
11/08/30 12:53:19 INFO handler.DisableTableHandler: Offlining 1 regions.&lt;/p&gt;


&lt;p&gt;were you manually trying to &apos;disable&apos; these tables?&lt;/p&gt;

</comment>
                            <comment id="13094713" author="tlipcon" created="Wed, 31 Aug 2011 17:29:36 +0000"  >&lt;p&gt;Yep, I was trying to drop the tables. The disable command worked fine, but the &quot;drop&quot; afterwards failed with the TableNotFoundException for META.&lt;/p&gt;

&lt;p&gt;Scanning ROOT succeeded, scanning META threw TNFE&lt;/p&gt;</comment>
                            <comment id="13094717" author="iamknome" created="Wed, 31 Aug 2011 17:46:10 +0000"  >&lt;p&gt;Todd,&lt;/p&gt;

&lt;p&gt;You mentioned you are seeing the same problem in a fresh cluster as&lt;br/&gt;
well. Could you post me that log?&lt;/p&gt;

&lt;p&gt;thanks&lt;br/&gt;
Subbu&lt;/p&gt;
</comment>
                            <comment id="13094722" author="tlipcon" created="Wed, 31 Aug 2011 17:49:29 +0000"  >&lt;p&gt;On the fresh cluster, I see that there are no .tableinfo for META and ROOT. But, scan .META. works fine.&lt;/p&gt;</comment>
                            <comment id="13094735" author="iamknome" created="Wed, 31 Aug 2011 18:06:09 +0000"  >&lt;p&gt;Are you also able to create new table, get, put, disable, truncate etc&lt;br/&gt;
on fresh cluster?&lt;/p&gt;

&lt;p&gt;If so, I think the problem can be isolated to a migration from prior&lt;br/&gt;
version to latest trunk.&lt;/p&gt;

</comment>
                            <comment id="13094741" author="tlipcon" created="Wed, 31 Aug 2011 18:11:08 +0000"  >&lt;p&gt;Yes, my fresh cluster can do all those things fine. Most likely a migration issue. I can try to repro at some point.&lt;/p&gt;</comment>
                            <comment id="13094821" author="iamknome" created="Wed, 31 Aug 2011 19:34:09 +0000"  >&lt;p&gt;I think I know what the root cause of this problem might be:&lt;/p&gt;

&lt;p&gt;Todd, you mentioned that you are not seeing the .tableinfo for &lt;del&gt;ROOT&lt;/del&gt;&lt;br/&gt;
and .META. for both fresh startup cluster as well as migrated one&lt;br/&gt;
which is a problem. We must have .tableinfo for all the tables&lt;br/&gt;
including ROOT and META.&lt;/p&gt;

&lt;p&gt;In the case of the migration from older version to trunk, the&lt;br/&gt;
tableinfo data for .META. and &lt;del&gt;ROOT&lt;/del&gt; are not getting created. We&lt;br/&gt;
originally had this taken care by creating the .tableinfo at create&lt;br/&gt;
region time which would address both older migration as well as fresh&lt;br/&gt;
start cases.&lt;/p&gt;

&lt;p&gt;Long story short, we need to patch this by making master create the&lt;br/&gt;
ROOT and META tableinfo at startup (if required, only once during&lt;br/&gt;
first time start up).&lt;/p&gt;

&lt;p&gt;In MasterFileSystem we might do some thing like:&lt;/p&gt;


&lt;p&gt;324 	if (!FSUtils.rootRegionExists(fs, rd)) &lt;/p&gt;
{
325 	bootstrap(rd, c);
326 	}

&lt;p&gt;       // Create META and ROOT tableInfo if required.&lt;/p&gt;

&lt;p&gt;	if (!FSUtils.rootTableInfoExists(fs, rd)) &lt;/p&gt;
{	
	FSUtils.createTableDescriptor(HTableDescriptor.ROOT_TABLEDESC, this.conf);
	FSUtils.createTableDescriptor(HTableDescriptor.META_TABLEDESC, this.conf);
	}

&lt;p&gt;Stack: Can you take this since I am out?&lt;/p&gt;

&lt;p&gt;thanks&lt;br/&gt;
Subbu&lt;/p&gt;
</comment>
                            <comment id="13094910" author="yuzhihong@gmail.com" created="Wed, 31 Aug 2011 21:25:47 +0000"  >&lt;p&gt;This is the patch Subbu mentioned.&lt;br/&gt;
Running tests now.&lt;/p&gt;</comment>
                            <comment id="13094994" author="yuzhihong@gmail.com" created="Wed, 31 Aug 2011 23:32:51 +0000"  >&lt;p&gt;All tests passed based on the posted patch.&lt;/p&gt;</comment>
                            <comment id="13095059" author="iamknome" created="Thu, 1 Sep 2011 01:27:09 +0000"  >&lt;p&gt;Todd,&lt;/p&gt;

&lt;p&gt;Can you validate if this addresses your issue?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;

&lt;p&gt;Sent from my iPhone&lt;/p&gt;

</comment>
                            <comment id="13095062" author="tlipcon" created="Thu, 1 Sep 2011 01:29:53 +0000"  >&lt;p&gt;Next time I switch a cluster between 90 and trunk, I&apos;ll let you know &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Currently I&apos;m in the middle of some tests on my big test cluster, so may be several days before I can validate the patch. It seems likely that you could validate it on a single node, though?&lt;/p&gt;</comment>
                            <comment id="13095804" author="anih" created="Fri, 2 Sep 2011 06:49:49 +0000"  >&lt;p&gt;I had try this patch on broken instance, with trunk running on it before and added some logs and it doesn&apos;t help. &lt;/p&gt;

&lt;p&gt;In myFSUtils.rootTableInfoExists(fs, rd) return true, so FSUtils.createTableDescriptor isn&apos;t run on my instance and scanning META still raise TableNotFoundException.&lt;/p&gt;</comment>
                            <comment id="13095822" author="anih" created="Fri, 2 Sep 2011 07:04:11 +0000"  >&lt;p&gt;Even checking ROOT and META tableInfoExists(as in 4301_v2 patch) says that my instance have it&lt;/p&gt;</comment>
                            <comment id="13095832" author="yuzhihong@gmail.com" created="Fri, 2 Sep 2011 07:16:08 +0000"  >&lt;p&gt;@Sebastian:&lt;br/&gt;
Thanks for your investigation.&lt;/p&gt;

&lt;p&gt;You may have noticed the following method in FSUtils:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; HTableDescriptor getTableDescriptor(FileSystem fs, Path tableDir)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;which calls hTableDescriptor.readFields().&lt;br/&gt;
You can write a short standalone program utilizing FSUtils.getTableDescriptor() to analyze what is inside .tableinfo for .META. table.&lt;/p&gt;

&lt;p&gt;If you don&apos;t time for the above action, please attach log snippet showing more details around TableNotFoundException. The log Todd posted doesn&apos;t give me much clue.&lt;/p&gt;</comment>
                            <comment id="13095838" author="yuzhihong@gmail.com" created="Fri, 2 Sep 2011 07:26:20 +0000"  >&lt;p&gt;First step should be analyzing contents of &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;-ROOT-&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; table.&lt;/p&gt;</comment>
                            <comment id="13095864" author="anih" created="Fri, 2 Sep 2011 08:44:54 +0000"  >&lt;p&gt;This is what i get from HTableDescriptor.toString():&lt;br/&gt;
{NAME =&amp;gt; &apos;&lt;del&gt;ROOT&lt;/del&gt;&apos;, IS_ROOT =&amp;gt; &apos;true&apos;, IS_META =&amp;gt; &apos;true&apos;, FAMILIES =&amp;gt; [&lt;/p&gt;
{NAME =&amp;gt; &apos;info&apos;, BLOOMFILTER =&amp;gt; &apos;NONE&apos;, REPLICATION_SCOPE =&amp;gt; &apos;0&apos;, VERSIONS =&amp;gt; &apos;10&apos;, COMPRESSION =&amp;gt; &apos;NONE&apos;, MIN_VERSIONS =&amp;gt; &apos;0&apos;, TTL =&amp;gt; &apos;2147483647&apos;, BLOCKSIZE =&amp;gt; &apos;8192&apos;, IN_MEMORY =&amp;gt; &apos;true&apos;, BLOCKCACHE =&amp;gt; &apos;true&apos;}]}&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
{NAME =&amp;gt; &apos;.META.&apos;, IS_META =&amp;gt; &apos;true&apos;, FAMILIES =&amp;gt; [{NAME =&amp;gt; &apos;info&apos;, BLOOMFILTER =&amp;gt; &apos;NONE&apos;, REPLICATION_SCOPE =&amp;gt; &apos;0&apos;, VERSIONS =&amp;gt; &apos;10&apos;, COMPRESSION =&amp;gt; &apos;NONE&apos;, MIN_VERSIONS =&amp;gt; &apos;0&apos;, TTL =&amp;gt; &apos;2147483647&apos;, BLOCKSIZE =&amp;gt; &apos;8192&apos;, IN_MEMORY =&amp;gt; &apos;true&apos;, BLOCKCACHE =&amp;gt; &apos;true&apos;}
&lt;p&gt;]}&lt;/p&gt;</comment>
                            <comment id="13095992" author="yuzhihong@gmail.com" created="Fri, 2 Sep 2011 14:01:13 +0000"  >&lt;p&gt;@Sebastian:&lt;br/&gt;
Can you post log showing more details for TableNotFoundException ?&lt;br/&gt;
Your case seems to be different from Todd&apos;s.&lt;/p&gt;</comment>
                            <comment id="13096008" author="anih" created="Fri, 2 Sep 2011 14:20:47 +0000"  >&lt;p&gt;Todd&apos;s TableNotFoundException was when master starting, mine is when i try to do any operation on tables:&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;main&quot; org.apache.hadoop.hbase.client.RetriesExhaustedException: Trying to contact region server null for region , row &apos;&apos;, but failed after 10 attempts.&lt;br/&gt;
Exceptions:&lt;br/&gt;
org.apache.hadoop.hbase.TableNotFoundException: Table &apos;.META.&apos; was not found.&lt;br/&gt;
org.apache.hadoop.hbase.TableNotFoundException: Table &apos;.META.&apos; was not found.&lt;br/&gt;
org.apache.hadoop.hbase.TableNotFoundException: Table &apos;.META.&apos; was not found.&lt;br/&gt;
org.apache.hadoop.hbase.TableNotFoundException: Table &apos;.META.&apos; was not found.&lt;br/&gt;
org.apache.hadoop.hbase.TableNotFoundException: Table &apos;.META.&apos; was not found.&lt;br/&gt;
org.apache.hadoop.hbase.TableNotFoundException: Table &apos;.META.&apos; was not found.&lt;br/&gt;
org.apache.hadoop.hbase.TableNotFoundException: Table &apos;.META.&apos; was not found.&lt;br/&gt;
org.apache.hadoop.hbase.TableNotFoundException: Table &apos;.META.&apos; was not found.&lt;br/&gt;
org.apache.hadoop.hbase.TableNotFoundException: Table &apos;.META.&apos; was not found.&lt;br/&gt;
org.apache.hadoop.hbase.TableNotFoundException: Table &apos;.META.&apos; was not found.&lt;/p&gt;

&lt;p&gt;	at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.getRegionServerWithRetries(HConnectionManager.java:1245)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.MetaScanner.metaScan(MetaScanner.java:194)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.MetaScanner.access$000(MetaScanner.java:52)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.MetaScanner$1.connect(MetaScanner.java:130)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.MetaScanner$1.connect(MetaScanner.java:127)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.HConnectionManager.execute(HConnectionManager.java:340)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.MetaScanner.metaScan(MetaScanner.java:127)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.MetaScanner.metaScan(MetaScanner.java:103)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.MetaScanner.metaScan(MetaScanner.java:81)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.MetaScanner.metaScan(MetaScanner.java:65)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.MetaScanner.listAllRegions(MetaScanner.java:269)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.MetaScanner.listAllRegions(MetaScanner.java:236)&lt;br/&gt;
	at gl.tools.TableDescriptor.doMain(TableDescriptor.java:24)&lt;/p&gt;</comment>
                            <comment id="13096169" author="yuzhihong@gmail.com" created="Fri, 2 Sep 2011 18:01:49 +0000"  >&lt;p&gt;Summarizing Sebastian&apos;s scenario:&lt;br/&gt;
First attempt on that cluster was made about 2011-08-19.&lt;br/&gt;
Then patched TRUNK was loaded.&lt;br/&gt;
.tableinfo for ROOT and .META. have timestamp of 2011-09-02 08:19&lt;/p&gt;

&lt;p&gt;The patch is supposed to be applied before the first attempt of migration.&lt;/p&gt;</comment>
                            <comment id="13096176" author="anih" created="Fri, 2 Sep 2011 18:08:37 +0000"  >&lt;p&gt;I have hadoop directory with backup before upgrading to TRUNK so i need about half an hour to unpack it and test with patched TRUNK &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13096213" author="anih" created="Fri, 2 Sep 2011 19:01:44 +0000"  >&lt;p&gt;unfortunately after clean upgrade from backup running before branch-0.90 to patched TRUNK i still cannot even scan .META. with ./hbase shell&lt;/p&gt;

&lt;p&gt;with v2 patch i get this:&lt;/p&gt;

&lt;p&gt;2011-09-02 20:49:30,473 INFO org.apache.hadoop.hbase.master.SplitLogManager: found 0 orphan tasks and 0 rescan nodes&lt;br/&gt;
2011-09-02 20:49:30,787 INFO org.apache.hadoop.hbase.master.MasterFileSystem: Creating HTableDescriptor for ROOT tables&lt;br/&gt;
2011-09-02 20:49:30,788 INFO org.apache.hadoop.hbase.util.FSUtils: Current tableInfoPath = hdfs://lala.golden:50001/hbase/&lt;del&gt;ROOT&lt;/del&gt;/.tableinfo&lt;br/&gt;
2011-09-02 20:49:30,790 INFO org.apache.hadoop.hbase.util.FSUtils: TableInfoPath = hdfs://lala.golden:50001/hbase/&lt;del&gt;ROOT&lt;/del&gt;/.tableinfo tmpPath = hdfs://lala.golden:50001/hbase/&lt;del&gt;ROOT&lt;/del&gt;/.tmp/.tableinfo&lt;br/&gt;
2011-09-02 20:49:30,862 INFO org.apache.hadoop.hbase.util.FSUtils: TableDescriptor stored. TableInfoPath = hdfs://lala.golden:50001/hbase/&lt;del&gt;ROOT&lt;/del&gt;/.tableinfo&lt;br/&gt;
2011-09-02 20:49:30,864 INFO org.apache.hadoop.hbase.master.MasterFileSystem: Creating HTableDescriptor for .META. tables&lt;br/&gt;
2011-09-02 20:49:30,865 INFO org.apache.hadoop.hbase.util.FSUtils: Current tableInfoPath = hdfs://lala.golden:50001/hbase/.META./.tableinfo&lt;br/&gt;
2011-09-02 20:49:30,866 INFO org.apache.hadoop.hbase.util.FSUtils: TableInfoPath = hdfs://lala.golden:50001/hbase/.META./.tableinfo tmpPath = hdfs://lala.golden:50001/hbase/.META./.tmp/.tableinfo&lt;br/&gt;
2011-09-02 20:49:30,877 INFO org.apache.hadoop.hbase.util.FSUtils: TableDescriptor stored. TableInfoPath = hdfs://lala.golden:50001/hbase/.META./.tableinfo&lt;/p&gt;

&lt;p&gt;and later:&lt;/p&gt;

&lt;p&gt;2011-09-02 20:50:40,374 INFO org.apache.hadoop.hbase.catalog.CatalogTracker: Passed metaserver is null&lt;br/&gt;
2011-09-02 20:50:40,405 INFO org.apache.hadoop.hbase.master.AssignmentManager: No previous transition plan was found (or we are ignoring an existing plan) for .META.,,1.1028785192 so generated a random one; hri=.META.,,1.1028785192, src=, dest=lala.golden,60020,1314989371098; 1 (online=1, exclude=null) available serve&lt;br/&gt;
rs&lt;br/&gt;
2011-09-02 20:50:40,405 INFO org.apache.hadoop.hbase.master.AssignmentManager: Assigning region .META.,,1.1028785192 to lala.golden,60020,1314989371098&lt;br/&gt;
2011-09-02 20:50:40,636 INFO org.apache.hadoop.hbase.master.handler.OpenedRegionHandler: Handling OPENED event for 1028785192; deleting unassigned node&lt;br/&gt;
2011-09-02 20:50:40,638 WARN org.apache.hadoop.hbase.master.AssignmentManager: Node deleted but still in RIT: .META.,,1.1028785192 state=OPEN, ts=1314989440635, server=lala.golden,60020,1314989371098&lt;br/&gt;
2011-09-02 20:50:40,638 INFO org.apache.hadoop.hbase.master.handler.OpenedRegionHandler: Opened region .META.,,1.1028785192 on lala.golden,60020,1314989371098&lt;br/&gt;
2011-09-02 20:50:40,639 INFO org.apache.hadoop.hbase.zookeeper.MetaNodeTracker: Detected completed assignment of META, notifying catalog tracker&lt;br/&gt;
2011-09-02 20:50:40,667 INFO org.apache.hadoop.hbase.master.HMaster: .META. assigned=2, rit=false, location=lala.golden,60020,1314989371098&lt;br/&gt;
2011-09-02 20:50:40,671 INFO org.apache.hadoop.hbase.master.HMaster: metaUpdated = NULL.&lt;br/&gt;
2011-09-02 20:50:40,671 INFO org.apache.hadoop.hbase.master.HMaster: Meta updated status = false&lt;br/&gt;
2011-09-02 20:50:40,672 INFO org.apache.hadoop.hbase.master.HMaster: Meta has HRI with HTDs. Updating meta now.&lt;br/&gt;
2011-09-02 20:50:40,720 INFO org.apache.hadoop.hbase.catalog.MetaEditor: Current INFO from scan results = REGION =&amp;gt; {NAME =&amp;gt; &apos;EXT_AC,,1295533530463.4e36610aa00b7e8743c1816b12c2e698.&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;, ENCODED =&amp;gt; 4e36610aa00b7e8743c1816b12c2e698, TABLE =&amp;gt; {{NAME =&amp;gt; &apos;EXT_AC&apos;, FAMILIES =&amp;gt; [&lt;/p&gt;
{NAME =&amp;gt; &apos;c&apos;, BLOO
MFILTER =&amp;gt; &apos;ROW&apos;, REPLICATION_SCOPE =&amp;gt; &apos;0&apos;, VERSIONS =&amp;gt; &apos;1&apos;, COMPRESSION =&amp;gt; &apos;LZO&apos;, TTL =&amp;gt; &apos;-1&apos;, BLOCKSIZE =&amp;gt; &apos;65536&apos;, IN_MEMORY =&amp;gt; &apos;false&apos;, BLOCKCACHE =&amp;gt; &apos;true&apos;}
&lt;p&gt;]}}&lt;/p&gt;

</comment>
                            <comment id="13096271" author="anih" created="Fri, 2 Sep 2011 20:18:15 +0000"  >&lt;p&gt;logs from upgrading hbase from branch-0.90 to TRUNK&lt;/p&gt;</comment>
                            <comment id="13096277" author="yuzhihong@gmail.com" created="Fri, 2 Sep 2011 20:24:41 +0000"  >&lt;p&gt;The only exception I saw was:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2011-09-02 20:53:45,587 WARN org.apache.hadoop.hbase.master.HMaster: Failed getting all descriptors
java.io.FileNotFoundException: No status &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; hdfs:&lt;span class=&quot;code-comment&quot;&gt;//x:50001/hbase/me/.tableinfo
&lt;/span&gt;        at org.apache.hadoop.hbase.util.FSUtils.getTableInfoModtime(FSUtils.java:876)
        at org.apache.hadoop.hbase.util.FSTableDescriptors.get(FSTableDescriptors.java:127)
        at org.apache.hadoop.hbase.util.FSTableDescriptors.getAll(FSTableDescriptors.java:154)
        at org.apache.hadoop.hbase.master.HMaster.getHTableDescriptors(HMaster.java:1375)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Startup seems to be normal:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2011-09-02 20:55:08,198 INFO org.apache.hadoop.hbase.master.AssignmentManager: Bulk assigning done
2011-09-02 20:55:08,201 INFO org.apache.hadoop.hbase.master.HMaster: Master has completed initialization
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Trace of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4308&quot; title=&quot;Race between RegionOpenedHandler and AssignmentManager&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4308&quot;&gt;&lt;del&gt;HBASE-4308&lt;/del&gt;&lt;/a&gt; is clearly visible from the log.&lt;/p&gt;</comment>
                            <comment id="13096281" author="anih" created="Fri, 2 Sep 2011 20:33:03 +0000"  >&lt;p&gt;This exception is from list command from shell and doesn&apos;t matter in this case because i have directory &quot;me&quot; in hbase rootdir. Problem is that i can&apos;t do anything with normal tables, thrift and hbase shell can&apos;t find .META. table and this problem doesn&apos;t log anything. Maybe &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4308&quot; title=&quot;Race between RegionOpenedHandler and AssignmentManager&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4308&quot;&gt;&lt;del&gt;HBASE-4308&lt;/del&gt;&lt;/a&gt; is the root problem for this, when there will be some patch i&apos;ll try it.&lt;/p&gt;</comment>
                            <comment id="13096682" author="yuzhihong@gmail.com" created="Sat, 3 Sep 2011 15:45:39 +0000"  >&lt;p&gt;I reproduced Sebastian&apos;s case.&lt;br/&gt;
When I clicked on .META. table link, I got:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.hadoop.hbase.TableNotFoundException: Table &apos;.META.&apos; was not found, got: .
	at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegionInMeta(HConnectionManager.java:916)
	at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegion(HConnectionManager.java:765)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This means HRegionInfo retrieved from region server carries empty table name.&lt;br/&gt;
There is no exception in master or region server logs around the time I clicked the link.&lt;/p&gt;</comment>
                            <comment id="13096797" author="stack" created="Sun, 4 Sep 2011 03:16:19 +0000"  >&lt;p&gt;The HRegionInfo for the .META. table region had an empty name?  Thats kinda odd.  I&apos;d think the schema for .META. hardcoded with the table name therefore hardcoded too.  Do you think it not getting written out with a table name Ted on migration?&lt;/p&gt;</comment>
                            <comment id="13096880" author="yuzhihong@gmail.com" created="Sun, 4 Sep 2011 14:41:56 +0000"  >&lt;p&gt;Here is the tail of /hbase/.META./.tableinfo:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
{NAME =&amp;gt; &apos;.META.&apos;, IS_META =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&apos;, FAMILIES =&amp;gt; [{NAME =&amp;gt; &apos;info&apos;, BLOOMFILTER =&amp;gt; &apos;NONE&apos;, REPLICATION_SCOPE =&amp;gt; &apos;0&apos;, COMPRESSION =&amp;gt; &apos;NONE&apos;, VERSIONS =&amp;gt; &apos;10&apos;, TTL =&amp;gt; &apos;2147483647&apos;, MIN_VERSIONS =&amp;gt; &apos;0&apos;, BLOCKSIZE =&amp;gt; &apos;8192&apos;, IN_MEMORY =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&apos;, BLOCKCACHE =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&apos;}]}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Table name was written.&lt;br/&gt;
The stack trace just indicated that HConnectionImplementation.locateRegionInMeta() got an HRegionInfo which didn&apos;t have table name in it.&lt;/p&gt;

&lt;p&gt;I added some more debug logging and restarted the cluster.&lt;br/&gt;
But distributed log splitting seemed to be stuck:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Doing distributed log split in [hdfs:&lt;span class=&quot;code-comment&quot;&gt;//sjc1-hadoop0.sjc1.carrieriq.com:9000/hbase/.logs/sjc1-hadoop8.sjc1.carrieriq.com,60020,1315063940619]
&lt;/span&gt;Waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; distributed tasks to finish. scheduled=2 done=1 error=0
840s 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Here is the tail of master log:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2011-09-04 14:23:26,992 INFO org.apache.zookeeper.server.NIOServerCnxn: Accepted socket connection from /10.202.50.78:24013
2011-09-04 14:23:26,993 INFO org.apache.zookeeper.server.NIOServerCnxn: Client attempting to establish &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; session at /10.202.50.78:24013
2011-09-04 14:23:26,994 INFO org.apache.zookeeper.server.NIOServerCnxn: Established session 0x13234d287c00003 with negotiated timeout 490000 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; client /10.202.50.78:24013
2011-09-04 14:23:45,368 INFO org.apache.zookeeper.server.PrepRequestProcessor: Got user-level KeeperException when processing sessionid:0x13234d287c00000 type:create cxid:0x23 zxid:0xfffffffffffffffe txntype:unknown reqpath:n/a Error Path:/hbase/splitlog/hdfs%3A%2F%2Fsjc1-hadoop0.sjc1.carrieriq.com%3A9000%2Fhbase%2F.logs%2Fsjc1-hadoop8.sjc1.carrieriq.com%2C60020%2C1315063940619%2Fsjc1-hadoop8.sjc1.carrieriq.com%252C60020%252C1315063940619.1315067555219 Error:KeeperErrorCode = NodeExists &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; /hbase/splitlog/hdfs%3A%2F%2Fsjc1-hadoop0.sjc1.carrieriq.com%3A9000%2Fhbase%2F.logs%2Fsjc1-hadoop8.sjc1.carrieriq.com%2C60020%2C1315063940619%2Fsjc1-hadoop8.sjc1.carrieriq.com%252C60020%252C1315063940619.1315067555219
2011-09-04 14:31:36,002 INFO org.apache.zookeeper.server.ZooKeeperServer: Expiring session 0x1322feb3d8b0005, timeout of 490000ms exceeded
2011-09-04 14:31:36,003 INFO org.apache.zookeeper.server.PrepRequestProcessor: Processed session termination &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; sessionid: 0x1322feb3d8b0005
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Region server log doesn&apos;t indicate much activity.&lt;/p&gt;</comment>
                            <comment id="13096898" author="iamknome" created="Sun, 4 Sep 2011 16:53:09 +0000"  >
&lt;p&gt;How come &lt;del&gt;ROOT&lt;/del&gt; tableinfo has it&apos;s name showing as &lt;del&gt;META&lt;/del&gt; ? That doesn&apos;t look correct to me. &lt;/p&gt;


</comment>
                            <comment id="13096941" author="anih" created="Sun, 4 Sep 2011 20:23:37 +0000"  >&lt;p&gt;i don&apos;t know for what are .regioninfo files but it difference betwean TRUNK and MIGRATE instance&lt;/p&gt;

&lt;p&gt;table &lt;del&gt;ROOT&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;TRUNK:&lt;br/&gt;
{{&lt;br/&gt;
        &lt;del&gt;ROOT&lt;/del&gt;,,0-ROOT-&#65533;Y&#65533;&#65533;&lt;/p&gt;

&lt;p&gt;REGION =&amp;gt; &lt;/p&gt;
{NAME =&amp;gt; &apos;-ROOT-,,0&apos;, TableName =&amp;gt; &apos;-ROOT-&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;, ENCODED =&amp;gt; 70236052,}
&lt;p&gt;}}&lt;/p&gt;


&lt;p&gt;MIGRATE:&lt;br/&gt;
{{&lt;br/&gt;
anih@lala /home/hbase/hadoop $ ./bin/hadoop fs &lt;del&gt;text /hbase/-ROOT&lt;/del&gt;/70236052/.regioninfo&lt;br/&gt;
        &lt;del&gt;ROOT&lt;/del&gt;,,0-ROOT-IS_ROOTtrueIS_METAtruinfo&lt;br/&gt;
                                               BLOOMFILTERNONEREPLICATION_SCOPE0&lt;br/&gt;
                                                                                COMPRESSIONNONVERSIONS10TTL&lt;br/&gt;
2147483647      BLOCKSIZE8192   IN_MEMORYfalse&lt;br/&gt;
BLOCKCACHEfalse&#65533;V&#65533;J&lt;/p&gt;

&lt;p&gt;REGION =&amp;gt; {NAME =&amp;gt; &apos;&lt;del&gt;ROOT&lt;/del&gt;,,0&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;, ENCODED =&amp;gt; 70236052, TABLE =&amp;gt; {{NAME =&amp;gt; &apos;&lt;del&gt;ROOT&lt;/del&gt;&apos;, IS_ROOT =&amp;gt; &apos;true&apos;, IS_META =&amp;gt; &apos;true&apos;, FAMILIES =&amp;gt; [&lt;/p&gt;
{NAME =&amp;gt; &apos;info&apos;, BLOOMFILTER =&amp;gt; &apos;NONE&apos;, REPLICATION_SCOPE =&amp;gt; &apos;0&apos;, COMPRESSION =&amp;gt; &apos;NONE&apos;, VERSIONS =&amp;gt; &apos;10&apos;, TTL =&amp;gt; &apos;2147483647&apos;, BLOCKSIZE =&amp;gt; &apos;8192&apos;, IN_MEMORY =&amp;gt; &apos;false&apos;, BLOCKCACHE =&amp;gt; &apos;false&apos;}
&lt;p&gt;]} }&lt;br/&gt;
}}&lt;/p&gt;




&lt;p&gt;table: .META.&lt;/p&gt;

&lt;p&gt;TRUNK:&lt;br/&gt;
{{&lt;br/&gt;
        .META.,,1.META.+&#65533;&#65533;&#65533;&lt;/p&gt;

&lt;p&gt;REGION =&amp;gt; &lt;/p&gt;
{NAME =&amp;gt; &apos;.META.,,1&apos;, TableName =&amp;gt; &apos;.META.&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;, ENCODED =&amp;gt; 1028785192,}
&lt;p&gt;}}&lt;/p&gt;

&lt;p&gt;MIGRATE:&lt;br/&gt;
{{&lt;br/&gt;
        .META.,,1.META.IS_ROOTfalseIS_METAtruinfo&lt;br/&gt;
                                                BLOOMFILTERNONEREPLICATION_SCOPEVERSIONS10&lt;br/&gt;
                                                                                          COMPRESSIONNONETTL&lt;br/&gt;
2147483647      BLOCKSIZE8192   IN_MEMORYtrue&lt;br/&gt;
BLOCKCACHEtrueK&#65533;&#65533;&lt;/p&gt;

&lt;p&gt;REGION =&amp;gt; {NAME =&amp;gt; &apos;.META.,,1&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;, ENCODED =&amp;gt; 1028785192, TABLE =&amp;gt; {{NAME =&amp;gt; &apos;.META.&apos;, IS_META =&amp;gt; &apos;true&apos;, FAMILIES =&amp;gt; [&lt;/p&gt;
{NAME =&amp;gt; &apos;info&apos;, BLOOMFILTER =&amp;gt; &apos;NONE&apos;, REPLICATION_SCOPE =&amp;gt; &apos;0&apos;, VERSIONS =&amp;gt; &apos;10&apos;, COMPRESSION =&amp;gt; &apos;NONE&apos;, TTL =&amp;gt; &apos;2147483647&apos;, BLOCKSIZE =&amp;gt; &apos;8192&apos;, IN_MEMORY =&amp;gt; &apos;true&apos;, BLOCKCACHE =&amp;gt; &apos;true&apos;}
&lt;p&gt;]} }&lt;br/&gt;
}}&lt;/p&gt;</comment>
                            <comment id="13096942" author="anih" created="Sun, 4 Sep 2011 20:29:14 +0000"  >&lt;p&gt;trunk version of .regioninfo file from &lt;del&gt;ROOT&lt;/del&gt;&lt;/p&gt;</comment>
                            <comment id="13096945" author="anih" created="Sun, 4 Sep 2011 20:34:27 +0000"  >&lt;p&gt;Both version of this file are totaly different. In TRUNK there is TableName value in object&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/help_16.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; REGION, in migrated version there is TABLE object and few extra lines&lt;/p&gt;</comment>
                            <comment id="13096954" author="iamknome" created="Sun, 4 Sep 2011 22:21:09 +0000"  >&lt;p&gt;Sebastian,&lt;/p&gt;

&lt;p&gt;The differences in regioninfo that you have mentioned is as expected as we moved the HTD out of HRI. I presume you have applied latest patch from Ted and seeing the .tableinfo for root and meta only after that.&lt;/p&gt;

&lt;p&gt;We shall get to the bottom of your issue soon.&lt;/p&gt;

&lt;p&gt;Subbu&lt;/p&gt;



</comment>
                            <comment id="13097003" author="yuzhihong@gmail.com" created="Mon, 5 Sep 2011 05:04:09 +0000"  >&lt;p&gt;As I mentioned earlier, the table name for .META. HRI was empty. See contents of ROOT table: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 .META.,,1
column=info:regioninfo, timestamp=1314743864747, value=REGION =&amp;gt; {NAME =&amp;gt; &apos;.META.,,1&apos;, TableName =
                                   &amp;gt; &apos;&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;, ENCODED =&amp;gt; 1028785192,}  
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Patch version 3 solves the problem.&lt;br/&gt;
I was able to browse the tables in Master UI after migration.&lt;/p&gt;

&lt;p&gt;We still need to fill out tablename for .META. in ROOT table.&lt;/p&gt;</comment>
                            <comment id="13097032" author="yuzhihong@gmail.com" created="Mon, 5 Sep 2011 06:54:08 +0000"  >&lt;p&gt;Patch version 4 handles the following exception which would have left master UI showing no user tables:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2011-09-05 05:46:52,316 WARN org.apache.hadoop.hbase.master.HMaster: Failed getting all descriptors
java.io.FileNotFoundException: No status &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; hdfs:&lt;span class=&quot;code-comment&quot;&gt;//a.ciq.com:9000/hbase/_distcp_logs_7bt99i/.tableinfo
&lt;/span&gt;        at org.apache.hadoop.hbase.util.FSUtils.getTableInfoModtime(FSUtils.java:877)
        at org.apache.hadoop.hbase.util.FSTableDescriptors.get(FSTableDescriptors.java:128)
        at org.apache.hadoop.hbase.util.FSTableDescriptors.getAll(FSTableDescriptors.java:154)
        at org.apache.hadoop.hbase.master.HMaster.getHTableDescriptors(HMaster.java:1387)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13097038" author="anih" created="Mon, 5 Sep 2011 07:26:19 +0000"  >&lt;p&gt;Patch 3 and 4 solved my problem to&lt;/p&gt;</comment>
                            <comment id="13099720" author="iamknome" created="Thu, 8 Sep 2011 02:49:10 +0000"  >&lt;p&gt;This patch addresses ROOT migration from older versions of HBASE to trunk, in addition to what is already done by Ted. I removed the table name derivation logic in HConnectionManager as we no longer need it.&lt;/p&gt;

</comment>
                            <comment id="13099736" author="iamknome" created="Thu, 8 Sep 2011 03:29:44 +0000"  >&lt;p&gt;Removed the log message.&lt;/p&gt;</comment>
                            <comment id="13099744" author="stack" created="Thu, 8 Sep 2011 03:50:06 +0000"  >&lt;p&gt;This last patch looks good to me.&lt;/p&gt;</comment>
                            <comment id="13099746" author="yuzhihong@gmail.com" created="Thu, 8 Sep 2011 03:51:57 +0000"  >&lt;p&gt;Subbu provided majority of the patch.&lt;/p&gt;</comment>
                            <comment id="13099748" author="stack" created="Thu, 8 Sep 2011 04:07:58 +0000"  >&lt;p&gt;True, but you did bunch of debugging too.  You going to commit?&lt;/p&gt;</comment>
                            <comment id="13099823" author="yuzhihong@gmail.com" created="Thu, 8 Sep 2011 04:35:40 +0000"  >&lt;p&gt;Subbu is looking at refactoring updateRootWithNewRegionInfo() and updateMetaWithNewRegionInfo() since they look so similar.&lt;br/&gt;
Let&apos;s wait for one more day.&lt;/p&gt;

&lt;p&gt;BTW I think I would sleep better knowing I didn&apos;t steal other people&apos;s work.&lt;/p&gt;</comment>
                            <comment id="13100914" author="iamknome" created="Fri, 9 Sep 2011 03:22:42 +0000"  >&lt;p&gt;Updated with latest changes. Cleaned up some dead code and refactored a bit to eliminate redundancy.&lt;/p&gt;

&lt;p&gt;Ted, accept it, it&apos;s a team work from both you and me.  &lt;/p&gt;</comment>
                            <comment id="13100953" author="yuzhihong@gmail.com" created="Fri, 9 Sep 2011 04:13:45 +0000"  >&lt;p&gt;This is the patch I plan to commit.&lt;/p&gt;

&lt;p&gt;Modified some javadoc.&lt;br/&gt;
Wrapped some long lines.&lt;/p&gt;</comment>
                            <comment id="13100962" author="stack" created="Fri, 9 Sep 2011 04:28:02 +0000"  >&lt;p&gt;LGTM&lt;/p&gt;</comment>
                            <comment id="13101000" author="yuzhihong@gmail.com" created="Fri, 9 Sep 2011 05:26:53 +0000"  >&lt;p&gt;Integrated to TRUNK.&lt;/p&gt;

&lt;p&gt;Thanks for reporting this critical issue, Todd and Sebastian.&lt;br/&gt;
Thanks for the patch Subbu.&lt;br/&gt;
Thanks for the review Michael.&lt;/p&gt;</comment>
                            <comment id="13101106" author="hudson" created="Fri, 9 Sep 2011 10:23:01 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2193 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2193/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2193/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4301&quot; title=&quot;META migration from 0.90 to trunk fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4301&quot;&gt;&lt;del&gt;HBASE-4301&lt;/del&gt;&lt;/a&gt;  META migration from 0.90 to trunk fails (Subbu Iyer)&lt;/p&gt;

&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/catalog/MetaEditor.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/catalog/MetaReader.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/MasterFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/FSTableDescriptors.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/FSUtils.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13101530" author="stack" created="Fri, 9 Sep 2011 20:09:50 +0000"  >&lt;p&gt;Committed to TRUNK yesterday by Ted.  Thanks for the patch Subbu (and Ted) and to Sebastian for debugging help.&lt;/p&gt;</comment>
                            <comment id="15015859" author="lars_francke" created="Fri, 20 Nov 2015 11:52:54 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12493543" name="4301-1-Fixed_Root_migration_to_newer_HRI_format_.patch" size="9417" author="iamknome" created="Thu, 8 Sep 2011 03:30:08 +0000"/>
                            <attachment id="12493720" name="4301-2-Fixed_Root_migration_to_newer_HRI_format_.patch" size="13317" author="iamknome" created="Fri, 9 Sep 2011 03:23:01 +0000"/>
                            <attachment id="12493539" name="4301-Fixed_Root_migration_to_newer_HRI_format_.patch" size="9573" author="iamknome" created="Thu, 8 Sep 2011 02:49:40 +0000"/>
                            <attachment id="12493000" name="4301-v3.txt" size="3142" author="yuzhihong@gmail.com" created="Mon, 5 Sep 2011 05:09:17 +0000"/>
                            <attachment id="12493005" name="4301-v4.txt" size="4338" author="yuzhihong@gmail.com" created="Mon, 5 Sep 2011 06:54:08 +0000"/>
                            <attachment id="12493724" name="4301-v7.txt" size="13390" author="yuzhihong@gmail.com" created="Fri, 9 Sep 2011 04:13:45 +0000"/>
                            <attachment id="12492530" name="4301.txt" size="1564" author="yuzhihong@gmail.com" created="Wed, 31 Aug 2011 21:25:47 +0000"/>
                            <attachment id="12492720" name="4301_v2.txt" size="1964" author="anih" created="Fri, 2 Sep 2011 07:04:53 +0000"/>
                            <attachment id="12492804" name="logs.tar.gz" size="1148934" author="anih" created="Fri, 2 Sep 2011 20:18:15 +0000"/>
                            <attachment id="12492292" name="master-log.txt" size="210820" author="tlipcon" created="Tue, 30 Aug 2011 20:07:47 +0000"/>
                            <attachment id="12492991" name="meta_migrate" size="614" author="anih" created="Sun, 4 Sep 2011 20:29:45 +0000"/>
                            <attachment id="12492990" name="meta_trunk" size="144" author="anih" created="Sun, 4 Sep 2011 20:29:45 +0000"/>
                            <attachment id="12492989" name="root_migrate" size="634" author="anih" created="Sun, 4 Sep 2011 20:29:45 +0000"/>
                            <attachment id="12492988" name="root_trunk" size="142" author="anih" created="Sun, 4 Sep 2011 20:29:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 31 Aug 2011 03:45:51 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>27251</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hqbb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>101525</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>