<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 21:21:34 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-17138/HBASE-17138.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-17138] Backport read-path offheap (HBASE-11425) to branch-1</title>
                <link>https://issues.apache.org/jira/browse/HBASE-17138</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;From the &lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/hbase-user/201611.mbox/%3CCAM7-19%2Bn7cEiY4H9iLQ3N9V0NXppOPduZwk-hhgNLEaJfiV3kA%40mail.gmail.com%3E&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;thread&lt;/a&gt; of sharing our experience and performance data of read-path offheap usage in Alibaba search, we could see people are positive to have &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11425&quot; title=&quot;Cell/DBB end-to-end on the read-path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11425&quot;&gt;&lt;del&gt;HBASE-11425&lt;/del&gt;&lt;/a&gt; in branch-1, so I&apos;d like to create a JIRA and move the discussion and decision making here.&lt;/p&gt;

&lt;p&gt;Echoing some comments from the mail thread:&lt;/p&gt;

&lt;p&gt;Bryan:&lt;br/&gt;
Is the backported patch available anywhere? If it ends up not getting officially backported to branch-1 due to 2.0 around the corner, some of us who build our own deploy may want to integrate into our builds&lt;/p&gt;

&lt;p&gt;Andrew:&lt;br/&gt;
Yes, please, the patches will be useful to the community even if we decide not to backport into an official 1.x release.&lt;/p&gt;

&lt;p&gt;Enis:&lt;br/&gt;
I don&apos;t see any reason why we cannot backport to branch-1.&lt;/p&gt;

&lt;p&gt;Ted:&lt;br/&gt;
Opening a JIRA would be fine. This makes it easier for people to obtain the patch(es)&lt;/p&gt;

&lt;p&gt;Nick:&lt;br/&gt;
From the DISCUSS thread re: EOL of 1.1, it seems we&apos;ll continue to&lt;br/&gt;
support 1.x releases for some time... I would guess these will be&lt;br/&gt;
maintained until 2.2 at least. Therefore, offheap patches that have seen&lt;br/&gt;
production exposure seem like a reasonable candidate for backport, perhaps in a 1.4 or 1.5 release timeframe.&lt;/p&gt;

&lt;p&gt;Anoop:&lt;br/&gt;
Because of some compatibility issues, we decide that this will be done in 2.0 only..  Ya as Andy said, it would be great to share the 1.x backported patches.&lt;/p&gt;



&lt;p&gt;The following is all the jira ids we have back ported:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10930&quot; title=&quot;Change Filters and GetClosestRowBeforeTracker to work with Cells&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10930&quot;&gt;&lt;del&gt;HBASE-10930&lt;/del&gt;&lt;/a&gt; Change Filters and GetClosestRowBeforeTracker to work with Cells (Ram)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13373&quot; title=&quot;Squash HFileReaderV3 together with HFileReaderV2 and AbstractHFileReader; ditto for Scanners and BlockReader, etc.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13373&quot;&gt;&lt;del&gt;HBASE-13373&lt;/del&gt;&lt;/a&gt; Squash HFileReaderV3 together with HFileReaderV2 and AbstractHFileReader; ditto for Scanners and BlockReader, etc.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13429&quot; title=&quot;Remove deprecated seek/reseek methods from HFileScanner&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13429&quot;&gt;&lt;del&gt;HBASE-13429&lt;/del&gt;&lt;/a&gt; Remove deprecated seek/reseek methods from HFileScanner.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13450&quot; title=&quot;Purge RawBytescomparator from the writers and readers for HBASE-10800&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13450&quot;&gt;&lt;del&gt;HBASE-13450&lt;/del&gt;&lt;/a&gt; - Purge RawBytescomparator from the writers and readers for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10800&quot; title=&quot;Use CellComparator instead of KVComparator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10800&quot;&gt;&lt;del&gt;HBASE-10800&lt;/del&gt;&lt;/a&gt; (Ram)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13501&quot; title=&quot;Deprecate/Remove getComparator() in HRegionInfo.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13501&quot;&gt;&lt;del&gt;HBASE-13501&lt;/del&gt;&lt;/a&gt; - Deprecate/Remove getComparator() in HRegionInfo.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12048&quot; title=&quot;Remove deprecated APIs from Filter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12048&quot;&gt;&lt;del&gt;HBASE-12048&lt;/del&gt;&lt;/a&gt; Remove deprecated APIs from Filter.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10800&quot; title=&quot;Use CellComparator instead of KVComparator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10800&quot;&gt;&lt;del&gt;HBASE-10800&lt;/del&gt;&lt;/a&gt; - Use CellComparator instead of KVComparator (Ram)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13679&quot; title=&quot;Change ColumnTracker and SQM to deal with Cell instead of byte[], int, int&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13679&quot;&gt;&lt;del&gt;HBASE-13679&lt;/del&gt;&lt;/a&gt; Change ColumnTracker and SQM to deal with Cell instead of byte[], int, int.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13642&quot; title=&quot;Deprecate RegionObserver#postScannerFilterRow CP hook with byte[],int,int args in favor of taking Cell arg&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13642&quot;&gt;&lt;del&gt;HBASE-13642&lt;/del&gt;&lt;/a&gt; Deprecate RegionObserver#postScannerFilterRow CP hook with byte[],int,int args in favor of taking Cell arg.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13641&quot; title=&quot;Deperecate Filter#filterRowKey(byte[] buffer, int offset, int length) in favor of filterRowKey(Cell firstRowCell)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13641&quot;&gt;&lt;del&gt;HBASE-13641&lt;/del&gt;&lt;/a&gt; Deperecate Filter#filterRowKey(byte[] buffer, int offset, int length) in favor of filterRowKey(Cell firstRowCell).&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13827&quot; title=&quot;Delayed scanner close in KeyValueHeap and StoreScanner&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13827&quot;&gt;&lt;del&gt;HBASE-13827&lt;/del&gt;&lt;/a&gt; Delayed scanner close in KeyValueHeap and StoreScanner.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13871&quot; title=&quot;Change RegionScannerImpl to deal with Cell instead of byte[], int, int&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13871&quot;&gt;&lt;del&gt;HBASE-13871&lt;/del&gt;&lt;/a&gt; Change RegionScannerImpl to deal with Cell instead of byte[], int, int.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11911&quot; title=&quot;Break up tests into more fine grained categories&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11911&quot;&gt;&lt;del&gt;HBASE-11911&lt;/del&gt;&lt;/a&gt; Break up tests into more fine grained categories (Alex Newman)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12059&quot; title=&quot;Create hbase-annotations module&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12059&quot;&gt;&lt;del&gt;HBASE-12059&lt;/del&gt;&lt;/a&gt; Create hbase-annotations module&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12106&quot; title=&quot;Move test annotations to test artifact&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12106&quot;&gt;&lt;del&gt;HBASE-12106&lt;/del&gt;&lt;/a&gt; Move test annotations to test artifact (Enis Soztutar)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13916&quot; title=&quot;Create MultiByteBuffer an aggregation of ByteBuffers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13916&quot;&gt;&lt;del&gt;HBASE-13916&lt;/del&gt;&lt;/a&gt; Create MultiByteBuffer an aggregation of ByteBuffers.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15679&quot; title=&quot;Assertion on wrong variable in TestReplicationThrottler#testThrottling&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15679&quot;&gt;&lt;del&gt;HBASE-15679&lt;/del&gt;&lt;/a&gt; Assertion on wrong variable in TestReplicationThrottler#testThrottling&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13931&quot; title=&quot;Move Unsafe based operations to UnsafeAccess&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13931&quot;&gt;&lt;del&gt;HBASE-13931&lt;/del&gt;&lt;/a&gt; Move Unsafe based operations to UnsafeAccess.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12345&quot; title=&quot;Unsafe based ByteBuffer Comparator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12345&quot;&gt;&lt;del&gt;HBASE-12345&lt;/del&gt;&lt;/a&gt; Unsafe based ByteBuffer Comparator.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13998&quot; title=&quot;Remove CellComparator#compareRows(byte[] left, int loffset, int llength, byte[] right, int roffset, int rlength)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13998&quot;&gt;&lt;del&gt;HBASE-13998&lt;/del&gt;&lt;/a&gt; Remove CellComparator#compareRows(byte[] left, int loffset, int llength, byte[] right, int roffset, int rlength).&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13998&quot; title=&quot;Remove CellComparator#compareRows(byte[] left, int loffset, int llength, byte[] right, int roffset, int rlength)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13998&quot;&gt;&lt;del&gt;HBASE-13998&lt;/del&gt;&lt;/a&gt; Remove CellComparator#compareRows()- Addendum to fix javadoc warn&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13579&quot; title=&quot;Avoid isCellTTLExpired() for NO-TAG cases&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13579&quot;&gt;&lt;del&gt;HBASE-13579&lt;/del&gt;&lt;/a&gt; Avoid isCellTTLExpired() for NO-TAG cases (partially backport this patch)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13448&quot; title=&quot;New Cell implementation with cached component offsets/lengths&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13448&quot;&gt;&lt;del&gt;HBASE-13448&lt;/del&gt;&lt;/a&gt; New Cell implementation with cached component offsets/lengths.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13387&quot; title=&quot;Add ByteBufferedCell an extension to Cell&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13387&quot;&gt;&lt;del&gt;HBASE-13387&lt;/del&gt;&lt;/a&gt; Add ByteBufferedCell an extension to Cell.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13387&quot; title=&quot;Add ByteBufferedCell an extension to Cell&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13387&quot;&gt;&lt;del&gt;HBASE-13387&lt;/del&gt;&lt;/a&gt; Add ByteBufferedCell an extension to Cell - addendum.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12650&quot; title=&quot;Move ServerName to hbase-common module&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12650&quot;&gt;&lt;del&gt;HBASE-12650&lt;/del&gt;&lt;/a&gt; Move ServerName to hbase-common module (partially backport this patch)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12296&quot; title=&quot;Filters should work with ByteBufferedCell&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12296&quot;&gt;&lt;del&gt;HBASE-12296&lt;/del&gt;&lt;/a&gt; Filters should work with ByteBufferedCell.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14120&quot; title=&quot;ByteBufferUtils#compareTo small optimization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14120&quot;&gt;&lt;del&gt;HBASE-14120&lt;/del&gt;&lt;/a&gt; ByteBufferUtils#compareTo small optimization.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13510&quot; title=&quot;Purge ByteBloomFilter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13510&quot;&gt;&lt;del&gt;HBASE-13510&lt;/del&gt;&lt;/a&gt; - Purge ByteBloomFilter (Ram)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13451&quot; title=&quot;Make the HFileBlockIndex blockKeys to Cells so that it could be easy to use in the CellComparators&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13451&quot;&gt;&lt;del&gt;HBASE-13451&lt;/del&gt;&lt;/a&gt; - Make the HFileBlockIndex blockKeys to Cells so that it could be easy to use in the CellComparators (Ram)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13614&quot; title=&quot;Avoid temp KeyOnlyKeyValue temp objects creations in read hot path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13614&quot;&gt;&lt;del&gt;HBASE-13614&lt;/del&gt;&lt;/a&gt; - Avoid temp KeyOnlyKeyValue temp objects creations in read hot path (Ram)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13939&quot; title=&quot;Make HFileReaderImpl.getFirstKeyInBlock() to return a Cell&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13939&quot;&gt;&lt;del&gt;HBASE-13939&lt;/del&gt;&lt;/a&gt; - Make HFileReaderImpl.getFirstKeyInBlock() to return a Cell (Ram)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13307&quot; title=&quot;Making methods under ScannerV2#next inlineable, faster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13307&quot;&gt;&lt;del&gt;HBASE-13307&lt;/del&gt;&lt;/a&gt; Making methods under ScannerV2#next inlineable, faster&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14020&quot; title=&quot;Unsafe based optimized write in ByteBufferOutputStream&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14020&quot;&gt;&lt;del&gt;HBASE-14020&lt;/del&gt;&lt;/a&gt; Unsafe based optimized write in ByteBufferOutputStream.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13977&quot; title=&quot;Convert getKey and related APIs to Cell&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13977&quot;&gt;&lt;del&gt;HBASE-13977&lt;/del&gt;&lt;/a&gt; - Convert getKey and related APIs to Cell (Ram)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11927&quot; title=&quot;Use Native Hadoop Library for HFile checksum (And flip default from CRC32 to CRC32C)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11927&quot;&gt;&lt;del&gt;HBASE-11927&lt;/del&gt;&lt;/a&gt; Use Native Hadoop Library for HFile checksum. (Apekshit)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12213&quot; title=&quot;HFileBlock backed by Array of ByteBuffers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12213&quot;&gt;&lt;del&gt;HBASE-12213&lt;/del&gt;&lt;/a&gt; HFileBlock backed by Array of ByteBuffers (Ram)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12084&quot; title=&quot;Remove deprecated APIs from Result&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12084&quot;&gt;&lt;del&gt;HBASE-12084&lt;/del&gt;&lt;/a&gt; Remove deprecated APIs from Result.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12084&quot; title=&quot;Remove deprecated APIs from Result&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12084&quot;&gt;&lt;del&gt;HBASE-12084&lt;/del&gt;&lt;/a&gt; Remove deprecated APIs from Result - shell addendum&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13754&quot; title=&quot;Allow non KeyValue Cell types also to oswrite&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13754&quot;&gt;&lt;del&gt;HBASE-13754&lt;/del&gt;&lt;/a&gt; Allow non KeyValue Cell types also to oswrite.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14047&quot; title=&quot;Cleanup deprecated APIs from Cell class&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14047&quot;&gt;&lt;del&gt;HBASE-14047&lt;/del&gt;&lt;/a&gt; - Cleanup deprecated APIs from Cell class (Ashish Singhi)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13817&quot; title=&quot;ByteBufferOuputStream - add writeInt support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13817&quot;&gt;&lt;del&gt;HBASE-13817&lt;/del&gt;&lt;/a&gt; ByteBufferOuputStream - add writeInt support.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12374&quot; title=&quot;Change DBEs to work with new BB based cell&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12374&quot;&gt;&lt;del&gt;HBASE-12374&lt;/del&gt;&lt;/a&gt; Change DBEs to work with new BB based cell.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14116&quot; title=&quot;Change ByteBuff.getXXXStrictlyForward to relative position based reads&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14116&quot;&gt;&lt;del&gt;HBASE-14116&lt;/del&gt;&lt;/a&gt; Change ByteBuff.getXXXStrictlyForward to relative position based reads&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14073&quot; title=&quot;TestRemoteTable.testDelete failed in the latest trunk code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14073&quot;&gt;&lt;del&gt;HBASE-14073&lt;/del&gt;&lt;/a&gt; TestRemoteTable.testDelete failed in the latest trunk code.(Jingcheng)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13926&quot; title=&quot;Close the scanner only after Call#setResponse&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13926&quot;&gt;&lt;del&gt;HBASE-13926&lt;/del&gt;&lt;/a&gt; Close the scanner only after Call#setResponse.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12295&quot; title=&quot;Prevent block eviction under us if reads are in progress from the BBs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12295&quot;&gt;&lt;del&gt;HBASE-12295&lt;/del&gt;&lt;/a&gt; Prevent block eviction under us if reads are in progress from the BBs (Ram)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12295&quot; title=&quot;Prevent block eviction under us if reads are in progress from the BBs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12295&quot;&gt;&lt;del&gt;HBASE-12295&lt;/del&gt;&lt;/a&gt; - Addendum for multiGets to add the call back(Ram)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14001&quot; title=&quot;Optimize write(OutputStream out, boolean withTags) for SizeCachedNoTagsKeyValue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14001&quot;&gt;&lt;del&gt;HBASE-14001&lt;/del&gt;&lt;/a&gt; Optimize write(OutputStream out, boolean withTags) for SizeCachedNoTagsKeyValue.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14063&quot; title=&quot;Use BufferBackedCell in read path after HBASE-12213 and HBASE-12295&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14063&quot;&gt;&lt;del&gt;HBASE-14063&lt;/del&gt;&lt;/a&gt; Use BufferBackedCell in read path after &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12213&quot; title=&quot;HFileBlock backed by Array of ByteBuffers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12213&quot;&gt;&lt;del&gt;HBASE-12213&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12295&quot; title=&quot;Prevent block eviction under us if reads are in progress from the BBs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12295&quot;&gt;&lt;del&gt;HBASE-12295&lt;/del&gt;&lt;/a&gt; (ram)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14202&quot; title=&quot;Reduce garbage we create&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14202&quot;&gt;&lt;del&gt;HBASE-14202&lt;/del&gt;&lt;/a&gt; Reduce garbage we create.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14099&quot; title=&quot;StoreFile.passesKeyRangeFilter need not create Cells from the Scan&amp;#39;s start and stop Row&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14099&quot;&gt;&lt;del&gt;HBASE-14099&lt;/del&gt;&lt;/a&gt; StoreFile.passesKeyRangeFilter need not create Cells from the Scan&apos;s start and stop Row (Ram)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14144&quot; title=&quot;Bloomfilter path to work with Byte buffered cells&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14144&quot;&gt;&lt;del&gt;HBASE-14144&lt;/del&gt;&lt;/a&gt; - Bloomfilter path to work with Byte buffered cells (Ram)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14395&quot; title=&quot;Short circuit last byte check in CellUtil#matchingXXX methods for ByteBufferedCells&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14395&quot;&gt;&lt;del&gt;HBASE-14395&lt;/del&gt;&lt;/a&gt; Short circuit last byte check in CellUtil#matchingXXX methods for ByteBufferedCells.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12298&quot; title=&quot;Support BB usage in PrefixTree&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12298&quot;&gt;&lt;del&gt;HBASE-12298&lt;/del&gt;&lt;/a&gt; Support BB usage in PrefixTree (Ram)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14398&quot; title=&quot;Create the fake keys required in the scan path to avoid copy to byte[]&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14398&quot;&gt;&lt;del&gt;HBASE-14398&lt;/del&gt;&lt;/a&gt; - Create the fake keys required in the scan path to avoid copy to byte[] (Ram)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14480&quot; title=&quot;Small optimization in SingleByteBuff&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14480&quot;&gt;&lt;del&gt;HBASE-14480&lt;/del&gt;&lt;/a&gt; Small optimization in SingleByteBuff.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14590&quot; title=&quot;Shorten ByteBufferedCell#getXXXPositionInByteBuffer method name&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14590&quot;&gt;&lt;del&gt;HBASE-14590&lt;/del&gt;&lt;/a&gt; Shorten ByteBufferedCell#getXXXPositionInByteBuffer method name (Anoop Sam John)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14636&quot; title=&quot;Clear HFileScannerImpl#prevBlocks in between Compaction flow&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14636&quot;&gt;&lt;del&gt;HBASE-14636&lt;/del&gt;&lt;/a&gt; Clear HFileScannerImpl#prevBlocks in between Compaction flow.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14832&quot; title=&quot;Ensure write paths work with ByteBufferedCells in case of compaction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14832&quot;&gt;&lt;del&gt;HBASE-14832&lt;/del&gt;&lt;/a&gt; Ensure write paths work with ByteBufferedCells in case of compaction (Ram)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14524&quot; title=&quot;Short-circuit comparison of rows in CellComparator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14524&quot;&gt;&lt;del&gt;HBASE-14524&lt;/del&gt;&lt;/a&gt; Short-circuit comparison of rows in CellComparator. (Lars Francke)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14188&quot; title=&quot;Read path optimizations after HBASE-11425 profiling&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14188&quot;&gt;&lt;del&gt;HBASE-14188&lt;/del&gt;&lt;/a&gt; - Read path optimizations after &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11425&quot; title=&quot;Cell/DBB end-to-end on the read-path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11425&quot;&gt;&lt;del&gt;HBASE-11425&lt;/del&gt;&lt;/a&gt; profiling (Ram)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14188&quot; title=&quot;Read path optimizations after HBASE-11425 profiling&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14188&quot;&gt;&lt;del&gt;HBASE-14188&lt;/del&gt;&lt;/a&gt;- Read path optimizations after &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11425&quot; title=&quot;Cell/DBB end-to-end on the read-path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11425&quot;&gt;&lt;del&gt;HBASE-11425&lt;/del&gt;&lt;/a&gt; profiling-Addendum(Ram)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12593&quot; title=&quot;Tags to work with ByteBuffer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12593&quot;&gt;&lt;del&gt;HBASE-12593&lt;/del&gt;&lt;/a&gt; Tags to work with ByteBuffer.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15077&quot; title=&quot;Support OffheapKV write in compaction with out copying data on heap&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15077&quot;&gt;&lt;del&gt;HBASE-15077&lt;/del&gt;&lt;/a&gt; Support OffheapKV write in compaction with out copying data on heap.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14660&quot; title=&quot;AssertionError found when using offheap BucketCache with assertion enabled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14660&quot;&gt;&lt;del&gt;HBASE-14660&lt;/del&gt;&lt;/a&gt; AssertionError found when using offheap BucketCache with assertion enabled (ram)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15076&quot; title=&quot;Add getScanner(Scan scan, List&amp;lt;KeyValueScanner&amp;gt; additionalScanners) API into Region interface&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15076&quot;&gt;&lt;del&gt;HBASE-15076&lt;/del&gt;&lt;/a&gt; Add getScanner(Scan scan, List&amp;lt;KeyValueScanner&amp;gt; additionalScanners) API into Region interface (Anoop Sam John&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15735&quot; title=&quot;Tightening of the CP contract &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15735&quot;&gt;&lt;del&gt;HBASE-15735&lt;/del&gt;&lt;/a&gt;(also particial &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13893&quot; title=&quot;Replace HTable with Table in client tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13893&quot;&gt;&lt;del&gt;HBASE-13893&lt;/del&gt;&lt;/a&gt;) Tightening of the CP contract.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15785&quot; title=&quot;Unnecessary lock in ByteBufferArray&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15785&quot;&gt;&lt;del&gt;HBASE-15785&lt;/del&gt;&lt;/a&gt; Unnecessary lock in ByteBufferArray.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15760&quot; title=&quot;TestBlockEvictionFromClient#testParallelGetsAndScanWithWrappedRegionScanner fails in master branch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15760&quot;&gt;&lt;del&gt;HBASE-15760&lt;/del&gt;&lt;/a&gt; TestBlockEvictionFromClient#testParallelGetsAndScanWithWrappedRegionScanner fails in master branch (Ram)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15379&quot; title=&quot;Fake cells created in read path not implementing SettableSequenceId&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15379&quot;&gt;&lt;del&gt;HBASE-15379&lt;/del&gt;&lt;/a&gt; Fake cells created in read path not implementing SettableSequenceId&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-16609&quot; title=&quot;Fake cells EmptyByteBufferedCell  created in read path not implementing SettableSequenceId &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-16609&quot;&gt;&lt;del&gt;HBASE-16609&lt;/del&gt;&lt;/a&gt; Fake cells EmptyByteBufferedCell created in read path not implementing SettableSequenceId&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14940&quot; title=&quot;Make our unsafe based ops more safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14940&quot;&gt;&lt;del&gt;HBASE-14940&lt;/del&gt;&lt;/a&gt; Make our unsafe based ops more safe&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15063&quot; title=&quot;Bug in MultiByteBuf#toBytes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15063&quot;&gt;&lt;del&gt;HBASE-15063&lt;/del&gt;&lt;/a&gt; Bug in MultiByteBuf#toBytes. (deepankar)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15064&quot; title=&quot;BufferUnderflowException after last Cell fetched from an HFile Block served from L2 offheap cache&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15064&quot;&gt;&lt;del&gt;HBASE-15064&lt;/del&gt;&lt;/a&gt; BufferUnderflowException after last Cell fetched from an HFile Block served from L2 offheap cache.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15064&quot; title=&quot;BufferUnderflowException after last Cell fetched from an HFile Block served from L2 offheap cache&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15064&quot;&gt;&lt;del&gt;HBASE-15064&lt;/del&gt;&lt;/a&gt; BufferUnderflowException after last Cell fetched from an HFile Block served from L2 offheap cache - Addendum.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15253&quot; title=&quot;Small bug in CellUtil.matchingRow(Cell, byte[])&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15253&quot;&gt;&lt;del&gt;HBASE-15253&lt;/del&gt;&lt;/a&gt; Small bug in CellUtil.matchingRow(Cell, byte[]) (Ram)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-16704&quot; title=&quot;Scan will be broken while working with DBE and KeyValueCodecWithTags&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-16704&quot;&gt;&lt;del&gt;HBASE-16704&lt;/del&gt;&lt;/a&gt; Scan will be broken while working with DBE and KeyValueCodecWithTags&lt;/p&gt;

&lt;p&gt;the above jira ids are listed in chronological order I have backport&#65292;and there are also some patch i dont list, such as:&lt;br/&gt;
1. keep Cell api compatible with our existing code.&lt;br/&gt;
2. hfile format related compatibility issues.&lt;br/&gt;
3. client compatibility issue&lt;/p&gt;</description>
                <environment></environment>
        <key id="13022091">HBASE-17138</key>
            <summary>Backport read-path offheap (HBASE-11425) to branch-1</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="haoran">Yu Sun</assignee>
                                    <reporter username="carp84">Yu Li</reporter>
                        <labels>
                    </labels>
                <created>Mon, 21 Nov 2016 05:15:16 +0000</created>
                <updated>Wed, 14 Dec 2016 03:58:09 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>15</watches>
                                                                <comments>
                            <comment id="15682572" author="carp84" created="Mon, 21 Nov 2016 05:24:26 +0000"  >&lt;p&gt;So here I&apos;d like we make a consensus on whether to 1) backport &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11425&quot; title=&quot;Cell/DBB end-to-end on the read-path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11425&quot;&gt;&lt;del&gt;HBASE-11425&lt;/del&gt;&lt;/a&gt; to branch-1 or 2) upload our patches for our customized 1.1.2 here. The former is more official and means community will maintain the backported feature, but as &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt; mentioned there&apos;ll be some more efforts to keep compatibility so more than only &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11425&quot; title=&quot;Cell/DBB end-to-end on the read-path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11425&quot;&gt;&lt;del&gt;HBASE-11425&lt;/del&gt;&lt;/a&gt;, and the latter is easier for us but harder for others to use due to code-base diverge.&lt;/p&gt;

&lt;p&gt;Maybe some kind of voting in need here? +1 for backport and -1 for only uploading existing patches? Let me know your thoughts please, thanks. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ram_krish&quot; class=&quot;user-hover&quot; rel=&quot;ram_krish&quot;&gt;ramkrishna.s.vasudevan&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Apache9&quot; class=&quot;user-hover&quot; rel=&quot;Apache9&quot;&gt;Duo Zhang&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=busbey&quot; class=&quot;user-hover&quot; rel=&quot;busbey&quot;&gt;Sean Busbey&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mantonov&quot; class=&quot;user-hover&quot; rel=&quot;mantonov&quot;&gt;Mikhail Antonov&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbertozzi&quot; class=&quot;user-hover&quot; rel=&quot;mbertozzi&quot;&gt;Matteo Bertozzi&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;And comments from others are also welcome. Thanks.&lt;/p&gt;</comment>
                            <comment id="15682585" author="anoop.hbase" created="Mon, 21 Nov 2016 05:31:24 +0000"  >&lt;p&gt;U guys have list of all jiras backported right.  There are some building blocks jiras not under &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11425&quot; title=&quot;Cell/DBB end-to-end on the read-path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11425&quot;&gt;&lt;del&gt;HBASE-11425&lt;/del&gt;&lt;/a&gt;..   Can u pls put all such jira ids here.. I forgot which all were compatibility related changes.. I can also help to check them... So let us do that analysis first and list down all such issues (if any).&lt;/p&gt;</comment>
                            <comment id="15682591" author="apache9" created="Mon, 21 Nov 2016 05:34:44 +0000"  >&lt;p&gt;I&apos;m a +0. I suggest you give a try first to see if it is easy to address the compatibiliy issues. I think the option of the one who decide to do the backport work(you or other people who want this feature on branch-1) is most important.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="15686735" author="carp84" created="Tue, 22 Nov 2016 13:16:46 +0000"  >&lt;p&gt;Assigning to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=haoran&quot; class=&quot;user-hover&quot; rel=&quot;haoran&quot;&gt;Yu Sun&lt;/a&gt; who is my workmate and did most of the backporting work, and leaving the questions to him. Sorry that he is on vacation this week (worth a rest after going through 11/11) and let&apos;s wait a little while.&lt;/p&gt;</comment>
                            <comment id="15692393" author="ram_krish" created="Thu, 24 Nov 2016 06:49:30 +0000"  >&lt;p&gt;I think some of the building blocks may be a bigger change and may end up in problems which is not easy to back port. I agree with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Apache9&quot; class=&quot;user-hover&quot; rel=&quot;Apache9&quot;&gt;Duo Zhang&lt;/a&gt; here.&lt;br/&gt;
First we see what compatability issues we got and then based on that see if it is easier to back port.&lt;br/&gt;
Even i too don&apos;t remember all the compatability issues but I don&apos;t think there is anything in terms of USer APIs.&lt;/p&gt;</comment>
                            <comment id="15721697" author="haoran" created="Mon, 5 Dec 2016 09:22:06 +0000"  >&lt;p&gt;yes, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt; is right, there are some building blocks jira not under &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11425&quot; title=&quot;Cell/DBB end-to-end on the read-path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11425&quot;&gt;&lt;del&gt;HBASE-11425&lt;/del&gt;&lt;/a&gt;, To resolve the merge conflicts I have totally backport about 77 patches to our customized branch, should I list the all the jira id I have backported as sub-task here for you and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ram_krish&quot; class=&quot;user-hover&quot; rel=&quot;ram_krish&quot;&gt;ramkrishna.s.vasudevan&lt;/a&gt; to check?&lt;/p&gt;</comment>
                            <comment id="15721983" author="anoop.hbase" created="Mon, 5 Dec 2016 11:08:53 +0000"  >&lt;p&gt;Yes pls list all the jira ids..  Will have a look at them and can help in analyzing the compatibility issues if any.&lt;/p&gt;</comment>
                            <comment id="15722008" author="ram_krish" created="Mon, 5 Dec 2016 11:19:02 +0000"  >&lt;p&gt;Pls prepare the list. We can figure it out I think from that list if there are some critical changes related to compatibility.&lt;/p&gt;</comment>
                            <comment id="15725028" author="haoran" created="Tue, 6 Dec 2016 10:20:37 +0000"  >&lt;p&gt;done, you and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt; please see the Description&lt;/p&gt;</comment>
                            <comment id="15726170" author="ram_krish" created="Tue, 6 Dec 2016 17:39:12 +0000"  >&lt;p&gt;Checking this. Will revert back tomorrow.&lt;/p&gt;</comment>
                            <comment id="15728569" author="ram_krish" created="Wed, 7 Dec 2016 11:49:15 +0000"  >&lt;p&gt;I think&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
https:&lt;span class=&quot;code-comment&quot;&gt;//issues.apache.org/jira/browse/HBASE-16189 - Rolling upgrade issue
&lt;/span&gt;https:&lt;span class=&quot;code-comment&quot;&gt;//issues.apache.org/jira/browse/HBASE-12084 - remove deprecated APIs from Result - incompatible change
&lt;/span&gt;https:&lt;span class=&quot;code-comment&quot;&gt;//issues.apache.org/jira/browse/HBASE-13641 - will &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt; the feature by doing copy in filters
&lt;/span&gt;https:&lt;span class=&quot;code-comment&quot;&gt;//issues.apache.org/jira/browse/HBASE-13642 - will &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt; the feature by doing copy in CPs
&lt;/span&gt;https:&lt;span class=&quot;code-comment&quot;&gt;//issues.apache.org/jira/browse/HBASE-12048 - already an incompatible change
&lt;/span&gt;https:&lt;span class=&quot;code-comment&quot;&gt;//issues.apache.org/jira/browse/HBASE-13450 - Purge rawbytescomparator
&lt;/span&gt;https:&lt;span class=&quot;code-comment&quot;&gt;//issues.apache.org/jira/browse/HBASE-10800&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The last one is pretty important. &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-16189&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-16189&lt;/a&gt; was already raised.&lt;br/&gt;
Some JIRAs are like we have maintained BC but if the Filters/CP are not upgraded then we don&apos;t get the full benefit of the feature.&lt;br/&gt;
Purging RawBytesComparator could have same impact as reported in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-16189&quot; title=&quot;[Rolling Upgrade] 2.0 hfiles cannot be opened by 1.x servers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-16189&quot;&gt;&lt;del&gt;HBASE-16189&lt;/del&gt;&lt;/a&gt;?  Need to check that.&lt;/p&gt;</comment>
                            <comment id="15729626" author="anoop.hbase" created="Wed, 7 Dec 2016 19:04:15 +0000"  >&lt;p&gt;Thanks for the analysis Ram.  See my thinking on these&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12084&quot; title=&quot;Remove deprecated APIs from Result&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12084&quot;&gt;&lt;del&gt;HBASE-12084&lt;/del&gt;&lt;/a&gt;   Removed APIs were deprecated since 0.96..  We can keep the old APIs if needed BC.  Need to make sure within server, we use only cell based APIs.  Client end any way we deal with KVs only. (No off heaping there)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13641&quot; title=&quot;Deperecate Filter#filterRowKey(byte[] buffer, int offset, int length) in favor of filterRowKey(Cell firstRowCell)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13641&quot;&gt;&lt;del&gt;HBASE-13641&lt;/del&gt;&lt;/a&gt;   Ya.  But not using the new filter method but continue with old one in custom filters will cause perf issue in 2.0 also.  We can make sure HBase filters use the new ones not the deprecated one&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13642&quot; title=&quot;Deprecate RegionObserver#postScannerFilterRow CP hook with byte[],int,int args in favor of taking Cell arg&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13642&quot;&gt;&lt;del&gt;HBASE-13642&lt;/del&gt;&lt;/a&gt;   Same as above.  I feel that the usage of the CP methods mentioned here in custom CPs  might be very rare. &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10800&quot; title=&quot;Use CellComparator instead of KVComparator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10800&quot;&gt;&lt;del&gt;HBASE-10800&lt;/del&gt;&lt;/a&gt;   &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-16189&quot; title=&quot;[Rolling Upgrade] 2.0 hfiles cannot be opened by 1.x servers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-16189&quot;&gt;&lt;del&gt;HBASE-16189&lt;/del&gt;&lt;/a&gt;  already fix this issue in branch-1&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12048&quot; title=&quot;Remove deprecated APIs from Filter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12048&quot;&gt;&lt;del&gt;HBASE-12048&lt;/del&gt;&lt;/a&gt;   Again deprecated since 0.96 -  Can this be removed?  Need to see how/whether we can do workaround for BC just like CP way&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13450&quot; title=&quot;Purge RawBytescomparator from the writers and readers for HBASE-10800&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13450&quot;&gt;&lt;del&gt;HBASE-13450&lt;/del&gt;&lt;/a&gt;   &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-16189&quot; title=&quot;[Rolling Upgrade] 2.0 hfiles cannot be opened by 1.x servers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-16189&quot;&gt;&lt;del&gt;HBASE-16189&lt;/del&gt;&lt;/a&gt;  seems handle this also. Should not be a big concern IMO&lt;/p&gt;</comment>
                            <comment id="15731015" author="ram_krish" created="Thu, 8 Dec 2016 03:58:08 +0000"  >&lt;p&gt;That is true. But I was just thinking on the impact for the users. So unless they do this change then the feature is not useful. How do we ensure that? So who needs this feature will need to upgrade the server?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
1. keep Cell api compatible with our existing code.
2. hfile format related compatibility issues.
3. client compatibility issue
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;You already know these list?  Particularly hfile format related issues?&lt;/p&gt;</comment>
                            <comment id="15731126" author="anoop.hbase" created="Thu, 8 Dec 2016 05:12:03 +0000"  >&lt;p&gt;Sorry am not getting ur Qs fully.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;So who needs this feature will need to upgrade the server?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;U mean update their server side code extensions ie. Filters/CPs?..  If so - yes&lt;/p&gt;

&lt;p&gt;What is the  HFile format issue?  Ya the Comparator class name issue is there but that is solved already in branch-1&lt;/p&gt;

&lt;p&gt;What are client compatibility issues?  U mean we removed some of the deprecated APIs from Cell. U say keep it as is?  I mean Apis like getRow().  Ya that should be ok. After all client side every thing is KVs&lt;/p&gt;</comment>
                            <comment id="15731381" author="haoran" created="Thu, 8 Dec 2016 07:15:32 +0000"  >&lt;p&gt;yes, we have three patches to resolve the issue, but not list above.&lt;br/&gt;
1. we still use Cell.getFamily(),Cell.getQualilfier and Cell.getRow() api in our existing code. this issue mainly introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14047&quot; title=&quot;Cleanup deprecated APIs from Cell class&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14047&quot;&gt;&lt;del&gt;HBASE-14047&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
2. we should ensure offheap hfile format and old branch 1.1.2(without &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-16189&quot; title=&quot;[Rolling Upgrade] 2.0 hfiles cannot be opened by 1.x servers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-16189&quot;&gt;&lt;del&gt;HBASE-16189&lt;/del&gt;&lt;/a&gt;) hfile format  keep compatible with each other for fallback purpose. so  change the offheap hfile format the same as our branch-1.1.2, and change some code while backport offheap to process this.&lt;br/&gt;
3. introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12084&quot; title=&quot;Remove deprecated APIs from Result&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12084&quot;&gt;&lt;del&gt;HBASE-12084&lt;/del&gt;&lt;/a&gt;,&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13641&quot; title=&quot;Deperecate Filter#filterRowKey(byte[] buffer, int offset, int length) in favor of filterRowKey(Cell firstRowCell)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13641&quot;&gt;&lt;del&gt;HBASE-13641&lt;/del&gt;&lt;/a&gt;,&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12048&quot; title=&quot;Remove deprecated APIs from Filter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12048&quot;&gt;&lt;del&gt;HBASE-12048&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;so i think we should at least remove &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14047&quot; title=&quot;Cleanup deprecated APIs from Cell class&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14047&quot;&gt;&lt;del&gt;HBASE-14047&lt;/del&gt;&lt;/a&gt;,&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12084&quot; title=&quot;Remove deprecated APIs from Result&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12084&quot;&gt;&lt;del&gt;HBASE-12084&lt;/del&gt;&lt;/a&gt;,&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13641&quot; title=&quot;Deperecate Filter#filterRowKey(byte[] buffer, int offset, int length) in favor of filterRowKey(Cell firstRowCell)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13641&quot;&gt;&lt;del&gt;HBASE-13641&lt;/del&gt;&lt;/a&gt;,&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12048&quot; title=&quot;Remove deprecated APIs from Filter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12048&quot;&gt;&lt;del&gt;HBASE-12048&lt;/del&gt;&lt;/a&gt; from backport list.&lt;/p&gt;</comment>
                            <comment id="15731435" author="anoop.hbase" created="Thu, 8 Dec 2016 07:35:00 +0000"  >&lt;p&gt;Mind attaching the 3 patches here so as to get what code level changes were needed.&lt;br/&gt;
So what is ur feeling abt backport and possible BS issue?  I feel some how that we can backport with out any BC issue.  Ya it wont be exactly same as 2.0 based patches. As u said some to be avoided and some to changed a bit. still overall possible is what my feeling now after seeing the list.  wdyt? cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yuzhihong%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;yuzhihong@gmail.com&quot;&gt;Ted Yu&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15731468" author="ram_krish" created="Thu, 8 Dec 2016 07:51:55 +0000"  >&lt;blockquote&gt;&lt;p&gt;so i think we should at least remove &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14047&quot; title=&quot;Cleanup deprecated APIs from Cell class&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14047&quot;&gt;&lt;del&gt;HBASE-14047&lt;/del&gt;&lt;/a&gt;,&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12084&quot; title=&quot;Remove deprecated APIs from Result&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12084&quot;&gt;&lt;del&gt;HBASE-12084&lt;/del&gt;&lt;/a&gt;,&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13641&quot; title=&quot;Deperecate Filter#filterRowKey(byte[] buffer, int offset, int length) in favor of filterRowKey(Cell firstRowCell)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13641&quot;&gt;&lt;del&gt;HBASE-13641&lt;/del&gt;&lt;/a&gt;,&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12048&quot; title=&quot;Remove deprecated APIs from Filter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12048&quot;&gt;&lt;del&gt;HBASE-12048&lt;/del&gt;&lt;/a&gt; from backport list.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Makes sense. &lt;br/&gt;
I too think we can backport. Some patches needs to be avoided or changed. We can try backporting by creating sub-jiras under this?&lt;/p&gt;</comment>
                            <comment id="15731485" author="haoran" created="Thu, 8 Dec 2016 07:59:31 +0000"  >&lt;p&gt;done&lt;/p&gt;</comment>
                            <comment id="15731493" author="haoran" created="Thu, 8 Dec 2016 08:04:33 +0000"  >&lt;p&gt;yes, I think so, almost all of patches need to be changed due to merge conflict.so this will need some time if we decide to backport.&lt;/p&gt;</comment>
                            <comment id="15731515" author="carp84" created="Thu, 8 Dec 2016 08:18:04 +0000"  >&lt;p&gt;Ok, we get a long list to backport and some new changes to keep compatibility, good start (smile).&lt;/p&gt;

&lt;p&gt;So what&apos;s the better way for next move? Fork and merge? Or simply a big patch here for review? No doubt it&apos;s time costing to make sure of compatibility and stability no matter which way to take, but worth the efforts. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15731546" author="anoop.hbase" created="Thu, 8 Dec 2016 08:38:37 +0000"  >&lt;p&gt;With all these list and analysis, lets start a vote in dev@.  Then we can decide based on the voting pattern there.  Ya a new branch based on branch-1 might be needed with smaller patches getting in and then finally a merge back to branch-1&lt;/p&gt;</comment>
                            <comment id="15731563" author="anoop.hbase" created="Thu, 8 Dec 2016 08:45:21 +0000"  >&lt;p&gt;Thanks for the patches..  Ya all make sense..&lt;br/&gt;
On Filter,  so we have Cell based APIs from 0.96 and deprecated KV based APIs there.  But 1.x version contain both.  So in branch-1 how is it used now?  The core code flow calls cell based new APIs right?  And FilterBase def impl of new Cell based APIs try to call KV based old APIs.    CPs follow this way.   I did not see branch-1 code base.  I think ur attached patch is having some issue wrt maintain BC.  Separate topic , we can discuss.&lt;/p&gt;

&lt;p&gt;So the end result is that we can conclude that the backport of the feature is possible with BC maintain.  Good ..&lt;/p&gt;</comment>
                            <comment id="15731803" author="yuzhihong@gmail.com" created="Thu, 8 Dec 2016 10:36:43 +0000"  >&lt;p&gt;Considerable testing effort is needed on the final artifact with all the backports. The effort involves:&lt;/p&gt;

&lt;p&gt;1. showing the backports have the same level of performance boost as seen within Alibaba&lt;br/&gt;
2. rolling restart works starting with the build artifact without the backports.&lt;br/&gt;
3. ITBLL works with backports (maybe tricky since we don&apos;t know whether ITBLL passes for the tip of branch-1 and this is a moving target)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=haoran&quot; class=&quot;user-hover&quot; rel=&quot;haoran&quot;&gt;Yu Sun&lt;/a&gt;&lt;br/&gt;
Do you have bandwidth for the above actions ?&lt;/p&gt;

&lt;p&gt;If the answer is yea, you can start the discussion on dev@hbase to get community opinion.&lt;/p&gt;</comment>
                            <comment id="15747155" author="haoran" created="Wed, 14 Dec 2016 03:58:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu&quot; class=&quot;user-hover&quot; rel=&quot;tedyu&quot;&gt;Ted Yu&lt;/a&gt; As you have listed, the backport needs lots of effort and i think it will need weeks to complete this.&lt;br/&gt;
I am afraid I dont have enouth time to do this and cause the backport to be delayed.&lt;br/&gt;
so if any others who have interesting in doing backport, I would like to provide any necessary help if needed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12842305" name="0001-fix-EHB-511-Resolve-client-compatibility-issue-introduced-by-offheap-change.patch" size="23693" author="haoran" created="Thu, 8 Dec 2016 07:56:59 +0000"/>
                            <attachment id="12842303" name="0001-to-EHB-446-offheap-hfile-format-should-keep-compatible-v3.patch" size="5707" author="haoran" created="Thu, 8 Dec 2016 07:56:58 +0000"/>
                            <attachment id="12842304" name="0001-to-EHB-456-Cell-should-be-compatible-with-branch-1.1.2.patch" size="22354" author="haoran" created="Thu, 8 Dec 2016 07:56:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 21 Nov 2016 05:31:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36k9j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>