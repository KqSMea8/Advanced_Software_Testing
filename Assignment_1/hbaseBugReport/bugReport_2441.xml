<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:01:56 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-2441/HBASE-2441.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-2441] ZK failures early in RS startup sequence cause infinite busy loop</title>
                <link>https://issues.apache.org/jira/browse/HBASE-2441</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;If the RS loses its ZK session before it reports for duty, the abort() call will trigger an NPE, and then the stop boolean doesn&apos;t get toggled. The RS will then loop forever trying to register itself in the expired ZK session, and fill up the logs.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12462005">HBASE-2441</key>
            <summary>ZK failures early in RS startup sequence cause infinite busy loop</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="tlipcon">Todd Lipcon</assignee>
                                    <reporter username="tlipcon">Todd Lipcon</reporter>
                        <labels>
                            <label>moved_from_0_20_5</label>
                    </labels>
                <created>Wed, 14 Apr 2010 01:23:42 +0000</created>
                <updated>Tue, 30 Oct 2012 21:20:49 +0000</updated>
                            <resolved>Tue, 30 Oct 2012 21:20:49 +0000</resolved>
                                    <version>0.20.3</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="12856719" author="tlipcon" created="Wed, 14 Apr 2010 01:25:47 +0000"  >&lt;p&gt;I think I caused this by starting a RS while the master was down, and then killing ZK. First got the NPE because metrics wasn&apos;t initialized yet when abort() came:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2010-04-13 17:40:28,495 ERROR org.apache.zookeeper.ClientCnxn: Error &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; calling watcher 
java.lang.NullPointerException
        at org.apache.hadoop.hbase.regionserver.HRegionServer.abort(HRegionServer.java:1263)
        at org.apache.hadoop.hbase.regionserver.HRegionServer.process(HRegionServer.java:373)
        at org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:488)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and then looped forever with:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2010-04-13 18:00:19,158 DEBUG org.apache.hadoop.hbase.regionserver.HRegionServer: Start code already taken, trying another one
2010-04-13 18:00:19,158 WARN org.apache.hadoop.hbase.zookeeper.ZooKeeperWrapper: Failed to create /hbase/rs -- check quorum servers, currently=monster01.sf.cloudera.com:2222
org.apache.zookeeper.KeeperException$SessionExpiredException: KeeperErrorCode = Session expired &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; /hbase/rs
        at org.apache.zookeeper.KeeperException.create(KeeperException.java:118)
        at org.apache.zookeeper.KeeperException.create(KeeperException.java:42)
        at org.apache.zookeeper.ZooKeeper.exists(ZooKeeper.java:809)
        at org.apache.zookeeper.ZooKeeper.exists(ZooKeeper.java:837)
        at org.apache.hadoop.hbase.zookeeper.ZooKeeperWrapper.ensureExists(ZooKeeperWrapper.java:405)
        at org.apache.hadoop.hbase.zookeeper.ZooKeeperWrapper.writeRSLocation(ZooKeeperWrapper.java:586)
        at org.apache.hadoop.hbase.regionserver.HRegionServer.reportForDuty(HRegionServer.java:1339)
        at org.apache.hadoop.hbase.regionserver.HRegionServer.run(HRegionServer.java:428)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:619)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12856721" author="tlipcon" created="Wed, 14 Apr 2010 01:31:56 +0000"  >&lt;p&gt;Here&apos;s a patch that fixes this. Would appreciate if someone&apos;s able to reproduce - not sure how to write a test plan for it and haven&apos;t been able to reproduce it quite yet. The trick is to get a ZK session and have it expire before reportForDuty is called (perhaps by making the RS retry a bunch of times to talk to the master)&lt;/p&gt;</comment>
                            <comment id="12856740" author="stack" created="Wed, 14 Apr 2010 04:09:58 +0000"  >&lt;p&gt;Moving into 0.20.5.&lt;/p&gt;

&lt;p&gt;I  need to figure out how to do a test for hbase-2413 which is in this territory.  Let me see if I can reproduce this bug.&lt;/p&gt;</comment>
                            <comment id="12866789" author="stack" created="Wed, 12 May 2010 23:47:59 +0000"  >&lt;p&gt;Bulk move of 0.20.5 issues into 0.21.0 after vote that we merge branch into TRUNK up on list.&lt;/p&gt;</comment>
                            <comment id="12875867" author="stack" created="Sat, 5 Jun 2010 05:36:01 +0000"  >&lt;p&gt;This patch won&apos;t apply because over in hbase-2614, 50% of its thunder was stolen.  I&apos;m +1 on applying the rest of this patch even w/o unit test.&lt;/p&gt;</comment>
                            <comment id="12875953" author="tlipcon" created="Sat, 5 Jun 2010 22:02:07 +0000"  >&lt;p&gt;I&apos;m going to be stubborn and try to write a test for this even though you +1ed &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Hopefully will do so this week.&lt;br/&gt;
These issues are so rare to reproduce &quot;in the wild&quot; that I think it&apos;s especially important to have targeted tests.&lt;br/&gt;
Otherwise it&apos;s quite likely we&apos;ll regress them down the road.&lt;/p&gt;</comment>
                            <comment id="12902217" author="jdcryans" created="Wed, 25 Aug 2010 00:42:14 +0000"  >&lt;p&gt;Todd, are you still planning to write a test?&lt;/p&gt;</comment>
                            <comment id="12918188" author="streamy" created="Tue, 5 Oct 2010 21:05:28 +0000"  >&lt;p&gt;Status of this?  Does it exist on new master?&lt;/p&gt;</comment>
                            <comment id="12927177" author="stack" created="Mon, 1 Nov 2010 22:08:19 +0000"  >&lt;p&gt;Moving out.  Bring back in if test done before 0.90RC.&lt;/p&gt;</comment>
                            <comment id="13005819" author="apurtell" created="Fri, 11 Mar 2011 20:35:11 +0000"  >&lt;p&gt;Cancelling patch, stale.&lt;/p&gt;</comment>
                            <comment id="13047593" author="stack" created="Fri, 10 Jun 2011 22:45:59 +0000"  >&lt;p&gt;Moving out of 0.92.0. Pull it back in if you think different.&lt;/p&gt;</comment>
                            <comment id="13487253" author="tlipcon" created="Tue, 30 Oct 2012 21:20:49 +0000"  >&lt;p&gt;Closing as cannot-reproduce, since this hasn&apos;t been seen in quite some time&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12441672" name="ASF.LICENSE.NOT.GRANTED--hbase-2441.txt" size="1418" author="tlipcon" created="Wed, 14 Apr 2010 01:31:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 14 Apr 2010 04:09:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26304</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 7 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02dhj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11786</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>