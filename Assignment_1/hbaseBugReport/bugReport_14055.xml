<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:49:19 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-14055/HBASE-14055.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-14055] Untangle region - region server dependencies</title>
                <link>https://issues.apache.org/jira/browse/HBASE-14055</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;We need to untangle region from outside of region server. The parent jira is trying to create an embedded library, like leveldb, out of region so that it should be possible to host a set of regions without being a regionserver. &lt;/p&gt;

&lt;p&gt;From a layering point of view, region hosting and WAL services should be abstracted. Hosting a region means threads for flushing, compaction, cleanups, hosting a WAL, and block cache. The RegionServer normally holds these, together with RpcServer and zk connection, heartbeats, and all other stuff that is required for running as a deamon and inside a cluster. &lt;/p&gt;

&lt;p&gt;See parent jira for some more context. &lt;/p&gt;
</description>
                <environment></environment>
        <key id="12844030">HBASE-14055</key>
            <summary>Untangle region - region server dependencies</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12782435">HBASE-13260</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png" description="A patch for this issue has been uploaded to JIRA by a contributor.">Patch Available</status>
                    <statusCategory id="4" key="indeterminate" colorName="yellow"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="enis">Enis Soztutar</assignee>
                                    <reporter username="enis">Enis Soztutar</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Jul 2015 02:14:25 +0000</created>
                <updated>Sat, 18 Jun 2016 00:11:46 +0000</updated>
                                                            <fixVersion>2.0.0</fixVersion>
                    <fixVersion>1.4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                <comments>
                            <comment id="14621617" author="enis" created="Fri, 10 Jul 2015 02:20:59 +0000"  >&lt;p&gt;Here is a patch (extracted from parent jira) which does some of the cleanup. &lt;/p&gt;

&lt;p&gt;Mainly, introduces &lt;tt&gt;RegionServices&lt;/tt&gt;, &lt;tt&gt;WALServices&lt;/tt&gt;. &lt;tt&gt;WALContainer&lt;/tt&gt; is  abstracted away for all services related to hosting a logical WAL. The patch includes some small fixes as well (being able to delete wal files without archiving). &lt;/p&gt;
</comment>
                            <comment id="14621728" author="hadoopqa" created="Fri, 10 Jul 2015 05:03:35 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12744622/hbase-14055_v1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12744622/hbase-14055_v1.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit ff122f80b9b85176adb616306938f64fa62e963f.&lt;br/&gt;
  ATTACHMENT ID: 12744622&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 12 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 1902 checkstyle errors (more than the master&apos;s current 1896 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14725//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14725//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14725//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14725//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14725//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14725//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Javadoc warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14725//artifact/patchprocess/patchJavadocWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14725//artifact/patchprocess/patchJavadocWarnings.txt&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14725//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14725//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14622609" author="stack" created="Fri, 10 Jul 2015 17:17:40 +0000"  >&lt;p&gt;What is requestSystemCompaction?&lt;/p&gt;

&lt;p&gt;How much of this patch comes from the region-as-pv2-store experiment, if any?&lt;/p&gt;

&lt;p&gt;What is going on with this change where compactions and memstore checker are no longer ScheduledChores?&lt;/p&gt;

&lt;p&gt;	  CompactionChecker compactionChecker;&lt;/p&gt;

&lt;p&gt;Ditto memstore checker.&lt;/p&gt;

&lt;p&gt;Does this undo work reducing running chore thread count?&lt;/p&gt;

&lt;p&gt;On&lt;/p&gt;

&lt;p&gt;    private final List&amp;lt;RegionServices&amp;gt; regionServices = new CopyOnWriteArrayList&amp;lt;&amp;gt;();&lt;/p&gt;

&lt;p&gt;When would RegionServices change out from under us? Or is this just around starting and stopping so RegionServices not pulled from under running chores?&lt;/p&gt;

&lt;p&gt;Apart from above nits, its nice. +1  Are javadoc and checkstyle warnings yours?  When we going to have  hbase-region and hbase-wal modules?&lt;/p&gt;</comment>
                            <comment id="14623096" author="enis" created="Sat, 11 Jul 2015 00:02:47 +0000"  >&lt;p&gt;Thanks Stack for taking a look. &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;What is requestSystemCompaction?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;It comes from CompactSplitThread. Seems that the only difference is priority. There are callers which used to call CompactSplitTread.requestSystemCompaction(). Did not check why this versus the one with explicit priority. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;How much of this patch comes from the region-as-pv2-store experiment, if any?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Almost all of this patch is a subset of region-as-pv2-store experiment (parent jira). &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;What is going on with this change where compactions and memstore checker are no longer ScheduledChores?&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Does this undo work reducing running chore thread count?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Good question. It is not changing these compaction and flusher threads for now. They are still executed by the chore service of HRS. The WAL threads WALRoller has been moved to be inside WALContainer, but WALRoller was not a chore service anyway. &lt;br/&gt;
There should be a follow up to this this which continues with the separation. HRegion still gets a reference to &lt;tt&gt;RegionServerServices&lt;/tt&gt; rather than &lt;tt&gt;RegionServices&lt;/tt&gt; and flusher / compaction is still owned by the RS. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;When would RegionServices change out from under us? Or is this just around starting and stopping so RegionServices not pulled from under running chores?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;HRS.addRegionServices() is for adding new RegionServices (if you have). Right now only customer for that API was EmbeddedDatabase from parent patch. But I think we can keep it around for the follow up cleaning. &lt;/p&gt;</comment>
                            <comment id="14746394" author="stack" created="Tue, 15 Sep 2015 22:30:35 +0000"  >&lt;p&gt;Interested in getting this in &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; I like the WALServices bit...  Or, would it be better to put up a target for where to take Region long term first to make sure this patch and others are driving toward it (We have RegionServices Interface but we also have Region Interface... we need both?)&lt;/p&gt;</comment>
                            <comment id="14947617" author="ndimiduk" created="Wed, 7 Oct 2015 21:21:58 +0000"  >&lt;p&gt;re: RegionServices vs Region, I also noticed a similar-in-spirit adapter in our test code, &lt;tt&gt;HBaseTestCase$Incommon&lt;/tt&gt;. &lt;/p&gt;</comment>
                            <comment id="15337274" author="hadoopqa" created="Sat, 18 Jun 2016 00:11:46 +0000"  >&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;&lt;/b&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Vote &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Runtime &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Comment &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; patch &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; 0m 4s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14055&quot; title=&quot;Untangle region - region server dependencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14055&quot;&gt;HBASE-14055&lt;/a&gt; does not apply to master. Rebase required? Wrong Branch? See &lt;a href=&quot;https://yetus.apache.org/documentation/0.2.1/precommit-patchnames&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://yetus.apache.org/documentation/0.2.1/precommit-patchnames&lt;/a&gt; for help. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Report/Notes &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Patch URL &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12744622/hbase-14055_v1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12744622/hbase-14055_v1.patch&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Issue &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14055&quot; title=&quot;Untangle region - region server dependencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14055&quot;&gt;HBASE-14055&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Console output &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2285/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2285/console&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Powered by &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Apache Yetus 0.2.1   &lt;a href=&quot;http://yetus.apache.org&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://yetus.apache.org&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;This message was automatically generated.&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12744622" name="hbase-14055_v1.patch" size="81707" author="enis" created="Fri, 10 Jul 2015 02:20:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 10 Jul 2015 05:03:35 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            25 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2h2vj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>