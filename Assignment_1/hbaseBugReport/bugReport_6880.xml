<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:40:41 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6880/HBASE-6880.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6880] Failure in assigning root causes system hang</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6880</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;In looking into a TestReplication failure, I found out sometimes assignRoot could fail, for example, RS is not serving traffic yet.  In this case, the master will keep waiting for root to be available, which could never happen.&lt;/p&gt;

&lt;p&gt;Need to gracefully terminate master if root is not assigned properly.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12609104">HBASE-6880</key>
            <summary>Failure in assigning root causes system hang</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="jxiang">Jimmy Xiang</assignee>
                                    <reporter username="jxiang">Jimmy Xiang</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 Sep 2012 18:57:26 +0000</created>
                <updated>Tue, 23 Oct 2012 18:55:44 +0000</updated>
                            <resolved>Tue, 23 Oct 2012 18:55:44 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13464468" author="ram_krish" created="Thu, 27 Sep 2012 05:41:47 +0000"  >&lt;p&gt;@Jimmy&lt;br/&gt;
I think the problem that you are mentioning here is the one that i found in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6698&quot; title=&quot;Refactor checkAndPut and checkAndDelete to use doMiniBatchMutation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6698&quot;&gt;&lt;del&gt;HBASE-6698&lt;/del&gt;&lt;/a&gt; in one the QA buids.&lt;br/&gt;
Once the RS registers to master we tend to assignRoot and there we fail if in the RPC layer the flag &apos;started&apos; is not set.&lt;br/&gt;
Should we go till the assign flow and then retry the assign? Could there be anyother better way or something?  I understand that &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6881&quot; title=&quot;All regionservers are marked offline even there is still one up&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6881&quot;&gt;&lt;del&gt;HBASE-6881&lt;/del&gt;&lt;/a&gt; tries to solve this.  What you feel?&lt;/p&gt;</comment>
                            <comment id="13464865" author="jxiang" created="Thu, 27 Sep 2012 16:43:42 +0000"  >&lt;p&gt;@Ram, are you going to fix this in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6698&quot; title=&quot;Refactor checkAndPut and checkAndDelete to use doMiniBatchMutation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6698&quot;&gt;&lt;del&gt;HBASE-6698&lt;/del&gt;&lt;/a&gt;?  If so, we can close this as a duplicate.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6881&quot; title=&quot;All regionservers are marked offline even there is still one up&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6881&quot;&gt;&lt;del&gt;HBASE-6881&lt;/del&gt;&lt;/a&gt; is just partially fixing this issue, by making the issue happens a little less.&lt;/p&gt;

&lt;p&gt;I was thinking we should let assignRoot return something to indicate if it is successful.  If not,&lt;br/&gt;
there is no point to wait for it any more.  We can retry several times.  If it still doesn&apos;t&lt;br/&gt;
work, then abort the master, instead of hanging there forever. No retry and fail fast is also ok&lt;br/&gt;
with me, which may be cleaner in some sense.&lt;/p&gt;

&lt;p&gt;Even if assignRoot does return something say the assign is going on, it may not succeed.  So&lt;br/&gt;
we also need to make sure the timeout monitor can fix it.&lt;/p&gt;
</comment>
                            <comment id="13464907" author="ram_krish" created="Thu, 27 Sep 2012 17:38:35 +0000"  >&lt;p&gt;@Jimmy&lt;br/&gt;
I did not raise any issue to fix that.  So let this JIRA be there to fix this.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6881&quot; title=&quot;All regionservers are marked offline even there is still one up&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6881&quot;&gt;&lt;del&gt;HBASE-6881&lt;/del&gt;&lt;/a&gt; is just partially fixing this issue, by making the issue happens a little less.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes, right&lt;/p&gt;

&lt;p&gt;Seeing the HMaster startup code and the RS start up code, retry should be the ideal way.  &lt;br/&gt;
Adding a retry logic in the assign code on ServerNotRunningYetException will it be affecting normal regions also?&lt;/p&gt;
</comment>
                            <comment id="13464934" author="jxiang" created="Thu, 27 Sep 2012 18:07:25 +0000"  >&lt;p&gt;Cool.  As to ServerNotRunningYetException, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6881&quot; title=&quot;All regionservers are marked offline even there is still one up&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6881&quot;&gt;&lt;del&gt;HBASE-6881&lt;/del&gt;&lt;/a&gt; depends on the normal retry mechanism.&lt;br/&gt;
We can discuss it more in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6881&quot; title=&quot;All regionservers are marked offline even there is still one up&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6881&quot;&gt;&lt;del&gt;HBASE-6881&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13482571" author="jxiang" created="Tue, 23 Oct 2012 18:55:44 +0000"  >&lt;p&gt;I thought about this issue again.  Probably it is right to keep waiting and let the timeout monitor to deal with it.&lt;/p&gt;

&lt;p&gt;With &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5119&quot; title=&quot;Set the TimeoutMonitor&amp;#39;s timeout back down&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5119&quot;&gt;&lt;del&gt;HBASE-5119&lt;/del&gt;&lt;/a&gt;, the timeout out period will be dropped from 20 minutes to 5 minutes, which is a little bit helpful.&lt;/p&gt;

&lt;p&gt;The issue here is that we can&apos;t see the assignment of root is completely failed. At least it is put in transition.  TM will fix it.  The same assign call is used for user regions as well.  Changing it to return true/false may be confusing.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12609109">HBASE-6881</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 27 Sep 2012 05:41:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>241823</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 8 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02ddz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11770</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>