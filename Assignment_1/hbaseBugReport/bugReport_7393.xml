<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:45:21 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-7393/HBASE-7393.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-7393] No way to change ProtocolEngine after initial rpc connection is setup</title>
                <link>https://issues.apache.org/jira/browse/HBASE-7393</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;After a master connection is established, if hbase configuration changes to use a different rpc engine than the one originally used by the client there is no way for client to start a new connection using a different rpc engine even if the right configuration (i.e., hbase.rpc.engine is set to the new rpc engine). &lt;/p&gt;

&lt;p&gt;I think the problem is in HBaseRPC.getProtocolEngine:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    RpcEngine engine = PROTOCOL_ENGINES.get(protocol);
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (engine == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
      &lt;span class=&quot;code-comment&quot;&gt;// check &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; a configured &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; engine
&lt;/span&gt;      &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;lt;?&amp;gt; defaultEngine =
          conf.getClass(RPC_ENGINE_PROP, WritableRpcEngine.class);

      &lt;span class=&quot;code-comment&quot;&gt;// check &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; a per &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; override
&lt;/span&gt;      &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;lt;?&amp;gt; impl = conf.getClass(RPC_ENGINE_PROP+&lt;span class=&quot;code-quote&quot;&gt;&quot;.&quot;&lt;/span&gt;+protocol.getName(),
                                    defaultEngine);
      LOG.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Using &quot;&lt;/span&gt;+impl.getName()+&lt;span class=&quot;code-quote&quot;&gt;&quot; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &quot;&lt;/span&gt;+protocol.getName());
      engine = (RpcEngine) ReflectionUtils.newInstance(impl, conf);
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (protocol.isInterface())
        PROXY_ENGINES.put(Proxy.getProxyClass(protocol.getClassLoader(),
                                              protocol),
                          engine);
      PROTOCOL_ENGINES.put(protocol, engine);
    }
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; engine;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It seems that if a certain rpc engine was using to access the HMasterInterface before, the same rpc engine will be used regardless of the configuration passed.&lt;/p&gt;

&lt;p&gt;It will be better if the client jvm won&apos;t have to restart in order to replace the rpc engine used.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12624684">HBASE-7393</key>
            <summary>No way to change ProtocolEngine after initial rpc connection is setup</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="giladwolff">Gilad Wolff</reporter>
                        <labels>
                    </labels>
                <created>Wed, 19 Dec 2012 19:13:41 +0000</created>
                <updated>Wed, 19 Dec 2012 19:13:41 +0000</updated>
                                            <version>0.92.1</version>
                                                    <component>IPC/RPC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>300538</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i16fpz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>245679</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>