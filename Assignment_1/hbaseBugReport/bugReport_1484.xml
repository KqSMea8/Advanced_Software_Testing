<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:53:52 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1484/HBASE-1484.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1484] commit log split writes files with newest edits first (since hbase-1430); should be other way round</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1484</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description></description>
                <environment></environment>
        <key id="12427171">HBASE-1484</key>
            <summary>commit log split writes files with newest edits first (since hbase-1430); should be other way round</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stack">stack</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Fri, 5 Jun 2009 03:44:12 +0000</created>
                <updated>Fri, 21 Jan 2011 05:38:35 +0000</updated>
                            <resolved>Fri, 5 Jun 2009 18:21:21 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12716491" author="stack" created="Fri, 5 Jun 2009 03:51:56 +0000"  >&lt;p&gt;Fix for wrong order of edits.&lt;/p&gt;

&lt;p&gt;M src/test/org/apache/hadoop/hbase/regionserver/TestHLog.java&lt;br/&gt;
  Added simple test that verifies only single region in a produced&lt;br/&gt;
  split file and that edits are in ascending order.&lt;br/&gt;
M src/java/org/apache/hadoop/hbase/regionserver/HLog.java&lt;br/&gt;
  Make splitLog return List of split logs written &amp;#8211; helps in unit tests.&lt;br/&gt;
  Walk the LinkedList of edits in reverse so edits come out in the order&lt;br/&gt;
  in which they were added writing split file.&lt;br/&gt;
  Added toString to HLogEdit.&lt;/p&gt;</comment>
                            <comment id="12716683" author="clint.morgan" created="Fri, 5 Jun 2009 17:28:46 +0000"  >&lt;p&gt;I get a NPE:&lt;/p&gt;

&lt;p&gt;java.lang.NullPointerException&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HLog$1.run(HLog.java:912)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:885)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:637)&lt;/p&gt;

&lt;p&gt;This fixes it:&lt;/p&gt;

&lt;p&gt;Index: src/java/org/apache/hadoop/hbase/regionserver/HLog.java&lt;br/&gt;
===================================================================&lt;br/&gt;
&amp;#8212; src/java/org/apache/hadoop/hbase/regionserver/HLog.java	(revision 782058)&lt;br/&gt;
+++ src/java/org/apache/hadoop/hbase/regionserver/HLog.java	(working copy)&lt;br/&gt;
@@ -888,7 +888,8 @@&lt;br/&gt;
                       SequenceFile.Writer w =&lt;br/&gt;
                         SequenceFile.createWriter(fs, conf, logfile,&lt;br/&gt;
                           HLogKey.class, HLogEdit.class, getCompressionType(conf));&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;logWriters.put(key, new WriterAndPath(logfile, w));&lt;br/&gt;
+                      wap = new WriterAndPath(logfile, w);&lt;br/&gt;
+                      logWriters.put(key, wap);&lt;br/&gt;
                       if (LOG.isDebugEnabled()) {&lt;br/&gt;
                         LOG.debug(&quot;Creating new hlog file writer for path &quot;&lt;br/&gt;
                             + logfile + &quot; and region &quot; + Bytes.toString(key));&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12716706" author="stack" created="Fri, 5 Jun 2009 18:21:21 +0000"  >&lt;p&gt;Thanks Clint.  Applied your patch to branch (Trunk was fine).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12409927" name="1484.patch" size="10977" author="stack" created="Fri, 5 Jun 2009 03:51:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 5 Jun 2009 17:28:46 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25780</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 29 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hdiv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99453</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>