<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:59:54 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-2214/HBASE-2214.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-2214] Do HBASE-1996 -- setting size to return in scan rather than count of rows -- properly</title>
                <link>https://issues.apache.org/jira/browse/HBASE-2214</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The notion that you set size rather than row count specifying how many rows a scanner should return in each cycle was raised over in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1996&quot; title=&quot;Configure scanner buffer in bytes instead of number of rows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1996&quot;&gt;&lt;del&gt;HBASE-1996&lt;/del&gt;&lt;/a&gt;.  Its a good one making hbase &quot;regular&quot; though the data under it may vary.  &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1996&quot; title=&quot;Configure scanner buffer in bytes instead of number of rows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1996&quot;&gt;&lt;del&gt;HBASE-1996&lt;/del&gt;&lt;/a&gt; was committed but the patch was constrained by the fact that it needed to not change RPC interface.  This issue is about doing &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1996&quot; title=&quot;Configure scanner buffer in bytes instead of number of rows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1996&quot;&gt;&lt;del&gt;HBASE-1996&lt;/del&gt;&lt;/a&gt; for 0.21 in a clean, unconstrained way.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12456059">HBASE-2214</key>
            <summary>Do HBASE-1996 -- setting size to return in scan rather than count of rows -- properly</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 Feb 2010 19:26:53 +0000</created>
                <updated>Mon, 25 Nov 2013 19:37:59 +0000</updated>
                            <resolved>Fri, 10 Aug 2012 00:07:22 +0000</resolved>
                                                    <fixVersion>0.95.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>11</watches>
                                                                <comments>
                            <comment id="12832716" author="kaykay.unique" created="Thu, 11 Feb 2010 22:44:32 +0000"  >&lt;p&gt;Makes sense conceptually . Would be nice to have a final version of the patch logging the number of rows on the server side when scanning by size , so as to estimate the density / sparsity of the data across columns when we scan by size. &lt;/p&gt;</comment>
                            <comment id="12872084" author="stack" created="Thu, 27 May 2010 04:41:40 +0000"  >&lt;p&gt;Its &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1996&quot; title=&quot;Configure scanner buffer in bytes instead of number of rows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1996&quot;&gt;&lt;del&gt;HBASE-1996&lt;/del&gt;&lt;/a&gt;, not 1966.&lt;/p&gt;</comment>
                            <comment id="12874286" author="dploeg" created="Tue, 1 Jun 2010 22:41:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; title=&quot;Do HBASE-1996 -- setting size to return in scan rather than count of rows -- properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2214&quot;&gt;&lt;del&gt;HBASE-2214&lt;/del&gt;&lt;/a&gt;_with_broken_TestShell.txt is an early cut. Experiencing problems with this test stopping the process that&apos;s running it (eg hudson or ide).&lt;/p&gt;</comment>
                            <comment id="12874416" author="stack" created="Wed, 2 Jun 2010 04:53:35 +0000"  >&lt;p&gt;I tried it locally.  It works for me.  Is it running out of mem?  Its not because you lack MAVEN_OPTS=&quot;-Xmx512m&quot; or something?&lt;/p&gt;</comment>
                            <comment id="12918274" author="stack" created="Tue, 5 Oct 2010 22:28:31 +0000"  >&lt;p&gt;Moving this &apos;feature&apos; out.&lt;/p&gt;</comment>
                            <comment id="13239729" author="zhihyu@ebaysf.com" created="Tue, 27 Mar 2012 17:54:59 +0000"  >&lt;p&gt;@Daniel:&lt;br/&gt;
Are you working on this issue ?&lt;/p&gt;</comment>
                            <comment id="13239987" author="dploeg" created="Tue, 27 Mar 2012 21:57:18 +0000"  >&lt;p&gt;No - Not working on this issue at present - haven&apos;t touched the HBase codebase in quite some time, so the patch here may no longer be relevant. Happy for someone else to take it on, or if it&apos;s not relevant anymore to close it out.&lt;/p&gt;</comment>
                            <comment id="13240418" author="ferdy.g" created="Wed, 28 Mar 2012 13:56:11 +0000"  >&lt;p&gt;As mentioned in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5607&quot; title=&quot;Implement scanner caching throttling to prevent too big responses &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5607&quot;&gt;&lt;del&gt;HBASE-5607&lt;/del&gt;&lt;/a&gt;, I will pick up this issue.&lt;/p&gt;

&lt;p&gt;First of all:&lt;br/&gt;
I looked at the patch and I noticed that is huge. A lot of unnecessary changes are in it, whitespace/reformatting and such. It is very difficult to work with this when applying it with regular svn patch tools. Therefore, if you don&apos;t mind, I want to start over from scratch. (Of course it has been a while so a lot of changes won&apos;t apply anyway).&lt;/p&gt;

&lt;p&gt;Secondly, does this feature replaces the old number of rows caching? I like to propose that it is additional. So: A user specifying 100 rows and 10MB for a Scan will get chunks that are either capped at 100 rows, or 10MB, whichever limit comes first. Do you agree?&lt;/p&gt;</comment>
                            <comment id="13240432" author="zhihyu@ebaysf.com" created="Wed, 28 Mar 2012 14:05:18 +0000"  >&lt;p&gt;Feel free to start from scratch.&lt;/p&gt;

&lt;p&gt;For #2, size to return is optional setting. In case both size to return and number of rows are specified, your description makes sense.&lt;/p&gt;</comment>
                            <comment id="13254081" author="ferdy.g" created="Sat, 14 Apr 2012 11:15:35 +0000"  >&lt;p&gt;This is my first attempt. It is not finished, I was just curious if this is the right way to go. Note that it has no tests, because I was not sure where to include those. This patch piggybacks on the existing functionality introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1996&quot; title=&quot;Configure scanner buffer in bytes instead of number of rows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1996&quot;&gt;&lt;del&gt;HBASE-1996&lt;/del&gt;&lt;/a&gt;. (It seems that this also has no tests.)&lt;/p&gt;

&lt;p&gt;I tried to add a test to TestHRegion and TestScanner, but it seems the existing tests bypass the HRegionServer &quot;Result[] next(final long scannerId, int nbRows)&quot; method.&lt;/p&gt;</comment>
                            <comment id="13254092" author="hadoopqa" created="Sat, 14 Apr 2012 12:14:45 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12522673/HBASE-2214-0.94.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12522673/HBASE-2214-0.94.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 3 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1525//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1525//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1525//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1525//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1525//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1525//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13254116" author="zhihyu@ebaysf.com" created="Sat, 14 Apr 2012 14:01:29 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+   * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; the maximum buffer size in bytes. Also see 
+   * {@link #setMaxBufferSize(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;)}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&apos;Also see&apos; -&amp;gt; &apos;See also&apos;. The parameter type for setMaxBufferSize() should be long.&lt;br/&gt;
Since line length is 100 now, you can combine the two lines together.&lt;/p&gt;

&lt;p&gt;On review board, it is clear to see the white spaces in the patch.&lt;/p&gt;

&lt;p&gt;Trunk build is currently broken, please submit patch for Hadoop QA when trunk build passes.&lt;/p&gt;</comment>
                            <comment id="13254301" author="ferdy.g" created="Sun, 15 Apr 2012 10:52:21 +0000"  >&lt;p&gt;Ok thanks for your comments. I just submitted new patch to review board. &lt;a href=&quot;https://reviews.apache.org/r/4726/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;So what&apos;s protocol here, can I add &apos;hbase&apos; to reviewers group or just add individual reviewers?&lt;/p&gt;</comment>
                            <comment id="13254329" author="jiraposter@reviews.apache.org" created="Sun, 15 Apr 2012 13:39:18 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/4726/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2012-04-15 13:38:31.680141)&lt;/p&gt;


&lt;p&gt;Review request for hbase and Ted Yu.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; title=&quot;Do HBASE-1996 -- setting size to return in scan rather than count of rows -- properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2214&quot;&gt;&lt;del&gt;HBASE-2214&lt;/del&gt;&lt;/a&gt; per scan max buffersize.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; title=&quot;Do HBASE-1996 -- setting size to return in scan rather than count of rows -- properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2214&quot;&gt;&lt;del&gt;HBASE-2214&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-2214&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  /src/main/java/org/apache/hadoop/hbase/client/Scan.java 1326084 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java 1326084 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java 1326084 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/regionserver/RegionScanner.java 1326084 &lt;br/&gt;
  /src/test/java/org/apache/hadoop/hbase/coprocessor/TestCoprocessorInterface.java 1326084 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/4726/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;ferdy&lt;/p&gt;
</comment>
                            <comment id="13254330" author="ferdy.g" created="Sun, 15 Apr 2012 13:39:48 +0000"  >&lt;p&gt;Secondly, I&apos;d like the uploaded diff to be compared to the 0.94 branch. How can I specify this? It seems it is always compared to trunk?&lt;/p&gt;</comment>
                            <comment id="13254334" author="zhihyu@ebaysf.com" created="Sun, 15 Apr 2012 13:47:15 +0000"  >&lt;p&gt;&apos;hbase&apos; group should be included in each review request.&lt;br/&gt;
Normally patch for trunk is generated first and gets reviewed on review board. Hadoop QA checks out patch against trunk.&lt;/p&gt;</comment>
                            <comment id="13254335" author="zhihyu@ebaysf.com" created="Sun, 15 Apr 2012 13:52:06 +0000"  >&lt;p&gt;I went over &lt;a href=&quot;https://reviews.apache.org/r/4726&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726&lt;/a&gt; which looks clean.&lt;/p&gt;

&lt;p&gt;If adding unit test is difficult, can you perform verification on real clsuter and let us know the results ?&lt;/p&gt;</comment>
                            <comment id="13254338" author="ferdy.g" created="Sun, 15 Apr 2012 14:14:09 +0000"  >&lt;p&gt;Sure I will do that.&lt;/p&gt;

&lt;p&gt;Some patch segments do not apply to trunk so I will first create a patch for trunk.&lt;/p&gt;</comment>
                            <comment id="13254339" author="ferdy.g" created="Sun, 15 Apr 2012 14:16:48 +0000"  >&lt;p&gt;(Nevermind the latest comment. It seems that with a fuzz factor it does apply.)&lt;/p&gt;</comment>
                            <comment id="13255331" author="jiraposter@reviews.apache.org" created="Tue, 17 Apr 2012 05:47:22 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/4726/#review6968&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/#review6968&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;I think this an important addition.  Any chance of a test Ferdy to demonstrate it works.  Its kinda crazy you only have to do this much to make it work.&lt;/p&gt;


&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/client/Scan.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/4726/#comment15518&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/#comment15518&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Good&lt;/p&gt;



&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/4726/#comment15519&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/#comment15519&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Needs to be public?&lt;/p&gt;



&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/RegionScanner.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/4726/#comment15520&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/#comment15520&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    This is not used?&lt;/p&gt;



&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/RegionScanner.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/4726/#comment15521&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/#comment15521&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Is this a good name for this attribute?  Its the result size per next?  getMaxResultSize?  Or something like that?&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Michael&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2012-04-15 13:38:31, ferdy wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/4726/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2012-04-15 13:38:31)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hbase and Ted Yu.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; title=&quot;Do HBASE-1996 -- setting size to return in scan rather than count of rows -- properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2214&quot;&gt;&lt;del&gt;HBASE-2214&lt;/del&gt;&lt;/a&gt; per scan max buffersize.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; title=&quot;Do HBASE-1996 -- setting size to return in scan rather than count of rows -- properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2214&quot;&gt;&lt;del&gt;HBASE-2214&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-2214&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/client/Scan.java 1326084 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java 1326084 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java 1326084 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/RegionScanner.java 1326084 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/test/java/org/apache/hadoop/hbase/coprocessor/TestCoprocessorInterface.java 1326084 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/4726/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ferdy&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13255866" author="jiraposter@reviews.apache.org" created="Tue, 17 Apr 2012 19:37:13 +0000"  >

&lt;blockquote&gt;&lt;p&gt;On 2012-04-17 05:46:43, Michael Stack wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; I think this an important addition.  Any chance of a test Ferdy to demonstrate it works.  Its kinda crazy you only have to do this much to make it work.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It was indeed to good to be true. It does not yet work. There are still some other classes that need modification. (In order to make it work by piggybacking on the existing maxScannerResultSize mechanism).&lt;/p&gt;

&lt;p&gt;Will get back at this with new version of patch.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2012-04-17 05:46:43, Michael Stack wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; /src/main/java/org/apache/hadoop/hbase/regionserver/RegionScanner.java, line 26&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/4726/diff/2/?file=101902#file101902line26&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/diff/2/?file=101902#file101902line26&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     This is not used?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It is, namely in the javadoc comment. Removing it makes the link unclickable.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2012-04-17 05:46:43, Michael Stack wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; /src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java, line 3376&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/4726/diff/2/?file=101900#file101900line3376&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/diff/2/?file=101900#file101900line3376&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Needs to be public?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I cannot reduce the visibilty because it needs to in the interface. (Yeah it&apos;s a bit of a hack I guess)&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2012-04-17 05:46:43, Michael Stack wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; /src/main/java/org/apache/hadoop/hbase/regionserver/RegionScanner.java, line 59&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/4726/diff/2/?file=101902#file101902line59&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/diff/2/?file=101902#file101902line59&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Is this a good name for this attribute?  Its the result size per next?  getMaxResultSize?  Or something like that?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;maxResultSize seems better indeed. I will rename this next patch.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;ferdy&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/4726/#review6968&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/#review6968&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;On 2012-04-15 13:38:31, ferdy wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/4726/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2012-04-15 13:38:31)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hbase and Ted Yu.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; title=&quot;Do HBASE-1996 -- setting size to return in scan rather than count of rows -- properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2214&quot;&gt;&lt;del&gt;HBASE-2214&lt;/del&gt;&lt;/a&gt; per scan max buffersize.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; title=&quot;Do HBASE-1996 -- setting size to return in scan rather than count of rows -- properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2214&quot;&gt;&lt;del&gt;HBASE-2214&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-2214&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/client/Scan.java 1326084 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java 1326084 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java 1326084 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/RegionScanner.java 1326084 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/test/java/org/apache/hadoop/hbase/coprocessor/TestCoprocessorInterface.java 1326084 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/4726/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ferdy&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13262041" author="jiraposter@reviews.apache.org" created="Wed, 25 Apr 2012 20:26:15 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/4726/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2012-04-25 20:25:06.141778)&lt;/p&gt;


&lt;p&gt;Review request for hbase and Ted Yu.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Upload v4 of patch.&lt;/p&gt;

&lt;p&gt;Note that patch includes updated generated protobuffers sources.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; title=&quot;Do HBASE-1996 -- setting size to return in scan rather than count of rows -- properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2214&quot;&gt;&lt;del&gt;HBASE-2214&lt;/del&gt;&lt;/a&gt; per scan max buffersize.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; title=&quot;Do HBASE-1996 -- setting size to return in scan rather than count of rows -- properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2214&quot;&gt;&lt;del&gt;HBASE-2214&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-2214&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  /src/main/java/org/apache/hadoop/hbase/client/ClientScanner.java 1330504 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/client/Scan.java 1330504 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java 1330504 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java 1330504 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/protobuf/generated/AdminProtos.java 1330504 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/protobuf/generated/ClientProtos.java 1330504 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/protobuf/generated/HBaseProtos.java 1330504 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/protobuf/generated/RPCProtos.java 1330504 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/protobuf/generated/ZooKeeperProtos.java 1330504 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java 1330504 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java 1330504 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/regionserver/RegionScanner.java 1330504 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/regionserver/RegionServer.java 1330504 &lt;br/&gt;
  /src/main/protobuf/Client.proto 1330504 &lt;br/&gt;
  /src/test/java/org/apache/hadoop/hbase/coprocessor/TestCoprocessorInterface.java 1330504 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/4726/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing (updated)&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;It works when running this test:&lt;/p&gt;


&lt;p&gt;    new HBaseTestingUtility(conf).startMiniCluster();&lt;/p&gt;

&lt;p&gt;    HBaseAdmin admin = new HBaseAdmin(conf);&lt;br/&gt;
    if (!admin.tableExists(&quot;test&quot;)) &lt;/p&gt;
{
      HTableDescriptor tableDesc = new HTableDescriptor(&quot;test&quot;);
      tableDesc.addFamily(new HColumnDescriptor(&quot;fam&quot;));
      admin.createTable(tableDesc);
    }


&lt;p&gt;    HTable table = new HTable(conf, &quot;test&quot;);&lt;br/&gt;
    Put put; &lt;/p&gt;

&lt;p&gt;    put = new Put(Bytes.toBytes(&quot;row1&quot;));&lt;br/&gt;
    put.add(Bytes.toBytes(&quot;fam&quot;),Bytes.toBytes(&quot;qual1&quot;),Bytes.toBytes(&quot;val1&quot;));&lt;br/&gt;
    table.put(put);&lt;/p&gt;

&lt;p&gt;    put = new Put(Bytes.toBytes(&quot;row2&quot;));&lt;br/&gt;
    put.add(Bytes.toBytes(&quot;fam&quot;),Bytes.toBytes(&quot;qual2&quot;),Bytes.toBytes(&quot;val2&quot;));&lt;br/&gt;
    table.put(put);&lt;/p&gt;

&lt;p&gt;    put = new Put(Bytes.toBytes(&quot;row3&quot;));&lt;br/&gt;
    put.add(Bytes.toBytes(&quot;fam&quot;),Bytes.toBytes(&quot;qual3&quot;),Bytes.toBytes(&quot;val3&quot;));&lt;br/&gt;
    table.put(put);&lt;/p&gt;

&lt;p&gt;    table.flushCommits();&lt;/p&gt;
    {
      System.out.println(&quot;returns all rows at once because of the caching&quot;);
      Scan scan = new Scan();
      scan.setCaching(100);
      ResultScanner scanner = table.getScanner(scan);
      scanner.next(100);
    }
    {
      System.out.println(&quot;returns one row at a time because of the maxResultSize&quot;);
      Scan scan = new Scan();
      scan.setCaching(100);
      scan.setMaxResultSize(1);
      ResultScanner scanner = table.getScanner(scan);
      scanner.next(100);
    }


&lt;p&gt;See output:&lt;/p&gt;

&lt;p&gt;returns all rows at once because of the caching&lt;br/&gt;
2012-04-25 22:18:47,494 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(94): Creating scanner over test starting at key &apos;&apos;&lt;br/&gt;
2012-04-25 22:18:47,494 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(206): Advancing internal scanner to startKey at &apos;&apos;&lt;br/&gt;
2012-04-25 22:18:47,499 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 3&lt;br/&gt;
2012-04-25 22:18:47,502 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(193): Finished with scanning at &lt;/p&gt;
{NAME =&amp;gt; &apos;test,,1335385126388.ed23a82f3d6ca2eab571918843796259.&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;, ENCODED =&amp;gt; ed23a82f3d6ca2eab571918843796259,}
&lt;p&gt;returns one row at a time because of the maxResultSize&lt;br/&gt;
2012-04-25 22:18:47,504 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(94): Creating scanner over test starting at key &apos;&apos;&lt;br/&gt;
2012-04-25 22:18:47,505 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(206): Advancing internal scanner to startKey at &apos;&apos;&lt;br/&gt;
2012-04-25 22:18:47,514 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 1&lt;br/&gt;
2012-04-25 22:18:47,517 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 1&lt;br/&gt;
2012-04-25 22:18:47,522 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 1&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;ferdy&lt;/p&gt;
</comment>
                            <comment id="13262042" author="ferdy.g" created="Wed, 25 Apr 2012 20:26:23 +0000"  >&lt;p&gt;New version of patch. This works when manually running a test. (See review board for testing method)&lt;/p&gt;</comment>
                            <comment id="13262048" author="ferdy.g" created="Wed, 25 Apr 2012 20:29:12 +0000"  >&lt;p&gt;(patch was for trunk)&lt;/p&gt;</comment>
                            <comment id="13262085" author="jiraposter@reviews.apache.org" created="Wed, 25 Apr 2012 21:04:14 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/4726/#review7242&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/#review7242&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;lgtm.&lt;/p&gt;


&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/client/ClientScanner.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/4726/#comment15974&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/#comment15974&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    This should be removed.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Ted&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2012-04-25 20:25:06, ferdy wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/4726/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2012-04-25 20:25:06)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hbase and Ted Yu.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; title=&quot;Do HBASE-1996 -- setting size to return in scan rather than count of rows -- properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2214&quot;&gt;&lt;del&gt;HBASE-2214&lt;/del&gt;&lt;/a&gt; per scan max buffersize.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; title=&quot;Do HBASE-1996 -- setting size to return in scan rather than count of rows -- properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2214&quot;&gt;&lt;del&gt;HBASE-2214&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-2214&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/client/ClientScanner.java 1330504 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/client/Scan.java 1330504 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java 1330504 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java 1330504 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/generated/AdminProtos.java 1330504 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/generated/ClientProtos.java 1330504 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/generated/HBaseProtos.java 1330504 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/generated/RPCProtos.java 1330504 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/generated/ZooKeeperProtos.java 1330504 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java 1330504 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java 1330504 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/RegionScanner.java 1330504 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/RegionServer.java 1330504 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/protobuf/Client.proto 1330504 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/test/java/org/apache/hadoop/hbase/coprocessor/TestCoprocessorInterface.java 1330504 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/4726/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;It works when running this test:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;new HBaseTestingUtility(conf).startMiniCluster();&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;HBaseAdmin admin = new HBaseAdmin(conf);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;if (!admin.tableExists(&quot;test&quot;)) {
bq.        HTableDescriptor tableDesc = new HTableDescriptor(&quot;test&quot;);
bq.        tableDesc.addFamily(new HColumnDescriptor(&quot;fam&quot;));
bq.        admin.createTable(tableDesc);
bq.      }&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;HTable table = new HTable(conf, &quot;test&quot;);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Put put; &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put = new Put(Bytes.toBytes(&quot;row1&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put.add(Bytes.toBytes(&quot;fam&quot;),Bytes.toBytes(&quot;qual1&quot;),Bytes.toBytes(&quot;val1&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;table.put(put);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put = new Put(Bytes.toBytes(&quot;row2&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put.add(Bytes.toBytes(&quot;fam&quot;),Bytes.toBytes(&quot;qual2&quot;),Bytes.toBytes(&quot;val2&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;table.put(put);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put = new Put(Bytes.toBytes(&quot;row3&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put.add(Bytes.toBytes(&quot;fam&quot;),Bytes.toBytes(&quot;qual3&quot;),Bytes.toBytes(&quot;val3&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;table.put(put);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;table.flushCommits();&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;{
bq.        System.out.println(&quot;returns all rows at once because of the caching&quot;);
bq.        Scan scan = new Scan();
bq.        scan.setCaching(100);
bq.        ResultScanner scanner = table.getScanner(scan);
bq.        scanner.next(100);
bq.      }&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;{
bq.        System.out.println(&quot;returns one row at a time because of the maxResultSize&quot;);
bq.        Scan scan = new Scan();
bq.        scan.setCaching(100);
bq.        scan.setMaxResultSize(1);
bq.        ResultScanner scanner = table.getScanner(scan);
bq.        scanner.next(100);
bq.      }&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;See output:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;returns all rows at once because of the caching&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,494 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(94): Creating scanner over test starting at key &apos;&apos;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,494 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(206): Advancing internal scanner to startKey at &apos;&apos;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,499 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 3&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,502 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(193): Finished with scanning at {NAME =&amp;gt; &apos;test,,1335385126388.ed23a82f3d6ca2eab571918843796259.&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;, ENCODED =&amp;gt; ed23a82f3d6ca2eab571918843796259,}&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;returns one row at a time because of the maxResultSize&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,504 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(94): Creating scanner over test starting at key &apos;&apos;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,505 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(206): Advancing internal scanner to startKey at &apos;&apos;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,514 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 1&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,517 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 1&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,522 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 1&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ferdy&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13262096" author="hadoopqa" created="Wed, 25 Apr 2012 21:14:33 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12524343/HBASE-2214-v4.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12524343/HBASE-2214-v4.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 4 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1652//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1652//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1652//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1652//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1652//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1652//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13262341" author="jiraposter@reviews.apache.org" created="Thu, 26 Apr 2012 03:11:29 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/4726/#review7249&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/#review7249&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/4726/#comment16020&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/#comment16020&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Can we set it only if maxResultSize is &amp;gt; 0?&lt;/p&gt;



&lt;p&gt;/src/main/protobuf/Client.proto&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/4726/#comment16019&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/#comment16019&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Can we use uint64, without a default? So if it is not specified, we take it as -1.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Jimmy&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2012-04-25 20:25:06, ferdy wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/4726/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2012-04-25 20:25:06)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hbase and Ted Yu.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; title=&quot;Do HBASE-1996 -- setting size to return in scan rather than count of rows -- properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2214&quot;&gt;&lt;del&gt;HBASE-2214&lt;/del&gt;&lt;/a&gt; per scan max buffersize.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; title=&quot;Do HBASE-1996 -- setting size to return in scan rather than count of rows -- properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2214&quot;&gt;&lt;del&gt;HBASE-2214&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-2214&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/client/ClientScanner.java 1330504 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/client/Scan.java 1330504 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java 1330504 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java 1330504 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/generated/AdminProtos.java 1330504 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/generated/ClientProtos.java 1330504 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/generated/HBaseProtos.java 1330504 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/generated/RPCProtos.java 1330504 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/generated/ZooKeeperProtos.java 1330504 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java 1330504 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java 1330504 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/RegionScanner.java 1330504 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/RegionServer.java 1330504 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/protobuf/Client.proto 1330504 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/test/java/org/apache/hadoop/hbase/coprocessor/TestCoprocessorInterface.java 1330504 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/4726/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;It works when running this test:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;new HBaseTestingUtility(conf).startMiniCluster();&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;HBaseAdmin admin = new HBaseAdmin(conf);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;if (!admin.tableExists(&quot;test&quot;)) {
bq.        HTableDescriptor tableDesc = new HTableDescriptor(&quot;test&quot;);
bq.        tableDesc.addFamily(new HColumnDescriptor(&quot;fam&quot;));
bq.        admin.createTable(tableDesc);
bq.      }&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;HTable table = new HTable(conf, &quot;test&quot;);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Put put; &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put = new Put(Bytes.toBytes(&quot;row1&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put.add(Bytes.toBytes(&quot;fam&quot;),Bytes.toBytes(&quot;qual1&quot;),Bytes.toBytes(&quot;val1&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;table.put(put);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put = new Put(Bytes.toBytes(&quot;row2&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put.add(Bytes.toBytes(&quot;fam&quot;),Bytes.toBytes(&quot;qual2&quot;),Bytes.toBytes(&quot;val2&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;table.put(put);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put = new Put(Bytes.toBytes(&quot;row3&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put.add(Bytes.toBytes(&quot;fam&quot;),Bytes.toBytes(&quot;qual3&quot;),Bytes.toBytes(&quot;val3&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;table.put(put);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;table.flushCommits();&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;{
bq.        System.out.println(&quot;returns all rows at once because of the caching&quot;);
bq.        Scan scan = new Scan();
bq.        scan.setCaching(100);
bq.        ResultScanner scanner = table.getScanner(scan);
bq.        scanner.next(100);
bq.      }&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;{
bq.        System.out.println(&quot;returns one row at a time because of the maxResultSize&quot;);
bq.        Scan scan = new Scan();
bq.        scan.setCaching(100);
bq.        scan.setMaxResultSize(1);
bq.        ResultScanner scanner = table.getScanner(scan);
bq.        scanner.next(100);
bq.      }&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;See output:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;returns all rows at once because of the caching&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,494 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(94): Creating scanner over test starting at key &apos;&apos;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,494 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(206): Advancing internal scanner to startKey at &apos;&apos;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,499 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 3&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,502 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(193): Finished with scanning at {NAME =&amp;gt; &apos;test,,1335385126388.ed23a82f3d6ca2eab571918843796259.&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;, ENCODED =&amp;gt; ed23a82f3d6ca2eab571918843796259,}&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;returns one row at a time because of the maxResultSize&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,504 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(94): Creating scanner over test starting at key &apos;&apos;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,505 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(206): Advancing internal scanner to startKey at &apos;&apos;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,514 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 1&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,517 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 1&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,522 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 1&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ferdy&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13262456" author="jiraposter@reviews.apache.org" created="Thu, 26 Apr 2012 08:19:12 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/4726/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2012-04-26 08:18:40.576784)&lt;/p&gt;


&lt;p&gt;Review request for hbase and Ted Yu.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Uploaded v5 of patch. The test still works.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; title=&quot;Do HBASE-1996 -- setting size to return in scan rather than count of rows -- properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2214&quot;&gt;&lt;del&gt;HBASE-2214&lt;/del&gt;&lt;/a&gt; per scan max buffersize.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; title=&quot;Do HBASE-1996 -- setting size to return in scan rather than count of rows -- properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2214&quot;&gt;&lt;del&gt;HBASE-2214&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-2214&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  /src/main/java/org/apache/hadoop/hbase/client/ClientScanner.java 1330680 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/client/Scan.java 1330680 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java 1330680 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java 1330680 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/protobuf/generated/AdminProtos.java 1330680 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/protobuf/generated/ClientProtos.java 1330680 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/protobuf/generated/HBaseProtos.java 1330680 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/protobuf/generated/RPCProtos.java 1330680 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/protobuf/generated/ZooKeeperProtos.java 1330680 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java 1330680 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java 1330680 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/regionserver/RegionScanner.java 1330680 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/regionserver/RegionServer.java 1330680 &lt;br/&gt;
  /src/main/protobuf/Client.proto 1330680 &lt;br/&gt;
  /src/test/java/org/apache/hadoop/hbase/coprocessor/TestCoprocessorInterface.java 1330680 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/4726/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;It works when running this test:&lt;/p&gt;


&lt;p&gt;    new HBaseTestingUtility(conf).startMiniCluster();&lt;/p&gt;

&lt;p&gt;    HBaseAdmin admin = new HBaseAdmin(conf);&lt;br/&gt;
    if (!admin.tableExists(&quot;test&quot;)) &lt;/p&gt;
{
      HTableDescriptor tableDesc = new HTableDescriptor(&quot;test&quot;);
      tableDesc.addFamily(new HColumnDescriptor(&quot;fam&quot;));
      admin.createTable(tableDesc);
    }


&lt;p&gt;    HTable table = new HTable(conf, &quot;test&quot;);&lt;br/&gt;
    Put put; &lt;/p&gt;

&lt;p&gt;    put = new Put(Bytes.toBytes(&quot;row1&quot;));&lt;br/&gt;
    put.add(Bytes.toBytes(&quot;fam&quot;),Bytes.toBytes(&quot;qual1&quot;),Bytes.toBytes(&quot;val1&quot;));&lt;br/&gt;
    table.put(put);&lt;/p&gt;

&lt;p&gt;    put = new Put(Bytes.toBytes(&quot;row2&quot;));&lt;br/&gt;
    put.add(Bytes.toBytes(&quot;fam&quot;),Bytes.toBytes(&quot;qual2&quot;),Bytes.toBytes(&quot;val2&quot;));&lt;br/&gt;
    table.put(put);&lt;/p&gt;

&lt;p&gt;    put = new Put(Bytes.toBytes(&quot;row3&quot;));&lt;br/&gt;
    put.add(Bytes.toBytes(&quot;fam&quot;),Bytes.toBytes(&quot;qual3&quot;),Bytes.toBytes(&quot;val3&quot;));&lt;br/&gt;
    table.put(put);&lt;/p&gt;

&lt;p&gt;    table.flushCommits();&lt;/p&gt;
    {
      System.out.println(&quot;returns all rows at once because of the caching&quot;);
      Scan scan = new Scan();
      scan.setCaching(100);
      ResultScanner scanner = table.getScanner(scan);
      scanner.next(100);
    }
    {
      System.out.println(&quot;returns one row at a time because of the maxResultSize&quot;);
      Scan scan = new Scan();
      scan.setCaching(100);
      scan.setMaxResultSize(1);
      ResultScanner scanner = table.getScanner(scan);
      scanner.next(100);
    }


&lt;p&gt;See output:&lt;/p&gt;

&lt;p&gt;returns all rows at once because of the caching&lt;br/&gt;
2012-04-25 22:18:47,494 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(94): Creating scanner over test starting at key &apos;&apos;&lt;br/&gt;
2012-04-25 22:18:47,494 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(206): Advancing internal scanner to startKey at &apos;&apos;&lt;br/&gt;
2012-04-25 22:18:47,499 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 3&lt;br/&gt;
2012-04-25 22:18:47,502 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(193): Finished with scanning at &lt;/p&gt;
{NAME =&amp;gt; &apos;test,,1335385126388.ed23a82f3d6ca2eab571918843796259.&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;, ENCODED =&amp;gt; ed23a82f3d6ca2eab571918843796259,}
&lt;p&gt;returns one row at a time because of the maxResultSize&lt;br/&gt;
2012-04-25 22:18:47,504 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(94): Creating scanner over test starting at key &apos;&apos;&lt;br/&gt;
2012-04-25 22:18:47,505 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(206): Advancing internal scanner to startKey at &apos;&apos;&lt;br/&gt;
2012-04-25 22:18:47,514 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 1&lt;br/&gt;
2012-04-25 22:18:47,517 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 1&lt;br/&gt;
2012-04-25 22:18:47,522 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 1&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;ferdy&lt;/p&gt;
</comment>
                            <comment id="13262458" author="jiraposter@reviews.apache.org" created="Thu, 26 Apr 2012 08:21:15 +0000"  >

&lt;blockquote&gt;&lt;p&gt;On 2012-04-25 21:02:15, Ted Yu wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; /src/main/java/org/apache/hadoop/hbase/client/ClientScanner.java, line 323&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/4726/diff/3/?file=104298#file104298line323&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/diff/3/?file=104298#file104298line323&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     This should be removed.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Ok done.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;ferdy&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/4726/#review7242&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/#review7242&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;On 2012-04-26 08:18:40, ferdy wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/4726/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2012-04-26 08:18:40)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hbase and Ted Yu.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; title=&quot;Do HBASE-1996 -- setting size to return in scan rather than count of rows -- properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2214&quot;&gt;&lt;del&gt;HBASE-2214&lt;/del&gt;&lt;/a&gt; per scan max buffersize.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; title=&quot;Do HBASE-1996 -- setting size to return in scan rather than count of rows -- properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2214&quot;&gt;&lt;del&gt;HBASE-2214&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-2214&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/client/ClientScanner.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/client/Scan.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/generated/AdminProtos.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/generated/ClientProtos.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/generated/HBaseProtos.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/generated/RPCProtos.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/generated/ZooKeeperProtos.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/RegionScanner.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/RegionServer.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/protobuf/Client.proto 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/test/java/org/apache/hadoop/hbase/coprocessor/TestCoprocessorInterface.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/4726/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;It works when running this test:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;new HBaseTestingUtility(conf).startMiniCluster();&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;HBaseAdmin admin = new HBaseAdmin(conf);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;if (!admin.tableExists(&quot;test&quot;)) {
bq.        HTableDescriptor tableDesc = new HTableDescriptor(&quot;test&quot;);
bq.        tableDesc.addFamily(new HColumnDescriptor(&quot;fam&quot;));
bq.        admin.createTable(tableDesc);
bq.      }&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;HTable table = new HTable(conf, &quot;test&quot;);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Put put; &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put = new Put(Bytes.toBytes(&quot;row1&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put.add(Bytes.toBytes(&quot;fam&quot;),Bytes.toBytes(&quot;qual1&quot;),Bytes.toBytes(&quot;val1&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;table.put(put);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put = new Put(Bytes.toBytes(&quot;row2&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put.add(Bytes.toBytes(&quot;fam&quot;),Bytes.toBytes(&quot;qual2&quot;),Bytes.toBytes(&quot;val2&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;table.put(put);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put = new Put(Bytes.toBytes(&quot;row3&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put.add(Bytes.toBytes(&quot;fam&quot;),Bytes.toBytes(&quot;qual3&quot;),Bytes.toBytes(&quot;val3&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;table.put(put);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;table.flushCommits();&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;{
bq.        System.out.println(&quot;returns all rows at once because of the caching&quot;);
bq.        Scan scan = new Scan();
bq.        scan.setCaching(100);
bq.        ResultScanner scanner = table.getScanner(scan);
bq.        scanner.next(100);
bq.      }&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;{
bq.        System.out.println(&quot;returns one row at a time because of the maxResultSize&quot;);
bq.        Scan scan = new Scan();
bq.        scan.setCaching(100);
bq.        scan.setMaxResultSize(1);
bq.        ResultScanner scanner = table.getScanner(scan);
bq.        scanner.next(100);
bq.      }&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;See output:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;returns all rows at once because of the caching&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,494 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(94): Creating scanner over test starting at key &apos;&apos;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,494 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(206): Advancing internal scanner to startKey at &apos;&apos;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,499 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 3&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,502 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(193): Finished with scanning at {NAME =&amp;gt; &apos;test,,1335385126388.ed23a82f3d6ca2eab571918843796259.&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;, ENCODED =&amp;gt; ed23a82f3d6ca2eab571918843796259,}&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;returns one row at a time because of the maxResultSize&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,504 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(94): Creating scanner over test starting at key &apos;&apos;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,505 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(206): Advancing internal scanner to startKey at &apos;&apos;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,514 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 1&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,517 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 1&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,522 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 1&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ferdy&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13262459" author="jiraposter@reviews.apache.org" created="Thu, 26 Apr 2012 08:21:20 +0000"  >

&lt;blockquote&gt;&lt;p&gt;On 2012-04-26 03:10:35, Jimmy Xiang wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; /src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java, line 385&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/4726/diff/3/?file=104301#file104301line385&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/diff/3/?file=104301#file104301line385&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Can we set it only if maxResultSize is &amp;gt; 0?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Done. I&apos;ve changed it everywhere else too so that maxResultSize only works when &amp;gt; 0. (Setting to 0 is bogus anyway, it might cause infinite loops).&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2012-04-26 03:10:35, Jimmy Xiang wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; /src/main/protobuf/Client.proto, line 197&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/4726/diff/3/?file=104311#file104311line197&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/diff/3/?file=104311#file104311line197&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Can we use uint64, without a default? So if it is not specified, we take it as -1.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Done. (Including regenerating the protobuffers sources). I already noticed that int64 was not used anywhere else in the proto file. Just out of curiosity, are there good reasons to avoid int64?&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;ferdy&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/4726/#review7249&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/#review7249&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;On 2012-04-26 08:18:40, ferdy wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/4726/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2012-04-26 08:18:40)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hbase and Ted Yu.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; title=&quot;Do HBASE-1996 -- setting size to return in scan rather than count of rows -- properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2214&quot;&gt;&lt;del&gt;HBASE-2214&lt;/del&gt;&lt;/a&gt; per scan max buffersize.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; title=&quot;Do HBASE-1996 -- setting size to return in scan rather than count of rows -- properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2214&quot;&gt;&lt;del&gt;HBASE-2214&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-2214&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/client/ClientScanner.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/client/Scan.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/generated/AdminProtos.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/generated/ClientProtos.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/generated/HBaseProtos.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/generated/RPCProtos.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/generated/ZooKeeperProtos.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/RegionScanner.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/RegionServer.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/protobuf/Client.proto 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/test/java/org/apache/hadoop/hbase/coprocessor/TestCoprocessorInterface.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/4726/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;It works when running this test:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;new HBaseTestingUtility(conf).startMiniCluster();&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;HBaseAdmin admin = new HBaseAdmin(conf);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;if (!admin.tableExists(&quot;test&quot;)) {
bq.        HTableDescriptor tableDesc = new HTableDescriptor(&quot;test&quot;);
bq.        tableDesc.addFamily(new HColumnDescriptor(&quot;fam&quot;));
bq.        admin.createTable(tableDesc);
bq.      }&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;HTable table = new HTable(conf, &quot;test&quot;);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Put put; &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put = new Put(Bytes.toBytes(&quot;row1&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put.add(Bytes.toBytes(&quot;fam&quot;),Bytes.toBytes(&quot;qual1&quot;),Bytes.toBytes(&quot;val1&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;table.put(put);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put = new Put(Bytes.toBytes(&quot;row2&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put.add(Bytes.toBytes(&quot;fam&quot;),Bytes.toBytes(&quot;qual2&quot;),Bytes.toBytes(&quot;val2&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;table.put(put);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put = new Put(Bytes.toBytes(&quot;row3&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put.add(Bytes.toBytes(&quot;fam&quot;),Bytes.toBytes(&quot;qual3&quot;),Bytes.toBytes(&quot;val3&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;table.put(put);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;table.flushCommits();&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;{
bq.        System.out.println(&quot;returns all rows at once because of the caching&quot;);
bq.        Scan scan = new Scan();
bq.        scan.setCaching(100);
bq.        ResultScanner scanner = table.getScanner(scan);
bq.        scanner.next(100);
bq.      }&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;{
bq.        System.out.println(&quot;returns one row at a time because of the maxResultSize&quot;);
bq.        Scan scan = new Scan();
bq.        scan.setCaching(100);
bq.        scan.setMaxResultSize(1);
bq.        ResultScanner scanner = table.getScanner(scan);
bq.        scanner.next(100);
bq.      }&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;See output:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;returns all rows at once because of the caching&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,494 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(94): Creating scanner over test starting at key &apos;&apos;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,494 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(206): Advancing internal scanner to startKey at &apos;&apos;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,499 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 3&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,502 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(193): Finished with scanning at {NAME =&amp;gt; &apos;test,,1335385126388.ed23a82f3d6ca2eab571918843796259.&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;, ENCODED =&amp;gt; ed23a82f3d6ca2eab571918843796259,}&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;returns one row at a time because of the maxResultSize&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,504 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(94): Creating scanner over test starting at key &apos;&apos;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,505 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(206): Advancing internal scanner to startKey at &apos;&apos;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,514 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 1&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,517 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 1&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,522 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 1&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ferdy&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13262486" author="hadoopqa" created="Thu, 26 Apr 2012 09:16:05 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12524407/HBASE-2214-v5.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12524407/HBASE-2214-v5.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 3 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.master.TestSplitLogManager&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1654//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1654//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1654//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1654//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1654//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1654//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13262734" author="jiraposter@reviews.apache.org" created="Thu, 26 Apr 2012 16:52:14 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/4726/#review7268&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/#review7268&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;Looks good. It seems you are using an old version protoc, which is ok. Great stuff.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Jimmy&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2012-04-26 08:18:40, ferdy wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/4726/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2012-04-26 08:18:40)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hbase and Ted Yu.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; title=&quot;Do HBASE-1996 -- setting size to return in scan rather than count of rows -- properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2214&quot;&gt;&lt;del&gt;HBASE-2214&lt;/del&gt;&lt;/a&gt; per scan max buffersize.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; title=&quot;Do HBASE-1996 -- setting size to return in scan rather than count of rows -- properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2214&quot;&gt;&lt;del&gt;HBASE-2214&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-2214&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/client/ClientScanner.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/client/Scan.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/generated/AdminProtos.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/generated/ClientProtos.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/generated/HBaseProtos.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/generated/RPCProtos.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/generated/ZooKeeperProtos.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/RegionScanner.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/RegionServer.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/protobuf/Client.proto 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/test/java/org/apache/hadoop/hbase/coprocessor/TestCoprocessorInterface.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/4726/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;It works when running this test:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;new HBaseTestingUtility(conf).startMiniCluster();&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;HBaseAdmin admin = new HBaseAdmin(conf);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;if (!admin.tableExists(&quot;test&quot;)) {
bq.        HTableDescriptor tableDesc = new HTableDescriptor(&quot;test&quot;);
bq.        tableDesc.addFamily(new HColumnDescriptor(&quot;fam&quot;));
bq.        admin.createTable(tableDesc);
bq.      }&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;HTable table = new HTable(conf, &quot;test&quot;);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Put put; &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put = new Put(Bytes.toBytes(&quot;row1&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put.add(Bytes.toBytes(&quot;fam&quot;),Bytes.toBytes(&quot;qual1&quot;),Bytes.toBytes(&quot;val1&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;table.put(put);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put = new Put(Bytes.toBytes(&quot;row2&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put.add(Bytes.toBytes(&quot;fam&quot;),Bytes.toBytes(&quot;qual2&quot;),Bytes.toBytes(&quot;val2&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;table.put(put);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put = new Put(Bytes.toBytes(&quot;row3&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put.add(Bytes.toBytes(&quot;fam&quot;),Bytes.toBytes(&quot;qual3&quot;),Bytes.toBytes(&quot;val3&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;table.put(put);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;table.flushCommits();&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;{
bq.        System.out.println(&quot;returns all rows at once because of the caching&quot;);
bq.        Scan scan = new Scan();
bq.        scan.setCaching(100);
bq.        ResultScanner scanner = table.getScanner(scan);
bq.        scanner.next(100);
bq.      }&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;{
bq.        System.out.println(&quot;returns one row at a time because of the maxResultSize&quot;);
bq.        Scan scan = new Scan();
bq.        scan.setCaching(100);
bq.        scan.setMaxResultSize(1);
bq.        ResultScanner scanner = table.getScanner(scan);
bq.        scanner.next(100);
bq.      }&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;See output:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;returns all rows at once because of the caching&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,494 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(94): Creating scanner over test starting at key &apos;&apos;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,494 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(206): Advancing internal scanner to startKey at &apos;&apos;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,499 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 3&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,502 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(193): Finished with scanning at {NAME =&amp;gt; &apos;test,,1335385126388.ed23a82f3d6ca2eab571918843796259.&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;, ENCODED =&amp;gt; ed23a82f3d6ca2eab571918843796259,}&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;returns one row at a time because of the maxResultSize&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,504 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(94): Creating scanner over test starting at key &apos;&apos;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,505 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(206): Advancing internal scanner to startKey at &apos;&apos;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,514 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 1&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,517 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 1&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,522 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 1&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ferdy&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13265164" author="jiraposter@reviews.apache.org" created="Mon, 30 Apr 2012 20:03:47 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/4726/#review7383&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/#review7383&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;Where are we checking the size of the result made so far?  I don&apos;t see it in the below.  I&apos;d expect it inside in the RegionScanner.  Any chance of a test?  Otherwise, patch looks great.&lt;/p&gt;


&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/client/ClientScanner.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/4726/#comment16293&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/#comment16293&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Is this going to be annoying?  If a high-traffic server, won&apos;t this get logged once per request?  Perhaps thousands a second?&lt;/p&gt;



&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/client/Scan.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/4726/#comment16294&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/#comment16294&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Is this needed?  Is this set on Scan creation?  When would it change after Scan construction?  Or, are we using builder pattern here and its set after construction but before use?&lt;/p&gt;



&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/4726/#comment16295&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/#comment16295&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    oh, I see how its used now.  ignore above comment.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Michael&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2012-04-26 08:18:40, ferdy wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/4726/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2012-04-26 08:18:40)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hbase and Ted Yu.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; title=&quot;Do HBASE-1996 -- setting size to return in scan rather than count of rows -- properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2214&quot;&gt;&lt;del&gt;HBASE-2214&lt;/del&gt;&lt;/a&gt; per scan max buffersize.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; title=&quot;Do HBASE-1996 -- setting size to return in scan rather than count of rows -- properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2214&quot;&gt;&lt;del&gt;HBASE-2214&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-2214&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/client/ClientScanner.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/client/Scan.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/generated/AdminProtos.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/generated/ClientProtos.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/generated/HBaseProtos.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/generated/RPCProtos.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/generated/ZooKeeperProtos.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/RegionScanner.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/RegionServer.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/protobuf/Client.proto 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/test/java/org/apache/hadoop/hbase/coprocessor/TestCoprocessorInterface.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/4726/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;It works when running this test:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;new HBaseTestingUtility(conf).startMiniCluster();&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;HBaseAdmin admin = new HBaseAdmin(conf);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;if (!admin.tableExists(&quot;test&quot;)) {
bq.        HTableDescriptor tableDesc = new HTableDescriptor(&quot;test&quot;);
bq.        tableDesc.addFamily(new HColumnDescriptor(&quot;fam&quot;));
bq.        admin.createTable(tableDesc);
bq.      }&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;HTable table = new HTable(conf, &quot;test&quot;);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Put put; &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put = new Put(Bytes.toBytes(&quot;row1&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put.add(Bytes.toBytes(&quot;fam&quot;),Bytes.toBytes(&quot;qual1&quot;),Bytes.toBytes(&quot;val1&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;table.put(put);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put = new Put(Bytes.toBytes(&quot;row2&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put.add(Bytes.toBytes(&quot;fam&quot;),Bytes.toBytes(&quot;qual2&quot;),Bytes.toBytes(&quot;val2&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;table.put(put);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put = new Put(Bytes.toBytes(&quot;row3&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put.add(Bytes.toBytes(&quot;fam&quot;),Bytes.toBytes(&quot;qual3&quot;),Bytes.toBytes(&quot;val3&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;table.put(put);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;table.flushCommits();&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;{
bq.        System.out.println(&quot;returns all rows at once because of the caching&quot;);
bq.        Scan scan = new Scan();
bq.        scan.setCaching(100);
bq.        ResultScanner scanner = table.getScanner(scan);
bq.        scanner.next(100);
bq.      }&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;{
bq.        System.out.println(&quot;returns one row at a time because of the maxResultSize&quot;);
bq.        Scan scan = new Scan();
bq.        scan.setCaching(100);
bq.        scan.setMaxResultSize(1);
bq.        ResultScanner scanner = table.getScanner(scan);
bq.        scanner.next(100);
bq.      }&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;See output:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;returns all rows at once because of the caching&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,494 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(94): Creating scanner over test starting at key &apos;&apos;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,494 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(206): Advancing internal scanner to startKey at &apos;&apos;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,499 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 3&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,502 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(193): Finished with scanning at {NAME =&amp;gt; &apos;test,,1335385126388.ed23a82f3d6ca2eab571918843796259.&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;, ENCODED =&amp;gt; ed23a82f3d6ca2eab571918843796259,}&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;returns one row at a time because of the maxResultSize&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,504 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(94): Creating scanner over test starting at key &apos;&apos;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,505 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(206): Advancing internal scanner to startKey at &apos;&apos;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,514 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 1&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,517 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 1&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,522 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 1&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ferdy&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13265699" author="jiraposter@reviews.apache.org" created="Tue, 1 May 2012 07:51:00 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/4726/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2012-05-01 07:50:07.133923)&lt;/p&gt;


&lt;p&gt;Review request for hbase and Ted Yu.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;v5 (updated to head and removed debug &quot;rows returned&quot; statement)&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; title=&quot;Do HBASE-1996 -- setting size to return in scan rather than count of rows -- properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2214&quot;&gt;&lt;del&gt;HBASE-2214&lt;/del&gt;&lt;/a&gt; per scan max buffersize.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; title=&quot;Do HBASE-1996 -- setting size to return in scan rather than count of rows -- properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2214&quot;&gt;&lt;del&gt;HBASE-2214&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-2214&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  /src/main/java/org/apache/hadoop/hbase/client/ClientScanner.java 1330680 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/client/Scan.java 1330680 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java 1330680 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java 1330680 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/protobuf/generated/AdminProtos.java 1330680 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/protobuf/generated/ClientProtos.java 1330680 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/protobuf/generated/HBaseProtos.java 1330680 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/protobuf/generated/RPCProtos.java 1330680 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/protobuf/generated/ZooKeeperProtos.java 1330680 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java 1332544 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java 1332544 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/regionserver/RegionScanner.java 1332544 &lt;br/&gt;
  /src/main/java/org/apache/hadoop/hbase/regionserver/RegionServer.java 1332544 &lt;br/&gt;
  /src/main/protobuf/Client.proto 1330680 &lt;br/&gt;
  /src/test/java/org/apache/hadoop/hbase/coprocessor/TestCoprocessorInterface.java 1332544 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/4726/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing (updated)&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;It works when running this test:&lt;/p&gt;


&lt;p&gt;    new HBaseTestingUtility(conf).startMiniCluster();&lt;/p&gt;

&lt;p&gt;    HBaseAdmin admin = new HBaseAdmin(conf);&lt;br/&gt;
    if (!admin.tableExists(&quot;test&quot;)) &lt;/p&gt;
{
      HTableDescriptor tableDesc = new HTableDescriptor(&quot;test&quot;);
      tableDesc.addFamily(new HColumnDescriptor(&quot;fam&quot;));
      admin.createTable(tableDesc);
    }


&lt;p&gt;    HTable table = new HTable(conf, &quot;test&quot;);&lt;br/&gt;
    Put put; &lt;/p&gt;

&lt;p&gt;    put = new Put(Bytes.toBytes(&quot;row1&quot;));&lt;br/&gt;
    put.add(Bytes.toBytes(&quot;fam&quot;),Bytes.toBytes(&quot;qual1&quot;),Bytes.toBytes(&quot;val1&quot;));&lt;br/&gt;
    table.put(put);&lt;/p&gt;

&lt;p&gt;    put = new Put(Bytes.toBytes(&quot;row2&quot;));&lt;br/&gt;
    put.add(Bytes.toBytes(&quot;fam&quot;),Bytes.toBytes(&quot;qual2&quot;),Bytes.toBytes(&quot;val2&quot;));&lt;br/&gt;
    table.put(put);&lt;/p&gt;

&lt;p&gt;    put = new Put(Bytes.toBytes(&quot;row3&quot;));&lt;br/&gt;
    put.add(Bytes.toBytes(&quot;fam&quot;),Bytes.toBytes(&quot;qual3&quot;),Bytes.toBytes(&quot;val3&quot;));&lt;br/&gt;
    table.put(put);&lt;/p&gt;

&lt;p&gt;    table.flushCommits();&lt;br/&gt;
    //put a logging statement to ClientScanner#next() to see the effect.&lt;/p&gt;
    {
      System.out.println(&quot;returns all rows at once because of the caching&quot;);
      Scan scan = new Scan();
      scan.setCaching(100);
      ResultScanner scanner = table.getScanner(scan);
      scanner.next(100);
    }
    {
      System.out.println(&quot;returns one row at a time because of the maxResultSize&quot;);
      Scan scan = new Scan();
      scan.setCaching(100);
      scan.setMaxResultSize(1);
      ResultScanner scanner = table.getScanner(scan);
      scanner.next(100);
    }


&lt;p&gt;See output:&lt;/p&gt;

&lt;p&gt;returns all rows at once because of the caching&lt;br/&gt;
2012-04-25 22:18:47,494 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(94): Creating scanner over test starting at key &apos;&apos;&lt;br/&gt;
2012-04-25 22:18:47,494 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(206): Advancing internal scanner to startKey at &apos;&apos;&lt;br/&gt;
2012-04-25 22:18:47,499 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 3&lt;br/&gt;
2012-04-25 22:18:47,502 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(193): Finished with scanning at &lt;/p&gt;
{NAME =&amp;gt; &apos;test,,1335385126388.ed23a82f3d6ca2eab571918843796259.&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;, ENCODED =&amp;gt; ed23a82f3d6ca2eab571918843796259,}
&lt;p&gt;returns one row at a time because of the maxResultSize&lt;br/&gt;
2012-04-25 22:18:47,504 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(94): Creating scanner over test starting at key &apos;&apos;&lt;br/&gt;
2012-04-25 22:18:47,505 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(206): Advancing internal scanner to startKey at &apos;&apos;&lt;br/&gt;
2012-04-25 22:18:47,514 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 1&lt;br/&gt;
2012-04-25 22:18:47,517 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 1&lt;br/&gt;
2012-04-25 22:18:47,522 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 1&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;ferdy&lt;/p&gt;
</comment>
                            <comment id="13265701" author="jiraposter@reviews.apache.org" created="Tue, 1 May 2012 07:52:46 +0000"  >

&lt;blockquote&gt;&lt;p&gt;On 2012-04-30 20:03:34, Michael Stack wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; Where are we checking the size of the result made so far?  I don&apos;t see it in the below.  I&apos;d expect it inside in the RegionScanner.  Any chance of a test?  Otherwise, patch looks great.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Please see the testing method in the Testing Done field above. (Not sure where to add a test in the project).&lt;/p&gt;

&lt;p&gt;Thanks for the feedback.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2012-04-30 20:03:34, Michael Stack wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; /src/main/java/org/apache/hadoop/hbase/client/ClientScanner.java, line 323&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/4726/diff/4/?file=104531#file104531line323&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/diff/4/?file=104531#file104531line323&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Is this going to be annoying?  If a high-traffic server, won&apos;t this get logged once per request?  Perhaps thousands a second?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I accidently left this in when I uploaded new version of patch. It is removed now.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;ferdy&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/4726/#review7383&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/#review7383&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;On 2012-05-01 07:50:07, ferdy wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/4726/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2012-05-01 07:50:07)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hbase and Ted Yu.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; title=&quot;Do HBASE-1996 -- setting size to return in scan rather than count of rows -- properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2214&quot;&gt;&lt;del&gt;HBASE-2214&lt;/del&gt;&lt;/a&gt; per scan max buffersize.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; title=&quot;Do HBASE-1996 -- setting size to return in scan rather than count of rows -- properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2214&quot;&gt;&lt;del&gt;HBASE-2214&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-2214&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/client/ClientScanner.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/client/Scan.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/generated/AdminProtos.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/generated/ClientProtos.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/generated/HBaseProtos.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/generated/RPCProtos.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/generated/ZooKeeperProtos.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java 1332544 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java 1332544 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/RegionScanner.java 1332544 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/RegionServer.java 1332544 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/protobuf/Client.proto 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/test/java/org/apache/hadoop/hbase/coprocessor/TestCoprocessorInterface.java 1332544 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/4726/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;It works when running this test:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;new HBaseTestingUtility(conf).startMiniCluster();&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;HBaseAdmin admin = new HBaseAdmin(conf);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;if (!admin.tableExists(&quot;test&quot;)) {
bq.        HTableDescriptor tableDesc = new HTableDescriptor(&quot;test&quot;);
bq.        tableDesc.addFamily(new HColumnDescriptor(&quot;fam&quot;));
bq.        admin.createTable(tableDesc);
bq.      }&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;HTable table = new HTable(conf, &quot;test&quot;);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Put put; &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put = new Put(Bytes.toBytes(&quot;row1&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put.add(Bytes.toBytes(&quot;fam&quot;),Bytes.toBytes(&quot;qual1&quot;),Bytes.toBytes(&quot;val1&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;table.put(put);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put = new Put(Bytes.toBytes(&quot;row2&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put.add(Bytes.toBytes(&quot;fam&quot;),Bytes.toBytes(&quot;qual2&quot;),Bytes.toBytes(&quot;val2&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;table.put(put);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put = new Put(Bytes.toBytes(&quot;row3&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put.add(Bytes.toBytes(&quot;fam&quot;),Bytes.toBytes(&quot;qual3&quot;),Bytes.toBytes(&quot;val3&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;table.put(put);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;table.flushCommits();&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;//put a logging statement to ClientScanner#next() to see the effect.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;{
bq.        System.out.println(&quot;returns all rows at once because of the caching&quot;);
bq.        Scan scan = new Scan();
bq.        scan.setCaching(100);
bq.        ResultScanner scanner = table.getScanner(scan);
bq.        scanner.next(100);
bq.      }&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;{
bq.        System.out.println(&quot;returns one row at a time because of the maxResultSize&quot;);
bq.        Scan scan = new Scan();
bq.        scan.setCaching(100);
bq.        scan.setMaxResultSize(1);
bq.        ResultScanner scanner = table.getScanner(scan);
bq.        scanner.next(100);
bq.      }&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;See output:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;returns all rows at once because of the caching&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,494 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(94): Creating scanner over test starting at key &apos;&apos;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,494 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(206): Advancing internal scanner to startKey at &apos;&apos;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,499 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 3&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,502 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(193): Finished with scanning at {NAME =&amp;gt; &apos;test,,1335385126388.ed23a82f3d6ca2eab571918843796259.&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;, ENCODED =&amp;gt; ed23a82f3d6ca2eab571918843796259,}&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;returns one row at a time because of the maxResultSize&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,504 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(94): Creating scanner over test starting at key &apos;&apos;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,505 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(206): Advancing internal scanner to startKey at &apos;&apos;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,514 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 1&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,517 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 1&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,522 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 1&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ferdy&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13265702" author="jiraposter@reviews.apache.org" created="Tue, 1 May 2012 07:56:51 +0000"  >

&lt;blockquote&gt;&lt;p&gt;On 2012-04-30 20:03:34, Michael Stack wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; Where are we checking the size of the result made so far?  I don&apos;t see it in the below.  I&apos;d expect it inside in the RegionScanner.  Any chance of a test?  Otherwise, patch looks great.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ferdy wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Please see the testing method in the Testing Done field above. (Not sure where to add a test in the project).&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks for the feedback.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;(One more thing, it works because of the previous work done in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1996&quot; title=&quot;Configure scanner buffer in bytes instead of number of rows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1996&quot;&gt;&lt;del&gt;HBASE-1996&lt;/del&gt;&lt;/a&gt;. But it&apos;s arguably not the best way to implement it.)&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;ferdy&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/4726/#review7383&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/#review7383&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;On 2012-05-01 07:50:07, ferdy wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/4726/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2012-05-01 07:50:07)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hbase and Ted Yu.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; title=&quot;Do HBASE-1996 -- setting size to return in scan rather than count of rows -- properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2214&quot;&gt;&lt;del&gt;HBASE-2214&lt;/del&gt;&lt;/a&gt; per scan max buffersize.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; title=&quot;Do HBASE-1996 -- setting size to return in scan rather than count of rows -- properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2214&quot;&gt;&lt;del&gt;HBASE-2214&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-2214&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/client/ClientScanner.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/client/Scan.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/generated/AdminProtos.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/generated/ClientProtos.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/generated/HBaseProtos.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/generated/RPCProtos.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/protobuf/generated/ZooKeeperProtos.java 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java 1332544 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java 1332544 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/RegionScanner.java 1332544 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/regionserver/RegionServer.java 1332544 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/protobuf/Client.proto 1330680 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/test/java/org/apache/hadoop/hbase/coprocessor/TestCoprocessorInterface.java 1332544 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/4726/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4726/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;It works when running this test:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;new HBaseTestingUtility(conf).startMiniCluster();&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;HBaseAdmin admin = new HBaseAdmin(conf);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;if (!admin.tableExists(&quot;test&quot;)) {
bq.        HTableDescriptor tableDesc = new HTableDescriptor(&quot;test&quot;);
bq.        tableDesc.addFamily(new HColumnDescriptor(&quot;fam&quot;));
bq.        admin.createTable(tableDesc);
bq.      }&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;HTable table = new HTable(conf, &quot;test&quot;);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Put put; &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put = new Put(Bytes.toBytes(&quot;row1&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put.add(Bytes.toBytes(&quot;fam&quot;),Bytes.toBytes(&quot;qual1&quot;),Bytes.toBytes(&quot;val1&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;table.put(put);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put = new Put(Bytes.toBytes(&quot;row2&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put.add(Bytes.toBytes(&quot;fam&quot;),Bytes.toBytes(&quot;qual2&quot;),Bytes.toBytes(&quot;val2&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;table.put(put);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put = new Put(Bytes.toBytes(&quot;row3&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;put.add(Bytes.toBytes(&quot;fam&quot;),Bytes.toBytes(&quot;qual3&quot;),Bytes.toBytes(&quot;val3&quot;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;table.put(put);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;table.flushCommits();&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;//put a logging statement to ClientScanner#next() to see the effect.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;{
bq.        System.out.println(&quot;returns all rows at once because of the caching&quot;);
bq.        Scan scan = new Scan();
bq.        scan.setCaching(100);
bq.        ResultScanner scanner = table.getScanner(scan);
bq.        scanner.next(100);
bq.      }&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;{
bq.        System.out.println(&quot;returns one row at a time because of the maxResultSize&quot;);
bq.        Scan scan = new Scan();
bq.        scan.setCaching(100);
bq.        scan.setMaxResultSize(1);
bq.        ResultScanner scanner = table.getScanner(scan);
bq.        scanner.next(100);
bq.      }&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;See output:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;returns all rows at once because of the caching&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,494 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(94): Creating scanner over test starting at key &apos;&apos;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,494 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(206): Advancing internal scanner to startKey at &apos;&apos;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,499 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 3&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,502 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(193): Finished with scanning at {NAME =&amp;gt; &apos;test,,1335385126388.ed23a82f3d6ca2eab571918843796259.&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;, ENCODED =&amp;gt; ed23a82f3d6ca2eab571918843796259,}&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;returns one row at a time because of the maxResultSize&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,504 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(94): Creating scanner over test starting at key &apos;&apos;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,505 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(206): Advancing internal scanner to startKey at &apos;&apos;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,514 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 1&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,517 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 1&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;2012-04-25 22:18:47,522 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; client.ClientScanner(323): Rows returned 1&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ferdy&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13265711" author="hadoopqa" created="Tue, 1 May 2012 08:49:18 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12525160/HBASE-2214-v6.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12525160/HBASE-2214-v6.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 hadoop23.  The patch compiles against the hadoop 0.23.x profile.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 1 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.client.TestShell&lt;br/&gt;
                  org.apache.hadoop.hbase.master.TestMasterNoCluster&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1704//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1704//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1704//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1704//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1704//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1704//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13266251" author="stack" created="Tue, 1 May 2012 23:51:29 +0000"  >&lt;p&gt;+1 on patch .  Mind rebasing to trunk Ferdy so I can apply?  Thanks boss.&lt;/p&gt;</comment>
                            <comment id="13266443" author="ferdy.g" created="Wed, 2 May 2012 08:52:21 +0000"  >&lt;p&gt;v7 of patch (changes are because of making patch work on latest trunk)&lt;/p&gt;</comment>
                            <comment id="13266469" author="hadoopqa" created="Wed, 2 May 2012 10:06:40 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12525267/HBASE-2214-v7.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12525267/HBASE-2214-v7.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 hadoop23.  The patch compiles against the hadoop 0.23.x profile.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1719//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1719//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1719//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1719//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1719//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1719//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13266544" author="zhihyu@ebaysf.com" created="Wed, 2 May 2012 13:21:14 +0000"  >&lt;p&gt;Will integrate the patch later today if there is no objection.&lt;/p&gt;</comment>
                            <comment id="13266733" author="zhihyu@ebaysf.com" created="Wed, 2 May 2012 17:24:51 +0000"  >&lt;p&gt;Integrated to trunk.&lt;/p&gt;

&lt;p&gt;Waiting for updated patch for 0.94.&lt;/p&gt;</comment>
                            <comment id="13266759" author="ferdy.g" created="Wed, 2 May 2012 17:50:07 +0000"  >&lt;p&gt;Here&apos;s the patch for 0.94. It&apos;s tested with the same method as described in the patch review. I can verify it works.&lt;/p&gt;</comment>
                            <comment id="13266764" author="ferdy.g" created="Wed, 2 May 2012 17:54:00 +0000"  >&lt;p&gt;Hold a sec while I upload one without the call to system.out &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/tongue.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13266771" author="ferdy.g" created="Wed, 2 May 2012 17:56:54 +0000"  >&lt;p&gt;Done.&lt;/p&gt;</comment>
                            <comment id="13266818" author="hudson" created="Wed, 2 May 2012 18:57:23 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2837 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2837/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2837/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; title=&quot;Do HBASE-1996 -- setting size to return in scan rather than count of rows -- properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2214&quot;&gt;&lt;del&gt;HBASE-2214&lt;/del&gt;&lt;/a&gt; Do &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1996&quot; title=&quot;Configure scanner buffer in bytes instead of number of rows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1996&quot;&gt;&lt;del&gt;HBASE-1996&lt;/del&gt;&lt;/a&gt; &amp;#8211; setting size to return in scan rather than count of rows &amp;#8211; properly (Ferdy Galema) (Revision 1333122)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/ClientScanner.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/Scan.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/protobuf/generated/AdminProtos.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/protobuf/generated/ClientProtos.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/protobuf/generated/HBaseProtos.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/protobuf/generated/RPCProtos.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/protobuf/generated/ZooKeeperProtos.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/RegionScanner.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/RegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/protobuf/Client.proto&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/coprocessor/TestCoprocessorInterface.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13266830" author="zhihyu@ebaysf.com" created="Wed, 2 May 2012 19:09:14 +0000"  >&lt;p&gt;Integrated &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; title=&quot;Do HBASE-1996 -- setting size to return in scan rather than count of rows -- properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2214&quot;&gt;&lt;del&gt;HBASE-2214&lt;/del&gt;&lt;/a&gt;-0.94-v3.txt to 0.94 branch.&lt;/p&gt;

&lt;p&gt;Thanks for the patch, Ferdy.&lt;/p&gt;

&lt;p&gt;Thanks for the review, Stack.&lt;/p&gt;</comment>
                            <comment id="13266871" author="hudson" created="Wed, 2 May 2012 20:09:23 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #170 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/170/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/170/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; title=&quot;Do HBASE-1996 -- setting size to return in scan rather than count of rows -- properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2214&quot;&gt;&lt;del&gt;HBASE-2214&lt;/del&gt;&lt;/a&gt; Do &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1996&quot; title=&quot;Configure scanner buffer in bytes instead of number of rows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1996&quot;&gt;&lt;del&gt;HBASE-1996&lt;/del&gt;&lt;/a&gt; &amp;#8211; setting size to return in scan rather than count of rows &amp;#8211; properly (Ferdy Galema) (Revision 1333157)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/client/ClientScanner.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/client/Scan.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/RegionScanner.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/coprocessor/TestCoprocessorInterface.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13267227" author="hudson" created="Thu, 3 May 2012 06:03:33 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-security #190 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-security/190/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-security/190/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; title=&quot;Do HBASE-1996 -- setting size to return in scan rather than count of rows -- properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2214&quot;&gt;&lt;del&gt;HBASE-2214&lt;/del&gt;&lt;/a&gt; Do &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1996&quot; title=&quot;Configure scanner buffer in bytes instead of number of rows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1996&quot;&gt;&lt;del&gt;HBASE-1996&lt;/del&gt;&lt;/a&gt; &amp;#8211; setting size to return in scan rather than count of rows &amp;#8211; properly (Ferdy Galema) (Revision 1333122)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/ClientScanner.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/Scan.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/protobuf/generated/AdminProtos.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/protobuf/generated/ClientProtos.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/protobuf/generated/HBaseProtos.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/protobuf/generated/RPCProtos.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/protobuf/generated/ZooKeeperProtos.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/RegionScanner.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/RegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/protobuf/Client.proto&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/coprocessor/TestCoprocessorInterface.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13268838" author="hudson" created="Sat, 5 May 2012 00:58:52 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #26 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/26/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/26/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; title=&quot;Do HBASE-1996 -- setting size to return in scan rather than count of rows -- properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2214&quot;&gt;&lt;del&gt;HBASE-2214&lt;/del&gt;&lt;/a&gt; Do &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1996&quot; title=&quot;Configure scanner buffer in bytes instead of number of rows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1996&quot;&gt;&lt;del&gt;HBASE-1996&lt;/del&gt;&lt;/a&gt; &amp;#8211; setting size to return in scan rather than count of rows &amp;#8211; properly (Ferdy Galema) (Revision 1333157)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/client/ClientScanner.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/client/Scan.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/RegionScanner.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/coprocessor/TestCoprocessorInterface.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13286145" author="stack" created="Wed, 30 May 2012 22:40:11 +0000"  >&lt;p&gt;This was committed a while back.&lt;/p&gt;</comment>
                            <comment id="13421584" author="lhofhansl" created="Tue, 24 Jul 2012 17:56:06 +0000"  >&lt;p&gt;This changes the Scan version which causes compatibility issues with 0.92.&lt;br/&gt;
It should be rolled back from 0.94.&lt;/p&gt;</comment>
                            <comment id="13421606" author="lhofhansl" created="Tue, 24 Jul 2012 18:17:31 +0000"  >&lt;p&gt;In fact this even break compatibility for 0.94.0 (which we just ran into at Salesforce).&lt;br/&gt;
Rolling back from 0.94.1 now.&lt;/p&gt;</comment>
                            <comment id="13421609" author="zhihyu@ebaysf.com" created="Tue, 24 Jul 2012 18:20:44 +0000"  >&lt;p&gt;Rollback is Okay.&lt;br/&gt;
Some code is needed to keep this feature and not breaking compatibility at the same time.&lt;/p&gt;

&lt;p&gt;For the moment, rollback is the easiest to do.&lt;/p&gt;</comment>
                            <comment id="13421612" author="lhofhansl" created="Tue, 24 Jul 2012 18:23:59 +0000"  >&lt;p&gt;Reverted from 0.94.1. I pushed it to 0.94.2 so we can think about how to get the functionality without the version change to Scan.&lt;/p&gt;</comment>
                            <comment id="13421670" author="hudson" created="Tue, 24 Jul 2012 19:08:12 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #45 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/45/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/45/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; title=&quot;Do HBASE-1996 -- setting size to return in scan rather than count of rows -- properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2214&quot;&gt;&lt;del&gt;HBASE-2214&lt;/del&gt;&lt;/a&gt; Revert - breaks compatibility with 0.92.x and 0.94.0 (Revision 1365204)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/client/ClientScanner.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/client/Scan.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/RegionScanner.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/coprocessor/TestCoprocessorInterface.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13421688" author="hudson" created="Tue, 24 Jul 2012 19:31:30 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #367 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/367/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/367/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; title=&quot;Do HBASE-1996 -- setting size to return in scan rather than count of rows -- properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2214&quot;&gt;&lt;del&gt;HBASE-2214&lt;/del&gt;&lt;/a&gt; Revert - breaks compatibility with 0.92.x and 0.94.0 (Revision 1365204)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/client/ClientScanner.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/client/Scan.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/RegionScanner.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/coprocessor/TestCoprocessorInterface.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13422054" author="ferdy.g" created="Wed, 25 Jul 2012 07:21:46 +0000"  >&lt;p&gt;How can this break compatibily? (I would say that the Scan version number actually maintains compatibility). Anyway, I think it would be best if someone else picked this up. That will be much faster to implement it correctly. (As I&apos;m not involved enough).&lt;/p&gt;</comment>
                            <comment id="13422334" author="lhofhansl" created="Wed, 25 Jul 2012 15:08:51 +0000"  >&lt;p&gt;Hi Ferdy, we definitely appreciate all the work you put in for this patch! It is still in 0.96. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  We&apos;ll try to find a way to use your patch without changing the version number.&lt;/p&gt;

&lt;p&gt;The problem with changing the version number (in 0.94 and prior) is that then the newer version of the object cannot be deserialized by an older version.&lt;br/&gt;
You can see this Scan.readFields(), which throws an exception if it reads a version newer than the one it expects.&lt;br/&gt;
In practice this means that now a new client cannot issue a scan request to an older server, because the server cannot deserialize the scan object.&lt;/p&gt;

&lt;p&gt;In 0.96 and later these kind of problems are solved by protobufs.&lt;/p&gt;</comment>
                            <comment id="13422347" author="ferdy.g" created="Wed, 25 Jul 2012 15:26:22 +0000"  >&lt;p&gt;Thanks Lars.&lt;/p&gt;</comment>
                            <comment id="13422355" author="zhihyu@ebaysf.com" created="Wed, 25 Jul 2012 15:35:35 +0000"  >&lt;p&gt;Scan class should be flexible in serializing scan version.&lt;br/&gt;
When the older server throws exception, Scan object can downgrade to earlier scan version and retry.&lt;/p&gt;</comment>
                            <comment id="13422386" author="lhofhansl" created="Wed, 25 Jul 2012 16:29:53 +0000"  >&lt;p&gt;Yep. Scan can check the version in readFields and then act with a bit more smarts than just throwing up its hands (an exception).&lt;/p&gt;</comment>
                            <comment id="13423351" author="jdcryans" created="Thu, 26 Jul 2012 18:53:21 +0000"  >&lt;p&gt;Following this discussion on user@&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://permalink.gmane.org/gmane.comp.java.hadoop.hbase.user/27936&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://permalink.gmane.org/gmane.comp.java.hadoop.hbase.user/27936&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;If the max scanner result size is only set on the region server it&apos;s possible miss rows. Even with the latest patch in this jira it&apos;s still possible since the client doesn&apos;t tell the server it&apos;s going to use the default instead of whatever the server is using.&lt;/p&gt;

&lt;p&gt;Maybe the &lt;tt&gt;ClientScanner&lt;/tt&gt; could modify the &lt;tt&gt;Scan&lt;/tt&gt; that it passes the max scanner result it uses to the region server&lt;/p&gt;</comment>
                            <comment id="13423392" author="lhofhansl" created="Thu, 26 Jul 2012 19:48:49 +0000"  >&lt;p&gt;@Ferdy, are you sure you do not want to work on this anymore?&lt;br/&gt;
I&apos;ll change Scan.java to be able to deal with two different version, so we can get this in 0.94 (admittedly, that is a small change only).&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Maybe the ClientScanner could modify the Scan that it passes the max scanner result it uses to the region server&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Of course the requires the server to actually trust the client. Although I think with a rogue client it is quite easy to kill/mess-with a RegionServer in many other areas.&lt;/p&gt;</comment>
                            <comment id="13423454" author="jdcryans" created="Thu, 26 Jul 2012 20:50:01 +0000"  >&lt;blockquote&gt;&lt;p&gt;Of course the requires the server to actually trust the client.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Isn&apos;t that what this jira does already?&lt;/p&gt;</comment>
                            <comment id="13423492" author="lhofhansl" created="Thu, 26 Jul 2012 21:42:26 +0000"  >&lt;p&gt;Yep... Was just making a general observation.&lt;/p&gt;</comment>
                            <comment id="13423740" author="ferdy.g" created="Fri, 27 Jul 2012 08:25:36 +0000"  >&lt;p&gt;I&apos;m happy with you or anyone else wrapping this up. (I&apos;m not sure if the client/server buffersize mismatch issue deserves an issue on its own or if you guys want to solve it in this issue. That&apos;s up to you.)&lt;/p&gt;</comment>
                            <comment id="13428745" author="hudson" created="Sun, 5 Aug 2012 00:51:15 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security-on-Hadoop-23 #6 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/6/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/6/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2214&quot; title=&quot;Do HBASE-1996 -- setting size to return in scan rather than count of rows -- properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2214&quot;&gt;&lt;del&gt;HBASE-2214&lt;/del&gt;&lt;/a&gt; Revert - breaks compatibility with 0.92.x and 0.94.0 (Revision 1365204)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/client/ClientScanner.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/client/Scan.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/RegionScanner.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/coprocessor/TestCoprocessorInterface.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13431583" author="lhofhansl" created="Thu, 9 Aug 2012 05:34:59 +0000"  >&lt;p&gt;Actually in order to make this work, we&apos;d have make sure an older server can read the Scan object from newer client, so we cannot do this (since an old servers are deployed already).&lt;/p&gt;

&lt;p&gt;If there is no way to do this without changing the version of the Scan version I suggest we defer this until 0.96.&lt;/p&gt;</comment>
                            <comment id="13432327" author="lhofhansl" created="Fri, 10 Aug 2012 00:07:14 +0000"  >&lt;p&gt;Removing 0.94 target after all&lt;/p&gt;</comment>
                            <comment id="13775139" author="stack" created="Mon, 23 Sep 2013 18:30:49 +0000"  >&lt;p&gt;Marking closed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12607375">HBASE-6770</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12428180">HBASE-1537</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12547354">HBASE-5607</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12441347">HBASE-1996</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12525331" name="HBASE-2214-0.94-v2.txt" size="8210" author="ferdy.g" created="Wed, 2 May 2012 17:50:07 +0000"/>
                            <attachment id="12525333" name="HBASE-2214-0.94-v3.txt" size="7795" author="ferdy.g" created="Wed, 2 May 2012 17:56:53 +0000"/>
                            <attachment id="12522673" name="HBASE-2214-0.94.txt" size="6768" author="ferdy.g" created="Sat, 14 Apr 2012 11:17:08 +0000"/>
                            <attachment id="12524343" name="HBASE-2214-v4.txt" size="85980" author="ferdy.g" created="Wed, 25 Apr 2012 20:29:12 +0000"/>
                            <attachment id="12524407" name="HBASE-2214-v5.txt" size="85620" author="ferdy.g" created="Thu, 26 Apr 2012 08:21:39 +0000"/>
                            <attachment id="12525160" name="HBASE-2214-v6.txt" size="85296" author="ferdy.g" created="Tue, 1 May 2012 07:55:49 +0000"/>
                            <attachment id="12525267" name="HBASE-2214-v7.txt" size="85825" author="ferdy.g" created="Wed, 2 May 2012 08:52:18 +0000"/>
                            <attachment id="12446075" name="HBASE-2214_with_broken_TestShell.txt" size="62347" author="dploeg" created="Tue, 1 Jun 2010 22:41:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 11 Feb 2010 22:44:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32459</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hgsf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99982</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Adds Scan#getMaxResultSize</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.96notable</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>