<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:52:15 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-8126/HBASE-8126.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-8126] log4j hbase.root.logger is always overwritten by ENV, even if not defined</title>
                <link>https://issues.apache.org/jira/browse/HBASE-8126</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Go to log4j.properties. Note this sequence of definitions:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hbase.root.logger=INFO,console
log4j.rootLogger=${hbase.root.logger}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;One would think they could change hbase.root.logger to something else. Say &quot;INFO,console,SYSLOG&quot; and then define syslogging, but they&apos;d be wrong. The syslog won&apos;t take effect. The second line will always go back to &quot;INFO,console&quot; (or something, we&apos;re not able to determine what it&apos;s reverting to exactly).&lt;/p&gt;

&lt;p&gt;What&apos;s happening is that the HBASE_ROOT_LOGGER environment variable from hbase-env.sh ALWAYS overwrites that variable before it&apos;s used.&lt;/p&gt;

&lt;p&gt;However, in our environment, HBASE_ROOT_LOGGER wasn&apos;t being defined. It was commented out. Still, something sets that environment variable to a default and uses it, always clobbering the log4j.properties hbase.root.logger.&lt;/p&gt;

&lt;p&gt;Suggestion: either don&apos;t define hbase.root.logger in log4j.properties at all (instead place a comment stating that HBASE_ROOT_LOGGER environment variable in hbase-env.sh is the proper place to change it), or have modifications in log4j take precedence (and comment such in hbase-env.sh).&lt;/p&gt;</description>
                <environment>&lt;p&gt;Ubuntu Linux 10.04 LTS&lt;/p&gt;</environment>
        <key id="12637345">HBASE-8126</key>
            <summary>log4j hbase.root.logger is always overwritten by ENV, even if not defined</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="philovivero">philo vivero</reporter>
                        <labels>
                    </labels>
                <created>Sat, 16 Mar 2013 00:59:40 +0000</created>
                <updated>Sat, 16 Mar 2013 01:21:49 +0000</updated>
                                            <version>0.92.1</version>
                                                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13604065" author="philovivero" created="Sat, 16 Mar 2013 01:06:52 +0000"  >&lt;p&gt;I think I&apos;ve failed to provide all information. We tried this, which worked:&lt;/p&gt;

&lt;p&gt;hbase.root.logger=INFO,console&lt;br/&gt;
our.own.variable=SYSLOG&lt;br/&gt;
log4j.rootLogger=$&lt;/p&gt;
{hbase.root.logger}
&lt;p&gt;,$&lt;/p&gt;
{our.own.variable}

&lt;p&gt;We also tried:&lt;/p&gt;

&lt;p&gt;hbase.root.logger=INFO,console,R&lt;/p&gt;

&lt;p&gt;Where R was:&lt;/p&gt;

&lt;p&gt;log4j.appender.R=org.apache.log4j.RollingFileAppender&lt;br/&gt;
log4j.appender.R.maxFileSize=2GB&lt;br/&gt;
log4j.appender.R.maxBackupIndex=10&lt;br/&gt;
log4j.appender.R.layout=org.apache.log4j.PatternLayout&lt;br/&gt;
log4j.appender.R.layout.ConversionPattern=hbase: %5p &lt;span class=&quot;error&quot;&gt;&amp;#91;%t&amp;#93;&lt;/span&gt; %d&lt;/p&gt;
{ISO8601} %F (line %L) %m%n&lt;br/&gt;
log4j.appender.R.File=/var/log/hbase/hbase-hbase-regionserver-hostname.log&lt;br/&gt;
&lt;br/&gt;
And that seemed to work (though we&apos;re not 100% sure - that&apos;s pretty close to DRFA).&lt;br/&gt;
&lt;br/&gt;
We have about 90% certainty that the ENV variable is clobbering any attempt to add a SYSLOG entry. Our SYSLOG entry looks like this:&lt;br/&gt;
&lt;br/&gt;
log4j.appender.SYSLOG=org.apache.log4j.net.SyslogAppender&lt;br/&gt;
log4j.appender.SYSLOG.syslogHost=syslogHost:514&lt;br/&gt;
log4j.appender.SYSLOG.layout=org.apache.log4j.PatternLayout&lt;br/&gt;
log4j.appender.SYSLOG.layout.ConversionPattern=hbase: %d{ISO8601}
&lt;p&gt; %p %c: %m%n&lt;br/&gt;
log4j.appender.SYSLOG.facility=LOCAL7&lt;/p&gt;

&lt;p&gt;Hopefully I didn&apos;t just muddy the waters, but just wanted to point out that there seems to be a small amount of evidence that contradicts my description above, though only in a minor way.&lt;/p&gt;</comment>
                            <comment id="13604067" author="philovivero" created="Sat, 16 Mar 2013 01:12:24 +0000"  >&lt;p&gt;Why not? I&apos;ll just keep commenting.&lt;/p&gt;

&lt;p&gt;We had thought this only affected HBase, which is why I submitted this in the HBase JIRA, but this also affects HDFS.&lt;/p&gt;

&lt;p&gt;If you do the hadoop.root.logger and HADOOP_ROOT_LOGGER in hadoop-env.sh equivalents, the same problems manifest themselves.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>317837</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 39 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1iucn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>318178</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>