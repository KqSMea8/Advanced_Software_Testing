<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:09:40 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-3374/HBASE-3374.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-3374] Our jruby jar has *GPL jars in it; fix</title>
                <link>https://issues.apache.org/jira/browse/HBASE-3374</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The latest JRuby&apos;s complete jar bundles *GPL jars (JNA and JFFI among others).   It looks like the functionality we depend on &amp;#8211; the shell in particular &amp;#8211; makes use of these dirty jars so they are hard to strip.  They came in because we (I!) just updated our JRuby w/o checking in on what updates contained.  JRuby has been doing this for a while now (1.1.x added the first LGPL).  You have to go all the ways back to the original HBase checkin, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-487&quot; title=&quot;Replace hql w/ a hbase-friendly jirb or jython shell&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-487&quot;&gt;&lt;del&gt;HBASE-487&lt;/del&gt;&lt;/a&gt;, of JRuby &amp;#8211; 1.0.3 &amp;#8211; to get a JRuby w/o *GPL jars.&lt;/p&gt;

&lt;p&gt;Plan is to try and revert our JRuby all the ways down to 1.0.3 before shipping 0.90.0.  Thats what this issue is about.&lt;/p&gt;

&lt;p&gt;We should also look into moving off JRuby in the medium to long-term.  Its kinda awkward sticking on an old version that is no longer supported.  I&apos;ll open an issue for that.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12493621">HBASE-3374</key>
            <summary>Our jruby jar has *GPL jars in it; fix</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stack">stack</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Sun, 19 Dec 2010 06:15:19 +0000</created>
                <updated>Fri, 20 Nov 2015 12:40:54 +0000</updated>
                            <resolved>Thu, 3 Mar 2011 23:48:18 +0000</resolved>
                                                    <fixVersion>0.92.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="12973146" author="lars_francke" created="Mon, 20 Dec 2010 09:38:50 +0000"  >&lt;p&gt;I&apos;m sorry. I might have been the one who upgraded that in one of the Maven cleanups without taking a close look.&lt;/p&gt;</comment>
                            <comment id="12973227" author="stack" created="Mon, 20 Dec 2010 15:27:10 +0000"  >&lt;p&gt;@Lars It was not you.  The damage was already done many times over.&lt;/p&gt;</comment>
                            <comment id="12973421" author="stack" created="Mon, 20 Dec 2010 23:56:23 +0000"  >&lt;p&gt;So, 1.0.3. is still available in maven repos.  Thats good.  java_import is not available in 1.0.3.  Thats the &apos;safe&apos; way of doing imports &amp;#8212; see &lt;a href=&quot;http://jira.codehaus.org/browse/JRUBY-3171&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://jira.codehaus.org/browse/JRUBY-3171&lt;/a&gt;.  Using raw &apos;import&apos; seems to work but dumps out the following before shell starts if the referenced import is used more than once &amp;#8211; e.g. if we&apos;re using HConstants defines in a few places in .rb code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
(eval):1 warning: already initialized constant HConstants
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Fully specifying java classes with packages in all places they are used seems to get rid of the above.  I&apos;m working on a patch to do that.&lt;/p&gt;

&lt;p&gt;We will have to remove TestShell.  It uses facility only available in later jrubys.&lt;/p&gt;

&lt;p&gt;Looking at the way the shell was refactored by Alexei, its kinda nice the way he did it.  All of the java access is done in one or two files apart from the bulk of the ruby code; makes it easier doing this fixup.&lt;/p&gt;</comment>
                            <comment id="12973427" author="stack" created="Tue, 21 Dec 2010 00:38:08 +0000"  >&lt;p&gt;Here is what I applied to 0.90.  I applied same to trunk but took a little fixup.&lt;/p&gt;

&lt;p&gt;It looks to be all working.  I exercised a bunch of shell facility and I think I got all the weird imports and references.  Lets open new issues if there is anything that I forgot... Shell seems fine.  Maybe a little slower than it used to be.&lt;/p&gt;</comment>
                            <comment id="12973433" author="stack" created="Tue, 21 Dec 2010 00:44:06 +0000"  >&lt;p&gt;I did a bit more testing of shell.. enable, disable, create, alter, etc.  Seems to be doing like it used to.&lt;/p&gt;</comment>
                            <comment id="12974492" author="hudson" created="Thu, 23 Dec 2010 04:31:41 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #1697 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/HBase-TRUNK/1697/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/HBase-TRUNK/1697/&lt;/a&gt;)&lt;/p&gt;
</comment>
                            <comment id="12977093" author="wattsteve" created="Tue, 4 Jan 2011 03:22:18 +0000"  >&lt;p&gt;Thanks for turning this issue around so quickly. Awesome work.&lt;/p&gt;</comment>
                            <comment id="12985423" author="headius" created="Sun, 23 Jan 2011 21:40:55 +0000"  >&lt;p&gt;Woah there cowboys!&lt;/p&gt;

&lt;p&gt;Downgrading to JRuby 1.0.3 is a &lt;b&gt;TERRIBLE&lt;/b&gt; idea. 1.0.3 does not include a compiler, and performs somewhere in the neighborhood of 50-100 times worse than current JRuby versions. It also has much worse compatibility with Ruby, is not compatible at all with Ruby 1.8.7 or 1.9, and has many other leaks, bugs, and flaws.&lt;/p&gt;

&lt;p&gt;We would happily work with you guys (and Apache proper) to either publish a version of JRuby that does not include the offending libraries, or try to get the creator of those libraries (who is a JRuby committer) to relicense them.&lt;/p&gt;

&lt;p&gt;I would STRONGLY recommend undoing the massive damage you will cause by downgrading to JRuby 1.0.3 and working with us to get you a &quot;safe&quot; version of a more current JRuby.&lt;/p&gt;</comment>
                            <comment id="12985426" author="ryanobjc" created="Sun, 23 Jan 2011 21:52:40 +0000"  >&lt;p&gt;hi Charles,&lt;/p&gt;

&lt;p&gt;The patch has already been submitted, the deed is done.&lt;/p&gt;

&lt;p&gt;In our survey of the code, there were about 4 different libraries embedded and included in JRuby, some of LGPL some of GPLv3.&lt;/p&gt;

&lt;p&gt;Some of them look pretty fundamental, such as the dependency on: &lt;a href=&quot;http://code.google.com/p/jvm-language-runtime&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://code.google.com/p/jvm-language-runtime&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;As you probably know, the ASF has pretty strict rules regarding licensing, so undoing the downgrade is not possible until a JRuby that has ASF compatible licensing is available. &lt;/p&gt;</comment>
                            <comment id="12985428" author="ryanobjc" created="Sun, 23 Jan 2011 21:55:50 +0000"  >&lt;p&gt;Based on COPYING from:&lt;br/&gt;
&lt;a href=&quot;https://github.com/jruby/jruby/blob/master/COPYING&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/jruby/jruby/blob/master/COPYING&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The following libraries are a problem:&lt;/p&gt;

&lt;p&gt; build_lib/jffi*jar (&lt;a href=&quot;http://kenai.com/projects/jffi&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://kenai.com/projects/jffi&lt;/a&gt;) and&lt;br/&gt;
 build_lib/jgrapht-jdk1.5.jar (&lt;a href=&quot;http://jgrapht.sourceforge.net&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://jgrapht.sourceforge.net&lt;/a&gt;) are&lt;br/&gt;
 distributed under the GPL v3.&lt;/p&gt;

&lt;p&gt; build_lib/jna*jar (&lt;a href=&quot;http://jna.dev.java.net&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://jna.dev.java.net&lt;/a&gt;) are distributed&lt;br/&gt;
 under the LGPL-2.1+ license.&lt;/p&gt;

&lt;p&gt; build_lib/invokedynamic.jar and build_lib/jsr292-mock.jar&lt;br/&gt;
 (&lt;a href=&quot;http://code.google.com/p/jvm-language-runtime&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://code.google.com/p/jvm-language-runtime&lt;/a&gt;) are distributed&lt;br/&gt;
 under the LGPL license.&lt;/p&gt;


&lt;p&gt;Also there are a few broken links such as &lt;a href=&quot;http://projectkenai.com/projects/jaffl&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://projectkenai.com/projects/jaffl&lt;/a&gt; which are a little concerning.&lt;/p&gt;


</comment>
                            <comment id="12985429" author="headius" created="Sun, 23 Jan 2011 21:59:09 +0000"  >&lt;p&gt;Ryan: I understand what ASF needs, and that&apos;s exactly what I want to provide.&lt;/p&gt;

&lt;p&gt;Of the libraries that are GPL, according to our COPYING file:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;jvm-language-runtime is not shipped with JRuby binaries. It is used only because it provides a mock JSR-292 invokedynamic library for compile-time on JVMs that do not have JSR-292 (Java 6 and lower).&lt;/li&gt;
	&lt;li&gt;jffi could potentially be relicensed, or simply removed; it is for native library access, and JRuby would work correctly without it.&lt;/li&gt;
	&lt;li&gt;jgrapht-jdk15 is only used by a newer in-development compiler that is not used normally, and could be removed. We would like to explore replacements.&lt;/li&gt;
	&lt;li&gt;we do not ship JNA anymore&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Of these, only jffi and jgrapht are in the binaries we distribute, and it&apos;s likely JRuby would work with them just yanked out. If any of the other libraries are included in our binaries, it&apos;s a bug in our build process.&lt;/p&gt;

&lt;p&gt;If we provide a build of JRuby that does not include those GPLed libraries, would that satisfy ASF&apos;s requirements?&lt;/p&gt;</comment>
                            <comment id="12985439" author="headius" created="Sun, 23 Jan 2011 22:33:12 +0000"  >&lt;p&gt;FYI, I have taken this to be a JRuby issue, and filed the following: &lt;a href=&quot;http://jira.codehaus.org/browse/JRUBY-5410&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://jira.codehaus.org/browse/JRUBY-5410&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I want us to publish a *GPL-free maven artifact for JRuby 1.6.0. This should be usable by Apache and other projects that can&apos;t include GPLed code.&lt;/p&gt;

&lt;p&gt;I am talking to the maintainer of jffi (and jaffl, which was incorrectly listed as MIT licensed in COPYING) about adding an Apache-friendly license.&lt;/p&gt;

&lt;p&gt;I added a jar-jruby-nogpl target to our build.xml and fixed COPYING to properly reflect jaffl licensing and jffi and jaffl homepages&lt;/p&gt;

&lt;p&gt;I also confirmed that simply removing jffi, jaffl, and jgrapht from jruby.jar does not damage general Ruby behavior. As mentioned above, some native or system-level capabilities are disabled or work differently, but IRB, RubyGems, and Rails all function correctly.&lt;/p&gt;</comment>
                            <comment id="12985466" author="headius" created="Sun, 23 Jan 2011 23:45:42 +0000"  >&lt;p&gt;The author of jffi and jaffl has asked if Sun&apos;s CDDL would be an acceptable license under which he could dual-license jffi, jaffl, and other projects. Is CDDL acceptable?&lt;/p&gt;</comment>
                            <comment id="12985470" author="headius" created="Mon, 24 Jan 2011 00:15:12 +0000"  >&lt;p&gt;My reading of Apache&apos;s position on CDDL (from &lt;a href=&quot;http://www.apache.org/legal/3party.html#criteriaandcategories&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.apache.org/legal/3party.html#criteriaandcategories&lt;/a&gt;) is that CDDL would be acceptable if the software/library in question is distributed only in binary form and an appropriate note of the so-licensed software is made in the LICENSE file. This appears to puts CDDL in the same category as CPL, under which license JRuby itself is allowed for inclusion in HBase.&lt;/p&gt;

&lt;p&gt;So I think CDDL would be acceptable...correct?&lt;/p&gt;</comment>
                            <comment id="12985473" author="apurtell" created="Mon, 24 Jan 2011 00:41:24 +0000"  >&lt;p&gt;Alright Charles, leaving the meta issue of whether Ruby syntax is really what people want long term for the shell, reopening this issue perhaps to upgrade to an ASF-clean JRuby for the next HBase release if JRuby sorts the licensing issues out.&lt;/p&gt;</comment>
                            <comment id="12985781" author="stack" created="Mon, 24 Jan 2011 16:18:39 +0000"  >&lt;p&gt;@Charles Yes, CDDL looks fine.  We can add appropriate notices np.  Thanks for taking this on.&lt;/p&gt;</comment>
                            <comment id="12986239" author="headius" created="Tue, 25 Jan 2011 05:56:29 +0000"  >&lt;p&gt;Andrew, stack: Thank you for giving us an opportunity to fix this &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;An update for you.&lt;/p&gt;

&lt;p&gt;Due to the oldness of CDDL, the author of jffi and jaffl (Wayne Meissner, also one of the primary &amp;#8211; or the primary &amp;#8211; contributors to jna) has opted to add EPL as an additional license. This is roughly in line with our CPL license in JRuby and falls into the same category as CPL and CDDL as far as inclusion in Apache projects.&lt;/p&gt;

&lt;p&gt;We will also strip jgrapht from JRuby 1.6.0.RC2, so the binaries for JRuby 1.6 final will not have any GPL or LGPL-only library dependencies.&lt;/p&gt;

&lt;p&gt;I&apos;m very glad we were able to get this sorted out.&lt;/p&gt;</comment>
                            <comment id="12986242" author="stack" created="Tue, 25 Jan 2011 06:01:49 +0000"  >&lt;p&gt;@Charles sweet!&lt;/p&gt;</comment>
                            <comment id="12986798" author="apurtell" created="Wed, 26 Jan 2011 01:05:14 +0000"  >&lt;p&gt;@Charles Thanks, looking forward to JRuby 1.6.&lt;/p&gt;</comment>
                            <comment id="12987386" author="headius" created="Thu, 27 Jan 2011 05:41:12 +0000"  >&lt;p&gt;A final update, and then hopefully this will be all set for JRuby 1.6RC2:&lt;/p&gt;

&lt;p&gt;Wayne has decided to go ahead and just add Apache-2.0 to his jffi and jaffl projects. I guess that should settle things nicely &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12987396" author="stack" created="Thu, 27 Jan 2011 06:14:54 +0000"  >&lt;p&gt;@Charles That&apos;ll work (smile).&lt;/p&gt;</comment>
                            <comment id="12987609" author="wattsteve" created="Thu, 27 Jan 2011 15:43:23 +0000"  >&lt;p&gt;@Charles Thanks for the contributions. This is some awesome cross-project synergy. &lt;/p&gt;

&lt;p&gt;@stack et al - I&apos;ll do another legal scan of HBase for 0.90.1 once its out and will let you know if I find any other issues. Thanks for resolving this so quickly.&lt;/p&gt;</comment>
                            <comment id="12992090" author="headius" created="Tue, 8 Feb 2011 18:34:56 +0000"  >&lt;p&gt;The JRuby bug (JRUBY-5410) has been resolved! JRuby 1.6.0.RC2 will ship with no &lt;span class=&quot;error&quot;&gt;&amp;#91;L&amp;#93;&lt;/span&gt;GPL-only libraries, now that jaffl, jffi, and jnr-netdb are licensed Apache-2.0 and jgrapht has been removed from our binary distribution.&lt;/p&gt;

&lt;p&gt;Thanks for your patience!&lt;/p&gt;</comment>
                            <comment id="12992093" author="stack" created="Tue, 8 Feb 2011 18:42:08 +0000"  >&lt;p&gt;Thanks @Charles.  We&apos;ll wait on RC2 release then bring it in and close this issue.  Good stuff.&lt;/p&gt;</comment>
                            <comment id="13002325" author="stack" created="Thu, 3 Mar 2011 23:33:27 +0000"  >&lt;p&gt;Closing.  Opened &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3600&quot; title=&quot;Update our jruby to 1.6.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3600&quot;&gt;&lt;del&gt;HBASE-3600&lt;/del&gt;&lt;/a&gt; to accomodate update to jruby 1.6.0RC2 (Charles, if you see this, I notice that 1.6.0RC2 is out but its not in a maven repo &amp;#8211; you know why?  Usually RCs make it to maven it would seem.  Thanks, and thanks again for fixing licensing so we could use the new stuff again)&lt;/p&gt;</comment>
                            <comment id="13002333" author="stack" created="Thu, 3 Mar 2011 23:48:18 +0000"  >&lt;p&gt;Actually closing.&lt;/p&gt;</comment>
                            <comment id="15016829" author="lars_francke" created="Fri, 20 Nov 2015 12:40:54 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12466672" name="jruby.txt" size="24659" author="stack" created="Tue, 21 Dec 2010 00:38:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 20 Dec 2010 09:38:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26816</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hlzz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>100826</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>The lads over in jruby land say 1.6RC2 should have the licensing fixup.  Lets get it into TRUNK when ready.  I don&amp;#39;t think this a 0.90.x issue.  Moving it out.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>