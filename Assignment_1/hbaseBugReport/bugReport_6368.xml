<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:36:08 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6368/HBASE-6368.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6368] Upgrade Guava for critical performance bug fix</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6368</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The bug is &lt;a href=&quot;http://code.google.com/p/guava-libraries/issues/detail?id=1055&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://code.google.com/p/guava-libraries/issues/detail?id=1055&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;See discussion under &apos;Upgrade to Guava 12.0.1: Performance bug in CacheBuilder/LoadingCache fixed!&apos;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12598260">HBASE-6368</key>
            <summary>Upgrade Guava for critical performance bug fix</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zhihyu@ebaysf.com">Ted Yu</assignee>
                                    <reporter username="zhihyu@ebaysf.com">Ted Yu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Jul 2012 19:58:07 +0000</created>
                <updated>Mon, 23 Sep 2013 18:31:19 +0000</updated>
                            <resolved>Sun, 5 May 2013 05:22:08 +0000</resolved>
                                    <version>0.95.2</version>
                                    <fixVersion>0.95.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                <comments>
                            <comment id="13410886" author="lhofhansl" created="Tue, 10 Jul 2012 20:55:45 +0000"  >&lt;p&gt;Needed in 0.94?&lt;/p&gt;</comment>
                            <comment id="13410892" author="zhihyu@ebaysf.com" created="Tue, 10 Jul 2012 20:59:05 +0000"  >&lt;p&gt;I think so.&lt;br/&gt;
More code in 0.94 may depend on Guava CacheBuilder.&lt;/p&gt;</comment>
                            <comment id="13410977" author="hadoopqa" created="Tue, 10 Jul 2012 22:00:52 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12535909/6368-trunk.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12535909/6368-trunk.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    -1 javac.  The applied patch generated 5 javac compiler warnings (more than the trunk&apos;s current 4 warnings).&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 8 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2362//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2362//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2362//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2362//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2362//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2362//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2362//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2362//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13410981" author="zhihyu@ebaysf.com" created="Tue, 10 Jul 2012 22:06:37 +0000"  >&lt;p&gt;All the tests passed:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[INFO] HBase ............................................. SUCCESS [1.979s]
[INFO] HBase - Common .................................... SUCCESS [3.746s]
[INFO] HBase - Server .................................... SUCCESS [38:14.023s]
[INFO] HBase - Integration Tests ......................... SUCCESS [1.227s]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 38:21.304s
[INFO] Finished at: Tue Jul 10 22:00:48 UTC 2012
[INFO] Final Memory: 54M/478M
[INFO] ------------------------------------------------------------------------
#
# There is insufficient memory &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the Java &lt;span class=&quot;code-object&quot;&gt;Runtime&lt;/span&gt; Environment to &lt;span class=&quot;code-keyword&quot;&gt;continue&lt;/span&gt;.
# Native memory allocation (malloc) failed to allocate 65544 bytes &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Chunk::&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;
# An error report file with more information is saved as:
# /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/trunk/hs_err_pid32288.log
/home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/trunk/dev-support/test-patch.sh: line 594: 32288 Aborted                 $MVN clean test -P runAllTests -D${PROJECT_NAME}PatchProcess -Dsurefire.secondPartThreadCount=4
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I saw the tail of the above in other PreCommit builds as well.&lt;/p&gt;

&lt;p&gt;Will integrate tomorrow if there is no objection.&lt;/p&gt;</comment>
                            <comment id="13411978" author="zhihyu@ebaysf.com" created="Wed, 11 Jul 2012 20:49:37 +0000"  >&lt;p&gt;Integrated to trunk.&lt;/p&gt;</comment>
                            <comment id="13411990" author="lhofhansl" created="Wed, 11 Jul 2012 21:02:21 +0000"  >&lt;p&gt;How does this mingle with newer versions of Hadoop (0.22+, which have Guava 11.0.2)?&lt;/p&gt;</comment>
                            <comment id="13412003" author="zhihyu@ebaysf.com" created="Wed, 11 Jul 2012 21:14:12 +0000"  >&lt;p&gt;Thanks for the reminder.&lt;br/&gt;
I logged &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-4429&quot; title=&quot;Upgrade Guava for critical performance bug fix&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-4429&quot;&gt;MAPREDUCE-4429&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13412025" author="stack" created="Wed, 11 Jul 2012 21:32:29 +0000"  >&lt;p&gt;Will this undo the work done over in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5955&quot; title=&quot;Guava 11 drops MapEvictionListener and Hadoop 2.0.0-alpha requires it&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5955&quot;&gt;&lt;del&gt;HBASE-5955&lt;/del&gt;&lt;/a&gt;?  Does this break our compiling against hadoop-2.0.x?&lt;/p&gt;</comment>
                            <comment id="13412026" author="zhihyu@ebaysf.com" created="Wed, 11 Jul 2012 21:35:08 +0000"  >&lt;p&gt;The following step passed Hadoop QA:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
======================================================================
    Checking against hadoop 2.0 build
======================================================================
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13412044" author="hudson" created="Wed, 11 Jul 2012 21:54:14 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3119 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3119/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3119/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6368&quot; title=&quot;Upgrade Guava for critical performance bug fix&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6368&quot;&gt;&lt;del&gt;HBASE-6368&lt;/del&gt;&lt;/a&gt; Upgrade Guava for critical performance bug fix (Revision 1360386)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/pom.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13412279" author="apurtell" created="Wed, 11 Jul 2012 23:00:00 +0000"  >&lt;p&gt;This issue and patch just rolls right over a bunch of previous discussion like it never happened.&lt;/p&gt;</comment>
                            <comment id="13648887" author="jdcryans" created="Fri, 3 May 2013 23:16:53 +0000"  >&lt;p&gt;Not sure what is going on here, but it&apos;s definitely not &quot;patch available&quot;.&lt;/p&gt;</comment>
                            <comment id="13649224" author="stack" created="Sun, 5 May 2013 00:31:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andrew.purtell%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;andrew.purtell@gmail.com&quot;&gt;Andrew Purtell&lt;/a&gt; Should this be backed out?  What is the discussion that is rolled over?  It does not seem to be referenced here.&lt;/p&gt;</comment>
                            <comment id="13649228" author="apurtell" created="Sun, 5 May 2013 00:51:44 +0000"  >&lt;p&gt;Lars&apos; question as I recall. But this has been committed for so long, it&apos;s ancient history. Just close this issue?&lt;/p&gt;</comment>
                            <comment id="13649232" author="lhofhansl" created="Sun, 5 May 2013 01:21:12 +0000"  >&lt;p&gt;If upgrading Guava does not break compatibility with some versions of Hadoop we should upgrade it in 0.94 as well (but in a different issue anyway, as this was committed so long ago).&lt;/p&gt;

&lt;p&gt;Is there an easy way to validate whether this breaks compatibility? I can&apos;t think of any. &lt;/p&gt;</comment>
                            <comment id="13649233" author="lhofhansl" created="Sun, 5 May 2013 01:39:13 +0000"  >&lt;p&gt;Looking through the (0.94) code a bit... It seems it is only used in SlabCache, which in turn is only used in DoubleBlockCache, which we know does not work.&lt;/p&gt;

&lt;p&gt;So it seems keeping the old version is fine (unless I missed something of course). A related question is: Should we remove the DoubleBlockCache and all related classes?&lt;/p&gt;</comment>
                            <comment id="13649259" author="apurtell" created="Sun, 5 May 2013 03:54:59 +0000"  >&lt;p&gt;In which case this issue was and is not a critical one. &lt;/p&gt;

&lt;p&gt;0.94 currently specifies 11.0.2. This is the same version the hadoop-project POM specifies on branch-2. No change seems necessary now. &lt;/p&gt;

&lt;p&gt;+1 to removing broken unmaintained code. Another JIRA? &lt;/p&gt;</comment>
                            <comment id="13649275" author="stack" created="Sun, 5 May 2013 05:21:13 +0000"  >&lt;p&gt;+1 on removing unmaintained code.&lt;/p&gt;

&lt;p&gt;-1 on backport to 0.94 when the it is so rarely used and the &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ted_yu&quot; class=&quot;user-hover&quot; rel=&quot;ted_yu&quot;&gt;Ted Yu&lt;/a&gt; justification for backport is &quot;...More code in 0.94 may &lt;span class=&quot;error&quot;&gt;&amp;#91;sic&amp;#93;&lt;/span&gt; depend on Guava CacheBuilder.&quot;&lt;/p&gt;</comment>
                            <comment id="13649276" author="stack" created="Sun, 5 May 2013 05:22:08 +0000"  >&lt;p&gt;Resoloving.  Was integrated way back.&lt;/p&gt;</comment>
                            <comment id="13775355" author="stack" created="Mon, 23 Sep 2013 18:31:19 +0000"  >&lt;p&gt;Marking closed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12535909" name="6368-trunk.txt" size="566" author="zhihyu@ebaysf.com" created="Tue, 10 Jul 2012 20:02:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 10 Jul 2012 20:55:45 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>239703</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i00smv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2571</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>