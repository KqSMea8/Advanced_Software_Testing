<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:11:55 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-3644/HBASE-3644.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-3644] HServerAddress Violates Equivalence Relations</title>
                <link>https://issues.apache.org/jira/browse/HBASE-3644</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3387&quot; title=&quot;Pair does not deep check arrays for equality. &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3387&quot;&gt;&lt;del&gt;HBASE-3387&lt;/del&gt;&lt;/a&gt; or &lt;a href=&quot;http://www.ibm.com/developerworks/java/library/j-jtp05273.html#N10184&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.ibm.com/developerworks/java/library/j-jtp05273.html#N10184&lt;/a&gt; .  Basically, &apos;a&apos; denotes HServerAddress(DNS) &amp;amp; &apos;b&apos; denotes HServerAddress(nslookup(DNS)).  This is extremely common within HBase when &apos;conf/regionserver&apos; contains DNS entries because ClusterStatus.getServers() is IP-based. You have a.address.equals(b.address) &amp;amp;&amp;amp; !a.stringValue.equals(b.stringValue).  In this case, a.equals(b) while a.hashCode() != b.hashCode().  &lt;/p&gt;</description>
                <environment></environment>
        <key id="12501426">HBASE-3644</key>
            <summary>HServerAddress Violates Equivalence Relations</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="nspiegelberg">Nicolas Spiegelberg</assignee>
                                    <reporter username="nspiegelberg">Nicolas Spiegelberg</reporter>
                        <labels>
                    </labels>
                <created>Tue, 15 Mar 2011 03:42:36 +0000</created>
                <updated>Sun, 26 Jan 2014 22:43:45 +0000</updated>
                            <resolved>Sun, 26 Jan 2014 22:43:45 +0000</resolved>
                                    <version>0.90.2</version>
                    <version>0.92.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13006798" author="stack" created="Tue, 15 Mar 2011 05:29:10 +0000"  >&lt;p&gt;Does it help that &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1502&quot; title=&quot;Remove need for heartbeats in HBase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1502&quot;&gt;&lt;del&gt;HBASE-1502&lt;/del&gt;&lt;/a&gt; is trying to strip out HServerAddress N?  Its adding in a new ServerName instead, a carrier for the String hostname, the int port, and the long startcode.  No DNS in the mix.  &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1502&quot; title=&quot;Remove need for heartbeats in HBase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1502&quot;&gt;&lt;del&gt;HBASE-1502&lt;/del&gt;&lt;/a&gt; is about removing heartbeats but along the way deprecating HSA and HServerInfo.&lt;/p&gt;</comment>
                            <comment id="13006799" author="nspiegelberg" created="Tue, 15 Mar 2011 05:31:53 +0000"  >&lt;p&gt;I think, for 0.90, it should suffice to just remove &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    result ^= stringValue.hashCode();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Even if a.stringValue != b.stringValue, it&apos;s okay for a.hashCode() == b.hashCode() &amp;amp;&amp;amp; !a.equals(b), just can&apos;t have the other way around.  This wouldn&apos;t solve the case where stringValue matches but address doesn&apos;t, however that&apos;s not the common case and I&apos;m pretty sure that&apos;s not possible anymore because of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2806&quot; title=&quot;DNS hiccups cause uncaught NPE in HServerAddress#getBindAddress&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2806&quot;&gt;&lt;del&gt;HBASE-2806&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;However, it seems like the stringValue is sort of unnecessary and can be removed in 0.92.  Because of checkBindAddressCanBeResolved() from &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2806&quot; title=&quot;DNS hiccups cause uncaught NPE in HServerAddress#getBindAddress&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2806&quot;&gt;&lt;del&gt;HBASE-2806&lt;/del&gt;&lt;/a&gt;, you&apos;re guaranteed that the hostname will always be resolved when working with an HServerAddress.  Because of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3286&quot; title=&quot;Master passes IP and not hostname back to region server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3286&quot;&gt;&lt;del&gt;HBASE-3286&lt;/del&gt;&lt;/a&gt;, we use address.getHostName() to generate stringValue anyways.  It seems like stringValue is just a legacy variable that can be removed.  JD, Stack, or any other people who worked on this class, am I missing something?&lt;/p&gt;</comment>
                            <comment id="13006803" author="nspiegelberg" created="Tue, 15 Mar 2011 05:51:04 +0000"  >&lt;p&gt;@Stack: hmm.  I was using HSA because it was in the existing HBCK code that I&apos;m improving.  I think I might be able to move over to pure ISA.  Should we add @Deprecated annotations to this class?&lt;/p&gt;</comment>
                            <comment id="13007076" author="stack" created="Tue, 15 Mar 2011 18:32:48 +0000"  >&lt;p&gt;@N 1502 deprecates it.  I&apos;m back on that now.  Hopefully something to go in in the next week or so.  Meantime if you want to remove stringValue, thats fine.  When I come through with hbase-1502, I can do fixup.&lt;/p&gt;</comment>
                            <comment id="13029166" author="stack" created="Thu, 5 May 2011 06:31:17 +0000"  >&lt;p&gt;hbase-1502 has been committed and in includes deprecation of hsa&lt;/p&gt;</comment>
                            <comment id="13047563" author="stack" created="Fri, 10 Jun 2011 22:45:51 +0000"  >&lt;p&gt;Moving out of 0.92.0. Pull it back in if you think different.&lt;/p&gt;</comment>
                            <comment id="13882467" author="stack" created="Sun, 26 Jan 2014 22:43:45 +0000"  >&lt;p&gt;No HSA anymore.  Resolving as no longer valid.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12493917">HBASE-3387</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 15 Mar 2011 05:29:10 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26961</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 46 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02de7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11771</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>