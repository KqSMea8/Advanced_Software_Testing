<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:14:21 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-3929/HBASE-3929.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-3929] Add option to HFile tool to produce basic stats</title>
                <link>https://issues.apache.org/jira/browse/HBASE-3929</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;In looking at &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3421&quot; title=&quot;Very wide rows -- 30M plus -- cause us OOME&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3421&quot;&gt;&lt;del&gt;HBASE-3421&lt;/del&gt;&lt;/a&gt; I wrote a small tool to scan an HFile and produce some basic statistics about it:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;min/mean/max key size, value size (uncompressed)&lt;/li&gt;
	&lt;li&gt;min/mean/max number of columns per row (uncompressed)&lt;/li&gt;
	&lt;li&gt;min/mean/max number of bytes per row (uncompressed)&lt;/li&gt;
	&lt;li&gt;the key of the largest row&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12508571">HBASE-3929</key>
            <summary>Add option to HFile tool to produce basic stats</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mbertozzi">Matteo Bertozzi</assignee>
                                    <reporter username="tlipcon">Todd Lipcon</reporter>
                        <labels>
                    </labels>
                <created>Fri, 27 May 2011 18:30:16 +0000</created>
                <updated>Fri, 20 Nov 2015 12:42:17 +0000</updated>
                            <resolved>Fri, 21 Oct 2011 18:43:46 +0000</resolved>
                                    <version>0.92.0</version>
                                    <fixVersion>0.92.0</fixVersion>
                                    <component>io</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13040368" author="tlipcon" created="Fri, 27 May 2011 18:31:46 +0000"  >&lt;p&gt;here&apos;s the draft of the code.&lt;/p&gt;

&lt;p&gt;before commit, I think we should refactor all of the HFile &quot;Tool&quot; stuff out of HFile into a new class.&lt;/p&gt;</comment>
                            <comment id="13040385" author="stack" created="Fri, 27 May 2011 18:56:24 +0000"  >&lt;p&gt;This looks great. +1 on commit whether or not we wait on factoring out the cmd-line hfile stuff.&lt;/p&gt;</comment>
                            <comment id="13047602" author="stack" created="Fri, 10 Jun 2011 22:46:02 +0000"  >&lt;p&gt;Moving out of 0.92.0. Pull it back in if you think different.&lt;/p&gt;</comment>
                            <comment id="13049498" author="stack" created="Tue, 14 Jun 2011 22:53:20 +0000"  >&lt;blockquote&gt;&lt;p&gt;before commit, I think we should refactor all of the HFile &quot;Tool&quot; stuff out of HFile into a new class.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;How about doing this some other time in another issue and commit what we have here?&lt;/p&gt;

&lt;p&gt;If we change the door into the HFile, we&apos;ll need to update docs, lars will have to change his book, the world will end, don&apos;t you think?&lt;/p&gt;</comment>
                            <comment id="13049517" author="tlipcon" created="Tue, 14 Jun 2011 23:31:46 +0000"  >&lt;p&gt;We can always leave a &apos;main()&apos; for one version which just calls through to the new tool after printing a deprecation method.&lt;/p&gt;</comment>
                            <comment id="13049535" author="stack" created="Wed, 15 Jun 2011 00:07:36 +0000"  >&lt;p&gt;Yeah, you could, in a new JIRA? (smile)&lt;/p&gt;</comment>
                            <comment id="13049540" author="stack" created="Wed, 15 Jun 2011 00:17:49 +0000"  >&lt;p&gt;@Todd Patch as is adds value.  The refactor adds value, but its minuscule compared.  You are busy.  I don&apos;t want the minuscule getting in the way of our getting value.  Thats my rationale.&lt;/p&gt;</comment>
                            <comment id="13049544" author="tlipcon" created="Wed, 15 Jun 2011 00:26:36 +0000"  >&lt;p&gt;My anti-commit rationale is that, if we commit this, then there won&apos;t be any motivation to refactor later. If we make this commit conditional on cleaning it up first, we&apos;re more likely to actually clean up!&lt;/p&gt;</comment>
                            <comment id="13049577" author="stack" created="Wed, 15 Jun 2011 02:21:40 +0000"  >&lt;p&gt;Makes sense.  np.&lt;/p&gt;</comment>
                            <comment id="13128200" author="mbertozzi" created="Sat, 15 Oct 2011 14:25:42 +0000"  >&lt;p&gt;patch updated for hbase trunk&lt;/p&gt;</comment>
                            <comment id="13128208" author="yuzhihong@gmail.com" created="Sat, 15 Oct 2011 14:44:11 +0000"  >&lt;p&gt;@Matteo:&lt;br/&gt;
Are you going to perform the refactoring Todd mentioned ?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="13128224" author="mbertozzi" created="Sat, 15 Oct 2011 15:45:56 +0000"  >&lt;p&gt;From 0.92 the HFile.main() contains just a call to HFilePrettyPrinter.run()&lt;br/&gt;
So there&apos;s no more the &quot;Tool&quot; code inside the HFile.java&lt;/p&gt;

&lt;p&gt;Probably was not the refactor that todd has in mind, but it solve the first todd&apos;s thought:&lt;br/&gt;
&apos;we should refactor all of the HFile &quot;Tool&quot; stuff out of HFile into a new class.&apos;&lt;/p&gt;</comment>
                            <comment id="13129035" author="tlipcon" created="Mon, 17 Oct 2011 17:50:09 +0000"  >&lt;p&gt;Thanks for updating the patch to trunk. A couple of comments (fun to look back over my own code from a few months back):&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;let&apos;s rename &lt;tt&gt;pkv&lt;/tt&gt; to &lt;tt&gt;prevKV&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;in the case of an empty HFile, we would currently throw a divide-by-zero. In LongStats.toString, we should check for count == 0 and return &quot;no data&quot; or something&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13129088" author="mbertozzi" created="Mon, 17 Oct 2011 19:04:12 +0000"  >&lt;p&gt;Currently HFilePrettyPrinter raise a couple of exceptions if the HFile is Empty, just because it doesn&apos;t check if seekTo() returns true or false, and the first call after seekTo() is a scanner.getKeyValue() so you get a NPE...&lt;/p&gt;

&lt;p&gt;I&apos;ve added a v2 patch with the pkv rename, count == 0 handled, and seekTo checked to fix the NPE.&lt;/p&gt;</comment>
                            <comment id="13132029" author="tlipcon" created="Thu, 20 Oct 2011 20:59:40 +0000"  >&lt;p&gt;+1, looks good to me. I&apos;ll commit to 92 and trunk since this won&apos;t affect stability in any way.&lt;/p&gt;</comment>
                            <comment id="13132037" author="tlipcon" created="Thu, 20 Oct 2011 21:07:18 +0000"  >&lt;p&gt;actually, looks like &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4595&quot; title=&quot;HFilePrettyPrinter Scanned kv count always 0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4595&quot;&gt;&lt;del&gt;HBASE-4595&lt;/del&gt;&lt;/a&gt; conflicts with this. Would you mind updating one last time for trunk?&lt;/p&gt;</comment>
                            <comment id="13132480" author="mbertozzi" created="Fri, 21 Oct 2011 07:15:42 +0000"  >&lt;p&gt;Added v3 that applies to trunk after &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4595&quot; title=&quot;HFilePrettyPrinter Scanned kv count always 0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4595&quot;&gt;&lt;del&gt;HBASE-4595&lt;/del&gt;&lt;/a&gt; integration.&lt;/p&gt;</comment>
                            <comment id="13132913" author="tlipcon" created="Fri, 21 Oct 2011 18:43:46 +0000"  >&lt;p&gt;Committed to trunk and 92. Thanks Matteo&lt;/p&gt;</comment>
                            <comment id="13133050" author="hudson" created="Fri, 21 Oct 2011 20:51:02 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2352 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2352/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2352/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3929&quot; title=&quot;Add option to HFile tool to produce basic stats&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3929&quot;&gt;&lt;del&gt;HBASE-3929&lt;/del&gt;&lt;/a&gt;  Add option to HFile tool to produce basic stats&lt;/p&gt;

&lt;p&gt;todd : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/io/hfile/HFilePrettyPrinter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13135115" author="hudson" created="Tue, 25 Oct 2011 14:59:56 +0000"  >&lt;p&gt;Integrated in HBase-0.92 #79 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92/79/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92/79/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3929&quot; title=&quot;Add option to HFile tool to produce basic stats&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3929&quot;&gt;&lt;del&gt;HBASE-3929&lt;/del&gt;&lt;/a&gt;  Add option to HFile tool to produce basic stats&lt;/p&gt;

&lt;p&gt;todd : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/io/hfile/HFilePrettyPrinter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15017212" author="lars_francke" created="Fri, 20 Nov 2015 12:42:17 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12494769">HBASE-3421</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12499417" name="HBASE-3929-v2.patch" size="4553" author="mbertozzi" created="Mon, 17 Oct 2011 19:00:29 +0000"/>
                            <attachment id="12500160" name="HBASE-3929-v3.patch" size="4517" author="mbertozzi" created="Fri, 21 Oct 2011 07:15:42 +0000"/>
                            <attachment id="12499143" name="hbase-3929-draft.patch" size="4423" author="mbertozzi" created="Sat, 15 Oct 2011 14:25:42 +0000"/>
                            <attachment id="12480681" name="hbase-3929-draft.txt" size="5276" author="tlipcon" created="Fri, 27 May 2011 18:31:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 27 May 2011 18:56:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33275</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hok7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>101241</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>