<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:20:39 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-4627/HBASE-4627.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-4627] Ability to specify a custom start/end to RegionSplitter</title>
                <link>https://issues.apache.org/jira/browse/HBASE-4627</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4489&quot; title=&quot;Better key splitting in RegionSplitter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4489&quot;&gt;&lt;del&gt;HBASE-4489&lt;/del&gt;&lt;/a&gt; changed the default endKey on HexStringSplit from 7FFF... to FFFF...  While this is correct, existing users of 0.90 RegionSplitter have 7FFF as the end key in their schema and the last region will not split properly under this new code.  We need to let the user specify a custom start/end key range for when situations like this arise.  Optimally, we should also write the start/end key in META so we could figure this out implicitly instead of requiring the user to explicitly specify it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12527837">HBASE-4627</key>
            <summary>Ability to specify a custom start/end to RegionSplitter</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="nspiegelberg">Nicolas Spiegelberg</assignee>
                                    <reporter username="nspiegelberg">Nicolas Spiegelberg</reporter>
                        <labels>
                    </labels>
                <created>Wed, 19 Oct 2011 21:54:43 +0000</created>
                <updated>Wed, 16 Nov 2016 20:56:52 +0000</updated>
                            <resolved>Fri, 11 Nov 2011 00:47:07 +0000</resolved>
                                    <version>0.94.0</version>
                                    <fixVersion>0.94.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13131944" author="nspiegelberg" created="Thu, 20 Oct 2011 19:42:54 +0000"  >&lt;p&gt;Found a bug in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4489&quot; title=&quot;Better key splitting in RegionSplitter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4489&quot;&gt;&lt;del&gt;HBASE-4489&lt;/del&gt;&lt;/a&gt; when working on this patch.  The last key in the split algorithm is assumed to be inclusive &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;0000&amp;quot;,&amp;quot;FFFF&amp;quot;&amp;#93;&lt;/span&gt; but we are treating it as exclusive in the split() algorithm.  This causes an off-by-one error in very granular cases such as split(&quot;0&quot;, &quot;2&quot;, 3).  Will fix that bug in this patch.&lt;/p&gt;</comment>
                            <comment id="13133215" author="phabricator@reviews.facebook.net" created="Sat, 22 Oct 2011 01:46:32 +0000"  >&lt;p&gt;nspiegelberg requested code review of &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4627&quot; title=&quot;Ability to specify a custom start/end to RegionSplitter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4627&quot;&gt;&lt;del&gt;HBASE-4627&lt;/del&gt;&lt;/a&gt; Ability to specify a custom start/end to RegionSplitter&quot;.&lt;br/&gt;
Reviewers: DUMMY_REVIEWER&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4627&quot; title=&quot;Ability to specify a custom start/end to RegionSplitter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4627&quot;&gt;&lt;del&gt;HBASE-4627&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  added a custom start/end row to RegionSplitter.  Also solved&lt;br/&gt;
  an off-by-one error because the end row is prefix-inclusive and not&lt;br/&gt;
  exclusive.&lt;/p&gt;

&lt;p&gt;  &amp;lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4489&quot; title=&quot;Better key splitting in RegionSplitter&quot;&amp;gt;&amp;lt;del&amp;gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4489&quot; title=&quot;Better key splitting in RegionSplitter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4489&quot;&gt;&lt;del&gt;HBASE-4489&lt;/del&gt;&lt;/a&gt;&amp;lt;/del&amp;gt;&amp;lt;/a&amp;gt; changed the default endKey on HexStringSplit from 7FFF... to FFFF...  While this is correct, existing users of 0.90 RegionSplitter have 7FFF as the end key in their schema and the last region will not split properly under this new code.  We need to let the user specify a custom start/end key range for when situations like this arise.  Optimally, we should also write the start/end key in META so we could figure this out implicitly instead of requiring the user to explicitly specify it.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;mvn test -Dtest=TestRegionSplitter&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;http://reviews.facebook.net/D39&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://reviews.facebook.net/D39&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/Bytes.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/RegionSplitter.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/util/TestRegionSplitter.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;http://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;http://reviews.facebook.net/herald/transcript/75/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://reviews.facebook.net/herald/transcript/75/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13141546" author="phabricator@reviews.facebook.net" created="Tue, 1 Nov 2011 20:33:33 +0000"  >&lt;p&gt;nspiegelberg has committed the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4627&quot; title=&quot;Ability to specify a custom start/end to RegionSplitter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4627&quot;&gt;&lt;del&gt;HBASE-4627&lt;/del&gt;&lt;/a&gt; Ability to specify a custom start/end to RegionSplitter&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D39&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D39&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMIT&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHBASE1196256&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHBASE1196256&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13141549" author="phabricator@reviews.facebook.net" created="Tue, 1 Nov 2011 20:33:35 +0000"  >&lt;p&gt;nspiegelberg has committed the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4627&quot; title=&quot;Ability to specify a custom start/end to RegionSplitter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4627&quot;&gt;&lt;del&gt;HBASE-4627&lt;/del&gt;&lt;/a&gt; Ability to specify a custom start/end to RegionSplitter&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D39&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D39&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMIT&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHBASE1196256&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHBASE1196256&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13141633" author="phabricator@reviews.facebook.net" created="Tue, 1 Nov 2011 21:41:32 +0000"  >&lt;p&gt;nspiegelberg has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4627&quot; title=&quot;Ability to specify a custom start/end to RegionSplitter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4627&quot;&gt;&lt;del&gt;HBASE-4627&lt;/del&gt;&lt;/a&gt; Ability to specify a custom start/end to RegionSplitter&quot;.&lt;br/&gt;
Added CCs: Karthik&lt;/p&gt;

&lt;p&gt;  @karthik can I get a review here?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D39&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D39&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMIT&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHBASE1196256&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHBASE1196256&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13141755" author="hudson" created="Tue, 1 Nov 2011 23:25:54 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2397 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2397/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2397/&lt;/a&gt;)&lt;br/&gt;
    Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4627&quot; title=&quot;Ability to specify a custom start/end to RegionSplitter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4627&quot;&gt;&lt;del&gt;HBASE-4627&lt;/del&gt;&lt;/a&gt; Ability to specify a custom start/end to RegionSplitter&quot;&lt;br/&gt;
This reverts commit r1196256.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4627&quot; title=&quot;Ability to specify a custom start/end to RegionSplitter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4627&quot;&gt;&lt;del&gt;HBASE-4627&lt;/del&gt;&lt;/a&gt; Ability to specify a custom start/end to RegionSplitter (unintended commit)&lt;/p&gt;

&lt;p&gt;nspiegelberg : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/Bytes.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/RegionSplitter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/TestRegionSplitter.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;nspiegelberg : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/Bytes.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/RegionSplitter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/TestRegionSplitter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13142600" author="phabricator@reviews.facebook.net" created="Wed, 2 Nov 2011 21:57:32 +0000"  >&lt;p&gt;Karthik has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4627&quot; title=&quot;Ability to specify a custom start/end to RegionSplitter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4627&quot;&gt;&lt;del&gt;HBASE-4627&lt;/del&gt;&lt;/a&gt; Ability to specify a custom start/end to RegionSplitter&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/Bytes.java:1371 Formatting nit:&lt;br/&gt;
  if() return null;&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/Bytes.java:1417 Trying to reason with this one - so to make it an inclusive range, we are making the delta [ (end - start)/numSplits + 1 ]. Wondering if that would always give the required number of uniform sized regions.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D39&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D39&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMITS&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHBASE1196256&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHBASE1196256&lt;/a&gt;&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHBASE1196772&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHBASE1196772&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13142621" author="phabricator@reviews.facebook.net" created="Wed, 2 Nov 2011 22:15:32 +0000"  >&lt;p&gt;nspiegelberg has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4627&quot; title=&quot;Ability to specify a custom start/end to RegionSplitter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4627&quot;&gt;&lt;del&gt;HBASE-4627&lt;/del&gt;&lt;/a&gt; Ability to specify a custom start/end to RegionSplitter&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/Bytes.java:1417 this part was very tricky to me as well.  the problem is that the region is exclusive [start,end) but the last row of the table is prefix-exclusive &lt;span class=&quot;error&quot;&gt;&amp;#91;start,prefix(end)&amp;#93;&lt;/span&gt;.  you can reason about this best with an 8-bit HexStringSplit use case&lt;/p&gt;

&lt;p&gt;      row = itoa(hash(row) % 256) + row&lt;br/&gt;
      table range = &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;00&amp;quot;, &amp;quot;FF&amp;quot;&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;      row = &quot;FFnic&quot; &amp;lt;-- should be accepted&lt;br/&gt;
      row = &quot;FGnic&quot; &amp;lt;-- should FAIL&lt;/p&gt;

&lt;p&gt;      memcmp(&quot;FF&quot;,&quot;FFnic&quot;) &amp;gt; 0&lt;br/&gt;
      memcmp(&quot;FF&quot;, &quot;FFnic&quot;, sizeof(&quot;FF&quot;)) == 0&lt;/p&gt;

&lt;p&gt;  In this case, you can split into 256 regions optimally.  So you should do:&lt;/p&gt;

&lt;p&gt;      startBI = new BigInteger(0x00) ==0&lt;br/&gt;
      stopBI = new BigInteger(0xFF) == 255&lt;br/&gt;
      diffBI = 255.substract(0)&lt;br/&gt;
      if (inclusive) &lt;/p&gt;
{ diffBI = 255 + 1 }

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D39&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D39&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMITS&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHBASE1196256&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHBASE1196256&lt;/a&gt;&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHBASE1196772&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHBASE1196772&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13142646" author="hudson" created="Wed, 2 Nov 2011 22:46:46 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2402 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2402/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2402/&lt;/a&gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4627&quot; title=&quot;Ability to specify a custom start/end to RegionSplitter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4627&quot;&gt;&lt;del&gt;HBASE-4627&lt;/del&gt;&lt;/a&gt; Ability to specify a custom start/end to RegionSplitter&lt;/p&gt;

&lt;p&gt;Summary:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4627&quot; title=&quot;Ability to specify a custom start/end to RegionSplitter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4627&quot;&gt;&lt;del&gt;HBASE-4627&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;added a custom start/end row to RegionSplitter.  Also solved&lt;br/&gt;
an off-by-one error because the end row is prefix-inclusive and not&lt;br/&gt;
exclusive.&lt;/p&gt;

&lt;p&gt;&amp;lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4489&quot; title=&quot;Better key splitting in RegionSplitter&quot;&amp;gt;&amp;lt;del&amp;gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4489&quot; title=&quot;Better key splitting in RegionSplitter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4489&quot;&gt;&lt;del&gt;HBASE-4489&lt;/del&gt;&lt;/a&gt;&amp;lt;/del&amp;gt;&amp;lt;/a&amp;gt; changed the default endKey on HexStringSplit from 7FFF... to FFFF...  While this is correct, existing users of 0.90 RegionSplitter have 7FFF as the end key in their schema and the last region will not split properly under this new code.  We need to let the user specify a custom start/end key range for when situations like this arise.  Optimally, we should also write the start/end key in META so we could figure this out implicitly instead of requiring the user to explicitly specify it.&lt;/p&gt;

&lt;p&gt;Test Plan:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;mvn test -Dtest=TestRegionSplitter&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;CC: JIRA&lt;/p&gt;

&lt;p&gt;Reviewers: DUMMY_REVIEWER&lt;/p&gt;

&lt;p&gt;Differential Revision: 39&lt;/p&gt;

&lt;p&gt;nspiegelberg : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/Bytes.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/RegionSplitter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/TestRegionSplitter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13145588" author="phabricator@reviews.facebook.net" created="Mon, 7 Nov 2011 16:18:51 +0000"  >&lt;p&gt;Karthik has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4627&quot; title=&quot;Ability to specify a custom start/end to RegionSplitter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4627&quot;&gt;&lt;del&gt;HBASE-4627&lt;/del&gt;&lt;/a&gt; Ability to specify a custom start/end to RegionSplitter&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/Bytes.java:1417 I thought of a simpler case which it seemed to not work for:&lt;/p&gt;

&lt;p&gt;  Let&apos;s take the range &lt;span class=&quot;error&quot;&gt;&amp;#91;0,10&amp;#93;&lt;/span&gt; and request 5 splits. If exclusive, we would do diffBI = (10 - 0)/5 = 2, so we get (0-2, 2-4, 4-6, 6-8, 8-10). If inclusive, diffBI would become 3, so we would get (0-3, 3-6, 6-9, 9-10) - which is 4 regions.&lt;/p&gt;

&lt;p&gt;  But if we added the 1 to the stopBI, the we would get:&lt;br/&gt;
  diffBI = (11 - 0)/5 = 2.2, which would give us 5 regions:&lt;br/&gt;
   (0-2.2, 2.2-4.4, 4.4-6.6, 6.6-8.8, 8.8-10)&lt;/p&gt;

&lt;p&gt;  So, would it not be better to do:&lt;/p&gt;

&lt;p&gt;  startBI = new BigInteger(0x00)&lt;br/&gt;
  stopBI = new BigInteger(0xFF) + 1&lt;br/&gt;
  diff BI = 255.subtract(0)&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D39&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D39&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMITS&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHBASE1196256&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHBASE1196256&lt;/a&gt;&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHBASE1196772&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHBASE1196772&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13145623" author="nspiegelberg" created="Mon, 7 Nov 2011 17:11:15 +0000"  >&lt;p&gt;note.  all the triplicate comments that you saw me delete arose from a bug in an early version of the &apos;arc&apos; client where  we added JIRA to the CC list instead of the reviewers list.  Should be fixed in future checkins.&lt;/p&gt;</comment>
                            <comment id="13145627" author="phabricator@reviews.facebook.net" created="Mon, 7 Nov 2011 17:16:51 +0000"  >&lt;p&gt;nspiegelberg has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4627&quot; title=&quot;Ability to specify a custom start/end to RegionSplitter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4627&quot;&gt;&lt;del&gt;HBASE-4627&lt;/del&gt;&lt;/a&gt; Ability to specify a custom start/end to RegionSplitter&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/Bytes.java:1417 sorry, the iterator uses intervalBI, not diffBI&lt;/p&gt;

&lt;p&gt;    for i in range(splitsBI):&lt;br/&gt;
       yield startBI + i * intervalBI&lt;/p&gt;

&lt;p&gt;  logic is still the same.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D39&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D39&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMITS&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHBASE1196256&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHBASE1196256&lt;/a&gt;&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHBASE1196772&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHBASE1196772&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13145628" author="phabricator@reviews.facebook.net" created="Mon, 7 Nov 2011 17:18:51 +0000"  >&lt;p&gt;nspiegelberg has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4627&quot; title=&quot;Ability to specify a custom start/end to RegionSplitter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4627&quot;&gt;&lt;del&gt;HBASE-4627&lt;/del&gt;&lt;/a&gt; Ability to specify a custom start/end to RegionSplitter&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/Bytes.java:1417 in your case, the algorithm would still work&lt;/p&gt;

&lt;p&gt;     diffBI = 10 - 1 + 1 = 11&lt;br/&gt;
     intervaBI = diffBi / splitBI = 11 / 5 = 2  //line #1425&lt;/p&gt;

&lt;p&gt;  The iterator basically does:&lt;/p&gt;

&lt;p&gt;     for i in range(splitsBI):&lt;br/&gt;
        yield startBI + i * diffBI&lt;/p&gt;

&lt;p&gt;  so stopBI is not used after this calculation, &amp;amp; there is no difference between mutating stopBI &amp;amp; diffBI.  I was looking for a rounding error as well while coding, but it would arise from mutating the divide op in #1425 or using stopBI for a critical calculation, not the current addition op.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D39&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D39&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMITS&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHBASE1196256&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHBASE1196256&lt;/a&gt;&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHBASE1196772&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHBASE1196772&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13148148" author="phabricator@reviews.facebook.net" created="Fri, 11 Nov 2011 00:17:51 +0000"  >&lt;p&gt;Karthik has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4627&quot; title=&quot;Ability to specify a custom start/end to RegionSplitter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4627&quot;&gt;&lt;del&gt;HBASE-4627&lt;/del&gt;&lt;/a&gt; Ability to specify a custom start/end to RegionSplitter&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/Bytes.java:1417 Ok makes sense, I got confused between diffBI and intervalBI. I know it would work as its been tested, but just wanted to understand &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D39&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D39&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMITS&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHBASE1196256&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHBASE1196256&lt;/a&gt;&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHBASE1196772&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHBASE1196772&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13148149" author="phabricator@reviews.facebook.net" created="Fri, 11 Nov 2011 00:17:51 +0000"  >&lt;p&gt;Karthik has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4627&quot; title=&quot;Ability to specify a custom start/end to RegionSplitter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4627&quot;&gt;&lt;del&gt;HBASE-4627&lt;/del&gt;&lt;/a&gt; Ability to specify a custom start/end to RegionSplitter&quot;.&lt;/p&gt;

&lt;p&gt;  I dont have an option to accept this diff &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D39&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D39&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMITS&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHBASE1196256&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHBASE1196256&lt;/a&gt;&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHBASE1196772&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHBASE1196772&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13148151" author="phabricator@reviews.facebook.net" created="Fri, 11 Nov 2011 00:21:51 +0000"  >&lt;p&gt;nspiegelberg has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4627&quot; title=&quot;Ability to specify a custom start/end to RegionSplitter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4627&quot;&gt;&lt;del&gt;HBASE-4627&lt;/del&gt;&lt;/a&gt; Ability to specify a custom start/end to RegionSplitter&quot;.&lt;/p&gt;

&lt;p&gt;  I bet you can&apos;t accept because I accidentally committed and reverted it.  No prob.  Thanks for the +1&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D39&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D39&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMITS&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHBASE1196256&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHBASE1196256&lt;/a&gt;&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHBASE1196772&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHBASE1196772&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12504211">HBASE-3778</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12524750">HBASE-4489</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12502765" name="ASF.LICENSE.NOT.GRANTED--D39.1.patch" size="30722" author="phabricator@reviews.facebook.net" created="Mon, 7 Nov 2011 16:50:52 +0000"/>
                            <attachment id="12500272" name="ASF.LICENSE.NOT.GRANTED--D39.1.patch" size="30722" author="phabricator@reviews.facebook.net" created="Sat, 22 Oct 2011 01:46:34 +0000"/>
                            <attachment id="12500271" name="ASF.LICENSE.NOT.GRANTED--D39.1.patch" size="30722" author="phabricator@reviews.facebook.net" created="Sat, 22 Oct 2011 01:46:32 +0000"/>
                            <attachment id="12503314" name="HBASE-4627.patch" size="30524" author="nspiegelberg" created="Fri, 11 Nov 2011 00:46:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 22 Oct 2011 01:46:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>92095</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 6 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08rh3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>49051</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>