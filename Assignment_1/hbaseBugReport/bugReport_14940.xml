<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:57:59 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-14940/HBASE-14940.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-14940] Make our unsafe based ops more safe</title>
                <link>https://issues.apache.org/jira/browse/HBASE-14940</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Thanks for the nice findings &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ikeda&quot; class=&quot;user-hover&quot; rel=&quot;ikeda&quot;&gt;Hiroshi Ikeda&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This jira solves 3 issues with Unsafe operations and ByteBufferUtils&lt;br/&gt;
1. We can do sun unsafe based reads and writes iff unsafe package is available and underlying platform is having unaligned-access capability. But we were missing the second check&lt;br/&gt;
2. Java NIO is doing a chunk based copy while doing Unsafe copyMemory. The max chunk size is 1 MB. This is done for &quot;A limit is imposed to allow for safepoint polling during a large copy&quot; as mentioned in comments in Bits.java.  We are also going to do same way&lt;br/&gt;
3. In ByteBufferUtils, when Unsafe is not available and ByteBuffers are off heap, we were doing byte by byte operation (read/copy). We can avoid this and do better way.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12919674">HBASE-14940</key>
            <summary>Make our unsafe based ops more safe</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="anoop.hbase">Anoop Sam John</assignee>
                                    <reporter username="anoop.hbase">Anoop Sam John</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Dec 2015 12:21:29 +0000</created>
                <updated>Tue, 20 Sep 2016 15:26:43 +0000</updated>
                            <resolved>Fri, 25 Dec 2015 05:21:05 +0000</resolved>
                                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>1.2.0</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                    <fixVersion>1.0.3</fixVersion>
                    <fixVersion>1.1.3</fixVersion>
                    <fixVersion>0.98.17</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                <comments>
                            <comment id="15045113" author="hadoopqa" created="Mon, 7 Dec 2015 15:54:46 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12776082/HBASE-14940.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12776082/HBASE-14940.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 8bf70144e40650ef972f005e2465bd0e2a087c40.&lt;br/&gt;
  ATTACHMENT ID: 12776082&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javac&lt;/font&gt;.  The applied patch generated 36 javac compiler warnings (more than the master&apos;s current 35 warnings).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;. The applied patch does not generate new checkstyle errors.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 zombies&lt;/font&gt;. No zombie tests found running at the end of the build.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16782//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16782//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16782//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16782//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16782//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16782//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16782//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16782//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15046191" author="ikeda" created="Tue, 8 Dec 2015 02:12:26 +0000"  >&lt;p&gt;If there is not unaligned capability, when the starting point to read/write is at an appropriate aligned boundary it seems possible to use Unsafe methods. It might be tedious to write such code for every method and its effect might be doubtful, but in the bulk comparison inserting fine reading until reaching an appropriate aligned boundary might be worth. In the Oracle implementation, methods to read/write a single data just use the condition &quot;unaligned&quot;, but DirectDirectBuffer.asInt/LongBuffer etc. methods also check the boundary in order to, I think, prepare effective bulk read/write.&lt;/p&gt;

&lt;p&gt;Comparison to true/false in &lt;tt&gt;if&lt;/tt&gt; conditions is confusing. It is appropriate to use the operator &quot;!&quot; instead of comparison to false.&lt;/p&gt;

&lt;p&gt;FusszyRowFilter might be appropriate to using polymorphism, making it an abstract class with a static factory method.&lt;/p&gt;</comment>
                            <comment id="15046323" author="anoop.hbase" created="Tue, 8 Dec 2015 04:22:09 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Comparison to true/false in &lt;tt&gt;if&lt;/tt&gt; conditions is confusing. It is appropriate to use the operator &quot;!&quot; instead of comparison to false.&lt;/p&gt;

&lt;p&gt;FusszyRowFilter might be appropriate to using polymorphism, making it an abstract class with a static factory method.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;All existing code.. Only change is checking whether unaligned rather than Unsafe avail..  So FusszyRowFilter  changes we can do in another IA jira.. You mind doing such cleanup?  If so pls raise a Jira.&lt;/p&gt;</comment>
                            <comment id="15048132" author="stack" created="Wed, 9 Dec 2015 06:28:07 +0000"  >&lt;p&gt;bq, if (UnsafeAccess.unaligned() == false) {&lt;/p&gt;

&lt;p&gt;The above readst wrong but my guess is that the author was trying to make a point given the odd name of the method.&lt;/p&gt;

&lt;p&gt;In unsafeCopy if len &amp;gt; UNSAFE_COPY_THRESHOLD we will call it again to finish up the copy?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ikeda&quot; class=&quot;user-hover&quot; rel=&quot;ikeda&quot;&gt;Hiroshi Ikeda&lt;/a&gt; We don&apos;t want the range checking because we think we know where we are (famous last words) and it costs. Hopefully we won&apos;t be spending too much time debugging corrupt memory reads...&lt;/p&gt;</comment>
                            <comment id="15048180" author="anoop.hbase" created="Wed, 9 Dec 2015 07:02:50 +0000"  >&lt;blockquote&gt;&lt;p&gt;In unsafeCopy if len &amp;gt; UNSAFE_COPY_THRESHOLD we will call it again to finish up the copy?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes. It will copy in chunks of max 1 MB.. Just as in java NIO package..  &lt;/p&gt;</comment>
                            <comment id="15048990" author="stack" created="Wed, 9 Dec 2015 17:14:53 +0000"  >&lt;p&gt;I&apos;m +1 on the patch.&lt;/p&gt;

&lt;p&gt;What you think &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ikeda&quot; class=&quot;user-hover&quot; rel=&quot;ikeda&quot;&gt;Hiroshi Ikeda&lt;/a&gt;? Commit this and then file new issues to probe around reads when no aligned facility and/or effects of not doing boundary checks?&lt;/p&gt;
</comment>
                            <comment id="15049943" author="ikeda" created="Thu, 10 Dec 2015 03:13:06 +0000"  >&lt;p&gt;There are risks (from the beginning) and if I were I might rewrite whole classes. As for aligned boundary checks I have second thoughts that is overdoing and it is enough to just call the corresponding API for fallback. I rather prefer to respect the decision by VM developers.&lt;/p&gt;</comment>
                            <comment id="15050224" author="ram_krish" created="Thu, 10 Dec 2015 07:06:21 +0000"  >&lt;p&gt;Regarding the COPY_THRESHOLD thing that VM does, I could see many other projects that deal with Unsafe also omits that check. Including the alignment but handles the Endian part. Just saying this for info.  So may be other code bases can also see how this can be done. But from me I feel this is ok as the alignment is handled here and if there is no alignment then we fall back to the normal way right?&lt;/p&gt;</comment>
                            <comment id="15061602" author="anoop.hbase" created="Thu, 17 Dec 2015 06:48:10 +0000"  >&lt;blockquote&gt;&lt;p&gt;There are risks (from the beginning) &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;We are adding the missing checks which NIO was doing to make use of the Unsafe. So what else you see?&lt;br/&gt;
I think we are better with this and plan to commit tonight IST. Any other improvements, we can raise follow up jiras.&lt;/p&gt;</comment>
                            <comment id="15063828" author="hadoopqa" created="Fri, 18 Dec 2015 11:09:15 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  &lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16922//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16922//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16922//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16922//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16922//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16922//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16922//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16922//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15064246" author="stack" created="Fri, 18 Dec 2015 17:16:58 +0000"  >&lt;p&gt;Is this shortened format your doing &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=busbey&quot; class=&quot;user-hover&quot; rel=&quot;busbey&quot;&gt;Sean Busbey&lt;/a&gt; ? If not, I&apos;ll dig in.&lt;/p&gt;

&lt;p&gt;Let me rerun patch...&lt;/p&gt;</comment>
                            <comment id="15064250" author="stack" created="Fri, 18 Dec 2015 17:18:24 +0000"  >&lt;p&gt;Retry&lt;/p&gt;

&lt;p&gt;I think the curtailed format is my fault. Let me fix.&lt;/p&gt;</comment>
                            <comment id="15064335" author="busbey" created="Fri, 18 Dec 2015 17:56:20 +0000"  >&lt;p&gt;the short format isn&apos;t from me, but that&apos;s how it&apos;s been showing up when the buildbot runs fall over.&lt;/p&gt;</comment>
                            <comment id="15064385" author="stack" created="Fri, 18 Dec 2015 18:13:37 +0000"  >&lt;p&gt;I filed &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15009&quot; title=&quot;Update test-patch.sh on branches; to fix curtailed build report&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15009&quot;&gt;&lt;del&gt;HBASE-15009&lt;/del&gt;&lt;/a&gt;. Some commit to test-patch on branch broke the build up of the JIRA_COMMENT variable content. I was last commit. One before mine, messed with JIRA_COMMENT. Let me just try and get it same as master branch and then you can fix it proper w/ yetus &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=busbey&quot; class=&quot;user-hover&quot; rel=&quot;busbey&quot;&gt;Sean Busbey&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15064632" author="hadoopqa" created="Fri, 18 Dec 2015 19:49:02 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  &lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16924//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16924//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16924//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16924//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16924//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16924//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16924//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16924//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15065211" author="hadoopqa" created="Sat, 19 Dec 2015 03:40:06 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12778642/HBASE-14940_branch-1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12778642/HBASE-14940_branch-1.patch&lt;/a&gt;&lt;br/&gt;
  against branch-1 branch at commit cdca22a36d0e2ec87cea732e0769c4fa4fa37e57.&lt;br/&gt;
  ATTACHMENT ID: 12778642&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javac&lt;/font&gt;.  The applied patch generated 17 javac compiler warnings (more than the master&apos;s current 15 warnings).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;. The applied patch does not generate new checkstyle errors.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 zombies&lt;/font&gt;. No zombie tests found running at the end of the build.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16936//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16936//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16936//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16936//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16936//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16936//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16936//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16936//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15065229" author="anoop.hbase" created="Sat, 19 Dec 2015 04:25:05 +0000"  >&lt;p&gt;Same branch-1 patch applies to 0.98+ versions..  I think we need this in 0.98+ versions. Any objections?&lt;/p&gt;</comment>
                            <comment id="15065310" author="stack" created="Sat, 19 Dec 2015 09:27:40 +0000"  >&lt;p&gt;Not from me.&lt;/p&gt;</comment>
                            <comment id="15066558" author="yuzhihong@gmail.com" created="Mon, 21 Dec 2015 15:21:47 +0000"  >&lt;p&gt;The code for checking unalignedness was copied from Java.&lt;/p&gt;

&lt;p&gt;This part should be rewritten using reflection due to copyright.&lt;/p&gt;</comment>
                            <comment id="15066844" author="stack" created="Mon, 21 Dec 2015 18:40:22 +0000"  >&lt;blockquote&gt;&lt;p&gt;This part should be rewritten using reflection due to copyright.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;What part? Marking unaligned dependent on arch? How would you do that one-liner with reflection? If you search this line on the web, there is at least one instance where this line has a compatible license.... &lt;/p&gt;</comment>
                            <comment id="15067501" author="anoop.hbase" created="Tue, 22 Dec 2015 03:44:24 +0000"  >&lt;p&gt;The required code is in Bits.java#unaligned()  which is a static private method. Can do reflection call on that.  As it is a private class and private method in Java in future if Java make any changes to Class name or method name or signature, we may land in issues.. That is why I decided to copy paste the code.  &lt;br/&gt;
So if there is a consensus to use Reflection based look up, I can change it.&lt;br/&gt;
Patch is committed to trunk already. I can do the needful change as addendum commit.&lt;/p&gt;</comment>
                            <comment id="15067728" author="ikeda" created="Tue, 22 Dec 2015 08:11:34 +0000"  >&lt;p&gt;That is a license issue, not a compatibility issue.&lt;/p&gt;

&lt;p&gt;The comment&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;+      // Copied from java.nio.Bits.java#unaligned&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;explicit says that, though we could say a quibble that we don&apos;t specify which Java implementation we copied the code from &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/tongue.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Copying from OpenJDK causes GPL pollution, if I&apos;m not mistaken. I&apos;m not sure about Oracle JDK.&lt;/p&gt;</comment>
                            <comment id="15069037" author="yuzhihong@gmail.com" created="Wed, 23 Dec 2015 02:14:25 +0000"  >&lt;p&gt;+1 on v2&lt;/p&gt;</comment>
                            <comment id="15069143" author="hadoopqa" created="Wed, 23 Dec 2015 04:57:22 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12779175/HBASE-14940_v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12779175/HBASE-14940_v2.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 1af98f255132ef6716a1f6ba1d8d71a36ea38840.&lt;br/&gt;
  ATTACHMENT ID: 12779175&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;. The applied patch does not generate new checkstyle errors.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 zombies&lt;/font&gt;. No zombie tests found running at the end of the build.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16987//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16987//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16987//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16987//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16987//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16987//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16987//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16987//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15070099" author="hadoopqa" created="Wed, 23 Dec 2015 19:46:52 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12779274/HBASE-14940_branch-1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12779274/HBASE-14940_branch-1.patch&lt;/a&gt;&lt;br/&gt;
  against branch-1 branch at commit e00a04df10de70b029a2d1f115f97f9d79a05c6a.&lt;br/&gt;
  ATTACHMENT ID: 12779274&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;. The applied patch does not generate new checkstyle errors.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.security.token.TestGenerateDelegationToken&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 zombies&lt;/font&gt;. No zombie tests found running at the end of the build.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16994//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16994//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16994//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16994//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16994//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16994//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16994//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16994//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15070501" author="anoop.hbase" created="Thu, 24 Dec 2015 02:22:50 +0000"  >&lt;blockquote&gt;&lt;p&gt;org.apache.hadoop.hbase.security.token.TestGenerateDelegationToken&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Test not related to this patch.&lt;/p&gt;

&lt;p&gt;Will commit to 0.98+ branches.&lt;/p&gt;</comment>
                            <comment id="15070506" author="anoop.hbase" created="Thu, 24 Dec 2015 02:32:44 +0000"  >&lt;p&gt;Pushed to 0.98+ versions. Thanks all for the reviews&lt;/p&gt;</comment>
                            <comment id="15070525" author="hudson" created="Thu, 24 Dec 2015 02:59:37 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.3-IT #402 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3-IT/402/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3-IT/402/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14940&quot; title=&quot;Make our unsafe based ops more safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14940&quot;&gt;&lt;del&gt;HBASE-14940&lt;/del&gt;&lt;/a&gt; Make our unsafe based ops more safe. (anoopsamjohn: rev 4a7565af9cf8ef7e40ef3c592d6815d1b671fb5e)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/util/UnsafeAccess.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/util/Bytes.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/FuzzyRowFilter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15070555" author="hudson" created="Thu, 24 Dec 2015 03:51:46 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.2-IT #362 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2-IT/362/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2-IT/362/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14940&quot; title=&quot;Make our unsafe based ops more safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14940&quot;&gt;&lt;del&gt;HBASE-14940&lt;/del&gt;&lt;/a&gt; Make our unsafe based ops more safe. (anoopsamjohn: rev 9b459cddb791832873cfc9f84e6dcfc0484be617)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/util/Bytes.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/util/UnsafeAccess.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/FuzzyRowFilter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15070629" author="hudson" created="Thu, 24 Dec 2015 06:16:48 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.2 #470 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2/470/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2/470/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14940&quot; title=&quot;Make our unsafe based ops more safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14940&quot;&gt;&lt;del&gt;HBASE-14940&lt;/del&gt;&lt;/a&gt; Make our unsafe based ops more safe. (anoopsamjohn: rev 9b459cddb791832873cfc9f84e6dcfc0484be617)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/FuzzyRowFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/util/Bytes.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/util/UnsafeAccess.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15070650" author="hudson" created="Thu, 24 Dec 2015 06:39:11 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.3 #466 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3/466/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3/466/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14940&quot; title=&quot;Make our unsafe based ops more safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14940&quot;&gt;&lt;del&gt;HBASE-14940&lt;/del&gt;&lt;/a&gt; Make our unsafe based ops more safe. (anoopsamjohn: rev 4a7565af9cf8ef7e40ef3c592d6815d1b671fb5e)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/FuzzyRowFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/util/UnsafeAccess.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/util/Bytes.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15070683" author="hudson" created="Thu, 24 Dec 2015 07:13:02 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.1-JDK8 #1715 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.1-JDK8/1715/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.1-JDK8/1715/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14940&quot; title=&quot;Make our unsafe based ops more safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14940&quot;&gt;&lt;del&gt;HBASE-14940&lt;/del&gt;&lt;/a&gt; Make our unsafe based ops more safe. (anoopsamjohn: rev 6b5645e37a96109c155c681b330132c74c0bd7b6)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/FuzzyRowFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/util/UnsafeAccess.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/util/Bytes.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15070712" author="hudson" created="Thu, 24 Dec 2015 07:40:52 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.1-JDK7 #1628 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.1-JDK7/1628/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.1-JDK7/1628/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14940&quot; title=&quot;Make our unsafe based ops more safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14940&quot;&gt;&lt;del&gt;HBASE-14940&lt;/del&gt;&lt;/a&gt; Make our unsafe based ops more safe. (anoopsamjohn: rev 6b5645e37a96109c155c681b330132c74c0bd7b6)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/util/UnsafeAccess.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/FuzzyRowFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/util/Bytes.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15070747" author="hudson" created="Thu, 24 Dec 2015 08:21:50 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-Trunk_matrix #583 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-Trunk_matrix/583/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-Trunk_matrix/583/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14940&quot; title=&quot;Make our unsafe based ops more safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14940&quot;&gt;&lt;del&gt;HBASE-14940&lt;/del&gt;&lt;/a&gt; Make our unsafe based ops more safe. (anoopsamjohn: rev 6fc2596ab37614fe35ccfebda0564e4721bd4b95)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/util/Bytes.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/util/ByteBufferUtils.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/nio/SingleByteBuff.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/FuzzyRowFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/util/UnsafeAccess.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15070949" author="hudson" created="Thu, 24 Dec 2015 12:18:56 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98-on-Hadoop-1.1 #1150 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/1150/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/1150/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14940&quot; title=&quot;Make our unsafe based ops more safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14940&quot;&gt;&lt;del&gt;HBASE-14940&lt;/del&gt;&lt;/a&gt; Make our unsafe based ops more safe. (anoopsamjohn: rev f39c41ffe56ae6dab80397651eb97fc5de8a9ab3)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/util/UnsafeAccess.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/util/Bytes.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/FuzzyRowFilter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15070967" author="hudson" created="Thu, 24 Dec 2015 12:53:14 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98-matrix #277 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-matrix/277/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-matrix/277/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14940&quot; title=&quot;Make our unsafe based ops more safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14940&quot;&gt;&lt;del&gt;HBASE-14940&lt;/del&gt;&lt;/a&gt; Make our unsafe based ops more safe. (anoopsamjohn: rev f39c41ffe56ae6dab80397651eb97fc5de8a9ab3)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/FuzzyRowFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/util/UnsafeAccess.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/util/Bytes.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15071128" author="stack" created="Thu, 24 Dec 2015 16:53:57 +0000"  >&lt;p&gt;It looks like below only called on instantiation of UnsafeAccess... &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
   &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (theUnsafe != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
64	      BYTE_ARRAY_BASE_OFFSET = theUnsafe.arrayBaseOffset(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[].class);	71	      BYTE_ARRAY_BASE_OFFSET = theUnsafe.arrayBaseOffset(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[].class);
72	      &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
73	        &lt;span class=&quot;code-comment&quot;&gt;// Using java.nio.Bits#unaligned() to check &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; unaligned-access capability
&lt;/span&gt;74	        &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;lt;?&amp;gt; clazz = &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.forName(&lt;span class=&quot;code-quote&quot;&gt;&quot;java.nio.Bits&quot;&lt;/span&gt;);
75	        Method m = clazz.getDeclaredMethod(&lt;span class=&quot;code-quote&quot;&gt;&quot;unaligned&quot;&lt;/span&gt;);
76	        m.setAccessible(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
77	        unaligned = (&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;) m.invoke(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
78	      } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
79	        unaligned = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
80	      }

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;i.e. we do the reflection once only?&lt;/p&gt;

&lt;p&gt;Patch seems good otherwise.&lt;/p&gt;</comment>
                            <comment id="15071135" author="hudson" created="Thu, 24 Dec 2015 17:05:04 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.0 #1127 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/1127/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.0/1127/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14940&quot; title=&quot;Make our unsafe based ops more safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14940&quot;&gt;&lt;del&gt;HBASE-14940&lt;/del&gt;&lt;/a&gt; Make our unsafe based ops more safe. (anoopsamjohn: rev 86d4e2084d354f12d21f993464f88ec286a8a594)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/filter/FuzzyRowFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/util/Bytes.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/util/UnsafeAccess.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15071256" author="lhofhansl" created="Thu, 24 Dec 2015 21:26:34 +0000"  >&lt;p&gt;Looks like this break compilation in 0.98 now:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[ERROR] /home/lars/dev/hbase-0.98/hbase-common/src/main/java/org/apache/hadoop/hbase/util/UnsafeAccess.java:[67,38] error: incompatible types: &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; cannot be converted to &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15071259" author="lhofhansl" created="Thu, 24 Dec 2015 21:34:18 +0000"  >&lt;p&gt;Must have to do with compileSource being 1.6 in 0.98, and 1.7+ everywhere else.&lt;/p&gt;</comment>
                            <comment id="15071260" author="lhofhansl" created="Thu, 24 Dec 2015 21:35:07 +0000"  >&lt;p&gt;Should we replace &lt;/p&gt;
{source}&lt;br/&gt;
unaligned = (boolean) m.invoke(null);{source}
&lt;p&gt;with&lt;/p&gt;
{source}&lt;br/&gt;
unaligned = (Boolean) m.invoke(null);{source}

&lt;p&gt;In 0.98?&lt;/p&gt;</comment>
                            <comment id="15071309" author="anoop.hbase" created="Fri, 25 Dec 2015 01:10:24 +0000"  >&lt;p&gt;Yes only at the load time of UnsafeAccess, we do make unsafe ref (if sun.Unsafe available) and then check for unalign capability.  This is same way as in java nio.&lt;/p&gt;</comment>
                            <comment id="15071311" author="stack" created="Fri, 25 Dec 2015 01:19:15 +0000"  >&lt;p&gt;Sound good &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt; if it works sir&lt;/p&gt;</comment>
                            <comment id="15071314" author="anoop.hbase" created="Fri, 25 Dec 2015 01:22:07 +0000"  >&lt;p&gt;Sorry for the trouble..  Reopen issue for the 0.98 addendum&lt;/p&gt;</comment>
                            <comment id="15071315" author="anoop.hbase" created="Fri, 25 Dec 2015 01:22:47 +0000"  >&lt;p&gt;As per Lars suggestion.&lt;/p&gt;</comment>
                            <comment id="15071358" author="lhofhansl" created="Fri, 25 Dec 2015 05:13:26 +0000"  >&lt;p&gt;+1 on addendum. I&apos;m going to commit that to 0.98.&lt;br/&gt;
(It works for me compiling with JDK 1.8.)&lt;/p&gt;</comment>
                            <comment id="15071359" author="lhofhansl" created="Fri, 25 Dec 2015 05:19:00 +0000"  >&lt;p&gt;TestFromClientSide passes. If anything was wrong this, I assume that would fail.&lt;/p&gt;</comment>
                            <comment id="15071360" author="lhofhansl" created="Fri, 25 Dec 2015 05:20:09 +0000"  >&lt;p&gt;And looks right in the debugger.&lt;/p&gt;</comment>
                            <comment id="15071674" author="hudson" created="Fri, 25 Dec 2015 17:14:41 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98-matrix #278 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-matrix/278/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-matrix/278/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14940&quot; title=&quot;Make our unsafe based ops more safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14940&quot;&gt;&lt;del&gt;HBASE-14940&lt;/del&gt;&lt;/a&gt; addendum for 0.98. (larsh: rev dbd8c94536553570e0febc77e69aa7cd93d58f1c)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/util/UnsafeAccess.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15071676" author="hudson" created="Fri, 25 Dec 2015 17:19:50 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98-on-Hadoop-1.1 #1151 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/1151/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/1151/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14940&quot; title=&quot;Make our unsafe based ops more safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14940&quot;&gt;&lt;del&gt;HBASE-14940&lt;/del&gt;&lt;/a&gt; addendum for 0.98. (larsh: rev dbd8c94536553570e0febc77e69aa7cd93d58f1c)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/util/UnsafeAccess.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15119537" author="ndimiduk" created="Wed, 27 Jan 2016 15:28:46 +0000"  >&lt;p&gt;Bulk closing 1.1.3 issues.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12724166">HBASE-11425</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12776082" name="HBASE-14940.patch" size="14890" author="anoop.hbase" created="Mon, 7 Dec 2015 12:43:53 +0000"/>
                            <attachment id="12779485" name="HBASE-14940_addendum_0.98.patch" size="715" author="anoop.hbase" created="Fri, 25 Dec 2015 01:22:47 +0000"/>
                            <attachment id="12779274" name="HBASE-14940_branch-1.patch" size="7822" author="anoop.hbase" created="Wed, 23 Dec 2015 17:18:22 +0000"/>
                            <attachment id="12778642" name="HBASE-14940_branch-1.patch" size="6630" author="stack" created="Sat, 19 Dec 2015 00:48:10 +0000"/>
                            <attachment id="12778523" name="HBASE-14940_branch-1.patch" size="6630" author="stack" created="Fri, 18 Dec 2015 17:18:24 +0000"/>
                            <attachment id="12778456" name="HBASE-14940_branch-1.patch" size="6630" author="anoop.hbase" created="Fri, 18 Dec 2015 08:54:31 +0000"/>
                            <attachment id="12779175" name="HBASE-14940_v2.patch" size="15177" author="anoop.hbase" created="Wed, 23 Dec 2015 01:43:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 7 Dec 2015 15:54:46 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            46 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2pj4n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>