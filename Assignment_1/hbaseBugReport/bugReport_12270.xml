<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:31:22 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-12270/HBASE-12270.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-12270] A bug in the bucket cache, with cache blocks on write enabled</title>
                <link>https://issues.apache.org/jira/browse/HBASE-12270</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;In my experiments, I have writers streaming their output to HBase. The reader powers a web page and does this scatter/gather, where it reads 1000 keys written last and passes them the the front end. With this workload, I get the exception below at the region server. Again, I am using HBAse (0.98.6.1). Any help is appreciated.&lt;/p&gt;

&lt;p&gt;2014-10-10 15:06:44,173 ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;B.DefaultRpcServer.handler=62,queue=2,port=60020&amp;#93;&lt;/span&gt; ipc.RpcServer: Unexpected throwable object &lt;br/&gt;
java.lang.IllegalArgumentException&lt;br/&gt;
  at java.nio.Buffer.position(Buffer.java:236)&lt;br/&gt;
 at org.apache.hadoop.hbase.util.ByteBufferUtils.skip(ByteBufferUtils.java:434)&lt;br/&gt;
      at org.apache.hadoop.hbase.io.hfile.HFileReaderV2$ScannerV2.readKeyValueLen(HFileReaderV2.java:849)&lt;br/&gt;
      at org.apache.hadoop.hbase.io.hfile.HFileReaderV2$ScannerV2.next(HFileReaderV2.java:760)&lt;br/&gt;
 at org.apache.hadoop.hbase.regionserver.StoreFileScanner.seekAtOrAfter(StoreFileScanner.java:248)&lt;br/&gt;
   at org.apache.hadoop.hbase.regionserver.StoreFileScanner.seek(StoreFileScanner.java:152)&lt;br/&gt;
      at org.apache.hadoop.hbase.regionserver.StoreScanner.seekScanners(StoreScanner.java:317)&lt;br/&gt;
 at org.apache.hadoop.hbase.regionserver.StoreScanner.&amp;lt;init&amp;gt;(StoreScanner.java:176)&lt;br/&gt;
  at org.apache.hadoop.hbase.regionserver.HStore.getScanner(HStore.java:1780)&lt;br/&gt;
  at org.apache.hadoop.hbase.regionserver.HRegion$RegionScannerImpl.&amp;lt;init&amp;gt;(HRegion.java:3758)&lt;br/&gt;
  at org.apache.hadoop.hbase.regionserver.HRegion.instantiateRegionScanner(HRegion.java:1950)&lt;br/&gt;
  at org.apache.hadoop.hbase.regionserver.HRegion.getScanner(HRegion.java:1936)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegion.getScanner(HRegion.java:1913)&lt;br/&gt;
      at org.apache.hadoop.hbase.regionserver.HRegionServer.scan(HRegionServer.java:3157)&lt;br/&gt;
      at org.apache.hadoop.hbase.protobuf.generated.ClientProtos$ClientService$2.callBlockingMethod(ClientProtos.java:29587)&lt;br/&gt;
   at org.apache.hadoop.hbase.ipc.RpcServer.call(RpcServer.java:2027)&lt;br/&gt;
    at org.apache.hadoop.hbase.ipc.CallRunner.run(CallRunner.java:108)&lt;br/&gt;
     at org.apache.hadoop.hbase.ipc.RpcExecutor.consumerLoop(RpcExecutor.java:114)&lt;br/&gt;
   at org.apache.hadoop.hbase.ipc.RpcExecutor$1.run(RpcExecutor.java:94)&lt;br/&gt;
 at java.lang.Thread.run(Thread.java:744)&lt;/p&gt;</description>
                <environment>&lt;p&gt;I can reproduce it on a simple 2 node cluster, one running the master and another running a RS. I was testing on ec2.&lt;br/&gt;
I used the following configurations for the cluster. &lt;br/&gt;
hbase-env:HBASE_REGIONSERVER_OPTS=-Xmx2G -XX:MaxDirectMemorySize=5G -XX:CMSInitiatingOccupancyFraction=88 -XX:+AggressiveOpts -verbose:gc -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -Xlog gc:/tmp/hbase-regionserver-gc.log&lt;br/&gt;
hbase-site:&lt;/p&gt;

&lt;p&gt;hbase.bucketcache.ioengine=offheap&lt;br/&gt;
hbase.bucketcache.size=4196&lt;br/&gt;
hbase.rs.cacheblocksonwrite=true&lt;br/&gt;
hfile.block.index.cacheonwrite=true&lt;br/&gt;
hfile.block.bloom.cacheonwrite=true&lt;/p&gt;</environment>
        <key id="12748323">HBASE-12270</key>
            <summary>A bug in the bucket cache, with cache blocks on write enabled</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="liushaohui">Liu Shaohui</assignee>
                                    <reporter username="kdiaa">Khaled Elmeleegy</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Oct 2014 16:42:26 +0000</created>
                <updated>Sat, 21 Feb 2015 23:49:30 +0000</updated>
                            <resolved>Thu, 15 Jan 2015 16:55:27 +0000</resolved>
                                    <version>0.94.11</version>
                    <version>0.98.6.1</version>
                                    <fixVersion>1.0.0</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>0.98.10</fixVersion>
                    <fixVersion>1.1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>19</watches>
                                                                <comments>
                            <comment id="14172569" author="kdiaa" created="Wed, 15 Oct 2014 16:43:47 +0000"  >&lt;p&gt;I am attaching simple test program to reproduce the problem. It just needs to run on a simple toy cluster with a single RS and configured as explained above.&lt;/p&gt;</comment>
                            <comment id="14173411" author="devaraj" created="Thu, 16 Oct 2014 06:00:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt;, mind taking a look at this?&lt;/p&gt;</comment>
                            <comment id="14259040" author="liushaohui" created="Fri, 26 Dec 2014 11:22:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kdiaa&quot; class=&quot;user-hover&quot; rel=&quot;kdiaa&quot;&gt;Khaled Elmeleegy&lt;/a&gt;&lt;br/&gt;
I encountered the same problem in our cluster. And I will dig into this problem.&lt;br/&gt;
Thanks for the test program you provided.&lt;/p&gt;</comment>
                            <comment id="14259050" author="ram_krish" created="Fri, 26 Dec 2014 11:55:37 +0000"  >&lt;p&gt;Even am facing issues in this area but with some more changes internally. Any leads here could be helpful. If I bump across the reason would add it to here. Thanks.&lt;/p&gt;</comment>
                            <comment id="14259128" author="liushaohui" created="Fri, 26 Dec 2014 16:10:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kdiaa&quot; class=&quot;user-hover&quot; rel=&quot;kdiaa&quot;&gt;Khaled Elmeleegy&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ram_krish&quot; class=&quot;user-hover&quot; rel=&quot;ram_krish&quot;&gt;ramkrishna.s.vasudevan&lt;/a&gt;&lt;br/&gt;
The problem is the wrong checksum header of hfile block when writing block to bucket cache on wrtiing&lt;br/&gt;
See: HFileBlock.java#1161&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    /**
     * Creates a &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HFileBlock. Checksums have already been validated, so
     * the &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; buffer passed into the constructor of &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; newly created
     * block does not have checksum data even though the header minor
     * version is MINOR_VERSION_WITH_CHECKSUM. This is indicated by setting a
     * 0 value in bytesPerChecksum.
     */
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; HFileBlock getBlockForCaching(CacheConfig cacheConf) {
      HFileContext newContext = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HFileContextBuilder()
                                .withBlockSize(fileContext.getBlocksize())
                                .withBytesPerCheckSum(0)
                                .withChecksumType(ChecksumType.NULL) &lt;span class=&quot;code-comment&quot;&gt;// no checksums in cached data
&lt;/span&gt;                                .withCompression(fileContext.getCompression())
                                .withDataBlockEncoding(fileContext.getDataBlockEncoding())
                                .withHBaseCheckSum(fileContext.isUseHBaseChecksum())
                                .withCompressTags(fileContext.isCompressTags())
                                .withIncludesMvcc(fileContext.isIncludesMvcc())
                                .withIncludesTags(fileContext.isIncludesTags())
                                .build();
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HFileBlock(blockType, getOnDiskSizeWithoutHeader(),
          getUncompressedSizeWithoutHeader(), prevOffset,
          cacheConf.shouldCacheCompressed(blockType.getCategory()) ?
            getOnDiskBufferWithHeader() :                    &amp;lt;----------------
            getUncompressedBufferWithHeader(),
          DONT_FILL_HEADER, startOffset,
          onDiskBytesWithHeader.length + onDiskChecksum.length, newContext);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The OnDiskBufferWithHeader or UncompressedBufferWithHeader has a checksum header that the checksum type is CRC32 and BytesPerCheckSum is 16k for writing block to disk.&lt;br/&gt;
Actually there is no checksum bytes in this buffer. The checksum bytes is appended to output stream in HFileBlock.java#finishBlockAndWriteHeaderAndData.&lt;/p&gt;

&lt;p&gt;So when we deserialized the block from bucket cache, there is a checksum header, but there is no checksum bytes in buffer, so we got wrong buffer limit.&lt;/p&gt;

&lt;p&gt;Simple solution to fix this bug is rewriting the header when caching block on writing.&lt;br/&gt;
Suggestions are welcomed, thx~&lt;/p&gt;
</comment>
                            <comment id="14259132" author="liushaohui" created="Fri, 26 Dec 2014 16:19:57 +0000"  >&lt;p&gt;Patch for review. &lt;br/&gt;
Tests will be added later. Thanks&lt;/p&gt;</comment>
                            <comment id="14259148" author="ram_krish" created="Fri, 26 Dec 2014 17:10:31 +0000"  >&lt;p&gt;So this happens when you have cacheOnWrite enabled?&lt;/p&gt;</comment>
                            <comment id="14259171" author="hadoopqa" created="Fri, 26 Dec 2014 18:22:58 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12689183/HBASE-12270-v1.diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12689183/HBASE-12270-v1.diff&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 30424ec73f7f100b233e27196c0a6a90abd62ad2.&lt;br/&gt;
  ATTACHMENT ID: 12689183&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12227//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12227//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12227//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12227//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12227//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12227//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12227//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12227//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12227//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12227//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12227//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12227//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12227//artifact/patchprocess/newPatchFindbugsWarningshbase-rest.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12227//artifact/patchprocess/newPatchFindbugsWarningshbase-rest.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12227//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12227//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12227//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12227//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12227//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12227//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12227//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12227//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12227//artifact/patchprocess/newPatchFindbugsWarningshbase-annotations.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12227//artifact/patchprocess/newPatchFindbugsWarningshbase-annotations.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12227//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12227//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12227//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12227//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14259446" author="stack" created="Sat, 27 Dec 2014 18:30:55 +0000"  >&lt;blockquote&gt;&lt;p&gt;So this happens when you have cacheOnWrite enabled?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;There is an issue when cacheOnWrite is enabled. It was reported a while back but I can&apos;t find by who.&lt;/p&gt;

&lt;p&gt;Nice work &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=liushaohui&quot; class=&quot;user-hover&quot; rel=&quot;liushaohui&quot;&gt;Liu Shaohui&lt;/a&gt; The patch looks good.  Any chance of a test? (I can add it if you are busy &amp;#8211; just say).&lt;/p&gt;</comment>
                            <comment id="14259758" author="anoop.hbase" created="Sun, 28 Dec 2014 23:41:26 +0000"  >&lt;p&gt;With this patch, the issues u face is getting solved &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ram_krish&quot; class=&quot;user-hover&quot; rel=&quot;ram_krish&quot;&gt;ramkrishna.s.vasudevan&lt;/a&gt;?  Changes looks reasonable.&lt;/p&gt;</comment>
                            <comment id="14259765" author="kdiaa" created="Mon, 29 Dec 2014 00:05:41 +0000"  >&lt;p&gt;Thanks guys &amp;#8211; much appreciated.&amp;gt; Date: Sun, 28 Dec 2014 23:42:13 +0000&lt;/p&gt;
</comment>
                            <comment id="14259835" author="ram_krish" created="Mon, 29 Dec 2014 04:26:08 +0000"  >&lt;p&gt;I think mine was not due to this and only due to internal changes as did not have cache on write.&lt;/p&gt;</comment>
                            <comment id="14261109" author="liushaohui" created="Tue, 30 Dec 2014 14:07:22 +0000"  >&lt;p&gt;Add tests for caching block on write with different block caches.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;&lt;br/&gt;
Add more tests if you wish. Thanks&lt;/p&gt;</comment>
                            <comment id="14261203" author="hadoopqa" created="Tue, 30 Dec 2014 16:06:34 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12689504/HBASE-12270-v2.diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12689504/HBASE-12270-v2.diff&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 0513a21dc8b86f57b5a6c1b742904821632f77f7.&lt;br/&gt;
  ATTACHMENT ID: 12689504&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 1 zombie test(s): 	at org.apache.sling.commons.testing.integration.SlingIntegrationTestClient.createNode(SlingIntegrationTestClient.java:186)&lt;br/&gt;
	at org.apache.sling.commons.testing.integration.SlingIntegrationTestClient.createNode(SlingIntegrationTestClient.java:119)&lt;br/&gt;
	at org.apache.sling.commons.testing.integration.SlingIntegrationTestClient.createNode(SlingIntegrationTestClient.java:109)&lt;br/&gt;
	at org.apache.sling.commons.testing.integration.HttpTestBase.slingServerReady(HttpTestBase.java:274)&lt;br/&gt;
	at org.apache.sling.commons.testing.integration.HttpTestBase.waitForSlingStartup(HttpTestBase.java:226)&lt;br/&gt;
	at org.apache.sling.commons.testing.integration.HttpTestBase.setUp(HttpTestBase.java:163)&lt;br/&gt;
	at org.apache.sling.launchpad.webapp.integrationtest.indexing.FullTextIndexingTest.setUp(FullTextIndexingTest.java:87)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12260//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12260//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12260//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12260//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12260//artifact/patchprocess/newPatchFindbugsWarningshbase-annotations.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12260//artifact/patchprocess/newPatchFindbugsWarningshbase-annotations.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12260//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12260//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12260//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12260//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12260//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12260//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12260//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12260//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12260//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12260//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12260//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12260//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12260//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12260//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12260//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12260//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12260//artifact/patchprocess/newPatchFindbugsWarningshbase-rest.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12260//artifact/patchprocess/newPatchFindbugsWarningshbase-rest.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12260//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12260//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12260//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12260//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14261214" author="stack" created="Tue, 30 Dec 2014 16:25:54 +0000"  >&lt;p&gt;Zombie found tests from other projects.  Retry.&lt;/p&gt;</comment>
                            <comment id="14261239" author="yuzhihong@gmail.com" created="Tue, 30 Dec 2014 16:50:31 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14261324" author="hadoopqa" created="Tue, 30 Dec 2014 18:25:42 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12689525/HBASE-12270-v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12689525/HBASE-12270-v2.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 0513a21dc8b86f57b5a6c1b742904821632f77f7.&lt;br/&gt;
  ATTACHMENT ID: 12689525&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12262//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12262//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12262//artifact/patchprocess/newPatchFindbugsWarningshbase-rest.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12262//artifact/patchprocess/newPatchFindbugsWarningshbase-rest.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12262//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12262//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12262//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12262//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12262//artifact/patchprocess/newPatchFindbugsWarningshbase-annotations.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12262//artifact/patchprocess/newPatchFindbugsWarningshbase-annotations.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12262//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12262//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12262//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12262//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12262//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12262//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12262//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12262//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12262//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12262//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12262//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12262//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12262//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12262//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12262//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12262//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12262//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12262//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14261587" author="stack" created="Tue, 30 Dec 2014 22:45:58 +0000"  >&lt;p&gt;Pushed to 0.98+.  Thanks for the nice patch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=liushaohui&quot; class=&quot;user-hover&quot; rel=&quot;liushaohui&quot;&gt;Liu Shaohui&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14261633" author="hudson" created="Tue, 30 Dec 2014 23:20:59 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98-on-Hadoop-1.1 #733 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/733/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/733/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12270&quot; title=&quot;A bug in the bucket cache, with cache blocks on write enabled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12270&quot;&gt;&lt;del&gt;HBASE-12270&lt;/del&gt;&lt;/a&gt; A bug in the bucket cache, with cache blocks on write enabled (Liu Shaohui) (stack: rev 809de6ae1ca68caf5c0c614e3e1776ad082514f0)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestCacheOnWrite.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlock.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14261649" author="hudson" created="Tue, 30 Dec 2014 23:30:28 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98 #768 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/768/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/768/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12270&quot; title=&quot;A bug in the bucket cache, with cache blocks on write enabled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12270&quot;&gt;&lt;del&gt;HBASE-12270&lt;/del&gt;&lt;/a&gt; A bug in the bucket cache, with cache blocks on write enabled (Liu Shaohui) (stack: rev 809de6ae1ca68caf5c0c614e3e1776ad082514f0)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlock.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestCacheOnWrite.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14261662" author="apurtell" created="Tue, 30 Dec 2014 23:43:30 +0000"  >&lt;p&gt;This broke the 0.98 build&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; COMPILATION ERROR : &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; -------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/HBase-0.98-on-Hadoop-1.1/hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestCacheOnWrite.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;224,8&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
symbol  : constructor CacheConfig(org.apache.hadoop.hbase.io.hfile.BlockCache,boolean,boolean,boolean,boolean,boolean,boolean,boolean,boolean,boolean)&lt;br/&gt;
location: class org.apache.hadoop.abase.io.hfile.CacheConfig&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; 1 error&lt;/p&gt;
</comment>
                            <comment id="14261668" author="stack" created="Tue, 30 Dec 2014 23:49:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt; yessir, but I thought I&apos;d fixed it already...&lt;/p&gt;

&lt;p&gt;commit 99acd66a95257424f13839effa0d6cf18d34b95f&lt;br/&gt;
Author: stack &amp;lt;stack@apache.org&amp;gt;&lt;br/&gt;
Date:   Tue Dec 30 15:29:57 2014 -0800&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12270&quot; title=&quot;A bug in the bucket cache, with cache blocks on write enabled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12270&quot;&gt;&lt;del&gt;HBASE-12270&lt;/del&gt;&lt;/a&gt; A bug in the bucket cache, with cache blocks on write enabled (Liu Shaohui) &amp;#8211; ADDENDUM&lt;/p&gt;</comment>
                            <comment id="14261706" author="apurtell" created="Wed, 31 Dec 2014 00:22:15 +0000"  >&lt;p&gt;I see. JIRA email is behind, I&apos;m on a mobile device. Let me close this when the build with the addendum posts. Thanks for the quick fix &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="14261715" author="hudson" created="Wed, 31 Dec 2014 00:25:29 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #5980 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/5980/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/5980/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12270&quot; title=&quot;A bug in the bucket cache, with cache blocks on write enabled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12270&quot;&gt;&lt;del&gt;HBASE-12270&lt;/del&gt;&lt;/a&gt; A bug in the bucket cache, with cache blocks on write enabled (Liu Shaohui) (stack: rev 305267b8e2c68b6103eb389587394d19d2be3e82)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlock.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestCacheOnWrite.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14261740" author="hudson" created="Wed, 31 Dec 2014 00:46:17 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.1 #38 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.1/38/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.1/38/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12270&quot; title=&quot;A bug in the bucket cache, with cache blocks on write enabled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12270&quot;&gt;&lt;del&gt;HBASE-12270&lt;/del&gt;&lt;/a&gt; A bug in the bucket cache, with cache blocks on write enabled (Liu Shaohui) (stack: rev 2ff16e532bbb6b2af308bad727a9813d1c5e3c90)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestCacheOnWrite.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlock.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14261760" author="hudson" created="Wed, 31 Dec 2014 01:15:56 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.0 #622 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/622/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.0/622/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12270&quot; title=&quot;A bug in the bucket cache, with cache blocks on write enabled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12270&quot;&gt;&lt;del&gt;HBASE-12270&lt;/del&gt;&lt;/a&gt; A bug in the bucket cache, with cache blocks on write enabled (Liu Shaohui) (stack: rev dd566e03475567b4351d4e81b4f049161699a152)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlock.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestCacheOnWrite.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14261776" author="hudson" created="Wed, 31 Dec 2014 01:35:25 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98 #769 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/769/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/769/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12270&quot; title=&quot;A bug in the bucket cache, with cache blocks on write enabled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12270&quot;&gt;&lt;del&gt;HBASE-12270&lt;/del&gt;&lt;/a&gt; A bug in the bucket cache, with cache blocks on write enabled (Liu Shaohui) &amp;#8211; ADDENDUM (stack: rev 99acd66a95257424f13839effa0d6cf18d34b95f)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestCacheOnWrite.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14261815" author="liushaohui" created="Wed, 31 Dec 2014 02:33:57 +0000"  >&lt;p&gt;Sorry for the patch make the build of trunk and 0.98 failed.&lt;br/&gt;
I will fix the TestCacheOnWrite today.&lt;/p&gt;</comment>
                            <comment id="14261820" author="hudson" created="Wed, 31 Dec 2014 02:39:25 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98-on-Hadoop-1.1 #734 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/734/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/734/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12270&quot; title=&quot;A bug in the bucket cache, with cache blocks on write enabled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12270&quot;&gt;&lt;del&gt;HBASE-12270&lt;/del&gt;&lt;/a&gt; A bug in the bucket cache, with cache blocks on write enabled (Liu Shaohui) &amp;#8211; ADDENDUM (stack: rev 99acd66a95257424f13839effa0d6cf18d34b95f)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestCacheOnWrite.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14261836" author="apurtell" created="Wed, 31 Dec 2014 02:56:47 +0000"  >&lt;p&gt;Something weird happened with TestReplicationEndpoint in the build where the addendum went in but it could be spurious and the compile problem is definitely fixed. &lt;/p&gt;</comment>
                            <comment id="14261950" author="stack" created="Wed, 31 Dec 2014 05:42:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=liushaohui&quot; class=&quot;user-hover&quot; rel=&quot;liushaohui&quot;&gt;Liu Shaohui&lt;/a&gt; Thanks.&lt;/p&gt;</comment>
                            <comment id="14262087" author="liushaohui" created="Wed, 31 Dec 2014 10:31:05 +0000"  >&lt;p&gt;It&apos;s weird that the build of trunk and 0.98 passed in later builds, but the HBase-0.98-on-Hadoop-1.1 still failed.&lt;br/&gt;
I will dig into it in later days.&lt;br/&gt;
Happy New Year!&lt;/p&gt;</comment>
                            <comment id="14262273" author="stack" created="Wed, 31 Dec 2014 16:03:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=liushaohui&quot; class=&quot;user-hover&quot; rel=&quot;liushaohui&quot;&gt;Liu Shaohui&lt;/a&gt; Thank you.  Happy New Year to you too!&lt;/p&gt;</comment>
                            <comment id="14263086" author="apurtell" created="Fri, 2 Jan 2015 17:57:05 +0000"  >&lt;p&gt;TestCacheOnWrite has been failing in 0.98 builds since &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/737/testReport/org.apache.hadoop.hbase.io.hfile/TestCacheOnWrite/testStoreFileCacheOnWrite_105_/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/737/testReport/org.apache.hadoop.hbase.io.hfile/TestCacheOnWrite/testStoreFileCacheOnWrite_105_/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please fix or revert this change. &lt;/p&gt;</comment>
                            <comment id="14263228" author="hudson" created="Fri, 2 Jan 2015 20:52:30 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.98-on-Hadoop-1.1 #738 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/738/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/738/&lt;/a&gt;)&lt;br/&gt;
Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12270&quot; title=&quot;A bug in the bucket cache, with cache blocks on write enabled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12270&quot;&gt;&lt;del&gt;HBASE-12270&lt;/del&gt;&lt;/a&gt; A bug in the bucket cache, with cache blocks on write enabled (Liu Shaohui) &amp;#8211; ADDENDUM&quot; (stack: rev bb7074b3d83a87b1e0dd4c8cfe0702e621f23ea6)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestCacheOnWrite.java&lt;br/&gt;
Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12270&quot; title=&quot;A bug in the bucket cache, with cache blocks on write enabled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12270&quot;&gt;&lt;del&gt;HBASE-12270&lt;/del&gt;&lt;/a&gt; A bug in the bucket cache, with cache blocks on write enabled (Liu Shaohui)&quot; (stack: rev 9b25e850df5b915305194e21ae4a47d0ab029034)&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlock.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestCacheOnWrite.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14263231" author="hudson" created="Fri, 2 Jan 2015 20:58:23 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98 #774 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/774/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/774/&lt;/a&gt;)&lt;br/&gt;
Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12270&quot; title=&quot;A bug in the bucket cache, with cache blocks on write enabled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12270&quot;&gt;&lt;del&gt;HBASE-12270&lt;/del&gt;&lt;/a&gt; A bug in the bucket cache, with cache blocks on write enabled (Liu Shaohui) &amp;#8211; ADDENDUM&quot; (stack: rev bb7074b3d83a87b1e0dd4c8cfe0702e621f23ea6)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestCacheOnWrite.java&lt;br/&gt;
Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12270&quot; title=&quot;A bug in the bucket cache, with cache blocks on write enabled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12270&quot;&gt;&lt;del&gt;HBASE-12270&lt;/del&gt;&lt;/a&gt; A bug in the bucket cache, with cache blocks on write enabled (Liu Shaohui)&quot; (stack: rev 9b25e850df5b915305194e21ae4a47d0ab029034)&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlock.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestCacheOnWrite.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14263246" author="apurtell" created="Fri, 2 Jan 2015 21:28:02 +0000"  >&lt;p&gt;Thanks, after the revert the 0.98-on-Hadoop-1 build is blue again: &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/738/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/738/&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;If we can fix the test, let&apos;s try this again. &lt;/p&gt;
</comment>
                            <comment id="14263248" author="stack" created="Fri, 2 Jan 2015 21:33:19 +0000"  >&lt;p&gt;Was watching the builds and I reverted from 0.98 only this morning since it is having most trouble here. Was unable to fill in the issue because JIRA seemed down.  Will put it back later after we figure the issue. Sorry about that &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14263366" author="yuzhihong@gmail.com" created="Sat, 3 Jan 2015 01:23:56 +0000"  >&lt;p&gt;Test failed in the following builds as well:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
https:&lt;span class=&quot;code-comment&quot;&gt;//builds.apache.org/job/HBase-1.1/41/testReport/org.apache.hadoop.hbase.io.hfile/TestCacheOnWrite/testStoreFileCacheOnWrite_80_/
&lt;/span&gt;https:&lt;span class=&quot;code-comment&quot;&gt;//builds.apache.org/job/HBase-TRUNK/5983/testReport/junit/org.apache.hadoop.hbase.io.hfile/TestCacheOnWrite/testStoreFileCacheOnWrite_95_/&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14263583" author="stack" created="Sat, 3 Jan 2015 17:45:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ted_yu&quot; class=&quot;user-hover&quot; rel=&quot;ted_yu&quot;&gt;Ted Yu&lt;/a&gt; The fails are obviously being tracked yet you feel the need to add a totally useless dup of info already freely available up on our build box? You are adding no value.&lt;/p&gt;</comment>
                            <comment id="14264149" author="apurtell" created="Mon, 5 Jan 2015 02:52:04 +0000"  >&lt;p&gt;I&apos;m aiming for 0.98.10 RC on Jan 12. If we can get a stable test in 0.98 branch before then that would be fantastic, or we should move this out to .11. Let me know.&lt;/p&gt;</comment>
                            <comment id="14270245" author="stack" created="Thu, 8 Jan 2015 23:57:05 +0000"  >&lt;p&gt;Update. Failure is rare. Hasn&apos;t happened on branch-1.0 in recent history that I know of. Hasn&apos;t happened on branch-1 in 5 days since &lt;a href=&quot;https://builds.apache.org/view/H-L/view/HBase/job/HBase-1.1/51/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/view/H-L/view/HBase/job/HBase-1.1/51/&lt;/a&gt;. Happened two days ago on trunk, &lt;a href=&quot;https://builds.apache.org/view/H-L/view/HBase/job/HBase-TRUNK/5996/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/view/H-L/view/HBase/job/HBase-TRUNK/5996/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Not critical to fix for 1.0?&lt;/p&gt;</comment>
                            <comment id="14270424" author="liushaohui" created="Fri, 9 Jan 2015 02:19:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;&lt;br/&gt;
Sorry for bringing this weird problem.&lt;br/&gt;
I rerun the test for more than 10 times in 98 branch yesterday and did reproduce the failed test.&lt;br/&gt;
I will try it again today.&lt;/p&gt;</comment>
                            <comment id="14271025" author="liushaohui" created="Fri, 9 Jan 2015 13:43:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Update the patch for 0.98.&lt;/p&gt;

&lt;p&gt;The cache data write in bucket cache is asynchronous and the bucket cache will abandon the data to cache if the write queue is full. For we use the disk as bucket cache in the test, the write of data will be slow, which may make the queue is full and data are not cached in the bucket cache.&lt;/p&gt;

&lt;p&gt;Changes: enlarge the write thread number and write queue size.&lt;/p&gt;

&lt;p&gt;Please help to trigger the ci test for 0.98 and 0.98-on-Hadoop-1.1. Thanks~&lt;/p&gt;

&lt;p&gt;PS: Using MockedBucketCache with wait_when_cache=true is another option, but the DEFAULT_CACHE_WAIT_TIME (50ms) is too small.&lt;/p&gt;
</comment>
                            <comment id="14271524" author="apurtell" created="Fri, 9 Jan 2015 16:51:54 +0000"  >&lt;p&gt;Thanks for digging in &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=liushaohui&quot; class=&quot;user-hover&quot; rel=&quot;liushaohui&quot;&gt;Liu Shaohui&lt;/a&gt;. We need to check the change in to get a CI build for 0.98 and 0.98-on-Hadoop-1. I&apos;ll do this today and let&apos;s see the result. &lt;/p&gt;</comment>
                            <comment id="14272049" author="apurtell" created="Fri, 9 Jan 2015 23:15:33 +0000"  >&lt;p&gt;I applied the patch and looped the test 10 times locally. On the 4th execution the test failed:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running org.apache.hadoop.hbase.io.hfile.TestCacheOnWrite
Tests run: 216, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 245.764 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.hadoop.hbase.io.hfile.TestCacheOnWrite
testStoreFileCacheOnWrite[105](org.apache.hadoop.hbase.io.hfile.TestCacheOnWrite)  Time elapsed: 1.297 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
java.lang.AssertionError: shouldBeCached: true
isCached: false
Test description: [cacheOnWrite=INDEX_BLOCKS, compress=GZ, encoderType=NO_BLOCK_ENCODING, cacheCompressedData=true, blockCache=BucketCache]
block: HFileBlock [ fileOffset=24571 headerSize()=33 blockType=LEAF_INDEX onDiskSizeWithoutHeader=172 uncompressedSizeWithoutHeader=538 prevBlockOffset=12147 isUseHBaseChecksum()=true checksumType=NULL bytesPerChecksum=512 onDiskDataSizeWithHeader=201 getOnDiskSizeWithHeader()=205 totalChecksumBytes()=4 isUnpacked()=true buf=[ java.nio.HeapByteBuffer[pos=0 lim=575 cap=608], array().length=608, arrayOffset()=0 ] dataBeginsWith=\x00\x00\x00\x09\x00\x00\x00\x00\x00\x00\x004\x00\x00\x00l\x00\x00\x00\xA0\x00\x00\x00\xD8\x00\x00\x01\x10\x00\x00\x01G fileContext=HFileContext [ usesHBaseChecksum=true checksumType=NULL bytesPerChecksum=512 blocksize=65536 encoding=NONE includesMvcc=true includesTags=true compressAlgo=NONE compressTags=false cryptoContext=[ cipher=NONE keyHash=NONE ] ] ]
encodingInCache: NONE
blockCacheKey: dc6d2a06579e4da4b49ac8575ea3e90a_24571
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.assertTrue(Assert.java:41)
	at org.apache.hadoop.hbase.io.hfile.TestCacheOnWrite.readStoreFile(TestCacheOnWrite.java:283)
	at org.apache.hadoop.hbase.io.hfile.TestCacheOnWrite.testStoreFileCacheOnWriteInternals(TestCacheOnWrite.java:242)
	at org.apache.hadoop.hbase.io.hfile.TestCacheOnWrite.testStoreFileCacheOnWrite(TestCacheOnWrite.java:237)


Results :

Failed tests: 
  TestCacheOnWrite.testStoreFileCacheOnWrite:237-&amp;gt;testStoreFileCacheOnWriteInternals:242-&amp;gt;readStoreFile:283 shouldBeCached: true
isCached: false
Test description: [cacheOnWrite=INDEX_BLOCKS, compress=GZ, encoderType=NO_BLOCK_ENCODING, cacheCompressedData=true, blockCache=BucketCache]
block: HFileBlock [ fileOffset=24571 headerSize()=33 blockType=LEAF_INDEX onDiskSizeWithoutHeader=172 uncompressedSizeWithoutHeader=538 prevBlockOffset=12147 isUseHBaseChecksum()=true checksumType=NULL bytesPerChecksum=512 onDiskDataSizeWithHeader=201 getOnDiskSizeWithHeader()=205 totalChecksumBytes()=4 isUnpacked()=true buf=[ java.nio.HeapByteBuffer[pos=0 lim=575 cap=608], array().length=608, arrayOffset()=0 ] dataBeginsWith=\x00\x00\x00\x09\x00\x00\x00\x00\x00\x00\x004\x00\x00\x00l\x00\x00\x00\xA0\x00\x00\x00\xD8\x00\x00\x01\x10\x00\x00\x01G fileContext=HFileContext [ usesHBaseChecksum=true checksumType=NULL bytesPerChecksum=512 blocksize=65536 encoding=NONE includesMvcc=true includesTags=true compressAlgo=NONE compressTags=false cryptoContext=[ cipher=NONE keyHash=NONE ] ] ]
encodingInCache: NONE
blockCacheKey: dc6d2a06579e4da4b49ac8575ea3e90a_24571

Tests run: 216, Failures: 1, Errors: 0, Skipped: 0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14278406" author="liushaohui" created="Thu, 15 Jan 2015 08:05:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;&lt;br/&gt;
Sorry for late rely.&lt;br/&gt;
In patch v2, set the write queue of bucket cache big enough for caching all the block in the queue. Please kindly help to test in your env , for I can produce the failure in my dev machine. Thanks.&lt;/p&gt;
</comment>
                            <comment id="14278937" author="apurtell" created="Thu, 15 Jan 2015 16:55:27 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=liushaohui&quot; class=&quot;user-hover&quot; rel=&quot;liushaohui&quot;&gt;Liu Shaohui&lt;/a&gt;. This time the test passed locally 10 of 10 times. I pushed the v2 0.98 patch. Since I think 0.98 branch was the last pending commit I have resolved this issue.&lt;/p&gt;</comment>
                            <comment id="14279160" author="hudson" created="Thu, 15 Jan 2015 19:24:42 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.98 #799 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/799/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/799/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12270&quot; title=&quot;A bug in the bucket cache, with cache blocks on write enabled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12270&quot;&gt;&lt;del&gt;HBASE-12270&lt;/del&gt;&lt;/a&gt; A bug in the bucket cache, with cache blocks on write enabled (Liu Shaohui) (apurtell: rev 6314063e7475e9863806b7fba92304ca54083ab6)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlock.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestCacheOnWrite.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14279212" author="hudson" created="Thu, 15 Jan 2015 19:54:55 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.98-on-Hadoop-1.1 #762 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/762/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/762/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12270&quot; title=&quot;A bug in the bucket cache, with cache blocks on write enabled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12270&quot;&gt;&lt;del&gt;HBASE-12270&lt;/del&gt;&lt;/a&gt; A bug in the bucket cache, with cache blocks on write enabled (Liu Shaohui) (apurtell: rev 6314063e7475e9863806b7fba92304ca54083ab6)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestCacheOnWrite.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlock.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14331847" author="enis" created="Sat, 21 Feb 2015 23:49:30 +0000"  >&lt;p&gt;Closing this issue after 1.0.0 release.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12756307">HBASE-12531</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12691138" name="HBASE-12270-0.98-v1.diff" size="7357" author="liushaohui" created="Fri, 9 Jan 2015 13:43:50 +0000"/>
                            <attachment id="12692473" name="HBASE-12270-0.98-v2.diff" size="7357" author="liushaohui" created="Thu, 15 Jan 2015 08:05:07 +0000"/>
                            <attachment id="12689183" name="HBASE-12270-v1.diff" size="1632" author="liushaohui" created="Fri, 26 Dec 2014 16:19:57 +0000"/>
                            <attachment id="12689504" name="HBASE-12270-v2.diff" size="7070" author="liushaohui" created="Tue, 30 Dec 2014 14:07:22 +0000"/>
                            <attachment id="12689525" name="HBASE-12270-v2.patch" size="7070" author="stack" created="Tue, 30 Dec 2014 16:25:54 +0000"/>
                            <attachment id="12675037" name="TestHBase.java" size="9794" author="kdiaa" created="Wed, 15 Oct 2014 16:45:12 +0000"/>
                            <attachment id="12675036" name="TestKey.java" size="203" author="kdiaa" created="Wed, 15 Oct 2014 16:45:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 16 Oct 2014 06:00:45 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i217bb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>