<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:33:14 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6039/HBASE-6039.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6039] Remove HMasterInterface and replace with something similar to RegionServerStatusProtocol</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6039</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Me: Once everything in HMasterInterface is converted to use PB, we can either declare a new class for the representation (similar to RegionServerStatusProtocol) or just re-purpose HMasterInterface for that. What is your preference?&lt;/p&gt;

&lt;p&gt;Stack: Lets do what Jimmy did, make a new class and kill the old.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12556282">HBASE-6039</key>
            <summary>Remove HMasterInterface and replace with something similar to RegionServerStatusProtocol</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gchanan">Gregory Chanan</assignee>
                                    <reporter username="gchanan">Gregory Chanan</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 May 2012 19:27:16 +0000</created>
                <updated>Mon, 23 Sep 2013 18:31:39 +0000</updated>
                            <resolved>Tue, 3 Jul 2012 20:29:46 +0000</resolved>
                                                    <fixVersion>0.95.0</fixVersion>
                                    <component>IPC/RPC</component>
                    <component>master</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13278143" author="apurtell" created="Thu, 17 May 2012 19:34:28 +0000"  >&lt;p&gt;While you&apos;re in this area, currently if you have set up security and have enabled Hadoop service authorization, there is only one ACL that grants permission to HMasterInterface, however clients will want to access a subset of it for listing tables. We should separate truly administrative methods to another interface and separately protect it.&lt;/p&gt;</comment>
                            <comment id="13278151" author="gchanan" created="Thu, 17 May 2012 19:39:40 +0000"  >&lt;p&gt;@Andrew:&lt;/p&gt;

&lt;p&gt;sounds good to me.&lt;/p&gt;</comment>
                            <comment id="13398971" author="gchanan" created="Thu, 21 Jun 2012 23:01:40 +0000"  >&lt;p&gt;Here&apos;s my idea for a breakdown into two protocols: Administrative and Monitoring.  Below lists the functions for each.  Any comments welcome.&lt;/p&gt;

&lt;p&gt;Administrative Master Actions (MasterAdminProtocol):&lt;br/&gt;
addColumn&lt;br/&gt;
modifyColumn&lt;br/&gt;
deleteColumn&lt;br/&gt;
offlineRegion&lt;br/&gt;
assignRegion&lt;br/&gt;
unassignRegion&lt;br/&gt;
moveRegion&lt;br/&gt;
createTable&lt;br/&gt;
deleteTable&lt;br/&gt;
disableTable&lt;br/&gt;
modifyTable&lt;br/&gt;
enableTable&lt;br/&gt;
shutdown&lt;br/&gt;
stopMaster&lt;br/&gt;
balance&lt;br/&gt;
setBalancerRunning&lt;/p&gt;

&lt;p&gt;Monitoring Master Actions (MasterMonitorProtocol):&lt;br/&gt;
isMasterRunning&lt;br/&gt;
getSchemaAlterStatus&lt;br/&gt;
getClusterStatus&lt;br/&gt;
getTableDescriptors&lt;/p&gt;</comment>
                            <comment id="13403649" author="gchanan" created="Fri, 29 Jun 2012 01:42:02 +0000"  >&lt;p&gt;Not sure if the review board stuff shows up anymore; I put a review up at:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/5652/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/5652/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13403654" author="hadoopqa" created="Fri, 29 Jun 2012 02:02:23 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12533922/HBASE-6039.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12533922/HBASE-6039.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 6 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2289//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2289//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2289//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2289//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2289//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2289//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2289//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2289//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13405329" author="stack" created="Mon, 2 Jul 2012 21:10:02 +0000"  >&lt;p&gt;I added comments up on RB Gregory.  Good work.&lt;/p&gt;</comment>
                            <comment id="13406001" author="gchanan" created="Tue, 3 Jul 2012 20:19:19 +0000"  >&lt;ul&gt;
	&lt;li&gt;Attached &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6039&quot; title=&quot;Remove HMasterInterface and replace with something similar to RegionServerStatusProtocol&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6039&quot;&gt;&lt;del&gt;HBASE-6039&lt;/del&gt;&lt;/a&gt;-v2.patch *&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Matches reviewboard.&lt;/p&gt;</comment>
                            <comment id="13406005" author="stack" created="Tue, 3 Jul 2012 20:29:46 +0000"  >&lt;p&gt;Committed to trunk.  Thanks for the fat patch Gregory.&lt;/p&gt;</comment>
                            <comment id="13406179" author="hudson" created="Tue, 3 Jul 2012 23:49:48 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3094 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3094/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3094/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6039&quot; title=&quot;Remove HMasterInterface and replace with something similar to RegionServerStatusProtocol&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6039&quot;&gt;&lt;del&gt;HBASE-6039&lt;/del&gt;&lt;/a&gt; Remove HMasterInterface and replace with something similar to RegionServerStatusProtocol (Revision 1356920)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/MasterAdminProtocol.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/MasterMonitorProtocol.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/MasterProtocol.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/client/HBaseAdmin.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/client/HConnection.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/client/MasterAdminKeepAliveConnection.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/client/MasterKeepAliveConnection.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/client/MasterMonitorKeepAliveConnection.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/io/HbaseObjectWritable.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/ipc/HBaseRpcMetrics.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/ipc/HMasterInterface.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/ipc/Invocation.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/protobuf/generated/MasterAdminProtos.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/protobuf/generated/MasterMonitorProtos.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/protobuf/generated/MasterProtos.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/security/HBasePolicyProvider.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/protobuf/Master.proto&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/protobuf/MasterAdmin.proto&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/protobuf/MasterMonitor.proto&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestHMasterRPCException.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestServerCustomProtocol.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13540649" author="stack" created="Fri, 28 Dec 2012 23:59:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gchanan&quot; class=&quot;user-hover&quot; rel=&quot;gchanan&quot;&gt;Gregory Chanan&lt;/a&gt; Was wondering why you implemented BlockingInterface in the below G:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; MasterProtocol &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; VersionedProtocol, MasterService.BlockingInterface {
+
+  /**
+   * @param c Unused (set to &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;).
+   * @param req IsMasterRunningRequest
+   * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; IsMasterRunningRequest that contains:&amp;lt;br&amp;gt;
+   * isMasterRunning: &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; master is available
+   * @&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; ServiceException
+   */
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; IsMasterRunningResponse isMasterRunning(RpcController c, IsMasterRunningRequest req)
+  &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; ServiceException;
+}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Also, why if we are implementing BlockingInterface, would you include here the isMasterRunning method since it is back in BlockingInterface anyways, right?&lt;/p&gt;

&lt;p&gt;I&apos;m trying to figure out if any particular reason for the protocol definitions we have.  Above we have mention of RpcController but everywhere it comes up we just null it out.  Was it just there transitionally or did you find you needed it?  (Sorry to be asking this long after commit).  Thanks.&lt;/p&gt;</comment>
                            <comment id="13540692" author="gchanan" created="Sat, 29 Dec 2012 00:53:42 +0000"  >&lt;p&gt;Are you interested in MasterProtocol in particular or the general structure of the above, which is present in MasterMonitorProtocol, AdminProtocol, etc?  I&apos;m going to answer in general; MasterProtocol in particular is explained on the reviewboard: &lt;a href=&quot;https://reviews.apache.org/r/5652/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/5652/&lt;/a&gt; (See: &quot;MasterProtocol is a subset of whats possible?  Its just the basic version and is master running?&quot;).&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Was wondering why you implemented BlockingInterface in the below G:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;I&apos;m trying to figure out if any particular reason for the protocol definitions we have. Above we have mention of RpcController but everywhere it comes up we just null it out. Was it just there transitionally or did you find you needed it? (Sorry to be asking this long after commit). Thanks.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It&apos;s just to use the function definitions that protobuf generates from the &quot;service&quot; declaration in the .proto files.  That way the rpc structure (function name, return and param types) are defined in the proto files.  We don&apos;t need RpcController; protobuf just generates it that way.  Certainly for our purposes we could just write our own; not sure if that would make clients in other languages more difficult to write.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;Also, why if we are implementing BlockingInterface, would you include here the isMasterRunning method since it is back in BlockingInterface anyways, right?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;It&apos;s just to have a javadoc comment associated with the function because you can&apos;t force protobuf to generate them.&lt;/p&gt;</comment>
                            <comment id="13775507" author="stack" created="Mon, 23 Sep 2013 18:31:39 +0000"  >&lt;p&gt;Marking closed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                                                <inwardlinks description="is required by">
                                        <issuelink>
            <issuekey id="12543623">HBASE-5445</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12534967" name="HBASE-6039-v2.patch" size="1598385" author="gchanan" created="Tue, 3 Jul 2012 20:19:19 +0000"/>
                            <attachment id="12533922" name="HBASE-6039.patch" size="1598157" author="gchanan" created="Fri, 29 Jun 2012 01:42:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 17 May 2012 19:34:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>256524</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hug7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>102195</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>