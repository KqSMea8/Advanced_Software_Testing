<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:48:28 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-888/HBASE-888.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-888] NPE in HLog.append -&gt; DroppedSnapshotException causes hosed regionserver</title>
                <link>https://issues.apache.org/jira/browse/HBASE-888</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Might be related to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-644&quot; title=&quot;DroppedSnapshotException but RegionServer doesn&amp;#39;t restart&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-644&quot;&gt;&lt;del&gt;HBASE-644&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;

&lt;p&gt;In my regionserver log I see this:&lt;/p&gt;

&lt;p&gt;2008-09-17 21:36:06,335 INFO org.apache.hadoop.ipc.Server: IPC Server handler 3 on 60020, call batchUpdate([B@ff0be7b, row =&amp;gt; Sn5MiT-wIYUoud4gqyj0r-==, &lt;/p&gt;
{column =&amp;gt; anchor:anchor_text, value =&amp;gt; &apos;...&apos;}
&lt;p&gt;) f&lt;br/&gt;
rom 208.76.44.97:41671: error: java.io.IOException: java.lang.NullPointerException&lt;br/&gt;
java.io.IOException: java.lang.NullPointerException&lt;br/&gt;
        at org.apache.hadoop.io.SequenceFile$Writer.checkAndWriteSync(SequenceFile.java:970)&lt;br/&gt;
        at org.apache.hadoop.io.SequenceFile$Writer.append(SequenceFile.java:1012)&lt;br/&gt;
        at org.apache.hadoop.io.SequenceFile$Writer.append(SequenceFile.java:979)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HLog.append(HLog.java:395)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegion.update(HRegion.java:1631)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegion.batchUpdate(HRegion.java:1417)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegionServer.batchUpdate(HRegionServer.java:1145)&lt;br/&gt;
        at sun.reflect.GeneratedMethodAccessor24.invoke(Unknown Source)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Unknown Source)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.HbaseRPC$Server.call(HbaseRPC.java:473)&lt;br/&gt;
        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:888)&lt;br/&gt;
2008-09-17 21:36:06,336 WARN org.apache.hadoop.ipc.Server: IPC Server Responder, call batchUpdate([B@ff0be7b, row =&amp;gt; Sn5MiT-wIYUoud4gqyj0r-==, &lt;/p&gt;
{column =&amp;gt; anchor:anchor_text, value =&amp;gt; &apos;...&apos;}
&lt;p&gt;) from x.x.44.97:41671: output error&lt;br/&gt;
2008-09-17 21:36:06,336 INFO org.apache.hadoop.ipc.Server: IPC Server handler 3 on 60020 caught: java.nio.channels.ClosedChannelException&lt;br/&gt;
        at sun.nio.ch.SocketChannelImpl.ensureWriteOpen(Unknown Source)&lt;br/&gt;
        at sun.nio.ch.SocketChannelImpl.write(Unknown Source)&lt;br/&gt;
        at org.apache.hadoop.ipc.Server$Responder.processResponse(Server.java:587)&lt;br/&gt;
        at org.apache.hadoop.ipc.Server$Responder.doRespond(Server.java:651)&lt;br/&gt;
        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:909)&lt;/p&gt;

&lt;p&gt;2008-09-17 21:36:06,336 INFO org.apache.hadoop.ipc.Server: IPC Server handler 3 on 60020: exiting&lt;br/&gt;
2008-09-17 21:37:06,312 FATAL org.apache.hadoop.hbase.regionserver.Flusher: Replay of hlog required. Forcing server restart&lt;br/&gt;
org.apache.hadoop.hbase.DroppedSnapshotException: region: enwiki3,4m7aFqMi8ijHEpBxTuzP3k==,1221687099180&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegion.internalFlushcache(HRegion.java:1079)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegion.flushcache(HRegion.java:977)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.Flusher.flushRegion(Flusher.java:174)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.Flusher.flushSomeRegions(Flusher.java:268)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.Flusher.reclaimMemcacheMemory(Flusher.java:253)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegionServer.batchUpdate(HRegionServer.java:1144)&lt;br/&gt;
        at sun.reflect.GeneratedMethodAccessor24.invoke(Unknown Source)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Unknown Source)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.HbaseRPC$Server.call(HbaseRPC.java:473)&lt;br/&gt;
        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:888)&lt;br/&gt;
Caused by: java.io.IOException: Call failed on local exception&lt;br/&gt;
        at org.apache.hadoop.ipc.Client.call(Client.java:718)&lt;br/&gt;
        at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:216)&lt;br/&gt;
        at org.apache.hadoop.dfs.$Proxy1.getFileInfo(Unknown Source)&lt;br/&gt;
        at sun.reflect.GeneratedMethodAccessor2.invoke(Unknown Source)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Unknown Source)&lt;br/&gt;
        at org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:82)&lt;br/&gt;
        at org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:59)&lt;br/&gt;
        at org.apache.hadoop.dfs.$Proxy1.getFileInfo(Unknown Source)&lt;br/&gt;
        at org.apache.hadoop.dfs.DFSClient.getFileInfo(DFSClient.java:566)&lt;br/&gt;
        at org.apache.hadoop.dfs.DistributedFileSystem.getFileStatus(DistributedFileSystem.java:390)&lt;br/&gt;
        at org.apache.hadoop.fs.FileSystem.exists(FileSystem.java:667)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HStoreFile.&amp;lt;init&amp;gt;(HStoreFile.java:149)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HStore.internalFlushCache(HStore.java:591)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HStore.flushCache(HStore.java:569)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegion.internalFlushcache(HRegion.java:1066)&lt;br/&gt;
        ... 10 more&lt;br/&gt;
Caused by: java.nio.channels.ClosedByInterruptException&lt;br/&gt;
        at java.nio.channels.spi.AbstractInterruptibleChannel.end(Unknown Source)&lt;br/&gt;
        at sun.nio.ch.SocketChannelImpl.write(Unknown Source)&lt;br/&gt;
        at org.apache.hadoop.net.SocketOutputStream$Writer.performIO(SocketOutputStream.java:55)&lt;br/&gt;
        at org.apache.hadoop.net.SocketIOWithTimeout.doIO(SocketIOWithTimeout.java:140)&lt;br/&gt;
        at org.apache.hadoop.net.SocketOutputStream.write(SocketOutputStream.java:146)&lt;br/&gt;
        at org.apache.hadoop.net.SocketOutputStream.write(SocketOutputStream.java:107)&lt;br/&gt;
        at java.io.BufferedOutputStream.flushBuffer(Unknown Source)&lt;br/&gt;
        at java.io.BufferedOutputStream.flush(Unknown Source)&lt;br/&gt;
        at java.io.DataOutputStream.flush(Unknown Source)&lt;br/&gt;
        at org.apache.hadoop.ipc.Client$Connection.sendParam(Client.java:478)&lt;br/&gt;
        at org.apache.hadoop.ipc.Client.call(Client.java:705)&lt;br/&gt;
        ... 25 more&lt;br/&gt;
2008-09-17 21:37:06,339 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: coral-dfs.cluster.powerset.com/208.76.44.135:10000. Already tried 0 time(s).&lt;br/&gt;
2008-09-17 21:37:06,346 INFO org.apache.hadoop.ipc.Server: IPC Server handler 2 on 60020, call batchUpdate([B@52fac63b, row =&amp;gt; 6PceOtjHe-VpiGbS5DZgMV==, &lt;/p&gt;
{column =&amp;gt; [..], value =&amp;gt; &apos;...&apos;}
&lt;p&gt;) from x.x.44.96:44885: error: java.io.IOException: Cannot append; log is closed&lt;br/&gt;
java.io.IOException: Cannot append; log is closed&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HLog.append(HLog.java:376)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegion.update(HRegion.java:1631)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegion.batchUpdate(HRegion.java:1417)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegionServer.batchUpdate(HRegionServer.java:1145)&lt;br/&gt;
        at sun.reflect.GeneratedMethodAccessor24.invoke(Unknown Source)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Unknown Source)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.HbaseRPC$Server.call(HbaseRPC.java:473)&lt;br/&gt;
        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:888)&lt;br/&gt;
2008-09-17 21:37:06,346 WARN org.apache.hadoop.ipc.Server: IPC Server Responder, call batchUpdate([B@52fac63b, row =&amp;gt; 6PceOtjHe-VpiGbS5DZgMV==, &lt;/p&gt;
{column =&amp;gt; [...], value =&amp;gt; &apos;...&apos;}
&lt;p&gt;) from 208.76.44.96:44885: output error&lt;br/&gt;
2008-09-17 21:37:06,346 INFO org.apache.hadoop.ipc.Server: IPC Server handler 2 on 60020 caught: java.nio.channels.ClosedChannelException&lt;br/&gt;
        at sun.nio.ch.SocketChannelImpl.ensureWriteOpen(Unknown Source)&lt;br/&gt;
        at sun.nio.ch.SocketChannelImpl.write(Unknown Source)&lt;br/&gt;
        at org.apache.hadoop.ipc.Server$Responder.processResponse(Server.java:587)&lt;br/&gt;
        at org.apache.hadoop.ipc.Server$Responder.doRespond(Server.java:651)&lt;br/&gt;
        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:909)&lt;/p&gt;

&lt;p&gt;2008-09-17 21:37:06,346 INFO org.apache.hadoop.ipc.Server: IPC Server handler 2 on 60020: exiting&lt;br/&gt;
2008-09-17 21:37:54,491 INFO org.apache.hadoop.hbase.regionserver.HRegionServer: Scanner 3236781325465377548 lease expired&lt;br/&gt;
2008-09-17 21:37:54,492 DEBUG org.apache.hadoop.hbase.regionserver.HRegion: No more active scanners for region enwiki,MHw740LAdNxzM68Dn7LXs-==,1220059653599&lt;br/&gt;
2008-09-17 21:37:54,492 DEBUG org.apache.hadoop.hbase.regionserver.HRegion: Updates disabled for region enwiki,MHw740LAdNxzM68Dn7LXs-==,1220059653599&lt;br/&gt;
2008-09-17 21:37:54,492 DEBUG org.apache.hadoop.hbase.regionserver.HRegion: No more row locks outstanding on region enwiki,MHw740LAdNxzM68Dn7LXs-==,1220059653599&lt;br/&gt;
2008-09-17 21:37:54,492 DEBUG org.apache.hadoop.hbase.regionserver.HStore: closed 370784783/anchor&lt;br/&gt;
2008-09-17 21:37:54,493 DEBUG org.apache.hadoop.hbase.regionserver.HStore: closed 370784783/misc&lt;br/&gt;
2008-09-17 21:37:54,493 DEBUG org.apache.hadoop.hbase.regionserver.HStore: closed 370784783/alternate_title&lt;br/&gt;
2008-09-17 21:37:54,493 DEBUG org.apache.hadoop.hbase.regionserver.HStore: closed 370784783/page&lt;br/&gt;
2008-09-17 21:37:54,493 DEBUG org.apache.hadoop.hbase.regionserver.HStore: closed 370784783/alternate_url&lt;br/&gt;
2008-09-17 21:37:54,493 INFO org.apache.hadoop.hbase.regionserver.HRegion: closed enwiki,MHw740LAdNxzM68Dn7LXs-==,1220059653599&lt;br/&gt;
2008-09-17 21:37:54,493 INFO org.apache.hadoop.hbase.regionserver.HRegionServer: worker thread exiting&lt;br/&gt;
2008-09-17 21:38:07,581 FATAL org.apache.hadoop.hbase.regionserver.HRegionServer: Shutting down HRegionServer: file system not available&lt;br/&gt;
java.io.IOException: File system is not available&lt;br/&gt;
        at org.apache.hadoop.hbase.util.FSUtils.checkFileSystemAvailable(FSUtils.java:82)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegionServer.checkFileSystem(HRegionServer.java:1484)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegionServer.batchUpdate(HRegionServer.java:1150)&lt;br/&gt;
        at sun.reflect.GeneratedMethodAccessor24.invoke(Unknown Source)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Unknown Source)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.HbaseRPC$Server.call(HbaseRPC.java:473)&lt;br/&gt;
        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:888)&lt;br/&gt;
Caused by: java.io.IOException: Call failed on local exception&lt;br/&gt;
        at org.apache.hadoop.ipc.Client.call(Client.java:718)&lt;br/&gt;
        at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:216)&lt;br/&gt;
        at org.apache.hadoop.dfs.$Proxy1.getFileInfo(Unknown Source)&lt;br/&gt;
        at sun.reflect.GeneratedMethodAccessor2.invoke(Unknown Source)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Unknown Source)&lt;br/&gt;
        at org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:82)&lt;br/&gt;
        at org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:59)&lt;br/&gt;
        at org.apache.hadoop.dfs.$Proxy1.getFileInfo(Unknown Source)&lt;br/&gt;
        at org.apache.hadoop.dfs.DFSClient.getFileInfo(DFSClient.java:566)&lt;br/&gt;
        at org.apache.hadoop.dfs.DistributedFileSystem.getFileStatus(DistributedFileSystem.java:390)&lt;br/&gt;
        at org.apache.hadoop.fs.FileSystem.exists(FileSystem.java:667)&lt;br/&gt;
        at org.apache.hadoop.hbase.util.FSUtils.checkFileSystemAvailable(FSUtils.java:69)&lt;br/&gt;
        ... 7 more&lt;br/&gt;
:&lt;/p&gt;


&lt;p&gt;The result is that every call to the regionserver hangs because the regionserver can&apos;t touch the DFS, because the DFSClient is closed.  The regionserver won&apos;t restart either.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12404578">HBASE-888</key>
            <summary>NPE in HLog.append -&gt; DroppedSnapshotException causes hosed regionserver</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="jimk">Jim Kellerman</assignee>
                                    <reporter username="bien">Michael Bieniosek</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Sep 2008 21:45:38 +0000</created>
                <updated>Sat, 7 Mar 2009 18:09:55 +0000</updated>
                            <resolved>Sat, 7 Mar 2009 18:09:55 +0000</resolved>
                                    <version>0.2.1</version>
                                                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12679901" author="jimk" created="Sat, 7 Mar 2009 18:09:55 +0000"  >&lt;p&gt;Resolving as cannot reproduce because there have been no other occurrences of this issue reported since it was first opened over 5 months ago.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 7 Mar 2009 18:09:55 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25458</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 41 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ha2f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98893</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>