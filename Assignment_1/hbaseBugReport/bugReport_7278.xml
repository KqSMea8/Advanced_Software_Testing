<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:44:14 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-7278/HBASE-7278.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-7278] Some bugs of HTableDesciptor</title>
                <link>https://issues.apache.org/jira/browse/HBASE-7278</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;There are some bugs of the class HTableDescriptor.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; HTableDescriptor(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; [] name) {
    &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;();
    setMetaFlags(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.name);
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.name = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.isMetaRegion()? name: isLegalTableName(name);
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.nameAsString = Bytes.toString(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.name);
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I think &quot;setMetaFlags(this.name)&quot; should be &quot;setMetaFlags(name)&quot;.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  /**
   * Check passed &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; buffer, &lt;span class=&quot;code-quote&quot;&gt;&quot;tableName&quot;&lt;/span&gt;, is legal user-space table name.
   * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Returns passed &amp;lt;code&amp;gt;tableName&amp;lt;/code&amp;gt; param
   * @&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; NullPointerException If passed &amp;lt;code&amp;gt;tableName&amp;lt;/code&amp;gt; is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
   * @&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IllegalArgumentException &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; passed a tableName
   * that is made of other than &apos;word&apos; characters or underscores: i.e.
   * &amp;lt;code&amp;gt;[a-zA-Z_0-9].
   */
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; [] isLegalTableName(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; [] tableName) {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (tableName == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || tableName.length &amp;lt;= 0) {
      &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IllegalArgumentException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Name is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; or empty&quot;&lt;/span&gt;);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The implementation is against the contract of throwing NullPointerException.&lt;br/&gt;
I&apos;m not sure the contract is wrong or the implementation is wrong.&lt;br/&gt;
Also the contract of throwing IllegalArgumentException is a little different from the actual implementation, and in general we must actually call this method and catch IllegalArgumentException in order to know whether the given name can be used as a table name.&lt;/p&gt;


&lt;p&gt;I feel HTableDescriptor allows itself to be in invalid states, and I cannot fix the class well.&lt;br/&gt;
I think we should start to remove implementing WritableComparable, but it might greatly break the compatibility.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12618819">HBASE-7278</key>
            <summary>Some bugs of HTableDesciptor</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ikeda">Hiroshi Ikeda</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Dec 2012 03:00:10 +0000</created>
                <updated>Fri, 24 May 2013 08:23:25 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13510263" author="ikeda" created="Wed, 5 Dec 2012 04:26:20 +0000"  >&lt;p&gt;This class meaninglessly uses synchronized and volatile. But removing them might wake up potential bugs somewhere.&lt;/p&gt;

&lt;p&gt;Some of the methods return unmodifiable collection views, while the methods&apos; contracts say the return collection is immutable.&lt;br/&gt;
I don&apos;t sure which is wrong, the contract or the implementation.&lt;br/&gt;
In order to keep the compatibility, we should keep the contract and create a new collection and wrap it by Collections.unmodifiable*.&lt;/p&gt;</comment>
                            <comment id="13510268" author="stack" created="Wed, 5 Dec 2012 04:33:06 +0000"  >&lt;p&gt;Thanks for the review Hiroshi.  These look like legit issues that you&apos;ve turned up.  Thanks.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I think we should start to remove implementing WritableComparable, but it might greatly break the compatibility.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That is ok for trunk.&lt;/p&gt;

&lt;p&gt;We are moving to protobuf and stripping Writables in trunk (including WritableComparable which maybe just becomes Comparable?  Depends on context).&lt;/p&gt;
</comment>
                            <comment id="13510272" author="ikeda" created="Wed, 5 Dec 2012 04:41:42 +0000"  >&lt;p&gt;The constructors HTableDescriptor(String name) and HTableDescriptor(byte[] name) reject invalid user-space table name, but you can set any table name via setName(byte[] name). That seems a bug, but I&apos;m not sure whether this class only uses the tables which are acceptable by the constructors and we can change the spec of setName().&lt;/p&gt;</comment>
                            <comment id="13510289" author="stack" created="Wed, 5 Dec 2012 05:34:01 +0000"  >&lt;p&gt;We should remove setName.  It makes not sense doing a setTable name on an HTD post construction I&apos;d say.&lt;/p&gt;</comment>
                            <comment id="13666100" author="samar" created="Fri, 24 May 2013 08:23:25 +0000"  >&lt;p&gt;can we create a seperate jira to remove setName(byte[] name)? &lt;/p&gt;

&lt;p&gt;isLegalTableName() since its returning what is passed we can name it something like void validateTableName(), where we would not expect anything in return but will do all the checks as already implemented&lt;/p&gt;

</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 5 Dec 2012 04:33:06 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>296067</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 30 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1450v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>232277</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>