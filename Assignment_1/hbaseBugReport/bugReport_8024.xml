<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:51:20 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-8024/HBASE-8024.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-8024] Make Store flush algorithm pluggable</title>
                <link>https://issues.apache.org/jira/browse/HBASE-8024</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The idea is to make &quot;StoreFlusher&quot; an interface instead of an implementation class, and have the original StoreFlusher as the default store flush impl.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12635792">HBASE-8024</key>
            <summary>Make Store flush algorithm pluggable</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12634347">HBASE-7949</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sershe">Sergey Shelukhin</assignee>
                                    <reporter username="maryannxue">Maryann Xue</reporter>
                        <labels>
                    </labels>
                <created>Thu, 7 Mar 2013 14:16:56 +0000</created>
                <updated>Mon, 23 Sep 2013 19:08:37 +0000</updated>
                            <resolved>Fri, 26 Apr 2013 02:55:34 +0000</resolved>
                                    <version>0.94.5</version>
                    <version>0.95.0</version>
                    <version>0.95.2</version>
                                    <fixVersion>0.95.1</fixVersion>
                                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>13</watches>
                                                                <comments>
                            <comment id="13598651" author="apurtell" created="Mon, 11 Mar 2013 08:50:57 +0000"  >&lt;p&gt;Do you think we can get this into trunk/0.95 in time for 0.96 &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maryannxue&quot; class=&quot;user-hover&quot; rel=&quot;maryannxue&quot;&gt;Maryann Xue&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="13599815" author="maryannxue" created="Tue, 12 Mar 2013 08:12:41 +0000"  >&lt;p&gt;Andy, any planned date for 0.96? I will submit a patch soon anyway &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13602773" author="apurtell" created="Thu, 14 Mar 2013 21:21:01 +0000"  >&lt;p&gt;There is no planned date for 0.96 yet. However we will be producing one or more developer preview drops from the 0.95 branch soon. Would be good to get this into one of those for trying it out. &lt;/p&gt;</comment>
                            <comment id="13607412" author="maryannxue" created="Wed, 20 Mar 2013 08:53:55 +0000"  >&lt;p&gt;Changes: &lt;br/&gt;
1. Remove the orignal internal class HStore$StoreFlusherImpl&lt;br/&gt;
2. Create class DefaultStoreFlusher which implements StoreFlusher&lt;br/&gt;
3. Move all implementation of flushCache from HStore to DefaultStoreFlusher&lt;br/&gt;
4. Add method createStoreFlusher in StoreEngine&lt;/p&gt;</comment>
                            <comment id="13607889" author="sershe" created="Wed, 20 Mar 2013 17:28:04 +0000"  >&lt;p&gt;Can you please post review on the /r/?&lt;/p&gt;</comment>
                            <comment id="13607924" author="yuzhihong@gmail.com" created="Wed, 20 Mar 2013 17:59:28 +0000"  >&lt;p&gt;@Maryann:&lt;br/&gt;
According to &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4913/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4913/console&lt;/a&gt; , there seems to be compilation error.&lt;/p&gt;</comment>
                            <comment id="13608077" author="sershe" created="Wed, 20 Mar 2013 19:46:53 +0000"  >&lt;p&gt;DefaultStoreFlusher seems to be missing from the patch.&lt;br/&gt;
Need to see it to comment more &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;So far:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;// Add new file to store files.  Clear snapshot too while we have&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;// the Store write lock.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;There&apos;s no lock... probably needs documentation if it has to be held?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;+      super(cacheFlushId, conf, store);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;+    }    &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;nit: whitespace, elsewhere too&lt;/p&gt;</comment>
                            <comment id="13608591" author="maryannxue" created="Thu, 21 Mar 2013 03:48:34 +0000"  >&lt;p&gt;Yes, one file missing in the patch. Sorry for the mistake&lt;/p&gt;</comment>
                            <comment id="13608593" author="maryannxue" created="Thu, 21 Mar 2013 03:51:14 +0000"  >&lt;p&gt;@sergey it was simply copy&amp;amp;paste from the original inner class impl. so i update the code comment along in this patch?&lt;/p&gt;</comment>
                            <comment id="13608618" author="hadoopqa" created="Thu, 21 Mar 2013 04:23:38 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12574715/HBASE-8024.v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12574715/HBASE-8024.v2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.io.TestHeapSize&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4933//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4933//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4933//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4933//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4933//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4933//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4933//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4933//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4933//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4933//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4933//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4933//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4933//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4933//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4933//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4933//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4933//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4933//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4933//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4933//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13609103" author="yuzhihong@gmail.com" created="Thu, 21 Mar 2013 16:42:27 +0000"  >&lt;p&gt;Javadoc doesn&apos;t match actual parameter list:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+   * @param path The pathname of the tmp file into which the store was flushed
+   * @param logCacheFlushId
+   * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; StoreFile created.
+   * @&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException
+   */
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; StoreFile commitStoreFile(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Path path,
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+ * Default implementation of StoreFlusher.
+ */
+&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; class DefaultStoreFlusher &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; StoreFlusher {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Add annotation for audience.&lt;/p&gt;</comment>
                            <comment id="13609415" author="sershe" created="Thu, 21 Mar 2013 20:20:10 +0000"  >
&lt;blockquote&gt;&lt;p&gt;if (DefaultStoreFlusher.flush_retries_number == 0) &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Configuration can be different for each store, statics may not be good.&lt;/p&gt;

&lt;p&gt;storeFile field on flusher is set and used only in commit(), is the field needed?&lt;/p&gt;

&lt;p&gt;Overall, I wonder if there&apos;s better way to abstract flusher interface. &lt;br/&gt;
First, it would be nice if there&apos;d be single flusher per store, like with compactor or policy. Only about half of the things in flusher now are not the same for every flush against a store, they could be passed in as FlushRequest or whatever.&lt;br/&gt;
Then, what&apos;s the story for code reuse for different flushers. What parts will they replace and reuse, and how? Do you have example flusher?&lt;br/&gt;
Then (related to the first), for example, commit() does a sequence of Store operations and only contributes one path to it (and snapshot, which it got from store before). Maybe string/snapshot should be passed to store instead, if this behavior is common between flushers. Similar bits in internalFlushCache to a lesser degree.&lt;/p&gt;</comment>
                            <comment id="13609428" author="yuzhihong@gmail.com" created="Thu, 21 Mar 2013 20:28:12 +0000"  >&lt;blockquote&gt;&lt;p&gt;Do you have example flusher?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This is a good question.&lt;br/&gt;
From the presentation at HBase User Group, I think there is already another implementation.&lt;/p&gt;

&lt;p&gt;Showing that implementation would help us understand the use case.&lt;/p&gt;</comment>
                            <comment id="13609857" author="maryannxue" created="Fri, 22 Mar 2013 03:24:42 +0000"  >&lt;p&gt;@Sergey, thank you for the ideas! these are very good suggestions. I will reorganize the relationship between flusher, flushrequest and store, optimally making one flusher per store with different flushrequests each time.&lt;/p&gt;

&lt;p&gt;the motivation is to enable our LOB implementation as a plug-in to HBase core. we already have customization on compactions, now with custom flush, we can write LOB data in independent HFiles.&lt;br/&gt;
the requirement of our use case for customized flush is simple, which only adds a few lines into internalFlushCache(). but i totally agree with you on having something more flexible into this patch.&lt;/p&gt;

&lt;p&gt;@Ted, thank you for the comments! will cleanup documentation accordingly.&lt;/p&gt;</comment>
                            <comment id="13613389" author="sershe" created="Tue, 26 Mar 2013 01:41:37 +0000"  >&lt;p&gt;For the example flusher, can we see it? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I.e. to see how it plugs in/reuses code.&lt;/p&gt;</comment>
                            <comment id="13615013" author="maryannxue" created="Wed, 27 Mar 2013 08:13:45 +0000"  >&lt;p&gt;Modification of HStore#internalFlushCache() for our LOB use case:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; Path internalFlushCacheToBlobStore(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; SortedSet&amp;lt;KeyValue&amp;gt; set,
      &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; logCacheFlushId,
      TimeRangeTracker snapshotTimeRangeTracker,
      AtomicLong flushedSize,
      MonitoredTask status)
      &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    StoreFile.Writer writer;
    
    &lt;span class=&quot;code-comment&quot;&gt;// Find the smallest read point across all the Scanners.
&lt;/span&gt;    &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; smallestReadPoint = region.getSmallestReadPoint();
    &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; flushed = 0;
    Path referenceFilePath = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
    Path blobFilePath = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
    &lt;span class=&quot;code-comment&quot;&gt;// Don&apos;t flush &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; there are no entries.
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (set.size() == 0) {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
    }
    Scan scan = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Scan();
    scan.setMaxVersions(scanInfo.getMaxVersions());
    &lt;span class=&quot;code-comment&quot;&gt;// Use a store scanner to find which rows to flush.
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// Note that we need to retain deletes, hence
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// treat &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; as a minor compaction.
&lt;/span&gt;    InternalScanner scanner = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StoreScanner(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;, scan, Collections
        .singletonList(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CollectionBackedScanner(set, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.comparator)),
        ScanType.MINOR_COMPACT, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.region.getSmallestReadPoint(),
        HConstants.OLDEST_TIMESTAMP);
    
    BlobStore blobStore = BlobStoreManager.getInstance().getBlobStore(getTableName(), family.getNameAsString());
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; == blobStore) {
      blobStore = BlobStoreManager.getInstance().createBlobStore(getTableName(), family);
    }
    
    StoreFile.Writer blobWriter = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      &lt;span class=&quot;code-comment&quot;&gt;// TODO:  We can fail in the below block before we complete adding &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;
&lt;/span&gt;      &lt;span class=&quot;code-comment&quot;&gt;// flush to list of store files.  Add cleanup of anything put on filesystem
&lt;/span&gt;      &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; we fail.
&lt;/span&gt;      &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; (flushLock) {
        status.setStatus(&lt;span class=&quot;code-quote&quot;&gt;&quot;Flushing &quot;&lt;/span&gt; + &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; + &lt;span class=&quot;code-quote&quot;&gt;&quot;: creating writer&quot;&lt;/span&gt;);
        
        &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; referenceKeyValueCount = set.size();
        &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; blobKeyValueCount = 0;
        
        &lt;span class=&quot;code-comment&quot;&gt;// A. Write the map out to the disk
&lt;/span&gt;        writer = createWriterInTmp(referenceKeyValueCount);
        writer.setTimeRangeTracker(snapshotTimeRangeTracker);
        referenceFilePath = writer.getPath();
        
        Iterator&amp;lt;KeyValue&amp;gt; iter = set.iterator();
        
        &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt;(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; != iter &amp;amp;&amp;amp; iter.hasNext()) {
          &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (iter.next().getType() == KeyValue.Type.Put.getCode()) {
            blobKeyValueCount++;
          }
        }
        
        blobWriter = blobStore.createWriterInTmp(blobKeyValueCount, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.compression, 
            region.getRegionInfo());
        blobFilePath = blobWriter.getPath();
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; targetPathName = dateFormatter.format(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Date());
        Path targetPath = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Path(blobStore.getHomePath(), targetPathName);
        
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; relativePath =  targetPathName + Path.SEPARATOR +  blobFilePath.getName();
        
        &lt;span class=&quot;code-comment&quot;&gt;// Append the BLOB_STORE_VERSION before the relative path name
&lt;/span&gt;        &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] referenceValue = Bytes.add(
            &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] { BlobStoreConstants.BLOB_STORE_VERSION },
            Bytes.toBytes(relativePath));
        
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
          List&amp;lt;KeyValue&amp;gt; kvs = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;KeyValue&amp;gt;();
          &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; hasMore;
          &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; {
            hasMore = scanner.next(kvs);
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!kvs.isEmpty()) {
              &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (KeyValue kv : kvs) {
                &lt;span class=&quot;code-comment&quot;&gt;// If we know that &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; KV is going to be included always, then let us
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;// set its memstoreTS to 0. This will help us save space when writing to disk.
&lt;/span&gt;                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (kv.getMemstoreTS() &amp;lt;= smallestReadPoint) {
                  &lt;span class=&quot;code-comment&quot;&gt;// let us not change the original KV. It could be in the memstore
&lt;/span&gt;                  &lt;span class=&quot;code-comment&quot;&gt;// changing its memstoreTS could affect other threads/scanners.
&lt;/span&gt;                  kv = kv.shallowCopy();
                  kv.setMemstoreTS(0);
                }
                
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (kv.getType() == KeyValue.Type.Reference.getCode()) {
                  writer.append(kv);
                }
                &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
                
                  &lt;span class=&quot;code-comment&quot;&gt;// append the original keyValue in the blob file.
&lt;/span&gt;                  blobWriter.append(kv);
                                    
                  &lt;span class=&quot;code-comment&quot;&gt;// append reference KeyValue.
&lt;/span&gt;                  &lt;span class=&quot;code-comment&quot;&gt;// The key is same, the value is the blobfile&apos;s filename
&lt;/span&gt;                  KeyValue reference = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; KeyValue(kv.getBuffer(), 
                      kv.getRowOffset(), 
                      kv.getRowLength(),
                      kv.getBuffer(),
                      kv.getFamilyOffset(),
                      kv.getFamilyLength(),
                      kv.getBuffer(),
                      kv.getQualifierOffset(),
                      kv.getQualifierLength(),
                      kv.getTimestamp(),
                      KeyValue.Type.Reference,
                      referenceValue, 
                      0, 
                      referenceValue.length);
                  writer.append(reference);
                }
                
                flushed += &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.memstore.heapSizeChange(kv, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
              }
              kvs.clear();
            }
          } &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (hasMore);
        } &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
          &lt;span class=&quot;code-comment&quot;&gt;// Write out the log sequence number that corresponds to &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; output
&lt;/span&gt;          &lt;span class=&quot;code-comment&quot;&gt;// hfile.  The hfile is current up to and including logCacheFlushId.
&lt;/span&gt;          status.setStatus(&lt;span class=&quot;code-quote&quot;&gt;&quot;Flushing &quot;&lt;/span&gt; + &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; + &lt;span class=&quot;code-quote&quot;&gt;&quot;: appending metadata&quot;&lt;/span&gt;);
          writer.appendMetadata(logCacheFlushId, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
          writer.appendFileInfo(StoreFile.KEYVALUE_COUNT, Bytes.toBytes(referenceKeyValueCount));
          blobWriter.appendMetadata(logCacheFlushId, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
          blobWriter.appendFileInfo(StoreFile.KEYVALUE_COUNT, Bytes.toBytes(blobKeyValueCount));
          status.setStatus(&lt;span class=&quot;code-quote&quot;&gt;&quot;Flushing &quot;&lt;/span&gt; + &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; + &lt;span class=&quot;code-quote&quot;&gt;&quot;: closing flushed file&quot;&lt;/span&gt;);
          writer.close();
          blobWriter.close();
          
          /*
           * commit the blob file from tmp folder to real folder.
           */
          blobStore.commitFile(blobFilePath, targetPath);          
        }
      }
    } &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
      flushedSize.set(flushed);
      scanner.close();
    }
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (LOG.isInfoEnabled()) {
      LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Flushed &quot;&lt;/span&gt; +
               &lt;span class=&quot;code-quote&quot;&gt;&quot;, sequenceid=&quot;&lt;/span&gt; + logCacheFlushId +
               &lt;span class=&quot;code-quote&quot;&gt;&quot;, memsize=&quot;&lt;/span&gt; + StringUtils.humanReadableInt(flushed) +
               &lt;span class=&quot;code-quote&quot;&gt;&quot;, into tmp file &quot;&lt;/span&gt; + referenceFilePath);
    }
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; referenceFilePath;
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13615015" author="maryannxue" created="Wed, 27 Mar 2013 08:15:22 +0000"  >&lt;p&gt;In the LOB use case: add an independent LOB writer for real LOB data, and replace the original value of the KeyValue with LOB file path.&lt;/p&gt;</comment>
                            <comment id="13625637" author="sershe" created="Mon, 8 Apr 2013 18:26:54 +0000"  >&lt;p&gt;Hi. Is there progress here? We could use the feature too so I wonder if it makes sense for me to pick up the patch?&lt;/p&gt;</comment>
                            <comment id="13638560" author="sershe" created="Mon, 22 Apr 2013 23:13:49 +0000"  >&lt;p&gt;Ok, let me try to take a look...&lt;/p&gt;</comment>
                            <comment id="13638719" author="sershe" created="Tue, 23 Apr 2013 02:19:01 +0000"  >&lt;p&gt;Will send patch tomorrow&lt;/p&gt;</comment>
                            <comment id="13639238" author="sershe" created="Tue, 23 Apr 2013 17:01:18 +0000"  >&lt;p&gt;StoreFlusher interface is actually more like flush request/context that was discussed above. Renamed it, kept the common logic (retries etc.) in HStore, split some methods off internalFlushCache that all flushers will probably just call as is.&lt;/p&gt;</comment>
                            <comment id="13639294" author="sershe" created="Tue, 23 Apr 2013 17:41:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/10732/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/10732/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13639327" author="hadoopqa" created="Tue, 23 Apr 2013 18:06:59 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12580075/HBASE-8024-v3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12580075/HBASE-8024-v3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.mapreduce.TestSecureLoadIncrementalHFiles&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestLoadIncrementalHFiles&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5402//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5402//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5402//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5402//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5402//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5402//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5402//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5402//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5402//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5402//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5402//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5402//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5402//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5402//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5402//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5402//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5402//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5402//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5402//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5402//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13639335" author="sershe" created="Tue, 23 Apr 2013 18:12:45 +0000"  >&lt;p&gt;test failures are unrelated&lt;/p&gt;</comment>
                            <comment id="13639887" author="devaraj" created="Wed, 24 Apr 2013 00:17:11 +0000"  >&lt;p&gt;Updated patch to reflect the current trunk.&lt;/p&gt;</comment>
                            <comment id="13640742" author="sershe" created="Wed, 24 Apr 2013 18:14:46 +0000"  >&lt;p&gt;Updated based on r feedback, as well as multi-file error handling in commit.&lt;/p&gt;</comment>
                            <comment id="13640820" author="hadoopqa" created="Wed, 24 Apr 2013 19:25:20 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12580332/HBASE-8024-v4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12580332/HBASE-8024-v4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5432//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5432//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5432//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5432//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5432//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5432//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5432//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5432//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5432//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5432//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5432//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5432//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5432//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5432//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5432//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5432//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5432//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5432//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5432//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5432//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13641305" author="sershe" created="Thu, 25 Apr 2013 02:10:36 +0000"  >&lt;p&gt;Devaraj +1-d on the /r/.&lt;br/&gt;
Javadoc warnings are from ClassLoaderBase, that is being addressed elsewhere.&lt;br/&gt;
I will fix 2 long lines and commit morning-ish if there are no objections.&lt;/p&gt;</comment>
                            <comment id="13642577" author="hudson" created="Fri, 26 Apr 2013 04:28:12 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #4080 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4080/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4080/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8024&quot; title=&quot;Make Store flush algorithm pluggable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8024&quot;&gt;&lt;del&gt;HBASE-8024&lt;/del&gt;&lt;/a&gt; Make Store flush algorithm pluggable (Revision 1475870)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
sershe : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/DefaultStoreEngine.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/DefaultStoreFlusher.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HStore.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/MemStore.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/Store.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreEngine.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreFlushContext.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreFlusher.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestDefaultStoreEngine.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestStore.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestWALReplay.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13642676" author="hudson" created="Fri, 26 Apr 2013 08:34:34 +0000"  >&lt;p&gt;Integrated in hbase-0.95 #163 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95/163/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95/163/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8024&quot; title=&quot;Make Store flush algorithm pluggable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8024&quot;&gt;&lt;del&gt;HBASE-8024&lt;/del&gt;&lt;/a&gt; Make Store flush algorithm pluggable (Revision 1475871)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
sershe : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/DefaultStoreEngine.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/DefaultStoreFlusher.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HStore.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/MemStore.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/Store.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreEngine.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreFlushContext.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreFlusher.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestDefaultStoreEngine.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestStore.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestWALReplay.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13642790" author="hudson" created="Fri, 26 Apr 2013 12:35:50 +0000"  >&lt;p&gt;Integrated in hbase-0.95-on-hadoop2 #81 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95-on-hadoop2/81/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95-on-hadoop2/81/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8024&quot; title=&quot;Make Store flush algorithm pluggable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8024&quot;&gt;&lt;del&gt;HBASE-8024&lt;/del&gt;&lt;/a&gt; Make Store flush algorithm pluggable (Revision 1475871)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
sershe : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/DefaultStoreEngine.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/DefaultStoreFlusher.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HStore.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/MemStore.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/Store.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreEngine.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreFlushContext.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreFlusher.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestDefaultStoreEngine.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestStore.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestWALReplay.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13642824" author="hudson" created="Fri, 26 Apr 2013 13:22:11 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #511 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/511/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/511/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8024&quot; title=&quot;Make Store flush algorithm pluggable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8024&quot;&gt;&lt;del&gt;HBASE-8024&lt;/del&gt;&lt;/a&gt; Make Store flush algorithm pluggable (Revision 1475870)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
sershe : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/DefaultStoreEngine.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/DefaultStoreFlusher.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HStore.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/MemStore.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/Store.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreEngine.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreFlushContext.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreFlusher.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestDefaultStoreEngine.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestStore.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestWALReplay.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12574508" name="HBASE-8024-trunk.patch" size="28217" author="maryannxue" created="Wed, 20 Mar 2013 08:53:55 +0000"/>
                            <attachment id="12580075" name="HBASE-8024-v3.patch" size="41858" author="sershe" created="Tue, 23 Apr 2013 16:59:52 +0000"/>
                            <attachment id="12580332" name="HBASE-8024-v4.patch" size="43637" author="sershe" created="Wed, 24 Apr 2013 18:14:46 +0000"/>
                            <attachment id="12574715" name="HBASE-8024.v2.patch" size="38331" author="maryannxue" created="Thu, 21 Mar 2013 03:48:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 11 Mar 2013 08:50:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>316284</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 34 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1iks7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>316627</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>