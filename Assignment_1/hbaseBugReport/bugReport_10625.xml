<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:15:39 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-10625/HBASE-10625.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-10625] Remove unnecessary key compare from AbstractScannerV2.reseekTo</title>
                <link>https://issues.apache.org/jira/browse/HBASE-10625</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;In reseekTo we find this&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
...
        compared = compareKey(reader.getComparator(), key, offset, length);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (compared &amp;lt; 1) {
          &lt;span class=&quot;code-comment&quot;&gt;// If the required key is less than or equal to current key, then
&lt;/span&gt;          &lt;span class=&quot;code-comment&quot;&gt;// don&apos;t &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; anything.
&lt;/span&gt;          &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; compared;
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
           ...
           &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; loadBlockAndSeekToKey(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.block, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.nextIndexedKey,
              &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, key, offset, length, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;loadBlockAndSeekToKey already does the right thing when a we pass a key that sorts before the current key. It&apos;s less efficient than this early check, but in the vast (all?) cases we pass forward keys (as required by the reseek contract). We&apos;re optimizing the wrong thing.&lt;/p&gt;

&lt;p&gt;Scanning with the ExplicitColumnTracker is 20-30% faster.&lt;br/&gt;
(I tested with rows of 5 short KVs selected the 2nd and or 4th column)&lt;/p&gt;

&lt;p&gt;I propose simply removing that check.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12697596">HBASE-10625</key>
            <summary>Remove unnecessary key compare from AbstractScannerV2.reseekTo</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="lhofhansl">Lars Hofhansl</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 Feb 2014 04:51:36 +0000</created>
                <updated>Fri, 16 May 2014 04:21:24 +0000</updated>
                            <resolved>Fri, 16 May 2014 04:21:24 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="13914064" author="lhofhansl" created="Thu, 27 Feb 2014 04:52:10 +0000"  >&lt;p&gt;Simple patch.&lt;/p&gt;</comment>
                            <comment id="13914069" author="lhofhansl" created="Thu, 27 Feb 2014 04:55:43 +0000"  >&lt;p&gt;Trunk patch.&lt;/p&gt;</comment>
                            <comment id="13914070" author="lhofhansl" created="Thu, 27 Feb 2014 04:56:02 +0000"  >&lt;p&gt;Let&apos;s get a test run in.&lt;/p&gt;</comment>
                            <comment id="13914142" author="hadoopqa" created="Thu, 27 Feb 2014 06:52:37 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12631454/10625-trunk.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12631454/10625-trunk.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12631454&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.1&lt;/font&gt;.  The patch compiles against the hadoop 1.1 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 2 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8830//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8830//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8830//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8830//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8830//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8830//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8830//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8830//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8830//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8830//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8830//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8830//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8830//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8830//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8830//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8830//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8830//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8830//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8830//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8830//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8830//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8830//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13914156" author="lhofhansl" created="Thu, 27 Feb 2014 07:19:37 +0000"  >&lt;p&gt;The Findbugs warnings seem wrong, there are none for the file I modified.&lt;br/&gt;
So the test run looks good, please have a look.&lt;/p&gt;</comment>
                            <comment id="13914360" author="anoop.hbase" created="Thu, 27 Feb 2014 10:32:41 +0000"  >&lt;blockquote&gt;&lt;p&gt;It&apos;s less efficient than this early check, but in the vast (all?) cases we pass forward keys (as required by the reseek contract). We&apos;re optimizing the wrong thing.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Sounds reasonable.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;(I tested with rows of 5 short KVs selected the 2nd and or 4th column)&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Test with adjacent cols like 4th and 5th &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/help_16.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;The Findbugs warnings seem wrong, there are none for the file I modified&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes. 2 new findbugs because of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10598&quot; title=&quot;Written data can not be read out because MemStore#timeRangeTracker might be updated concurrently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10598&quot;&gt;&lt;del&gt;HBASE-10598&lt;/del&gt;&lt;/a&gt; commit.  The findbugs seems not relevant also.  So the current findbugs count to be updated accordingly?&lt;/p&gt;</comment>
                            <comment id="13914808" author="lhofhansl" created="Thu, 27 Feb 2014 18:03:44 +0000"  >&lt;p&gt;Hmm... Running the tests again on my work box I see a far smaller improvement (mostly within the noise). Strange.&lt;/p&gt;</comment>
                            <comment id="13914830" author="lhofhansl" created="Thu, 27 Feb 2014 18:23:43 +0000"  >&lt;p&gt;I have no explanation. At home I have JDK7, but I doubt that makes a difference. Will rerun the tests this evening.&lt;/p&gt;</comment>
                            <comment id="13914862" author="lhofhansl" created="Thu, 27 Feb 2014 18:47:13 +0000"  >&lt;p&gt;With more careful testing, I see about a 8% gain from this on the work box (variance is higher as there is some other stuff on that machine)&lt;/p&gt;</comment>
                            <comment id="13914875" author="stack" created="Thu, 27 Feb 2014 18:52:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt; You see &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt; comment above?  Patch looks good to me.&lt;/p&gt;</comment>
                            <comment id="13914971" author="apurtell" created="Thu, 27 Feb 2014 19:49:31 +0000"  >&lt;p&gt;+1 for 0.98&lt;/p&gt;</comment>
                            <comment id="13915006" author="lhofhansl" created="Thu, 27 Feb 2014 20:21:33 +0000"  >&lt;blockquote&gt;&lt;p&gt;Test with adjacent cols like 4th and 5th?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Did that, it is still faster, but to a lesser degree.&lt;/p&gt;

&lt;p&gt;(In the end, the best solution here would be to only (re)seek when we can expect the KV we&apos;re looking for to be in another HFile block, otherwise do a series of next calls. I have not found a clean way, yet, of doing that.)&lt;/p&gt;

&lt;p&gt;I will report numbers for my work and home machines in a bit, then we can decide whether the change is worth it.&lt;/p&gt;</comment>
                            <comment id="13915237" author="lhofhansl" created="Fri, 28 Feb 2014 00:00:14 +0000"  >&lt;p&gt;Testing this is hard it seems. I wrote a quick tool that runs through the scenarios and calculates mean/standard deviation.&lt;br/&gt;
10m rows, 5 columns (C0-C4), 8 byte row keys, 8 byte values.&lt;/p&gt;

&lt;p&gt;Results are surprisingly disappointing:&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;collumns&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;None&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;C0&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;C1&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;C4&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;C1,C3&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;C2,C3&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;C2,C3,C4&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;w/ patch&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;13.30, 0.12&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;14.24, 0.17&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;22.29, 0.09&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;16.42, 0.03&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;31.51, 0.27&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;24.60, 0.02&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;21.04, 0.05&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;w/o patch&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;13.72, 0.07&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;14.47, 0.21&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;23.12, 0.13&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;17.30,0.16&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;32.16, 0.05&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;25.00, 0.04&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;21.11, 0.05&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;p&gt;So the gains are minimal.&lt;br/&gt;
Will run the same at home later.&lt;/p&gt;</comment>
                            <comment id="13915262" author="lhofhansl" created="Fri, 28 Feb 2014 00:21:01 +0000"  >&lt;p&gt;Oh, and times are in seconds (mean, sigma)&lt;/p&gt;</comment>
                            <comment id="13915364" author="lhofhansl" created="Fri, 28 Feb 2014 02:16:20 +0000"  >&lt;p&gt;Turns out at home I did not have block encoding enabled. So percentage wise the win is much bigger when this compare is removed.&lt;/p&gt;</comment>
                            <comment id="13915396" author="lhofhansl" created="Fri, 28 Feb 2014 02:52:47 +0000"  >&lt;p&gt;Based on the last numbers, I&apos;ll close this as &quot;Invalid&quot;. I found that sometimes it is even slower with this patch.&lt;br/&gt;
I am not sure what I had measured yesterday evening (it&apos;s possible I still had a debugger attached to the RS process).&lt;/p&gt;</comment>
                            <comment id="13915397" author="lhofhansl" created="Fri, 28 Feb 2014 02:53:02 +0000"  >&lt;p&gt;Was still worth a try &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13915510" author="stack" created="Fri, 28 Feb 2014 06:56:24 +0000"  >&lt;blockquote&gt;&lt;p&gt;Was still worth a try &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes&lt;/p&gt;</comment>
                            <comment id="13915531" author="lhofhansl" created="Fri, 28 Feb 2014 07:41:22 +0000"  >&lt;p&gt;Final numbers for reference. (Doubled number of rows and reset everything after each run).&lt;/p&gt;

&lt;p&gt;20m rows, 5 columns, 8 byte keys, 10 bytes values, no encoding:&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;collumns&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;None&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;C0&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;C1&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;C4&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;C1,C3&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;C2,C3&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;C2,C3,C4&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;w/o patch&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;14.88&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;14.74&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;23.57&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;17.70&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;34.48&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;26.06&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;21.76&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;w/ patch&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;14.24&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;14.02&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;22.09&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;16.95&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;32.39&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;24.86&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;21.63&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;p&gt;20m rows, 5 columns, 8 byte keys, 10 bytes values, FAST_DIFF:&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;collumns&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;None&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;C0&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;C1&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;C4&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;C1,C3&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;C2,C3&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;C2,C3,C4&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;w/o patch&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;22.07&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;20.59&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;30.65&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;23.53&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;43.25&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;33.62&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;28.90&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;w/ patch&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;22.59&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;20.22&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;29.84&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;22.91&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;42.43&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;33.31&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;28.87&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
</comment>
                            <comment id="13919123" author="lhofhansl" created="Tue, 4 Mar 2014 08:13:20 +0000"  >&lt;p&gt;Another experimental patch. This one gives results.&lt;br/&gt;
The observation is that we do not need to check the top key during each iteration of the generalizedSeek. Either we exhausted the current scanner, or we&apos;re now positioned correctly.&lt;br/&gt;
Will make a trunk patch to get a test run.&lt;/p&gt;</comment>
                            <comment id="13919124" author="lhofhansl" created="Tue, 4 Mar 2014 08:16:51 +0000"  >&lt;p&gt;Curious how many tests this would break. Let&apos;s try.&lt;/p&gt;</comment>
                            <comment id="13919194" author="hadoopqa" created="Tue, 4 Mar 2014 09:47:34 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12632466/10625-trunk-experimental.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12632466/10625-trunk-experimental.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12632466&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.1&lt;/font&gt;.  The patch compiles against the hadoop 1.1 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 2 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.regionserver.TestColumnSeeking&lt;br/&gt;
                  org.apache.hadoop.hbase.filter.TestFilter&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.TestKeyValueHeap&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8874//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8874//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8874//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8874//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8874//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8874//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8874//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8874//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8874//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8874//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8874//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8874//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8874//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8874//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8874//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8874//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8874//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8874//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8874//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8874//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8874//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8874//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13919708" author="lhofhansl" created="Tue, 4 Mar 2014 17:58:37 +0000"  >&lt;p&gt;I&apos;ll chop away at this as I get time. This change brings the &quot;C1,C3 with FAST_DIFF&quot; case from 43.2s to 36.0s (of course it&apos;s of no help if it&apos;s not correct &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; ).&lt;/p&gt;</comment>
                            <comment id="13919718" author="jmspaggi" created="Tue, 4 Mar 2014 18:11:16 +0000"  >&lt;p&gt;When you will be sure it&apos;s correct, let me know if you want me to give it a try &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13919754" author="lhofhansl" created="Tue, 4 Mar 2014 18:50:16 +0000"  >&lt;p&gt;Will do. Need to reason through the logic a bit more.&lt;/p&gt;</comment>
                            <comment id="13919999" author="lhofhansl" created="Tue, 4 Mar 2014 20:52:44 +0000"  >&lt;p&gt;Nah. Doesn&apos;t work as is. The reason is that we have seek into all stores for a region and all files for a stores, can&apos;t simply short circuit this. Shame that we have to eat up all the comparisons just for that.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12632465" name="10625-0.94-experimental.txt" size="3750" author="lhofhansl" created="Tue, 4 Mar 2014 08:13:20 +0000"/>
                            <attachment id="12631453" name="10625-0.94.txt" size="2154" author="lhofhansl" created="Thu, 27 Feb 2014 04:52:10 +0000"/>
                            <attachment id="12632466" name="10625-trunk-experimental.txt" size="3833" author="lhofhansl" created="Tue, 4 Mar 2014 08:16:21 +0000"/>
                            <attachment id="12631454" name="10625-trunk.txt" size="2207" author="lhofhansl" created="Thu, 27 Feb 2014 04:55:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 27 Feb 2014 06:52:37 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>376070</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 41 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1sszb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>376366</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>