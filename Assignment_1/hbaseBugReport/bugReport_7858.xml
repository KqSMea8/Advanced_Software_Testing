<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:49:43 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-7858/HBASE-7858.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-7858] cleanup before merging snapshots branch to trunk</title>
                <link>https://issues.apache.org/jira/browse/HBASE-7858</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;There have been a lot of review comments from &lt;a href=&quot;https://reviews.apache.org/r/9416&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/9416&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Since our goal of merging snapshot feature to trunk would preserve revision history, a separate JIRA is needed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12632625">HBASE-7858</key>
            <summary>cleanup before merging snapshots branch to trunk</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12619005">HBASE-7290</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yuzhihong@gmail.com">Ted Yu</assignee>
                                    <reporter username="yuzhihong@gmail.com">Ted Yu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Feb 2013 17:31:35 +0000</created>
                <updated>Mon, 23 Sep 2013 18:30:23 +0000</updated>
                            <resolved>Wed, 20 Feb 2013 22:26:52 +0000</resolved>
                                                    <fixVersion>0.95.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13579352" author="stack" created="Fri, 15 Feb 2013 17:39:29 +0000"  >&lt;p&gt;Please close.  This issue is silly as I read it w/o context.  If we now open issues to ensure comments are addressed, where will it end?  Does everyone who comments open an issue to get their comments addressed?  Do we do it when we make one comment or is there a threshold?&lt;/p&gt;</comment>
                            <comment id="13579361" author="yuzhihong@gmail.com" created="Fri, 15 Feb 2013 17:56:23 +0000"  >&lt;p&gt;@Stack:&lt;br/&gt;
I put in some context. I submitted 11 batches of review comments on &lt;a href=&quot;https://reviews.apache.org/r/9416&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/9416&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Jonathan Hsieh has spent a lot of time creating the subversion branch so that revision history is preserved when snapshot feature is merged to trunk.&lt;br/&gt;
This means we wouldn&apos;t checkin a mega patch. Hence the creation of this sub-task.&lt;/p&gt;

&lt;p&gt;I am working on the patch right now.&lt;/p&gt;</comment>
                            <comment id="13579370" author="jmhsieh" created="Fri, 15 Feb 2013 18:10:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=saint.ack%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;saint.ack@gmail.com&quot;&gt;Stack&lt;/a&gt;, I explicitly asked Ted for this &amp;#8211; though I would have named it a &quot;pre-merge branch cleanup&quot;.  Regardless of the name, the goal and the reason for it is the same.  &lt;/p&gt;

&lt;p&gt;We need this to be a patch because it in a branch, and the mega patch just shows what is currently committed.  &lt;/p&gt;

&lt;p&gt;Ted&apos;s reviews is one of the first holistic reviews.  It likely catches things we&apos;ve missed from being in the trenches for a while.  The fixes for the reviews can&apos;t go in &quot;on commit&quot; because it is already committed.  We could put them in &quot;on merge&quot; but merges are complicated enough and we&apos;d probably lose track of the changes.  Thus, IMO they should be fixed with a patch to the &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7290&quot; title=&quot;Online snapshots &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7290&quot;&gt;&lt;del&gt;HBASE-7290&lt;/del&gt;&lt;/a&gt; branch, and so the merge to trunk will be trivial.&lt;/p&gt;





</comment>
                            <comment id="13579378" author="yuzhihong@gmail.com" created="Fri, 15 Feb 2013 18:15:19 +0000"  >&lt;p&gt;I modified JIRA subject as Jon recommended.&lt;/p&gt;

&lt;p&gt;I assigned the issue to myself. But the patch would likely include fixes from other participants.&lt;/p&gt;</comment>
                            <comment id="13579385" author="jmhsieh" created="Fri, 15 Feb 2013 18:23:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tedyu@apache.org&quot;&gt;Ted Yu&lt;/a&gt;  If this goes into multiple patch territory, let&apos;s at least each patch be &quot;in an area&quot; &amp;#8211; a group of fixes related to classes in common packages or function.  Doing this will help us split the work, and get this done more quickly.&lt;/p&gt;

&lt;p&gt;How about we break it down into roughly the three areas we already have?&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;clone+restore+export&lt;/li&gt;
	&lt;li&gt;offline snapshot&lt;/li&gt;
	&lt;li&gt;online snapshot (proc, err handling)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13579394" author="yuzhihong@gmail.com" created="Fri, 15 Feb 2013 18:30:59 +0000"  >&lt;p&gt;Patch v1 reflects findbugs warning fixes.&lt;/p&gt;

&lt;p&gt;I am fine with partitioning work by area.&lt;br/&gt;
Each participant can list the names of classes he works on.&lt;/p&gt;

&lt;p&gt;I will continue with the first two batches of reviews, including renaming the coprocessor hooks.&lt;/p&gt;</comment>
                            <comment id="13579402" author="jmhsieh" created="Fri, 15 Feb 2013 18:36:30 +0000"  >&lt;p&gt;I disagree with the coproc rename.  &lt;/p&gt;

&lt;p&gt;On create and delete table, the completion of the table creation or deletion has a coproc hook called postCreateTableHandler and postDeleteTableHandler.  So, let&apos;s keep the snapshot ones as-is but when we add snapshot completion coproc hooks let&apos;s use the *Handler convention.&lt;/p&gt;

&lt;p&gt;See&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/hbase/blob/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/handler/DeleteTableHandler.java#L50&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hbase/blob/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/handler/DeleteTableHandler.java#L50&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13579427" author="yuzhihong@gmail.com" created="Fri, 15 Feb 2013 19:11:33 +0000"  >&lt;p&gt;Patch v2 cleans up till ForeignException.java on the review board.&lt;/p&gt;</comment>
                            <comment id="13579445" author="stack" created="Fri, 15 Feb 2013 19:34:44 +0000"  >&lt;p&gt;I understand what this issue is about now context has been provided.  I withdraw my suggestion that the issue is without substance (now that it has been filled in).&lt;/p&gt;</comment>
                            <comment id="13579447" author="yuzhihong@gmail.com" created="Fri, 15 Feb 2013 19:36:42 +0000"  >&lt;p&gt;Patch v3 reaches EnabledTableSnapshotHandler.java&lt;/p&gt;</comment>
                            <comment id="13579474" author="yuzhihong@gmail.com" created="Fri, 15 Feb 2013 20:04:01 +0000"  >&lt;p&gt;Patch v4 reaches SnapshotLogCleaner.java&lt;/p&gt;</comment>
                            <comment id="13579550" author="yuzhihong@gmail.com" created="Fri, 15 Feb 2013 22:30:01 +0000"  >&lt;p&gt;Patch v5 continues to TakeSnapshotHandler.java&lt;/p&gt;</comment>
                            <comment id="13579601" author="yuzhihong@gmail.com" created="Fri, 15 Feb 2013 23:41:26 +0000"  >&lt;p&gt;Patch v6 continues to HRegion.java&lt;/p&gt;</comment>
                            <comment id="13579618" author="yuzhihong@gmail.com" created="Sat, 16 Feb 2013 00:13:17 +0000"  >&lt;p&gt;I went over my comments once.&lt;/p&gt;

&lt;p&gt;I addressed most of them. The rest requires agreement among the participants.&lt;/p&gt;</comment>
                            <comment id="13579630" author="yuzhihong@gmail.com" created="Sat, 16 Feb 2013 00:23:03 +0000"  >&lt;p&gt;I am running test suite based on patch v7.&lt;br/&gt;
Will report back if there is repeatable test failure.&lt;/p&gt;</comment>
                            <comment id="13579684" author="yuzhihong@gmail.com" created="Sat, 16 Feb 2013 02:35:16 +0000"  >&lt;p&gt;Looks like the machine where I ran tests has some config to be repaired:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  testDeleteRowWithBloomFilter(org.apache.hadoop.hbase.regionserver.TestHRegionBusyWait): java.io.FileNotFoundException: /homes/hortonzy/ss-svn/hbase-server/target/classes/hbase-&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;.xml (Too many open files)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I reran the failed tests and they passed.&lt;/p&gt;</comment>
                            <comment id="13580958" author="yuzhihong@gmail.com" created="Tue, 19 Feb 2013 01:55:06 +0000"  >&lt;p&gt;Patch v8 removes verifyLogs() which is not used.&lt;br/&gt;
Also addresses race condition in submitProcedure()&lt;/p&gt;</comment>
                            <comment id="13581554" author="mbertozzi" created="Tue, 19 Feb 2013 19:36:12 +0000"  >&lt;p&gt;Looks good to me, just one question. &lt;/p&gt;

&lt;p&gt;Why getTakeSnapshotHandler() is now synchronized?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-  TakeSnapshotHandler getTakeSnapshotHandler(SnapshotDescription snapshot) {
+  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; TakeSnapshotHandler getTakeSnapshotHandler(SnapshotDescription snapshot) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13581560" author="yuzhihong@gmail.com" created="Tue, 19 Feb 2013 19:45:29 +0000"  >&lt;p&gt;Looking at other methods which access this.handler, such as snapshotEnabledTable(), they&apos;re declared synchronized.&lt;/p&gt;

&lt;p&gt;getTakeSnapshotHandler() is called by isSnapshotDone() which is not synchronized, hence the change.&lt;/p&gt;</comment>
                            <comment id="13581679" author="yuzhihong@gmail.com" created="Tue, 19 Feb 2013 22:13:17 +0000"  >&lt;p&gt;Patch v9 changes the following condition in verifyRegions():&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (region.isOffline() &amp;amp;&amp;amp; (region.isSplit() || region.isSplitParent())) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13581682" author="yuzhihong@gmail.com" created="Tue, 19 Feb 2013 22:18:44 +0000"  >&lt;p&gt;I am running test suite based on patch v9.&lt;br/&gt;
Will report back if there is repeatable test failure.&lt;/p&gt;</comment>
                            <comment id="13581750" author="yuzhihong@gmail.com" created="Tue, 19 Feb 2013 23:30:22 +0000"  >&lt;p&gt;There is no repeatable test failure.&lt;/p&gt;</comment>
                            <comment id="13581766" author="yuzhihong@gmail.com" created="Tue, 19 Feb 2013 23:42:38 +0000"  >&lt;p&gt;Checked in patch v9 to hbase-7290v2 branch.&lt;/p&gt;

&lt;p&gt;Thanks for the reviews Jon, Matteo and Jesse.&lt;/p&gt;

&lt;p&gt;We can use follow-on JIRAs for remaining comments.&lt;/p&gt;</comment>
                            <comment id="13774933" author="stack" created="Mon, 23 Sep 2013 18:30:23 +0000"  >&lt;p&gt;Marking closed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12569579" name="7858-v1.txt" size="7201" author="yuzhihong@gmail.com" created="Fri, 15 Feb 2013 18:30:59 +0000"/>
                            <attachment id="12569586" name="7858-v2.txt" size="17745" author="yuzhihong@gmail.com" created="Fri, 15 Feb 2013 19:11:33 +0000"/>
                            <attachment id="12569591" name="7858-v3.txt" size="24266" author="yuzhihong@gmail.com" created="Fri, 15 Feb 2013 19:36:42 +0000"/>
                            <attachment id="12569595" name="7858-v4.txt" size="31656" author="yuzhihong@gmail.com" created="Fri, 15 Feb 2013 20:04:01 +0000"/>
                            <attachment id="12569609" name="7858-v5.txt" size="40790" author="yuzhihong@gmail.com" created="Fri, 15 Feb 2013 22:30:01 +0000"/>
                            <attachment id="12569619" name="7858-v6.txt" size="50747" author="yuzhihong@gmail.com" created="Fri, 15 Feb 2013 23:41:26 +0000"/>
                            <attachment id="12569626" name="7858-v7.txt" size="66133" author="yuzhihong@gmail.com" created="Sat, 16 Feb 2013 00:13:17 +0000"/>
                            <attachment id="12569888" name="7858-v8.txt" size="69382" author="yuzhihong@gmail.com" created="Tue, 19 Feb 2013 01:55:06 +0000"/>
                            <attachment id="12570009" name="7858-v9.txt" size="70268" author="yuzhihong@gmail.com" created="Tue, 19 Feb 2013 22:13:17 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 15 Feb 2013 17:39:29 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>313121</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1i1a7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>313467</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>