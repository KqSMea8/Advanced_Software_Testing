<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:54:26 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1548/HBASE-1548.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1548] give a time range in MapReduce</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1548</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;I&apos;ve seen a lot of changes in client APIs by &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1304&quot; title=&quot;New client server implementation of how gets and puts are handled. &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1304&quot;&gt;&lt;del&gt;HBASE-1304&lt;/del&gt;&lt;/a&gt; patch.&lt;/p&gt;

&lt;p&gt;We can give a time range when we scan a table with assign TimeRange instance to Scan class.&lt;/p&gt;

&lt;p&gt;I also see some code in org.apache.hadoop.hbase.mapreduce.TableInputForamtBase.java, which uses a scan instance to get a Scanner instance.&lt;/p&gt;

&lt;p&gt;I think we can also give a time range to query when we do mapreduce on hbase. &lt;/p&gt;

&lt;p&gt;I&apos;ve already apply this one to my local copy for my purpose, which is about time series analysis.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12428343">HBASE-1548</key>
            <summary>give a time range in MapReduce</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jaehong choi">jaehong choi</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Jun 2009 09:53:16 +0000</created>
                <updated>Mon, 23 Sep 2013 19:07:22 +0000</updated>
                            <resolved>Thu, 25 Jun 2009 01:46:05 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12721826" author="apurtell" created="Fri, 19 Jun 2009 15:41:14 +0000"  >&lt;p&gt;@Jaehong: You say you&apos;ve applied a patch locally? Care to attach it to this issue for review/inclusion? &lt;/p&gt;</comment>
                            <comment id="12721890" author="erikholstad@gmail.com" created="Fri, 19 Jun 2009 17:23:28 +0000"  >&lt;p&gt;Yeah, I think that the idea is to give the MapReduce job a Scan object, in that case you can use all the parameters of it inside that job.&lt;br/&gt;
There are just some things we need to figure out with the new MapReduce interface.&lt;/p&gt;</comment>
                            <comment id="12722653" author="jaehong choi" created="Mon, 22 Jun 2009 15:56:11 +0000"  >&lt;p&gt;I attached a patch.&lt;br/&gt;
1. add another org.apache.hadoop.hbase.mapreduce.initTableMapJob() to give timestamps when we prepare a mapreduce job.&lt;br/&gt;
2. change org.apache.hadoop.hbase.mapreduce.TableInputFormat.java and org.apache.hadoop.hbase.mapreduce.TableInputFormatBase.java to support time range scan.&lt;br/&gt;
3. unit test for this is in org.apache.hadoop.hbase.mapreduce.TestTimeRangeMapRed.java&lt;/p&gt;

&lt;p&gt;Is there any possible ways to give a Scan instance when we do mapreduce? I tried to find a way that pass the instance through Configuration. But, it only supports primitive types. If there are any ways, passing a Scan object would be the best. &lt;/p&gt;</comment>
                            <comment id="12722714" author="stack" created="Mon, 22 Jun 2009 17:55:23 +0000"  >&lt;p&gt;This patch looks great.&lt;/p&gt;

&lt;p&gt;In TIFB, you do this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+        scan.setMaxVersions();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Is that intentional?  Should that be an option passed too like timestamps?&lt;/p&gt;

&lt;p&gt;And, I&apos;m not really clear on this piece:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    &lt;span class=&quot;code-comment&quot;&gt;// maxStamp must be higher then minStamp
&lt;/span&gt;+    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; minArg = job.get(TIME_RANGE_MIN);
+    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; maxArg = job.get(TIME_RANGE_MAX);
+    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (minArg == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || minArg.length() == 0 
+        || maxArg == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || maxArg.length() == 0
+        || &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;.parseLong(maxArg) &amp;lt;= &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;.parseLong(minArg)) {
+        &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IOException(&lt;span class=&quot;code-quote&quot;&gt;&quot;invalid time stamp values&quot;&lt;/span&gt;); 
+    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;.. but elsewhere we set defaults to be zero for MIN and MAX.&lt;/p&gt;

&lt;p&gt;Will current code throw the above IOE?  (It doesn&apos;t look like it does &amp;#8211; I tried existing unit tests with this patch in place and they all pass fine).  Maybe you could explain what I&apos;m missing?&lt;/p&gt;

&lt;p&gt;As to passing a Scan object, yes, we need to do that.  It&apos;ll be done as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1385&quot; title=&quot;Revamp TableInputFormat, needs updating to match hadoop 0.20.x AND remove bit where we can make &amp;lt; maps than regions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1385&quot;&gt;&lt;del&gt;HBASE-1385&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12722929" author="jaehong choi" created="Tue, 23 Jun 2009 01:58:37 +0000"  >&lt;p&gt;Thank you for comments.&lt;/p&gt;

&lt;p&gt;1. As far as I&apos;m concerned, if you don&apos;t specify Scan&apos;s versions, it will be 1. So, even if we give a time range, scanner will only return 1 cell. This is not what we want.&lt;/p&gt;

&lt;p&gt;2. There is no unit test to verify IOE. But, if we give a time range whose min value is greater than max, the existing unit test will be failed. I think this code should be changed in order to check null values of minArg, maxArg in TableInputFormat.configure() rather than using 0s to indicate that there is no time range. Because 0 is itself a kind of time range value, but not absence of time range like null.&lt;/p&gt;

&lt;p&gt;3. I didn&apos;t know &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1385&quot; title=&quot;Revamp TableInputFormat, needs updating to match hadoop 0.20.x AND remove bit where we can make &amp;lt; maps than regions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1385&quot;&gt;&lt;del&gt;HBASE-1385&lt;/del&gt;&lt;/a&gt;. I think this issue can be merged into &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1385&quot; title=&quot;Revamp TableInputFormat, needs updating to match hadoop 0.20.x AND remove bit where we can make &amp;lt; maps than regions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1385&quot;&gt;&lt;del&gt;HBASE-1385&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;</comment>
                            <comment id="12722975" author="stack" created="Tue, 23 Jun 2009 05:51:52 +0000"  >&lt;p&gt;OK.  If you have a working copy, lets then merge what you have done here into hbase-1385.  In hbase-1385, we&apos;ll do thinks like make versions configurable.  Thanks Jaehong Choi.&lt;/p&gt;</comment>
                            <comment id="12723866" author="jaehong choi" created="Thu, 25 Jun 2009 01:46:05 +0000"  >&lt;p&gt;This has been included in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1385&quot; title=&quot;Revamp TableInputFormat, needs updating to match hadoop 0.20.x AND remove bit where we can make &amp;lt; maps than regions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1385&quot;&gt;&lt;del&gt;HBASE-1385&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12424781">HBASE-1385</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12411420" name="HBase-1548.patch" size="13939" author="jaehong choi" created="Mon, 22 Jun 2009 15:56:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 19 Jun 2009 15:41:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32186</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 26 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hdwf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99514</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>