<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:07:53 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-3165/HBASE-3165.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-3165] some performance things i did</title>
                <link>https://issues.apache.org/jira/browse/HBASE-3165</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;in an attempt to improve the profile of the serialization of results in the regionserver side I did a large number of things to reduce buffer copies, improve the API usage efficiency (using the BB API directly) and so on.&lt;/p&gt;

&lt;p&gt;Using a YCSB config like so:&lt;br/&gt;
recordcount=10000&lt;br/&gt;
#recordcount=5&lt;br/&gt;
operationcount=1000&lt;br/&gt;
workload=com.yahoo.ycsb.workloads.CoreWorkload&lt;/p&gt;

&lt;p&gt;readallfields=true&lt;/p&gt;


&lt;p&gt;readproportion=0&lt;br/&gt;
updateproportion=0&lt;br/&gt;
scanproportion=1&lt;br/&gt;
insertproportion=0&lt;/p&gt;

&lt;p&gt;fieldlength=10&lt;br/&gt;
fieldcount=100&lt;/p&gt;

&lt;p&gt;requestdistribution=zipfian&lt;/p&gt;


&lt;p&gt;scanlength=300&lt;br/&gt;
scanlengthdistribution=zipfian&lt;/p&gt;

&lt;p&gt;threadcount=1&lt;/p&gt;

&lt;p&gt;columnfamily=data&lt;/p&gt;

&lt;p&gt;Doing a medium sized scan of 1-300 rows.&lt;/p&gt;

&lt;p&gt;Top line performance was at about 67ms, but these micro improvements didnt budge that needle, and it didnt change the scale of the CPU profiler - ie: cpu time spent in serialization was the same.&lt;/p&gt;

&lt;p&gt;Since then I also made an improvement to HBase-YCSB which may have been masking the performance gains.  I have suspended this work in favor of 0.90 pre-release work for now.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12478614">HBASE-3165</key>
            <summary>some performance things i did</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ryanobjc">ryan rawson</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Oct 2010 19:49:40 +0000</created>
                <updated>Sat, 19 Jul 2014 00:44:47 +0000</updated>
                            <resolved>Sat, 19 Jul 2014 00:44:47 +0000</resolved>
                                                                    <component>Performance</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12925932" author="streamy" created="Thu, 28 Oct 2010 20:19:15 +0000"  >&lt;p&gt;I have some comments for these.  Can you put them up on RB with some context about what they do?&lt;/p&gt;</comment>
                            <comment id="12925937" author="ryanobjc" created="Thu, 28 Oct 2010 20:27:40 +0000"  >&lt;p&gt;The second wont go up due to:&lt;/p&gt;

&lt;p&gt;&quot;The file &apos;src/main/java/org/apache/hadoop/hbase/client/Result.java&apos; (r9326e01) could not be found in the repository&quot;&lt;/p&gt;

&lt;p&gt;This is because patch 2 depends on patch 1.&lt;/p&gt;</comment>
                            <comment id="12925938" author="hbasereviewboard" created="Thu, 28 Oct 2010 20:29:23 +0000"  >&lt;p&gt;Message from: &quot;Ryan Rawson&quot; &amp;lt;ryanobjc@gmail.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.cloudera.org/r/1109/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1109/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hbase.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3165&quot; title=&quot;some performance things i did&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3165&quot;&gt;&lt;del&gt;HBASE-3165&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3165&quot; title=&quot;some performance things i did&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3165&quot;&gt;&lt;del&gt;HBASE-3165&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;http://issues.apache.org/jira/browse/HBASE-3165&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/HBASE-3165&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  src/main/java/org/apache/hadoop/hbase/client/Result.java e0307ca &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/HbaseObjectWritable.java 83f623d &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/WritableWithSize.java PRE-CREATION &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/ipc/ByteBufferOutputStream.java PRE-CREATION &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/ipc/HBaseServer.java e4c356d &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;http://review.cloudera.org/r/1109/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1109/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Ryan&lt;/p&gt;

</comment>
                            <comment id="12925939" author="streamy" created="Thu, 28 Oct 2010 20:31:05 +0000"  >&lt;p&gt;There&apos;s some support in RB for putting up diffs based on other diffs.&lt;/p&gt;

&lt;p&gt;So are you punting on this stuff for 0.90?  I&apos;ll skip the reviews now if that&apos;s the case and continue work on 0.90 stuff.&lt;/p&gt;</comment>
                            <comment id="12925941" author="ryanobjc" created="Thu, 28 Oct 2010 20:34:52 +0000"  >&lt;p&gt;the problem is the code is pretty ugly and creates a 2nd body of serialization code.  I tried a lot of things here, and this is just a dump of what I did.  I need to change my measurement strategy, and test to see which one of the 2-3 approaches works the best with minimal icky-code addition.  For example the final attempt made it so that Result used the ByteBuffer interface directly, thus ending up with 2 implementations of the serialization (but only 1 of the deserialization). I also have a ByteBufferOutputStream which translates OutputStream writes into BB writes and that would probably be a better from code maintainability, and it might be as fast as using BB directly.  I want proof of this instead of guessing. Sounds reasonable?&lt;/p&gt;</comment>
                            <comment id="12925942" author="streamy" created="Thu, 28 Oct 2010 20:42:05 +0000"  >&lt;p&gt;Yup.  So I will wait &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14067297" author="apurtell" created="Sat, 19 Jul 2014 00:44:47 +0000"  >&lt;p&gt;Didn&apos;t end up happening&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12458271" name="HBASE-2165-2.txt" size="19116" author="ryanobjc" created="Thu, 28 Oct 2010 19:51:08 +0000"/>
                            <attachment id="12458270" name="HBASE-2165.txt" size="13165" author="ryanobjc" created="Thu, 28 Oct 2010 19:50:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 28 Oct 2010 20:19:15 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26684</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 21 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02c7z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11581</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>