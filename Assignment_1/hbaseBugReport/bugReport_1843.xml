<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:56:50 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1843/HBASE-1843.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1843] HBase Client Configuration -- Millisecond Pauses and very few Retries (s)</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1843</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The ability to set the number of retries and the pause length between them on the HBaseClient through HBaseConfiguration.&lt;/p&gt;

&lt;p&gt;I am working on an application that utilizes Hbase for real-time queries.  The dependency on Hbase is not critical so if HBase is not available for any reason the application should continue on doing its job without the data from Hbase.  Essentially I want HBase Client to fail quickly if the request to Hase is going to fail or take a long time to respond.  I have tested various scenarios with Zookeeper running/not running and the master running/not running.&lt;/p&gt;

&lt;p&gt;Configuration:&lt;br/&gt;
Hbase 0.20.0 &amp;amp; Hadoop 0.20.1&lt;br/&gt;
Pseudo distributed mode&lt;br/&gt;
Java client using HTablePool&lt;/p&gt;


&lt;p&gt;When ZK, Master, Regionserver and my app are running, I stop the Hbase master/regionserver.  The HBaseClient then begins to complain:&lt;br/&gt;
16:26:51,273 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;HBaseClient&amp;#93;&lt;/span&gt; Retrying connect to server: /192.168.1.55:44808. Already tried 0 time(s).&lt;br/&gt;
16:26:53,274 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;HBaseClient&amp;#93;&lt;/span&gt; Retrying connect to server: /192.168.1.55:44808. Already tried 1 time(s).&lt;br/&gt;
...already tried 9 time(s)....&lt;br/&gt;
16:27:10,294 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;HbaseRPC&amp;#93;&lt;/span&gt; Server at /192.168.1.55:44808 not available yet, Zzzzz...&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;
			&lt;ul&gt;
				&lt;li&gt;This is despite the fact that I set hbase.pause to be 25 ms and the retries.number = 2.  ****&lt;/li&gt;
			&lt;/ul&gt;
			&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I restart the Master and RegionServer and then send more client requests through HTablePool.  It has the same &quot;Retrying to connect to server:&quot; messages.  I noticed that the port number it is using is the old port for the region server and not the new one assigned after the restart.  The HbaseClient does not seem to recover unless I restart the client app.  When I do not use HTablePool and only Htable it works fine.&lt;/p&gt;

&lt;p&gt;Issue:&lt;br/&gt;
Setting and using hbase.client.pause and hbase.client.retries.number parameters.  I have rarely gotten them to work.  It seems to default to 2 sec and 10 retries no matter if I overwrite the defaults on the client and the server.  Yes, I made sure my client doesn&apos;t have anything in the classpath it might pick-up.&lt;br/&gt;
&amp;lt;property&amp;gt;&lt;br/&gt;
&amp;lt;name&amp;gt;hbase.client.pause&amp;lt;/name&amp;gt;&lt;br/&gt;
&amp;lt;value&amp;gt;20&amp;lt;/value&amp;gt;&lt;br/&gt;
&amp;lt;/property&amp;gt;&lt;br/&gt;
&amp;lt;property&amp;gt;&lt;br/&gt;
&amp;lt;name&amp;gt;hbase.client.retries.number&amp;lt;/name&amp;gt;&lt;br/&gt;
&amp;lt;value&amp;gt;2&amp;lt;/value&amp;gt;&lt;br/&gt;
&amp;lt;/property&amp;gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12435772">HBASE-1843</key>
            <summary>HBase Client Configuration -- Millisecond Pauses and very few Retries (s)</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="barney">Barney Frank</reporter>
                        <labels>
                    </labels>
                <created>Wed, 16 Sep 2009 00:08:02 +0000</created>
                <updated>Wed, 21 Aug 2013 20:47:47 +0000</updated>
                            <resolved>Wed, 21 Aug 2013 20:47:47 +0000</resolved>
                                    <version>0.20.0</version>
                                                    <component>Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12756120" author="stack" created="Wed, 16 Sep 2009 17:30:40 +0000"  >&lt;p&gt;Look at in 0.20.1.&lt;/p&gt;</comment>
                            <comment id="12757533" author="stack" created="Fri, 18 Sep 2009 23:49:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1815&quot; title=&quot;HBaseClient can get stuck in an infinite loop while attempting to contact a failed regionserver&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1815&quot;&gt;&lt;del&gt;HBASE-1815&lt;/del&gt;&lt;/a&gt; should get us this roughly.  It removes the ipc retries that worked independent of hbase.client retries and pause.  25ms though is a bit to fine of a hair trigger for our clumsy client.  I&apos;ll leave this issue open but move it out of 0.20.1.&lt;/p&gt;</comment>
                            <comment id="12757536" author="stack" created="Fri, 18 Sep 2009 23:52:00 +0000"  >&lt;p&gt;Moved out of 0.20.1.  Changed title to be explicit that what is wanted is very fine-grained pauses and few retries.&lt;/p&gt;</comment>
                            <comment id="12757538" author="stack" created="Fri, 18 Sep 2009 23:53:57 +0000"  >&lt;p&gt;For example, if what is wanted is 25ms maximum pause, we&apos;d need to account for GC in client.  We&apos;d also need account for lookup of &lt;del&gt;ROOT&lt;/del&gt; and .META. each of which could happen within 2 retries and within the 25ms but overall, the get could take 150ms though maximum asked for was 50ms (2x25ms).&lt;/p&gt;</comment>
                            <comment id="12757550" author="ryanobjc" created="Sat, 19 Sep 2009 00:13:54 +0000"  >&lt;p&gt;server gc pauses can very easily be 25-80ms. every second too.&lt;/p&gt;

&lt;p&gt;with a 25ms hard limit, you are looking to see a large number of spurious failures.&lt;/p&gt;</comment>
                            <comment id="13746829" author="stack" created="Wed, 21 Aug 2013 20:47:47 +0000"  >&lt;p&gt;Old, stale issue.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12435773">HBASE-1844</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12498300">HBASE-3523</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 16 Sep 2009 17:30:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32287</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 17 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02eh3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11946</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>