<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:27:31 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5415/HBASE-5415.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5415] FSTableDescriptors should handle random folders in hbase.root.dir better</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5415</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;I faked an upgrade on a test cluster using our dev data so I had to distcp the data between the two clusters, but after starting up and doing the migration and whatnot the web UI didn&apos;t show any table. The reason was in the master&apos;s log:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;org.apache.hadoop.hbase.TableExistsException: No descriptor for _distcp_logs_e0ehek&lt;br/&gt;
        at org.apache.hadoop.hbase.util.FSTableDescriptors.get(FSTableDescriptors.java:164)&lt;br/&gt;
        at org.apache.hadoop.hbase.util.FSTableDescriptors.getAll(FSTableDescriptors.java:182)&lt;br/&gt;
        at org.apache.hadoop.hbase.master.HMaster.getHTableDescriptors(HMaster.java:1554)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.WritableRpcEngine$Server.call(WritableRpcEngine.java:364)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.HBaseServer$Handler.run(HBaseServer.java:1326)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t think we need to show a full stack (just a WARN maybe), this shouldn&apos;t kill the request (still see tables in the web UI), and why is that a TableExistsException?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12542915">HBASE-5415</key>
            <summary>FSTableDescriptors should handle random folders in hbase.root.dir better</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jdcryans">Jean-Daniel Cryans</assignee>
                                    <reporter username="jdcryans">Jean-Daniel Cryans</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Feb 2012 20:02:05 +0000</created>
                <updated>Fri, 12 Oct 2012 05:35:06 +0000</updated>
                            <resolved>Fri, 24 Feb 2012 00:42:25 +0000</resolved>
                                    <version>0.92.0</version>
                                    <fixVersion>0.92.1</fixVersion>
                    <fixVersion>0.94.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13215155" author="jdcryans" created="Thu, 23 Feb 2012 22:53:43 +0000"  >&lt;p&gt;This patch handles it by just printing a WARN, the side effect is that this method doesn&apos;t throw TableExistsException anymore (which didn&apos;t make sense anyway) so I cleaned up a bunch of code.&lt;/p&gt;</comment>
                            <comment id="13215164" author="stack" created="Thu, 23 Feb 2012 23:01:34 +0000"  >&lt;p&gt;Whats difference between miscellaneous dirs under hbase.rootdir and an actual table directory that is missing its .tableinfo file?&lt;/p&gt;

&lt;p&gt;We&apos;re changing our API when we remove TEE from public methods?&lt;/p&gt;</comment>
                            <comment id="13215175" author="jdcryans" created="Thu, 23 Feb 2012 23:06:27 +0000"  >&lt;blockquote&gt;&lt;p&gt;Whats difference between miscellaneous dirs under hbase.rootdir and an actual table directory that is missing its .tableinfo file?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Former&apos;s HTD is null, latter gets a FNFE.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;We&apos;re changing our API when we remove TEE from public methods?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Technically no, TEE (and FNFE FWIW) are both IOEs so there&apos;s no change there. I removed TEE specifically because it isn&apos;t thrown anymore.&lt;/p&gt;</comment>
                            <comment id="13215236" author="stack" created="Fri, 24 Feb 2012 00:07:45 +0000"  >&lt;blockquote&gt;&lt;p&gt;Former&apos;s HTD is null, latter gets a FNFE.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I still don&apos;t understand how we can tell the different between a misc directory in wrong place and a table directory missing its .tableinfo.  Both would look the same to the interrogating code I&apos;d think?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Technically no, TEE (and FNFE FWIW) are both IOEs so there&apos;s no change there. I removed TEE specifically because it isn&apos;t thrown anymore.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I mean, if I had client code that had a catch of a TEE, it&apos;d stop working, right?  (I&apos;d doubt such a thing exists so I&apos;m not too bad on removing this)&lt;/p&gt;</comment>
                            <comment id="13215252" author="jdcryans" created="Fri, 24 Feb 2012 00:22:44 +0000"  >&lt;blockquote&gt;&lt;p&gt;I still don&apos;t understand how we can tell the different between a misc directory in wrong place and a table directory missing its .tableinfo. Both would look the same to the interrogating code I&apos;d think?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I agree, so we used to send TEE and as you can see in the patch it never did anything special with it. Now we keep this behavior of printing something (a WARN) and then return null, which the rest of the code handles already.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I mean, if I had client code that had a catch of a TEE, it&apos;d stop working, right? (I&apos;d doubt such a thing exists so I&apos;m not too bad on removing this)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;No, since you still have to catch the IOE somehow. Also it&apos;s not part of a public interface, only HMaster and HRegionServer use TableDescriptors&lt;/p&gt;</comment>
                            <comment id="13215259" author="stack" created="Fri, 24 Feb 2012 00:27:16 +0000"  >&lt;p&gt;+1 on commit&lt;/p&gt;</comment>
                            <comment id="13215274" author="jdcryans" created="Fri, 24 Feb 2012 00:42:25 +0000"  >&lt;p&gt;Committed to branch and trunk, thanks for the review Stack.&lt;/p&gt;</comment>
                            <comment id="13215350" author="hudson" created="Fri, 24 Feb 2012 03:42:22 +0000"  >&lt;p&gt;Integrated in HBase-0.92 #301 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92/301/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92/301/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5415&quot; title=&quot;FSTableDescriptors should handle random folders in hbase.root.dir better&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5415&quot;&gt;&lt;del&gt;HBASE-5415&lt;/del&gt;&lt;/a&gt;  FSTableDescriptors should handle random folders in&lt;br/&gt;
               hbase.root.dir better (Revision 1293041)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
jdcryans : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/TableDescriptors.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/CatalogJanitor.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/DefaultLoadBalancer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/handler/TableEventHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/util/FSTableDescriptors.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/master/TestCatalogJanitor.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/util/TestFSTableDescriptors.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13215409" author="hudson" created="Fri, 24 Feb 2012 05:55:08 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-security #121 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-security/121/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-security/121/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5415&quot; title=&quot;FSTableDescriptors should handle random folders in hbase.root.dir better&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5415&quot;&gt;&lt;del&gt;HBASE-5415&lt;/del&gt;&lt;/a&gt;  FSTableDescriptors should handle random folders in&lt;br/&gt;
               hbase.root.dir better (Revision 1293042)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
jdcryans : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/TableDescriptors.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/CatalogJanitor.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/DefaultLoadBalancer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/handler/TableEventHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/FSTableDescriptors.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/master/TestCatalogJanitor.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/TestFSTableDescriptors.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13216337" author="hudson" created="Sat, 25 Feb 2012 06:08:55 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2669 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2669/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2669/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5415&quot; title=&quot;FSTableDescriptors should handle random folders in hbase.root.dir better&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5415&quot;&gt;&lt;del&gt;HBASE-5415&lt;/del&gt;&lt;/a&gt;  FSTableDescriptors should handle random folders in&lt;br/&gt;
               hbase.root.dir better (Revision 1293042)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
jdcryans : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/TableDescriptors.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/CatalogJanitor.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/DefaultLoadBalancer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/handler/TableEventHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/FSTableDescriptors.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/master/TestCatalogJanitor.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/TestFSTableDescriptors.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13222116" author="hudson" created="Mon, 5 Mar 2012 02:15:31 +0000"  >&lt;p&gt;Integrated in HBase-0.92-security #96 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92-security/96/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92-security/96/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5415&quot; title=&quot;FSTableDescriptors should handle random folders in hbase.root.dir better&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5415&quot;&gt;&lt;del&gt;HBASE-5415&lt;/del&gt;&lt;/a&gt;  FSTableDescriptors should handle random folders in&lt;br/&gt;
               hbase.root.dir better (Revision 1293041)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
jdcryans : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/TableDescriptors.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/CatalogJanitor.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/DefaultLoadBalancer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/handler/TableEventHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/util/FSTableDescriptors.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/master/TestCatalogJanitor.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/util/TestFSTableDescriptors.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12515838" name="HBASE-5415.patch" size="6391" author="jdcryans" created="Thu, 23 Feb 2012 22:53:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 23 Feb 2012 23:01:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>228201</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 41 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i069cf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34445</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>