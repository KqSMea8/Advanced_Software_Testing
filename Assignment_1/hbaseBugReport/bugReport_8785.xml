<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:58:31 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-8785/HBASE-8785.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-8785] revise zookeeper session timeout setting</title>
                <link>https://issues.apache.org/jira/browse/HBASE-8785</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Current ZK session timeout is set to 90sec., and the comment in the doc says: &quot;This setting becomes zookeeper&apos;s &apos;maxSessionTimeout&apos;&quot;. However, this comment is misleading - it doesn&apos;t always become maxSessionTimeout, min(our timeout, maxSessionTimeout) is chosen. Moreover, the default maxSessionTimeout in ZK that I&apos;m looking at is 40s, so this setting doesn&apos;t do anything.&lt;br/&gt;
Additionally, 40s. seems like a lot of time.&lt;/p&gt;

&lt;p&gt;1) Should the comment be changed to tell the user to change ZK config if they want higher timeout?&lt;br/&gt;
2) Should the setting be revised down?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12654205">HBASE-8785</key>
            <summary>revise zookeeper session timeout setting</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jdcryans">Jean-Daniel Cryans</assignee>
                                    <reporter username="sershe">Sergey Shelukhin</reporter>
                        <labels>
                    </labels>
                <created>Fri, 21 Jun 2013 17:48:15 +0000</created>
                <updated>Mon, 23 Sep 2013 19:22:33 +0000</updated>
                            <resolved>Wed, 7 Aug 2013 23:16:25 +0000</resolved>
                                    <version>0.95.1</version>
                                    <fixVersion>0.98.0</fixVersion>
                    <fixVersion>0.95.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13690561" author="lhofhansl" created="Fri, 21 Jun 2013 18:26:36 +0000"  >&lt;p&gt;Isn&apos;t the default 180s? 180s is long, indeed.&lt;br/&gt;
The trick is to find a timeout that catches actual machine failures quickly, but does not trip on temporary network glitches or GC/etc.&lt;/p&gt;</comment>
                            <comment id="13690587" author="jdcryans" created="Fri, 21 Jun 2013 18:46:50 +0000"  >&lt;p&gt;The reason it&apos;s so high is that when it&apos;s low we get more emails on the mailing list about people killing their clusters doing some huge import on a cluster with default configs.&lt;/p&gt;</comment>
                            <comment id="13690741" author="sershe" created="Fri, 21 Jun 2013 21:30:28 +0000"  >&lt;p&gt;I see it&apos;s changed to 90s on trunk.&lt;br/&gt;
Regardless, as I said by default it won&apos;t apply because ZK default is 40s, and minimum is taken.&lt;/p&gt;</comment>
                            <comment id="13691026" author="stack" created="Sat, 22 Jun 2013 03:10:36 +0000"  >&lt;p&gt;Looking in zk src, I see this in 3.4.5:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
src&lt;span class=&quot;code-comment&quot;&gt;//java/main/org/apache/zookeeper/server/quorum/QuorumPeer.java:        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; maxSessionTimeout == -1 ? tickTime * 20 : maxSessionTimeout;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If maxSessionTimeout is defined, it is what is used (Some context: &lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/zookeeper-dev/201109.mbox/%3CD3645B5B06A24B1195F6CF9041EF38AC@china.huawei.com%3E&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://mail-archives.apache.org/mod_mbox/zookeeper-dev/201109.mbox/%3CD3645B5B06A24B1195F6CF9041EF38AC@china.huawei.com%3E&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;Regards 40s, yeah, it is a long time but what JD says.  It used to be 180s in 0.94 and was made 90s in trunk.&lt;/p&gt;</comment>
                            <comment id="13692103" author="stack" created="Mon, 24 Jun 2013 16:20:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sershe&quot; class=&quot;user-hover&quot; rel=&quot;sershe&quot;&gt;Sergey Shelukhin&lt;/a&gt; This issue is not valid?&lt;/p&gt;</comment>
                            <comment id="13692165" author="sershe" created="Mon, 24 Jun 2013 17:28:18 +0000"  >&lt;p&gt;That is if maxSessionTimeout defined on ZK, not in our config.&lt;br/&gt;
I was running integration tests and saw that negotiated timeout is 40s., coming from ZK (tick * 20?)&lt;br/&gt;
So at least the comment needs to be changed imo.&lt;/p&gt;</comment>
                            <comment id="13692172" author="stack" created="Mon, 24 Jun 2013 17:37:14 +0000"  >&lt;blockquote&gt;&lt;p&gt;That is if maxSessionTimeout defined on ZK, not in our config.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Our config is zk config when we run the ensemble?&lt;/p&gt;

&lt;p&gt;We bundle 3.4.5 in 0.95/trunk so I&apos;d think the above pasted code would have an effect?&lt;/p&gt;

&lt;p&gt;Lets figure this one (I&apos;m pretty sure I&apos;ve seen sessions &amp;gt; 20 * tickTime (2s))&lt;/p&gt;</comment>
                            <comment id="13732781" author="jdcryans" created="Wed, 7 Aug 2013 21:38:43 +0000"  >&lt;p&gt;What the comment says, &quot;This setting becomes zookeeper&apos;s &apos;maxSessionTimeout&quot;, means that zookeeper.session.timeout is &quot;maxSessionTimeout&quot; for the ZK server ie if you start ZK via HBase then this is what the max timeout is. If you start your own ZK from its distro and use the defaults then it picks the client&apos;s suggested session timeout unless it exceeds the ZK server&apos;s maxSessionTimeout. For example, if ZK ships with a max default of 40 and HBase is 90, then 40 is picked but if you start ZK via HBase then 90 is picked.&lt;/p&gt;

&lt;p&gt;So on 1) if you had trouble parsing &quot;HBase passes this to the zk quorum as suggested maximum time for a session&quot; in the context of when the user isn&apos;t starting the ensemble/quorum via HBase that it won&apos;t take effect then yes I assume newbs would be even more confused. So let&apos;s clarify it.&lt;/p&gt;

&lt;p&gt;On 2) I keep it like that.&lt;/p&gt;</comment>
                            <comment id="13732803" author="stack" created="Wed, 7 Aug 2013 21:56:32 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdcryans&quot; class=&quot;user-hover&quot; rel=&quot;jdcryans&quot;&gt;Jean-Daniel Cryans&lt;/a&gt;  YOu up for a doc patch then?&lt;/p&gt;</comment>
                            <comment id="13732838" author="sershe" created="Wed, 7 Aug 2013 22:22:45 +0000"  >&lt;p&gt;Yeah, sorry, that&apos;s what I meant, I assumed ZK is standalone most of the time so HBase settings gets revised down to ZK setting.&lt;br/&gt;
The other thing is, I wonder if 40-60sec. could be enough of a timeout. Are we mostly afraid of GC pauses or disproportionate action caused by small network hiccups?&lt;/p&gt;</comment>
                            <comment id="13732842" author="jdcryans" created="Wed, 7 Aug 2013 22:26:04 +0000"  >&lt;p&gt;Attaching doc patch&lt;/p&gt;</comment>
                            <comment id="13732844" author="jdcryans" created="Wed, 7 Aug 2013 22:26:54 +0000"  >&lt;blockquote&gt;&lt;p&gt;Are we mostly afraid of GC pauses or disproportionate action caused by small network hiccups?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We&apos;re afraid of users who don&apos;t really know what they are doing, so the former.&lt;/p&gt;</comment>
                            <comment id="13732854" author="sershe" created="Wed, 7 Aug 2013 22:34:07 +0000"  >&lt;p&gt;+1 on patch&lt;/p&gt;</comment>
                            <comment id="13732905" author="jdcryans" created="Wed, 7 Aug 2013 23:16:25 +0000"  >&lt;p&gt;Committed to branch and trunk... mmm should I also fix the title since we didn&apos;t change the timeout?&lt;/p&gt;</comment>
                            <comment id="13733008" author="hudson" created="Thu, 8 Aug 2013 00:48:46 +0000"  >&lt;p&gt;SUCCESS: Integrated in hbase-0.95-on-hadoop2 #223 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95-on-hadoop2/223/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95-on-hadoop2/223/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8322&quot; title=&quot;Re-enable hbase checksums by default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8322&quot;&gt;&lt;del&gt;HBASE-8322&lt;/del&gt;&lt;/a&gt; Re-enable hbase checksums by default&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8785&quot; title=&quot;revise zookeeper session timeout setting&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8785&quot;&gt;&lt;del&gt;HBASE-8785&lt;/del&gt;&lt;/a&gt; revise zookeeper session timeout setting (jdcryans: rev 1511529)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-common/src/main/resources/hbase-default.xml&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/src/main/docbkx/performance.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13733043" author="hudson" created="Thu, 8 Aug 2013 01:40:54 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #656 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/656/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/656/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8322&quot; title=&quot;Re-enable hbase checksums by default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8322&quot;&gt;&lt;del&gt;HBASE-8322&lt;/del&gt;&lt;/a&gt; Re-enable hbase checksums by default &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8785&quot; title=&quot;revise zookeeper session timeout setting&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8785&quot;&gt;&lt;del&gt;HBASE-8785&lt;/del&gt;&lt;/a&gt; revise zookeeper session timeout setting (jdcryans: rev 1511530)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-common/src/main/resources/hbase-default.xml&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/docbkx/performance.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13733084" author="hudson" created="Thu, 8 Aug 2013 02:43:24 +0000"  >&lt;p&gt;SUCCESS: Integrated in hbase-0.95 #414 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95/414/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95/414/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8322&quot; title=&quot;Re-enable hbase checksums by default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8322&quot;&gt;&lt;del&gt;HBASE-8322&lt;/del&gt;&lt;/a&gt; Re-enable hbase checksums by default&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8785&quot; title=&quot;revise zookeeper session timeout setting&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8785&quot;&gt;&lt;del&gt;HBASE-8785&lt;/del&gt;&lt;/a&gt; revise zookeeper session timeout setting (jdcryans: rev 1511529)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-common/src/main/resources/hbase-default.xml&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/src/main/docbkx/performance.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13733104" author="hudson" created="Thu, 8 Aug 2013 03:08:43 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-TRUNK #4353 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4353/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4353/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8322&quot; title=&quot;Re-enable hbase checksums by default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8322&quot;&gt;&lt;del&gt;HBASE-8322&lt;/del&gt;&lt;/a&gt; Re-enable hbase checksums by default &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8785&quot; title=&quot;revise zookeeper session timeout setting&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8785&quot;&gt;&lt;del&gt;HBASE-8785&lt;/del&gt;&lt;/a&gt; revise zookeeper session timeout setting (jdcryans: rev 1511530)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-common/src/main/resources/hbase-default.xml&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/docbkx/performance.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12596734" name="HBASE-8785.patch" size="1861" author="jdcryans" created="Wed, 7 Aug 2013 22:26:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 21 Jun 2013 18:26:36 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>334482</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 19 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1lp67:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>334808</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>