<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:02:32 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-2513/HBASE-2513.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-2513] hbase-2414 added bug where we&apos;d tight-loop if no root available.</title>
                <link>https://issues.apache.org/jira/browse/HBASE-2513</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description></description>
                <environment></environment>
        <key id="12463720">HBASE-2513</key>
            <summary>hbase-2414 added bug where we&apos;d tight-loop if no root available.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tsuna">Benoit Sigoure</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 May 2010 23:38:08 +0000</created>
                <updated>Fri, 20 Nov 2015 12:41:48 +0000</updated>
                            <resolved>Wed, 5 May 2010 22:13:41 +0000</resolved>
                                                    <fixVersion>0.90.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12864074" author="stack" created="Tue, 4 May 2010 23:38:33 +0000"  >&lt;p&gt;Fix&lt;/p&gt;</comment>
                            <comment id="12864144" author="stack" created="Wed, 5 May 2010 04:47:55 +0000"  >&lt;p&gt;Benoit found issue in the patch I committed... I passed a fancy flag but didn&apos;t actually use it (Param even had a fat stream of javadoc).  Here is a better patch.   Please review Benoit.&lt;/p&gt;</comment>
                            <comment id="12864152" author="tsuna" created="Wed, 5 May 2010 05:02:29 +0000"  >&lt;p&gt;In your patch, you&apos;re adding a &lt;tt&gt;skipDelayedToDos&lt;/tt&gt; argument to &lt;tt&gt;RegionServerOperationQueue#process&lt;/tt&gt; but you don&apos;t use it... so I don&apos;t understand how it&apos;s supposed to fix anything&lt;/p&gt;</comment>
                            <comment id="12864206" author="tsuna" created="Wed, 5 May 2010 06:58:39 +0000"  >&lt;p&gt;Comments on v2 of the patch:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Please indent the code properly.
	&lt;ul&gt;
		&lt;li&gt;The way the condition of the &lt;tt&gt;switch&lt;/tt&gt; statement is wrapped around looks suspicious to me.&lt;/li&gt;
		&lt;li&gt;The &lt;tt&gt;if&lt;/tt&gt; statement on 1 line in &lt;tt&gt;process&lt;/tt&gt;.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;In &lt;tt&gt;process&lt;/tt&gt;, since you don&apos;t actually need the reference to the &lt;tt&gt;HServerAddress&lt;/tt&gt; of the root region, I think you should just pass a &lt;tt&gt;boolean&lt;/tt&gt; that indicates whether or not the root region is online (or, alternatively, whether or not the &quot;delayed todos&quot; should be done first, as you sort of tried to do in your first patch).&lt;/li&gt;
	&lt;li&gt;If the root region is offline, the next thing we wanna do is bring it back online.  Are we guaranteed that the next &lt;tt&gt;poll&lt;/tt&gt; on &lt;tt&gt;delayedToDoQueue&lt;/tt&gt; will give us this task?  It seems your code assumes this but I&apos;m not familiar enough with it to confirm that it&apos;s the case.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12864338" author="stack" created="Wed, 5 May 2010 14:23:21 +0000"  >&lt;p&gt;Thanks for the review Benoit.&lt;/p&gt;

&lt;p&gt;This version fixes the indentation and adds some comments that hopefully will alleviate suspicions.  While true serveraddress is not needed inside the method, it seemed sillier to me exposing the internals of how the processing of events happens up in the parent method &amp;#8211;  i.e. caller knowing about delay queue &amp;#8211; hence passing of root region location and letting the process method use it as it wants.&lt;/p&gt;

&lt;p&gt;This patch is a fix for a bug introduced by 2414.  2414 started a refactoring of master queue processing moving it out of master.  Its not done.  2512 is about finishing the work.  There is a ways to go yet before queue processing is standalone testable.  This fix is about putting back a test that I left out when I did 2414 (It was testing root region location down in the process of operations method).  As I see it, by the time 2512 is done, the queue processing will likely make use of root location and more info from master context that I&apos;ll need to pass in.&lt;/p&gt;

&lt;p&gt;I&apos;d suggest that this patch is good for the moment addressing the spin you were seeing yesterday.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="12864533" author="tsuna" created="Wed, 5 May 2010 21:46:51 +0000"  >&lt;p&gt;Trivial changes to the v3 of the patch.&lt;/p&gt;</comment>
                            <comment id="12864534" author="tsuna" created="Wed, 5 May 2010 21:47:14 +0000"  >&lt;p&gt;+1 with the trivial changes I made in the v4 attached.&lt;/p&gt;</comment>
                            <comment id="12864557" author="stack" created="Wed, 5 May 2010 22:13:41 +0000"  >&lt;p&gt;Applied branch and trunk.  Assigning to you Benoit since you did bulk of work on this.  Thanks for review.&lt;/p&gt;</comment>
                            <comment id="12866876" author="stack" created="Wed, 12 May 2010 23:52:53 +0000"  >&lt;p&gt;Marking these as fixed against 0.21.0 rather than against 0.20.5.&lt;/p&gt;</comment>
                            <comment id="15017077" author="lars_francke" created="Fri, 20 Nov 2015 12:41:48 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12443658" name="2512-fix-for-2414-bug.patch" size="2365" author="stack" created="Tue, 4 May 2010 23:38:33 +0000"/>
                            <attachment id="12443677" name="2513-v2.patch" size="2932" author="stack" created="Wed, 5 May 2010 04:47:55 +0000"/>
                            <attachment id="12443710" name="2513-v3.patch" size="3481" author="stack" created="Wed, 5 May 2010 14:23:21 +0000"/>
                            <attachment id="12443775" name="2513-v4.patch" size="3032" author="tsuna" created="Wed, 5 May 2010 21:46:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 5 May 2010 05:02:29 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26343</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hi0v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>100182</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>