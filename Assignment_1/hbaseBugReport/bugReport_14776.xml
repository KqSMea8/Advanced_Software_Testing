<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:56:21 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-14776/HBASE-14776.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-14776] Rewrite smart-apply-patch.sh to use &apos;git am&apos; or &apos;git apply&apos; rather than &apos;patch&apos;</title>
                <link>https://issues.apache.org/jira/browse/HBASE-14776</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;We require patches to be created using &apos;git format-patch&apos; or &apos;git diff&apos;, so patches should be tested using &apos;git am&apos; or &apos;git apply&apos;, not &apos;patch -pX&apos;. This causes false errors in the Jenkins patch tester.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12910893">HBASE-14776</key>
            <summary>Rewrite smart-apply-patch.sh to use &apos;git am&apos; or &apos;git apply&apos; rather than &apos;patch&apos;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="misty">Misty Stanley-Jones</reporter>
                        <labels>
                    </labels>
                <created>Fri, 6 Nov 2015 00:12:23 +0000</created>
                <updated>Mon, 26 Sep 2016 16:40:11 +0000</updated>
                            <resolved>Mon, 26 Sep 2016 16:40:10 +0000</resolved>
                                    <version>2.0.0</version>
                                                    <component>scripts</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="14992848" author="misty" created="Fri, 6 Nov 2015 01:10:36 +0000"  >&lt;p&gt;Tested it locally by running smart-apply-patch against a patch created with git format-patch and one created using git diff. Not sure how to test it in the context of the larger test-patch.sh script.&lt;/p&gt;</comment>
                            <comment id="14992934" author="busbey" created="Fri, 6 Nov 2015 01:59:53 +0000"  >&lt;p&gt;Can we make sure this is also solved in Yetus so that when there&apos;s a release we can move over to using it?&lt;/p&gt;</comment>
                            <comment id="14992947" author="misty" created="Fri, 6 Nov 2015 02:05:40 +0000"  >&lt;p&gt;I ... don&apos;t know? Not familiar with Yetus.&lt;/p&gt;</comment>
                            <comment id="14993054" author="busbey" created="Fri, 6 Nov 2015 04:03:49 +0000"  >&lt;p&gt;no worries. I checked and it looks like it does.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 PATCH_FILE=$1
-&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; [ -z &lt;span class=&quot;code-quote&quot;&gt;&quot;$PATCH_FILE&quot;&lt;/span&gt; ]; then
+&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; [ -z &lt;span class=&quot;code-quote&quot;&gt;&quot;$PATCH_FILE&quot;&lt;/span&gt; -o ! -f &lt;span class=&quot;code-quote&quot;&gt;&quot;$PATCH_FILE&quot;&lt;/span&gt; ]; then
   echo usage: $0 patch-file
   exit 1
 fi
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;won&apos;t this break the &quot;pass &apos;-&apos; for stdin&quot; bit?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-echo Going to apply patch with: $PATCH -p$PLEVEL
-$PATCH -p$PLEVEL -E &amp;lt; $PATCH_FILE
-
+&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; [ $AM_WORKS -eq 0 ]; then
+  # &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; git apply
+  git apply $PATCH_FILE
+  status=$?
+  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; [ $status -eq 0 ]; then
+    APPLY_WORKS=1
+    echo &lt;span class=&quot;code-quote&quot;&gt;&quot;Patch applies with git apply. Consider using git format-patch to create patches.&quot;&lt;/span&gt;
+    # Apply does not commit, just reset
+    git reset -q --hard
+  &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
+    echo &lt;span class=&quot;code-quote&quot;&gt;&quot;Patch does not apply with git apply.&quot;&lt;/span&gt;
+  fi
+fi
+&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; [ $AM_WORKS -eq 0 -a $APPLY_WORKS -eq 0 ]; then
+  echo &lt;span class=&quot;code-quote&quot;&gt;&quot;Could not apply the patch.&quot;&lt;/span&gt;
+  cleanup 1
+fi
 cleanup $?
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It looks like after this change we don&apos;t actually apply the patch?&lt;/p&gt;</comment>
                            <comment id="14993067" author="misty" created="Fri, 6 Nov 2015 04:17:50 +0000"  >&lt;p&gt;For the passing - for stdin, I am not sure. I didn&apos;t think so. Maybe you can  tweak it. I don&apos;t understand enough about how the script works.&lt;/p&gt;

&lt;p&gt;It didn&apos;t look like the script actually applied the patch anyway. Did it? If so, that&apos;s easy enough to accomodate. In the case of &apos;git apply, we won&apos;t be able to commit the change, and in the case of &apos;git am&apos; we will have an extra commit in the stack. It&apos;s a bit messy.&lt;/p&gt;</comment>
                            <comment id="14993084" author="hadoopqa" created="Fri, 6 Nov 2015 04:26:02 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12770923/HBASE-14776.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12770923/HBASE-14776.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit bfa36891901b96b95d82f5307642c35fd2b9f534.&lt;br/&gt;
  ATTACHMENT ID: 12770923&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+0 tests included&lt;/font&gt;.  The patch appears to be a documentation, build,&lt;br/&gt;
                        or dev-support patch that doesn&apos;t require tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16419//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16419//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16419//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16419//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16419//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16419//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16419//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16419//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15062538" author="misty" created="Thu, 17 Dec 2015 18:51:35 +0000"  >&lt;p&gt;Assigning this to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=busbey&quot; class=&quot;user-hover&quot; rel=&quot;busbey&quot;&gt;Sean Busbey&lt;/a&gt; because he already has a prototype he is using in a different project.&lt;/p&gt;</comment>
                            <comment id="15523552" author="busbey" created="Mon, 26 Sep 2016 16:40:11 +0000"  >&lt;p&gt;obviated by our move to yetus.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12770923" name="HBASE-14776.patch" size="3719" author="misty" created="Fri, 6 Nov 2015 01:10:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 6 Nov 2015 01:59:53 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2o173:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>