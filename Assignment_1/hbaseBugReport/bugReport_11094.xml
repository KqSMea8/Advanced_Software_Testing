<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:20:07 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-11094/HBASE-11094.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-11094] Distributed log replay is incompatible for rolling restarts</title>
                <link>https://issues.apache.org/jira/browse/HBASE-11094</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;0.99.0 comes with dist log replay by default (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10888&quot; title=&quot;Enable distributed log replay as default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10888&quot;&gt;&lt;del&gt;HBASE-10888&lt;/del&gt;&lt;/a&gt;). However, reading the code and discussing this with Jeffrey, we realized that the dist log replay code is not compatible with rolling upgrades from 0.98.0 and 1.0.0.&lt;/p&gt;

&lt;p&gt;The issue is that, the region server looks at it own configuration to decide whether the region should be opened in replay mode or not. The open region RPC does not contain that info. So if dist log replay is enabled on master, the master will assign the region and schedule replay tasks. If the region is opened in a RS that does not have this conf enabled, then it will happily open the region in normal mode (not replay mode) causing possible (transient) data loss. &lt;/p&gt;
</description>
                <environment></environment>
        <key id="12711078">HBASE-11094</key>
            <summary>Distributed log replay is incompatible for rolling restarts</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12704125">HBASE-10856</parent>
                                    <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jeffreyz">Jeffrey Zhong</assignee>
                                    <reporter username="enis">Enis Soztutar</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Apr 2014 01:48:38 +0000</created>
                <updated>Wed, 29 Apr 2015 02:17:57 +0000</updated>
                            <resolved>Sun, 15 Jun 2014 22:21:38 +0000</resolved>
                                                    <fixVersion>0.99.0</fixVersion>
                    <fixVersion>0.98.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>15</watches>
                                                                <comments>
                            <comment id="13983885" author="stack" created="Tue, 29 Apr 2014 02:21:03 +0000"  >&lt;p&gt;Good one lads.  Can I help w/ the bugfix?&lt;/p&gt;</comment>
                            <comment id="13983890" author="jeffreyz" created="Tue, 29 Apr 2014 02:24:24 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=saint.ack%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;saint.ack@gmail.com&quot;&gt;Stack&lt;/a&gt;! Let me firstly give a try.&lt;/p&gt;</comment>
                            <comment id="13983910" author="enis" created="Tue, 29 Apr 2014 02:42:53 +0000"  >&lt;p&gt;Fine with me as long as it is fixed : ) &lt;/p&gt;</comment>
                            <comment id="13993200" author="jeffreyz" created="Thu, 8 May 2014 22:28:06 +0000"  >&lt;p&gt;The patch is inflated by PB changes. In the patch, I did the following:&lt;/p&gt;

&lt;p&gt;1) During region open request, we pass a isOpenForLogReplay flag. If a region is opened for recovery purpose and current RS hasn&apos;t distributedLogReplay on, just fail the region open request&lt;br/&gt;
2) When SplitLogWorker pick work items, it will verify if current work item recovery mode is matching current RS&apos;s log recovery mode.(splitting or replay) otherwise not pick it up.&lt;br/&gt;
3) We have existing logic where HMaster will recreate all unsigned work items in ZK upon restart. Therefore, unsigned ZK workitems can reflect &lt;/p&gt;

&lt;p&gt;Release Note: You have to drain all remaining split log work items before rolling upgrade/change distributedLogReplay config  &lt;/p&gt;</comment>
                            <comment id="13993366" author="hadoopqa" created="Fri, 9 May 2014 03:59:46 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12644031/hbase-11094.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12644031/hbase-11094.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12644031&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 10 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +      result = result &amp;amp;&amp;amp; (hasIsOpenForDistributedLogReplay() == other.hasIsOpenForDistributedLogReplay());&lt;br/&gt;
+              new java.lang.String[] &lt;/p&gt;
{ &quot;OpenInfo&quot;, &quot;ServerStartCode&quot;, &quot;IsOpenForDistributedLogReplay&quot;, }
&lt;p&gt;);&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9486//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9486//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9486//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9486//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9486//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9486//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9486//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9486//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9486//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9486//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9486//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9486//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9486//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9486//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9486//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9486//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9486//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9486//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9486//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9486//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9486//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9486//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13994083" author="jeffreyz" created="Sat, 10 May 2014 00:19:36 +0000"  >&lt;blockquote&gt;
&lt;p&gt;-1 lineLengths. The patch introduces the following lines longer than 100:&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Those lines are generated by PB not &quot;my code&quot;.&lt;/p&gt;</comment>
                            <comment id="14006707" author="enis" created="Fri, 23 May 2014 01:55:09 +0000"  >&lt;p&gt;Jeffrey the patch attached contains changes to PB generated classes that are not touched by the patch (mapreduce.proto, etc), and these things should not be there: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-       * &amp;lt;code&amp;gt;optional .TableSchema table = 1;&amp;lt;/code&amp;gt;
+       * &amp;lt;code&amp;gt;optional .TableSchema table = 3;&amp;lt;/code&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Can you regenerate the patch pls. &lt;/p&gt;</comment>
                            <comment id="14006720" author="enis" created="Fri, 23 May 2014 02:16:50 +0000"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;This should go inside the  RegionOpenInfo, not OpenRegionRequest. OpenRegionRequest is for multiple regions. Different regions can be in diferent log replay state.
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-comment&quot;&gt;// open region &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; distributedLogReplay
&lt;/span&gt;+  optional bool isOpenForDistributedLogReplay = 3;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;Small typo:
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;+      &lt;span class=&quot;code-comment&quot;&gt;// check &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; current RS has distributedLogReplayh on&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+        &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ServiceException(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DoNotRetryIOException(&lt;span class=&quot;code-quote&quot;&gt;&quot;This OpenRegion request is opening &quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Once that is thrown, do we retry on a different server? Do we run out of retries? &lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;At a higher level, on a rolling restart cluster, even if the master has upgraded, 0.98 RS&apos;s won&apos;t execute the new SLW and RSRpcServices changes in the patch. So even though the master will create the split task for replay, one of the 0.98 RS&apos;s can grab the task and do a split log instead, right? Can also happen that some of the log files for the same server are split and some are replayed.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14007835" author="enis" created="Fri, 23 May 2014 22:56:17 +0000"  >&lt;p&gt;After some offline discussions with Jeffrey, it seems that we do not want to add a lot of complexity for dealing with this incapability. Should we disable the feature by default again, commit this patch, and re-enable it post 1.0? If we commit something like the attached patch, it would mean rolling restarts from 1.0 to 1.1 (if it enables by default) will not be broken, but 0.98 -&amp;gt; 1.1 will be. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=saint.ack%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;saint.ack@gmail.com&quot;&gt;Stack&lt;/a&gt; wdyt? &lt;/p&gt;</comment>
                            <comment id="14007894" author="jeffreyz" created="Fri, 23 May 2014 23:46:54 +0000"  >&lt;p&gt;The v2 patch addressed &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; comments.&lt;/p&gt;</comment>
                            <comment id="14007902" author="jeffreyz" created="Fri, 23 May 2014 23:57:19 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; for the comments!&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;the patch attached contains changes to PB generated classes that are not touched by the patch (mapreduce.proto&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;That&apos;s the leftover from others. Even we run protobuf compile against trunk branch without my changes, the mapreduce changes still shows up.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;This should go inside the RegionOpenInfo&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Fixed in v2.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Once that is thrown, do we retry on a different server? Do we run out of retries&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;It will retry though I still created a new exception in v2 so that it&apos;s more explicit.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;0.98 RS&apos;s won&apos;t execute the new SLW and RSRpcServices changes in the patch&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;That&apos;s right. The old code doesn&apos;t have the change so we cannot do a rolling upgrade(have to stop &amp;amp; restart everything). There are some options discussed with Enis offline but not clean and one time effort. It seems we still need to turn it off by default for 1.0 to support rolling upgrade.  &lt;/p&gt;</comment>
                            <comment id="14008230" author="stack" created="Sat, 24 May 2014 23:01:02 +0000"  >&lt;blockquote&gt;&lt;p&gt;If we commit something like the attached patch, it would mean rolling restarts from 1.0 to 1.1 (if it enables by default) will not be broken, but 0.98 -&amp;gt; 1.1 will be. Stack wdyt?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sorry.  Do you mean 0.98 to 1.1 in the above?  Or did you mean 0.98 to 1.0?  If the former, I think it ok to require you go via 1.0? (I like this feature so pardon my reluctance at going without for one more release).&lt;/p&gt;</comment>
                            <comment id="14008235" author="stack" created="Sat, 24 May 2014 23:23:39 +0000"  >&lt;blockquote&gt;&lt;p&gt;Release Note: You have to drain all remaining split log work items before rolling upgrade/change distributedLogReplay config&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;How does operator know when this has been done?&lt;/p&gt;

&lt;p&gt;Did we decide the exception subpackage an anti-pattern?  Or maybe it was ok for new exceptions?  (Im talking about location for RegionServerConfigMismatchException).&lt;/p&gt;

&lt;p&gt;+  * @param isOpenForReplay&lt;/p&gt;

&lt;p&gt;Above is the name of the method, not the name of the attribute.  Suggest rename as openForReplay&lt;/p&gt;

&lt;p&gt;Yeah, change this name too:&lt;/p&gt;

&lt;p&gt;+    optional bool isOpenForDistributedLogReplay = 4;&lt;/p&gt;

&lt;p&gt;Its not possible to mix old and new style log splitting in the one cluster?&lt;/p&gt;

&lt;p&gt;So, IIRC, its the RS that does the replay of log edits?  The master has already opened the regions before it assigns out the split log task?  Yeah, I suppose its not possible for a mix of both types of replay in a cluster.&lt;/p&gt;

&lt;p&gt;Worse case would be crash just after the Master had been upgraded?  In this case, all regionservers would respond that the regions could not be opened in replay mode?  Right?&lt;/p&gt;

&lt;p&gt;Or, if a crash after the M and the RS have been rolling restarted.  Only one RS will be able to open regions.  It could take a while  for the M to figure this out going by the below:&lt;/p&gt;

&lt;p&gt;             needNewPlan = true;&lt;br/&gt;
+            if(t instanceof RegionServerConfigMismatchException) &lt;/p&gt;
{
+              // try another server &amp;amp; reset retry count
+              i--;
+            }

&lt;p&gt;Could the rolling restart proceed during this time and in this way we&apos;d get ourselves out of the spot?&lt;/p&gt;

&lt;p&gt;What happens on non-upgraded servers when we pass the code path that this is inserted into?&lt;/p&gt;

&lt;p&gt;+      // RS &amp;amp; Master have to see the same configuration values&lt;br/&gt;
+      if((slt.getMode() == ZooKeeperProtos.SplitLogTask.RecoveryMode.UNKNOWN)&lt;br/&gt;
+         || (slt.getMode() == ZooKeeperProtos.SplitLogTask.RecoveryMode.LOG_REPLAY &amp;amp;&amp;amp; &lt;br/&gt;
+            !HLogSplitter.isDistributedLogReplay(conf)) &lt;br/&gt;
+         || (slt.getMode() == ZooKeeperProtos.SplitLogTask.RecoveryMode.LOG_SPLITTING &amp;amp;&amp;amp;&lt;br/&gt;
+            HLogSplitter.isDistributedLogReplay(conf))) &lt;/p&gt;
{
+        LOG.debug(&quot;Didn&apos;t grab Task=&quot; + path + &quot; because recovery mode isn&apos;t expected. Current &quot; +
+        		&quot;task has recovery mode=&quot; + slt.getMode());
+        return;
+      }

&lt;p&gt;The solution is pretty clean.  What would happen in the above scenarios?&lt;/p&gt;

&lt;p&gt;We could go another version without turning on this feature but when we go to turn it on the next time, will we run into a new issue that precludes our making it the default?&lt;/p&gt;

&lt;p&gt;What if we turn it on by default but add to the release notes that IF YOU ARE GOING TO ROLLING RESTART, turn this off?  That too exotic?&lt;/p&gt;

&lt;p&gt;Good stuff lads.&lt;/p&gt;</comment>
                            <comment id="14009004" author="apurtell" created="Mon, 26 May 2014 18:26:17 +0000"  >&lt;blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Release Note: You have to drain all remaining split log work items before rolling upgrade/change distributedLogReplay config&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;How does operator know when this has been done?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This reminds me of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10544&quot; title=&quot;Surface completion state of global administrative actions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10544&quot;&gt;HBASE-10544&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14009261" author="jeffreyz" created="Tue, 27 May 2014 04:14:16 +0000"  >&lt;p&gt;Thanks for the comments!&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;How does operator know when this has been done?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10544&quot; title=&quot;Surface completion state of global administrative actions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10544&quot;&gt;HBASE-10544&lt;/a&gt; will definitely help. In the meantime, an administrator needs to wait for all split tasks under znode splitLogZNode clear and then restart master &amp;amp; then all region servers. &lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Im talking about location for RegionServerConfigMismatchException&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Any suggestion where I should put it?&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Suggest rename as openForReplay. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Ok. I&apos;ll change the name in the next patch.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Or, if a crash after the M and the RS have been rolling restarted.  Only one RS will be able to open regions.  It could take a while  for the M to figure this out going by the below&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes for regions in recovery while for a normal(without any recovery work) region move/open will not be affected. Also rolling restart of RSs shouldn&apos;t take long time.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;What happens on non-upgraded servers when we pass the code path that this is inserted into?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;That&apos;s the reason that blocks rolling upgrade. If both old &amp;amp; upgraded code are aware of different recovery mode(including the JIRA patch), we&apos;re fine.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt; What would happen in the above scenarios?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The above code make sure SplitLogWorker only grab split log task intended with the same recovery mode. &lt;/p&gt;

</comment>
                            <comment id="14009908" author="jeffreyz" created="Tue, 27 May 2014 17:11:59 +0000"  >&lt;p&gt;The v3 patch addressed &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=saint.ack%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;saint.ack@gmail.com&quot;&gt;Stack&lt;/a&gt; comments. Thanks.&lt;/p&gt;</comment>
                            <comment id="14009922" author="hadoopqa" created="Tue, 27 May 2014 17:22:50 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12646940/hbase-11094-v3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12646940/hbase-11094-v3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12646940&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 13 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9603//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9603//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14010180" author="stack" created="Tue, 27 May 2014 19:38:31 +0000"  >&lt;p&gt;I took a quick looks.  Seems good to me.&lt;/p&gt;

&lt;p&gt;How to proceed?  Commit this with fat release note and a note in the 1.0 doc that we need to include in the upgrade doc the steps this issues requires rolling upgrading and then discuss on dev in 1.0 thread if we should turn off distributed log replay for 1.0?&lt;/p&gt;</comment>
                            <comment id="14010307" author="jeffreyz" created="Tue, 27 May 2014 21:33:40 +0000"  >&lt;p&gt;Rebase to master branch.&lt;/p&gt;</comment>
                            <comment id="14010308" author="jeffreyz" created="Tue, 27 May 2014 21:33:45 +0000"  >&lt;p&gt;Since there are still two/three months away from 1.0 being cut, I&apos;d suggest I can commit this patch and close the JIRA. Open a new one to set distributedLogReplay off by default and wait till we&apos;re about to cut 1.0 with a clear way on what will be included in 1.0 and rolling upgrading strategy by then.&lt;/p&gt;</comment>
                            <comment id="14010320" author="stack" created="Tue, 27 May 2014 21:38:54 +0000"  >&lt;p&gt;Sounds good to me.&lt;/p&gt;</comment>
                            <comment id="14013190" author="enis" created="Fri, 30 May 2014 01:33:15 +0000"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Agreed with Stack. This should not be in the exceptions package. Also not in hbase-client, but hbase-server.
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+++ hbase-client/src/main/java/org/apache/hadoop/hbase/exceptions/RegionServerConfigMismatchException.java
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;Instead of SplitLogTask getting conf, can we pass directly the mode to constructor. SLT should be like a POJO. Also when the worker creates tasks, should it set the mode as well? It seems that it is just setting the mode right now to UNKNOWN for everything other than UNASSIGNED.&lt;/li&gt;
	&lt;li&gt;In case of task resubmit, can it be the case that the master has changed configuration? Should we get the mode from existing node, and set it to the new task?&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Some offline discussions with Jeffrey:
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;It seems that this will be simpler if the region servers do not look into their confs, but just use whatever the split log task or region assignment tells them.&lt;/li&gt;
		&lt;li&gt;If there are split log tasks in master restart, but the master now has a different configuration for replay, we can abort the master, or wait for all the tasks to drain until we change to the new configuration.
&lt;blockquote&gt;&lt;p&gt;How to proceed? Commit this with fat release note and a note in the 1.0 doc that we need to include in the upgrade doc the steps this issues requires rolling upgrading and then discuss on dev in 1.0 thread if we should turn off distributed log replay for 1.0?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;makes sense.&lt;/p&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14013730" author="stack" created="Fri, 30 May 2014 14:59:34 +0000"  >&lt;blockquote&gt;&lt;p&gt;It seems that this will be simpler if the region servers do not look into their confs, but just use whatever the split log task or region assignment tells them.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;There is precedent for this.  The RS does not fully start until it has talked to Master and gotten a few critical configs passed from the Master (rather than reading its own local values).&lt;/p&gt;

&lt;p&gt;Nice work lads.&lt;/p&gt;</comment>
                            <comment id="14016141" author="jeffreyz" created="Tue, 3 Jun 2014 01:57:21 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; for the review! The v4 patch covers Enis comments. Basically, we only keep log splitting/replay config setting in master(splitlogmanager) and region server will use what&apos;s told by master.&lt;/p&gt;

&lt;p&gt;When log recovery mode config setting is changed and restart master, master will delay its recovery mode update till all outstanding log split tasks drained in order to avoid asking people manually check the drain status(basically no release note for the JIRA) &lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="14016164" author="hadoopqa" created="Tue, 3 Jun 2014 02:56:05 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12648054/hbase-11094-v4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12648054/hbase-11094-v4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12648054&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 26 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +        result = result &amp;amp;&amp;amp; (hasOpenForDistributedLogReplay() == other.hasOpenForDistributedLogReplay());&lt;br/&gt;
+              new java.lang.String[] &lt;/p&gt;
{ &quot;Region&quot;, &quot;VersionOfOfflineNode&quot;, &quot;FavoredNodes&quot;, &quot;OpenForDistributedLogReplay&quot;, }
&lt;p&gt;);&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.regionserver.wal.TestLogRollingNoCluster&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9671//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9671//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9671//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9671//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9671//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9671//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9671//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9671//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9671//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9671//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9671//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9671//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9671//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9671//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9671//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9671//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9671//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9671//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9671//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9671//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9671//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9671//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14017895" author="jeffreyz" created="Wed, 4 Jun 2014 17:23:09 +0000"  >&lt;p&gt;The line length &amp;gt; 100 warning is from protobuf generated files. The TestLogRollingNoCluster doesn&apos;t fail in my env. The v5 addressed a test failure from my local full test suite run. Thanks.&lt;/p&gt;</comment>
                            <comment id="14018153" author="hadoopqa" created="Wed, 4 Jun 2014 20:47:18 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12648358/hbase-11094-v5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12648358/hbase-11094-v5.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12648358&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 29 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +        result = result &amp;amp;&amp;amp; (hasOpenForDistributedLogReplay() == other.hasOpenForDistributedLogReplay());&lt;br/&gt;
+              new java.lang.String[] &lt;/p&gt;
{ &quot;Region&quot;, &quot;VersionOfOfflineNode&quot;, &quot;FavoredNodes&quot;, &quot;OpenForDistributedLogReplay&quot;, }
&lt;p&gt;);&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 1 zombie test(s): 	at org.apache.hadoop.hbase.regionserver.wal.TestLogRolling.testLogRollOnDatanodeDeath(TestLogRolling.java:371)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9691//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9691//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9691//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9691//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9691//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9691//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9691//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9691//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9691//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9691//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9691//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9691//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9691//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9691//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9691//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9691//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9691//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9691//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9691//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9691//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9691//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9691//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14027156" author="jeffreyz" created="Tue, 10 Jun 2014 22:41:19 +0000"  >&lt;p&gt;Rebase &amp;amp; resubmit.&lt;/p&gt;</comment>
                            <comment id="14027260" author="hadoopqa" created="Wed, 11 Jun 2014 00:28:54 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12649686/hbase-11094-v5.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12649686/hbase-11094-v5.1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12649686&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 35 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +        result = result &amp;amp;&amp;amp; (hasOpenForDistributedLogReplay() == other.hasOpenForDistributedLogReplay());&lt;br/&gt;
+              new java.lang.String[] &lt;/p&gt;
{ &quot;Region&quot;, &quot;VersionOfOfflineNode&quot;, &quot;FavoredNodes&quot;, &quot;OpenForDistributedLogReplay&quot;, }
&lt;p&gt;);&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 1 zombie test(s): 	at org.apache.hadoop.hbase.regionserver.TestHRegion.testWritesWhileGetting(TestHRegion.java:3499)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9738//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9738//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9738//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9738//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9738//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9738//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9738//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9738//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9738//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9738//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9738//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9738//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9738//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9738//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9738//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9738//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9738//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9738//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9738//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9738//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9738//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9738//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14027354" author="hadoopqa" created="Wed, 11 Jun 2014 02:48:30 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12649723/hbase-11094-v5.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12649723/hbase-11094-v5.1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12649723&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 35 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +        result = result &amp;amp;&amp;amp; (hasOpenForDistributedLogReplay() == other.hasOpenForDistributedLogReplay());&lt;br/&gt;
+              new java.lang.String[] &lt;/p&gt;
{ &quot;Region&quot;, &quot;VersionOfOfflineNode&quot;, &quot;FavoredNodes&quot;, &quot;OpenForDistributedLogReplay&quot;, }
&lt;p&gt;);&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9739//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9739//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9739//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9739//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9739//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9739//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9739//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9739//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9739//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9739//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9739//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9739//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9739//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9739//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9739//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9739//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9739//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9739//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9739//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9739//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9739//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9739//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14028150" author="jeffreyz" created="Wed, 11 Jun 2014 18:20:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=saint.ack%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;saint.ack@gmail.com&quot;&gt;Stack&lt;/a&gt; &amp;amp; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; are you all right for me to check it in? Once 1.0 branch is cut, I&apos;ll create a JIRA to turn distributedLogReplay off by default depends on the rolling upgrade story for 1.0. Thanks.&lt;/p&gt;</comment>
                            <comment id="14028749" author="enis" created="Thu, 12 Jun 2014 02:20:48 +0000"  >&lt;p&gt;From my understanding of the patch, MasterFS has a volatile replay mode that can only change once all existing split log tasks are drained. Once that happens, all new tasks are created with this new mode. &lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Do we still need the changes in open Region RPC? Can we use the region in zk under replaying nodes be the canonical state?&lt;/li&gt;
	&lt;li&gt;Is this relevant?
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+++ hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestSplitTransactionOnCluster.java
+      cluster.startRegionServer();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Is this relevant?
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; slaves = 3; &lt;span class=&quot;code-comment&quot;&gt;// also used &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; testing HTable pool size
&lt;/span&gt;+  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; slaves = 5; &lt;span class=&quot;code-comment&quot;&gt;// also used &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; testing HTable pool size&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Wrong log name:
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testGetPreviousRecoveryMode() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
+    LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;testNotAcquireTaskOfDifferentRecoveryMode&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14028817" author="jeffreyz" created="Thu, 12 Jun 2014 04:39:28 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; for the reviews! &lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Once that happens, all new tasks are created with this new mode.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Do we still need the changes in open Region RPC? Can we use the region in zk under replaying nodes be the canonical state?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Because the source of truth is in Master and also the recovering state in ZK might be stale. Eventually in the future, the recovering state in ZK will be removed as well. &lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Is this relevant?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Both test cases fixed in the patch are flaky so just fix them in the patch as they&apos;re trivial.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Wrong log name:&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Good catch! I&apos;ll fix this when I commit the patch.&lt;/p&gt;

&lt;p&gt;I&apos;m targeting check in this patch Friday if there is no objections.&lt;/p&gt;



</comment>
                            <comment id="14029774" author="enis" created="Thu, 12 Jun 2014 20:44:21 +0000"  >&lt;p&gt;Ok, thanks Jeffrey. +1 for the patch. &lt;/p&gt;</comment>
                            <comment id="14030261" author="jeffreyz" created="Fri, 13 Jun 2014 04:56:38 +0000"  >&lt;p&gt;Thanks for all the reviews! I&apos;ve integrated the fix into master branch. Will apply the patch to 0.98 after I resolve some conflicts &amp;amp; run full test suit.&lt;/p&gt;</comment>
                            <comment id="14030360" author="hudson" created="Fri, 13 Jun 2014 07:58:27 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #5200 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/5200/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/5200/&lt;/a&gt;)&lt;br/&gt;
HBase-11094: Distributed log replay is incompatible for rolling restarts (jeffreyz: rev 55cecc9679ca04796450d75e72cfc89e1f3b4970)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/SplitLogManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestWALReplay.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestSplitTransactionOnCluster.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/ServerManager.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestMasterFileSystem.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/SplitLogTask.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogSplitter.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/AdminProtos.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/protobuf/Admin.proto&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/MasterFileSystem.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/handler/ServerShutdownHandler.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestHLogMethods.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/SplitLogWorker.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestSplitLogManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/TestSerialization.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/protobuf/ZooKeeper.proto&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/handler/HLogSplitterHandler.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestHLogSplit.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestAssignmentManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestSplitLogWorker.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestMultiParallel.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/handler/MetaServerShutdownHandler.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/ZooKeeperProtos.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionServerNoMaster.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RSRpcServices.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14030851" author="stack" created="Fri, 13 Jun 2014 17:07:14 +0000"  >&lt;blockquote&gt;&lt;p&gt;Once 1.0 branch is cut, I&apos;ll create a JIRA to turn distributedLogReplay off by default depends on the rolling upgrade story for 1.0. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;What does the above mean &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jeffreyz&quot; class=&quot;user-hover&quot; rel=&quot;jeffreyz&quot;&gt;Jeffrey Zhong&lt;/a&gt;?&lt;/p&gt;

&lt;p&gt;Can you add a release note saying what has been implemented?  I know you say &apos;(basically no release note for the JIRA)&apos; above but would be good for us devs trying to follow along (or who may have to debug it in future).  Please describe what was implemented&lt;/p&gt;

&lt;p&gt;To be clear, mode is LOG_REPLAY currently in master?&lt;/p&gt;

&lt;p&gt;Reading over the patch, it looks good.  I&apos;m not sure I am clear on all that is going on but I like the sound of it (smile).&lt;/p&gt;


</comment>
                            <comment id="14031147" author="jeffreyz" created="Fri, 13 Jun 2014 20:50:20 +0000"  >&lt;blockquote&gt;
&lt;p&gt;What does the above mean Jeffrey Zhong?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I&apos;ll leave distributedLogReplay on by default in master branch. Since we can&apos;t rolling upgrade from pre 0.98.4 version to 1.0, I&apos;ll create a JIRA to see if we need to turn it off by default to support rolling upgrade to 1.0. &lt;/p&gt;

{qutoe}
&lt;p&gt;Can you add a release note saying what has been implemented?&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Done.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;To be clear, mode is LOG_REPLAY currently in master?&lt;/p&gt;
&lt;blockquote&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes.&lt;/p&gt;

&lt;p&gt;Thanks for looking at this again.&lt;/p&gt;</comment>
                            <comment id="14032025" author="hudson" created="Sun, 15 Jun 2014 21:36:04 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98-on-Hadoop-1.1 #319 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/319/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/319/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11094&quot; title=&quot;Distributed log replay is incompatible for rolling restarts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11094&quot;&gt;&lt;del&gt;HBASE-11094&lt;/del&gt;&lt;/a&gt;: Distributed log replay is incompatible for rolling restarts (jeffreyz: rev 34ae4a94d0795850642915f117b7d1257b418ca5)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/handler/ServerShutdownHandler.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestSplitTransactionOnCluster.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/handler/HLogSplitterHandler.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/SplitLogWorker.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/SplitLogManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestHLogMethods.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionServerNoMaster.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestAssignmentManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogSplitter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestSplitLogWorker.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestDistributedLogSplitting.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestSplitLogManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/handler/MetaServerShutdownHandler.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestHLogSplit.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestMultiParallel.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/MasterFileSystem.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/protobuf/ZooKeeper.proto&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/TestSerialization.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/SplitLogTask.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/ServerManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestMasterFileSystem.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/AdminProtos.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/ZooKeeperProtos.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/protobuf/Admin.proto&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestWALReplay.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14032028" author="hudson" created="Sun, 15 Jun 2014 21:39:36 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.98 #338 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/338/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/338/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11094&quot; title=&quot;Distributed log replay is incompatible for rolling restarts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11094&quot;&gt;&lt;del&gt;HBASE-11094&lt;/del&gt;&lt;/a&gt;: Distributed log replay is incompatible for rolling restarts (jeffreyz: rev 34ae4a94d0795850642915f117b7d1257b418ca5)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogSplitter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestHLogSplit.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/AdminProtos.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/handler/HLogSplitterHandler.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/SplitLogManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/handler/ServerShutdownHandler.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionServerNoMaster.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/protobuf/Admin.proto&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/ServerManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/SplitLogWorker.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestSplitLogWorker.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/MasterFileSystem.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestSplitLogManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/TestSerialization.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestDistributedLogSplitting.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/SplitLogTask.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/handler/MetaServerShutdownHandler.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/protobuf/ZooKeeper.proto&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestHLogMethods.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestAssignmentManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestSplitTransactionOnCluster.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestWALReplay.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestMasterFileSystem.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/ZooKeeperProtos.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestMultiParallel.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14032036" author="jeffreyz" created="Sun, 15 Jun 2014 22:21:38 +0000"  >&lt;p&gt;I&apos;ve integrated the patch to 0.98 branch as well. Thanks.&lt;/p&gt;</comment>
                            <comment id="14032056" author="hudson" created="Mon, 16 Jun 2014 00:03:04 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-TRUNK #5209 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/5209/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/5209/&lt;/a&gt;)&lt;br/&gt;
hbase-11094: &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11094(addendum&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-11094(addendum&lt;/a&gt;) (jeffreyz: rev 5136c70554b6ead2f91e99b53389b10710639127)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RSRpcServices.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14330877" author="enis" created="Sat, 21 Feb 2015 23:31:50 +0000"  >&lt;p&gt;Closing this issue after 0.99.0 release. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12825602">HBASE-13584</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12646636" name="hbase-11094-v2.patch" size="99532" author="jeffreyz" created="Fri, 23 May 2014 23:46:54 +0000"/>
                            <attachment id="12646990" name="hbase-11094-v3.patch" size="69356" author="jeffreyz" created="Tue, 27 May 2014 21:33:40 +0000"/>
                            <attachment id="12648054" name="hbase-11094-v4.patch" size="117248" author="jeffreyz" created="Tue, 3 Jun 2014 01:57:21 +0000"/>
                            <attachment id="12649723" name="hbase-11094-v5.1.patch" size="120854" author="jeffreyz" created="Wed, 11 Jun 2014 01:09:04 +0000"/>
                            <attachment id="12648358" name="hbase-11094-v5.patch" size="119142" author="jeffreyz" created="Wed, 4 Jun 2014 17:23:09 +0000"/>
                            <attachment id="12644031" name="hbase-11094.patch" size="90027" author="jeffreyz" created="Thu, 8 May 2014 22:28:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 29 Apr 2014 02:21:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>389399</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1v2on:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>389642</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Configuration setting &amp;quot;hbase.master.distributed.log.replay&amp;quot; is only used by Master(source of truth) and region servers which participate in recovery process will recover region servers either in log splitting or replay mode depending on what setting is told by Master.&lt;br/&gt;
&lt;br/&gt;
When &amp;quot;hbase.master.distributed.log.replay&amp;quot; configuration setting changes, master will wait for all existing log recovery work items drain before it applies the new setting in order not to mix different recovery mode &amp;amp; ease administrator duty to manually wait all recovery work is done and then restart master. </customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>