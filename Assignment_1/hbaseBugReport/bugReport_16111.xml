<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 21:10:25 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-16111/HBASE-16111.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-16111] Truncate preserve shell command is broken</title>
                <link>https://issues.apache.org/jira/browse/HBASE-16111</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;On a recent version of master I get this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hbase(main):001:0&amp;gt; truncate_preserve &apos;TestTable&apos;

ERROR: undefined local variable or method `table&apos; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; #&amp;lt;Hbase::Admin:0x2fdf17dc&amp;gt;

Here is some help &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; command:
  Disables, drops and recreates the specified table &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; still maintaing the previous region boundaries.

Took 0.0290 seconds
hbase(main):002:0&amp;gt; truncate &apos;TestTable&apos;
Truncating &apos;TestTable&apos; table (it may take a &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt;):
Disabling table...
Truncating table...
Took 10.0040 seconds
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12982811">HBASE-16111</key>
            <summary>Truncate preserve shell command is broken</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chenheng">Heng Chen</assignee>
                                    <reporter username="eclark">Elliott Clark</reporter>
                        <labels>
                            <label>shell</label>
                    </labels>
                <created>Fri, 24 Jun 2016 23:58:34 +0000</created>
                <updated>Mon, 27 Jun 2016 11:41:32 +0000</updated>
                            <resolved>Mon, 27 Jun 2016 08:26:45 +0000</resolved>
                                                    <fixVersion>2.0.0</fixVersion>
                                    <component>shell</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="15350496" author="chenheng" created="Mon, 27 Jun 2016 07:09:26 +0000"  >&lt;p&gt;It was introduced by &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
commit 15c03fd1c97c271aca6dc30feab35ec0c9f8edbe
Author: Apekshit Sharma &amp;lt;appy@apache.org&amp;gt;
Date:   Mon Jun 6 13:35:06 2016 -0700

    HBASE-15965
    - Testing by executing a command will cover the exact path users will trigger, so its better then directly calling library functions in tests. Changing the tests to use @shell.command(:

    Norm change:
    Commands should print the output user would like to see, but in the end, should also &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; the relevant value. This way:
    - Tests can use returned value to check that functionality works
    - Tests can capture stdout to &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; particular kind of output user should see.
    - We &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; not print the &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; value in interactive mode and keep the output clean. See Shell.command() function.

    Bugs found due to &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; change:
    - Uncovered bug in major_compact.rb with &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; approach. It was calling admin.majorCompact() which doesn&apos;t exist but our tests didn&apos;t &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; it since they directly tested admin.major_comp
    - Enabled TestReplicationShell. If it&apos;s bad, flaky infra will take care of it.

    Change-Id: I5d8af16bf477a79a2f526a5bf11c245b02b7d276
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;Fix it now. &lt;/p&gt;</comment>
                            <comment id="15350517" author="mbertozzi" created="Mon, 27 Jun 2016 07:31:27 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15350626" author="chenheng" created="Mon, 27 Jun 2016 08:25:32 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbertozzi&quot; class=&quot;user-hover&quot; rel=&quot;mbertozzi&quot;&gt;Matteo Bertozzi&lt;/a&gt; for your review. Push to master&lt;/p&gt;</comment>
                            <comment id="15350804" author="hudson" created="Mon, 27 Jun 2016 11:20:04 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-Trunk_matrix #1123 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-Trunk_matrix/1123/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-Trunk_matrix/1123/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-16111&quot; title=&quot;Truncate preserve shell command is broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-16111&quot;&gt;&lt;del&gt;HBASE-16111&lt;/del&gt;&lt;/a&gt; Truncate preserve shell command is broken (chenheng: rev e05f527991356405ad7186dd48d9d06201695388)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/hbase/admin.rb&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15350828" author="appy" created="Mon, 27 Jun 2016 11:39:47 +0000"  >&lt;p&gt;Since the patch in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15965&quot; title=&quot;Shell test changes. Use @shell.command instead directly calling functions in admin.rb and other libraries.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15965&quot;&gt;&lt;del&gt;HBASE-15965&lt;/del&gt;&lt;/a&gt; compiled and passed TestShell, i believe there&apos;s no test for truncate_preserve otherwise it would have caught this basic error. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
Sorry for causing this bug.&lt;/p&gt;</comment>
                            <comment id="15350835" author="appy" created="Mon, 27 Jun 2016 11:41:32 +0000"  >&lt;p&gt;Created &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-16120&quot; title=&quot;Add shell test for truncate_preserve&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-16120&quot;&gt;HBASE-16120&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12813608" name="HBASE-16111.patch" size="1110" author="chenheng" created="Mon, 27 Jun 2016 07:09:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 27 Jun 2016 07:09:26 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            24 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30207:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>