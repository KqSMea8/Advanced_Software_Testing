<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:58:09 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-8751/HBASE-8751.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-8751] Enable peer cluster to choose/change the ColumnFamilies/Tables it really want to replicate from a source cluster</title>
                <link>https://issues.apache.org/jira/browse/HBASE-8751</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Consider scenarios (all cf are with replication-scope=1):&lt;/p&gt;

&lt;p&gt;1) cluster S has 3 tables, table A has cfA,cfB, table B has cfX,cfY, table C has cf1,cf2.&lt;/p&gt;

&lt;p&gt;2) cluster X wants to replicate table A : cfA, table B : cfX and table C from cluster S.&lt;/p&gt;

&lt;p&gt;3) cluster Y wants to replicate table B : cfY, table C : cf2 from cluster S.&lt;/p&gt;

&lt;p&gt;Current replication implementation can&apos;t achieve this since it&apos;ll push the data of all the replicatable column-families from cluster S to all its peers, X/Y in this scenario.&lt;/p&gt;

&lt;p&gt;This improvement provides a fine-grained replication theme which enable peer cluster to choose the column-families/tables they really want from the source cluster:&lt;/p&gt;

&lt;p&gt;A). Set the table:cf-list for a peer when addPeer:&lt;br/&gt;
  hbase-shell&amp;gt; add_peer &apos;3&apos;, &quot;zk:1100:/hbase&quot;, &quot;table1; table2:cf1,cf2; table3:cf2&quot;&lt;/p&gt;

&lt;p&gt;B). View the table:cf-list config for a peer using show_peer_tableCFs:&lt;br/&gt;
  hbase-shell&amp;gt; show_peer_tableCFs &quot;1&quot;&lt;/p&gt;

&lt;p&gt;C). Change/set the table:cf-list for a peer using set_peer_tableCFs:&lt;br/&gt;
  hbase-shell&amp;gt; set_peer_tableCFs &apos;2&apos;, &quot;table1:cfX; table2:cf1; table3:cf1,cf2&quot;&lt;/p&gt;

&lt;p&gt;In this theme, replication-scope=1 only means a column-family CAN be replicated to other clusters, but only the &apos;table:cf-list list&apos; determines WHICH cf/table will actually be replicated to a specific peer.&lt;/p&gt;

&lt;p&gt;To provide back-compatibility, empty &apos;table:cf-list list&apos; will replicate all replicatable cf/table. (this means we don&apos;t allow a peer which replicates nothing from a source cluster, we think it&apos;s reasonable: if replicating nothing why bother adding a peer?)&lt;/p&gt;

&lt;p&gt;This improvement addresses the exact problem raised  by the first FAQ in &quot;http://hbase.apache.org/replication.html&quot;:&lt;br/&gt;
  &quot;GLOBAL means replicate? Any provision to replicate only to cluster X and not to cluster Y? or is that for later?&lt;br/&gt;
  Yes, this is for much later.&quot;&lt;/p&gt;

&lt;p&gt;I also noticed somebody mentioned &quot;replication-scope&quot; as integer rather than a boolean is for such fine-grained replication purpose, but I think extending &quot;replication-scope&quot; can&apos;t achieve the same replication granularity flexibility as providing above per-peer replication configurations.&lt;/p&gt;

&lt;p&gt;This improvement has been running smoothly in our production clusters (Xiaomi) for several months.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12653107">HBASE-8751</key>
            <summary>Enable peer cluster to choose/change the ColumnFamilies/Tables it really want to replicate from a source cluster</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fenghh">Honghua Feng</assignee>
                                    <reporter username="fenghh">Honghua Feng</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Jun 2013 02:01:17 +0000</created>
                <updated>Sat, 21 Feb 2015 23:33:49 +0000</updated>
                            <resolved>Tue, 11 Feb 2014 01:21:27 +0000</resolved>
                                                    <fixVersion>0.98.1</fixVersion>
                    <fixVersion>0.99.0</fixVersion>
                                    <component>Replication</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>16</watches>
                                                                <comments>
                            <comment id="13684905" author="fenghh" created="Mon, 17 Jun 2013 02:04:29 +0000"  >&lt;p&gt;this patch is based on code from &lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/branches/0.94&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/branches/0.94&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13684933" author="fenghh" created="Mon, 17 Jun 2013 03:01:35 +0000"  >&lt;p&gt;Showing up in the &apos;table:cf-list list&apos; doesn&apos;t guarantee a CF will be replicated: only CF with replication-scope=1 in the &apos;table:cf-list list&apos; will be replicated. &lt;/p&gt;</comment>
                            <comment id="13685791" author="apurtell" created="Mon, 17 Jun 2013 18:15:08 +0000"  >&lt;blockquote&gt;&lt;p&gt;I also noticed somebody mentioned &quot;replication-scope&quot; as integer rather than a boolean is for such fine-grained replication purpose&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That was me, a long time ago. I won&apos;t argue for it here, but let me provide an example of what was meant: What one might do is assign each unique combination of column families to an integer. E.g. &quot;cf1&quot; -&amp;gt; 1, &quot;cf1,cf2&quot; -&amp;gt; 2. Then consider a plug point for replication policies where the extension code can decide what to do when presented with an integer. In this case, find the mapping of integer to column family list, and filter accordingly. It would be more work for the user or system integrator, they&apos;d have to implement that plugin and the shell support.&lt;/p&gt;

&lt;p&gt;I was also thinking that integers could encode sensitivity, so for use cases where sensitive information must remain local, this might be a way to ensure that, and it&apos;s convenient because dominance relations between sensitivity levels map to the natural ordering of integers.&lt;/p&gt;</comment>
                            <comment id="13762885" author="fenghh" created="Tue, 10 Sep 2013 09:22:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdcryans&quot; class=&quot;user-hover&quot; rel=&quot;jdcryans&quot;&gt;Jean-Daniel Cryans&lt;/a&gt; would you please help review this patch? thanks&lt;/p&gt;</comment>
                            <comment id="13768909" author="jdcryans" created="Mon, 16 Sep 2013 22:59:00 +0000"  >&lt;p&gt;There are a lot of things in flight right now and it will take me some time to grok the current situation in replication, not that that should be completely stopping progress, but at least in your patch I see this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;&amp;gt; tableCFs = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.zkHelper.getTableCFs(peerId);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is in ReplicationSource.removeNonReplicableEdits() and that method is called for each HLog.Entry, which means that you&apos;d hit ZK from all the region servers for as many write calls as they are getting. That seems excessive.&lt;/p&gt;</comment>
                            <comment id="13768963" author="fenghh" created="Mon, 16 Sep 2013 23:44:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdcryans&quot; class=&quot;user-hover&quot; rel=&quot;jdcryans&quot;&gt;Jean-Daniel Cryans&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks for the thorough code review, but below is not true:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;This is in ReplicationSource.removeNonReplicableEdits() and that method is called for each HLog.Entry, which means that you&apos;d hit ZK from all the region servers for as many write calls as they are getting. That seems excessive.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;==&amp;gt; zkHelper.getTableCFs(peerId) delegates to ReplicationPeer.getTableCFs, and ReplicationPeer maintains the current table/cf configs in its tableCFs field and returns it per getTableCFs call. And ReplicationPeer has a tableCFTracker which is watching tableCF zk node and updates tableCFs field accordingly once tableCF zk node is changed(by user via shell). This process is similiar to the peer state(enable/disable) treatment.&lt;br/&gt;
    So tableCF zk node will be access same times as it&apos;s updated, not same times ReplicationSource.removeNonReplicableEdits() is called (for each HLog.Entry)&lt;/p&gt;</comment>
                            <comment id="13769045" author="jdcryans" created="Tue, 17 Sep 2013 00:57:08 +0000"  >&lt;blockquote&gt;&lt;p&gt;Thanks for the thorough code review,&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Heh it was far from a thorough review.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;but below is not true:&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;You&apos;re right, I was looking at getTableCFsStr instead of getTableCFs. For two methods with almost the same name, they do really different things! Normally in the HBase code when you append &quot;str&quot; or &quot;string&quot; to a method name, it just means that it does the same thing but returns a String instead. You&apos;ll have to review naming.&lt;/p&gt;

&lt;p&gt;Digging down to ReplicationPeer.tableCFs, shouldn&apos;t this be at least be made a volatile? It seems you could have some inconsistencies.&lt;/p&gt;</comment>
                            <comment id="13769173" author="fenghh" created="Tue, 17 Sep 2013 04:08:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdcryans&quot; class=&quot;user-hover&quot; rel=&quot;jdcryans&quot;&gt;Jean-Daniel Cryans&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Normally in the HBase code when you append &quot;str&quot; or &quot;string&quot; to a method name, it just means that it does the same thing but returns a String instead. You&apos;ll have to review naming.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;==&amp;gt; what about &apos;getTableCFsConfig&apos; for getTableCFsStr?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Digging down to ReplicationPeer.tableCFs, shouldn&apos;t this be at least be made a volatile? It seems you could have some inconsistencies.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;==&amp;gt; The ReplicationPeer.tableCFs map can only be updated by the (same/single) event thread of zookeeper(ZooKeeperWatcher) of ReplicationPeer, and ReplicationSource calls  zkHelper.getTableCFs(peerId) for each hlog entry. Seems not a must to declare it volatile?&lt;/p&gt;</comment>
                            <comment id="13769737" author="techbuddy" created="Tue, 17 Sep 2013 17:50:33 +0000"  >&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  The ReplicationPeer.tableCFs map can only be updated by the (same/single) event thread of zookeeper(ZooKeeperWatcher) of ReplicationPeer, and ReplicationSource calls zkHelper.getTableCFs(peerId) for each hlog entry. Seems not a must to declare it volatile?&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;p&gt;----&amp;gt; Well, even in that case the variable is being read and modified in different threads, and should therefore qualify for some form of synchronization.Hence declaring it volatile sounds necessary.What do you say?&lt;/p&gt;</comment>
                            <comment id="13770304" author="fenghh" created="Wed, 18 Sep 2013 01:48:07 +0000"  >&lt;blockquote&gt;&lt;p&gt;Well, even in that case the variable is being read and modified in different threads, and should therefore qualify for some form of synchronization.Hence declaring it volatile sounds necessary.What do you say?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Maybe some of my below understanding is wrong, point me out if any &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
1. In ReplicationSource, for each hlog entry to push, zkHelper.getTableCFs(peerId) is called to get the &apos;current&apos; tableCFs map, not use a local variable, so always the variable in main heap, not the thread local one, is used. (this is what volatile concerned, right?)&lt;br/&gt;
2. tableCFs is a map(a reference), and the event thread of zookeeper changes it in this way:&lt;br/&gt;
     Map&amp;lt;String, List&amp;lt;String&amp;gt;&amp;gt; curMap = new HashMap&amp;lt;String, List&amp;lt;String&amp;gt;&amp;gt;();&lt;br/&gt;
     ...//parse the new tableCFsConfig in zk node and populate to curMap&lt;br/&gt;
     this.tableCFs = curMap;&lt;br/&gt;
   When the ReplicationSource thread reads the tableCFs at any timepoint during ReplicationPeer updates tableCFs as above, it gets map reference to either the old tableCFs or the new tableCFs(but either is consistent), not one with inconsistent map contents. (which does occur if ReplicationPeer updates tableCFs by remove/add map entry to the tableCFs, not by switching tableCFs reference as a whole)&lt;/p&gt;

&lt;p&gt;Actually when I wrote this piece of code, I did hesitate if need add synchronization here, according above arguments I thought no need.&lt;br/&gt;
Please help clarify if my understanding is wrong, thanks&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13770453" author="techbuddy" created="Wed, 18 Sep 2013 05:31:07 +0000"  >&lt;p&gt;Well, while posting my previous comment I didn&apos;t quite notice that the only edit happening is an assignment of the tableCFs reference. And even if assignment is atomic, you can&apos;t guarantee the ordering/sequence of events (due to possible compiler optimizations) in a given thread unless an explicit memory barrier is used to establish a happens-before relationship.The reordering is completely a non-issue in the context of a single thread, but could lead to unpredictable results in a multithreaded setup if proper synchronization is avoided. So the point is not just ensuring the access of a volatile variable from the main memory but also to enforce a happens before relationship.&lt;/p&gt;

&lt;p&gt;You may want to take a look at the following&lt;/p&gt;

&lt;p&gt;An example : &lt;a href=&quot;http://stackoverflow.com/questions/5307003/java-multi-threading-atomic-reference-assignment&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://stackoverflow.com/questions/5307003/java-multi-threading-atomic-reference-assignment&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;A detailed explanation on memory barriers and synchronization (I haven&apos;t myself read it fully though &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;)&lt;br/&gt;
&lt;a href=&quot;http://www.infoq.com/articles/memory_barriers_jvm_concurrency&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.infoq.com/articles/memory_barriers_jvm_concurrency&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;PS : I haven&apos;t looked at your patch in detail, but just wanted to call out the above aspect.&lt;/p&gt;</comment>
                            <comment id="13770501" author="fenghh" created="Wed, 18 Sep 2013 06:39:13 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=techbuddy&quot; class=&quot;user-hover&quot; rel=&quot;techbuddy&quot;&gt;Santosh Banerjee&lt;/a&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13805011" author="fenghh" created="Fri, 25 Oct 2013 04:28:04 +0000"  >&lt;p&gt;ping &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdcryans&quot; class=&quot;user-hover&quot; rel=&quot;jdcryans&quot;&gt;Jean-Daniel Cryans&lt;/a&gt; : how about your review and any further feedback? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13860104" author="fenghh" created="Thu, 2 Jan 2014 10:05:05 +0000"  >&lt;p&gt;rebase on 0.94 latest branch&lt;/p&gt;</comment>
                            <comment id="13860106" author="fenghh" created="Thu, 2 Jan 2014 10:06:46 +0000"  >&lt;p&gt;the new patch also contains the change according to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdcryans&quot; class=&quot;user-hover&quot; rel=&quot;jdcryans&quot;&gt;Jean-Daniel Cryans&lt;/a&gt;&apos;s above feedback, such as method renaming and add &apos;volatile&apos; for ReplicationPeer.tableCFs&lt;/p&gt;</comment>
                            <comment id="13860112" author="fenghh" created="Thu, 2 Jan 2014 10:16:44 +0000"  >&lt;p&gt;Ping &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;,  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdcryans&quot; class=&quot;user-hover&quot; rel=&quot;jdcryans&quot;&gt;Jean-Daniel Cryans&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yuzhihong%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;yuzhihong@gmail.com&quot;&gt;Ted Yu&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt; : Would you guys evaluate this feature and also please someone of you help review the patch? thanks a lot &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;This improvement has been mentioned in the HBase FAQ(a feature as nice-to-have but should be implemented much later), we encountered the requirement for it and implemented last year, since then we deployed in all our production clusters and found it&apos;s convenient for our cluster replication management and it has run smoothly for quite a long time(over one year). We believe it can be a good feature to be merged to 0.94 main branch &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13860416" author="apurtell" created="Thu, 2 Jan 2014 18:04:41 +0000"  >&lt;p&gt;We can&apos;t introduce new functionality on 0.94 branch without introducing it to trunk and later releases first. Any chance of a patch for trunk?&lt;/p&gt;

&lt;p&gt;While it&apos;s less likely to be encountered in newer releases of HBase, from my experience operating HBase clusters (and ending up with bad state on many a testing cluster), it can be useful to clear all HBase state from ZooKeeper before a cold restart to clear up issues. It is easier and safer if an operator can clear out all HBase state in ZooKeeper as opposed to specific znodes, because some cannot be lost. I believe we still do not keep the primary/only copy of any HBase state in ZooKeeper. This patch would change that, so it deserves discussion. We should avoid that if possible in my opinion.&lt;/p&gt;</comment>
                            <comment id="13861354" author="fenghh" created="Fri, 3 Jan 2014 08:52:40 +0000"  >&lt;p&gt;I&apos;ll try to make a patch for trunk...&lt;/p&gt;</comment>
                            <comment id="13861656" author="stack" created="Fri, 3 Jan 2014 16:47:15 +0000"  >&lt;p&gt;Hmm... I thought we&apos;d written up no permanent state data in zk as an axiom in the book but I can&apos;t find it but yeah, what Andrew Purtell says is true &amp;#8211; we have gone out of our way to avoid permanent state in zk.  Thanks Feng.&lt;/p&gt;</comment>
                            <comment id="13862089" author="lhofhansl" created="Sat, 4 Jan 2014 00:42:44 +0000"  >&lt;p&gt;Yeah, no persistent state in ZK... Although, we already broke that anyway, we store the state of the replication queue there, if we blow that away we will lose (not replicate) data in the slave cluster.&lt;/p&gt;</comment>
                            <comment id="13862180" author="fenghh" created="Sat, 4 Jan 2014 03:15:03 +0000"  >&lt;p&gt;The newly added tableCFs config is a per-peer attribute, much like the peer state which indicates whether replication for this peer is currently ON or OFF, the latter is one of peer&apos;s attribute to control the peer&apos;s behavior, the newly added tableCFs is another peer attribute controlling which data will be pushed(replicated) to the peer in a user-defined(finer and more accurate, hence more flexible) granularity. Sounds natural this attribute keeps the same implementation theme as peer state, right?&lt;/p&gt;

&lt;p&gt;Currently, in either 0.94.x or in trunk, the peer state has a permanent node in zk, and for the above reason I do want to align the implementation theme of tableCFs with peer state. It would look weird if we implement differently for these two per-peer attributes. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13864606" author="apurtell" created="Tue, 7 Jan 2014 19:47:53 +0000"  >&lt;blockquote&gt;&lt;p&gt;Currently, in either 0.94.x or in trunk, the peer state has a permanent node in zk, and for the above reason I do want to align the implementation theme of tableCFs with peer state. It would look weird if we implement differently for these two per-peer attributes. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think that is a bug and we should fix it. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; And not introduce a new one here.&lt;/p&gt;</comment>
                            <comment id="13864688" author="techbuddy01" created="Tue, 7 Jan 2014 21:02:35 +0000"  >&lt;p&gt;Well,if that&apos;s a bug, then are we suggesting that the replication queue management (that currently maintains a perm state in ZK, as pointed out by Lars) also needs to be changed.&lt;/p&gt;</comment>
                            <comment id="13864743" author="apurtell" created="Tue, 7 Jan 2014 22:02:16 +0000"  >&lt;blockquote&gt;&lt;p&gt;Well,if that&apos;s a bug, then are we suggesting that the replication queue management (that currently maintains a perm state in ZK, as pointed out by Lars) also needs to be changed.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes that is what I am suggesting.&lt;/p&gt;</comment>
                            <comment id="13864744" author="apurtell" created="Tue, 7 Jan 2014 22:02:37 +0000"  >&lt;p&gt;... But as another JIRA...&lt;/p&gt;</comment>
                            <comment id="13864975" author="fenghh" created="Wed, 8 Jan 2014 01:48:58 +0000"  >&lt;blockquote&gt;&lt;p&gt;I think that is a bug and we should fix it.  And not introduce a new one here.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Ok, I&apos;ll create a new jira to fix the permanent peer-state ZKNode first, and come back to provide a new patch for this jira which can then align the tableCFs implementation with the non-permanent peer-state ZKNode. &lt;br/&gt;
Sounds good?&lt;/p&gt;</comment>
                            <comment id="13864979" author="fenghh" created="Wed, 8 Jan 2014 01:56:32 +0000"  >&lt;p&gt;A new jira &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10295&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;HBASE-10295&lt;/a&gt; is created to fix permanent peer-state ZKNode first&lt;/p&gt;</comment>
                            <comment id="13864980" author="techbuddy01" created="Wed, 8 Jan 2014 01:57:53 +0000"  >&lt;p&gt;Feng, I don&apos;t think fixing the permanent storage of peer-state in ZK is going to be enough.The larger problem is that the complete replication state including queues is maintained permanently in ZK. So I guess we should fix the perm state issue in the context of the complete replication problem.&lt;/p&gt;
</comment>
                            <comment id="13865007" author="fenghh" created="Wed, 8 Jan 2014 02:57:34 +0000"  >&lt;p&gt;I agree, but is there any plan to fix the bigger problem of fix the perm state issue in the context of the complete replication? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt; / &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt; / &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Seems there are 3 choices here:&lt;br/&gt;
1. Resolve this jira by introducing another permanent tableCFs ZKNode under peer node&lt;br/&gt;
2. Fix the permanent state issue in the context of the complete replication problem first (&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=techbuddy01&quot; class=&quot;user-hover&quot; rel=&quot;techbuddy01&quot;&gt;santosh banerjee&lt;/a&gt;&apos;s suggestion), then provide a new patch based on that new replication theme&lt;br/&gt;
3. Only fix the peer state permanent zk node and then align this jira with it (now I also think this choice is not a good choice from an overall perspective)&lt;/p&gt;

&lt;p&gt;Opinion?&lt;/p&gt;</comment>
                            <comment id="13865086" author="techbuddy01" created="Wed, 8 Jan 2014 05:23:30 +0000"  >&lt;p&gt;Option 3 is what I guess would add little value as I don&apos;t see any point in partially addressing the permanent state problem (just for the peer_state znode).&lt;/p&gt;


</comment>
                            <comment id="13877202" author="fenghh" created="Tue, 21 Jan 2014 05:18:26 +0000"  >&lt;p&gt;trunk patch attached&lt;/p&gt;</comment>
                            <comment id="13877215" author="fenghh" created="Tue, 21 Jan 2014 05:29:43 +0000"  >&lt;blockquote&gt;&lt;p&gt;We can&apos;t introduce new functionality on 0.94 branch without introducing it to trunk and later releases first. Any chance of a patch for trunk?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;patch for trunk attached&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;1. Resolve this jira by introducing another permanent tableCFs ZKNode under peer node&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;finally I prefer to take this choice, we can treat all replication zk nodes the same way and remove them under the same theme when we implement &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10295&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;HBASE-10295&lt;/a&gt; later on.&lt;/p&gt;

&lt;p&gt;this feature has run smoothly in our pruduction clusters for quite a long time. anybody please help review it? ping &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdcryans&quot; class=&quot;user-hover&quot; rel=&quot;jdcryans&quot;&gt;Jean-Daniel Cryans&lt;/a&gt; / &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt; / &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt; thanks a lot in advance &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13882138" author="jdcryans" created="Sun, 26 Jan 2014 01:52:01 +0000"  >&lt;p&gt;Quick review to get things started.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;MiniHBaseCluster master = utility1.startMiniCluster();&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This should be part of setUpBeforeClass and the shutdown should be part of tearDownAfterClass.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;htab1A.setWriteBufferSize(1024);&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t see where you are setting setAutoFlush(false) so you can remove all those lines.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;putAndWaitWithFamily(row1, f1Name, val, htab1A, htab3A);&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;val is always being passed here, just use it directly in putAndWaitWithFamily?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;checkRowWithFamily(row1, f1Name, 0, htab2A);&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Same kind of thing, the count is always 0. Rename it to &quot;ensureRowNotReplicated&quot; or something like that and don&apos;t pass a count.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;# Copyright 2010 The Apache Software Foundation&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We don&apos;t put the year anymore.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;hbase&amp;gt; set_peer_tableCFs &apos;2&apos;, &quot;table1; table2:cf1,cf2; table3:cfA,cfB&quot;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The tableCFs syntax will need to be documented better. It&apos;s not obvious that all of table1&apos;s families are replicated to &apos;2&apos;.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;if (!this.getAllPeerIds().contains(id)) {&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think peerExists(id) would be better here. Same for the other places where getAllPeerIds().contains is called.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;  public Map&amp;lt;String, List&amp;lt;String&amp;gt;&amp;gt; getTableCFs(String id) {&lt;br/&gt;
    if (!this.peerClusters.containsKey(id)) {&lt;br/&gt;
      throw new IllegalArgumentException(&quot;peer with id = &quot; + id + &quot; is not connected&quot;);&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t think throwing an IllegalArgumentException is good here, it&apos;s called from removeNonReplicableEdits() which is not something a user would call so we&apos;ll have an unchecked exception bubbling up in the ReplicationSource.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;private void readTableCFsZnode() {&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This method needs its own unit test.&lt;/p&gt;</comment>
                            <comment id="13882143" author="fenghh" created="Sun, 26 Jan 2014 02:14:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdcryans&quot; class=&quot;user-hover&quot; rel=&quot;jdcryans&quot;&gt;Jean-Daniel Cryans&lt;/a&gt;, thanks very much for the review, I&apos;ll make a new patch accordingly, &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13882190" author="fenghh" created="Sun, 26 Jan 2014 05:53:01 +0000"  >&lt;blockquote&gt;&lt;p&gt;This should be part of setUpBeforeClass and the shutdown should be part of tearDownAfterClass.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;==&amp;gt; done&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;I don&apos;t see where you are setting setAutoFlush(false) so you can remove all those lines.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;==&amp;gt; done&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;val is always being passed here, just use it directly in putAndWaitWithFamily?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;==&amp;gt; done&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Same kind of thing, the count is always 0. Rename it to &quot;ensureRowNotReplicated&quot; or something like that and don&apos;t pass a count.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;==&amp;gt; done&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;We don&apos;t put the year anymore.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;==&amp;gt; done&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;The tableCFs syntax will need to be documented better. It&apos;s not obvious that all of table1&apos;s families are replicated to &apos;2&apos;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;==&amp;gt; done&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;I think peerExists(id) would be better here. Same for the other places where getAllPeerIds().contains is called.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;==&amp;gt; done&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;I don&apos;t think throwing an IllegalArgumentException is good here, it&apos;s called from removeNonReplicableEdits() which is not something a user would call so we&apos;ll have an unchecked exception bubbling up in the ReplicationSource.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;==&amp;gt; good catch&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. this exception is caught now in removeNonReplicableEdits() and degenerate as if this peer&apos;s tableCFs not explicitly configured (actually it should not happen for non-existing peerId when called in removeNonReplicableEdits())&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;This method needs its own unit test. (...readTableCFsZnode())&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;==&amp;gt; refactor the parse logic of readTableCFsZnode() out to be a helper function ReplicationPeer.parseTableCFsFromConfig() and add some according unit-test cases for that helper function&lt;/p&gt;</comment>
                            <comment id="13882191" author="fenghh" created="Sun, 26 Jan 2014 05:54:03 +0000"  >&lt;p&gt;new trunk patch attached per &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdcryans&quot; class=&quot;user-hover&quot; rel=&quot;jdcryans&quot;&gt;Jean-Daniel Cryans&lt;/a&gt;&apos;s comments, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdcryans&quot; class=&quot;user-hover&quot; rel=&quot;jdcryans&quot;&gt;Jean-Daniel Cryans&lt;/a&gt; again&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13883156" author="jdcryans" created="Mon, 27 Jan 2014 19:26:54 +0000"  >&lt;p&gt;Patch looks good, let&apos;s get a Hadoop QA run.&lt;/p&gt;</comment>
                            <comment id="13883299" author="hadoopqa" created="Mon, 27 Jan 2014 21:03:34 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12625240/HBASE-8751-trunk_v1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12625240/HBASE-8751-trunk_v1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12625240&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.1&lt;/font&gt;.  The patch compiles against the hadoop 1.1 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 4 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    + * Each of these peer znodes has a child znode that indicates which data will be replicated to the peer&lt;br/&gt;
+ * cluster. These peer-tableCFs znodes do not have child znodes and only have a table/cf list config.&lt;br/&gt;
+      throw new ReplicationException(&quot;Error starting the peer tableCFs tracker for peerId=&quot; + peerId,&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 site&lt;/font&gt;.  The patch appears to cause mvn site goal to fail.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8529//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8529//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8529//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8529//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8529//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8529//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8529//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8529//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8529//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8529//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8529//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8529//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8529//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8529//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8529//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8529//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8529//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8529//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8529//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8529//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8529//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8529//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13883672" author="fenghh" created="Tue, 28 Jan 2014 02:30:10 +0000"  >&lt;p&gt;New patch attached removing lines longer than 100;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdcryans&quot; class=&quot;user-hover&quot; rel=&quot;jdcryans&quot;&gt;Jean-Daniel Cryans&lt;/a&gt; : Thanks a lot for the review. Would you please help review &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9501&quot; title=&quot;Provide throttling for replication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9501&quot;&gt;&lt;del&gt;HBASE-9501&lt;/del&gt;&lt;/a&gt; when you have time? It&apos;s a pretty small patch compared to this one, thanks in advance &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13883772" author="fenghh" created="Tue, 28 Jan 2014 05:17:37 +0000"  >&lt;p&gt;New patch removing javadoc warnings and lines longer than 100&lt;/p&gt;</comment>
                            <comment id="13883789" author="hadoopqa" created="Tue, 28 Jan 2014 05:44:44 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12625505/HBASE-8751-trunk_v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12625505/HBASE-8751-trunk_v2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12625505&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.1&lt;/font&gt;.  The patch compiles against the hadoop 1.1 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 4 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8533//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8533//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8533//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8533//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8533//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8533//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8533//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8533//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8533//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8533//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8533//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8533//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8533//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8533//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8533//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8533//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8533//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8533//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8533//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8533//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8533//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8533//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13883926" author="hadoopqa" created="Tue, 28 Jan 2014 09:05:44 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12625522/HBASE-8751-trunk_v3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12625522/HBASE-8751-trunk_v3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12625522&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.1&lt;/font&gt;.  The patch compiles against the hadoop 1.1 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8535//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8535//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8535//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8535//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8535//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8535//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8535//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8535//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8535//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8535//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8535//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8535//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8535//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8535//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8535//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8535//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8535//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8535//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8535//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8535//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8535//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8535//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13885552" author="jdcryans" created="Wed, 29 Jan 2014 17:20:59 +0000"  >&lt;p&gt;+1 on the patch, where do we want this? 0.98 is in the RC process, but if we do another one would you want this in &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="13887812" author="fenghh" created="Fri, 31 Jan 2014 14:52:42 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdcryans&quot; class=&quot;user-hover&quot; rel=&quot;jdcryans&quot;&gt;Jean-Daniel Cryans&lt;/a&gt; for the review &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13894318" author="fenghh" created="Fri, 7 Feb 2014 08:48:53 +0000"  >&lt;p&gt;Ping &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andrew.purtell%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;andrew.purtell@gmail.com&quot;&gt;Andrew Purtell&lt;/a&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13897109" author="apurtell" created="Mon, 10 Feb 2014 22:13:43 +0000"  >&lt;p&gt;+1 for 0.98&lt;/p&gt;</comment>
                            <comment id="13897403" author="jdcryans" created="Tue, 11 Feb 2014 01:21:27 +0000"  >&lt;p&gt;Committed to 0.98.1 and trunk, thanks Honghua!&lt;/p&gt;</comment>
                            <comment id="13897525" author="hudson" created="Tue, 11 Feb 2014 04:28:28 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.98-on-Hadoop-1.1 #135 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/135/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/135/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8751&quot; title=&quot;Enable peer cluster to choose/change the ColumnFamilies/Tables it really want to replicate from a source cluster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8751&quot;&gt;&lt;del&gt;HBASE-8751&lt;/del&gt;&lt;/a&gt; Enable peer cluster to choose/change the ColumnFamilies/Tables it&lt;br/&gt;
           really want to replicate from a source cluster (Feng Honghua via JD) (jdcryans: rev 1566945)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-client/src/main/java/org/apache/hadoop/hbase/client/replication/ReplicationAdmin.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationPeer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationPeers.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationPeersZKImpl.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestPerTableCFReplication.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-shell/src/main/ruby/hbase/replication_admin.rb&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-shell/src/main/ruby/shell.rb&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-shell/src/main/ruby/shell/commands/add_peer.rb&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-shell/src/main/ruby/shell/commands/list_peers.rb&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-shell/src/main/ruby/shell/commands/set_peer_tableCFs.rb&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-shell/src/main/ruby/shell/commands/show_peer_tableCFs.rb&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13897544" author="hudson" created="Tue, 11 Feb 2014 05:26:24 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-TRUNK #4907 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4907/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4907/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8751&quot; title=&quot;Enable peer cluster to choose/change the ColumnFamilies/Tables it really want to replicate from a source cluster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8751&quot;&gt;&lt;del&gt;HBASE-8751&lt;/del&gt;&lt;/a&gt; Enable peer cluster to choose/change the ColumnFamilies/Tables it&lt;br/&gt;
           really want to replicate from a source cluster (Feng Honghua via JD) (jdcryans: rev 1566944)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-client/src/main/java/org/apache/hadoop/hbase/client/replication/ReplicationAdmin.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationPeer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationPeers.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationPeersZKImpl.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestPerTableCFReplication.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-shell/src/main/ruby/hbase/replication_admin.rb&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-shell/src/main/ruby/shell.rb&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-shell/src/main/ruby/shell/commands/add_peer.rb&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-shell/src/main/ruby/shell/commands/list_peers.rb&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-shell/src/main/ruby/shell/commands/set_peer_tableCFs.rb&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-shell/src/main/ruby/shell/commands/show_peer_tableCFs.rb&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13897552" author="hudson" created="Tue, 11 Feb 2014 05:47:20 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98 #147 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/147/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/147/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8751&quot; title=&quot;Enable peer cluster to choose/change the ColumnFamilies/Tables it really want to replicate from a source cluster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8751&quot;&gt;&lt;del&gt;HBASE-8751&lt;/del&gt;&lt;/a&gt; Enable peer cluster to choose/change the ColumnFamilies/Tables it&lt;br/&gt;
           really want to replicate from a source cluster (Feng Honghua via JD) (jdcryans: rev 1566945)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-client/src/main/java/org/apache/hadoop/hbase/client/replication/ReplicationAdmin.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationPeer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationPeers.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationPeersZKImpl.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestPerTableCFReplication.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-shell/src/main/ruby/hbase/replication_admin.rb&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-shell/src/main/ruby/shell.rb&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-shell/src/main/ruby/shell/commands/add_peer.rb&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-shell/src/main/ruby/shell/commands/list_peers.rb&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-shell/src/main/ruby/shell/commands/set_peer_tableCFs.rb&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-shell/src/main/ruby/shell/commands/show_peer_tableCFs.rb&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13898559" author="hudson" created="Wed, 12 Feb 2014 00:34:45 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK-on-Hadoop-1.1 #87 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-1.1/87/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-1.1/87/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8751&quot; title=&quot;Enable peer cluster to choose/change the ColumnFamilies/Tables it really want to replicate from a source cluster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8751&quot;&gt;&lt;del&gt;HBASE-8751&lt;/del&gt;&lt;/a&gt; Enable peer cluster to choose/change the ColumnFamilies/Tables it&lt;br/&gt;
           really want to replicate from a source cluster (Feng Honghua via JD) (jdcryans: rev 1566944)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-client/src/main/java/org/apache/hadoop/hbase/client/replication/ReplicationAdmin.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationPeer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationPeers.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationPeersZKImpl.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestPerTableCFReplication.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-shell/src/main/ruby/hbase/replication_admin.rb&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-shell/src/main/ruby/shell.rb&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-shell/src/main/ruby/shell/commands/add_peer.rb&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-shell/src/main/ruby/shell/commands/list_peers.rb&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-shell/src/main/ruby/shell/commands/set_peer_tableCFs.rb&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-shell/src/main/ruby/shell/commands/show_peer_tableCFs.rb&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14331141" author="enis" created="Sat, 21 Feb 2015 23:33:49 +0000"  >&lt;p&gt;Closing this issue after 0.99.0 release. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12588068" name="HBASE-8751-0.94-V0.patch" size="40291" author="fenghh" created="Mon, 17 Jun 2013 02:04:29 +0000"/>
                            <attachment id="12621054" name="HBASE-8751-0.94-v1.patch" size="39906" author="fenghh" created="Thu, 2 Jan 2014 10:05:05 +0000"/>
                            <attachment id="12624073" name="HBASE-8751-trunk_v0.patch" size="38151" author="fenghh" created="Tue, 21 Jan 2014 05:18:26 +0000"/>
                            <attachment id="12625240" name="HBASE-8751-trunk_v1.patch" size="44192" author="fenghh" created="Sun, 26 Jan 2014 05:54:03 +0000"/>
                            <attachment id="12625505" name="HBASE-8751-trunk_v2.patch" size="44438" author="fenghh" created="Tue, 28 Jan 2014 02:30:10 +0000"/>
                            <attachment id="12625522" name="HBASE-8751-trunk_v3.patch" size="44813" author="fenghh" created="Tue, 28 Jan 2014 05:17:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 17 Jun 2013 18:15:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>333430</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1liov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>333758</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>From the shell&amp;#39;s doc:&lt;br/&gt;
# set table / table-cf to be replicable for a peer, for a table without&lt;br/&gt;
# an explicit column-family list, all replicable column-families (with&lt;br/&gt;
# replication_scope == 1) will be replicated&lt;br/&gt;
&amp;nbsp;hbase&amp;gt; set_peer_tableCFs &amp;#39;2&amp;#39;, &amp;quot;table1; table2:cf1,cf2; table3:cfA,cfB&amp;quot;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>