<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:59:42 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-2192/HBASE-2192.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-2192] Failed commit due to NotServingRegionException makes further transactions fail with UnknownTransactionException</title>
                <link>https://issues.apache.org/jira/browse/HBASE-2192</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;After a commit has failed with org.apache.hadoop.ipc.RemoteException: org.apache.hadoop.hbase.NotServingRegionException: db,,1265553236583 (see &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2191&quot; title=&quot;Commit fails occasionally with NotServingRegionException in transactional hbase inserts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2191&quot;&gt;&lt;del&gt;HBASE-2191&lt;/del&gt;&lt;/a&gt; for more information) any further transactions to the same table fail. (other tables untested)&lt;/p&gt;

&lt;p&gt;Waiting for ~10 hours doesn&apos;t seem to clear the situation, neither does calling truncate and major_compact on the table and major_compact on .META.. only known way to resolve the situation is to restart hbase.&lt;/p&gt;

&lt;p&gt;client end stack trace:&lt;br/&gt;
&amp;#8212;&lt;br/&gt;
10/02/07 16:40:47 DEBUG transactional.TransactionState: Adding new hregion &lt;span class=&quot;error&quot;&gt;&amp;#91;db,,1265553637903&amp;#93;&lt;/span&gt; to transaction &lt;span class=&quot;error&quot;&gt;&amp;#91;6991420346725617933&amp;#93;&lt;/span&gt;&lt;br/&gt;
10/02/07 16:40:48 DEBUG client.HConnectionManager$TableServers: Removed db,,1265553637903 for tableName=db from cache because of \x00\x00\x01\x24\xAC\x9C\xAF,&lt;br/&gt;
10/02/07 16:40:48 DEBUG client.HConnectionManager$TableServers: locateRegionInMeta attempt 0 of 10 failed; retrying after sleep of 1000 because: No server address listed in .META. for region db,,1265553637903&lt;br/&gt;
10/02/07 16:40:48 DEBUG client.HConnectionManager$TableServers: Removed .META.,,1 for tableName=.META. from cache because of db,\x00\x00\x01\x24\xAC\x9C\xAF,,99999999999999&lt;br/&gt;
10/02/07 16:40:48 DEBUG client.HConnectionManager$TableServers: Cached location for .META.,,1 is 1.1.1.1:43917&lt;br/&gt;
10/02/07 16:40:49 DEBUG client.HConnectionManager$TableServers: Cached location for db,,1265553637903 is 1.1.1.1:43917&lt;br/&gt;
Exception in thread &quot;main&quot; org.apache.hadoop.hbase.client.transactional.UnknownTransactionException: org.apache.hadoop.hbase.client.transactional.UnknownTransactionException: transaction: &lt;span class=&quot;error&quot;&gt;&amp;#91;6991420346725617933&amp;#93;&lt;/span&gt;, region: &lt;span class=&quot;error&quot;&gt;&amp;#91;db,,1265553637903&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.transactional.TransactionalRegion.getTransactionState(TransactionalRegion.java:574)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.transactional.TransactionalRegion.put(TransactionalRegion.java:297)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.transactional.TransactionalRegionServer.put(TransactionalRegionServer.java:241)&lt;br/&gt;
        at sun.reflect.GeneratedMethodAccessor8.invoke(Unknown Source)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.HBaseRPC$Server.call(HBaseRPC.java:657)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.HBaseServer$Handler.run(HBaseServer.java:915)&lt;/p&gt;

&lt;p&gt;        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)&lt;br/&gt;
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)&lt;br/&gt;
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)&lt;br/&gt;
        at org.apache.hadoop.hbase.RemoteExceptionHandler.decodeRemoteException(RemoteExceptionHandler.java:94)&lt;br/&gt;
        at org.apache.hadoop.hbase.client.HConnectionManager$TableServers.getRegionServerWithRetries(HConnectionManager.java:1041)&lt;br/&gt;
        at org.apache.hadoop.hbase.client.transactional.TransactionalTable.put(TransactionalTable.java:153)&lt;br/&gt;
        at dbloader.dbLoader.run2(dbLoader.java:179)&lt;br/&gt;
        at dbloader.dbLoader.main(dbLoader.java:24)&lt;/p&gt;</description>
                <environment>&lt;p&gt;OpenSolaris, java 1.6.0_10, pseudo-distributed setup; Hadoop 0.20.1 and HBase 0.20.3, single java client, Hadoop dfs.replication=1, HBase configured to use transactional server.&lt;/p&gt;</environment>
        <key id="12455575">HBASE-2192</key>
            <summary>Failed commit due to NotServingRegionException makes further transactions fail with UnknownTransactionException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jhallio">Jesse Hallio</reporter>
                        <labels>
                    </labels>
                <created>Sun, 7 Feb 2010 17:08:09 +0000</created>
                <updated>Thu, 5 May 2011 07:05:07 +0000</updated>
                            <resolved>Thu, 5 May 2011 07:05:07 +0000</resolved>
                                    <version>0.20.3</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12851622" author="gstathis" created="Tue, 30 Mar 2010 21:49:00 +0000"  >&lt;p&gt;I&apos;ve seen a similar issue doing a row count on a table through the shell. I was able to recover by disabling and re-enabling the table. Again, this is just a workaround for now.&lt;/p&gt;</comment>
                            <comment id="12864061" author="clint.morgan" created="Tue, 4 May 2010 23:15:32 +0000"  >&lt;p&gt;Last I tried it, this behavior worked, but that was a while ago.&lt;/p&gt;

&lt;p&gt;Can you provide code which is causing the failure?&lt;/p&gt;

&lt;p&gt;From the exception it sounds like you may be retrying with the same transaction id that failed. &lt;/p&gt;

&lt;p&gt;To retry a transaction, you must start the whole process again. This would mean starting with a fresh call to TrxManager.beginTransaction(). If that is the issue, then I guess better documentation is what is needed.&lt;/p&gt;</comment>
                            <comment id="13029200" author="stack" created="Thu, 5 May 2011 07:05:07 +0000"  >&lt;p&gt;Transactional hbase was moved from core.  This issue no longer applies to hbase core.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 30 Mar 2010 21:49:00 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26199</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 33 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hgpr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99970</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>