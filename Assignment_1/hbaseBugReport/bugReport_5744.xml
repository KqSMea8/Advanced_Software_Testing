<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:30:35 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5744/HBASE-5744.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5744] Thrift server metrics should be long instead of int</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5744</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;As we measure our Thrift call latencies in nanoseconds, we need to make latencies long instead of int everywhere.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12550042">HBASE-5744</key>
            <summary>Thrift server metrics should be long instead of int</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mikhail">Mikhail Bautin</assignee>
                                    <reporter username="mikhail">Mikhail Bautin</reporter>
                        <labels>
                    </labels>
                <created>Fri, 6 Apr 2012 23:50:27 +0000</created>
                <updated>Mon, 9 Apr 2012 20:24:18 +0000</updated>
                            <resolved>Mon, 9 Apr 2012 20:24:18 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13249140" author="phabricator@reviews.facebook.net" created="Sat, 7 Apr 2012 02:53:15 +0000"  >&lt;p&gt;mbautin requested code review of &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5744&quot; title=&quot;Thrift server metrics should be long instead of int&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5744&quot;&gt;&lt;del&gt;HBASE-5744&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;89-fb&amp;#93;&lt;/span&gt; Thrift server metrics should be long instead of int&quot;.&lt;br/&gt;
Reviewers: sc, dhruba, Kannan, Liyin, JIRA&lt;/p&gt;

&lt;p&gt;  As we measure our Thrift call latencies in nanoseconds, we need to make latencies long instead of int everywhere. There is a bug where we truncate a nanosecond latency to int, which is a problem with RPCs that take more than 2.147483647 seconds to process.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  TestThriftServer is updated to test for the failure case (an RPC is artificially made to take 3 seconds). The new test case fails without the fix.&lt;/p&gt;

&lt;p&gt;  Re-run all unit tests.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2679&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2679&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/HbaseHandlerMetricsProxy.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/ThriftMetrics.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/thrift/TestThriftServer.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/6135/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/6135/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13249144" author="phabricator@reviews.facebook.net" created="Sat, 7 Apr 2012 03:17:44 +0000"  >&lt;p&gt;sc has accepted the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5744&quot; title=&quot;Thrift server metrics should be long instead of int&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5744&quot;&gt;&lt;del&gt;HBASE-5744&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;89-fb&amp;#93;&lt;/span&gt; Thrift server metrics should be long instead of int&quot;.&lt;/p&gt;

&lt;p&gt;  Looks good to me. Thanks a lot for the fix!&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2679&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2679&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  thrift_server_metrics_should_be_long_&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5744&quot; title=&quot;Thrift server metrics should be long instead of int&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5744&quot;&gt;&lt;del&gt;HBASE-5744&lt;/del&gt;&lt;/a&gt;_v2&lt;/p&gt;</comment>
                            <comment id="13249407" author="phabricator@reviews.facebook.net" created="Sat, 7 Apr 2012 23:14:14 +0000"  >&lt;p&gt;stack has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5744&quot; title=&quot;Thrift server metrics should be long instead of int&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5744&quot;&gt;&lt;del&gt;HBASE-5744&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;89-fb&amp;#93;&lt;/span&gt; Thrift server metrics should be long instead of int&quot;.&lt;/p&gt;

&lt;p&gt;  lgtm.  Do we need this on trunk too MIkhail?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2679&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2679&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  thrift_server_metrics_should_be_long_&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5744&quot; title=&quot;Thrift server metrics should be long instead of int&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5744&quot;&gt;&lt;del&gt;HBASE-5744&lt;/del&gt;&lt;/a&gt;_v2&lt;/p&gt;</comment>
                            <comment id="13249460" author="phabricator@reviews.facebook.net" created="Sun, 8 Apr 2012 02:28:16 +0000"  >&lt;p&gt;mbautin has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5744&quot; title=&quot;Thrift server metrics should be long instead of int&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5744&quot;&gt;&lt;del&gt;HBASE-5744&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;89-fb&amp;#93;&lt;/span&gt; Thrift server metrics should be long instead of int&quot;.&lt;/p&gt;

&lt;p&gt;  Scott: thanks for reviewing!&lt;/p&gt;

&lt;p&gt;  Stack: yes, I will post a trunk patch in a bit.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2679&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2679&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  thrift_server_metrics_should_be_long_&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5744&quot; title=&quot;Thrift server metrics should be long instead of int&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5744&quot;&gt;&lt;del&gt;HBASE-5744&lt;/del&gt;&lt;/a&gt;_v2&lt;/p&gt;</comment>
                            <comment id="13249466" author="phabricator@reviews.facebook.net" created="Sun, 8 Apr 2012 03:34:22 +0000"  >&lt;p&gt;mbautin requested code review of &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5744&quot; title=&quot;Thrift server metrics should be long instead of int&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5744&quot;&gt;&lt;del&gt;HBASE-5744&lt;/del&gt;&lt;/a&gt; Thrift server metrics should be long instead of int&quot;.&lt;br/&gt;
Reviewers: stack, sc, Kannan, JIRA&lt;/p&gt;

&lt;p&gt;  As we measure our Thrift call latencies in nanoseconds, we need to make latencies long instead of int everywhere. There is a bug where we truncate a nanosecond latency to int, which is a problem with RPCs that take more than 2.147483647 seconds to process.&lt;/p&gt;

&lt;p&gt;  This is a trunk diff. The 89-fb version of this diff is at D2679.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  TestThriftServer is updated to test for the failure case (an RPC is artificially made to take 3 seconds). The new test case fails without the fix.&lt;/p&gt;

&lt;p&gt;  Re-run all unit tests.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2685&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2685&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/HbaseHandlerMetricsProxy.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/ThriftMetrics.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/thrift/TestThriftServer.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/6153/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/6153/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13249467" author="phabricator@reviews.facebook.net" created="Sun, 8 Apr 2012 03:40:32 +0000"  >&lt;p&gt;sc has accepted the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5744&quot; title=&quot;Thrift server metrics should be long instead of int&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5744&quot;&gt;&lt;del&gt;HBASE-5744&lt;/del&gt;&lt;/a&gt; Thrift server metrics should be long instead of int&quot;.&lt;/p&gt;

&lt;p&gt;  +1 Thanks for fixing the trunk!&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2685&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2685&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  thrift_server_metrics_should_be_long_&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5744&quot; title=&quot;Thrift server metrics should be long instead of int&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5744&quot;&gt;&lt;del&gt;HBASE-5744&lt;/del&gt;&lt;/a&gt;_v2&lt;/p&gt;</comment>
                            <comment id="13249470" author="hadoopqa" created="Sun, 8 Apr 2012 04:25:45 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12521872/D2685.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12521872/D2685.1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1446//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1446//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1446//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1446//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1446//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1446//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13249474" author="mikhail" created="Sun, 8 Apr 2012 04:40:19 +0000"  >&lt;p&gt;The same patch (re-attaching to run a test on Jenkins).&lt;/p&gt;</comment>
                            <comment id="13249479" author="hadoopqa" created="Sun, 8 Apr 2012 05:25:19 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12521874/jira-HBASE-5744-89-fb-Thrift-server-metrics-should-b-2012-04-07_21_39_35.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12521874/jira-HBASE-5744-89-fb-Thrift-server-metrics-should-b-2012-04-07_21_39_35.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 5 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1447//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1447//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1447//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1447//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1447//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1447//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13249521" author="phabricator@reviews.facebook.net" created="Sun, 8 Apr 2012 10:44:15 +0000"  >&lt;p&gt;mbautin has committed the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5744&quot; title=&quot;Thrift server metrics should be long instead of int&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5744&quot;&gt;&lt;del&gt;HBASE-5744&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;89-fb&amp;#93;&lt;/span&gt; Thrift server metrics should be long instead of int&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2679&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2679&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMIT&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHBASEEIGHTNINEFBBRANCH1310973&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHBASEEIGHTNINEFBBRANCH1310973&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13249741" author="phabricator@reviews.facebook.net" created="Mon, 9 Apr 2012 08:53:15 +0000"  >&lt;p&gt;mbautin updated the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5744&quot; title=&quot;Thrift server metrics should be long instead of int&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5744&quot;&gt;&lt;del&gt;HBASE-5744&lt;/del&gt;&lt;/a&gt; Thrift server metrics should be long instead of int&quot;.&lt;br/&gt;
Reviewers: stack, sc, Kannan, JIRA&lt;/p&gt;

&lt;p&gt;  Removing the old unused overload of verifyMetrics.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2685&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2685&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/thrift/TestThriftServer.java&lt;/p&gt;</comment>
                            <comment id="13249743" author="phabricator@reviews.facebook.net" created="Mon, 9 Apr 2012 08:59:16 +0000"  >&lt;p&gt;mbautin updated the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5744&quot; title=&quot;Thrift server metrics should be long instead of int&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5744&quot;&gt;&lt;del&gt;HBASE-5744&lt;/del&gt;&lt;/a&gt; Thrift server metrics should be long instead of int&quot;.&lt;br/&gt;
Reviewers: stack, sc, Kannan, JIRA&lt;/p&gt;

&lt;p&gt;  Submitted incomplete diff last time, adding other changes.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2685&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2685&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/HbaseHandlerMetricsProxy.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/ThriftMetrics.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/thrift/TestThriftServer.java&lt;/p&gt;</comment>
                            <comment id="13249744" author="hadoopqa" created="Mon, 9 Apr 2012 09:02:22 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12521924/D2685.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12521924/D2685.3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1452//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1452//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13249756" author="hudson" created="Mon, 9 Apr 2012 09:37:15 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2729 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2729/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2729/&lt;/a&gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5744&quot; title=&quot;Thrift server metrics should be long instead of int&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5744&quot;&gt;&lt;del&gt;HBASE-5744&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;89-fb&amp;#93;&lt;/span&gt; Thrift server metrics should be long instead of int&lt;/p&gt;

&lt;p&gt;Summary: As we measure our Thrift call latencies in nanoseconds, we need to make&lt;br/&gt;
latencies long instead of int everywhere. There is a bug where we truncate a&lt;br/&gt;
nanosecond latency to int, which is a problem with RPCs that take more than&lt;br/&gt;
2.147483647 seconds to process.&lt;/p&gt;

&lt;p&gt;Test Plan:&lt;br/&gt;
TestThriftServer is updated to test for the failure case (an RPC is artificially&lt;br/&gt;
made to take 3 seconds). The new test case fails without the fix.&lt;/p&gt;

&lt;p&gt;Re-run all unit tests.&lt;/p&gt;

&lt;p&gt;Reviewers: sc, dhruba, Kannan, Liyin, JIRA&lt;/p&gt;

&lt;p&gt;Reviewed By: sc&lt;/p&gt;

&lt;p&gt;CC: stack&lt;/p&gt;

&lt;p&gt;Differential Revision: &lt;a href=&quot;https://reviews.facebook.net/D2679&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2679&lt;/a&gt; (Revision 1311167)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
mbautin : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/thrift/HbaseHandlerMetricsProxy.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/thrift/ThriftMetrics.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/thrift/TestThriftServer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13249937" author="hudson" created="Mon, 9 Apr 2012 16:42:07 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-security #164 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-security/164/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-security/164/&lt;/a&gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5744&quot; title=&quot;Thrift server metrics should be long instead of int&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5744&quot;&gt;&lt;del&gt;HBASE-5744&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;89-fb&amp;#93;&lt;/span&gt; Thrift server metrics should be long instead of int&lt;/p&gt;

&lt;p&gt;Summary: As we measure our Thrift call latencies in nanoseconds, we need to make&lt;br/&gt;
latencies long instead of int everywhere. There is a bug where we truncate a&lt;br/&gt;
nanosecond latency to int, which is a problem with RPCs that take more than&lt;br/&gt;
2.147483647 seconds to process.&lt;/p&gt;

&lt;p&gt;Test Plan:&lt;br/&gt;
TestThriftServer is updated to test for the failure case (an RPC is artificially&lt;br/&gt;
made to take 3 seconds). The new test case fails without the fix.&lt;/p&gt;

&lt;p&gt;Re-run all unit tests.&lt;/p&gt;

&lt;p&gt;Reviewers: sc, dhruba, Kannan, Liyin, JIRA&lt;/p&gt;

&lt;p&gt;Reviewed By: sc&lt;/p&gt;

&lt;p&gt;CC: stack&lt;/p&gt;

&lt;p&gt;Differential Revision: &lt;a href=&quot;https://reviews.facebook.net/D2679&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2679&lt;/a&gt; (Revision 1311167)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
mbautin : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/thrift/HbaseHandlerMetricsProxy.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/thrift/ThriftMetrics.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/thrift/TestThriftServer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13250007" author="phabricator@reviews.facebook.net" created="Mon, 9 Apr 2012 17:57:15 +0000"  >&lt;p&gt;mbautin has abandoned the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5744&quot; title=&quot;Thrift server metrics should be long instead of int&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5744&quot;&gt;&lt;del&gt;HBASE-5744&lt;/del&gt;&lt;/a&gt; Thrift server metrics should be long instead of int&quot;.&lt;/p&gt;

&lt;p&gt;  Unfortunately, I committed this diff under the 89-fb differential revision first (D2679) and had to edit the commit message. Here is what I did:&lt;/p&gt;

&lt;p&gt;      &amp;gt; svn propedit -r 1311167 --revprop svn:log&lt;/p&gt;

&lt;p&gt;  The new commit message is as follows:&lt;/p&gt;

&lt;p&gt;      &amp;gt; svn log -r1311167 &lt;a href=&quot;https://svn.apache.org/repos/asf/hbase/trunk&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/repos/asf/hbase/trunk&lt;/a&gt;&lt;br/&gt;
      ------------------------------------------------------------------------&lt;br/&gt;
      r1311167 | mbautin | 2012-04-09 02:00:11 -0700 (Mon, 09 Apr 2012) | 23 lines&lt;/p&gt;

&lt;p&gt;      &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5744&quot; title=&quot;Thrift server metrics should be long instead of int&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5744&quot;&gt;&lt;del&gt;HBASE-5744&lt;/del&gt;&lt;/a&gt; Thrift server metrics should be long instead of int&lt;/p&gt;

&lt;p&gt;      Summary:&lt;br/&gt;
      As we measure our Thrift call latencies in nanoseconds, we need to make&lt;br/&gt;
      latencies long instead of int everywhere. There is a bug where we truncate a&lt;br/&gt;
      nanosecond latency to int, which is a problem with RPCs that take more than&lt;br/&gt;
      2.147483647 seconds to process.&lt;/p&gt;

&lt;p&gt;      This is a trunk diff. The 89-fb version of this diff is at D2679.&lt;/p&gt;

&lt;p&gt;      Test Plan:&lt;br/&gt;
      TestThriftServer is updated to test for the failure case (an RPC is artificially&lt;br/&gt;
      made to take 3 seconds). The new test case fails without the fix.&lt;/p&gt;

&lt;p&gt;      Re-run all unit tests.&lt;/p&gt;

&lt;p&gt;      Reviewers: stack, sc, Kannan, JIRA&lt;/p&gt;

&lt;p&gt;      Reviewed By: sc&lt;/p&gt;

&lt;p&gt;      Differential Revision: &lt;a href=&quot;https://reviews.facebook.net/D2685&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2685&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  If you have a git-svn checkout that got confused by this, here is how to get it back to a consistent state:&lt;/p&gt;

&lt;p&gt;      git svn reset 1311166&lt;br/&gt;
      git svn rebase&lt;/p&gt;

&lt;p&gt;  Sorry about the inconvenience.&lt;/p&gt;


&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2685&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2685&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13250147" author="mikhail" created="Mon, 9 Apr 2012 20:24:18 +0000"  >&lt;p&gt;Committed to trunk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12521805" name="ASF.LICENSE.NOT.GRANTED--D2679.1.patch" size="5692" author="phabricator@reviews.facebook.net" created="Sat, 7 Apr 2012 02:53:15 +0000"/>
                            <attachment id="12521872" name="ASF.LICENSE.NOT.GRANTED--D2685.1.patch" size="5651" author="phabricator@reviews.facebook.net" created="Sun, 8 Apr 2012 03:34:24 +0000"/>
                            <attachment id="12521923" name="ASF.LICENSE.NOT.GRANTED--D2685.2.patch" size="1014" author="phabricator@reviews.facebook.net" created="Mon, 9 Apr 2012 08:53:16 +0000"/>
                            <attachment id="12521924" name="ASF.LICENSE.NOT.GRANTED--D2685.3.patch" size="6381" author="phabricator@reviews.facebook.net" created="Mon, 9 Apr 2012 08:59:18 +0000"/>
                            <attachment id="12521874" name="jira-HBASE-5744-89-fb-Thrift-server-metrics-should-b-2012-04-07_21_39_35.patch" size="7292" author="mikhail" created="Sun, 8 Apr 2012 04:40:17 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 7 Apr 2012 02:53:15 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>234943</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 36 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0168f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4779</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>