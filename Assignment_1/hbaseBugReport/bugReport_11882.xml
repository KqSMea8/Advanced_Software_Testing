<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:27:33 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-11882/HBASE-11882.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-11882] Row level consistency may not be maintained with bulk load and compaction</title>
                <link>https://issues.apache.org/jira/browse/HBASE-11882</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;While looking into the TestHRegionServerBulkLoad failure for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11772&quot; title=&quot;Bulk load mvcc and seqId issues with native hfiles&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11772&quot;&gt;&lt;del&gt;HBASE-11772&lt;/del&gt;&lt;/a&gt;, I found the root cause is that row level atomicity may not be maintained with bulk load together with compation.&lt;br/&gt;
TestHRegionServerBulkLoad is used to test bulk load atomicity. The test uses multiple threads to do bulk load and scan continuously and do compactions periodically. &lt;br/&gt;
It verifies row level data is always consistent across column families.&lt;/p&gt;

&lt;p&gt;After &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11591&quot; title=&quot;Scanner fails to retrieve KV  from bulk loaded file with highest sequence id than the cell&amp;#39;s mvcc in a non-bulk loaded file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11591&quot;&gt;&lt;del&gt;HBASE-11591&lt;/del&gt;&lt;/a&gt;, we added readpoint checks for bulkloaded data using the seqId at the time of bulk load. Now a scanner will not see the data from a bulk load if the scanner&apos;s readpoint is earlier than the bulk load seqId.&lt;br/&gt;
Previously, the atomic bulk load result is visible immediately to all scanners.&lt;/p&gt;

&lt;p&gt;The problem is with compaction after bulk load. Compaction does not lock the region and it is done one store (column family) at a time. It also compact away the seqId marker of bulk load.&lt;/p&gt;

&lt;p&gt;Here is an event sequence where the row level consistency is broken.&lt;/p&gt;

&lt;p&gt;1. A scanner is started to scan a region with cf1 and cf2. The readpoint is 10.&lt;br/&gt;
2. There is a bulk load that loads into cf1 and cf2. The bulk load seqId is 11. Bulk load is guarded by region write lock. So it is atomic.&lt;br/&gt;
3. There is a compaction that compacts cf1. It compacts away the seqId marker of the bulk load.&lt;br/&gt;
4. The scanner tries to next to row-1001. It gets the bulk load data for cf1 since there is no seqId preventing it.  It does not get the bulk load data for cf2 since the scanner&apos;s readpoint (10) is less than the bulk load seqId (11).&lt;/p&gt;

&lt;p&gt;Now the row level consistency is broken in this case.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12738500">HBASE-11882</key>
            <summary>Row level consistency may not be maintained with bulk load and compaction</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jinghe">Jerry He</assignee>
                                    <reporter username="jinghe">Jerry He</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Sep 2014 18:54:58 +0000</created>
                <updated>Sat, 21 Feb 2015 23:32:05 +0000</updated>
                            <resolved>Fri, 5 Sep 2014 03:29:18 +0000</resolved>
                                    <version>0.99.0</version>
                    <version>2.0.0</version>
                                    <fixVersion>0.99.0</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                <comments>
                            <comment id="14118560" author="jinghe" created="Tue, 2 Sep 2014 19:10:00 +0000"  >&lt;p&gt;Attached a patch for TestHRegionServerBulkLoad.&lt;br/&gt;
Currently TestHRegionServerBulkLoad does not add BULKLOAD_TIME_KEY to the bulk load hfiles. But currently we use BULKLOAD_TIME_KEY to determine isBulkLoadResult().&lt;br/&gt;
Without it, isBulkLoadResult() is always false,  This hides the problem, and that is why the test has been passing in normal QA runs.&lt;/p&gt;

&lt;p&gt;With the added BULKLOAD_TIME_KEY, the test will fail most of the time.&lt;/p&gt;</comment>
                            <comment id="14118567" author="jinghe" created="Tue, 2 Sep 2014 19:15:54 +0000"  >&lt;p&gt;There are two options to fix the problem:&lt;/p&gt;

&lt;p&gt;Option1.  Revert to the previous behavior.  No readpoint/MVCC check for bulk loaded data. They become visible immediately to all scanners.&lt;br/&gt;
Option2.  Transfer the bulk load seqId into the cells during compaction.&lt;/p&gt;</comment>
                            <comment id="14118573" author="ram_krish" created="Tue, 2 Sep 2014 19:19:36 +0000"  >&lt;p&gt;Great debugging. &lt;br/&gt;
Option 1 would be bettre I think. So &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11591&quot; title=&quot;Scanner fails to retrieve KV  from bulk loaded file with highest sequence id than the cell&amp;#39;s mvcc in a non-bulk loaded file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11591&quot;&gt;&lt;del&gt;HBASE-11591&lt;/del&gt;&lt;/a&gt; would only need to fix same KV case as done in earlier patches).&lt;/p&gt;

&lt;p&gt;Excuse typos.&lt;/p&gt;</comment>
                            <comment id="14118576" author="jinghe" created="Tue, 2 Sep 2014 19:23:10 +0000"  >&lt;p&gt;My 2 cent opinion is to go for Option2. &lt;br/&gt;
The bulk load data are treated in a consistent way as the puts and writes. A consistent story of integration that we&apos;ve been going along for a while for bulk load.&lt;/p&gt;</comment>
                            <comment id="14118586" author="jinghe" created="Tue, 2 Sep 2014 19:31:08 +0000"  >&lt;p&gt;Hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ram_krish&quot; class=&quot;user-hover&quot; rel=&quot;ram_krish&quot;&gt;ramkrishna.s.vasudevan&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Didn&apos;t refresh to see your comment before I clicked submit.&lt;br/&gt;
Still we should consider Option2. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14118620" author="anoop.hbase" created="Tue, 2 Sep 2014 19:50:28 +0000"  >&lt;blockquote&gt;&lt;p&gt;Then I think the above change is not necessary and only handle the case as per the initial patch where we handle same KVs case&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This is what your last comment in HBase-11591 regarding the read point check for bulk loaded files.  So we were continuing with existing way&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/help_16.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I am +1 for option2&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Option2. Transfer the bulk load seqId into the cells during compaction.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;In read we set each Cell seqId with the seqId of the file right? Compaction read cells from store files and write to single file. So this set of seqId not happening?&lt;/p&gt;</comment>
                            <comment id="14118661" author="jinghe" created="Tue, 2 Sep 2014 20:11:20 +0000"  >&lt;p&gt;Hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;In read we set each Cell seqId with the seqId of the file right? Compaction read cells from store files and write to single file. So this set of seqId not happening?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Good question!&lt;/p&gt;

&lt;p&gt;I attached a patch from the testing I was doing.  It fixed the problem.&lt;br/&gt;
But based on your comment, let me confirm if we really need to do the part to add the seqId: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+          &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (current != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; current.isBulkLoaded()
+              &amp;amp;&amp;amp; current.getSequenceID() &amp;gt;= smallestReadPoint) {
+            kv.setSequenceId(current.getSequenceID());
+          }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14118923" author="jinghe" created="Tue, 2 Sep 2014 23:03:33 +0000"  >&lt;p&gt;Hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You are right. We don&apos;t need to set the seqId again in Compactor.performCompaction().  The scanners have them already set on the fly.&lt;br/&gt;
The fix is even simpler.&lt;br/&gt;
Updated with patch v2.  v2 also combines the change to TestHRegionServerBulkLoad. &lt;/p&gt;</comment>
                            <comment id="14119310" author="anoop.hbase" created="Wed, 3 Sep 2014 04:24:54 +0000"  >&lt;p&gt;V2 patch looks good to me.  Good debugging.&lt;/p&gt;</comment>
                            <comment id="14119319" author="ram_krish" created="Wed, 3 Sep 2014 04:35:48 +0000"  >&lt;p&gt;The reason why I was telling option 1 was it is a behaviour change in bulk load.  Previously all the KVs were getting visible from a bulk loaded file and this was true in cases of where a bulk load could get completed when a scan is in progress.&lt;br/&gt;
The &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11591&quot; title=&quot;Scanner fails to retrieve KV  from bulk loaded file with highest sequence id than the cell&amp;#39;s mvcc in a non-bulk loaded file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11591&quot;&gt;&lt;del&gt;HBASE-11591&lt;/del&gt;&lt;/a&gt; changed that behaviour too and now bulk load will go through mvcc sequence as per the other normal kvs (during scan).&lt;br/&gt;
The patch v2 looks fine to me and it solves the problem mentioned in the JIRA.  But I doubt whether this solves the test case issue.  Assume in the test case if there is a scanner that gets started and just after that a bulk load is completed, the kvs in the bulk loaded file is not visibile. Does this behaviour happen in the test case now? If we all agree with the new behaviour then I think the test case may need some tweak. That was my concern.&lt;/p&gt;</comment>
                            <comment id="14119322" author="ram_krish" created="Wed, 3 Sep 2014 04:37:21 +0000"  >&lt;blockquote&gt;&lt;p&gt;Does this behaviour happen in the test case now?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;If so, previously the bulk loaded kvs would also be seen but now it won&apos;t be seen.  Have not seen the test case closely if it has any such cases that could potentially happen.&lt;/p&gt;</comment>
                            <comment id="14119408" author="jinghe" created="Wed, 3 Sep 2014 05:54:09 +0000"  >&lt;p&gt;Hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ram_krish&quot; class=&quot;user-hover&quot; rel=&quot;ram_krish&quot;&gt;ramkrishna.s.vasudevan&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;TestHRegionServerBulkLoad spawns multiple threads that continuously bulkload, scan, and compact the same region. Scanners get started before bulk load, after bulk load or in between.&lt;br/&gt;
But its only purpose is to test and ensure row level atomicity.&lt;/p&gt;</comment>
                            <comment id="14119417" author="ram_krish" created="Wed, 3 Sep 2014 06:04:36 +0000"  >&lt;p&gt;I hope you got my concern.  Previously when a bulk load gets completed just after a scanner is created and before the scan does start a seek, the kvs in the bulk loaded file will also be taken into consideration. But after &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11591&quot; title=&quot;Scanner fails to retrieve KV  from bulk loaded file with highest sequence id than the cell&amp;#39;s mvcc in a non-bulk loaded file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11591&quot;&gt;&lt;del&gt;HBASE-11591&lt;/del&gt;&lt;/a&gt; the bulk load file would not be taken into consideration.  So if the test case expects some value from the bulk loaded file then it may fail.  May be it did not happen now but may happen.  Anyway I will check the test case once closely.  +1 on patch. &lt;/p&gt;</comment>
                            <comment id="14119439" author="jinghe" created="Wed, 3 Sep 2014 06:21:55 +0000"  >&lt;p&gt;Yes, the behavior change from the added readpoint checks for bulkloaded data using the seqId is understood.&lt;/p&gt;

&lt;p&gt;I did run the &apos;mvn test&apos; after v2 patch earlier today  The entire run passed cleanly. But I lost the result.  I&apos;ve just kick off another run, and will paste the result here.&lt;br/&gt;
Also try to trigger a Hadoop QA run here.&lt;/p&gt;</comment>
                            <comment id="14120039" author="jinghe" created="Wed, 3 Sep 2014 16:30:37 +0000"  >&lt;p&gt;Still there is no Hadoop QA run. &lt;br/&gt;
Here is my local &apos;mvn test&apos; run result with patch v2:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[INFO] Reactor Summary:
[INFO]
[INFO] HBase ............................................. SUCCESS [  1.793 s]
[INFO] HBase - Common .................................... SUCCESS [ 50.103 s]
[INFO] HBase - Protocol .................................. SUCCESS [  0.073 s]
[INFO] HBase - Client .................................... SUCCESS [01:02 min]
[INFO] HBase - Hadoop Compatibility ...................... SUCCESS [  8.157 s]
[INFO] HBase - Hadoop Two Compatibility .................. SUCCESS [  5.973 s]
[INFO] HBase - Prefix Tree ............................... SUCCESS [  8.950 s]
[INFO] HBase - Server .................................... SUCCESS [57:32 min]
[INFO] HBase - Testing Util .............................. SUCCESS [  1.101 s]
[INFO] HBase - Thrift .................................... SUCCESS [02:08 min]
[INFO] HBase - Shell ..................................... SUCCESS [  1.586 s]
[INFO] HBase - Integration Tests ......................... SUCCESS [  0.516 s]
[INFO] HBase - Examples .................................. SUCCESS [  1.916 s]
[INFO] HBase - Assembly .................................. SUCCESS [  1.045 s]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 01:02 h
[INFO] Finished at: 2014-09-03T00:15:35-08:00
[INFO] Final Memory: 46M/273M
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14120216" author="hadoopqa" created="Wed, 3 Sep 2014 18:29:42 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12666066/HBASE-11882-master-v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12666066/HBASE-11882-master-v2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12666066&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 2 zombie test(s): 	at org.apache.hadoop.hbase.client.TestHCM.testClusterStatus(TestHCM.java:250)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.TestHRegion.testWritesWhileGetting(TestHRegion.java:3813)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10695//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10695//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10695//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10695//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10695//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10695//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10695//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10695//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10695//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10695//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10695//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10695//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10695//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10695//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10695//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10695//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10695//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10695//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10695//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10695//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10695//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10695//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14120523" author="jinghe" created="Wed, 3 Sep 2014 21:46:17 +0000"  >&lt;p&gt;The &apos;zombie tests&apos; don&apos;t seem to be related to  the patch.&lt;br/&gt;
To be safe, pulled from master again, applied v2 patch.  Full &apos;mvn test&apos; ran cleanly again.&lt;/p&gt;

&lt;p&gt;Separately ran TestHRegion:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Running org.apache.hadoop.hbase.regionserver.TestHRegion
Tests run: 80, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 107.129 sec - in org.apache.hadoop.hbase.regionserver.TestHRegion

Results :

Tests run: 80, Failures: 0, Errors: 0, Skipped: 0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14120644" author="yuzhihong@gmail.com" created="Wed, 3 Sep 2014 23:08:52 +0000"  >&lt;p&gt;nit:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      writer.appendFileInfo(StoreFile.BULKLOAD_TIME_KEY,
+        Bytes.toBytes(&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.currentTimeMillis()));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;You can utilize the variable now which is assigned on line 111.&lt;/p&gt;</comment>
                            <comment id="14120732" author="jinghe" created="Thu, 4 Sep 2014 00:09:45 +0000"  >&lt;p&gt;Hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yuzhihong%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;yuzhihong@gmail.com&quot;&gt;Ted Yu&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Updated with v3 patch.&lt;/p&gt;</comment>
                            <comment id="14120819" author="hadoopqa" created="Thu, 4 Sep 2014 01:40:18 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12666379/HBASE-11882-master-v3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12666379/HBASE-11882-master-v3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12666379&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10707//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10707//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10707//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10707//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10707//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10707//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10707//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10707//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10707//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10707//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10707//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10707//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10707//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10707//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10707//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10707//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10707//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10707//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10707//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10707//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10707//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10707//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14120869" author="ram_krish" created="Thu, 4 Sep 2014 02:26:51 +0000"  >&lt;p&gt;Will commit this patch unless objections.&lt;/p&gt;</comment>
                            <comment id="14121622" author="yuzhihong@gmail.com" created="Thu, 4 Sep 2014 17:36:16 +0000"  >&lt;p&gt;@Ram:&lt;br/&gt;
Go ahead.&lt;/p&gt;</comment>
                            <comment id="14122348" author="ram_krish" created="Fri, 5 Sep 2014 03:29:18 +0000"  >&lt;p&gt;Committed to master and branch-1.&lt;br/&gt;
Thanks for the patch Jerry He and for the reviews Anoop.&lt;/p&gt;</comment>
                            <comment id="14122359" author="ram_krish" created="Fri, 5 Sep 2014 03:41:39 +0000"  >&lt;p&gt;The change that was done to identify bulk loaded file using the  presence of &apos;&lt;em&gt;seqid&lt;/em&gt;&apos; in the file name - should that be backported to 0.98 also?  Because in cases of 0.98 i think we still go with the meta data BUL_LOAD_CONF_KEY?&lt;/p&gt;</comment>
                            <comment id="14122364" author="anoop.hbase" created="Fri, 5 Sep 2014 03:45:41 +0000"  >&lt;p&gt;That is part of a fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11772&quot; title=&quot;Bulk load mvcc and seqId issues with native hfiles&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11772&quot;&gt;&lt;del&gt;HBASE-11772&lt;/del&gt;&lt;/a&gt;. I can see 0.98 also in fix versions for that Jira. So we can get it done when we commit that Jira &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/help_16.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14122445" author="jinghe" created="Fri, 5 Sep 2014 05:13:22 +0000"  >&lt;p&gt;Thanks, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ram_krish&quot; class=&quot;user-hover&quot; rel=&quot;ram_krish&quot;&gt;ramkrishna.s.vasudevan&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu&quot; class=&quot;user-hover&quot; rel=&quot;tedyu&quot;&gt;Ted Yu&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Will go back to work on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11772&quot; title=&quot;Bulk load mvcc and seqId issues with native hfiles&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11772&quot;&gt;&lt;del&gt;HBASE-11772&lt;/del&gt;&lt;/a&gt; now.&lt;/p&gt;</comment>
                            <comment id="14122477" author="hudson" created="Fri, 5 Sep 2014 05:54:03 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.0 #152 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/152/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.0/152/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11882&quot; title=&quot;Row level consistency may not be maintained with bulk load and compaction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11882&quot;&gt;&lt;del&gt;HBASE-11882&lt;/del&gt;&lt;/a&gt; Row level consistency may not be maintained with bulk load and (ramkrishna: rev 5fa07efd700ad40a5c6a6616b16b9189faba2949)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegionServerBulkLoad.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/compactions/Compactor.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14122498" author="hudson" created="Fri, 5 Sep 2014 06:16:00 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #5467 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/5467/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/5467/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11882&quot; title=&quot;Row level consistency may not be maintained with bulk load and compaction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11882&quot;&gt;&lt;del&gt;HBASE-11882&lt;/del&gt;&lt;/a&gt; Row level consistency may not be maintained with bulk load and (ramkrishna: rev 8de30d32d4d5c86650effadbda72f7ef32a4f15f)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegionServerBulkLoad.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/compactions/Compactor.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14330912" author="enis" created="Sat, 21 Feb 2015 23:32:05 +0000"  >&lt;p&gt;Closing this issue after 0.99.0 release. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12729762">HBASE-11591</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12665971" name="HBASE-11882-master-v1.patch" size="5165" author="jinghe" created="Tue, 2 Sep 2014 20:06:18 +0000"/>
                            <attachment id="12666066" name="HBASE-11882-master-v2.patch" size="2133" author="jinghe" created="Tue, 2 Sep 2014 23:04:09 +0000"/>
                            <attachment id="12666379" name="HBASE-11882-master-v3.patch" size="2101" author="jinghe" created="Thu, 4 Sep 2014 00:10:11 +0000"/>
                            <attachment id="12665954" name="TestHRegionServerBulkLoad.java.patch" size="954" author="jinghe" created="Tue, 2 Sep 2014 19:05:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 2 Sep 2014 19:19:36 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1zl9j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>