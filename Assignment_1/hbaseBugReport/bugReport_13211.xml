<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:40:54 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-13211/HBASE-13211.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-13211] Procedure V2 - master Enable/Disable table</title>
                <link>https://issues.apache.org/jira/browse/HBASE-13211</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;master side, part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12439&quot; title=&quot;Procedure V2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12439&quot;&gt;HBASE-12439&lt;/a&gt;&lt;br/&gt;
starts up the procedure executor on the master&lt;br/&gt;
and replaces the enable/disable table handlers with the procedure version.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12781329">HBASE-13211</key>
            <summary>Procedure V2 - master Enable/Disable table</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12860479">HBASE-14336</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="syuanjiang">Stephen Yuan Jiang</assignee>
                                    <reporter username="syuanjiang">Stephen Yuan Jiang</reporter>
                        <labels>
                            <label>reliability</label>
                    </labels>
                <created>Wed, 11 Mar 2015 21:32:04 +0000</created>
                <updated>Sat, 29 Aug 2015 04:15:06 +0000</updated>
                            <resolved>Wed, 15 Apr 2015 10:57:01 +0000</resolved>
                                    <version>2.0.0</version>
                    <version>1.1.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>1.1.0</fixVersion>
                                    <component>master</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                    <timeoriginalestimate seconds="432000">120h</timeoriginalestimate>
                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="777600">216h</timespent>
                                <comments>
                            <comment id="14370356" author="yuzhihong@gmail.com" created="Thu, 19 Mar 2015 23:37:03 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
100	message DisableTableMessage {
101	  required UserInformation user_info = 1;
102	  required TableName table_name = 2;
103	  required bool skip_table_state_check = 3;
104	}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Looks like the above can be unified with EnableTableMessage&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
1663	    &lt;span class=&quot;code-comment&quot;&gt;// TODO: &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; procId as part of client-side change
&lt;/span&gt;1664	    &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; procId;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Would the above be done in the next patch ?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
102	      &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; MARK_REGIONS_OFFLINE:
103	        &lt;span class=&quot;code-comment&quot;&gt;// If the making region offline gets interrupted, we will retry the step.&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;How would the retry timeout ?&lt;br/&gt;
For MarkRegionsOffline(), false is returned when bd.bulkAssign() returns false, or method being interrupted. Should we distinguish these two conditions ?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
88	  &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void completionCleanup(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; MasterProcedureEnv env) {
189	    &lt;span class=&quot;code-comment&quot;&gt;// Remove the run-queue of the table
&lt;/span&gt;190	    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!env.getProcedureQueue().markTableAsDisabled(tableName)) {
191	      &lt;span class=&quot;code-comment&quot;&gt;// There are requests in the queue (e.g. a &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; create)
&lt;/span&gt;192	      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
193	    }
194	  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Did you plan to handle the else branch with some action ? Otherwise the if statement seems unnecessary.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
254	    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (tableName.equals(TableName.META_TABLE_NAME)) {
255	      &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ConstraintException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Cannot disable catalog table&quot;&lt;/span&gt;);
256	    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Should TableName.isSystemTable() be used above ?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
409	    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; waitUntilDone(&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; timeout) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; InterruptedException {
410	      &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; startTime = &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.currentTimeMillis();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Please use EnvironmentEdgeManager.&lt;/p&gt;</comment>
                            <comment id="14390120" author="syuanjiang" created="Wed, 1 Apr 2015 07:14:02 +0000"  >&lt;p&gt;The patch is posted in the Review board: &lt;a href=&quot;https://reviews.apache.org/r/32714&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/32714&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="14488344" author="enis" created="Thu, 9 Apr 2015 21:44:49 +0000"  >&lt;p&gt;Forwarding (from offline discussions, RB and matteo&apos;s branch in github) my +1 for the last version of the patch. &lt;/p&gt;</comment>
                            <comment id="14490044" author="mbertozzi" created="Fri, 10 Apr 2015 18:15:42 +0000"  >&lt;p&gt;committed to master working on a branch-1 patch&lt;/p&gt;</comment>
                            <comment id="14490162" author="hudson" created="Fri, 10 Apr 2015 19:11:09 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #6367 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/6367/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/6367/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13211&quot; title=&quot;Procedure V2 - master Enable/Disable table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13211&quot;&gt;&lt;del&gt;HBASE-13211&lt;/del&gt;&lt;/a&gt; Procedure V2 - master Enable/Disable table (Stephen Yuan Jiang) (matteo.bertozzi: rev 57c70f0af8399d782fda05a6274227c26b811482)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/procedure/TestMasterFailoverWithProcedures.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/protobuf/MasterProcedure.proto&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/procedure/EnableTableProcedure.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/procedure/TableProcedureInterface.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/procedure/TestDisableTableProcedure.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/procedure/MasterProcedureTestingUtility.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/MasterProcedureProtos.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/procedure/TestEnableTableProcedure.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/procedure/DisableTableProcedure.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14496173" author="hudson" created="Wed, 15 Apr 2015 13:32:34 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.1 #394 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.1/394/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.1/394/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13211&quot; title=&quot;Procedure V2 - master Enable/Disable table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13211&quot;&gt;&lt;del&gt;HBASE-13211&lt;/del&gt;&lt;/a&gt; Procedure V2 - master Enable/Disable table (Stephen Yuan Jiang) (matteo.bertozzi: rev 2cbb1afe528180d8cd07e01c44cdfa039f73cc68)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/procedure/TestDisableTableProcedure.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/procedure/TableProcedureInterface.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/protobuf/MasterProcedure.proto&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/procedure/MasterProcedureTestingUtility.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/procedure/EnableTableProcedure.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/procedure/TestMasterFailoverWithProcedures.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/procedure/TestEnableTableProcedure.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/procedure/DisableTableProcedure.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/MasterProcedureProtos.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14571119" author="ndimiduk" created="Wed, 3 Jun 2015 15:29:05 +0000"  >&lt;p&gt;Closing issues released in 1.1.0.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12783298">HBASE-13290</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12781182">HBASE-13202</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12781185">HBASE-13203</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12709421" name="EnableDisableTableServer-no-gen-files.v1-master.patch" size="73986" author="syuanjiang" created="Sat, 4 Apr 2015 14:59:28 +0000"/>
                            <attachment id="12725262" name="HBASE-13211-v2-branch-1.patch" size="172165" author="mbertozzi" created="Tue, 14 Apr 2015 15:57:01 +0000"/>
                            <attachment id="12724339" name="HBASE-13211-v2.patch" size="170814" author="mbertozzi" created="Thu, 9 Apr 2015 21:07:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 19 Mar 2015 23:37:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 28 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i26nr3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>