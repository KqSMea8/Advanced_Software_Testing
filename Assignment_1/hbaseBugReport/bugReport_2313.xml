<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:00:50 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-2313/HBASE-2313.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-2313] Nit-pick about hbase-2279 shell fixup, if you do get with non-existant column family, throws lots of exceptions</title>
                <link>https://issues.apache.org/jira/browse/HBASE-2313</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;I believe the old shell would complain once only.. .or at least, it didn&apos;t print out so many fat exceptions.  New fixedup shell will retry a bunch of times with a fat stack trace each time.  Assigning Alexey &apos;cos he asked for it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12458885">HBASE-2313</key>
            <summary>Nit-pick about hbase-2279 shell fixup, if you do get with non-existant column family, throws lots of exceptions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kovyrin">Alexey Kovyrin</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Mar 2010 01:38:43 +0000</created>
                <updated>Fri, 20 Nov 2015 12:42:16 +0000</updated>
                            <resolved>Tue, 16 Mar 2010 17:43:33 +0000</resolved>
                                    <version>0.90.0</version>
                                    <fixVersion>0.90.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12844714" author="kovyrin" created="Fri, 12 Mar 2010 22:12:44 +0000"  >&lt;p&gt;Changed the way we handle exceptions in the shell by adding so called debug mode. By default debug mode is OFF which means that all errors will be displayed as one line comment:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;hbase(main):001:0&amp;gt; scan &apos;fooooo&apos;&lt;/p&gt;

&lt;p&gt;ERROR: Unknown table fooooo!&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;When debug mode is ON, all errors would have a full backtrace displayed next to them:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;hbase(main):003:0&amp;gt; scan &apos;fooooo&apos;&lt;/p&gt;

&lt;p&gt;ERROR: Unknown table fooooo!&lt;br/&gt;
Backtrace: /Users/scoundrel/work/git/hbase/bin/../bin/../core/src/main/ruby/shell/commands.rb:46:in `check_table&apos;&lt;br/&gt;
           /Users/scoundrel/work/git/hbase/bin/../bin/../core/src/main/ruby/shell/commands/scan.rb:26:in `command&apos;&lt;br/&gt;
           /Users/scoundrel/work/git/hbase/bin/../bin/../core/src/main/ruby/shell/commands.rb:11:in `command_safe&apos;&lt;br/&gt;
               /Users/scoundrel/work/git/hbase/bin/../bin/../core/src/main/ruby/shell.rb:84:in `command&apos;&lt;br/&gt;
               (eval):2:in `scan&apos;&lt;br/&gt;
               (hbase):4:in `irb_binding&apos;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;To manage debug mode I&apos;ve added two additional shell commands: debug and debug?:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;hbase(main):005:0&amp;gt; debug?&lt;br/&gt;
Debug mode is OFF&lt;/p&gt;

&lt;p&gt;hbase(main):006:0&amp;gt; debug&lt;br/&gt;
Debug mode is ON&lt;/p&gt;

&lt;p&gt;hbase(main):007:0&amp;gt; debug&lt;br/&gt;
Debug mode is OFF&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Additional change in this patch - now we check if a table exists before doing any operations on it.&lt;/p&gt;</comment>
                            <comment id="12844715" author="kovyrin" created="Fri, 12 Mar 2010 22:13:19 +0000"  >&lt;p&gt;Patch submitted, please review&lt;/p&gt;</comment>
                            <comment id="12844719" author="jdcryans" created="Fri, 12 Mar 2010 22:17:56 +0000"  >&lt;p&gt;Patch looks good.&lt;/p&gt;

&lt;p&gt;Is there a way to refactor check_table across all commands so that you don&apos;t have to call it everywhere?&lt;/p&gt;</comment>
                            <comment id="12844737" author="kovyrin" created="Fri, 12 Mar 2010 22:54:25 +0000"  >&lt;p&gt;A better patch where we have a central place to translate hbase (and other java) errors to a messages for shell users. As an example I&apos;ve moved table existence and column family existence checks there.&lt;/p&gt;</comment>
                            <comment id="12844741" author="kovyrin" created="Fri, 12 Mar 2010 23:00:32 +0000"  >&lt;p&gt;A bit cleaner patch&lt;/p&gt;</comment>
                            <comment id="12844744" author="jdcryans" created="Fri, 12 Mar 2010 23:03:57 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12844745" author="kovyrin" created="Fri, 12 Mar 2010 23:04:45 +0000"  >&lt;p&gt;Removed formatting changes in describe.rb&lt;/p&gt;</comment>
                            <comment id="12845727" author="stack" created="Tue, 16 Mar 2010 05:59:08 +0000"  >&lt;p&gt;Should &apos;debug&apos; show in the help Alexey?  I don&apos;t see it.&lt;/p&gt;

&lt;p&gt;I&apos;m pretty sure I have the patch in place... but I&apos;m seeing unexpected behaviors.&lt;/p&gt;

&lt;p&gt;I did this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
pynchon-2:trunk stack$ ./bin/hbase shell
HBase Shell; enter &apos;help&amp;lt;RETURN&amp;gt;&apos; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; list of supported commands.
Type &lt;span class=&quot;code-quote&quot;&gt;&quot;exit&amp;lt;RETURN&amp;gt;&quot;&lt;/span&gt; to leave the HBase Shell
Version: 0.21.0-SNAPSHOT, r923404, Mon Mar 15 22:38:16 PDT 2010

hbase(main):001:0&amp;gt; create &apos;y&apos;, &apos;y&apos;
0 row(s) in 1.4720 seconds

hbase(main):002:0&amp;gt; put &apos;y&apos;, &apos;y&apos;, &apos;y:y&apos;, &apos;y&apos;
0 row(s) in 0.0430 seconds

hbase(main):003:0&amp;gt; scan &apos;y&apos;
ROW                          COLUMN+CELL                                                                      
 y                           column=y:y, timestamp=1268718421786, value=y                                     
1 row(s) in 0.0340 seconds

hbase(main):004:0&amp;gt; put &apos;y&apos;, &apos;y&apos;, &apos;z:z&apos;, &apos;y&apos;
..
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;... and got a load of this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.util.concurrent.ExecutionException: org.apache.hadoop.hbase.regionserver.NoSuchColumnFamilyException: org.apache.hadoop.hbase.regionserver.NoSuchColumnFamilyException: Column family z does not exist in region y,,1268718407213 in table {NAME =&amp;gt; &apos;y&apos;, FAMILIES =&amp;gt; [{NAME =&amp;gt; &apos;y&apos;, REPLICATION_SCOPE =&amp;gt; &apos;0&apos;, COMPRESSION =&amp;gt; &apos;NONE&apos;, VERSIONS =&amp;gt; &apos;3&apos;, TTL =&amp;gt; &apos;2147483647&apos;, BLOCKSIZE =&amp;gt; &apos;65536&apos;, IN_MEMORY =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&apos;, BLOCKCACHE =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&apos;}]}
        at org.apache.hadoop.hbase.regionserver.HRegion.checkFamily(HRegion.java:2438)
        at org.apache.hadoop.hbase.regionserver.HRegion.put(HRegion.java:1276)
        at org.apache.hadoop.hbase.regionserver.HRegion.put(HRegion.java:1243)
        at org.apache.hadoop.hbase.regionserver.HRegionServer.put(HRegionServer.java:1714)
        at org.apache.hadoop.hbase.regionserver.HRegionServer.multiPut(HRegionServer.java:2448)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.hadoop.hbase.ipc.HBaseRPC$Server.call(HBaseRPC.java:576)
        at org.apache.hadoop.hbase.ipc.HBaseServer$Handler.run(HBaseServer.java:919)

java.util.concurrent.ExecutionException: org.apache.hadoop.hbase.regionserver.NoSuchColumnFamilyException: org.apache.hadoop.hbase.regionserver.NoSuchColumnFamilyException: Column family z does not exist in region y,,1268718407213 in table {NAME =&amp;gt; &apos;y&apos;, FAMILIES =&amp;gt; [{NAME =&amp;gt; &apos;y&apos;, REPLICATION_SCOPE =&amp;gt; &apos;0&apos;, COMPRESSION =&amp;gt; &apos;NONE&apos;, VERSIONS =&amp;gt; &apos;3&apos;, TTL =&amp;gt; &apos;2147483647&apos;, BLOCKSIZE =&amp;gt; &apos;65536&apos;, IN_MEMORY =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&apos;, BLOCKCACHE =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&apos;}]}
        at org.apache.hadoop.hbase.regionserver.HRegion.checkFamily(HRegion.java:2438)
        at org.apache.hadoop.hbase.regionserver.HRegion.put(HRegion.java:1276)
        at org.apache.hadoop.hbase.regionserver.HRegion.put(HRegion.java:1243)
        at org.apache.hadoop.hbase.regionserver.HRegionServer.put(HRegionServer.java:1714)
        at org.apache.hadoop.hbase.regionserver.HRegionServer.multiPut(HRegionServer.java:2448)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.hadoop.hbase.ipc.HBaseRPC$Server.call(HBaseRPC.java:576)
        at org.apache.hadoop.hbase.ipc.HBaseServer$Handler.run(HBaseServer.java:919)
..
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Should I only see above if debug enabled?  it was a new shell.  I hadn&apos;t set debug.&lt;/p&gt;

&lt;p&gt;It does the right thing nicely if I try to scan a nonexistent table.&lt;/p&gt;

&lt;p&gt;Or, here if I try to create a new table on top of an extant one:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hbase(main):014:0&amp;gt; create &apos;x&apos;, &apos;x&apos;         

ERROR: org.apache.hadoop.hbase.TableExistsException: org.apache.hadoop.hbase.TableExistsException: x
        at org.apache.hadoop.hbase.master.HMaster.createTable(HMaster.java:815)
        at org.apache.hadoop.hbase.master.HMaster.createTable(HMaster.java:780)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.hadoop.hbase.ipc.HBaseRPC$Server.call(HBaseRPC.java:576)
        at org.apache.hadoop.hbase.ipc.HBaseServer$Handler.run(HBaseServer.java:919)

Here is some help &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; command:
          Create table; pass table name, a dictionary of specifications per
          column family, and optionally a dictionary of table configuration.
          Dictionaries are described below in the GENERAL NOTES section.
          Examples:

          hbase&amp;gt; create &apos;t1&apos;, {NAME =&amp;gt; &apos;f1&apos;, VERSIONS =&amp;gt; 5}
          hbase&amp;gt; create &apos;t1&apos;, {NAME =&amp;gt; &apos;f1&apos;}, {NAME =&amp;gt; &apos;f2&apos;}, {NAME =&amp;gt; &apos;f3&apos;}
          hbase&amp;gt; # The above in shorthand would be the following:
          hbase&amp;gt; create &apos;t1&apos;, &apos;f1&apos;, &apos;f2&apos;, &apos;f3&apos;
          hbase&amp;gt; create &apos;t1&apos;, {NAME =&amp;gt; &apos;f1&apos;, VERSIONS =&amp;gt; 1, TTL =&amp;gt; 2592000,
                 BLOCKCACHE =&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In the above case i&apos;d not set debug?&lt;/p&gt;
</comment>
                            <comment id="12845994" author="kovyrin" created="Tue, 16 Mar 2010 16:54:37 +0000"  >&lt;p&gt;Changes:&lt;br/&gt;
1) Rebased the patch against the latest trunk.&lt;br/&gt;
2) Added a nice message for TableExistsException errors&lt;br/&gt;
3) Reduced retries number for hbase clients (now we stop retrying after the first failure)&lt;/p&gt;

&lt;p&gt;Regarding those retry exceptions, that&apos;s not something I could fix. There are two problems in there:&lt;br/&gt;
1) We suppress real exceptions from puts and throw this stupid RetriesExhaustedException - this makes it impossible for me to show a nice error mesage for puts&lt;br/&gt;
2) We have this System.out.println(e); in catch block of the processBatchOfPuts method - this makes output not so user friendly.&lt;/p&gt;</comment>
                            <comment id="12846022" author="stack" created="Tue, 16 Mar 2010 17:43:32 +0000"  >&lt;p&gt;Big improvement.  Thanks for the patch Alexey.&lt;/p&gt;</comment>
                            <comment id="15017203" author="lars_francke" created="Fri, 20 Nov 2015 12:42:16 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12438653" name="HBASE-2313.2.patch" size="3534" author="kovyrin" created="Fri, 12 Mar 2010 22:54:25 +0000"/>
                            <attachment id="12438654" name="HBASE-2313.3.patch" size="3325" author="kovyrin" created="Fri, 12 Mar 2010 23:00:32 +0000"/>
                            <attachment id="12438655" name="HBASE-2313.4.patch" size="2789" author="kovyrin" created="Fri, 12 Mar 2010 23:04:45 +0000"/>
                            <attachment id="12438937" name="HBASE-2313.5.patch" size="3521" author="kovyrin" created="Tue, 16 Mar 2010 16:54:37 +0000"/>
                            <attachment id="12438645" name="HBASE-2313.patch" size="9057" author="kovyrin" created="Fri, 12 Mar 2010 22:12:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 12 Mar 2010 22:12:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26256</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hh7j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>100050</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>