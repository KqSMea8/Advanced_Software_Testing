<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:35:19 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6275/HBASE-6275.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6275] Add conditional Hadoop properties assignment</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6275</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3639&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-3639&lt;/a&gt;, we should use VersionInfo to put the proper one in, yet only one of them. Currently we always get this message when you start a daemon or the shell:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2012-06-25 16:13:44,819 WARN org.apache.hadoop.conf.Configuration: fs.default.name is deprecated. Instead, use fs.defaultFS&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As well as this subsequently sporting the same issue:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2012-06-25 16:13:44,819 WARN org.apache.hadoop.conf.Configuration: mapred.task.id is deprecated. Instead, use mapreduce.task.attempt.id&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And the shell does:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;12/06/25 16:05:26 WARN conf.Configuration: hadoop.native.lib is deprecated. Instead, use io.native.lib.available&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Talking to Stack he suggest:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;We should make a little function under util to do it because it will be&lt;br/&gt;
reused in a bunch of places (in daemons, shell, out in scripts, etc).&lt;/p&gt;&lt;/blockquote&gt;</description>
                <environment></environment>
        <key id="12595953">HBASE-6275</key>
            <summary>Add conditional Hadoop properties assignment</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png" description="A patch for this issue has been uploaded to JIRA by a contributor.">Patch Available</status>
                    <statusCategory id="4" key="indeterminate" colorName="yellow"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="larsgeorge">Lars George</assignee>
                                    <reporter username="larsgeorge">Lars George</reporter>
                        <labels>
                            <label>beginner</label>
                    </labels>
                <created>Tue, 26 Jun 2012 18:34:31 +0000</created>
                <updated>Tue, 5 Aug 2014 20:13:43 +0000</updated>
                                            <version>0.95.2</version>
                                                    <component>Client</component>
                    <component>master</component>
                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13405302" author="larsgeorge" created="Mon, 2 Jul 2012 20:13:41 +0000"  >&lt;p&gt;The first patch attempt. I am using a helper that checks which version of Hadoop it is based on the existence of the Configuration.handleDeprecation() method.&lt;/p&gt;</comment>
                            <comment id="13405305" author="larsgeorge" created="Mon, 2 Jul 2012 20:15:47 +0000"  >&lt;p&gt;We could also actually use the handleDeprecation() to replace old with new keys. But on the other hand, I think we should know where we are using outdated keys and update the code once we drop the support for the old keys. For the time being all that is needed is to avoid the warning messages. That is what this patch does. &lt;/p&gt;

&lt;p&gt;Please have a look and let me know if this is the right approach. &lt;/p&gt;</comment>
                            <comment id="13407457" author="zhihyu@ebaysf.com" created="Thu, 5 Jul 2012 20:28:40 +0000"  >&lt;p&gt;I think one parameter for handleHadoopDeprecation() would be enough. handleDeprecation() would provide the new key.&lt;/p&gt;</comment>
                            <comment id="13407979" author="larsgeorge" created="Fri, 6 Jul 2012 13:22:30 +0000"  >&lt;p&gt;Hey Ted, I thought about that as well, but that has some implications, the worst is that we are using the old only in the code. Using both prepares us to use the new one once the old is completely removed. But if others think that is OK for now, then I can change it. I was tossing up either idea and went with the dual parameter approach.&lt;/p&gt;

&lt;p&gt;This raises a larger question: how do we handle other parameters. Basically any Hadoop parameter should be wrapped into the handleHadoopDeprecation() call, so that it is handled appropriately for future versions. But if we have to handle a deprecation of an already replaced config key (does that happen?) then using the oldest want work, and the one in between only works with the previous and current version of hadoop.&lt;/p&gt;

&lt;p&gt;Maybe we need to change the method to handleHadoopDeprecation(String[] keys) and call it like so&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
handleHadoopDeprecation({ oldestKey, deprecatedKey, currentKey })
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The question is, do we want to support three different version of Hadoop (different as in changed config keys)?&lt;/p&gt;</comment>
                            <comment id="13408028" author="zhihyu@ebaysf.com" created="Fri, 6 Jul 2012 14:21:46 +0000"  >&lt;blockquote&gt;&lt;p&gt;do we want to support three different version of Hadoop&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I think we should be prepared to.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;then using the oldest want work&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I guess you meant &quot;won&apos;t work&quot;&lt;/p&gt;

&lt;p&gt;We actually know the hadoop version HBase is using (hadoop jar file in the classpath). If we support multiple hadoop versions (1.0, 0.23 and 2.0, 3.0 to come), we can consider utilizing the effective hadoop version at runtime.&lt;/p&gt;</comment>
                            <comment id="13465369" author="stack" created="Fri, 28 Sep 2012 05:26:31 +0000"  >&lt;p&gt;Marking this as patch available.  This would be a nice one to have.  The spew in the logs makes us look messy.  Needs work to finish though.&lt;/p&gt;</comment>
                            <comment id="13465371" author="stack" created="Fri, 28 Sep 2012 05:27:13 +0000"  >&lt;p&gt;Marking noob in case some one wants to bring LarsG&apos;s work home.&lt;/p&gt;</comment>
                            <comment id="13465374" author="hadoopqa" created="Fri, 28 Sep 2012 05:33:27 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12534363/HBASE-6275.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12534363/HBASE-6275.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2956//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2956//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13620349" author="stack" created="Tue, 2 Apr 2013 22:22:47 +0000"  >&lt;p&gt;Patch has merit but needs finishing.  No movement in months.  Moving out of 0.95 for now.&lt;/p&gt;</comment>
                            <comment id="14086687" author="hadoopqa" created="Tue, 5 Aug 2014 20:13:43 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12534363/HBASE-6275.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12534363/HBASE-6275.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12534363&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10303//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10303//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12534363" name="HBASE-6275.patch" size="13746" author="larsgeorge" created="Mon, 2 Jul 2012 20:13:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 5 Jul 2012 20:28:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>239588</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 19 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i00rgn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2381</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>beginner</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>