<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:46:23 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-7503/HBASE-7503.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-7503] Add exists(List) in HTableInterface to allow multiple parallel exists at one time</title>
                <link>https://issues.apache.org/jira/browse/HBASE-7503</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;We need to have a Boolean[] exists(List&amp;lt;Get&amp;gt; gets) throws IOException method implemented in HTableInterface.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12626271">HBASE-7503</key>
            <summary>Add exists(List) in HTableInterface to allow multiple parallel exists at one time</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jmspaggi">Jean-Marc Spaggiari</assignee>
                                    <reporter username="jmspaggi">Jean-Marc Spaggiari</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Jan 2013 00:14:08 +0000</created>
                <updated>Mon, 23 Sep 2013 18:30:38 +0000</updated>
                            <resolved>Wed, 30 Jan 2013 18:06:46 +0000</resolved>
                                                    <fixVersion>0.95.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                    <timeoriginalestimate seconds="300">5m</timeoriginalestimate>
                            <timeestimate seconds="300">5m</timeestimate>
                                        <comments>
                            <comment id="13545561" author="jmspaggi" created="Mon, 7 Jan 2013 01:20:51 +0000"  >&lt;p&gt;First patch trial attached. Including tests. I also have the patch for 0.94.&lt;/p&gt;

&lt;p&gt;Open to your comments.&lt;/p&gt;</comment>
                            <comment id="13545581" author="hadoopqa" created="Mon, 7 Jan 2013 02:13:31 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12563510/HBASE-7503-v0-trunk.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12563510/HBASE-7503-v0-trunk.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3882//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3882//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3882//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3882//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3882//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3882//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3882//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3882//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3882//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3882//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3882//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3882//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3882//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3882//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3882//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3882//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3882//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3882//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13545586" author="yuzhihong@gmail.com" created="Mon, 7 Jan 2013 02:32:16 +0000"  >&lt;p&gt;Consider adding the new test to TestFromClientSide3.java - TestFromClientSide is getting quite big.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    LOG.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;exists(List&amp;lt;Get&amp;gt;) is really list of get() calls, just use get()&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Did you intend to put the above in javadoc ?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+   * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Array of &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the specified Get matches one or more keys, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; not
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&apos;Array of&apos; -&amp;gt; &apos;Array of Boolean&apos;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (InterruptedException e) {
+        LOG.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Failed &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; get:&quot;&lt;/span&gt; + gets.get(i).toString(), e);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Restore interrupt status.&lt;/p&gt;

&lt;p&gt;Currently we have GetRequest in Client.proto. I wonder whether it is worth introducing MultiGetReuqest where we have:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  repeated Get get = 2;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This way we can group Gets by region and make fewer calls to server.&lt;/p&gt;</comment>
                            <comment id="13545870" author="jmspaggi" created="Mon, 7 Jan 2013 13:31:00 +0000"  >&lt;p&gt;Hi Ted,&lt;/p&gt;

&lt;p&gt;Thanks for your comments.&lt;/p&gt;

&lt;p&gt;2 questions.&lt;br/&gt;
1) What do you mean by &quot;Restore interrupt status&quot;? Should I throw it back? (and then add throws InterruptedException on the methode signature)&lt;br/&gt;
2) Regarding MultiGetRequest, just to make sure, that will also mean to add a ServerCallable constructor which can take a list of get? Then we need to give it only gets who are relying on the same region? But what if in the meantime the region split and the gets are no more all on the same region? Should we manage retries there too? &lt;/p&gt;

&lt;p&gt;This last point is making the modification way bigger and there will be a need of some design thinking.&lt;/p&gt;</comment>
                            <comment id="13545962" author="yuzhihong@gmail.com" created="Mon, 7 Jan 2013 15:30:53 +0000"  >&lt;p&gt;For #1, I meant adding the following call:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.currentThread().interrupt();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;For #2, we do need to find a good design. ProtobufUtil.getRemoteException() can be used to examine the cause of failure so that we take proper action accordingly.&lt;/p&gt;</comment>
                            <comment id="13552078" author="jmspaggi" created="Sat, 12 Jan 2013 21:58:32 +0000"  >&lt;p&gt;All you comments are applied on the attached patch, except for #2. Should #2 be a separate JIRA to add this into HBase? Or does it need to be part of this one?&lt;/p&gt;</comment>
                            <comment id="13552094" author="jmspaggi" created="Sat, 12 Jan 2013 23:08:24 +0000"  >&lt;p&gt;About the Client.proto, should it not be:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  repeated GetRequest get = 2;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;instead of Get get = 2; ?&lt;/p&gt;

&lt;p&gt;Also, should we add&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
message MultiGetResponse {
  repeated GetResponse = 2;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;too?&lt;/p&gt;</comment>
                            <comment id="13552102" author="hadoopqa" created="Sat, 12 Jan 2013 23:47:04 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12564596/HBASE-7503-v1-trunk.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12564596/HBASE-7503-v1-trunk.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 1 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.TestLocalHBaseCluster&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 3 zombie test(s): 	at org.apache.hadoop.hdfs.server.balancer.TestBalancerWithNodeGroup.testBalancerWithRackLocality(TestBalancerWithNodeGroup.java:220)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3992//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3992//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3992//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3992//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3992//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3992//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3992//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3992//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3992//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3992//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3992//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3992//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3992//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3992//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3992//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3992//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3992//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3992//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13552109" author="yuzhihong@gmail.com" created="Sun, 13 Jan 2013 01:06:23 +0000"  >&lt;p&gt;For the following:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  repeated GetRequest get = 2;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Were you suggesting that MultiGetReuqest include multiple GetRequest&apos;s ?&lt;br/&gt;
I think the formation from my comment @ 07/Jan/13 02:32 was correct.&lt;/p&gt;</comment>
                            <comment id="13552124" author="jmspaggi" created="Sun, 13 Jan 2013 02:33:40 +0000"  >&lt;p&gt;The idea is the following.&lt;/p&gt;

&lt;p&gt;We have 2 options. We can build the MultiGetRequest or re-use the GetRequest. If we re-use the GetRequest we might have some duplicates on the region field, but that will allow to have different requests bundled togehter (some with existenceOnly, some without, etc.) If we build the MultiGetRequest on repeated Get, that reduce the size of the data, but that reduce also the usecases.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
message MultiGetRequest {
  required RegionSpecifier region = 1;
  repeated Get get = 2;

  &lt;span class=&quot;code-comment&quot;&gt;// If the row to get doesn&apos;t exist, &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; the
&lt;/span&gt;  &lt;span class=&quot;code-comment&quot;&gt;// closest row before.
&lt;/span&gt;  optional bool closestRowBefore = 3;

  &lt;span class=&quot;code-comment&quot;&gt;// The result isn&apos;t asked &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;, just check &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;
&lt;/span&gt;  &lt;span class=&quot;code-comment&quot;&gt;// the existence. If specified, closestRowBefore
&lt;/span&gt;  &lt;span class=&quot;code-comment&quot;&gt;// will be ignored
&lt;/span&gt;  optional bool existenceOnly = 4;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;or&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
message MultiGetRequest {
  repeated GetRequest get = 1;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I see pros and cons for both solutions. But I might be missing the overall picture...&lt;/p&gt;</comment>
                            <comment id="13552126" author="yuzhihong@gmail.com" created="Sun, 13 Jan 2013 02:54:50 +0000"  >&lt;p&gt;For the implementation I was thinking of, MultiGetRequest would be composed by client by criteria of residing in same region.&lt;br/&gt;
So I would choose option #1.&lt;/p&gt;</comment>
                            <comment id="13554403" author="jmspaggi" created="Tue, 15 Jan 2013 21:48:51 +0000"  >&lt;p&gt;Hi Ted,&lt;/p&gt;

&lt;p&gt;I have some time to spend on that today and make good progress.&lt;/p&gt;

&lt;p&gt;I have one question. If we have MultiGetRequest we might have to build MultiGetResponse...&lt;/p&gt;

&lt;p&gt;It should look something like that if you agree:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
message MultiGetResponse {
  repeated Result result = 1;

  &lt;span class=&quot;code-comment&quot;&gt;// used &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Get to check existence only
&lt;/span&gt;  repeated bool exists = 2;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Is there a way to put &quot;repeated optionnal&quot;? Or does repeated mean &amp;gt;= 0?&lt;/p&gt;

&lt;p&gt;Also, sound a bit &quot;to easy&quot;... Am I missing something? Anyway, I will post the next patch most probably today or tomorrow. Almost done.&lt;/p&gt;</comment>
                            <comment id="13554424" author="yuzhihong@gmail.com" created="Tue, 15 Jan 2013 22:03:16 +0000"  >&lt;p&gt;I once tried &apos;repeated optionnal&apos; but protoc wouldn&apos;t compile.&lt;br/&gt;
So I think &apos;repeated&apos; should be good.&lt;/p&gt;</comment>
                            <comment id="13554449" author="devaraj" created="Tue, 15 Jan 2013 22:21:37 +0000"  >&lt;blockquote&gt;&lt;p&gt;Is there a way to put &quot;repeated optionnal&quot;? Or does repeated mean &amp;gt;= 0?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Repeated means greater-than or equal to 0.. (in the code you could check whether the count of the field is &amp;gt; 0 by looking at the corresponding list size or the count).&lt;/p&gt;</comment>
                            <comment id="13554497" author="jmspaggi" created="Tue, 15 Jan 2013 23:16:37 +0000"  >&lt;p&gt;Thanks for the clarification Devaraj, what I want is &amp;gt;= 0 so I will be fine with repeated.&lt;/p&gt;

&lt;p&gt;Patch is ready and attached. I don&apos;t have included protoc files. Are they going to be generated on the server side? Or should I have included them?&lt;/p&gt;

&lt;p&gt;Also, should I provide a 0.94 version too? It&apos;s pretty different, but might be very usefull to have this on 0.94 too.&lt;/p&gt;</comment>
                            <comment id="13554500" author="jmspaggi" created="Tue, 15 Jan 2013 23:19:05 +0000"  >&lt;p&gt;I forgot to include the protoc file &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13554504" author="jmspaggi" created="Tue, 15 Jan 2013 23:20:30 +0000"  >&lt;p&gt;With Client.proto file this time...&lt;/p&gt;</comment>
                            <comment id="13554505" author="jmspaggi" created="Tue, 15 Jan 2013 23:21:18 +0000"  >&lt;p&gt;So, same comments:&lt;/p&gt;

&lt;p&gt;Patch submitted. I don&apos;t have included java protoc files. Are they going to be generated on the server side? Or should I have included them?&lt;/p&gt;

&lt;p&gt;Also, should I provide a 0.94 version too? It&apos;s pretty different, but might be very usefull to have this on 0.94 too.&lt;/p&gt;</comment>
                            <comment id="13554515" author="yuzhihong@gmail.com" created="Tue, 15 Jan 2013 23:26:24 +0000"  >&lt;p&gt;@Jean-Marc:&lt;br/&gt;
You need to run protoc and include the diff for generated files in your patch.&lt;/p&gt;</comment>
                            <comment id="13554523" author="jmspaggi" created="Tue, 15 Jan 2013 23:39:23 +0000"  >&lt;p&gt;With Client.proto and ClientProtos.java included...&lt;/p&gt;

&lt;p&gt;Only question remaining is regarding 0.94 &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13554529" author="yuzhihong@gmail.com" created="Tue, 15 Jan 2013 23:46:13 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+   * @param regionName the name of the region to get
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&apos;to get&apos; -&amp;gt; &apos;to get from&apos;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+   * @param get the client Gets
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;parameter name doesn&apos;t match: get -&amp;gt; gets&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    Map&amp;lt;HRegionInfo, List&amp;lt;Get&amp;gt;&amp;gt; sortedGets = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashMap&amp;lt;HRegionInfo, List&amp;lt;Get&amp;gt;&amp;gt;();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Would getsByRegion be better name for the above variable ?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      HRegionInfo regionInfo = connection.getRegionLocation(tableName, get.getRow(), &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;).getRegionInfo();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Wrap long line above. The third parameter is true, I think false should be passed so that locateRegion(name, row) is called:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; reload? relocateRegion(name, row): locateRegion(name, row);
...
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; HRegionLocation locateRegion(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; [] tableName,
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; [] row)
    &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException{
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; locateRegion(tableName, row, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Note the second last parameter is useCache. The rationale is to reduce query to .META.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Pair&amp;lt;&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[][],&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[][]&amp;gt; getStartEndKeys() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;An alternative is to call the above method and put each Get into corresponding bucket.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+   * exists(List) is really a list of get() calls. Just us get().
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;typo: us -&amp;gt; use&lt;/p&gt;

&lt;p&gt;Putting patch on review board would help reviewers.&lt;/p&gt;</comment>
                            <comment id="13554607" author="jmspaggi" created="Wed, 16 Jan 2013 01:22:32 +0000"  >&lt;p&gt;I never heard about the Review Board site before. I found it on google and just pushed my patch there. Seems that I did not select the right group since to many people got the feedback. I have applied your comments below, also fixed some other too long lines and some comments in other methods I did not modified (typos). &lt;/p&gt;</comment>
                            <comment id="13554671" author="yuzhihong@gmail.com" created="Wed, 16 Jan 2013 02:26:02 +0000"  >&lt;p&gt;Here is the review request: &lt;a href=&quot;https://reviews.apache.org/r/8966/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/8966/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13554678" author="yuzhihong@gmail.com" created="Wed, 16 Jan 2013 02:34:43 +0000"  >&lt;p&gt;There is compilation error for latest patch:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.5.1:compile (default-compile) on project hbase-server: Compilation failure&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /Users/tyu/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;227,7&amp;#93;&lt;/span&gt; error: HRegionServer is not abstract and does not override abstract method multiGet(RpcController,MultiGetRequest) in BlockingInterface&lt;/p&gt;

&lt;p&gt;Can you use getStartEndKeys() in place of connection.getRegionLocation() ?&lt;/p&gt;</comment>
                            <comment id="13554978" author="jmspaggi" created="Wed, 16 Jan 2013 12:24:23 +0000"  >&lt;p&gt;I will update the proposed patch and use getStartEndKeys. I will also add some regions on the test table to make sure this region-sorted approach is tested correctly...&lt;/p&gt;</comment>
                            <comment id="13555019" author="jmspaggi" created="Wed, 16 Jan 2013 13:25:29 +0000"  >&lt;p&gt;Updated patch using getStartEndKeys() instead of connection.getRegionLocation() and adding more robust tests (multi-regions).&lt;/p&gt;</comment>
                            <comment id="13555072" author="hadoopqa" created="Wed, 16 Jan 2013 14:26:42 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12565120/HBASE-7503-v7-trunk.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12565120/HBASE-7503-v7-trunk.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 2 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces lines longer than 100&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.security.access.TestAccessController&lt;br/&gt;
                  org.apache.hadoop.hbase.TestLocalHBaseCluster&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4045//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4045//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4045//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4045//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4045//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4045//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4045//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4045//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4045//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4045//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4045//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4045//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4045//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4045//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4045//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4045//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4045//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4045//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13555356" author="jmspaggi" created="Wed, 16 Jan 2013 19:16:40 +0000"  >&lt;p&gt;Updated patch attached.&lt;/p&gt;

&lt;p&gt;Compared to the last version, few comments got fixed, some variables got renamed and some JUnit added.&lt;/p&gt;</comment>
                            <comment id="13555380" author="hadoopqa" created="Wed, 16 Jan 2013 19:38:25 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12565155/HBASE-7503-v8-trunk.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12565155/HBASE-7503-v8-trunk.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 2 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces lines longer than 100&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.regionserver.TestColumnSeeking&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4052//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4052//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4052//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4052//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4052//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4052//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4052//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4052//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4052//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4052//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4052//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4052//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4052//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4052//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4052//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4052//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4052//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4052//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13555443" author="jmspaggi" created="Wed, 16 Jan 2013 20:53:01 +0000"  >&lt;p&gt;I ran TestColumnSeeking locally and it passed successfully. Maybe we should try to re-run it by hadoop QA?&lt;/p&gt;</comment>
                            <comment id="13555448" author="yuzhihong@gmail.com" created="Wed, 16 Jan 2013 20:57:58 +0000"  >&lt;p&gt;You can wait for more review comments.&lt;br/&gt;
Then you would have a new patch.&lt;/p&gt;</comment>
                            <comment id="13555504" author="jmspaggi" created="Wed, 16 Jan 2013 21:54:11 +0000"  >&lt;p&gt;Ok. Thanks. I will wait and see.&lt;/p&gt;

&lt;p&gt;JM&lt;/p&gt;
</comment>
                            <comment id="13555695" author="sershe" created="Thu, 17 Jan 2013 00:59:40 +0000"  >&lt;blockquote&gt;&lt;p&gt;optional bool closestRowBefore = 3;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;What&apos;s this for? This is not used anywhere; in fact it&apos;s not even set in request converter.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;If specified, closestRowBefore will be ignored&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;HRegionServer checks closestRowBefore flag first so existence flag will be ignored instead if both are specified.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Map&amp;lt;Get, Integer&amp;gt; reference = new HashMap&amp;lt;Get, Integer&amp;gt;();&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;needs better name.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Bytes.compareTo(get.getRow(), startEndKeys.getSecond()&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt;) &amp;lt;= 0)&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Just checking; are region boundaries in HBase [] or [)? It would seem that this needs to be &quot;&amp;lt;&quot; if the latter is the case.&lt;/p&gt;


&lt;p&gt;While mapping regions to servers, it may be faster/simpler to sort the input list, and traverse it in parallel with region start key list.&lt;br/&gt;
Or to make a copy, traverse keys list removing gets for each region from gets list. And in each case, sending the request immediately.&lt;br/&gt;
Probably doesn&apos;t matter.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;LOG.debug(&quot;Failed for gets on region: &quot; + sortedGetEntry.getKey());&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;warn, like below?&lt;/p&gt;


&lt;p&gt;Code for mapping things to stuff (references/indexes/...) is hard to grasp, at least to me. &lt;br/&gt;
Maybe it&apos;s possible to have array, where for each request there&apos;d be array of ints w/number of elements equal to the number of gets in the request.&lt;br/&gt;
Then one can simply iterate thru responses and insert into corresponding indices in result.&lt;br/&gt;
E.g. if gets are &lt;span class=&quot;error&quot;&gt;&amp;#91;region1-row1, region2-row1, region3-row1, region2-row2&amp;#93;&lt;/span&gt; there&apos;d be 3 requests, and arrays would be [ [ 0 ], [ 1, 3 ], [ 2 ] ]&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;testHTableExists&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Misleading name too.&lt;br/&gt;
I&apos;d split the test into smaller tests too (approximately on comment boundaries &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;) but that&apos;s a matter of personal preference.&lt;/p&gt;</comment>
                            <comment id="13555718" author="yuzhihong@gmail.com" created="Thu, 17 Jan 2013 01:21:14 +0000"  >&lt;blockquote&gt;&lt;p&gt;are region boundaries in HBase [] or [)? It would seem that this needs to be &quot;&amp;lt;&quot; if the latter is the case.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Good finding. The test should cover rows sitting on region boundaries.&lt;/p&gt;</comment>
                            <comment id="13555747" author="jmspaggi" created="Thu, 17 Jan 2013 01:48:01 +0000"  >&lt;p&gt;Thanks for the comments/review.&lt;/p&gt;

&lt;p&gt;Is the end key = next region start key? If so then yes it should be &amp;lt;. But I tought the end key of a region was lower than the start key of the next region. This surprised me I agree because I know we only store the start key for a region...&lt;/p&gt;

&lt;p&gt;I will apply those comments shortly:&lt;br/&gt;
qt. Map&amp;lt;Get, Integer&amp;gt; reference = new HashMap&amp;lt;Get, Integer&amp;gt;();&lt;br/&gt;
qt. needs better name.&lt;/p&gt;

&lt;p&gt;qt. LOG.debug(&quot;Failed for gets on region: &quot; + sortedGetEntry.getKey());&lt;br/&gt;
qt. warn, like below?&lt;/p&gt;

&lt;p&gt;qt. testHTableExists&lt;br/&gt;
qt. Misleading name too.&lt;/p&gt;

&lt;p&gt;qt. I&apos;d split the test into smaller tests too (approximately on comment boundaries ) but that&apos;s a matter of personal preference.&lt;/p&gt;

&lt;p&gt;I will also rename &quot;references&quot;. &lt;/p&gt;

&lt;p&gt;I&apos;m not sure for the comment about &quot;While mapping...&quot; and &quot;Maybe it&apos;s possible to have array, ...&quot; I will have to read them again to make sure I get the suggestion correctly.&lt;/p&gt;</comment>
                            <comment id="13557495" author="jmspaggi" created="Fri, 18 Jan 2013 19:11:12 +0000"  >&lt;p&gt;So here is an updated version. I will update the diff on the review board too.&lt;/p&gt;

&lt;p&gt;I took into consideration all the comments except the one starting by &quot;Code for mapping things to stuff...&quot; because I&apos;m not sure to get how to achieve the same result that way. &lt;/p&gt;

&lt;p&gt;Ran the unit tests locally and are working fine. Now running the entire test suite and will post the results when done.&lt;/p&gt;</comment>
                            <comment id="13557505" author="jmspaggi" created="Fri, 18 Jan 2013 19:23:29 +0000"  >&lt;p&gt;Sorry for the spam &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Just figured there was MANY hidden spaces... Need to remove them even for code quality.&lt;/p&gt;</comment>
                            <comment id="13557511" author="jmspaggi" created="Fri, 18 Jan 2013 19:25:58 +0000"  >&lt;p&gt;Same version, without the extra un-required spaces.&lt;/p&gt;</comment>
                            <comment id="13557615" author="yuzhihong@gmail.com" created="Fri, 18 Jan 2013 21:18:05 +0000"  >&lt;p&gt;From &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4089/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4089/console&lt;/a&gt;, it looks like patch v10 doesn&apos;t compile (against hadoop 2.0)&lt;/p&gt;</comment>
                            <comment id="13557633" author="jmspaggi" created="Fri, 18 Jan 2013 21:38:03 +0000"  >&lt;p&gt;I forgot the ClientProto.java &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Will re-submit in a minute &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13557650" author="jmspaggi" created="Fri, 18 Jan 2013 21:51:11 +0000"  >&lt;p&gt;Will take a bit more time. Eclipse is not exporting anymore the ClientProvo.java file in the .patch even if I select it. That&apos;s where the issue is coming from. I need to figure why first. Don&apos;t know how long this will take.&lt;/p&gt;</comment>
                            <comment id="13557682" author="jmspaggi" created="Fri, 18 Jan 2013 22:17:45 +0000"  >&lt;p&gt;Strange. I had to rever the ClientProtos.java file back to the last from the repository, then re-applied my modifications to be able to generate the patch... So this one should be better.&lt;/p&gt;</comment>
                            <comment id="13557732" author="hadoopqa" created="Fri, 18 Jan 2013 23:14:51 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12565566/HBASE-7503-v11-trunk.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12565566/HBASE-7503-v11-trunk.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces lines longer than 100&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.TestZooKeeper&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4095//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4095//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4095//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4095//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4095//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4095//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4095//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4095//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4095//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4095//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4095//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4095//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4095//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4095//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4095//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4095//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4095//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4095//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13557736" author="sershe" created="Fri, 18 Jan 2013 23:18:15 +0000"  >&lt;p&gt;It&apos;s still not clear if closestRowBefore is needed. And if yes, why is it not in RequestConverter?&lt;br/&gt;
Otherwise (and assuming a working patch &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;) +1.&lt;br/&gt;
Wrt structures and lists, the pseudocode of what I had in mind.&lt;br/&gt;
First loop can be optimized by sorting gets by rowkey first and traversing in parallel with startEndKeys, that improves O over both this and the patch, but may not necessarily be important.&lt;/p&gt;

&lt;p&gt;Input: List&amp;lt;Get&amp;gt; gets; List&amp;lt;KeyPair&amp;gt; startEndKeys = ...;&lt;/p&gt;

&lt;p&gt;List&amp;lt;Request&amp;gt; requests = [];&lt;br/&gt;
List&amp;lt;int[]&amp;gt; getIndexesPerRequest = [];&lt;/p&gt;

&lt;p&gt;for &lt;/p&gt;
{s,e}
&lt;p&gt; in startEndKeys {&lt;br/&gt;
  Request request = null&lt;br/&gt;
  for i in [0, gets.length) {&lt;br/&gt;
    if (gets&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt; != null and gets&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt;.rowKey is in [s,e)) {&lt;br/&gt;
      if (request == null) &lt;/p&gt;
{
        request = new Request()
        requests.add(request)
        getIndexesPerRequest.add(new int[])
      }
&lt;p&gt;      request.addGet(gets&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt;);&lt;br/&gt;
      getIndexesPerRequest&lt;span class=&quot;error&quot;&gt;&amp;#91;requests.length - 1&amp;#93;&lt;/span&gt; = i;&lt;br/&gt;
      gets&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt; = null;&lt;br/&gt;
    }&lt;br/&gt;
  }&lt;br/&gt;
}&lt;br/&gt;
optionally check that gets are all nulls&lt;br/&gt;
send and wait for requests (or could be sent inline after internal for-loop above).&lt;br/&gt;
List&amp;lt;blah&amp;gt; results = new List&amp;lt;blah&amp;gt;(gets.length)&lt;br/&gt;
for i in [0, responses.length) {&lt;br/&gt;
  if error do error stuff, otherwise {&lt;br/&gt;
    assert response&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt;.results.length == getIndexesPerRequest&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt;.length;&lt;br/&gt;
    for j in [0, response&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt;.results.length) &lt;/p&gt;
{
      results[getIndexesPerRequest[i][j]] = response.results[j]
   }
&lt;p&gt;}&lt;br/&gt;
return results;&lt;/p&gt;
</comment>
                            <comment id="13557738" author="sershe" created="Fri, 18 Jan 2013 23:19:44 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Input: List&amp;lt;Get&amp;gt; gets; List&amp;lt;KeyPair&amp;gt; startEndKeys = ...;

List&amp;lt;Request&amp;gt; requests = [];
List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;[]&amp;gt; getIndexesPerRequest = [];

&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; {s,e} in startEndKeys {
  Request request = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; i in [0, gets.length) {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (gets[i] != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; and gets[i].rowKey is in [s,e)) {
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (request == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
        request = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Request()
        requests.add(request)
        getIndexesPerRequest.add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;[])
      }
      request.addGet(gets[i]);
      getIndexesPerRequest[requests.length - 1].add(i);
      gets[i] = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
    }
  }
}
optionally check that gets are all nulls
send and wait &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; requests (or could be sent inline after internal &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;-loop above).
List&amp;lt;blah&amp;gt; results = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; List&amp;lt;blah&amp;gt;(gets.length)
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; i in [0, responses.length) {
  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; error &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; error stuff, otherwise {
    &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; response[i].results.length == getIndexesPerRequest[i].length;
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; j in [0, response[i].results.length) {
      results[getIndexesPerRequest[i][j]] = response.results[j]
   }
}
&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; results;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13557745" author="sershe" created="Fri, 18 Jan 2013 23:24:42 +0000"  >&lt;p&gt;also, = i should be &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;.add(i)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13559835" author="sershe" created="Tue, 22 Jan 2013 18:20:39 +0000"  >&lt;p&gt;Btw my above comments (other than on closestRowBefore) are a nit, shouldn&apos;t block.&lt;/p&gt;</comment>
                            <comment id="13560047" author="jmspaggi" created="Tue, 22 Jan 2013 21:32:12 +0000"  >&lt;p&gt;Hi Sergey,&lt;/p&gt;

&lt;p&gt;Regarding closestRowBefore, you&apos;re totaly right. It&apos;s not used and not 100% required. I have put it in because I took what was on GetRequest and kept the same structure. The idea behind that is that even if it&apos;s not used in this patch, it might still be useful in the futur. So I&apos;m really open to remove it as to keep it.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;assuming a working patch&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;So far it seems to be working fine. I have addedd few test cases and all passed. I&apos;m a bit out of idea for the test cases, so if anything can be added, just let me know and I will be happ&#375; to add it. I think the more test cases we have now, the less issues might be introduced in the futur.&lt;/p&gt;

&lt;p&gt;The patch is not compiling anymore because of the lock beeing removed. So attached is an updated version which compile in te trunk. I have also added on get with a null parameter in the test suite.&lt;/p&gt;</comment>
                            <comment id="13560200" author="yuzhihong@gmail.com" created="Tue, 22 Jan 2013 23:53:55 +0000"  >&lt;p&gt;From &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4134/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4134/console&lt;/a&gt; , looks like there was compilation error.&lt;/p&gt;</comment>
                            <comment id="13560206" author="sershe" created="Wed, 23 Jan 2013 00:03:18 +0000"  >&lt;p&gt;Can closestRowBefore then be added to RequestConverter?&lt;/p&gt;</comment>
                            <comment id="13560208" author="sershe" created="Wed, 23 Jan 2013 00:04:41 +0000"  >&lt;p&gt;Btw, I mentioned working patch because I started writing comment when the patch was broken (e.g. in Hadoop QA), then got distracted and finished the comment when there was already a good patch &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. Sorry for that.&lt;/p&gt;</comment>
                            <comment id="13560233" author="jmspaggi" created="Wed, 23 Jan 2013 00:35:40 +0000"  >&lt;p&gt;@Sergey, do you mean something like   public static MultiGetRequest buildMultiGetRowOrBeforeRequest(final byte[] regionName, final byte[] row, final byte[] family) built like buildGetRowOrBeforeRequest? If so, I will add it.&lt;/p&gt;

&lt;p&gt;@Ted, how can I see what the compilation issue is? I have updated my workspace and it&apos;s working fine. So I&apos;m wondering what the issue is. Is there a way to see it?&lt;/p&gt;</comment>
                            <comment id="13560242" author="yuzhihong@gmail.com" created="Wed, 23 Jan 2013 00:42:02 +0000"  >&lt;p&gt;Patch v12 is of 815KB which is significantly larger than the other patches.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
--- hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/ClientProtos.java (revision 1437181)
+++ hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/ClientProtos.java (working copy)
@@ -1,19678 +0,0 @@
-&lt;span class=&quot;code-comment&quot;&gt;// Generated by the protocol buffer compiler.  DO NOT EDIT!
&lt;/span&gt;-&lt;span class=&quot;code-comment&quot;&gt;// source: Client.proto
&lt;/span&gt;-
-&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; org.apache.hadoop.hbase.protobuf.generated;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;ClientProtos.java was removed, resulting in compilation error.&lt;/p&gt;</comment>
                            <comment id="13561632" author="jmspaggi" created="Thu, 24 Jan 2013 14:07:05 +0000"  >&lt;p&gt;closestRowBefore added to RequestConverter parameters and ClientProtos.java back in the patch. I think I figure why I had some many troubles with adding ClientProtos.java and Protos.java. It&apos;s because eclipse don&apos;t add them on an patch if there was marked as &quot;Merge issue&quot;, until you un-marked them manually, even if you fix the issue... Anyway. This one now should be good...&lt;/p&gt;</comment>
                            <comment id="13561667" author="hadoopqa" created="Thu, 24 Jan 2013 15:06:59 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12566309/HBASE-7503-v13-trunk.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12566309/HBASE-7503-v13-trunk.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 2 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces lines longer than 100&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.security.access.TestZKPermissionsWatcher&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4160//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4160//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4160//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4160//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4160//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4160//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4160//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4160//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4160//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4160//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4160//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4160//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4160//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4160//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4160//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4160//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13561671" author="jmspaggi" created="Thu, 24 Jan 2013 15:14:28 +0000"  >&lt;p&gt;I ran org.apache.hadoop.hbase.client.TestFromClientSide3 and it&apos;s working fine locally.&lt;/p&gt;

&lt;p&gt;Hadoop QA failed on org.apache.hadoop.hbase.security.access.TestZKPermissionsWatcher.testPermissionsWatcher which seems not related to this patch.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running org.apache.hadoop.hbase.client.TestFromClientSide3
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 131.651 sec

Results :

Tests run: 5, Failures: 0, Errors: 0, Skipped: 0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] HBase ............................................. SUCCESS [4.311s]
[INFO] HBase - Common .................................... SUCCESS [4.439s]
[INFO] HBase - Protocol .................................. SUCCESS [9.436s]
[INFO] HBase - Client .................................... SUCCESS [0.309s]
[INFO] HBase - Hadoop Compatibility ...................... SUCCESS [0.222s]
[INFO] HBase - Hadoop One Compatibility .................. SUCCESS [0.678s]
[INFO] HBase - Server .................................... SUCCESS [2:26.146s]
[INFO] HBase - Integration Tests ......................... SUCCESS [4.427s]
[INFO] HBase - Examples .................................. SUCCESS [2.638s]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13561689" author="yuzhihong@gmail.com" created="Thu, 24 Jan 2013 15:38:02 +0000"  >&lt;p&gt;@Jean-Marc:&lt;br/&gt;
Mind attaching your patch again ?&lt;/p&gt;</comment>
                            <comment id="13561693" author="jmspaggi" created="Thu, 24 Jan 2013 15:44:14 +0000"  >&lt;p&gt;The same version? Or should I increment the version to get it processed?&lt;/p&gt;</comment>
                            <comment id="13561703" author="yuzhihong@gmail.com" created="Thu, 24 Jan 2013 16:02:56 +0000"  >&lt;p&gt;Hadoop QA looks at attachment Id, not file name. Meaning, attaching same file would do.&lt;/p&gt;</comment>
                            <comment id="13561732" author="jmspaggi" created="Thu, 24 Jan 2013 16:16:46 +0000"  >&lt;p&gt;Patch re-attached.&lt;/p&gt;</comment>
                            <comment id="13561777" author="hadoopqa" created="Thu, 24 Jan 2013 17:23:07 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12566322/HBASE-7503-v13-trunk.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12566322/HBASE-7503-v13-trunk.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 2 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4161//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4161//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4161//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4161//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4161//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4161//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4161//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4161//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4161//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4161//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4161//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4161//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4161//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4161//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4161//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4161//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13561832" author="sershe" created="Thu, 24 Jan 2013 18:35:45 +0000"  >&lt;p&gt;+1 on latest patch...&lt;/p&gt;</comment>
                            <comment id="13562124" author="yuzhihong@gmail.com" created="Thu, 24 Jan 2013 23:23:56 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Get get : gets) {
+      &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; startKeyIndex = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
+      &lt;span class=&quot;code-comment&quot;&gt;// Search which region &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; get is related to by comparing start and end keys.
&lt;/span&gt;+      &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; startEndKeys.getFirst().length; ++i) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;When the number of Get&apos;s is high, the above nested loop is not efficient.&lt;/p&gt;

&lt;p&gt;Sergey suggested sorting the Get&apos;s so that you can traverse sorted Get&apos;s and startEndKeys in tandem.&lt;br/&gt;
Can you do that ?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="13562205" author="yuzhihong@gmail.com" created="Fri, 25 Jan 2013 00:31:40 +0000"  >&lt;p&gt;Suppose there&apos;re G Get&apos;s and R regions in the table, the complexity for current approach is G x R&lt;br/&gt;
If we sort first, complexity is G x log(G) + G + R.&lt;/p&gt;</comment>
                            <comment id="13562294" author="jmspaggi" created="Fri, 25 Jan 2013 02:31:38 +0000"  >&lt;p&gt;I totally agree with your comment. Worst case can be bad. If all gets are in the first region, it will be faster than the sort &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I will re-look at Sergey&apos;s solution and try to implement it shortly.&lt;/p&gt;</comment>
                            <comment id="13562306" author="yuzhihong@gmail.com" created="Fri, 25 Jan 2013 02:44:20 +0000"  >&lt;p&gt;@Jean-Marc:&lt;br/&gt;
As you said, we don&apos;t always need to sort.&lt;br/&gt;
A comparison between the two complexities should be done at the beginning to decide which way to go.&lt;/p&gt;</comment>
                            <comment id="13562663" author="jmspaggi" created="Fri, 25 Jan 2013 13:27:06 +0000"  >&lt;p&gt;Hi Ted,&lt;/p&gt;

&lt;p&gt;To detect the complexiti and go without the sorting option, this will add almost the same effort are simply always sorting.&lt;/p&gt;

&lt;p&gt;Sorting the regions will take R x log(R).&lt;br/&gt;
Sorting the gets will take G x log(g).&lt;br/&gt;
Looping through the sorting lists will take max (G, R).&lt;/p&gt;

&lt;p&gt;So basically, at the end, the complexity will be close to n.log&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_down.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Not doing the sort will always give is something like n&#178; because of the nested loop... &lt;/p&gt;

&lt;p&gt;I will change the implementation.&lt;/p&gt;

&lt;p&gt;In Sergey&apos;s example above, even if we are setting the gets to null to skip them faster, we are still doing the entire loop2. It&apos;s a bit more optimal than what I did, but we still have n&#178;.&lt;/p&gt;

&lt;p&gt;Let me think about that and I will come back with a proposal.&lt;/p&gt;</comment>
                            <comment id="13562674" author="yuzhihong@gmail.com" created="Fri, 25 Jan 2013 13:38:24 +0000"  >&lt;p&gt;You don&apos;t need to sort the regions in the table. The start and end keys are sorted already. &lt;/p&gt;

&lt;p&gt;What does n represent above ?&lt;/p&gt;</comment>
                            <comment id="13562680" author="jmspaggi" created="Fri, 25 Jan 2013 13:45:03 +0000"  >&lt;p&gt;I was wondering for the regions &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I was looking at the code while our comment arrived &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Ok. One less.&lt;/p&gt;

&lt;p&gt;n represent any value. It&apos;s just giving an idea of the overall complexity. Here, at the end, the call will cost something like O(n log n). It&apos;s given to compare against O(n&#178;) or O(log n). It&apos;s not a specific value.&lt;/p&gt;

&lt;p&gt;So if the regions are already sorted, then the overall complexity will be G log (G) which we can write also as O(n log n) where n here reprensent the number of gets in the request.&lt;/p&gt;</comment>
                            <comment id="13562950" author="yuzhihong@gmail.com" created="Fri, 25 Jan 2013 19:39:10 +0000"  >&lt;p&gt;@Jean-Marc:&lt;br/&gt;
Can you attach latest patch here ?&lt;/p&gt;</comment>
                            <comment id="13562953" author="jmspaggi" created="Fri, 25 Jan 2013 19:39:53 +0000"  >&lt;p&gt;Update patch attached, improving the performances based on Sergey&apos;s and Ted&apos;s comment. Passing TestFromClientSide3 successfuly.&lt;/p&gt;</comment>
                            <comment id="13563007" author="hadoopqa" created="Fri, 25 Jan 2013 20:37:09 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12566540/HBASE-7503-v14-trunk.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12566540/HBASE-7503-v14-trunk.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 3 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces lines longer than 100&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.client.TestAdmin&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4183//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4183//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4183//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4183//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4183//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4183//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4183//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4183//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4183//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4183//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4183//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4183//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4183//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4183//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4183//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4183//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13564725" author="sershe" created="Mon, 28 Jan 2013 21:55:07 +0000"  >&lt;blockquote&gt;&lt;p&gt;Map&amp;lt;Integer, List&amp;lt;Get&amp;gt;&amp;gt; getsByRegion = new HashMap&amp;lt;Integer, List&amp;lt;Get&amp;gt;&amp;gt;();&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Can be done with just an array &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;if (index == null) {
bq.        index = 0;
bq.      }&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;What&apos;s this for?&lt;/p&gt;

&lt;p&gt;Otherwise looks good.&lt;/p&gt;</comment>
                            <comment id="13564729" author="sershe" created="Mon, 28 Jan 2013 21:56:50 +0000"  >&lt;p&gt;Actually, nevermind about the array, I see these are region indices, not get indices.&lt;/p&gt;</comment>
                            <comment id="13565733" author="jmspaggi" created="Tue, 29 Jan 2013 20:06:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sershe&quot; class=&quot;user-hover&quot; rel=&quot;sershe&quot;&gt;Sergey Shelukhin&lt;/a&gt;&lt;br/&gt;
Sorry, I cancelled the patch because I tought the if (index == null) &lt;/p&gt;
{ index = 0; }
&lt;p&gt; was something I missed, but finally it&apos;s normal.&lt;/p&gt;

&lt;p&gt;indexes contains the index of the results in the current region. Initially, it&apos;s empty because indexes = new HashMap&amp;lt;Integer, Integer&amp;gt;(); so when we try to retrieve a region index for the first time, index == null. Which mean we are at the index 0. That&apos;s why we have this test.&lt;/p&gt;</comment>
                            <comment id="13565767" author="sershe" created="Tue, 29 Jan 2013 20:29:16 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13565866" author="yuzhihong@gmail.com" created="Tue, 29 Jan 2013 22:06:36 +0000"  >&lt;p&gt;TestAdmin failed in the last QA run.&lt;/p&gt;

&lt;p&gt;Mind attaching the patch again, @Jean-Marc ?&lt;/p&gt;</comment>
                            <comment id="13565889" author="jmspaggi" created="Tue, 29 Jan 2013 22:30:35 +0000"  >&lt;p&gt;Re-submitting ask requested.&lt;/p&gt;</comment>
                            <comment id="13566057" author="hadoopqa" created="Wed, 30 Jan 2013 01:47:17 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12567084/7503-v14-trunk.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12567084/7503-v14-trunk.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 3 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4243//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4243//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4243//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4243//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4243//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4243//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4243//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4243//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4243//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4243//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4243//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4243//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4243//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4243//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4243//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4243//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13566082" author="yuzhihong@gmail.com" created="Wed, 30 Jan 2013 02:15:48 +0000"  >&lt;p&gt;We&apos;re really close.&lt;/p&gt;

&lt;p&gt;@Jean-Marc:&lt;br/&gt;
If you can find out the 3 new Findbugs warnings, that would be great.&lt;br/&gt;
You can use &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4240/artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4240/artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.xml&lt;/a&gt; as the basis where no new findbugs warning was reported.&lt;/p&gt;</comment>
                            <comment id="13566440" author="jmspaggi" created="Wed, 30 Jan 2013 13:02:07 +0000"  >&lt;p&gt;Update version including some findbug fixes.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tedyu@apache.org&quot;&gt;Ted Yu&lt;/a&gt; I found 2 findbugs for my patch, but seems that another one got introduced before. So I fixed one findbug in one of the classes in touched, but not related to the fix I did.&lt;/p&gt;

&lt;p&gt;As soon as I&apos;m done with &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7503&quot; title=&quot;Add exists(List) in HTableInterface to allow multiple parallel exists at one time&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7503&quot;&gt;&lt;del&gt;HBASE-7503&lt;/del&gt;&lt;/a&gt; I will work on fixing findbugs issues to get them lower.&lt;/p&gt;</comment>
                            <comment id="13566499" author="hadoopqa" created="Wed, 30 Jan 2013 14:04:53 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12567134/HBASE-7503-v15-trunk.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12567134/HBASE-7503-v15-trunk.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4250//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4250//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4250//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4250//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4250//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4250//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4250//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4250//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4250//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4250//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4250//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4250//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4250//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4250//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4250//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4250//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13566528" author="yuzhihong@gmail.com" created="Wed, 30 Jan 2013 15:11:31 +0000"  >&lt;p&gt;Integrated to trunk.&lt;/p&gt;

&lt;p&gt;Thanks for the patch, Jean-Marc.&lt;/p&gt;

&lt;p&gt;Thanks for the review, Sergey.&lt;/p&gt;</comment>
                            <comment id="13566695" author="hudson" created="Wed, 30 Jan 2013 18:00:50 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3827 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3827/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3827/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7503&quot; title=&quot;Add exists(List) in HTableInterface to allow multiple parallel exists at one time&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7503&quot;&gt;&lt;del&gt;HBASE-7503&lt;/del&gt;&lt;/a&gt; Add exists(List) in HTableInterface to allow multiple parallel exists at one time (Jean-Marc) (Revision 1440454)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/ClientProtos.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-protocol/src/main/protobuf/Client.proto&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/client/HTable.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/client/HTableInterface.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/client/HTablePool.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/coprocessor/CoprocessorHost.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/rest/client/RemoteHTable.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestFromClientSide3.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/master/MockRegionServer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13567264" author="hudson" created="Thu, 31 Jan 2013 02:30:34 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #385 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/385/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/385/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7503&quot; title=&quot;Add exists(List) in HTableInterface to allow multiple parallel exists at one time&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7503&quot;&gt;&lt;del&gt;HBASE-7503&lt;/del&gt;&lt;/a&gt; Add exists(List) in HTableInterface to allow multiple parallel exists at one time (Jean-Marc) (Revision 1440454)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/ClientProtos.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-protocol/src/main/protobuf/Client.proto&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/client/HTable.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/client/HTableInterface.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/client/HTablePool.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/coprocessor/CoprocessorHost.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/rest/client/RemoteHTable.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestFromClientSide3.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/master/MockRegionServer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13775054" author="stack" created="Mon, 23 Sep 2013 18:30:38 +0000"  >&lt;p&gt;Marking closed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12567084" name="7503-v14-trunk.patch" size="161926" author="yuzhihong@gmail.com" created="Wed, 30 Jan 2013 00:42:19 +0000"/>
                            <attachment id="12563510" name="HBASE-7503-v0-trunk.patch" size="7169" author="jmspaggi" created="Mon, 7 Jan 2013 01:18:10 +0000"/>
                            <attachment id="12564596" name="HBASE-7503-v1-trunk.patch" size="8026" author="jmspaggi" created="Sat, 12 Jan 2013 21:58:32 +0000"/>
                            <attachment id="12565537" name="HBASE-7503-v10-trunk.patch" size="23190" author="jmspaggi" created="Fri, 18 Jan 2013 19:25:44 +0000"/>
                            <attachment id="12565566" name="HBASE-7503-v11-trunk.patch" size="168733" author="jmspaggi" created="Fri, 18 Jan 2013 22:16:51 +0000"/>
                            <attachment id="12566018" name="HBASE-7503-v12-trunk.patch" size="834914" author="jmspaggi" created="Tue, 22 Jan 2013 21:32:05 +0000"/>
                            <attachment id="12566322" name="HBASE-7503-v13-trunk.patch" size="160354" author="jmspaggi" created="Thu, 24 Jan 2013 16:16:35 +0000"/>
                            <attachment id="12566309" name="HBASE-7503-v13-trunk.patch" size="160354" author="jmspaggi" created="Thu, 24 Jan 2013 14:05:16 +0000"/>
                            <attachment id="12566540" name="HBASE-7503-v14-trunk.patch" size="161926" author="jmspaggi" created="Fri, 25 Jan 2013 19:39:09 +0000"/>
                            <attachment id="12567134" name="HBASE-7503-v15-trunk.patch" size="163336" author="jmspaggi" created="Wed, 30 Jan 2013 12:59:54 +0000"/>
                            <attachment id="12565032" name="HBASE-7503-v2-trunk.patch" size="15219" author="jmspaggi" created="Tue, 15 Jan 2013 23:16:37 +0000"/>
                            <attachment id="12565031" name="HBASE-7503-v2-trunk.patch" size="15219" author="jmspaggi" created="Tue, 15 Jan 2013 23:16:37 +0000"/>
                            <attachment id="12565035" name="HBASE-7503-v3-trunk.patch" size="16482" author="jmspaggi" created="Tue, 15 Jan 2013 23:20:30 +0000"/>
                            <attachment id="12565038" name="HBASE-7503-v4-trunk.patch" size="161909" author="jmspaggi" created="Tue, 15 Jan 2013 23:33:15 +0000"/>
                            <attachment id="12565042" name="HBASE-7503-v5-trunk.patch" size="161122" author="jmspaggi" created="Tue, 15 Jan 2013 23:38:18 +0000"/>
                            <attachment id="12565120" name="HBASE-7503-v7-trunk.patch" size="166146" author="jmspaggi" created="Wed, 16 Jan 2013 13:25:29 +0000"/>
                            <attachment id="12565155" name="HBASE-7503-v8-trunk.patch" size="167593" author="jmspaggi" created="Wed, 16 Jan 2013 19:15:54 +0000"/>
                            <attachment id="12565534" name="HBASE-7503-v9-trunk.patch" size="23341" author="jmspaggi" created="Fri, 18 Jan 2013 19:09:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 7 Jan 2013 02:13:31 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>302857</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i175yv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>249935</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>New method is added to HTableInterface:&lt;br/&gt;
&lt;br/&gt;
Boolean[] exists(List&amp;lt;Get&amp;gt; gets) throws IOException;&lt;br/&gt;
&lt;br/&gt;
It tests for the existence of columns in the table, as specified by the Gets.&lt;br/&gt;
This will return an array of booleans. Each value will be true if the related Get matches one or more keys, false if not.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>