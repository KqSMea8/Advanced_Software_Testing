<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:58:02 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-14944/HBASE-14944.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-14944] Minimize or eliminate source incompatible changes due to HBASE-14605, HBASE-14631, and HBASE-14655</title>
                <link>https://issues.apache.org/jira/browse/HBASE-14944</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Minimize or eliminate source incompatible changes due to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14605&quot; title=&quot;Split fails due to &amp;#39;No valid credentials&amp;#39; error when SecureBulkLoadEndpoint#start tries to access hdfs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14605&quot;&gt;&lt;del&gt;HBASE-14605&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14631&quot; title=&quot;Region merge request should be audited with request user through proper scope of doAs() calls to region observer notifications&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14631&quot;&gt;&lt;del&gt;HBASE-14631&lt;/del&gt;&lt;/a&gt;, and &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14655&quot; title=&quot;Narrow the scope of doAs() calls to region observer notifications for compaction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14655&quot;&gt;&lt;del&gt;HBASE-14655&lt;/del&gt;&lt;/a&gt;. The changes are due to abstract method additions to carry the correct (not current) &lt;tt&gt;User&lt;/tt&gt; through to where authoritative decisions or audit is performed.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14605&quot; title=&quot;Split fails due to &amp;#39;No valid credentials&amp;#39; error when SecureBulkLoadEndpoint#start tries to access hdfs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14605&quot;&gt;&lt;del&gt;HBASE-14605&lt;/del&gt;&lt;/a&gt; introduces source incompatible changes to the SplitTransaction interface:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Adds abstract method execute(Server, RegionServerServices, User)&lt;/li&gt;
	&lt;li&gt;Adds abstract method rollback(Server, RegionServerServices, User)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14631&quot; title=&quot;Region merge request should be audited with request user through proper scope of doAs() calls to region observer notifications&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14631&quot;&gt;&lt;del&gt;HBASE-14631&lt;/del&gt;&lt;/a&gt; introduces source incompatible changes to the RegionMergeTransaction interface:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Adds abstract method execute(Server, RegionServerServices, User)&lt;/li&gt;
	&lt;li&gt;Adds abstract method rollback(Server, RegionServerServices, User)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14655&quot; title=&quot;Narrow the scope of doAs() calls to region observer notifications for compaction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14655&quot;&gt;&lt;del&gt;HBASE-14655&lt;/del&gt;&lt;/a&gt; introduces source incompatible changes to the Store interface:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Adds abstract method compact(CompactionContext, CompactionThroughputController, User)&lt;/li&gt;
	&lt;li&gt;Adds abstract method requestCompaction( int, CompactionRequest, User)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Default implementations are provided for binary compatibility but implementors of these interface won&apos;t recompile until implementations of the new methods are added.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12919852">HBASE-14944</key>
            <summary>Minimize or eliminate source incompatible changes due to HBASE-14605, HBASE-14631, and HBASE-14655</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12907554">HBASE-14686</parent>
                                    <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="apurtell">Andrew Purtell</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Dec 2015 21:40:40 +0000</created>
                <updated>Thu, 14 Jan 2016 03:42:04 +0000</updated>
                            <resolved>Thu, 14 Jan 2016 03:42:04 +0000</resolved>
                                    <version>1.1.3</version>
                    <version>1.0.4</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="15045821" author="apurtell" created="Mon, 7 Dec 2015 21:54:54 +0000"  >&lt;p&gt;For SplitTransaction and RegionMergeTransaction we could add add new methods getRequestUser and setRequestUser for accessing the request user (and setting it), but this leaves us with the same problem, new abstract methods, because these are both interfaces.&lt;/p&gt;

&lt;p&gt;For the compaction related changes to Store we can carry around the request User within CompactionContext and CompactionRequest. CompactionContext is private. CompactionRequest is LP(Coprocessor). Both are abstract classes so by providing implementations of getters and setters we won&apos;t cause source or binary compat problems. We would however introduce new methods so any users of same in code written against new release N would not compile after rollback to N-1.&lt;/p&gt;

&lt;p&gt;Any other ideas &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ted_yu&quot; class=&quot;user-hover&quot; rel=&quot;ted_yu&quot;&gt;Ted Yu&lt;/a&gt; ?&lt;/p&gt;

&lt;p&gt;Also for sake of completeness, we have the option of reverting the chain of commits leading to this point back to the original security bug fix for secure bulk load, and advise in the troubleshooting section of the manual and/or release notes that we can&apos;t fix the problem in 1.0 or 1.1.&lt;/p&gt;</comment>
                            <comment id="15045896" author="yuzhihong@gmail.com" created="Mon, 7 Dec 2015 22:33:17 +0000"  >&lt;blockquote&gt;&lt;p&gt;any users of same in code written against new release N would not compile after rollback to N-1&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This should be fine - we don&apos;t provide guarantee w.r.t. downgrade&lt;/p&gt;</comment>
                            <comment id="15051288" author="ndimiduk" created="Thu, 10 Dec 2015 17:23:14 +0000"  >&lt;p&gt;All three of these interfaces are marked as &lt;tt&gt;LimitedPrivate(COPROC)&lt;/tt&gt;, &lt;tt&gt;Evolving&lt;/tt&gt; on 1.1. According to out &lt;a href=&quot;http://hbase.apache.org/book.html#hbase.versioning&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;guidelines&lt;/a&gt;, we promise only ABI compatibility for server-side limited private interfaces.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;This implies binary compatibility for coprocessors and plugins (pluggable classes, including replication) as long as these are only using marked interfaces/classes.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;tt&gt;Evolving&lt;/tt&gt; appears to mean we could break this ABI compatibility on minor releases, but not patch releases.&lt;/p&gt;

&lt;p&gt;Furthermore, we say in summary (emphasis my own),&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;A patch upgrade is a drop-in replacement. Any change that is not Java binary compatible would not be allowed. &lt;em&gt;Downgrading versions within patch releases may not be compatible.&lt;/em&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Since the parent ticket &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14686&quot; title=&quot;Ensure authoritative security coprocessors execute in the correct context&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14686&quot;&gt;HBASE-14686&lt;/a&gt; is addressing a security lapse, I now think we can and should accept these changes into 1.0 and 1.1.&lt;/p&gt;

&lt;p&gt;Unless there are new objectors, I will go forward with the 1.1 release.&lt;/p&gt;

&lt;p&gt;FYI &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=busbey&quot; class=&quot;user-hover&quot; rel=&quot;busbey&quot;&gt;Sean Busbey&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15059174" author="ndimiduk" created="Wed, 16 Dec 2015 00:18:28 +0000"  >&lt;p&gt;Ping also &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jamestaylor&quot; class=&quot;user-hover&quot; rel=&quot;jamestaylor&quot;&gt;James Taylor&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chrajeshbabu32%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;chrajeshbabu32@gmail.com&quot;&gt;Rajeshbabu Chintaguntla&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eowhadi&quot; class=&quot;user-hover&quot; rel=&quot;eowhadi&quot;&gt;Eric Owhadi&lt;/a&gt; &amp;#8211; you fellas have any concern over these changes in the coproc APIs?&lt;/p&gt;</comment>
                            <comment id="15097535" author="ndimiduk" created="Thu, 14 Jan 2016 03:42:04 +0000"  >&lt;p&gt;Absence of response taken as no further opinion. Resolving as &apos;Invalid&apos;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 7 Dec 2015 22:33:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            48 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2pk87:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>