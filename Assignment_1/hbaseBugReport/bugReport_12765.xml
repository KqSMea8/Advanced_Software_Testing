<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:36:13 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-12765/HBASE-12765.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-12765] SplitTransaction creates too many threads (potentially)</title>
                <link>https://issues.apache.org/jira/browse/HBASE-12765</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;In splitStoreFiles(...) we create a new thread pool with as many threads as there are files to split.&lt;br/&gt;
We should be able to do better. During times of very heavy write loads there might be a lot of files to split and multiple splits might be going on at the same time on the same region server.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12763912">HBASE-12765</key>
            <summary>SplitTransaction creates too many threads (potentially)</summary>
                <type id="13" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/genericissue.png">Brainstorming</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="lhofhansl">Lars Hofhansl</reporter>
                        <labels>
                    </labels>
                <created>Sun, 28 Dec 2014 07:14:33 +0000</created>
                <updated>Sat, 4 Jul 2015 00:04:43 +0000</updated>
                            <resolved>Sat, 4 Jul 2015 00:04:43 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                            <comments>
                            <comment id="14259586" author="lhofhansl" created="Sun, 28 Dec 2014 07:20:06 +0000"  >&lt;p&gt;Not sure, yet, what the best answer is. A single shared threapool might be better. It could be initialized with a number of threads that makes sense for the machine we&apos;re running on (umber of cores, or maybe 2x number of cores).&lt;br/&gt;
At least we could limit each single split transaction to never using more than some number of threads (maybe 1/2 number of cores, or something?)&lt;/p&gt;</comment>
                            <comment id="14259589" author="lhofhansl" created="Sun, 28 Dec 2014 07:28:47 +0000"  >&lt;p&gt;At the very very least we should log how many files we are attempting to split, get a historic feel for the number of files that needed to be split. Could also expose this as a global metric: Number of files split or something.&lt;/p&gt;</comment>
                            <comment id="14259845" author="lhofhansl" created="Mon, 29 Dec 2014 04:57:05 +0000"  >&lt;p&gt;I will start with logs and metric, would be good to get that into 0.98.10. Then we&apos;ll trace that in production and go from there.&lt;/p&gt;</comment>
                            <comment id="14259860" author="lhofhansl" created="Mon, 29 Dec 2014 05:46:31 +0000"  >&lt;p&gt;Trivial patch. Just adds two log lines.&lt;br/&gt;
Need to think a bit about metric, as these are not region metrics (the parent region will soon go away, so no point recording how many splits were executed or how many HFiles were split)&lt;/p&gt;</comment>
                            <comment id="14260282" author="stack" created="Mon, 29 Dec 2014 18:06:34 +0000"  >&lt;p&gt;Go for it &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt; Maybe make new issue for the attached patch that is subtask of this issue and commit against it?&lt;/p&gt;</comment>
                            <comment id="14260566" author="lhofhansl" created="Mon, 29 Dec 2014 23:50:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt;, do you have a recommendation as to where the keep track of split metrics? It does not make sense to put then on the region as the parent region will go away, this would need to be stored per region server somehow. I could add counters to HRegionServer or maybe add new counters to MetricsRegionServerSource?&lt;/p&gt;</comment>
                            <comment id="14260571" author="eclark" created="Mon, 29 Dec 2014 23:57:29 +0000"  >&lt;p&gt;I would think making a counter off of MetricsRegionServerSource would be good.&lt;br/&gt;
I usually add the counter to HRegionServer if that number will be used somewhere else ( server load reporting, logging, etc) otherwise I add it to MetricsRegionServerSource. I can do that work if you want.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12689294" name="12765.txt" size="1188" author="lhofhansl" created="Mon, 29 Dec 2014 05:46:30 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12764094">HBASE-12776</subtask>
                            <subtask id="12764104">HBASE-12779</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 29 Dec 2014 18:06:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 50 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i23su7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>