<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:50:59 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-7987/HBASE-7987.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-7987] Snapshot Manifest file instead of multiple empty files</title>
                <link>https://issues.apache.org/jira/browse/HBASE-7987</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Currently taking a snapshot means creating one empty file for each file in the source table directory, plus copying the .regioninfo file for each region, the table descriptor file and a snapshotInfo file.&lt;/p&gt;

&lt;p&gt;during the restore or snapshot verification we traverse the filesystem (fs.listStatus()) to find the snapshot files, and we open the .regioninfo files to get the information.&lt;/p&gt;

&lt;p&gt;to avoid hammering the NameNode and having lots of empty files, we can use a manifest file that contains the list of files and information that we need.&lt;br/&gt;
To keep the RS parallelism that we have, each RS can write its own manifest.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
message SnapshotDescriptor {
  required string name;
  optional string table;
  optional int64 creationTime;
  optional Type type;
  optional int32 version;
}

message SnapshotRegionManifest {
  optional int32 version;
  required RegionInfo regionInfo;
  repeated FamilyFiles familyFiles;

  message StoreFile {
    required string name;
    optional Reference reference;
  }

  message FamilyFiles {
    required bytes familyName;
    repeated StoreFile storeFiles;
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
/hbase/.snapshot/&amp;lt;snapshotName&amp;gt;
/hbase/.snapshot/&amp;lt;snapshotName&amp;gt;/snapshotInfo
/hbase/.snapshot/&amp;lt;snapshotName&amp;gt;/&amp;lt;tableName&amp;gt;
/hbase/.snapshot/&amp;lt;snapshotName&amp;gt;/&amp;lt;tableName&amp;gt;/tableInfo
/hbase/.snapshot/&amp;lt;snapshotName&amp;gt;/&amp;lt;tableName&amp;gt;/regionManifest(.n)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12635092">HBASE-7987</key>
            <summary>Snapshot Manifest file instead of multiple empty files</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mbertozzi">Matteo Bertozzi</assignee>
                                    <reporter username="mbertozzi">Matteo Bertozzi</reporter>
                        <labels>
                    </labels>
                <created>Mon, 4 Mar 2013 09:35:34 +0000</created>
                <updated>Sat, 21 Feb 2015 23:33:47 +0000</updated>
                            <resolved>Wed, 7 May 2014 21:28:16 +0000</resolved>
                                                    <fixVersion>0.99.0</fixVersion>
                                    <component>snapshots</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>15</watches>
                                                                <comments>
                            <comment id="13592814" author="yuzhihong@gmail.com" created="Mon, 4 Mar 2013 23:53:46 +0000"  >&lt;p&gt;Would this optimization introduce versioning for snapshots ?&lt;/p&gt;

&lt;p&gt;There may be the empty files produced by current implementation of snapshots.&lt;/p&gt;</comment>
                            <comment id="13592983" author="yuzhihong@gmail.com" created="Tue, 5 Mar 2013 02:47:20 +0000"  >&lt;p&gt;Raising priority - this would effectively reduce load on name node.&lt;br/&gt;
Having the manifest file would also give us clearer view of the snapshot.&lt;/p&gt;</comment>
                            <comment id="13593098" author="stack" created="Tue, 5 Mar 2013 06:04:05 +0000"  >&lt;p&gt;Why raise priority on the issue before getting an answer?  Snapshotting has had months of intensive testing so what is there &apos;works&apos;.  This sounds like an improvement but not something that should get in the way of current snapshot release &amp;#8211; unless you have evidence otherwise &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ted_yu&quot; class=&quot;user-hover&quot; rel=&quot;ted_yu&quot;&gt;Ted Yu&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13593430" author="mbertozzi" created="Tue, 5 Mar 2013 14:24:58 +0000"  >&lt;p&gt;We have already versioning for snapshots in the SnapshotDescription. Jesse added it, i think when we have discussed this &quot;single&quot; manifest format.&lt;/p&gt;

&lt;p&gt;In terms of &quot;it will give us a clearer view of the snapshot&quot; it depends on your tastes &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
currently, you can just do a ls -lR /hbase/.snapshot and you know what is in the snapshot... with the manifests you can&apos;t do that, you should use the SnapshotInfo tool... so, it&apos;s a trade off... the manifest it may be better because more is compact and you can extend it with more metadata... but if you don&apos;t have a tool you can&apos;t see it... and if you corrupt the manifest file you have lost all your snapshot, while with the current one you can restore with losing just some data (as today when hbck removes one hfile)&lt;/p&gt;

&lt;p&gt;for me, this is a &quot;next gen&quot; format, not a urgent fix because the current one is broken.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;There may be the empty files produced by current implementation of snapshots.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Not sure what you mean here...&lt;/p&gt;</comment>
                            <comment id="13593436" author="yuzhihong@gmail.com" created="Tue, 5 Mar 2013 14:39:59 +0000"  >&lt;blockquote&gt;&lt;p&gt;There may be the empty files produced by current implementation of snapshots.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;See the code from ReferenceRegionHFilesTask:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!fs.createNewFile(referenceFile)) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above call is in nested loop.&lt;/p&gt;

&lt;p&gt;What would be the recommended format when this optimization is in place ? Are we going to provide option for user to switch between the former and this optimization ?&lt;/p&gt;</comment>
                            <comment id="13593471" author="mbertozzi" created="Tue, 5 Mar 2013 15:24:40 +0000"  >&lt;p&gt;A snapshot is a set of empty files, since we don&apos;t need the content.&lt;br/&gt;
basically the restore uses only the name of the file to know what to restore.&lt;br/&gt;
(the only special case is a reference file)&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;What would be the recommended format when this optimization is in place ? Are we going to provide option for user to switch between the former and this optimization ?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;again not sure what you mean, if we&apos;re going for a format2, there will be just format2 on write, and both on read like the HFile.&lt;/p&gt;

&lt;p&gt;The format that I&apos;ve proposed is the one in the description basically each RS dump a list of SnapshotRegionManifest (one file per RS)&lt;br/&gt;
The master writes as today the .snapshotInfo and the .tableInfo&lt;/p&gt;</comment>
                            <comment id="13593484" author="yuzhihong@gmail.com" created="Tue, 5 Mar 2013 15:36:54 +0000"  >&lt;blockquote&gt;&lt;p&gt;if we&apos;re going for a format2, there will be just format2 on write&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;That&apos;s my understanding as well.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;basically each RS dump a list of SnapshotRegionManifest (one file per RS)&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Can the manifest be one per region ?&lt;br/&gt;
From ReferenceRegionHFilesTask:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
   * Reference all the files in the given region directory
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;You mentioned potential corruption of manifest file, if we keep one manifest per region, the loss would be lower in case of corrupt manifest.&lt;/p&gt;</comment>
                            <comment id="13593501" author="mbertozzi" created="Tue, 5 Mar 2013 15:46:40 +0000"  >&lt;blockquote&gt;&lt;p&gt;Can the manifest be one per region ?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;We can, but the idea behind the manifest is reducing the NN operation... and if you add more manifest you end up in the same situation as before. (thinking at stripe compaction with more regions and less files)&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;You mentioned potential corruption of manifest file, if we keep one manifest per region, the loss would be lower in case of corrupt manifest.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;True, but see the answer above. That&apos;s also another trade off to add to the one mentioned above. That&apos;s why I consider this jira not major or blocked but more like an optimization that should go in once we&apos;re sure that is better than what we have now.&lt;/p&gt;</comment>
                            <comment id="13593544" author="mbertozzi" created="Tue, 5 Mar 2013 16:29:24 +0000"  >&lt;p&gt;I just saw my dream come true &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7999&quot; title=&quot;Add &amp;#39;system&amp;#39; tables&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7999&quot;&gt;&lt;del&gt;HBASE-7999&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
so I propose it... instead of having a manifest can we use a file-tracking table?&lt;/p&gt;</comment>
                            <comment id="13593602" author="yuzhihong@gmail.com" created="Tue, 5 Mar 2013 17:12:35 +0000"  >&lt;blockquote&gt;&lt;p&gt;can we use a file-tracking table?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;That assumes &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7999&quot; title=&quot;Add &amp;#39;system&amp;#39; tables&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7999&quot;&gt;&lt;del&gt;HBASE-7999&lt;/del&gt;&lt;/a&gt; would be backported to 0.94, right ?&lt;/p&gt;</comment>
                            <comment id="13593658" author="yuzhihong@gmail.com" created="Tue, 5 Mar 2013 17:47:34 +0000"  >&lt;p&gt;I think the idea of manifest is applicable to online snapshot as well.&lt;br/&gt;
See the following code snippet from HRegion.addRegionToSnapshot():&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Store store : stores.values()) {
      &lt;span class=&quot;code-comment&quot;&gt;// 2.1. build the snapshot reference directory &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the store
&lt;/span&gt;      Path dstStoreDir = TakeSnapshotUtils.getStoreSnapshotDirectory(
        snapshotRegionFs.getRegionDir(), Bytes.toString(store.getFamily().getName()));
      List&amp;lt;StoreFile&amp;gt; storeFiles = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;StoreFile&amp;gt;(store.getStorefiles());
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (LOG.isDebugEnabled()) {
        LOG.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Adding snapshot references &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &quot;&lt;/span&gt; + storeFiles  + &lt;span class=&quot;code-quote&quot;&gt;&quot; hfiles&quot;&lt;/span&gt;);
      }

      &lt;span class=&quot;code-comment&quot;&gt;// 2.2. iterate through all the store&apos;s files and create &lt;span class=&quot;code-quote&quot;&gt;&quot;references&quot;&lt;/span&gt;.
&lt;/span&gt;      &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; sz = storeFiles.size();
      &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; sz; i++) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (exnSnare != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
          exnSnare.rethrowException();
        }
        Path file = storeFiles.get(i).getPath();
        &lt;span class=&quot;code-comment&quot;&gt;// create &lt;span class=&quot;code-quote&quot;&gt;&quot;reference&quot;&lt;/span&gt; to &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; store file.  It is intentionally an empty file -- all
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// necessary infomration is captured by its fs location and filename.  This allows us to
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// only figure out what needs to be done via a single nn operation (instead of having to
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// open and read the files as well).
&lt;/span&gt;        LOG.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Creating reference &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; file (&quot;&lt;/span&gt; + (i+1) + &lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt; + sz + &lt;span class=&quot;code-quote&quot;&gt;&quot;) : &quot;&lt;/span&gt; + file);
        Path referenceFile = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Path(dstStoreDir, file.getName());
        &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; success = fs.getFileSystem().createNewFile(referenceFile);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Looking at the last line, we create reference file for each store file.&lt;br/&gt;
I think manifest file should be used in the above case as well.&lt;/p&gt;</comment>
                            <comment id="13593667" author="mbertozzi" created="Tue, 5 Mar 2013 17:52:55 +0000"  >&lt;p&gt;I think that when we talk about snapshot we mainly talking about the online one.&lt;br/&gt;
The disabled one is a corner case, nobody want to disable a table to take a snapshot...&lt;/p&gt;

&lt;p&gt;If you look at the proposal above the (.n) is the RS number id, or something... if you have the table disabled you have only one manifest (the original idea was to reduce as possible the number of files)&lt;br/&gt;
/hbase/.snapshot/&amp;lt;snapshotName&amp;gt;/&amp;lt;tableName&amp;gt;/regionManifest(.n)&lt;/p&gt;</comment>
                            <comment id="13593679" author="yuzhihong@gmail.com" created="Tue, 5 Mar 2013 17:58:38 +0000"  >&lt;blockquote&gt;&lt;p&gt;We can, but the idea behind the manifest is reducing the NN operation... &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think one manifest file per region is intuitive for both online and offline snapshots. For HRegion.addRegionToSnapshot(), there is less coordination needed in FlushSnapshotSubprocedure&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;and if you add more manifest you end up in the same situation as before.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;There is still considerable savings in manifest per region proposal.&lt;/p&gt;

&lt;p&gt;Jesse expressed same idea in the first paragraph below:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7360?focusedCommentId=13593535&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13593535&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-7360?focusedCommentId=13593535&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13593535&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13593703" author="mbertozzi" created="Tue, 5 Mar 2013 18:17:56 +0000"  >&lt;p&gt;don&apos;t get me wrong, I was the original proposer of this format and I was throwing to Jesse and Jon those numbers  months ago. &lt;/p&gt;

&lt;p&gt;having one file per region also means having ~80bytes files. if you have lots regions probably you should think at having the files not in a flat directory structure otherwise some filesystem may be slow... and you&apos;re increasing the complexity for what? possibility to have a file corruption? (We have the same problem if you have a corrupted log and the RS goes down)&lt;/p&gt;

&lt;p&gt;my guess is that one manifest per RS is enough, or better having the file-tracking table... at least we have all the consistency of all the other data and we don&apos;t have to worry about it.&lt;/p&gt;</comment>
                            <comment id="13593745" author="yuzhihong@gmail.com" created="Tue, 5 Mar 2013 18:44:52 +0000"  >&lt;blockquote&gt;&lt;p&gt;or better having the file-tracking table&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Do you plan to use file-tracking table for trunk and manifest for 0.94 ?&lt;/p&gt;

&lt;p&gt;For file-tracking table, the manifest would be per region, right ?&lt;/p&gt;

&lt;p&gt;I assume the file-tracking table would be in sync with the table to be snapshotted in terms of region splitting and merging.&lt;/p&gt;

&lt;p&gt;Thanks for your patience.&lt;/p&gt;</comment>
                            <comment id="13593768" author="stack" created="Tue, 5 Mar 2013 18:59:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ted_yu&quot; class=&quot;user-hover&quot; rel=&quot;ted_yu&quot;&gt;Ted Yu&lt;/a&gt; Leave Matteo alone.  He is trying to get some work done.  Questions like &apos;Do you plan to use file-tracking table for trunk and manifest for 0.94 ?&apos; are just silly on an issue that is an &apos;improvement&apos; and was &apos;minor&apos; until you took it upon yourself to mark it &apos;major&apos;.&lt;/p&gt;</comment>
                            <comment id="13593774" author="mbertozzi" created="Tue, 5 Mar 2013 19:02:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yuzhihong%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;yuzhihong@gmail.com&quot;&gt;Ted Yu&lt;/a&gt; The &quot;file-tracking table&quot; is described a bit in the pdf attached to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7806&quot; title=&quot;Isolate the FileSystem calls&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7806&quot;&gt;HBASE-7806&lt;/a&gt; (&quot;future&quot;  section) and has a completely different idea from the manifest, and is not just snapshot related.&lt;/p&gt;

&lt;p&gt;anyway for the near term (.94/.96) I still haven&apos;t decided, I don&apos;t consider this one as super high priority since we have tested the multi-file for months and even on large cluster it was good enough. I&apos;ll probably make a patch for this by next week. but I prefer working on making everything working (e.g. merge, rename table, hbck) instead of saying &quot;you can&apos;t merge a region if you use snapshots, you can rename a table &amp;amp; co...&quot; and  also it will be nice having more metrics to knows the state, how long it takes how many time it fails (the current FlushSnapshot fail every time there&apos;s a split or a region move) &lt;/p&gt;</comment>
                            <comment id="13598114" author="mbertozzi" created="Sun, 10 Mar 2013 00:20:07 +0000"  >&lt;p&gt;Attached a sketch to show what is the code impact of this patch.&lt;br/&gt;
&lt;b&gt;Please DO NOT even try to apply this patch!&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Other than this kind of &quot;main code&quot; changes, there&apos;re all the unit tests to fix, that strongly rely on fs layout...&lt;/p&gt;</comment>
                            <comment id="13614646" author="mbertozzi" created="Tue, 26 Mar 2013 22:56:48 +0000"  >&lt;p&gt;updated based on the first sketch. It seems to work, a couple of tests passes like the restore one that contains the full flow... but there are still lots of tests failing because they have fs.exists(new Path(xyz)) check...&lt;/p&gt;</comment>
                            <comment id="13614664" author="jmhsieh" created="Tue, 26 Mar 2013 23:09:36 +0000"  >&lt;p&gt;Looks nice. &lt;/p&gt;

&lt;p&gt;What kind of follow up work do you think is necessary (beyond the scope of this jira):&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Since the old format was backported to a 0.94 release, we now need to support converting from the older format to the newer in 0.95/trunk. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/li&gt;
	&lt;li&gt;Updates the the snapshot viewer tool to view the new manifest.&lt;/li&gt;
	&lt;li&gt;Updated design/layout docs?&lt;/li&gt;
	&lt;li&gt;...&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13614671" author="mbertozzi" created="Tue, 26 Mar 2013 23:26:54 +0000"  >&lt;p&gt;The snapshot viewer, cleaners and export should be fine, since they were using the SnapshotReferenceUtil that allows you iterate through the snapshot files... so if you change the format is just a problem of SnapshotReferenceUtil on how to parse it, but there&apos;s lots of stuff that relies on path (e.g. tests)&lt;br/&gt;
but I guess converting everything to the snapshotReferenceUtil is in the scope of this jira.&lt;/p&gt;

&lt;p&gt;anyway, once converted... &lt;br/&gt;
I guess we can add the compatibility with the old format. And at this point it should be just matter of adding an if snapshotInfo.getVersion and iterate over the fs instead of the manifest files.&lt;/p&gt;

&lt;p&gt;for rolling upgrades, aside the fact that moving from 94 to 95 is not supported. We can just add to HRegion.addRegionToSnapshot() the same if snapshotInfo.getVersion() and use the multi file format as default (the master produce the SnapshotInfo with version 1)...&lt;/p&gt;

&lt;p&gt;also, I&apos;d like to have a benchmark to see how much faster is this one  (in theory you&apos;ve fewer roundtrip the NN)&lt;/p&gt;

&lt;p&gt;but what you think about the manifest format?&lt;br/&gt;
Do you think that is the right way to do it?&lt;br/&gt;
is there something else that we should consider putting in, or removing?&lt;br/&gt;
any other thoughts?&lt;/p&gt;</comment>
                            <comment id="13614677" author="jmhsieh" created="Tue, 26 Mar 2013 23:34:08 +0000"  >&lt;p&gt;Do we need a tableinfo record?  I believe the table schema is in there.&lt;/p&gt;</comment>
                            <comment id="13614685" author="mbertozzi" created="Tue, 26 Mar 2013 23:40:27 +0000"  >&lt;p&gt;currently we have a separate file &quot;tableinfo&quot; with the HTD serialized.&lt;br/&gt;
I was thinking to add a repeated field in the SnapshotDescriptor, &lt;br/&gt;
since is another master operation. but I&apos;m not sure...&lt;/p&gt;</comment>
                            <comment id="13614723" author="yuzhihong@gmail.com" created="Wed, 27 Mar 2013 00:20:25 +0000"  >&lt;p&gt;There seems to be some overlap between the following two methods:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; SnapshotRegionManifest buildManifestFromRegion (&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; HRegion region) {
+    SnapshotRegionManifest.Builder manifest = SnapshotRegionManifest.newBuilder();
...
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; SnapshotRegionManifest buildManifestFromDisk (&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Configuration conf,
+      &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FileSystem fs, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Path tableDir, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; HRegionInfo regionInfo) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Can we reuse some code ?&lt;/p&gt;</comment>
                            <comment id="13615000" author="mbertozzi" created="Wed, 27 Mar 2013 07:35:23 +0000"  >&lt;blockquote&gt;&lt;p&gt;There seems to be some overlap... Can we reuse some code?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yeah they are identical, the only difference is that one iterates over a list of Store and the other over disk... It&apos;s not easy share the code between the two since is just a for loop and a add to the protobuf. (We have the same duplication in the old code for disabled table and enabled table).&lt;/p&gt;</comment>
                            <comment id="13617445" author="jmhsieh" created="Fri, 29 Mar 2013 15:48:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbertozzi&quot; class=&quot;user-hover&quot; rel=&quot;mbertozzi&quot;&gt;Matteo Bertozzi&lt;/a&gt;, have you considered writing this manifest data to a snapshots hbase table instead of the file system? &lt;/p&gt;

&lt;p&gt;Pros: no small files, likely less need for an external snapshot info viewer, &lt;br/&gt;
Cons: lose ability to export only looking at file system (but can be done with a single hbase read/scan)&lt;/p&gt;

&lt;p&gt;It also seems to be a reasonable place to prototype the one row-one snapshot (later table), cols are regions layout.&lt;/p&gt;</comment>
                            <comment id="13617465" author="mbertozzi" created="Fri, 29 Mar 2013 16:09:10 +0000"  >&lt;p&gt;I don&apos;t like having a table for tracking snapshots alone.&lt;br/&gt;
We&apos;ve already discussed about having a &quot;global&quot; file tracking table, that allows you to describe tables and snapshots. This will have the advantage of not having the half  fs or meta state on failures, and allows to remove all the references and link files that doesn&apos;t really make sense.&lt;/p&gt;

&lt;p&gt;I see this jira more as a &quot;improve the current situation&quot;, without having to change much of the current design. &lt;/p&gt;

&lt;p&gt;also as you mentioned we lose the ability to export a snapshot with hbase down, and we don&apos;t get any big advantage.&lt;/p&gt;</comment>
                            <comment id="13965860" author="mbertozzi" created="Thu, 10 Apr 2014 21:14:29 +0000"  >&lt;p&gt;Patch is up here &lt;a href=&quot;https://reviews.apache.org/r/20192/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/20192/&lt;/a&gt;&lt;br/&gt;
The new format is rolling-update friendly, so you are able to read the old format and also take a snapshot from machines with v2 support and machines with v1-only support&lt;/p&gt;</comment>
                            <comment id="13965980" author="hadoopqa" created="Thu, 10 Apr 2014 23:12:33 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12639656/HBASE-7987-v0.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12639656/HBASE-7987-v0.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12639656&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 31 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 2 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 5 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +      String group = stringIsNotEmpty(filesGroup) || refStat == null ? filesGroup : refStat.getGroup();&lt;br/&gt;
+    for (Map.Entry&amp;lt;String, List&amp;lt;SnapshotRegionManifest.StoreFile&amp;gt;&amp;gt; familyEntry: snapshotFiles.entrySet()) {&lt;br/&gt;
+      HFileLink link = HFileLink.create(conf, table, region.getEncodedName(), family, storeFile.getName());&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.migration.TestNamespaceUpgrade&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9252//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9252//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9252//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9252//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9252//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9252//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9252//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9252//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9252//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9252//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9252//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9252//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9252//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9252//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9252//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9252//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9252//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9252//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9252//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9252//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9252//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9252//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13966191" author="hadoopqa" created="Fri, 11 Apr 2014 03:49:06 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12639718/HBASE-7987-v1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12639718/HBASE-7987-v1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12639718&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 31 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 2 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 1 zombie test(s): 	at org.apache.hadoop.hbase.regionserver.wal.TestLogRolling.testLogRollOnDatanodeDeath(TestLogRolling.java:368)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9255//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9255//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9255//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9255//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9255//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9255//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9255//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9255//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9255//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9255//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9255//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9255//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9255//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9255//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9255//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9255//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9255//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9255//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9255//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9255//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9255//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9255//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13967029" author="hadoopqa" created="Fri, 11 Apr 2014 20:00:26 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12639837/HBASE-7987-v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12639837/HBASE-7987-v2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12639837&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 31 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9259//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9259//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9259//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9259//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9259//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9259//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9259//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9259//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9259//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9259//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9259//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9259//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9259//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9259//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9259//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9259//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9259//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9259//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9259//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9259//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9259//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9259//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13968568" author="jmhsieh" created="Mon, 14 Apr 2014 17:45:15 +0000"  >&lt;p&gt;post on rb please.&lt;/p&gt;</comment>
                            <comment id="13968611" author="jmhsieh" created="Mon, 14 Apr 2014 18:18:32 +0000"  >&lt;p&gt;Ah, nm, link is here. &lt;a href=&quot;https://reviews.apache.org/r/20192/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/20192/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13968770" author="hadoopqa" created="Mon, 14 Apr 2014 20:07:20 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12640115/HBASE-7987-v3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12640115/HBASE-7987-v3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12640115&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 31 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.regionserver.wal.TestLogRolling&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9281//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9281//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9281//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9281//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9281//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9281//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9281//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9281//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9281//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9281//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9281//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9281//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9281//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9281//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9281//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9281//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9281//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9281//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9281//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9281//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9281//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9281//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13971889" author="hadoopqa" created="Wed, 16 Apr 2014 20:26:19 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12640517/HBASE-7987-v4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12640517/HBASE-7987-v4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12640517&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 31 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9305//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9305//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9305//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9305//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9305//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9305//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9305//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9305//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9305//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9305//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9305//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9305//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9305//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9305//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9305//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9305//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9305//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9305//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9305//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9305//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9305//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9305//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13971996" author="enis" created="Wed, 16 Apr 2014 21:51:51 +0000"  >&lt;blockquote&gt;&lt;p&gt;I see this jira more as a &quot;improve the current situation&quot;, without having to change much of the current design.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yeah, I really think that we should switch to meta table tracking the file references. This might be ok for short term if it does not add bunch of more complexity. &lt;/p&gt;</comment>
                            <comment id="13972001" author="mbertozzi" created="Wed, 16 Apr 2014 21:59:20 +0000"  >&lt;blockquote&gt;&lt;p&gt;Yeah, I really think that we should switch to meta table tracking the file references. This might be ok for short term if it does not add bunch of more complexity.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;agreed, that is on my roadmap. but not just for snapshots.&lt;br/&gt;
This refactor will make easier to plug-in the table, once we will have that.&lt;/p&gt;</comment>
                            <comment id="13985991" author="hadoopqa" created="Wed, 30 Apr 2014 19:55:36 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12642669/HBASE-7987-v5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12642669/HBASE-7987-v5.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12642669&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 40 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9434//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9434//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9434//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9434//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9434//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9434//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9434//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9434//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9434//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9434//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9434//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9434//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9434//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9434//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9434//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9434//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9434//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9434//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9434//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9434//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9434//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9434//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13992540" author="hudson" created="Thu, 8 May 2014 06:10:42 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-TRUNK #5128 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/5128/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/5128/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7987&quot; title=&quot;Snapshot Manifest file instead of multiple empty files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7987&quot;&gt;&lt;del&gt;HBASE-7987&lt;/del&gt;&lt;/a&gt; Snapshot Manifest file instead of multiple empty files (mbertozzi: rev 1593139)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/MapReduceProtos.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/SnapshotProtos.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-protocol/src/main/protobuf/MapReduce.proto&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-protocol/src/main/protobuf/Snapshot.proto&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/client/TableSnapshotScanner.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/io/Reference.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/TableSnapshotInputFormat.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/snapshot/CloneSnapshotHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/snapshot/DisabledTableSnapshotHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/snapshot/EnabledTableSnapshotHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/snapshot/MasterSnapshotVerifier.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/snapshot/RestoreSnapshotHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/snapshot/SnapshotFileCache.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/snapshot/SnapshotHFileCleaner.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/snapshot/SnapshotManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/snapshot/TakeSnapshotHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/procedure/ProcedureManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreFile.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreFileInfo.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/CopyRecoveredEditsTask.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/ExportSnapshot.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/ReferenceRegionHFilesTask.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/ReferenceServerWALsTask.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/RestoreSnapshotHelper.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/SnapshotDescriptionUtils.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/SnapshotInfo.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/SnapshotLogSplitter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/SnapshotManifest.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/SnapshotManifestV1.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/SnapshotManifestV2.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/SnapshotReferenceUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/SnapshotTask.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/TableInfoCopyTask.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/TakeSnapshotUtils.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/util/FSVisitor.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestSnapshotFromClient.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestTableSnapshotScanner.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/mapreduce/TestTableSnapshotInputFormat.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/master/cleaner/TestSnapshotFromMaster.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/master/snapshot/TestSnapshotFileCache.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/snapshot/SnapshotTestingUtils.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/snapshot/TestCopyRecoveredEditsTask.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/snapshot/TestExportSnapshot.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/snapshot/TestFlushSnapshotFromClient.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/snapshot/TestReferenceRegionHFilesTask.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/snapshot/TestRestoreSnapshotHelper.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/snapshot/TestSnapshotDescriptionUtils.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/snapshot/TestSnapshotLogSplitter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/snapshot/TestSnapshotTask.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/snapshot/TestWALReferenceTask.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13995793" author="ndimiduk" created="Mon, 12 May 2014 23:26:19 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbertozzi&quot; class=&quot;user-hover&quot; rel=&quot;mbertozzi&quot;&gt;Matteo Bertozzi&lt;/a&gt;. Any plan for a backport to 0.98? I&apos;m seeing some conflict in TableSnapshotInputFormat while backporting my patch on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11137&quot; title=&quot;Add mapred.TableSnapshotInputFormat&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11137&quot;&gt;&lt;del&gt;HBASE-11137&lt;/del&gt;&lt;/a&gt;. If you intend a backport, I&apos;d rather not further complicate.&lt;/p&gt;</comment>
                            <comment id="13996227" author="mbertozzi" created="Tue, 13 May 2014 09:51:25 +0000"  >&lt;p&gt;I&apos;m +1 for a backport to 98, since is almost a clean backport.&lt;br/&gt;
but I guess the decision is on &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13996424" author="ndimiduk" created="Tue, 13 May 2014 14:17:26 +0000"  >&lt;p&gt;I guess the same concern applies to 0.96 and 0.94 as I&apos;d like to support mapred.TableSnapshotInputFormat everywhere there&apos;s a mapreduce version. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="13996452" author="mbertozzi" created="Tue, 13 May 2014 14:48:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt; since you are using an implementation detail and not a public API, I expect you have to adjust the code depending on the version. why is that a problem? I don&apos;t think that you can copy-paste the trunk MR input formats code and be able to compile them on 94&lt;/p&gt;</comment>
                            <comment id="13997020" author="stack" created="Tue, 13 May 2014 22:58:25 +0000"  >&lt;p&gt;On 0.96, this patch manages old and new style.  Can 0.96 just keep on w/ old style?  Go to 0.98 if you want the new stuff?&lt;/p&gt;</comment>
                            <comment id="13997155" author="enis" created="Wed, 14 May 2014 01:13:36 +0000"  >&lt;p&gt;I would be reluctant to put this in 0.98 as well.&lt;/p&gt;</comment>
                            <comment id="13997287" author="apurtell" created="Wed, 14 May 2014 05:17:20 +0000"  >&lt;p&gt;I have no objection to a backport patch committed to the branch. Please open an issue for the backport. If someone would like to object, please veto on the new issue.&lt;/p&gt;</comment>
                            <comment id="13998142" author="ndimiduk" created="Wed, 14 May 2014 22:22:46 +0000"  >&lt;blockquote&gt;&lt;p&gt;I don&apos;t think that you can copy-paste the trunk MR input formats code and be able to compile them on 94&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbertozzi&quot; class=&quot;user-hover&quot; rel=&quot;mbertozzi&quot;&gt;Matteo Bertozzi&lt;/a&gt; quite right. I&apos;ll settle for 0.98 and trunk for the time being.&lt;/p&gt;</comment>
                            <comment id="13998552" author="mbertozzi" created="Thu, 15 May 2014 07:52:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt; if you want you can assign to me a backport jira of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11137&quot; title=&quot;Add mapred.TableSnapshotInputFormat&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11137&quot;&gt;&lt;del&gt;HBASE-11137&lt;/del&gt;&lt;/a&gt; and I&apos;ll write the 94, 96 version&lt;/p&gt;</comment>
                            <comment id="14001577" author="ndimiduk" created="Mon, 19 May 2014 10:40:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbertozzi&quot; class=&quot;user-hover&quot; rel=&quot;mbertozzi&quot;&gt;Matteo Bertozzi&lt;/a&gt; It&apos;s a question of whether the work is needed. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; is content to let 0.96 die, so I guess it comes down to how badly &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt; wants it for 0.94. Anyway, let&apos;s track it over on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11137&quot; title=&quot;Add mapred.TableSnapshotInputFormat&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11137&quot;&gt;&lt;del&gt;HBASE-11137&lt;/del&gt;&lt;/a&gt;. Sorry to bring noise over to this closed issue.&lt;/p&gt;</comment>
                            <comment id="14002804" author="lhofhansl" created="Tue, 20 May 2014 04:55:43 +0000"  >&lt;p&gt;It&apos;s not about whether I want it or not.&lt;br/&gt;
It&apos;s open source, if somebody wants it and makes a patch we&apos;ll decide on the merit of the patch.&lt;br/&gt;
For larger tables (in terms of number of regions and files) the current code is a problem.&lt;/p&gt;

&lt;p&gt;Personally I would not sponsor this for 0.94, but if somebody else does and has a patch I&apos;m happy to have it committed (or would commit it myself).&lt;/p&gt;</comment>
                            <comment id="14003677" author="apurtell" created="Tue, 20 May 2014 17:26:31 +0000"  >&lt;p&gt;Related, sooner or later we are going to bump up against wanting something for 0.94 against the desire not to commit to 0.96. Fortunately not here looks like.&lt;/p&gt;</comment>
                            <comment id="14007701" author="enis" created="Fri, 23 May 2014 21:01:55 +0000"  >&lt;p&gt;The patch committed removes a field from a PB definition, and reintroduces it as another field. Sorry, I was not involved in the code review. Did this issue came up? We should not be doing that I believe. The serialized objects are very short lived and only persisted inside a mapreduce job, which means that it might not break. &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
diff --git hbase-protocol/src/main/protobuf/MapReduce.proto hbase-protocol/src/main/protobuf/MapReduce.proto
index 0c4c29e..eeb1b66 100644
--- hbase-protocol/src/main/protobuf/MapReduce.proto
+++ hbase-protocol/src/main/protobuf/MapReduce.proto
@@ -30,6 +30,7 @@ message ScanMetrics {
 }
 
 message TableSnapshotRegionSplit {
-  optional RegionSpecifier region = 1;
   repeated string locations = 2;
+  optional TableSchema table = 3;
+  optional RegionInfo region = 4;
 }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The other issue is that if you compile the PB definitions from trunk, it shows uncommitted changes that did not make into the patch. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbertozzi&quot; class=&quot;user-hover&quot; rel=&quot;mbertozzi&quot;&gt;Matteo Bertozzi&lt;/a&gt; can you please provide an addendum. &lt;/p&gt;</comment>
                            <comment id="14007709" author="mbertozzi" created="Fri, 23 May 2014 21:11:58 +0000"  >&lt;blockquote&gt;&lt;p&gt;The patch committed removes a field from a PB definition, and reintroduces it as another field. &lt;br/&gt;
We should not be doing that I believe. The serialized objects are very short lived and only persisted inside a mapreduce job, which means that it might not break.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The name is not used in the serialization just the field number, so since is a change of type for the &quot;region&quot; object the name should be the same, but the field number should be different.&lt;br/&gt;
There was some note from Jon in the review, because I was just renaming the field (instead adding a new one) since the pb is not persisted anywhere.. but is just used to communicate the input to the MR job.&lt;/p&gt;

&lt;p&gt;I&apos;ll take a look at the pb compilation and commit an addendum&lt;/p&gt;</comment>
                            <comment id="14009122" author="hudson" created="Mon, 26 May 2014 23:11:55 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-TRUNK #5141 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/5141/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/5141/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7987&quot; title=&quot;Snapshot Manifest file instead of multiple empty files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7987&quot;&gt;&lt;del&gt;HBASE-7987&lt;/del&gt;&lt;/a&gt; Snapshot Manifest file instead of multiple empty files &amp;#8211; ADDENDUM regen MR pb (matteo.bertozzi: rev fb1bc37ad9685d9fc758e040159053fc27770ad2)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/MapReduceProtos.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14103507" author="hudson" created="Wed, 20 Aug 2014 06:46:42 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98-on-Hadoop-1.1 #433 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/433/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/433/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11742&quot; title=&quot;Backport HBASE-7987 and HBASE-11185 to 0.98&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11742&quot;&gt;&lt;del&gt;HBASE-11742&lt;/del&gt;&lt;/a&gt; (Backport &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7987&quot; title=&quot;Snapshot Manifest file instead of multiple empty files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7987&quot;&gt;&lt;del&gt;HBASE-7987&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11185&quot; title=&quot;Parallelize Snapshot operations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11185&quot;&gt;&lt;del&gt;HBASE-11185&lt;/del&gt;&lt;/a&gt; to 0.98) (Esteban Gutierrez and Matteo Bertozzi) (apurtell: rev 2e978a165481c45c6a3d97b185c797a0425ddc44)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/ReferenceRegionHFilesTask.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/snapshot/TestSnapshotLogSplitter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/ExportSnapshot.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/snapshot/TestWALReferenceTask.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/snapshot/TestRestoreSnapshotHelper.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/SnapshotManifestV1.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/snapshot/CloneSnapshotHandler.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/util/ModifyRegionUtils.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestSnapshotFromClient.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/snapshot/SnapshotHFileCleaner.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/SnapshotProtos.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/protobuf/MapReduce.proto&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/client/TableSnapshotScanner.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/SnapshotInfo.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestTableSnapshotScanner.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/SnapshotReferenceUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/SnapshotManifestV2.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/snapshot/SnapshotLogCleaner.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/snapshot/TestSnapshotFileCache.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/snapshot/EnabledTableSnapshotHandler.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/resources/hbase-default.xml&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/mapreduce/TestTableSnapshotInputFormat.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/Reference.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/snapshot/TestFlushSnapshotFromClient.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/snapshot/SnapshotManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/SnapshotLogSplitter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/snapshot/SnapshotTestingUtils.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/snapshot/RestoreSnapshotHandler.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/snapshot/TestSnapshotDescriptionUtils.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/mapred/TableSnapshotInputFormat.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/util/FSVisitor.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionFileSystem.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/snapshot/DisabledTableSnapshotHandler.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/snapshot/MasterSnapshotVerifier.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/procedure/ProcedureManager.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/protobuf/Snapshot.proto&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/SnapshotManifest.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/CopyRecoveredEditsTask.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/MapReduceProtos.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/ReferenceServerWALsTask.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/TakeSnapshotUtils.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/SnapshotDescriptionUtils.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/snapshot/TestReferenceRegionHFilesTask.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/snapshot/TestCopyRecoveredEditsTask.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/snapshot/TakeSnapshotHandler.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/RestoreSnapshotHelper.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/snapshot/TestSnapshotTask.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreFileInfo.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/snapshot/SnapshotFileCache.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/snapshot/TestExportSnapshot.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreFile.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/TableInfoCopyTask.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/cleaner/TestSnapshotFromMaster.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/SnapshotTask.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/TableSnapshotInputFormat.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/TableSnapshotInputFormatImpl.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14103606" author="hudson" created="Wed, 20 Aug 2014 08:29:16 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98 #460 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/460/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/460/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11742&quot; title=&quot;Backport HBASE-7987 and HBASE-11185 to 0.98&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11742&quot;&gt;&lt;del&gt;HBASE-11742&lt;/del&gt;&lt;/a&gt; (Backport &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7987&quot; title=&quot;Snapshot Manifest file instead of multiple empty files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7987&quot;&gt;&lt;del&gt;HBASE-7987&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11185&quot; title=&quot;Parallelize Snapshot operations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11185&quot;&gt;&lt;del&gt;HBASE-11185&lt;/del&gt;&lt;/a&gt; to 0.98) (Esteban Gutierrez and Matteo Bertozzi) (apurtell: rev 2e978a165481c45c6a3d97b185c797a0425ddc44)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/MapReduceProtos.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/SnapshotManifestV2.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionFileSystem.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/SnapshotManifestV1.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/util/ModifyRegionUtils.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/snapshot/RestoreSnapshotHandler.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/SnapshotTask.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/mapred/TableSnapshotInputFormat.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/TableInfoCopyTask.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/snapshot/TestSnapshotLogSplitter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/snapshot/TestExportSnapshot.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/ReferenceServerWALsTask.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/SnapshotReferenceUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/snapshot/DisabledTableSnapshotHandler.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/cleaner/TestSnapshotFromMaster.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/Reference.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/snapshot/TestSnapshotDescriptionUtils.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/snapshot/TakeSnapshotHandler.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/CopyRecoveredEditsTask.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/mapreduce/TestTableSnapshotInputFormat.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/snapshot/TestRestoreSnapshotHelper.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/SnapshotLogSplitter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreFile.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/snapshot/TestFlushSnapshotFromClient.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/snapshot/SnapshotFileCache.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreFileInfo.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/TableSnapshotInputFormat.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/SnapshotProtos.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/util/FSVisitor.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/SnapshotInfo.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/SnapshotManifest.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/snapshot/CloneSnapshotHandler.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestSnapshotFromClient.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/snapshot/EnabledTableSnapshotHandler.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/snapshot/TestSnapshotFileCache.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/client/TableSnapshotScanner.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestTableSnapshotScanner.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/snapshot/SnapshotLogCleaner.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/TableSnapshotInputFormatImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/RestoreSnapshotHelper.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/protobuf/Snapshot.proto&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/snapshot/TestReferenceRegionHFilesTask.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/snapshot/TestCopyRecoveredEditsTask.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/snapshot/SnapshotManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/snapshot/SnapshotHFileCleaner.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/protobuf/MapReduce.proto&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/TakeSnapshotUtils.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/snapshot/TestSnapshotTask.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/snapshot/TestWALReferenceTask.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/resources/hbase-default.xml&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/procedure/ProcedureManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/snapshot/MasterSnapshotVerifier.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/snapshot/SnapshotTestingUtils.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/ExportSnapshot.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/SnapshotDescriptionUtils.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/ReferenceRegionHFilesTask.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14331137" author="enis" created="Sat, 21 Feb 2015 23:33:47 +0000"  >&lt;p&gt;Closing this issue after 0.99.0 release. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12639656" name="HBASE-7987-v0.patch" size="454172" author="mbertozzi" created="Thu, 10 Apr 2014 21:15:35 +0000"/>
                            <attachment id="12639718" name="HBASE-7987-v1.patch" size="457070" author="mbertozzi" created="Fri, 11 Apr 2014 01:49:58 +0000"/>
                            <attachment id="12639837" name="HBASE-7987-v2.patch" size="459735" author="mbertozzi" created="Fri, 11 Apr 2014 18:02:01 +0000"/>
                            <attachment id="12575603" name="HBASE-7987-v2.sketch" size="82041" author="mbertozzi" created="Tue, 26 Mar 2013 22:56:48 +0000"/>
                            <attachment id="12640115" name="HBASE-7987-v3.patch" size="468402" author="mbertozzi" created="Mon, 14 Apr 2014 18:25:56 +0000"/>
                            <attachment id="12640517" name="HBASE-7987-v4.patch" size="480629" author="mbertozzi" created="Wed, 16 Apr 2014 18:30:49 +0000"/>
                            <attachment id="12642669" name="HBASE-7987-v5.patch" size="539379" author="mbertozzi" created="Wed, 30 Apr 2014 16:38:59 +0000"/>
                            <attachment id="12643300" name="HBASE-7987-v6.patch" size="545818" author="mbertozzi" created="Sun, 4 May 2014 22:50:35 +0000"/>
                            <attachment id="12572940" name="HBASE-7987.sketch" size="59307" author="mbertozzi" created="Sun, 10 Mar 2013 00:20:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 4 Mar 2013 23:53:46 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>315585</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1iggv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>315928</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>