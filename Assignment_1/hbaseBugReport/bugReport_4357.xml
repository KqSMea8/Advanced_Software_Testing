<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:18:11 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-4357/HBASE-4357.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-4357] Region stayed in transition - in closing state</title>
                <link>https://issues.apache.org/jira/browse/HBASE-4357</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Got the following during testing, &lt;/p&gt;

&lt;p&gt;1. On a given machine, kill &quot;RS process id&quot;. Then kill &quot;HMaster process id&quot;.&lt;br/&gt;
2. Start RS first via &quot;bin/hbase-daemon.sh --config ./conf start regionserver.&quot;. Start HMaster via &quot;bin/hbase-daemon.sh --config ./conf start master&quot;.&lt;/p&gt;

&lt;p&gt;One region of a table stayed in closing state.&lt;/p&gt;

&lt;p&gt;According to zookeeper,&lt;br/&gt;
794a6ff17a4de0dd0a19b984ba18eea9 miweng_500region,H\xB49X\x10bM\xB1,1315338786464.794a6ff17a4de0dd0a19b984ba18eea9. state=CLOSING, ts=Wed Sep 07 17:21:44 PDT 2011 (75701s ago), server=sea-esxi-0,60000,1315428682281 &lt;/p&gt;

&lt;p&gt;According to .META. table, the region has been assigned to from sea-esxi-0 to sea-esxi-4.&lt;/p&gt;

&lt;p&gt;miweng_500region,H\xB49X\x10bM\xB1,1315338786464.794a6ff17a4de0dd0a19b984ba18eea9. sea-esxi-4:60030  H\xB49X\x10bM\xB1 I7K\xC6\xA7\xEF\x9D\x90 0 &lt;/p&gt;</description>
                <environment></environment>
        <key id="12522341">HBASE-4357</key>
            <summary>Region stayed in transition - in closing state</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mingma">Ming Ma</assignee>
                                    <reporter username="mingma">Ming Ma</reporter>
                        <labels>
                    </labels>
                <created>Thu, 8 Sep 2011 22:00:40 +0000</created>
                <updated>Fri, 20 Nov 2015 11:52:27 +0000</updated>
                            <resolved>Sat, 7 Jan 2012 22:18:50 +0000</resolved>
                                    <version>0.92.0</version>
                                    <fixVersion>0.92.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13100912" author="stack" created="Fri, 9 Sep 2011 03:19:14 +0000"  >&lt;p&gt;What version of hbase Ming?&lt;/p&gt;
</comment>
                            <comment id="13101273" author="mingma" created="Fri, 9 Sep 2011 15:31:33 +0000"  >&lt;p&gt;Stack, it is the trunk. I don&apos;t know the root cause yet.&lt;/p&gt;</comment>
                            <comment id="13101574" author="mingma" created="Fri, 9 Sep 2011 21:17:59 +0000"  >&lt;p&gt;Here is the issue. It has nothing to do with master restart.&lt;/p&gt;

&lt;p&gt;CloseRegionHandler.getCurrentVersion failed. Thus regionserver can&apos;t close the region properly. One reason it can&apos;t get data from zookeeper could be that there are lots of regions in transition.&lt;/p&gt;


&lt;p&gt;11/09/07 17:21:48 WARN handler.CloseRegionHandler: Error getting node&apos;s version in CLOSING state, aborting close of miweng_500region,H\xB49X\x10bM\xB1,1315338786464.794a6ff17a4de0dd0a19b984ba18eea9.&lt;/p&gt;


&lt;p&gt;Possible fixes:&lt;/p&gt;

&lt;p&gt;1. Perhaps CloseRegionHandler.getCurrentVersion should retry on calls to ZKAssign.getVersion?&lt;br/&gt;
2. Timeout Monitor doesn&apos;t do anything for region that stays in CLOSING state for long. Perhaps it can try to repair it like reissuing a closeregion request in RS?&lt;/p&gt;</comment>
                            <comment id="13102477" author="ram_krish" created="Mon, 12 Sep 2011 07:23:04 +0000"  >&lt;p&gt;sorry by mistake assigned it to me&lt;/p&gt;</comment>
                            <comment id="13102478" author="ram_krish" created="Mon, 12 Sep 2011 07:23:33 +0000"  >&lt;p&gt;@Ming ma&lt;br/&gt;
Yes what you say is correct.  Are you working on this issue?&lt;/p&gt;</comment>
                            <comment id="13102973" author="stack" created="Mon, 12 Sep 2011 19:56:27 +0000"  >&lt;p&gt;@Ming In TRUNK, we have RecoverableZooKeeper.  It does the following when its trying to get version:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  /**
   * exists is an idempotent operation. Retry before &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; out exception
   * @param path
   * @param watcher
   * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;
   * @&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; KeeperException
   * @&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; InterruptedException
   */
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Stat exists(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; path, Watcher watcher)
  &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; KeeperException, InterruptedException {
    RetryCounter retryCounter = retryCounterFactory.create();
    &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;) {
      &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; zk.exists(path, watcher);
      } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (KeeperException e) {
        &lt;span class=&quot;code-keyword&quot;&gt;switch&lt;/span&gt; (e.code()) {
          &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; CONNECTIONLOSS:
          &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; OPERATIONTIMEOUT:
            LOG.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Possibly &lt;span class=&quot;code-keyword&quot;&gt;transient&lt;/span&gt; ZooKeeper exception: &quot;&lt;/span&gt; + e);
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!retryCounter.shouldRetry()) {
              LOG.error(&lt;span class=&quot;code-quote&quot;&gt;&quot;ZooKeeper exists failed after &quot;&lt;/span&gt;
                + retryCounter.getMaxRetries() + &lt;span class=&quot;code-quote&quot;&gt;&quot; retries&quot;&lt;/span&gt;);
              &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; e;
            }
            &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;

          &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;:
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; e;
        }
      }
      LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;The &quot;&lt;/span&gt;+retryCounter.getAttemptTimes()+&lt;span class=&quot;code-quote&quot;&gt;&quot; times to retry &quot;&lt;/span&gt; +
          &lt;span class=&quot;code-quote&quot;&gt;&quot;ZooKeeper after sleeping &quot;&lt;/span&gt;+retryIntervalMillis+&lt;span class=&quot;code-quote&quot;&gt;&quot; ms&quot;&lt;/span&gt;);
      retryCounter.sleepUntilNextRetry();
      retryCounter.useRetry();
    }
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That is, it retries.&lt;/p&gt;

&lt;p&gt;We should probably do your #2 above too.&lt;/p&gt;</comment>
                            <comment id="13103254" author="mingma" created="Tue, 13 Sep 2011 01:29:46 +0000"  >&lt;p&gt;Thanks, folks. I was looking into another issue in production based on 0.90.x. Found a similar issue, instead it stays in PENDING_CLOSE state; for 0.90.x, the state flow is different; zknode was created by RS, instead of master.&lt;/p&gt;

&lt;p&gt;So the general scenario,&lt;/p&gt;

&lt;p&gt;1. Regions can&apos;t be closed properly by RS for some reason.&lt;br/&gt;
2. RS is online from master point of view.&lt;/p&gt;

&lt;p&gt;I will take a look first. We might have to patch for both trunk and 0.90.x.&lt;/p&gt;</comment>
                            <comment id="13117900" author="mingma" created="Fri, 30 Sep 2011 05:54:37 +0000"  >&lt;p&gt;How about the followings, similar to how OPENING is handled?&lt;/p&gt;

&lt;p&gt;1. If closeRegion fails for some reason, RS will transition ZK state to a new state ZK_FAILED_CLOSE. AM will reissue closeRegion request to the same RS right away.&lt;br/&gt;
2. closeRegion operation could take a long time, doing flush, etc. It will do tickClosing so AM&apos;s timeoutMonitor won&apos;t kick in.&lt;br/&gt;
3. When AM&apos;s timeoutMonitor kicks in, it will try to reissue closeRegion to the same RS. However, if the RS stays in closing the region due to some bug, not sure if reissuing closeRegion will help much. Instead, could Master restarts the RS instead?&lt;/p&gt;</comment>
                            <comment id="13117970" author="yuzhihong@gmail.com" created="Fri, 30 Sep 2011 10:58:55 +0000"  >&lt;p&gt;I think points 1 and 2 above are reasonable.&lt;/p&gt;</comment>
                            <comment id="13118239" author="ram_krish" created="Fri, 30 Sep 2011 18:01:05 +0000"  >&lt;p&gt;@Ming&lt;br/&gt;
3rd point am not sure&lt;br/&gt;
But even 2nd point may not be needed right.&lt;br/&gt;
Any way the timeout monitor if it sees the state in CLOSING it is again going to update to CLOSING.&lt;br/&gt;
And  if closeRegion is taking more time due to some bug how do we determine after what time we take corrective action?&lt;/p&gt;</comment>
                            <comment id="13181157" author="mingma" created="Fri, 6 Jan 2012 06:25:44 +0000"  >&lt;p&gt;How about the followings?&lt;/p&gt;

&lt;p&gt;1. Have Master pass the ZK node version to RS closeRegion call. Add a new method for that.&lt;br/&gt;
2. RS CloseRegionHandler no longer needs to call getCurrentVersion. It uses the passed in version for consistence check.&lt;/p&gt;

&lt;p&gt;For other error situations in CloseRegionHandler, it seems either it should be taken care of by the current system, or it isn&apos;t unclear how the sytem could run into that situation.&lt;/p&gt;

&lt;p&gt;The patch ia attached.&lt;/p&gt;</comment>
                            <comment id="13181229" author="ram_krish" created="Fri, 6 Jan 2012 10:40:48 +0000"  >&lt;p&gt;@Ming Ma&lt;br/&gt;
+1 on patch.  &lt;br/&gt;
When we started discussion timeout monitor was not doing anything for unassign.&lt;br/&gt;
But now it forcefully does an unassign also. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13181437" author="hadoopqa" created="Fri, 6 Jan 2012 17:02:00 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12509667/HBASE-4357-0.92.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12509667/HBASE-4357-0.92.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/686//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/686//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13181438" author="zhihyu@ebaysf.com" created="Fri, 6 Jan 2012 17:03:19 +0000"  >&lt;p&gt;+1 on patch, if tests pass.&lt;/p&gt;

&lt;p&gt;Minor comment:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-   * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Transition znode to CLOSED state.
+   * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; Transition znode to RS_ZK_REGION_FAILED_OPEN state succeeds or
+   *  not
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above should read &apos;@return whether znode transition to ...&apos;&lt;/p&gt;</comment>
                            <comment id="13181440" author="zhihyu@ebaysf.com" created="Fri, 6 Jan 2012 17:04:44 +0000"  >&lt;p&gt;Please fix the following and submit new patch:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Hunk #6 FAILED at 111.
2 out of 6 hunks FAILED -- saving rejects to file src/test/java/org/apache/hadoop/hbase/regionserver/handler/TestCloseRegionHandler.java.rej
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13181527" author="mingma" created="Fri, 6 Jan 2012 19:09:15 +0000"  >&lt;p&gt;ok. try this one.&lt;/p&gt;</comment>
                            <comment id="13181531" author="hadoopqa" created="Fri, 6 Jan 2012 19:12:10 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12509708/HBASE-4357-0.92.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12509708/HBASE-4357-0.92.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/688//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/688//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13181561" author="zhihyu@ebaysf.com" created="Fri, 6 Jan 2012 20:01:31 +0000"  >&lt;p&gt;Manually resolved some conflicts.&lt;/p&gt;</comment>
                            <comment id="13181577" author="hadoopqa" created="Fri, 6 Jan 2012 20:46:25 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12509710/4357.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12509710/4357.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -151 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 79 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.mapreduce.TestImportTsv&lt;br/&gt;
                  org.apache.hadoop.hbase.mapred.TestTableMapReduce&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/689//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/689//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/689//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/689//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/689//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/689//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13181595" author="zhihyu@ebaysf.com" created="Fri, 6 Jan 2012 20:57:27 +0000"  >&lt;p&gt;There was no hung test(s).&lt;br/&gt;
The above test failures are known due to &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-3583&quot; title=&quot;ProcfsBasedProcessTree#constructProcessInfo() may throw NumberFormatException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-3583&quot;&gt;&lt;del&gt;MAPREDUCE-3583&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The latest patch is ready to be checked in.&lt;/p&gt;</comment>
                            <comment id="13181669" author="zhihyu@ebaysf.com" created="Fri, 6 Jan 2012 22:58:57 +0000"  >&lt;p&gt;Integrated to 0.92 and TRUNK.&lt;/p&gt;

&lt;p&gt;Thanks for the patch, Ming. You correctly generated patch for 0.92 but Hadoop QA runs test suite in TRUNK.&lt;/p&gt;

&lt;p&gt;Thanks for the review Ram.&lt;/p&gt;</comment>
                            <comment id="13181692" author="hudson" created="Fri, 6 Jan 2012 23:38:22 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2615 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2615/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2615/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4357&quot; title=&quot;Region stayed in transition - in closing state&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4357&quot;&gt;&lt;del&gt;HBASE-4357&lt;/del&gt;&lt;/a&gt;  Region stayed in transition - in closing state (Ming Ma)&lt;/p&gt;

&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/ipc/HRegionInterface.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/ServerManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/handler/CloseMetaHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/handler/CloseRegionHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/handler/CloseRootHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/handler/OpenRegionHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/master/TestAssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/regionserver/handler/TestCloseRegionHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/MockRegionServerServices.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13181767" author="hudson" created="Sat, 7 Jan 2012 01:37:06 +0000"  >&lt;p&gt;Integrated in HBase-0.92 #227 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92/227/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92/227/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4357&quot; title=&quot;Region stayed in transition - in closing state&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4357&quot;&gt;&lt;del&gt;HBASE-4357&lt;/del&gt;&lt;/a&gt;  Region stayed in transition - in closing state (Ming Ma)&lt;/p&gt;

&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/ipc/HRegionInterface.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/ServerManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/regionserver/handler/CloseMetaHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/regionserver/handler/CloseRegionHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/regionserver/handler/CloseRootHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/regionserver/handler/OpenRegionHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/regionserver/handler/TestCloseRegionHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/util/MockRegionServerServices.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13181883" author="hudson" created="Sat, 7 Jan 2012 06:21:29 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-security #66 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-security/66/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-security/66/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4357&quot; title=&quot;Region stayed in transition - in closing state&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4357&quot;&gt;&lt;del&gt;HBASE-4357&lt;/del&gt;&lt;/a&gt;  Region stayed in transition - in closing state (Ming Ma)&lt;/p&gt;

&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/ipc/HRegionInterface.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/ServerManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/handler/CloseMetaHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/handler/CloseRegionHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/handler/CloseRootHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/handler/OpenRegionHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/master/TestAssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/regionserver/handler/TestCloseRegionHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/MockRegionServerServices.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13181910" author="hudson" created="Sat, 7 Jan 2012 11:47:59 +0000"  >&lt;p&gt;Integrated in HBase-0.92-security #65 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92-security/65/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92-security/65/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4357&quot; title=&quot;Region stayed in transition - in closing state&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4357&quot;&gt;&lt;del&gt;HBASE-4357&lt;/del&gt;&lt;/a&gt;  Region stayed in transition - in closing state (Ming Ma)&lt;/p&gt;

&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/ipc/HRegionInterface.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/ServerManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/regionserver/handler/CloseMetaHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/regionserver/handler/CloseRegionHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/regionserver/handler/CloseRootHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/regionserver/handler/OpenRegionHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/regionserver/handler/TestCloseRegionHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/util/MockRegionServerServices.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13182114" author="stack" created="Sat, 7 Jan 2012 22:03:07 +0000"  >&lt;p&gt;+1 Nice patch Ming.&lt;/p&gt;

&lt;p&gt;Regards conversation above on what if HRS can&apos;t close a region, I&apos;d say lets go basic for now and crash out the HRS and let ServerShutdownHandler make sense of it all.  Not the TimeoutMonitor IMO.  TM at the moment is way too heavy-handed.  Needs to be made more of a butterfly than bulldozer before we let it do closing fixups.&lt;/p&gt;

&lt;p&gt;Good stuff.&lt;/p&gt;</comment>
                            <comment id="13182124" author="stack" created="Sat, 7 Jan 2012 22:18:50 +0000"  >&lt;p&gt;Was committed by Ted a day or so ago.  Resolving.&lt;/p&gt;</comment>
                            <comment id="15015749" author="lars_francke" created="Fri, 20 Nov 2015 11:52:27 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12509710" name="4357.txt" size="24585" author="zhihyu@ebaysf.com" created="Fri, 6 Jan 2012 20:01:31 +0000"/>
                            <attachment id="12509708" name="HBASE-4357-0.92.patch" size="23231" author="mingma" created="Fri, 6 Jan 2012 19:09:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 9 Sep 2011 03:19:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>27272</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hqkv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>101568</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>