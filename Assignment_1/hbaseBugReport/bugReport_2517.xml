<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:02:34 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-2517/HBASE-2517.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-2517] During reads when passed the specified time range, seek to next column</title>
                <link>https://issues.apache.org/jira/browse/HBASE-2517</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;When we are processing the stream of KeyValues in the ScanQueryMatcher, we will check the timestamp of the current KV against the specific TimeRange.  Currently we only check if it is in the range or not, returning SKIP if outside the range or continuing to other checks if within the range.&lt;/p&gt;

&lt;p&gt;The check should actually return SKIP if the stamp is greater than the TimeRange and NEXT_COL if the stamp is less than the TimeRange (we know we won&apos;t take anymore columns from the current column once we are below the TimeRange).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12463796">HBASE-2517</key>
            <summary>During reads when passed the specified time range, seek to next column</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pranavkhaitan">Pranav Khaitan</assignee>
                                    <reporter username="streamy">Jonathan Gray</reporter>
                        <labels>
                            <label>moved_from_0_20_5</label>
                    </labels>
                <created>Wed, 5 May 2010 17:24:17 +0000</created>
                <updated>Fri, 20 Nov 2015 12:41:19 +0000</updated>
                            <resolved>Thu, 15 Jul 2010 17:16:16 +0000</resolved>
                                                    <fixVersion>0.90.0</fixVersion>
                                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12864413" author="streamy" created="Wed, 5 May 2010 17:26:12 +0000"  >&lt;p&gt;As part of this, should also make sure we are properly optimized for the case that we only asked for versions from a single column (or multiple columns and we are on the last column in the set).  So once we do NEXT_COL after falling outside the time range, we should realize there are no other columns we want and early out.&lt;/p&gt;</comment>
                            <comment id="12866832" author="stack" created="Wed, 12 May 2010 23:48:47 +0000"  >&lt;p&gt;Bulk move of 0.20.5 issues into 0.21.0 after vote that we merge branch into TRUNK up on list.&lt;/p&gt;</comment>
                            <comment id="12874300" author="stack" created="Tue, 1 Jun 2010 23:38:02 +0000"  >&lt;p&gt;Is this different from &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2450&quot; title=&quot;For single row reads of specific columns, seek to the first column in HFiles rather than start of row&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2450&quot;&gt;&lt;del&gt;HBASE-2450&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="12874357" author="streamy" created="Wed, 2 Jun 2010 01:16:29 +0000"  >&lt;p&gt;Similar but different.  This jira is specifically about some of the QueryMatcher return codes and ensuring they are optimal and return NEXT_COL and NEXT_ROW when appropriate given a TimeRange.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2450&quot; title=&quot;For single row reads of specific columns, seek to the first column in HFiles rather than start of row&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2450&quot;&gt;&lt;del&gt;HBASE-2450&lt;/del&gt;&lt;/a&gt; deals with actually seeking the HFile.&lt;/p&gt;

&lt;p&gt;These two are related, however.  We should be passing in stuff like NEXT_COL and NEXT_ROW down to the HFiles to do re-seeking where appropriate (when it means jumping to another block).  There&apos;s a JIRA for that.&lt;/p&gt;</comment>
                            <comment id="12888750" author="hbasereviewboard" created="Thu, 15 Jul 2010 08:49:28 +0000"  >&lt;p&gt;Message from: &quot;Pranav Khaitan&quot; &amp;lt;pranavkhaitan@facebook.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.hbase.org/r/323/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/323/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hbase, Jonathan Gray, Karthik Ranganathan, and Kannan Muthukkaruppan.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;This patch addresses the following issues:&lt;/p&gt;

&lt;p&gt;1. After it is done with reading the required timestamps, the QueryMatcher should return a NEXT_COL so that it doesn&apos;t keep on reading every kv till the end of the column. &lt;/p&gt;

&lt;p&gt;2. Before returning NEXT_COL, it also checks if any further columns are required. If no columns are required, then it returns NEXT_ROW instead of returning NEXT_COL. This saves significant time and another round of iteration.&lt;/p&gt;

&lt;p&gt;3. Before seeking to NEXT_ROW, we check if we are already on the last row. If we are on the last row, then we can return false. This avoids one more call to next() and saves times.&lt;/p&gt;

&lt;p&gt;4. Provides useful input for HBase-2450 and HBase-1517 which can take advantage of these return codes.&lt;/p&gt;

&lt;p&gt;5. Optimizes Get queries with only one column.&lt;/p&gt;

&lt;p&gt;6. Fixing a bug which occurred when versions were processed before filters were applied.&lt;/p&gt;

&lt;p&gt;7. If we know (using filters/timestamps) that we don&apos;t need any more keys for a particular column, then there should be a mechanism to send this information to ExplicitColumnTracker.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2517&quot; title=&quot;During reads when passed the specified time range, seek to next column&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2517&quot;&gt;&lt;del&gt;HBASE-2517&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;http://issues.apache.org/jira/browse/HBASE-2517&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/HBASE-2517&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/src/main/java/org/apache/hadoop/hbase/io/TimeRange.java 963961 &lt;br/&gt;
  trunk/src/main/java/org/apache/hadoop/hbase/regionserver/ExplicitColumnTracker.java 963961 &lt;br/&gt;
  trunk/src/main/java/org/apache/hadoop/hbase/regionserver/KeyValueHeap.java 963961 &lt;br/&gt;
  trunk/src/main/java/org/apache/hadoop/hbase/regionserver/ScanQueryMatcher.java 963961 &lt;br/&gt;
  trunk/src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java 963961 &lt;br/&gt;
  trunk/src/test/java/org/apache/hadoop/hbase/client/TestMultipleTimestamps.java 963961 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;http://review.hbase.org/r/323/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/323/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Existing tests run successfully with some of them going through the modified code path. Added specialized unit tests for this purpose. Did manual debugging to see if the optimization is being done and correct match codes are being returned. &lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Pranav&lt;/p&gt;

</comment>
                            <comment id="12888844" author="hbasereviewboard" created="Thu, 15 Jul 2010 16:19:47 +0000"  >&lt;p&gt;Message from: stack@duboce.net&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.hbase.org/r/323/#review403&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/323/#review403&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Ship it!&lt;/p&gt;


&lt;p&gt;I don&apos;t know this code too well but what I see here makes sense to me.  Good stuff Pranav.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;stack&lt;/li&gt;
&lt;/ul&gt;



</comment>
                            <comment id="12888858" author="streamy" created="Thu, 15 Jul 2010 17:16:16 +0000"  >&lt;p&gt;Committed to trunk.  Great work Pranav!&lt;/p&gt;</comment>
                            <comment id="12888859" author="hbasereviewboard" created="Thu, 15 Jul 2010 17:17:45 +0000"  >&lt;p&gt;Message from: &quot;Jonathan Gray&quot; &amp;lt;jgray@apache.org&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.hbase.org/r/323/#review405&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/323/#review405&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Ship it!&lt;/p&gt;


&lt;p&gt;+1 from me as well&lt;/p&gt;


&lt;p&gt;trunk/src/main/java/org/apache/hadoop/hbase/regionserver/ScanQueryMatcher.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.hbase.org/r/323/#comment1724&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/323/#comment1724&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Good catch on this ordering.&lt;/p&gt;



&lt;p&gt;trunk/src/main/java/org/apache/hadoop/hbase/regionserver/ScanQueryMatcher.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.hbase.org/r/323/#comment1725&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/323/#comment1725&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Again, good stuff&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Jonathan&lt;/li&gt;
&lt;/ul&gt;



</comment>
                            <comment id="12888933" author="pranavkhaitan" created="Thu, 15 Jul 2010 21:28:32 +0000"  >&lt;p&gt;Modified every test method to create a different table for testing. There is a clash if they use the same table name.&lt;/p&gt;

&lt;p&gt;Another modification has been made by Jonathan to flush only the required tables and not all tables.&lt;/p&gt;</comment>
                            <comment id="12888936" author="streamy" created="Thu, 15 Jul 2010 21:38:13 +0000"  >&lt;p&gt;Fix committed to trunk.  Test passes locally.  Hopefully hudson is happy too.&lt;/p&gt;</comment>
                            <comment id="15016944" author="lars_francke" created="Fri, 20 Nov 2015 12:41:19 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12462095">HBASE-2450</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12449596" name="QueryMatcherV2.patch" size="5268" author="pranavkhaitan" created="Thu, 15 Jul 2010 21:28:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 12 May 2010 23:48:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32621</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hi1j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>100185</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>