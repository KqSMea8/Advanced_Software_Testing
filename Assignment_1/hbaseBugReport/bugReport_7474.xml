<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:46:06 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-7474/HBASE-7474.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-7474] Endpoint Implementation to support Scans with Sorting of Rows based on column values(similar to &quot;order by&quot; clause of RDBMS)</title>
                <link>https://issues.apache.org/jira/browse/HBASE-7474</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Recently, i have developed an Endpoint which can sort the Results(rows) on the basis of column values. This functionality is similar to &quot;order by&quot; clause of RDBMS. I will be submitting this Patch for HBase0.94.3&lt;/p&gt;

&lt;p&gt;I am almost done with the initial development and testing of feature. But, i need to write the JUnits for this. I will also try to make design doc.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Anil Gupta&lt;br/&gt;
Software Engineer II, Intuit, inc&lt;/p&gt;</description>
                <environment></environment>
        <key id="12625635">HBASE-7474</key>
            <summary>Endpoint Implementation to support Scans with Sorting of Rows based on column values(similar to &quot;order by&quot; clause of RDBMS)</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="7">Later</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="anilgupta84">Anil Gupta</reporter>
                        <labels>
                            <label>coprocessors</label>
                            <label>scan</label>
                            <label>sort</label>
                    </labels>
                <created>Tue, 1 Jan 2013 23:59:18 +0000</created>
                <updated>Fri, 24 Apr 2015 00:33:11 +0000</updated>
                            <resolved>Wed, 22 Apr 2015 00:31:30 +0000</resolved>
                                    <version>0.94.3</version>
                                                    <component>Coprocessors</component>
                    <component>Scanners</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>11</watches>
                                                                <comments>
                            <comment id="13541964" author="apurtell" created="Wed, 2 Jan 2013 01:31:25 +0000"  >&lt;p&gt;How does this relate to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4435&quot; title=&quot;Add Group By functionality using Coprocessors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4435&quot;&gt;HBASE-4435&lt;/a&gt;?&lt;/p&gt;

&lt;p&gt;Edit: I&apos;m interested if you see some common functionality. Just a thought.&lt;/p&gt;</comment>
                            <comment id="13542004" author="lhofhansl" created="Wed, 2 Jan 2013 05:25:56 +0000"  >&lt;p&gt;I assume the strategy is: Per region sorts with a final merge sort?&lt;/p&gt;</comment>
                            <comment id="13542067" author="anilgupta84" created="Wed, 2 Jan 2013 09:46:08 +0000"  >&lt;p&gt;All,&lt;br/&gt;
I have attached the High Level Flow diagram for this feature. I&apos;ll also try to submit the code ASAP. JUnit might take some time. Let me know if you have any questions.&lt;/p&gt;</comment>
                            <comment id="13542069" author="anilgupta84" created="Wed, 2 Jan 2013 09:55:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andrew.purtell%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;andrew.purtell@gmail.com&quot;&gt;Andrew Purtell&lt;/a&gt;&lt;br/&gt;
My implementation is not at all related to HBase-4435. It seems like goal of HBase-4435  is quite different from mine.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt;&lt;br/&gt;
Yes, if the scan spans multiple regions then i do a merge sort at the Client side. Otherwise, if the scan is limited to a single region then i dont need to perform a merge sort. So, in the latter it&apos;s slightly  optimized. I&apos;ve attached the high level flowchart for reference.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Anil Gupta&lt;br/&gt;
Software Engineer II, Intuit, inc&lt;/p&gt;</comment>
                            <comment id="13542549" author="tlipcon" created="Wed, 2 Jan 2013 23:30:07 +0000"  >&lt;p&gt;What&apos;s the advantage of doing this, server side?&lt;/p&gt;

&lt;p&gt;Server-side filtering and server-side aggregation make sense, because it reduces the amount of data that has to be read over the network. But, a server side sort will transfer the same amount of data - it just moves extra CPU cost from the client to the server, which IMO seems like the wrong direction.&lt;/p&gt;</comment>
                            <comment id="13542556" author="lhofhansl" created="Wed, 2 Jan 2013 23:37:46 +0000"  >&lt;p&gt;Not if you stream the result from the server and only look at the top N (admittedly that&apos;s a fairly limited usecase)&lt;/p&gt;</comment>
                            <comment id="13542564" author="yuzhihong@gmail.com" created="Wed, 2 Jan 2013 23:46:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5982&quot; title=&quot;HBase Coprocessor Local Aggregation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5982&quot;&gt;&lt;del&gt;HBASE-5982&lt;/del&gt;&lt;/a&gt; comes to mind if we are looking at top N query.&lt;/p&gt;</comment>
                            <comment id="13542597" author="anilgupta84" created="Thu, 3 Jan 2013 00:26:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tlipcon&quot; class=&quot;user-hover&quot; rel=&quot;tlipcon&quot;&gt;Todd Lipcon&lt;/a&gt;&lt;br/&gt;
Hi Todd,&lt;br/&gt;
Let&apos;s walk through an example and I hope you have gone through the doc attached to Jira.&lt;/p&gt;

&lt;p&gt;Example: Table has 20 million rows divided among 10 regions(2 million rows per region). &lt;br/&gt;
We want to sort on a column that stores Long Value and get the 20 max values. 500k row are satisfied the &lt;br/&gt;
scan filters.&lt;/p&gt;

&lt;p&gt;Case1: If the scans don&apos;t span multiple regions then&lt;br/&gt;
Case 1.1: No Coprocessor&lt;br/&gt;
RegionServer needs to transfer 500K across the network to client.&lt;br/&gt;
Case 1.2: With Coprocessor&lt;br/&gt;
RegionServer will sort the top 20 among 500K rows and only return 20 rows.&lt;/p&gt;

&lt;p&gt;Case2:If the scan spans multiple regions then lets assume the 250K rows in region1 and 250k rows in region2 are satisfied by scanner &lt;br/&gt;
Case 1: No Coprocessor&lt;br/&gt;
Region1 will transfer 250K rows to client.&lt;br/&gt;
Region2 will transfer 250K rows to client.&lt;br/&gt;
Client will sort top 20 among 500K rows.&lt;br/&gt;
Case 2: With Coprocessor&lt;br/&gt;
Region1 will sort the top 20 among 250K rows and only return 20 rows to client.&lt;br/&gt;
Region2 will sort the top 20 among 250K rows and only return 20 rows to client.&lt;br/&gt;
Client will perform the merge sort on the results from region1 and region2.&lt;/p&gt;

&lt;p&gt;The network I/O difference is huge. IMO, it is not possible to implement sorting in HBase without coprocessor. The client will keep on dying due to Network I/O and extreme memory load if we don&apos;t do server side processing.&lt;/p&gt;

&lt;p&gt;I understand you concern that its an extra load on the server-side. But, currently there is no better way to achieve it.&lt;/p&gt;

&lt;p&gt;If you have any other better idea to implement this in HBase, i would be glad to have a look at that.&lt;/p&gt;

&lt;p&gt;Lastly, its a co-processor so it wont be enabled by default. User&apos;s who need it will enable this and they will do their due diligence in Tuning the cluster for their use case.   &lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Anil Gupta&lt;br/&gt;
Software Engineer II, Intuit, inc&lt;/p&gt;</comment>
                            <comment id="13542602" author="yuzhihong@gmail.com" created="Thu, 3 Jan 2013 00:33:48 +0000"  >&lt;p&gt;@Anil:&lt;br/&gt;
Have you looked at &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5982&quot; title=&quot;HBase Coprocessor Local Aggregation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5982&quot;&gt;&lt;del&gt;HBASE-5982&lt;/del&gt;&lt;/a&gt; ?&lt;br/&gt;
I think its goal is to handle top N query described above.&lt;/p&gt;

&lt;p&gt;For case 2:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;lets assume the 250K rows in region1 and 250k rows in region2&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I think the above assumption is not realistic. The rows would spread across 10 regions.&lt;/p&gt;</comment>
                            <comment id="13542617" author="anilgupta84" created="Thu, 3 Jan 2013 00:56:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ted_yu&quot; class=&quot;user-hover&quot; rel=&quot;ted_yu&quot;&gt;Ted Yu&lt;/a&gt;&lt;br/&gt;
My implementation is purely based on Sorting on a column value. That previous comment was just an example. My implementation also takes the startIndex and pageSize. So, it handles more than Top N. If accidentally, it suffices  &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5982&quot; title=&quot;HBase Coprocessor Local Aggregation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5982&quot;&gt;&lt;del&gt;HBASE-5982&lt;/del&gt;&lt;/a&gt;, then it&apos;s great!&lt;/p&gt;

&lt;p&gt;Ted: I think the above assumption is not realistic. The rows would spread across 10 regions.&lt;br/&gt;
Anil: It depends on the use case. Obviously, a scan can span 10 or more region also. In my use case, barely a request will even span more than 2-3 regions(around 2-3 million records with scan range). HBase has wide variety of use-case so using this feature is at user discretion.&lt;/p&gt;

&lt;p&gt;I developed this feature for one of my use case. I thought that this would be a good additional feature in HBase. Hence, i decided to commit it. I am not trying to push this forcefully into HBase distrinution. If it doesn&apos;t seems like a perfect fit then please let me know.&lt;/p&gt;</comment>
                            <comment id="13543634" author="anoopsamjohn" created="Fri, 4 Jan 2013 06:18:29 +0000"  >&lt;p&gt;So your implementation is to fetch the top N rows of a table sort by one column value.&lt;/p&gt;

&lt;p&gt;How you handle the start index?  I guess you have some UI which shows the results in pages with page size as say 100. So how you are showing page 2,3 etc.&lt;/p&gt;

&lt;p&gt;Will be good if you attach the code. Can have a detailed look for all scenarios.  &lt;br/&gt;
We have examples section in 94 and separate project itself in trunk. So it might be fine to add this also as it may help some others with similar need.&lt;/p&gt;

&lt;p&gt;Anil Better to edit the issue&apos;s title and desc to clearly specify the top N part. The current one giving a feeling that it just do sort.&lt;/p&gt;</comment>
                            <comment id="13543669" author="anilgupta84" created="Fri, 4 Jan 2013 07:24:49 +0000"  >&lt;p&gt;Attaching the initial patch. I&apos;ve also done commenting in the code. So, hopefully it will be easier to understand the implementation. &lt;/p&gt;</comment>
                            <comment id="13543677" author="anilgupta84" created="Fri, 4 Jan 2013 07:39:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoopsamjohn&quot; class=&quot;user-hover&quot; rel=&quot;anoopsamjohn&quot;&gt;Anoop Sam John&lt;/a&gt;&lt;br/&gt;
Yes, goal of my implementation is to fetch the top N rows of a table sorted by one column value when the startIndex is 0.&lt;/p&gt;

&lt;p&gt;Anoop:How you handle the start index? I guess you have some UI which shows the results in pages with page size as say 100. So how you are showing page 2,3 etc.&lt;br/&gt;
Anil: Yes, that is right. The sorting feature is pretty handy when HBase is used as Data Source for a web service. We can achieve pagination based on non-rowkey attribute sorting with the help of this.&lt;br/&gt;
In this implementation pageSize is per request basis. So, startIndex tells how many Top N records to skip. &lt;br/&gt;
For example if the request has startIndex as 31 and pageSize as 20. Then Top 30(startIndex-1) records will be ignored and Top 31-50 records will be the output of the request.&lt;/p&gt;

&lt;p&gt;Do you want me to add in the description that Top N query can be done by this? The jira alreadt says &quot;(similar to &quot;order by&quot; clause of RDBMS)&quot;. Is it ambiguous?&lt;/p&gt;

</comment>
                            <comment id="13543682" author="anilgupta84" created="Fri, 4 Jan 2013 07:53:34 +0000"  >&lt;p&gt;How to try out the patch?&lt;/p&gt;

&lt;p&gt;By default the patch contains an end-end implementation for sorting based on BigDecimal column. In order to support any other datatype you just need to implement SortingColumnInterpreter interface.&lt;/p&gt;

&lt;p&gt;Steps required to do sorting:&lt;br/&gt;
    1.Instantiate a class which implements SortingColumnInterpreter.&lt;br/&gt;
    2.Prepare the scan object&lt;br/&gt;
    3.Instantiate the HTable&lt;br/&gt;
    4.Instantiate SortingClient&lt;br/&gt;
    5.Invoke the method of sorting client.&lt;/p&gt;</comment>
                            <comment id="13544111" author="yuzhihong@gmail.com" created="Fri, 4 Jan 2013 19:05:19 +0000"  >&lt;p&gt;Any new feature should come with some tests, do you agree ?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+   * @param startIndex
+   * @param pageSize
+   * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Please add explanation for the above parameters of sortIncreasing(). Underneath getSortedRows() is called with last parameter of false. Can we introduce sortDecreasing so that sortIncreasing() and sortDecreasing() can be removed ?&lt;br/&gt;
This would make the if statements below unnecessary:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (sortDecreasing) &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; instance.sortDecreasing(scan, columnFamily, columnQualifier,
+              colInterpreter, startIndex, pageSize, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
+            &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; instance.sortIncreasing(scan, columnFamily, columnQualifier,
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+   * @param startIndex
+   * @param pageSize
+   * @param sortDecreasing
+   * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Complete javadoc above. nit: sortDecreasing -&amp;gt; sortDescending&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Result[0];
+    } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (numberOfRegionsInRange == 1) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&apos;else&apos; keyword is not needed above.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Querying only one region&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Please use log throughout the patch.&lt;br/&gt;
In mergeSortIncreasing():&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; currentMaxValueRegion = 0;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I guess you meant currentMinValueRegion.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;[] arrayIndex = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;[regionResultMap.size()];
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;arrayIndex is used to point to entries in Result[] returned for region(s). Please add comment explaining its purpose.&lt;br/&gt;
It would be nice if you can unite mergeSortIncreasing() and mergeSortDecreasing().&lt;/p&gt;</comment>
                            <comment id="13544220" author="anilgupta84" created="Fri, 4 Jan 2013 20:19:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ted_yu&quot; class=&quot;user-hover&quot; rel=&quot;ted_yu&quot;&gt;Ted Yu&lt;/a&gt; &lt;br/&gt;
I completely agree with you on Unit tests. Till now, I have done testing of this feature on my tiny fully-distributed cluster. It might take me a while to submit the JUnits. Initial Patch was just meant to get initial feedback from commiters.&lt;/p&gt;

&lt;p&gt;I&apos;ll try to incorporate appropriate changes as per your above suggestions in 2-3 days. Thanks for the feedback.&lt;/p&gt;
</comment>
                            <comment id="13547198" author="anilgupta84" created="Tue, 8 Jan 2013 20:04:23 +0000"  >&lt;p&gt;Attaching the updated patch with JUnits.&lt;/p&gt;

&lt;p&gt;Created the a common method &quot;mergeSort&quot; in Sorting Client.&lt;br/&gt;
Removed System.out and added some more comments.&lt;/p&gt;</comment>
                            <comment id="13547313" author="yuzhihong@gmail.com" created="Tue, 8 Jan 2013 21:43:28 +0000"  >&lt;p&gt;License headers in SortingClient.java and BigDecimalSortingColumnInterpreter.java are not properly formatted.&lt;br/&gt;
Some log statements, such as the following, can be at debug level.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      log.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Querying only one region &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; sorting&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (sortDecreasing) &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; instance.sortDecreasing(scan, columnFamily, columnQualifier,
+              colInterpreter, startIndex, pageSize, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
+            &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; instance.sortIncreasing(scan, columnFamily, columnQualifier,
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&apos;else&apos; keyword is not needed above.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+   * This method is used to &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; the merge sort the rows from multiple regions and produce the &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; output
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Remove &apos;do the&apos;. Wrap long line.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Map.Entry&amp;lt;&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[], Result[]&amp;gt; regionResultsEntryMap : regionResultMap.entrySet()) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;regionResultsEntryMap -&amp;gt; regionResultsEntry or regionResultsMapEntry&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(totalNoOfRows &amp;lt; startIndex)
+    {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Normally left brace is on the same line as if statement. Insert a space between if and (.&lt;/p&gt;

&lt;p&gt;currentMaxorMinValueRegion and maxOrMin are used in the if / else blocks. You can move them inside if / else block and give them names that are clearer in meaning.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Result[] regionResult : regionResults) {
+          &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ((regionResult.length - 1) &amp;lt; arrayIndex[regionNum]) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;regionResults and arrayIndex are both arrays. So you can use the same index to access them - in my opinion the code is more readable.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+          finalResult[finalResultCurrentSize++] = regionResults[currentMaxorMinValueRegion][arrayIndex[currentMaxorMinValueRegion]];
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Wrap long line above.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+          &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (colInterpreter.compare(tmp, maxOrMin) &amp;gt; 0) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If I read the code correctly, the above comparison is the major difference between ascending and descending sorting. A little abstraction would allow you to unify the two cases.&lt;/p&gt;

&lt;p&gt;Looking at SortingColumnInterpreter, this is the only method which is not present in ColumnInterpreter:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  T getValue(KeyValue kv) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The following method is already provided by ColumnInterpreter:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; T getValue(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] colFamily, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] colQualifier, KeyValue kv)
      &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Please consider dropping SortingColumnInterpreter&lt;/p&gt;</comment>
                            <comment id="13547318" author="hadoopqa" created="Tue, 8 Jan 2013 21:45:06 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12563810/hbase-7474-v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12563810/hbase-7474-v2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces lines longer than 100&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.regionserver.TestAtomicOperation&lt;br/&gt;
                  org.apache.hadoop.hbase.TestLocalHBaseCluster&lt;br/&gt;
                  org.apache.hadoop.hbase.master.TestMasterFailover&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 7 zombie test(s): 	at org.apache.hadoop.hbase.master.TestMasterFailover.testMasterFailoverWithMockedRITOnDeadRS(TestMasterFailover.java:833)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3934//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3934//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3934//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3934//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3934//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3934//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3934//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3934//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3934//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3934//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3934//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3934//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3934//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3934//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3934//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3934//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3934//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3934//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13547471" author="yuzhihong@gmail.com" created="Wed, 9 Jan 2013 00:34:17 +0000"  >&lt;p&gt;For SortingProtocol:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &amp;lt;T&amp;gt; Result[] sortIncreasing(Scan scan, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] columnFamily, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] columnQualifier,
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I think sortAscending would be more familiar to people who have worked with RDBMS.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &amp;lt;T&amp;gt; Result[] sortDecreasing(Scan scan, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] columnFamily, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] columnQualifier,
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;sortDescending would be a better method name.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+   * @param singleRegion does &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; scan request spans multiple regions?
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;spelling: &apos;spans&apos; -&amp;gt; &apos;span&apos;&lt;/p&gt;

&lt;p&gt;Looking at SortingProtocolImplementation.sortIncreasing(), singleRegion is not referenced in the loop - we scan until there is no more row. Some clarification is needed in javadoc and variable name.&lt;/p&gt;</comment>
                            <comment id="13547652" author="anilgupta84" created="Wed, 9 Jan 2013 05:24:58 +0000"  >&lt;p&gt;How can i assign this issue to myself? I am unable to do so. Please help.&lt;/p&gt;</comment>
                            <comment id="13549437" author="anilgupta84" created="Thu, 10 Jan 2013 08:43:25 +0000"  >&lt;p&gt;For SortingProtocol:&lt;/p&gt;

&lt;p&gt;+  &amp;lt;T&amp;gt; Result[] sortIncreasing(Scan scan, byte[] columnFamily, byte[] columnQualifier,&lt;/p&gt;

&lt;p&gt;I think sortAscending would be more familiar to people who have worked with RDBMS.&lt;br/&gt;
Anil: Done. Even, i was thinking that Ascending and Descending are more familiar&lt;/p&gt;

&lt;p&gt;+  &amp;lt;T&amp;gt; Result[] sortDecreasing(Scan scan, byte[] columnFamily, byte[] columnQualifier,&lt;/p&gt;

&lt;p&gt;sortDescending would be a better method name.&lt;br/&gt;
Anil: Done&lt;/p&gt;

&lt;p&gt;+   * @param singleRegion does this scan request spans multiple regions?&lt;/p&gt;

&lt;p&gt;spelling: &apos;spans&apos; -&amp;gt; &apos;span&apos;&lt;br/&gt;
Anil: &quot;spans&quot; is the correct word&lt;/p&gt;

&lt;p&gt;Looking at SortingProtocolImplementation.sortIncreasing(), singleRegion is not referenced in the loop - we scan until there is no more row.&lt;br/&gt;
Anil: When the scan is limited to a single region we only return startIndex to startIndex+(pageSize-1) results to client since we dont need to merge sort at client side. We dont need to use singleRegion in the loop. Otherwise if scan spans multiple region then Region returns 0 to (startIndex+(pageSize-1)) to client for carrying out merge sort.&lt;/p&gt;

&lt;p&gt;Some clarification is needed in javadoc and variable name.&lt;br/&gt;
Anil:Do you want me to write above description for singleRegion in comments? Wont it confuse the user with too much of information?&lt;/p&gt;</comment>
                            <comment id="13549452" author="anilgupta84" created="Thu, 10 Jan 2013 09:00:48 +0000"  >&lt;p&gt;License headers in SortingClient.java and BigDecimalSortingColumnInterpreter.java are not properly formatted.&lt;br/&gt;
Anil: Pending&lt;br/&gt;
Some log statements, such as the following, can be at debug level.&lt;/p&gt;

&lt;p&gt;+      log.info(&quot;Querying only one region for sorting&quot;);&lt;br/&gt;
Anil: Done&lt;/p&gt;

&lt;p&gt;+            if (sortDecreasing) return instance.sortDecreasing(scan, columnFamily, columnQualifier,&lt;br/&gt;
+              colInterpreter, startIndex, pageSize, true);&lt;br/&gt;
+            else return instance.sortIncreasing(scan, columnFamily, columnQualifier,&lt;/p&gt;

&lt;p&gt;&apos;else&apos; keyword is not needed above.&lt;br/&gt;
Anil: Done. But, personally i like to explicitly use the &quot;else&quot; keyword for readability purpose. I am curious to know if there is any technical reason for not using &quot;else&quot; in the above case?&lt;/p&gt;

&lt;p&gt;+   * This method is used to do the merge sort the rows from multiple regions and produce the final output&lt;/p&gt;

&lt;p&gt;Remove &apos;do the&apos;. Wrap long line.&lt;br/&gt;
Anil: Done&lt;/p&gt;

&lt;p&gt;+    for (Map.Entry&amp;lt;byte[], Result[]&amp;gt; regionResultsEntryMap : regionResultMap.entrySet()) {&lt;/p&gt;

&lt;p&gt;regionResultsEntryMap -&amp;gt; regionResultsEntry or regionResultsMapEntry&lt;br/&gt;
Anil: Done&lt;/p&gt;

&lt;p&gt;+    if(totalNoOfRows &amp;lt; startIndex)&lt;br/&gt;
+    {&lt;/p&gt;

&lt;p&gt;Normally left brace is on the same line as if statement. Insert a space between if and (.&lt;br/&gt;
Anil: Done&lt;/p&gt;

&lt;p&gt;currentMaxorMinValueRegion and maxOrMin are used in the if / else blocks. You can move them inside if / else block and give them names that are clearer in meaning.&lt;br/&gt;
Anil: Done&lt;/p&gt;

&lt;p&gt;+        for (Result[] regionResult : regionResults) {&lt;br/&gt;
+          if ((regionResult.length - 1) &amp;lt; arrayIndex&lt;span class=&quot;error&quot;&gt;&amp;#91;regionNum&amp;#93;&lt;/span&gt;) {&lt;/p&gt;

&lt;p&gt;regionResults and arrayIndex are both arrays. So you can use the same index to access them - in my opinion the code is more readable.&lt;br/&gt;
Anil:Pending&lt;/p&gt;

&lt;p&gt;+          finalResult&lt;span class=&quot;error&quot;&gt;&amp;#91;finalResultCurrentSize++&amp;#93;&lt;/span&gt; = regionResults&lt;span class=&quot;error&quot;&gt;&amp;#91;currentMaxorMinValueRegion&amp;#93;&lt;/span&gt;[arrayIndex&lt;span class=&quot;error&quot;&gt;&amp;#91;currentMaxorMinValueRegion&amp;#93;&lt;/span&gt;];&lt;/p&gt;

&lt;p&gt;Wrap long line above.&lt;br/&gt;
Anil: Done&lt;/p&gt;

&lt;p&gt;+          if (colInterpreter.compare(tmp, maxOrMin) &amp;gt; 0) {&lt;/p&gt;

&lt;p&gt;If I read the code correctly, the above comparison is the major difference between ascending and descending sorting. A little abstraction would allow you to unify the two cases.&lt;br/&gt;
Anil: IMHO, the only way to do that is to put an If(sortDecresing) condition and then either do &quot;&amp;gt;&quot; or &quot;&amp;lt;&quot; comparison on the basis of sortDecreasing. I am worried that this abstraction will make the implementation a tab more slow since the worst case complexity of this sorting is O(n*n). I would prefer performance over few extra lines of code. Let me know your views.&lt;/p&gt;

&lt;p&gt;Looking at SortingColumnInterpreter, this is the only method which is not present in ColumnInterpreter:&lt;/p&gt;

&lt;p&gt;+  T getValue(KeyValue kv) throws IOException;&lt;/p&gt;

&lt;p&gt;The following method is already provided by ColumnInterpreter:&lt;/p&gt;

&lt;p&gt;  public abstract T getValue(byte[] colFamily, byte[] colQualifier, KeyValue kv)&lt;br/&gt;
      throws IOException;&lt;br/&gt;
Anil: I am thinking of adding the missing method &quot;T getValue(KeyValue kv) throws IOException;&quot; in ColumnInterpreter. Is that fine? I dont understand why we need colFamily and colQualifier in getValue method when only a KeyValue is passed.&lt;/p&gt;

&lt;p&gt;Please consider dropping SortingColumnInterpreter&lt;/p&gt;

&lt;p&gt;Thanks a lot for doing the code review.&lt;br/&gt;
~Anil Gupta&lt;br/&gt;
Software Engineer II, Intuit, Inc&lt;/p&gt;</comment>
                            <comment id="13549585" author="yuzhihong@gmail.com" created="Thu, 10 Jan 2013 12:59:21 +0000"  >&lt;p&gt;@Anil:&lt;br/&gt;
Thanks for the detailed response. In the future, you can quote comments using bq&amp;lt;dot&amp;gt;. People would be able to correlate your response with original comment.&lt;/p&gt;

&lt;p&gt;w.r.t. singleRegion in SortingProtocolImplementation.sortIncreasing(), your explanation makes sense.&lt;/p&gt;

&lt;p&gt;+   * @param singleRegion does this scan request spans multiple regions?&lt;/p&gt;

&lt;p&gt;Here &apos;scan request&apos; is singular, so &apos;spans&apos; should be &apos;span&apos;. I am fine with the javadoc after correcting spelling.&lt;/p&gt;

&lt;p&gt;+            if (sortDecreasing) return instance.sortDecreasing(scan, columnFamily, columnQualifier,&lt;br/&gt;
+              colInterpreter, startIndex, pageSize, true);&lt;br/&gt;
+            else return instance.sortIncreasing(scan, columnFamily, columnQualifier,&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I am curious to know if there is any technical reason for not using &quot;else&quot; in the above case?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The reason is that when sortDecreasing is true, we would return from the method, hence not reaching else statement.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I am worried that this abstraction will make the implementation a tab more slow&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;There are several conditional statements inside colInterpreter.compare(), I doubt there would be noticeable impact on performance if we unite code ascending and descending sorting. You can record the performance number for current implementation and compare the performance of rewritten code with that number.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I am thinking of adding the missing method &quot;T getValue(KeyValue kv) throws IOException;&quot; in ColumnInterpreter. Is that fine?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;ColumnInterpreter is able to provide access to value of the passed in KeyValue, so I don&apos;t think there is need to add the new method.&lt;/p&gt;</comment>
                            <comment id="13549776" author="lhofhansl" created="Thu, 10 Jan 2013 16:43:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=giacomotaylor&quot; class=&quot;user-hover&quot; rel=&quot;giacomotaylor&quot;&gt;James Taylor&lt;/a&gt; do you have any comments? Would this be useful for you?&lt;/p&gt;</comment>
                            <comment id="13558490" author="lhofhansl" created="Mon, 21 Jan 2013 02:47:27 +0000"  >&lt;p&gt;Since this we&apos;re still discussing this, I&apos;m moving this to 0.96 only. Please pull back if this is not what you had in mind.&lt;/p&gt;</comment>
                            <comment id="13558516" author="anilgupta84" created="Mon, 21 Jan 2013 04:02:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt;&lt;br/&gt;
Hi Lars,&lt;/p&gt;

&lt;p&gt;I would like this to be part of 0.94 release as this is fully compatible with 0.94. Lately, i haven&apos;t been able to focus on this Patch. If you can tell me the cut-off date for patches in next release of 0.94.x then  i will try to complete this patch before that. Thanks.&lt;/p&gt;</comment>
                            <comment id="13558524" author="lhofhansl" created="Mon, 21 Jan 2013 04:32:54 +0000"  >&lt;p&gt;There&apos;ll be a many future point releases of 0.94, so when we all agree that this patch should go in there won&apos;t a problem &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
It seems like there is some disagreement whether this should part of HBase proper.&lt;/p&gt;</comment>
                            <comment id="13593403" author="hadoopqa" created="Tue, 5 Mar 2013 13:38:26 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12563810/hbase-7474-v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12563810/hbase-7474-v2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces lines longer than 100&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.regionserver.TestSplitTransactionOnCluster&lt;br/&gt;
                  org.apache.hadoop.hbase.replication.TestReplicationQueueFailover&lt;br/&gt;
                  org.apache.hadoop.hbase.replication.TestReplicationQueueFailoverCompressed&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4666//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4666//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4666//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4666//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4666//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4666//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4666//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4666//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4666//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4666//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4666//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4666//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4666//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4666//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4666//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4666//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4666//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4666//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4666//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4666//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13604675" author="hadoopqa" created="Sun, 17 Mar 2013 17:29:49 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12563810/hbase-7474-v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12563810/hbase-7474-v2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 site&lt;/font&gt;.  The patch appears to cause mvn site goal to fail.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4857//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4857//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4857//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4857//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4857//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4857//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4857//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4857//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4857//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4857//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4857//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4857//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4857//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4857//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4857//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4857//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4857//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4857//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4857//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4857//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13687591" author="stack" created="Wed, 19 Jun 2013 04:22:53 +0000"  >&lt;p&gt;Moving new feature out unless a sponsor shows up for this patch.&lt;/p&gt;</comment>
                            <comment id="14510144" author="anilgupta84" created="Fri, 24 Apr 2015 00:33:11 +0000"  >&lt;p&gt;Really sorry for such a late reply. At the time i started writing this CP, Phoenix was not there.  IMO, Phoenix is already providing this feature now and Phoenix has richer toolset to do stuff like this.&lt;br/&gt;
However, if commiters think this would be a valuable feature in HBase. I will be happy to resume work on this patch.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12523558">HBASE-4435</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12562898" name="SortingEndpoint_high_level_flowchart.pdf" size="2493303" author="anilgupta84" created="Wed, 2 Jan 2013 09:46:08 +0000"/>
                            <attachment id="12563810" name="hbase-7474-v2.patch" size="50972" author="anilgupta84" created="Tue, 8 Jan 2013 20:04:23 +0000"/>
                            <attachment id="12563248" name="hbase-7474.patch" size="30341" author="anilgupta84" created="Fri, 4 Jan 2013 07:24:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 2 Jan 2013 01:31:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>302182</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 34 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i16z9b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>248847</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>