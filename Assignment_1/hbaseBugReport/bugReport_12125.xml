<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:29:58 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-12125/HBASE-12125.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-12125] Add Hbck option to check and fix WAL&apos;s from replication queue</title>
                <link>https://issues.apache.org/jira/browse/HBASE-12125</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The replication source will discard the WAL file in many cases when it encounters an exception reading it . This can cause data loss&lt;br/&gt;
and the underlying reason of failed read remains hidden.  Only in certain scenarios, the replication source should dump the current WAL and move to the next one. &lt;br/&gt;
This JIRA aims to have an hbck option to check the WAL files of replication queues for any inconsistencies and also provide an option to fix it.&lt;br/&gt;
The fix can be to remove the file from replication queue in zk and from the memory of replication source manager and replication sources. &lt;br/&gt;
A region server endpoint call from the hbck client to region server can be used to achieve this.&lt;/p&gt;

&lt;p&gt;Hbck can be configured with the following options:&lt;/p&gt;

&lt;p&gt;-softCheckReplicationWAL : Tries to open only the oldest WAL (the WAL currently read by replication source) from replication queue. If there is a position associated, it also seeks to that position and reads an entry from there&lt;br/&gt;
-hardCheckReplicationWAL:  Check all WAL paths from replication queues by reading them completely to make sure they are ok.&lt;br/&gt;
-fixMissingReplicationWAL: Remove the WAL&apos;s from replication queues which are not present on hdfs&lt;br/&gt;
-fixCorruptedReplicationWAL:  Remove the WAL&apos;s from replication queues which are corrupted (based on the findings from softCheck/hardCheck). Also the WAL&apos;s are moved to a quarantine dir&lt;br/&gt;
-rollAndFixCorruptedReplicationWAL - If the current WAL is corrupted, it is first rolled over and then deals with it in the same way as -fixCorruptedReplicationWAL option&lt;/p&gt;</description>
                <environment></environment>
        <key id="12745090">HBASE-12125</key>
            <summary>Add Hbck option to check and fix WAL&apos;s from replication queue</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="virag">Virag Kothari</assignee>
                                    <reporter username="virag">Virag Kothari</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Sep 2014 22:10:44 +0000</created>
                <updated>Sat, 5 Sep 2015 17:38:22 +0000</updated>
                                                                            <component>Replication</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="14153884" author="virag" created="Tue, 30 Sep 2014 22:25:24 +0000"  >&lt;p&gt;I have a 0.98 patch for this. Will put for review.&lt;/p&gt;</comment>
                            <comment id="14153936" author="apurtell" created="Tue, 30 Sep 2014 22:49:57 +0000"  >&lt;blockquote&gt;
&lt;p&gt;-fixCorruptedReplicationWAL: Remove the WAL&apos;s from replication queues which are corrupted (based on the findings from softCheck/hardCheck). Also the WAL&apos;s are moved to a quarantine dir&lt;br/&gt;
-rollAndFixCorruptedReplicationWAL - If the current WAL is corrupted, it is first rolled over and then deals with it in the same way as -fixCorruptedReplicationWAL option&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;When would we want fixCorruptedReplicationWAL instead of rollAndFixCorruptedReplicationWAL?&lt;/p&gt;</comment>
                            <comment id="14154441" author="virag" created="Wed, 1 Oct 2014 06:34:46 +0000"  >&lt;p&gt;A WAL roll on region server would be required only if the current WAL (WAL being written to) is corrupted. So fixCorruptedReplicationWAL can be useful if we know that the current WAL being written to is ok.&lt;/p&gt;</comment>
                            <comment id="14731652" author="mantonov" created="Sat, 5 Sep 2015 00:19:41 +0000"  >&lt;blockquote&gt;&lt;p&gt;I have a 0.98 patch for this. Will put for review.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Apparently the code base have moved forward since then, but curious if this patch still would be relevant and useful here?&lt;/p&gt;</comment>
                            <comment id="14732053" author="apurtell" created="Sat, 5 Sep 2015 17:38:22 +0000"  >&lt;p&gt;For 0.98 you mean?&lt;br/&gt;
If so, yes that branch is accepting improvements. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12745091">HBASE-12126</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 30 Sep 2014 22:49:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 14 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i20npj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>