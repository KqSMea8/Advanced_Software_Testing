<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:08:33 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-3238/HBASE-3238.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-3238] HBase needs to have the CREATE permission on the parent of its ZooKeeper parent znode</title>
                <link>https://issues.apache.org/jira/browse/HBASE-3238</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Upon startup, HBase attempts to create its zookeeper.parent.znode in ZooKeeper, it does so using ZKUtil.createAndFailSilent which as its name seems to imply will fail silent if the znode exists. But if HBase does not have the CREATE permission on its zookeeper.parent.znode parent znode then the create attempt will fail with a org.apache.zookeeper.KeeperException$NoAuthException and will terminate the process.&lt;/p&gt;

&lt;p&gt;In a production environment where ZooKeeper has a managed namespace it is not possible to give HBase CREATE permission on the parent of its parent znode.&lt;/p&gt;

&lt;p&gt;ZKUtil.createAndFailSilent should therefore be modified to check that the znode exists using ZooKeeper.exist prior to attempting to create it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12480107">HBASE-3238</key>
            <summary>HBase needs to have the CREATE permission on the parent of its ZooKeeper parent znode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="posix4e">Alex Newman</assignee>
                                    <reporter username="herberts">Mathias Herberts</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Nov 2010 12:48:49 +0000</created>
                <updated>Fri, 20 Nov 2015 12:43:58 +0000</updated>
                            <resolved>Sat, 2 Apr 2011 14:41:58 +0000</resolved>
                                    <version>0.90.0</version>
                                    <fixVersion>0.92.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13011015" author="posix4e" created="Thu, 24 Mar 2011 23:44:10 +0000"  >&lt;p&gt;So I wrote a test to simulate this, although the suggested fix doesn&apos;t seem to work unless I am misunderstanding it. I&apos;ll upload a patch and maybe you can tell me what I&apos;m doing wrong.&lt;/p&gt;
</comment>
                            <comment id="13011025" author="posix4e" created="Fri, 25 Mar 2011 00:02:05 +0000"  >&lt;p&gt;Ok I think I got what he was saying. Two things. Mathias should confirm I fixed what he saw broken. Also someone who is a commiter should decide if this is something we really want, it limits hbase to always write under /hbase&lt;/p&gt;</comment>
                            <comment id="13011090" author="stack" created="Fri, 25 Mar 2011 04:10:52 +0000"  >&lt;p&gt;Hey honey.  Is there a create that works even if node already exists?&lt;/p&gt;

&lt;p&gt;What is this &apos;+   * @param str String to amend.   -1&apos;&lt;/p&gt;

&lt;p&gt;When you say above that it limits to write under /hbase, you don&apos;t mean exactly /hbase, you mean whatever is configured as cluster home in zk?&lt;/p&gt;</comment>
                            <comment id="13011297" author="posix4e" created="Fri, 25 Mar 2011 17:29:00 +0000"  >&lt;p&gt;&amp;gt; Is there a create that works even if node already exists?&lt;br/&gt;
I talked to henry today, we either need to catch it(Which will catch a larger set of acl exceptions), or check exists first (which may have performance implications). Alternatively we can make our API more fine grained and replace all the create /home.dir calls with this new fine grained call. He suggested we catch this exception. Also do we think it should be createOrFailSilent not and fail silent?&lt;/p&gt;

&lt;p&gt;&amp;gt; What is this &apos;+ * @param str String to amend. -1&apos;&lt;br/&gt;
Me being retarded, it&apos;s now removed.&lt;/p&gt;

&lt;p&gt;&amp;gt; When you say above that it limits to write under /hbase, you don&apos;t mean exactly /hbase, you mean whatever is configured as cluster home in zk?&lt;br/&gt;
Correct I clarified the comment.&lt;/p&gt;
</comment>
                            <comment id="13011398" author="posix4e" created="Fri, 25 Mar 2011 20:05:09 +0000"  >&lt;p&gt;I just realized what about we just catch the noauth exception, and throw another error if the node doesn&apos;t exist. This would save us an exist in the normal case?&lt;/p&gt;</comment>
                            <comment id="13011420" author="herberts" created="Fri, 25 Mar 2011 21:04:58 +0000"  >&lt;p&gt;Catching the noauth would do the trick I guess, but what gain compared with the exist call when the znode has already been created?&lt;/p&gt;</comment>
                            <comment id="13011436" author="posix4e" created="Fri, 25 Mar 2011 21:38:10 +0000"  >&lt;p&gt;I think the idea is to only call exist if we need to.&lt;/p&gt;</comment>
                            <comment id="13012155" author="posix4e" created="Mon, 28 Mar 2011 17:50:07 +0000"  >&lt;p&gt;This one only checks for existence in the exception case.&lt;/p&gt;</comment>
                            <comment id="13014747" author="stack" created="Fri, 1 Apr 2011 17:02:25 +0000"  >&lt;p&gt;+1 on patch.  Mathias, what do you think?&lt;/p&gt;</comment>
                            <comment id="13014966" author="herberts" created="Sat, 2 Apr 2011 08:56:11 +0000"  >&lt;p&gt;LGTM, maybe the comment &apos;// If we failed to create the file rethrow.&apos; could be changed to &apos;// If we failed to create the file and it does not already exist, rethrow.&apos;&lt;/p&gt;</comment>
                            <comment id="13015034" author="stack" created="Sat, 2 Apr 2011 14:41:58 +0000"  >&lt;p&gt;Applied to TRUNK.  Thanks for the patch Alex (and for the review Mathias &amp;#8211; I added in your suggested comment change on commit).&lt;/p&gt;</comment>
                            <comment id="13016231" author="hudson" created="Wed, 6 Apr 2011 03:51:07 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #1831 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/HBase-TRUNK/1831/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/HBase-TRUNK/1831/&lt;/a&gt;)&lt;/p&gt;
</comment>
                            <comment id="15017671" author="lars_francke" created="Fri, 20 Nov 2015 12:43:58 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12474568" name="1" size="3915" author="posix4e" created="Thu, 24 Mar 2011 23:44:46 +0000"/>
                            <attachment id="12474632" name="HBASE-3238-v2.patch" size="3078" author="posix4e" created="Fri, 25 Mar 2011 17:20:58 +0000"/>
                            <attachment id="12474795" name="HBASE-3238-v3.patch" size="3151" author="posix4e" created="Mon, 28 Mar 2011 17:50:07 +0000"/>
                            <attachment id="12474571" name="HBASE-3238.patch" size="4052" author="posix4e" created="Fri, 25 Mar 2011 00:01:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 24 Mar 2011 23:44:10 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26732</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hld3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>100723</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>