<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:41:16 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6945/HBASE-6945.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6945] Compilation errors when using non-Sun JDKs to build HBase-0.94</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6945</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;When using IBM Java 7 to build HBase-0.94.1, the following comilation error is seen. &lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; -------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; COMPILATION ERROR : &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; -------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/hadoop/hbase-0.94/src/test/java/org/apache/hadoop/hbase/ResourceChecker.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;23,25&amp;#93;&lt;/span&gt; error: package com.sun.management does not exist&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/hadoop/hbase-0.94/src/test/java/org/apache/hadoop/hbase/ResourceChecker.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;46,25&amp;#93;&lt;/span&gt; error: cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt;   symbol:   class UnixOperatingSystemMXBean&lt;br/&gt;
  location: class ResourceAnalyzer&lt;br/&gt;
/home/hadoop/hbase-0.94/src/test/java/org/apache/hadoop/hbase/ResourceChecker.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;75,29&amp;#93;&lt;/span&gt; error: cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt;   symbol:   class UnixOperatingSystemMXBean&lt;br/&gt;
  location: class ResourceAnalyzer&lt;br/&gt;
/home/hadoop/hbase-0.94/src/test/java/org/apache/hadoop/hbase/ResourceChecker.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;76,23&amp;#93;&lt;/span&gt; error: cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; 4 errors &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; -------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; BUILD FAILURE&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt; I have a patch available which should work for all JDKs including Sun.&lt;br/&gt;
 I am in the process of testing this patch. Preliminary tests indicate the build is working fine with this patch. I will post this patch when I am done testing.&lt;/p&gt;</description>
                <environment>&lt;p&gt;RHEL 6.3, IBM Java 7 &lt;/p&gt;</environment>
        <key id="12610349">HBASE-6945</key>
            <summary>Compilation errors when using non-Sun JDKs to build HBase-0.94</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12615773">HBASE-7149</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kumarr">Kumar Ravi</assignee>
                                    <reporter username="kumarr">Kumar Ravi</reporter>
                        <labels>
                            <label>patch</label>
                    </labels>
                <created>Thu, 4 Oct 2012 16:20:52 +0000</created>
                <updated>Mon, 23 Sep 2013 18:30:32 +0000</updated>
                            <resolved>Thu, 4 Apr 2013 00:08:59 +0000</resolved>
                                    <version>0.94.6</version>
                    <version>0.95.0</version>
                                    <fixVersion>0.98.0</fixVersion>
                    <fixVersion>0.95.0</fixVersion>
                                    <component>build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>12</watches>
                                                                <comments>
                            <comment id="13469536" author="nkeywal" created="Thu, 4 Oct 2012 17:35:25 +0000"  >&lt;p&gt;Hi Kumar,&lt;/p&gt;

&lt;p&gt;Note that the implementation is slightly different on 0.96/trunk (but still relies on sun jvm). There are as well some optimizations linked to the sun jvm that makes it more interesting in the general case (see &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4012&quot; title=&quot;Further optimize byte comparison methods&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4012&quot;&gt;&lt;del&gt;HBASE-4012&lt;/del&gt;&lt;/a&gt;). &lt;br/&gt;
For this Jira it&apos;s mainly an helper function, so it&apos;s easier. Imho, it would be as well acceptable to simply deactivate the metric if we can&apos;t get it easily. But it would make the ibm build less powerful than the sun/oracle one.&lt;/p&gt;</comment>
                            <comment id="13469548" author="kumarr" created="Thu, 4 Oct 2012 17:49:47 +0000"  >&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt; I am pretty close to having a patch done - Can you pl. assign this to me? &lt;br/&gt;
(kumarr)&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Kumar &lt;/p&gt;

&lt;p&gt;Kumar Ravi&lt;br/&gt;
IBM Linux Technology Center &lt;/p&gt;

&lt;p&gt;11501 Burnet Road,&lt;br/&gt;
Austin, TX 78758&lt;/p&gt;

&lt;p&gt;Tel.: (512)286-8179&lt;/p&gt;



&lt;p&gt;From:&lt;br/&gt;
&quot;nkeywal (JIRA)&quot; &amp;lt;jira@apache.org&amp;gt;&lt;br/&gt;
To:&lt;br/&gt;
Kumar Ravi/Austin/IBM@IBMUS, &lt;br/&gt;
Date:&lt;br/&gt;
10/04/2012 12:30 PM&lt;br/&gt;
Subject:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Assigned&amp;#93;&lt;/span&gt; (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6945&quot; title=&quot;Compilation errors when using non-Sun JDKs to build HBase-0.94&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6945&quot;&gt;&lt;del&gt;HBASE-6945&lt;/del&gt;&lt;/a&gt;) Compilation errors when using non-Sun JDKs &lt;br/&gt;
to build HBase-0.94&lt;/p&gt;



&lt;p&gt;     [ &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6945?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-6945?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel&lt;/a&gt; &lt;br/&gt;
]&lt;/p&gt;

&lt;p&gt;nkeywal reassigned &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6945&quot; title=&quot;Compilation errors when using non-Sun JDKs to build HBase-0.94&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6945&quot;&gt;&lt;del&gt;HBASE-6945&lt;/del&gt;&lt;/a&gt;:&lt;br/&gt;
------------------------------&lt;/p&gt;

&lt;p&gt;    Assignee: nkeywal&lt;/p&gt;

&lt;p&gt;error is seen. &lt;br/&gt;
/home/hadoop/hbase-0.94/src/test/java/org/apache/hadoop/hbase/ResourceChecker.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;23,25&amp;#93;&lt;/span&gt; &lt;br/&gt;
error: package com.sun.management does not exist&lt;br/&gt;
/home/hadoop/hbase-0.94/src/test/java/org/apache/hadoop/hbase/ResourceChecker.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;46,25&amp;#93;&lt;/span&gt; &lt;br/&gt;
error: cannot find symbol&lt;br/&gt;
/home/hadoop/hbase-0.94/src/test/java/org/apache/hadoop/hbase/ResourceChecker.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;75,29&amp;#93;&lt;/span&gt; &lt;br/&gt;
error: cannot find symbol&lt;br/&gt;
/home/hadoop/hbase-0.94/src/test/java/org/apache/hadoop/hbase/ResourceChecker.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;76,23&amp;#93;&lt;/span&gt; &lt;br/&gt;
error: cannot find symbol&lt;br/&gt;
------------------------------------------------------------------------&lt;br/&gt;
------------------------------------------------------------------------&lt;br/&gt;
the build is working fine with this patch. I will post this patch when I &lt;br/&gt;
am done testing.&lt;/p&gt;

&lt;p&gt;&amp;#8211;&lt;br/&gt;
This message is automatically generated by JIRA.&lt;br/&gt;
If you think it was sent incorrectly, please contact your JIRA &lt;br/&gt;
administrators&lt;br/&gt;
For more information on JIRA, see: &lt;a href=&quot;http://www.atlassian.com/software/jira&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.atlassian.com/software/jira&lt;/a&gt;&lt;/p&gt;

</comment>
                            <comment id="13469554" author="nkeywal" created="Thu, 4 Oct 2012 17:56:56 +0000"  >&lt;p&gt;For whatever technical reason, I can&apos;t. Likely another committer will be able to do it.&lt;/p&gt;</comment>
                            <comment id="13469555" author="jxiang" created="Thu, 4 Oct 2012 17:57:35 +0000"  >&lt;p&gt;Done.&lt;/p&gt;</comment>
                            <comment id="13472741" author="kumarr" created="Tue, 9 Oct 2012 20:55:20 +0000"  >&lt;p&gt;I have created another JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6965&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-6965&lt;/a&gt; to be used along with the patch I plan to submit here.&lt;br/&gt;
This new class called OSMXBean is used by the patch here.&lt;/p&gt;</comment>
                            <comment id="13472743" author="kumarr" created="Tue, 9 Oct 2012 20:56:25 +0000"  >&lt;p&gt;&amp;#8212; curr_hbase/src/test/java/org/apache/hadoop/hbase/ResourceChecker.java	2012-10-04 12:59:14.000000000 -0400&lt;br/&gt;
+++ new_hbase/src/test/java/org/apache/hadoop/hbase/ResourceChecker.java	2012-10-08 16:32:00.000000000 -0400&lt;br/&gt;
@@ -20,13 +20,11 @@&lt;/p&gt;

&lt;p&gt; package org.apache.hadoop.hbase;&lt;/p&gt;

&lt;p&gt;-import com.sun.management.UnixOperatingSystemMXBean;&lt;br/&gt;
+import org.apache.hadoop.hbase.util.OSMXBean;&lt;br/&gt;
 import org.apache.commons.logging.Log;&lt;br/&gt;
 import org.apache.commons.logging.LogFactory;&lt;br/&gt;
 import org.apache.hadoop.hbase.client.HConnectionTestingUtility;&lt;/p&gt;

&lt;p&gt;-import java.lang.management.ManagementFactory;&lt;br/&gt;
-import java.lang.management.OperatingSystemMXBean;&lt;br/&gt;
 import java.util.*;&lt;/p&gt;


&lt;p&gt;@@ -42,42 +40,33 @@&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;On unix, we know how to get the number of open file descriptor&lt;br/&gt;
    */&lt;br/&gt;
   private static class ResourceAnalyzer {&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private static final OperatingSystemMXBean osStats;&lt;/li&gt;
	&lt;li&gt;private static final UnixOperatingSystemMXBean unixOsStats;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     public long getThreadsCount() &lt;/p&gt;
{
       return Thread.getAllStackTraces().size();
     }

&lt;p&gt;     public long getOpenFileDescriptorCount() {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (unixOsStats == null) 
{
-        return 0;
-      } else {
-        return unixOsStats.getOpenFileDescriptorCount();
-      }&lt;br/&gt;
+         OSMXBean osMbean = new OSMXBean();&lt;br/&gt;
+         if (osMbean != null &amp;amp;&amp;amp; osMbean.getUnix() == true) {
+	     return osMbean.getOpenFileDescriptorCount();
+         }&lt;br/&gt;
+	 else&lt;br/&gt;
+	     return 0;&lt;br/&gt;
     }&lt;br/&gt;
 &lt;br/&gt;
     public long getMaxFileDescriptorCount() {&lt;br/&gt;
-      if (unixOsStats == null) {
-        return 0;
-      }
&lt;p&gt; else {&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;return unixOsStats.getMaxFileDescriptorCount();&lt;br/&gt;
+      OSMXBean osMbean = new OSMXBean();&lt;br/&gt;
+      if (osMbean != null &amp;amp;&amp;amp; osMbean.getUnix() == true) 
{
+           return osMbean.getMaxFileDescriptorCount();
       }
&lt;p&gt;+      else&lt;br/&gt;
+	   return 0;&lt;br/&gt;
     }&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     public long getConnectionCount()&lt;/p&gt;
{
       return HConnectionTestingUtility.getConnectionCount();
     }

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;static {&lt;/li&gt;
	&lt;li&gt;osStats =&lt;/li&gt;
	&lt;li&gt;ManagementFactory.getOperatingSystemMXBean();&lt;/li&gt;
	&lt;li&gt;if (osStats instanceof UnixOperatingSystemMXBean) 
{
-        unixOsStats = (UnixOperatingSystemMXBean) osStats;
-      }
&lt;p&gt; else &lt;/p&gt;
{
-        unixOsStats = null;
-      }&lt;/li&gt;
	&lt;li&gt;}&lt;br/&gt;
   }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   private static final ResourceAnalyzer rc = new ResourceAnalyzer();&lt;/p&gt;</comment>
                            <comment id="13472746" author="yuzhihong@gmail.com" created="Tue, 9 Oct 2012 21:02:28 +0000"  >&lt;p&gt;Hadoop QA only runs patch through trunk test suite.&lt;br/&gt;
Can you produce a patch file for hbase-common/src/test/java/org/apache/hadoop/hbase/ResourceChecker.java and attach the patch to this JIRA ?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="13472762" author="kumarr" created="Tue, 9 Oct 2012 21:23:59 +0000"  >&lt;p&gt;A build with the above patch along with the new class in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6965&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-6965&lt;/a&gt; were &lt;br/&gt;
built and tested on Revision 1396305: /hbase/branches/0.94 with IBM JDK 7, openJDK 6 as well as Oracle JDK 6.&lt;/p&gt;

&lt;p&gt;Builds were successful and the junit tests (runDevTests) ran with all three JDKs without any errors or failures.&lt;/p&gt;</comment>
                            <comment id="13472764" author="kumarr" created="Tue, 9 Oct 2012 21:24:49 +0000"  >&lt;p&gt;Ted, Thanks for your comment. Attaching a patch file..&lt;/p&gt;</comment>
                            <comment id="13472887" author="stack" created="Wed, 10 Oct 2012 00:20:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nkeywal&quot; class=&quot;user-hover&quot; rel=&quot;nkeywal&quot;&gt;Nicolas Liochon&lt;/a&gt; You should be able to admin now (I added you as administrator)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kumarr&quot; class=&quot;user-hover&quot; rel=&quot;kumarr&quot;&gt;Kumar Ravi&lt;/a&gt; Is the OSMXBean missing from your patch?  You forgot to svn/git add it?&lt;/p&gt;</comment>
                            <comment id="13473363" author="kumarr" created="Wed, 10 Oct 2012 16:58:03 +0000"  >&lt;p&gt;stack and Ted, Thanks for your comments and feedback. &lt;/p&gt;

&lt;p&gt;1. The version I found this issue impacting us was in Hbase-0.94.1. I just started looking at the trunk. Looks like I need to create a patch for the subclasses of ResourceChecker.ResourceAnalyzer(). I&apos;ll get a patch for trunk shortly after I understand this implementation, build and test it out. I have verified this patch applies and tests without any issues on 0.94.2RC3. If there is another version I need to try this on, please let me know.&lt;/p&gt;

&lt;p&gt;2. stack, Re. your question about OSMXBean, I have opened another JIRA - &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6965&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-6965&lt;/a&gt;. I viewed the OSMXBean class as a related but separate issue since it could be used elsewhere.&lt;/p&gt;

&lt;p&gt;3. I have a questions being new to this process:&lt;/p&gt;

&lt;p&gt;  -How can I get this patch submitted for review/approval and eventually checked into both the Hbase-0.94 and trunk trees? In addition to the patch I attached above do I need to checkin my changes using svn? Although I am confident this patch should apply smoothly to HBase-0.94, I want to make sure I am not breaking the process.&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="13473839" author="stack" created="Thu, 11 Oct 2012 04:53:59 +0000"  >&lt;p&gt;On 1., patches go into trunk first.&lt;/p&gt;

&lt;p&gt;On 2., sounds like getting &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6965&quot; title=&quot;Generic MXBean Utility class to support all JDK vendors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6965&quot;&gt;&lt;del&gt;HBASE-6965&lt;/del&gt;&lt;/a&gt; is a prerequisite for this patch.&lt;/p&gt;

&lt;p&gt;On 3., you just need to attach patch to the issue.  Checkout this section in the reference guide.  If it does not answer your questions, come back and ask us more questions: &lt;a href=&quot;http://hbase.apache.org/book.html#developer&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hbase.apache.org/book.html#developer&lt;/a&gt;  Thanks for trying to contrib.&lt;/p&gt;</comment>
                            <comment id="13475314" author="kumarr" created="Fri, 12 Oct 2012 20:18:55 +0000"  >&lt;p&gt;Patch for ResourceCheckerJunitListener.java for trunk&lt;/p&gt;</comment>
                            <comment id="13475322" author="zhihyu@ebaysf.com" created="Fri, 12 Oct 2012 20:31:33 +0000"  >&lt;p&gt;Looks like the patch here depends on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6965&quot; title=&quot;Generic MXBean Utility class to support all JDK vendors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6965&quot;&gt;&lt;del&gt;HBASE-6965&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-      }
+        OSMXBean osMbean = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; OSMXBean();
+        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (osMbean != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; osMbean.getUnix() == &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;) {
+           &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) osMbean.getOpenFileDescriptorCount();
+        }
+        &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
+           &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; 0;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The new code should be left shifted by 2 spaces.&lt;br/&gt;
nit: keyword else is not needed.&lt;/p&gt;</comment>
                            <comment id="13475332" author="kumarr" created="Fri, 12 Oct 2012 20:37:19 +0000"  >&lt;p&gt;Thanks Ted! I&apos;ll fix these. &lt;/p&gt;

&lt;p&gt;Question: How do I tie this issue to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6965&quot; title=&quot;Generic MXBean Utility class to support all JDK vendors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6965&quot;&gt;&lt;del&gt;HBASE-6965&lt;/del&gt;&lt;/a&gt;? I have submitted a patch to that JIRA too.&lt;/p&gt;</comment>
                            <comment id="13475341" author="zhihyu@ebaysf.com" created="Fri, 12 Oct 2012 20:44:25 +0000"  >&lt;p&gt;Click &apos;More Actions&apos; menu and select Link to associate this JIRA with &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6965&quot; title=&quot;Generic MXBean Utility class to support all JDK vendors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6965&quot;&gt;&lt;del&gt;HBASE-6965&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
You can temporarily click &apos;Cancel Patch&apos; and wait for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6965&quot; title=&quot;Generic MXBean Utility class to support all JDK vendors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6965&quot;&gt;&lt;del&gt;HBASE-6965&lt;/del&gt;&lt;/a&gt; to be integrated.&lt;/p&gt;</comment>
                            <comment id="13475364" author="kumarr" created="Fri, 12 Oct 2012 21:21:50 +0000"  >&lt;p&gt;Reworked patch with changes suggested by Ted Yu 10/12/12 15:31. Will submit for consideration after dependent issue &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6965&quot; title=&quot;Generic MXBean Utility class to support all JDK vendors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6965&quot;&gt;&lt;del&gt;HBASE-6965&lt;/del&gt;&lt;/a&gt; is integrated&lt;/p&gt;</comment>
                            <comment id="13479159" author="hadoopqa" created="Thu, 18 Oct 2012 17:22:46 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12549711/ResourceChecker-0.94.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12549711/ResourceChecker-0.94.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 2 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3077//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3077//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13479163" author="yuzhihong@gmail.com" created="Thu, 18 Oct 2012 17:26:08 +0000"  >&lt;p&gt;@Kumar:&lt;br/&gt;
Hadoop QA is not smart enough to pick the trunk patch among the two patches you just uploaded.&lt;br/&gt;
You can upload trunk patch again for QA to run test suite.&lt;/p&gt;</comment>
                            <comment id="13479460" author="hadoopqa" created="Thu, 18 Oct 2012 23:07:57 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12549710/ResourceCheckerJUnitListener_HBASE_6945-trunk.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12549710/ResourceCheckerJUnitListener_HBASE_6945-trunk.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 2 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 82 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 4 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.security.access.TestZKPermissionsWatcher&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3084//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3084//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3084//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3084//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3084//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3084//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3084//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3084//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3084//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3084//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3084//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3084//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3084//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3084//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13479469" author="stack" created="Thu, 18 Oct 2012 23:19:17 +0000"  >&lt;p&gt;Does this patch make a class with no content?  I&apos;m looking at this section:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
   &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; class OSResourceAnalyzer &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; ResourceChecker.ResourceAnalyzer {
-    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; OperatingSystemMXBean osStats;
-    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; UnixOperatingSystemMXBean unixOsStats;
-
-    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; {
-      osStats = ManagementFactory.getOperatingSystemMXBean();
-      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (osStats &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; UnixOperatingSystemMXBean) {
-        unixOsStats = (UnixOperatingSystemMXBean) osStats;
-      } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
-        unixOsStats = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
-      }
-    }
   }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We seem to be removing the body of the class.&lt;/p&gt;

&lt;p&gt;Should this class, OSMXBean, be renamed OS since it answers questions about the OS in a way that insulates us against differences in JVM. Maybe a better name would be JVM.  Then you&apos;d ask it for an implementation of UnixOperatingSystemMXBean.  It would take care of returning the IBM or Oracle implementation.  They both implement the UnixOperatingSystemMXBean Interface?&lt;/p&gt;</comment>
                            <comment id="13479595" author="stack" created="Fri, 19 Oct 2012 04:00:40 +0000"  >&lt;p&gt;Looking more, yeah, class should be called JVM.  It&apos;d be a class that we&apos;d hide JVM particular references &amp;#8211; i.e. any oracle class references &amp;#8211; inside as well as any reimplementations done to provide equivalent functionality when run on other JVMs.&lt;/p&gt;</comment>
                            <comment id="13481342" author="kumarr" created="Mon, 22 Oct 2012 12:46:11 +0000"  >
&lt;p&gt;Following is a comment I added in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6965&quot; title=&quot;Generic MXBean Utility class to support all JDK vendors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6965&quot;&gt;&lt;del&gt;HBASE-6965&lt;/del&gt;&lt;/a&gt;. Although related, I believe these are two separate issues. &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6965&quot; title=&quot;Generic MXBean Utility class to support all JDK vendors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6965&quot;&gt;&lt;del&gt;HBASE-6965&lt;/del&gt;&lt;/a&gt; introduces a new Utility Bean class. This issue uses the new Bean class in a Junit Test case.&lt;/p&gt;

&lt;p&gt;Please let me know if you have further questions.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;br/&gt;
------------------&lt;br/&gt;
&amp;gt;What JVMs and OS&apos;s did you test on out of interest? How many different vendor and OS strings did you test your patch against?&lt;/p&gt;

&lt;p&gt;This was tested on Sun (Oracle) JDK 6 (1.6.0_34), OpenJDK 6 and IBM Java 7. All tested on RHEL 6.3.&lt;/p&gt;

&lt;p&gt;&amp;gt;It seems a big hacky looking for &apos;IBM&apos; in vendor string figuring if an IBM JVM or not. Are you sure it&apos;s always upper case. Any other property &amp;gt;you could check to be sure it is the JVM you think. Does IBM only make a linux JDK?&lt;/p&gt;

&lt;p&gt;We borrowed this idea from the code here in hadoop: &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/common/tags/release-1.0.3/src/core/org/apache/hadoop/security/UserGroupInformation.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/common/tags/release-1.0.3/src/core/org/apache/hadoop/security/UserGroupInformation.java&lt;/a&gt;. See methods getOSLoginModuleName() - Line 262 and getOsPrincipalClass() - Line 276.&lt;/p&gt;</comment>
                            <comment id="13481657" author="stack" created="Mon, 22 Oct 2012 19:08:35 +0000"  >&lt;p&gt;@Kumar I asked other questions in the above.  Mind addressing them?  Thanks.&lt;/p&gt;</comment>
                            <comment id="13481754" author="kumarr" created="Mon, 22 Oct 2012 20:29:48 +0000"  >&lt;p&gt;@stack, I was hoping we could address concerns in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6965&quot; title=&quot;Generic MXBean Utility class to support all JDK vendors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6965&quot;&gt;&lt;del&gt;HBASE-6965&lt;/del&gt;&lt;/a&gt;, since this JIRA was riding on that.&lt;/p&gt;

&lt;p&gt;Here are my responses to your questions for this JIRA:&lt;/p&gt;

&lt;p&gt;&amp;gt; We seem to be removing the body of the class.&lt;br/&gt;
 The functionality of this class is already there in the OSMXBean.  If this is going to be an issue, we need to discuss the best approach about how to reorganize the classes. Most of the APIs and methods in the above abstract classes access APIs and methods not available in some JVMs.&lt;/p&gt;

&lt;p&gt;&amp;gt;Should this class, OSMXBean, be renamed OS since it answers questions about the OS in a way that insulates us against differences in JVM. &lt;/p&gt;

&lt;p&gt; Do you mean OSBean instead of OSMXBean? I am open to renaming the class to  At this point, OSMXBean has been committed to trunk though. If you could let me know how to back out the patch now, I can do that. I would like to make sure we are in concurrence on the overall class and the methods.&lt;/p&gt;

&lt;p&gt;&amp;gt;Maybe a better name would be JVM. Then you&apos;d ask it for an implementation of UnixOperatingSystemMXBean. It would take care of returning the &amp;gt;IBM or Oracle implementation. They both implement the UnixOperatingSystemMXBean Interface?&lt;/p&gt;

&lt;p&gt; I am not sure I follow. IBM Java will not be able to implement the UnixOperatingSystemMXBean interface as the IBM Java SDK does not contain the com.sun.management package. OSMXBean acts like a wrapper and invokes the UnixOperatingSystemMXBean if the JDK is Sun and for IBM provides the equivalent functionality. &lt;/p&gt;</comment>
                            <comment id="13482959" author="lhofhansl" created="Wed, 24 Oct 2012 04:54:01 +0000"  >&lt;p&gt;I am moving this to 0.94.4.&lt;br/&gt;
Kumar, how important is this feature for you in 0.94? Can move it back if you like.&lt;br/&gt;
Should definitely go into 0.96 methinks.&lt;/p&gt;</comment>
                            <comment id="13484432" author="kumarr" created="Thu, 25 Oct 2012 19:55:36 +0000"  >&lt;p&gt;Thanks Lars, It would really be good to have this for 0.94. Without this patch, we cannot build HBASE-0.94 on IBM JDKs as the com.sun.management package is not available on the IBM JDK.&lt;/p&gt;</comment>
                            <comment id="13484438" author="kumarr" created="Thu, 25 Oct 2012 19:57:46 +0000"  >&lt;p&gt;Stack, Hope my last comment addressed your questions and concerns. If you have further questions, please let me know. &lt;/p&gt;

&lt;p&gt;We would really like to be in a position to build and support HBase-0.94 built and run with IBM JDK, and we believe this solution supports multiple JDKs and JVMs.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="13485171" author="stack" created="Fri, 26 Oct 2012 20:17:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kumarr&quot; class=&quot;user-hover&quot; rel=&quot;kumarr&quot;&gt;Kumar Ravi&lt;/a&gt; You seem to be making a method with an empty body with this patch.  Is that intentional?  I also commented over in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6965&quot; title=&quot;Generic MXBean Utility class to support all JDK vendors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6965&quot;&gt;&lt;del&gt;HBASE-6965&lt;/del&gt;&lt;/a&gt;.  &lt;/p&gt;</comment>
                            <comment id="13487050" author="kumarr" created="Tue, 30 Oct 2012 17:45:04 +0000"  >&lt;p&gt;stack, I see your point about leaving an empty method. As I commented earlier, the functionality of this class is already there in the OSMXBean (and will be there in the new JVMBean&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/help_16.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; class). &lt;/p&gt;

&lt;p&gt;The issue that one runs into when using the current calls in the abstract static class OSResourceAnalyzer, is that UnixOperatingSystemMXBean is not available in some JVMs like IBM which is what necessitated the need for the OSMXBean class. These lines are basically the body of the method.&lt;/p&gt;

&lt;p&gt; I wanted to avoid messing around with the structure of the ResourceCheckerJunitListener class, as it would change a lot of things. &lt;br/&gt;
If something needs to be included in the method, I can reinstate the line &lt;br/&gt;
osStats = ManagementFactory.getOperatingSystemMXBean();, and add a new constructor to OSMXBean.&lt;/p&gt;

&lt;p&gt;Lines that won&apos;t compile with IBM Java due to unavailability of UnixOperatingSystemMXBean:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (osStats instanceof UnixOperatingSystemMXBean) 
{
-        unixOsStats = (UnixOperatingSystemMXBean) osStats;
-      }
&lt;p&gt; else {&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;unixOsStats = null;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13487530" author="stack" created="Wed, 31 Oct 2012 05:06:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kumarr&quot; class=&quot;user-hover&quot; rel=&quot;kumarr&quot;&gt;Kumar Ravi&lt;/a&gt; You seem to be missing the point of my review.  I understand why you would want to make a patch like this.  No need to keep reiterating the why.  It makes sense.   My comment is that your patch would seem to make a class w/ no content: i.e. OSResourceAnalyzer.  Why would we ever want a class w/ no content in our code base?  Just remove it?&lt;/p&gt;</comment>
                            <comment id="13487840" author="kumarr" created="Wed, 31 Oct 2012 15:11:41 +0000"  >&lt;p&gt;stack, Thanks for the clarification. ok - I&apos;ll remove the OSResourceAnalyzer class and have it&apos;s subclasses become subclasses of OSResourceAnalyzer&apos;s superclass which seems to be  ResourceChecker.ResourceAnalyzer. I&apos;ll get these changes in a few days.&lt;/p&gt;</comment>
                            <comment id="13495702" author="kumarr" created="Mon, 12 Nov 2012 22:33:19 +0000"  >&lt;p&gt;Patch attached which includes use of JVM class instead of OSMXBean&lt;/p&gt;</comment>
                            <comment id="13495935" author="stack" created="Tue, 13 Nov 2012 04:26:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kumarr&quot; class=&quot;user-hover&quot; rel=&quot;kumarr&quot;&gt;Kumar Ravi&lt;/a&gt; Would suggest you include your new JVM class in this patch (and remove the old MXBean class in this patch too).  Just close &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7150&quot; title=&quot;Utility class to determine File Descriptor counts depending on the JVM Vendor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7150&quot;&gt;HBASE-7150&lt;/a&gt; as won&apos;t fix and do your fix up all in here?&lt;/p&gt;</comment>
                            <comment id="13496672" author="kumarr" created="Tue, 13 Nov 2012 23:38:46 +0000"  >&lt;p&gt;As per stack&apos;s recommendation, merging &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7150&quot; title=&quot;Utility class to determine File Descriptor counts depending on the JVM Vendor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7150&quot;&gt;HBASE-7150&lt;/a&gt; patch (New class JVM.java) with patch for ResourceCheckerJUnitListener (This JIRA). &lt;br/&gt;
 Note that JVM.java cannot use hadoop&apos;s ShellCommandExecutor as intended due to differences in IBM JDK&apos;s implementation of the Long class.&lt;/p&gt;</comment>
                            <comment id="13496675" author="kumarr" created="Tue, 13 Nov 2012 23:44:11 +0000"  >&lt;p&gt;A request to the person who will be committing this patch - After review when this patch is committed, please delete the file (svn rm?)&lt;/p&gt;

&lt;p&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/util/OSMXBean.java that was included with &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6965&quot; title=&quot;Generic MXBean Utility class to support all JDK vendors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6965&quot;&gt;&lt;del&gt;HBASE-6965&lt;/del&gt;&lt;/a&gt; as the file JVM.java included in the patch above replaces that file.&lt;/p&gt;</comment>
                            <comment id="13496947" author="stack" created="Wed, 14 Nov 2012 08:43:41 +0000"  >&lt;p&gt;Patch I applied to TRUNK.  Thanks for the fixup Kumar.  Will leave open till applied to 0.94 too.&lt;/p&gt;</comment>
                            <comment id="13496948" author="stack" created="Wed, 14 Nov 2012 08:45:08 +0000"  >&lt;p&gt;Waiting to be applied to 0.94.4&lt;/p&gt;</comment>
                            <comment id="13497032" author="hudson" created="Wed, 14 Nov 2012 11:15:09 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3538 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3538/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3538/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6945&quot; title=&quot;Compilation errors when using non-Sun JDKs to build HBase-0.94&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6945&quot;&gt;&lt;del&gt;HBASE-6945&lt;/del&gt;&lt;/a&gt; Compilation errors when using non-Sun JDKs to build HBase-0.94 (Revision 1409115)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-common/src/main/java/org/apache/hadoop/hbase/util/JVM.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-common/src/main/java/org/apache/hadoop/hbase/util/OSMXBean.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-common/src/test/java/org/apache/hadoop/hbase/ResourceCheckerJUnitListener.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13497039" author="hudson" created="Wed, 14 Nov 2012 11:57:35 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #260 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/260/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/260/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6945&quot; title=&quot;Compilation errors when using non-Sun JDKs to build HBase-0.94&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6945&quot;&gt;&lt;del&gt;HBASE-6945&lt;/del&gt;&lt;/a&gt; Compilation errors when using non-Sun JDKs to build HBase-0.94 (Revision 1409115)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-common/src/main/java/org/apache/hadoop/hbase/util/JVM.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-common/src/main/java/org/apache/hadoop/hbase/util/OSMXBean.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-common/src/test/java/org/apache/hadoop/hbase/ResourceCheckerJUnitListener.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13500697" author="kumarr" created="Mon, 19 Nov 2012 22:30:32 +0000"  >&lt;p&gt;This is a patch for 0.94.x release. This patch applies with 0.94.3RC0 release, and all Junit tests pass.&lt;/p&gt;</comment>
                            <comment id="13535712" author="lhofhansl" created="Wed, 19 Dec 2012 06:31:07 +0000"  >&lt;p&gt;Some minor comments:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Do we need to create the JVM object every time, or can be cache it statically like we did with osStats?&lt;/li&gt;
	&lt;li&gt;After the new JVM() the null check is unnecessary.&lt;/li&gt;
	&lt;li&gt;in runUnixMXBeanMethod, do can we cache the outcome of classForName (even when that is null), so that we do not have to make this call each time?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Maybe these are not problems, because this is not a hot code path?&lt;/p&gt;</comment>
                            <comment id="13542800" author="lhofhansl" created="Thu, 3 Jan 2013 08:23:04 +0000"  >&lt;p&gt;Let&apos;s finish this... &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kumarr&quot; class=&quot;user-hover&quot; rel=&quot;kumarr&quot;&gt;Kumar Ravi&lt;/a&gt;, are you still working on this? Sorry we dragged this out for so long.&lt;/p&gt;</comment>
                            <comment id="13543099" author="kumarr" created="Thu, 3 Jan 2013 17:25:53 +0000"  >&lt;p&gt;Lars, Sorry I was out for a few days, and didn&apos;t see you comment. I have some questions for you:&lt;/p&gt;

&lt;p&gt;1. To confirm my understanding, it looks like you are proposing making JVM a static class? I need to try this out.&lt;br/&gt;
2. I just added the null check to make sure we didn&apos;t end up with an exception.&lt;br/&gt;
3. I think this is the line you are referring to: classRef = Class.forName(&quot;com.sun.management.UnixOperatingSystemMXBean&quot;);&lt;br/&gt;
   Do you want this to be static?&lt;/p&gt;

&lt;p&gt; The reason I had taken the approach of not making these static was since these classes were not on the main path and have been used only by one testcase. If you think it makes sense to go the static route, we can try that. But it&apos;ll take me some time to do that.&lt;/p&gt;</comment>
                            <comment id="13543214" author="lhofhansl" created="Thu, 3 Jan 2013 19:28:25 +0000"  >&lt;p&gt;Makes sense. Now looking further, assuming that bash is available in the path is also problematic, although I do not see any way around this.&lt;/p&gt;</comment>
                            <comment id="13586757" author="lhofhansl" created="Tue, 26 Feb 2013 04:55:59 +0000"  >&lt;p&gt;Too much time spent in 0.94. Again, sorry &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kumarr&quot; class=&quot;user-hover&quot; rel=&quot;kumarr&quot;&gt;Kumar Ravi&lt;/a&gt;. We&apos;ll do this in 0.96.&lt;/p&gt;</comment>
                            <comment id="13621555" author="stack" created="Thu, 4 Apr 2013 00:08:59 +0000"  >&lt;p&gt;This was applied to 0.95/trunk.  Was left open for 0.94 but discussion ongoing.  Resolving.  Can open new issue to get it into 0.94.&lt;/p&gt;</comment>
                            <comment id="13775002" author="stack" created="Mon, 23 Sep 2013 18:30:32 +0000"  >&lt;p&gt;Marking closed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12635165">SOLR-4526</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12615785">HBASE-7150</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12611063">HBASE-6965</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12553473" name="6945-v2.txt" size="14779" author="stack" created="Wed, 14 Nov 2012 08:43:41 +0000"/>
                            <attachment id="12553406" name="HBASE-6945.patch" size="8466" author="kumarr" created="Tue, 13 Nov 2012 23:38:46 +0000"/>
                            <attachment id="12554247" name="HBASE_0.94.3.patch" size="8712" author="kumarr" created="Mon, 19 Nov 2012 22:30:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 4 Oct 2012 17:35:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>240470</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0119b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3969</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>