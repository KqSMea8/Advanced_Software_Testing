<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:03:17 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-2606/HBASE-2606.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-2606] NativeException: org.apache.hadoop.hbase.client.NoServerForRegionException: No server address listed in .META. for region item,,1274235159640 </title>
                <link>https://issues.apache.org/jira/browse/HBASE-2606</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Though the region is listed when you attempt to access it you get an error that it is not assigned to a region.  In the log you find this repeating over and over:&lt;/p&gt;

&lt;p&gt;2010-05-23 16:10:08,958 INFO org.apache.hadoop.hbase.master.ServerManager: 1 region servers, 0 dead, average load 5.0&lt;br/&gt;
2010-05-23 16:10:09,519 INFO org.apache.hadoop.hbase.master.BaseScanner: RegionManager.rootScanner scanning meta region &lt;/p&gt;
{server: 10.211.55.4:60020, regionname: -ROOT-,,0, startKey: &amp;lt;&amp;gt;}
&lt;p&gt;2010-05-23 16:10:09,529 INFO org.apache.hadoop.hbase.master.BaseScanner: RegionManager.rootScanner scan of 1 row(s) of meta region &lt;/p&gt;
{server: 10.211.55.4:60020, regionname: -ROOT-,,0, startKey: &amp;lt;&amp;gt;}
&lt;p&gt; complete&lt;br/&gt;
2010-05-23 16:10:52,178 INFO org.apache.hadoop.hbase.master.BaseScanner: RegionManager.metaScanner scanning meta region &lt;/p&gt;
{server: 10.211.55.4:60020, regionname: .META.,,1, startKey: &amp;lt;&amp;gt;}
&lt;p&gt;2010-05-23 16:10:52,188 DEBUG org.apache.hadoop.hbase.master.BaseScanner: Current assignment of item,,1274235159640 is not valid;  serverAddress=, startCode=0 unknown.&lt;br/&gt;
2010-05-23 16:10:52,193 INFO org.apache.hadoop.hbase.master.BaseScanner: RegionManager.metaScanner scan of 3 row(s) of meta region &lt;/p&gt;
{server: 10.211.55.4:60020, regionname: .META.,,1, startKey: &amp;lt;&amp;gt;}
&lt;p&gt; complete&lt;br/&gt;
2010-05-23 16:10:52,193 INFO org.apache.hadoop.hbase.master.BaseScanner: All 1 .META. region(s) scanned&lt;br/&gt;
2010-05-23 16:10:53,139 INFO org.apache.hadoop.hbase.master.RegionManager: Assigning region item,,1274235159640 to hbase,60020,1274655730505&lt;br/&gt;
2010-05-23 16:10:53,143 INFO org.apache.hadoop.hbase.master.ServerManager: Processing MSG_REPORT_OPEN: item,,1274235159640 from hbase,60020,1274655730505; 1 of 1&lt;br/&gt;
2010-05-23 16:10:53,143 DEBUG org.apache.hadoop.hbase.master.HMaster: Processing todo: PendingOpenOperation from hbase,60020,1274655730505&lt;br/&gt;
2010-05-23 16:10:53,143 INFO org.apache.hadoop.hbase.master.RegionServerOperation: item,,1274235159640 open on 10.211.55.4:60020&lt;br/&gt;
2010-05-23 16:10:53,146 INFO org.apache.hadoop.hbase.master.RegionServerOperation: Updated row item,,1274235159640 in region .META.,,1 with startcode=1274655730505, server=10.211.55.4:60020&lt;/p&gt;

&lt;p&gt;Doing a flush and a major_compaction of the table resets it. I have a VM snapshot that has the behavior and it is reproducible at will.  Attached are the log files from the .META. region at jdcryans request.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux x86_64, java 1.6.0_20, hbase 0.20.4, CDH3&lt;/p&gt;</environment>
        <key id="12465234">HBASE-2606</key>
            <summary>NativeException: org.apache.hadoop.hbase.client.NoServerForRegionException: No server address listed in .META. for region item,,1274235159640 </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="spullara">Sam Pullara</reporter>
                        <labels>
                    </labels>
                <created>Mon, 24 May 2010 00:32:37 +0000</created>
                <updated>Fri, 12 Oct 2012 06:15:37 +0000</updated>
                            <resolved>Tue, 25 May 2010 00:28:37 +0000</resolved>
                                    <version>0.20.4</version>
                                    <fixVersion>0.20.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12870476" author="spullara" created="Mon, 24 May 2010 00:36:28 +0000"  >&lt;p&gt;These are the 3 log files for .META. before the major_compaction that fixes the issue:&lt;/p&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;root@rytym ~&amp;#93;&lt;/span&gt;# hadoop fs -ls /hbase/.META./102*/info&lt;br/&gt;
Found 2 items&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-   3 root supergroup       5397 2010-05-23 13:30 /hbase/.META./1028785192/info/1715090119177974984&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-   3 root supergroup        889 2010-05-23 16:02 /hbase/.META./1028785192/info/558364561142792861&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;root@rytym ~&amp;#93;&lt;/span&gt;# hbase shell&lt;br/&gt;
HBase Shell; enter &apos;help&amp;lt;RETURN&amp;gt;&apos; for list of supported commands.&lt;br/&gt;
Version: 0.20.4, r941076, Tue May  4 16:23:06 PDT 2010&lt;br/&gt;
hbase(main):001:0&amp;gt; flush &apos;.META.&apos;&lt;br/&gt;
0 row(s) in 0.0410 seconds&lt;br/&gt;
hbase(main):002:0&amp;gt; quit&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;root@rytym ~&amp;#93;&lt;/span&gt;# hadoop fs -ls /hbase/.META./102*/info&lt;br/&gt;
Found 3 items&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-   3 root supergroup       5397 2010-05-23 13:30 /hbase/.META./1028785192/info/1715090119177974984&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-   3 root supergroup        889 2010-05-23 16:02 /hbase/.META./1028785192/info/558364561142792861&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-   3 root supergroup       2498 2010-05-23 16:16 /hbase/.META./1028785192/info/6863843601709995931&lt;/p&gt;</comment>
                            <comment id="12870905" author="ryanobjc" created="Mon, 24 May 2010 23:53:25 +0000"  >&lt;p&gt;these keys are in the &apos;middle file&apos;:&lt;/p&gt;

&lt;p&gt;K: item,,1274235159640/info:server/9223372036854775807/DeleteColumn/vlen=0 V:&lt;br/&gt;
K: item,,1274235159640/info:server/1274556669196/Put/vlen=17 V: 10.211.55.4:60020&lt;br/&gt;
K: item,,1274235159640/info:serverstartcode/9223372036854775807/DeleteColumn/vlen=0 V:&lt;br/&gt;
K: item,,1274235159640/info:serverstartcode/1274556669196/Put/vlen=8 V: \x00\x00\x01\x28\xC1\x7E\xA2j&lt;/p&gt;

&lt;p&gt;In this case we have a DeleteColumn on info:server and info:serverstartcode at the timestamp &quot;9223372036854775807&quot; == Long.MAX_VALUE.  &lt;/p&gt;

&lt;p&gt;So any further updates would be masked by these deletes.&lt;/p&gt;
</comment>
                            <comment id="12870907" author="jdcryans" created="Mon, 24 May 2010 23:59:05 +0000"  >&lt;p&gt;IIRC that middle file comes from an oldlogfile...&lt;/p&gt;</comment>
                            <comment id="12870915" author="ryanobjc" created="Tue, 25 May 2010 00:26:25 +0000"  >&lt;p&gt;Yes, we are missing &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1880&quot; title=&quot;DeleteColumns are not recovered properly from the write-ahead-log&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1880&quot;&gt;&lt;del&gt;HBASE-1880&lt;/del&gt;&lt;/a&gt;, and I will apply it to 0.20 branch&lt;/p&gt;

&lt;p&gt;On Mon, May 24, 2010 at 5:00 PM, Jean-Daniel Cryans (JIRA)&lt;/p&gt;
</comment>
                            <comment id="12870919" author="ryanobjc" created="Tue, 25 May 2010 00:28:37 +0000"  >&lt;p&gt;fixed by porting &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1880&quot; title=&quot;DeleteColumns are not recovered properly from the write-ahead-log&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1880&quot;&gt;&lt;del&gt;HBASE-1880&lt;/del&gt;&lt;/a&gt; to 0.20 branch (which was old 0.20_pre_durability)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12445274" name="info.tar.gz" size="1472" author="spullara" created="Mon, 24 May 2010 00:36:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 24 May 2010 23:53:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26382</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 30 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08sjz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>49226</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>