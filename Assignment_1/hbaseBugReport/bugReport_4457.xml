<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:19:06 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-4457/HBASE-4457.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-4457] Starting region server on non-default info port is resulting in broken URL&apos;s in master UI</title>
                <link>https://issues.apache.org/jira/browse/HBASE-4457</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;When  &quot;hbase.regionserver.info.port&quot; is set to non-default port, Master UI has broken URL&apos;s in the region server table because it&apos;s hard coded to default port.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12524229">HBASE-4457</key>
            <summary>Starting region server on non-default info port is resulting in broken URL&apos;s in master UI</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10">Implemented</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ppatiba">Praveen Patibandla</reporter>
                        <labels>
                    </labels>
                <created>Thu, 22 Sep 2011 02:59:53 +0000</created>
                <updated>Tue, 5 Aug 2014 20:12:35 +0000</updated>
                            <resolved>Mon, 27 Jan 2014 17:41:53 +0000</resolved>
                                    <version>0.92.0</version>
                                                    <component>master</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13112330" author="yuzhihong@gmail.com" created="Thu, 22 Sep 2011 04:59:58 +0000"  >&lt;p&gt;Reformatting is needed for patch v1:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      result = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.hbaseMaster.regionServerStartup(port, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.startcode, now,webport);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;There should be a space after the last comma.&lt;/p&gt;

&lt;p&gt;Tab should be two spaces.&lt;/p&gt;

&lt;p&gt;Overall, patch looks good.&lt;/p&gt;

&lt;p&gt;I will wait for Stack&apos;s comment.&lt;/p&gt;</comment>
                            <comment id="13112548" author="ppatiba" created="Thu, 22 Sep 2011 13:25:38 +0000"  >&lt;p&gt;@Ted, Thank you for reviewing the patch. I&apos;ve fixed the formatting.&lt;/p&gt;</comment>
                            <comment id="13112754" author="stack" created="Thu, 22 Sep 2011 17:48:02 +0000"  >&lt;p&gt;@Praveen I thought about going this route.  I couldn&apos;t convince myself that webport was important enough info to make it into the ServerName fundamental type (its used everywhere, in fs and persisted to zk, serialized over rpc) and truth be told, I punted on what to do about it; thanks for raising it again.&lt;/p&gt;

&lt;p&gt;So I still think having webui port in the servername is not the right place for it.&lt;/p&gt;

&lt;p&gt;What about adding webui param to HMasterRegionInterface#regionServerStartup?&lt;/p&gt;

&lt;p&gt;Pass it through to ServerManager.&lt;/p&gt;

&lt;p&gt;OnlineServers is ServerName-&amp;gt;HServerLoad Map.  Maybe the value needs to change to be a datastructure that has HSL and webui?  That would be pretty disruptive?  Perhaps a new ServerInfo or ServerVitals that has HSL and webui?  Maybe later we&apos;ll add more &apos;server info&apos; to this data structure?&lt;/p&gt;

&lt;p&gt;I&apos;d almost be ok with a new map of SN-&amp;gt;webui that sat beside the onlineServers and was expired when onlineServer expired........&lt;/p&gt;

&lt;p&gt;Sorry if this is more than you bargained for.&lt;/p&gt;</comment>
                            <comment id="13113410" author="tlipcon" created="Fri, 23 Sep 2011 13:13:06 +0000"  >&lt;blockquote&gt;&lt;p&gt;I&apos;d almost be ok with a new map of SN-&amp;gt;webui that sat beside the onlineServers and was expired when onlineServer expired........&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;sounds like lots of room for leaks/errors..&lt;/p&gt;

&lt;p&gt;I much prefer the idea that we collapse the existing maps to have a single class called something like &lt;tt&gt;RSOnMaster&lt;/tt&gt; which is the info that the master tracks about each RS.&lt;/p&gt;</comment>
                            <comment id="13113628" author="ppatiba" created="Fri, 23 Sep 2011 18:15:32 +0000"  >&lt;p&gt;Thank you Stack and Todd for your inputs. I will implement single data structure to capture server info and HSL . My only concern is HSL is dynamic but server info is static.&lt;/p&gt;
</comment>
                            <comment id="13113764" author="stack" created="Fri, 23 Sep 2011 21:02:56 +0000"  >&lt;p&gt;@Praveen Yeah.. so I&apos;d think there&apos;d be a setHSL on the combined datastructure into which you could add latest HSL gotten from RS.&lt;/p&gt;</comment>
                            <comment id="13113793" author="ppatiba" created="Fri, 23 Sep 2011 21:58:22 +0000"  >&lt;p&gt;Thanks Stack, I was initially thinking of replacing the HSL with new data structure.   &lt;/p&gt;</comment>
                            <comment id="13125509" author="jdcryans" created="Wed, 12 Oct 2011 00:41:41 +0000"  >&lt;p&gt;A temporary fix could be done by using the configuration directly instead of asking the region server. Most of the time the master and RSs share that same file so it should cover a lot more cases than the current code does.&lt;/p&gt;</comment>
                            <comment id="13126063" author="stack" created="Wed, 12 Oct 2011 19:15:35 +0000"  >&lt;p&gt;Temporary fix sounds good J-D.&lt;/p&gt;

&lt;p&gt;And after talking more w/ J-D, one scenario we don&apos;t handle w/ the above suggested passing of webuiport on regionserver start is case where all regionservers are already floating when the master comes up.  In this situation, there will be no start message on which the regionserver volunteers UI port &amp;#8211; regionservers are just heartbeating.  Unless we made regionservers rerun their start message &amp;#8211; which we might want to do someday though, could be issues if the new master tried passing config that was different from what the regionserver stared with &amp;#8211; or we have master persist regionserver stats to zk (or when regionserver registers in zk, in its payload it puts its vitals such as webuiport... which we might want to do) a new master rising into an already-running cluster would be a little hosed.&lt;/p&gt;
</comment>
                            <comment id="13126079" author="tlipcon" created="Wed, 12 Oct 2011 19:36:36 +0000"  >&lt;p&gt;Exposing the web UI port in ZK seems like the right fix to me. But the temporary fix makes sense in the meantime.&lt;/p&gt;</comment>
                            <comment id="13134813" author="stack" created="Tue, 25 Oct 2011 07:34:10 +0000"  >&lt;p&gt;Making this critical; its an ugly regression not being able to browse to regionserver from master UI&lt;/p&gt;</comment>
                            <comment id="13137000" author="ppatiba" created="Thu, 27 Oct 2011 12:33:53 +0000"  >&lt;p&gt;Temporary fix won&apos;t work if we start multiple region servers on the same machine.I&apos;m not able to allocate my time to work on this item.I hope someone else can pick it up.&lt;/p&gt;</comment>
                            <comment id="13137199" author="stack" created="Thu, 27 Oct 2011 15:13:56 +0000"  >&lt;p&gt;@Praveen No problem.  Yeah the temporary workaround won&apos;t work if multiple regionservers on single machine.  Thats rare though I&apos;d say.&lt;/p&gt;</comment>
                            <comment id="13138919" author="stack" created="Fri, 28 Oct 2011 23:22:57 +0000"  >&lt;p&gt;Marking this down to major since it looks like we do read from the configuration in current trunk and branch:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
...
200 &amp;lt;table&amp;gt;
201 &amp;lt;tr&amp;gt;&amp;lt;th rowspan=&lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;lt;% servers.size() + 1%&amp;gt;&quot;&lt;/span&gt;&amp;gt;&amp;lt;/th&amp;gt;&amp;lt;th&amp;gt;ServerName&amp;lt;/th&amp;gt;&amp;lt;th&amp;gt;Load&amp;lt;/th&amp;gt;&amp;lt;/tr&amp;gt;
202 &amp;lt;%java&amp;gt;
203    ServerName [] serverNames = servers.toArray(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ServerName[servers.size()]);
204      Arrays.sort(serverNames);
205      &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (ServerName serverName: serverNames) {
206        &lt;span class=&quot;code-comment&quot;&gt;// TODO: &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is incorrect since &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; conf might differ from RS to RS
&lt;/span&gt;207        &lt;span class=&quot;code-comment&quot;&gt;// or be set to 0 to get ephemeral ports
&lt;/span&gt;208        &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; infoPort = master.getConfiguration().getInt(&lt;span class=&quot;code-quote&quot;&gt;&quot;hbase.regionserver.info.port&quot;&lt;/span&gt;, 60030);
209        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; url = &lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//&quot;&lt;/span&gt; + serverName.getHostname() + &lt;span class=&quot;code-quote&quot;&gt;&quot;:&quot;&lt;/span&gt; + infoPort + &lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;;
&lt;/span&gt;210        HServerLoad hsl = master.getServerManager().getLoad(serverName);
211        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; loadStr = hsl == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;? &lt;span class=&quot;code-quote&quot;&gt;&quot;-&quot;&lt;/span&gt;: hsl.toString();
212        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (hsl != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
213          totalRegions += hsl.getNumberOfRegions();
214          totalRequests += hsl.getNumberOfRequests();
215        }
216 &amp;lt;/%java&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13234942" author="lhofhansl" created="Wed, 21 Mar 2012 19:51:50 +0000"  >&lt;p&gt;Moving to 0.94.1 for now.&lt;/p&gt;</comment>
                            <comment id="13882998" author="stack" created="Mon, 27 Jan 2014 17:41:54 +0000"  >&lt;p&gt;Done recently by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=liushaohui&quot; class=&quot;user-hover&quot; rel=&quot;liushaohui&quot;&gt;Liu Shaohui&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12496107" name="4457-V1.patch" size="8350" author="ppatiba" created="Thu, 22 Sep 2011 13:24:20 +0000"/>
                            <attachment id="12496059" name="4457.patch" size="8347" author="ppatiba" created="Thu, 22 Sep 2011 03:04:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 22 Sep 2011 04:59:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>27305</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 46 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i00sw7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2613</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>This patch is to remove the region server web port hard coding. </customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>