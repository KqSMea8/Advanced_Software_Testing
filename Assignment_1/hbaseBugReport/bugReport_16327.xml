<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 21:13:00 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-16327/HBASE-16327.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-16327] Unify BufferChain and MultiByteBuff</title>
                <link>https://issues.apache.org/jira/browse/HBASE-16327</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Bufferchain is nothing but a collection of Bytebuffers. We already have MultiBytebuff. May be we can unify both and add the Bufferchain#write() to ByteBuff abstract class. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12994235">HBASE-16327</key>
            <summary>Unify BufferChain and MultiByteBuff</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="ram_krish">ramkrishna.s.vasudevan</assignee>
                                    <reporter username="ram_krish">ramkrishna.s.vasudevan</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Aug 2016 10:06:26 +0000</created>
                <updated>Thu, 4 Aug 2016 06:27:32 +0000</updated>
                            <resolved>Thu, 4 Aug 2016 06:27:32 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="15404522" author="stack" created="Tue, 2 Aug 2016 18:18:06 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;Whats the differences?&lt;/p&gt;</comment>
                            <comment id="15405297" author="anoop.hbase" created="Wed, 3 Aug 2016 04:41:28 +0000"  >&lt;p&gt;So at the RPCServer response write level, when we have N BBs we will have to create an MBB over it and call write by passing the channel.  (Now it is creating BufferChain).  MBB creation will have some extra overhead. Like the creation of &apos;itemBeginPos&apos; array, calculation of offsets etc. Those are not really needed for a BufferChain.  So may be it is not worth removing BufferChain.  Ya the gain is we will have one data structure only.  But why to pay the extra overhead?&lt;/p&gt;</comment>
                            <comment id="15405310" author="ram_krish" created="Wed, 3 Aug 2016 04:54:17 +0000"  >&lt;blockquote&gt;&lt;p&gt;MBB creation will have some extra overhead. Like the creation of &apos;itemBeginPos&apos; array, calculation of offsets etc. Those are not really needed for a BufferChain&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I agree. But they can be by passed?  Just add write() API that writes to GatheringByteChannel. Actually functionally both are same MBB and BufferChain - it wraps a list of BBs. &lt;/p&gt;</comment>
                            <comment id="15405422" author="anoop.hbase" created="Wed, 3 Aug 2016 06:40:12 +0000"  >&lt;p&gt;By pass in the constructor of MBB?  It may look ugly !  In real MBB we need that calc and data structures for later accessing of data from the bufs.  But in RPC case, it is just write to channel. &lt;/p&gt;</comment>
                            <comment id="15406982" author="ram_krish" created="Thu, 4 Aug 2016 01:59:49 +0000"  >&lt;p&gt;True I agree but this was mainly to avoid similar classes but just with one added functionality. &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; items != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
    &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; items.length &amp;gt; 0;
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.items = items;
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.curItem = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.items[&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.curItemIndex];
    &lt;span class=&quot;code-comment&quot;&gt;// See below optimization in getInt(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) where we check whether the given index land in current
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// item. For &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; we need to check whether the passed index is less than the next item begin
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// offset. To handle &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; effectively &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the last item buffer, we add an extra item into &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// array.
&lt;/span&gt;    itemBeginPos = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;[items.length + 1];
    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; offset = 0;
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; items.length; i++) {
      ByteBuffer item = items[i];
      item.rewind();
      itemBeginPos[i] = offset;
      &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; l = item.limit() - item.position();
      offset += l;
    }
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.limit = offset;
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.itemBeginPos[items.length] = offset + 1;
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.limitedItemIndex = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.items.length - 1;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Is this constructor going to be so heavy? &lt;/p&gt;</comment>
                            <comment id="15407178" author="anoop.hbase" created="Thu, 4 Aug 2016 05:21:15 +0000"  >&lt;p&gt;Not that heavy but surely much heavy compared to BufferChain&apos;s.    So my thinking was why to suffer?  Am -0 for this. If u strongly feel it should be removed and use MBB go for it.&lt;/p&gt;</comment>
                            <comment id="15407203" author="stack" created="Thu, 4 Aug 2016 05:40:27 +0000"  >&lt;p&gt;I thought they were doing the same thing but after seeing this back and forth, it seems they each have their own character so two Types is fine. Nice idea though Ram.&lt;/p&gt;</comment>
                            <comment id="15407269" author="ram_krish" created="Thu, 4 Aug 2016 06:27:32 +0000"  >&lt;p&gt;As per the discussion here, resolving as &apos;Won&apos;t fix&apos;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 2 Aug 2016 18:18:06 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            19 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31smv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>