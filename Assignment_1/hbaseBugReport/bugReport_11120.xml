<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:20:22 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-11120/HBASE-11120.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-11120] Update documentation about major compaction algorithm</title>
                <link>https://issues.apache.org/jira/browse/HBASE-11120</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;14:20:38&amp;#93;&lt;/span&gt;  &amp;lt;jdcryans&amp;gt;	 seems that there&apos;s &lt;a href=&quot;http://hbase.apache.org/book.html#compaction&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hbase.apache.org/book.html#compaction&lt;/a&gt; and &lt;a href=&quot;http://hbase.apache.org/book.html#managed.compactions&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hbase.apache.org/book.html#managed.compactions&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;14:20:56&amp;#93;&lt;/span&gt;  &amp;lt;jdcryans&amp;gt;	 the latter doesn&apos;t say much, except that you should manage them&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;14:21:44&amp;#93;&lt;/span&gt;  &amp;lt;jdcryans&amp;gt;	 the former gives a good description of the &lt;em&gt;old&lt;/em&gt; selection algo&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;14:45:25&amp;#93;&lt;/span&gt;  &amp;lt;jdcryans&amp;gt;	 this is the new selection algo since C5 / 0.96.0: &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7842&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-7842&lt;/a&gt;&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12712690">HBASE-11120</key>
            <summary>Update documentation about major compaction algorithm</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="misty">Misty Stanley-Jones</assignee>
                                    <reporter username="misty">Misty Stanley-Jones</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 May 2014 21:57:28 +0000</created>
                <updated>Sat, 21 Feb 2015 23:35:13 +0000</updated>
                            <resolved>Tue, 10 Jun 2014 03:57:34 +0000</resolved>
                                    <version>0.98.2</version>
                                    <fixVersion>0.99.0</fixVersion>
                                    <component>Compaction</component>
                    <component>documentation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                <comments>
                            <comment id="14001268" author="misty" created="Sun, 18 May 2014 23:56:49 +0000"  >&lt;p&gt;This is my attempt to understand and explain the new compaction algorithms. I think I have probably missed some bits and misconstrued some bits. Please provide feedback and corrections as necessary. I have left the old algorithm explanation in place and just re-labeled it as &quot;prior to 0.96.x&quot;.&lt;/p&gt;</comment>
                            <comment id="14005462" author="misty" created="Thu, 22 May 2014 00:32:14 +0000"  >&lt;p&gt;Integrating review comments from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdcryans&quot; class=&quot;user-hover&quot; rel=&quot;jdcryans&quot;&gt;Jean-Daniel Cryans&lt;/a&gt;, cancelling patch review in the meantime.&lt;/p&gt;</comment>
                            <comment id="14005471" author="misty" created="Thu, 22 May 2014 00:42:28 +0000"  >&lt;p&gt;a store can only have so many files, and that&apos;s called the blocking store file count&lt;br/&gt;
so you cannot flush data if you have too many files, you have to wait for a compaciton&lt;br/&gt;
and you cannot insert if the memstore is over some threshold&lt;br/&gt;
but then the compaction selection might not select a single file if none of them are &quot;good&quot;&lt;br/&gt;
so if you get there, you&apos;re stuck&lt;br/&gt;
that&apos;s the accounting here:&lt;br/&gt;
boolean mayBeStuck = (candidateFiles.size() - filesCompacting.size() + futureFiles)&#8232;        &amp;gt;= storeConfigInfo.getBlockingFileCount();&lt;br/&gt;
Jean-Daniel Cryans&lt;br/&gt;
10:29 am&lt;br/&gt;
if our files we&apos;re supposed to compact, minus the ones we&apos;re already compacting, plus 1 since those files will end up being a new store file, is greater or equal to the blocking file count&lt;br/&gt;
then we force a compacting&lt;br/&gt;
compaction&lt;/p&gt;</comment>
                            <comment id="14005472" author="misty" created="Thu, 22 May 2014 00:42:44 +0000"  >&lt;p&gt; Check to see if we absolutely have to compact in case we have too many store files&lt;br/&gt;
then the next para:&lt;br/&gt;
+                    &amp;lt;term&amp;gt;If this compaction was user-requested, try to do a major&#8232;+                      compaction.&amp;lt;/term&amp;gt;&lt;br/&gt;
see the link I posted above, we only major compact when the user asks for it&lt;br/&gt;
I think the code you saw was more like forcing the major compaction if the user was indeed requesting it&lt;/p&gt;</comment>
                            <comment id="14005529" author="misty" created="Thu, 22 May 2014 01:59:44 +0000"  >&lt;p&gt;Second version of this patch but the first version was not  committed properly so I deleted it. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdcryans&quot; class=&quot;user-hover&quot; rel=&quot;jdcryans&quot;&gt;Jean-Daniel Cryans&lt;/a&gt; helped with this one.&lt;/p&gt;</comment>
                            <comment id="14006215" author="sershe" created="Thu, 22 May 2014 18:04:56 +0000"  >&lt;p&gt;This may need correcting?&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+                    &amp;lt;entry /&amp;gt;
+                    &amp;lt;entry /&amp;gt;
+                    &amp;lt;entry&amp;gt;1.2F&amp;lt;/entry&amp;gt;
+                  &amp;lt;/row&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+                    &amp;lt;entry&amp;gt;hbase.hstore.compaction.max.size&amp;lt;/entry&amp;gt;
+                    &amp;lt;entry&amp;gt;The maximum size for a file to be eligible for compaction, expressed in
+                      bytes.&amp;lt;/entry&amp;gt;
+                    &amp;lt;entry&amp;gt;1000&amp;lt;/entry&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This is not a very good description imho...&lt;/p&gt;

&lt;p&gt;It would be good to insert link to effect of major compaction on read results into the section about deletes. There&apos;s description somewhere in the book already.&lt;/p&gt;</comment>
                            <comment id="14006480" author="jdcryans" created="Thu, 22 May 2014 21:13:19 +0000"  >&lt;p&gt;On top of Sergey&apos;s comments:&lt;/p&gt;

&lt;p&gt;This could also use a sentence regarding TTLs, they are simply filtered out and tombstones aren&apos;t created:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;bq. &amp;lt;title&amp;gt;Compaction and Deletions&amp;lt;/title&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Same kind of comment for this para, the old versions are filtered more than deleted:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+            &amp;lt;title&amp;gt;Compaction and Versions&amp;lt;/title&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;One thing bothers me about this para:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+            &amp;lt;para&amp;gt;The compaction algorithms used by HBase have evolved over time. HBase 0.96
+              introduced a new algorithm for compaction file selection. To find out about the old
+              algorithm, see &amp;lt;xref
+                linkend=&quot;compaction&quot; /&amp;gt;. The rest of this section describes the new algorithm, which
+              was implemented in &amp;lt;link
+                xlink:href=&quot;https://issues.apache.org/jira/browse/HBASE-7842&quot;&amp;gt;HBASE-7842&amp;lt;/link&amp;gt;.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;What&apos;s written next is much more about how to pick the files that will then be considered for compaction than the actual new policy which is in ExploringCompactionPolicy.java. In other words, the text that follows what I just quoted is ok but not really new in 0.96 via &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7842&quot; title=&quot;Add compaction policy that explores more storefile groups&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7842&quot;&gt;&lt;del&gt;HBASE-7842&lt;/del&gt;&lt;/a&gt;, and it seems to me that we should explain what &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7842&quot; title=&quot;Add compaction policy that explores more storefile groups&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7842&quot;&gt;&lt;del&gt;HBASE-7842&lt;/del&gt;&lt;/a&gt; does.&lt;/p&gt;</comment>
                            <comment id="14006714" author="misty" created="Fri, 23 May 2014 02:11:21 +0000"  >&lt;blockquote&gt;&lt;p&gt;It would be good to insert link to effect of major compaction on read results into the section about deletes. There&apos;s description somewhere in the book already.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Do you mean 5.9.2.2. Major compactions change query results?&lt;/p&gt;</comment>
                            <comment id="14006738" author="misty" created="Fri, 23 May 2014 02:46:29 +0000"  >&lt;p&gt;Addressed comments so far.&lt;/p&gt;</comment>
                            <comment id="14006742" author="misty" created="Fri, 23 May 2014 02:55:11 +0000"  >&lt;p&gt;My editor pretty-printed the file again without me realizing it and generated a huge diff. Have now turned this off in settings and re-generated the diff.&lt;/p&gt;</comment>
                            <comment id="14006763" author="misty" created="Fri, 23 May 2014 03:50:29 +0000"  >&lt;p&gt;Tweaked based on more feedback from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdcryans&quot; class=&quot;user-hover&quot; rel=&quot;jdcryans&quot;&gt;Jean-Daniel Cryans&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14010648" author="misty" created="Wed, 28 May 2014 01:44:08 +0000"  >&lt;p&gt;Rebased now that I figured out how.&lt;/p&gt;</comment>
                            <comment id="14010754" author="hadoopqa" created="Wed, 28 May 2014 04:17:00 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12647031/HBASE-11120-3-rebased.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12647031/HBASE-11120-3-rebased.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12647031&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+0 tests included&lt;/font&gt;.  The patch appears to be a documentation patch that doesn&apos;t require tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 release audit&lt;/font&gt;.  The applied patch generated 32 release audit warnings (more than the trunk&apos;s current 0 warnings).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +            Obviously, once a major compaction has run, such behavior will not be the case anymore...&amp;lt;footnote&amp;gt;&lt;br/&gt;
+                linkend=&quot;major.compactions.change.query.results&quot; /&amp;gt; for a more in-depth explanation. This&lt;br/&gt;
+                xlink:href=&quot;https://issues.apache.org/jira/browse/HBASE-7842&quot;&amp;gt;Exploring Compaction Policy&amp;lt;/link&amp;gt;&amp;lt;/title&amp;gt;&lt;br/&gt;
+                &amp;lt;filename&amp;gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/compactions/ExploringCompactionPolicy.java&amp;lt;/filename&amp;gt;.&amp;lt;/para&amp;gt;&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9613//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9613//testReport/&lt;/a&gt;&lt;br/&gt;
Release audit warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9613//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9613//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9613//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9613//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9613//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9613//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9613//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9613//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9613//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9613//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9613//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9613//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9613//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9613//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9613//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9613//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9613//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9613//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9613//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9613//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9613//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9613//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14012875" author="jdcryans" created="Thu, 29 May 2014 20:47:05 +0000"  >&lt;p&gt;Spent some more time reading through and I saw that I had missed a few things. BTW, thanks again Misty for working on this, it is much needed.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure about this part:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;However, if the normal compaction&lt;br/&gt;
+                    algorithm do not find any normally-eligible StoreFiles, a major compaction is&lt;br/&gt;
+                    the only way to get out of this situation, and is forced. This is also called a&lt;br/&gt;
+                    size-based or size-triggered major compaction.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The exploration compaction will select the smallest set of files to compact and it won&apos;t trigger a major compaction. Also, I looked for &quot;size-based&quot; and &quot;size-triggered&quot; in the code but couldn&apos;t find anything so I&apos;m not sure what this is referring to.&lt;/p&gt;

&lt;p&gt;This is wrong:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;+                &amp;lt;term&amp;gt;If this compaction was user-requested, do a major compaction.&amp;lt;/term&amp;gt;&lt;br/&gt;
+                &amp;lt;listitem&amp;gt;&lt;br/&gt;
+                  &amp;lt;para&amp;gt;Compactions can run on a schedule or can be initiated manually. If a&lt;br/&gt;
+                    compaction is requested manually, it is always a major compaction. If the&lt;br/&gt;
+                    compaction is user-requested, the major compaction still happens even if the are&lt;br/&gt;
+                    more than &amp;lt;varname&amp;gt;hbase.hstore.compaction.max&amp;lt;/varname&amp;gt; files that need&lt;br/&gt;
+                    compaction.&amp;lt;/para&amp;gt;&lt;br/&gt;
+                &amp;lt;/listitem&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It will do a minor compaction if the user asks for that, or a major compaction if it&apos;s specifically asked for.&lt;/p&gt;

&lt;p&gt;It might be good to mention that hbase.hstore.compactionThreshold was the old name for hbase.hstore.compaction.min in this section:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;+                  &amp;lt;row&amp;gt;&lt;br/&gt;
+                    &amp;lt;entry&amp;gt;hbase.hstore.compaction.min&amp;lt;/entry&amp;gt;&lt;br/&gt;
+                    &amp;lt;entry&amp;gt;The minimum number of files which must be eligible for compaction before&lt;br/&gt;
+                      compaction can run.&amp;lt;/entry&amp;gt;&lt;br/&gt;
+                    &amp;lt;entry&amp;gt;3&amp;lt;/entry&amp;gt;&lt;br/&gt;
+                  &amp;lt;/row&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Those two are wrong (if 1000 bytes was the max we&apos;d probably never compact &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/tongue.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;):&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;+                  &amp;lt;row&amp;gt;&lt;br/&gt;
+                    &amp;lt;entry&amp;gt;hbase.hstore.compaction.min.size&amp;lt;/entry&amp;gt;&lt;br/&gt;
+                    &amp;lt;entry&amp;gt;A StoreFile smaller than this size (in bytes) will always be eligible for&lt;br/&gt;
+                      minor compaction.&amp;lt;/entry&amp;gt;&lt;br/&gt;
+                    &amp;lt;entry&amp;gt;10&amp;lt;/entry&amp;gt;&lt;br/&gt;
+                  &amp;lt;/row&amp;gt;&lt;br/&gt;
+                  &amp;lt;row&amp;gt;&lt;br/&gt;
+                    &amp;lt;entry&amp;gt;hbase.hstore.compaction.max.size&amp;lt;/entry&amp;gt;&lt;br/&gt;
+                    &amp;lt;entry&amp;gt;A StoreFile larger than this size (in bytes) will be excluded from minor&lt;br/&gt;
+                      compaction.&amp;lt;/entry&amp;gt;&lt;br/&gt;
+                    &amp;lt;entry&amp;gt;1000&amp;lt;/entry&amp;gt;&lt;br/&gt;
+                  &amp;lt;/row&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It should be 128MB and Long.MAX_VALUE as per: &lt;a href=&quot;https://github.com/apache/hbase/blob/master/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/compactions/CompactionConfiguration.java#L71&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hbase/blob/master/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/compactions/CompactionConfiguration.java#L71&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14013200" author="misty" created="Fri, 30 May 2014 01:41:04 +0000"  >&lt;p&gt;I hope this patch works. It seems like my other one might have gotten applied to master and I didn&apos;t realize it. If this doesn&apos;t work let me know. I may need help creating a proper patch.&lt;/p&gt;

&lt;p&gt;Anyway I have addressed the feedback. I don&apos;t remember where I read size-based, but the timed major compaction is referred to as &quot;time-based&quot; so maybe I was just trying to create a differentiation point. I&apos;ve removed it.&lt;/p&gt;</comment>
                            <comment id="14013249" author="hadoopqa" created="Fri, 30 May 2014 03:20:46 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12647508/HBASE-11120-4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12647508/HBASE-11120-4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12647508&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+0 tests included&lt;/font&gt;.  The patch appears to be a documentation patch that doesn&apos;t require tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +                xlink:href=&quot;https://issues.apache.org/jira/browse/HBASE-7842&quot;&amp;gt;ExploringCompaction Policy&amp;lt;/link&amp;gt;&amp;lt;/title&amp;gt;&lt;br/&gt;
+                &amp;lt;term&amp;gt;If this compaction was user-requested, perform the requested type of compaction.&amp;lt;/term&amp;gt;&lt;br/&gt;
+                    compaction is requested manually, HBase always runs that type of compaction. If the&lt;br/&gt;
+                    user requests a major compaction, the major compaction still runs even if the are&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9642//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9642//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9642//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9642//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9642//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9642//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9642//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9642//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9642//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9642//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9642//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9642//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9642//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9642//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9642//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9642//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9642//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9642//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9642//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9642//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9642//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9642//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14019484" author="misty" created="Fri, 6 Jun 2014 01:14:30 +0000"  >&lt;p&gt;It&apos;s been several days so attaching a rebased patch for review.&lt;/p&gt;</comment>
                            <comment id="14019516" author="hadoopqa" created="Fri, 6 Jun 2014 03:00:49 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12648582/HBASE-11120-4-rebased.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12648582/HBASE-11120-4-rebased.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12648582&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+0 tests included&lt;/font&gt;.  The patch appears to be a documentation patch that doesn&apos;t require tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +                xlink:href=&quot;https://issues.apache.org/jira/browse/HBASE-7842&quot;&amp;gt;ExploringCompaction Policy&amp;lt;/link&amp;gt;&amp;lt;/title&amp;gt;&lt;br/&gt;
+                &amp;lt;term&amp;gt;If this compaction was user-requested, perform the requested type of compaction.&amp;lt;/term&amp;gt;&lt;br/&gt;
+                    compaction is requested manually, HBase always runs that type of compaction. If the&lt;br/&gt;
+                    user requests a major compaction, the major compaction still runs even if the are&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9700//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9700//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9700//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9700//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9700//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9700//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9700//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9700//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9700//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9700//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9700//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9700//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9700//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9700//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9700//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9700//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9700//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9700//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9700//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9700//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9700//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9700//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14021081" author="stack" created="Sun, 8 Jun 2014 03:26:10 +0000"  >&lt;p&gt;Why did the patch go from 21k to 6k &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=misty&quot; class=&quot;user-hover&quot; rel=&quot;misty&quot;&gt;Misty Stanley-Jones&lt;/a&gt;?  Did you get less ambitious?&lt;/p&gt;

&lt;p&gt;Looking the below:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
                     &amp;lt;entry&amp;gt;hbase.hstore.compaction.min.size&amp;lt;/entry&amp;gt;
                     &amp;lt;entry&amp;gt;A StoreFile smaller than &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; size (in bytes) will always be eligible &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;
                       minor compaction.&amp;lt;/entry&amp;gt;
-                    &amp;lt;entry&amp;gt;10&amp;lt;/entry&amp;gt;
+                    &amp;lt;entry&amp;gt;128 MB&amp;lt;/entry&amp;gt;
                   &amp;lt;/row&amp;gt;
                   &amp;lt;row&amp;gt;
                     &amp;lt;entry&amp;gt;hbase.hstore.compaction.max.size&amp;lt;/entry&amp;gt;
                     &amp;lt;entry&amp;gt;A StoreFile larger than &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; size (in bytes) will be excluded from minor
                       compaction.&amp;lt;/entry&amp;gt;
-                    &amp;lt;entry&amp;gt;1000&amp;lt;/entry&amp;gt;
+                    &amp;lt;entry&amp;gt;&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;.MAX_VALUE&amp;lt;/entry&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;... I don&apos;t see hbase.hstore.compaction.min.size in code base any more and you can&apos;t write Long.MAX_VALUE or 128 MB as values... our configuration system can&apos;t digest anything but numbers.&lt;/p&gt;

&lt;p&gt;Let me know why big difference in size.  Maybe this patch should have had more in it?  Thanks.&lt;/p&gt;</comment>
                            <comment id="14025292" author="jdcryans" created="Mon, 9 Jun 2014 15:31:11 +0000"  >&lt;blockquote&gt;&lt;p&gt;I don&apos;t see hbase.hstore.compaction.min.size in code base any more&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yeah I was confused by this too, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;, until I found this thread that you started for this reason a while back: &lt;a href=&quot;http://osdir.com/ml/general/2013-06/msg41068.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://osdir.com/ml/general/2013-06/msg41068.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Basically, &lt;tt&gt;CompactionConfiguration&lt;/tt&gt; was written with a &quot;configuration prefix&quot; so doing a grep on that config (or hbase.hstore.compaction.max.size) won&apos;t return anything. I think we should undo the &quot;refactoring&quot; in that class since it obviously breaks a pattern we&apos;re used to, which is to completely spell out the configuration names so we can easily search for them.&lt;/p&gt;</comment>
                            <comment id="14025525" author="stack" created="Mon, 9 Jun 2014 18:45:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdcryans&quot; class=&quot;user-hover&quot; rel=&quot;jdcryans&quot;&gt;Jean-Daniel Cryans&lt;/a&gt; Thanks for the digging. Agree. Let me change it.&lt;/p&gt;</comment>
                            <comment id="14025538" author="stack" created="Mon, 9 Jun 2014 18:49:33 +0000"  >&lt;p&gt;Little patch to add to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=misty&quot; class=&quot;user-hover&quot; rel=&quot;misty&quot;&gt;Misty Stanley-Jones&lt;/a&gt;&apos;s doc patch fixing up CompactionConfiguration so it doesn&apos;t do the cute little prefix define ... which makes it so we don&apos;t find its options.&lt;/p&gt;</comment>
                            <comment id="14025561" author="stack" created="Mon, 9 Jun 2014 19:01:36 +0000"  >&lt;p&gt;So now &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=misty&quot; class=&quot;user-hover&quot; rel=&quot;misty&quot;&gt;Misty Stanley-Jones&lt;/a&gt;, why did the file size shrink so much? (I can commit my addendum along w/ your doc patch when done).&lt;/p&gt;</comment>
                            <comment id="14025815" author="misty" created="Mon, 9 Jun 2014 21:54:37 +0000"  >&lt;p&gt;I don&apos;t know why it shrunk. At the time I was very confused and it seemed as though maybe somehow the &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11120&quot; title=&quot;Update documentation about major compaction algorithm&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11120&quot;&gt;&lt;del&gt;HBASE-11120&lt;/del&gt;&lt;/a&gt;-3-rebased.patch got applied to master. Let me try to replay it and make sure that everything is really there so I don&apos;t lose any work. I will let you know.&lt;/p&gt;</comment>
                            <comment id="14025888" author="misty" created="Mon, 9 Jun 2014 22:59:59 +0000"  >&lt;p&gt;OK it shrunk because somehow a lot of these changes got applied to master by your commit on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11199&quot; title=&quot;One-time effort to pretty-print the Docbook XML, to make further patch review easier&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11199&quot;&gt;&lt;del&gt;HBASE-11199&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;. Can you please confirm?&lt;/p&gt;</comment>
                            <comment id="14025890" author="misty" created="Mon, 9 Jun 2014 23:00:36 +0000"  >&lt;p&gt;I am figuring that out by doing &apos;git annotate&apos; and searching for the changes.&lt;/p&gt;</comment>
                            <comment id="14026099" author="stack" created="Tue, 10 Jun 2014 03:57:34 +0000"  >&lt;p&gt;Yeah, looks like bulk was part of the pretty print big patch.&lt;/p&gt;

&lt;p&gt;Did a skim through and it reads great.&lt;/p&gt;

&lt;p&gt;Applied your small patch from here and the addendum for CompactionConfiguration that spells out the full property name rather than the CC prefix define trick.&lt;/p&gt;</comment>
                            <comment id="14026117" author="hudson" created="Tue, 10 Jun 2014 05:00:52 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #5190 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/5190/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/5190/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11120&quot; title=&quot;Update documentation about major compaction algorithm&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11120&quot;&gt;&lt;del&gt;HBASE-11120&lt;/del&gt;&lt;/a&gt; Update documentation about major compaction algorithm (Misty Stanley-Jones) + addendum fixing CompactionConfiguration (stack: rev 948b22f082e1c598fc553a34772226de31b8b0b7)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;src/main/docbkx/book.xml&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/compactions/CompactionConfiguration.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14026649" author="jmhsieh" created="Tue, 10 Jun 2014 16:40:43 +0000"  >&lt;p&gt;Patch seems to have broken trunk.  Posting and committing trivial addendum to fix shortly.&lt;/p&gt;

</comment>
                            <comment id="14026661" author="jmhsieh" created="Tue, 10 Jun 2014 16:46:48 +0000"  >&lt;p&gt;jimmy seems to have beaten me to the commit. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  thanks!&lt;/p&gt;</comment>
                            <comment id="14026681" author="stack" created="Tue, 10 Jun 2014 17:06:11 +0000"  >&lt;p&gt;Thanks for fix up &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jxiang&quot; class=&quot;user-hover&quot; rel=&quot;jxiang&quot;&gt;Jimmy Xiang&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jmhsieh&quot; class=&quot;user-hover&quot; rel=&quot;jmhsieh&quot;&gt;Jonathan Hsieh&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14026876" author="hudson" created="Tue, 10 Jun 2014 19:30:18 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-TRUNK #5191 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/5191/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/5191/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11120&quot; title=&quot;Update documentation about major compaction algorithm&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11120&quot;&gt;&lt;del&gt;HBASE-11120&lt;/del&gt;&lt;/a&gt; Addendum for fixing compilation error (jxiang: rev ee762257835a060e9e01244fb8b0dc97682af098)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/compactions/TestStripeCompactionPolicy.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StripeStoreConfig.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14077338" author="hudson" created="Tue, 29 Jul 2014 03:12:06 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #5349 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/5349/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/5349/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11316&quot; title=&quot;Expand info about compactions beyond HBASE-11120&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11316&quot;&gt;&lt;del&gt;HBASE-11316&lt;/del&gt;&lt;/a&gt; Expand info about compactions beyond &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11120&quot; title=&quot;Update documentation about major compaction algorithm&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11120&quot;&gt;&lt;del&gt;HBASE-11120&lt;/del&gt;&lt;/a&gt; (Misty Stanley-Jones) (jdcryans: rev afae1e2583b8b32d828efbadce363247c784a93e)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-common/src/main/resources/hbase-default.xml&lt;/li&gt;
	&lt;li&gt;src/main/docbkx/book.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14078882" author="hudson" created="Wed, 30 Jul 2014 04:42:44 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #5353 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/5353/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/5353/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11316&quot; title=&quot;Expand info about compactions beyond HBASE-11120&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11316&quot;&gt;&lt;del&gt;HBASE-11316&lt;/del&gt;&lt;/a&gt; Expand info about compactions beyond &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11120&quot; title=&quot;Update documentation about major compaction algorithm&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11120&quot;&gt;&lt;del&gt;HBASE-11120&lt;/del&gt;&lt;/a&gt; ADDENDUM TO FIX BROKE TESTS (stack: rev 85853f69c88c08db61af7fb6ef3b5432f926e531)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestDefaultCompactSelection.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/compactions/TestStripeCompactionPolicy.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14331295" author="enis" created="Sat, 21 Feb 2015 23:35:13 +0000"  >&lt;p&gt;Closing this issue after 0.99.0 release. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310060">
                    <name>Container</name>
                                            <outwardlinks description="contains">
                                        <issuelink>
            <issuekey id="12712692">HBASE-11121</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12720269">HBASE-11316</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12649423" name="11120_addendum.txt" size="2884" author="stack" created="Mon, 9 Jun 2014 18:49:33 +0000"/>
                            <attachment id="12646439" name="HBASE-11120-2.patch" size="21894" author="misty" created="Fri, 23 May 2014 02:55:11 +0000"/>
                            <attachment id="12647031" name="HBASE-11120-3-rebased.patch" size="21931" author="misty" created="Wed, 28 May 2014 01:44:08 +0000"/>
                            <attachment id="12646442" name="HBASE-11120-3.patch" size="21869" author="misty" created="Fri, 23 May 2014 03:50:29 +0000"/>
                            <attachment id="12648582" name="HBASE-11120-4-rebased.patch" size="5729" author="misty" created="Fri, 6 Jun 2014 01:14:30 +0000"/>
                            <attachment id="12647508" name="HBASE-11120-4.patch" size="5737" author="misty" created="Fri, 30 May 2014 01:41:04 +0000"/>
                            <attachment id="12646161" name="HBASE-11120.patch" size="18314" author="misty" created="Thu, 22 May 2014 02:01:56 +0000"/>
                            <attachment id="12649612" name="hbase-11120.addendum.patch" size="4437" author="jmhsieh" created="Tue, 10 Jun 2014 16:43:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 22 May 2014 18:04:56 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>391006</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1vcfj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>391233</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>