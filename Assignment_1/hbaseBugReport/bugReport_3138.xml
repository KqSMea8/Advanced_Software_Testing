<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:07:40 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-3138/HBASE-3138.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-3138] When new master joins running cluster but meta is yanked from it as processing RIT, gets unexpected state</title>
                <link>https://issues.apache.org/jira/browse/HBASE-3138</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Testing rolling restart i turned up the following condition.&lt;/p&gt;

&lt;p&gt;Master is joining an extant cluster and is trying to clean up RIT.  Then the server hosting .META. is shutdown in the middle of it all.  Deal.  Here is exception.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2010-10-21 06:45:58,592 DEBUG org.apache.hadoop.hbase.master.AssignmentManager: Handling transition=RS_ZK_REGION_OPENED, server=sv2borg187,60020,1287643131919, region=efcd899283e96f20faa317772f52adca
2010-10-21 06:45:58,616 FATAL org.apache.hadoop.hbase.master.HMaster: Unhandled exception. Starting shutdown.
org.apache.hadoop.ipc.RemoteException: java.io.IOException: Server not running
    at org.apache.hadoop.hbase.regionserver.HRegionServer.checkOpen(HRegionServer.java:2198)
    at org.apache.hadoop.hbase.regionserver.HRegionServer.get(HRegionServer.java:1499)
    at sun.reflect.GeneratedMethodAccessor12.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.hadoop.hbase.ipc.HBaseRPC$Server.call(HBaseRPC.java:561)
    at org.apache.hadoop.hbase.ipc.HBaseServer$Handler.run(HBaseServer.java:1025)

    at org.apache.hadoop.hbase.ipc.HBaseClient.call(HBaseClient.java:749)
    at org.apache.hadoop.hbase.ipc.HBaseRPC$Invoker.invoke(HBaseRPC.java:255)
    at $Proxy1.get(Unknown Source)
    at org.apache.hadoop.hbase.catalog.MetaReader.getRegion(MetaReader.java:286)
    at org.apache.hadoop.hbase.master.AssignmentManager.processRegionInTransition(AssignmentManager.java:250)
    at org.apache.hadoop.hbase.master.AssignmentManager.processFailover(AssignmentManager.java:209)
    at org.apache.hadoop.hbase.master.HMaster.finishInitialization(HMaster.java:392)
    at org.apache.hadoop.hbase.master.HMaster.run(HMaster.java:268)
2010-10-21 06:45:58,617 INFO org.apache.hadoop.hbase.master.HMaster: Aborting
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12477956">HBASE-3138</key>
            <summary>When new master joins running cluster but meta is yanked from it as processing RIT, gets unexpected state</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Thu, 21 Oct 2010 07:20:33 +0000</created>
                <updated>Wed, 22 Apr 2015 00:45:57 +0000</updated>
                            <resolved>Wed, 22 Apr 2015 00:45:56 +0000</resolved>
                                                    <fixVersion>0.92.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12927258" author="streamy" created="Tue, 2 Nov 2010 02:17:27 +0000"  >&lt;p&gt;This is a little tricky.  What should we do when we get an exception processing a RIT during failover?  We could just log it and move on.  If we ensure that we put the state into RIT in-memory map as soon as possible, then even if we get an exception, we&apos;ll time it out later and we won&apos;t lose track.&lt;/p&gt;</comment>
                            <comment id="12929304" author="streamy" created="Sun, 7 Nov 2010 00:36:29 +0000"  >&lt;p&gt;The issue is we don&apos;t have an HRI for the region-in-transition because we can&apos;t get to META.  Without the HRI, we can&apos;t properly setup the state in RIT map.&lt;/p&gt;

&lt;p&gt;We could serialize the HRI into the RIT node and use it there (right now we have byte [] regionName in there).&lt;/p&gt;</comment>
                            <comment id="12929311" author="stack" created="Sun, 7 Nov 2010 02:58:27 +0000"  >&lt;p&gt;Regionname in RIT is close to useless.  Serialized HRI would for sure be better.&lt;/p&gt;</comment>
                            <comment id="12930489" author="stack" created="Wed, 10 Nov 2010 05:15:51 +0000"  >&lt;p&gt;Moving out.  Its failure of master joining running cluster.  Can restart master.  Should join fine on second attempt.  That should be fine for 0.90.0.&lt;/p&gt;</comment>
                            <comment id="13102148" author="stack" created="Sat, 10 Sep 2011 21:08:38 +0000"  >&lt;p&gt;Marking as major rather than critical.  Can restart the master which is less than ideal but doubt I&apos;ll get to this issue soon enough to do better fix.&lt;/p&gt;</comment>
                            <comment id="14506138" author="apurtell" created="Wed, 22 Apr 2015 00:45:56 +0000"  >&lt;p&gt;Reopen if reproducible with current shipping code&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12495731">HBASE-3446</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 2 Nov 2010 02:17:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26667</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 34 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02d1z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11716</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>