<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:58:01 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-8734/HBASE-8734.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-8734] HBase side support for BIGTOP-1007 (Introduce a modules system for HBase coprocessor applications)</title>
                <link>https://issues.apache.org/jira/browse/HBASE-8734</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/BIGTOP-1007&quot; title=&quot;Introduce a modules system for HBase coprocessor applications&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BIGTOP-1007&quot;&gt;BIGTOP-1007&lt;/a&gt; proposes a modules system convention (&quot;/etc/hbase/modules.d&quot;), a common pattern used for example by Apache httpd, for easily installation and removal of HBase coprocessor applications.&lt;/p&gt;

&lt;p&gt;Will propose any HBase side changes needed here, or close soon if none are required.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12652427">HBASE-8734</key>
            <summary>HBase side support for BIGTOP-1007 (Introduce a modules system for HBase coprocessor applications)</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="apurtell">Andrew Purtell</reporter>
                        <labels>
                    </labels>
                <created>Wed, 12 Jun 2013 16:25:29 +0000</created>
                <updated>Mon, 12 May 2014 03:23:10 +0000</updated>
                                                                            <component>Coprocessors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13691220" author="apurtell" created="Sat, 22 Jun 2013 19:00:28 +0000"  >&lt;p&gt;Copied here from &lt;a href=&quot;https://issues.apache.org/jira/browse/BIGTOP-1007?focusedCommentId=13691014&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13691014:&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/BIGTOP-1007?focusedCommentId=13691014&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13691014:&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Could you please elaborate on what kind of files are you expecting to be dropped into /etc/hbase/modules.d?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Still have to hack this out. Here&apos;s what I&apos;m thinking:&lt;/p&gt;

&lt;p&gt;1. An hbase-site.xml file that will be merged with the main file at/etc/hbase/conf/hbase-site.xml and those of other installed coprocessors. The union becomes the configuration for HBase, kept in /var/lib/hbase maybe. There is a tool for merging site files, I want to start with this. May need extension to control how system coprocessors are ordered in the result. (That would be done under &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8734&quot; title=&quot;HBase side support for BIGTOP-1007 (Introduce a modules system for HBase coprocessor applications)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8734&quot;&gt;HBASE-8734&lt;/a&gt;.) Think of how Gnome packages regenerate various catalogs after installation or removal. Since users may edit the files under /etc/hbase, the init script should check the timestamp of the machine generated file against the site file(s) under /etc and regenerate as needed. &lt;/p&gt;

&lt;p&gt;2. Shell scripts, named something like &quot;master-up&quot;, &quot;master-down&quot;, &quot;regionserver-up&quot;, and &quot;regionserver-down&quot;. To be executed post startup and pre shutdown accordingly. &lt;/p&gt;

&lt;p&gt;So then a coprocessor based HBase &quot;application&quot; can inject just its bits into the HBase configuration on package install, and easily undo that upon package removal, without touching the main site file.&lt;/p&gt;

&lt;p&gt;So taking Phoenix as an example:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;/etc/hbase/modules.d/
    phoenix/
        hbase-site.xml
        master-down
        master-up
        regionserver-down
        regionserver-up
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;</comment>
                            <comment id="13691709" author="anoop.hbase" created="Mon, 24 Jun 2013 05:38:39 +0000"  >&lt;blockquote&gt;&lt;p&gt;Within the modules.d/ directory, one additional level of subdirectories can be created, into which a package can drop site xml fragments and scripts to execute after regionserver and master (re)start.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;What about the execution order of the CPs. We will call in the order in which it is coming in the final conf file. You mention about &quot;to control how system coprocessors are ordered&quot;. (The AccessController cp, we might want to be the 1st..)  What abt the user CPs . Some times I will need one of my CP to be the last one in the chain or some other way around. &lt;/p&gt;</comment>
                            <comment id="13692337" author="apurtell" created="Mon, 24 Jun 2013 20:25:31 +0000"  >&lt;blockquote&gt;&lt;p&gt;What about the execution order of the CPs. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;There are a couple of ways to do this. See subsequent discussion on &lt;a href=&quot;https://issues.apache.org/jira/browse/BIGTOP-1007&quot; title=&quot;Introduce a modules system for HBase coprocessor applications&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BIGTOP-1007&quot;&gt;BIGTOP-1007&lt;/a&gt;. Was thinking of modifying the system coprocessor specifications in hbase site files to allow for optional path to jar instead of requiring dropping jars on the master or RS classpath. Can also modify for specifying priority. In other words, make system coprocessor specifications look and function like table coprocessor specifications.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12652426">BIGTOP-1007</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 24 Jun 2013 05:38:39 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>332751</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 25 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1lei7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>333080</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>