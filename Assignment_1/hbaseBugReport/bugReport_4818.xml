<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:22:17 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-4818/HBASE-4818.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-4818] HBase Shell - Add support for formatting row keys before output</title>
                <link>https://issues.apache.org/jira/browse/HBASE-4818</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;As many HBase users use binary row keys rather than strings to optimize memory consumption displaying an escaped string in the HBase shell isn&apos;t useful (and takes a lot of screen space)&lt;br/&gt;
Allowing user to provide a row key formatter as part of the scan\get commands would allow developers to display the row key in a way thats makes sense for them.&lt;/p&gt;

&lt;p&gt;Example:&lt;br/&gt;
scan &apos;stats&apos;, &lt;/p&gt;
{ ROWFORMATTER =&amp;gt; MyRowFormatter.new }

&lt;p&gt;The row formatter simply gets the bytes array key and formats it to a string.&lt;br/&gt;
Its an easy change tomake with simple monkey-patching of the shell commands but I would be happy to see it as part of the shell itself.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12531897">HBASE-4818</key>
            <summary>HBase Shell - Add support for formatting row keys before output</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ekampf">Eran Kampf</reporter>
                        <labels>
                    </labels>
                <created>Fri, 18 Nov 2011 07:50:18 +0000</created>
                <updated>Sun, 8 Jun 2014 21:40:02 +0000</updated>
                            <resolved>Sun, 8 Jun 2014 21:40:02 +0000</resolved>
                                                                    <component>shell</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                    <timeoriginalestimate seconds="86400">24h</timeoriginalestimate>
                            <timeestimate seconds="86400">24h</timeestimate>
                                        <comments>
                            <comment id="13152725" author="larsgeorge" created="Fri, 18 Nov 2011 08:47:33 +0000"  >&lt;p&gt;I would also like to see this persisted then, i.e. a simply text property file, or in the .irbrc where you can define this per table, so that these classes are loaded implicitly.&lt;/p&gt;</comment>
                            <comment id="13152766" author="ekampf" created="Fri, 18 Nov 2011 10:31:28 +0000"  >&lt;p&gt;Thats a good idea!&lt;br/&gt;
A simple global hash that maps a table name to a row key formatter and then all operations on the table use that formatter unless explicitly given one&lt;/p&gt;</comment>
                            <comment id="13226297" author="xodarap" created="Fri, 9 Mar 2012 18:32:43 +0000"  >&lt;p&gt;Attaching a patch which includes:&lt;/p&gt;

&lt;p&gt;1. The ability to specify a custom formatter on the command line&lt;br/&gt;
2. A sample custom formatter which reverses the keys before printing them in a scan &lt;/p&gt;

&lt;p&gt;You can use the new formatter by doing &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hbase shell --format=Shell::Formatter::ReverseID.&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We have an existing shell variable (JRUBY_OPTS) which you can set in your config script to persist your options, as Lars suggested. I&apos;m not sure how to implement Eran&apos;s suggestion of per-table formatters using the command line; maybe we should deprecate the command line option since it doesn&apos;t do anything anyway and store this in .irbrc.&lt;/p&gt;

&lt;p&gt;Also, the reverse ID formatter works by a kind of hack. &lt;/p&gt;

&lt;p&gt;I&apos;d like to hear from people more familiar with the shell on how to make this better. &lt;/p&gt;</comment>
                            <comment id="13226311" author="tlipcon" created="Fri, 9 Mar 2012 18:51:30 +0000"  >&lt;p&gt;I think this should be a table property, and refer to a Java class name, rather than doing it in ruby. Doing it in ruby only helps with shell, but doing it in Java means we can also use it in the UIs, etc. &lt;a href=&quot;https://issues.apache.org/jira/browse/ACCUMULO-303&quot; title=&quot;Implement per-table persistent formatters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ACCUMULO-303&quot;&gt;&lt;del&gt;ACCUMULO-303&lt;/del&gt;&lt;/a&gt; is helpful reference material.&lt;/p&gt;</comment>
                            <comment id="13226347" author="xodarap" created="Fri, 9 Mar 2012 19:24:00 +0000"  >&lt;p&gt;Todd: I think since we&apos;re using JRuby the formatter can be a java class, right? You&apos;d just have --format=org.apache....&lt;/p&gt;

&lt;p&gt;But I guess we could store it as a table property. &lt;/p&gt;

&lt;p&gt;(Btw: if the formatters are to be useful outside of shell, we&apos;ll need a revamp of how they work. Right now, it just formats text without much knowledge of what the text is - we&apos;d probably want to have FormatKey() FormatColumn() etc. methods. Which is a good idea anyway.)&lt;/p&gt;</comment>
                            <comment id="13231963" author="xodarap" created="Sat, 17 Mar 2012 13:28:09 +0000"  >&lt;p&gt;New patch is a lot cleaner. It moves some formatting from table.rb to HTableFormatter.java like Todd suggested, so it can be used elsewhere. &lt;/p&gt;

&lt;p&gt;There is also scope creep: it parses input as well as formats output (so if you do a get it will translate the rowkey into an internal format first). This is just because it made my head hurt to have the output of scans be one format but the input another.&lt;/p&gt;

&lt;p&gt;Right now there is only one formatter which is set via a shell param, but could be set at a table level - just wasn&apos;t sure if putting it in .irbrc was best or if there was a way we could do it in Java so non-shell would work too. Todd said to make it a &quot;table property&quot;, but I don&apos;t know what this means.&lt;/p&gt;</comment>
                            <comment id="13239943" author="stack" created="Tue, 27 Mar 2012 20:54:59 +0000"  >&lt;p&gt;Patch looks nice Ben.  You have illustrations of it in action?  It looks like it keeps default behavior.  The default htformatter just does the bytes thing we currently have and doing formatting of HRegionInfo cells such as happens up in .META.&lt;/p&gt;

&lt;p&gt;What would it take to have this htformatter work in the ui too as per Todd suggestion?&lt;/p&gt;</comment>
                            <comment id="13240451" author="xodarap" created="Wed, 28 Mar 2012 14:39:13 +0000"  >&lt;p&gt;The ReverseIDFormatter in that patch overrides the default formatter to display row keys in reverse order.&lt;/p&gt;

&lt;p&gt;Something which we will have to think about is how we can maintain usability with these new formatters. Scans, for example, might not go in the order the user predicts because the stored format is different from the displayed one. Similarly with where regions split and so forth. Maybe we should require sort order to be constant across formatted and unformatted row keys (which would make the ReverseIDFormatter and probably most formatters impossible).&lt;/p&gt;

&lt;p&gt;I&apos;m not super familiar with the web UI, but it looks like the only spots we display row keys is when we specify the start and end rows of each region, and when we issue splits/compactions. So that shouldn&apos;t be too bad to change.&lt;/p&gt;</comment>
                            <comment id="13247246" author="xodarap" created="Thu, 5 Apr 2012 14:22:05 +0000"  >&lt;p&gt;I can work on adding this to the web UI if someone can suggest a place to store the formatter preference. &lt;/p&gt;

&lt;p&gt;Should it just be in hbase-site.xml?&lt;/p&gt;</comment>
                            <comment id="14021387" author="apurtell" created="Sun, 8 Jun 2014 21:40:02 +0000"  >&lt;p&gt;Stale issue. Reopen if still relevant.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12518790" name="format3.patch" size="14371" author="xodarap" created="Sat, 17 Mar 2012 13:28:09 +0000"/>
                            <attachment id="12517758" name="hbase-4818.patch" size="2925" author="xodarap" created="Fri, 9 Mar 2012 18:32:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 18 Nov 2011 08:47:33 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>217633</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 27 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02fyv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12188</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>