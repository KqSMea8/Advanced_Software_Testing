<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:36:54 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6453/HBASE-6453.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6453] Hbase Replication point in time feature</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6453</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Now we can not control when hbase replication  start to work. this patch support we set a time stamp filter . All the row which is below this time stamp will not be replicated. We also can delete and show this time stamp in hbase shell if we want to change it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12600144">HBASE-6453</key>
            <summary>Hbase Replication point in time feature</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="terry_zhang">terry zhang</assignee>
                                    <reporter username="terry_zhang">terry zhang</reporter>
                        <labels>
                    </labels>
                <created>Wed, 25 Jul 2012 10:29:02 +0000</created>
                <updated>Wed, 16 Nov 2016 22:02:30 +0000</updated>
                                            <version>2.0.0</version>
                                                    <component>Replication</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13422147" author="terry_zhang" created="Wed, 25 Jul 2012 10:36:05 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hbase(main):001:0&amp;gt; set_timefilter

ERROR: wrong number of arguments (0 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 2)

Here is some help &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; command:
Set a peer cluster time filter to replicate to, the row which time stamp is before
the timestamp will be filtered.

Examples:

  hbase&amp;gt; set_timefilter &apos;1&apos;, &lt;span class=&quot;code-quote&quot;&gt;&quot;1329896850047&quot;&lt;/span&gt;
  hbase&amp;gt; set_timefilter &apos;2&apos;, &lt;span class=&quot;code-quote&quot;&gt;&quot;1329896850047&quot;&lt;/span&gt;


hbase(main):002:0&amp;gt; set_timefilter &apos;1&apos;,&lt;span class=&quot;code-quote&quot;&gt;&quot;1329896850047&quot;&lt;/span&gt;
0 row(s) in 0.3000 seconds
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;set time stamp to 1329896850047. Them all the kvs which is early than 1329896850047 will be filterd&lt;/p&gt;</comment>
                            <comment id="13422148" author="terry_zhang" created="Wed, 25 Jul 2012 10:37:33 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hbase(main):003:0&amp;gt; get_timefilter &apos;1&apos;
PEER_ID                            TIME_FILTER                                                                                      
 1                                 1329896850047     
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;we can show the time stamp by clusterId and check if it is set correctly&lt;/p&gt;</comment>
                            <comment id="13422149" author="terry_zhang" created="Wed, 25 Jul 2012 10:38:49 +0000"  >&lt;p&gt;we also can drop the time filter. after we drop it , time stamp change to zero . and all the kvs will be replicated.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hbase(main):004:0&amp;gt; drop_timefilter &apos;1&apos;
0 row(s) in 0.0030 seconds

hbase(main):005:0&amp;gt; get_timefilter &apos;1&apos;
PEER_ID                            TIME_FILTER                                                                                      
 1                                 0     
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13422631" author="stack" created="Wed, 25 Jul 2012 21:29:27 +0000"  >&lt;p&gt;So idea is you&apos;d set this timestamp and we&apos;d replicate from that time on?&lt;/p&gt;

&lt;p&gt;What is the use case?  Why not have replication happen when enabled?&lt;/p&gt;

&lt;p&gt;You write the timestamp to zk under clusterid znode?  Into a znode named timefilter?  The name should be timestamp?  Or start_timestamp?&lt;/p&gt;

&lt;p&gt;Thats great you added shell commands for setting/getting.  Should they have replication mentioned in command name so they are known to be replication facility?  Maybe its not necessary as long as these new commands are grouped w/ other replication commands (that is so?)&lt;/p&gt;

&lt;p&gt;Thanks for the new feature Terry.&lt;/p&gt;</comment>
                            <comment id="13422872" author="terry_zhang" created="Thu, 26 Jul 2012 03:41:40 +0000"  >&lt;p&gt;Hi&#65292;Stack. I think we can use point in time feature with Snapshots feature (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6055&quot; title=&quot;Offline Snapshots in HBase 0.96&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6055&quot;&gt;&lt;del&gt;HBASE-6055&lt;/del&gt;&lt;/a&gt;) in below case.&lt;br/&gt;
1. Master cluster in data center China do a Snapshot at Time A&lt;br/&gt;
2. copy the Snapshot to Slave cluster in data center US and Set Replication Time stamp to A&lt;br/&gt;
3. Restore snapshots (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6230&quot; title=&quot;[brainstorm] &amp;quot;Restore&amp;quot; snapshots for HBase 0.96&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6230&quot;&gt;&lt;del&gt;HBASE-6230&lt;/del&gt;&lt;/a&gt; ) for Slave cluster and start replication.&lt;/p&gt;

&lt;p&gt;Them Slave cluster data will be as same as Master Cluster . And data is more safe and US user can visit Slave cluster for getting or scanning data to decrease the stress for China data center. Enable replication can not control the accurate time so may be it will lose some data or replicate some useless data. Mysql also has point in time/position feature in it replication Framework. It is very convenience for data center administrate to use. &lt;/p&gt;

&lt;p&gt;We can give some better name for this operation cause I am not good at naming ...&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12537820" name="hbase-6453-v1.patch" size="11074" author="terry_zhang" created="Wed, 25 Jul 2012 10:33:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 25 Jul 2012 21:29:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>256614</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 21 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hv07:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>102285</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>