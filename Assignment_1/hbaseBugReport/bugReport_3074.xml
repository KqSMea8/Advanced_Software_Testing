<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:07:08 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-3074/HBASE-3074.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-3074] Zookeeper test failing on hudson</title>
                <link>https://issues.apache.org/jira/browse/HBASE-3074</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;We&apos;re failing here because .META. moved:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
retrying after sleep of 5000 because: Connection refused
2010-10-02 00:50:49,728 DEBUG [main] client.HConnectionManager$HConnectionImplementation(717): locateRegionInMeta attempt 2 of 4 failed; retrying after sleep of 5000 because: Connection refused
2010-10-02 00:50:59,730 DEBUG [main] client.HConnectionManager$HConnectionImplementation(717): locateRegionInMeta attempt 0 of 4 failed; retrying after sleep of 5000 because: Connection refused
2010-10-02 00:51:04,731 DEBUG [main] client.HConnectionManager$HConnectionImplementation(717): locateRegionInMeta attempt 1 of 4 failed; retrying after sleep of 5000 because: Connection refused
2010-10-02 00:51:09,732 DEBUG [main] client.HConnectionManager$HConnectionImplementation(717): locateRegionInMeta attempt 2 of 4 failed; retrying after sleep of 5000 because: Connection refused
2010-10-02 00:51:14,734 WARN  [main] client.HConnectionManager$HConnectionImplementation(597): Encounted problems when prefetch META table: 
org.apache.hadoop.hbase.client.RetriesExhaustedException: Trying to contact region server vesta.apache.org:54172 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; region .META.,,1, row &apos;test1285980613475,,99999999999999&apos;, but failed after 4 attempts.
Exceptions:
java.net.ConnectException: Connection refused
java.net.ConnectException: Connection refused
java.net.ConnectException: Connection refused
java.net.ConnectException: Connection refused

	at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.getRegionServerWithRetries(HConnectionManager.java:946)
	at org.apache.hadoop.hbase.client.HTable.getRowOrBefore(HTable.java:500)
	at org.apache.hadoop.hbase.client.MetaScanner.metaScan(MetaScanner.java:104)
	at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.prefetchRegionCache(HConnectionManager.java:594)
	at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegionInMeta(HConnectionManager.java:645)
	at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegion(HConnectionManager.java:539)
	at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegion(HConnectionManager.java:507)
	at org.apache.hadoop.hbase.client.HBaseAdmin.createTable(HBaseAdmin.java:287)
	at org.apache.hadoop.hbase.client.HBaseAdmin.createTable(HBaseAdmin.java:207)
	at org.apache.hadoop.hbase.TestZooKeeper.testSanity(TestZooKeeper.java:140)
...

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;m not sure why we&apos;re not picking up new locations.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12475696">HBASE-3074</key>
            <summary>Zookeeper test failing on hudson</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stack">stack</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Sat, 2 Oct 2010 23:45:19 +0000</created>
                <updated>Fri, 20 Nov 2015 12:43:17 +0000</updated>
                            <resolved>Sun, 10 Oct 2010 20:52:51 +0000</resolved>
                                                    <fixVersion>0.90.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12917264" author="stack" created="Sat, 2 Oct 2010 23:47:12 +0000"  >&lt;p&gt;Committing this... adds detail to logging messages so can tell more about whats happening.&lt;/p&gt;</comment>
                            <comment id="12919125" author="stack" created="Fri, 8 Oct 2010 01:11:24 +0000"  >&lt;p&gt;Tests were sharing an HCM.  First test was expiring it.  HCMs were proceeding though ZKW had expired; was just serving stale data.  On expiration, the HCM actually gets an abort but we do nothing but log currently.  Now we&apos;ll set an actually unused &apos;closed&apos; flag.&lt;/p&gt;

&lt;p&gt;The first TZ test was also doing nothing.  Changed it to assert connection closed.  Also corralled this session expiring test making sure the connection used herein will not be used elsewhere (by making a new Configuration instance).&lt;/p&gt;

&lt;p&gt;I&apos;m going to commit.  Hopefully fixes ZK up on hudson.  MIght break something else though, but probably something we want to break because its reliant on flakey stale data to run.&lt;/p&gt;</comment>
                            <comment id="12919127" author="stack" created="Fri, 8 Oct 2010 01:14:28 +0000"  >&lt;p&gt;committed patch.  lets see how hudson likes it.&lt;/p&gt;</comment>
                            <comment id="12919168" author="stack" created="Fri, 8 Oct 2010 06:02:58 +0000"  >&lt;p&gt;Here is part 2 of this fix where I generalize the fix I made for zk to see if it&apos;ll fix other failing tests.  In particular TestClusterRestart.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
HConnections go stale &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; miniCluster is shutdown on them.  Make it
so we make &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HConnections on other side of a &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; cluster spin up.
Was cause &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; failing of last few tests.

M src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java
  So &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; you shutdown a cluster and you have HConnections that were
  made using the HTUs Configuration, they&apos;ll all be stale --
  session expired -- and won&apos;t be of any use connecting to &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; cluster
  that comes up... now that HConnection is first class dependent on
  its own ZooKeeperWatcher instance.
  So, I went through &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; class and fixed it up so we use &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;
  Configurations when could be called either side of a mini cluster
  restart.  Added note to getConfiguration to be careful what you
  &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; with it because Configuration makes &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; an HConnection.
M src/test/java/org/apache/hadoop/hbase/TestZooKeeper.java
  Don&apos;t use same Configuration everywhere.
M src/test/java/org/apache/hadoop/hbase/master/TestRestartCluster.java
  Make &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Configuration when we make &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Cluster so we get fresh
  HConnection -- not one w/ stale data, disconnected.
M src/main/java/org/apache/hadoop/hbase/master/ServerManager.java
  Check that &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; server that comes in on a regionServerReport
  doesn&apos;t have same port and host as one we have already registered
  as we &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; in reportForDuty call (This is preemtive bug fix).
M src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java
  Save of an identifier &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; HCM and use it in log messages, particularly
  when we close -- helps debugging.
M src/main/java/org/apache/hadoop/hbase/client/HBaseAdmin.java
  getConfiguration added.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12919658" author="stack" created="Sun, 10 Oct 2010 20:52:51 +0000"  >&lt;p&gt;The two patches here would seem to have resovled a few of the failures, TestZooKeeper in particular.  I have not seen it fail in a good while now up on hudson.  Resolving.&lt;/p&gt;</comment>
                            <comment id="12919956" author="lars_francke" created="Mon, 11 Oct 2010 19:24:47 +0000"  >&lt;p&gt;I have no idea if this has anything to do with the other issue from this jira but the test testClientSessionExpired fails for me about 1/3 of the time. I&apos;ve attached a log output. The version that ran on was cosmetically modified (line numbers won&apos;t match up) but I just tried on a trunk build and had it fail as well.&lt;/p&gt;</comment>
                            <comment id="15017484" author="lars_francke" created="Fri, 20 Nov 2015 12:43:17 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12456217" name="3074-xtra-debug.txt" size="5569" author="stack" created="Sat, 2 Oct 2010 23:47:12 +0000"/>
                            <attachment id="12456653" name="3074.txt" size="4491" author="stack" created="Fri, 8 Oct 2010 01:11:24 +0000"/>
                            <attachment id="12456671" name="hbase-3074-part2.txt" size="21310" author="stack" created="Fri, 8 Oct 2010 06:02:58 +0000"/>
                            <attachment id="12456884" name="lars-stacktrace.1.txt" size="22100" author="lars_francke" created="Mon, 11 Oct 2010 19:24:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 11 Oct 2010 19:24:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26629</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hkmn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>100604</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>