<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:11:38 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-3609/HBASE-3609.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-3609] Improve the selection of regions to balance; part 2</title>
                <link>https://issues.apache.org/jira/browse/HBASE-3609</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;See &apos;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3586&quot; title=&quot;Improve the selection of regions to balance&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3586&quot;&gt;&lt;del&gt;HBASE-3586&lt;/del&gt;&lt;/a&gt;  Improve the selection of regions to balance&apos; for discussion of algorithms that improve on current random assignment.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12500702">HBASE-3609</key>
            <summary>Improve the selection of regions to balance; part 2</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yuzhihong@gmail.com">Ted Yu</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Mar 2011 23:39:51 +0000</created>
                <updated>Fri, 20 Nov 2015 12:40:31 +0000</updated>
                            <resolved>Mon, 18 Apr 2011 18:12:25 +0000</resolved>
                                                    <fixVersion>0.92.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13003840" author="yuzhihong@gmail.com" created="Tue, 8 Mar 2011 07:05:44 +0000"  >&lt;p&gt;Initial attempt.&lt;/p&gt;</comment>
                            <comment id="13003842" author="yuzhihong@gmail.com" created="Tue, 8 Mar 2011 07:13:40 +0000"  >&lt;p&gt;hbase-3609.txt implemented first part of the idea expressed in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3586&quot; title=&quot;Improve the selection of regions to balance&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3586&quot;&gt;&lt;del&gt;HBASE-3586&lt;/del&gt;&lt;/a&gt; @ 06/Mar/11 07:10&lt;br/&gt;
The alternation between head and tail of regions list happens after each addition to regionsToMove. So this should provide good distribution of young and old regions.&lt;/p&gt;

&lt;p&gt;The implementation for second part needs more refinement because regionsToMove is manipulated in three loops in balanceCluster().&lt;/p&gt;

&lt;p&gt;TestLoadBalancer passes.&lt;/p&gt;

&lt;p&gt;Please review.&lt;/p&gt;</comment>
                            <comment id="13004080" author="yuzhihong@gmail.com" created="Tue, 8 Mar 2011 17:32:02 +0000"  >&lt;p&gt;Sort regions before fetching any region&lt;/p&gt;</comment>
                            <comment id="13004082" author="yuzhihong@gmail.com" created="Tue, 8 Mar 2011 17:36:52 +0000"  >&lt;p&gt;hbase-3609-by-region-age.txt is the refined version.&lt;br/&gt;
This accounts for the out-of-band regions which were assigned to the server after some other region server crashed.&lt;br/&gt;
In that scenario, random selection may not work very well because the regions on individual region server are not sorted.&lt;br/&gt;
Both TestLoadBalancer and TestAdmin pass.&lt;/p&gt;</comment>
                            <comment id="13004140" author="yuzhihong@gmail.com" created="Tue, 8 Mar 2011 19:01:45 +0000"  >&lt;p&gt;If someone can point me to an implementation of Double-Ended Priority Queue in Java, I can use it in the three loops involving regionsToMove.&lt;/p&gt;</comment>
                            <comment id="13004141" author="yuzhihong@gmail.com" created="Tue, 8 Mar 2011 19:10:44 +0000"  >&lt;p&gt;I will try &lt;a href=&quot;http://download.oracle.com/javase/6/docs/api/java/util/Deque.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://download.oracle.com/javase/6/docs/api/java/util/Deque.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13004153" author="yuzhihong@gmail.com" created="Tue, 8 Mar 2011 19:38:00 +0000"  >&lt;p&gt;Can we upgrade Guava so that I can use this ?&lt;br/&gt;
&lt;a href=&quot;http://guava-libraries.googlecode.com/svn/trunk/javadoc/com/google/common/collect/MinMaxPriorityQueue.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://guava-libraries.googlecode.com/svn/trunk/javadoc/com/google/common/collect/MinMaxPriorityQueue.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13004250" author="yuzhihong@gmail.com" created="Tue, 8 Mar 2011 22:12:06 +0000"  >&lt;p&gt;Improved region selection using Double-Ended Priority Queues&lt;/p&gt;</comment>
                            <comment id="13004254" author="yuzhihong@gmail.com" created="Tue, 8 Mar 2011 22:13:59 +0000"  >&lt;p&gt;This is close to what I described in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3586&quot; title=&quot;Improve the selection of regions to balance&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3586&quot;&gt;&lt;del&gt;HBASE-3586&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
I used MinMaxPriorityQueue to alternately choose regions from head and tail of regionsToMove.&lt;/p&gt;

&lt;p&gt;Both TestLoadBalancer and TestAdmin pass.&lt;/p&gt;</comment>
                            <comment id="13004392" author="stack" created="Wed, 9 Mar 2011 06:25:45 +0000"  >&lt;p&gt;On upgrading guava, thats no problem.  Just include in your patch a change to pom.xml that moves the guava version forward Ted.&lt;/p&gt;</comment>
                            <comment id="13004393" author="stack" created="Wed, 9 Mar 2011 06:29:05 +0000"  >&lt;p&gt;Patch looks good Ted.  How you propose we add it in?  It&apos;d be put in place instead of the randomizing balancing?  Or should it be a configuration where we load different balancing algoritms.  For example, I can imagine that some would like to balance based off requests/second.... rather than region count. &lt;/p&gt;

&lt;p&gt;Oh, you think a test would make sense for your stuff?&lt;/p&gt;

&lt;p&gt;Good stuff.&lt;/p&gt;</comment>
                            <comment id="13004591" author="yuzhihong@gmail.com" created="Wed, 9 Mar 2011 15:06:47 +0000"  >&lt;p&gt;I was looking for a class which can store moving average of requests/second.&lt;br/&gt;
Shall we add that policy in another JIRA ?&lt;/p&gt;</comment>
                            <comment id="13004627" author="yuzhihong@gmail.com" created="Wed, 9 Mar 2011 16:04:39 +0000"  >&lt;p&gt;I am thinking about adding this enum:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;enum&lt;/span&gt; BalancerPolicy {
	  BALANCE_REGION_COUNT,
	  BALANCE_REQUESTS_PER_MINUTE,
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Shall we introduce hbase.balancer.policy in hbase-default.xml which reflects the above enum ?&lt;/p&gt;</comment>
                            <comment id="13004911" author="yuzhihong@gmail.com" created="Thu, 10 Mar 2011 01:04:28 +0000"  >&lt;p&gt;Depending on the chosen policy, I plan to introduce interface, RegionPlanHolder, which abstracts the concrete data structures holding RegionPlans:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; RegionPlanHolder {
	  RegionPlanHolder create();
	  &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; size();
	  void add(RegionPlan rp);
	  &lt;span class=&quot;code-comment&quot;&gt;// removes the head element
&lt;/span&gt;	  RegionPlan remove();
	  &lt;span class=&quot;code-comment&quot;&gt;// removes the tail element
&lt;/span&gt;	  RegionPlan removeLast();
	  &lt;span class=&quot;code-comment&quot;&gt;// retrieves element at index 
&lt;/span&gt;	  RegionPlan get(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; index);
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Then regionsToMove would be declared as RegionPlanHolder so that implementation detail such as the following would be hidden in balanceCluster().&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    MinMaxPriorityQueue&amp;lt;RegionPlan&amp;gt; regionsToMove = MinMaxPriorityQueue.orderedBy(rpComparator).create();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13004966" author="yuzhihong@gmail.com" created="Thu, 10 Mar 2011 05:10:27 +0000"  >&lt;p&gt;Since request count (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3507&quot; title=&quot;requests count per HRegion&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3507&quot;&gt;&lt;del&gt;HBASE-3507&lt;/del&gt;&lt;/a&gt;) is contained in HRegion, not HRegionInfo, there is more work to be done so that decaying moving average of request rate (in Ryan&apos;s term) is available to LoadBalancer.&lt;br/&gt;
This can be done in other JIRAs.&lt;/p&gt;

&lt;p&gt;I suggest 3609-alternate.txt be checked in first.&lt;/p&gt;</comment>
                            <comment id="13004967" author="yuzhihong@gmail.com" created="Thu, 10 Mar 2011 05:19:16 +0000"  >&lt;p&gt;The goal of 3609-alternate.txt is to balance the &apos;ages&apos; (reflected by sum of region Ids) of regions across region servers.&lt;br/&gt;
Currently HServerLoad doesn&apos;t contain HRegionInfo information. This makes validating the above goal less straightforward.&lt;/p&gt;</comment>
                            <comment id="13018348" author="yuzhihong@gmail.com" created="Mon, 11 Apr 2011 13:47:17 +0000"  >&lt;p&gt;Use latest Guava release.&lt;/p&gt;</comment>
                            <comment id="13018431" author="yuzhihong@gmail.com" created="Mon, 11 Apr 2011 16:55:14 +0000"  >&lt;p&gt;This version takes into account whether a new region server has just been discovered by master.&lt;/p&gt;</comment>
                            <comment id="13018438" author="yuzhihong@gmail.com" created="Mon, 11 Apr 2011 17:06:55 +0000"  >&lt;p&gt;From Stan Barton:&lt;br/&gt;
Apr 8th:&lt;br/&gt;
I can see that the regionserver that gets all the inserts makes pauses&lt;br/&gt;
time to time - I checked the log and it is because (I assume) the&lt;br/&gt;
regions of other tables from this RS are re-assigned elsewhere. When I&lt;br/&gt;
started inserting, the table was empty, now it has ~20 regions, all&lt;br/&gt;
assigned to one RS, that kicks the scale out property out of the&lt;br/&gt;
system. The insertion process is still running, if you are interested&lt;br/&gt;
in some other info.&lt;/p&gt;

&lt;p&gt;Apr 11th:&lt;br/&gt;
I have downloaded the 0.90.2 candidate but I regret to inform you,&lt;br/&gt;
that it did not help to solve the issue. I am re-doing the tests and&lt;br/&gt;
again, all the newly created regions are being assigned to a single&lt;br/&gt;
RS. It is a real performance killer.&lt;/p&gt;</comment>
                            <comment id="13018725" author="stack" created="Tue, 12 Apr 2011 05:20:56 +0000"  >&lt;p&gt;I wonder why all regions of a table are assigned to one regionserver when we added randomization to the balancer in 0.90.2?  Didn&apos;t we? (i.e. &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3586&quot; title=&quot;Improve the selection of regions to balance&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3586&quot;&gt;&lt;del&gt;HBASE-3586&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="13018728" author="yuzhihong@gmail.com" created="Tue, 12 Apr 2011 05:27:51 +0000"  >&lt;p&gt;More background for Stan&apos;s cluster:&lt;br/&gt;
There&apos;re at least 600 regions on each region server. When 30 new regions were created on the same region server, random selector only chose 3 out of the 30 new regions for reassignment. The other region selection was from inactive (old) regions. This is expected behavior because new and old regions were selected equally probably.&lt;/p&gt;

&lt;p&gt;Basically we traded some optimization for safety of not overloading a newly discovered region server.&lt;/p&gt;

&lt;p&gt;My latest patch avoids the above behavior. At the same time, it also can deal with a region server which just joined the cluster and should be assigned both old and new regions.&lt;/p&gt;</comment>
                            <comment id="13018729" author="stack" created="Tue, 12 Apr 2011 05:31:53 +0000"  >&lt;p&gt;Looking at patch, I see removal of testRandomizer.  Would be nice if a new test of new functionality took its place.&lt;/p&gt;

&lt;p&gt;I like how you use regionid figuring region age.  Would suggest you add a little documentation that you depend on regionid being a timestamp (would also clarify what you are up to here).&lt;/p&gt;

&lt;p&gt;Do you have to do this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;+      &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; emptyRegionServerPresent) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So this algorithm balances exclusively by age?   No randomness?&lt;/p&gt;

&lt;p&gt;Would be nice if you described the algo in a comment included in the patch.&lt;/p&gt;

&lt;p&gt;How we know this algo better than what we have?&lt;/p&gt;

&lt;p&gt;Patch looks good otherwise Ted.&lt;/p&gt;</comment>
                            <comment id="13018735" author="yuzhihong@gmail.com" created="Tue, 12 Apr 2011 06:03:34 +0000"  >&lt;p&gt;For unit test, the region Ids created by mockClusterServers() have the same value - because all the regions are created at almost the same time.&lt;br/&gt;
It will take a little more time to devise appropriate test case generation and validate the balancing moves.&lt;/p&gt;

&lt;p&gt;For the moment, I still base my improvement on the existing framework where region count plays dominant factor.&lt;/p&gt;

&lt;p&gt;One of the goals of this JIRA is to remove randomness from LoadBalancer so that we can deterministically produce near-optimal balancing actions.&lt;br/&gt;
The new parameter, emptyRegionServerPresent, helps decide whether we should move old and new regions to other servers.&lt;/p&gt;

&lt;p&gt;I will upload a new patch where I describe the above in detail. I even plan to blog about the history of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3586&quot; title=&quot;Improve the selection of regions to balance&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3586&quot;&gt;&lt;del&gt;HBASE-3586&lt;/del&gt;&lt;/a&gt; and this JIRA.&lt;/p&gt;

&lt;p&gt;To validate my latest patch, I need a little help from community participants. Our use case creates hbase tables frequently in our flow with pre-split regions. Since those regions get round-robin assigned initially, it is not easy to reproduce what Stan experienced.&lt;/p&gt;

&lt;p&gt;Thanks for the review and suggestion, Stack.&lt;/p&gt;</comment>
                            <comment id="13018737" author="yuzhihong@gmail.com" created="Tue, 12 Apr 2011 06:17:05 +0000"  >&lt;p&gt;Add javadoc for emptyRegionServerPresent.&lt;br/&gt;
Also explained how the new mechanism works.&lt;/p&gt;</comment>
                            <comment id="13018871" author="yuzhihong@gmail.com" created="Tue, 12 Apr 2011 15:27:57 +0000"  >&lt;p&gt;This patch combines 3609-empty-RS.txt with my earlier enhancement.&lt;br/&gt;
Basically I find the new regions and put them on different underloaded servers. Previously one underloaded server would be filled up before the next underloaded server is considered.&lt;/p&gt;</comment>
                            <comment id="13019025" author="yuzhihong@gmail.com" created="Tue, 12 Apr 2011 20:38:04 +0000"  >&lt;p&gt;Modified unit test so that regions generated have unique regionIds.&lt;br/&gt;
This is first step toward better verification of balancing results.&lt;br/&gt;
Also fixed a bug according to Stanislav Barton&apos;s feedback.&lt;/p&gt;</comment>
                            <comment id="13019031" author="yuzhihong@gmail.com" created="Tue, 12 Apr 2011 20:51:26 +0000"  >&lt;p&gt;Removed statements used for debugging.&lt;/p&gt;</comment>
                            <comment id="13019193" author="stack" created="Wed, 13 Apr 2011 04:20:23 +0000"  >&lt;p&gt;Ted:&lt;/p&gt;

&lt;p&gt;Why do we pass the emptyRS flag?  Didn&apos;t we just insert an HServerInfo for the server with not regions into the assignments Map?  Isn&apos;t an HSI that has an empty array of Regions enough of a flag such that you don&apos;t need this extra boolean?&lt;/p&gt;

&lt;p&gt;Is this used?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; regionId = 0;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The new javadoc helps.&lt;/p&gt;

&lt;p&gt;Otherwise patch looks good Ted.  It seems to be an ornamentation on what we had previous; rather than taking regionservers at random, it alternatively takes the newest and then the oldest off the regionserver &amp;#8211; is that right?  (Is that explained in the patch?  I don&apos;t think I can see it).  You&apos;ve also added this enhancement: &quot;Basically I find the new regions and put them on different underloaded servers. Previously one underloaded server would be filled up before the next underloaded server is considered.&quot;  Any chance of your proving the last enhancement with a unit test?&lt;/p&gt;

&lt;p&gt;All the other load balancer tests pass?&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="13019199" author="yuzhihong@gmail.com" created="Wed, 13 Apr 2011 04:34:55 +0000"  >&lt;p&gt;Empty server can be detected within balanceCluster(). But this detection has been performed by Master, hence the flag.&lt;/p&gt;

&lt;p&gt;The static regionId helps make each region Id unique. I actually utilized this fact to debug my code.&lt;/p&gt;

&lt;p&gt;Let me think more about writing unit test(s) that verifies the distribution over underloaded servers.&lt;/p&gt;

&lt;p&gt;Both TestLoadBalancer and TestAdmin pass.&lt;/p&gt;

&lt;p&gt;Preliminary response from Stan Barton showed improvement over random selector.&lt;br/&gt;
I am waiting for further feedback from gaojinchao@huawei.com and Stan.&lt;/p&gt;</comment>
                            <comment id="13019204" author="stack" created="Wed, 13 Apr 2011 04:49:24 +0000"  >&lt;blockquote&gt;&lt;p&gt;Empty server can be detected within balanceCluster(). But this detection has been performed by Master, hence the flag.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Thats fair.  Its nice having the balance invocation method simple as possible though.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;The static regionId helps make each region Id unique. I actually utilized this fact to debug my code.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I missed that it was being used.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Preliminary response from Stan Barton showed improvement over random selector.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I am waiting for further feedback from gaojinchao@huawei.com and Stan.&lt;/p&gt;

&lt;p&gt;I think that if you get good feedback from others, that&apos;ll help getting this patch committed.&lt;/p&gt;

&lt;p&gt;Good stuff Ted.&lt;/p&gt;</comment>
                            <comment id="13019402" author="yuzhihong@gmail.com" created="Wed, 13 Apr 2011 16:07:13 +0000"  >&lt;p&gt;Removed the changes in Master.&lt;br/&gt;
The boolean flag can be computed in the first loop of balanceCluster()&lt;/p&gt;</comment>
                            <comment id="13019560" author="yuzhihong@gmail.com" created="Wed, 13 Apr 2011 21:18:55 +0000"  >&lt;p&gt;From Stan Barton who helps me experiment with my changes:&lt;/p&gt;

&lt;p&gt;There is no easy&lt;br/&gt;
way to check how many regions are assigned to particular RS, so will&lt;br/&gt;
probably need to write some small parser to prove that.&lt;/p&gt;

&lt;p&gt;I think we should backport &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3704&quot; title=&quot;Show per region request count in table.jsp&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3704&quot;&gt;&lt;del&gt;HBASE-3704&lt;/del&gt;&lt;/a&gt; (at least Regions by Region Server) to 0.90.3 so that people can easily tell how (un)even the load is distributed.&lt;/p&gt;</comment>
                            <comment id="13019632" author="yuzhihong@gmail.com" created="Thu, 14 Apr 2011 00:36:25 +0000"  >&lt;p&gt;Made changes to utilize the randomizer which shuffles the list of underloaded region servers.&lt;br/&gt;
This way we can avoid distributing offloaded regions to few region servers. &lt;/p&gt;</comment>
                            <comment id="13020075" author="yuzhihong@gmail.com" created="Thu, 14 Apr 2011 22:46:13 +0000"  >&lt;p&gt;A brief summary can be found here: &lt;a href=&quot;http://zhihongyu.blogspot.com/2011/04/load-balancer-in-hbase-090.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://zhihongyu.blogspot.com/2011/04/load-balancer-in-hbase-090.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13020184" author="stack" created="Fri, 15 Apr 2011 04:41:48 +0000"  >&lt;p&gt;@Ted I&apos;m game for committing this to branch if you add javadoc explaining your new balance algorithm; the rules you&apos;ve implemented.  Boil down your blog and use that.  I&apos;m uneasy about the lack of unit test but if its too hard to do, I think its OK getting the balancer changes in now into TRUNK before we start in trying to harden 0.92.&lt;/p&gt;

&lt;p&gt;Good work.&lt;/p&gt;</comment>
                            <comment id="13020193" author="yuzhihong@gmail.com" created="Fri, 15 Apr 2011 05:17:01 +0000"  >&lt;p&gt;Added detailed javadoc for balanceCluster() describing what this JIRA has done.&lt;/p&gt;</comment>
                            <comment id="13020211" author="stack" created="Fri, 15 Apr 2011 06:49:48 +0000"  >&lt;p&gt;I am +1 on committing.  The doc is good.  Will wait to commit for a day or so in case others have opinion on this patch.  If you get feedback from others on how this balance change works for them, include it in the issue Ted.  Good stuff.&lt;/p&gt;</comment>
                            <comment id="13020213" author="stack" created="Fri, 15 Apr 2011 06:52:24 +0000"  >&lt;p&gt;Marking patch available &lt;/p&gt;</comment>
                            <comment id="13021156" author="stack" created="Mon, 18 Apr 2011 18:12:25 +0000"  >&lt;p&gt;Committed. Thanks for the patch Ted Yu&lt;/p&gt;</comment>
                            <comment id="15016736" author="lars_francke" created="Fri, 20 Nov 2015 12:40:31 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12503142">HBASE-3724</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12476423" name="3609-double-alternation.txt" size="17363" author="yuzhihong@gmail.com" created="Fri, 15 Apr 2011 05:17:01 +0000"/>
                            <attachment id="12476100" name="3609-empty-RS.txt" size="14447" author="yuzhihong@gmail.com" created="Tue, 12 Apr 2011 06:17:05 +0000"/>
                            <attachment id="12473012" name="hbase-3609-by-region-age.txt" size="4927" author="yuzhihong@gmail.com" created="Tue, 8 Mar 2011 17:32:02 +0000"/>
                            <attachment id="12472918" name="hbase-3609.txt" size="2884" author="yuzhihong@gmail.com" created="Tue, 8 Mar 2011 07:05:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 8 Mar 2011 07:05:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33109</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hn0n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>100991</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Balancer improvements over the previous purely random assignment balancer; distributes evenly from oldest and newest regions and does round robin loading a newly added server.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>