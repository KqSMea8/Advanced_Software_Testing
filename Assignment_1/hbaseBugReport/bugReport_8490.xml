<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:55:44 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-8490/HBASE-8490.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-8490] Region mover script can get stuck in infinite loop if UnknownRegionException</title>
                <link>https://issues.apache.org/jira/browse/HBASE-8490</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
13/05/02 23:56:55 INFO region_mover: Moving 1 region(s) from procyon-8.nova.cloudera.com,60020,1367530634629 during &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; cycle
13/05/02 23:56:55 INFO region_mover: Moving region 588ccd887c699c7c23188a79a3d1807f (0 of 1) to server=procyon-5.nova.cloudera.com,60020,1367542172830
13/05/02 23:56:55 INFO region_mover: Exception moving 588ccd887c699c7c23188a79a3d1807f; split/moved? Continuing: java.lang.reflect.UndeclaredThrowableException: org.apache.hadoop.hbase.UnknownRegionException: 588ccd887c699c7c23188a79a3d1807f
	at org.apache.hadoop.hbase.master.HMaster.move(HMaster.java:1015)
	at sun.reflect.GeneratedMethodAccessor22.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.hadoop.hbase.ipc.WritableRpcEngine$Server.call(WritableRpcEngine.java:364)
	at org.apache.hadoop.hbase.ipc.HBaseServer$Handler.run(HBaseServer.java:1345)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This was triggered due &lt;tt&gt;IllegalStateException&lt;/tt&gt; while trying to open an unexisting region:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2013-05-02 16:23:06,558 INFO org.apache.hadoop.hbase.regionserver.HRegionServer: Received request to open region: TestTable,,1367530404417.588ccd887c699c7c23188a79a3d1
807f.
2013-05-02 16:23:06,583 INFO org.apache.hadoop.hbase.util.FSUtils: hdfs:&lt;span class=&quot;code-comment&quot;&gt;//nameservice1/hbase/TestTable doesn&apos;t exist
&lt;/span&gt;2013-05-02 16:23:06,586 INFO org.apache.hadoop.hbase.util.FSUtils: hdfs:&lt;span class=&quot;code-comment&quot;&gt;//nameservice1/hbase/TestTable doesn&apos;t exist
&lt;/span&gt;2013-05-02 16:23:06,586 WARN org.apache.hadoop.hbase.util.FSTableDescriptors: The following folder is in HBase&apos;s root directory and doesn&apos;t contain a table descriptor,
 &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; consider deleting it: TestTable
2013-05-02 16:23:06,666 ERROR org.apache.hadoop.hbase.regionserver.handler.OpenRegionHandler: Failed open of region=TestTable,,1367530404417.588ccd887c699c7c23188a79a3
d1807f.
java.lang.IllegalStateException: Could not instantiate a region instance.
	at org.apache.hadoop.hbase.regionserver.HRegion.newHRegion(HRegion.java:3123)
	at org.apache.hadoop.hbase.regionserver.HRegion.openHRegion(HRegion.java:3254)
	at org.apache.hadoop.hbase.regionserver.handler.OpenRegionHandler.openRegion(OpenRegionHandler.java:331)
	at org.apache.hadoop.hbase.regionserver.handler.OpenRegionHandler.process(OpenRegionHandler.java:107)
	at org.apache.hadoop.hbase.executor.EventHandler.run(EventHandler.java:169)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:662)
Caused by: java.lang.reflect.InvocationTargetException
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
	at org.apache.hadoop.hbase.regionserver.HRegion.newHRegion(HRegion.java:3120)
	... 7 more
Caused by: java.lang.NullPointerException
	at org.apache.hadoop.hbase.regionserver.RegionCoprocessorHost.loadTableCoprocessors(RegionCoprocessorHost.java:133)
	at org.apache.hadoop.hbase.regionserver.RegionCoprocessorHost.&amp;lt;init&amp;gt;(RegionCoprocessorHost.java:125)
	at org.apache.hadoop.hbase.regionserver.HRegion.&amp;lt;init&amp;gt;(HRegion.java:376)
	... 12 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment>&lt;p&gt;HBase 0.92.1-cdh4.1.3&lt;/p&gt;</environment>
        <key id="12646015">HBASE-8490</key>
            <summary>Region mover script can get stuck in infinite loop if UnknownRegionException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="esteban">Esteban Gutierrez</assignee>
                                    <reporter username="esteban">Esteban Gutierrez</reporter>
                        <labels>
                    </labels>
                <created>Fri, 3 May 2013 18:12:00 +0000</created>
                <updated>Tue, 5 Aug 2014 20:11:35 +0000</updated>
                            <resolved>Tue, 29 Apr 2014 00:28:13 +0000</resolved>
                                    <version>0.92.1</version>
                                                    <component>shell</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13649945" author="jmhsieh" created="Mon, 6 May 2013 18:18:39 +0000"  >&lt;p&gt;Same as &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5356&quot; title=&quot;region_mover.rb can hang if table region it belongs to is deleted.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5356&quot;&gt;&lt;del&gt;HBASE-5356&lt;/del&gt;&lt;/a&gt;?  &lt;/p&gt;</comment>
                            <comment id="13649955" author="esteban" created="Mon, 6 May 2013 18:29:12 +0000"  >&lt;p&gt;I think they are different, in this case the &lt;tt&gt;region_mover.rb&lt;/tt&gt; script gets stuck in the &lt;tt&gt;UndeclaredThrowableException&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="13649957" author="esteban" created="Mon, 6 May 2013 18:31:51 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; count &amp;lt; retries and same
...
rescue java.lang.reflect.UndeclaredThrowableException =&amp;gt; e
      $LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Exception moving &quot;&lt;/span&gt;  + r.getEncodedName() +
        &lt;span class=&quot;code-quote&quot;&gt;&quot;; split/moved? Continuing: &quot;&lt;/span&gt; + e)
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;
    end
...
 end
  raise RuntimeError, &lt;span class=&quot;code-quote&quot;&gt;&quot;Region stuck on #{original}, newserver=#{newServer}&quot;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; same
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13983785" author="esteban" created="Tue, 29 Apr 2014 00:24:42 +0000"  >&lt;p&gt;Looks like we can close this since &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5356&quot; title=&quot;region_mover.rb can hang if table region it belongs to is deleted.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5356&quot;&gt;&lt;del&gt;HBASE-5356&lt;/del&gt;&lt;/a&gt; removes a region from the &lt;tt&gt;region_mover.rb&lt;/tt&gt; script if we got an exception:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    # Remove those already tried to move
+    rs.removeAll(movedRegions)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12541885">HBASE-5356</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 6 May 2013 18:18:39 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>326374</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 33 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1kb13:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>326719</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>