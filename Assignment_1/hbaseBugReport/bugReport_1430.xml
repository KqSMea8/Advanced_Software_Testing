<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:53:26 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1430/HBASE-1430.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1430] Read the logs in batches during log splitting to avoid OOME</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1430</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;During log splitting, in the worst case we can read 64 logs of 64MB which will surely bust any heap. Instead we should read the logs in batches of 5-10 that we write right away.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12425657">HBASE-1430</key>
            <summary>Read the logs in batches during log splitting to avoid OOME</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jdcryans">Jean-Daniel Cryans</assignee>
                                    <reporter username="jdcryans">Jean-Daniel Cryans</reporter>
                        <labels>
                    </labels>
                <created>Sat, 16 May 2009 14:40:53 +0000</created>
                <updated>Sun, 13 Sep 2009 22:24:38 +0000</updated>
                            <resolved>Wed, 20 May 2009 17:07:14 +0000</resolved>
                                                    <fixVersion>0.20.0</fixVersion>
                    <fixVersion>0.19.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12710789" author="jdcryans" created="Tue, 19 May 2009 16:47:59 +0000"  >&lt;p&gt;Comment from JK in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1008&quot; title=&quot;[performance] The replay of logs on server crash takes way too long&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1008&quot;&gt;&lt;del&gt;HBASE-1008&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I&apos;m not a big fan of having to read all the logs into memory.&lt;/p&gt;

&lt;p&gt;My suggestion would be for each unique region in the HLog(s), create a blocking queue and a thread that will&lt;br/&gt;
dequeue entries and write them directly to the log file. Then you have one thread doing the reading and multiple&lt;br/&gt;
threads writing, and the memory footprint is reduced significantly.&lt;/p&gt;

&lt;p&gt;Make sense?&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="12710883" author="jdcryans" created="Tue, 19 May 2009 20:59:45 +0000"  >&lt;p&gt;This patch makes it that we read, by default, in batches of 10 logs that we then write right away. Was tested with 12 logs to split.&lt;/p&gt;</comment>
                            <comment id="12710947" author="stack" created="Tue, 19 May 2009 23:57:04 +0000"  >&lt;p&gt;I tested it on TRUNK.  Worked.  I applied it to TRUNK.  Want to make one for the branch j-d?&lt;/p&gt;</comment>
                            <comment id="12710949" author="stack" created="Tue, 19 May 2009 23:58:29 +0000"  >&lt;p&gt;Maybe I can have a go at it this evening... would like to get 0.19.3 RC out soon.&lt;/p&gt;</comment>
                            <comment id="12710976" author="stack" created="Wed, 20 May 2009 02:48:36 +0000"  >&lt;p&gt;Answering j-d question up on #hbase, I tested a few times with from 2 to 6 or so log files.. never &amp;gt; 10.&lt;/p&gt;</comment>
                            <comment id="12711228" author="jdcryans" created="Wed, 20 May 2009 17:07:14 +0000"  >&lt;p&gt;Committed to branch.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12408511" name="hbase-1430-trunk-v1.patch" size="14223" author="jdcryans" created="Tue, 19 May 2009 20:59:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 19 May 2009 23:57:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32138</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 31 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hd7r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99403</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>