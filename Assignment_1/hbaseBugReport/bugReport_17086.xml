<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 21:21:00 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-17086/HBASE-17086.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-17086] Add comments to explain why Cell#getTagsLength() returns an int, rather than a short</title>
                <link>https://issues.apache.org/jira/browse/HBASE-17086</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;In the Cell interface, getTagsLength() returns a int&lt;br/&gt;
But in the KeyValue implementation, tags length is of 2 bytes. Also in ExtendedCell, when explaining the KeyValue format, tags length is stated to be 2 bytes&lt;/p&gt;

&lt;p&gt;Any plan to update Cell interface to make getTagsLength() returns a short ?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13020408">HBASE-17086</key>
            <summary>Add comments to explain why Cell#getTagsLength() returns an int, rather than a short</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="water">Xiang Li</assignee>
                                    <reporter username="water">Xiang Li</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 Nov 2016 04:54:55 +0000</created>
                <updated>Tue, 29 Nov 2016 11:32:27 +0000</updated>
                            <resolved>Tue, 29 Nov 2016 07:24:03 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component> Interface</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="15662782" author="water" created="Mon, 14 Nov 2016 05:03:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt;, you are the expert here. Any comments? Too much changes to make if we would like to update the Cell interface?&lt;/p&gt;</comment>
                            <comment id="15662817" author="anoop.hbase" created="Mon, 14 Nov 2016 05:28:50 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
/**
   * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; the total length of the tags in the Cell.
   * @deprecated use {@link #getTagsLengthUnsigned()} which can handle tags length upto 65535.
   */
  @Deprecated
  @InterfaceStability.Unstable
  &lt;span class=&quot;code-object&quot;&gt;short&lt;/span&gt; getTagsLength();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above is from 0.98.  We first added tags length as short.  But 0.98 only deprecated it and went with int.  This is because, even if we store it in 2 bytes, we make use of the fact that the length can not be -ve. So make use of the sign bit also and can go double the max short value.  So in order to return that, the type has to be bigger than short and that is int.  Hope am clarifying it for u.&lt;/p&gt;</comment>
                            <comment id="15663109" author="water" created="Mon, 14 Nov 2016 08:14:21 +0000"  >&lt;p&gt;Hi Anoop, thanks, got it. So it is like a unsighed short = a char ?&lt;br/&gt;
And what about the max length of tags in bytes ? 66635 (2^16-1) ? &lt;/p&gt;</comment>
                            <comment id="15663255" author="anoop.hbase" created="Mon, 14 Nov 2016 09:21:28 +0000"  >&lt;p&gt;Ya 65535..  To be the correct math &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15695453" author="anoop.hbase" created="Fri, 25 Nov 2016 09:58:37 +0000"  >&lt;p&gt;As mentioned, this is with intent we made return type to be int.. Can we close this issue?&lt;/p&gt;</comment>
                            <comment id="15696281" author="water" created="Fri, 25 Nov 2016 16:50:59 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt;, sorry for not responding to this JIRA for a long time.&lt;br/&gt;
I uploaded a patch to add some comments to the Cell interface, to explain why getTagsLength() returns an int, which I hope could be of a little help for the new comers (just like me). Could you please take a look, there is not code change in the patch.&lt;/p&gt;</comment>
                            <comment id="15704005" author="water" created="Tue, 29 Nov 2016 03:06:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt;, would you please check if the patch also makes sense to you?&lt;/p&gt;</comment>
                            <comment id="15704337" author="anoop.hbase" created="Tue, 29 Nov 2016 06:04:31 +0000"  >&lt;p&gt;Better NOT to mention KV and KV format in Cell..  What we need to say is that HBase uses 2 bytes to store cell&apos;s tag length. As it is going to be +ve numbers always, we save sign bit and so max tags length = 2 * short.MAX +1  Tell the number.  So even if the return type is int, the max tags length is less than Int.MAX value.&lt;/p&gt;</comment>
                            <comment id="15704445" author="water" created="Tue, 29 Nov 2016 07:01:01 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt;, I see, thanks! Patch 001 is uploaded to address your comments.&lt;/p&gt;</comment>
                            <comment id="15704481" author="anoop.hbase" created="Tue, 29 Nov 2016 07:18:07 +0000"  >&lt;p&gt;+1 . Will commit shortly.&lt;/p&gt;</comment>
                            <comment id="15704495" author="anoop.hbase" created="Tue, 29 Nov 2016 07:24:04 +0000"  >&lt;p&gt;Thanks for the patch Xiang Li&lt;/p&gt;</comment>
                            <comment id="15704671" author="water" created="Tue, 29 Nov 2016 08:36:10 +0000"  >&lt;p&gt;Anoop, thanks for the review and guide!&lt;/p&gt;</comment>
                            <comment id="15705025" author="hudson" created="Tue, 29 Nov 2016 11:32:27 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build HBase-Trunk_matrix #2040 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-Trunk_matrix/2040/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-Trunk_matrix/2040/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-17086&quot; title=&quot;Add comments to explain why Cell#getTagsLength() returns an int, rather than a short&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-17086&quot;&gt;&lt;del&gt;HBASE-17086&lt;/del&gt;&lt;/a&gt;: Add comments to explain why Cell#getTagsLength() returns an (anoopsamjohn: rev 346e904a210540ffe11863547319c51a233b43f7)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) hbase-common/src/main/java/org/apache/hadoop/hbase/Cell.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12915993">HBASE-14882</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12840531" name="HBASE-17086.master.000.patch" size="1406" author="water" created="Fri, 25 Nov 2016 16:48:10 +0000"/>
                            <attachment id="12840820" name="HBASE-17086.master.001.patch" size="1593" author="water" created="Tue, 29 Nov 2016 07:00:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 14 Nov 2016 05:28:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i369vj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>