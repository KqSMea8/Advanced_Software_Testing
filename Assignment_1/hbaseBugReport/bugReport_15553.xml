<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 21:04:47 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-15553/HBASE-15553.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-15553] &quot;publish hbase website&quot; section is out of date</title>
                <link>https://issues.apache.org/jira/browse/HBASE-15553</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;the current &lt;a href=&quot;http://hbase.apache.org/book.html#website_publish&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;ref guide section on publishing the webste&lt;/a&gt; refers to using hte asf-site branch.&lt;/p&gt;

&lt;p&gt;it should reference the &lt;span class=&quot;error&quot;&gt;&amp;#91;hbase-site repo|git-wip-us.apache.org/repos/asf/hbase-site.git&amp;#93;&lt;/span&gt; and the &lt;a href=&quot;https://builds.apache.org/view/H-L/view/HBase/job/hbase_generate_website/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;jenkins job&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12954181">HBASE-15553</key>
            <summary>&quot;publish hbase website&quot; section is out of date</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="busbey">Sean Busbey</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Mar 2016 04:11:48 +0000</created>
                <updated>Fri, 17 Jun 2016 17:42:46 +0000</updated>
                                                                            <component>documentation</component>
                    <component>website</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="15336541" author="busbey" created="Fri, 17 Jun 2016 17:42:46 +0000"  >&lt;p&gt;jenkins job build step:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
#!/bin/bash

LOCAL_REPO=${WORKSPACE}/.m2/repo
# Uncomment &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; to nuke the local maven repo each time, to start with a known environment
#rm -Rf $LOCAL_REPO
mkdir -p &lt;span class=&quot;code-quote&quot;&gt;&quot;${LOCAL_REPO}&quot;&lt;/span&gt;

export JAVA_HOME=$JDK_1_7_LATEST__HOME
export PATH=$JAVA_HOME/bin:$MAVEN_3_3_3_HOME/bin:$PATH
export MAVEN_OPTS=&lt;span class=&quot;code-quote&quot;&gt;&quot;-XX:MaxPermSize=256m -Dmaven.repo.local=${LOCAL_REPO}&quot;&lt;/span&gt;

mvn -version

# Clean any leftover files in &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; we are reusing the workspace
rm -Rf -- *.patch *.patch.zip target

# Build HBase
cd hbase || exit -1

GIT_SHA=$(git log --pretty=format:%H -n1)

git reset --hard origin/master

echo &lt;span class=&quot;code-quote&quot;&gt;&quot;Building at commit:&quot;&lt;/span&gt;
git log -n1
echo

# Build the site
mvn -DskipTests -Dmaven.javadoc.skip=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; -Dcheckstyle.skip=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; -Dfindbugs.skip=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; clean install &amp;amp;&amp;amp; mvn clean site -DskipTests
status=$?

&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; [ $status -ne 0 ]; then
  echo &lt;span class=&quot;code-quote&quot;&gt;&quot;Failure: mvn clean site&quot;&lt;/span&gt;
  exit $status
fi

mvn site:stage
status=$?

&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; [ $status -ne 0 ] || [ ! -d target/staging ]; then
  echo &lt;span class=&quot;code-quote&quot;&gt;&quot;Failure: mvn site:stage&quot;&lt;/span&gt;
  exit $status
fi

# Update the website
cd &lt;span class=&quot;code-quote&quot;&gt;&quot;${WORKSPACE}/hbase-site&quot;&lt;/span&gt; || exit -1

git checkout asf-site
git reset --hard origin/asf-site
rm -Rf -- hbase-* apidocs devapidocs testapidocs testdevapidocs xref xref-test *book* *.html *.pdf* css js images
cp -au &lt;span class=&quot;code-quote&quot;&gt;&quot;${WORKSPACE}&quot;&lt;/span&gt;/hbase/target/staging/* .

&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; [ ! -f index.html ]; then
  echo &lt;span class=&quot;code-quote&quot;&gt;&quot;The index.html is missing. Aborting.&quot;&lt;/span&gt;
  exit 1
&lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
  echo &lt;span class=&quot;code-quote&quot;&gt;&quot;Adding all the files we know about&quot;&lt;/span&gt;
  git add --all -- hbase-* apidocs devapidocs testapidocs testdevapidocs xref xref-test *book* *.html *.pdf* css js images
  git status --&lt;span class=&quot;code-object&quot;&gt;short&lt;/span&gt; |grep &apos;??&apos; |&lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; read -r i; &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt;
    filename=&lt;span class=&quot;code-quote&quot;&gt;&quot;echo $i |awk {&apos;print $2&apos;}&quot;&lt;/span&gt;
    git add &lt;span class=&quot;code-quote&quot;&gt;&quot;$filename&quot;&lt;/span&gt;
    echo &lt;span class=&quot;code-quote&quot;&gt;&quot;Added &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; file $filename&quot;&lt;/span&gt;
  done
  echo
  
  COMMIT_MSG=&lt;span class=&quot;code-quote&quot;&gt;&quot;Published site at $GIT_SHA.&quot;&lt;/span&gt;
  git commit -m &lt;span class=&quot;code-quote&quot;&gt;&quot;$COMMIT_MSG&quot;&lt;/span&gt; -a
  git format-patch --stdout origin/asf-site &amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;${WORKSPACE}/$GIT_SHA.patch&quot;&lt;/span&gt;
  
  echo &lt;span class=&quot;code-quote&quot;&gt;&quot;This commit changed these files (excluding Modified files):&quot;&lt;/span&gt;
  git diff --name-status --diff-filter=ADCRTXUB origin/asf-site
  
  cd &lt;span class=&quot;code-quote&quot;&gt;&quot;${WORKSPACE}&quot;&lt;/span&gt; || exit -1
  zip website.patch.zip &lt;span class=&quot;code-quote&quot;&gt;&quot;$GIT_SHA.patch&quot;&lt;/span&gt;
fi

echo &lt;span class=&quot;code-quote&quot;&gt;&quot;GIT_SHA=$GIT_SHA&quot;&lt;/span&gt; &amp;gt; git_sha.txt
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And publishing email:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Build status: ${BUILD_STATUS}

If successful, the website and docs have been generated. If failed, skip to the bottom of &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; email.

Use the following commands to download the patch and apply it to a clean branch based on origin/asf-site. If you prefer to keep the hbase-site repo around permanently, you can skip the clone step.

  git clone https:&lt;span class=&quot;code-comment&quot;&gt;//git-wip-us.apache.org/repos/asf/hbase-site.git
&lt;/span&gt;
  cd hbase-site
  wget -O- ${BUILD_URL}artifact/website.patch.zip | funzip &amp;gt; ${GIT_SHA}.patch
  git fetch
  git checkout -b asf-site-${GIT_SHA} origin/asf-site
  git am --whitespace=fix $GIT_SHA.patch

At &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; point, you can preview the changes by opening index.html or any of the other HTML pages in your local asf-site-${GIT_SHA} branch.

There are lots of spurious changes, such as timestamps and CSS styles in tables, so a &lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt; git diff is not very useful. To see a list of files that have been added, deleted, renamed, changed type, or are otherwise interesting, use the following command:

  git diff --name-status --diff-filter=ADCRTXUB origin/asf-site

To see only files that had 100 or more lines changed:

  git diff --stat origin/asf-site | grep -E &apos;[1-9][0-9]{2,}&apos;

When you are satisfied, publish your changes to origin/asf-site using these commands:

  git commit --allow-empty -m &lt;span class=&quot;code-quote&quot;&gt;&quot;Empty commit&quot;&lt;/span&gt; # to work around a current ASF INFRA bug
  git push origin asf-site-${GIT_SHA}:asf-site
  git checkout asf-site
  git branch -d asf-site-${GIT_SHA}

Changes take a couple of minutes to be propagated. You can verify whether they have been propagated by looking at the Last Published date at the bottom of http:&lt;span class=&quot;code-comment&quot;&gt;//hbase.apache.org/. It should match the date in the index.html on the asf-site branch in Git.
&lt;/span&gt;
  



If failed, see ${BUILD_URL}console
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the former can probably get ported into the codebase?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2vbp3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>