<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:59:48 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-2201/HBASE-2201.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-2201] JRuby shell for replication</title>
                <link>https://issues.apache.org/jira/browse/HBASE-2201</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;We need a shell to easily issue administration commands for replication. It should be easy to merge with existing core shell.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12455801">HBASE-2201</key>
            <summary>JRuby shell for replication</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12421518">HBASE-1295</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jdcryans">Jean-Daniel Cryans</assignee>
                                    <reporter username="jdcryans">Jean-Daniel Cryans</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Feb 2010 18:31:12 +0000</created>
                <updated>Fri, 20 Nov 2015 13:01:42 +0000</updated>
                            <resolved>Wed, 20 Oct 2010 00:54:38 +0000</resolved>
                                                    <fixVersion>0.90.0</fixVersion>
                                    <component>Replication</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12895088" author="jdcryans" created="Tue, 3 Aug 2010 23:39:17 +0000"  >&lt;p&gt;Here&apos;s the list of commands I&apos;m currently planning to add to the shell (strongly inspired by Andrew&apos;s pdf):&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;add_peer &lt;span class=&quot;error&quot;&gt;&amp;#91;label&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;cluster_key&amp;#93;&lt;/span&gt;&lt;br/&gt;
Creates a new replication source on every region server to the new cluster and starts replication using the current HLog.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;remove_peer &lt;span class=&quot;error&quot;&gt;&amp;#91;label&amp;#93;&lt;/span&gt;&lt;br/&gt;
Disables all the replication sources for that cluster, closes all the connections, deletes the replication sources and cleans the znodes.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;enable_peer &lt;span class=&quot;error&quot;&gt;&amp;#91;label&amp;#93;&lt;/span&gt;&lt;br/&gt;
Restarts the stopped replication sources for that cluster.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;disable_peer &lt;span class=&quot;error&quot;&gt;&amp;#91;label&amp;#93;&lt;/span&gt;&lt;br/&gt;
Stops the replication sources for that cluster, but continues keeping track of the new HLogs.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;enable_replication&lt;br/&gt;
Restarts all the sources from the last state.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;disable_replication&lt;br/&gt;
Stops all the sources, and stops keeping track of the new HLogs. This is an extreme measure for if replication starts screwing the cluster in bad ways.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12895114" author="jdcryans" created="Wed, 4 Aug 2010 01:04:12 +0000"  >&lt;p&gt;Something from that document that&apos;s not implement is the management of peer addresses as it&apos;s currently not possible to update to list of zookeeper servers to connect to.&lt;/p&gt;</comment>
                            <comment id="12895148" author="stack" created="Wed, 4 Aug 2010 05:22:07 +0000"  >&lt;p&gt;Put them into a &apos;replication&apos; group?&lt;/p&gt;</comment>
                            <comment id="12907043" author="jdcryans" created="Wed, 8 Sep 2010 00:39:37 +0000"  >&lt;p&gt;Patch made against the code just before the new master came in and not intended for commit. It does a lot of refactoring and cleaning up, then adds the commands described in the jira&apos;s main description. Enable/disable currently doesn&apos;t fully work, but almost all the pieces are there. The existing and new unit tests pass, and I tried it on a single node cluster (2 hbase deployment on the same machine) and I can add/remove as much as I want.&lt;/p&gt;

&lt;p&gt;I&apos;m now going to test this on our internal clusters, post a revised patch (still against the old master), deploy it in prod here, then will work on porting it to the new master.&lt;/p&gt;</comment>
                            <comment id="12908192" author="jdcryans" created="Fri, 10 Sep 2010 21:10:55 +0000"  >&lt;p&gt;Stability fixes and some more javadoc. Still on the old master.&lt;/p&gt;</comment>
                            <comment id="12922735" author="hbasereviewboard" created="Tue, 19 Oct 2010 21:41:22 +0000"  >&lt;p&gt;Message from: stack@duboce.net&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.cloudera.org/r/1045/#review1577&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/#review1577&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Ship it!&lt;/p&gt;


&lt;p&gt;+1 looks good. Minor comments below.&lt;/p&gt;


&lt;p&gt;/trunk/src/main/java/org/apache/hadoop/hbase/client/replication/ReplicationAdmin.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1045/#comment5298&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/#comment5298&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Is this what enables replication on the cluster, setting this config?&lt;/p&gt;



&lt;p&gt;/trunk/src/main/java/org/apache/hadoop/hbase/client/replication/ReplicationAdmin.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1045/#comment5297&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/#comment5297&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    You need a &amp;lt;p&amp;gt; here and at start of all paragraphs starts that follow else all runs together&lt;/p&gt;



&lt;p&gt;/trunk/src/main/java/org/apache/hadoop/hbase/client/replication/ReplicationAdmin.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1045/#comment5299&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/#comment5299&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    This is the name of a group of replication commands?  There are more than one?&lt;/p&gt;



&lt;p&gt;/trunk/src/main/java/org/apache/hadoop/hbase/client/replication/ReplicationAdmin.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1045/#comment5300&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/#comment5300&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    zkWrapper is a bad name?  Its actually a Watcher?  Elsewhere you call it zkHelper&lt;/p&gt;



&lt;p&gt;/trunk/src/main/java/org/apache/hadoop/hbase/client/replication/ReplicationAdmin.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1045/#comment5301&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/#comment5301&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    You don&apos;t want to proceed though replication not enabled?&lt;/p&gt;



&lt;p&gt;/trunk/src/main/java/org/apache/hadoop/hbase/client/replication/ReplicationAdmin.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1045/#comment5302&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/#comment5302&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    No exceptions come up out of here?  Interrupted Exception or KeeperException?&lt;/p&gt;



&lt;p&gt;/trunk/src/main/java/org/apache/hadoop/hbase/client/replication/ReplicationAdmin.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1045/#comment5303&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/#comment5303&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Throw is  org.apache.commons.lang.NotImplementedException&lt;/p&gt;



&lt;p&gt;/trunk/src/main/java/org/apache/hadoop/hbase/client/replication/ReplicationAdmin.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1045/#comment5304&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/#comment5304&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Return old state?  &lt;/p&gt;



&lt;p&gt;/trunk/src/main/java/org/apache/hadoop/hbase/client/replication/ReplicationAdmin.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1045/#comment5305&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/#comment5305&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Why let it out?&lt;/p&gt;



&lt;p&gt;/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1045/#comment5306&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/#comment5306&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    This change was done already, FYI&lt;/p&gt;



&lt;p&gt;/trunk/src/main/java/org/apache/hadoop/hbase/replication/ReplicationPeer.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1045/#comment5307&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/#comment5307&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    I don&apos;t understand this second sentence.&lt;/p&gt;



&lt;p&gt;/trunk/src/main/java/org/apache/hadoop/hbase/replication/ReplicationPeer.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1045/#comment5308&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/#comment5308&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Why not make this immutable class and pass this in to the Constructor?  It changes?&lt;/p&gt;



&lt;p&gt;/trunk/src/main/java/org/apache/hadoop/hbase/replication/ReplicationPeer.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1045/#comment5309&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/#comment5309&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Why let this out?&lt;/p&gt;



&lt;p&gt;/trunk/src/main/java/org/apache/hadoop/hbase/replication/ReplicationPeer.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1045/#comment5310&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/#comment5310&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    ditto&lt;/p&gt;



&lt;p&gt;/trunk/src/main/java/org/apache/hadoop/hbase/replication/ReplicationZookeeper.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1045/#comment5311&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/#comment5311&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    public data member?&lt;/p&gt;



&lt;p&gt;/trunk/src/main/java/org/apache/hadoop/hbase/replication/ReplicationZookeeper.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1045/#comment5312&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/#comment5312&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Is this a silent fail?  Should it be noisier?&lt;/p&gt;



&lt;p&gt;/trunk/src/main/java/org/apache/hadoop/hbase/replication/ReplicationZookeeper.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1045/#comment5313&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/#comment5313&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    This parse stuff seems to be sprinkled about the code.  Should we put it together in one place?  For example, it&apos;ll be needed when we fix copytable to TOF can take clientPort for zk?&lt;/p&gt;



&lt;p&gt;/trunk/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1045/#comment5314&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/#comment5314&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    This abort used abort the server?  Now you just terminate replication?&lt;/p&gt;



&lt;p&gt;/trunk/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1045/#comment5315&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/#comment5315&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Take a string which says why the termination triggered?  Then in here log at error level rather than sprinkle it throughout code (You seem to preface the call to terminate with a Log.error and then in here do a log.info?)&lt;/p&gt;



&lt;p&gt;/trunk/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSourceManager.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1045/#comment5316&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/#comment5316&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    if (!this.replication.get()) return;&lt;/p&gt;

&lt;p&gt;    Then you don&apos;t have to indent whole method.&lt;/p&gt;



&lt;p&gt;/trunk/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSourceManager.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1045/#comment5317&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/#comment5317&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    You don&apos;t need this.. its in super class?&lt;/p&gt;




&lt;p&gt;/trunk/src/main/ruby/shell/commands/add_peer.rb&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1045/#comment5318&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/#comment5318&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Good&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;stack&lt;/li&gt;
&lt;/ul&gt;



</comment>
                            <comment id="12922774" author="hbasereviewboard" created="Tue, 19 Oct 2010 23:09:21 +0000"  >&lt;p&gt;Message from: &quot;Jean-Daniel Cryans&quot; &amp;lt;jdcryans@apache.org&amp;gt;&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2010-10-19 14:40:13, stack wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; /trunk/src/main/java/org/apache/hadoop/hbase/client/replication/ReplicationAdmin.java, line 35&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1045/diff/1/?file=14900#file14900line35&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/diff/1/?file=14900#file14900line35&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Is this what enables replication on the cluster, setting this config?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;yes&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2010-10-19 14:40:13, stack wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; /trunk/src/main/java/org/apache/hadoop/hbase/client/replication/ReplicationAdmin.java, line 55&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1045/diff/1/?file=14900#file14900line55&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/diff/1/?file=14900#file14900line55&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     This is the name of a group of replication commands?  There are more than one?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This is a group yes, more than 1 command.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2010-10-19 14:40:13, stack wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; /trunk/src/main/java/org/apache/hadoop/hbase/client/replication/ReplicationAdmin.java, line 59&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1045/diff/1/?file=14900#file14900line59&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/diff/1/?file=14900#file14900line59&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     zkWrapper is a bad name?  Its actually a Watcher?  Elsewhere you call it zkHelper&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;true that!&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2010-10-19 14:40:13, stack wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; /trunk/src/main/java/org/apache/hadoop/hbase/client/replication/ReplicationAdmin.java, line 68&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1045/diff/1/?file=14900#file14900line68&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/diff/1/?file=14900#file14900line68&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     You don&apos;t want to proceed though replication not enabled?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Well I want to proceed only if it&apos;s enabled.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2010-10-19 14:40:13, stack wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; /trunk/src/main/java/org/apache/hadoop/hbase/client/replication/ReplicationAdmin.java, line 90&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1045/diff/1/?file=14900#file14900line90&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/diff/1/?file=14900#file14900line90&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     No exceptions come up out of here?  Interrupted Exception or KeeperException?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Let&apos;s bubble up a few IOEs.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2010-10-19 14:40:13, stack wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; /trunk/src/main/java/org/apache/hadoop/hbase/client/replication/ReplicationAdmin.java, line 138&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1045/diff/1/?file=14900#file14900line138&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/diff/1/?file=14900#file14900line138&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Why let it out?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It was laziness for the unit tests. I could just set it package protected?&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2010-10-19 14:40:13, stack wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; /trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java, line 1248&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1045/diff/1/?file=14901#file14901line1248&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/diff/1/?file=14901#file14901line1248&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     This change was done already, FYI&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;cool thx&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2010-10-19 14:40:13, stack wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; /trunk/src/main/java/org/apache/hadoop/hbase/replication/ReplicationPeer.java, line 33&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1045/diff/1/?file=14902#file14902line33&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/diff/1/?file=14902#file14902line33&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     I don&apos;t understand this second sentence.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I meant that RP is a container class.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2010-10-19 14:40:13, stack wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; /trunk/src/main/java/org/apache/hadoop/hbase/replication/ReplicationPeer.java, line 92&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1045/diff/1/?file=14902#file14902line92&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/diff/1/?file=14902#file14902line92&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Why not make this immutable class and pass this in to the Constructor?  It changes?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Laziness: let&apos;s say you add a new region server to a slave cluster, this list will be regenerated from what&apos;s in Zookeeper. Instead of trying to figure out which one is new (or missing), I just replace the whole list.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2010-10-19 14:40:13, stack wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; /trunk/src/main/java/org/apache/hadoop/hbase/replication/ReplicationPeer.java, line 100&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1045/diff/1/?file=14902#file14902line100&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/diff/1/?file=14902#file14902line100&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Why let this out?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Since RP is a container class, getters are its only purpose.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2010-10-19 14:40:13, stack wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; /trunk/src/main/java/org/apache/hadoop/hbase/replication/ReplicationPeer.java, line 116&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1045/diff/1/?file=14902#file14902line116&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/diff/1/?file=14902#file14902line116&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     ditto&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;ditto too &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2010-10-19 14:40:13, stack wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; /trunk/src/main/java/org/apache/hadoop/hbase/replication/ReplicationZookeeper.java, line 86&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1045/diff/1/?file=14903#file14903line86&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/diff/1/?file=14903#file14903line86&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     public data member?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yeah it&apos;s not pretty but that&apos;s also how ZooKeeperWatcher is done:&lt;/p&gt;

&lt;p&gt;  // base znode for this cluster&lt;br/&gt;
  public String baseZNode;&lt;br/&gt;
  // znode containing location of server hosting root region&lt;br/&gt;
  public String rootServerZNode;&lt;br/&gt;
  // znode containing ephemeral nodes of the regionservers&lt;br/&gt;
  public String rsZNode;&lt;br/&gt;
  // znode of currently active master&lt;br/&gt;
  public String masterAddressZNode;&lt;br/&gt;
  // znode containing the current cluster state&lt;br/&gt;
  public String clusterStateZNode;&lt;br/&gt;
  // znode used for region transitioning and assignment&lt;br/&gt;
  public String assignmentZNode;&lt;br/&gt;
  // znode used for table disabling/enabling&lt;br/&gt;
  public String tableZNode;&lt;/p&gt;

&lt;p&gt;Should I just put all those znodes public in RZ too?&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2010-10-19 14:40:13, stack wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; /trunk/src/main/java/org/apache/hadoop/hbase/replication/ReplicationZookeeper.java, line 255&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1045/diff/1/?file=14903#file14903line255&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/diff/1/?file=14903#file14903line255&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Is this a silent fail?  Should it be noisier?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;No it&apos;s meant like that.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2010-10-19 14:40:13, stack wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; /trunk/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java, line 244&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1045/diff/1/?file=14904#file14904line244&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/diff/1/?file=14904#file14904line244&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     This abort used abort the server?  Now you just terminate replication?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Well abort was calling terminate IIRC, and didn&apos;t really add value, so I just refactored them together.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2010-10-19 14:40:13, stack wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; /trunk/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java, line 637&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1045/diff/1/?file=14904#file14904line637&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/diff/1/?file=14904#file14904line637&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Take a string which says why the termination triggered?  Then in here log at error level rather than sprinkle it throughout code (You seem to preface the call to terminate with a Log.error and then in here do a log.info?)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;There&apos;s also good reasons to terminate, but I&apos;ll take the hint and add a reason.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2010-10-19 14:40:13, stack wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; /trunk/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSourceManager.java, line 458&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1045/diff/1/?file=14906#file14906line458&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/diff/1/?file=14906#file14906line458&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     You don&apos;t need this.. its in super class?&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;ooops forgot to cleanup.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2010-10-19 14:40:13, stack wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; /trunk/src/main/java/org/apache/hadoop/hbase/client/replication/ReplicationAdmin.java, line 130&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/1045/diff/1/?file=14900#file14900line130&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/diff/1/?file=14900#file14900line130&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Return old state?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Will do, and will add a new getReplicating method.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Jean-Daniel&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.cloudera.org/r/1045/#review1577&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/1045/#review1577&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


</comment>
                            <comment id="12922806" author="jdcryans" created="Wed, 20 Oct 2010 00:54:38 +0000"  >&lt;p&gt;Committed to trunk, thanks for the review Stack!&lt;/p&gt;</comment>
                            <comment id="15017871" author="lars_francke" created="Fri, 20 Nov 2015 13:01:42 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                                                <inwardlinks description="is required by">
                                        <issuelink>
            <issuekey id="12477804">HBASE-3134</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12454333" name="HBASE-2201-v2.patch" size="67327" author="jdcryans" created="Fri, 10 Sep 2010 21:10:55 +0000"/>
                            <attachment id="12454061" name="HBASE-2201.patch" size="65198" author="jdcryans" created="Wed, 8 Sep 2010 00:39:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 4 Aug 2010 05:22:07 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32454</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hgrb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99977</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>