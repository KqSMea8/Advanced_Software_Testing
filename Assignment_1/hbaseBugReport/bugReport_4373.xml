<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:18:20 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-4373/HBASE-4373.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-4373] HBaseAdmin.assign() does not use force flag</title>
                <link>https://issues.apache.org/jira/browse/HBASE-4373</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The HBaseAdmin.assign()&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void assign(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; [] regionName, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; force)
  &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; MasterNotRunningException, ZooKeeperConnectionException, IOException {
    getMaster().assign(regionName, force);
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In the HMaster we call &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    Pair&amp;lt;HRegionInfo, ServerName&amp;gt; pair =
      MetaReader.getRegion(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.catalogTracker, regionName);
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (pair == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; UnknownRegionException(Bytes.toString(regionName));
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (cpHost != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (cpHost.preAssign(pair.getFirst(), force)) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
      }
    }
    assignRegion(pair.getFirst());
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (cpHost != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
      cpHost.postAssign(pair.getFirst(), force);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The force flag is not getting used.  May be we need to update the javadoc or do not provide the force flag as a parameter if we are not going to use it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12522731">HBASE-4373</key>
            <summary>HBaseAdmin.assign() does not use force flag</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ram_krish">ramkrishna.s.vasudevan</assignee>
                                    <reporter username="ram_krish">ramkrishna.s.vasudevan</reporter>
                        <labels>
                    </labels>
                <created>Mon, 12 Sep 2011 13:19:01 +0000</created>
                <updated>Fri, 20 Nov 2015 11:53:49 +0000</updated>
                            <resolved>Sat, 17 Sep 2011 00:36:23 +0000</resolved>
                                                    <fixVersion>0.92.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13102906" author="stack" created="Mon, 12 Sep 2011 18:44:05 +0000"  >&lt;p&gt;We should use the flag.&lt;/p&gt;</comment>
                            <comment id="13103425" author="ram_krish" created="Tue, 13 Sep 2011 07:37:59 +0000"  >&lt;p&gt;@Stack&lt;br/&gt;
But except in AssignmentManager.handleHBCK(RegionTransitionData data)&lt;br/&gt;
for the M_ZK_REGION_OFFLINE case we use&lt;br/&gt;
assign(regionInfo, false); with force=false.  All other places force=true.&lt;/p&gt;

&lt;p&gt;And also when you take the HBaseAdmin.assign() api then allowing the user to use force=false will not yield him the result as he may not be aware in what state the znode is currently in.  So i felt like removing the parameter.  &lt;br/&gt;
Pls provide your suggestions.&lt;/p&gt;</comment>
                            <comment id="13103804" author="stack" created="Tue, 13 Sep 2011 17:33:13 +0000"  >&lt;p&gt;@Ram OK. Going by your rationale above, we should deprecate the override that has the force flag.&lt;/p&gt;</comment>
                            <comment id="13104477" author="ram_krish" created="Wed, 14 Sep 2011 13:14:03 +0000"  >&lt;p&gt;@Stack&lt;br/&gt;
I have deprecated the existing assign api and added a new api without force fla.&lt;br/&gt;
Update in ruby file also.&lt;/p&gt;</comment>
                            <comment id="13105587" author="yuzhihong@gmail.com" created="Thu, 15 Sep 2011 18:44:58 +0000"  >&lt;p&gt;In BaseMasterObserver.java:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  @Override
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void preAssign(ObserverContext&amp;lt;MasterCoprocessorEnvironment&amp;gt; ctx,
       HRegionInfo regionInfo, &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; force) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Please add @Deprecated for the above and the old postAssign().&lt;/p&gt;</comment>
                            <comment id="13105861" author="ram_krish" created="Fri, 16 Sep 2011 05:13:47 +0000"  >&lt;p&gt;Rebased the patch with Ted&apos;s comments.&lt;br/&gt;
Deprecated all the implemented apis.&lt;/p&gt;</comment>
                            <comment id="13105880" author="yuzhihong@gmail.com" created="Fri, 16 Sep 2011 06:05:33 +0000"  >&lt;p&gt;New patch looks good.&lt;br/&gt;
Minor comment: wrap long lines such as the following:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+   * @deprecated The &amp;lt;code&amp;gt;force&amp;lt;/code&amp;gt; is unused.Use {@link #postAssign(ObserverContext, HRegionInfo)}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13105904" author="ghelmling" created="Fri, 16 Sep 2011 06:38:04 +0000"  >&lt;p&gt;Ram,&lt;/p&gt;

&lt;p&gt;For MasterObserver, BaseMasterObserver, TestMasterObserver, I&apos;d say there&apos;s no need to deprecate the existing verison of the methods.  Coprocessors have not been released yet, so those classes don&apos;t represent an API we have to maintain yet.  You can just remove the flag.&lt;/p&gt;

&lt;p&gt;Otherwise the patch looks good to me.&lt;/p&gt;</comment>
                            <comment id="13105942" author="ram_krish" created="Fri, 16 Sep 2011 08:27:09 +0000"  >&lt;p&gt;addressing Gary&apos;s comments.&lt;/p&gt;</comment>
                            <comment id="13106057" author="yuzhihong@gmail.com" created="Fri, 16 Sep 2011 13:23:34 +0000"  >&lt;p&gt;+1 on latest patch.&lt;br/&gt;
It looks much cleaner.&lt;/p&gt;</comment>
                            <comment id="13106632" author="ghelmling" created="Fri, 16 Sep 2011 17:50:01 +0000"  >&lt;p&gt;+1 on the latest patch.&lt;/p&gt;</comment>
                            <comment id="13106642" author="yuzhihong@gmail.com" created="Fri, 16 Sep 2011 17:59:37 +0000"  >&lt;p&gt;Integrated to TRUNK.&lt;/p&gt;

&lt;p&gt;Thanks for the patch Ramkrishna.&lt;/p&gt;

&lt;p&gt;Thanks for the review, Gary.&lt;/p&gt;</comment>
                            <comment id="13106760" author="streamy" created="Fri, 16 Sep 2011 19:51:56 +0000"  >&lt;p&gt;Trying to understand this patch.  So with the force flag removed, what is the default behavior?  If the state is not OFFLINE and we try to assign somewhere else, do we force the node to OFFLINE always?&lt;/p&gt;</comment>
                            <comment id="13106767" author="stack" created="Fri, 16 Sep 2011 19:58:47 +0000"  >&lt;p&gt;@Jon This patch doesn&apos;t change behavior.  It just clears away a method that took a force flag that was being ignored.&lt;/p&gt;</comment>
                            <comment id="13106793" author="hudson" created="Fri, 16 Sep 2011 20:38:47 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2221 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2221/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2221/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4373&quot; title=&quot;HBaseAdmin.assign() does not use force flag&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4373&quot;&gt;&lt;del&gt;HBASE-4373&lt;/del&gt;&lt;/a&gt;  HBaseAdmin.assign() does not use force flag (Ramkrishna)&lt;/p&gt;

&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HBaseAdmin.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/coprocessor/BaseMasterObserver.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/coprocessor/MasterObserver.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/ipc/HMasterInterface.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/MasterCoprocessorHost.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/HBaseFsckRepair.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/ruby/hbase/admin.rb&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/ruby/shell/commands/assign.rb&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/coprocessor/TestMasterObserver.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13106964" author="stack" created="Sat, 17 Sep 2011 00:36:23 +0000"  >&lt;p&gt;Committed by Ted today.&lt;/p&gt;</comment>
                            <comment id="15016073" author="lars_francke" created="Fri, 20 Nov 2015 11:53:49 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12494441" name="HBASE-4373.patch" size="12227" author="ram_krish" created="Wed, 14 Sep 2011 13:14:03 +0000"/>
                            <attachment id="12494771" name="HBASE-4373_1.patch" size="12459" author="ram_krish" created="Fri, 16 Sep 2011 08:27:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 12 Sep 2011 18:44:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33519</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hqm7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>101574</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>