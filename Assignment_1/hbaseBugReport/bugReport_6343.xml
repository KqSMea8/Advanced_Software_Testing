<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:35:55 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6343/HBASE-6343.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6343] After migrating from one cluster to another, new hmaster dies when reaching out to old nodes</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6343</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;I am migrating from cluster (movetest-a.domain.com to another (movetest-b.domain.com), both at the same version of hdfs/hbase. I am using mozilla&apos;s Backup tool to copy the /hbase files, but I imagine any copy tool would have this issue. Each cluster has its own zookeeper &amp;amp; HDFS.&lt;/p&gt;

&lt;p&gt;After copying the files, I try to start the new hmaster (movetest-b), and it dies because it cannot resolve the data nodes from the source cluster (eg data01.movetest-a.domain.com).&lt;/p&gt;

&lt;p&gt;Log: &lt;a href=&quot;http://pastie.org/4212244&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://pastie.org/4212244&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Things I tried that did not work:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;delete &lt;del&gt;ROOT&lt;/del&gt; from the copied data&lt;/li&gt;
	&lt;li&gt;delete .META. from the copied data&lt;/li&gt;
	&lt;li&gt;cleanly shutdown the source before copying (to flush to disk)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Things I tried that did work:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;add the source nodes to /etc/hosts, pointing at 127.0.0.2 (which give connection refused):&lt;br/&gt;
127.0.0.2 data01.movetest-a.domain.com data02.movetest-a.domain.com data03.movetest-a.domain.com&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;After bringing up the new cluster (with /etc/hosts in place), I was able to delete the /etc/hosts entries, and bounce hbase without error.&lt;/p&gt;</description>
                <environment>&lt;p&gt;centos 6.0&lt;/p&gt;</environment>
        <key id="12597832">HBASE-6343</key>
            <summary>After migrating from one cluster to another, new hmaster dies when reaching out to old nodes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="plainlystated">Patrick</reporter>
                        <labels>
                    </labels>
                <created>Fri, 6 Jul 2012 20:50:18 +0000</created>
                <updated>Wed, 16 Nov 2016 22:00:12 +0000</updated>
                            <resolved>Wed, 16 Nov 2016 22:00:12 +0000</resolved>
                                    <version>0.90.6</version>
                                                    <component>migration</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13408313" author="jdcryans" created="Fri, 6 Jul 2012 20:55:39 +0000"  >&lt;p&gt;This issue only seems to be in 0.90, it does this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; InetSocketAddress getResolvedAddress(InetSocketAddress address) {
  &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; bindAddress = getBindAddressInternal(address);
  &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; port = address.getPort();
  &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; InetSocketAddress(bindAddress, port);    
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Except that getBindAddressInternal() can return null (and show the message &quot;Could not resolve the DNS name of data03.movetest-a.domain.com&quot;) and it&apos;s not checked so the &lt;tt&gt;InetSocketAddress&lt;/tt&gt; gets passed a null.&lt;/p&gt;

&lt;p&gt;In 0.92 and 0.94, &lt;tt&gt;ServerName&lt;/tt&gt; doesn&apos;t do this kind of resolving. &lt;/p&gt;</comment>
                            <comment id="15671780" author="stack" created="Wed, 16 Nov 2016 22:00:12 +0000"  >&lt;p&gt;Seems like an old issue probably a problem in old hbase. Reopen if can repro in new context.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 6 Jul 2012 20:55:39 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>241748</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02c6v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11576</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>