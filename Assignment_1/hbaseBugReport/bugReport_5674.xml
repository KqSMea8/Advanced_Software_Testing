<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:29:55 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5674/HBASE-5674.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5674] add support in HBase to overwrite hbase timestamp to a version number during major compaction</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5674</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Right now, a millisecond-level timestamp is attached to every record. &lt;br/&gt;
In our case, we only need a version number (mostly it will be just zero etc). A millisecond timestamp is too heavy to carry. We should add support to overwrite it to zero during major compaction. &lt;br/&gt;
KVs before major compaction will remain using system timestamp. And this should be configurable, so that we should not mess up if the hbase timestamp is specified by application.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12548710">HBASE-5674</key>
            <summary>add support in HBase to overwrite hbase timestamp to a version number during major compaction</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="4">Incomplete</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="he yongqiang">He Yongqiang</reporter>
                        <labels>
                    </labels>
                <created>Thu, 29 Mar 2012 18:00:51 +0000</created>
                <updated>Sat, 11 Apr 2015 01:25:15 +0000</updated>
                            <resolved>Sat, 11 Apr 2015 01:25:15 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="13241544" author="stack" created="Thu, 29 Mar 2012 19:29:17 +0000"  >&lt;blockquote&gt;&lt;p&gt;A millisecond timestamp is too heavy to carry. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;For whom?&lt;/p&gt;

&lt;p&gt;Can you not just have your client specify timestamp of 0?&lt;/p&gt;</comment>
                            <comment id="13242028" author="he yongqiang" created="Fri, 30 Mar 2012 03:03:35 +0000"  >&lt;blockquote&gt;&lt;p&gt;For whom?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;For our &apos;researchy&apos; project...&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Can you not just have your client specify timestamp of 0?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I hope this can be done in open source hbase, and can be pluggable. &lt;/p&gt;</comment>
                            <comment id="13242085" author="stack" created="Fri, 30 Mar 2012 05:47:17 +0000"  >&lt;blockquote&gt;&lt;p&gt;I hope this can be done in open source hbase, and can be pluggable.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Can you do your research w/o requiring that your &apos;researchy&apos; code be committed to core.  The most of us working on hbase are trying to make it an hardcore production worthy platform.  &apos;Pluggable&apos; and &apos;research&apos;, at least on first blush, sound like distractions from the project objective.&lt;/p&gt;

&lt;p&gt;But maybe the research aligns with where hbase is trying to go.  Whats your research on?&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="13242094" author="he yongqiang" created="Fri, 30 Mar 2012 06:08:43 +0000"  >&lt;p&gt;I use the term &apos;researchy&apos; as it is mentioned so in one email thread. refer to &lt;a href=&quot;http://osdir.com/ml/general/2012-03/msg52707.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://osdir.com/ml/general/2012-03/msg52707.html&lt;/a&gt; I have no idea how this term come up.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;The most of us working on hbase are trying to make it an hardcore production worthy platform. &apos;Pluggable&apos; and &apos;research&apos;, at least on first blush, sound like distractions from the project objective.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;So are you referring this as conflicting with your &apos;hardcore production worthy platform&apos; goal? &lt;/p&gt;</comment>
                            <comment id="13242102" author="stack" created="Fri, 30 Mar 2012 06:26:30 +0000"  >&lt;p&gt;I didn&apos;t get the &apos;reference&apos;.  Sorry, that email went over my head.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;So are you referring this as conflicting with your &apos;hardcore production worthy platform&apos; goal?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;First its not &apos;my&apos; goal.   Check out the notes from recent HBase PMC meeting:  &lt;a href=&quot;http://blogs.apache.org/hbase/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://blogs.apache.org/hbase/&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;That said, I thought it a different kinda &apos;researchy&apos; that was being referred to.  I like the &apos;research&apos; you fellas are at.&lt;/p&gt;

&lt;p&gt;(Pardon me.  I did not read the name on the issue before responding.  All I saw was the short description asking for an &apos;odd&apos;, little-substantiated behavior and I asked a question.  Even on your comeback, I failed to check the whom and was innocently reacting to what I thought was a request that hbase become a dumping ground for plugins and research)&lt;/p&gt;

</comment>
                            <comment id="13242115" author="he yongqiang" created="Fri, 30 Mar 2012 06:59:16 +0000"  >&lt;p&gt;okay. Now i need to make it public on my lack sense of humor. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Here is the real problem:&lt;br/&gt;
In our use case, the space the data occupies &lt;b&gt;really&lt;/b&gt; matter. We need to find all kind of things that we can do to bring down the size as much as possible. Apparently we do not want to bring in LZMA compression or bzip2 compression as they are really slow. In my simple test, a 41MB data can be reduced to 32MB after i rewrite the hbase Long timestamp to zero. The 8-bytes Long timestamp is heavy is because it is binary system timestamp which makes it very hard to compress (MemstoreTS is also a Long timestamp but there is no problem with it as it will be zero eventually). And if you look at how we are using that data, pretty much that data is not used by most applications if the data is system generated (not specified by applications). A good reason to make it configurable is some application may do specify it. In that case, pretty much you as hbase can not modify that data. But for a lot of other applications which do not care this data should not suffer this problem if data size really matter to them. &lt;br/&gt;
I think this could benefit other community members as they may see this problem when they want to decrease the data size. &lt;/p&gt;
</comment>
                            <comment id="13242460" author="mcorgan" created="Fri, 30 Mar 2012 15:45:00 +0000"  >&lt;p&gt;I&apos;ve been brainstorming something similar as a follow-on to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4676&quot; title=&quot;Prefix Compression - Trie data block encoding&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4676&quot;&gt;&lt;del&gt;HBASE-4676&lt;/del&gt;&lt;/a&gt;.  The more similar timestamps you have in a block, the smaller the encoded version.  Most people doing a simple, flat table with 1 version of each cell don&apos;t care about the timestamps.  They&apos;re only needed to pick the latest cell.  If all timestamps in an HFile are the same then they will encode down to nothing.&lt;/p&gt;

&lt;p&gt;One possibility is to have an option &quot;flattenTimestamps&quot; where you grab t=currentTimeMillis() at the beginning of a flush and overwrite all timestamps with it.  To support multiple versions of a cell, you could use t-1, t-2, etc (as long as they don&apos;t go all the way back to the previous hfile&apos;s timestamp).&lt;/p&gt;</comment>
                            <comment id="13242505" author="stack" created="Fri, 30 Mar 2012 16:24:45 +0000"  >&lt;p&gt;@He np.  Thanks for the background.  On a slightly related note, I was going to ask if you&apos;d been following Matt&apos;s work over in hbase-4676.  The compression factor he gets over there I thought you&apos;d be interested in.&lt;/p&gt;</comment>
                            <comment id="13242650" author="he yongqiang" created="Fri, 30 Mar 2012 19:05:20 +0000"  >&lt;p&gt;Thanks Matt and stack for the point out of 4676. Yeah, we are very very interested in the work that is going on HBase-4676.&lt;/p&gt;</comment>
                            <comment id="13242850" author="schen" created="Fri, 30 Mar 2012 23:37:10 +0000"  >&lt;p&gt;&amp;gt; Can you not just have your client specify timestamp of 0?&lt;/p&gt;

&lt;p&gt;We still need the timestamp when the write was happening for versioning.&lt;br/&gt;
But after major compaction we don&apos;t need the exact timestamp.&lt;br/&gt;
We only need to know it&apos;s version is old.&lt;/p&gt;

&lt;p&gt;The timestamp takes 8 bytes for every column.&lt;br/&gt;
And the last digits of these timestamps are very random so it cannot be compressed well.&lt;br/&gt;
In our tests, the space it consumed can be quite significant.&lt;/p&gt;

&lt;p&gt;I believe in a lot of use cases, these millisecond resolution timestamp may not be useful after compaction.&lt;br/&gt;
It will be nice to have the ability to remove them to save some spaces.&lt;/p&gt;</comment>
                            <comment id="13242851" author="schen" created="Fri, 30 Mar 2012 23:39:07 +0000"  >&lt;blockquote&gt;
&lt;p&gt;The timestamp takes 8 bytes for every column.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I meant to say &lt;br/&gt;
the timestamp takes 8 bytes for every keyvalue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 29 Mar 2012 19:29:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>233807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 37 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02g9j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12236</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>