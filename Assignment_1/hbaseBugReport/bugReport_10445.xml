<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:13:51 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-10445/HBASE-10445.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-10445] TestRegionObserverInterface occasionally times out</title>
                <link>https://issues.apache.org/jira/browse/HBASE-10445</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;TestRegionObserverInterface occasionally times out&lt;br/&gt;
Running in a loop, it timed out at 9th iteration twice.&lt;/p&gt;

&lt;p&gt;The test starts a cluster with 1 region server. If this server goes down, the following message would be repeatedly printed:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2014-01-30 00:35:16,144 WARN  [MASTER_META_SERVER_OPERATIONS-kiyo:42930-0] master.AssignmentManager(2140): Can&apos;t move 1588230740, there is no destination server available.
2014-01-30 00:35:16,144 WARN  [MASTER_META_SERVER_OPERATIONS-kiyo:42930-0] master.AssignmentManager(1863): Unable to determine a plan to assign {ENCODED =&amp;gt; 1588230740,     NAME =&amp;gt; &apos;hbase:meta,,1&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12692335">HBASE-10445</key>
            <summary>TestRegionObserverInterface occasionally times out</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="yuzhihong@gmail.com">Ted Yu</assignee>
                                    <reporter username="yuzhihong@gmail.com">Ted Yu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 30 Jan 2014 17:43:54 +0000</created>
                <updated>Mon, 3 Feb 2014 15:44:08 +0000</updated>
                            <resolved>Mon, 3 Feb 2014 15:44:08 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13886817" author="yuzhihong@gmail.com" created="Thu, 30 Jan 2014 17:45:09 +0000"  >&lt;p&gt;Test output.&lt;/p&gt;</comment>
                            <comment id="13886966" author="hadoopqa" created="Thu, 30 Jan 2014 19:34:35 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12626131/10445-v1.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12626131/10445-v1.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12626131&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.1&lt;/font&gt;.  The patch compiles against the hadoop 1.1 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 2 zombie test(s): 	at org.apache.hadoop.hbase.regionserver.wal.TestLogRolling.testLogRollOnDatanodeDeath(TestLogRolling.java:355)&lt;br/&gt;
	at org.apache.hadoop.hbase.io.encoding.TestEncodedSeekers.testEncodedSeeker(TestEncodedSeekers.java:129)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8560//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8560//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8560//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8560//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8560//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8560//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8560//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8560//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8560//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8560//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8560//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8560//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8560//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8560//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8560//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8560//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8560//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8560//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8560//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8560//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8560//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8560//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13887027" author="yuzhihong@gmail.com" created="Thu, 30 Jan 2014 20:42:12 +0000"  >&lt;p&gt;Test output showed 2014-01-30&lt;/p&gt;

&lt;p&gt;This test failure can be reproduced.&lt;/p&gt;</comment>
                            <comment id="13887100" author="yuzhihong@gmail.com" created="Thu, 30 Jan 2014 21:41:49 +0000"  >&lt;p&gt;I reproduced the test failure just now - with distributed log replay on.&lt;br/&gt;
The only server shutdown by TestRegionObserverInterface#testRecovery was still recovering, leading to null Result for the get() call:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2014-01-30 21:01:50,601 ERROR [Priority.RpcServer.handler=2,port=58244] coprocessor.CoprocessorHost(760): The coprocessor org.apache.hadoop.hbase.coprocessor.SimpleRegionObserver threw an unexpected exception
java.lang.AssertionError: region hbase:meta,,1.1588230740 row TestTable.testRecovery,testrow,99999999999999
        at org.junit.Assert.fail(Assert.java:88)
        at org.junit.Assert.assertTrue(Assert.java:41)
        at org.junit.Assert.assertNotNull(Assert.java:621)
        at org.apache.hadoop.hbase.coprocessor.SimpleRegionObserver.postGetClosestRowBefore(SimpleRegionObserver.java:512)
        at org.apache.hadoop.hbase.regionserver.RegionCoprocessorHost.postGetClosestRowBefore(RegionCoprocessorHost.java:970)
        at org.apache.hadoop.hbase.regionserver.HRegion.getClosestRowBefore(HRegion.java:1785)
        at org.apache.hadoop.hbase.regionserver.HRegionServer.get(HRegionServer.java:2819)
        at org.apache.hadoop.hbase.protobuf.generated.ClientProtos$ClientService$2.callBlockingMethod(ClientProtos.java:28450)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13887107" author="yuzhihong@gmail.com" created="Thu, 30 Jan 2014 21:45:20 +0000"  >&lt;p&gt;Test output.&lt;/p&gt;</comment>
                            <comment id="13887332" author="apurtell" created="Fri, 31 Jan 2014 01:03:26 +0000"  >&lt;blockquote&gt;&lt;p&gt;I reproduced the test failure just now - with distributed log replay on.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;To do that, you have to modify the code to enable it by default as a local change. Therefore this is an invalid issue, unless and until we commit that change.&lt;/p&gt;</comment>
                            <comment id="13887365" author="yuzhihong@gmail.com" created="Fri, 31 Jan 2014 01:49:52 +0000"  >&lt;blockquote&gt;&lt;p&gt;you have to modify the code to enable it&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;No modification is needed.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void setupBeforeClass() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
    &lt;span class=&quot;code-comment&quot;&gt;// set configure to indicate which cp should be loaded
&lt;/span&gt;    Configuration conf = util.getConfiguration();
    conf.setBoolean(&lt;span class=&quot;code-quote&quot;&gt;&quot;hbase.master.distributed.log.replay&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13887372" author="apurtell" created="Fri, 31 Jan 2014 01:54:30 +0000"  >&lt;p&gt;Ok, I reopened the issue. On my 3 build hosts, 50 full unit test suite executions did not surface this issue. If you can reproduce the issue, then please explain how the patch on this issue fixes the problem and I&apos;ll +1&lt;/p&gt;</comment>
                            <comment id="13887443" author="apurtell" created="Fri, 31 Jan 2014 04:06:56 +0000"  >&lt;p&gt;What I found surprising re the above comment was that distributed replay could be a factor with this test, since it doesn&apos;t seem to require it. Attaching as &apos;10445-alternate.patch&apos; is a simple change which changes the test setup to not enable distributed replay. The test passes locally for me with the change. I was unable to reproduce the earlier issue, so I can&apos;t claim this is a fix for the reported problem, but it removes a surprise.&lt;/p&gt;</comment>
                            <comment id="13887485" author="yuzhihong@gmail.com" created="Fri, 31 Jan 2014 05:24:04 +0000"  >&lt;p&gt;Another option is to set hbase.coprocessor.abortonerror to false for the test&lt;br/&gt;
This way we wouldn&apos;t get:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2014-01-30 21:01:50,601 FATAL [Priority.RpcServer.handler=2,port=58244] regionserver.HRegionServer(1796): ABORTING region server kiyo.gq1.ygridcore.net,58244,              1391115675724: The coprocessor org.apache.hadoop.hbase.coprocessor.SimpleRegionObserver threw an unexpected exception
java.lang.AssertionError: region hbase:meta,,1.1588230740 row TestTable.testRecovery,testrow,99999999999999
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13887965" author="apurtell" created="Fri, 31 Jan 2014 18:29:30 +0000"  >&lt;p&gt;The exception is unexpected though. Does turning off distributed replay fix the issue for you? This is a test of the coprocessor interface, not distributed reply. I think it&apos;s better to remove the complication.&lt;/p&gt;</comment>
                            <comment id="13888067" author="yuzhihong@gmail.com" created="Fri, 31 Jan 2014 19:40:20 +0000"  >&lt;blockquote&gt;&lt;p&gt;The exception is unexpected though&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;If the value for hbase.coprocessor.abortonerror is kept true (the default), TestRegionObserverInterface should be written to handle region server abort due to the exception.&lt;/p&gt;</comment>
                            <comment id="13888684" author="apurtell" created="Sat, 1 Feb 2014 19:28:19 +0000"  >&lt;p&gt;Ted, could you respond to the question I actually asked? Thanks.&lt;/p&gt;</comment>
                            <comment id="13888706" author="yuzhihong@gmail.com" created="Sat, 1 Feb 2014 19:52:04 +0000"  >&lt;p&gt;I am running TestRegionObserverInterface with that change in a loop.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12626257" name="10445-alternate.patch" size="863" author="apurtell" created="Fri, 31 Jan 2014 04:06:56 +0000"/>
                            <attachment id="12626131" name="10445-v1.txt" size="668" author="yuzhihong@gmail.com" created="Thu, 30 Jan 2014 17:46:09 +0000"/>
                            <attachment id="12626130" name="TestRegionObserverInterface-output-2.txt" size="2285568" author="yuzhihong@gmail.com" created="Thu, 30 Jan 2014 17:45:09 +0000"/>
                            <attachment id="12626188" name="TestRegionObserverInterface-output-3.txt" size="2351104" author="yuzhihong@gmail.com" created="Thu, 30 Jan 2014 21:45:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 30 Jan 2014 19:34:35 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>370930</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 45 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1rxfj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>371235</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>