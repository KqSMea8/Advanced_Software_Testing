<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:17:00 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-4219/HBASE-4219.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-4219] Add Per-Column Family Metrics</title>
                <link>https://issues.apache.org/jira/browse/HBASE-4219</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Right now, we have region server level statistics.  However, the read/write flow varies a lot based on the column family involved.  We should add dynamic, per column family metrics to JMX so we can track each column family individually.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12519187">HBASE-4219</key>
            <summary>Add Per-Column Family Metrics</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dgoode">David Goode</assignee>
                                    <reporter username="nspiegelberg">Nicolas Spiegelberg</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Aug 2011 21:19:18 +0000</created>
                <updated>Fri, 12 Oct 2012 05:35:06 +0000</updated>
                            <resolved>Fri, 21 Oct 2011 13:31:20 +0000</resolved>
                                    <version>0.92.0</version>
                                    <fixVersion>0.94.0</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13087868" author="dgoode" created="Fri, 19 Aug 2011 18:33:54 +0000"  >&lt;p&gt;This adds some useful per-column family metrics to the existing regionserver metric exporting framework. It currently tracks blockCacheSize by blocktype (see the new HFile V2 diff by Mikhail Bautin) as well as, on a per-CF basis:&lt;br/&gt;
fsBlockReadTime/Cnt&lt;br/&gt;
compactionBlockReadTime/Cnt&lt;br/&gt;
fsBlockReadCacheHitCnt&lt;br/&gt;
compactionBlockReadCacheHitCnt&lt;br/&gt;
metaBlockReadCnt/CacheHitCnt&lt;br/&gt;
flushSize&lt;br/&gt;
bloomAccessed/Skip&lt;br/&gt;
blockCacheSize&lt;br/&gt;
storeFileCount/IndexSizeMB/SizeMB&lt;br/&gt;
staticBloomSizeKB&lt;br/&gt;
memstoreSizeMB&lt;br/&gt;
staticIndexSizeKB&lt;/p&gt;</comment>
                            <comment id="13087874" author="dgoode" created="Fri, 19 Aug 2011 18:37:42 +0000"  >&lt;p&gt;The diff from Rev 1158928 (August 18). Depends heavily on Mikhail Bautin&apos;s recent HFile V2 patch.&lt;/p&gt;</comment>
                            <comment id="13101670" author="stack" created="Sat, 10 Sep 2011 00:07:15 +0000"  >&lt;p&gt;Updated David&apos;s patch to match TRUNK.&lt;/p&gt;</comment>
                            <comment id="13102113" author="stack" created="Sat, 10 Sep 2011 19:12:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4199&quot; title=&quot;blockCache summary - backend&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4199&quot;&gt;&lt;del&gt;HBASE-4199&lt;/del&gt;&lt;/a&gt; could have made use of whats added in this patch.&lt;/p&gt;</comment>
                            <comment id="13102114" author="stack" created="Sat, 10 Sep 2011 19:13:15 +0000"  >&lt;p&gt;Here&apos;s some fixup for formatting.&lt;/p&gt;</comment>
                            <comment id="13102116" author="stack" created="Sat, 10 Sep 2011 19:13:58 +0000"  >&lt;p&gt;I&apos;m +1 on commit.  Gary, what you think?  It adds new dynamic metrics per Region.  That ok you think?&lt;/p&gt;</comment>
                            <comment id="13102851" author="nspiegelberg" created="Mon, 12 Sep 2011 17:56:43 +0000"  >&lt;p&gt;@stack: the hbase version of this patch should be fine, but note that I&apos;m working on an hdfs bug where the dynamic JMX metrics don&apos;t show up with the public hadoop jar but do with our internal jar.  Give me a little more time here to figure out the problem and clean some small stuff up on David&apos;s original patch.&lt;/p&gt;</comment>
                            <comment id="13102858" author="stack" created="Mon, 12 Sep 2011 18:06:09 +0000"  >&lt;p&gt;@Nicolas Ok honey.&lt;/p&gt;</comment>
                            <comment id="13115048" author="streamy" created="Mon, 26 Sep 2011 23:58:36 +0000"  >&lt;p&gt;This is the latest patch given to me by Nicolas and then rebased on tip of trunk.&lt;/p&gt;

&lt;p&gt;Going to dig in now on why this is not working with public hadoop.&lt;/p&gt;</comment>
                            <comment id="13129478" author="nspiegelberg" created="Tue, 18 Oct 2011 04:27:41 +0000"  >&lt;p&gt;Spent time looking at this issue today.  It looks like the Dynamic Metrics are visible via the MetricsContext that you specify in &apos;hadoop-metrics.properties&apos; but are not visible through the naive JMX interface.  We didn&apos;t see this because we use JmxContext (&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6470&quot; title=&quot;JMX Context for Metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6470&quot;&gt;&lt;del&gt;HADOOP-6470&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="13130313" author="hudson" created="Wed, 19 Oct 2011 02:03:58 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2338 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2338/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2338/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4219&quot; title=&quot;Add Per-Column Family Metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4219&quot;&gt;&lt;del&gt;HBASE-4219&lt;/del&gt;&lt;/a&gt; Per Column Family Metrics&lt;/p&gt;

&lt;p&gt;nspiegelberg : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/io/HalfStoreFileReader.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/io/hfile/AbstractHFileReader.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/io/hfile/AbstractHFileWriter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/io/hfile/BlockType.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/io/hfile/CachedBlock.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/io/hfile/HFile.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlock.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlockInfo.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileReaderV1.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileReaderV2.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileWriterV1.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileWriterV2.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/io/hfile/LruBlockCache.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/mapreduce/LoadIncrementalHFiles.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/Store.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/StoreFile.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/StoreFileScanner.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/metrics/RegionServerDynamicMetrics.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/metrics/RegionServerDynamicStatistics.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/io/hfile/TestLruBlockCache.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13132292" author="sunnygao" created="Fri, 21 Oct 2011 02:52:54 +0000"  >&lt;p&gt;fix TestHFileBlock failed&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Surefire report directory: /opt/g56562/trunk/target/surefire-reports&lt;/p&gt;

&lt;p&gt;-------------------------------------------------------&lt;br/&gt;
 T E S T S&lt;br/&gt;
-------------------------------------------------------&lt;/p&gt;

&lt;p&gt;-------------------------------------------------------&lt;br/&gt;
 T E S T S&lt;br/&gt;
-------------------------------------------------------&lt;br/&gt;
Running org.apache.hadoop.hbase.io.hfile.TestHFileBlock&lt;br/&gt;
Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 27.732 sec&lt;/p&gt;

&lt;p&gt;Results :&lt;/p&gt;

&lt;p&gt;Tests run: 7, Failures: 0, Errors: 0, Skipped: 0&lt;/p&gt;</comment>
                            <comment id="13132294" author="sunnygao" created="Fri, 21 Oct 2011 03:04:46 +0000"  >&lt;p&gt;Please reveiw and merge this patch. My local test case always fails. &lt;/p&gt;
</comment>
                            <comment id="13132304" author="yuzhihong@gmail.com" created="Fri, 21 Oct 2011 03:30:19 +0000"  >&lt;p&gt;Jinchao&apos;s team uses Suse Linux to run test suite.&lt;br/&gt;
TestHFileBlock used to fail without &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4219&quot; title=&quot;Add Per-Column Family Metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4219&quot;&gt;&lt;del&gt;HBASE-4219&lt;/del&gt;&lt;/a&gt;_fixtestcasefail.patch&lt;/p&gt;</comment>
                            <comment id="13132594" author="ram_krish" created="Fri, 21 Oct 2011 11:12:08 +0000"  >&lt;p&gt;Committed the addendum. Thanks Gao&lt;/p&gt;</comment>
                            <comment id="13132660" author="hudson" created="Fri, 21 Oct 2011 13:25:44 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2350 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2350/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2350/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4219&quot; title=&quot;Add Per-Column Family Metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4219&quot;&gt;&lt;del&gt;HBASE-4219&lt;/del&gt;&lt;/a&gt; CHANGES.txt was not uploaed correctly.  Hence this correction&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4219&quot; title=&quot;Add Per-Column Family Metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4219&quot;&gt;&lt;del&gt;HBASE-4219&lt;/del&gt;&lt;/a&gt; Addendum for TestHFileBlock failure&lt;/p&gt;

&lt;p&gt;ramkrishna : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;ramkrishna : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlock.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12500932">HBASE-3614</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12493872" name="4219-v2.txt" size="54846" author="stack" created="Sat, 10 Sep 2011 00:07:15 +0000"/>
                            <attachment id="12493918" name="4219-v3.txt" size="52181" author="stack" created="Sat, 10 Sep 2011 19:13:15 +0000"/>
                            <attachment id="12496590" name="HBASE-4219-v4.patch" size="51973" author="streamy" created="Mon, 26 Sep 2011 23:58:36 +0000"/>
                            <attachment id="12499584" name="HBASE-4219-v5.patch" size="56344" author="nspiegelberg" created="Tue, 18 Oct 2011 19:23:16 +0000"/>
                            <attachment id="12500064" name="HBASE-4219_fixtestcasefail.patch" size="1085" author="sunnygao" created="Fri, 21 Oct 2011 02:52:54 +0000"/>
                            <attachment id="12490984" name="HBASE-4219_percfmetrics_1.patch" size="52125" author="dgoode" created="Fri, 19 Aug 2011 18:37:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 19 Aug 2011 18:33:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4136</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 9 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08qsv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48942</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>metrics</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>