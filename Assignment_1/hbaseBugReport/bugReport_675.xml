<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:46:28 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-675/HBASE-675.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-675] Report correct server hosting a table split for assignment to for MR Jobs</title>
                <link>https://issues.apache.org/jira/browse/HBASE-675</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Currently we return a null String array to the MR framework to use a random node for MR job assignment.&lt;/p&gt;

&lt;p&gt;class: org.apache.hadoop.hbase.mapred.tableSplit&lt;br/&gt;
function getLocations()&lt;/p&gt;

&lt;p&gt;We should be able to query the meta now for the current host name of the server hosting the region in question.&lt;br/&gt;
This will help with scaling as there will be less cross server communication removing bandwidth as a bottleneck.&lt;/p&gt;

&lt;p&gt;The side effect of fixing this will help from overloading region servers with lots of MR clients all pulling from the same region server while theres work local for them to do.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12397860">HBASE-675</key>
            <summary>Report correct server hosting a table split for assignment to for MR Jobs</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12381634">HBASE-57</parent>
                                    <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stack">stack</assignee>
                                    <reporter username="viper799">Billy Pearson</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Jun 2008 00:35:11 +0000</created>
                <updated>Sun, 13 Sep 2009 22:26:25 +0000</updated>
                            <resolved>Tue, 18 Nov 2008 07:01:50 +0000</resolved>
                                    <version>0.2.0</version>
                                    <fixVersion>0.19.0</fixVersion>
                                        <due></due>
                            <votes>2</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12613533" author="naamakraus" created="Tue, 15 Jul 2008 05:54:31 +0000"  >&lt;p&gt;Returning the region server is one option. Are there other options to consider ?&lt;br/&gt;
Would it make sense to return the nodes hosting the actual data files composing the table split (HStoreFiles blocks) ? As they are the ones accessed when reading the table split content ?&lt;/p&gt;</comment>
                            <comment id="12613609" author="viper799" created="Tue, 15 Jul 2008 14:03:27 +0000"  >&lt;p&gt;sense the load on MR jobs is on the Region server not the datanode then moveing the task close to the region server would be idea. &lt;/p&gt;

&lt;p&gt;the problem with above is the client/mr task would have to talk to the region server over the network for a request &lt;br/&gt;
then the region server would have to talk back to the data node with the data&lt;br/&gt;
and then back to the map task with the returned data.&lt;br/&gt;
thats 4 hops for each request.&lt;/p&gt;

&lt;p&gt;If the task would run on the same region server as the region was hosted then we would &lt;br/&gt;
just have the region server to the data node hops speeding up each request&lt;/p&gt;

&lt;p&gt;Assuming average setup is going to be per server&lt;br/&gt;
hadoop datanode&lt;br/&gt;
hbase region server&lt;br/&gt;
X mapper tasks&lt;br/&gt;
x Reducer tasks&lt;/p&gt;

&lt;p&gt;Then havening the local task work on the local region server would also help spread the load and help not overloading one region server at once.&lt;/p&gt;</comment>
                            <comment id="12621052" author="jdcryans" created="Fri, 8 Aug 2008 20:44:45 +0000"  >&lt;p&gt;A patch that tries to bandaid the problem. I would like to have people with a lot of regions processed in an MR to try it and see if it&apos;s faster.&lt;/p&gt;</comment>
                            <comment id="12622053" author="stack" created="Wed, 13 Aug 2008 00:50:42 +0000"  >&lt;p&gt;I tried this with a couple of hundred regions.  Ran the rowcounter MR job.  No discernible difference.  Might be because I only have 4 nodes each with datanode and regionservers. Perhaps its not enough?  Let me take a look to see that we&apos;re giving back info thats wanted.&lt;/p&gt;</comment>
                            <comment id="12627256" author="viper799" created="Sat, 30 Aug 2008 21:28:15 +0000"  >&lt;p&gt;One of the main benefits I can see us getting from this patch is not speed of job completion but it should reduced network traffic. This will improve performance on large clusters that have limited bandwidth between racks etc..&lt;br/&gt;
But in theory you should have seen lower bandwidth used between the servers of any size just might not be noticeable on small cluster.&lt;/p&gt;</comment>
                            <comment id="12627275" author="stack" created="Sun, 31 Aug 2008 04:44:09 +0000"  >&lt;p&gt;I thought that I&apos;d see at least some improvement because TTs should have been running beside regionserver if this thing was working properly and that should have made for some percentage improvement.&lt;/p&gt;

&lt;p&gt;Let me try again.&lt;/p&gt;</comment>
                            <comment id="12627277" author="stack" created="Sun, 31 Aug 2008 05:02:13 +0000"  >&lt;p&gt;Made it critical.&lt;/p&gt;</comment>
                            <comment id="12627278" author="stack" created="Sun, 31 Aug 2008 05:02:57 +0000"  >&lt;p&gt;...critical because its silly not colocating TT and HRS if all it takes is this patch to ensure it&lt;/p&gt;</comment>
                            <comment id="12642509" author="stack" created="Fri, 24 Oct 2008 18:39:46 +0000"  >&lt;p&gt;Adding up post from mailing list; its not a patch but an email with code.  Its from Arthur van Hoff.  It has similarities to J-D patch but adds a nice a split that can carry many regions.&lt;/p&gt;</comment>
                            <comment id="12642574" author="stack" created="Sat, 25 Oct 2008 00:08:56 +0000"  >&lt;p&gt;Let me take this one.  I chatted with Arthur and he says his multilocation doohickey works.  I&apos;ll refactor his patch &amp;#8211; he gave permission &amp;#8211; and try it out on cluster.&lt;/p&gt;</comment>
                            <comment id="12642575" author="stack" created="Sat, 25 Oct 2008 00:09:21 +0000"  >&lt;p&gt;I&apos;ll refactor his patch atop J-Ds.  They have much in common.&lt;/p&gt;</comment>
                            <comment id="12643572" author="stack" created="Wed, 29 Oct 2008 18:16:43 +0000"  >&lt;p&gt;Get this into 0.19.0.&lt;/p&gt;</comment>
                            <comment id="12648430" author="stack" created="Tue, 18 Nov 2008 00:26:36 +0000"  >&lt;p&gt;First cut at merging the Arthur and J-D patches.  Doesn&apos;t yet compile.&lt;/p&gt;</comment>
                            <comment id="12648513" author="stack" created="Tue, 18 Nov 2008 07:01:50 +0000"  >&lt;p&gt;Committed j-d&apos;s patch with minor modifications from Arthur&apos;s patch.  Biggest change in Arthur&apos;s patch is a split mechanism that groups together regions that are on the one regionservers; thats kinda nice and others will want to do that but the map per region strikes me as more general and therefore should be the default.&lt;/p&gt;

&lt;p&gt;To test, filled table then ran the rowcounter; it uses TableInputFormat.  I saw in ganglia that we did about half the net traffic on a small 4-node cluster.  You can also see in the TaskTracker map UI how the map is running on same node as regionserver carrying the region being processed.&lt;/p&gt;</comment>
                            <comment id="12648514" author="stack" created="Tue, 18 Nov 2008 07:03:03 +0000"  >&lt;p&gt;Compare the spike at 6:35 to that at 6:45; the former is with patch in place.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12408123">HBASE-987</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12394114" name="675-v2.patch" size="13006" author="stack" created="Tue, 18 Nov 2008 00:26:36 +0000"/>
                            <attachment id="12392797" name="arthur.patch" size="15642" author="stack" created="Fri, 24 Oct 2008 18:39:46 +0000"/>
                            <attachment id="12387851" name="hbase-675-v1.patch" size="2515" author="jdcryans" created="Fri, 8 Aug 2008 20:44:45 +0000"/>
                            <attachment id="12394139" name="network.png" size="112864" author="stack" created="Tue, 18 Nov 2008 07:03:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 15 Jul 2008 05:54:31 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31809</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 5 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h8rb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98681</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>