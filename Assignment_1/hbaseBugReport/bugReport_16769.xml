<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 21:17:38 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-16769/HBASE-16769.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-16769] Deprecate/remove PB references from MasterObserver and RegionServerObserver</title>
                <link>https://issues.apache.org/jira/browse/HBASE-16769</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;This is effectively a sub-task for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15174&quot; title=&quot;Client Public API should not have PB objects in 2.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15174&quot;&gt;&lt;del&gt;HBASE-15174&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
CP Methods&lt;br/&gt;
MasterObserver&lt;br/&gt;
	preListSnapshot&lt;br/&gt;
	postListSnapshot&lt;br/&gt;
	preSnapshot&lt;br/&gt;
	postSnapshot&lt;br/&gt;
	preCloneSnapshot&lt;br/&gt;
	postCloneSnapshot&lt;br/&gt;
	preRestoreSnapshot&lt;br/&gt;
	postRestoreSnapshot&lt;br/&gt;
	preDeleteSnapshot&lt;br/&gt;
	postDeleteSnapshot&lt;/p&gt;

&lt;p&gt;	preSetUserQuota&lt;br/&gt;
	postSetUserQuota&lt;br/&gt;
	preSetUserQuota&lt;br/&gt;
	postSetUserQuota&lt;br/&gt;
	preSetUserQuota&lt;br/&gt;
	postSetUserQuota&lt;br/&gt;
	preSetTableQuota&lt;br/&gt;
	postSetTableQuota&lt;br/&gt;
	preSetNamespaceQuota&lt;br/&gt;
	postSetNamespaceQuota&lt;/p&gt;

&lt;p&gt;RegionServerObserver&lt;br/&gt;
	preReplicateLogEntries&lt;br/&gt;
	postReplicateLogEntries&lt;/p&gt;</description>
                <environment></environment>
        <key id="13009794">HBASE-16769</key>
            <summary>Deprecate/remove PB references from MasterObserver and RegionServerObserver</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="anoop.hbase">Anoop Sam John</assignee>
                                    <reporter username="anoop.hbase">Anoop Sam John</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Oct 2016 07:34:02 +0000</created>
                <updated>Thu, 6 Oct 2016 17:20:16 +0000</updated>
                                                            <fixVersion>2.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="15547969" author="anoop.hbase" created="Wed, 5 Oct 2016 07:41:00 +0000"  >&lt;p&gt;After the shading of PB, we break the BC of these APIs as we changed the package from com.google* to o.a.h.h.shaded.com.google*.&lt;br/&gt;
So if we go with deprecation , I will restore the method signature with com.google* package name and deprecate those APIs.  Will add counterparts with our own POJO.&lt;br/&gt;
If removal is ok, we will just replace the methods&lt;br/&gt;
Ping &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt;.   Can we break these CP hooks? wrt Phoenix it is ok?&lt;br/&gt;
cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=saint.ack%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;saint.ack@gmail.com&quot;&gt;Stack&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ram_krish&quot; class=&quot;user-hover&quot; rel=&quot;ram_krish&quot;&gt;ramkrishna.s.vasudevan&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15549233" author="stack" created="Wed, 5 Oct 2016 16:29:37 +0000"  >&lt;p&gt;Actually, thinking on it, the only way to put back the unshaded arguments is by doing a copy from the internal shaded protobuf to the nonshaded protobuf just to pass parameters to a coprocessor. This is not viable. We break the Coprocessor API in hbase-2.0.0 OR we undo the shading project; can&apos;t have both. Let me go mark the shading issue as incompatible change.&lt;/p&gt;</comment>
                            <comment id="15549374" author="anoop.hbase" created="Wed, 5 Oct 2016 17:12:30 +0000"  >&lt;p&gt;Master CP hooks are around snapshot and quota features. The PB objects here are no large sized.  We do have our POJO - PB and vice versa conversion.&lt;br/&gt;
But RSO seems not so easy.  We pass the replicating WALEntry PB objects and cells to hook.  Cells are passed as CellScanner so no PB stuff here.  But there will be many WALEntry objects. For each we need to make either our POJO or unshaded PB objects seems lot of work and garbage.  We should not be passing the WALEntries and Cells to this hooks? These hooks are added by &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12916&quot; title=&quot;No access control for replicating WAL entries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12916&quot;&gt;&lt;del&gt;HBASE-12916&lt;/del&gt;&lt;/a&gt; (For AC check on replication APIs).  There any way these params not so imp.  wdyt?&lt;/p&gt;</comment>
                            <comment id="15549381" author="stack" created="Wed, 5 Oct 2016 17:16:11 +0000"  >&lt;p&gt;I think -1 on any convertion of an object just to make a CP call.&lt;/p&gt;</comment>
                            <comment id="15549426" author="anoop.hbase" created="Wed, 5 Oct 2016 17:28:45 +0000"  >&lt;p&gt;We should continue passing the PB objects as CP params? Ya with new shaded packaged objects? I feel we should be correcting the mistake of exposing the PB objects (even in CPs)&lt;/p&gt;</comment>
                            <comment id="15551132" author="anoop.hbase" created="Thu, 6 Oct 2016 07:11:50 +0000"  >&lt;p&gt;Ping &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt; also.&lt;/p&gt;</comment>
                            <comment id="15551142" author="anoop.hbase" created="Thu, 6 Oct 2016 07:15:07 +0000"  >&lt;p&gt;Ya I am getting ur point..  If u see, the convertion of many other PB objects to our objects is for CP hooks alone..  Just take case of puts.  We convert each Mutation from PB object to our POJO.  Cells are in plain bytes form only (CellScanner and Codec)..  Later in code in HRegion and all, we just need the Cells.. Details whatever we need extra from Mutation, we can very well get from PB object..  But we convert all Mutation PB to our POJO as we have many hooks in the write path. JFYI.. may be this is a point for long term consideration?&lt;/p&gt;</comment>
                            <comment id="15551425" author="ram_krish" created="Thu, 6 Oct 2016 09:17:17 +0000"  >&lt;p&gt;Going thro those RegionServerObserver hooks where the WALEntry is the only protos based parameter, it seems it is unused currently. So it could be safer to remove them? &lt;br/&gt;
But the same cannot be applied to all.&lt;br/&gt;
Yes, coming to Client interfaces like Puts/Scans we do create POJO from PB/to PB and use them just because our hooks expect the hbase interfaces rather than protos based.&lt;br/&gt;
In that sense changing such CP hooks should be better than leaving it with the protos style.&lt;/p&gt;</comment>
                            <comment id="15552282" author="stack" created="Thu, 6 Oct 2016 15:43:09 +0000"  >&lt;p&gt;In the past we talked about not unmarshalling pb objects and making POJOs of them just so they can be processed by the server. pb objects have lots of accessors and have a common pattern for access and building. Downside is they are fat. Would need discussion and a will to implement.&lt;/p&gt;

&lt;p&gt;I was more saying that for CPs we should not be making up objects to pass into CP API just to retain compabiilty on methods rarely if ever exploited.&lt;/p&gt;</comment>
                            <comment id="15552573" author="anoop.hbase" created="Thu, 6 Oct 2016 17:20:16 +0000"  >&lt;p&gt;Atleast in the RSO pre/postReplicateLogEntries, we can avoid passing the PB WALEntry objects and CellScanner. Do CP need them?  Snapshot and Quota related info might be required by CP.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12934272">HBASE-15174</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12958287">HBASE-15638</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12956822">HBASE-15607</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 5 Oct 2016 16:29:37 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34gjb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>