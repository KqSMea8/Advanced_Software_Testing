<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:51:01 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-14227/HBASE-14227.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-14227] Fold special cased MOB APIs into existing APIs</title>
                <link>https://issues.apache.org/jira/browse/HBASE-14227</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;There are a number of APIs that came in with MOB that are not new actions for HBase, simply new actions for a MOB implementation:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;compactMob&lt;/li&gt;
	&lt;li&gt;compactMobs&lt;/li&gt;
	&lt;li&gt;majorCompactMob&lt;/li&gt;
	&lt;li&gt;majorCompactMobs&lt;/li&gt;
	&lt;li&gt;getMobCompactionState&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;And in HBaseAdmin:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;validateMobColumnFamily&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Remove these special cases from the Admin API where possible by folding them into existing APIs.&lt;/p&gt;

&lt;p&gt;We definitely don&apos;t need one method for a singleton and another for collections.&lt;/p&gt;

&lt;p&gt;Ideally we will not have any APIs named *Mob when finished, whether MOBs are in use on a table or not should be largely an internal detail. Exposing as schema option would be fine, this conforms to existing practice for other features.&lt;/p&gt;

&lt;p&gt;Marking critical because I think removing the *Mob special cased APIs should be a precondition for release of this feature either in 2.0 or as a backport.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12856376">HBASE-14227</key>
            <summary>Fold special cased MOB APIs into existing APIs</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chenheng">Heng Chen</assignee>
                                    <reporter username="apurtell">Andrew Purtell</reporter>
                        <labels>
                    </labels>
                <created>Sat, 15 Aug 2015 17:24:45 +0000</created>
                <updated>Fri, 8 Jan 2016 17:16:57 +0000</updated>
                            <resolved>Sat, 26 Sep 2015 01:45:30 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>mob</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="14698364" author="apurtell" created="Sat, 15 Aug 2015 17:28:13 +0000"  >&lt;p&gt;Another strong reason for doing this work is there is no coprocessor API nor AccessController support for securing the MOB admin APIs, at least as far as a case insensitive grep for &quot;mob&quot; of o.a.h.h.coprocessor and o.a.h.h.security.access in master branch can determine.&lt;/p&gt;

&lt;p&gt;Adding APIs specific to MOB could be reasonable at the coprocessor level, I think we&apos;d want to look at that on a case by case basis, and again avoid wherever possible.&lt;/p&gt;</comment>
                            <comment id="14698365" author="apurtell" created="Sat, 15 Aug 2015 17:28:40 +0000"  >&lt;p&gt;Making this a blocker&lt;/p&gt;</comment>
                            <comment id="14699330" author="chenheng" created="Mon, 17 Aug 2015 10:16:16 +0000"  >&lt;p&gt;Just remove api with &quot;mob&quot; in &lt;tt&gt;Admin&lt;/tt&gt;, and add one condition to check whether the CF mob is enable.  It seems not diffculty.  Just like below, Am i right?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void compact(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; TableName tableName, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] columnFamily,&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; major)
  &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (isMobFamily(tableName, columnFamily)) {
      &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
        compactMob(tableName, columnFamily, major);
      } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (InterruptedException e) {
        LOG.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Compact Mob family is interrupted!&quot;&lt;/span&gt;, e);
      }
    } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
      ZooKeeperWatcher zookeeper = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
      &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
        checkTableExists(tableName);
        zookeeper = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ZooKeeperWatcher(conf, ZK_IDENTIFIER_PREFIX + connection.toString(),
                &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ThrowableAbortable());
       .......
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14700019" author="apurtell" created="Mon, 17 Aug 2015 18:48:19 +0000"  >&lt;p&gt;Yes &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chenheng&quot; class=&quot;user-hover&quot; rel=&quot;chenheng&quot;&gt;Heng Chen&lt;/a&gt;, something very much like that&lt;/p&gt;</comment>
                            <comment id="14700432" author="chenheng" created="Mon, 17 Aug 2015 23:31:46 +0000"  >&lt;p&gt;Can i upload patch for this issue? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14700764" author="anoop.hbase" created="Tue, 18 Aug 2015 05:50:11 +0000"  >&lt;p&gt;It is not that straight forward change.  When we call compact &amp;lt;table&amp;gt; &amp;lt;cf&amp;gt; there is a column family for the (normal HBase cf) reference cells which refers to MOB cells.  And there is another MOB CF. A compaction on the MOB CF will be more IO oriented than the normal CFs.  So when we call compact whether the compaction has to happen for the ref CF or MOB CF or both?  May be instead of new APIs as above, it would have been like overloaded APIs with a boolean param which says whether to compact/major compact the MOB CF also?  Then there is no need for new CP hooks and the security checks also can be enforced.&lt;/p&gt;</comment>
                            <comment id="14700779" author="chenheng" created="Tue, 18 Aug 2015 06:06:53 +0000"  >&lt;blockquote&gt;
&lt;p&gt; So when we call compact whether the compaction has to happen for the ref CF or MOB CF or both?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;IMO when call &lt;tt&gt;Admin.compact(final TableName tableName) throws IOException;&lt;/tt&gt;,  the compaction would happen for both MOB CF and Normal CF.&lt;/p&gt;

&lt;p&gt;So we can check, if table has MOB CF,  it would compact on MOB CF after normal CF compaction. just like below&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (isMobFamily(tableName, columnFamily)) {
      &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
        compactMob(tableName, columnFamily, major);
      } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (InterruptedException e) {
        LOG.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Compact Mob family is interrupted!&quot;&lt;/span&gt;, e);
      }
    } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
      &lt;span class=&quot;code-comment&quot;&gt;// normal compaction
&lt;/span&gt;         ......

      &lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; not specify column family, and table has mob cf, we should request compact &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; it.
&lt;/span&gt;      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (columnFamily == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; isMobTable(tableName)) {
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
          compactMob(tableName, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (InterruptedException e) {
          &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IOException(e);
        }
      }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And when we call &lt;tt&gt;Admin.getCompactionState&lt;/tt&gt;,  we also do this check if table has mob cf.&lt;/p&gt;


&lt;p&gt;Any concerns? &lt;/p&gt;
</comment>
                            <comment id="14700791" author="anoop.hbase" created="Tue, 18 Aug 2015 06:24:24 +0000"  >&lt;blockquote&gt;&lt;p&gt;IMO when call Admin.compact(final TableName tableName) throws IOException;, the compaction would happen for both MOB CF and Normal CF.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Am not having the same opinion. Mainly major compaction.  The non MOB CFs users would see to get major compacted after some time/days. But MOB!! The IO there will be much much more. &lt;br/&gt;
cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jingcheng.du%40intel.com&quot; class=&quot;user-hover&quot; rel=&quot;jingcheng.du@intel.com&quot;&gt;Jingcheng Du&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14700870" author="jingcheng.du@intel.com" created="Tue, 18 Aug 2015 07:50:07 +0000"  >&lt;p&gt;Agree with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoopsamjohn&quot; class=&quot;user-hover&quot; rel=&quot;anoopsamjohn&quot;&gt;Anoop Sam John&lt;/a&gt;. &lt;br/&gt;
compactMob only compacts the mob files. The store files are NOT included in this operations.&lt;br/&gt;
We can allow less MOB compaction and even disable it. Compacting the normal CF and MOB CF is not a good idea because of mob&apos;s big size.&lt;br/&gt;
The mob APIs can be removed from Admin, and are folded into existing ones. How about using a special name format, for example columnFamily$MOB? So we can know it is used to trigger a mob compaction on a mob-enabled column family?&lt;br/&gt;
Thanks.&lt;/p&gt;</comment>
                            <comment id="14700893" author="chenheng" created="Tue, 18 Aug 2015 08:08:09 +0000"  >&lt;p&gt;I see...    So i think if columnFamily is specified in &lt;tt&gt;Admin.compact&lt;/tt&gt;, we can do mob compaction if the cf is mob one. &lt;br/&gt;
 And if columnFamily is not specified, we can add another interface like &lt;tt&gt;Admin.compact(final TableName tableName, final boolean isMob)&lt;/tt&gt; just as &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt; said.&lt;/p&gt;</comment>
                            <comment id="14700939" author="jingcheng.du@intel.com" created="Tue, 18 Aug 2015 08:36:28 +0000"  >&lt;p&gt;I mean we&apos;d better not compact the normal and mob cf together.&lt;br/&gt;
I have a way to fold the compactMob into the existing APIs.&lt;br/&gt;
As you know, the mob is stored in a dummy mob region (with a constant name). We can use the exiting APIs compactRegion and majorCompactRegion to do this.&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;If the region name is a mob region name, we do compaction of mob.&lt;/li&gt;
	&lt;li&gt;Otherwise do normal compaction.&lt;br/&gt;
How about this?&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="14700941" author="anoop.hbase" created="Tue, 18 Aug 2015 08:40:31 +0000"  >&lt;p&gt;This will work for the APIs which takes region name too.  WHat abt API which takes only table name?  Expectation is compact all regions for it.&lt;/p&gt;</comment>
                            <comment id="14700942" author="jingcheng.du@intel.com" created="Tue, 18 Aug 2015 08:42:22 +0000"  >&lt;p&gt;Wait... We still need table name and cf name in compactRegion, so this approach doesn&apos;t work. Sorry.&lt;/p&gt;</comment>
                            <comment id="14700962" author="chenheng" created="Tue, 18 Aug 2015 08:59:30 +0000"  >&lt;p&gt;I have a question: Is there any need to add interface compact for MOB at table and region level?&lt;br/&gt;
If user want to compact MOB CF,  just specify it at CF Level.&lt;/p&gt;</comment>
                            <comment id="14701014" author="jingcheng.du@intel.com" created="Tue, 18 Aug 2015 09:47:00 +0000"  >&lt;p&gt;No need for region level, just need to tell table and CF name. The thing is we don&apos;t want to do the compaction in store files and mob files together.&lt;br/&gt;
The ref cells of mob are stored in store file in hbase, and the real mob data are stored in mob files outside hbase directory.&lt;br/&gt;
The hbase compaction only needs to compact the ref cells, and mob compaction takes care of mob files.&lt;br/&gt;
The impact of the number of mob files is not significant in read, usually they are deleted when expired. Sometimes the compactions to them are not necessary.&lt;br/&gt;
We have two approaches for this.&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Use a special name format in the cf name, if we want to do the mobCompact, we can pass in a special cf name, for instance cf$MOB.&lt;/li&gt;
	&lt;li&gt;Add two new APIs with one additional parameter (enum or boolean) to switch the mob compaction and normal compaction.&lt;/li&gt;
&lt;/ol&gt;

</comment>
                            <comment id="14701027" author="chenheng" created="Tue, 18 Aug 2015 10:02:40 +0000"  >&lt;blockquote&gt;
&lt;p&gt;1. Use a special name format in the cf name, if we want to do the mobCompact, we can pass in a special cf name, for instance cf$MOB.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;There is no need to do this. If CF is passed in, we can check schema option to decide whether the CF is MOB or not.&lt;/p&gt;

&lt;p&gt;The question is when compact on table or region Level,  shall we do MOB compaction?&lt;br/&gt;
If we do,  the function &lt;tt&gt;Admin.compact(final TableName tableName)&lt;/tt&gt; need one additional parameter to switch  the mob compaction and normal compaction as &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jingcheng.du%40intel.com&quot; class=&quot;user-hover&quot; rel=&quot;jingcheng.du@intel.com&quot;&gt;Jingcheng Du&lt;/a&gt; said.&lt;br/&gt;
If we don&apos;t,  there is no need to change &lt;tt&gt;Admin.compact(final TableName tableName)&lt;/tt&gt;&lt;/p&gt;

</comment>
                            <comment id="14701043" author="jingcheng.du@intel.com" created="Tue, 18 Aug 2015 10:19:15 +0000"  >&lt;blockquote&gt;&lt;p&gt;There is no need to do this. If CF is passed in, we can check schema option to decide whether the CF is MOB or not&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Compacting the store files with ref cells and mob files are different. But they share the same CF. We want to separate the compactions, and we have to separate these operations in methods. If only with CF, we only know the cf is a mob-enable cf, but we don&apos;t know what kind of compaction is needed.&lt;/p&gt;</comment>
                            <comment id="14701052" author="chenheng" created="Tue, 18 Aug 2015 10:27:04 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Compacting the store files with ref cells and mob files are different. But they share the same CF. We want to separate the compactions, and we have to separate these operations in methods. If only with CF, we only know the cf is a mob-enable cf, but we don&apos;t know what kind of compaction is needed.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I see...  I agree with you.  we can use special name to notify us do MOB compaction.&lt;/p&gt;</comment>
                            <comment id="14701054" author="jingcheng.du@intel.com" created="Tue, 18 Aug 2015 10:32:31 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chenheng&quot; class=&quot;user-hover&quot; rel=&quot;chenheng&quot;&gt;Heng Chen&lt;/a&gt;! Let&apos;s see if any more comments on the first approach (special name format which adds limit to the cf name in that method).&lt;/p&gt;</comment>
                            <comment id="14701104" author="jingcheng.du@intel.com" created="Tue, 18 Aug 2015 11:32:48 +0000"  >&lt;p&gt;Go through the code, I think we can fold these mob APIs into &lt;tt&gt;void compactRegion(final byte[] regionName, final byte[] columnFamily)&lt;/tt&gt; and &lt;tt&gt;void majorCompactRegion(final byte[] regionName, final byte[] columnFamily)&lt;/tt&gt;.&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;We could know whether it&apos;s a mob region by region name.&lt;/li&gt;
	&lt;li&gt;Issue the compaction from admin by passing region name and column name(optional).&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;I think this can work.&lt;/p&gt;</comment>
                            <comment id="14701284" author="davelatham" created="Tue, 18 Aug 2015 13:56:04 +0000"  >&lt;p&gt;I&apos;m not a fan of passing behavior arguments as special in band names for something like a column family.  It leads to worse documentation, user surprises, and potentially even conflicts if someone already has such a column family.  Since MOB compaction actually is a separate thing, it should be reflected in the API by either another parameter or new API methods (though they should be minimized).  But just my two cents from an interested user.&lt;/p&gt;</comment>
                            <comment id="14701530" author="jingcheng.du@intel.com" created="Tue, 18 Aug 2015 16:33:25 +0000"  >&lt;p&gt;Upload the 1st patch for review.&lt;/p&gt;</comment>
                            <comment id="14701533" author="jingcheng.du@intel.com" created="Tue, 18 Aug 2015 16:35:03 +0000"  >&lt;p&gt;Oops, got race condition with the assign. Sorry for that.&lt;/p&gt;</comment>
                            <comment id="14701534" author="apurtell" created="Tue, 18 Aug 2015 16:36:58 +0000"  >&lt;p&gt;Agreed overloading existing admin methods with a new option with an additional parameter is a better compromise.&lt;/p&gt;

&lt;p&gt;What we are doing here is exposing more control over compaction IO scheduling. We should update the APIs with that in mind and not make it MOB specific.&lt;/p&gt;

&lt;p&gt;Rather than a boolean I&apos;d suggest a set of flags... I guess the Java idiom is a List of Enum... for selecting what &quot;types&quot; of CFs to include in the compaction. Or, something more flexible (but crazier) like a Filter or Comparator. &lt;/p&gt;

</comment>
                            <comment id="14701535" author="jingcheng.du@intel.com" created="Tue, 18 Aug 2015 16:37:11 +0000"  >&lt;p&gt;Understand your concerns.&lt;br/&gt;
So how about passing the mob region name to the existing Admin APIs for compaction? The mob region name can be found by calling &lt;tt&gt;HRegionInfo.getMobRegionName(TableName)&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="14701536" author="apurtell" created="Tue, 18 Aug 2015 16:37:28 +0000"  >&lt;p&gt;My bad Jingcheng. It should be assigned to whomever is doing the work. Feel free to change.&lt;/p&gt;</comment>
                            <comment id="14701541" author="apurtell" created="Tue, 18 Aug 2015 16:39:03 +0000"  >&lt;p&gt;I really don&apos;t like any &lt;b&gt;mob&lt;/b&gt; API name of any kind. We can leak if a CF is a MOB through schema attributes, that seems fine. Otherwise I feel it is a layering violation. Our APIs shouldn&apos;t care what kind of CF is a CF at the level of method names. &lt;/p&gt;</comment>
                            <comment id="14701575" author="jingcheng.du@intel.com" created="Tue, 18 Aug 2015 16:52:19 +0000"  >&lt;p&gt;Thanks Andy for comments!&lt;br/&gt;
How about folding the mob compaction into compactRegion/majorCompactRegion? This doesn&apos;t add additional words into names of methods. But users need to pass the mob region name (a dummy one) into these methods.&lt;/p&gt;</comment>
                            <comment id="14702182" author="chenheng" created="Tue, 18 Aug 2015 23:47:17 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Rather than a boolean I&apos;d suggest a set of flags... I guess the Java idiom is a List of Enum... for selecting what &quot;types&quot; of CFs to include in the compaction. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I agree with this approach.  We remove any &quot;mob&quot; method.  And use one &lt;tt&gt;Enum&lt;/tt&gt; parameter to select compaction types.&lt;/p&gt;

&lt;p&gt;By the way, i found the issue was assigned to me,  but &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jingcheng.du%40intel.com&quot; class=&quot;user-hover&quot; rel=&quot;jingcheng.du@intel.com&quot;&gt;Jingcheng Du&lt;/a&gt; has uploaded the patch. &lt;br/&gt;
Do i need to submit patch&#65311; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14702325" author="jingcheng.du@intel.com" created="Wed, 19 Aug 2015 02:25:57 +0000"  >&lt;p&gt;Please go ahead for a new patch if you want.&lt;/p&gt;</comment>
                            <comment id="14702326" author="jingcheng.du@intel.com" created="Wed, 19 Aug 2015 02:25:57 +0000"  >&lt;p&gt;Please go ahead for a new patch if you want.&lt;/p&gt;</comment>
                            <comment id="14702327" author="jingcheng.du@intel.com" created="Wed, 19 Aug 2015 02:26:01 +0000"  >&lt;p&gt;Please go ahead for a new patch if you want.&lt;/p&gt;</comment>
                            <comment id="14702328" author="jingcheng.du@intel.com" created="Wed, 19 Aug 2015 02:26:43 +0000"  >&lt;p&gt;Guys, do you want to take a look at the first patch and have comments? Thanks.&lt;/p&gt;</comment>
                            <comment id="14702353" author="chenheng" created="Wed, 19 Aug 2015 02:48:39 +0000"  >
&lt;p&gt;As your patch, IMO there is one problem.  If user want to compact MOB CF,  it needs to call something like &lt;tt&gt;Admin.compactRegion(mobRegionName)&lt;/tt&gt;.  &lt;/p&gt;

&lt;p&gt;It means the user has to know what mobRegionName it is.  I think this is your implementation detail, the user has no need to know. &lt;/p&gt;</comment>
                            <comment id="14702356" author="jingcheng.du@intel.com" created="Wed, 19 Aug 2015 02:55:52 +0000"  >&lt;p&gt;Agree. But there are reasons that compactRegion in Admin exists. It allows users to compact specific regions.&lt;br/&gt;
In design document, it was mentioned the mob was considered as a dummy region. I think it is ok &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/help_16.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; for users to know this.&lt;br/&gt;
In order to ease the invocation of compactRegion API, I added a static method to HRegionInfo to create region name by table name.&lt;/p&gt;</comment>
                            <comment id="14702535" author="jingcheng.du@intel.com" created="Wed, 19 Aug 2015 05:49:29 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chenheng&quot; class=&quot;user-hover&quot; rel=&quot;chenheng&quot;&gt;Heng Chen&lt;/a&gt;, you can go ahead with a new patch in the enum approach. Thanks.&lt;br/&gt;
The enum might contains three elements, all, normal, and mob? Not good at naming things.&lt;/p&gt;</comment>
                            <comment id="14702636" author="chenheng" created="Wed, 19 Aug 2015 07:28:51 +0000"  >&lt;p&gt;ok,  this is first try to upload patch for this issue &lt;/p&gt;</comment>
                            <comment id="14702768" author="anoop.hbase" created="Wed, 19 Aug 2015 09:35:02 +0000"  >&lt;p&gt;HRegionInfo is public exposed. Can we avoid getMobRegionInfo added there? MobUtil can have this method?&lt;/p&gt;</comment>
                            <comment id="14702781" author="chenheng" created="Wed, 19 Aug 2015 09:51:02 +0000"  >&lt;blockquote&gt;
&lt;p&gt;HRegionInfo is public exposed. Can we avoid getMobRegionInfo added there? MobUtil can have this method?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;tt&gt;MobUtils&lt;/tt&gt; is in hbase-server module,  but &lt;tt&gt;HbaseAdmin&lt;/tt&gt; is in hbase-client.   &lt;br/&gt;
If move this method into &lt;tt&gt;MobUtils&lt;/tt&gt;, the client will depend on server jar,  is it good?&lt;/p&gt;</comment>
                            <comment id="14702787" author="jingcheng.du@intel.com" created="Wed, 19 Aug 2015 09:56:43 +0000"  >&lt;p&gt;Please don&apos;t move the MobUtils to client where a lot of hbase-region classes are used. We cannot reference server stuff from client module.&lt;/p&gt;</comment>
                            <comment id="14704230" author="jingcheng.du@intel.com" created="Thu, 20 Aug 2015 03:18:46 +0000"  >&lt;p&gt;Good one! Thanks.&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;As &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoopsamjohn&quot; class=&quot;user-hover&quot; rel=&quot;anoopsamjohn&quot;&gt;Anoop Sam John&lt;/a&gt;&apos;s concern, should we remove the getMobRegionInfo out from HReginoInfo, and move it back to HBaseAdmin as a private method?&lt;/li&gt;
	&lt;li&gt;Remove the un-used private methods used by mob, for instance checkFamilyNameNotNull, validateMobColumnFamily, etc.&lt;/li&gt;
	&lt;li&gt;Add comments for new parameters and methods.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;I&apos;ll be +1 after the above things are addressed! Thanks!&lt;/p&gt;</comment>
                            <comment id="14704271" author="chenheng" created="Thu, 20 Aug 2015 04:21:44 +0000"  >&lt;p&gt;Thanks for your review.&lt;/p&gt;

&lt;p&gt;update patch as your suggestions!  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jingcheng.du%40intel.com&quot; class=&quot;user-hover&quot; rel=&quot;jingcheng.du@intel.com&quot;&gt;Jingcheng Du&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14704333" author="anoop.hbase" created="Thu, 20 Aug 2015 05:48:36 +0000"  >&lt;p&gt;Looks good overall.&lt;br/&gt;
We will need a bit of explanation for the new param &apos;compactType&apos;.  And also at the new enum. (javadoc)&lt;br/&gt;
To tell what will get compacted when Normal and what when MOB.&lt;/p&gt;</comment>
                            <comment id="14704355" author="chenheng" created="Thu, 20 Aug 2015 06:16:55 +0000"  >&lt;p&gt;Thanks for your review.&lt;br/&gt;
update patch as your suggestions! &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;changes:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;add comments for CompactType enum and param &apos;compactType&apos;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14704391" author="jingcheng.du@intel.com" created="Thu, 20 Aug 2015 06:44:30 +0000"  >&lt;p&gt;The comments about the CompactType seems not enough, the words &quot;Currently, there are only two compact types:&quot; is not a good choice in comments. We need to tell what it is and why we have this, for instance differentiate the compaction between store files and mob files. Do you have suggestion on this? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoopsamjohn&quot; class=&quot;user-hover&quot; rel=&quot;anoopsamjohn&quot;&gt;Anoop Sam John&lt;/a&gt;, thanks.&lt;/p&gt;</comment>
                            <comment id="14706017" author="chenheng" created="Fri, 21 Aug 2015 00:16:46 +0000"  >&lt;p&gt;How about this&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

+  /**
+   * {@code NORMAL} means &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; store files compaction;
+   * {@code MOB} means &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; mob files compaction.
+   * It is different, MOB compaction only take care of MOB files.  
+   * Generally, MOB CF is larger than normal CF,  a compaction on the MOB CF will be more IO oriented than the normal CF.
+   *  And the impact of the number of MOB files is not significant in read, usually they are deleted when expired. 
+   *  So sometimes MOB compactions are not necessary. More MOB detail see HBASE-11339
+   * */
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;enum&lt;/span&gt; CompactType {
+
+    NORMAL    (0),
+    MOB       (1);
+
+    CompactType(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; value) {}
+  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14706451" author="jingcheng.du@intel.com" created="Fri, 21 Aug 2015 09:21:59 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chenheng&quot; class=&quot;user-hover&quot; rel=&quot;chenheng&quot;&gt;Heng Chen&lt;/a&gt;!&lt;br/&gt;
Maybe too many details for a public client. Sorry for mislead in my previous comments.&lt;br/&gt;
How about this?&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; /**
   * The compaction types. 
   *  {@code NORMAL} is for compaction in store files.
   *  {@code MOB} is for mob. If it is used the compaction of mob files is triggered.
  **/
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoopsamjohn&quot; class=&quot;user-hover&quot; rel=&quot;anoopsamjohn&quot;&gt;Anoop Sam John&lt;/a&gt;, do you want to have a look and give some advice? Thanks.&lt;/p&gt;</comment>
                            <comment id="14711310" author="chenheng" created="Tue, 25 Aug 2015 14:02:45 +0000"  >&lt;p&gt;QA seems not run. retry&lt;/p&gt;</comment>
                            <comment id="14712507" author="anoop.hbase" created="Wed, 26 Aug 2015 04:51:07 +0000"  >&lt;p&gt;Bit more correction needed in the doc for CompactType which can be corrected on commit. Once QA is ok am +1&lt;/p&gt;</comment>
                            <comment id="14715981" author="chenheng" created="Thu, 27 Aug 2015 02:51:07 +0000"  >&lt;p&gt;QA not run. retry&lt;/p&gt;</comment>
                            <comment id="14716030" author="hadoopqa" created="Thu, 27 Aug 2015 03:50:08 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12752639/HBASE-14227_v3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12752639/HBASE-14227_v3.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 56890d9fe148dd192520fab349a66aa3f688e232.&lt;br/&gt;
  ATTACHMENT ID: 12752639&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 7 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 1854 checkstyle errors (more than the master&apos;s current 1849 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +  public void compact(final TableName tableName, CompactType compactType) throws IOException, InterruptedException {&lt;br/&gt;
+  public void majorCompact(final TableName tableName, final byte[] columnFamily, CompactType compactType)&lt;br/&gt;
+  public CompactionState getCompactionState(TableName tableName, CompactType compactType) throws IOException {&lt;br/&gt;
+        @admin.compact(org.apache.hadoop.hbase.TableName.valueOf(table_name), org.apache.hadoop.hbase.client.Admin.CompactType.MOB)&lt;br/&gt;
+        @admin.compact(org.apache.hadoop.hbase.TableName.valueOf(table_name), family.to_java_bytes, org.apache.hadoop.hbase.client.Admin.CompactType.MOB)&lt;br/&gt;
+        @admin.majorCompact(org.apache.hadoop.hbase.TableName.valueOf(table_name), org.apache.hadoop.hbase.client.Admin.CompactType.MOB)&lt;br/&gt;
+        @admin.majorCompact(org.apache.hadoop.hbase.TableName.valueOf(table_name), family.to_java_bytes, org.apache.hadoop.hbase.client.Admin.CompactType.MOB)&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.TestInterfaceAudienceAnnotations&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 1 zombie test(s): 	at org.apache.sentry.tests.e2e.hive.AbstractTestWithStaticConfiguration.clearAll(AbstractTestWithStaticConfiguration.java:475)&lt;br/&gt;
	at org.apache.sentry.tests.e2e.hive.AbstractTestWithStaticConfiguration.clearAfterPerTest(AbstractTestWithStaticConfiguration.java:463)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15282//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15282//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15282//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15282//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15282//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15282//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15282//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15282//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14716078" author="chenheng" created="Thu, 27 Aug 2015 04:32:38 +0000"  >&lt;p&gt;update patch as QA suggestions.&lt;/p&gt;</comment>
                            <comment id="14716151" author="hadoopqa" created="Thu, 27 Aug 2015 06:20:51 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12752653/HBASE-14227_v4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12752653/HBASE-14227_v4.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 56890d9fe148dd192520fab349a66aa3f688e232.&lt;br/&gt;
  ATTACHMENT ID: 12752653&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 7 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 1854 checkstyle errors (more than the master&apos;s current 1849 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +  public void compact(final TableName tableName, CompactType compactType) throws IOException, InterruptedException {&lt;br/&gt;
+  public void majorCompact(final TableName tableName, final byte[] columnFamily, CompactType compactType)&lt;br/&gt;
+  public CompactionState getCompactionState(TableName tableName, CompactType compactType) throws IOException {&lt;br/&gt;
+        @admin.majorCompact(org.apache.hadoop.hbase.TableName.valueOf(table_name), family.to_java_bytes,&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.TestStochasticBalancerJmxMetrics&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15285//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15285//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15285//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15285//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15285//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15285//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15285//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15285//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14716160" author="jingcheng.du@intel.com" created="Thu, 27 Aug 2015 06:28:20 +0000"  >&lt;p&gt;-1 lineLengths. The patch introduces the following lines longer than 100:&lt;br/&gt;
+ public void compact(final TableName tableName, CompactType compactType) throws IOException, InterruptedException {&lt;br/&gt;
+ public void majorCompact(final TableName tableName, final byte[] columnFamily, CompactType compactType)&lt;br/&gt;
+ public CompactionState getCompactionState(TableName tableName, CompactType compactType) throws IOException {&lt;br/&gt;
+ @admin.majorCompact(org.apache.hadoop.hbase.TableName.valueOf(table_name), family.to_java_bytes,&lt;/p&gt;

&lt;p&gt;Please trim these lines, and make sure they are not longer than 100. Thanks!&lt;/p&gt;</comment>
                            <comment id="14716174" author="chenheng" created="Thu, 27 Aug 2015 06:45:08 +0000"  >&lt;blockquote&gt;
&lt;p&gt;-1 lineLengths. The patch introduces the following lines longer than 100:&lt;br/&gt;
+ public void compact(final TableName tableName, CompactType compactType) throws IOException, InterruptedException {&lt;br/&gt;
+ public void majorCompact(final TableName tableName, final byte[] columnFamily, CompactType compactType)&lt;br/&gt;
+ public CompactionState getCompactionState(TableName tableName, CompactType compactType) throws IOException {&lt;br/&gt;
+ @admin.majorCompact(org.apache.hadoop.hbase.TableName.valueOf(table_name), family.to_java_bytes,&lt;br/&gt;
Please trim these lines, and make sure they are not longer than 100. Thanks!&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Fix it!&lt;/p&gt;</comment>
                            <comment id="14716333" author="hadoopqa" created="Thu, 27 Aug 2015 09:18:32 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12752675/HBASE-14227_v5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12752675/HBASE-14227_v5.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 56890d9fe148dd192520fab349a66aa3f688e232.&lt;br/&gt;
  ATTACHMENT ID: 12752675&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 7 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 1851 checkstyle errors (more than the master&apos;s current 1849 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 9 zombie test(s): 	at org.apache.hadoop.hbase.mapreduce.TestLoadIncrementalHFiles.testSimpleHFileSplit(TestLoadIncrementalHFiles.java:153)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15289//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15289//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15289//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15289//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15289//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15289//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15289//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15289//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14716457" author="chenheng" created="Thu, 27 Aug 2015 10:45:10 +0000"  >&lt;p&gt;I think the testcase failed was not caused by this patch.  I will retry later.&lt;/p&gt;</comment>
                            <comment id="14718004" author="chenheng" created="Fri, 28 Aug 2015 03:32:08 +0000"  >&lt;p&gt;retry&lt;/p&gt;</comment>
                            <comment id="14718126" author="hadoopqa" created="Fri, 28 Aug 2015 06:44:23 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12752927/HBASE-14227_v5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12752927/HBASE-14227_v5.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit cc1542828de93b8d54cc14497fd5937989ea1b6d.&lt;br/&gt;
  ATTACHMENT ID: 12752927&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 7 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 1851 checkstyle errors (more than the master&apos;s current 1849 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.TestIOFencing&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 7 zombie test(s): 	at org.apache.hadoop.hbase.security.access.TestAccessController.testAccessControllerUserPermsRegexHandling(TestAccessController.java:2560)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15313//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15313//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15313//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15313//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15313//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15313//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15313//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15313//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14721929" author="chenheng" created="Mon, 31 Aug 2015 03:38:12 +0000"  >&lt;p&gt;retry again.&lt;/p&gt;</comment>
                            <comment id="14721933" author="hadoopqa" created="Mon, 31 Aug 2015 03:41:44 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12753222/HBASE-14227_v5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12753222/HBASE-14227_v5.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit df341c4299ea21e4e1ca09652f6126633f2307c5.&lt;br/&gt;
  ATTACHMENT ID: 12753222&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 7 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javac&lt;/font&gt;.  The patch appears to cause mvn compile goal to fail with Hadoop version 2.4.0.&lt;/p&gt;

&lt;p&gt;    Compilation errors resume:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Error invoking method &apos;get(java.lang.Integer)&apos; in java.util.ArrayList at META-INF/LICENSE.vm&lt;span class=&quot;error&quot;&gt;&amp;#91;line 1619, column 22&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Failed to execute goal org.apache.maven.plugins:maven-remote-resources-plugin:1.5:process (default) on project hbase-assembly: Error rendering velocity resource. Error invoking method &apos;get(java.lang.Integer)&apos; in java.util.ArrayList at META-INF/LICENSE.vm&lt;span class=&quot;error&quot;&gt;&amp;#91;line 1619, column 22&amp;#93;&lt;/span&gt;: InvocationTargetException: Index: 0, Size: 0 -&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; To see the full stack trace of the errors, re-run Maven with the -e switch.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Re-run Maven using the -X switch to enable full debug logging.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; For more information about the errors and possible solutions, please read the following articles:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; After correcting the problems, you can resume the build with the command&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt;   mvn &amp;lt;goals&amp;gt; -rf :hbase-assembly&lt;/p&gt;


&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15331//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15331//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14724037" author="busbey" created="Mon, 31 Aug 2015 21:05:45 +0000"  >&lt;p&gt;reattaching v5 patch so QA bot can pick it up again.&lt;/p&gt;</comment>
                            <comment id="14724490" author="hadoopqa" created="Tue, 1 Sep 2015 00:46:54 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12753380/HBASE-14227_v5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12753380/HBASE-14227_v5.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 498c1845ab7b01710955153c27501fdc7492849d.&lt;br/&gt;
  ATTACHMENT ID: 12753380&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 7 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 1848 checkstyle errors (more than the master&apos;s current 1846 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 1 zombie test(s): &lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15362//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15362//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15362//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15362//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15362//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15362//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15362//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15362//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14738335" author="chenheng" created="Thu, 10 Sep 2015 07:34:06 +0000"  >&lt;p&gt;Any suggestions? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt;   &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jingcheng.du%40intel.com&quot; class=&quot;user-hover&quot; rel=&quot;jingcheng.du@intel.com&quot;&gt;Jingcheng Du&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14906145" author="chenheng" created="Thu, 24 Sep 2015 10:01:40 +0000"  >&lt;p&gt;Anybody who can help me review this? &lt;/p&gt;</comment>
                            <comment id="14907316" author="apurtell" created="Fri, 25 Sep 2015 00:54:30 +0000"  >&lt;p&gt;Sorry this has been neglected &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chenheng&quot; class=&quot;user-hover&quot; rel=&quot;chenheng&quot;&gt;Heng Chen&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Mostly lgtm.&lt;/p&gt;

&lt;p&gt;In HBaseAdmin the patch calls getClusterStatus in a few places only to get the ServerName of the master. getClusterStatus is really expensive, and this ultimately contacts the master to find the master&apos;s address. Consider MasterAddressTracker#getMasterAddress(ZooKeeperWatcher) instead.&lt;/p&gt;

&lt;p&gt;Can we also change the shell to remove thel *_mob commands there? Expose the CompactType types as constants on the ruby side and change the current compact and major_compact command to accept an optional additional parameter which specifies the compaction type, defaulting to &apos;NORMAL&apos;. &lt;/p&gt;</comment>
                            <comment id="14907366" author="jingcheng.du@intel.com" created="Fri, 25 Sep 2015 01:40:59 +0000"  >&lt;p&gt;Sorry for the late response. I&apos;m ok with the current patch.&lt;br/&gt;
I am currently work on implementing mob compaction with procedure. After that we can use Admin.execProcedure to invoke the mob compaction instead of the current APIs (compactMob, majorCompactMob, etc.). So what do you guys think of this? Which way should we choose?&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Apply the code of current patch.&lt;/li&gt;
	&lt;li&gt;Use Admin.execProcedure after the procedure mob compaction is finished.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Please advise. Thanks a lot!&lt;/p&gt;</comment>
                            <comment id="14907391" author="apurtell" created="Fri, 25 Sep 2015 02:05:25 +0000"  >&lt;p&gt;We can still commit this change that updates the user facing API first, then apply your changes to use execProcedure behind the scenes after, right &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jingcheng.du%40intel.com&quot; class=&quot;user-hover&quot; rel=&quot;jingcheng.du@intel.com&quot;&gt;Jingcheng Du&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="14907399" author="jingcheng.du@intel.com" created="Fri, 25 Sep 2015 02:08:36 +0000"  >&lt;p&gt;Yes, we can!&lt;br/&gt;
So after the procedure patch is applied, should we remains the APIs brought in this patch? Please advise. Thanks!&lt;/p&gt;</comment>
                            <comment id="14907425" author="apurtell" created="Fri, 25 Sep 2015 02:22:28 +0000"  >&lt;p&gt;What I want to see happen is in the original description of this issue:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;There are a number of APIs that came in with MOB that are not new actions for HBase, simply new actions for a MOB implementation:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;compactMob&lt;/li&gt;
	&lt;li&gt;compactMobs&lt;/li&gt;
	&lt;li&gt;majorCompactMob&lt;/li&gt;
	&lt;li&gt;majorCompactMobs&lt;/li&gt;
	&lt;li&gt;getMobCompactionState&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;And in HBaseAdmin:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;validateMobColumnFamily&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Remove these special cases from the Admin API where possible by folding them into existing APIs.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The current patch achieves this aim. I think it is mostly ready to go but have some comments above that could be addressed, especially the use of getClusterStatus (please fix that)&lt;/p&gt;

&lt;p&gt;If your patch also achieves the described aim &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jingcheng.du%40intel.com&quot; class=&quot;user-hover&quot; rel=&quot;jingcheng.du@intel.com&quot;&gt;Jingcheng Du&lt;/a&gt;, then I would be happy either way and you and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chenheng&quot; class=&quot;user-hover&quot; rel=&quot;chenheng&quot;&gt;Heng Chen&lt;/a&gt; can decide what you&apos;d prefer.&lt;/p&gt;</comment>
                            <comment id="14907430" author="chenheng" created="Fri, 25 Sep 2015 02:27:00 +0000"  >&lt;blockquote&gt;
&lt;p&gt;So after the procedure patch is applied, should we remains the APIs brought in this patch? Please advise. Thanks!&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think we should finish this issue first, and after the procedure patch applied, we can use another issue to discuss whether we should remain the APIs.&lt;/p&gt;</comment>
                            <comment id="14907447" author="jingcheng.du@intel.com" created="Fri, 25 Sep 2015 02:38:16 +0000"  >&lt;p&gt;Thanks guys for comments.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;I think we should finish this issue first, and after the procedure patch applied, we can use another issue to discuss whether we should remain the APIs&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Right, please go ahead&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14907571" author="chenheng" created="Fri, 25 Sep 2015 04:49:55 +0000"  >&lt;blockquote&gt;
&lt;p&gt;n HBaseAdmin the patch calls getClusterStatus in a few places only to get the ServerName of the master. getClusterStatus is really expensive, and this ultimately contacts the master to find the master&apos;s address. Consider MasterAddressTracker#getMasterAddress(ZooKeeperWatcher) instead.&lt;br/&gt;
Can we also change the shell to remove thel *_mob commands there? Expose the CompactType types as constants on the ruby side and change the current compact and major_compact command to accept an optional additional parameter which specifies the compaction type, defaulting to &apos;NORMAL&apos;.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Update patch as suggestions!  Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14907575" author="chenheng" created="Fri, 25 Sep 2015 04:55:30 +0000"  >&lt;p&gt;Sorry, the &lt;tt&gt;help()&lt;/tt&gt; description in major_compact.rb has some errors, fix it. &lt;/p&gt;</comment>
                            <comment id="14907757" author="hadoopqa" created="Fri, 25 Sep 2015 07:39:37 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12762316/HBASE-14227_v6.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12762316/HBASE-14227_v6.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 23506454cf92d532630b7442bd570ae0b5dd0a52.&lt;br/&gt;
  ATTACHMENT ID: 12762316&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 7 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 1785 checkstyle errors (more than the master&apos;s current 1783 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 1 zombie test(s): 	at org.apache.hadoop.hbase.regionserver.TestHRegion.testWritesWhileScanning(TestHRegion.java:3890)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15735//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15735//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15735//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15735//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15735//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15735//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15735//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15735//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14907799" author="hadoopqa" created="Fri, 25 Sep 2015 08:34:10 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12762317/HBASE-14227_v7.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12762317/HBASE-14227_v7.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit a33adf2f0b050e9cf9330fd5ab7e200a7dd27d6d.&lt;br/&gt;
  ATTACHMENT ID: 12762317&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 7 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 1785 checkstyle errors (more than the master&apos;s current 1783 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.master.procedure.TestWALProcedureStoreOnHDFS&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 4 zombie test(s): 	at org.apache.hadoop.hbase.mapreduce.TestTableInputFormatScanBase.testScan(TestTableInputFormatScanBase.java:243)&lt;br/&gt;
	at org.apache.hadoop.hbase.mapreduce.TestTableInputFormatScan1.testScanEmptyToAPP(TestTableInputFormatScan1.java:58)&lt;br/&gt;
	at org.apache.hadoop.hbase.mapreduce.TableSnapshotInputFormatTestBase.testWithMapReduce(TableSnapshotInputFormatTestBase.java:164)&lt;br/&gt;
	at org.apache.hadoop.hbase.mapreduce.TableSnapshotInputFormatTestBase.testWithMapReduceMultiRegion(TableSnapshotInputFormatTestBase.java:101)&lt;br/&gt;
	at org.apache.hadoop.hbase.mapreduce.TestCellCounter.testCellCounter(TestCellCounter.java:99)&lt;br/&gt;
	at org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat.testMRIncrementalLoadWithSplit(TestHFileOutputFormat.java:384)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15736//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15736//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15736//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15736//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15736//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15736//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15736//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15736//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14907868" author="chenheng" created="Fri, 25 Sep 2015 09:46:41 +0000"  >&lt;p&gt;TestWALProcedureStoreOnHDFS failed will be fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14362&quot; title=&quot;org.apache.hadoop.hbase.master.procedure.TestWALProcedureStoreOnHDFS is super duper flaky&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14362&quot;&gt;&lt;del&gt;HBASE-14362&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It has no relates with this patch&lt;/p&gt;</comment>
                            <comment id="14908968" author="apurtell" created="Sat, 26 Sep 2015 01:27:17 +0000"  >&lt;p&gt;I see your new TODO in the patch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chenheng&quot; class=&quot;user-hover&quot; rel=&quot;chenheng&quot;&gt;Heng Chen&lt;/a&gt;. Looks ok for now, I will commit this shortly. Thanks for hanging in there. &lt;/p&gt;</comment>
                            <comment id="14908988" author="apurtell" created="Sat, 26 Sep 2015 01:45:30 +0000"  >&lt;p&gt;Pushed to master.&lt;/p&gt;</comment>
                            <comment id="14909131" author="hudson" created="Sat, 26 Sep 2015 06:48:12 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #6845 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/6845/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/6845/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14227&quot; title=&quot;Fold special cased MOB APIs into existing APIs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14227&quot;&gt;&lt;del&gt;HBASE-14227&lt;/del&gt;&lt;/a&gt; Fold special cased MOB APIs into existing APIs (apurtell: rev 02699fe967dde00cde3fc96af782401440dfe2ac)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/shell/commands/major_compact.rb&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/Admin.java&lt;/li&gt;
	&lt;li&gt;hbase-it/src/test/java/org/apache/hadoop/hbase/chaos/actions/CompactMobAction.java&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/shell/commands/major_compact_mob.rb&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/mob/compactions/TestMobCompactor.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/HBaseAdmin.java&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/shell/commands/compact_mob.rb&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/shell/commands/compact.rb&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/hbase/admin.rb&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14934374" author="hudson" created="Tue, 29 Sep 2015 00:13:26 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #6848 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/6848/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/6848/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14500&quot; title=&quot;Remove load of deprecated MOB ruby scripts after HBASE-14227&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14500&quot;&gt;&lt;del&gt;HBASE-14500&lt;/del&gt;&lt;/a&gt; Remove load of deprecated MOB ruby scripts after &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14227&quot; title=&quot;Fold special cased MOB APIs into existing APIs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14227&quot;&gt;&lt;del&gt;HBASE-14227&lt;/del&gt;&lt;/a&gt; (esteban: rev 54b86b33940b57140d665a02156cfcf14ba792a2)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/shell.rb&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15088796" author="hudson" created="Fri, 8 Jan 2016 06:53:20 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.3-IT #427 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3-IT/427/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3-IT/427/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14227&quot; title=&quot;Fold special cased MOB APIs into existing APIs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14227&quot;&gt;&lt;del&gt;HBASE-14227&lt;/del&gt;&lt;/a&gt; Reduce the number of time row comparison is done in a Scan (ramkrishna: rev e32e4df780bf1935d8421d70af2f3d84ae88f590)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ScanQueryMatcher.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15088837" author="hudson" created="Fri, 8 Jan 2016 07:36:38 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.1-JDK8 #1722 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.1-JDK8/1722/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.1-JDK8/1722/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14227&quot; title=&quot;Fold special cased MOB APIs into existing APIs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14227&quot;&gt;&lt;del&gt;HBASE-14227&lt;/del&gt;&lt;/a&gt; Reduce the number of time row comparison is done in a Scan (ramkrishna: rev d2d3c149e6165b1308e565f3ee3136b10ac95b0b)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ScanQueryMatcher.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15088844" author="hudson" created="Fri, 8 Jan 2016 07:43:28 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.2-IT #384 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2-IT/384/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2-IT/384/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14227&quot; title=&quot;Fold special cased MOB APIs into existing APIs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14227&quot;&gt;&lt;del&gt;HBASE-14227&lt;/del&gt;&lt;/a&gt; Reduce the number of time row comparison is done in a Scan (ramkrishna: rev abcab52695e7737d78fe5285e22e2fe5caf78421)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ScanQueryMatcher.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15088860" author="hudson" created="Fri, 8 Jan 2016 08:05:42 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.1-JDK7 #1635 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.1-JDK7/1635/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.1-JDK7/1635/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14227&quot; title=&quot;Fold special cased MOB APIs into existing APIs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14227&quot;&gt;&lt;del&gt;HBASE-14227&lt;/del&gt;&lt;/a&gt; Reduce the number of time row comparison is done in a Scan (ramkrishna: rev d2d3c149e6165b1308e565f3ee3136b10ac95b0b)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ScanQueryMatcher.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15088995" author="hudson" created="Fri, 8 Jan 2016 10:04:58 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.2 #494 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2/494/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2/494/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14227&quot; title=&quot;Fold special cased MOB APIs into existing APIs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14227&quot;&gt;&lt;del&gt;HBASE-14227&lt;/del&gt;&lt;/a&gt; Reduce the number of time row comparison is done in a Scan (ramkrishna: rev abcab52695e7737d78fe5285e22e2fe5caf78421)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ScanQueryMatcher.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15089015" author="hudson" created="Fri, 8 Jan 2016 10:18:25 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.3 #486 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3/486/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3/486/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14227&quot; title=&quot;Fold special cased MOB APIs into existing APIs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14227&quot;&gt;&lt;del&gt;HBASE-14227&lt;/del&gt;&lt;/a&gt; Reduce the number of time row comparison is done in a Scan (ramkrishna: rev e32e4df780bf1935d8421d70af2f3d84ae88f590)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ScanQueryMatcher.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15089088" author="hudson" created="Fri, 8 Jan 2016 11:38:09 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.2-IT #385 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2-IT/385/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2-IT/385/&lt;/a&gt;)&lt;br/&gt;
Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14227&quot; title=&quot;Fold special cased MOB APIs into existing APIs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14227&quot;&gt;&lt;del&gt;HBASE-14227&lt;/del&gt;&lt;/a&gt; Reduce the number of time row comparison is done in (ramkrishna: rev 44e82645838c3c5529c5c98a25dcaa60cf0e1fe4)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ScanQueryMatcher.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15089214" author="hudson" created="Fri, 8 Jan 2016 13:48:01 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.2 #495 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2/495/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2/495/&lt;/a&gt;)&lt;br/&gt;
Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14227&quot; title=&quot;Fold special cased MOB APIs into existing APIs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14227&quot;&gt;&lt;del&gt;HBASE-14227&lt;/del&gt;&lt;/a&gt; Reduce the number of time row comparison is done in (ramkrishna: rev 44e82645838c3c5529c5c98a25dcaa60cf0e1fe4)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ScanQueryMatcher.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15089262" author="hudson" created="Fri, 8 Jan 2016 14:25:28 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.3 #487 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3/487/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3/487/&lt;/a&gt;)&lt;br/&gt;
Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14227&quot; title=&quot;Fold special cased MOB APIs into existing APIs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14227&quot;&gt;&lt;del&gt;HBASE-14227&lt;/del&gt;&lt;/a&gt; Reduce the number of time row comparison is done in (ramkrishna: rev 323d5c97d92fe8bce3c2bf8e38e68e5fef5ceba6)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ScanQueryMatcher.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15089294" author="hudson" created="Fri, 8 Jan 2016 14:52:30 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.3-IT #429 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3-IT/429/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3-IT/429/&lt;/a&gt;)&lt;br/&gt;
Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14227&quot; title=&quot;Fold special cased MOB APIs into existing APIs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14227&quot;&gt;&lt;del&gt;HBASE-14227&lt;/del&gt;&lt;/a&gt; Reduce the number of time row comparison is done in (ramkrishna: rev 323d5c97d92fe8bce3c2bf8e38e68e5fef5ceba6)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ScanQueryMatcher.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15089363" author="hudson" created="Fri, 8 Jan 2016 15:41:01 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.1-JDK8 #1723 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.1-JDK8/1723/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.1-JDK8/1723/&lt;/a&gt;)&lt;br/&gt;
Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14227&quot; title=&quot;Fold special cased MOB APIs into existing APIs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14227&quot;&gt;&lt;del&gt;HBASE-14227&lt;/del&gt;&lt;/a&gt; Reduce the number of time row comparison is done in (ramkrishna: rev fd3d4e3d6e940851f553aeab40ca3a202cdb99ff)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ScanQueryMatcher.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15089372" author="hudson" created="Fri, 8 Jan 2016 15:44:51 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.1-JDK7 #1636 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.1-JDK7/1636/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.1-JDK7/1636/&lt;/a&gt;)&lt;br/&gt;
Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14227&quot; title=&quot;Fold special cased MOB APIs into existing APIs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14227&quot;&gt;&lt;del&gt;HBASE-14227&lt;/del&gt;&lt;/a&gt; Reduce the number of time row comparison is done in (ramkrishna: rev fd3d4e3d6e940851f553aeab40ca3a202cdb99ff)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ScanQueryMatcher.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15089548" author="hudson" created="Fri, 8 Jan 2016 17:16:57 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.0 #1132 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/1132/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.0/1132/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14227&quot; title=&quot;Fold special cased MOB APIs into existing APIs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14227&quot;&gt;&lt;del&gt;HBASE-14227&lt;/del&gt;&lt;/a&gt; Reduce the number of time row comparison is done in a Scan (ramkrishna: rev 13bbd722650affcea9e9f876c078c0da7a3aba99)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ScanQueryMatcher.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java&lt;br/&gt;
Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14227&quot; title=&quot;Fold special cased MOB APIs into existing APIs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14227&quot;&gt;&lt;del&gt;HBASE-14227&lt;/del&gt;&lt;/a&gt; Reduce the number of time row comparison is done in (ramkrishna: rev 5d854d3802cd1bcf50fea3c2a187d75d51567308)&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ScanQueryMatcher.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12901086">HBASE-14500</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12751055" name="HBASE-14227.patch" size="17103" author="jingcheng.du@intel.com" created="Tue, 18 Aug 2015 16:33:25 +0000"/>
                            <attachment id="12751233" name="HBASE-14227_v1.patch" size="25387" author="chenheng" created="Wed, 19 Aug 2015 07:28:51 +0000"/>
                            <attachment id="12751408" name="HBASE-14227_v2.patch" size="27230" author="chenheng" created="Thu, 20 Aug 2015 04:21:44 +0000"/>
                            <attachment id="12752639" name="HBASE-14227_v3.patch" size="27685" author="chenheng" created="Thu, 27 Aug 2015 02:51:07 +0000"/>
                            <attachment id="12752653" name="HBASE-14227_v4.patch" size="27837" author="chenheng" created="Thu, 27 Aug 2015 04:32:38 +0000"/>
                            <attachment id="12753380" name="HBASE-14227_v5.patch" size="27841" author="busbey" created="Mon, 31 Aug 2015 21:05:45 +0000"/>
                            <attachment id="12753222" name="HBASE-14227_v5.patch" size="27841" author="chenheng" created="Mon, 31 Aug 2015 03:38:12 +0000"/>
                            <attachment id="12762316" name="HBASE-14227_v6.patch" size="37357" author="chenheng" created="Fri, 25 Sep 2015 04:49:54 +0000"/>
                            <attachment id="12762317" name="HBASE-14227_v7.patch" size="37369" author="chenheng" created="Fri, 25 Sep 2015 04:55:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 17 Aug 2015 10:16:16 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            49 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2iyqn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>