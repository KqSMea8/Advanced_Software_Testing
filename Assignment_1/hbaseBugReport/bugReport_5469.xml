<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:28:02 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5469/HBASE-5469.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5469] Add baseline compression efficiency to DataBlockEncodingTool</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5469</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;DataBlockEncodingTool currently does not provide baseline compression efficiency, e.g. Hadoop compression codec applied to unencoded data. E.g. if we are using LZO to compress blocks, we would like to have the following columns in the report (possibly as percentages of raw data size).&lt;/p&gt;

&lt;p&gt;Baseline K+V in blockcache  |   Baseline K + V on disk  (LZO compressed)  | K + V  DataBlockEncoded in block cache |   K + V DataBlockEncoded + LZOCompressed (on disk)&lt;/p&gt;

&lt;p&gt;Background: we never store compressed blocks in cache, but we always store encoded data blocks in cache if data block encoding is enabled for the column family.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12543921">HBASE-5469</key>
            <summary>Add baseline compression efficiency to DataBlockEncodingTool</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mikhail">Mikhail Bautin</assignee>
                                    <reporter username="mikhail">Mikhail Bautin</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Feb 2012 23:06:49 +0000</created>
                <updated>Sat, 24 Mar 2012 13:47:48 +0000</updated>
                            <resolved>Fri, 23 Mar 2012 22:04:20 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13235212" author="phabricator@reviews.facebook.net" created="Wed, 21 Mar 2012 23:43:22 +0000"  >&lt;p&gt;mbautin requested code review of &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5469&quot; title=&quot;Add baseline compression efficiency to DataBlockEncodingTool&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5469&quot;&gt;&lt;del&gt;HBASE-5469&lt;/del&gt;&lt;/a&gt; Add baseline compression efficiency to DataBlockEncodingTool&quot;.&lt;br/&gt;
Reviewers: JIRA, dhruba, tedyu, stack&lt;/p&gt;

&lt;p&gt;  DataBlockEncodingTool currently does not provide baseline compression&lt;br/&gt;
  efficiency, e.g. Hadoop compression codec applied to unencoded data. E.g. if&lt;br/&gt;
  we are using LZO to compress blocks, we would like to have the following&lt;br/&gt;
  columns in the report (possibly as percentages of raw data size).&lt;/p&gt;

&lt;p&gt;  Baseline K+V in blockcache | Baseline K + V on disk (LZO compressed) | K + V&lt;br/&gt;
  DataBlockEncoded in block cache | K + V DataBlockEncoded + LZOCompressed (on&lt;br/&gt;
  disk)&lt;/p&gt;

&lt;p&gt;  Background: we never store compressed blocks in cache, but we always store&lt;br/&gt;
  encoded data blocks in cache if data block encoding is enabled for the column&lt;br/&gt;
  family.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Run unit tests.&lt;/li&gt;
	&lt;li&gt;Run DataBlockEncodingTool on a variety of real-world HFiles.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2409&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2409&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/encoding/BufferedDataBlockEncoder.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/encoding/CopyKeyDataBlockEncoder.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/encoding/DataBlockEncoder.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/encoding/DiffKeyDeltaEncoder.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/encoding/EncodedDataBlock.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/encoding/FastDiffDeltaEncoder.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/encoding/PrefixKeyDeltaEncoder.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlock.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileDataBlockEncoderImpl.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/encoding/TestDataBlockEncoders.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFileBlock.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/DataBlockEncodingTool.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/EncodedSeekPerformanceTest.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/5403/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/5403/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13235241" author="phabricator@reviews.facebook.net" created="Thu, 22 Mar 2012 00:09:23 +0000"  >&lt;p&gt;tedyu has accepted the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5469&quot; title=&quot;Add baseline compression efficiency to DataBlockEncodingTool&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5469&quot;&gt;&lt;del&gt;HBASE-5469&lt;/del&gt;&lt;/a&gt; Add baseline compression efficiency to DataBlockEncodingTool&quot;.&lt;/p&gt;

&lt;p&gt;  It would be nice to attach sample output from DataBlockEncodingTool to JIRA.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/encoding/EncodedDataBlock.java:53 Nice catch.&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/encoding/EncodedDataBlock.java:150 Nice.&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/encoding/EncodedDataBlock.java:166 This doesn&apos;t match the actual parameter name.&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/encoding/EncodedDataBlock.java:183 Where is cachedEncodedData invalidated ?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2409&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2409&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  add_baseline_compression_efficiency_to_&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5469&quot; title=&quot;Add baseline compression efficiency to DataBlockEncodingTool&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5469&quot;&gt;&lt;del&gt;HBASE-5469&lt;/del&gt;&lt;/a&gt;_v5&lt;/p&gt;</comment>
                            <comment id="13235272" author="hadoopqa" created="Thu, 22 Mar 2012 01:02:48 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12519372/D2409.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12519372/D2409.1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 12 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 3 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1249//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1249//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1249//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1249//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1249//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1249//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13236019" author="phabricator@reviews.facebook.net" created="Thu, 22 Mar 2012 20:53:23 +0000"  >&lt;p&gt;mbautin has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5469&quot; title=&quot;Add baseline compression efficiency to DataBlockEncodingTool&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5469&quot;&gt;&lt;del&gt;HBASE-5469&lt;/del&gt;&lt;/a&gt; Add baseline compression efficiency to DataBlockEncodingTool&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/encoding/EncodedDataBlock.java:183 It is not invalidated anywhere. It is cached here so that we do not encode it twice.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2409&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2409&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  add_baseline_compression_efficiency_to_&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5469&quot; title=&quot;Add baseline compression efficiency to DataBlockEncodingTool&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5469&quot;&gt;&lt;del&gt;HBASE-5469&lt;/del&gt;&lt;/a&gt;_v5&lt;/p&gt;</comment>
                            <comment id="13236034" author="phabricator@reviews.facebook.net" created="Thu, 22 Mar 2012 21:09:24 +0000"  >&lt;p&gt;mbautin updated the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5469&quot; title=&quot;Add baseline compression efficiency to DataBlockEncodingTool&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5469&quot;&gt;&lt;del&gt;HBASE-5469&lt;/del&gt;&lt;/a&gt; Add baseline compression efficiency to DataBlockEncodingTool&quot;.&lt;br/&gt;
Reviewers: JIRA, dhruba, tedyu, stack, heyongqiang&lt;/p&gt;

&lt;p&gt;  Addressing Ted&apos;s comments.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2409&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2409&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/encoding/BufferedDataBlockEncoder.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/encoding/CopyKeyDataBlockEncoder.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/encoding/DataBlockEncoder.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/encoding/DiffKeyDeltaEncoder.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/encoding/EncodedDataBlock.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/encoding/FastDiffDeltaEncoder.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/encoding/PrefixKeyDeltaEncoder.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlock.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileDataBlockEncoderImpl.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/encoding/TestDataBlockEncoders.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFileBlock.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/DataBlockEncodingTool.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/EncodedSeekPerformanceTest.java&lt;/p&gt;</comment>
                            <comment id="13236042" author="phabricator@reviews.facebook.net" created="Thu, 22 Mar 2012 21:15:23 +0000"  >&lt;p&gt;mbautin has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5469&quot; title=&quot;Add baseline compression efficiency to DataBlockEncodingTool&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5469&quot;&gt;&lt;del&gt;HBASE-5469&lt;/del&gt;&lt;/a&gt; Add baseline compression efficiency to DataBlockEncodingTool&quot;.&lt;/p&gt;

&lt;p&gt;  Ted: thanks for the review!&lt;/p&gt;

&lt;p&gt;  Everyone else: is this OK to commit? Could someone else +1 too? Thanks!&lt;/p&gt;


&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2409&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2409&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  add_baseline_compression_efficiency_to_&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5469&quot; title=&quot;Add baseline compression efficiency to DataBlockEncodingTool&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5469&quot;&gt;&lt;del&gt;HBASE-5469&lt;/del&gt;&lt;/a&gt;_v6&lt;/p&gt;</comment>
                            <comment id="13236084" author="hadoopqa" created="Thu, 22 Mar 2012 21:59:18 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12519504/D2409.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12519504/D2409.2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 12 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 2 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1264//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1264//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1264//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1264//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1264//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1264//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13237188" author="mikhail" created="Fri, 23 Mar 2012 22:04:21 +0000"  >&lt;p&gt;Committed to trunk.&lt;/p&gt;</comment>
                            <comment id="13237192" author="mikhail" created="Fri, 23 Mar 2012 22:05:03 +0000"  >&lt;p&gt;The exact patch that was committed.&lt;/p&gt;</comment>
                            <comment id="13237193" author="phabricator@reviews.facebook.net" created="Fri, 23 Mar 2012 22:05:25 +0000"  >&lt;p&gt;mbautin has committed the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5469&quot; title=&quot;Add baseline compression efficiency to DataBlockEncodingTool&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5469&quot;&gt;&lt;del&gt;HBASE-5469&lt;/del&gt;&lt;/a&gt; Add baseline compression efficiency to DataBlockEncodingTool&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2409&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2409&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMIT&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHBASE1304626&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHBASE1304626&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13237530" author="hudson" created="Sat, 24 Mar 2012 13:47:48 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2694 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2694/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2694/&lt;/a&gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5469&quot; title=&quot;Add baseline compression efficiency to DataBlockEncodingTool&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5469&quot;&gt;&lt;del&gt;HBASE-5469&lt;/del&gt;&lt;/a&gt; Add baseline compression efficiency to DataBlockEncodingTool&lt;/p&gt;

&lt;p&gt;Summary:&lt;br/&gt;
DataBlockEncodingTool currently does not provide baseline compression&lt;br/&gt;
efficiency, e.g. Hadoop compression codec applied to unencoded data. E.g. if&lt;br/&gt;
we are using LZO to compress blocks, we would like to have the following&lt;br/&gt;
columns in the report (possibly as percentages of raw data size).&lt;/p&gt;

&lt;p&gt;Baseline K+V in blockcache | Baseline K + V on disk (LZO compressed) | K + V&lt;br/&gt;
DataBlockEncoded in block cache | K + V DataBlockEncoded + LZOCompressed (on&lt;br/&gt;
disk)&lt;/p&gt;

&lt;p&gt;Background: we never store compressed blocks in cache, but we always store&lt;br/&gt;
encoded data blocks in cache if data block encoding is enabled for the column&lt;br/&gt;
family.&lt;/p&gt;

&lt;p&gt;This patch also has multiple bugfixes and improvements to DataBlockEncodingTool,&lt;br/&gt;
including presentation format, memory requirements (reduced 3x) and fixing the&lt;br/&gt;
handling of compression.&lt;/p&gt;

&lt;p&gt;Test Plan:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Run unit tests.&lt;/li&gt;
	&lt;li&gt;Run DataBlockEncodingTool on a variety of real-world HFiles.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Reviewers: JIRA, dhruba, tedyu, stack, heyongqiang&lt;/p&gt;

&lt;p&gt;Reviewed By: tedyu&lt;/p&gt;

&lt;p&gt;Differential Revision: &lt;a href=&quot;https://reviews.facebook.net/D2409&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2409&lt;/a&gt; (Revision 1304626)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
mbautin : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/io/encoding/BufferedDataBlockEncoder.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/io/encoding/CopyKeyDataBlockEncoder.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/io/encoding/DataBlockEncoder.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/io/encoding/DiffKeyDeltaEncoder.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/io/encoding/EncodedDataBlock.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/io/encoding/FastDiffDeltaEncoder.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/io/encoding/PrefixKeyDeltaEncoder.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlock.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileDataBlockEncoderImpl.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/io/encoding/TestDataBlockEncoders.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/io/hfile/TestHFileBlock.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/regionserver/DataBlockEncodingTool.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/regionserver/EncodedSeekPerformanceTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12519372" name="ASF.LICENSE.NOT.GRANTED--D2409.1.patch" size="46863" author="phabricator@reviews.facebook.net" created="Wed, 21 Mar 2012 23:43:23 +0000"/>
                            <attachment id="12519504" name="ASF.LICENSE.NOT.GRANTED--D2409.2.patch" size="46984" author="phabricator@reviews.facebook.net" created="Thu, 22 Mar 2012 21:09:25 +0000"/>
                            <attachment id="12519733" name="jira-HBASE-5469-Add-baseline-compression-efficiency--2012-03-23_15_04_41.patch" size="51472" author="mikhail" created="Fri, 23 Mar 2012 22:05:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 21 Mar 2012 23:43:22 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>229159</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 38 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0167j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4775</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>