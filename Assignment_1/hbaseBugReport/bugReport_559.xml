<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:45:26 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-559/HBASE-559.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-559] MR example job to count table rows</title>
                <link>https://issues.apache.org/jira/browse/HBASE-559</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The Lars&apos; import is a little messy; he&apos;s not sure how many records were imported.  Running a select takes a couple of hours.  He happens to have an idle MR cluster standing by.  An example MR job that just did a count of records would be generally useful.  Could even output row keys so you&apos;d have a list of what made it in.   Later, if this tool becomes popular with derivatives and similiars, we can bundle a jar of MR jobs to run against your tables that can answer common queries and that are amenable to subclassing/modification.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12393043">HBASE-559</key>
            <summary>MR example job to count table rows</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stack">stack</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Apr 2008 16:45:40 +0000</created>
                <updated>Fri, 22 Aug 2008 21:13:12 +0000</updated>
                            <resolved>Tue, 15 Apr 2008 21:38:12 +0000</resolved>
                                                    <fixVersion>0.1.2</fixVersion>
                    <fixVersion>0.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12585193" author="jimk" created="Thu, 3 Apr 2008 17:05:54 +0000"  >&lt;p&gt;+1 great idea!&lt;/p&gt;</comment>
                            <comment id="12585401" author="stack" created="Fri, 4 Apr 2008 05:33:14 +0000"  >&lt;p&gt;First cut at a RowCounter class.   Includes a &apos;Driver&apos; class so we can plug in other MR jobs.  Need to hook this up as the Main-Class for the hbase jar so hbase jar can be a hadoop job jar.  Patch goes against branch for the moment (Lars wants a sample and he&apos;s running branch).&lt;/p&gt;</comment>
                            <comment id="12585402" author="stack" created="Fri, 4 Apr 2008 05:35:17 +0000"  >&lt;p&gt;To run you&apos;d do something like the following (Presuming hbase including these new classes is in the hadoop CLASSPATH).&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
./bin/hadoop org.apache.hadoop.hbase.mapred.Driver rowcounter &amp;lt;outputdir&amp;gt; &amp;lt;tablename&amp;gt; &amp;lt;column1&amp;gt; [&amp;lt;column2&amp;gt;....]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The attached patch has not been properly tested.&lt;/p&gt;</comment>
                            <comment id="12585674" author="stack" created="Fri, 4 Apr 2008 18:08:41 +0000"  >&lt;p&gt;Attached is a tested patch.  Also makes it so hbase.jar is now a hadoop job jar.   There&apos;s a Driver under mapred.  Add MR jobs to its list to make it so can do:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
./bin/hadoop -jar hbase.jar
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;... and you&apos;ll get a list of the hbase MR jobs.&lt;/p&gt;

&lt;p&gt;Here is how our dumb rowcounter looks:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
durruti$ ./bin/hbase org.apache.hadoop.hbase.mapred.Driver rowcounter /tmp/output x x:
08/04/04 10:59:58 INFO jvm.JvmMetrics: Initializing JVM Metrics with processName=JobTracker, sessionId=
08/04/04 10:59:58 WARN mapred.JobClient: No job jar file set.  User classes may not be found. See JobConf(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;) or JobConf#setJar(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;).
08/04/04 10:59:58 INFO mapred.JobClient: Running job: job_local_1
08/04/04 10:59:58 INFO mapred.MapTask: numReduceTasks: 1
08/04/04 10:59:58 INFO hbase.HTable: Creating scanner over x starting at key 
08/04/04 10:59:58 INFO mapred.LocalJobRunner: 
08/04/04 10:59:58 INFO mapred.TaskRunner: Task &apos;job_local_1_map_0000&apos; done.
08/04/04 10:59:58 INFO mapred.LocalJobRunner: reduce &amp;gt; reduce
08/04/04 10:59:58 INFO mapred.TaskRunner: Task &apos;reduce_qv8ybc&apos; done.
08/04/04 10:59:58 INFO mapred.TaskRunner: Saved output of task &apos;reduce_qv8ybc&apos; to file:/tmp/output
08/04/04 10:59:59 INFO mapred.JobClient: Job complete: job_local_1
08/04/04 10:59:59 INFO mapred.JobClient: Counters: 10
08/04/04 10:59:59 INFO mapred.JobClient:   RowCounter
08/04/04 10:59:59 INFO mapred.JobClient:     Rows=1
08/04/04 10:59:59 INFO mapred.JobClient:   Map-Reduce Framework
08/04/04 10:59:59 INFO mapred.JobClient:     Map input records=1
08/04/04 10:59:59 INFO mapred.JobClient:     Map output records=1
08/04/04 10:59:59 INFO mapred.JobClient:     Map input bytes=0
08/04/04 10:59:59 INFO mapred.JobClient:     Map output bytes=7
08/04/04 10:59:59 INFO mapred.JobClient:     Combine input records=0
08/04/04 10:59:59 INFO mapred.JobClient:     Combine output records=0
08/04/04 10:59:59 INFO mapred.JobClient:     Reduce input groups=1
08/04/04 10:59:59 INFO mapred.JobClient:     Reduce input records=1
08/04/04 10:59:59 INFO mapred.JobClient:     Reduce output records=1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here is commit comment:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
M build.xml
    (Jar target): Add copying of any properties files under src/java
    Also added Main-&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; to manifest.
M  src/java/org/apache/hadoop/hbase/mapred/RowCounter_Counters.properties
    Added resource so MR can print out counters &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; RowCounter MR job
M  src/java/org/apache/hadoop/hbase/mapred/RowCounter.java
    Example, simple MR job that counts non-empty rows.
M  src/java/org/apache/hadoop/hbase/mapred/Driver.java
    Driver class. General entry point &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; hbase MR jobs.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Will apply to branch after 0.1.1 goes out.  Will apply to TRUNK when MR API settles.&lt;/p&gt;</comment>
                            <comment id="12587720" author="stack" created="Thu, 10 Apr 2008 17:39:51 +0000"  >&lt;p&gt;Add to 1.1.2 (Its example/documentation).  Made it a blocker just so it&apos;ll be noticed.&lt;/p&gt;</comment>
                            <comment id="12589230" author="jimk" created="Tue, 15 Apr 2008 20:56:46 +0000"  >&lt;p&gt;If this is an example, shouldn&apos;t it live under src/examples?&lt;/p&gt;

&lt;p&gt;in Driver.main, should (RowCounter.NAME, RowCounter.class,  &quot;Count rows in HBase table&quot;) be hard-wired?&lt;/p&gt;

&lt;p&gt;in RowCounter.main, should the master address be hard wired?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    c.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;hbase.master&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;durruti.local:60000&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Otherwise, looks fine.&lt;/p&gt;</comment>
                            <comment id="12589234" author="stack" created="Tue, 15 Apr 2008 21:05:18 +0000"  >&lt;p&gt;I&apos;ll move RowCounter under examples when we have more than just one (Takes a bit of work setting up an example jar, etc.).  Also, this patch makes it so hbase.jar can be used as a job jar on a MR cluster.  Chose which job you want to run by passing switch to Driver class.  This facility doesn&apos;t belong in examples (but I need something to demo it with.... ).&lt;/p&gt;

&lt;p&gt;In Driver.main, yeah, each new MR job is added here to the Driver class.&lt;/p&gt;

&lt;p&gt;In RowCounter.main, I&apos;ll change it so its args&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; instead (This &apos;main&apos; is not used generally).&lt;/p&gt;

&lt;p&gt;Thanks for the review.&lt;/p&gt;</comment>
                            <comment id="12589240" author="jimk" created="Tue, 15 Apr 2008 21:13:53 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12589248" author="stack" created="Tue, 15 Apr 2008 21:38:12 +0000"  >&lt;p&gt;Committed to branch and trunk.  Added to the examples in the mapred javadoc and removed the hardcoding of my machine name suggested by Jim review.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12379417" name="559-0.1-v2.patch" size="7029" author="stack" created="Fri, 4 Apr 2008 18:08:41 +0000"/>
                            <attachment id="12379351" name="559.patch" size="5917" author="stack" created="Fri, 4 Apr 2008 05:33:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 3 Apr 2008 17:05:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25264</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 36 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h81j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98565</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>