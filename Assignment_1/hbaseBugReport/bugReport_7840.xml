<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:49:33 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-7840/HBASE-7840.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-7840] Enhance the java it framework to start &amp; stop a distributed hbase &amp; hadoop cluster </title>
                <link>https://issues.apache.org/jira/browse/HBASE-7840</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Needs are to use a development version of HBase &amp;amp; HDFS 1 &amp;amp; 2.&lt;/p&gt;

&lt;p&gt;Ideally, should be nicely backportable to 0.94 to allow comparisons and regression tests between versions.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12632235">HBASE-7840</key>
            <summary>Enhance the java it framework to start &amp; stop a distributed hbase &amp; hadoop cluster </summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="nkeywal">Nicolas Liochon</assignee>
                                    <reporter username="nkeywal">Nicolas Liochon</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 Feb 2013 16:27:08 +0000</created>
                <updated>Sat, 21 Feb 2015 23:34:27 +0000</updated>
                            <resolved>Wed, 26 Feb 2014 13:29:30 +0000</resolved>
                                    <version>0.95.2</version>
                                    <fixVersion>0.99.0</fixVersion>
                                    <component>test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="13577919" author="nkeywal" created="Wed, 13 Feb 2013 20:38:19 +0000"  >&lt;p&gt;It&apos;s not perfect, but considering the subject it&apos;s in a reviewable state imho. Or at least deserves some high level comments &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13577956" author="enis" created="Wed, 13 Feb 2013 21:48:44 +0000"  >&lt;p&gt;Patch looks promising. Can you please put that in RB. I&apos;ll take a closer look at it soon. &lt;/p&gt;</comment>
                            <comment id="13578008" author="nkeywal" created="Wed, 13 Feb 2013 22:42:10 +0000"  >&lt;p&gt;done: &lt;a href=&quot;https://reviews.apache.org/r/9437/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/9437/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13582210" author="nkeywal" created="Wed, 20 Feb 2013 14:33:58 +0000"  >&lt;p&gt;I&apos;ve put the v2 in the review boards a few days ago, awaiting feedback. I can rebase if necessary.&lt;/p&gt;</comment>
                            <comment id="13588553" author="nkeywal" created="Wed, 27 Feb 2013 17:46:58 +0000"  >&lt;p&gt;v3 on rb as well, rebased.&lt;/p&gt;</comment>
                            <comment id="13601454" author="nkeywal" created="Wed, 13 Mar 2013 18:18:16 +0000"  >&lt;p&gt;Waiting for review or +1 on this one, I can rebase if you like.&lt;/p&gt;</comment>
                            <comment id="13639289" author="stack" created="Tue, 23 Apr 2013 17:39:22 +0000"  >&lt;p&gt;Skimmed the patch.  Looks like nice new test functionality.  If it works I&apos;m good w/ commit.&lt;/p&gt;</comment>
                            <comment id="13669260" author="nkeywal" created="Wed, 29 May 2013 13:47:40 +0000"  >&lt;p&gt;My local version has evolved since my initial submission. I need to work a little on it to make interesting for everybody....&lt;/p&gt;</comment>
                            <comment id="13693101" author="nkeywal" created="Tue, 25 Jun 2013 14:57:43 +0000"  >&lt;p&gt;New version.&lt;/p&gt;</comment>
                            <comment id="13697929" author="ndimiduk" created="Tue, 2 Jul 2013 16:15:47 +0000"  >&lt;p&gt;+1 on latest patch. This is good work, Nicolas.&lt;/p&gt;</comment>
                            <comment id="13698603" author="stack" created="Wed, 3 Jul 2013 04:58:42 +0000"  >&lt;p&gt;What is this comment in ClusterManager.java?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-comment&quot;&gt;// Not in ClusterManager because it uses &apos;exec&apos;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Bit odd this is all hardcoded into the script:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      cmd += &lt;span class=&quot;code-quote&quot;&gt;&quot;export HBASE_REGIONSERVER_OPTS=&apos;&quot;&lt;/span&gt; +
+          jmx +
+          &lt;span class=&quot;code-quote&quot;&gt;&quot;-server -XX:ParallelGCThreads=4 -XX:+UseParNewGC -Xmn512m &quot;&lt;/span&gt; +
+          &lt;span class=&quot;code-quote&quot;&gt;&quot;-XX:CMSInitiatingOccupancyFraction=80 -verbose:gc -XX:+PrintGCDetails &quot;&lt;/span&gt; +
+          &lt;span class=&quot;code-quote&quot;&gt;&quot;-XX:PrintFLSStatistics=1  -XX:+PrintPromotionFailure &quot;&lt;/span&gt; +
+          &lt;span class=&quot;code-quote&quot;&gt;&quot;-XX:+PrintGCTimeStamps -XX:+PrintGCDateStamps -Xloggc:&quot;&lt;/span&gt; +
+          getHBaseHome() + &lt;span class=&quot;code-quote&quot;&gt;&quot;/logs/gc-&quot;&lt;/span&gt; + service + &lt;span class=&quot;code-quote&quot;&gt;&quot;.log &quot;&lt;/span&gt; +
+          &lt;span class=&quot;code-quote&quot;&gt;&quot;-Xms&quot;&lt;/span&gt; + heapSize + &lt;span class=&quot;code-quote&quot;&gt;&quot;m -Xmx&quot;&lt;/span&gt; + heapSize + &lt;span class=&quot;code-quote&quot;&gt;&quot;m -XX:ErrorFile=&quot;&lt;/span&gt; +
+          getHBaseHome() + &lt;span class=&quot;code-quote&quot;&gt;&quot;/logs/gc-&quot;&lt;/span&gt; + service + &lt;span class=&quot;code-quote&quot;&gt;&quot;-err.log&quot;&lt;/span&gt; +
+          &lt;span class=&quot;code-quote&quot;&gt;&quot;&apos;; &quot;&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Woah!!!  Rad:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    toExec += &lt;span class=&quot;code-quote&quot;&gt;&quot;sudo /sbin/iptables -A INPUT -i lo -j ACCEPT;&quot;&lt;/span&gt;;
+    toExec += &lt;span class=&quot;code-quote&quot;&gt;&quot;sudo /sbin/iptables -A OUTPUT -o lo -j ACCEPT;&quot;&lt;/span&gt;;
+    toExec += &lt;span class=&quot;code-quote&quot;&gt;&quot;sudo /sbin/iptables -A INPUT -p tcp -s 0/0 -d &quot;&lt;/span&gt; + hostname +
+        &lt;span class=&quot;code-quote&quot;&gt;&quot; --sport 513:65535 --dport 22 -m state --state NEW,ESTABLISHED -j ACCEPT;&quot;&lt;/span&gt;;
+    toExec += &lt;span class=&quot;code-quote&quot;&gt;&quot;sudo /sbin/iptables -A OUTPUT -p tcp -s &quot;&lt;/span&gt; + hostname +
+        &lt;span class=&quot;code-quote&quot;&gt;&quot; -d 0/0 --sport 22 --dport 513:65535 -m state --state ESTABLISHED -j ACCEPT;&quot;&lt;/span&gt;;
+    toExec += &lt;span class=&quot;code-quote&quot;&gt;&quot;sudo /sbin/iptables -P INPUT DROP;&quot;&lt;/span&gt;;
+    toExec += &lt;span class=&quot;code-quote&quot;&gt;&quot;sudo /sbin/iptables -P OUTPUT DROP;&quot;&lt;/span&gt;;
+    toExec += &lt;span class=&quot;code-quote&quot;&gt;&quot;sudo /sbin/iptables -P FORWARD DROP;&quot;&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I skimmed the patch.  These are some really great tests.  Do they work?  +1 on commit if they do (even if above freaks me out &amp;#8211; smile)&lt;/p&gt;</comment>
                            <comment id="13700168" author="nkeywal" created="Thu, 4 Jul 2013 15:59:37 +0000"  >&lt;p&gt;Thanks a lot for the reviews. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;What is this comment in ClusterManager.java?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I wanted it to be in the parent class, but it&apos;s not possible as it depends on methods available in the subclass only&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Bit odd this is all hardcoded into the script:&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I&apos;ve made the heap size configurable. Yeah this part is not perfect.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Do they work?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;All the tests that are in this patch work. I&apos;ve got a few that don&apos;t. I&apos;m fixing them (it&apos;s could be HBase core code: they used to work).&lt;/p&gt;

&lt;p&gt;I will push this version soon.&lt;/p&gt;

</comment>
                            <comment id="13700212" author="stack" created="Thu, 4 Jul 2013 16:54:05 +0000"  >&lt;p&gt;I&apos;d say don&apos;t commit unless all pass.  Do I need to have sudo perms to now run hbase-it?  Or the tests just fail if I don&apos;t have sudo?&lt;/p&gt;</comment>
                            <comment id="13700236" author="nkeywal" created="Thu, 4 Jul 2013 17:23:29 +0000"  >&lt;blockquote&gt;&lt;p&gt;I&apos;d say don&apos;t commit unless all pass&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;ok.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Do I need to have sudo perms to now run hbase-it&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;For the one in mttr, yes. The test will fail (not nicely, it will fail immediately).&lt;/p&gt;</comment>
                            <comment id="13700290" author="stack" created="Thu, 4 Jul 2013 18:38:21 +0000"  >&lt;p&gt;Hmmm.... It will mess up our green lights on test rigs?  Or do you think it reasonable to expect that hbase user have sudo on a test rig.  Can this test be off by default?  Would that be an option?  Or can we test for SUDO and have the test &apos;pass&apos; if not present w/ WARNING or something that test did not run?&lt;/p&gt;</comment>
                            <comment id="13700503" author="nkeywal" created="Fri, 5 Jul 2013 07:42:58 +0000"  >&lt;blockquote&gt;&lt;p&gt;do you think it reasonable to expect that hbase user have sudo on a test rig&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I think it&apos;s reasonable to ask for it. I will see what I can do. But i will need to commit something sometimes &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13703520" author="ndimiduk" created="Tue, 9 Jul 2013 17:21:25 +0000"  >&lt;blockquote&gt;&lt;p&gt;Or can we test for SUDO and have the test &apos;pass&apos; if not present w/ WARNING or something that test did not run?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I wonder if you could use the &lt;a href=&quot;http://www.mkyong.com/unittest/junit-4-tutorial-6-parameterized-test/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Parameterized @Test&lt;/a&gt; to detect sudo privileges and execute accordingly.&lt;/p&gt;</comment>
                            <comment id="13912880" author="nkeywal" created="Wed, 26 Feb 2014 13:29:30 +0000"  >&lt;p&gt;Too old.&lt;/p&gt;</comment>
                            <comment id="14331213" author="enis" created="Sat, 21 Feb 2015 23:34:27 +0000"  >&lt;p&gt;Closing this issue after 0.99.0 release. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                            <outwardlinks description="requires">
                                        <issuelink>
            <issuekey id="12632223">HBASE-7839</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12569259" name="7840.v1.patch" size="56536" author="nkeywal" created="Wed, 13 Feb 2013 20:36:07 +0000"/>
                            <attachment id="12571227" name="7840.v3.patch" size="64838" author="nkeywal" created="Wed, 27 Feb 2013 17:46:43 +0000"/>
                            <attachment id="12589610" name="7840.v4.patch" size="86022" author="nkeywal" created="Tue, 25 Jun 2013 14:57:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 13 Feb 2013 21:48:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>312731</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1hyvb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>313077</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>