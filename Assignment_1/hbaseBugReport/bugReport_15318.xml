<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 21:02:11 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-15318/HBASE-15318.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-15318] Zk-less region server state management</title>
                <link>https://issues.apache.org/jira/browse/HBASE-15318</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Current region server state is managed via znode created by region server, master just listen these nodes. but we find many user network issue is not network disconnected but package lost, which is hard to capture because connection between region server and zk is fine.&lt;br/&gt;
This jira goal is region server state is managed by master without shared info in zk, via enhancement heartbeat from region server to master.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12941601">HBASE-15318</key>
            <summary>Zk-less region server state management</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="zhangyongxyz">Yong Zhang</assignee>
                                    <reporter username="zhangyongxyz">Yong Zhang</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Feb 2016 01:31:40 +0000</created>
                <updated>Wed, 24 Feb 2016 17:24:52 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="15160206" author="stack" created="Wed, 24 Feb 2016 05:42:38 +0000"  >&lt;p&gt;Thanks for filing the issue &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=java8964&quot; class=&quot;user-hover&quot; rel=&quot;java8964&quot;&gt;Yong Zhang&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;There is an on going project to purge zk from assignment. See such as &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14350&quot; title=&quot;Procedure V2 Phase 2: Assignment Manager&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14350&quot;&gt;HBASE-14350&lt;/a&gt;. Thanks.&lt;/p&gt;</comment>
                            <comment id="15163005" author="zhangyongxyz" created="Wed, 24 Feb 2016 13:46:10 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;, thanks for your comment.&lt;br/&gt;
I read the design doc of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14350&quot; title=&quot;Procedure V2 Phase 2: Assignment Manager&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14350&quot;&gt;HBASE-14350&lt;/a&gt; and it subtask, but not find any thing about the region server state management.  &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14350&quot; title=&quot;Procedure V2 Phase 2: Assignment Manager&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14350&quot;&gt;HBASE-14350&lt;/a&gt; is more about region assignment manager.&lt;/p&gt;</comment>
                            <comment id="15163149" author="stack" created="Wed, 24 Feb 2016 15:02:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=java8964&quot; class=&quot;user-hover&quot; rel=&quot;java8964&quot;&gt;Yong Zhang&lt;/a&gt; State will be kept in master with final end assignment published to master. Say what is missing and we&apos;ll try and fill it into the design.  It is unfinished IIRC. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=syuanjiang&quot; class=&quot;user-hover&quot; rel=&quot;syuanjiang&quot;&gt;Stephen Yuan Jiang&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbertozzi&quot; class=&quot;user-hover&quot; rel=&quot;mbertozzi&quot;&gt;Matteo Bertozzi&lt;/a&gt; FYI.&lt;/p&gt;</comment>
                            <comment id="15163158" author="mbertozzi" created="Wed, 24 Feb 2016 15:08:38 +0000"  >&lt;p&gt;I think &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zhangyongxyz&quot; class=&quot;user-hover&quot; rel=&quot;zhangyongxyz&quot;&gt;Yong Zhang&lt;/a&gt; is talking about the rs znode used to add the server in the DeadServer list and not the assignment znode.&lt;br/&gt;
I&apos;m changing ServerManager to add more information like RS VersionNumber, reduce the number of Maps we have around and avoid the array.contains()/array.remove() instead of set.contains()/remove() we have around serverManager and balancer. there were discussion about using heartbeat to identify if a server is alive but at the moment we are not focused on that. so, you can go on and implement it. I assume is not invasive and you are going to replace just how we add the rs to the dead server list&lt;/p&gt;</comment>
                            <comment id="15163191" author="stack" created="Wed, 24 Feb 2016 15:30:31 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbertozzi&quot; class=&quot;user-hover&quot; rel=&quot;mbertozzi&quot;&gt;Matteo Bertozzi&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;So, the ephemeral nodes the RS registers on startup &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=java8964&quot; class=&quot;user-hover&quot; rel=&quot;java8964&quot;&gt;Yong Zhang&lt;/a&gt;?&lt;/p&gt;

&lt;p&gt;When you say ...&quot;but we find many user network issue is not network disconnected but package lost&quot;, is it that the RS is dead/lost (but its zk connection is fine?) Thanks.&lt;/p&gt;</comment>
                            <comment id="15163304" author="zhangyongxyz" created="Wed, 24 Feb 2016 16:47:48 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbertozzi&quot; class=&quot;user-hover&quot; rel=&quot;mbertozzi&quot;&gt;Matteo Bertozzi&lt;/a&gt; for explain.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;So, the ephemeral nodes the RS registers on startup&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes, RS will send a heartbeat to HM.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;When you say ...&quot;but we find many user network issue is not network disconnected but package lost&quot;, is it that the RS is dead/lost (but its zk connection is fine?)&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Here just describe one case, that when RS start, it will create one znode on zk, but some time later, network package has 10% lost for example, because connection from this RS to ZK is not break then, HM also consider this RS is health, but in fact this RS may could not provide service.&lt;/p&gt;</comment>
                            <comment id="15163354" author="stack" created="Wed, 24 Feb 2016 17:24:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=java8964&quot; class=&quot;user-hover&quot; rel=&quot;java8964&quot;&gt;Yong Zhang&lt;/a&gt; Thanks. Yeah. This is common-enough problem. Looking forward to what you propose. RS used to &apos;register&apos; w/ the master via heartbeating before we moved to keeping an ephemeral node in zk. Heartbeating had/has the benefit of removing an indirection.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 24 Feb 2016 05:42:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            42 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2t91j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>