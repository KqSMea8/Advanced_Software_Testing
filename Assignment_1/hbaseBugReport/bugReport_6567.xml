<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:37:53 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6567/HBASE-6567.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6567] make memory locking configuration of regioservers more flexible</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6567</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The current implementation of the memory locking feature of regisoservers has a downside of not being flexible to configure for permanent use. Sure there is a --mlock flag but that needs to be explicitly passed on every invocation and thus require extra steps to be configured for permanent use (IOW, there&apos;s not a single env variable I can set to have a desired effect). The only other alternative &amp;#8211; the explicit setting of HBASE_REGIONSERVER_OPTS &amp;#8211; has a downside of being pretty cryptic to the novice user and has a killer problem of not explicitly telling higher level scripts (like init.d or upstart ones) which user the initial hbase process should be executed as.&lt;/p&gt;

&lt;p&gt;I propose a very simple solution (which is essentially making --mlock setting into an env. variable): add a variable called HBASE_REGIONSERVER_MLOCK that can be set in hbase-env.sh and has the following semantics:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;default&amp;#93;&lt;/span&gt; not set: mlocking feature is disabled&lt;/li&gt;
	&lt;li&gt;set but empty: mlocking feature is enabled and the target user is hbase&lt;/li&gt;
	&lt;li&gt;set and not empty: mlocking feature is enabled and the target user is the value of the variable&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Thoughts?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12603274">HBASE-6567</key>
            <summary>make memory locking configuration of regioservers more flexible</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mbertozzi">Matteo Bertozzi</assignee>
                                    <reporter username="rvs">Roman Shaposhnik</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Aug 2012 16:54:29 +0000</created>
                <updated>Thu, 24 Apr 2014 15:56:25 +0000</updated>
                            <resolved>Sat, 18 Aug 2012 21:48:45 +0000</resolved>
                                    <version>0.95.2</version>
                                    <fixVersion>0.95.0</fixVersion>
                                    <component>scripts</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13433291" author="zhihyu@ebaysf.com" created="Mon, 13 Aug 2012 16:59:13 +0000"  >&lt;p&gt;Would HBASE_REGIONSERVER_MLOCK_USER be a better name for this new variable ?&lt;/p&gt;</comment>
                            <comment id="13433304" author="rvs" created="Mon, 13 Aug 2012 17:07:44 +0000"  >&lt;p&gt;It would definitely address the issue that is lurking (mainly the fact that the proposed variable serves too purposes &amp;#8211; enabling the feature to begin with and telling the system what is the target user). That said, I feel that HBASE_REGIONSERVER_MLOCK_USER is also not ideal, since it doesn&apos;t really communicate clearly what is happening. In my initial proposal I was trying to minimize the # of variables that we would have to introduce but perhaps we should just bite the bullet and have two:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;HBASE_REGIONSERVER_MLOCK (binary: empty/not set &amp;#8211; disabled, non empty &amp;#8211; enabled)&lt;/li&gt;
	&lt;li&gt;HBASE_REGIONSERVER_UID (string: a target user for the running process regardless of any other feature that is enabled)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13433359" author="zhihyu@ebaysf.com" created="Mon, 13 Aug 2012 17:50:53 +0000"  >&lt;p&gt;Looks like two variable approach would minimize misunderstanding of this feature.&lt;/p&gt;</comment>
                            <comment id="13434511" author="mbertozzi" created="Tue, 14 Aug 2012 21:06:11 +0000"  >&lt;p&gt;Added HBASE_REGIONSERVER_UID and HBASE_REGIONSERVER_MLOCK in hbase-env.sh&lt;/p&gt;

&lt;p&gt;Removed the --mlock option, HBASE_REGIONSERVER_MLOCK (boolean) is used.&lt;/p&gt;</comment>
                            <comment id="13437418" author="stack" created="Sat, 18 Aug 2012 21:48:45 +0000"  >&lt;p&gt;Committed to trunk.  Nice one lads.  Thanks.&lt;/p&gt;</comment>
                            <comment id="13437430" author="hudson" created="Sat, 18 Aug 2012 22:56:56 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3238 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3238/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3238/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6567&quot; title=&quot;make memory locking configuration of regioservers more flexible&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6567&quot;&gt;&lt;del&gt;HBASE-6567&lt;/del&gt;&lt;/a&gt; make memory locking configuration of regioservers more flexible (Revision 1374662)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/bin/hbase-config.sh&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13437437" author="hudson" created="Sat, 18 Aug 2012 23:46:02 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #135 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/135/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/135/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6567&quot; title=&quot;make memory locking configuration of regioservers more flexible&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6567&quot;&gt;&lt;del&gt;HBASE-6567&lt;/del&gt;&lt;/a&gt; make memory locking configuration of regioservers more flexible (Revision 1374662)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/bin/hbase-config.sh&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13437470" author="mbertozzi" created="Sun, 19 Aug 2012 07:19:37 +0000"  >&lt;p&gt;@stack the patch contains also the hbase-env.sh with the two new variables a comment that try to explain what the mlock is used for, but doesn&apos;t seems to be in trunk. Do you think is not useful to expose that? (I&apos;ve no strong opinion on expose it or not, since most of the user can live without knowing it)&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+# Uncomment and adjust to keep all the Region Server pages mapped to be memory resident
+#HBASE_REGIONSERVER_MLOCK=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
+#HBASE_REGIONSERVER_UID=&lt;span class=&quot;code-quote&quot;&gt;&quot;hbase&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13437576" author="stack" created="Sun, 19 Aug 2012 20:52:33 +0000"  >&lt;p&gt;@Matteo I made a mistake in application.  Should be fixed now. Thanks for noticing it.&lt;/p&gt;</comment>
                            <comment id="13437588" author="hudson" created="Sun, 19 Aug 2012 21:50:30 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3240 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3240/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3240/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6567&quot; title=&quot;make memory locking configuration of regioservers more flexible&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6567&quot;&gt;&lt;del&gt;HBASE-6567&lt;/del&gt;&lt;/a&gt; make memory locking configuration of regioservers more flexible; INCOMPLETE APPLICATION (Revision 1374848)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/conf/hbase-env.sh&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13437609" author="hudson" created="Sun, 19 Aug 2012 23:37:45 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #137 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/137/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/137/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6567&quot; title=&quot;make memory locking configuration of regioservers more flexible&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6567&quot;&gt;&lt;del&gt;HBASE-6567&lt;/del&gt;&lt;/a&gt; make memory locking configuration of regioservers more flexible; INCOMPLETE APPLICATION (Revision 1374848)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/conf/hbase-env.sh&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13775413" author="stack" created="Mon, 23 Sep 2013 18:31:27 +0000"  >&lt;p&gt;Marking closed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                            <outwardlinks description="supercedes">
                                        <issuelink>
            <issuekey id="12522957">HBASE-4391</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12540949" name="HBASE-6567-v0.patch" size="2187" author="mbertozzi" created="Tue, 14 Aug 2012 21:06:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 13 Aug 2012 16:59:13 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>256641</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10342"><![CDATA[Incompatible change]]></customfieldvalue>
    <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hv67:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>102312</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Removes --mlock start flag.  Adds the below instead:&lt;br/&gt;
&lt;br/&gt;
HBASE_REGIONSERVER_MLOCK binary: empty/not set &#8211; disabled, non empty &#8211; enabled&lt;br/&gt;
HBASE_REGIONSERVER_UID string: a target user for the running process regardless of any other feature that is enabled</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>