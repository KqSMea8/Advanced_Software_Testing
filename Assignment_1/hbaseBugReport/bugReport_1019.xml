<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:50:02 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1019/HBASE-1019.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1019] Master should reassign regions away from regionservers under heap stress</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1019</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Once the changes for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1018&quot; title=&quot;Regionservers should report detailed health to master; master should flag troubled regionservers in UI&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1018&quot;&gt;&lt;del&gt;HBASE-1018&lt;/del&gt;&lt;/a&gt; go in, the master should reassign regions away from regionservers that indicate heap stress to those that do not. Reassignment activity must be smart enough not to overload remaining regionservers.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12409054">HBASE-1019</key>
            <summary>Master should reassign regions away from regionservers under heap stress</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="7">Later</resolution>
                                        <assignee username="apurtell">Andrew Purtell</assignee>
                                    <reporter username="apurtell">Andrew Purtell</reporter>
                        <labels>
                    </labels>
                <created>Sat, 22 Nov 2008 19:17:53 +0000</created>
                <updated>Wed, 29 Apr 2009 00:32:11 +0000</updated>
                            <resolved>Wed, 29 Apr 2009 00:31:52 +0000</resolved>
                                                                    <component>master</component>
                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12649972" author="apurtell" created="Sat, 22 Nov 2008 20:02:38 +0000"  >&lt;p&gt;Especially ROOT and META.&lt;/p&gt;</comment>
                            <comment id="12650040" author="apurtell" created="Sun, 23 Nov 2008 18:54:18 +0000"  >&lt;p&gt;To facilitate this an estimate of heap required to host each region (e.g. store file index load) should be communicated to the master. Should be a new or extension of existing HMsg to avoid polluting HRI. &lt;/p&gt;</comment>
                            <comment id="12651932" author="apurtell" created="Mon, 1 Dec 2008 08:31:59 +0000"  >&lt;p&gt;There are two parts of the attached patch, that don&apos;t necessarily have to go in together. &lt;/p&gt;

&lt;p&gt;1) Regionservers will relinquish meta regions by closing them proactively if under heap stress. Heap stress is defined as available heap falling below a minimum threshold (20MB) even after forced GC. Hysteresis is applied via a two minute waiting time between assignment of a region and a close of it, so even if all regionservers are under heap stress a meta region will find a home. &lt;/p&gt;

&lt;p&gt;2) Some changes to HServerLoad make load comparisons heap aware. &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;If the number of regions is less, but heap use is greater, consider the load higher. Otherwise, lower.&lt;/li&gt;
	&lt;li&gt;If the number of regions is greater, the load is always greater.&lt;/li&gt;
	&lt;li&gt;If the number of regions is equal, the load difference is determined by heap usage.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;m not advocating this patch go in right away. There are some questions:&lt;/p&gt;

&lt;p&gt;Item #1 above will close ROOT. Will the master be able to recover from this? (It will also close META regions, but I think this is ok.)&lt;/p&gt;

&lt;p&gt;Item #2 above will change the behavior of the balancer and should be tested on a cluster first.&lt;/p&gt;</comment>
                            <comment id="12652515" author="stack" created="Tue, 2 Dec 2008 21:23:31 +0000"  >&lt;p&gt;Should this go into 0.19.0 Andrew?&lt;/p&gt;</comment>
                            <comment id="12652521" author="apurtell" created="Tue, 2 Dec 2008 21:40:22 +0000"  >&lt;p&gt;I think these might be destabilizing changes. Push to 0.20.0 then?&lt;/p&gt;</comment>
                            <comment id="12655192" author="apurtell" created="Wed, 10 Dec 2008 13:00:18 +0000"  >&lt;p&gt;Moved to 0.20.0.&lt;/p&gt;</comment>
                            <comment id="12659299" author="apurtell" created="Sat, 27 Dec 2008 01:38:23 +0000"  >&lt;p&gt;Patch withdrawn. The heap stress threshold is too small. This can be improved for 0.20.0 also. &lt;/p&gt;</comment>
                            <comment id="12703717" author="stack" created="Tue, 28 Apr 2009 16:46:12 +0000"  >&lt;p&gt;Andrew, should we move this out of 0.20.0?  Do you think we&apos;ll get to it in next week or two?&lt;/p&gt;</comment>
                            <comment id="12703911" author="apurtell" created="Wed, 29 Apr 2009 00:31:52 +0000"  >&lt;p&gt;Resolving as later. The cluster should be resiliant against failure of HRS carrying ROOT or META anyhow, but maybe there is a compelling reason to try this some time in the future...&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12405107">HBASE-900</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12409053">HBASE-1018</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12395001" name="1019.patch" size="7866" author="apurtell" created="Mon, 1 Dec 2008 08:31:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 2 Dec 2008 21:23:31 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31953</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 34 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0haun:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99020</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>