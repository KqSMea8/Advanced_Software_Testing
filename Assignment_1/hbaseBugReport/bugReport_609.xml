<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:45:52 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-609/HBASE-609.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-609] Master doesn&apos;t see regionserver edits because of clock skew</title>
                <link>https://issues.apache.org/jira/browse/HBASE-609</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The streamy folks had a cluster where regionserver was 2 minutes in advance of the master.  On split, regionserver would update .META. with split info but scanners opened on the master wouldn&apos;t see the edits because they were being opened using current time.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12395104">HBASE-609</key>
            <summary>Master doesn&apos;t see regionserver edits because of clock skew</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stack">stack</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Apr 2008 21:12:47 +0000</created>
                <updated>Fri, 22 Aug 2008 21:13:14 +0000</updated>
                            <resolved>Thu, 1 May 2008 06:02:49 +0000</resolved>
                                                    <fixVersion>0.1.2</fixVersion>
                    <fixVersion>0.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12593442" author="stack" created="Wed, 30 Apr 2008 21:17:13 +0000"  >&lt;p&gt;Patch that makes the scanner use LATEST_TIMESTAMP&lt;/p&gt;</comment>
                            <comment id="12593457" author="stack" created="Wed, 30 Apr 2008 22:54:51 +0000"  >&lt;p&gt;Please review.&lt;/p&gt;

&lt;p&gt;I tried this patch on our test cluster.  I put the master 3 minutes behind the regionservers.  Doing this, I was able to replicate the issue reported by the streamy fellas: ISE region offline.  Applying the patch and rerunning upload, error went away.&lt;/p&gt;</comment>
                            <comment id="12593465" author="stack" created="Wed, 30 Apr 2008 23:34:03 +0000"  >&lt;p&gt;Fix other places where master was using its current time instead of that of the hosting regionserver&lt;/p&gt;</comment>
                            <comment id="12593484" author="stack" created="Thu, 1 May 2008 04:57:20 +0000"  >&lt;p&gt;Here is new version of patch made after study of all uses of System.currentMillis.  Testing, this version of patch fixes &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-478&quot; title=&quot;offlining of table does not run reliably&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-478&quot;&gt;&lt;del&gt;HBASE-478&lt;/del&gt;&lt;/a&gt;, &quot;offlining of table does not run reliably&quot;&lt;/p&gt;

&lt;p&gt;Please review.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
When we scan, use LATEST_TIMESTAMP rather than currentTimeMillis.
When we use current time, its the time on the machine that is running
the scan.  If clock skew, it may be asking &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; a view on table that
is behind latest version.  This &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; sure is problem in catalog tables.

M  src/test/org/apache/hadoop/hbase/MultiRegionTable.java
M  src/java/org/apache/hadoop/hbase/HMerge.java
M src/java/org/apache/hadoop/hbase/HBaseAdmin.java
    Use LATEST_TIMESTAMP opening scanners.
M  src/java/org/apache/hadoop/hbase/HMaster.java
    Use LATEST_TIMESTAMP opening scanners. Also, use &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; batchUpdate
    method - one that doesn&apos;t take a timestamp rather than specify
    current time of &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; server.
M  src/java/org/apache/hadoop/hbase/HRegionInterface.java
    Added overload of batchUpdate that doesn&apos;t take a timestamp
M  src/java/org/apache/hadoop/hbase/HRegion.java
    Use batchUpdate that doesn&apos;t take an argument.
M src/java/org/apache/hadoop/hbase/HRegionServer.java
    Add overload of batchUpdate.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12593486" author="bryanduxbury" created="Thu, 1 May 2008 05:17:35 +0000"  >&lt;p&gt;There&apos;s some weird blank lines in the diff that were added. Remove those, and +1.&lt;/p&gt;</comment>
                            <comment id="12593493" author="stack" created="Thu, 1 May 2008 06:02:49 +0000"  >&lt;p&gt;Committed to branch and trunk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12381227" name="skew-0.1-v2.patch" size="5839" author="stack" created="Wed, 30 Apr 2008 23:34:03 +0000"/>
                            <attachment id="12381235" name="skew-0.1-v3.patch" size="10566" author="stack" created="Thu, 1 May 2008 04:57:20 +0000"/>
                            <attachment id="12381217" name="skew.patch" size="779" author="stack" created="Wed, 30 Apr 2008 21:17:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 1 May 2008 05:17:35 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25290</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 34 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h8cv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98616</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>