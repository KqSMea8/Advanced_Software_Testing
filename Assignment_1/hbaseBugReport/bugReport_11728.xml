<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:26:02 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-11728/HBASE-11728.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-11728] Data loss while scanning using PREFIX_TREE DATA-BLOCK-ENCODING</title>
                <link>https://issues.apache.org/jira/browse/HBASE-11728</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;In Scan case, i prepare some data as beflow:&lt;/p&gt;

&lt;p&gt;Table Desc (Using the prefix-tree encoding) :&lt;br/&gt;
&apos;prefix_tree_test&apos;, &lt;/p&gt;
{NAME =&amp;gt; &apos;cf_1&apos;, DATA_BLOCK_ENCODING =&amp;gt; &apos;PREFIX_TREE&apos;, TTL =&amp;gt; &apos;15552000&apos;}

&lt;p&gt;and i put 5 rows as:&lt;br/&gt;
(RowKey , Qualifier, Value)&lt;br/&gt;
&apos;a-b-0-0&apos;, &apos;qf_1&apos;, &apos;c1-value&apos;&lt;br/&gt;
&apos;a-b-A-1&apos;, &apos;qf_1&apos;, &apos;c1-value&apos;&lt;br/&gt;
&apos;a-b-A-1-1402329600-1402396277&apos;, &apos;qf_2&apos;, &apos;c2-value&apos;&lt;br/&gt;
&apos;a-b-A-1-1402397227-1402415999&apos;, &apos;qf_2&apos;, &apos;c2-value-2&apos;&lt;br/&gt;
&apos;a-b-B-2-1402397300-1402416535&apos;, &apos;qf_2&apos;, &apos;c2-value-3&apos;&lt;/p&gt;


&lt;p&gt;so i try to scan the rowKey between &apos;a-b-A-1&apos; and &apos;a-b-A-1:&apos; , i and got the corret result:&lt;br/&gt;
Test 1: &lt;br/&gt;
Scan scan = new Scan();&lt;/p&gt;

&lt;p&gt;scan.setStartRow(&quot;a-b-A-1&quot;.getBytes());&lt;br/&gt;
scan.setStopRow(&quot;a-b-A-1:&quot;.getBytes());&lt;br/&gt;
------------------------------------------------------&lt;br/&gt;
&apos;a-b-A-1&apos;, &apos;qf_1&apos;, &apos;c1-value&apos;&lt;br/&gt;
&apos;a-b-A-1-1402329600-1402396277&apos;, &apos;qf_2&apos;, &apos;c2-value&apos;&lt;br/&gt;
&apos;a-b-A-1-1402397227-1402415999&apos;, &apos;qf_2&apos;, &apos;c2-value-2&apos;&lt;/p&gt;


&lt;p&gt;and then i try next , scan to addColumn&lt;br/&gt;
Test2:&lt;br/&gt;
Scan scan = new Scan();&lt;br/&gt;
scan.addColumn(Bytes.toBytes(&quot;cf_1&quot;) ,  Bytes.toBytes(&quot;qf_2&quot;));&lt;/p&gt;

&lt;p&gt;scan.setStartRow(&quot;a-b-A-1&quot;.getBytes());&lt;br/&gt;
scan.setStopRow(&quot;a-b-A-1:&quot;.getBytes());&lt;br/&gt;
----------------------------------------------&lt;br/&gt;
except:&lt;br/&gt;
&apos;a-b-A-1-1402329600-1402396277&apos;, &apos;qf_2&apos;, &apos;c2-value&apos;&lt;br/&gt;
&apos;a-b-A-1-1402397227-1402415999&apos;, &apos;qf_2&apos;, &apos;c2-value-2&apos;&lt;/p&gt;

&lt;p&gt;but actually i got nonthing. Then i update the addColumn for scan.addColumn(Bytes.toBytes(&quot;cf_1&quot;) ,  Bytes.toBytes(&quot;qf_1&quot;)); and i got the expected result &apos;a-b-A-1&apos;, &apos;qf_1&apos;, &apos;c1-value&apos; as well.&lt;/p&gt;

&lt;p&gt;then i do more testing...  i update the case to modify the startRow greater than the &apos;a-b-A-1&apos; &lt;br/&gt;
Test3:&lt;br/&gt;
Scan scan = new Scan();&lt;/p&gt;

&lt;p&gt;scan.setStartRow(&quot;a-b-A-1-&quot;.getBytes());&lt;br/&gt;
scan.setStopRow(&quot;a-b-A-1:&quot;.getBytes());&lt;br/&gt;
------------------------------------------------------&lt;br/&gt;
except:&lt;br/&gt;
&apos;a-b-A-1-1402329600-1402396277&apos;, &apos;qf_2&apos;, &apos;c2-value&apos;&lt;br/&gt;
&apos;a-b-A-1-1402397227-1402415999&apos;, &apos;qf_2&apos;, &apos;c2-value-2&apos;&lt;/p&gt;

&lt;p&gt;but actually  i got nothing again. i modify the start row greater than &apos;a-b-A-1-1402329600-1402396277&apos;&lt;/p&gt;

&lt;p&gt;Scan scan = new Scan();&lt;br/&gt;
scan.setStartRow(&quot;a-b-A-1-140239&quot;.getBytes());&lt;br/&gt;
scan.setStopRow(&quot;a-b-A-1:&quot;.getBytes());&lt;/p&gt;

&lt;p&gt;and i got the expect row as well:&lt;br/&gt;
&apos;a-b-A-1-1402397227-1402415999&apos;, &apos;qf_2&apos;, &apos;c2-value-2&apos;&lt;/p&gt;

&lt;p&gt;So, i think it may be a bug in the prefix-tree encoding.It happens after the data flush to the storefile, and it&apos;s ok when the data in mem-store.&lt;/p&gt;</description>
                <environment>&lt;p&gt;ubuntu12 &lt;br/&gt;
hadoop-2.2.0&lt;br/&gt;
Hbase-0.96.1.1&lt;br/&gt;
SUN-JDK(1.7.0_06-b24)&lt;/p&gt;</environment>
        <key id="12733671">HBASE-11728</key>
            <summary>Data loss while scanning using PREFIX_TREE DATA-BLOCK-ENCODING</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ram_krish">ramkrishna.s.vasudevan</assignee>
                                    <reporter username="bdifn">wuchengzhi</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 Aug 2014 03:04:56 +0000</created>
                <updated>Sat, 21 Feb 2015 23:32:12 +0000</updated>
                            <resolved>Mon, 18 Aug 2014 17:21:01 +0000</resolved>
                                    <version>0.96.1.1</version>
                    <version>0.98.4</version>
                                    <fixVersion>0.99.0</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>0.98.6</fixVersion>
                                    <component>Scanners</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>11</watches>
                                    <timeoriginalestimate seconds="259200">72h</timeoriginalestimate>
                            <timeestimate seconds="259200">72h</timeestimate>
                                        <comments>
                            <comment id="14095104" author="jxiang" created="Wed, 13 Aug 2014 03:36:39 +0000"  >&lt;p&gt;I think this is a duplicate. However, the information you put here is very useful.&lt;/p&gt;</comment>
                            <comment id="14095111" author="ram_krish" created="Wed, 13 Aug 2014 03:44:56 +0000"  >&lt;p&gt;Can i take this up? The mvcc comparison was not working correctly in cell comparator and that was changed.  Forgot the issue number. So can check what is really going on.&lt;/p&gt;</comment>
                            <comment id="14095115" author="jxiang" created="Wed, 13 Aug 2014 03:51:35 +0000"  >&lt;p&gt;I think that will be great. Thanks.&lt;/p&gt;</comment>
                            <comment id="14095126" author="bdifn" created="Wed, 13 Aug 2014 04:34:48 +0000"  >&lt;p&gt;great, Thanks all for reply and handling.&lt;/p&gt;</comment>
                            <comment id="14095164" author="ram_krish" created="Wed, 13 Aug 2014 05:25:09 +0000"  >&lt;p&gt;Ale to reproduce this even in the latest trunk code.  After doing all puts just doing one flush causes this behaviour change.  If we do more than one flush then this problem is not there. Also &lt;br/&gt;
it occurs with Prefix_Tree only.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdifn&quot; class=&quot;user-hover&quot; rel=&quot;bdifn&quot;&gt;wuchengzhi&lt;/a&gt;&lt;br/&gt;
Can you confirm the version you are using?  Is it 0.96.1.1 or 0.94.x?&lt;/p&gt;</comment>
                            <comment id="14095167" author="ram_krish" created="Wed, 13 Aug 2014 05:27:52 +0000"  >&lt;p&gt;Test case that reproduces the exact problem as described.  Commenting out the flush() in line 81 would make the test case pass.&lt;/p&gt;</comment>
                            <comment id="14095175" author="bdifn" created="Wed, 13 Aug 2014 05:42:25 +0000"  >&lt;p&gt;I am using 0.96.1.1 now and found this issue,&lt;br/&gt;
it seems ok in 0.98.4&lt;/p&gt;</comment>
                            <comment id="14095178" author="ram_krish" created="Wed, 13 Aug 2014 05:46:50 +0000"  >&lt;blockquote&gt;&lt;p&gt;it seems ok in 0.98.4&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Okie.  Thanks for the inputs.&lt;/p&gt;</comment>
                            <comment id="14095182" author="bdifn" created="Wed, 13 Aug 2014 05:49:52 +0000"  >&lt;p&gt;sorry,i make a mistake for testing 0.98.4,i forgot to flush the data to the storefile , then i force to flush the memStore,and the issue occur to 0.98.4 as same,maybe all the version will have this problem.&lt;/p&gt;</comment>
                            <comment id="14095963" author="apurtell" created="Wed, 13 Aug 2014 19:15:29 +0000"  >&lt;p&gt;Setting fix versions&lt;/p&gt;</comment>
                            <comment id="14095966" author="apurtell" created="Wed, 13 Aug 2014 19:17:43 +0000"  >&lt;p&gt;Incorporating &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9943&quot; title=&quot;Big linked list test fails with encoding PREFIX_TREE &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9943&quot;&gt;&lt;del&gt;HBASE-9943&lt;/del&gt;&lt;/a&gt; here. If you agree, let&apos;s check that IT is functioning correctly along with the unit test on this issue.&lt;/p&gt;</comment>
                            <comment id="14096583" author="bdifn" created="Thu, 14 Aug 2014 05:14:39 +0000"  >&lt;p&gt;Does this Issue just fix in lastest version? will you provide patch for 0.96.1.1?&lt;/p&gt;</comment>
                            <comment id="14096684" author="mcorgan" created="Thu, 14 Aug 2014 07:05:06 +0000"  >&lt;p&gt;Just seeing this.  Thank you for all the investigation, especially reducing it to a unit test.  I don&apos;t currently have an environment setup, but could possibly debug this weekend if it&apos;s still a problem.  My first guess is that there is a bug in the seek method in the decoder, possibly seeking to the wrong start position in the block.&lt;/p&gt;</comment>
                            <comment id="14096686" author="ram_krish" created="Thu, 14 Aug 2014 07:08:14 +0000"  >&lt;blockquote&gt;&lt;p&gt;seek method in the decoder, possibly seeking to the wrong start position in the block&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Should be. I will try it out till then and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mcorgan&quot; class=&quot;user-hover&quot; rel=&quot;mcorgan&quot;&gt;Matt Corgan&lt;/a&gt; if you find the fix pls feel free to update here.&lt;/p&gt;</comment>
                            <comment id="14096741" author="bdifn" created="Thu, 14 Aug 2014 08:37:44 +0000"  >&lt;p&gt;I am doing more tests,i download the HFile to my localdisk, and using HFileReaderV2 &amp;amp; HFileScan for debugging.... &lt;br/&gt;
So I get some information,maybe it&apos;s unuseful ,and i want to say..&lt;/p&gt;

&lt;p&gt;byte[] startRow = KeyValue.createFirstDeleteFamilyOnRow(&quot;a-b-A-1-&quot;.getBytes(), Bytes.toBytes(&quot;cf_1&quot;)).getKey();&lt;br/&gt;
HFileScan.seekTo(startRow) ;  //a-b-A-1/cf_1:/LATEST_TIMESTAMP/DeleteFamily/vlen=0/mvcc=0&lt;br/&gt;
after done, ptSearcher.current() of this seeker is a-b-0-0/cf_1:qf_1/1407908210357/Put/vlen=8/mvcc=0&lt;/p&gt;

&lt;p&gt;and i call HFileScan.next() to get the  prefix of &quot;a-b-A-1&quot;&lt;br/&gt;
then i got output as below :&lt;br/&gt;
a-b-A-1/cf_1:qf_1/1407908210411/Put/vlen=8/mvcc=0&lt;br/&gt;
a-b-A-1-1402329600-1402396277/cf_1:qf_2/1407908210445/Put/vlen=8/mvcc=0&lt;br/&gt;
a-b-A-1-1402397227-1402415999/cf_1:qf_2/1407908210494/Put/vlen=10/mvcc=0&lt;/p&gt;

&lt;p&gt;Also,i got some debug info for PrefixTreeArrayScanner. before:advance();&lt;br/&gt;
seeker.current() is a-b-A-1/cf_1:qf_1/1407908210411/Put/vlen=8/mvcc=0&lt;/p&gt;

&lt;p&gt;currentRowNode: fan:-,token:-1,numCells:1,fanIndex:-1&lt;br/&gt;
rowNodes:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;fan:0AB,token:a-b-,numCells:0,fanIndex:1(A)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;fan:-,token:-1,numCells:1,fanIndex:-1&lt;/p&gt;

&lt;p&gt;and i try to modify the startRow to &quot;a-b-A-1-/cf_1:/LATEST_TIMESTAMP/DeleteFamily/vlen=0/mvcc=0&quot; and test again.&lt;/p&gt;

&lt;p&gt;after done, ptSearcher.current() of this seeker is  a-b-A-1/cf_1:qf_1/1407908210411/Put/vlen=8/mvcc=0&lt;br/&gt;
but i call HfileScan.next(), i got nothing..&lt;/p&gt;


&lt;p&gt;and  some debug info for PrefixTreeArrayScanner. before:advance();&lt;/p&gt;

&lt;p&gt;seeker.current() is a-b-A-1/cf_1:qf_1/1407908210411/Put/vlen=8/mvcc=0&lt;/p&gt;

&lt;p&gt;fan:-,token:-1,numCells:1,fanIndex:0&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/forbidden.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
rowNodes:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;fan:0AB,token:a-b-,numCells:0,fanIndex:1(A)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;fan:-,token:-1,numCells:1,fanIndex:0&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/forbidden.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;fan:29,token:14023,numCells:0,fanIndex:0(2)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt;fan:,token:9600-1402396277,numCells:1,fanIndex:-1&lt;/p&gt;

&lt;p&gt;and then after next(),the seeker.current() is a-b-B-2-1402397300-1402416535/cf_1:qf_2/1407908210526/Put/vlen=10/mvcc=0&lt;/p&gt;


&lt;p&gt;As the same location,but i got difference tree nodes? i think it&apos;s abnormal...&lt;/p&gt;</comment>
                            <comment id="14096743" author="bdifn" created="Thu, 14 Aug 2014 08:40:27 +0000"  >&lt;p&gt;analysis the storefile  manually&lt;/p&gt;</comment>
                            <comment id="14096757" author="ram_krish" created="Thu, 14 Aug 2014 08:56:30 +0000"  >&lt;p&gt;This is what is happening now&lt;br/&gt;
The trie structure formed for the above data is&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
B    0  1  a-b-
  L  1  2      0-0
 N   1  2      A-1
B    0  3         -14023
  L  1  4               29600-1402396277
  L  1  4               97227-1402415999
  L  1  2      B-2-1402397300-1402416535
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;For the case where we add the column to the scan, the scan tries to find a kv that is greater than &lt;br/&gt;
a-b-A-1,cf_1,qf_2.&lt;br/&gt;
So the seeker goes thro these row nodes &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
fan:0AB,token:a-b-,numCells:0,fanIndex:-1
fan:-,token:-1,numCells:1,fanIndex:-1
fan:29,token:14023,numCells:0,fanIndex:-1
fan:,token:9600-1402396277,numCells:1,fanIndex:-1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Finally this points to the required kv a-b-A-1-1402397227-1402415999, cf_1, qf_2. &lt;br/&gt;
Since the scanner always tries to fetch the previous kv the seeker moves back to the kv just before this following the below path&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
fan:29,token:14023,numCells:0,fanIndex:0(2)
fan:-,token:-1,numCells:1,fanIndex:0(-)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So the actual next() call should advance() and get the kv from where the previous() was done.  But in this case the path followed is this&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
fan:-,token:-1,numCells:1,fanIndex:0(-)
fan:0AB,token:a-b-,numCells:0,fanIndex:1(A)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And hence the next ends up in fetching the node that is directly under a-b- and that is the kv a-b-B-2-1402397300-1402416535.  &lt;br/&gt;
So from the above analysis it shows that while doing previous() the fanIndex gets changed for the row node and hence while doing the actual next() the traversal of the trie structure ends up in the other leaf node attached to it.&lt;/p&gt;</comment>
                            <comment id="14096760" author="ram_krish" created="Thu, 14 Aug 2014 09:02:27 +0000"  >&lt;p&gt;The method is never used&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void followCurrentFan() {
    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; currentFanPosition = currentRowNode.getFanIndex();
    followFan(currentFanPosition);
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
{Hit enter too soon}</comment>
                            <comment id="14096809" author="ram_krish" created="Thu, 14 Aug 2014 09:57:19 +0000"  >&lt;blockquote&gt;&lt;p&gt;So from the above analysis it shows that while doing previous() the fanIndex gets changed for the row node and hence while doing the actual next() the traversal of the trie structure ends up in the other leaf node attached to it.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I would like to rephrase the above sentence.  The issue is clear now.&lt;br/&gt;
During the seek phase &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[fan:0AB,token:a-b-,numCells:0,fanIndex:1(A), fan:-,token:-1,numCells:1,fanIndex:0(-), fan:29,token:14023,numCells:0,fanIndex:0(2), fan:,token:9600-1402396277,numCells:1,fanIndex:-1]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and we have ended up in the right kv.&lt;br/&gt;
Now the previous() has now made the current row to be pointing to &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
fan:-,token:-1,numCells:1,fanIndex:0(-), 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Which is correct. &lt;br/&gt;
Now on the next() call, ideally we should be traversing the same set of row nodes but as the node &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
a-b-,numCells:0,fanIndex:1(A)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;has more fanouts other than A (i.e B) the next() tries to track the nodes that are attached to B and thus we end up in altogether new row.  My feel is that in this scenario where we have already formed the set of nodes we should traverse the same set of nodes that we already created while seeking.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mcorgan&quot; class=&quot;user-hover&quot; rel=&quot;mcorgan&quot;&gt;Matt Corgan&lt;/a&gt; - What do you think?&lt;/p&gt;</comment>
                            <comment id="14096819" author="ram_krish" created="Thu, 14 Aug 2014 10:08:53 +0000"  >&lt;p&gt;In other encoding algos, while seeking using BufferedDataEncoder we do moveToPrevious() by just ensuring that the data current kv starting offset is stored in the seeker so that when the actual next() is called we could start from that same position.&lt;br/&gt;
We should indicate in the PrefixTreeSeeker that whenever we do a next() after seek() and we know that the seek() has done a previous() we should make the advance() to follow the current fan out even though there could be other fanouts.&lt;/p&gt;</comment>
                            <comment id="14097277" author="ram_krish" created="Thu, 14 Aug 2014 17:48:58 +0000"  >&lt;p&gt;I created a patch for this.  But still needs more thinking.  It seems to be a sort of hack. The other cases are failing due to this. Will spend some time later this week or early next week.&lt;/p&gt;</comment>
                            <comment id="14097289" author="ram_krish" created="Thu, 14 Aug 2014 17:56:34 +0000"  >&lt;p&gt;Just attaching the hacky patch.  It solves this particular case. But it is not the right one.  Will work on that further.&lt;/p&gt;</comment>
                            <comment id="14098063" author="bdifn" created="Fri, 15 Aug 2014 02:08:19 +0000"  >&lt;p&gt;Thanks for good news.&lt;/p&gt;</comment>
                            <comment id="14098473" author="ram_krish" created="Fri, 15 Aug 2014 11:29:31 +0000"  >&lt;p&gt;This patch seems to solve the issue. All test cases related to prefix tree and encoding passes with this patch. Will anyway run test suite too.&lt;/p&gt;

&lt;p&gt;The idea behind this patch is that when we ever we are doing a next() after previous() we track that this next is called after previous() by having an instance variable moveToPrevious in the PrefixTreeSeeker.  &lt;br/&gt;
So on this condition while doing next, if the node is not having fanout, it is not right to just discard the current node, instead try to track the already formed nodes from the next fan index.  &lt;br/&gt;
But the condition is that the next fan index should be same as that of the current node&apos;s fan index, if not we can just discard the node as done previously.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mcorgan&quot; class=&quot;user-hover&quot; rel=&quot;mcorgan&quot;&gt;Matt Corgan&lt;/a&gt;&lt;br/&gt;
What do you think of this patch?&lt;/p&gt;</comment>
                            <comment id="14098475" author="ram_krish" created="Fri, 15 Aug 2014 11:31:38 +0000"  >&lt;blockquote&gt;&lt;p&gt;But the condition is that the next fan index should be same as that of the current node&apos;s fan index, if not we can just discard the node as done previously.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Because when ever the current nodes fan index is not the same as the next one, then it means that the current node would not have been the node under which the next would have directly attached.  So we need to move to the previous node.&lt;/p&gt;</comment>
                            <comment id="14098494" author="hadoopqa" created="Fri, 15 Aug 2014 12:11:38 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12662041/HBASE-11728_1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12662041/HBASE-11728_1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12662041&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.TestCheckTestClasses&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10454//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10454//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10454//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10454//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10454//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10454//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10454//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10454//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10454//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10454//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10454//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10454//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10454//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10454//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10454//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10454//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10454//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10454//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10454//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10454//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10454//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10454//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14098849" author="mcorgan" created="Fri, 15 Aug 2014 18:04:19 +0000"  >&lt;p&gt;It looks good to me, Ram.  My only question would be whether we could solve it in either the PrefixTreeSeeker or the PrefixTreeArrayScanner without having to worry about it in both.  I will take a closer look tomorrow, but I&apos;m fine with the current patch as well.&lt;/p&gt;</comment>
                            <comment id="14099583" author="ram_krish" created="Sat, 16 Aug 2014 10:13:01 +0000"  >&lt;p&gt;Addresses Matt&apos;s comments.  &lt;br/&gt;
If you are ok with commit we can commit it? &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jxiang&quot; class=&quot;user-hover&quot; rel=&quot;jxiang&quot;&gt;Jimmy Xiang&lt;/a&gt;&lt;br/&gt;
Can you run the IT test with this change? &lt;/p&gt;</comment>
                            <comment id="14099589" author="hadoopqa" created="Sat, 16 Aug 2014 10:53:35 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12662265/HBASE-11728_2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12662265/HBASE-11728_2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12662265&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.TestCheckTestClasses&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10467//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10467//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10467//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10467//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10467//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10467//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10467//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10467//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10467//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10467//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10467//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10467//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10467//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10467//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10467//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10467//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10467//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10467//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10467//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10467//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10467//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10467//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14099766" author="mcorgan" created="Sat, 16 Aug 2014 19:44:16 +0000"  >&lt;p&gt;Patch looks good to me.  Thanks Ram!&lt;/p&gt;</comment>
                            <comment id="14100265" author="ram_krish" created="Mon, 18 Aug 2014 04:18:49 +0000"  >&lt;p&gt;I will commit this later today unless objections.&lt;/p&gt;</comment>
                            <comment id="14100282" author="ram_krish" created="Mon, 18 Aug 2014 05:10:26 +0000"  >&lt;blockquote&gt;&lt;p&gt;org.apache.hadoop.hbase.TestCheckTestClasses&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This is valid.  I have not added the test category.  I will add it on commit.&lt;/p&gt;</comment>
                            <comment id="14100313" author="ram_krish" created="Mon, 18 Aug 2014 06:03:45 +0000"  >&lt;p&gt;Updated the category on the test patch.  Also removed the syso in the test case and converted them to assertEquals.&lt;/p&gt;</comment>
                            <comment id="14100542" author="ram_krish" created="Mon, 18 Aug 2014 11:15:08 +0000"  >&lt;p&gt;Retry QA.&lt;/p&gt;</comment>
                            <comment id="14100881" author="ram_krish" created="Mon, 18 Aug 2014 17:20:46 +0000"  >&lt;p&gt;Committed to master, branch-1 and 0.98. Thanks for the review &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mcorgan&quot; class=&quot;user-hover&quot; rel=&quot;mcorgan&quot;&gt;Matt Corgan&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14101138" author="hudson" created="Mon, 18 Aug 2014 19:27:06 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.98 #455 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/455/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/455/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11728&quot; title=&quot;Data loss while scanning using PREFIX_TREE DATA-BLOCK-ENCODING&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11728&quot;&gt;&lt;del&gt;HBASE-11728&lt;/del&gt;&lt;/a&gt; - Data loss while scanning using PREFIX_TREE (ramkrishna: rev e07cf3554d628bb061aa51b9b83fd81783463e1d)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-prefix-tree/src/main/java/org/apache/hadoop/hbase/codec/prefixtree/decode/PrefixTreeArrayScanner.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/encoding/TestPrefixTree.java&lt;/li&gt;
	&lt;li&gt;hbase-prefix-tree/src/main/java/org/apache/hadoop/hbase/codec/prefixtree/PrefixTreeSeeker.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14101209" author="hudson" created="Mon, 18 Aug 2014 20:16:09 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.0 #108 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/108/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.0/108/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11728&quot; title=&quot;Data loss while scanning using PREFIX_TREE DATA-BLOCK-ENCODING&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11728&quot;&gt;&lt;del&gt;HBASE-11728&lt;/del&gt;&lt;/a&gt; - Data loss while scanning using PREFIX_TREE (ramkrishna: rev f8eb1962dc9e92122d00cccfede819014a1cc8f6)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/encoding/TestPrefixTree.java&lt;/li&gt;
	&lt;li&gt;hbase-prefix-tree/src/main/java/org/apache/hadoop/hbase/codec/prefixtree/decode/PrefixTreeArrayScanner.java&lt;/li&gt;
	&lt;li&gt;hbase-prefix-tree/src/main/java/org/apache/hadoop/hbase/codec/prefixtree/PrefixTreeSeeker.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14101392" author="hudson" created="Mon, 18 Aug 2014 22:01:25 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #5407 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/5407/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/5407/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11728&quot; title=&quot;Data loss while scanning using PREFIX_TREE DATA-BLOCK-ENCODING&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11728&quot;&gt;&lt;del&gt;HBASE-11728&lt;/del&gt;&lt;/a&gt; - Data loss while scanning using PREFIX_TREE (ramkrishna: rev 70696ebf59f9a612a72b4dfff9581ffbd1948320)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/encoding/TestPrefixTree.java&lt;/li&gt;
	&lt;li&gt;hbase-prefix-tree/src/main/java/org/apache/hadoop/hbase/codec/prefixtree/PrefixTreeSeeker.java&lt;/li&gt;
	&lt;li&gt;hbase-prefix-tree/src/main/java/org/apache/hadoop/hbase/codec/prefixtree/decode/PrefixTreeArrayScanner.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14101457" author="hudson" created="Mon, 18 Aug 2014 22:47:51 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.98-on-Hadoop-1.1 #429 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/429/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/429/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11728&quot; title=&quot;Data loss while scanning using PREFIX_TREE DATA-BLOCK-ENCODING&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11728&quot;&gt;&lt;del&gt;HBASE-11728&lt;/del&gt;&lt;/a&gt; - Data loss while scanning using PREFIX_TREE (ramkrishna: rev e07cf3554d628bb061aa51b9b83fd81783463e1d)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-prefix-tree/src/main/java/org/apache/hadoop/hbase/codec/prefixtree/decode/PrefixTreeArrayScanner.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/encoding/TestPrefixTree.java&lt;/li&gt;
	&lt;li&gt;hbase-prefix-tree/src/main/java/org/apache/hadoop/hbase/codec/prefixtree/PrefixTreeSeeker.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14101802" author="ram_krish" created="Tue, 19 Aug 2014 03:40:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/5407/#showFailuresLink&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/5407/#showFailuresLink&lt;/a&gt;&lt;br/&gt;
All the test cases in the link are unrelated to Prefix Tree.&lt;/p&gt;</comment>
                            <comment id="14101809" author="ram_krish" created="Tue, 19 Aug 2014 03:46:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdifn&quot; class=&quot;user-hover&quot; rel=&quot;bdifn&quot;&gt;wuchengzhi&lt;/a&gt;&lt;br/&gt;
Do you want this fix in 0.96.x versions?  We are planning to make 0.96 EOL.  I think better if you can upgrade to 0.98.x.&lt;br/&gt;
See &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11642&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-11642&lt;/a&gt; for details.&lt;/p&gt;</comment>
                            <comment id="14102063" author="bdifn" created="Tue, 19 Aug 2014 09:28:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ram_krish&quot; class=&quot;user-hover&quot; rel=&quot;ram_krish&quot;&gt;ramkrishna.s.vasudevan&lt;/a&gt;&lt;br/&gt;
ok,i got it, we will try to upgrade the version, thanks for your remind.&lt;br/&gt;
if I just replace the lastest prefix-tree-xxx.jar , can it work?&lt;/p&gt;</comment>
                            <comment id="14119447" author="ram_krish" created="Wed, 3 Sep 2014 06:31:40 +0000"  >&lt;p&gt;Should we do this for some of the previous() cases also as done in the patch.  May be that is the reason for the IT to fail. &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdifn&quot; class=&quot;user-hover&quot; rel=&quot;bdifn&quot;&gt;wuchengzhi&lt;/a&gt;&lt;br/&gt;
Did you get an opportunity to use this patch and still you had some data loss while scanning?&lt;/p&gt;</comment>
                            <comment id="14330927" author="enis" created="Sat, 21 Feb 2015 23:32:12 +0000"  >&lt;p&gt;Closing this issue after 0.99.0 release. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12678609">HBASE-9943</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12678609">HBASE-9943</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12737173">HBASE-11838</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12661677" name="29cb562fad564b468ea9d61a2d60e8b0" size="1299" author="bdifn" created="Thu, 14 Aug 2014 08:40:27 +0000"/>
                            <attachment id="12661754" name="HBASE-11728.patch" size="4929" author="ram_krish" created="Thu, 14 Aug 2014 17:56:34 +0000"/>
                            <attachment id="12662041" name="HBASE-11728_1.patch" size="10896" author="ram_krish" created="Fri, 15 Aug 2014 11:29:31 +0000"/>
                            <attachment id="12662265" name="HBASE-11728_2.patch" size="10648" author="ram_krish" created="Sat, 16 Aug 2014 10:13:01 +0000"/>
                            <attachment id="12662432" name="HBASE-11728_3.patch" size="11607" author="ram_krish" created="Mon, 18 Aug 2014 06:03:45 +0000"/>
                            <attachment id="12662473" name="HBASE-11728_4.patch" size="11607" author="ram_krish" created="Mon, 18 Aug 2014 11:15:08 +0000"/>
                            <attachment id="12661676" name="HFileAnalys.java" size="2264" author="bdifn" created="Thu, 14 Aug 2014 08:40:27 +0000"/>
                            <attachment id="12661398" name="TestPrefixTree.java" size="5064" author="ram_krish" created="Wed, 13 Aug 2014 05:27:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 13 Aug 2014 03:36:39 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>411699</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1yttb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>411690</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>