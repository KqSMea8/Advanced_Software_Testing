<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:34:58 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6236/HBASE-6236.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6236] Offline meta repair fails if the HBase base mount point is on a different cluster/volume than its parent in a ViewFS or similar FS</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6236</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;While building the .META. and &amp;#45;ROOT&amp;#45; from FS data alone (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4377&quot; title=&quot;[hbck] Offline rebuild .META. from fs data only.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4377&quot;&gt;&lt;del&gt;HBASE-4377&lt;/del&gt;&lt;/a&gt;), hbck tries to move the existing .META. and &amp;#45;ROOT&amp;#45; directories to a backup folder.&lt;/p&gt;

&lt;p&gt;This backup folder is created at the same level as the base HBase folder (e.g. /hbase-xxxxxx if the base HBase folder is &apos;/hbase&apos;).&lt;/p&gt;

&lt;p&gt;In a federated HDFS like ViewFS and other similar FS implementations, it is not possible to rename files/directories across namespace volumes (ViewFS guide section 3.5) and as a result hbck crashes.&lt;/p&gt;

&lt;p&gt;A solution to this problem is to create the backup directory under the folder where HBase base folder has been mounted. This ensures that source and destination of rename operation are on the same namespace volume.&lt;/p&gt;

&lt;p&gt;Patch for 0.94 and trunk is attached for review. The patch modifies the location of the backup directory from &apos;/hbase-xxxxxxx&apos; to &apos;/hbase/.hbcktmp-xxxxxxx&apos;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12595041">HBASE-6236</key>
            <summary>Offline meta repair fails if the HBase base mount point is on a different cluster/volume than its parent in a ViewFS or similar FS</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="adityakishore">Aditya Kishore</assignee>
                                    <reporter username="adityakishore">Aditya Kishore</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Jun 2012 01:56:28 +0000</created>
                <updated>Tue, 26 Feb 2013 08:16:11 +0000</updated>
                            <resolved>Sat, 23 Jun 2012 16:20:25 +0000</resolved>
                                                    <fixVersion>0.94.1</fixVersion>
                    <fixVersion>0.95.0</fixVersion>
                                    <component>hbck</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13396522" author="hadoopqa" created="Tue, 19 Jun 2012 05:22:29 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12532496/HBASE-6236_0.94.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12532496/HBASE-6236_0.94.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2188//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2188//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13396523" author="zhihyu@ebaysf.com" created="Tue, 19 Jun 2012 05:26:24 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&#65279;&#65279;+    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Path(hbaseDir, &lt;span class=&quot;code-quote&quot;&gt;&quot;.hbcktmp&quot;&lt;/span&gt; + &lt;span class=&quot;code-quote&quot;&gt;&quot;-&quot;&lt;/span&gt; + startMillis);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Introduce some constant and make the above configurable ?&lt;/p&gt;</comment>
                            <comment id="13396526" author="adityakishore" created="Tue, 19 Jun 2012 05:40:32 +0000"  >&lt;p&gt;@Hadoop QA&lt;/p&gt;

&lt;p&gt;Build seems to have attempted to apply 0.94 patch to trunk&lt;/p&gt;</comment>
                            <comment id="13396531" author="adityakishore" created="Tue, 19 Jun 2012 05:52:50 +0000"  >&lt;p&gt;@&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zhihyu%40ebaysf.com&quot; class=&quot;user-hover&quot; rel=&quot;zhihyu@ebaysf.com&quot;&gt;Ted Yu&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Agree that it would be a clean to move the prefix to a constant.&lt;/p&gt;

&lt;p&gt;However, we would still want to enforce 2 criteria on the backup folder name/location:&lt;/p&gt;

&lt;p&gt;1. The folder must be immediate child of HBase base folder to ensure that fs.rename() works, and &lt;br/&gt;
2. Prefix starts with a &quot;.&quot; to ensure that it does not conflict with or presumed to be a table directory.&lt;/p&gt;

&lt;p&gt;Instead of making it configurable, how about print a message at the end notifying the user the location of the backup folder?&lt;/p&gt;</comment>
                            <comment id="13396564" author="zhihyu@ebaysf.com" created="Tue, 19 Jun 2012 06:57:54 +0000"  >&lt;p&gt;Makes sense.&lt;/p&gt;

&lt;p&gt;New configuration would increase the possibility of satisfying future use case.&lt;/p&gt;</comment>
                            <comment id="13398999" author="adityakishore" created="Thu, 21 Jun 2012 23:34:59 +0000"  >&lt;p&gt;Here are new patches to address this issue.&lt;/p&gt;

&lt;p&gt;Change summary:&lt;br/&gt;
1. By default, the sideline folder is &quot;&amp;lt;hbase base dorectory&amp;gt;/.hbcktmp-xxxxxxxxxxxxx&quot; where xxxxxxxxxxxxx is System.currentTimeMillis()&lt;br/&gt;
2. A new optional command line parameter &quot;-backup &amp;lt;hdfs://...&amp;gt;&quot; has been added which can override the the default sideline folder.&lt;/p&gt;</comment>
                            <comment id="13399003" author="hadoopqa" created="Thu, 21 Jun 2012 23:43:24 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12532967/HBASE-6236_94.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12532967/HBASE-6236_94.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2217//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2217//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13399073" author="zhihyu@ebaysf.com" created="Fri, 22 Jun 2012 02:02:18 +0000"  >&lt;p&gt;Re-attaching.&lt;/p&gt;</comment>
                            <comment id="13399095" author="zhihyu@ebaysf.com" created="Fri, 22 Jun 2012 03:27:47 +0000"  >&lt;p&gt;@Aditya:&lt;br/&gt;
Hadoop QA is not functioning. Please run test suite locally.&lt;/p&gt;

&lt;p&gt;@Jonathan H, @Jimmy:&lt;br/&gt;
Can you take a look at the patch ?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="13399099" author="zhihyu@ebaysf.com" created="Fri, 22 Jun 2012 03:34:01 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+        .println(&lt;span class=&quot;code-quote&quot;&gt;&quot;   -backup &amp;lt;hdfs:&lt;span class=&quot;code-comment&quot;&gt;//&amp;gt; HDFS path to backup existing meta and root.&quot;&lt;/span&gt;);&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;How about giving the new option a name which is more consistent with its usage, such as -sidelineDir ?&lt;/p&gt;</comment>
                            <comment id="13399134" author="adityakishore" created="Fri, 22 Jun 2012 05:49:18 +0000"  >&lt;p&gt;@Ted:&lt;/p&gt;

&lt;p&gt;I was of two minds about naming this new option. This new patch has the changed name.&lt;/p&gt;

&lt;p&gt;Submitting only for trunk this time.&lt;/p&gt;</comment>
                            <comment id="13399135" author="adityakishore" created="Fri, 22 Jun 2012 05:50:36 +0000"  >&lt;p&gt;I am running the test suit at this moment, will update here once it is done&lt;/p&gt;</comment>
                            <comment id="13399197" author="adityakishore" created="Fri, 22 Jun 2012 08:11:01 +0000"  >&lt;p&gt;Strangely, the test suit is randomly failing at different places during different runs on my test machine, even without applying the patch &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13399201" author="zhihyu@ebaysf.com" created="Fri, 22 Jun 2012 08:18:09 +0000"  >&lt;p&gt;All Apache build servers are offline.&lt;br/&gt;
Please list the failing tests individually so that people can help verify.&lt;/p&gt;</comment>
                            <comment id="13399444" author="hadoopqa" created="Fri, 22 Jun 2012 17:03:06 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12532994/HBASE-6236_trunk.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12532994/HBASE-6236_trunk.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 11 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.regionserver.TestAtomicOperation&lt;br/&gt;
                  org.apache.hadoop.hbase.security.access.TestAccessController&lt;br/&gt;
                  org.apache.hadoop.hbase.util.TestFSUtils&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2222//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2222//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2222//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2222//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2222//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2222//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2222//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2222//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13399450" author="zhihyu@ebaysf.com" created="Fri, 22 Jun 2012 17:10:32 +0000"  >&lt;p&gt;The failed tests are unrelated to the patch.&lt;br/&gt;
I ran them and they passed.&lt;/p&gt;</comment>
                            <comment id="13399462" author="adityakishore" created="Fri, 22 Jun 2012 17:34:46 +0000"  >&lt;p&gt;Even though I am running into some random test case failures, all of these HBCK/HBFsck tests have been passing regularly&lt;/p&gt;

&lt;p&gt;org.apache.hadoop.hbase.util.hbck.TestOfflineMetaRebuildBase&lt;br/&gt;
org.apache.hadoop.hbase.util.hbck.TestOfflineMetaRebuildHole&lt;br/&gt;
org.apache.hadoop.hbase.util.hbck.TestOfflineMetaRebuildOverlap&lt;br/&gt;
org.apache.hadoop.hbase.util.TestHBaseFsck&lt;br/&gt;
org.apache.hadoop.hbase.util.TestHBaseFsckComparator&lt;/p&gt;</comment>
                            <comment id="13399543" author="zhihyu@ebaysf.com" created="Fri, 22 Jun 2012 19:50:11 +0000"  >&lt;p&gt;Patch integrated to trunk.&lt;/p&gt;</comment>
                            <comment id="13399544" author="jxiang" created="Fri, 22 Jun 2012 19:51:02 +0000"  >&lt;p&gt;hbck sideline the dir to some folder like /hbck/hbase-xxxxxx, not /hbase-xxxxx&lt;br/&gt;
In a federated HDFS, you can pre-create a folder like /hbck, which is for this kind of use cases.&lt;/p&gt;</comment>
                            <comment id="13399546" author="jxiang" created="Fri, 22 Jun 2012 19:52:55 +0000"  >&lt;p&gt;We should revert this change.&lt;/p&gt;</comment>
                            <comment id="13399551" author="zhihyu@ebaysf.com" created="Fri, 22 Jun 2012 19:58:49 +0000"  >&lt;p&gt;Integrated to 0.94 as well.&lt;/p&gt;

&lt;p&gt;Thanks for the patch, Aditya.&lt;/p&gt;</comment>
                            <comment id="13399557" author="zhihyu@ebaysf.com" created="Fri, 22 Jun 2012 20:02:10 +0000"  >&lt;p&gt;Saw Jimmy&apos;s comment and reverted the patch.&lt;/p&gt;</comment>
                            <comment id="13399562" author="jxiang" created="Fri, 22 Jun 2012 20:07:22 +0000"  >&lt;p&gt;It is a good idea to have sideline dir option.  I think we should keep the existing default folder name.&lt;/p&gt;</comment>
                            <comment id="13399603" author="hudson" created="Fri, 22 Jun 2012 21:10:22 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #272 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/272/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/272/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6236&quot; title=&quot;Offline meta repair fails if the HBase base mount point is on a different cluster/volume than its parent in a ViewFS or similar FS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6236&quot;&gt;&lt;del&gt;HBASE-6236&lt;/del&gt;&lt;/a&gt; revert upon Jimmy&apos;s request. (Revision 1353014)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6236&quot; title=&quot;Offline meta repair fails if the HBase base mount point is on a different cluster/volume than its parent in a ViewFS or similar FS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6236&quot;&gt;&lt;del&gt;HBASE-6236&lt;/del&gt;&lt;/a&gt; Offline meta repair fails if the HBase base mount point is on a different cluster/volume than its parent in a ViewFS or similar FS (Aditya) (Revision 1353012)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/util/HBaseFsck.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/util/hbck/OfflineMetaRepair.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/util/HBaseFsck.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/util/hbck/OfflineMetaRepair.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13399623" author="hudson" created="Fri, 22 Jun 2012 21:33:15 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3060 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3060/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3060/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6236&quot; title=&quot;Offline meta repair fails if the HBase base mount point is on a different cluster/volume than its parent in a ViewFS or similar FS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6236&quot;&gt;&lt;del&gt;HBASE-6236&lt;/del&gt;&lt;/a&gt; revert upon Jimmy&apos;s request. (Revision 1353013)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6236&quot; title=&quot;Offline meta repair fails if the HBase base mount point is on a different cluster/volume than its parent in a ViewFS or similar FS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6236&quot;&gt;&lt;del&gt;HBASE-6236&lt;/del&gt;&lt;/a&gt; Offline meta repair fails if the HBase base mount point is on a different cluster/volume than its parent in a ViewFS or similar FS (Aditya) (Revision 1353008)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/util/HBaseFsck.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/util/hbck/OfflineMetaRepair.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/util/HBaseFsck.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/util/hbck/OfflineMetaRepair.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13399628" author="adityakishore" created="Fri, 22 Jun 2012 21:39:08 +0000"  >&lt;p&gt;@Jimmy&lt;/p&gt;

&lt;p&gt;Currently there are two different locations where hbck sidelines the backup data.&lt;/p&gt;

&lt;p&gt;First one takes the form &apos;/hbck/hbase-xxxxxx&apos; and is used to sideline regions&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;HBaseFsck.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
857	  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; Path getSidelineDir() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
858	    Path hbaseDir = FSUtils.getRootDir(conf);
859	    Path hbckDir = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Path(hbaseDir.getParent(), &lt;span class=&quot;code-quote&quot;&gt;&quot;hbck&quot;&lt;/span&gt;);
860	    Path backupDir = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Path(hbckDir, hbaseDir.getName() + &lt;span class=&quot;code-quote&quot;&gt;&quot;-&quot;&lt;/span&gt;
861	        + startMillis);
862	    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; backupDir;
863	  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;While the second one takes the form of &apos;/hbase-xxxxx&apos; and is used to sideline the current .META. and &amp;#45;ROOT&amp;#45; folders&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;HBaseFsck.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
960	    Path backupDir = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Path(hbaseDir.getParent(), hbaseDir.getName() + &lt;span class=&quot;code-quote&quot;&gt;&quot;-&quot;&lt;/span&gt;
961	        + startMillis);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;At lease we need to make them standard.&lt;/p&gt;

&lt;p&gt;Secondly, I am not sure how pre-creating &quot;/hbck&quot; will solve this problem in a federated HDFS in all cases. Suppose the root of a cluster is mounted as &quot;/hbase&quot; in ViewFS then the pre created &quot;/hbck&quot; folder is going to be on a different namespace volume and renaming of a file from &quot;/hbase/&quot; to &quot;/hbck/&quot; is going to fail.&lt;/p&gt;</comment>
                            <comment id="13399634" author="jxiang" created="Fri, 22 Jun 2012 21:49:18 +0000"  >&lt;p&gt;@Aditya, good catch.  Please make sure they are the same.&lt;br/&gt;
Can you use /hbase/.hbck as the default?&lt;/p&gt;</comment>
                            <comment id="13399646" author="adityakishore" created="Fri, 22 Jun 2012 21:58:54 +0000"  >&lt;p&gt;@Jimmy&lt;/p&gt;

&lt;p&gt;To be sure, you want the folders to take the form of &quot;/hbase/.hbck/hbase-xxxxxx&quot;, right? &lt;/p&gt;

&lt;p&gt;This way they won&apos;t clutter the &quot;/hbase/&quot; when many of them get created during.&lt;/p&gt;</comment>
                            <comment id="13399652" author="jxiang" created="Fri, 22 Jun 2012 22:05:41 +0000"  >&lt;p&gt;That&apos;s right.  I prefer /hbase/.hbck/hbase-xxxxxx as a default, with option to change it.&lt;/p&gt;</comment>
                            <comment id="13399659" author="adityakishore" created="Fri, 22 Jun 2012 22:13:58 +0000"  >&lt;p&gt;And it might be a good idea to add &quot;.hbck&quot; to the list &quot;org.apache.hadoop.hbase.HConstants.HBASE_NON_USER_TABLE_DIRS&quot;&lt;/p&gt;

&lt;p&gt;along with &quot;.logs&quot;, &quot;.oldlogs&quot;, &quot;.corrupt&quot;, etc.&lt;/p&gt;</comment>
                            <comment id="13399690" author="jmhsieh" created="Fri, 22 Jun 2012 22:50:28 +0000"  >&lt;p&gt;@Aditya&lt;/p&gt;

&lt;p&gt;I only looked at the 21/Jun/12 22:49 version &amp;#8211; assuming others have a similar problem.&lt;/p&gt;

&lt;p&gt;There is a possible array out of bounds exception here.  Can we check to make sure we are not out of bounds and provide an appropriate warning message and bail out if we are?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        conf.set(HConstants.HBASE_DIR, path);
         conf.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;fs.defaultFS&quot;&lt;/span&gt;, conf.get(HConstants.HBASE_DIR));
         conf.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;fs.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;.name&quot;&lt;/span&gt;, conf.get(HConstants.HBASE_DIR));
+      } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (cmd.equals(&lt;span class=&quot;code-quote&quot;&gt;&quot;-sidelineDir&quot;&lt;/span&gt;)) {
+        i++;
+        fsck.setSidelineDir(args[i]);        
       } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (cmd.equals(&lt;span class=&quot;code-quote&quot;&gt;&quot;-fixHoles&quot;&lt;/span&gt;)) {
         fixHoles = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
       } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (cmd.equals(&lt;span class=&quot;code-quote&quot;&gt;&quot;-fix&quot;&lt;/span&gt;)) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13399693" author="zhihyu@ebaysf.com" created="Fri, 22 Jun 2012 22:55:49 +0000"  >&lt;p&gt;I think Aditya was following existing convention:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (cmd.equals(&lt;span class=&quot;code-quote&quot;&gt;&quot;-base&quot;&lt;/span&gt;)) {
        &lt;span class=&quot;code-comment&quot;&gt;// update hbase root dir to user-specified base
&lt;/span&gt;        i++;
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; path = args[i];
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13399694" author="adityakishore" created="Fri, 22 Jun 2012 22:55:54 +0000"  >&lt;p&gt;@Jonathan:&lt;/p&gt;

&lt;p&gt;I noticed that too but wasn&apos;t sure whether to combine that issue with the current one. I guess there is no harm in fixing that while I am touching this part of code. Will include it in the patch.&lt;/p&gt;</comment>
                            <comment id="13399695" author="adityakishore" created="Fri, 22 Jun 2012 22:56:47 +0000"  >&lt;p&gt;@Ted,&lt;/p&gt;

&lt;p&gt;Yes, I was &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13399703" author="jmhsieh" created="Fri, 22 Jun 2012 23:05:49 +0000"  >&lt;p&gt;@Aditya Go ahead and fix it in this instance.  If there are other instances that have a similar problem, file and fix them in a follow-up jira?  &lt;/p&gt;

&lt;p&gt;I probably wrote the exemplar which has the bug in the first place. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13399714" author="adityakishore" created="Fri, 22 Jun 2012 23:29:37 +0000"  >&lt;p&gt;Change Summary (consolidated):&lt;br/&gt;
-------------------------------&lt;br/&gt;
1. Changed the default sideline folder to &quot;/hbase/.hbck/hbase-xxxxxxxxx&quot; where xxxxxxxxx is System.currentTimeMillis().&lt;/p&gt;

&lt;p&gt;2. Added a command line option &quot;-sidelineDir&quot; to override this default.&lt;/p&gt;

&lt;p&gt;3. Added &quot;.hbck&quot; to the list of Non-user table dir so that it is not treated as a user table folder.&lt;/p&gt;

&lt;p&gt;4. Fixed the potential NPE in argument parsing code.&lt;/p&gt;

&lt;p&gt;Thank you all for your valuable time spent reviewing my submission &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13399727" author="jxiang" created="Fri, 22 Jun 2012 23:42:17 +0000"  >&lt;p&gt;Looks good to me. Should we also add this sideline dir option to HBaseFsck?&lt;/p&gt;</comment>
                            <comment id="13399734" author="hudson" created="Fri, 22 Jun 2012 23:53:04 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #65 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/65/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/65/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6236&quot; title=&quot;Offline meta repair fails if the HBase base mount point is on a different cluster/volume than its parent in a ViewFS or similar FS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6236&quot;&gt;&lt;del&gt;HBASE-6236&lt;/del&gt;&lt;/a&gt; revert upon Jimmy&apos;s request. (Revision 1353013)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6236&quot; title=&quot;Offline meta repair fails if the HBase base mount point is on a different cluster/volume than its parent in a ViewFS or similar FS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6236&quot;&gt;&lt;del&gt;HBASE-6236&lt;/del&gt;&lt;/a&gt; Offline meta repair fails if the HBase base mount point is on a different cluster/volume than its parent in a ViewFS or similar FS (Aditya) (Revision 1353008)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/util/HBaseFsck.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/util/hbck/OfflineMetaRepair.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/util/HBaseFsck.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/util/hbck/OfflineMetaRepair.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13399753" author="adityakishore" created="Sat, 23 Jun 2012 00:22:45 +0000"  >&lt;ol&gt;
	&lt;li&gt;&quot;-sidelineDir&quot; option to HBaseFsck too.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="13399782" author="hadoopqa" created="Sat, 23 Jun 2012 01:21:07 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12533129/HBASE-6236_trunk.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12533129/HBASE-6236_trunk.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 11 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.regionserver.TestSplitTransactionOnCluster&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2227//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2227//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2227//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2227//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2227//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2227//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2227//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2227//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13399810" author="hadoopqa" created="Sat, 23 Jun 2012 02:22:11 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12533142/HBASE-6236_trunk.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12533142/HBASE-6236_trunk.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 11 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2229//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2229//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2229//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2229//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2229//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2229//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2229//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2229//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13399831" author="zhihyu@ebaysf.com" created="Sat, 23 Jun 2012 04:23:18 +0000"  >&lt;p&gt;Patch for 0.94&lt;/p&gt;</comment>
                            <comment id="13399832" author="zhihyu@ebaysf.com" created="Sat, 23 Jun 2012 04:26:42 +0000"  >&lt;p&gt;Integrated to 0.94 and trunk.&lt;/p&gt;

&lt;p&gt;Thanks for the patch, Aditya.&lt;/p&gt;

&lt;p&gt;Thanks for the review, Jon and Jimmy.&lt;/p&gt;</comment>
                            <comment id="13399833" author="hadoopqa" created="Sat, 23 Jun 2012 04:33:13 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12533163/6236-94.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12533163/6236-94.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2232//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2232//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13399837" author="zhihyu@ebaysf.com" created="Sat, 23 Jun 2012 04:44:42 +0000"  >&lt;p&gt;Addendum adds -sidelineDir option to hbck&lt;/p&gt;</comment>
                            <comment id="13399841" author="hudson" created="Sat, 23 Jun 2012 05:47:24 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #277 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/277/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/277/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6236&quot; title=&quot;Offline meta repair fails if the HBase base mount point is on a different cluster/volume than its parent in a ViewFS or similar FS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6236&quot;&gt;&lt;del&gt;HBASE-6236&lt;/del&gt;&lt;/a&gt; Addendum adds -sidelineDir option to hbck (Aditya) (Revision 1353066)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6236&quot; title=&quot;Offline meta repair fails if the HBase base mount point is on a different cluster/volume than its parent in a ViewFS or similar FS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6236&quot;&gt;&lt;del&gt;HBASE-6236&lt;/del&gt;&lt;/a&gt; Offline meta repair fails if the HBase base mount point is on a different cluster/volume than its parent in a ViewFS or similar FS (Aditya) (Revision 1353064)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/util/HBaseFsck.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/util/hbck/OfflineMetaRepair.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/util/HBaseFsck.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/util/hbck/OfflineMetaRepair.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13399842" author="hudson" created="Sat, 23 Jun 2012 05:48:37 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3063 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3063/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3063/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6236&quot; title=&quot;Offline meta repair fails if the HBase base mount point is on a different cluster/volume than its parent in a ViewFS or similar FS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6236&quot;&gt;&lt;del&gt;HBASE-6236&lt;/del&gt;&lt;/a&gt; Offline meta repair fails if the HBase base mount point is on a different cluster/volume than its parent in a ViewFS or sim&lt;br/&gt;
ilar FS (Aditya) (Revision 1353065)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-common/src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/util/HBaseFsck.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/util/hbck/OfflineMetaRepair.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13399920" author="hudson" created="Sat, 23 Jun 2012 11:46:32 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #66 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/66/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/66/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6236&quot; title=&quot;Offline meta repair fails if the HBase base mount point is on a different cluster/volume than its parent in a ViewFS or similar FS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6236&quot;&gt;&lt;del&gt;HBASE-6236&lt;/del&gt;&lt;/a&gt; Offline meta repair fails if the HBase base mount point is on a different cluster/volume than its parent in a ViewFS or sim&lt;br/&gt;
ilar FS (Aditya) (Revision 1353065)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-common/src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/util/HBaseFsck.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/util/hbck/OfflineMetaRepair.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13400035" author="hudson" created="Sat, 23 Jun 2012 18:23:14 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #37 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/37/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/37/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6236&quot; title=&quot;Offline meta repair fails if the HBase base mount point is on a different cluster/volume than its parent in a ViewFS or similar FS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6236&quot;&gt;&lt;del&gt;HBASE-6236&lt;/del&gt;&lt;/a&gt; Addendum adds -sidelineDir option to hbck (Aditya) (Revision 1353066)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6236&quot; title=&quot;Offline meta repair fails if the HBase base mount point is on a different cluster/volume than its parent in a ViewFS or similar FS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6236&quot;&gt;&lt;del&gt;HBASE-6236&lt;/del&gt;&lt;/a&gt; Offline meta repair fails if the HBase base mount point is on a different cluster/volume than its parent in a ViewFS or similar FS (Aditya) (Revision 1353064)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6236&quot; title=&quot;Offline meta repair fails if the HBase base mount point is on a different cluster/volume than its parent in a ViewFS or similar FS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6236&quot;&gt;&lt;del&gt;HBASE-6236&lt;/del&gt;&lt;/a&gt; revert upon Jimmy&apos;s request. (Revision 1353014)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6236&quot; title=&quot;Offline meta repair fails if the HBase base mount point is on a different cluster/volume than its parent in a ViewFS or similar FS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6236&quot;&gt;&lt;del&gt;HBASE-6236&lt;/del&gt;&lt;/a&gt; Offline meta repair fails if the HBase base mount point is on a different cluster/volume than its parent in a ViewFS or similar FS (Aditya) (Revision 1353012)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/util/HBaseFsck.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/util/hbck/OfflineMetaRepair.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/util/HBaseFsck.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/util/hbck/OfflineMetaRepair.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/util/HBaseFsck.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/util/hbck/OfflineMetaRepair.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/util/HBaseFsck.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/util/hbck/OfflineMetaRepair.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12533167" name="6236-94.addendum" size="3978" author="zhihyu@ebaysf.com" created="Sat, 23 Jun 2012 04:44:42 +0000"/>
                            <attachment id="12533163" name="6236-94.txt" size="6660" author="zhihyu@ebaysf.com" created="Sat, 23 Jun 2012 04:23:18 +0000"/>
                            <attachment id="12532987" name="6236_trunk.patch" size="4670" author="zhihyu@ebaysf.com" created="Fri, 22 Jun 2012 02:02:18 +0000"/>
                            <attachment id="12532967" name="HBASE-6236_94.patch" size="4574" author="adityakishore" created="Thu, 21 Jun 2012 23:34:59 +0000"/>
                            <attachment id="12533142" name="HBASE-6236_trunk.patch" size="8501" author="adityakishore" created="Sat, 23 Jun 2012 00:22:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 19 Jun 2012 05:22:29 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>241928</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 25 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02gvb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12334</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>-sidelineDir option has been added to both hbck and OfflineMetaRepair.&lt;br/&gt;
It allows specification of hdfs directory where offlined data is stored.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>