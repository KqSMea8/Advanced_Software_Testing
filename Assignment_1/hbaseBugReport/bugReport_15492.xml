<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 21:04:09 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-15492/HBASE-15492.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-15492] Memory usage optimizations</title>
                <link>https://issues.apache.org/jira/browse/HBASE-15492</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;This is master ticket for all memory optimization tasks.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12951819">HBASE-15492</key>
            <summary>Memory usage optimizations</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="vrodionov">Vladimir Rodionov</assignee>
                                    <reporter username="vrodionov">Vladimir Rodionov</reporter>
                        <labels>
                    </labels>
                <created>Sun, 20 Mar 2016 18:30:12 +0000</created>
                <updated>Sat, 26 Mar 2016 20:48:15 +0000</updated>
                                            <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>12</watches>
                                                                                                            <comments>
                            <comment id="15205144" author="vrodionov" created="Mon, 21 Mar 2016 21:09:06 +0000"  >&lt;p&gt;Test case I am running:&lt;/p&gt;

&lt;p&gt;Client creates Put with 16 bytes keys, single cell, value is 8 bytes. It uses BufferedMutator class, batch size is 1000 operations. &lt;br/&gt;
Server has single region. Test inserts 100M records. 5 minutes of first execution is recorded with Flight Recorder. I minimized object creation in a test case itself.&lt;/p&gt;

&lt;p&gt;Current baseline includes &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15479&quot; title=&quot;No more garbage or beware of autoboxing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15479&quot;&gt;&lt;del&gt;HBASE-15479&lt;/del&gt;&lt;/a&gt; and was attached to JIRA&lt;/p&gt;

</comment>
                            <comment id="15205165" author="vrodionov" created="Mon, 21 Mar 2016 21:16:15 +0000"  >&lt;p&gt;The whole test execution time for &lt;del&gt;baseline&lt;/del&gt; is 353581ms.&lt;/p&gt;</comment>
                            <comment id="15205285" author="vrodionov" created="Mon, 21 Mar 2016 22:22:02 +0000"  >&lt;p&gt;Attached per-&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15479&quot; title=&quot;No more garbage or beware of autoboxing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15479&quot;&gt;&lt;del&gt;HBASE-15479&lt;/del&gt;&lt;/a&gt; jfr.&lt;/p&gt;

&lt;p&gt;Although there is no evident performance boost, one can see, that allocation rate dropped from 1GB/sec to 715MB/sec and number of young gen GC events dropped from 360 to 243. There is increase in old gen GC though, but this is 5 minutes run, synthetic test, with default Java Garbage collector.&lt;/p&gt;</comment>
                            <comment id="15205314" author="enis" created="Mon, 21 Mar 2016 22:46:04 +0000"  >&lt;p&gt;I think it is worth pointing out that there is no RPC layer. This is single region being hosted and queried by the same JVM right? &lt;/p&gt;</comment>
                            <comment id="15205348" author="vrodionov" created="Mon, 21 Mar 2016 23:23:59 +0000"  >&lt;p&gt;No, there is RPC layer. This is end-to-end test Client-Server, within a single JVM.&lt;/p&gt;</comment>
                            <comment id="15205810" author="vrodionov" created="Tue, 22 Mar 2016 05:11:31 +0000"  >&lt;p&gt;Applied 4 patches on top of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15479&quot; title=&quot;No more garbage or beware of autoboxing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15479&quot;&gt;&lt;del&gt;HBASE-15479&lt;/del&gt;&lt;/a&gt;: &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15493&quot; title=&quot;Default ArrayList size may not be optimal for Mutation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15493&quot;&gt;HBASE-15493&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15491&quot; title=&quot;Reuse byte buffers in AsyncRpcClient&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15491&quot;&gt;HBASE-15491&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15501&quot; title=&quot;MultiAction.add creates unnecessary temporary objects&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15501&quot;&gt;HBASE-15501&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15512&quot; title=&quot;Avoid cell allocation on Store.add(Cell)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15512&quot;&gt;HBASE-15512&lt;/a&gt;. Set  &lt;b&gt;hbase.hregion.memstore.chunkpool.maxsize=0.4&lt;/b&gt; (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15513&quot; title=&quot;hbase.hregion.memstore.chunkpool.maxsize is 0.0 by default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15513&quot;&gt;&lt;del&gt;HBASE-15513&lt;/del&gt;&lt;/a&gt;). See attached 5patches.jfr.&lt;/p&gt;

&lt;p&gt;Test run time 340 sec (down from 354 sec pre-&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15479&quot; title=&quot;No more garbage or beware of autoboxing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15479&quot;&gt;&lt;del&gt;HBASE-15479&lt;/del&gt;&lt;/a&gt;)&lt;br/&gt;
Total # of GC in young: 189 ( down from 360)&lt;br/&gt;
Total # of GC in old: 4 (down from 8)&lt;/p&gt;

&lt;p&gt;Total time spent in GC: 6.7sec (down from 15 sec)&lt;/p&gt;

&lt;p&gt;Averages and max GC times are also much better.&lt;/p&gt;

&lt;p&gt;Total Allocation rate (combined TLAB + Old space) dropped from 1084MB/s to 704MB/sec (in reality it is even less because it reflects increased throughput). &lt;/p&gt;</comment>
                            <comment id="15205819" author="vrodionov" created="Tue, 22 Mar 2016 05:22:10 +0000"  >&lt;p&gt;Forgot to mention ...&lt;/p&gt;

&lt;p&gt;protobuf RPC serialization/deserialization is the major heap polluter now on both: client and server ( &amp;gt;&amp;gt; 50%). &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12951348">HBASE-15479</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12952284">HBASE-15513</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12952263">HBASE-15509</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12952268">HBASE-15510</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12952300">HBASE-15514</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12953787">HBASE-15542</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12951737">HBASE-15491</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12951935">HBASE-15493</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12952123">HBASE-15501</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12952195">HBASE-15506</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12952279">HBASE-15512</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12794697" name="5Patches.jfr" size="4433477" author="vrodionov" created="Tue, 22 Mar 2016 05:00:26 +0000"/>
                            <attachment id="12794609" name="baseline.jfr" size="4931718" author="vrodionov" created="Mon, 21 Mar 2016 21:09:34 +0000"/>
                            <attachment id="12794620" name="pre-HBASE-15479.jfr" size="5615579" author="vrodionov" created="Mon, 21 Mar 2016 22:22:02 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12951348">HBASE-15479</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 21 Mar 2016 22:46:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            38 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2uxlj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>