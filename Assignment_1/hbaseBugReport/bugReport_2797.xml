<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:04:51 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-2797/HBASE-2797.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-2797] Another NPE in ReadWriteConsistencyControl</title>
                <link>https://issues.apache.org/jira/browse/HBASE-2797</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;This occurred on a cluster with 46 slaves, running a couple MR jobs.  One doing heavy writes copying everything from one table to a new table with a different schema.  After one regionserver went down, about 40 of them died within an hour before it was caught and the jobs stopped.  Let me know if any other piece of context would be particularly helpful.&lt;/p&gt;

&lt;p&gt;This exception appears in the .out file:&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;regionserver/192.168.41.2:60020&quot; java.lang.NullPointerException&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.ReadWriteConsistencyControl.getThreadReadPoint(ReadWriteConsistencyControl.java:40)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.MemStore$MemStoreScanner.getNext(MemStore.java:532)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.MemStore$MemStoreScanner.seek(MemStore.java:558)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.StoreScanner.reseek(StoreScanner.java:320)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.StoreScanner.checkReseek(StoreScanner.java:306)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.StoreScanner.peek(StoreScanner.java:143)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.KeyValueHeap$KVScannerComparator.compare(KeyValueHeap.java:127)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.KeyValueHeap$KVScannerComparator.compare(KeyValueHeap.java:117)&lt;br/&gt;
        at java.util.PriorityQueue.siftDownUsingComparator(PriorityQueue.java:644)&lt;br/&gt;
        at java.util.PriorityQueue.siftDown(PriorityQueue.java:612)&lt;br/&gt;
        at java.util.PriorityQueue.poll(PriorityQueue.java:523)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.KeyValueHeap.close(KeyValueHeap.java:151)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegion$RegionScanner.close(HRegion.java:1971)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegionServer.closeAllRegions(HRegionServer.java:1610)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegionServer.run(HRegionServer.java:621)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:619)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12467983">HBASE-2797</key>
            <summary>Another NPE in ReadWriteConsistencyControl</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ryanobjc">ryan rawson</assignee>
                                    <reporter username="davelatham">Dave Latham</reporter>
                        <labels>
                    </labels>
                <created>Sun, 27 Jun 2010 03:42:25 +0000</created>
                <updated>Fri, 12 Oct 2012 06:16:14 +0000</updated>
                            <resolved>Tue, 13 Jul 2010 19:07:53 +0000</resolved>
                                    <version>0.20.5</version>
                                    <fixVersion>0.20.6</fixVersion>
                    <fixVersion>0.90.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12882914" author="stack" created="Sun, 27 Jun 2010 04:33:54 +0000"  >&lt;p&gt;Ryan, can you take a look at this one boss?&lt;/p&gt;</comment>
                            <comment id="12883548" author="davelatham" created="Tue, 29 Jun 2010 13:37:25 +0000"  >&lt;p&gt;Also getting them with the similar stack trace:&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;regionserver/192.168.41.19:60020.leaseChecker&quot; java.lang.NullPointerException&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.ReadWriteConsistencyControl.getThreadReadPoint(ReadWriteConsistencyControl.java:40)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.MemStore$MemStoreScanner.getNext(MemStore.java:532)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.MemStore$MemStoreScanner.seek(MemStore.java:558)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.StoreScanner.reseek(StoreScanner.java:320)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.StoreScanner.checkReseek(StoreScanner.java:306)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.StoreScanner.peek(StoreScanner.java:143)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.KeyValueHeap$KVScannerComparator.compare(KeyValueHeap.java:127)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.KeyValueHeap$KVScannerComparator.compare(KeyValueHeap.java:117)&lt;br/&gt;
        at java.util.PriorityQueue.siftDownUsingComparator(PriorityQueue.java:644)&lt;br/&gt;
        at java.util.PriorityQueue.siftDown(PriorityQueue.java:612)&lt;br/&gt;
        at java.util.PriorityQueue.poll(PriorityQueue.java:523)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.KeyValueHeap.close(KeyValueHeap.java:151)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegion$RegionScanner.close(HRegion.java:1971)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegionServer$ScannerListener.leaseExpired(HRegionServer.java:1962)&lt;br/&gt;
        at org.apache.hadoop.hbase.Leases.run(Leases.java:98)&lt;/p&gt;</comment>
                            <comment id="12885743" author="pranavkhaitan" created="Tue, 6 Jul 2010 23:44:11 +0000"  >&lt;p&gt;Got a similar NPE error while running a test for HBase-2265. Wrote a simple function which always replicates the NPE error so that it is easy to detect the cause.&lt;/p&gt;

&lt;p&gt;java.lang.NullPointerException&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.ReadWriteConsistencyControl.getThreadReadPoint(ReadWriteConsistencyControl.java:45)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.MemStore$MemStoreScanner.getNext(MemStore.java:532)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.MemStore$MemStoreScanner.seek(MemStore.java:559)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.StoreScanner.&amp;lt;init&amp;gt;(StoreScanner.java:73)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.TestStore.testDebugNPE(TestStore.java:280)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at junit.framework.TestCase.runTest(TestCase.java:168)&lt;br/&gt;
	at junit.framework.TestCase.runBare(TestCase.java:134)&lt;br/&gt;
	at junit.framework.TestResult$1.protect(TestResult.java:110)&lt;br/&gt;
	at junit.framework.TestResult.runProtected(TestResult.java:128)&lt;br/&gt;
	at junit.framework.TestResult.run(TestResult.java:113)&lt;br/&gt;
	at junit.framework.TestCase.run(TestCase.java:124)&lt;br/&gt;
	at junit.framework.TestSuite.runTest(TestSuite.java:232)&lt;br/&gt;
	at junit.framework.TestSuite.run(TestSuite.java:227)&lt;br/&gt;
	at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:83)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:46)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)&lt;/p&gt;

</comment>
                            <comment id="12886028" author="jdcryans" created="Wed, 7 Jul 2010 18:49:56 +0000"  >&lt;p&gt;Pranav,&lt;/p&gt;

&lt;p&gt;Ryan posted a patch for review here &lt;a href=&quot;http://review.hbase.org/r/241/diff/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/241/diff/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Can you try your test with that patch on? If it works, can you +1 the patch?&lt;/p&gt;</comment>
                            <comment id="12886142" author="hbasereviewboard" created="Wed, 7 Jul 2010 22:54:03 +0000"  >&lt;p&gt;Message from: &quot;Ryan Rawson&quot; &amp;lt;ryanobjc@gmail.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.hbase.org/r/241/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/241/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2010-07-07 15:49:39.980588)&lt;/p&gt;


&lt;p&gt;Review request for hbase.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2797&quot; title=&quot;Another NPE in ReadWriteConsistencyControl&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2797&quot;&gt;&lt;del&gt;HBASE-2797&lt;/del&gt;&lt;/a&gt; another NPE in ReadWriteConsistencyControl&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2797&quot; title=&quot;Another NPE in ReadWriteConsistencyControl&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2797&quot;&gt;&lt;del&gt;HBASE-2797&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;http://issues.apache.org/jira/browse/HBASE-2797&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/HBASE-2797&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  src/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java 737d6af &lt;br/&gt;
  src/test/org/apache/hadoop/hbase/regionserver/TestStoreScanner.java 1a89d65 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;http://review.hbase.org/r/241/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/241/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Ryan&lt;/p&gt;

</comment>
                            <comment id="12886149" author="pranavkhaitan" created="Wed, 7 Jul 2010 23:10:25 +0000"  >&lt;p&gt;This patch doesn&apos;t fix the error I was getting. I see that the fix was only in the peek function. However, the bug I am getting doesnt even touch the peek function. Just instantiating StoreScanner() gives that error. It is possible that the instantiation is not done in the right context but even then I would not expect this kind of error. I have attached a diff file which contains the function I wrote for this bug (its just 4 lines)&lt;/p&gt;</comment>
                            <comment id="12887936" author="ryanobjc" created="Tue, 13 Jul 2010 19:07:53 +0000"  >&lt;p&gt;committed to trunk and branch&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12448835" name="testDebugNPE.diff" size="1222" author="pranavkhaitan" created="Tue, 6 Jul 2010 23:44:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 27 Jun 2010 04:33:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26473</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 23 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08sbb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>49187</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>