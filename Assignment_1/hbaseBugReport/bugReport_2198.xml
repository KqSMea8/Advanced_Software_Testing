<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:59:47 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-2198/HBASE-2198.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-2198] SingleColumnValueFilter should be able to find the column value even when it&apos;s not specifically added as input on the scan.</title>
                <link>https://issues.apache.org/jira/browse/HBASE-2198</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Whenever applying a SingleColumnValueFilter to a Scan that has specific columns as it&apos;s input (but not the column to be checked in the Filter), the Filter won&apos;t be able to find the value that it should be checking.&lt;/p&gt;

&lt;p&gt;For example, let&apos;s say we want to do a scan, but we only need COLUMN_2 columns. Furthermore, we only want rows that have a specific value for COLUMN_1. Using the following code won&apos;t do the trick:&lt;br/&gt;
Scan scan = new Scan();&lt;br/&gt;
scan.addColumn(FAMILY, COLUMN_2);&lt;br/&gt;
SingleColumnValueFilter filter = new SingleColumnValueFilter(FAMILY, COLUMN_1, CompareOp.EQUAL, TEST_VALUE);&lt;br/&gt;
filter.setFilterIfMissing(true);&lt;br/&gt;
scan.setFilter(filter);&lt;/p&gt;

&lt;p&gt;However, we can make it work when specifically also adding the tested column as an input column:&lt;br/&gt;
scan.addColumn(FAMILY, COLUMN_1);&lt;/p&gt;

&lt;p&gt;Is this by design? Personally I think that adding a filter with columns tests should not bother the user to check that it&apos;s also on the input. It is prone to bugs.&lt;/p&gt;

&lt;p&gt;I suggest either one of 3 solutions:&lt;br/&gt;
A) Update the Javadoc of Filter / SingleColumnValueFilter / possibly other affecting Filters to indicate this behaviour.&lt;br/&gt;
B) Fix the problem client-side (i.e. prior to using a Scan object, it should check that the corresponding inputs for filters are set, but only if the user has configured specific input columns in the first place). This is perhaps inefficient performance-wise, because unnecessary inputs columns are returned to the user. (Inputs that would only have to be used for filtering).&lt;br/&gt;
C) Fix the problem server-side. This would me most efficient, because the input column would only be read to do filtering at the regionserver.&lt;/p&gt;

&lt;p&gt;What do you think?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12455747">HBASE-2198</key>
            <summary>SingleColumnValueFilter should be able to find the column value even when it&apos;s not specifically added as input on the scan.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ferdy.g">Ferdy Galema</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Feb 2010 10:14:56 +0000</created>
                <updated>Fri, 12 Oct 2012 06:14:59 +0000</updated>
                            <resolved>Wed, 10 Feb 2010 00:29:59 +0000</resolved>
                                    <version>0.20.3</version>
                                    <fixVersion>0.20.4</fixVersion>
                    <fixVersion>0.90.0</fixVersion>
                                    <component>Filters</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12831599" author="stack" created="Tue, 9 Feb 2010 19:16:12 +0000"  >&lt;p&gt;Its by design.  High-level in the Scan object you say what you are interested in and then the filter works against the Scan specification.&lt;/p&gt;

&lt;p&gt;I like your suggestion A above.  Can you make a patch for that?&lt;/p&gt;

&lt;p&gt;I think you need a new filter, one that allows filtering against one set of columns but only returns columns out of a different set of columns if a row passes a filter.&lt;/p&gt;</comment>
                            <comment id="12831689" author="ferdy.g" created="Tue, 9 Feb 2010 21:54:30 +0000"  >&lt;p&gt;Allright. I guess you&apos;re right about it requiring a new sort of filter. Nevertheless, it could be accomplished by adding a method on SingleColumnValueFilter, something like skipTestedColumn(boolean) that defaults to &apos;false&apos;.&lt;/p&gt;

&lt;p&gt;I will attach a patch for suggestion A. (I think this should cover it, feel free to modify at your likings).&lt;/p&gt;</comment>
                            <comment id="12831778" author="stack" created="Wed, 10 Feb 2010 00:29:59 +0000"  >&lt;p&gt;Thanks for the patch.  I committed it and will close this issue.  I&apos;m grand with you opening another one to add the above as long as you think it doesn&apos;t make the filter too complicated, hard to understand (If it overly-complicates the filter, make a new one or subclass?).&lt;/p&gt;</comment>
                            <comment id="12831990" author="ferdy.g" created="Wed, 10 Feb 2010 14:00:13 +0000"  >&lt;p&gt;Created a new issue for the new Filter:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2211&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-2211&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12435351" name="HBASE-2198.patch" size="1211" author="ferdy.g" created="Tue, 9 Feb 2010 21:54:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 9 Feb 2010 19:16:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32452</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 45 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08srr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>49261</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>