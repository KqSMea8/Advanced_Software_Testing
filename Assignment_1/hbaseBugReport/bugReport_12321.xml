<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:31:53 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-12321/HBASE-12321.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-12321] Delete#deleteColumn seems not to work with bulkload</title>
                <link>https://issues.apache.org/jira/browse/HBASE-12321</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;When using call to &lt;tt&gt;Delete#deleteColumn(byte[], byte[])&lt;/tt&gt; to produce KeyValues that are subsequently written to HFileOutputFormat and bulk loaded into HBase, the Delete seems to be ignored. The reason for this is likely to be the missing (HConstants.LATEST_TIMESTAMP) timestamp in the KeyValue with type &lt;tt&gt;KeyValue.Type.Delete&lt;/tt&gt;. I think the RegionServer than cannot delete the contents of the column due to mismatch in the timestamp.&lt;/p&gt;

&lt;p&gt;When using &lt;tt&gt;Delete#deleteColumns&lt;/tt&gt; everything works fine, because of different type &lt;tt&gt;KeyValue.Type.DeleteColumn&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12749770">HBASE-12321</key>
            <summary>Delete#deleteColumn seems not to work with bulkload</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="je.ik">Jan Lukavsky</reporter>
                        <labels>
                    </labels>
                <created>Wed, 22 Oct 2014 13:21:53 +0000</created>
                <updated>Wed, 22 Oct 2014 14:36:15 +0000</updated>
                                            <version>0.94.6</version>
                                                    <component>Deletes</component>
                    <component>HFile</component>
                    <component>mapreduce</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="14179892" author="je.ik" created="Wed, 22 Oct 2014 13:28:09 +0000"  >&lt;p&gt;I can think of two solutions:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;in the RecordWriter let the user know he does something that is not supposed to work, or&lt;/li&gt;
	&lt;li&gt;in the RegionServer make the Delete to delete the same data as would a call to &lt;tt&gt;HTable#delete&lt;/tt&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;The second solution seems tricky, because it would require to know &lt;b&gt;when&lt;/b&gt; was created the Delete and also &lt;b&gt;when&lt;/b&gt; was issued each Put to HBase, because, it is possible to write data with different stamps then &apos;now&apos;.&lt;/p&gt;

&lt;p&gt;The solution in RecordWriter can include either incrementing a counter or throwing an exception.&lt;/p&gt;

&lt;p&gt;What would be a better solution? Or is there any third option?&lt;/p&gt;
</comment>
                            <comment id="14179933" author="anoop.hbase" created="Wed, 22 Oct 2014 14:08:22 +0000"  >&lt;p&gt;Delete#deleteColumn(byte[], byte[])   is supposed to delete one version of the column and in case of the normal HTable API call, the HRS get the latest column and get its ts and assign to this delete KV. In case of bulk load can you put this ts?  Are you really want to delete an exact version or you want to delete a rk:column value(s)?  &lt;/p&gt;</comment>
                            <comment id="14179936" author="je.ik" created="Wed, 22 Oct 2014 14:14:04 +0000"  >&lt;p&gt;Basically, I want to delete the lastest version of the column. Don&apos;t get me wrong, I &lt;b&gt;know&lt;/b&gt; that the usage is wrong on the client side (correct usage is to use &lt;tt&gt;Delete#deleteColumns&lt;/tt&gt;). What I see as a problem is that everything seems to be working just fine, except for the fact, that no data gets deleted. The combination of KeyValue.Type.Delete, HConstants.LATEST_TIMESTAMP and bulk load is IMHO wrong in all cases and the client should be notfied about it.&lt;/p&gt;</comment>
                            <comment id="14179946" author="yuzhihong@gmail.com" created="Wed, 22 Oct 2014 14:23:40 +0000"  >&lt;blockquote&gt;&lt;p&gt;in the RecordWriter let the user know he does something that is not supposed to work&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Looks like the above approach is better compared to the other one.&lt;/p&gt;</comment>
                            <comment id="14179964" author="je.ik" created="Wed, 22 Oct 2014 14:36:15 +0000"  >&lt;p&gt;Yes, it seems better to me, too. And what should the record reader do? Throw exception, increment counter, or something else? I&apos;d prefer throwing an exception, but this might break some client code (which is probably already broken). On the other hand, throwing exception is more explicit. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 22 Oct 2014 14:08:22 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 8 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i21g3r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>