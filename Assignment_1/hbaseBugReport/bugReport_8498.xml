<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:55:49 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-8498/HBASE-8498.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-8498] PB WAL reading is broken due to some partial reads</title>
                <link>https://issues.apache.org/jira/browse/HBASE-8498</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;From dev list, there&apos;s IOException during log splitting on hadoop-2.0.3. We need to understand whether this is caused by EOF, and ignore it if it is.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12646282">HBASE-8498</key>
            <summary>PB WAL reading is broken due to some partial reads</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sershe">Sergey Shelukhin</assignee>
                                    <reporter username="sershe">Sergey Shelukhin</reporter>
                        <labels>
                    </labels>
                <created>Mon, 6 May 2013 20:09:32 +0000</created>
                <updated>Fri, 10 May 2013 03:56:09 +0000</updated>
                            <resolved>Thu, 9 May 2013 20:42:50 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                <comments>
                            <comment id="13650213" author="sershe" created="Mon, 6 May 2013 23:11:06 +0000"  >&lt;p&gt;Add logging around EOF-like condition, and stream length check to BaseDecorder&lt;/p&gt;</comment>
                            <comment id="13652126" author="sershe" created="Wed, 8 May 2013 17:55:56 +0000"  >&lt;p&gt;same patch to kick QA&lt;/p&gt;</comment>
                            <comment id="13652127" author="sershe" created="Wed, 8 May 2013 17:56:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ram_krish&quot; class=&quot;user-hover&quot; rel=&quot;ram_krish&quot;&gt;ramkrishna.s.vasudevan&lt;/a&gt; do you have an update? &lt;br/&gt;
I will make this critical given the potential impact&lt;/p&gt;</comment>
                            <comment id="13652129" author="sershe" created="Wed, 8 May 2013 17:57:44 +0000"  >&lt;p&gt;Oh, nevermind, I see dev alias response.&lt;/p&gt;</comment>
                            <comment id="13652132" author="ram_krish" created="Wed, 8 May 2013 17:59:04 +0000"  >&lt;p&gt;You want me to paste that respone over here?  Still digging in Sergey.  May be need one more day to spend some time on it.&lt;/p&gt;</comment>
                            <comment id="13652135" author="ram_krish" created="Wed, 8 May 2013 18:00:05 +0000"  >&lt;p&gt;May be we can raise a new JIRA and add the the appropriate fix in that JIRA once we identify the problem and leave this JIRA for log improvements alone?&lt;br/&gt;
What do you feel?&lt;/p&gt;</comment>
                            <comment id="13652203" author="stack" created="Wed, 8 May 2013 18:40:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sershe&quot; class=&quot;user-hover&quot; rel=&quot;sershe&quot;&gt;Sergey Shelukhin&lt;/a&gt;&lt;br/&gt;
You might have to manually schedule your patch.&lt;/p&gt;

&lt;p&gt;Go to &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/&lt;/a&gt;.  Login with your apache id and then click &apos;build now&apos;.  It will ask for number of patch to run.  Type in 8498 (not hbase-8498).  I just scheduled one for you.&lt;/p&gt;

&lt;p&gt;Should below&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      LOG.error(&lt;span class=&quot;code-quote&quot;&gt;&quot;Partial cell read caused by EOF: &quot;&lt;/span&gt; + ioEx);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;be&lt;/p&gt;

&lt;p&gt;+      LOG.error(&quot;Partial cell read&quot;, ioEx);&lt;/p&gt;

&lt;p&gt;Sticking a trace level logging of the exception in here could save a life one day:&lt;/p&gt;

&lt;p&gt;+        } catch (Throwable t) &lt;/p&gt;
{
+        }

&lt;p&gt;+1 on trying patch.&lt;/p&gt;
</comment>
                            <comment id="13652232" author="sershe" created="Wed, 8 May 2013 19:02:31 +0000"  >&lt;p&gt;Patch with readFully, not final but should work.&lt;br/&gt;
Need to see where else we might use read, probably...&lt;/p&gt;</comment>
                            <comment id="13652362" author="hadoopqa" created="Wed, 8 May 2013 21:10:12 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12582342/HBASE-8498-v1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12582342/HBASE-8498-v1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5601//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5601//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5601//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5601//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5601//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5601//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5601//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5601//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5601//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5601//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5601//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5601//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5601//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5601//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5601//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5601//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5601//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5601//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5601//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5601//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13652364" author="sershe" created="Wed, 8 May 2013 21:12:06 +0000"  >&lt;p&gt;Here&apos;s a proper patch. It basically does what readFully does, except for distinguishing two cases of EOF.&lt;/p&gt;</comment>
                            <comment id="13652494" author="jxiang" created="Wed, 8 May 2013 23:08:11 +0000"  >&lt;p&gt;Patch v2 works on my cluster. Now log splitting can move ahead.&lt;/p&gt;</comment>
                            <comment id="13652496" author="jxiang" created="Wed, 8 May 2013 23:11:53 +0000"  >&lt;p&gt;In reading the int, should we also use IOUtils.readFully?&lt;/p&gt;</comment>
                            <comment id="13652509" author="yuzhihong@gmail.com" created="Wed, 8 May 2013 23:29:35 +0000"  >&lt;blockquote&gt;&lt;p&gt;It basically does what readFully does&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;You chose the above approach because you don&apos;t want to use (instanceof FSDataInputStream) ?&lt;/p&gt;</comment>
                            <comment id="13652529" author="stack" created="Wed, 8 May 2013 23:50:12 +0000"  >&lt;p&gt;+1 on patch.&lt;/p&gt;

&lt;p&gt;On commit change this?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      LOG.error(&lt;span class=&quot;code-quote&quot;&gt;&quot;Partial cell read caused by EOF: &quot;&lt;/span&gt; + ioEx);
+      &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; EOFException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Partial cell read&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;to....&lt;/p&gt;

&lt;p&gt;LOG.error(&quot;Partial cell read caused by EOF&quot;, ioEx);&lt;br/&gt;
throw new EOFException(&quot;Partial cell read&quot;, ioEx);&lt;/p&gt;</comment>
                            <comment id="13652552" author="sershe" created="Thu, 9 May 2013 00:09:46 +0000"  >&lt;blockquote&gt;&lt;p&gt;In reading the int, should we also use IOUtils.readFully? &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Not doing that currently to distinguish good eof (end of records?) from bad EOF.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;You chose the above approach because you don&apos;t want to use (instanceof FSDataInputStream) ?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;It&apos;s more correct this way given InputStream javadoc - InputStream guarantees to read some bytes, not the requested amount, so that could be true for any implementation.&lt;/p&gt;</comment>
                            <comment id="13652553" author="sershe" created="Thu, 9 May 2013 00:10:22 +0000"  >&lt;p&gt;I will make the above change, run QA locally and commit later today-tomorrow if there are no objections.&lt;/p&gt;</comment>
                            <comment id="13652555" author="jxiang" created="Thu, 9 May 2013 00:12:49 +0000"  >&lt;p&gt;+1.  It fixed my cluster. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13652559" author="yuzhihong@gmail.com" created="Thu, 9 May 2013 00:13:29 +0000"  >&lt;blockquote&gt;&lt;p&gt;run QA locally&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Attaching next patch should trigger QA run.&lt;/p&gt;</comment>
                            <comment id="13652566" author="sershe" created="Thu, 9 May 2013 00:18:58 +0000"  >&lt;p&gt;Just changed the log, and moved the error processing there to method&lt;/p&gt;</comment>
                            <comment id="13652577" author="yuzhihong@gmail.com" created="Thu, 9 May 2013 00:23:39 +0000"  >&lt;p&gt;nit:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+          &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; EOFException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Only read &quot;&lt;/span&gt; + actualCells); &lt;span class=&quot;code-comment&quot;&gt;// other info added in &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Include expectedCells in the exception message.&lt;br/&gt;
Can be done at commit.&lt;/p&gt;</comment>
                            <comment id="13652585" author="sershe" created="Thu, 9 May 2013 00:29:15 +0000"  >&lt;p&gt;it should be added in catch, which adds it anyway&lt;/p&gt;</comment>
                            <comment id="13652643" author="hadoopqa" created="Thu, 9 May 2013 01:33:34 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12582393/HBASE-8498-v4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12582393/HBASE-8498-v4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5611//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5611//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5611//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5611//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5611//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5611//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5611//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5611//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5611//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5611//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5611//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5611//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5611//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5611//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5611//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5611//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5611//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5611//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5611//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5611//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13652664" author="ram_krish" created="Thu, 9 May 2013 02:03:36 +0000"  >&lt;p&gt;Thnaks for the patch Sergey.  Using readFully was the option that me and Anoop were trying to do.&lt;br/&gt;
But why did using read() fail when we are using Protobuf WAL and not during the Sequential WAL.&lt;/p&gt;

&lt;p&gt;When you said Good EOF and Bad EOF what do you mean? Am not able to get the meaning of it? I can try out it my test cluster too. If it is working for Jimmy then its probably fine.&lt;/p&gt;</comment>
                            <comment id="13652711" author="ram_krish" created="Thu, 9 May 2013 03:37:57 +0000"  >&lt;p&gt;Tried applying the fix and the issue could not be reproduced.  &lt;br/&gt;
Anyother place needs this update of changing in.read() to a while loop as above so that we read as many bytes that we want?&lt;/p&gt;</comment>
                            <comment id="13652716" author="stack" created="Thu, 9 May 2013 03:48:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sershe&quot; class=&quot;user-hover&quot; rel=&quot;sershe&quot;&gt;Sergey Shelukhin&lt;/a&gt; Would life be easier if BaseDecoder took a DataInputStream rather than an InputStream?  It is InputStream because want to do the LowestCommonDenominator but seeing your messing w/ EOF and given this the first use of Codec backed by a real stream, maybe we should change it up from IS to DIS?&lt;/p&gt;</comment>
                            <comment id="13652717" author="anoop.hbase" created="Thu, 9 May 2013 03:50:37 +0000"  >&lt;p&gt;&amp;gt;But why did using read() fail when we are using Protobuf WAL and not during the Sequential WAL&lt;br/&gt;
In case of SequenceFileLogReader we make use of DataInputStream.readInt() which internally calls is.read 4 times (byte by byte) So it will guarentee to read 4 bytes (If not real EOF)&lt;/p&gt;

&lt;p&gt;In case of FSInputStream.read(byte[]) it may not fill the byte[] not only in real EOF.(This is what we have seen) Do there some clear documentation from HDFS on when all they will not read and fill the byte[]?&lt;br/&gt;
+1&lt;/p&gt;</comment>
                            <comment id="13652720" author="stack" created="Thu, 9 May 2013 03:59:40 +0000"  >&lt;p&gt;Having codec.decoder take an InputStream might be more primitive than we want.  It would not take much to go up a level to DataInputStream.  Here is a rough cut at it.  Opinions &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sershe&quot; class=&quot;user-hover&quot; rel=&quot;sershe&quot;&gt;Sergey Shelukhin&lt;/a&gt;?  Might have saved you some headache if you had this?&lt;/p&gt;</comment>
                            <comment id="13652721" author="hadoopqa" created="Thu, 9 May 2013 04:02:29 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12582420/dis.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12582420/dis.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5615//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5615//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13652728" author="hudson" created="Thu, 9 May 2013 04:26:44 +0000"  >&lt;p&gt;Integrated in hbase-0.95-on-hadoop2 #91 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95-on-hadoop2/91/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95-on-hadoop2/91/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8498&quot; title=&quot;PB WAL reading is broken due to some partial reads&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8498&quot;&gt;&lt;del&gt;HBASE-8498&lt;/del&gt;&lt;/a&gt; PB WAL reading is broken due to some partial reads (Revision 1480512)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
sershe : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-common/src/main/java/org/apache/hadoop/hbase/KeyValue.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-common/src/main/java/org/apache/hadoop/hbase/codec/BaseDecoder.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/ProtobufLogReader.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13652758" author="hudson" created="Thu, 9 May 2013 05:39:23 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #521 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/521/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/521/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8498&quot; title=&quot;PB WAL reading is broken due to some partial reads&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8498&quot;&gt;&lt;del&gt;HBASE-8498&lt;/del&gt;&lt;/a&gt; PB WAL reading is broken due to some partial reads (Revision 1480511)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
sershe : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-common/src/main/java/org/apache/hadoop/hbase/KeyValue.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-common/src/main/java/org/apache/hadoop/hbase/codec/BaseDecoder.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/ProtobufLogReader.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13652811" author="hudson" created="Thu, 9 May 2013 08:07:30 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #4105 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4105/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4105/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8498&quot; title=&quot;PB WAL reading is broken due to some partial reads&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8498&quot;&gt;&lt;del&gt;HBASE-8498&lt;/del&gt;&lt;/a&gt; PB WAL reading is broken due to some partial reads (Revision 1480511)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
sershe : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-common/src/main/java/org/apache/hadoop/hbase/KeyValue.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-common/src/main/java/org/apache/hadoop/hbase/codec/BaseDecoder.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/ProtobufLogReader.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13652828" author="hudson" created="Thu, 9 May 2013 09:15:47 +0000"  >&lt;p&gt;Integrated in hbase-0.95 #182 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95/182/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95/182/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8498&quot; title=&quot;PB WAL reading is broken due to some partial reads&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8498&quot;&gt;&lt;del&gt;HBASE-8498&lt;/del&gt;&lt;/a&gt; PB WAL reading is broken due to some partial reads (Revision 1480512)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
sershe : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-common/src/main/java/org/apache/hadoop/hbase/KeyValue.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-common/src/main/java/org/apache/hadoop/hbase/codec/BaseDecoder.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/ProtobufLogReader.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13653060" author="sershe" created="Thu, 9 May 2013 16:37:36 +0000"  >&lt;p&gt;1) Should it be in another JIRA? This is already in, I wanted to resolve.&lt;br/&gt;
2) I am +0 on the change itself. Not sure if it&apos;s sufficient reason to make the interface use more elaborate types. Maybe it is...&lt;br/&gt;
The code looks good although it doesn&apos;t apply &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;</comment>
                            <comment id="13653514" author="stack" created="Fri, 10 May 2013 03:56:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sershe&quot; class=&quot;user-hover&quot; rel=&quot;sershe&quot;&gt;Sergey Shelukhin&lt;/a&gt; Yeah, would be another JIRA.  I&apos;d say, let us keep this in the back of our minds and if we have a need to read/write ints, longs, floats, etc., then we can pull it in.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12646680">HBASE-8511</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12582327" name="HBASE-8498-v0.patch" size="6525" author="sershe" created="Wed, 8 May 2013 17:55:56 +0000"/>
                            <attachment id="12581991" name="HBASE-8498-v0.patch" size="6525" author="sershe" created="Mon, 6 May 2013 23:11:06 +0000"/>
                            <attachment id="12582342" name="HBASE-8498-v1.patch" size="8913" author="sershe" created="Wed, 8 May 2013 19:02:31 +0000"/>
                            <attachment id="12582363" name="HBASE-8498-v2.patch" size="8778" author="sershe" created="Wed, 8 May 2013 21:12:06 +0000"/>
                            <attachment id="12582393" name="HBASE-8498-v4.patch" size="8999" author="sershe" created="Thu, 9 May 2013 00:18:58 +0000"/>
                            <attachment id="12582420" name="dis.txt" size="10069" author="stack" created="Thu, 9 May 2013 03:59:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 8 May 2013 17:59:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>326640</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 32 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1kco7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>326985</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>