<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:53:43 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-8281/HBASE-8281.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-8281] Unassigned regions: dropped messages from Master to RS</title>
                <link>https://issues.apache.org/jira/browse/HBASE-8281</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;We have seen a couple of scenarios where transcient network issue between the RS and Master results in regions being unassigned (and staying unassigned) until someone intervenes manually with hbck -fix.&lt;/p&gt;

&lt;p&gt;The events occur as follows. &lt;/p&gt;

&lt;p&gt;RS checks in for a regionServerReport.&lt;br/&gt;
  Master wants to assign a region to the RS. Hence adds a MSG_REGION_OPEN msg to the return results, and marks the region as PENDING_OPEN.&lt;/p&gt;

&lt;p&gt;  The messages from the master to the RS is not delivered due to network error. Master does not do anything to revert the state changes.&lt;/p&gt;

&lt;p&gt;Network heals, and the RS is able to do regionServerReports in future; it is in good standing with the master. But, RS does not know that it has to open the region. Master thinks that the RS is going to open the region.&lt;/p&gt;

&lt;p&gt;Region remains unassigned until we intervene with hbck.&lt;/p&gt;


&lt;p&gt;Possible fix:&lt;br/&gt;
  I think it may be a mistake to unilaterally change the RegionState to pendingOpen once the master decides that it wants to send the message. Perhaps, we should create an intermediate state, where the master will keep sending the OPEN message to the RS until it acks. And, update the RegionState to PendingOpen only after the RS has acked.&lt;/p&gt;

&lt;p&gt;While this would fix the particular scenario in which the unassigned regions were caused. We might want to update all the Master-RS communication (even region closes?)to expect message failures, and wait for an ack before it updates the state in master.&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12641075">HBASE-8281</key>
            <summary>Unassigned regions: dropped messages from Master to RS</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="amitanand">Amitanand Aiyer</reporter>
                        <labels>
                    </labels>
                <created>Fri, 5 Apr 2013 17:39:46 +0000</created>
                <updated>Fri, 5 Apr 2013 17:43:05 +0000</updated>
                                            <version>0.89-fb</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13623837" author="amitanand" created="Fri, 5 Apr 2013 17:43:05 +0000"  >&lt;p&gt;afaik, the master code was majorly re written in 0.90. Not sure if this affects trunk as well.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>321491</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 37 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1jgx3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>321836</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>