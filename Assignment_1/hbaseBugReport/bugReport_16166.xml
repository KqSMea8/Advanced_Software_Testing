<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 21:11:02 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-16166/HBASE-16166.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-16166] Create a memstore impl that does not compact but creates pipelines and flushes all segments from pipeline</title>
                <link>https://issues.apache.org/jira/browse/HBASE-16166</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;A new memstore impl for the default cases, where we could create pipelines and then directly flush all the segments in pipelines. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12986141">HBASE-16166</key>
            <summary>Create a memstore impl that does not compact but creates pipelines and flushes all segments from pipeline</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12977487">HBASE-16003</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="ram_krish">ramkrishna.s.vasudevan</assignee>
                                    <reporter username="ram_krish">ramkrishna.s.vasudevan</reporter>
                        <labels>
                    </labels>
                <created>Fri, 1 Jul 2016 11:21:02 +0000</created>
                <updated>Mon, 11 Jul 2016 07:04:01 +0000</updated>
                                            <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="15358876" author="anoop.hbase" created="Fri, 1 Jul 2016 12:17:50 +0000"  >&lt;p&gt;+1 for the new way.  For a normal use case where we dont have duplicates and/or many immediate deletes, the in memory compaction may not help.  &lt;br/&gt;
In the existing CompactingMemstore impl, we can avoid this compaction with say a config also.&lt;br/&gt;
But the issue is, when we dont do this compaction, it is incorrect to just flush the tail of the pipeline alone while flush to disk.  We must flush all segments + active then.   If some way we can make this also configable this new memstore can be done in CompactingMemstore itself?&lt;br/&gt;
Or else it is a again a headache how to enable this memstore per table.&lt;br/&gt;
Any way as of now can u attach a patch as a new impl only?  I can also help to test.&lt;/p&gt;</comment>
                            <comment id="15359993" author="stack" created="Sat, 2 Jul 2016 05:24:33 +0000"  >&lt;p&gt;You fellows finding Segments are in the way when default case? What you seeing in terms of friction when the segments pipeline is running (I&apos;ve not tried it). Thanks.&lt;/p&gt;</comment>
                            <comment id="15370272" author="ram_krish" created="Mon, 11 Jul 2016 07:02:02 +0000"  >&lt;p&gt;This patch is based on trunk but on an internal branch. But overall this is how the changes will look like. I need to apply some refactoring and add some tests to update the new behaviour. Which I will do shortly. But planning to add this patch only after the latest &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14921&quot; title=&quot;Inmemory Compaction Optimizations; Segment Structure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14921&quot;&gt;&lt;del&gt;HBASE-14921&lt;/del&gt;&lt;/a&gt; patch gets committed. So that flattening also can be done. I have a patch for that but will add it later. &lt;/p&gt;</comment>
                            <comment id="15370277" author="ram_krish" created="Mon, 11 Jul 2016 07:04:01 +0000"  >&lt;blockquote&gt;&lt;p&gt;But the issue is, when we dont do this compaction, it is incorrect to just flush the tail of the pipeline alone while flush to disk. We must flush all segments + active then. If some way we can make this also configable this new memstore can be done in CompactingMemstore itself?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;It can be done in the CompactingMemstore but not sure if the changes will be clean. For now added as a new MS impl.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;You fellows finding Segments are in the way when default case? What you seeing in terms of friction when the segments pipeline is running (I&apos;ve not tried it). &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Segments are not a friction but since we don&apos;t have any case of compaction reading the segments and compacting into one and always flushing the tail is not needed. Instead we could just read and flush all segments. Once flattening is in place then it will be more useful in terms of heap usage specifically with offheap cases. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12817086" name="HBASE-16166.patch" size="48415" author="ram_krish" created="Mon, 11 Jul 2016 07:02:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 1 Jul 2016 12:17:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            22 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30f7z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>