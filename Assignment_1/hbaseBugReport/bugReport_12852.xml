<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:37:05 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-12852/HBASE-12852.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-12852] Tests from hbase-it that use ChaosMonkey don&apos;t fail if SSH commands fail</title>
                <link>https://issues.apache.org/jira/browse/HBASE-12852</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;I&apos;ve just started rolling my sleeves up and playing about with hbase-it (at the moment, only on 0.98.6), but wanted to begin filing JIRAs for issues I encounter so that I don&apos;t forget to get to them. First up is the fact that it seems that tests run with ChaosMonkey don&apos;t fail when the ChaosMonkey fails to work. As an example, while running IntegrationTestIngest with a slowDeterministic CM, I forgot to set up SSH properly and saw the following:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
15/01/14 07:36:53 WARN hbase.ClusterManager: Remote command: ps aux | grep proc_regionserver | grep -v grep | tr -s &apos; &apos; | cut -d &apos; &apos; -f2 | xargs kill -s SIGKILL , hostname:node-5.internal failed at attempt 4. Retrying until maxAttempts: 5. Exception: stderr: Permission denied, please &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; again.
Permission denied, please &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; again.
Permission denied (publickey,password).
, stdout: 
15/01/14 07:36:53 INFO util.RetryCounter: Sleeping 16000ms before retry #4...
15/01/14 07:36:53 INFO zookeeper.ZooKeeper: Session: 0x14ae74d7bac006b closed
15/01/14 07:36:53 INFO policies.Policy: Sleeping &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;: 59541
15/01/14 07:36:53 INFO zookeeper.ClientCnxn: EventThread shut down
Failed to write keys: 0
Key range: [150000..159999]
Batch updates: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
Percent of keys to update: 60
Updater threads: 10
Ignore nonce conflicts: &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
Regions per server: 5
15/01/14 07:36:56 INFO util.LoadTestTool: Starting to mutate data...
Starting to mutate data...
15/01/14 07:36:57 INFO policies.Policy: Sleeping &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;: 88816
15/01/14 07:37:01 INFO util.MultiThreadedAction: [U:10] Keys=471, cols=5.7 K, time=00:00:05 Overall: [keys/s= 94, latency=102 ms] Current: [keys/s=94, latency=102 ms], wroteUpTo=149999
15/01/14 07:37:06 INFO util.MultiThreadedAction: [U:10] Keys=908, cols=11.0 K, time=00:00:10 Overall: [keys/s= 90, latency=90 ms] Current: [keys/s=87, latency=77 ms], wroteUpTo=149999
15/01/14 07:37:09 INFO hbase.ClusterManager: Executing remote command: ps aux | grep proc_regionserver | grep -v grep | tr -s &apos; &apos; | cut -d &apos; &apos; -f2 | xargs kill -s SIGKILL , hostname:node-5.internal
15/01/14 07:37:09 INFO util.Shell: Executing full command [/usr/bin/ssh  node-5.internal &lt;span class=&quot;code-quote&quot;&gt;&quot;ps aux | grep proc_regionserver | grep -v grep | tr -s &apos; &apos; | cut -d &apos; &apos; -f2 | xargs kill -s SIGKILL&quot;&lt;/span&gt;]
15/01/14 07:37:09 WARN policies.Policy: Exception occured during performing action: ExitCodeException exitCode=255: stderr: Permission denied, please &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; again.
Permission denied, please &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; again.
Permission denied (publickey,password).
, stdout: 
	at org.apache.hadoop.hbase.HBaseClusterManager.exec(HBaseClusterManager.java:208)
	at org.apache.hadoop.hbase.HBaseClusterManager.execWithRetries(HBaseClusterManager.java:223)
	at org.apache.hadoop.hbase.HBaseClusterManager.signal(HBaseClusterManager.java:268)
	at org.apache.hadoop.hbase.ClusterManager.kill(ClusterManager.java:97)
	at org.apache.hadoop.hbase.DistributedHBaseCluster.killRegionServer(DistributedHBaseCluster.java:110)
	at org.apache.hadoop.hbase.chaos.actions.Action.killRs(Action.java:84)
	at org.apache.hadoop.hbase.chaos.actions.RestartActionBaseAction.restartRs(RestartActionBaseAction.java:50)
	at org.apache.hadoop.hbase.chaos.actions.RestartRsHoldingMetaAction.perform(RestartRsHoldingMetaAction.java:38)
	at org.apache.hadoop.hbase.chaos.policies.DoActionsOncePolicy.runOneIteration(DoActionsOncePolicy.java:50)
	at org.apache.hadoop.hbase.chaos.policies.PeriodicPolicy.run(PeriodicPolicy.java:41)
	at org.apache.hadoop.hbase.chaos.policies.CompositeSequentialPolicy.run(CompositeSequentialPolicy.java:42)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Seems to me that tests should fail in these instances rather than just toss a warning. Was this just an oversight, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt;, or is this by design?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12767378">HBASE-12852</key>
            <summary>Tests from hbase-it that use ChaosMonkey don&apos;t fail if SSH commands fail</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="dimaspivak">Dima Spivak</assignee>
                                    <reporter username="dimaspivak">Dima Spivak</reporter>
                        <labels>
                    </labels>
                <created>Wed, 14 Jan 2015 07:50:20 +0000</created>
                <updated>Wed, 14 Jan 2015 17:44:54 +0000</updated>
                                            <version>0.98.6</version>
                                                    <component>integration tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="14277236" author="ndimiduk" created="Wed, 14 Jan 2015 17:09:58 +0000"  >&lt;p&gt;This would be a helpful improvement. &lt;/p&gt;</comment>
                            <comment id="14277298" author="stack" created="Wed, 14 Jan 2015 17:44:54 +0000"  >&lt;p&gt;You are right &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dimaspivak&quot; class=&quot;user-hover&quot; rel=&quot;dimaspivak&quot;&gt;Dima Spivak&lt;/a&gt; that it should fail. I was just &apos;fixing&apos; it whenever the ssh wasn&apos;t set up right.... (test was proceeding but was just spewing failure).  Test should fail fast as you suggest.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 14 Jan 2015 17:09:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 48 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i24cnj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>