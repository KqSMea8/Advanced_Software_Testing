<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:06:48 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-3032/HBASE-3032.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-3032] Master - dont shut down cluster if you run into a fatal error</title>
                <link>https://issues.apache.org/jira/browse/HBASE-3032</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Saw this message:&lt;/p&gt;

&lt;p&gt;2010-09-22 13:10:03,547 FATAL org.apache.hadoop.hbase.master.MetaScanner: Caught error. Starting shutdown.&lt;br/&gt;
java.lang.OutOfMemoryError: unable to create new native thread&lt;br/&gt;
        at java.lang.Thread.start0(Native Method)&lt;br/&gt;
        at java.lang.Thread.start(Thread.java:597)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.HBaseClient$Connection.setupIOstreams(HBaseClient.java:328)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.HBaseClient.getConnection(HBaseClient.java:857)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.HBaseClient.call(HBaseClient.java:725)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.HBaseRPC$Invoker.invoke(HBaseRPC.java:252)&lt;br/&gt;
        at $Proxy1.openScanner(Unknown Source)&lt;br/&gt;
        at org.apache.hadoop.hbase.master.BaseScanner.scanRegion(BaseScanner.java:182)&lt;br/&gt;
        at org.apache.hadoop.hbase.master.MetaScanner.scanOneMetaRegion(MetaScanner.java:73)&lt;br/&gt;
        at org.apache.hadoop.hbase.master.MetaScanner.maintenanceScan(MetaScanner.java:129)&lt;br/&gt;
        at org.apache.hadoop.hbase.master.BaseScanner.chore(BaseScanner.java:156)&lt;br/&gt;
        at org.apache.hadoop.hbase.Chore.run(Chore.java:68)&lt;/p&gt;

&lt;p&gt;At this point the regionservers were instructed to exit, which caused more problems than if the master just terminated itself.  &lt;/p&gt;

&lt;p&gt;This would prevent a backup master from picking up since the cluster is terminating!&lt;/p&gt;</description>
                <environment></environment>
        <key id="12474867">HBASE-3032</key>
            <summary>Master - dont shut down cluster if you run into a fatal error</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="stack">stack</assignee>
                                    <reporter username="ryanobjc">ryan rawson</reporter>
                        <labels>
                    </labels>
                <created>Wed, 22 Sep 2010 20:41:02 +0000</created>
                <updated>Fri, 20 Nov 2015 12:42:32 +0000</updated>
                            <resolved>Sat, 16 Oct 2010 22:47:22 +0000</resolved>
                                    <version>0.89.20100621</version>
                                    <fixVersion>0.90.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12921771" author="stack" created="Sat, 16 Oct 2010 22:47:22 +0000"  >&lt;p&gt;I took a look at stack trace and couldn&apos;t figure how it resulted in cluster shutdown in 0.20.&lt;/p&gt;

&lt;p&gt;Anyways, in 0.90, cluster shutdown is setting of new flag &amp;#8211; cluster up flag over in zk &amp;#8211; and the only means of setting it is by explicit invocation of the HMaster#shutdown method:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  @Override
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void shutdown() {
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.serverManager.shutdownCluster();
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.clusterStatusTracker.setClusterDown();
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (KeeperException e) {
      LOG.error(&lt;span class=&quot;code-quote&quot;&gt;&quot;ZooKeeper exception trying to set cluster as down in ZK&quot;&lt;/span&gt;, e);
    }
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Grepping shutdown, its not called if OOME or any other such not expected exception.&lt;/p&gt;

&lt;p&gt;Shutdown is different from server stop.  The master can be stopped when various faults such as OOME or unexpected states (Master is rigged to fail fast while new master is new).&lt;/p&gt;

&lt;p&gt;I&apos;m closing this as &apos;Cannot Reproduce&apos;, not on 0.90 at least.&lt;/p&gt;</comment>
                            <comment id="15017274" author="lars_francke" created="Fri, 20 Nov 2015 12:42:32 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 16 Oct 2010 22:47:22 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26603</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hkev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>100569</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>