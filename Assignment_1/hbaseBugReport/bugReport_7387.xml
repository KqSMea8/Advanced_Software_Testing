<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:45:17 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-7387/HBASE-7387.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-7387] StoreScanner need to be able to be subclassed</title>
                <link>https://issues.apache.org/jira/browse/HBASE-7387</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;StoreScanner can be replaced by preStoreScannerOpen hook with CP. In order to reuse most of the logic in current StoreScanner, subclass it might be the best approaching. Thus a lot of private member need to be changed from private to protected.&lt;/p&gt;

&lt;p&gt;At present, in order to to implement a custom storescanner for dot (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6805&quot; title=&quot;Extend co-processor framework to provide observers for filter operations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6805&quot;&gt;HBASE-6805&lt;/a&gt;), only a few of the private member need to be changed as in the attached storescanner.patch, while should we change all the reasonable field from private to protected as in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7387&quot; title=&quot;StoreScanner need to be able to be subclassed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7387&quot;&gt;&lt;del&gt;HBASE-7387&lt;/del&gt;&lt;/a&gt;-v?.patch&lt;/p&gt;</description>
                <environment></environment>
        <key id="12624579">HBASE-7387</key>
            <summary>StoreScanner need to be able to be subclassed</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12607876">HBASE-6800</parent>
                                    <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="colorant">Raymond Liu</assignee>
                                    <reporter username="colorant">Raymond Liu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 19 Dec 2012 06:16:25 +0000</created>
                <updated>Mon, 23 Sep 2013 18:31:27 +0000</updated>
                            <resolved>Fri, 11 Jan 2013 07:05:40 +0000</resolved>
                                    <version>0.95.2</version>
                                    <fixVersion>0.95.0</fixVersion>
                                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13535717" author="stack" created="Wed, 19 Dec 2012 06:41:58 +0000"  >&lt;p&gt;+1 from me.  Seems reasonable.&lt;/p&gt;</comment>
                            <comment id="13536649" author="colorant" created="Thu, 20 Dec 2012 00:57:09 +0000"  >&lt;p&gt;Change all private member in storescanner to protected&lt;/p&gt;</comment>
                            <comment id="13536650" author="colorant" created="Thu, 20 Dec 2012 00:58:32 +0000"  >&lt;p&gt;this patch change all private member of StoreScanner to protected&lt;/p&gt;</comment>
                            <comment id="13536715" author="hadoopqa" created="Thu, 20 Dec 2012 02:38:19 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12561814/HBASE_7387_v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12561814/HBASE_7387_v2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 29 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.replication.TestReplication&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are zombie tests. See build logs for details.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3624//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3624//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3624//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3624//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3624//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3624//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3624//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3624//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3624//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3624//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3624//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3624//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3624//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3624//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3624//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3624//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3624//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3624//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13536724" author="colorant" created="Thu, 20 Dec 2012 02:58:36 +0000"  >
&lt;p&gt;The testing results seems non relevant to this patch.&lt;/p&gt;

&lt;p&gt;And, btw, first time to come across this patch testing system, thus a few questions :&lt;br/&gt;
1. Where to justify no new tests are needed? In &quot;submit patch&quot;&apos;s comment field? Is that needed for every patch that do not need new tests?&lt;br/&gt;
2. How to efficiently go through the auto testing result? Is there always non relevant info in it?&lt;/p&gt;

&lt;p&gt;Thx.&lt;/p&gt;</comment>
                            <comment id="13539348" author="colorant" created="Tue, 25 Dec 2012 01:18:22 +0000"  >&lt;p&gt;Hi, Stack&lt;br/&gt;
Is there any other thing I can do for this patch? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13550903" author="stack" created="Fri, 11 Jan 2013 07:05:40 +0000"  >&lt;p&gt;Resolved.  Committed to trunk.  Thanks for the patch Raymond.&lt;/p&gt;</comment>
                            <comment id="13554535" author="tlipcon" created="Tue, 15 Jan 2013 23:52:03 +0000"  >&lt;p&gt;I&apos;m a little skeptical of this &amp;#8211; we don&apos;t want to give any impression that these protected methods are public interfaces. Anyone subclassing from an HBase type that isn&apos;t a first class extension point deserves to have their code break between versions. What&apos;s the use case that can&apos;t be accomplished by delegation (which is generally a much safer design choice)?&lt;/p&gt;</comment>
                            <comment id="13555347" author="stack" created="Wed, 16 Jan 2013 19:07:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=colorant&quot; class=&quot;user-hover&quot; rel=&quot;colorant&quot;&gt;Raymond Liu&lt;/a&gt; I should have made it clear that there were no guarantees subclassing StoreScanner, that it could change under you given StoreScanner has the Private annotation (as per &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tlipcon&quot; class=&quot;user-hover&quot; rel=&quot;tlipcon&quot;&gt;Todd Lipcon&lt;/a&gt; comment).&lt;/p&gt;</comment>
                            <comment id="13555697" author="colorant" created="Thu, 17 Jan 2013 01:01:52 +0000"  >&lt;p&gt;Todd Lipcon, stack: I think delegation could help on reuse part, but when I want to replace say next() method with my own which have totally different approaching to process kv, I have to access those private members. This could not be done by wrapping and delegation. Unless public getter methods are provided for each of the private member. And since CP hook is provided for replace StoreScanner, shouldn&apos;t it be designed to be subclassable? otherwise any serious custom scanner will need to duplicate majority part of the code from StoreScanner to get wheels run.&lt;/p&gt;</comment>
                            <comment id="13555714" author="tlipcon" created="Thu, 17 Jan 2013 01:17:57 +0000"  >&lt;p&gt;But if they&apos;re private implementation details, then you should expect that they might change (eg we might find a new optimization or restructure the internals of the scanner). Then your coprocessor would break, whereas if you duplicated the logic (perhaps by sharing various utility code), it would be less fragile.&lt;/p&gt;

&lt;p&gt;I havent looked at the CP hook recently &amp;#8211; do you have to provide a StoreScanner, or is there an upper level interface that you need to share? What&apos;s the shared functionality between your &quot;entirely different approach&quot; scanner and the usual implementation?&lt;/p&gt;</comment>
                            <comment id="13555734" author="colorant" created="Thu, 17 Jan 2013 01:31:45 +0000"  >&lt;p&gt;Hi, Todd&lt;br/&gt;
Yes, I agree that an internal logic change or optimization might break the subclassed class. While this also apply to a duplicate one. Which one is more fragile I think depends on how much internal code detail they involved. In my case, I reuse all the other part of code, Just replace the next() method. In this next method, I have my custom encoded kv decode to several kvs, and do match and filter upon each of them, and also handling staff like seek_next_col etc. This part of code I think is some how isolated from the other part, so for my case, subclass is much less influenced by future code change compare with duplicate code. And make storescanner subclassable don&apos;t prevent other people from duplicate the code if they wish I guess &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13775411" author="stack" created="Mon, 23 Sep 2013 18:31:27 +0000"  >&lt;p&gt;Marking closed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12608050">HBASE-6805</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12561814" name="HBASE_7387_v2.patch" size="4749" author="colorant" created="Thu, 20 Dec 2012 00:57:09 +0000"/>
                            <attachment id="12561651" name="StoreScanner.patch" size="1980" author="colorant" created="Wed, 19 Dec 2012 06:19:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 19 Dec 2012 06:41:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>300402</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1680n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>244431</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>