<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:54:27 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-14579/HBASE-14579.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-14579] Users authenticated with KERBEROS are recorded as being authenticated with SIMPLE</title>
                <link>https://issues.apache.org/jira/browse/HBASE-14579</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;That&apos;s the HBase version of &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10683&quot; title=&quot;Users authenticated with KERBEROS are recorded as being authenticated with SIMPLE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10683&quot;&gt;&lt;del&gt;HADOOP-10683&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;We see:&lt;br/&gt;
&lt;cite&gt;hbase.Server (RpcServer.java:saslReadAndProcess(1446)) - Auth successful for securedUser/localhost@EXAMPLE.COM (auth:SIMPLE)&lt;/cite&gt;&lt;/p&gt;

&lt;p&gt;while we would like to see:&lt;br/&gt;
&lt;cite&gt;hbase.Server (RpcServer.java:saslReadAndProcess(1446)) - Auth successful for securedUser/localhost@EXAMPLE.COM (auth:KERBEROS)&lt;/cite&gt;&lt;/p&gt;

&lt;p&gt;The fix is simple, but it means we need hadoop 2.5+. &lt;br/&gt;
There is also a lot of cases where HBase calls &quot;createUser&quot; w/o specifying the authentication method... I don&quot;&apos;t have the solution for these ones.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12903360">HBASE-14579</key>
            <summary>Users authenticated with KERBEROS are recorded as being authenticated with SIMPLE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="nkeywal">Nicolas Liochon</assignee>
                                    <reporter username="nkeywal">Nicolas Liochon</reporter>
                        <labels>
                    </labels>
                <created>Thu, 8 Oct 2015 13:30:41 +0000</created>
                <updated>Fri, 30 Oct 2015 13:49:10 +0000</updated>
                            <resolved>Fri, 30 Oct 2015 13:49:10 +0000</resolved>
                                    <version>1.0.0</version>
                    <version>1.2.0</version>
                    <version>0.98.15</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>security</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="14948679" author="hadoopqa" created="Thu, 8 Oct 2015 13:51:14 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12765589/hbase-14579.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12765589/hbase-14579.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 7e30436e3fa84525b85b05b9e23cb01b2ada7c12.&lt;br/&gt;
  ATTACHMENT ID: 12765589&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javac&lt;/font&gt;.  The patch appears to cause mvn compile goal to fail with Hadoop version 2.4.0.&lt;/p&gt;

&lt;p&gt;    Compilation errors resume:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; COMPILATION ERROR : &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase/hbase-server/src/main/java/org/apache/hadoop/hbase/ipc/RpcServer.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;1342,36&amp;#93;&lt;/span&gt; method createRemoteUser in class org.apache.hadoop.security.UserGroupInformation cannot be applied to given types;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.2:compile (default-compile) on project hbase-server: Compilation failure&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase/hbase-server/src/main/java/org/apache/hadoop/hbase/ipc/RpcServer.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;1342,36&amp;#93;&lt;/span&gt; method createRemoteUser in class org.apache.hadoop.security.UserGroupInformation cannot be applied to given types;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; required: java.lang.String&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; found: java.lang.String,org.apache.hadoop.security.SaslRpcServer.AuthMethod&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; reason: actual and formal argument lists differ in length&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; To see the full stack trace of the errors, re-run Maven with the -e switch.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Re-run Maven using the -X switch to enable full debug logging.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; For more information about the errors and possible solutions, please read the following articles:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; After correcting the problems, you can resume the build with the command&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt;   mvn &amp;lt;goals&amp;gt; -rf :hbase-server&lt;/p&gt;


&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15915//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15915//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14948684" author="nkeywal" created="Thu, 8 Oct 2015 13:54:32 +0000"  >&lt;p&gt;&amp;gt; The patch appears to cause mvn compile goal to fail with Hadoop version 2.4.0.&lt;br/&gt;
Yes. Is that an issue for the 2.0 branch?&lt;/p&gt;</comment>
                            <comment id="14951338" author="stack" created="Fri, 9 Oct 2015 22:52:29 +0000"  >&lt;blockquote&gt;&lt;p&gt;Yes. Is that an issue for the 2.0 branch?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I&apos;d say it would be fine to drop 2.4 hadoop for 2.0 hbase.&lt;/p&gt;</comment>
                            <comment id="14951609" author="apurtell" created="Sat, 10 Oct 2015 05:19:05 +0000"  >&lt;p&gt;+1, I think we&apos;re already saying people should use 2.6.1 or later with 1.x. &lt;/p&gt;</comment>
                            <comment id="14952250" author="nkeywal" created="Sun, 11 Oct 2015 10:23:01 +0000"  >&lt;p&gt;I&apos;m not sure I understand correctly the test patch script. Can I just change the property &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
# All supported Hadoop versions that we want to test the compilation with
HADOOP2_VERSIONS=&lt;span class=&quot;code-quote&quot;&gt;&quot;2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;to &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
HADOOP2_VERSIONS=&lt;span class=&quot;code-quote&quot;&gt;&quot;2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Or is there is a risk to hide a problem a patch could cause to the 0.98 release (and even the 0.94)?&lt;/p&gt;

&lt;p&gt;We will need to update the matrix in the hbase book as well...&lt;/p&gt;</comment>
                            <comment id="14953638" author="stack" created="Mon, 12 Oct 2015 19:56:53 +0000"  >&lt;p&gt;I think test-patch is used for all builds. So, we should pass in this string as an argument instead and then have jenkins set it per build? i.e. for master, we&apos;d drop the 2.4? Yeah, need to update the book matrix too.&lt;/p&gt;</comment>
                            <comment id="14953639" author="stack" created="Mon, 12 Oct 2015 19:57:11 +0000"  >&lt;p&gt;I can do this for you if you want &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nkeywal&quot; class=&quot;user-hover&quot; rel=&quot;nkeywal&quot;&gt;Nicolas Liochon&lt;/a&gt;? Let me know.&lt;/p&gt;</comment>
                            <comment id="14954636" author="nkeywal" created="Tue, 13 Oct 2015 08:47:12 +0000"  >&lt;p&gt;Thanks Stack, yes, it would be great. I could change the script, but I can&apos;t easily test it right now.&lt;/p&gt;</comment>
                            <comment id="14979374" author="ghelmling" created="Wed, 28 Oct 2015 22:25:51 +0000"  >&lt;p&gt;Does this also happen for users authenticated with authentication tokens (&quot;auth:SIMPLE&quot; instead of &quot;auth:TOKEN&quot; or &quot;auth:DIGEST&quot;)?  Over in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14700&quot; title=&quot;Support a &amp;quot;permissive&amp;quot; mode for secure clusters to allow &amp;quot;simple&amp;quot; auth clients&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14700&quot;&gt;&lt;del&gt;HBASE-14700&lt;/del&gt;&lt;/a&gt;, I&apos;m looking at a related change to the audit log for authenticated users.&lt;/p&gt;</comment>
                            <comment id="14979590" author="ghelmling" created="Thu, 29 Oct 2015 00:54:37 +0000"  >&lt;p&gt;The latest patch (v3) for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14700&quot; title=&quot;Support a &amp;quot;permissive&amp;quot; mode for secure clusters to allow &amp;quot;simple&amp;quot; auth clients&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14700&quot;&gt;&lt;del&gt;HBASE-14700&lt;/del&gt;&lt;/a&gt; contains a fix for the UGI auth method logged.  Please take a look there if you have a chance.&lt;/p&gt;</comment>
                            <comment id="14982571" author="nkeywal" created="Fri, 30 Oct 2015 13:44:37 +0000"  >&lt;p&gt;&amp;gt; Does this also happen for users authenticated with authentication tokens (&quot;auth:SIMPLE&quot; instead of &quot;auth:TOKEN&quot; or &quot;auth:DIGEST&quot;)? &lt;br/&gt;
For digest, I tink it&apos;s ok, the code is RpcServer is&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; UserGroupInformation getAuthorizedUgi(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; authorizedId) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.authMethod == AuthMethod.DIGEST) {
        TokenIdentifier tokenId = HBaseSaslRpcServer.getIdentifier(authorizedId, RpcServer.&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.secretManager);
        UserGroupInformation ugi = tokenId.getUser();
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(ugi == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
          &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AccessDeniedException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Can\&apos;t retrieve username from tokenIdentifier.&quot;&lt;/span&gt;);
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
          ugi.addTokenIdentifier(tokenId);
          &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ugi;
        }
      } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; UserGroupInformation.createRemoteUser(authorizedId); &amp;lt;==================== auth method replaced by &lt;span class=&quot;code-quote&quot;&gt;&quot;SIMPLE&quot;&lt;/span&gt;
      }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;&amp;gt; The latest patch (v3) for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14700&quot; title=&quot;Support a &amp;quot;permissive&amp;quot; mode for secure clusters to allow &amp;quot;simple&amp;quot; auth clients&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14700&quot;&gt;&lt;del&gt;HBASE-14700&lt;/del&gt;&lt;/a&gt; contains a fix for the UGI auth method logged. Please take a look there if you have a chance.&lt;br/&gt;
Looking...&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12908051">HBASE-14700</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                                                <inwardlinks description="is superceded by">
                                        <issuelink>
            <issuekey id="12908051">HBASE-14700</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12765589" name="hbase-14579.patch" size="709" author="nkeywal" created="Thu, 8 Oct 2015 13:32:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 8 Oct 2015 13:51:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10342"><![CDATA[Incompatible change]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 7 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2mr3b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>