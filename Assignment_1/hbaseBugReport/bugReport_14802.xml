<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:56:37 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-14802/HBASE-14802.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-14802] Replaying server crash recovery procedure after a failover causes incorrect handling of deadservers</title>
                <link>https://issues.apache.org/jira/browse/HBASE-14802</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The way dead servers are processed is that a ServerCrashProcedure is launched for a server after it is added to the dead servers list. &lt;br/&gt;
Every time a server is added to the dead list, a counter &quot;numProcessing&quot; is incremented and it is decremented when a crash recovery procedure finishes. Since, adding a dead server and recovering it are two separate events, it can cause inconsistencies.&lt;/p&gt;

&lt;p&gt;If a master failover occurs in the middle of the crash recovery, the numProcessing counter resets but the ServerCrashProcedure is replayed by the new master. This causes the counter to go negative and makes the master think that dead servers are still in process of recovery. &lt;br/&gt;
This has ramifications on the balancer that the balancer ceases to run after such a failover.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12912628">HBASE-14802</key>
            <summary>Replaying server crash recovery procedure after a failover causes incorrect handling of deadservers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ashu210890">Ashu Pachauri</assignee>
                                    <reporter username="ashu210890">Ashu Pachauri</reporter>
                        <labels>
                    </labels>
                <created>Thu, 12 Nov 2015 22:09:50 +0000</created>
                <updated>Mon, 16 Nov 2015 03:42:53 +0000</updated>
                            <resolved>Sun, 15 Nov 2015 23:02:42 +0000</resolved>
                                    <version>2.0.0</version>
                    <version>1.2.0</version>
                    <version>1.2.1</version>
                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>1.2.0</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                                    <component>master</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="15003106" author="mbertozzi" created="Thu, 12 Nov 2015 22:45:01 +0000"  >&lt;p&gt;I don&apos;t think that patch is right. first there should be no need to leak the procId outside of the procedure executor. second that call to getDeadServers().process() every time we execute a step does not seem right at all.&lt;br/&gt;
I&apos;m not too familiar with the SSH code, so I&apos;ll let &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; posting his thoughts&lt;/p&gt;</comment>
                            <comment id="15003643" author="stack" created="Fri, 13 Nov 2015 07:07:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashu210890&quot; class=&quot;user-hover&quot; rel=&quot;ashu210890&quot;&gt;Ashu Pachauri&lt;/a&gt;  Thanks for the find. Makes sense. How did you discover this issue?  I wonder why we&apos;ve not seen it before? &lt;/p&gt;

&lt;p&gt;On the patch, yeah, would be good if we could keep procids encapsulated. Let me take a look and see if I can do something on top of your patch.... Let me see if can do a test too....&lt;/p&gt;</comment>
                            <comment id="15003648" author="ashu210890" created="Fri, 13 Nov 2015 07:20:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; I actually encountered one of its side effects i.e. the balancer fails to run in such a scenario. When I debug my way through this, I found this issue. I did not try, but this should be reproducible in Integration tests too, by expiring a few RS at once and failing over the master shortly after that.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbertozzi&quot; class=&quot;user-hover&quot; rel=&quot;mbertozzi&quot;&gt;Matteo Bertozzi&lt;/a&gt; I also had the same concern when I started working on this; there might be a more elegant solution to this problem. I am also not very familiar with this bit of code, but it seems that we need DeadServer to be aware of the fact that a separate procedure is processing the recovery which can be replayed many times over; which should be possible in other ways than leaking procID.&lt;/p&gt;</comment>
                            <comment id="15003683" author="ashu210890" created="Fri, 13 Nov 2015 08:05:37 +0000"  >&lt;p&gt;Modified the patch to not leak procIDs. This should work as long as failed crash recovery procedures are not discarded and requeued (i.e. they should eventually complete).&lt;/p&gt;</comment>
                            <comment id="15004808" author="ashu210890" created="Fri, 13 Nov 2015 22:17:59 +0000"  >&lt;p&gt;Modified the patch to print an error when numProcessing goes below zero in some unforeseen circumstance, reset to zero and continue.&lt;/p&gt;</comment>
                            <comment id="15004817" author="mbertozzi" created="Fri, 13 Nov 2015 22:25:39 +0000"  >&lt;p&gt;v2 looks ok to me&lt;/p&gt;

&lt;p&gt;instead of the code below, you can use ProcedureTestingUtility.submitAndWait(pExecutor, proc)&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    pExecutor.submitProcedure(proc);
+    &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt;(!pExecutor.isFinished(proc.getProcId())) {
+      &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(500);
+    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15004825" author="eclark" created="Fri, 13 Nov 2015 22:30:00 +0000"  >&lt;p&gt;Change the junit assert to java&apos;s too please.&lt;/p&gt;</comment>
                            <comment id="15004833" author="ashu210890" created="Fri, 13 Nov 2015 22:35:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbertozzi&quot; class=&quot;user-hover&quot; rel=&quot;mbertozzi&quot;&gt;Matteo Bertozzi&lt;/a&gt; Modified the patch, thanks for the suggestion.&lt;/p&gt;</comment>
                            <comment id="15004834" author="ashu210890" created="Fri, 13 Nov 2015 22:36:20 +0000"  >&lt;p&gt;Done, thanks for the catch.&lt;/p&gt;</comment>
                            <comment id="15005106" author="eclark" created="Sat, 14 Nov 2015 02:37:56 +0000"  >&lt;p&gt;lgtm lets get what QA bot thinks and get this in.&lt;/p&gt;</comment>
                            <comment id="15005169" author="hadoopqa" created="Sat, 14 Nov 2015 05:39:10 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12772317/HBASE-14802-3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12772317/HBASE-14802-3.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 789f8a5a70242c16ce10bc95401c51c7d04debfa.&lt;br/&gt;
  ATTACHMENT ID: 12772317&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16518//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16518//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16518//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16518//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16518//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16518//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16518//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16518//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15005187" author="stack" created="Sat, 14 Nov 2015 06:11:26 +0000"  >&lt;p&gt;Nice &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashu210890&quot; class=&quot;user-hover&quot; rel=&quot;ashu210890&quot;&gt;Ashu Pachauri&lt;/a&gt; Thanks.&lt;/p&gt;</comment>
                            <comment id="15005188" author="stack" created="Sat, 14 Nov 2015 06:11:37 +0000"  >&lt;p&gt;Pushed to branch-1.2+&lt;/p&gt;</comment>
                            <comment id="15005195" author="eclark" created="Sat, 14 Nov 2015 06:15:32 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15005219" author="hudson" created="Sat, 14 Nov 2015 07:04:43 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.3-IT #309 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3-IT/309/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3-IT/309/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14802&quot; title=&quot;Replaying server crash recovery procedure after a failover causes incorrect handling of deadservers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14802&quot;&gt;&lt;del&gt;HBASE-14802&lt;/del&gt;&lt;/a&gt; Replaying server crash recovery procedure after a failover (stack: rev bb9fbdb2d2967a001e3c3f2613b82c85c5125199)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/DeadServer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestDeadServer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/procedure/ServerCrashProcedure.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15005236" author="hudson" created="Sat, 14 Nov 2015 07:40:14 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.2-IT #281 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2-IT/281/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2-IT/281/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14802&quot; title=&quot;Replaying server crash recovery procedure after a failover causes incorrect handling of deadservers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14802&quot;&gt;&lt;del&gt;HBASE-14802&lt;/del&gt;&lt;/a&gt; Replaying server crash recovery procedure after a failover (stack: rev b22feba7fe2b176ef2578264f8b95947df592bba)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/procedure/ServerCrashProcedure.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestDeadServer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/DeadServer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15005297" author="hudson" created="Sat, 14 Nov 2015 10:11:51 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.3 #365 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3/365/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3/365/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14802&quot; title=&quot;Replaying server crash recovery procedure after a failover causes incorrect handling of deadservers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14802&quot;&gt;&lt;del&gt;HBASE-14802&lt;/del&gt;&lt;/a&gt; Replaying server crash recovery procedure after a failover (stack: rev bb9fbdb2d2967a001e3c3f2613b82c85c5125199)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/procedure/ServerCrashProcedure.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestDeadServer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/DeadServer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15005323" author="hudson" created="Sat, 14 Nov 2015 10:43:51 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.2 #368 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2/368/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2/368/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14802&quot; title=&quot;Replaying server crash recovery procedure after a failover causes incorrect handling of deadservers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14802&quot;&gt;&lt;del&gt;HBASE-14802&lt;/del&gt;&lt;/a&gt; Replaying server crash recovery procedure after a failover (stack: rev b22feba7fe2b176ef2578264f8b95947df592bba)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/procedure/ServerCrashProcedure.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/DeadServer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestDeadServer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15005340" author="hudson" created="Sat, 14 Nov 2015 11:25:40 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-Trunk_matrix #463 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-Trunk_matrix/463/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-Trunk_matrix/463/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14802&quot; title=&quot;Replaying server crash recovery procedure after a failover causes incorrect handling of deadservers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14802&quot;&gt;&lt;del&gt;HBASE-14802&lt;/del&gt;&lt;/a&gt; Replaying server crash recovery procedure after a failover (stack: rev 7c3c9ac9c67cd03f9a915f528d22cb4ed81cb6e8)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/DeadServer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestDeadServer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/procedure/ServerCrashProcedure.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15005691" author="stack" created="Sun, 15 Nov 2015 01:05:00 +0000"  >&lt;p&gt;Reverted from master branch. Since this went in, the related TestDeadServers is failing.&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;https://builds.apache.org/job/HBase-Trunk_matrix/lastCompletedBuild/jdk=latest1.8,label=Hadoop/testReport/org.apache.hadoop.hbase.master/TestDeadServer/testCrashProcedureReplay/history/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-Trunk_matrix/lastCompletedBuild/jdk=latest1.8,label=Hadoop/testReport/org.apache.hadoop.hbase.master/TestDeadServer/testCrashProcedureReplay/history/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Failed twice in master jdk8 builds (passed once).&lt;/p&gt;

&lt;p&gt;Failed once on jdk7 &lt;a href=&quot;https://builds.apache.org/job/HBase-Trunk_matrix/464/jdk=latest1.7,label=Hadoop/testReport/junit/org.apache.hadoop.hbase.master/TestDeadServer/testCrashProcedureReplay/history/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-Trunk_matrix/464/jdk=latest1.7,label=Hadoop/testReport/junit/org.apache.hadoop.hbase.master/TestDeadServer/testCrashProcedureReplay/history/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Seems to be just timing out the start up which is odd.&lt;/p&gt;

&lt;p&gt;I have not reverted from branch-1 or branch-1.2 because have had a successful build in the latter. In the former it seemed to be something else.&lt;/p&gt;


</comment>
                            <comment id="15005720" author="hudson" created="Sun, 15 Nov 2015 03:24:51 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-Trunk_matrix #466 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-Trunk_matrix/466/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-Trunk_matrix/466/&lt;/a&gt;)&lt;br/&gt;
Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14802&quot; title=&quot;Replaying server crash recovery procedure after a failover causes incorrect handling of deadservers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14802&quot;&gt;&lt;del&gt;HBASE-14802&lt;/del&gt;&lt;/a&gt; Replaying server crash recovery procedure after a (stack: rev bb6581345fd9ecac964e19cea2293477162801ca)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/DeadServer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestDeadServer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/procedure/ServerCrashProcedure.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15005992" author="ashu210890" created="Sun, 15 Nov 2015 19:01:46 +0000"  >&lt;p&gt;I don&apos;t see why starting the mini cluster should time out only for this test if it has something to do with the change itself. The only thing I can think of is that the test puts a timeout of 15 seconds and the mini cluster fails to come up in 15 seconds. I will move the mini cluster startup to the setup stage, rather than inside the test itself.&lt;/p&gt;</comment>
                            <comment id="15005995" author="ashu210890" created="Sun, 15 Nov 2015 19:12:37 +0000"  >&lt;p&gt;V4:&lt;br/&gt;
Fixing the issue for the test timing out on the master branch.  Moving the mini cluster startup outside of the test to the setup stage.&lt;/p&gt;</comment>
                            <comment id="15006081" author="stack" created="Sun, 15 Nov 2015 23:01:30 +0000"  >&lt;p&gt;I applied this to branch-1 and branch-1.2 to make these branches same as master.&lt;/p&gt;</comment>
                            <comment id="15006084" author="stack" created="Sun, 15 Nov 2015 23:02:42 +0000"  >&lt;p&gt;Applied v4 to master branch. Applied the 14802.addendum.branch-1.txt to branch-1 and branch-1.2 so same as master.&lt;/p&gt;

&lt;p&gt;Thanks for the patch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashu210890&quot; class=&quot;user-hover&quot; rel=&quot;ashu210890&quot;&gt;Ashu Pachauri&lt;/a&gt; Lets see how it does. Removing it made master branch pass again but odd how it was fine as is on branch-1 and branch-1.2&lt;/p&gt;</comment>
                            <comment id="15006097" author="hudson" created="Sun, 15 Nov 2015 23:41:59 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.2-IT #283 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2-IT/283/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2-IT/283/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14802&quot; title=&quot;Replaying server crash recovery procedure after a failover causes incorrect handling of deadservers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14802&quot;&gt;&lt;del&gt;HBASE-14802&lt;/del&gt;&lt;/a&gt; Replaying server crash recovery procedure after a failover (stack: rev f5cebbbaf14e32d47b7659300f992028fb376225)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestDeadServer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15006155" author="hudson" created="Mon, 16 Nov 2015 02:18:19 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.2 #375 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2/375/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2/375/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14802&quot; title=&quot;Replaying server crash recovery procedure after a failover causes incorrect handling of deadservers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14802&quot;&gt;&lt;del&gt;HBASE-14802&lt;/del&gt;&lt;/a&gt; Replaying server crash recovery procedure after a failover (stack: rev f5cebbbaf14e32d47b7659300f992028fb376225)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestDeadServer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15006173" author="hudson" created="Mon, 16 Nov 2015 02:51:46 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.3 #370 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3/370/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3/370/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14802&quot; title=&quot;Replaying server crash recovery procedure after a failover causes incorrect handling of deadservers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14802&quot;&gt;&lt;del&gt;HBASE-14802&lt;/del&gt;&lt;/a&gt; Replaying server crash recovery procedure after a failover (stack: rev b7a4c5f5dc66e6c5d5db261372d8c99ce8d7a06a)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestDeadServer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15006185" author="hudson" created="Mon, 16 Nov 2015 03:12:52 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.3-IT #314 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3-IT/314/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3-IT/314/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14802&quot; title=&quot;Replaying server crash recovery procedure after a failover causes incorrect handling of deadservers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14802&quot;&gt;&lt;del&gt;HBASE-14802&lt;/del&gt;&lt;/a&gt; Replaying server crash recovery procedure after a failover (stack: rev b7a4c5f5dc66e6c5d5db261372d8c99ce8d7a06a)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestDeadServer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15006203" author="hudson" created="Mon, 16 Nov 2015 03:42:53 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-Trunk_matrix #469 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-Trunk_matrix/469/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-Trunk_matrix/469/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14802&quot; title=&quot;Replaying server crash recovery procedure after a failover causes incorrect handling of deadservers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14802&quot;&gt;&lt;del&gt;HBASE-14802&lt;/del&gt;&lt;/a&gt; Replaying server crash recovery procedure after a failover (stack: rev dd5f454b03b9ccd788398fa52220c7690381eb6f)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/procedure/ServerCrashProcedure.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestDeadServer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/DeadServer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12772421" name="14802.addendum.branch-1.txt" size="2498" author="stack" created="Sun, 15 Nov 2015 23:01:30 +0000"/>
                            <attachment id="12772145" name="HBASE-14802-1.patch" size="6340" author="ashu210890" created="Fri, 13 Nov 2015 08:05:37 +0000"/>
                            <attachment id="12772311" name="HBASE-14802-2.patch" size="6941" author="ashu210890" created="Fri, 13 Nov 2015 22:17:59 +0000"/>
                            <attachment id="12772317" name="HBASE-14802-3.patch" size="6667" author="ashu210890" created="Fri, 13 Nov 2015 22:35:56 +0000"/>
                            <attachment id="12772415" name="HBASE-14802-4.patch" size="7564" author="ashu210890" created="Sun, 15 Nov 2015 19:12:37 +0000"/>
                            <attachment id="12772062" name="HBASE-14802.patch" size="6807" author="ashu210890" created="Thu, 12 Nov 2015 22:35:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 12 Nov 2015 22:45:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2obrb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>