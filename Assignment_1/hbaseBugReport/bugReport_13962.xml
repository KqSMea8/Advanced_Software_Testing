<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:48:22 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-13962/HBASE-13962.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-13962] Invalid HFile block magic</title>
                <link>https://issues.apache.org/jira/browse/HBASE-13962</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;hi every body&lt;br/&gt;
my table has some cell that load with bulk load scenario and some cells for increment.&lt;br/&gt;
we use 2 job to load data into table, first job use increment in reduce site and second job use bulk load.&lt;br/&gt;
first we run increment job, next run bulk job and run completebulkload job, after that we got this exception:&lt;br/&gt;
2015-06-24 17:40:01,557 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;regionserver60020-smallCompactions-1434448531302&amp;#93;&lt;/span&gt; regionserver.HRegion: Starting compaction on c2 in region table1,\x04C#P1&quot;\x07\x94 ,1435065082383.0fe38a6c782600e4d46f1f148144b489.&lt;br/&gt;
2015-06-24 17:40:01,558 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;regionserver60020-smallCompactions-1434448531302&amp;#93;&lt;/span&gt; regionserver.HStore: Starting compaction of 3 file(s) in c2 of table1,\x04C#P1&quot;\x07\x94 ,1435065082383.0fe38a6c782600e4d46f1f148144b489. into tmpdir=hdfs://m2/hbase2/data/default/table1/0fe38a6c782600e4d46f1f148144b489/.tmp, totalSize=43.1m&lt;br/&gt;
2015-06-24 17:40:01,558 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;regionserver60020-smallCompactions-1434448531302&amp;#93;&lt;/span&gt; regionserver.StoreFileInfo: reference &apos;hdfs://m2/hbase2/data/default/table1/0fe38a6c782600e4d46f1f148144b489/c2/6b1249a3b474474db5cf6c664f2d98dc.d21f8ee8b3c915fd9e1c143a0f1892e5&apos; to region=d21f8ee8b3c915fd9e1c143a0f1892e5 hfile=6b1249a3b474474db5cf6c664f2d98dc&lt;br/&gt;
2015-06-24 17:40:01,558 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;regionserver60020-smallCompactions-1434448531302&amp;#93;&lt;/span&gt; compactions.Compactor: Compacting hdfs://m2/hbase2/data/default/table1/0fe38a6c782600e4d46f1f148144b489/c2/6b1249a3b474474db5cf6c664f2d98dc.d21f8ee8b3c915fd9e1c143a0f1892e5-hdfs://m2/hbase2/data/default/table1/d21f8ee8b3c915fd9e1c143a0f1892e5/c2/6b1249a3b474474db5cf6c664f2d98dc-top, keycount=575485, bloomtype=ROW, size=20.8m, encoding=NONE, seqNum=9, earliestPutTs=1434875448405&lt;br/&gt;
2015-06-24 17:40:01,558 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;regionserver60020-smallCompactions-1434448531302&amp;#93;&lt;/span&gt; compactions.Compactor: Compacting hdfs://m2/hbase2/data/default/table1/0fe38a6c782600e4d46f1f148144b489/c2/41e13b20ee79435ebc260d11d3bf9920_SeqId_11_, keycount=562988, bloomtype=ROW, size=10.1m, encoding=NONE, seqNum=11, earliestPutTs=1435076732205&lt;br/&gt;
2015-06-24 17:40:01,558 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;regionserver60020-smallCompactions-1434448531302&amp;#93;&lt;/span&gt; compactions.Compactor: Compacting hdfs://m2/hbase2/data/default/table1/0fe38a6c782600e4d46f1f148144b489/c2/565c45ff05b14a419978834c86defa1a_SeqId_12_, keycount=554577, bloomtype=ROW, size=12.2m, encoding=NONE, seqNum=12, earliestPutTs=1435136926850&lt;br/&gt;
2015-06-24 17:40:01,560 ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;regionserver60020-smallCompactions-1434448531302&amp;#93;&lt;/span&gt; regionserver.CompactSplitThread: Compaction failed Request = regionName=table1,\x04C#P1&quot;\x07\x94 ,1435065082383.0fe38a6c782600e4d46f1f148144b489., storeName=c2, fileCount=3, fileSize=43.1m (20.8m, 10.1m, 12.2m), priority=1, time=6077271921381072&lt;br/&gt;
java.io.IOException: Could not seek StoreFileScanner&lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.hadoop.hbase.io.HalfStoreFileReader$1@1d1eb574, cur=null&amp;#93;&lt;/span&gt; to key /c2:/LATEST_TIMESTAMP/DeleteFamily/vlen=0/mvcc=0&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.StoreFileScanner.seek(StoreFileScanner.java:164)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.StoreScanner.seekScanners(StoreScanner.java:329)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.StoreScanner.&amp;lt;init&amp;gt;(StoreScanner.java:252)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.StoreScanner.&amp;lt;init&amp;gt;(StoreScanner.java:214)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.compactions.Compactor.createScanner(Compactor.java:299)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.compactions.DefaultCompactor.compact(DefaultCompactor.java:87)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.DefaultStoreEngine$DefaultCompactionContext.compact(DefaultStoreEngine.java:112)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HStore.compact(HStore.java:1113)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegion.compact(HRegion.java:1519)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.CompactSplitThread$CompactionRunner.run(CompactSplitThread.java:498)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:745)&lt;br/&gt;
Caused by: java.io.IOException: Failed to read compressed block at 10930320, onDiskSizeWithoutHeader=22342, preReadHeaderSize=33, header.length=33, header bytes: \x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00&lt;br/&gt;
        at org.apache.hadoop.hbase.io.hfile.HFileBlock$FSReaderV2.readBlockDataInternal(HFileBlock.java:1549)&lt;br/&gt;
        at org.apache.hadoop.hbase.io.hfile.HFileBlock$FSReaderV2.readBlockData(HFileBlock.java:1413)&lt;br/&gt;
        at org.apache.hadoop.hbase.io.hfile.HFileReaderV2.readBlock(HFileReaderV2.java:394)&lt;br/&gt;
        at org.apache.hadoop.hbase.io.hfile.HFileBlockIndex$BlockIndexReader.loadDataBlockWithScanInfo(HFileBlockIndex.java:253)&lt;br/&gt;
        at org.apache.hadoop.hbase.io.hfile.HFileReaderV2$AbstractScannerV2.seekTo(HFileReaderV2.java:539)&lt;br/&gt;
        at org.apache.hadoop.hbase.io.hfile.HFileReaderV2$AbstractScannerV2.seekTo(HFileReaderV2.java:560)&lt;br/&gt;
        at org.apache.hadoop.hbase.io.hfile.AbstractHFileReader$Scanner.seekTo(AbstractHFileReader.java:308)&lt;br/&gt;
        at org.apache.hadoop.hbase.io.HalfStoreFileReader$1.seekTo(HalfStoreFileReader.java:205)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.StoreFileScanner.seekAtOrAfter(StoreFileScanner.java:244)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.StoreFileScanner.seek(StoreFileScanner.java:152)&lt;br/&gt;
        ... 12 more&lt;br/&gt;
Caused by: java.io.IOException: Invalid HFile block magic: \x00\x00\x00\x00\x00\x00\x00\x00&lt;br/&gt;
        at org.apache.hadoop.hbase.io.hfile.BlockType.parse(BlockType.java:154)&lt;br/&gt;
        at org.apache.hadoop.hbase.io.hfile.BlockType.read(BlockType.java:165)&lt;br/&gt;
        at org.apache.hadoop.hbase.io.hfile.HFileBlock.&amp;lt;init&amp;gt;(HFileBlock.java:252)&lt;br/&gt;
        at org.apache.hadoop.hbase.io.hfile.HFileBlock$FSReaderV2.readBlockDataInternal(HFileBlock.java:1546)&lt;br/&gt;
        ... 21 more&lt;/p&gt;</description>
                <environment>&lt;p&gt;hadoop 1.2.1&lt;br/&gt;
hbase 0.98.12.1&lt;br/&gt;
jdk 1.7.0.79&lt;br/&gt;
os : ubuntu 12.04.1 amd64&lt;/p&gt;</environment>
        <key id="12840230">HBASE-13962</key>
            <summary>Invalid HFile block magic</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="g.reza">reaz hedayati</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Jun 2015 15:14:56 +0000</created>
                <updated>Thu, 25 Jun 2015 02:49:36 +0000</updated>
                            <resolved>Thu, 25 Jun 2015 02:49:36 +0000</resolved>
                                    <version>0.98.12.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="14599984" author="jinghe" created="Wed, 24 Jun 2015 19:21:11 +0000"  >&lt;p&gt;You can use the hfile tool to try to read the hfiles in question given full path.  &lt;br/&gt;
1. Use &apos;hbase hfile&apos; command. or&lt;br/&gt;
2. Use &apos;hbase org.apache.hadoop.hbase.io.hfile.HFile&apos; &lt;br/&gt;
For example, hbase org.apache.hadoop.hbase.io.hfile.HFile -v -p -m -f /hbase/data/default/table1/581b7f5a4ed620711702e196a739baeb/family/59f4f7692e334f148993cf7204be4513&lt;br/&gt;
You can try different options of the command.&lt;/p&gt;

&lt;p&gt;Looks like your hfile is corrupted given the bunch of \x00 I see.&lt;/p&gt;</comment>
                            <comment id="14600584" author="apurtell" created="Thu, 25 Jun 2015 02:49:02 +0000"  >&lt;p&gt;Please mail user@hbase.apache.org for troubleshooting assistance. This is the project dev tracker. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 24 Jun 2015 19:21:11 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 25 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gftr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>