<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:22:56 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-11409/HBASE-11409.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-11409] Add more flexibility for input directory structure to LoadIncrementalHFiles</title>
                <link>https://issues.apache.org/jira/browse/HBASE-11409</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Use case:&lt;/p&gt;

&lt;p&gt;We were trying to combine two very large tables into a single table.  Thus we ran jobs in one datacenter that populated certain column families and another datacenter which populated other column families.  Took a snapshot and exported them to their respective datacenters.  Wanted to simply take the hdfs restored snapshot and use LoadIncremental to merge the data.  &lt;/p&gt;

&lt;p&gt;It would be nice to add support where we could run LoadIncremental on a directory where the depth of store files is something other than two (current behavior).  &lt;/p&gt;

&lt;p&gt;With snapshots it would be nice if you could pass a restored hdfs snapshot&apos;s directory and have the tool run.  &lt;/p&gt;

&lt;p&gt;I am attaching a patch where I parameterize the bulkLoad timeout as well as the default store file depth.  &lt;/p&gt;</description>
                <environment></environment>
        <key id="12723522">HBASE-11409</key>
            <summary>Add more flexibility for input directory structure to LoadIncrementalHFiles</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png" description="A patch for this issue has been uploaded to JIRA by a contributor.">Patch Available</status>
                    <statusCategory id="4" key="indeterminate" colorName="yellow"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="churromorales">churro morales</assignee>
                                    <reporter username="churromorales">churro morales</reporter>
                        <labels>
                    </labels>
                <created>Wed, 25 Jun 2014 00:15:09 +0000</created>
                <updated>Fri, 24 Apr 2015 09:45:51 +0000</updated>
                                            <version>2.0.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                <comments>
                            <comment id="14073842" author="churromorales" created="Thu, 24 Jul 2014 23:36:30 +0000"  >&lt;p&gt;new patch fixes bug&lt;/p&gt;</comment>
                            <comment id="14310256" author="stack" created="Sat, 7 Feb 2015 00:12:56 +0000"  >&lt;p&gt;See if it will work against hadoopqa (it has the 0.94 in its name so should be applied to 0.94 branch)&lt;/p&gt;</comment>
                            <comment id="14317065" author="churromorales" created="Wed, 11 Feb 2015 22:08:29 +0000"  >&lt;p&gt;I just wrote a patch for 98, lets see if it applies to trunk and ill get some more patches out for this feature.&lt;/p&gt;</comment>
                            <comment id="14319040" author="churromorales" created="Thu, 12 Feb 2015 21:44:40 +0000"  >&lt;p&gt;attaching patch for trunk will test against QA and get patches for 1.0 and 98 out too.&lt;/p&gt;</comment>
                            <comment id="14319068" author="churromorales" created="Thu, 12 Feb 2015 21:58:23 +0000"  >&lt;p&gt;attaching 98 patch too&lt;/p&gt;</comment>
                            <comment id="14319093" author="hadoopqa" created="Thu, 12 Feb 2015 22:06:53 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12698545/HBASE-11409.0.98.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12698545/HBASE-11409.0.98.patch&lt;/a&gt;&lt;br/&gt;
  against 0.98 branch at commit e0160d69379401a7381ddaa478b53c9833379fe2.&lt;br/&gt;
  ATTACHMENT ID: 12698545&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 8 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12808//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12808//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14509646" author="churromorales" created="Thu, 23 Apr 2015 19:36:25 +0000"  >&lt;p&gt;After Matteo&apos;s refactoring this is a new patch which works with trunk&lt;/p&gt;</comment>
                            <comment id="14509935" author="hadoopqa" created="Thu, 23 Apr 2015 22:12:01 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12727686/HBASE-11409.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12727686/HBASE-11409.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit bcb2a279c49213bf4eb90a7602a01ff5d0810915.&lt;br/&gt;
  ATTACHMENT ID: 12727686&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.1 2.5.2 2.6.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13788//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13788//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13788//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13788//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13788//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13788//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13788//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13788//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14510732" author="yuzhihong@gmail.com" created="Fri, 24 Apr 2015 09:45:51 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
161	            &lt;span class=&quot;code-quote&quot;&gt;&quot; exist  in HBase\n  storeFileDepth defaults to (2)\n &quot;&lt;/span&gt;
162	            + &lt;span class=&quot;code-quote&quot;&gt;&quot;example: \&quot;&lt;/span&gt; + NAME + \&lt;span class=&quot;code-quote&quot;&gt;&quot; /path/to/hfileoutputformat-output tablename 3\n\n &quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Better state that only 2 and 3 are accepted depths.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
285	      &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (FileStatus fileStatus : FSUtils.listStatus(fs, hfofDir)) {
286	        visitBulkHFiles(fs, fileStatus.getPath(), visitor);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Add a debug log for each directory in the for loop.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
1005	    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (depth != 2 &amp;amp;&amp;amp; depth != 3) {
1006	      &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IllegalArgumentException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Depth must be either 2 or 3&quot;&lt;/span&gt;);
1007	    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Input validation is done above. Do we still need to check for depth in bulkHFile() ?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12727686" name="HBASE-11409.patch" size="19816" author="churromorales" created="Thu, 23 Apr 2015 19:36:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 7 Feb 2015 00:12:56 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401707</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 34 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1x57j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401778</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>