<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:51:40 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-14296/HBASE-14296.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-14296] ConnectionManager should validate the table existence before returning the table instance</title>
                <link>https://issues.apache.org/jira/browse/HBASE-14296</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Table instance should be returned only when table exist.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; HTableInterface getTable(TableName tableName, ExecutorService pool) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (managed) {
        &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; NeedUnmanagedConnectionException();
      }
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HTable(tableName, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;, tableConfig, rpcCallerFactory, rpcControllerFactory, pool);
    }

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12858179">HBASE-14296</key>
            <summary>ConnectionManager should validate the table existence before returning the table instance</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="pankaj2461">Pankaj Kumar</assignee>
                                    <reporter username="pankaj2461">Pankaj Kumar</reporter>
                        <labels>
                    </labels>
                <created>Mon, 24 Aug 2015 03:04:07 +0000</created>
                <updated>Thu, 3 Mar 2016 15:28:32 +0000</updated>
                                            <version>2.0.0</version>
                    <version>1.2.0</version>
                    <version>0.98.15</version>
                                                    <component>Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="14709702" author="stack" created="Mon, 24 Aug 2015 17:45:03 +0000"  >&lt;p&gt;Tell us more &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pankaj_kumar&quot; class=&quot;user-hover&quot; rel=&quot;pankaj_kumar&quot;&gt;Pankaj Kumar&lt;/a&gt; We used to do an exists before returning a Table instance but we removed it. Rather, let the first operation against the table fail if it is not present.  We did this so client and server were less tightly coupled, so you could get a Table instance without having to make a network call.&lt;/p&gt;</comment>
                            <comment id="14710031" author="enis" created="Mon, 24 Aug 2015 20:43:05 +0000"  >&lt;p&gt;It is also much cheaper to not do the exists() check in getTable(). &lt;/p&gt;</comment>
                            <comment id="14710779" author="pankaj2461" created="Tue, 25 Aug 2015 07:26:05 +0000"  >&lt;p&gt;Client may try to get a table instance which doesn&apos;t exist, since we don&apos;t have any validation for this so later on it will throw error like,&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.hadoop.hbase.TableNotFoundException: Table &apos;test&apos; was not found, got: hbase:namespace.
	at org.apache.hadoop.hbase.client.ConnectionManager$HConnectionImplementation.locateRegionInMeta(ConnectionManager.java:1277)
	at org.apache.hadoop.hbase.client.ConnectionManager$HConnectionImplementation.locateRegion(ConnectionManager.java:1158)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Also in  CellCreator(Configuration conf), suppose VisibilityController in not configured as co-processor, then It may throw the same error while getting scanner (DefaultVisibilityExpressionResolver&apos;s init())&lt;/p&gt;

&lt;p&gt;I was thinking about adding a exist() before returning a table instance but it will be a RPC call.&lt;/p&gt;</comment>
                            <comment id="14711758" author="enis" created="Tue, 25 Aug 2015 18:40:36 +0000"  >&lt;blockquote&gt;&lt;p&gt;I was thinking about adding a exist() before returning a table instance but it will be a RPC call.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I think this is too expensive. In most of the cases getTable() should be relatively cheap, we even cache the configuration options via TableConfiguration object to not to pay the parsing cost in Table instantiation. The clients can very easily wrap the call in an Admin.exists() if they are interested. &lt;/p&gt;</comment>
                            <comment id="14712354" author="pankaj2461" created="Wed, 26 Aug 2015 01:57:16 +0000"  >&lt;p&gt;Yeah, I completely agree with you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt;, but from client perspective it is a overhead for them to retrieve HTable instance from connection and then check for table existence. &lt;/p&gt;</comment>
                            <comment id="15177954" author="gsbiju" created="Thu, 3 Mar 2016 15:28:32 +0000"  >&lt;p&gt;From user perspective, not throwing an exception when a table object is created on a non existent table will break the norm. They would need to remember to check the exception when first action is taken on the object which will be like trying to remember to check on file exists exception when trying to read or write to a file and not when a file is open. Since the number of table objects created in the life of a process will be small, it is worth the additional table existence checking in getTable call from the usability perspective. Something to consider.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 24 Aug 2015 17:45:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            41 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2j9l3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>