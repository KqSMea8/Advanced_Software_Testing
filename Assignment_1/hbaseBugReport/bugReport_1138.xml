<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:51:04 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1138/HBASE-1138.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1138] Make HLog block size configurable</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1138</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Make HLog blocksize configurable to mitigate possible data loss.&lt;/p&gt;

&lt;p&gt;The ideal size is (size of record (avg key length + avg value length)) * (number of records between sync())&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12412773">HBASE-1138</key>
            <summary>Make HLog block size configurable</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jimk">Jim Kellerman</assignee>
                                    <reporter username="jimk">Jim Kellerman</reporter>
                        <labels>
                    </labels>
                <created>Mon, 19 Jan 2009 20:14:35 +0000</created>
                <updated>Sun, 13 Sep 2009 22:24:21 +0000</updated>
                            <resolved>Mon, 26 Jan 2009 18:56:39 +0000</resolved>
                                    <version>0.19.0</version>
                                    <fixVersion>0.19.1</fixVersion>
                    <fixVersion>0.20.0</fixVersion>
                                    <component>master</component>
                    <component>regionserver</component>
                    <component>test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12665235" author="stack" created="Mon, 19 Jan 2009 21:11:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-200&quot; title=&quot;In HDFS, sync() not yet guarantees data available to the new readers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-200&quot;&gt;&lt;del&gt;HADOOP-4379&lt;/del&gt;&lt;/a&gt; says its not implemented yet.&lt;/p&gt;</comment>
                            <comment id="12665334" author="stack" created="Tue, 20 Jan 2009 04:55:13 +0000"  >&lt;p&gt;So seems as though its been verified that this feature has not been implemented yet going by tests posted to &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-200&quot; title=&quot;In HDFS, sync() not yet guarantees data available to the new readers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-200&quot;&gt;&lt;del&gt;HADOOP-4379&lt;/del&gt;&lt;/a&gt;.  In &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-728?focusedCommentId=12642525#action_12642525&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-728?focusedCommentId=12642525#action_12642525&lt;/a&gt;, I ask if we tested crashing and recovering crashed server logs verifying if edits lost and was told it had been tested.&lt;/p&gt;</comment>
                            <comment id="12665462" author="jimk" created="Tue, 20 Jan 2009 16:33:02 +0000"  >&lt;p&gt;We can mitigate this in the short term by making HLog block size configurable as there is a (new to me) createWriter method:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  /**
   * Construct the preferred type of SequenceFile Writer.
   * @param fs The configured filesystem.
   * @param conf The configuration.
   * @param name The name of the file.
   * @param keyClass The &apos;key&apos; type.
   * @param valClass The &apos;value&apos; type.
   * @param bufferSize buffer size &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the underlaying outputstream.
   * @param replication replication factor &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the file.
   * @param blockSize block size &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the file.
   * @param compressionType The compression type.
   * @param codec The compression codec.
   * @param progress The Progressable object to track progress.
   * @param metadata The metadata of the file.
   * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Returns the handle to the constructed SequenceFile Writer.
   * @&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException
   */
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; Writer
    createWriter(FileSystem fs, Configuration conf, Path name,
                 &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; keyClass, &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; valClass, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; bufferSize,
                 &lt;span class=&quot;code-object&quot;&gt;short&lt;/span&gt; replication, &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; blockSize,
                 CompressionType compressionType, CompressionCodec codec,
                 Progressable progress, Metadata metadata) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If we did make HLog block size configurable, we&apos;d have to provide guidelines for setting it based on &lt;br/&gt;
average key and value length, and the sync interval.&lt;/p&gt;</comment>
                            <comment id="12665594" author="jimk" created="Tue, 20 Jan 2009 22:19:23 +0000"  >&lt;p&gt;If we make the default block size 1MB, and we write 819200 records of ~1KB, sync-ing after each 100 writes, we can read 815002 records if the writer crashes after writing 819200 records.&lt;/p&gt;

&lt;p&gt;This increases our record read ability from 84% to 99%.&lt;/p&gt;

&lt;p&gt;If users have a record length different from 1KB, they can adjust hbase.regionserver.hlog.blocksize (default = 1048576) to achieve similar results.&lt;/p&gt;

&lt;p&gt;Patch follows.&lt;/p&gt;</comment>
                            <comment id="12665601" author="jimk" created="Tue, 20 Jan 2009 22:27:40 +0000"  >&lt;p&gt;Patch for 0.19.1&lt;/p&gt;</comment>
                            <comment id="12665607" author="jimk" created="Tue, 20 Jan 2009 22:36:17 +0000"  >&lt;p&gt;Committed temporary patch to trunk until &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-200&quot; title=&quot;In HDFS, sync() not yet guarantees data available to the new readers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-200&quot;&gt;&lt;del&gt;HADOOP-4379&lt;/del&gt;&lt;/a&gt; is resolved.&lt;/p&gt;</comment>
                            <comment id="12667352" author="jimk" created="Mon, 26 Jan 2009 18:56:39 +0000"  >&lt;p&gt;Committed to branch and trunk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12398344" name="1138.patch" size="2351" author="jimk" created="Tue, 20 Jan 2009 22:27:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 19 Jan 2009 21:11:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32002</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 47 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hbjr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99133</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>