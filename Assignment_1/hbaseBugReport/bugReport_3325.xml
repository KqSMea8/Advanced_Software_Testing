<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:09:16 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-3325/HBASE-3325.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-3325] Optimize log splitter to not output obsolete edits</title>
                <link>https://issues.apache.org/jira/browse/HBASE-3325</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Currently when the master splits logs, it outputs all edits it finds, even those that have already been obsoleted by flushes. At replay time on the RS we discard the edits that have already been flushed.&lt;/p&gt;

&lt;p&gt;We could do a pretty simple optimization here - basically the RS should replicate a map &quot;region id -&amp;gt; last flushed seq id&quot; into ZooKeeper (this can be asynchronous by some seconds without any problems). Then when doing log splitting, if we have this map available, we can discard any edits found in the logs that were already flushed, and thus output a much smaller amount of data.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12492861">HBASE-3325</key>
            <summary>Optimize log splitter to not output obsolete edits</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tlipcon">Todd Lipcon</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Dec 2010 17:27:17 +0000</created>
                <updated>Sat, 19 Jul 2014 00:41:44 +0000</updated>
                            <resolved>Sat, 19 Jul 2014 00:41:44 +0000</resolved>
                                    <version>0.92.0</version>
                                                    <component>master</component>
                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12969848" author="kannanm" created="Thu, 9 Dec 2010 18:30:35 +0000"  >&lt;p&gt;+1. Excellent suggestion.&lt;/p&gt;</comment>
                            <comment id="12969860" author="nspiegelberg" created="Thu, 9 Dec 2010 18:47:58 +0000"  >&lt;p&gt;+1 agreed&lt;/p&gt;</comment>
                            <comment id="12969863" author="karthik.ranga" created="Thu, 9 Dec 2010 18:56:11 +0000"  >&lt;p&gt;Yes +1 indeed!!&lt;/p&gt;</comment>
                            <comment id="12969901" author="streamy" created="Thu, 9 Dec 2010 19:49:09 +0000"  >&lt;p&gt;Do you think we&apos;d need to go through the trouble of storing this mapping in ZK?&lt;/p&gt;

&lt;p&gt;At least initially, we could just open the latest file for each region and grab the seqid out of it.  An optimization later could be to keep this data on the side.&lt;/p&gt;

&lt;p&gt;If we do put it in ZK, shouldn&apos;t be an issue to do it synchronously, it only needs to be done after a flush and would be an insignificant overhead compared to typical flush times.&lt;/p&gt;</comment>
                            <comment id="12969907" author="kannanm" created="Thu, 9 Dec 2010 20:00:47 +0000"  >&lt;p&gt;Jonathan: I wondered about getting the info from the file too. Only caveat: the file with the latest timestamp may not be file with latest flush sequence id. So to get close to the right answer, would need to open all files. So the ZK based solution seems more appealing.&lt;/p&gt;</comment>
                            <comment id="12969930" author="kannanm" created="Thu, 9 Dec 2010 20:31:06 +0000"  >&lt;p&gt;btw, Amitanand might be able to help on this next week, unless someone needs this sooner.&lt;/p&gt;</comment>
                            <comment id="12969934" author="ryanobjc" created="Thu, 9 Dec 2010 20:39:01 +0000"  >&lt;p&gt;Is this a dup of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3099&quot; title=&quot;optimization for log splitting (theory/suggestion)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3099&quot;&gt;&lt;del&gt;HBASE-3099&lt;/del&gt;&lt;/a&gt; ?&lt;/p&gt;</comment>
                            <comment id="12969937" author="streamy" created="Thu, 9 Dec 2010 20:43:47 +0000"  >&lt;p&gt;@Kannan, good point.  With that and fact that we only need to update ZK on a flush, should be fine to keep this data in ZK, though this would be first time we retain per-region info in ZK so may need to start thinking about clusters with 1000s of regions.&lt;/p&gt;</comment>
                            <comment id="12969938" author="streamy" created="Thu, 9 Dec 2010 20:44:20 +0000"  >&lt;p&gt;Looks like dupe of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3099&quot; title=&quot;optimization for log splitting (theory/suggestion)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3099&quot;&gt;&lt;del&gt;HBASE-3099&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12970050" author="kannanm" created="Fri, 10 Dec 2010 02:11:37 +0000"  >&lt;p&gt;It would be good to keep track of last flush seq id on a per-CF basis rather than per region basis given that a some point we want to do per-CF flushes.&lt;/p&gt;</comment>
                            <comment id="12970054" author="tlipcon" created="Fri, 10 Dec 2010 02:16:54 +0000"  >&lt;p&gt;Grabbing seqid from the last flush file seems pretty reasonable too. Stack and I were talking on IRC and we thought it might be too slow to do that for hundreds of regions for the case where a server is hosting lots of them.&lt;/p&gt;</comment>
                            <comment id="12977027" author="aravind.menon" created="Tue, 4 Jan 2011 00:03:32 +0000"  >&lt;p&gt;I am starting to work on this.&lt;/p&gt;</comment>
                            <comment id="14067294" author="apurtell" created="Sat, 19 Jul 2014 00:41:44 +0000"  >&lt;p&gt;Didn&apos;t happen&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12492801">HBASE-3323</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 9 Dec 2010 18:30:35 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32988</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 21 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02f53:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12054</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>