<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:58:44 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-2073/HBASE-2073.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-2073] IllegalArgumentException causing regionserver failure</title>
                <link>https://issues.apache.org/jira/browse/HBASE-2073</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;After a regionserver went down last night, I checked its logs and found the following exception:&lt;/p&gt;

&lt;p&gt;2009-12-29 00:17:27,663 INFO org.apache.hadoop.hbase.regionserver.HLog: Roll /hbase/amsterdam_factory/.logs/factory05.lab.mtl,60020,1262042255724/hlog.dat.1262060247637, entries=1830, calcsize=22946017, filesize=22758899. New hlog /hbase/amsterdam_factory/.logs/factory05.lab.mtl,60020,1262042255724/hlog.dat.1262063847659&lt;br/&gt;
2009-12-29 00:34:36,210 ERROR org.apache.hadoop.hbase.regionserver.HRegionServer: &lt;br/&gt;
java.lang.IllegalArgumentException&lt;br/&gt;
	at java.nio.Buffer.position(Buffer.java:218)&lt;br/&gt;
	at org.apache.hadoop.hbase.io.hfile.HFile$Reader$Scanner.next(HFile.java:1114)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.StoreFileScanner.next(StoreFileScanner.java:58)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.KeyValueHeap.next(KeyValueHeap.java:79)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.StoreScanner.next(StoreScanner.java:189)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.KeyValueHeap.next(KeyValueHeap.java:106)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HRegion$RegionScanner.nextInternal(HRegion.java:1776)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HRegion$RegionScanner.next(HRegion.java:1719)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HRegionServer.next(HRegionServer.java:1944)&lt;br/&gt;
	at sun.reflect.GeneratedMethodAccessor7.invoke(Unknown Source)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at org.apache.hadoop.hbase.ipc.HBaseRPC$Server.call(HBaseRPC.java:648)&lt;br/&gt;
	at org.apache.hadoop.hbase.ipc.HBaseServer$Handler.run(HBaseServer.java:915)&lt;br/&gt;
2009-12-29 00:34:36,214 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 0 on 60020, call next(4170645244799815171, 1) from 192.168.1.108:53401: error: java.io.IOException: java.lang.IllegalArgumentException&lt;br/&gt;
java.io.IOException: java.lang.IllegalArgumentException&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HRegionServer.convertThrowableToIOE(HRegionServer.java:869)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HRegionServer.convertThrowableToIOE(HRegionServer.java:859)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HRegionServer.next(HRegionServer.java:1965)&lt;br/&gt;
	at sun.reflect.GeneratedMethodAccessor7.invoke(Unknown Source)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at org.apache.hadoop.hbase.ipc.HBaseRPC$Server.call(HBaseRPC.java:648)&lt;br/&gt;
	at org.apache.hadoop.hbase.ipc.HBaseServer$Handler.run(HBaseServer.java:915)&lt;br/&gt;
Caused by: java.lang.IllegalArgumentException&lt;br/&gt;
	at java.nio.Buffer.position(Buffer.java:218)&lt;br/&gt;
	at org.apache.hadoop.hbase.io.hfile.HFile$Reader$Scanner.next(HFile.java:1114)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.StoreFileScanner.next(StoreFileScanner.java:58)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.KeyValueHeap.next(KeyValueHeap.java:79)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.StoreScanner.next(StoreScanner.java:189)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.KeyValueHeap.next(KeyValueHeap.java:106)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HRegion$RegionScanner.nextInternal(HRegion.java:1776)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HRegion$RegionScanner.next(HRegion.java:1719)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HRegionServer.next(HRegionServer.java:1944)&lt;br/&gt;
	... 5 more&lt;/p&gt;

&lt;p&gt;Looks like this bug was encountered before at &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1495&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-1495&lt;/a&gt; and spanned a few JIRAs. It&apos;s supposed to be resolved as of 0.20.0, but we&apos;re running 0.20.2 and it took down one of our regionservers.&lt;/p&gt;

&lt;p&gt;I&apos;m also attaching more of the log.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Ubuntu 8.10, Java 1.6.0_10, HBase 0.20.2&lt;/p&gt;</environment>
        <key id="12444321">HBASE-2073</key>
            <summary>IllegalArgumentException causing regionserver failure</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="greglu">Greg Lu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Dec 2009 17:41:30 +0000</created>
                <updated>Fri, 24 Feb 2012 20:44:38 +0000</updated>
                            <resolved>Fri, 24 Feb 2012 20:44:38 +0000</resolved>
                                    <version>0.20.2</version>
                                                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12795090" author="greglu" created="Tue, 29 Dec 2009 17:45:33 +0000"  >&lt;p&gt;Another thing that might be worth mentioning is that the regionserver died overnight, so it&apos;s possible it happened during a major compaction.&lt;/p&gt;</comment>
                            <comment id="12795096" author="stack" created="Tue, 29 Dec 2009 18:22:16 +0000"  >&lt;p&gt;Moving into 0.20.3... for investigation at least.&lt;/p&gt;</comment>
                            <comment id="12795414" author="jdcryans" created="Wed, 30 Dec 2009 19:51:13 +0000"  >&lt;p&gt;Assigning to ryan so that he takes a look.&lt;/p&gt;</comment>
                            <comment id="12796424" author="ryanobjc" created="Mon, 4 Jan 2010 23:13:59 +0000"  >&lt;p&gt;the log doesnt have much detail, typically in the past these kinds of errors can indicate short read from HDFS. I&apos;m not seeing any of those in this logfile, is there anything interesting in the HDFS logs?&lt;/p&gt;

&lt;p&gt;For this error to have happened, there should have been a short read in the block, which is &quot;impossible&quot;.&lt;/p&gt;</comment>
                            <comment id="12796429" author="jdcryans" created="Mon, 4 Jan 2010 23:20:39 +0000"  >&lt;p&gt;@Greg,&lt;/p&gt;

&lt;p&gt;Looking at the log, it seems the region server didn&apos;t go down until at least 2 hours after that so it&apos;s not the cause of the failure. If it&apos;s still there, you should look at the .out file.&lt;/p&gt;</comment>
                            <comment id="12796430" author="jdcryans" created="Mon, 4 Jan 2010 23:21:25 +0000"  >&lt;p&gt;Punting from 0.20.3 since it&apos;s not fatal and some info is missing.&lt;/p&gt;</comment>
                            <comment id="12803785" author="stack" created="Fri, 22 Jan 2010 17:55:45 +0000"  >&lt;p&gt;Moving out of 0.20.4 till we get more detail.&lt;/p&gt;</comment>
                            <comment id="13215888" author="stack" created="Fri, 24 Feb 2012 20:44:38 +0000"  >&lt;p&gt;Not enough detail and I don&apos;t think we&apos;ve seen this lately&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12429073" name="hbase-hadoop-regionserver-factory05.lab.mtl.log" size="11162" author="greglu" created="Tue, 29 Dec 2009 17:42:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 29 Dec 2009 18:22:16 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26132</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 42 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hgcf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99910</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>