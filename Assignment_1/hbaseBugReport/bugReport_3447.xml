<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:10:18 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-3447/HBASE-3447.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-3447] Split parents ending up deployed along with daughters</title>
                <link>https://issues.apache.org/jira/browse/HBASE-3447</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Testing rc3 got several regions in this state as reported by hbck:&lt;br/&gt;
ERROR: Region UNKNOWN_REGION on haus02.sf.cloudera.com:57020, key=9f2822a04028c86813fe71264da5c167, not on HDFS or in META but deployed on haus02.sf.cloudera.com:57020&lt;br/&gt;
(this without any injected failures or anything)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12495739">HBASE-3447</key>
            <summary>Split parents ending up deployed along with daughters</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stack">stack</assignee>
                                    <reporter username="tlipcon">Todd Lipcon</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Jan 2011 06:06:04 +0000</created>
                <updated>Fri, 20 Nov 2015 12:42:33 +0000</updated>
                            <resolved>Thu, 28 Jul 2011 03:52:18 +0000</resolved>
                                    <version>0.90.0</version>
                                    <fixVersion>0.92.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12982490" author="tlipcon" created="Mon, 17 Jan 2011 06:07:00 +0000"  >&lt;p&gt;Here&apos;s a log for one of the regions.&lt;/p&gt;</comment>
                            <comment id="12982809" author="stack" created="Mon, 17 Jan 2011 19:19:17 +0000"  >&lt;p&gt;Any more in the log from around here?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
logs/HM-haus01.sf.cloudera.com.log:2011-01-16 18:03:26,164 DEBUG oahh.M.handler.ServerShutdownHandler: Offlined and split region usertable,user136857679,1295149082811.9f2822a04028c86813fe71264da5c167.; checking daughter presence
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The RS seems to report fine that the parent if split/offlined:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
logs/RS-haus04.sf.cloudera.com.log:2011-01-16 17:51:44,112 INFO oahh.RS.CompactSplitThread: Region split, META updated, and report to master. Parent=usertable,user136857679,1295149082811.9f2822a04028c86813fe71264da5c167., &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; regions: usertable,user136857679,1295229096477.ea26a71066b5617d9d8c9a4394209895., usertable,user1372334755,1295229096477.9c05ac3446fd2ff2d0cc0ac78f063867.. Split took 7sec
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;... and the master on shutdown processing seems to recognize it as an offlined parent.&lt;/p&gt;

&lt;p&gt;Is this the one you figured when we talked on IRC?&lt;/p&gt;
</comment>
                            <comment id="12982820" author="tlipcon" created="Mon, 17 Jan 2011 19:43:18 +0000"  >&lt;p&gt;Ah, yes, this area of the logs is where &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3446&quot; title=&quot;ProcessServerShutdown fails if META moves, orphaning lots of regions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3446&quot;&gt;&lt;del&gt;HBASE-3446&lt;/del&gt;&lt;/a&gt; happened. So the master didn&apos;t finish processing the shutdown.&lt;/p&gt;

&lt;p&gt;But even if we fixed &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3446&quot; title=&quot;ProcessServerShutdown fails if META moves, orphaning lots of regions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3446&quot;&gt;&lt;del&gt;HBASE-3446&lt;/del&gt;&lt;/a&gt;, we&apos;d have this same bug if the master had crashed in the middle of processing the shutdown, right?&lt;/p&gt;</comment>
                            <comment id="12983022" author="stack" created="Tue, 18 Jan 2011 05:38:11 +0000"  >&lt;blockquote&gt;&lt;p&gt;But even if we fixed &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3446&quot; title=&quot;ProcessServerShutdown fails if META moves, orphaning lots of regions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3446&quot;&gt;&lt;del&gt;HBASE-3446&lt;/del&gt;&lt;/a&gt;, we&apos;d have this same bug if the master had crashed in the middle of processing the shutdown, right?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;You mean, the fixup needs to be run when master joins a cluster too?  That seems reasonable, a rare case, but yeah, somthing we should plug.&lt;/p&gt;</comment>
                            <comment id="12983962" author="stack" created="Thu, 20 Jan 2011 00:51:17 +0000"  >&lt;p&gt;Bringing into 0.90.1.  Let me add the running of the fixup to master joining an already up cluster.&lt;/p&gt;</comment>
                            <comment id="12990795" author="tlipcon" created="Fri, 4 Feb 2011 22:36:50 +0000"  >&lt;p&gt;Bump to 0.92, we&apos;ll move back to 0.90 if people are hitting this.&lt;/p&gt;</comment>
                            <comment id="13026787" author="jdcryans" created="Fri, 29 Apr 2011 00:00:40 +0000"  >&lt;p&gt;svarma (Suraj I believe) was mentioning on IRC that they got something like this issue on their dev cluster. Turns out they hit &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3669&quot; title=&quot;Region in PENDING_OPEN keeps being bounced between RS and master&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3669&quot;&gt;&lt;del&gt;HBASE-3669&lt;/del&gt;&lt;/a&gt; instead and then the disabled/dropped the table which left the regions assigned but not existing anywhere else. The confusion came from hbck saying &quot;not on HDFS or in META but deployed on&quot; for those few regions. They fixed it by bouncing the region servers.&lt;/p&gt;</comment>
                            <comment id="13072092" author="stack" created="Wed, 27 Jul 2011 23:14:28 +0000"  >&lt;p&gt;I think we should close this issue.  Todd suggests:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;But even if we fixed &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3446&quot; title=&quot;ProcessServerShutdown fails if META moves, orphaning lots of regions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3446&quot;&gt;&lt;del&gt;HBASE-3446&lt;/del&gt;&lt;/a&gt;, we&apos;d have this same bug if the master had crashed in the middle of processing the shutdown, right?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This is now in place.  See AssignmentManager#joinCluster.  See how it calls processDeadServers.  This in turn calls the same code used when recovering shutdown servers over in ServerShutdownHandler.processDeadRegion.&lt;/p&gt;

&lt;p&gt;Is the above enough to close out this issue?&lt;/p&gt;</comment>
                            <comment id="13072160" author="yuzhihong@gmail.com" created="Thu, 28 Jul 2011 03:48:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3446&quot; title=&quot;ProcessServerShutdown fails if META moves, orphaning lots of regions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3446&quot;&gt;&lt;del&gt;HBASE-3446&lt;/del&gt;&lt;/a&gt; is a blocker which will be fixed for 0.92&lt;/p&gt;

&lt;p&gt;I think it is fine to close this JIRA.&lt;/p&gt;</comment>
                            <comment id="13072161" author="stack" created="Thu, 28 Jul 2011 03:52:18 +0000"  >&lt;p&gt;Resolving.  Reopen if think otherwise.&lt;/p&gt;</comment>
                            <comment id="15017279" author="lars_francke" created="Fri, 20 Nov 2015 12:42:33 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12468532" name="unknown-region.log" size="29317" author="tlipcon" created="Mon, 17 Jan 2011 06:07:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 17 Jan 2011 19:19:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26867</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hmbb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>100877</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>