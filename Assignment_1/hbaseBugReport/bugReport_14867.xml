<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:57:14 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-14867/HBASE-14867.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-14867] SimpleRegionNormalizer needs to have better heuristics to trigger merge operation</title>
                <link>https://issues.apache.org/jira/browse/HBASE-14867</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;SimpleRegionNormalizer needs to have better heuristics to trigger merge operation. SimpleRegionNormalizer is not able to trigger a merge action if the table&apos;s smallest region has neighboring regions that are larger than table&apos;s average region size, whereas there are other smaller regions whose combined size is less than the average region size. &lt;/p&gt;

&lt;p&gt;For example, &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Consider a table with six region, say r1 to r6.&lt;/li&gt;
	&lt;li&gt;Keep r1 as empty and create some data say, 100K rows of data for each of the regions r2, r3 and r4. Create smaller amount of data for regions r5 and r6, say about 27K rows of data.&lt;/li&gt;
	&lt;li&gt;Run the normalizer. Verify the number the regions for that table and also check the master log to see if any merge action was triggered as a result of normalization.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;In such scenario, it would be better to have a merge action triggered for those two smaller regions r5 and r6 even though either of them is not the smallest one&lt;/p&gt;</description>
                <environment></environment>
        <key id="12915049">HBASE-14867</key>
            <summary>SimpleRegionNormalizer needs to have better heuristics to trigger merge operation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yuzhihong@gmail.com">Ted Yu</assignee>
                                    <reporter username="romil.choksi">Romil Choksi</reporter>
                        <labels>
                    </labels>
                <created>Sat, 21 Nov 2015 01:55:14 +0000</created>
                <updated>Mon, 4 Jan 2016 15:32:14 +0000</updated>
                            <resolved>Mon, 4 Jan 2016 15:32:14 +0000</resolved>
                                    <version>1.2.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>1.2.0</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                                    <component>master</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                <comments>
                            <comment id="15020207" author="enis" created="Sat, 21 Nov 2015 03:15:59 +0000"  >&lt;p&gt;SimpleRN is too simple &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;br/&gt;
I think we should introduce a more sophisticated RN. &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Run every 5 min by default rather than 30 min. This will be similar to balancer.&lt;/li&gt;
	&lt;li&gt;SRN computes only 1 action per run. This clearly will not work with with 10K region tables. We should be able to compute a batch of normalization plans.&lt;/li&gt;
	&lt;li&gt;RN should look at best possible actions in terms of splits or merges not only for smallest or largest regions. In a single pass, we should be able to calculate whether to split or merge for every pair of neighbors.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15022490" author="ndimiduk" created="Mon, 23 Nov 2015 17:13:07 +0000"  >&lt;p&gt;More frequent, smaller adjustments sounds reasonable to me.&lt;/p&gt;</comment>
                            <comment id="15045993" author="mantonov" created="Mon, 7 Dec 2015 23:42:59 +0000"  >&lt;p&gt;I think what described and proposed here is definitely good thing to do, though I&apos;m not sure it&apos;s the best idea to create it as a new, more sophisticated normalizer (since apparently, most if not all people would choose to use more sophisticated normalizer, hence all the efforts, bug fixings and optimizations would go there, so what&apos;s the purpose to keep SRN around then &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;) maybe we should modify SRN as discussed here, and perhaps rename it to Standard* or something?&lt;/p&gt;</comment>
                            <comment id="15047268" author="enis" created="Tue, 8 Dec 2015 19:00:52 +0000"  >&lt;blockquote&gt;&lt;p&gt;we should modify SRN as discussed here, and perhaps rename it to Standard* or something? &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Agreed, we should keep only one default normalizer around. &lt;/p&gt;</comment>
                            <comment id="15068772" author="yuzhihong@gmail.com" created="Tue, 22 Dec 2015 21:44:40 +0000"  >&lt;p&gt;I wonder if RegionNormalizer should have knowledge of the history of each region.&lt;/p&gt;

&lt;p&gt;This would allow the normalizer to distinguish whether region R has been empty since inception or, was populated with data but became empty due to data cleaned up (due to TTL) later on.&lt;/p&gt;</comment>
                            <comment id="15068839" author="yuzhihong@gmail.com" created="Tue, 22 Dec 2015 22:34:16 +0000"  >&lt;p&gt;Patch v1 tries to simplify the logic of computePlanForTable() by using Collections.sort().&lt;/p&gt;

&lt;p&gt;In subsequent patch(es), I plan to explore better heuristic of finding neighboring regions to merge.&lt;/p&gt;</comment>
                            <comment id="15068916" author="yuzhihong@gmail.com" created="Tue, 22 Dec 2015 23:38:01 +0000"  >&lt;p&gt;Patch v2 uses Triple to record region info, region size and the original index so that we can determine whether two candidate regions are adjacent or not.&lt;/p&gt;

&lt;p&gt;This should cover the scenario Romil described.&lt;br/&gt;
After sorting, the regions would be in this order:&lt;br/&gt;
r1, r5, r6, r2, r3, r4&lt;br/&gt;
We would then find r5 and r6 to be merged.&lt;/p&gt;

&lt;p&gt;Note: the relative order of r5 and r6, r2 and r3 and r4 may be different from above. But r5 and r6, r2  and r3 and r4 would form two groups.&lt;/p&gt;</comment>
                            <comment id="15069082" author="hadoopqa" created="Wed, 23 Dec 2015 03:18:05 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12779151/14867-v2.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12779151/14867-v2.txt&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 1af98f255132ef6716a1f6ba1d8d71a36ea38840.&lt;br/&gt;
  ATTACHMENT ID: 12779151&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;. The applied patch does not generate new checkstyle errors.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 zombies&lt;/font&gt;. No zombie tests found running at the end of the build.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16983//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16983//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16983//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16983//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16983//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16983//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16983//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16983//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15071439" author="yuzhihong@gmail.com" created="Fri, 25 Dec 2015 09:14:11 +0000"  >&lt;p&gt;Patch v3 adds a unit test mimicking the scenario described in the JIRA.&lt;/p&gt;

&lt;p&gt;Also fixed some typo for testMergeOfSmallRegions() where hri5 wasn&apos;t added to hris&lt;/p&gt;</comment>
                            <comment id="15071591" author="hadoopqa" created="Fri, 25 Dec 2015 12:19:46 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12779504/14867-v3.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12779504/14867-v3.txt&lt;/a&gt;&lt;br/&gt;
  against master branch at commit dfada43e90a0767518501f6878bf9896bed912ce.&lt;br/&gt;
  ATTACHMENT ID: 12779504&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;. The applied patch does not generate new checkstyle errors.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 zombies&lt;/font&gt;. No zombie tests found running at the end of the build.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/17027//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/17027//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/17027//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/17027//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/17027//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/17027//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/17027//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/17027//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15073764" author="mantonov" created="Tue, 29 Dec 2015 10:20:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tedyu@apache.org&quot;&gt;Ted Yu&lt;/a&gt; sorry for the delay, looks good to me.&lt;/p&gt;

&lt;p&gt;Minor comment (might be add on commit?)&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; Comparator&amp;lt;Triple&amp;lt;HRegionInfo, &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;&amp;gt; regionSizeComparator =
	      &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Comparator&amp;lt;Triple&amp;lt;HRegionInfo, &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;&amp;gt;() {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I&apos;d add here comment describing what each generic type is for, kind of not obvious from looking at the code (w/o comment in jira). Also I guess could use diamond &amp;lt;&amp;gt; here and in regionsWithSize  initialization?&lt;/p&gt;

&lt;p&gt;+1 otherwise.&lt;/p&gt;
</comment>
                            <comment id="15073951" author="yuzhihong@gmail.com" created="Tue, 29 Dec 2015 14:27:37 +0000"  >&lt;p&gt;Thanks for the review, Mikhail&lt;/p&gt;</comment>
                            <comment id="15074004" author="hudson" created="Tue, 29 Dec 2015 15:40:21 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.2-IT #371 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2-IT/371/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2-IT/371/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14867&quot; title=&quot;SimpleRegionNormalizer needs to have better heuristics to trigger merge operation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14867&quot;&gt;&lt;del&gt;HBASE-14867&lt;/del&gt;&lt;/a&gt; SimpleRegionNormalizer needs to have better heuristics to (tedyu: rev 921e9db5372365985d933e8729749a627a3d5475)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/normalizer/SimpleRegionNormalizer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/normalizer/TestSimpleRegionNormalizer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15074108" author="hudson" created="Tue, 29 Dec 2015 17:43:39 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.2 #480 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2/480/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2/480/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14867&quot; title=&quot;SimpleRegionNormalizer needs to have better heuristics to trigger merge operation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14867&quot;&gt;&lt;del&gt;HBASE-14867&lt;/del&gt;&lt;/a&gt; SimpleRegionNormalizer needs to have better heuristics to (tedyu: rev 921e9db5372365985d933e8729749a627a3d5475)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/normalizer/TestSimpleRegionNormalizer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/normalizer/SimpleRegionNormalizer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15074149" author="hudson" created="Tue, 29 Dec 2015 18:37:44 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.3 #475 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3/475/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3/475/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14867&quot; title=&quot;SimpleRegionNormalizer needs to have better heuristics to trigger merge operation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14867&quot;&gt;&lt;del&gt;HBASE-14867&lt;/del&gt;&lt;/a&gt; SimpleRegionNormalizer needs to have better heuristics to (tedyu: rev c4173777dd776b23c9a09b3eca827690fc6ee840)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/normalizer/TestSimpleRegionNormalizer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/normalizer/SimpleRegionNormalizer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15074188" author="hudson" created="Tue, 29 Dec 2015 19:17:23 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.3-IT #416 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3-IT/416/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3-IT/416/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14867&quot; title=&quot;SimpleRegionNormalizer needs to have better heuristics to trigger merge operation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14867&quot;&gt;&lt;del&gt;HBASE-14867&lt;/del&gt;&lt;/a&gt; SimpleRegionNormalizer needs to have better heuristics to (tedyu: rev c4173777dd776b23c9a09b3eca827690fc6ee840)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/normalizer/SimpleRegionNormalizer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/normalizer/TestSimpleRegionNormalizer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15074228" author="hudson" created="Tue, 29 Dec 2015 20:05:48 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-Trunk_matrix #597 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-Trunk_matrix/597/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-Trunk_matrix/597/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14867&quot; title=&quot;SimpleRegionNormalizer needs to have better heuristics to trigger merge operation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14867&quot;&gt;&lt;del&gt;HBASE-14867&lt;/del&gt;&lt;/a&gt; SimpleRegionNormalizer needs to have better heuristics to (tedyu: rev 1e4992c6eccb81166cdda842a68644fa962a3fdc)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/normalizer/TestSimpleRegionNormalizer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/normalizer/SimpleRegionNormalizer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15080882" author="enis" created="Mon, 4 Jan 2016 09:30:54 +0000"  >&lt;p&gt;Reopening this since I think the patch has a problem. &lt;/p&gt;

&lt;p&gt;This logic: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (candidateIdx &amp;lt; tableRegions.size()-1) {
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.abs(regionsWithSize.get(candidateIdx).getThird() -
        regionsWithSize.get(candidateIdx + 1).getThird()) == 1) {
        &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
      }
      candidateIdx++;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;only looks for regions who are neighbors and also their region sizes are neighbors in the regionsWithSize sorted array. This does not seem like it will be useful in real world region distributions. &lt;/p&gt;

&lt;p&gt;I think we should look for all neighboring region pairs and decide to split or merge for all possible pairs. What about the other suggestions in my first comment? &lt;/p&gt;</comment>
                            <comment id="15081277" author="yuzhihong@gmail.com" created="Mon, 4 Jan 2016 15:32:14 +0000"  >&lt;p&gt;Created &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15065&quot; title=&quot;SimpleRegionNormalizer should return multiple normalization plans in one run&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15065&quot;&gt;&lt;del&gt;HBASE-15065&lt;/del&gt;&lt;/a&gt; to address Enis&apos; comments&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12779151" name="14867-v2.txt" size="6936" author="yuzhihong@gmail.com" created="Tue, 22 Dec 2015 23:38:01 +0000"/>
                            <attachment id="12779504" name="14867-v3.txt" size="9840" author="yuzhihong@gmail.com" created="Fri, 25 Dec 2015 09:14:11 +0000"/>
                            <attachment id="12779806" name="14867-v4.txt" size="10033" author="yuzhihong@gmail.com" created="Tue, 29 Dec 2015 14:20:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 21 Nov 2015 03:15:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            49 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2oqm7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>