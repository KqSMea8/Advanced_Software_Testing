<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:10:23 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-10091/HBASE-10091.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-10091] Exposing HBase DataTypes to non-Java interfaces</title>
                <link>https://issues.apache.org/jira/browse/HBASE-10091</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Access to the DataType implementations introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8693&quot; title=&quot;DataType: provide extensible type API&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8693&quot;&gt;&lt;del&gt;HBASE-8693&lt;/del&gt;&lt;/a&gt; is currently limited to consumers of the Java API. It is not easy to specify a data type in non-Java environments, such as the HBase shell, REST or Thrift Gateways, command-line arguments to our utility MapReduce jobs, or in integration points such as a (hypothetical extension to) Hive&apos;s HBaseStorageHandler. See examples where this limitation impedes in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8593&quot; title=&quot;Type support in ImportTSV tool&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8593&quot;&gt;HBASE-8593&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10071&quot; title=&quot;Backport HBASE-6592 to 0.94 branch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10071&quot;&gt;&lt;del&gt;HBASE-10071&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I propose the implementation of a type definition DSL, similar to the language defined for Filters in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4176&quot; title=&quot;Exposing HBase Filters to the Thrift API&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4176&quot;&gt;&lt;del&gt;HBASE-4176&lt;/del&gt;&lt;/a&gt;. By implementing this in core HBase, it can be reused in all of the situations described previously. The parser for this DSL must support arbitrary type extensions, just as the Filter parser allows for new Filter types to be registered at runtime.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12683019">HBASE-10091</key>
            <summary>Exposing HBase DataTypes to non-Java interfaces</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12636797">HBASE-8089</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ndimiduk">Nick Dimiduk</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 Dec 2013 23:18:30 +0000</created>
                <updated>Tue, 1 Apr 2014 17:11:39 +0000</updated>
                                                                            <component>Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="13840689" author="ndimiduk" created="Thu, 5 Dec 2013 23:28:37 +0000"  >&lt;p&gt;Such a parser should probably allow registering aliases for a more complete type definition in order to make interactive experiences (such as &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10071&quot; title=&quot;Backport HBASE-6592 to 0.94 branch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10071&quot;&gt;&lt;del&gt;HBASE-10071&lt;/del&gt;&lt;/a&gt;) more palatable. Once could establish an alias for the session, say &lt;tt&gt;long =&amp;gt; OrderedInt64#DESCENDING&lt;/tt&gt;, &lt;tt&gt;decimal =&amp;gt; OrderedNumeric&lt;/tt&gt;, and &lt;tt&gt;my_struct =&amp;gt; some composite Struct declaration&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="13934275" author="stack" created="Thu, 13 Mar 2014 23:09:58 +0000"  >&lt;p&gt;Tell me more about how this would work?&lt;/p&gt;

&lt;p&gt;hbase:int would map to org.apache.hadoop.hbase.types.RawInt in the DSL&lt;/p&gt;

&lt;p&gt;Each language would have to have an interpreter for the DSL?&lt;/p&gt;

&lt;p&gt;There is some overlap with  how types are called out in avro/pb IDLs?&lt;/p&gt;</comment>
                            <comment id="13955877" author="ndimiduk" created="Mon, 31 Mar 2014 23:33:26 +0000"  >&lt;p&gt;I haven&apos;t worked through a prototype yet, so I don&apos;t know exactly. The DSL we have for exposing filters is parsed once, in Java (using &lt;a href=&quot;https://hbase.apache.org/apidocs/org/apache/hadoop/hbase/filter/ParseFilter.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;ParseFilter&lt;/a&gt;), by the shell or Thrift service (I guess REST service doesn&apos;t support this yet). The user would provide the type mapping as a configuration string and let whatever is interacting with the HTable handle sending provided data literals to the correct DataType instances.&lt;/p&gt;

&lt;p&gt;One example consumer is the Hive metastore. The table is defined in metastore that has a column mapping, similar to today, mapping the metastore table column to an HBase table column. In addition to the column mapping, a type specification is also provided. This would be an Expression in the DSL we&apos;re discussing. The StorageHandler would be responsible for honoring this additional component in the mapping. How exactly we ensure the metastore type can be converted to/from the HBase &lt;tt&gt;DataType&lt;/tt&gt; is still up for question. I hope to learn from Phoenix on this, hence I deferred that work out to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8863&quot; title=&quot;Enhance data type API with type vs type comparison methods&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8863&quot;&gt;HBASE-8863&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;More concretely, I imagine this DSL is relatively simple. A complete type definition might be as simple as &lt;tt&gt;package.class[/ORDER]&lt;/tt&gt;. We&apos;ll need to add any necessary API to &lt;tt&gt;DataType&lt;/tt&gt; to support constructing from the parser. There may also be some built-in named definitions, &quot;raw&quot; or &quot;ordered-bytes&quot;, where we ship an existing known mapping between Java type and HBase DataType implementation. This would be a convenience for consumers of HTable; I don&apos;t know how this would play into a metastore implementation.&lt;/p&gt;

&lt;p&gt;The only place where potential overlap with Avro/Protobuf comes in is with &lt;a href=&quot;http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/types/Struct.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Struct&lt;/a&gt;. I&apos;m not convinced this is very complicated either; just a sequence of types with syntax for specifying an optional element. There&apos;s no concept of &quot;schema versioning&quot; in &lt;tt&gt;Struct&lt;/tt&gt;; there&apos;s no room for it in a place where encoded ordering is the primary concern.&lt;/p&gt;</comment>
                            <comment id="13956775" author="ndimiduk" created="Tue, 1 Apr 2014 17:11:39 +0000"  >&lt;p&gt;Looks like &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=navis&quot; class=&quot;user-hover&quot; rel=&quot;navis&quot;&gt;Navis&lt;/a&gt; has been thinking about how to specify a composite as well.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12648821">HBASE-8593</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12596272">HIVE-3211</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12682301">HBASE-10071</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12518152">HBASE-4176</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12694670">HIVE-6411</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 13 Mar 2014 23:09:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>362272</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 37 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1qg3j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>362566</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>