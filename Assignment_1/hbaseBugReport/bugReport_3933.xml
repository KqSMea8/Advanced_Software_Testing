<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:14:23 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-3933/HBASE-3933.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-3933] Hmaster throw NullPointerException</title>
                <link>https://issues.apache.org/jira/browse/HBASE-3933</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;NullPointerException while hmaster starting.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      java.lang.NullPointerException
        at java.util.TreeMap.getEntry(TreeMap.java:324)
        at java.util.TreeMap.get(TreeMap.java:255)
        at org.apache.hadoop.hbase.master.AssignmentManager.addToServers(AssignmentManager.java:1512)
        at org.apache.hadoop.hbase.master.AssignmentManager.regionOnline(AssignmentManager.java:606)
        at org.apache.hadoop.hbase.master.AssignmentManager.processFailover(AssignmentManager.java:214)
        at org.apache.hadoop.hbase.master.HMaster.finishInitialization(HMaster.java:402)
        at org.apache.hadoop.hbase.master.HMaster.run(HMaster.java:283)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12508703">HBASE-3933</key>
            <summary>Hmaster throw NullPointerException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="ekoontz">Eugene Koontz</assignee>
                                    <reporter username="sunnygao">gaojinchao</reporter>
                        <labels>
                    </labels>
                <created>Mon, 30 May 2011 12:27:31 +0000</created>
                <updated>Tue, 10 Nov 2015 19:12:02 +0000</updated>
                            <resolved>Tue, 10 Nov 2015 19:12:02 +0000</resolved>
                                    <version>0.90.6</version>
                                                    <component>master</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13041113" author="sunnygao" created="Mon, 30 May 2011 12:39:58 +0000"  >&lt;p&gt;Please review it and give some suggestion. If the solution is ok, I will test it. Thanks.&lt;/p&gt;

&lt;p&gt;Because region server interval is 3s, So I think hbase.master.wait.on.regionservers.timeout should be 9s.&lt;/p&gt;</comment>
                            <comment id="13041146" author="yuzhihong@gmail.com" created="Mon, 30 May 2011 14:37:58 +0000"  >&lt;p&gt;The changes in HMaster copied some existing code. We can add the new check to the existing if statement so that we don&apos;t copy the code in the if block.&lt;/p&gt;

&lt;p&gt;For the changes in waitForRegionServers(), I guess the rationale is to prevent the region server which carried .ROOT. to checkin after that point. If so, we should still let other region servers to continue checking in.&lt;/p&gt;</comment>
                            <comment id="13041384" author="sunnygao" created="Tue, 31 May 2011 02:24:02 +0000"  >&lt;p&gt;Hi Ted.&lt;br/&gt;
Hlog will be split after waitForRegionServers. So I prevent all region server to chechin and stop these region server after that point.&lt;/p&gt;</comment>
                            <comment id="13041402" author="stack" created="Tue, 31 May 2011 04:03:20 +0000"  >&lt;p&gt;@Gao I&apos;m with Ted that you should not duplicate code.  On going to 9seconds from 4.5, do you think your change generally applicable?  Everyone will now have to wait at least nine seconds before startup proceeds.  Or is it that you have a cluster with lots of regionservers?  Can you not just up the configuration for how long to wait on new regionservers to check in?  Also, can you say more on why you block regionservers coming in and actually tell them shutdown.  Thats a pretty radical change.  Thanks.&lt;/p&gt;</comment>
                            <comment id="13064345" author="stack" created="Wed, 13 Jul 2011 04:26:08 +0000"  >&lt;p&gt;Any update on this one Gao?  I&apos;m moving it out of 0.90.4 till hear otherwise.&lt;/p&gt;</comment>
                            <comment id="13064379" author="sunnygao" created="Wed, 13 Jul 2011 06:16:07 +0000"  >&lt;p&gt;OK, Thanks.&lt;br/&gt;
It happens rarely.I can&apos;t get a better change now.&lt;/p&gt;</comment>
                            <comment id="13084957" author="sunnygao" created="Mon, 15 Aug 2011 04:48:05 +0000"  >&lt;p&gt;Hi all. I have a new idea for this issue. why don&apos;t we get the regionserver list from zk when it is failover? &lt;br/&gt;
we can avoid this case that the hlog is splited but region server is servering.&lt;/p&gt;</comment>
                            <comment id="13090853" author="sunnygao" created="Thu, 25 Aug 2011 07:48:54 +0000"  >&lt;p&gt;I study the TRUNK. It has fixed. So we can close this issue.&lt;/p&gt;

&lt;p&gt;Trunk code:&lt;br/&gt;
    // Wait for region servers to report in.&lt;br/&gt;
    this.serverManager.waitForRegionServers(status);&lt;br/&gt;
    // Check zk for regionservers that are up but didn&apos;t register&lt;br/&gt;
    for (ServerName sn: this.regionServerTracker.getOnlineServers()) {&lt;br/&gt;
      if (!this.serverManager.isServerOnline(sn)) &lt;/p&gt;
{
        // Not registered; add it.
        LOG.info(&quot;Registering server found up in zk: &quot; + sn);
        this.serverManager.recordNewServer(sn, HServerLoad.EMPTY_HSERVERLOAD);
      }
&lt;p&gt;    }&lt;/p&gt;</comment>
                            <comment id="13092189" author="stack" created="Sat, 27 Aug 2011 04:04:31 +0000"  >&lt;p&gt;Resolving after Gaojinchao did research and found it fixed in TRUNK.  Thanks Gaojinchao.&lt;/p&gt;</comment>
                            <comment id="13179764" author="ekoontz" created="Wed, 4 Jan 2012 19:07:59 +0000"  >&lt;p&gt;The change that gaojinchao refers to was done here.&lt;/p&gt;</comment>
                            <comment id="13185977" author="ekoontz" created="Fri, 13 Jan 2012 23:24:14 +0000"  >&lt;p&gt;I would like to reopen this because I believe that the bug still exists in the 0.90 branch (though not in trunk as Gaojinchao said).&lt;/p&gt;</comment>
                            <comment id="13185980" author="ekoontz" created="Fri, 13 Jan 2012 23:25:57 +0000"  >&lt;p&gt;Adds new HMaster::verifyMetaTablesAreUp() method to avoid NPE in AssignmentManager::processFailover().&lt;/p&gt;</comment>
                            <comment id="13185982" author="hadoopqa" created="Fri, 13 Jan 2012 23:31:49 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12510546/HBASE-3933.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12510546/HBASE-3933.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/756//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/756//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13185991" author="zhihyu@ebaysf.com" created="Fri, 13 Jan 2012 23:47:23 +0000"  >&lt;p&gt;@Eugene:&lt;br/&gt;
Have you run all unit tests ?&lt;/p&gt;

&lt;p&gt;Normally a new JIRA should be opened since the original issue was resolved 4 months ago.&lt;/p&gt;</comment>
                            <comment id="13186014" author="zhihyu@ebaysf.com" created="Sat, 14 Jan 2012 00:20:33 +0000"  >&lt;p&gt;verifyMetaTablesAreUp isn&apos;t in HMaster under TRUNK.&lt;br/&gt;
So this is not a backport.&lt;/p&gt;</comment>
                            <comment id="13186097" author="sunnygao" created="Sat, 14 Jan 2012 05:20:12 +0000"  >&lt;p&gt;@Eugene &lt;br/&gt;
Yes the issue exits in branch90. I avoid this by increasing &quot;hbase.master.wait.on.regionservers.timeout&quot;&lt;/p&gt;</comment>
                            <comment id="13186098" author="sunnygao" created="Sat, 14 Jan 2012 05:30:03 +0000"  >&lt;p&gt;@Eugene &lt;br/&gt;
In your patches, You only deale with the root/meta regionserver. If a normal regionserver registers laterly.&lt;br/&gt;
Master will process it as a dead one. Some regions in the later one will be opened twice.&lt;/p&gt;</comment>
                            <comment id="13186262" author="ekoontz" created="Sat, 14 Jan 2012 17:18:25 +0000"  >&lt;p&gt;@Zhihong, correct that it&apos;s not a backport - would this mean that I should not open a new JIRA but rather continue with this one?&lt;/p&gt;</comment>
                            <comment id="13186267" author="zhihyu@ebaysf.com" created="Sat, 14 Jan 2012 17:26:40 +0000"  >&lt;p&gt;I think opening a new JIRA would be better.&lt;br/&gt;
Please also address Jinchao&apos;s comment.&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="13186269" author="ekoontz" created="Sat, 14 Jan 2012 17:28:54 +0000"  >&lt;p&gt;increase test timeout on new &lt;/p&gt;

&lt;p&gt;testMasterFailoverWithSlowRS() test.&lt;/p&gt;</comment>
                            <comment id="13186272" author="hadoopqa" created="Sat, 14 Jan 2012 17:32:57 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12510589/HBASE-3933.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12510589/HBASE-3933.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/762//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/762//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13186275" author="ekoontz" created="Sat, 14 Jan 2012 17:38:07 +0000"  >&lt;p&gt;@Zhihong, ok, will open new JIRA and link here. @Gaojinchao, will address your comments in the new JIRA.&lt;/p&gt;</comment>
                            <comment id="13186562" author="ekoontz" created="Sun, 15 Jan 2012 18:56:09 +0000"  >&lt;p&gt;Please see &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5202&quot; title=&quot;NPE during Master failover in master.AssignmentManager.regionOnline()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5202&quot;&gt;&lt;del&gt;HBASE-5202&lt;/del&gt;&lt;/a&gt; for the new JIRA.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12427420">HBASE-1502</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12538447">HBASE-5202</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12510589" name="HBASE-3933.patch" size="13723" author="ekoontz" created="Sat, 14 Jan 2012 17:28:54 +0000"/>
                            <attachment id="12510546" name="HBASE-3933.patch" size="13707" author="ekoontz" created="Fri, 13 Jan 2012 23:30:45 +0000"/>
                            <attachment id="12480840" name="Hmastersetup0.90" size="3597" author="sunnygao" created="Mon, 30 May 2011 12:35:17 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 30 May 2011 14:37:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>27095</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 48 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hokv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>101244</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>It was recommended to continue working on this on a new JIRA since this one was closed and was too old to continue with.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>