<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:47:08 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-747/HBASE-747.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-747] Add a simple way to do batch updates of many rows</title>
                <link>https://issues.apache.org/jira/browse/HBASE-747</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Add a simple to do batch updates of many rows as described in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-48&quot; title=&quot;[hbase] Bulk load tools&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-48&quot;&gt;&lt;del&gt;HBASE-48&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12400322">HBASE-747</key>
            <summary>Add a simple way to do batch updates of many rows</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jdcryans">Jean-Daniel Cryans</assignee>
                                    <reporter username="jdcryans">Jean-Daniel Cryans</reporter>
                        <labels>
                    </labels>
                <created>Tue, 15 Jul 2008 21:37:43 +0000</created>
                <updated>Fri, 22 Aug 2008 21:13:20 +0000</updated>
                            <resolved>Wed, 16 Jul 2008 21:14:29 +0000</resolved>
                                    <version>0.2.0</version>
                                    <fixVersion>0.2.0</fixVersion>
                                    <component>Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12613797" author="jimk" created="Wed, 16 Jul 2008 00:16:37 +0000"  >&lt;p&gt;Somehow the client needs to sort row updates so that whatever batch is sent to the region server, the region server is hosting all those rows.  Any it is not hosting (because they are in a different region and there is a different region server for that region), will error out so the client would be responsible for partitioning updates to the correct servers.&lt;/p&gt;

&lt;p&gt;Question: Suppose that in the middle of one of these massive updates, the region splits. It is unlikely that the same region server will serve either or both of the children. How will the client handle that?&lt;/p&gt;</comment>
                            <comment id="12613798" author="stack" created="Wed, 16 Jul 2008 00:22:49 +0000"  >&lt;p&gt;I was thinking that a batchupdate would take out a read lock preventing splits?&lt;/p&gt;</comment>
                            <comment id="12613804" author="jimk" created="Wed, 16 Jul 2008 00:29:00 +0000"  >&lt;p&gt;Taking out a read lock to prevent splits seems reasonable provided that the batch is not huge. Suppose someone submitted 1GB in a single patch? It would take quite a while for HBase to recover from that.&lt;/p&gt;</comment>
                            <comment id="12613811" author="jdcryans" created="Wed, 16 Jul 2008 01:41:31 +0000"  >&lt;p&gt;Well I was thinking about only implementing the simple version e.g. wrapping a bunch of row mutations in a single update. I consider two different options on how the client could interact with region servers:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Simplest way, it does the equivalent of doing a series of BatchUpdate in an iteration . There would be no gain using the API directly, those using Thrift would have far less RPCs to do. The code would be something like :&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; void commit(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; BatchUpdate batchUpdate) 
  &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;(BatchRowUpdate rowUpdate : batchUpdate.getRowUpdates()) {
      connection.getRegionServerWithRetries(
        &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ServerCallable&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt;&amp;gt;(connection, tableName, rowUpdate.getRow()) {
        ...
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;A better version would group rows that goes in the same server so that it reduces RPCs between the client and the region servers.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I think the first one would be doable for 0.2.0 (which is why I put there in the first place).&lt;/p&gt;

&lt;p&gt;Jim, if there&apos;s a 1GB update, I guess the client will have first to handle a massive OOME &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  But yeah, this solution does not handle big updates(the javadoc would have to reflect this), the more badass one I described in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-48&quot; title=&quot;[hbase] Bulk load tools&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-48&quot;&gt;&lt;del&gt;HBASE-48&lt;/del&gt;&lt;/a&gt; would.&lt;/p&gt;

&lt;p&gt;Finally, I think we should put such a facility in 0.2.0 since this release is supposed to offer a stable API. Then we can implement something more efficient for 0.3.0 or in a 0.2 minor revision.&lt;/p&gt;</comment>
                            <comment id="12613989" author="jdcryans" created="Wed, 16 Jul 2008 15:37:33 +0000"  >&lt;p&gt;Patch implemented using the simplest description. It doesn&apos;t break the 0.2 API and allows further improvements to be hidden.&lt;/p&gt;</comment>
                            <comment id="12614084" author="jdcryans" created="Wed, 16 Jul 2008 20:11:56 +0000"  >&lt;p&gt;Version without the RowsBatchUpdate&lt;/p&gt;</comment>
                            <comment id="12614103" author="jimk" created="Wed, 16 Jul 2008 21:09:38 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12614106" author="jimk" created="Wed, 16 Jul 2008 21:14:29 +0000"  >&lt;p&gt;Committed. Thanks for the patch Jean-Daniel&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12400321">HBASE-746</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12386221" name="hbase-747-simple-v2.patch" size="2271" author="jdcryans" created="Wed, 16 Jul 2008 20:11:56 +0000"/>
                            <attachment id="12386191" name="hbase-747-simple.patch" size="5480" author="jdcryans" created="Wed, 16 Jul 2008 15:37:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 16 Jul 2008 00:16:37 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31834</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 23 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h97b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98753</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>