<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:34:36 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6193/HBASE-6193.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6193] REST Api for HBase administrative tasks</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6193</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;For enabling &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4368&quot; title=&quot;Expose processlist in shell (per regionserver and perhaps by cluster)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4368&quot;&gt;&lt;del&gt;HBASE-4368&lt;/del&gt;&lt;/a&gt;, it may be useful to have embedded REST API server for each region server, and HBase Master can either aggregate or proxy/redirect REST API base on administrative task functions.&lt;/p&gt;

&lt;p&gt;The popular admin task that can take advantage of this setup are:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Trigger table compaction&lt;/li&gt;
	&lt;li&gt;Show process list&lt;/li&gt;
	&lt;li&gt;Health check&lt;/li&gt;
	&lt;li&gt;Show black listed servers&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12559888">HBASE-6193</key>
            <summary>REST Api for HBase administrative tasks</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="eyang">Eric Yang</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 Jun 2012 19:48:07 +0000</created>
                <updated>Sat, 9 Jun 2012 17:01:19 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13291956" author="apurtell" created="Fri, 8 Jun 2012 20:14:02 +0000"  >&lt;p&gt;-1 We already have a REST gateway for this purpose.  Why don&apos;t you propose extending that for your needs. &lt;/p&gt;

&lt;p&gt;Edit: More detailed explanation: You are proposing what sounds like a HDFS HTTPFS-like approach for rearchitecting the HBase REST interface. In general I&apos;m sympathetic to this idea but for the administrative use cases you have presented, none require such invasive change. If you do want to pursue this approach, it would be helpful to attach a design document that successfully argues why the current REST gateway or an adaptation thereof cannot suffice. Also, if rearchitecting REST in this way, it&apos;s not sufficient to only handle administrative tasks. We should not have more than one framework for interacting with HBase RESTfully, it would be a maintenance burden and confusing.&lt;/p&gt;</comment>
                            <comment id="13291957" author="apurtell" created="Fri, 8 Jun 2012 20:16:21 +0000"  >&lt;p&gt;See also  &lt;a href=&quot;http://search-hadoop.com/m/aeqTh1cykpo1/Rethinking+REST&amp;amp;subj=Rethinking+REST+Re+HBASE+4368+and+friends+&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://search-hadoop.com/m/aeqTh1cykpo1/Rethinking+REST&amp;amp;subj=Rethinking+REST+Re+HBASE+4368+and+friends+&lt;/a&gt;. The question was also posed there. &lt;/p&gt;</comment>
                            <comment id="13292125" author="eyang" created="Sat, 9 Jun 2012 00:34:16 +0000"  >&lt;p&gt;Hi Andrew,&lt;/p&gt;

&lt;p&gt;This jira is posted based on information of the mailing list thread and gather interests in enhancing HBase REST API.  This jira is not rearchitecting what is already available, but embedded REST api in region server makes a lot of sense for long term maintenance of HBase.  The gateway proxy approach works too.&lt;/p&gt;</comment>
                            <comment id="13292141" author="apurtell" created="Sat, 9 Jun 2012 00:54:27 +0000"  >&lt;blockquote&gt;&lt;p&gt;This jira is not rearchitecting what is already available, but embedded REST api in region server makes a lot of sense for long term maintenance of HBase. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;By definition embedding a REST server per daemon is a different architectural approach than using the existing gateway.&lt;/p&gt;

&lt;p&gt;Please explain why using the gateway for administrative function is insufficient.&lt;/p&gt;

&lt;p&gt;Edit: Also, please explain the statement &quot;embedded REST api in region server makes a lot of sense for long term maintenance of HBase&quot; in detail.&lt;/p&gt;</comment>
                            <comment id="13292178" author="eyang" created="Sat, 9 Jun 2012 03:10:28 +0000"  >&lt;p&gt;REST api gateway may be difficult to secure the system.  The proxy approach requires two security implementations for outward facing security and internal security implementation.  Where the embedded rest api server in region server would ensure only one security implementation is required.  By adding rest api into the region server code, it reduces wrapper code by one layer.  Otherwise each new feature implemented in the region server, the rest gateway should be updated with corresponding new feature.  It seems to to be higher maintenance with rest gateway approach.  In addition, rest proxy increases the latency for HBase response time by one hop.  If the rest gateway is busy serving scan query and become none responsive, it is unclear to the administrator if the none responsiveness is caused by admin task or someone had a large scan query for another region server.&lt;/p&gt;</comment>
                            <comment id="13292382" author="apurtell" created="Sat, 9 Jun 2012 16:48:50 +0000"  >&lt;blockquote&gt;&lt;p&gt;REST api gateway may be difficult to secure the system. The proxy approach requires two security implementations for outward facing security and internal security implementation. Where the embedded rest api server in region server would ensure only one security implementation is required.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The counter argument is you should never let untrusted access onto the cluster directly. This is why I dislike HTTPFS and prefer instead the design of Hoop. The gateway provides an effective security perimeter. Because it is RESTful, security can be layered on top of the HTTP transactions as the system integrator desires via the many options for doing so developed over the years for web servers.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;In addition, rest proxy increases the latency for HBase response time by one hop.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The counter argument is REST endpoints built into the RegionServers add the overheads of HTTP processing. And we have to build this new thing into the master that issues HTTP redirects? &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;If the rest gateway is busy serving scan query and become none responsive&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;An advantage of the gateway approach is you can scale it independent of the RegionServer tier. So if it&apos;s slow, add more workers. Use a proxy that supports sticky sessions to preserve scanner semantics.&lt;/p&gt;

</comment>
                            <comment id="13292384" author="apurtell" created="Sat, 9 Jun 2012 16:56:02 +0000"  >&lt;blockquote&gt;&lt;p&gt;Otherwise each new feature implemented in the region server, the rest gateway should be updated with corresponding new feature. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m not sure this holds.&lt;/p&gt;

&lt;p&gt;There is client activity, and then there is administrative activity.&lt;/p&gt;

&lt;p&gt;Certainly for each new feature implemented in the client, the REST interface should be updated, whatever its form. See the RemoteHTable class in o.a.h.hbase.rest.client. I suppose also RemoteHAdmin to provide full API coverage available to Java clients.&lt;/p&gt;

&lt;p&gt;Our existing design does the above and adds small InfoServer based servers for other types of administrative activity, like querying JMX exported information in JSON encoding. You may not want to allow users to do that. The current design segregates client and that second class of administrative access well.&lt;/p&gt;

&lt;p&gt;I really think you need to produce a design document that covers all of these issues and makes a convincing argument before we can proceed further.&lt;/p&gt;

&lt;p&gt;Edit: It bears repeating, but I am not opposed to your approach in principal. However a big design change like this requires justification that I&apos;m just not seeing yet.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 8 Jun 2012 20:14:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>256566</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 27 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hupj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>102237</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>