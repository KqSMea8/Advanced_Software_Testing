<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:53:20 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1416/HBASE-1416.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1416] Pool of commit loggers in each HRegionServer</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1416</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1394&quot; title=&quot;Uploads sometimes fall to 0 requests/second (Binding up on HLog#append?)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1394&quot;&gt;&lt;del&gt;HBASE-1394&lt;/del&gt;&lt;/a&gt; discusses pools of loggers as means of our being able to dump out the logs faster; commit log is log pole in a write transaction.   This issue is about implementing the pool of writers.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12425297">HBASE-1416</key>
            <summary>Pool of commit loggers in each HRegionServer</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="7">Later</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 May 2009 05:32:18 +0000</created>
                <updated>Thu, 4 Feb 2010 04:50:54 +0000</updated>
                            <resolved>Thu, 4 Feb 2010 04:38:31 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12749411" author="apurtell" created="Mon, 31 Aug 2009 08:00:38 +0000"  >&lt;p&gt;Up on hbase-dev@ Ryan writes:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;we need to make hlog flush faster, it currently does only 700 ops/sec&lt;br/&gt;
when we flush every entry.&lt;/p&gt;

&lt;p&gt;it&apos;d be nice if we could do something clever, such as:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;use multiple logs&lt;/li&gt;
	&lt;li&gt;detect multiple waiting clients and better batch their commits&lt;/li&gt;
	&lt;li&gt;group commits for bulk import&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;This issue addresses the first point. &lt;/p&gt;

&lt;p&gt;While considering this, dynamically size the pool according to a concurrency measure. Spin up new writers on demand until some configurable upper bound. A simple strategy to try first might be 2 * ceil(log(load)), smoothed. Terminate excess writers at roll time to hold down unnecessary HDFS resource use.&lt;/p&gt;

&lt;p&gt;In HLog.doWrite we write each HLogKey and KeyValue to the log, which is a SequenceFile. Use hfile instead? Can HFile do I/O batching? Otherwise I think to group commits we&apos;d need to introduce a new writable which bundles edits together. &lt;/p&gt;

&lt;p&gt;Moving into 0.21.&lt;/p&gt;</comment>
                            <comment id="12770730" author="apurtell" created="Wed, 28 Oct 2009 00:43:57 +0000"  >&lt;p&gt;Split out writes into a commit thread per WAL after &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1939&quot; title=&quot;HLog group commit&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1939&quot;&gt;&lt;del&gt;HBASE-1939&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12792910" author="apurtell" created="Sat, 19 Dec 2009 21:46:17 +0000"  >&lt;p&gt;Do we still want to do this? Seems some of Ryan&apos;s ideas have been implemented as &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1939&quot; title=&quot;HLog group commit&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1939&quot;&gt;&lt;del&gt;HBASE-1939&lt;/del&gt;&lt;/a&gt; already.&lt;/p&gt;

&lt;p&gt;I was playing around with this the other day after committing &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2059&quot; title=&quot;Break out WAL reader and writer impl from HLog&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2059&quot;&gt;&lt;del&gt;HBASE-2059&lt;/del&gt;&lt;/a&gt;. On that note, implementing an HLog.Writer that stripes edits over a pool of logs under a directory instead of a single file works ok on read and write paths but split and roll code assumes the log is a single file so barf when they access a dir instead; the HLog.Writer interface would need to be widened with split and roll methods to make that work cleanly. Anyway, sync is still a log pole and with striped writes over a pool of HLogs there are more dirty blocks to sync. Unless the current edit load is high we end up dirtying small bits of a bunch of blocks where instead we should just write them all into one as they&apos;ll all fit in there. &lt;/p&gt;</comment>
                            <comment id="12792924" author="stack" created="Sat, 19 Dec 2009 22:51:54 +0000"  >&lt;p&gt;Below are Ryan&apos;s comments from the list.&lt;/p&gt;

&lt;p&gt;&quot;With deferred log flush we can choose between high durability and speed on a&lt;br/&gt;
per table basis. I think we should shelf this for now, since with write&lt;br/&gt;
buffering in the client and the adjusted sync calls, we are very fast at&lt;br/&gt;
bulk data import.&quot;&lt;/p&gt;

&lt;p&gt;J-D says write speeds are up with hbase-1939.&lt;/p&gt;

&lt;p&gt;I&apos;m good w/ punting out to 0.22 or beyond.  Let me move it.&lt;/p&gt;</comment>
                            <comment id="12792925" author="stack" created="Sat, 19 Dec 2009 22:52:30 +0000"  >&lt;p&gt;Moved it out of 0.21 and made it trivial priority.&lt;/p&gt;</comment>
                            <comment id="12829438" author="apurtell" created="Thu, 4 Feb 2010 04:38:31 +0000"  >&lt;p&gt;Resolving as Later. I believe everyone agrees this issue is something to defer, probably indefinitely.&lt;/p&gt;</comment>
                            <comment id="12829446" author="jdcryans" created="Thu, 4 Feb 2010 04:50:54 +0000"  >&lt;p&gt;I agree, since we always write on local node first then having multiple writers won&apos;t help. Also the 2 latter points were implemented so the appending/hflushing situation is actually pretty good.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12439235">HBASE-1939</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 31 Aug 2009 08:00:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25744</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 46 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hd47:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99387</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>