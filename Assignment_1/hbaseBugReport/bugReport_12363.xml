<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:32:17 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-12363/HBASE-12363.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-12363] Improve how KEEP_DELETED_CELLS works with MIN_VERSIONS</title>
                <link>https://issues.apache.org/jira/browse/HBASE-12363</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Brainstorming...&lt;/p&gt;

&lt;p&gt;This morning in the train (of all places) I realized a fundamental issue in how KEEP_DELETED_CELLS is implemented.&lt;/p&gt;

&lt;p&gt;The problem is around knowing when it is safe to remove a delete marker (we cannot remove it unless all cells affected by it are remove otherwise).&lt;br/&gt;
This was particularly hard for family marker, since they sort before all cells of a row, and hence scanning forward through an HFile you cannot know whether the family markers are still needed until at least the entire row is scanned.&lt;/p&gt;

&lt;p&gt;My solution was to keep the TS of the oldest put in any given HFile, and only remove delete markers older than that TS.&lt;br/&gt;
That sounds good on the face of it... But now imagine you wrote a version of ROW 1 and then never update it again. Then later you write a billion other rows and delete them all. Since the TS of the cells in ROW 1 is older than all the delete markers for the other billion rows, these will never be collected... At least for the region that hosts ROW 1 after a major compaction.&lt;/p&gt;

&lt;p&gt;Note, in a sense that is what HBase is supposed to do when keeping deleted cells: Keep them until they would be removed by some other means (for example TTL, or MAX_VERSION when new versions are inserted).&lt;br/&gt;
The specific problem here is that even as all KVs affected by a delete marker are expired this way the marker would not be removed if there just one older KV in the HStore.&lt;/p&gt;

&lt;p&gt;I don&apos;t see a good way out of this. In parent I outlined these four solutions:&lt;br/&gt;
So there are three options I think:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Only allow the new flag set on CFs with TTL set. MIN_VERSIONS would not apply to deleted rows or delete marker rows (wouldn&apos;t know how long to keep family deletes in that case). (MAX)VERSIONS would still be enforced on all rows types except for family delete markers.&lt;/li&gt;
	&lt;li&gt;Translate family delete markers to column delete marker at (major) compaction time.&lt;/li&gt;
	&lt;li&gt;Change HFileWriterV* to keep track of the earliest put TS in a store and write it to the file metadata. Use that use expire delete marker that are older and hence can&apos;t affect any puts in the file.&lt;/li&gt;
	&lt;li&gt;Have Store.java keep track of the earliest put in internalFlushCache and compactStore and then append it to the file metadata. That way HFileWriterV* would not need to know about KVs.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;And I implemented #4.&lt;/p&gt;

&lt;p&gt;I&apos;d love to get input on ideas.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12751187">HBASE-12363</key>
            <summary>Improve how KEEP_DELETED_CELLS works with MIN_VERSIONS</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12525597">HBASE-4536</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lhofhansl">Lars Hofhansl</assignee>
                                    <reporter username="lhofhansl">Lars Hofhansl</reporter>
                        <labels>
                            <label>Phoenix</label>
                    </labels>
                <created>Tue, 28 Oct 2014 18:18:29 +0000</created>
                <updated>Sat, 21 Feb 2015 23:45:53 +0000</updated>
                            <resolved>Wed, 5 Nov 2014 01:15:13 +0000</resolved>
                                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>0.98.8</fixVersion>
                    <fixVersion>0.99.2</fixVersion>
                                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>21</watches>
                                                                <comments>
                            <comment id="14187299" author="lhofhansl" created="Tue, 28 Oct 2014 19:03:16 +0000"  >&lt;p&gt;Specifically the problem is that a compaction scanner would have to buffer the entire row (to see if the family marker is needed), then if needed write the family marker followed by the row.&lt;/p&gt;</comment>
                            <comment id="14187330" author="lhofhansl" created="Tue, 28 Oct 2014 19:27:52 +0000"  >&lt;p&gt;Chatting with Jesse... One thing we could do is this:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;If we encounter a family delete marker in ScanQqueryMatcher (SQM), we scan forward (returning SKIP) to storescanner and record the oldest version of any cell we encounter for this row&lt;/li&gt;
	&lt;li&gt;Once we reach the end of the row, we seek back to the family delete we found (using a seek hint), and now use the oldest version found for this row (rather than the oldest row we found for the store).&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Involves a bunch of more seeking, but only if we actually encounter a family delete marker. The logic would also look even less nice than it does now.&lt;br/&gt;
Any better ideas?&lt;/p&gt;</comment>
                            <comment id="14187388" author="lhofhansl" created="Tue, 28 Oct 2014 20:28:06 +0000"  >&lt;p&gt;3. When we encounter a column or version delete marker, remember it until we see the next Put for the same column. If there is no Put following, we do not have to write the delete marker, otherwise we do.&lt;/p&gt;

&lt;p&gt;Man, this is going to mess up the SQM logic.&lt;/p&gt;</comment>
                            <comment id="14187463" author="lhofhansl" created="Tue, 28 Oct 2014 21:05:54 +0000"  >&lt;p&gt;4. Remember DeleteFamilyVersion markers and keep only if that exact version still exists.&lt;/p&gt;</comment>
                            <comment id="14187465" author="lhofhansl" created="Tue, 28 Oct 2014 21:07:28 +0000"  >&lt;p&gt;Here&apos;s how things would sort (for reference):&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hbase(main):001:0&amp;gt; scan &apos;x&apos;, {RAW=&amp;gt;true, VERSIONS=&amp;gt;10}
ROW                                 COLUMN+CELL                                                                                          
 r1                                 column=y:, timestamp=35, type=DeleteFamily                                                           
 r1                                 column=y:1, timestamp=40, value=v1                                                                   
 r1                                 column=y:1, timestamp=30, value=v1                                                                   
 r1                                 column=y:1, timestamp=25, type=Delete                                                                
 r1                                 column=y:1, timestamp=20, value=v1                                                                   
 r1                                 column=y:1, timestamp=15, type=DeleteColumn                                                          
 r1                                 column=y:1, timestamp=10, value=v1                                                                   
 r1                                 column=y:1, timestamp=1, value=v1                                                                    
1 row(s) in 0.2880 seconds
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14187946" author="lhofhansl" created="Wed, 29 Oct 2014 03:34:40 +0000"  >&lt;p&gt;One more update: version and column delete marker are OK as they are version counted inline with any puts, and as puts are added they will eventually expire themselves without relying on the HStore global timestamp.&lt;/p&gt;

&lt;p&gt;Only the family delete markers need special treatment, because they do sort inline with the columns they affect (as they affect all columns).&lt;/p&gt;

&lt;p&gt;I will start by added a few more tests to isolate this behavior.&lt;/p&gt;</comment>
                            <comment id="14187959" author="lhofhansl" created="Wed, 29 Oct 2014 03:53:45 +0000"  >&lt;p&gt;Simple unittest test that illustrates the problem.&lt;/p&gt;</comment>
                            <comment id="14189326" author="lhofhansl" created="Wed, 29 Oct 2014 23:56:29 +0000"  >&lt;p&gt;I&apos;d like to commit at least the test for now.&lt;/p&gt;

&lt;p&gt;In the end this is not a show stopper, it&apos;s working as designed (as per parent). The problem is limited to a store (Region + CF) as the oldest Put TS is calculated per store.&lt;/p&gt;

&lt;p&gt;The consequences are sometimes (very) unexpected, though. I&apos;ll continue to think about simpler ways to improve this.&lt;br/&gt;
It&apos;s also OK to do a bit more work as part of compaction as they are asynchronous anyway. So the approach outlined above could work.&lt;/p&gt;</comment>
                            <comment id="14189333" author="apurtell" created="Wed, 29 Oct 2014 23:59:42 +0000"  >&lt;blockquote&gt;&lt;p&gt;I&apos;d like to commit at least the test for now.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14191690" author="yuzhihong@gmail.com" created="Fri, 31 Oct 2014 11:01:50 +0000"  >&lt;p&gt;+1 on getting test in. &lt;/p&gt;

&lt;p&gt;Nit: fix typo on commit: compactin&lt;/p&gt;</comment>
                            <comment id="14192201" author="lhofhansl" created="Fri, 31 Oct 2014 18:27:05 +0000"  >&lt;p&gt;Thinking further ... A way around this issue (at least for our use case at Salesforce) is to keep delete marker no longer than the TTL.&lt;/p&gt;

&lt;p&gt;We use TTL and MIN_VERSIONS for our backups, and hence there could be a long expired (due to TTL) Put KV that is deleted but kept around because of MIN_VERSIONS - i.e. it is expired &lt;b&gt;and&lt;/b&gt; deleted, but it might be last version and so technically HBase has to hang to it.&lt;/p&gt;

&lt;p&gt;This could either be an option to KEEP_DELETED_CELLS i.e. and enum with ALWAYS and TTL - that&apos;ll be hard to make backward compatible.&lt;br/&gt;
Or it could be a config option. (Or we don&apos;t do this at all, we&apos;ll do it as internal patch. I&apos;d prefer not to do that.)&lt;/p&gt;

&lt;p&gt;I&apos;ll prepare a patch with this as a config option and we&apos;ll go from there.&lt;/p&gt;</comment>
                            <comment id="14192220" author="apurtell" created="Fri, 31 Oct 2014 18:34:32 +0000"  >&lt;p&gt;We could make a redefinition of KEEP_DELETED_CELLS backwards compatible, similar to that proposal I made in our internal discussion:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;If &quot;false&quot;, don&apos;t do anything different from today since we aren&apos;t retaining deleted cells.&lt;/li&gt;
	&lt;li&gt;If &quot;true&quot;, delete markers are not subject to the family TTL setting.&lt;/li&gt;
	&lt;li&gt;If &quot;TTL&quot;, delete markers are subject to the family&apos;s TTL setting.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The first two alternatives above are backwards compatible with how this setting is used in current schemas.&lt;/p&gt;</comment>
                            <comment id="14192419" author="lhofhansl" created="Fri, 31 Oct 2014 20:27:46 +0000"  >&lt;p&gt;In the shell we can that. If it&apos;s an enum we&apos;d also have to pass the value as a string in the shell, right? (not sure now). HColumnDescriptor we could fix up as well.&lt;/p&gt;</comment>
                            <comment id="14192476" author="apurtell" created="Fri, 31 Oct 2014 20:58:46 +0000"  >&lt;p&gt;True.&lt;br/&gt;
In 0.98 HCD, we have&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; getKeepDeletedCells() {
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; value = getValue(KEEP_DELETED_CELLS);
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (value != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt;.valueOf(value).booleanValue();
    }
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; DEFAULT_KEEP_DELETED;
  }

  /**
   * @param keepDeletedCells True &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; deleted rows should not be collected
   * immediately.
   * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; chained invocation)
   */
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; HColumnDescriptor setKeepDeletedCells(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; keepDeletedCells) {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; setValue(KEEP_DELETED_CELLS, &lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt;.toString(keepDeletedCells));
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We could rewrite these to be backwards compatible and add a new method that accepts a new Enum. &lt;/p&gt;</comment>
                            <comment id="14192577" author="lhofhansl" created="Fri, 31 Oct 2014 21:58:48 +0000"  >&lt;p&gt;One of these features where you couldn&apos;t roll back after you enabled KDC=TTL, but I think that&apos;s OK.&lt;/p&gt;</comment>
                            <comment id="14192709" author="yuzhihong@gmail.com" created="Fri, 31 Oct 2014 23:16:05 +0000"  >&lt;p&gt;Another choice is to introduce new option which governs whether KEEP_DELETED_CELLS is subject to the family&apos;s TTL setting.&lt;br/&gt;
Default is not subject to family&apos;s TTL setting.&lt;br/&gt;
This way we achieve backward compatibility.&lt;/p&gt;

&lt;p&gt;My two cents.&lt;/p&gt;</comment>
                            <comment id="14192712" author="apurtell" created="Fri, 31 Oct 2014 23:17:33 +0000"  >&lt;blockquote&gt;&lt;p&gt;Another choice is to introduce new option which governs whether KEEP_DELETED_CELLS is subject to the family&apos;s TTL setting.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That would be more confusing, now you need to look at three settings to figure out what KEEP_DELETED_CELLS means in your schema. &lt;/p&gt;</comment>
                            <comment id="14192990" author="lhofhansl" created="Sat, 1 Nov 2014 06:37:18 +0000"  >&lt;p&gt;Here&apos;s a patch.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Adds new TTL option to KEEP_DELETED_CELLS&lt;/li&gt;
	&lt;li&gt;100% backwards compatible in HColumnDescriptor (can parse the old &apos;true&apos;, &apos;false&apos; string)&lt;/li&gt;
	&lt;li&gt;100% compatible in shell (arg.to_s.upcase so boolean and strings will work exactly as before)&lt;/li&gt;
	&lt;li&gt;the only difference is that a newly created table will show &apos;TRUE&apos; instead of &apos;true&apos;; even that is compatible forward compatible for old case, as the old code will try to parse it as Boolean&lt;/li&gt;
	&lt;li&gt;added tests&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Now, ScanQueryMatcher doesn&apos;t exactly look nicer now. If somebody suggests some easy simplifications here I&apos;m happy to incorporate them. &lt;/p&gt;

&lt;p&gt;It&apos;s think it&apos;s time to refactor it... For another jira.&lt;/p&gt;

&lt;p&gt;TL;DR: with KEEP_DELETED_CELLS=&amp;gt;TTL deleted cells &lt;b&gt;and&lt;/b&gt; their delete markers are removed when the TTL expired (regardless of MIN_VERSION setting). I.e. one can keep TTL + MIN_VERSIONS and still get rid of old deleted rows.&lt;/p&gt;

&lt;p&gt;We could even add another enum: MAKERS_ONLY and remove the &quot;hbase.hstore.time.to.purge.deletes&quot; config option, but that&apos;s also another jira.&lt;/p&gt;</comment>
                            <comment id="14192991" author="hadoopqa" created="Sat, 1 Nov 2014 06:42:40 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12678669/12363-master.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12678669/12363-master.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12678669&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 27 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javac&lt;/font&gt;.  The patch appears to cause mvn compile goal to fail.&lt;/p&gt;

&lt;p&gt;    Compilation errors resume:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; COMPILATION ERROR : &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-client/src/main/java/org/apache/hadoop/hbase/HColumnDescriptor.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;162,23&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-client/src/main/java/org/apache/hadoop/hbase/HColumnDescriptor.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;429,36&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-client/src/main/java/org/apache/hadoop/hbase/HColumnDescriptor.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;794,10&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-client/src/main/java/org/apache/hadoop/hbase/HColumnDescriptor.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;819,48&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-client/src/main/java/org/apache/hadoop/hbase/HColumnDescriptor.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;162,63&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-client/src/main/java/org/apache/hadoop/hbase/HColumnDescriptor.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;798,14&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-client/src/main/java/org/apache/hadoop/hbase/HColumnDescriptor.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;811,61&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-client/src/main/java/org/apache/hadoop/hbase/HColumnDescriptor.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;811,85&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.2:compile (default-compile) on project hbase-client: Compilation failure: Compilation failure:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-client/src/main/java/org/apache/hadoop/hbase/HColumnDescriptor.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;162,23&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; symbol:   class KeepDeletedCells&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; location: class org.apache.hadoop.hbase.HColumnDescriptor&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-client/src/main/java/org/apache/hadoop/hbase/HColumnDescriptor.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;429,36&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; symbol:   class KeepDeletedCells&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; location: class org.apache.hadoop.hbase.HColumnDescriptor&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-client/src/main/java/org/apache/hadoop/hbase/HColumnDescriptor.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;794,10&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; symbol:   class KeepDeletedCells&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; location: class org.apache.hadoop.hbase.HColumnDescriptor&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-client/src/main/java/org/apache/hadoop/hbase/HColumnDescriptor.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;819,48&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; symbol:   class KeepDeletedCells&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; location: class org.apache.hadoop.hbase.HColumnDescriptor&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-client/src/main/java/org/apache/hadoop/hbase/HColumnDescriptor.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;162,63&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; symbol:   variable KeepDeletedCells&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; location: class org.apache.hadoop.hbase.HColumnDescriptor&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-client/src/main/java/org/apache/hadoop/hbase/HColumnDescriptor.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;798,14&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; symbol:   variable KeepDeletedCells&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; location: class org.apache.hadoop.hbase.HColumnDescriptor&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-client/src/main/java/org/apache/hadoop/hbase/HColumnDescriptor.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;811,61&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; symbol:   variable KeepDeletedCells&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; location: class org.apache.hadoop.hbase.HColumnDescriptor&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-client/src/main/java/org/apache/hadoop/hbase/HColumnDescriptor.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;811,85&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; symbol:   variable KeepDeletedCells&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; location: class org.apache.hadoop.hbase.HColumnDescriptor&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; To see the full stack trace of the errors, re-run Maven with the -e switch.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Re-run Maven using the -X switch to enable full debug logging.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; For more information about the errors and possible solutions, please read the following articles:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; After correcting the problems, you can resume the build with the command&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt;   mvn &amp;lt;goals&amp;gt; -rf :hbase-client&lt;/p&gt;


&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11554//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11554//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14192995" author="lhofhansl" created="Sat, 1 Nov 2014 06:53:19 +0000"  >&lt;p&gt;Whoops... Correct version this time.&lt;/p&gt;</comment>
                            <comment id="14193026" author="hadoopqa" created="Sat, 1 Nov 2014 08:48:34 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12678670/12363-master.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12678670/12363-master.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12678670&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 27 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 3784 checkstyle errors (more than the trunk&apos;s current 3781 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 release audit&lt;/font&gt;.  The applied patch generated 1 release audit warnings (more than the trunk&apos;s current 0 warnings).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +    return setValue(KEEP_DELETED_CELLS, (keepDeletedCells ? KeepDeletedCells.TRUE : KeepDeletedCells.FALSE).toString());&lt;br/&gt;
+    this.keepDeletedCells = scan.isRaw() ? KeepDeletedCells.TRUE : isUserScan ? KeepDeletedCells.FALSE : scanInfo.getKeepDeletedCells();&lt;br/&gt;
+    this.seePastDeleteMarkers = scanInfo.getKeepDeletedCells() != KeepDeletedCells.FALSE &amp;amp;&amp;amp; isUserScan;&lt;br/&gt;
+    ScanInfo scanInfo = new ScanInfo(null, 0, 1, HConstants.LATEST_TIMESTAMP, KeepDeletedCells.FALSE,&lt;br/&gt;
+      family.setKeepDeletedCells(org.apache.hadoop.hbase.KeepDeletedCells.valueOf(arg.delete(org.apache.hadoop.hbase.HColumnDescriptor::KEEP_DELETED_CELLS).to_s.upcase)) if arg.include?(org.apache.hadoop.hbase.HColumnDescriptor::KEEP_DELETED_CELLS)&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11555//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11555//testReport/&lt;/a&gt;&lt;br/&gt;
Release audit warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11555//artifact/patchprocess/patchReleaseAuditWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11555//artifact/patchprocess/patchReleaseAuditWarnings.txt&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11555//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11555//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11555//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11555//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11555//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11555//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11555//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11555//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11555//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11555//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11555//artifact/patchprocess/newPatchFindbugsWarningshbase-rest.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11555//artifact/patchprocess/newPatchFindbugsWarningshbase-rest.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11555//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11555//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11555//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11555//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11555//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11555//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11555//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11555//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11555//artifact/patchprocess/newPatchFindbugsWarningshbase-annotations.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11555//artifact/patchprocess/newPatchFindbugsWarningshbase-annotations.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11555//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11555//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11555//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11555//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14193213" author="yuzhihong@gmail.com" created="Sat, 1 Nov 2014 15:05:50 +0000"  >&lt;p&gt;What if a table with KEEP_DELETED_CELLS set to TTL is exported to a cluster which is running an older release ?&lt;br/&gt;
Would the exported table be parsed correctly ?&lt;/p&gt;</comment>
                            <comment id="14193510" author="lhofhansl" created="Sat, 1 Nov 2014 21:49:43 +0000"  >&lt;p&gt;Obviously that is not going to work. The old code would interpret that as not true (i.e. false) and have KEEP_DELETED_CELLS disabled.&lt;/p&gt;

&lt;p&gt;One would have to be aware of that before enabling the new feature.&lt;/p&gt;

&lt;p&gt;I also need to fix the long lines and put an interface annotation/comment/license into the KeepDeletedCells enum.&lt;/p&gt;</comment>
                            <comment id="14194838" author="lhofhansl" created="Mon, 3 Nov 2014 18:26:15 +0000"  >&lt;ul&gt;
	&lt;li&gt;added license&lt;/li&gt;
	&lt;li&gt;some more java doc&lt;/li&gt;
	&lt;li&gt;fixed long lines&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14195026" author="hadoopqa" created="Mon, 3 Nov 2014 20:18:58 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12678982/12363-v2.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12678982/12363-v2.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12678982&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 27 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 3782 checkstyle errors (more than the trunk&apos;s current 3781 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +    return setValue(KEEP_DELETED_CELLS, (keepDeletedCells ? KeepDeletedCells.TRUE : KeepDeletedCells.FALSE).toString());&lt;br/&gt;
+    ScanInfo scanInfo = new ScanInfo(null, 0, 1, HConstants.LATEST_TIMESTAMP, KeepDeletedCells.FALSE,&lt;br/&gt;
+      family.setKeepDeletedCells(org.apache.hadoop.hbase.KeepDeletedCells.valueOf(arg.delete(org.apache.hadoop.hbase.HColumnDescriptor::KEEP_DELETED_CELLS).to_s.upcase)) if arg.include?(org.apache.hadoop.hbase.HColumnDescriptor::KEEP_DELETED_CELLS)&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11568//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11568//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11568//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11568//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11568//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11568//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11568//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11568//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11568//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11568//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11568//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11568//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11568//artifact/patchprocess/newPatchFindbugsWarningshbase-rest.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11568//artifact/patchprocess/newPatchFindbugsWarningshbase-rest.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11568//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11568//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11568//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11568//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11568//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11568//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11568//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11568//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11568//artifact/patchprocess/newPatchFindbugsWarningshbase-annotations.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11568//artifact/patchprocess/newPatchFindbugsWarningshbase-annotations.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11568//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11568//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11568//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11568//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14195230" author="lhofhansl" created="Mon, 3 Nov 2014 22:25:25 +0000"  >&lt;p&gt;Hopefully all long lines fixed.&lt;br/&gt;
Let me know what you think. I would like to commit this to 0.98 and later (and possibly even 0.94).&lt;/p&gt;</comment>
                            <comment id="14195436" author="hadoopqa" created="Tue, 4 Nov 2014 00:18:59 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12679050/12363-v3.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12679050/12363-v3.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12679050&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 27 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11570//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11570//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11570//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11570//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11570//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11570//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11570//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11570//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11570//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11570//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11570//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11570//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11570//artifact/patchprocess/newPatchFindbugsWarningshbase-rest.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11570//artifact/patchprocess/newPatchFindbugsWarningshbase-rest.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11570//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11570//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11570//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11570//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11570//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11570//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11570//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11570//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11570//artifact/patchprocess/newPatchFindbugsWarningshbase-annotations.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11570//artifact/patchprocess/newPatchFindbugsWarningshbase-annotations.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11570//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11570//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11570//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11570//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14195569" author="lhofhansl" created="Tue, 4 Nov 2014 02:05:08 +0000"  >&lt;p&gt;Looks good now. Any comment? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tedyu@apache.org&quot;&gt;Ted Yu&lt;/a&gt;?&lt;br/&gt;
We&apos;re going to do something like this at Salesforce. If we do it internally only we&apos;d something simpler, but I&apos;d still rather have this more elaborate fix in open source as it seems generally useful.&lt;/p&gt;</comment>
                            <comment id="14195643" author="stack" created="Tue, 4 Nov 2014 03:23:11 +0000"  >&lt;p&gt;Skimmed patch. LGTM.  Needs release note and a note in refguide (write the release note in a way in which it can get shoved in refguide)?  Nice the way it keeps old behavior.&lt;/p&gt;

&lt;p&gt;Did you do this:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I also need to fix the long lines and put an interface annotation/comment/license into the KeepDeletedCells enum.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Can do on commit.&lt;/p&gt;</comment>
                            <comment id="14195735" author="lhofhansl" created="Tue, 4 Nov 2014 05:37:36 +0000"  >&lt;p&gt;Last precomment was clean, so all long lines fixed &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I&apos;ll file three follow-up jiras:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Refactor ScanQueryMatcher. It has become a bit messy.&lt;/li&gt;
	&lt;li&gt;Rationalize the various options we have now: VERSIONS, TTL, MIN_VERSIONS, KEEP_DELETED_CELLS(TRUE|TTL). Not sure how to make that simpler&lt;/li&gt;
	&lt;li&gt;I still want to see how I can make this better. Thinking again about rewriting FAMILY makers as COLUMN markers during compaction.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="14196539" author="apurtell" created="Tue, 4 Nov 2014 18:31:31 +0000"  >&lt;p&gt;+1 on v3 patch&lt;/p&gt;</comment>
                            <comment id="14197058" author="lhofhansl" created="Tue, 4 Nov 2014 23:01:43 +0000"  >&lt;p&gt;0.98 patch.&lt;/p&gt;</comment>
                            <comment id="14197182" author="lhofhansl" created="Wed, 5 Nov 2014 00:06:46 +0000"  >&lt;p&gt;Did some more manual tests with 0.98:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;with unpatched version created two tables one with KEEP_DELETED_CELLS (KDC) enabled and one without&lt;/li&gt;
	&lt;li&gt;verified that patched version recognized the existing setting and does the right thing&lt;/li&gt;
	&lt;li&gt;with patched version create three tables: KDC true, KDC false, KDC ttl&lt;/li&gt;
	&lt;li&gt;verified that unpatched version now does the right thing (which includes treating KDC=ttl the same as false - which I cannot change anyway)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Going to commit to 0.98+. Thanks for bearing with me on this.&lt;br/&gt;
I&apos;m planning a blog post and HBase book entry with common setups and how to configure them in HBase via VERSIONS, MIN_VERSIONS, TTL, and KEEP_DELETED_CELLS.&lt;/p&gt;</comment>
                            <comment id="14197268" author="lhofhansl" created="Wed, 5 Nov 2014 01:06:43 +0000"  >&lt;p&gt;And a branch-1 patch&lt;/p&gt;</comment>
                            <comment id="14197286" author="lhofhansl" created="Wed, 5 Nov 2014 01:15:13 +0000"  >&lt;p&gt;Committed to 0.98, -1, and master.&lt;/p&gt;

&lt;p&gt;Thanks for the reviews.&lt;/p&gt;</comment>
                            <comment id="14197395" author="hudson" created="Wed, 5 Nov 2014 02:34:13 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.0 #425 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/425/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.0/425/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12363&quot; title=&quot;Improve how KEEP_DELETED_CELLS works with MIN_VERSIONS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12363&quot;&gt;&lt;del&gt;HBASE-12363&lt;/del&gt;&lt;/a&gt; Improve how KEEP_DELETED_CELLS works with MIN_VERSIONS. (larsh: rev 8427d67ff6ad3a92142d3ba0901dfb3afbb0f88d)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestMinVersions.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/test/java/org/apache/hadoop/hbase/TestHColumnDescriptor.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/HColumnDescriptor.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/HBaseTestCase.java&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/hbase/admin.rb&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestDefaultMemStore.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/KeepDeletedCells.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestStoreScanner.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ScanQueryMatcher.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestQueryMatcher.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestKeepDeletes.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ScanInfo.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestReversibleScanners.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14197431" author="hudson" created="Wed, 5 Nov 2014 03:20:19 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-TRUNK #5744 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/5744/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/5744/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12363&quot; title=&quot;Improve how KEEP_DELETED_CELLS works with MIN_VERSIONS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12363&quot;&gt;&lt;del&gt;HBASE-12363&lt;/del&gt;&lt;/a&gt; Improve how KEEP_DELETED_CELLS works with MIN_VERSIONS. (larsh: rev ecd708671c135052a175c88603d5215a0434e4fa)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestDefaultMemStore.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestMinVersions.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestQueryMatcher.java&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/hbase/admin.rb&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/HColumnDescriptor.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/test/java/org/apache/hadoop/hbase/TestHColumnDescriptor.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestStoreScanner.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestKeepDeletes.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ScanInfo.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ScanQueryMatcher.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/KeepDeletedCells.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/HBaseTestCase.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestReversibleScanners.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14197446" author="hudson" created="Wed, 5 Nov 2014 03:53:31 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.98 #654 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/654/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/654/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12363&quot; title=&quot;Improve how KEEP_DELETED_CELLS works with MIN_VERSIONS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12363&quot;&gt;&lt;del&gt;HBASE-12363&lt;/del&gt;&lt;/a&gt; Improve how KEEP_DELETED_CELLS works with MIN_VERSIONS. (larsh: rev 6d5d0e237b611e84871fe52bd492ee663ac56150)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestKeepDeletes.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/HColumnDescriptor.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/TestHColumnDescriptor.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestStoreScanner.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestReversibleScanners.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/hbase/admin.rb&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestMinVersions.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/HBaseTestCase.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ScanQueryMatcher.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestMemStore.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/KeepDeletedCells.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestQueryMatcher.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ScanInfo.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14197618" author="hudson" created="Wed, 5 Nov 2014 04:54:31 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98-on-Hadoop-1.1 #623 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/623/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/623/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12363&quot; title=&quot;Improve how KEEP_DELETED_CELLS works with MIN_VERSIONS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12363&quot;&gt;&lt;del&gt;HBASE-12363&lt;/del&gt;&lt;/a&gt; Improve how KEEP_DELETED_CELLS works with MIN_VERSIONS. (larsh: rev 6d5d0e237b611e84871fe52bd492ee663ac56150)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestQueryMatcher.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestReversibleScanners.java&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/hbase/admin.rb&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestStoreScanner.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ScanInfo.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ScanQueryMatcher.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestKeepDeletes.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/HColumnDescriptor.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/TestHColumnDescriptor.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestMemStore.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/KeepDeletedCells.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/HBaseTestCase.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestMinVersions.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14218828" author="lhofhansl" created="Thu, 20 Nov 2014 01:11:14 +0000"  >&lt;p&gt;So what I didn&apos;t realize... This breaks binary compatibility. KEEP_DELETED_CELLS used to be binary return from HCD.getKeepDeletedCells(), but now it&apos;s enum.&lt;br/&gt;
I do not see any way clean way around that.&lt;/p&gt;</comment>
                            <comment id="14218832" author="apurtell" created="Thu, 20 Nov 2014 01:14:06 +0000"  >&lt;p&gt;Crap. Carry on.&lt;/p&gt;</comment>
                            <comment id="14219619" author="lhofhansl" created="Thu, 20 Nov 2014 17:28:22 +0000"  >&lt;p&gt;I could fix this at least from compilation level by leaving the old methods in place in HCD that would still use booleans, and then add new ones that take the enum as argument.&lt;br/&gt;
The damage is done... Still worth doing?&lt;/p&gt;</comment>
                            <comment id="14219643" author="busbey" created="Thu, 20 Nov 2014 17:39:54 +0000"  >&lt;p&gt;I&apos;d say it&apos;s worth doing. I don&apos;t know if it&apos;s worth issuing a 0.98.8.1 or just a release note that calls out the issue for folks who might then wait for 0.98.9.&lt;/p&gt;</comment>
                            <comment id="14219647" author="jamestaylor" created="Thu, 20 Nov 2014 17:42:34 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14219674" author="apurtell" created="Thu, 20 Nov 2014 17:59:26 +0000"  >&lt;p&gt;Why don&apos;t we make a new issue that fixes this for 0.98.9?&lt;/p&gt;</comment>
                            <comment id="14220190" author="jesse_yates" created="Thu, 20 Nov 2014 23:13:19 +0000"  >&lt;p&gt;I think we are good from a wire compat standpoint, right? If so, then pushing the fix to 0.98.9 seems ok.&lt;/p&gt;</comment>
                            <comment id="14331685" author="enis" created="Sat, 21 Feb 2015 23:45:53 +0000"  >&lt;p&gt;Closing this issue after 0.99.2 release.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12756750">HBASE-12545</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="12756599">PHOENIX-1470</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12679352" name="12363-0.98.txt" size="36171" author="lhofhansl" created="Tue, 4 Nov 2014 23:01:43 +0000"/>
                            <attachment id="12679401" name="12363-1.0.txt" size="36260" author="lhofhansl" created="Wed, 5 Nov 2014 01:06:43 +0000"/>
                            <attachment id="12678670" name="12363-master.txt" size="34745" author="lhofhansl" created="Sat, 1 Nov 2014 06:53:19 +0000"/>
                            <attachment id="12677816" name="12363-test.txt" size="2786" author="lhofhansl" created="Wed, 29 Oct 2014 04:02:27 +0000"/>
                            <attachment id="12678982" name="12363-v2.txt" size="36121" author="lhofhansl" created="Mon, 3 Nov 2014 18:26:14 +0000"/>
                            <attachment id="12679050" name="12363-v3.txt" size="36368" author="lhofhansl" created="Mon, 3 Nov 2014 22:25:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 29 Oct 2014 23:59:42 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i21op3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>