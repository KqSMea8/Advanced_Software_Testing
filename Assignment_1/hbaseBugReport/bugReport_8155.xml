<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:52:33 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-8155/HBASE-8155.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-8155] Allow Record Compression for HLogs</title>
                <link>https://issues.apache.org/jira/browse/HBASE-8155</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;While &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4608&quot; title=&quot;HLog Compression&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4608&quot;&gt;&lt;del&gt;HBASE-4608&lt;/del&gt;&lt;/a&gt; allows for Key-intelligent log compression &amp;amp; custom extensions, Hadoop already allows for native compression support with SequenceFile.  We should allow the user to enable this functionality through the config.  Besides backwards compatibility &amp;amp; existing stabilized code, allowing users to enable record-level WAL support will allow support value compression.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12638009">HBASE-8155</key>
            <summary>Allow Record Compression for HLogs</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nspiegelberg">Nicolas Spiegelberg</reporter>
                        <labels>
                    </labels>
                <created>Wed, 20 Mar 2013 16:10:21 +0000</created>
                <updated>Sun, 8 Jun 2014 21:31:27 +0000</updated>
                            <resolved>Sun, 8 Jun 2014 21:31:27 +0000</resolved>
                                                                    <component>regionserver</component>
                    <component>wal</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                <comments>
                            <comment id="13607782" author="nspiegelberg" created="Wed, 20 Mar 2013 16:12:29 +0000"  >&lt;p&gt;In high bandwidth systems (our transactional records average 10KB), this give substantial size savings.  Preliminary results show 3x compression on LZO with minimal throughput savings.  This got more attention recently because it subsequently facilitates longer log retention for backup &amp;amp; replication purposes.&lt;/p&gt;</comment>
                            <comment id="13607954" author="stack" created="Wed, 20 Mar 2013 18:22:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nspiegelberg&quot; class=&quot;user-hover&quot; rel=&quot;nspiegelberg&quot;&gt;Nicolas Spiegelberg&lt;/a&gt; SF compresses by the block.  A block may be made of many entries.  Enabling compression means we could lose more data &amp;#8211; up to a whole block rather than just the last entry &amp;#8211; if we fail just as we are about to round out the block (or we&apos;ve written a complete block and the compressor is still working on flushing it out).  Is your thinking this is ok as long as the configuration carries sufficient warnings?  Thanks.&lt;/p&gt;</comment>
                            <comment id="13608144" author="apurtell" created="Wed, 20 Mar 2013 20:28:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=saint.ack%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;saint.ack@gmail.com&quot;&gt;Stack&lt;/a&gt; SF can compress either by record or block. I enable SequenceFile.RECORD compression as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7544&quot; title=&quot;Transparent table/CF encryption&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7544&quot;&gt;&lt;del&gt;HBASE-7544&lt;/del&gt;&lt;/a&gt; and drop in an encryption codec masquerading as a compression codec, and it works as expected.&lt;/p&gt;</comment>
                            <comment id="13608158" author="nspiegelberg" created="Wed, 20 Mar 2013 20:35:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;: It looks like the SequenceFileLogWriter without encryption &quot;crypto/main/without&quot; does not have this compression.  Did you want to merge this change into &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7544&quot; title=&quot;Transparent table/CF encryption&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7544&quot;&gt;&lt;del&gt;HBASE-7544&lt;/del&gt;&lt;/a&gt;?  The core change is trivial (~20 lines)&lt;/p&gt;</comment>
                            <comment id="13608163" author="apurtell" created="Wed, 20 Mar 2013 20:40:37 +0000"  >&lt;blockquote&gt;&lt;p&gt;Did you want to merge this change into &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7544&quot; title=&quot;Transparent table/CF encryption&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7544&quot;&gt;&lt;del&gt;HBASE-7544&lt;/del&gt;&lt;/a&gt;? The core change is trivial (~20 lines)&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nspiegelberg&quot; class=&quot;user-hover&quot; rel=&quot;nspiegelberg&quot;&gt;Nicolas Spiegelberg&lt;/a&gt; Or we could make the change here and I can fix up there.&lt;/p&gt;</comment>
                            <comment id="13608168" author="nspiegelberg" created="Wed, 20 Mar 2013 20:42:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt; Let&apos;s do the latter for feature isolation.&lt;/p&gt;</comment>
                            <comment id="13608484" author="stack" created="Thu, 21 Mar 2013 00:53:31 +0000"  >&lt;p&gt;So, we should make it so you could do either.  Wouldn&apos;t we have to do record-based compression if we want replication to work (my guess is that it would get messed up if block-based was enabled).  Would have to have big records for this to have an effect &amp;#8211; &amp;gt; 10k or so?  Seems like a small change for big win to me.&lt;/p&gt;</comment>
                            <comment id="13642085" author="nspiegelberg" created="Thu, 25 Apr 2013 19:01:07 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;stack&amp;#93;&lt;/span&gt; I think we want to limit this to record compression, since that is the exact same granularity as a transaction.  I&apos;m not sure about how to perform reliable transaction recovery with block compression.  I think it would require larger records (probably 4k+) for big impact, but note that a lot of the compression algorithms we use default to uncompressed if it notices that compression doesn&apos;t hurt.&lt;/p&gt;

&lt;p&gt;For some followup information: I pushed this change to our dark launch, high-throughput cluster.  It performed the expected 3x compression and added &amp;lt;1ms to latency (no throughput difference).  The HLogs now take 3x longer to roll, so you may need to tune that some other configs if log roll speed matters.  See the 89-fb patch at: &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1465082&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1465082&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13642174" author="sershe" created="Thu, 25 Apr 2013 20:25:52 +0000"  >&lt;p&gt;note that &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7413&quot; title=&quot;Convert WAL to pb&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7413&quot;&gt;&lt;del&gt;HBASE-7413&lt;/del&gt;&lt;/a&gt; removes the usage of sequence files in favor of PB+cells in WAL.&lt;br/&gt;
Can we put this compression in the new compression pipeline that was added to IPC (see buildCellBlock) and reuse it in WAL instead?&lt;/p&gt;</comment>
                            <comment id="14021366" author="apurtell" created="Sun, 8 Jun 2014 21:31:27 +0000"  >&lt;p&gt;Stale issue. Reopen if still relevant.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12527516">HBASE-4608</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 20 Mar 2013 18:22:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>318487</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 27 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1iyd3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>318828</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>