<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:58:49 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-8817/HBASE-8817.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-8817] Enhance The Apache HBase Reference Guide</title>
                <link>https://issues.apache.org/jira/browse/HBASE-8817</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;I am reading the guide here: &lt;a href=&quot;http://hbase.apache.org/book.html#regions.arch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hbase.apache.org/book.html#regions.arch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I have noticed the following:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;There is lack of coverage on scan. Note that Lars has a very good presentation from last year&apos;s HBaseCon: &lt;a href=&quot;http://www.slideshare.net/cloudera/3-learning-h-base-internals-lars-hofhansl-salesforce-final&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.slideshare.net/cloudera/3-learning-h-base-internals-lars-hofhansl-salesforce-final&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;Under section 9.7.6.1, there is no mentioning of flush per region if a memstore reached the size threshold (and a possible flush of all memstores if over all memory usage of all the memstores reached memstore.upperlimit). Note that people need to combine the information provided in section 9 with section 2.3.1.1 to fully understand the situation.&lt;/li&gt;
	&lt;li&gt;Compaction tuning strategies. Both Nicolas from Facebook and Sergey from Hortonworks have presented various compaction algorithms. Sometime, once all the necessary code is in master, we need to have the coverage.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Let me know how I can help on the matter.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12655279">HBASE-8817</key>
            <summary>Enhance The Apache HBase Reference Guide</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="misty">Misty Stanley-Jones</assignee>
                                    <reporter username="thomaspan">Thomas Pan</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Jun 2013 07:24:01 +0000</created>
                <updated>Sat, 21 Feb 2015 23:31:37 +0000</updated>
                            <resolved>Tue, 27 May 2014 17:14:05 +0000</resolved>
                                                    <fixVersion>0.99.0</fixVersion>
                                    <component>documentation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                <comments>
                            <comment id="13698631" author="stack" created="Wed, 3 Jul 2013 05:41:48 +0000"  >&lt;p&gt;If you write up a few paragraphs and say where to insert in the refguide, I can do the addition &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thomaspan&quot; class=&quot;user-hover&quot; rel=&quot;thomaspan&quot;&gt;Thomas Pan&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13702960" author="thomaspan" created="Tue, 9 Jul 2013 06:03:18 +0000"  >
&lt;p&gt;Let me start with the simpler one, regarding flushes. Please verify that my understanding is correct.&lt;/p&gt;

&lt;p&gt;2.3.1.1. HBase Default Configuration&lt;/p&gt;

&lt;p&gt;hbase.regionserver.global.memstore.upperLimit&lt;/p&gt;

&lt;p&gt;Maximum size of all memstores in a region server before new updates are blocked and flushes are forced. Defaults to 40% of heap. Updates are blocked and region level flushes are forced until size of all memstores in a region server hits hbase.regionserver.global.memstore.lowerLimit.&lt;/p&gt;

&lt;p&gt;hbase.hregion.memstore.flush.size&lt;/p&gt;

&lt;p&gt;Memstore will be flushed to disk if size of the memstore exceeds this number of bytes. When that happens, memstores that belong to the same region will all be flushed. Value is checked by a thread that runs every hbase.server.thread.wakefrequency.&lt;/p&gt;

&lt;p&gt;9.7.6.1. MemStore&lt;br/&gt;
The MemStore holds in-memory modifications to the Store. Modifications are KeyValues. When asked to flush, current memstore is moved to snapshot and is cleared. HBase continues to serve edits out of new memstore and backing snapshot until flusher reports in that the flush succeeded. At this point the snapshot is let go. Note that when flush happens, memstores that belong to the same region will all be flushed out.&lt;/p&gt;</comment>
                            <comment id="13702994" author="thomaspan" created="Tue, 9 Jul 2013 07:02:31 +0000"  >
&lt;p&gt;Here is the draft about scan. I just jot it down for my better understanding.&lt;/p&gt;

&lt;p&gt;When client issues a scan against a table, Hbase generates RegionScanner objects, one per region, to serve the scan request. RegionScanner object contains a list of StoreScanner objects, one per column family. Each StoreScanner object further contains  a list of StoreFileScanner objects, corresponding to each store file and HFile of the corresponding column family, and a list of KeyValueScanner objects for memstore. The two lists are merge into one, sorted in ascending order with scan object for memstore at the end of the list. When a StoreFileScanner object is constructed, it is associated with a MultiVersionConsistencyControl read point, which is the current memstoreTS at the moment, filtering out any new updates beyond the read point.&lt;/p&gt;</comment>
                            <comment id="13713357" author="thomaspan" created="Fri, 19 Jul 2013 05:51:45 +0000"  >&lt;p&gt;Memstore flush&lt;/p&gt;

&lt;p&gt;Memstore flush can be triggered under three conditions listed below. The minimum flush unit is per region, not at individual memstore level.&lt;/p&gt;

&lt;p&gt;1. When a memstore reaches the value specified by hbase.hregion.memstore.flush.size, memstores that belong to its region will be flushed out to disk.&lt;br/&gt;
2. When overall memstore usage reaches the value specified by hbase.regionserver.global.memstore.upperLimit, memstores from various regions will be flushed out to disk to reduce overall memstore usage in a Region Server. The flush order is based on the descending order of region memstore usage. There will be enough regions with their memstore flushed out until the overall memstore usage drops to or slightly below hbase.regionserver.global.memstore.lowerLimit.&lt;br/&gt;
3. When number of HLog per region server reaches the value specified in hbase.regionserver.max.logs, memstores from various regions will be flushed out to disk to reduce HLog count. The flush order is based on time with regions having oldest memstores got flushed first until HLog count drops below hbase.regionserver.max.logs.&lt;/p&gt;
</comment>
                            <comment id="13721841" author="stack" created="Sun, 28 Jul 2013 04:06:06 +0000"  >&lt;p&gt;Doc change.  Critical!&lt;/p&gt;</comment>
                            <comment id="14009209" author="misty" created="Tue, 27 May 2014 01:57:55 +0000"  >&lt;p&gt;Added hbase.regionserver.global.memstore.upperLimit to hbase-default.xml. hbase.hregion.memstore.flush.size was already there.&lt;/p&gt;

&lt;p&gt;Added the MemStore Flush section directly below the modified MemStore section.&lt;/p&gt;

&lt;p&gt;Added the info about Scans directly after the new MemStore Flush section, though this didn&apos;t seem like the best place. I couldn&apos;t believe there was not a place in the Ref Guide that specifically talked about doing scans?? Am I missing it?&lt;/p&gt;


</comment>
                            <comment id="14009218" author="hadoopqa" created="Tue, 27 May 2014 02:03:38 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12646830/HBASE-8817.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12646830/HBASE-8817.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12646830&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+0 tests included&lt;/font&gt;.  The patch appears to be a documentation patch that doesn&apos;t require tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9594//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9594//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14009220" author="misty" created="Tue, 27 May 2014 02:06:44 +0000"  >&lt;p&gt;What did I do wrong with this patch?&lt;/p&gt;</comment>
                            <comment id="14009909" author="stack" created="Tue, 27 May 2014 17:12:34 +0000"  >&lt;p&gt;Here is what I applied.  Changed &apos;40% of heap&apos; in the hbase-default.xml to 0.4.&lt;/p&gt;

&lt;p&gt;Patch did not apply.  Did you rebase &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=misty&quot; class=&quot;user-hover&quot; rel=&quot;misty&quot;&gt;Misty Stanley-Jones&lt;/a&gt; before making your patch?&lt;/p&gt;

&lt;p&gt;I did the fixup.&lt;/p&gt;

&lt;p&gt;Doc looks great.&lt;/p&gt;

&lt;p&gt;There is a bunch of scan do spread all over the ref guide.  We can collect it into one location some day.  For now, this is a nice addition (I gave it an id of hregion.scan).&lt;/p&gt;</comment>
                            <comment id="14009913" author="stack" created="Tue, 27 May 2014 17:14:05 +0000"  >&lt;p&gt;Applied to trunk.  Thanks for the nice doc improvements &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=misty&quot; class=&quot;user-hover&quot; rel=&quot;misty&quot;&gt;Misty Stanley-Jones&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14009978" author="hudson" created="Tue, 27 May 2014 17:51:36 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #5144 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/5144/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/5144/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8817&quot; title=&quot;Enhance The Apache HBase Reference Guide&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8817&quot;&gt;&lt;del&gt;HBASE-8817&lt;/del&gt;&lt;/a&gt; Enhance The Apache HBase Reference Guide (Misty Stanley-Jones) (stack: rev bfbc6d48cd783ce0ea9a43fded0999839fc5d6c5)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-common/src/main/resources/hbase-default.xml&lt;/li&gt;
	&lt;li&gt;src/main/docbkx/book.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14330849" author="enis" created="Sat, 21 Feb 2015 23:31:37 +0000"  >&lt;p&gt;Closing this issue after 0.99.0 release. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12646830" name="HBASE-8817.patch" size="5907" author="misty" created="Tue, 27 May 2014 01:58:15 +0000"/>
                            <attachment id="12646941" name="HBASE-8817v2.patch" size="203118" author="stack" created="Tue, 27 May 2014 17:12:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 3 Jul 2013 05:41:48 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>335556</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1lvqv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>335880</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>