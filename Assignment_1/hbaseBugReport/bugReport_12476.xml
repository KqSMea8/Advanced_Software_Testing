<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:33:25 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-12476/HBASE-12476.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-12476] HydraBase Consensus Protocol</title>
                <link>https://issues.apache.org/jira/browse/HBASE-12476</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;This is the first patch for the HydraBase consensus protocol implemented according to the Raft consensus protocol (&lt;a href=&quot;https://ramcloud.stanford.edu/raft.pdf&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://ramcloud.stanford.edu/raft.pdf&lt;/a&gt;), as advertised in (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12259&quot; title=&quot;Bring quorum based write ahead log into HBase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12259&quot;&gt;HBASE-12259&lt;/a&gt;)&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12755444">HBASE-12476</key>
            <summary>HydraBase Consensus Protocol</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12748178">HBASE-12259</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gaurav.menghani">Gaurav Menghani</assignee>
                                    <reporter username="gaurav.menghani">Gaurav Menghani</reporter>
                        <labels>
                    </labels>
                <created>Fri, 14 Nov 2014 18:43:51 +0000</created>
                <updated>Tue, 23 Dec 2014 19:45:28 +0000</updated>
                            <resolved>Tue, 25 Nov 2014 20:30:20 +0000</resolved>
                                                    <fixVersion>HBASE-12259</fixVersion>
                                    <component>Consensus</component>
                    <component>wal</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>31</watches>
                                                                <comments>
                            <comment id="14212628" author="gaurav.menghani" created="Fri, 14 Nov 2014 18:56:36 +0000"  >&lt;p&gt;This patch applies cleanly on top of &lt;/p&gt;

&lt;p&gt;commit bbd681541428d3983a9c4e114b1ee479ab22f020&lt;br/&gt;
Author: Misty Stanley-Jones &amp;lt;mstanleyjones@cloudera.com&amp;gt;&lt;br/&gt;
Date:   Mon Nov 3 14:28:31 2014 +1000&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12409&quot; title=&quot;Add actual tunable parameters for finding optimal # of regions per RS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12409&quot;&gt;&lt;del&gt;HBASE-12409&lt;/del&gt;&lt;/a&gt; Add actual tunable parameters to regions per RS calculations&lt;/p&gt;</comment>
                            <comment id="14212653" author="yuzhihong@gmail.com" created="Fri, 14 Nov 2014 19:09:46 +0000"  >&lt;p&gt;This is a big patch.&lt;/p&gt;

&lt;p&gt;Can you put it on reviewboard or Phabricator ?&lt;/p&gt;</comment>
                            <comment id="14212683" author="gaurav.menghani" created="Fri, 14 Nov 2014 19:24:27 +0000"  >&lt;p&gt;Here it is: &lt;a href=&quot;https://reviews.facebook.net/D28941&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D28941&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14212913" author="enis" created="Fri, 14 Nov 2014 21:58:49 +0000"  >&lt;p&gt;This patch contains all of the client level code + RAFT from what I see. Can we break it down to the RAFT protocol itself, then incrementally bring in the client level changes. As it is, it is duplicating a lot of code. &lt;/p&gt;</comment>
                            <comment id="14212946" author="gaurav.menghani" created="Fri, 14 Nov 2014 22:17:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; I assume the client level code you are referring to is, QuorumThriftClient etc. That code is required for the protocol to work, otherwise the Leader node would not receive edits. What is the code duplication you are referring to?&lt;/p&gt;</comment>
                            <comment id="14213031" author="rshroff" created="Fri, 14 Nov 2014 23:06:18 +0000"  >&lt;p&gt;If we don&apos;t have the QuorumThriftClient, then we cannot send transactions to the protocol. So, the unit tests will need QuorumThriftClient to actually test the protocol.&lt;/p&gt;</comment>
                            <comment id="14213058" author="enis" created="Fri, 14 Nov 2014 23:25:02 +0000"  >&lt;p&gt;I was mentioning the HConstants, HRegionInfo, etc. All the classes that are already in hbase. &lt;/p&gt;</comment>
                            <comment id="14213068" author="gaurav.menghani" created="Fri, 14 Nov 2014 23:32:22 +0000"  >&lt;p&gt;Since we moved the code from the HydraBase branch based off 0.89-fb, we had to copy a couple of classes (about 8) to avoid the code from breaking when we copy to trunk. These will be removed in the very new future (after we spend time refactoring), so feel free to ignore them. &lt;/p&gt;</comment>
                            <comment id="14213104" author="enis" created="Fri, 14 Nov 2014 23:59:54 +0000"  >&lt;p&gt;Ok cool. &lt;/p&gt;</comment>
                            <comment id="14213237" author="busbey" created="Sat, 15 Nov 2014 01:22:33 +0000"  >&lt;p&gt;please use reviewboard instead of phabricator. phabricator requires an account to view the review and we shouldn&apos;t require ASF contributors to get non-ASF accounts to participate.&lt;/p&gt;</comment>
                            <comment id="14215091" author="eclark" created="Mon, 17 Nov 2014 20:06:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=busbey&quot; class=&quot;user-hover&quot; rel=&quot;busbey&quot;&gt;Sean Busbey&lt;/a&gt; Phabricator&apos;s been an acceptable way for patches to be posted on the HBase project for quite a while. I don&apos;t think that we need to be perscriptive on what tools to use. In addition the patch is posted here, so if people don&apos;t want to sign up they don&apos;t have to.&lt;/p&gt;

&lt;p&gt;Per the discussion in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12259&quot; title=&quot;Bring quorum based write ahead log into HBase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12259&quot;&gt;HBASE-12259&lt;/a&gt; and the mailing list and in person I&apos;m +1 committing this to a separate branch so that people can start playing with it, without jeopardizing trunk.&lt;/p&gt;</comment>
                            <comment id="14215227" author="ryanobjc" created="Mon, 17 Nov 2014 21:41:10 +0000"  >&lt;p&gt;If there is any choice, when committing to a feature branch, not having the &apos;1 giant patch commit&apos; would be nice.&lt;/p&gt;

&lt;p&gt;It&apos;s probably impossible to bring forward the hundreds of commits this represents, but it&apos;d be nice to get some structure.  For the rest of us looking at this code, it&apos;s going to be fairly imperative that you take the effort to structure it, outline the modules, and generally make the code self-instructing.&lt;/p&gt;</comment>
                            <comment id="14215247" author="eclark" created="Mon, 17 Nov 2014 21:50:11 +0000"  >&lt;p&gt;From my understanding this is the smallest module the Hydrabase guys could get up and running enough to pass some tests. Anything less and they were just putting up code that was broken.&lt;/p&gt;</comment>
                            <comment id="14215725" author="busbey" created="Tue, 18 Nov 2014 05:17:02 +0000"  >&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=busbey&quot; class=&quot;user-hover&quot; rel=&quot;busbey&quot;&gt;Sean Busbey&lt;/a&gt; Phabricator&apos;s been an acceptable way for patches to be posted on the HBase project for quite a while. I don&apos;t think that we need to be perscriptive on what tools to use. In addition the patch is posted here, so if people don&apos;t want to sign up they don&apos;t have to.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Thanks for the correction. I&apos;ve seen phabricator a few times on other ASF projects but hadn&apos;t noticed it among the HBase stuff so far. I&apos;ll try to revive &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4896&quot; title=&quot;Add Phabricator + ARC Installation to Help Doc&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4896&quot;&gt;&lt;del&gt;HBASE-4896&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14217686" author="ndimiduk" created="Wed, 19 Nov 2014 10:22:12 +0000"  >&lt;p&gt;I&apos;m with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ryanobjc&quot; class=&quot;user-hover&quot; rel=&quot;ryanobjc&quot;&gt;ryan rawson&lt;/a&gt; on this one; 1.39mb patch is impenetrable for reviewers. Even phabricator itself has a warning of the excessive size of the patch.&lt;/p&gt;

&lt;p&gt;Re: phabricator, I agree with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=busbey&quot; class=&quot;user-hover&quot; rel=&quot;busbey&quot;&gt;Sean Busbey&lt;/a&gt; in principal, but given it supports both Facebook- and Github-based authentication, and ASF supports Github integration for quite a bit of other tooling, I think the barrier to use is sufficiently low.&lt;/p&gt;</comment>
                            <comment id="14218091" author="stack" created="Wed, 19 Nov 2014 16:31:34 +0000"  >&lt;p&gt;What about this comment?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;From my understanding this is the smallest module the Hydrabase guys could get up and running enough to pass some tests. Anything less and they were just putting up code that was broken.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Putting up broke or incomplete contribs doesn&apos;t work because in review it becomes... &quot;hey...this ain&apos;t going to work?&quot; or &apos;Where is XYZ? Why ain&apos;t it included?&quot;&lt;/p&gt;

&lt;p&gt;(We just committed a 1.4MB patch yesterday.  Ten pages on RB.  It took a lot of reviewing but the contributor was responsive so it was a useful exercise. It added desirable functionality so was worth the effort.)&lt;/p&gt;

&lt;p&gt;Suggest those interested in reviewing start reviewing.  First pass might suggest how the patch might be broken up.&lt;/p&gt;</comment>
                            <comment id="14221834" author="stack" created="Sat, 22 Nov 2014 05:59:17 +0000"  >&lt;p&gt;Thanks for putting the code into a module (thanks also for posting)&lt;/p&gt;

&lt;p&gt;What direction do you think we should take this contrib?  Toward the layout described in the hydrabase doc or are you thinking we&apos;d recast it as an in-cluster quorum-of-regions?  If the latter, would it be on all the time &amp;#8211; a different sort of hbase &amp;#8211; or would it be something you could enable?  HBase 2.0 or HBase 1.0?&lt;/p&gt;

&lt;p&gt;Sorry for the big questions.  No need of an answer now.... but we need to all chat.&lt;/p&gt;

&lt;p&gt;What should we do about swift out here in apache hbase?  We&apos;d redo it as pb and rpc calls?&lt;/p&gt;

&lt;p&gt;airlift is not for REST services, right? You are just using it for stats?  You like it? Better than the histograms we have going on out herein apache hbase?  You have a Counter, Duration, TimeDistribution, and ExpotentialDecay.. Need airlift for this or could redo doing our current metrics dependencies?&lt;/p&gt;

&lt;p&gt;Should apache hbase make use of jmxutils too? How you folks using it (Not reviewed the patch yet).&lt;/p&gt;

&lt;p&gt;Let me get you more feedback. Above are first impression.  Thanks.&lt;/p&gt;
</comment>
                            <comment id="14223528" author="rshroff" created="Mon, 24 Nov 2014 21:16:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;: Thanks for looking through the code and providing the inputs. Please find my responses below:&lt;/p&gt;

&lt;p&gt;What direction do you think we should take this contrib?Toward the layout described in the hydrabase doc or are you thinking we&apos;d recast it as an in-cluster quorum-of-regions? If the latter, would it be on all the time &#8211; a different sort of hbase &#8211; or would it be something you could enable? HBase 2.0 or HBase 1.0?&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Rishit: The RAFT module by itself is pretty independent of in-cluster vs multi-cluster setup. It just deals with peers with ranks and replication. I think the question will be about how we want to take the integration of this protocol into HBase. IMO, we can target for in-cluster mode first and then make it applicable to cross-cluster. Also, since HBase 1.0 is a soon to be released version, I would prefer to put into into HBase 2.0. For sure, we will need to meetup and chat about this. I would prefer to have this as an opt-in option.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;What should we do about swift out here in apache hbase? We&apos;d redo it as pb and rpc calls?&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Rishit: The swift jars used in current HBase are old, we definitely need to upgrade them and fix the changed dependencies.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;airlift is not for REST services, right? You are just using it for stats? You like it? Better than the histograms we have going on out herein apache hbase? You have a Counter, Duration, TimeDistribution, and ExpotentialDecay.. Need airlift for this or could redo doing our current metrics dependencies?&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Rishit: Yes, even in my profiling, I saw airlift as a hot-spot. I will file a JIRA to move the stats out of airlift and choose the other options (hadoop style, or &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=daviddengcn&quot; class=&quot;user-hover&quot; rel=&quot;daviddengcn&quot;&gt;Yi Deng&lt;/a&gt; work for histogram at the very least.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Should apache hbase make use of jmxutils too? How you folks using it (Not reviewed the patch yet).&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Rishit: AFAIK, they are used by airlift package. I will double check.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Rishit&lt;/p&gt;</comment>
                            <comment id="14224153" author="stack" created="Tue, 25 Nov 2014 07:35:52 +0000"  >&lt;p&gt;Sounds good &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rshroff&quot; class=&quot;user-hover&quot; rel=&quot;rshroff&quot;&gt;Rishit Shroff&lt;/a&gt;.  We can file patches to move over to our rpc+pbs and to purge libs that maybe don&apos;t add that much in the end when you fellas get up on a feature branch out here in apache (I believe that is the plan... kick &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt;!)&lt;/p&gt;</comment>
                            <comment id="14225128" author="gaurav.menghani" created="Tue, 25 Nov 2014 20:07:18 +0000"  >&lt;p&gt;Final patch of the squashed commits after addressing Ted&apos;s comments.&lt;/p&gt;</comment>
                            <comment id="14225141" author="eclark" created="Tue, 25 Nov 2014 20:19:46 +0000"  >&lt;p&gt;I&apos;m +1 on committing this to a feature branch.&lt;br/&gt;
I&apos;ll take the kick from stack as the same.&lt;/p&gt;

&lt;p&gt;Pushing this to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12259&quot; title=&quot;Bring quorum based write ahead log into HBase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12259&quot;&gt;HBASE-12259&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14225144" author="stack" created="Tue, 25 Nov 2014 20:21:28 +0000"  >&lt;p&gt;+1 on creating feature branch&lt;/p&gt;</comment>
                            <comment id="14225160" author="eclark" created="Tue, 25 Nov 2014 20:30:20 +0000"  >&lt;p&gt;Pushed to feature branch. Small tweak to the pom file to get everything wired up.&lt;/p&gt;</comment>
                            <comment id="14227636" author="stack" created="Thu, 27 Nov 2014 13:12:28 +0000"  >&lt;p&gt;Here are some notes on the 0002 patch itself.  Mostly questions. No hurry w/ response.&lt;/p&gt;

&lt;p&gt;Purge versions from sub-poms if the dependency is common with other modules. Inherit from parent where you can. I found this in the consensus pom:&lt;/p&gt;

&lt;p&gt;          &amp;lt;version&amp;gt;2.15&amp;lt;/version&amp;gt;&lt;/p&gt;

&lt;p&gt;and&lt;br/&gt;
          &amp;lt;version&amp;gt;4.1&amp;lt;/version&amp;gt;&lt;/p&gt;

&lt;p&gt;... for what I believe are common dependencies (Its fine to have dependencies in modules with versions if the dependency only used by the submodule)&lt;/p&gt;

&lt;p&gt;In the consensus module, there is an hbase-default.xml also? How does it relate to the one over in hbase-common?&lt;/p&gt;

&lt;p&gt;You can purge hadoop-1 references (unless that is how you refer to your hdfs.)  We don&apos;t support it in hbase 1.0.&lt;/p&gt;

&lt;p&gt;Others have already remarked on undoing the local copies of HColumnDescriptor, etc. You had them in here so this module could &apos;work&apos; without dependency? (Kill HServerAddress!)  Do we need to move stuff around in hbase so you can have minimal dependencies?  All the classes you have copied local here, should we move them back up and into hbase-common module if not there already?&lt;/p&gt;

&lt;p&gt;Run the rat tool on your feature branch. Some of these files are still missing licenses.&lt;/p&gt;

&lt;p&gt;Nice. You have already ported over ConfigurationObserver.  Good.&lt;/p&gt;

&lt;p&gt;We&apos;ll have to redo FetchTask, etc., as protobuf? (the swifty annotations look very nice)&lt;/p&gt;

&lt;p&gt;In FetchTask I see in the run that it has this:&lt;/p&gt;

&lt;p&gt;	    // TODO in part 2: fetch log files from the peer!&lt;/p&gt;

&lt;p&gt;Does that mean this facility of raft &amp;#8211; catchup I presume &amp;#8211; is yet to be implemented or is it rather that this class gets subclassed later?&lt;/p&gt;

&lt;p&gt;If the former, is there more to do to have full implementation?&lt;/p&gt;

&lt;p&gt;Each regionserver stands up an instance of a QuorumClient per region?&lt;/p&gt;

&lt;p&gt;A quorum name is different from region name?&lt;/p&gt;

&lt;p&gt;We&apos;d have to move all of the quorum communication up on to hbase rpc and pb?  What you lot think?  Keep swift?&lt;/p&gt;

&lt;p&gt;The FSM stuff could do w/ a bit of package doc on how it works.  That said, it is easy to read.  (Maybe we could use these primitives elsewhere in hbase)&lt;/p&gt;

&lt;p&gt;Region splits handled?&lt;/p&gt;

&lt;p&gt;We&apos;d have to figure how to do the RMap stuff in master? And bootstrapping the cluster?&lt;/p&gt;

&lt;p&gt;A regionserver would have to do consensuservice?&lt;/p&gt;

&lt;p&gt;WHen you say &apos;favored_nodes&apos; in the rmap, does that imply we need &apos;favored nodes&apos; working out in apache hbase or is this just how you describe quorum members for a region?&lt;/p&gt;

&lt;p&gt;Is the read-side, reading from the quorum, a patch as big as this one (smile)?&lt;/p&gt;

&lt;p&gt;Nice one.&lt;/p&gt;














</comment>
                            <comment id="14233404" author="stack" created="Wed, 3 Dec 2014 19:35:02 +0000"  >&lt;p&gt;Any feedback on the above notes &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gaurav.menghani&quot; class=&quot;user-hover&quot; rel=&quot;gaurav.menghani&quot;&gt;Gaurav Menghani&lt;/a&gt;? Thanks.&lt;/p&gt;</comment>
                            <comment id="14233680" author="gaurav.menghani" created="Wed, 3 Dec 2014 23:42:59 +0000"  >&lt;p&gt;Stack, sorry about this. Didn&apos;t see your comment during the holidays.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Purge versions from sub-poms if the dependency is common with other modules. Inherit from parent where you can. I found this in the consensus pom:&lt;br/&gt;
&amp;lt;version&amp;gt;2.15&amp;lt;/version&amp;gt;&lt;br/&gt;
and&lt;br/&gt;
&amp;lt;version&amp;gt;4.1&amp;lt;/version&amp;gt;&lt;br/&gt;
... for what I believe are common dependencies (Its fine to have dependencies in modules with versions if the dependency only used by the submodule)&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Sure, will do.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;In the consensus module, there is an hbase-default.xml also? How does it relate to the one over in hbase-common?&lt;br/&gt;
You can purge hadoop-1 references (unless that is how you refer to your hdfs.) We don&apos;t support it in hbase 1.0.&lt;br/&gt;
Others have already remarked on undoing the local copies of HColumnDescriptor, etc. You had them in here so this module could &apos;work&apos; without dependency? (Kill HServerAddress!) Do we need to move stuff around in hbase so you can have minimal dependencies? All the classes you have copied local here, should we move them back up and into hbase-common module if not there already?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I didn&apos;t find hbase-default.xml in the consensus package. Yes, we are cleaning up all that dependency cruft in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12510&quot; title=&quot;Remove the dependency on HRegionInfo from 0.89-fb&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12510&quot;&gt;&lt;del&gt;HBASE-12510&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Run the rat tool on your feature branch. Some of these files are still missing licenses.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes, we didn&apos;t add licenses to mostly any of the code. Will do this.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Nice. You have already ported over ConfigurationObserver. Good.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Hehe, I wrote the original ConfigurationObserver in 0.89-fb &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/biggrin.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;We&apos;ll have to redo FetchTask, etc., as protobuf? (the swifty annotations look very nice)&lt;br/&gt;
In FetchTask I see in the run that it has this:&lt;br/&gt;
// TODO in part 2: fetch log files from the peer!&lt;br/&gt;
Does that mean this facility of raft &#8211; catchup I presume &#8211; is yet to be implemented or is it rather that this class gets subclassed later?&lt;br/&gt;
If the former, is there more to do to have full implementation?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;As per Rishit, the FetchTask is for advanced offline log recovery. We aren&apos;t using that part yet. We can add more comments to highlight that.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Each regionserver stands up an instance of a QuorumClient per region?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes, a QuorumClient is used to replicate edits. It is the most clear usage of the protocol inside RS.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;A quorum name is different from region name?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;It need not be. Because the consensus module is intended to be independent of WAL, and even HBase (which it is not right now, with all the dependencies). So today the quorum is being done on the WAL, so the quorum name is the same as region name. Tomorrow, we can do a quorum on something else, in which case quorum name would be something else. It is just a unique identifier for the quorum.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;We&apos;d have to move all of the quorum communication up on to hbase rpc and pb? What you lot think? Keep swift?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I would prefer swift, because we don&apos;t have to write IDL specs for the service and data-structs. That said, if it doesn&apos;t play well with the bigger project, we should discuss this in detail.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;The FSM stuff could do w/ a bit of package doc on how it works. That said, it is easy to read. (Maybe we could use these primitives elsewhere in hbase)&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;What do you mean by a package doc? Is it synonymous to Javadocs?&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Region splits handled?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Hydrabase cannot handle region splits as of now. &lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;We&apos;d have to figure how to do the RMap stuff in master? And bootstrapping the cluster?&lt;/p&gt;&lt;/blockquote&gt; 
&lt;p&gt;Regarding Bootstrapping, we can share some ideas. There are some basic tools to bootstrap the RMap. I am moving the RMap part to hbase-server in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12510&quot; title=&quot;Remove the dependency on HRegionInfo from 0.89-fb&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12510&quot;&gt;&lt;del&gt;HBASE-12510&lt;/del&gt;&lt;/a&gt;, since this is part of the integration of HBase + Protocol. Regarding the master part, there is a diff coming out soon. We worked on something known as HydrabaseMaster which is a thin HMaster which alters the RMap as nodes die and join the quorum.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;A regionserver would have to do consensuservice?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;That&apos;s correct. Coming up soon.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;WHen you say &apos;favored_nodes&apos; in the rmap, does that imply we need &apos;favored nodes&apos; working out in apache hbase or is this just how you describe quorum members for a region?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Actually favored_nodes is used for hinting the DFS where to replicate the blocks. I believe we don&apos;t have that ability in open source HDFS right? In the next diff, we are just ignoring the favored nodes part. &lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Is the read-side, reading from the quorum, a patch as big as this one (smile)?&lt;br/&gt;
Nice one.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Not quite, I think the patch sizes would go down exponentially from here. This probably was the largest chunk of code.&lt;/p&gt;</comment>
                            <comment id="14233706" author="stack" created="Thu, 4 Dec 2014 00:32:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gaurav.menghani&quot; class=&quot;user-hover&quot; rel=&quot;gaurav.menghani&quot;&gt;Gaurav Menghani&lt;/a&gt; Thank you for the replies. All look good.&lt;/p&gt;

&lt;p&gt;Favored nodes is &apos;there&apos; in apache hdfs, just not used/tested.  The last bit is still to be hooked up in apache hbase. It has been a TODO for a long while.&lt;/p&gt;

&lt;p&gt;What I mean by package-doc is something like this &lt;a href=&quot;http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/client/package-summary.html#package_description&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/client/package-summary.html#package_description&lt;/a&gt; (yes, javadoc but at package level giving overview... I think this might be all that is needed in FSM case since it is &apos;easy&apos; to read at the method/class level... its just the high-level story that needs a bit of filling in).&lt;/p&gt;

&lt;p&gt;I understand why you&apos;ve not done splits for messages but you think it will be possible out in apache hbase atop what you have here? Can be later... just asking.&lt;/p&gt;

&lt;p&gt;On swift, yeah, the annotations are nice but it&apos;d be a headache having thrift for one communication channel and pb/hbase-rpc for another.  We can help w/ the conversion here since  we have a bit of experience, np.  Its fine as swift for now.&lt;/p&gt;

&lt;p&gt;Thanks for putting this up.&lt;/p&gt;
</comment>
                            <comment id="14236597" author="gaurav.menghani" created="Sat, 6 Dec 2014 05:09:48 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Favored nodes is &apos;there&apos; in apache hdfs, just not used/tested. The last bit is still to be hooked up in apache hbase. It has been a TODO for a long while.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Cool, we should mark this as a TODO in HydraBase integration as well.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;What I mean by package-doc is something like this &lt;a href=&quot;http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/client/package-summary.html#package_description&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/client/package-summary.html#package_description&lt;/a&gt; (yes, javadoc but at package level giving overview... I think this might be all that is needed in FSM case since it is &apos;easy&apos; to read at the method/class level... its just the high-level story that needs a bit of filling in).&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Sure.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;I understand why you&apos;ve not done splits for messages but you think it will be possible out in apache hbase atop what you have here? Can be later... just asking.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I think it will be slightly involved because essentially we are stoping the parent quorum and starting two daughter quorums. This could be done as a configuration change, and we can do this in the next HydraBase version.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;On swift, yeah, the annotations are nice but it&apos;d be a headache having thrift for one communication channel and pb/hbase-rpc for another. We can help w/ the conversion here since we have a bit of experience, np. Its fine as swift for now.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes, I understand the concern. Let&apos;s follow up on this later then.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="14236598" author="gaurav.menghani" created="Sat, 6 Dec 2014 05:10:38 +0000"  >&lt;blockquote&gt;
&lt;p&gt;This could be done as a configuration change, and we can do this in the next HydraBase version.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I meant a quorum configuration change, to be clear.&lt;/p&gt;</comment>
                            <comment id="14257421" author="rshroff" created="Tue, 23 Dec 2014 19:45:28 +0000"  >&lt;p&gt;Attached is the details about the implementation of the RAFT protocol in the hbase-consensus.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12681588" name="0001-HydraBase-consensus-protocol.patch" size="1460022" author="gaurav.menghani" created="Fri, 14 Nov 2014 18:56:36 +0000"/>
                            <attachment id="12683642" name="0002-HydraBase-consensus-protocol.patch" size="1460526" author="gaurav.menghani" created="Tue, 25 Nov 2014 20:07:18 +0000"/>
                            <attachment id="12688905" name="RaftProtocolImplementionDoc.pdf" size="1003894" author="rshroff" created="Tue, 23 Dec 2014 19:45:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 14 Nov 2014 19:09:46 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 51 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i22e9j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>