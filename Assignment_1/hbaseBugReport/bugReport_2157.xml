<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:59:25 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-2157/HBASE-2157.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-2157] LATEST_TIMESTAMP not replaced by current timestamp in KeyValue</title>
                <link>https://issues.apache.org/jira/browse/HBASE-2157</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;I was trying to bulk load using the new HFileOutputFormat. When using a MapReduce in which map generates {{KeyValue}}s and reduce is equal to KeyValueSortReducer, and using the constructor using (byte[] row, byte[] family, byte[] qualifier, byte[] value), the (undefined) timestamp was inserted as HConstants.LATEST_TIMESTAMP/Long.MAX_VALUE into HBase. This causes all kinds of troubles, but most importantly, while the records were in the table, other MapReduces (using TableInputFormat) and Hbase shell&apos;s &apos;get&apos;-command did not fetch them. Guess there is some sort of filtering of future dates.&lt;/p&gt;

&lt;p&gt;As I understood from St.Ack, the LASTEST_TIMESTAMP is supposed to be replaced by System.currentTimeMillis(), but I don&apos;t see this reflected in the code of KeyValue, and apparently it did not happen elsewhere; perhaps because there is no actual HBase connection?&lt;/p&gt;</description>
                <environment>&lt;p&gt;Hadoop 0.20.0 - Hbase 0.20.2 - Java(TM) SE Runtime Environment (build 1.6.0_17-b04)&lt;/p&gt;</environment>
        <key id="12446349">HBASE-2157</key>
            <summary>LATEST_TIMESTAMP not replaced by current timestamp in KeyValue</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stack">stack</assignee>
                                    <reporter username="mluiten">Menno Luiten</reporter>
                        <labels>
                    </labels>
                <created>Fri, 22 Jan 2010 18:11:59 +0000</created>
                <updated>Fri, 12 Oct 2012 06:14:15 +0000</updated>
                            <resolved>Fri, 22 Jan 2010 19:06:34 +0000</resolved>
                                    <version>0.20.2</version>
                                    <fixVersion>0.20.3</fixVersion>
                    <fixVersion>0.90.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12803799" author="mluiten" created="Fri, 22 Jan 2010 18:13:24 +0000"  >&lt;p&gt;BTW: Solved the issue by using the constructor including timestamp and passing System.currentTimeMillis() manually. Works fine.&lt;/p&gt;</comment>
                            <comment id="12803800" author="jdcryans" created="Fri, 22 Jan 2010 18:14:37 +0000"  >&lt;p&gt;Right the replacement is done in the region server and in this case it gets bypassed. &lt;/p&gt;</comment>
                            <comment id="12803802" author="mluiten" created="Fri, 22 Jan 2010 18:20:36 +0000"  >&lt;p&gt;That explains it &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Cost me hours figuring it out &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/biggrin.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Could this be solved by adding the check/replacement to HFileOutputFormat as well?&lt;/p&gt;</comment>
                            <comment id="12803809" author="jdcryans" created="Fri, 22 Jan 2010 18:33:57 +0000"  >&lt;p&gt;Yes, I guess it would make sense.&lt;/p&gt;</comment>
                            <comment id="12803820" author="stack" created="Fri, 22 Jan 2010 19:03:55 +0000"  >&lt;p&gt;I added note to the bulk load documentation that warns against creating KVs w/o explicit timestamp so others don&apos;t trip over Menno&apos;s issue.&lt;/p&gt;</comment>
                            <comment id="12803822" author="stack" created="Fri, 22 Jan 2010 19:06:34 +0000"  >&lt;p&gt;Committed branch and trunk.&lt;/p&gt;</comment>
                            <comment id="12803825" author="stack" created="Fri, 22 Jan 2010 19:11:59 +0000"  >&lt;p&gt;I don&apos;t think adding a check/replacement to HFOF will work since this is after the sort done up in the KeyValueSortReducer.  Rather, we could have it throw an exception if HFOF is passed a KV with LATEST_TIMESTAMP?  I&apos;ll open a new issue to do that.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12431135" name="2157.patch" size="1385" author="stack" created="Fri, 22 Jan 2010 19:03:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 22 Jan 2010 18:14:37 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26180</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 47 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08tb3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>49348</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>