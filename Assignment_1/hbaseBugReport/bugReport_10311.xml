<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:12:33 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-10311/HBASE-10311.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-10311] Add Scan object to preScannerNext and postScannerNext methods on RegionObserver</title>
                <link>https://issues.apache.org/jira/browse/HBASE-10311</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;I&apos;d like to be able to access the org.apache.hadoop.hbase.client.Scan that was used to create a scanner in the RegionObserver.preScannerNext and RegionObserver.postScannerNext methods.&lt;/p&gt;

&lt;p&gt;The Scan object is available in the preScannerOpen method, but not in the preScannerNext or postScannerNext methods.&lt;/p&gt;

&lt;p&gt;The reason is that I&apos;d like to access the attributes of the Scan object. I want to do some resource management in the coprocessor based on some attributes of the Scan object (like, who created it).&lt;/p&gt;

&lt;p&gt;Alternatively, does anybody know of another way to get hold of the Scan object in these methods without modifying things?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12688268">HBASE-10311</key>
            <summary>Add Scan object to preScannerNext and postScannerNext methods on RegionObserver</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="neilf">Neil Ferguson</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Jan 2014 16:03:11 +0000</created>
                <updated>Fri, 10 Jan 2014 18:53:39 +0000</updated>
                            <resolved>Fri, 10 Jan 2014 16:45:23 +0000</resolved>
                                    <version>0.96.1.1</version>
                                                    <component>Coprocessors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13867948" author="neilf" created="Fri, 10 Jan 2014 16:22:30 +0000"  >&lt;p&gt;Patch attached&lt;/p&gt;</comment>
                            <comment id="13867960" author="neilf" created="Fri, 10 Jan 2014 16:30:58 +0000"  >&lt;p&gt;Just made this patch, then realised that I can accomplish what I want by mapping RegionScanner -&amp;gt; Scan in postScannerOpen, then looking up this map in preScannerNext and postScannerNext. &lt;/p&gt;

&lt;p&gt;VisibilityController seems to do something similar already using a weak hashmap. &lt;/p&gt;

&lt;p&gt;This approach seems a little brittle, since there&apos;s theoretically no guarantee that the scanner that is passed to postScannerOpen is the same on that is passed to preScannerNext and postScannerNext. Perhaps we should change the docs to explicitly specify that this will always be the case.&lt;/p&gt;

&lt;p&gt;Anyway, since it doesn&apos;t involve changing the coprocessor interface, I&apos;ll take this approach. The patch to modify the coprocessor interface is attached if anyone wants it. Feel free to close this ticket otherwise.&lt;/p&gt;</comment>
                            <comment id="13867979" author="anoop.hbase" created="Fri, 10 Jan 2014 16:44:16 +0000"  >&lt;p&gt;Actually it will be the same scanner object being passed in next() and next CP hooks.   Yes we already use this VisibilityController.  I was about to come here and suggest this and then saw you realized it alreay on your own.. Good &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
We can not change the CP signature in released major versions. But can change in Trunk only ( if needed) .. Here it looks not needed at all..  So I will close this issue.&lt;/p&gt;</comment>
                            <comment id="13868123" author="stack" created="Fri, 10 Jan 2014 18:53:39 +0000"  >&lt;p&gt;Closing at Mr &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=neilf&quot; class=&quot;user-hover&quot; rel=&quot;neilf&quot;&gt;Neil Ferguson&lt;/a&gt;&apos;s suggestion.  This seems like something we should doc in CP section of refguide given two of you fellas bumped into the prob.  Let me try do that and point to this issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12622401" name="HBASE-10311.patch" size="14037" author="neilf" created="Fri, 10 Jan 2014 16:22:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 10 Jan 2014 16:44:16 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367287</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 49 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1rb5j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367596</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>