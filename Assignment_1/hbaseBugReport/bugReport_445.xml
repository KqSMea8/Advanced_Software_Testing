<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:44:18 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-445/HBASE-445.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-445] Region goes offline, perhaps after failed flush and subsuquent attempt to split</title>
                <link>https://issues.apache.org/jira/browse/HBASE-445</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;We&apos;ve been dealing with a problem where regions go offline for no apparent reason.  Usually restarting the whole system clears things up, but that&apos;s not a desired workaround.  After some digging on one of the region servers with a region that is offline that should not be I found the following:&lt;/p&gt;

&lt;p&gt;2008-02-13 17:43:31,357 INFO org.apache.hadoop.hbase.HRegion: starting compaction on region webdb,com.geocities.www/Paris/1685/,1202919182718&lt;br/&gt;
2008-02-13 17:45:09,004 INFO org.apache.hadoop.hbase.HRegionServer: Rolling hlog. Number of entries: 30006&lt;br/&gt;
2008-02-13 17:45:09,071 INFO org.apache.hadoop.hbase.HLog: new log writer created at hdfs://node-3-34.isc.swlabs.org:9000/u01/hbase-data/hbase/log_10.2&lt;br/&gt;
.3.32_1202914711919_60020/hlog.dat.010&lt;br/&gt;
2008-02-13 17:47:51,606 INFO org.apache.hadoop.hbase.HRegion: compaction completed on region webdb,com.geocities.www/Paris/1685/,1202919182718. Took 4m&lt;br/&gt;
ins, 20sec&lt;br/&gt;
2008-02-13 17:48:20,273 INFO org.apache.hadoop.hbase.HRegionServer: Rolling hlog. Number of entries: 30007&lt;br/&gt;
2008-02-13 17:48:20,315 INFO org.apache.hadoop.hbase.HLog: new log writer created at hdfs://node-3-34.isc.swlabs.org:9000/u01/hbase-data/hbase/log_10.2&lt;br/&gt;
.3.32_1202914711919_60020/hlog.dat.011&lt;br/&gt;
2008-02-13 17:48:20,315 INFO org.apache.hadoop.hbase.HLog: removing old log file hdfs://node-3-34.isc.swlabs.org:9000/u01/hbase-data/hbase/log_10.2.3.3&lt;br/&gt;
2_1202914711919_60020/hlog.dat.008 whose highest sequence/edit id is 1286138&lt;br/&gt;
2008-02-13 17:48:34,959 ERROR org.apache.hadoop.hbase.HRegionServer: Cache flush failed for region webdb,com.geocities.www/Paris/1685/,1202919182718&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
        at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.close(DFSClient.java:2262)&lt;br/&gt;
        at org.apache.hadoop.fs.FSDataOutputStream$PositionCache.close(FSDataOutputStream.java:51)&lt;br/&gt;
        at org.apache.hadoop.fs.FSDataOutputStream.close(FSDataOutputStream.java:67)&lt;br/&gt;
        at org.apache.hadoop.io.SequenceFile$Writer.close(SequenceFile.java:932)&lt;br/&gt;
        at org.apache.hadoop.io.MapFile$Writer.close(MapFile.java:172)&lt;br/&gt;
        at org.apache.hadoop.hbase.HStore.internalFlushCache(HStore.java:1117)&lt;br/&gt;
        at org.apache.hadoop.hbase.HStore.flushCache(HStore.java:1081)&lt;br/&gt;
        at org.apache.hadoop.hbase.HRegion.internalFlushcache(HRegion.java:939)&lt;br/&gt;
        at org.apache.hadoop.hbase.HRegion.flushcache(HRegion.java:837)&lt;br/&gt;
        at org.apache.hadoop.hbase.HRegionServer$Flusher.run(HRegionServer.java:417)&lt;br/&gt;
2008-02-13 17:51:02,705 INFO org.apache.hadoop.hbase.HRegionServer: Rolling hlog. Number of entries: 30006&lt;br/&gt;
2008-02-13 17:52:07,221 INFO org.apache.hadoop.hbase.HRegion: starting compaction on region webdb,,1202919182716&lt;br/&gt;
2008-02-13 17:56:19,028 INFO org.apache.hadoop.hbase.HRegion: compaction completed on region webdb,,1202919182716. Took 4mins, 11sec&lt;br/&gt;
2008-02-13 17:56:19,167 INFO org.apache.hadoop.hbase.HRegion: Splitting webdb,com.geocities.www/Paris/1685/,1202919182718 because largest aggregate siz&lt;br/&gt;
e is 264.7m and desired size is 256.0m&lt;br/&gt;
2008-02-13 17:57:36,060 INFO org.apache.hadoop.ipc.Server: IPC Server handler 7 on 60020, call batchUpdate(webdb,com.geocities.www/Paris/1685/,12029191&lt;br/&gt;
82718, 1202921443000, org.apache.hadoop.hbase.io.BatchUpdate@7262b6) from 10.2.3.34:43471: error: org.apache.hadoop.hbase.NotServingRegionException: we&lt;br/&gt;
bdb,com.geocities.www/Paris/1685/,1202919182718&lt;br/&gt;
org.apache.hadoop.hbase.NotServingRegionException: webdb,com.geocities.www/Paris/1685/,1202919182718&lt;br/&gt;
        at org.apache.hadoop.hbase.HRegionServer.getRegion(HRegionServer.java:1610)&lt;br/&gt;
        at org.apache.hadoop.hbase.HRegionServer.getRegion(HRegionServer.java:1582)&lt;br/&gt;
        at org.apache.hadoop.hbase.HRegionServer.batchUpdate(HRegionServer.java:1431)&lt;br/&gt;
        at sun.reflect.GeneratedMethodAccessor7.invoke(Unknown Source)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.HbaseRPC$Server.call(HbaseRPC.java:413)&lt;br/&gt;
        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:910)&lt;br/&gt;
2008-02-13 17:57:46,082 INFO org.apache.hadoop.ipc.Server: IPC Server handler 2 on 60020, call batchUpdate(webdb,com.geocities.www/Paris/1685/,12029191&lt;br/&gt;
82718, 1202921443000, org.apache.hadoop.hbase.io.BatchUpdate@cac02f) from 10.2.3.34:43476: error: org.apache.hadoop.hbase.NotServingRegionException: we&lt;br/&gt;
bdb,com.geocities.www/Paris/1685/,1202919182718&lt;br/&gt;
org.apache.hadoop.hbase.NotServingRegionException: webdb,com.geocities.www/Paris/1685/,1202919182718&lt;br/&gt;
        at org.apache.hadoop.hbase.HRegionServer.getRegion(HRegionServer.java:1610)&lt;br/&gt;
        at org.apache.hadoop.hbase.HRegionServer.getRegion(HRegionServer.java:1582)&lt;br/&gt;
        at org.apache.hadoop.hbase.HRegionServer.batchUpdate(HRegionServer.java:1431)&lt;br/&gt;
        at sun.reflect.GeneratedMethodAccessor7.invoke(Unknown Source)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.HbaseRPC$Server.call(HbaseRPC.java:413)&lt;br/&gt;
        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:910)&lt;/p&gt;

&lt;p&gt;...&lt;/p&gt;

&lt;p&gt;And so on.  The region has been offline for 2-3 hours now...so it&apos;s not a split that just taking too long.&lt;/p&gt;

&lt;p&gt;I&apos;m not much of a java developer, tho I&apos;ll attempt to dig into the code myself.  Please, any help here would really be appreciated. &lt;/p&gt;</description>
                <environment>&lt;p&gt;Debian Linux, kernel 2.6.18-5-686-bigmem, JDK 1.6.0_01, from hbase bundled with hadoop 0.16.  Six node cluster + 1 master.&lt;/p&gt;</environment>
        <key id="12388575">HBASE-445</key>
            <summary>Region goes offline, perhaps after failed flush and subsuquent attempt to split</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="untethered">Seth Hartbecke</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 Feb 2008 19:14:07 +0000</created>
                <updated>Fri, 22 Aug 2008 21:35:04 +0000</updated>
                            <resolved>Tue, 12 Aug 2008 23:40:35 +0000</resolved>
                                    <version>0.2.0</version>
                                                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12568711" author="bryanduxbury" created="Wed, 13 Feb 2008 20:44:38 +0000"  >&lt;p&gt;Can you tell us which version of HBase you are working with? About how often do you see these exceptions come up?&lt;/p&gt;</comment>
                            <comment id="12568716" author="untethered" created="Wed, 13 Feb 2008 21:11:47 +0000"  >&lt;p&gt;We&apos;ve been looking into this more, it&apos;s looking like the first error is caused by a thread race condition in hadoop.  I&apos;m playing some tweaks there to see if I can&apos;t prevent the first error from occurring.  I really don&apos;t like my patch tho, tossing in &quot;synchronized&quot; statements feels like ... adding too many commas.&lt;/p&gt;</comment>
                            <comment id="12568719" author="untethered" created="Wed, 13 Feb 2008 21:17:55 +0000"  >&lt;p&gt;We run into this error about once a day.  We have a system that slowly over the day tends to accumulate about  250,000 rows each day.&lt;/p&gt;

&lt;p&gt;As for which version.  Whatever is bundled with hadoop-0.16.0.  I think that&apos;s 0.2.0.&lt;/p&gt;</comment>
                            <comment id="12568726" author="bryanduxbury" created="Wed, 13 Feb 2008 21:56:35 +0000"  >&lt;p&gt;Hadoop-0.16.0 is bundled with 0.1.0 HBase. &lt;/p&gt;

&lt;p&gt;Is there a known issue opened for the Hadoop race condition?&lt;/p&gt;</comment>
                            <comment id="12571827" author="jimk" created="Sun, 24 Feb 2008 02:01:22 +0000"  >&lt;p&gt;Has this problem happened recently? It looks like it should have been addressed by &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-154&quot; title=&quot;[hbase] Master marks region offline when it is recovering from a region server death&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-154&quot;&gt;&lt;del&gt;HBASE-154&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12580243" author="stack" created="Wed, 19 Mar 2008 06:07:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-501&quot; title=&quot;Empty region server address in info:server entry and a startcode of -1 in .META.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-501&quot;&gt;&lt;del&gt;HBASE-501&lt;/del&gt;&lt;/a&gt; fixes our offlining regions when an IOE in HRegion construction.&lt;/p&gt;</comment>
                            <comment id="12581333" author="bryanduxbury" created="Sun, 23 Mar 2008 03:56:10 +0000"  >&lt;p&gt;This could be related to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-524&quot; title=&quot;Problems with getFull&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-524&quot;&gt;&lt;del&gt;HBASE-524&lt;/del&gt;&lt;/a&gt;. Seth, can you verify that this still happens in more recent versions of hbase?&lt;/p&gt;</comment>
                            <comment id="12591846" author="stack" created="Wed, 23 Apr 2008 22:42:36 +0000"  >&lt;p&gt;Whats the latest Seth?&lt;/p&gt;</comment>
                            <comment id="12622031" author="stack" created="Tue, 12 Aug 2008 23:40:35 +0000"  >&lt;p&gt;Closing.  Recent communication with Seth has him running hbase w/o this issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 13 Feb 2008 20:44:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25204</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 19 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h7cv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98454</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>