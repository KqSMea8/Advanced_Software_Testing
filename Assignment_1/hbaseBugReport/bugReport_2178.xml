<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:59:35 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-2178/HBASE-2178.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-2178] Hooks for replication</title>
                <link>https://issues.apache.org/jira/browse/HBASE-2178</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;This issue is about getting all the hooks for mdc replication in core HBase.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12454998">HBASE-2178</key>
            <summary>Hooks for replication</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jdcryans">Jean-Daniel Cryans</assignee>
                                    <reporter username="jdcryans">Jean-Daniel Cryans</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Feb 2010 00:55:42 +0000</created>
                <updated>Fri, 20 Nov 2015 13:02:04 +0000</updated>
                            <resolved>Tue, 2 Feb 2010 23:20:52 +0000</resolved>
                                                    <fixVersion>0.90.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12828380" author="jdcryans" created="Tue, 2 Feb 2010 01:09:50 +0000"  >&lt;p&gt;This patch is basically the src/java part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2129&quot; title=&quot;Simple Master/Slave replication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2129&quot;&gt;&lt;del&gt;HBASE-2129&lt;/del&gt;&lt;/a&gt;. List of changes:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;HConstants&lt;br/&gt;
New constant for the znode parent.&lt;/li&gt;
	&lt;li&gt;HConnectionManager&lt;br/&gt;
Introduces a new way of keeping tab of the ZK quorums so that a single HBase client can talk to 2 different HBase clusters managed by the same quorum. &lt;/li&gt;
	&lt;li&gt;HbaseObjectWritable&lt;br/&gt;
Adds new classes to the Map.&lt;/li&gt;
	&lt;li&gt;HRegion&lt;br/&gt;
Now passed the whole HRegionInfo when appending.&lt;/li&gt;
	&lt;li&gt;HRegionServer&lt;br/&gt;
join() is down protected so child classes can override it and adds visibility to threadWakeFrequency&lt;/li&gt;
	&lt;li&gt;HLog&lt;br/&gt;
The reader now offers seek and getPosition, good for reusability.&lt;br/&gt;
doWrite now takes the regionInfo instead of just the name.&lt;br/&gt;
HLog.Entry now implements Writable&lt;/li&gt;
	&lt;li&gt;SequenceFileLogReader&lt;br/&gt;
Implements the 2 new methods.&lt;/li&gt;
	&lt;li&gt;SequenceFileLogWriter&lt;br/&gt;
Calls hflush instead of sync.&lt;/li&gt;
	&lt;li&gt;ZooKeeperWrapper&lt;br/&gt;
Mostly refactoring and new facilities.&lt;/li&gt;
	&lt;li&gt;HBaseTestingUtility&lt;br/&gt;
Makes the conf settable in the constructor.&lt;br/&gt;
Refactors the code to start a mini ZK cluster.&lt;br/&gt;
Provides a way to truncate a table very fast.&lt;/li&gt;
	&lt;li&gt;TestStoreReconstruction and TestHLog&lt;br/&gt;
Refactorings related to HLog modifications.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="12828406" author="ryanobjc" created="Tue, 2 Feb 2010 02:26:59 +0000"  >&lt;p&gt;+1:&lt;/p&gt;

&lt;p&gt;fix any import package.* no wildcard imports&lt;br/&gt;
HBaseTestCase.java appears to be whitespace only change should be reverted&lt;/p&gt;</comment>
                            <comment id="12828408" author="jdcryans" created="Tue, 2 Feb 2010 02:29:31 +0000"  >&lt;p&gt;New version of patch that fixes some nits Ryan found, the comments on the previous patch still all apply.&lt;/p&gt;</comment>
                            <comment id="12828421" author="jdcryans" created="Tue, 2 Feb 2010 03:11:42 +0000"  >&lt;p&gt;Also I might add that this patch passes all the tests.&lt;/p&gt;</comment>
                            <comment id="12828497" author="tsuna" created="Tue, 2 Feb 2010 06:32:56 +0000"  >&lt;p&gt;I&apos;m not sure I understand why you&apos;re making 4 fields public in the &lt;tt&gt;ZooKeeperWrapper&lt;/tt&gt; class, the only one you&apos;re accessing in your patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2129&quot; title=&quot;Simple Master/Slave replication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2129&quot;&gt;&lt;del&gt;HBASE-2129&lt;/del&gt;&lt;/a&gt; is &lt;tt&gt;parentZNode&lt;/tt&gt;.  And for this one I think an accessor would be better.&lt;/p&gt;

&lt;p&gt;In &lt;tt&gt;scanAddressDirectory&lt;/tt&gt;, I would declare the &lt;tt&gt;List&amp;lt;HServerAddress&amp;gt; list&lt;/tt&gt; after the check on &lt;tt&gt;nodes == null&lt;/tt&gt; that does an early return.  This improves readability and this way you can also invoke the constructor with the exact size of the &lt;tt&gt;ArrayList&lt;/tt&gt; in advance: double win!&lt;/p&gt;

&lt;p&gt;In &lt;tt&gt;listZnodes&lt;/tt&gt;, I don&apos;t know why you wrapped the arguments around.  They fit nicely on one line.&lt;/p&gt;

&lt;p&gt;In &lt;tt&gt;writeZNode&lt;/tt&gt;, there&apos;s some code in the try-block that&apos;s not indented.&lt;/p&gt;

&lt;p&gt;Just out of curiosity, why are you moving the &lt;tt&gt;import java.foo&lt;/tt&gt; after the &lt;tt&gt;import org.apache.bar&lt;/tt&gt;?&lt;/p&gt;

&lt;p&gt;Also I&apos;m not sure I understand why you removed the call to &lt;tt&gt;this.conf.setBoolean(&quot;dfs.support.append&quot;, true);&lt;/tt&gt; in &lt;tt&gt;setUp&lt;/tt&gt; in &lt;tt&gt;TestHLog&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="12828703" author="jdcryans" created="Tue, 2 Feb 2010 18:30:54 +0000"  >&lt;blockquote&gt;&lt;p&gt;I&apos;m not sure I understand why you&apos;re making 4 fields public in the ZooKeeperWrapper class, the only one you&apos;re accessing in your patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2129&quot; title=&quot;Simple Master/Slave replication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2129&quot;&gt;&lt;del&gt;HBASE-2129&lt;/del&gt;&lt;/a&gt; is parentZNode. And for this one I think an accessor would be better.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Agreed.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;In scanAddressDirectory, I would declare the List&amp;lt;HServerAddress&amp;gt; list after the check on nodes == null that does an early return. This improves readability and this way you can also invoke the constructor with the exact size of the ArrayList in advance: double win!&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Since I return the list, this would not compile. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;In listZnodes, I don&apos;t know why you wrapped the arguments around. They fit nicely on one line.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Agreed.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;In writeZNode, there&apos;s some code in the try-block that&apos;s not indented.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Good catch.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Just out of curiosity, why are you moving the import java.foo after the import org.apache.bar?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I will have to ask the IntelliJ authors &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/tongue.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Also I&apos;m not sure I understand why you removed the call to this.conf.setBoolean(&quot;dfs.support.append&quot;, true); in setUp in TestHLog.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This is something from the 0.20 era, it should have been removed before.&lt;/p&gt;</comment>
                            <comment id="12828748" author="stack" created="Tue, 2 Feb 2010 19:46:38 +0000"  >&lt;p&gt;I wonder if the interface inside SFLR shouldn&apos;t just implement &lt;a href=&quot;http://hadoop.apache.org/common/docs/r0.19.2/api/org/apache/hadoop/fs/Seekable.html?&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hadoop.apache.org/common/docs/r0.19.2/api/org/apache/hadoop/fs/Seekable.html?&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I think ZKWatcher is starting to break down.  Once there was an attempt at encapsulating all ZK operations inside ZKW.   Now they are starting to leak out.  I think thats inevitable as zk permeates more and more of hbase.&lt;/p&gt;

&lt;p&gt;Otherwise, +1 (after addressing Benoit and Ryan comments)&lt;/p&gt;</comment>
                            <comment id="12828781" author="jdcryans" created="Tue, 2 Feb 2010 21:45:14 +0000"  >&lt;blockquote&gt;&lt;p&gt;I wonder if the interface inside SFLR shouldn&apos;t just implement &lt;a href=&quot;http://hadoop.apache.org/common/docs/r0.19.2/api/org/apache/hadoop/fs/Seekable.html?&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hadoop.apache.org/common/docs/r0.19.2/api/org/apache/hadoop/fs/Seekable.html?&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes and the SFLW should implement Syncable because at the moment it&apos;s HLog that has it and to me it doesn&apos;t make much sense.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I think ZKWatcher is starting to break down. Once there was an attempt at encapsulating all ZK operations inside ZKW. Now they are starting to leak out. I think thats inevitable as zk permeates more and more of hbase.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Me too... We need a refactoring as more stuff comes in.&lt;/p&gt;</comment>
                            <comment id="12828795" author="jdcryans" created="Tue, 2 Feb 2010 22:18:31 +0000"  >&lt;p&gt;But the problem of having the Reader and Writer implementing those interfaces makes it that it may not make sense for other implementations like Avro?&lt;/p&gt;</comment>
                            <comment id="12828829" author="jdcryans" created="Tue, 2 Feb 2010 23:20:52 +0000"  >&lt;p&gt;Thank you guys for the comments and reviews, I committed the patch with changes to trunk.&lt;/p&gt;</comment>
                            <comment id="15017970" author="lars_francke" created="Fri, 20 Nov 2015 13:02:04 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                                                <inwardlinks description="is required by">
                                        <issuelink>
            <issuekey id="12445592">HBASE-2129</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12434486" name="HBASE-2178-2.patch" size="29066" author="jdcryans" created="Tue, 2 Feb 2010 02:29:31 +0000"/>
                            <attachment id="12434474" name="HBASE-2178.patch" size="26601" author="jdcryans" created="Tue, 2 Feb 2010 01:09:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 2 Feb 2010 02:26:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32441</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hgo7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99963</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>