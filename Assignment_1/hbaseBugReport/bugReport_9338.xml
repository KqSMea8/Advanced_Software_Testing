<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:03:31 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-9338/HBASE-9338.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-9338] Test Big Linked List fails on Hadoop 2.1.0</title>
                <link>https://issues.apache.org/jira/browse/HBASE-9338</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description></description>
                <environment></environment>
        <key id="12665560">HBASE-9338</key>
            <summary>Test Big Linked List fails on Hadoop 2.1.0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="eclark">Elliott Clark</assignee>
                                    <reporter username="eclark">Elliott Clark</reporter>
                        <labels>
                    </labels>
                <created>Mon, 26 Aug 2013 18:17:40 +0000</created>
                <updated>Fri, 20 Nov 2015 11:55:28 +0000</updated>
                            <resolved>Tue, 17 Sep 2013 05:32:40 +0000</resolved>
                                    <version>0.96.0</version>
                                    <fixVersion>0.98.0</fixVersion>
                    <fixVersion>0.96.0</fixVersion>
                                    <component>test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>17</watches>
                                                                <comments>
                            <comment id="13750374" author="stack" created="Mon, 26 Aug 2013 18:30:52 +0000"  >&lt;p&gt;This is critical if not a blocker I&apos;d say.&lt;/p&gt;</comment>
                            <comment id="13750383" author="eclark" created="Mon, 26 Aug 2013 18:42:33 +0000"  >&lt;p&gt;Configs on the cluster:&lt;/p&gt;

&lt;p&gt;core-site.xml&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;?xml version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt;?&amp;gt;
&amp;lt;?xml-stylesheet type=&lt;span class=&quot;code-quote&quot;&gt;&quot;text/xsl&quot;&lt;/span&gt; href=&lt;span class=&quot;code-quote&quot;&gt;&quot;configuration.xsl&quot;&lt;/span&gt;?&amp;gt;

&amp;lt;!-- Put site-specific property overrides in &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; file. --&amp;gt;

&amp;lt;configuration&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;fs.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;.name&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;hdfs:&lt;span class=&quot;code-comment&quot;&gt;//${MASTER_HOSTNAME}:8020/&amp;lt;/value&amp;gt;
&lt;/span&gt;  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;hadoop.data.dir0&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;/data0/&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;hadoop.data.dir1&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;/data1/&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;hadoop.data.dir2&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;/data2/&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;hadoop.data.dir3&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;/data3/&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;hadoop.data.dir4&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;/data4/&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;hadoop.data.dir5&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;/data5/&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;mapred.temp.dir&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;${hadoop.data.dir1}/mapred/temp&amp;lt;/value&amp;gt;
    &amp;lt;description&amp;gt;A shared directory &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; temporary files.
    &amp;lt;/description&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;ipc.client.connect.timeout&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;1000&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;ipc.client.connect.max.retries.on.timeouts&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;2&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;dfs.socket.timeout&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;5000&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;dfs.socket.write.timeout&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;5000&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;ipc.ping.interval&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;20000&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;io.file.buffer.size&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;65536&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;ipc.client.connect.max.retries&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;10&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;ipc.client.tcpnodelay&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;ipc.server.tcpnodelay&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;dfs.domain.socket.path&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/hadoop/dn_socket._PORT&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;
  
  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;dfs.client.read.shortcircuit&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;dfs.client.file-block-storage-locations.timeout&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;3000&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
     &amp;lt;name&amp;gt;dfs.client.read.shortcircuit.skip.checksum&amp;lt;/name&amp;gt;
     &amp;lt;value&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;lt;/value&amp;gt;
   &amp;lt;/property&amp;gt;

&amp;lt;/configuration&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;hdfs-site.xml&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;?xml version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt;?&amp;gt;
&amp;lt;?xml-stylesheet type=&lt;span class=&quot;code-quote&quot;&gt;&quot;text/xsl&quot;&lt;/span&gt; href=&lt;span class=&quot;code-quote&quot;&gt;&quot;configuration.xsl&quot;&lt;/span&gt;?&amp;gt;
&amp;lt;configuration&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;dfs.datanode.handler.count&amp;lt;/name&amp;gt;
    &amp;lt;!-- &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; 10 --&amp;gt;
    &amp;lt;value&amp;gt;32&amp;lt;/value&amp;gt;
    &amp;lt;description&amp;gt;The number of server threads &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the
    datanode.&amp;lt;/description&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;dfs.namenode.handler.count&amp;lt;/name&amp;gt;
    &amp;lt;!-- &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; 10 --&amp;gt;
    &amp;lt;value&amp;gt;32&amp;lt;/value&amp;gt;
    &amp;lt;description&amp;gt;The number of server threads &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the
    namenode.&amp;lt;/description&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;dfs.block.size&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;134217728&amp;lt;/value&amp;gt;
    &amp;lt;description&amp;gt;The &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; block size &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; files.&amp;lt;/description&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;dfs.datanode.max.xcievers&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;4098&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;dfs.namenode.replication.interval&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;15&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;dfs.balance.bandwidthPerSec&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;10485760&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;fs.checkpoint.dir&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;${hadoop.data.dir1}/dfs/namesecondary&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;dfs.name.dir&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;${hadoop.data.dir0}/dfs/name&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;dfs.data.dir&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;${hadoop.data.dir0}/dfs/data,${hadoop.data.dir1}/dfs/data,${hadoop.data.dir2}/dfs/data,${hadoop.data.dir3}/dfs/data,${hadoop.data.dir4}/dfs/data,${hadoop.data.dir5}/dfs/data&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;dfs.datanode.socket.write.timeout&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;10000&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;ipc.client.connect.timeout&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;1000&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;ipc.client.connect.max.retries.on.timeouts&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;2&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;dfs.socket.timeout&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;5000&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;dfs.socket.write.timeout&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;5000&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;dfs.domain.socket.path&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/hadoop/dn_socket._PORT&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;dfs.block.local-path-access.user&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;hbase&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
     &amp;lt;name&amp;gt;dfs.client.read.shortcircuit.skip.checksum&amp;lt;/name&amp;gt;
     &amp;lt;value&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;lt;/value&amp;gt;
   &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;dfs.client.file-block-storage-locations.timeout&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;3000&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

&amp;lt;/configuration&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;yarn-site.xml:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;?xml version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt;?&amp;gt;
&amp;lt;configuration&amp;gt;
  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;yarn.nodemanager.aux-services&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;mapreduce.shuffle&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;
  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;yarn.nodemanager.aux-services.mapreduce.shuffle.class&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;org.apache.hadoop.mapred.ShuffleHandler&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;
  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;yarn.resourcemanager.address&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;${MASTER_HOSTNAME}:10040&amp;lt;/value&amp;gt;
    &amp;lt;description&amp;gt;In Server specified the port that Resource Manager will runn on. In client is used &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; connecting to Resource Manager&amp;lt;/description&amp;gt;
  &amp;lt;/property&amp;gt;
  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;yarn.resourcemanager.resource-tracker.address&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;${MASTER_HOSTNAME}:8025&amp;lt;/value&amp;gt;
    &amp;lt;description&amp;gt;Utilized by Node Manager &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; communication with Resource Manager&amp;lt;/description&amp;gt;
  &amp;lt;/property&amp;gt;
  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;yarn.resourcemanager.scheduler.address&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;${MASTER_HOSTNAME}:8030&amp;lt;/value&amp;gt;
     &amp;lt;description&amp;gt;Utilized by Application Masters to communicate with Resource Manager; in our &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; MRAppMaster (MapReduce Application Master) to communicate with Resource Manager&amp;lt;/description&amp;gt;
  &amp;lt;/property&amp;gt;
  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;yarn.resourcemanager.admin.address&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;${MASTER_HOSTNAME}:8141&amp;lt;/value&amp;gt;
     &amp;lt;description&amp;gt;Utilized by administrative clients ($yarn rmadmin) to communicate with Resource Manager&amp;lt;/description&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
     &amp;lt;name&amp;gt;yarn.nodemanager.local-dirs&amp;lt;/name&amp;gt;
     &amp;lt;value&amp;gt;${hadoop.data.dir0}/mapred/nodemanager,${hadoop.data.dir1}/mapred/nodemanager,${hadoop.data.dir2}/mapred/nodemanager,${hadoop.data.dir3}/mapred/nodemanager,${hadoop.data.dir4}/mapred/nodemanager,${hadoop.data.dir5}/mapred/nodemanager&amp;lt;/value&amp;gt;
     &amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt;&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;lt;/&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt;&amp;gt;
     &amp;lt;description&amp;gt;Comma separated list of directories, where local data is persisted by Node Manager&amp;lt;/description&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
     &amp;lt;name&amp;gt;yarn.nodemanager.aux-services&amp;lt;/name&amp;gt;
     &amp;lt;value&amp;gt;mapreduce.shuffle&amp;lt;/value&amp;gt;
     &amp;lt;description&amp;gt;&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt; running service which executes on Node Manager(s) and provides MapReduce Sort and Shuffle functionality.&amp;lt;/description&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
     &amp;lt;name&amp;gt;yarn.log-aggregation-enable&amp;lt;/name&amp;gt;
     &amp;lt;value&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;lt;/value&amp;gt;
    &amp;lt;description&amp;gt;Enable log aggregation so application logs are moved onto hdfs and are viewable via web ui after the application completed. The &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; location on hdfs is &apos;/log&apos; and can be changed via yarn.nodemanager.remote-app-log-dir property&amp;lt;/description&amp;gt;
  &amp;lt;/property&amp;gt;

 &amp;lt;property&amp;gt;
     &amp;lt;name&amp;gt;hadoop.security.authorization&amp;lt;/name&amp;gt;
     &amp;lt;value&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&amp;lt;/value&amp;gt;
     &amp;lt;description&amp;gt;Disable authorization fo development and clusters that &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; not require security&amp;lt;/description&amp;gt;
   &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;description&amp;gt;Amount of physical memory, in MB, that can be allocated &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; containers.&amp;lt;/description&amp;gt;
    &amp;lt;name&amp;gt;yarn.nodemanager.resource.memory-mb&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;9000&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;
&amp;lt;/configuration&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;hbase-site.xml:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;?xml version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt;?&amp;gt;
&amp;lt;?xml-stylesheet type=&lt;span class=&quot;code-quote&quot;&gt;&quot;text/xsl&quot;&lt;/span&gt; href=&lt;span class=&quot;code-quote&quot;&gt;&quot;configuration.xsl&quot;&lt;/span&gt;?&amp;gt;
&amp;lt;configuration&amp;gt;
  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;hbase.zookeeper.quorum&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;${MASTER_HOSTNAME}&amp;lt;/value&amp;gt;
    &amp;lt;description&amp;gt;The directory shared by RegionServers.
    &amp;lt;/description&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;hbase.rootdir&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;hdfs:&lt;span class=&quot;code-comment&quot;&gt;//${MASTER_HOSTNAME}:8020/hbase&amp;lt;/value&amp;gt;
&lt;/span&gt;  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;hbase.cluster.distributed&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;dfs.client.read.shortcircuit&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;dfs.block.local-path-access.user&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;hbase&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;dfs.domain.socket.path&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/hadoop/dn_socket._PORT&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
     &amp;lt;name&amp;gt;dfs.client.read.shortcircuit.skip.checksum&amp;lt;/name&amp;gt;
     &amp;lt;value&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;lt;/value&amp;gt;
   &amp;lt;/property&amp;gt;

   &amp;lt;property&amp;gt;
     &amp;lt;name&amp;gt;hbase.IntegrationTestDataIngestSlowDeterministic.runtime&amp;lt;/name&amp;gt;
     &amp;lt;value&amp;gt;3600000&amp;lt;/value&amp;gt;
   &amp;lt;/property&amp;gt;
&amp;lt;/configuration&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13750400" author="eclark" created="Mon, 26 Aug 2013 18:52:11 +0000"  >&lt;p&gt;Here&apos;s the command run:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hbase org.apache.hadoop.hbase.test.IntegrationTestBigLinkedList Loop 5 12 2500000 IntegrationTestBigLinkedList 10
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And the result:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
	org.apache.hadoop.hbase.test.IntegrationTestBigLinkedList$Verify$Counts
		REFERENCED=11520689
		UNREFERENCED=11520770
	File Input Format Counters 
		Bytes Read=0
	File Output Format Counters 
		Bytes Written=972064362
2013-08-26 11:48:03,060 INFO  [main] hbase.HBaseCluster: Added &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HBaseAdmin
2013-08-26 11:48:03,061 ERROR [main] util.AbstractHBaseTool: Error running command-line tool
java.lang.RuntimeException: Verify.run failed with &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; code: 1
	at org.apache.hadoop.hbase.test.IntegrationTestBigLinkedList$Loop.runVerify(IntegrationTestBigLinkedList.java:726)
	at org.apache.hadoop.hbase.test.IntegrationTestBigLinkedList$Loop.run(IntegrationTestBigLinkedList.java:764)
	at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:70)
	at org.apache.hadoop.hbase.test.IntegrationTestBigLinkedList.runTestFromCommandLine(IntegrationTestBigLinkedList.java:1063)
	at org.apache.hadoop.hbase.IntegrationTestBase.doWork(IntegrationTestBase.java:77)
	at org.apache.hadoop.hbase.util.AbstractHBaseTool.run(AbstractHBaseTool.java:112)
	at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:70)
	at org.apache.hadoop.hbase.test.IntegrationTestBigLinkedList.main(IntegrationTestBigLinkedList.java:1098)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13750434" author="eclark" created="Mon, 26 Aug 2013 19:19:58 +0000"  >&lt;p&gt;Looks like hadoop has changed the way they will serialize a null byte array.  Changed the test to use the empty byte array constant.&lt;/p&gt;</comment>
                            <comment id="13750440" author="stack" created="Mon, 26 Aug 2013 19:25:17 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13750632" author="eclark" created="Mon, 26 Aug 2013 22:13:35 +0000"  >&lt;p&gt;Hmm that might not be the issue.  Longer running tests are seeing the same thing again.... Blah.&lt;/p&gt;</comment>
                            <comment id="13750680" author="sershe" created="Mon, 26 Aug 2013 22:50:43 +0000"  >&lt;p&gt;Do the longer runs have similar numbers (a lot of unreferenced, no undefined?).&lt;br/&gt;
This could be two separate issues, we saw some issue related to scanner timeout when reading on 94, but that one had undefined items in results.&lt;/p&gt;</comment>
                            <comment id="13750697" author="eclark" created="Mon, 26 Aug 2013 23:03:21 +0000"  >&lt;p&gt;Unreferenced.  I&apos;m running again on top of the tip of 0.95.&lt;/p&gt;</comment>
                            <comment id="13750698" author="eclark" created="Mon, 26 Aug 2013 23:04:27 +0000"  >&lt;p&gt;I&apos;m also seeing Test Load and Verify fail as well (only with a slowDeterministic chaos monkey).  The hard part is that these tests take 3 hours for each run or more.&lt;/p&gt;</comment>
                            <comment id="13751830" author="devaraj" created="Tue, 27 Aug 2013 22:45:50 +0000"  >&lt;p&gt;Elliott, are these failures consistent (every run fails)?&lt;/p&gt;</comment>
                            <comment id="13751859" author="devaraj" created="Tue, 27 Aug 2013 23:10:44 +0000"  >&lt;p&gt;Just FYI, in our internal QA infra we run these tests as well and they run successfully on top of 2.1 (not sure on the exact rev of the 2.1 branch). In talking about this problem with one of our QA engineers, we were wondering if &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9253&quot; title=&quot;Clean up IT test code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9253&quot;&gt;&lt;del&gt;HBASE-9253&lt;/del&gt;&lt;/a&gt; could have caused any regression (we don&apos;t have that patch in our builds).&lt;/p&gt;</comment>
                            <comment id="13751901" author="eclark" created="Tue, 27 Aug 2013 23:42:00 +0000"  >&lt;p&gt;These failures are consistent when the ChaosMonkey is turned on to slow deterministic.  If it&apos;s turned off then the tests succeeded.&lt;/p&gt;

&lt;p&gt;Here&apos;s an example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
	Shuffle Errors
		BAD_ID=0
		CONNECTION=0
		IO_ERROR=0
		WRONG_LENGTH=0
		WRONG_MAP=0
		WRONG_REDUCE=0
	org.apache.hadoop.hbase.test.IntegrationTestBigLinkedList$Verify$Counts
		REFERENCED=1199999908
		UNDEFINED=46
		UNREFERENCED=46
	File Input Format Counters 
		Bytes Read=0
	File Output Format Counters 
		Bytes Written=6866
2013-08-27 04:56:16,792 ERROR [main] test.IntegrationTestBigLinkedList$Verify: Expected referenced count does not match with actual referenced count. expected referenced=1200000000 ,actual=1199999908
2013-08-27 04:56:16,792 ERROR [main] test.IntegrationTestBigLinkedList$Verify: Unreferenced nodes were not expected. Unreferenced count=46
2013-08-27 04:56:16,792 ERROR [main] test.IntegrationTestBigLinkedList$Verify: Found an undefined node. Undefined count=46
2013-08-27 04:57:00,129 INFO  [main] hbase.ClusterManager: Executing remote command: ps aux | grep proc_regionserver | grep -v grep | tr -s &apos; &apos; | cut -d &apos; &apos; -f2 , hostname:a1806.halxg.cloudera.com
2013-08-27 04:57:00,130 INFO  [main] util.Shell: Executing full command [/usr/bin/ssh -o ConnectTimeout=1 -o StrictHostKeyChecking=no a1806.halxg.cloudera.com &lt;span class=&quot;code-quote&quot;&gt;&quot;ps aux | grep proc_regionserver | grep -v grep | tr -s &apos; &apos; | cut -d &apos; &apos; -f2&quot;&lt;/span&gt;]
2013-08-27 04:57:00,945 INFO  [main] hbase.ClusterManager: Executed remote command, exit code:0 , output:
2013-08-27 04:57:00,945 INFO  [main] hbase.HBaseCluster: Starting RS on: a1806.halxg.cloudera.com
2013-08-27 04:57:00,945 INFO  [main] hbase.ClusterManager: Executing remote command: /opt/hbase/current/bin/../bin/hbase-daemon.sh  start regionserver , hostname:a1806.halxg.cloudera.com
2013-08-27 04:57:00,946 INFO  [main] util.Shell: Executing full command [/usr/bin/ssh -o ConnectTimeout=1 -o StrictHostKeyChecking=no a1806.halxg.cloudera.com &lt;span class=&quot;code-quote&quot;&gt;&quot;/opt/hbase/current/bin/../bin/hbase-daemon.sh  start regionserver&quot;&lt;/span&gt;]
2013-08-27 04:57:02,269 INFO  [main] hbase.ClusterManager: Executed remote command, exit code:0 , output:starting regionserver, logging to /opt/hbase/current/bin/../logs/hbase-hbase-regionserver-a1806.halxg.cloudera.com.out

2013-08-27 04:57:02,270 INFO  [main] hbase.HBaseCluster: Added &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HBaseAdmin
2013-08-27 04:57:02,271 ERROR [main] util.AbstractHBaseTool: Error running command-line tool
java.lang.RuntimeException: Verify.verify failed
	at org.apache.hadoop.hbase.test.IntegrationTestBigLinkedList$Loop.runVerify(IntegrationTestBigLinkedList.java:727)
	at org.apache.hadoop.hbase.test.IntegrationTestBigLinkedList$Loop.run(IntegrationTestBigLinkedList.java:760)
	at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:70)
	at org.apache.hadoop.hbase.test.IntegrationTestBigLinkedList.runTestFromCommandLine(IntegrationTestBigLinkedList.java:1059)
	at org.apache.hadoop.hbase.IntegrationTestBase.doWork(IntegrationTestBase.java:77)
	at org.apache.hadoop.hbase.util.AbstractHBaseTool.run(AbstractHBaseTool.java:112)
	at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:70)
	at org.apache.hadoop.hbase.test.IntegrationTestBigLinkedList.main(IntegrationTestBigLinkedList.java:1094)
Build step &apos;Execute shell&apos; marked build as failure
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Word of caution:  If you don&apos;t have &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9253&quot; title=&quot;Clean up IT test code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9253&quot;&gt;&lt;del&gt;HBASE-9253&lt;/del&gt;&lt;/a&gt; then you are testing 1/100th of what is intended.&lt;/p&gt;</comment>
                            <comment id="13751918" author="devaraj" created="Tue, 27 Aug 2013 23:55:51 +0000"  >&lt;blockquote&gt;&lt;p&gt;Word of caution: If you don&apos;t have &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9253&quot; title=&quot;Clean up IT test code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9253&quot;&gt;&lt;del&gt;HBASE-9253&lt;/del&gt;&lt;/a&gt; then you are testing 1/100th of what is intended.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;When you have a moment, please explain this a little more. It&apos;s not apparent from the jira...&lt;/p&gt;</comment>
                            <comment id="13751932" author="eclark" created="Wed, 28 Aug 2013 00:07:59 +0000"  >&lt;blockquote&gt;&lt;p&gt;When you have a moment, please explain this a little more. It&apos;s not apparent from the jira...&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Done on that issue, so that it should be searchable later on.&lt;/p&gt;</comment>
                            <comment id="13752037" author="eclark" created="Wed, 28 Aug 2013 02:43:20 +0000"  >&lt;p&gt;I&apos;m deploying a more stock config (without any of the changed rpc/ipc timeouts).  Lets see if that helps.&lt;/p&gt;</comment>
                            <comment id="13753059" author="eclark" created="Wed, 28 Aug 2013 23:57:03 +0000"  >&lt;p&gt;Ok, so I&apos;m pretty sure that I have it.  Hadoop 2.1.0 was a red herring.  I just noticed the failures around then because I had upped the test iterations in preparation for a 0.96 rc.&lt;/p&gt;

&lt;p&gt;Pretty sure the cause is Online Schema Change.  I&apos;ve been running lots of different tests, and whenever I have those chaos monkey actions then IntegrationTestLoadAndVerify passes.  I&apos;m running IntegrationTestBigLinkedList right now to make sure that is the issue for both.  But I think there is some bug where data can be skipped or returned mal-formed while the change is in progress.  So if the IntegrationTestBigLinkedList run passes (takes about 8 hours with the number of iterations we run on the cluster) then I think we should disable Online Schema Change for 0.96.&lt;/p&gt;

&lt;p&gt;I know I was the one that enabled it, but I think this will help with stability for the upcoming release.&lt;/p&gt;</comment>
                            <comment id="13756918" author="eclark" created="Tue, 3 Sep 2013 18:58:23 +0000"  >&lt;p&gt;Still seeing this 100% of the time on out test cluster.&lt;/p&gt;

&lt;p&gt;Running:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hbase org.apache.hadoop.hbase.test.IntegrationTestBigLinkedList --monkey slowDeterministic Loop 5 12 25000000 IntegrationTestBigLinkedList 12
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Fails every time.  Usually it will get through the first few iterations but it will fail before the 5th.  Resulting in:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
	org.apache.hadoop.hbase.test.IntegrationTestBigLinkedList$Verify$Counts
		REFERENCED=599327221
		UNDEFINED=336384
		UNREFERENCED=336384
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
	org.apache.hadoop.hbase.test.IntegrationTestBigLinkedList$Verify$Counts
		REFERENCED=899938580
		UNDEFINED=29048
		UNREFERENCED=32373
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;Disabling online schema change made Load and Verify pass.  However there is still something wrong.  I went through the MR output and the keys listed as undefined are really missing (going on the shell they are never returned).  So it looks like we are missing single links in the chain.&lt;/p&gt;

&lt;p&gt;I&apos;ve modified the job to produce a more usable client column.  I&apos;ve used that to look at the logs for each attempt.  Nothing seems too much amiss in the logs.  Can someone run the same tests with a high number of iterations (Seems this always passes on the first loop) ?&lt;/p&gt;</comment>
                            <comment id="13757283" author="stack" created="Wed, 4 Sep 2013 00:13:03 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt;  Agree this candidate to sink the RC.&lt;/p&gt;</comment>
                            <comment id="13757286" author="eclark" created="Wed, 4 Sep 2013 00:16:17 +0000"  >&lt;p&gt;I&apos;m running a test currently with just regionserver/masters kills and no merge. We&apos;ll see if that does anything.&lt;/p&gt;</comment>
                            <comment id="13758446" author="eclark" created="Wed, 4 Sep 2013 22:33:42 +0000"  >&lt;p&gt;Here&apos;s a patch with some test changes I have been using to try and debug this issue.&lt;/p&gt;

&lt;p&gt;Last night I ran a run with restart only chaos monkey.  That passed.&lt;/p&gt;

&lt;p&gt;Then after that I tried to run slow deterministic with no merge region.  That Failed because of an assignment manager issue.  There were 100 regions that were RIT for 4 hours. (I&apos;ve seen this before and its something we should look at but probably not a release blocker).&lt;/p&gt;

&lt;p&gt;Then this morning I started another slow deterministic with no merge and that failed.  So this leads me to believe that the data loss has something to do with two different actions occurring at the the same time.  It also seems to suggest that region merge isn&apos;t the issue.&lt;/p&gt;</comment>
                            <comment id="13758466" author="stack" created="Wed, 4 Sep 2013 22:44:29 +0000"  >&lt;p&gt;Rah-rah &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="13760594" author="eclark" created="Fri, 6 Sep 2013 20:35:31 +0000"  >&lt;h1&gt;&lt;a name=&quot;What%27shappened&quot;&gt;&lt;/a&gt;What&apos;s happened&lt;/h1&gt;

&lt;p&gt;When the new Hadoop release was in RC and we were getting close to a 0.96 release of our own I changed all of the IT tests to run for longer. When I did this IntegrationTestBigLinkedList and IntegrationTestLoadAndVerify started failing.  I at first thought this was due to 2.1.0 but now I&apos;m pretty sure it was just a red herring as the tests pass with a shorter run time. So I started creating new chaos monkeys with different actions turned on and off.  Doing that I found that Online Schema Change was what was causing Test Load and Verify to fail.  So that was disabled in 0.96.&lt;/p&gt;

&lt;p&gt;Then I started working on Big Linked List.  That one has been much harder.&lt;/p&gt;

&lt;h1&gt;&lt;a name=&quot;Observations&quot;&gt;&lt;/a&gt;Observations&lt;/h1&gt;

&lt;p&gt;The calm monkey always passes.  The unbalance one almost always passes.  When it doesn&apos;t, the failure is usually due to the assignment manager getting stuck.  There appears to be no data loss then.&lt;/p&gt;

&lt;p&gt;Lots of the failures are like this one: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;	Map-Reduce Framework
		Map input records=599999660
		Map output records=1199999320
		Map output bytes=38999977900
		Map output materialized bytes=41399980716
		Input split bytes=7360
		Combine input records=0
		Combine output records=0
		Reduce input groups=600000000
		Reduce shuffle bytes=41399980716
		Reduce input records=1199999320
		Reduce output records=680
		Spilled Records=3576554634
		Shuffled Maps =696
		Failed Shuffles=0
		Merged Map outputs=696
		GC time elapsed (ms)=96902
		CPU time spent (ms)=14269000
		Physical memory (bytes) snapshot=86934548480
		Virtual memory (bytes) snapshot=157839667200
		Total committed heap usage (bytes)=86516498432
	HBase Counters
		BYTES_IN_REMOTE_RESULTS=29267422740
		BYTES_IN_RESULTS=35999982060
		MILLIS_BETWEEN_NEXTS=15450135
		NOT_SERVING_REGION_EXCEPTION=27
		NUM_SCANNER_RESTARTS=0
		REGIONS_SCANNED=100
		REMOTE_RPC_CALLS=4878206
		REMOTE_RPC_RETRIES=90
		RPC_CALLS=6000370
		RPC_RETRIES=103
	Shuffle Errors
		BAD_ID=0
		CONNECTION=0
		IO_ERROR=0
		WRONG_LENGTH=0
		WRONG_MAP=0
		WRONG_REDUCE=0
	org.apache.hadoop.hbase.test.IntegrationTestBigLinkedList$Verify$Counts
		REFERENCED=599999320
		UNDEFINED=340
		UNREFERENCED=340
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The number of map input records is too low.  It should always be a multiple of 30m. The number of un-referenced rows is equal to the number of undefined rows. If you add that number to the number of map input records then all rows are accounted for. That suggests that for this job there are lots of places that we are missing exactly on link at each location. &lt;/p&gt;

&lt;p&gt;However that pattern isn&apos;t 100%.  There are other tests where the number of unreferenced nodes is not equal to the number of undefined rows.  So those tests runs have some places in the chain were more then one link is missing.  To me this seems to suggest that it&apos;s not an off by one error and that it seems like it&apos;s on the client side.&lt;/p&gt;

&lt;h1&gt;&lt;a name=&quot;ThingsI%27vetried&quot;&gt;&lt;/a&gt;Things I&apos;ve tried&lt;/h1&gt;

&lt;ul&gt;
	&lt;li&gt;Tried to see if it&apos;s just a badly written test
	&lt;ul&gt;
		&lt;li&gt;The test is hard to follow and could be cleaned up&lt;/li&gt;
		&lt;li&gt;But it&apos;s logic seems solid.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;I thought maybe yarn is the one messing up our data.  So I Changed the output keys to match what Load Test and Verify was doing
	&lt;ul&gt;
		&lt;li&gt;This didn&apos;t seem to have any real impact one Online Schema Change was turned off.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Tried to see if one map task was failing.  So I changed the job to log more and to use a better client column.
	&lt;ul&gt;
		&lt;li&gt;It&apos;s not just one map task that has failures&lt;/li&gt;
		&lt;li&gt;It is always the last generation job that was the writer of data that&apos;s missing.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Then I tried to see if it&apos;s just the beginning or the end of the linked list that is missing data
	&lt;ul&gt;
		&lt;li&gt;It&apos;s not.  There is missing data everywhere in the chain.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Running Verify step with no monkey
	&lt;ul&gt;
		&lt;li&gt;This failed suggesting that we are really losing data&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Then I though it might be the same bug that was causing replication to lose edits. So I re-ran the tests before and after JD&apos;s HLog reader change.
	&lt;ul&gt;
		&lt;li&gt;Tests fail with JD&apos;s patch&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Then I tried Running the test with a Monkey that kills RS and Master
	&lt;ul&gt;
		&lt;li&gt;This passed&lt;/li&gt;
		&lt;li&gt;I even ran this with more loop iterations and it still passed&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;I Thought maybe it was merge regions. So I turned off merging regions
	&lt;ul&gt;
		&lt;li&gt;The tests still failed.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;So I ran a job where inside of the generation job I run a get right after the puts.
	&lt;ul&gt;
		&lt;li&gt;This was SLOW.&lt;/li&gt;
		&lt;li&gt;Like really really really slow.  10x slower.  What has happened to our get speed ?&lt;/li&gt;
		&lt;li&gt;It failed.  To me this suggested that this was related to the client.  My thought was that the client was silently failing a put.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Then I thought that it was possible that the gets were just arriving at the region servers after the data loss had happened.&lt;/li&gt;
	&lt;li&gt;So I moved the get &lt;b&gt;directly&lt;/b&gt; after the puts.
	&lt;ul&gt;
		&lt;li&gt;This required flushing a lot more. So it was slow.&lt;/li&gt;
		&lt;li&gt;The first two iterations passed but it would be 3 days for me to finish the entire five iterations so I stopped the run.&lt;/li&gt;
		&lt;li&gt;Everything was passing though&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Next I thought it could be a JVM issue.  1.7.15 had been a little flakey on me.&lt;/li&gt;
	&lt;li&gt;So I upgraded to 1.7.25.
	&lt;ul&gt;
		&lt;li&gt;This had no effect.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Next run I started looking at where the data was lost.
	&lt;ul&gt;
		&lt;li&gt;&lt;font color=&quot;red&quot;&gt;All the data I lost in my last run was in the same region.&lt;/font&gt;&lt;/li&gt;
		&lt;li&gt;All of it was around the same time.&lt;/li&gt;
		&lt;li&gt;Different mappers.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;



&lt;h1&gt;&lt;a name=&quot;SampleDanglingPointers&quot;&gt;&lt;/a&gt;Sample Dangling Pointers&lt;/h1&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
=&amp;gt; #&amp;lt;#&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;:0x2123dde6&amp;gt;:0x5f1840c3&amp;gt;
hbase(main):002:0&amp;gt; get &apos;IntegrationTestBigLinkedList&apos;, &lt;span class=&quot;code-quote&quot;&gt;&quot;Y7\xEC\xF6w\xDB\x92\x88L\x96\x90\xA0\x17\xCE\xB9\x92&quot;&lt;/span&gt;
COLUMN                                              CELL                                                                                                                                                  
 meta:client                                        timestamp=1378465754975, value=Job: job_1378337631389_0032 Task: attempt_1378337631389_0032_m_000007_0                                                
 meta:count                                         timestamp=1378465754975, value=\x00\x00\x00\x00\x01:{\xE9                                                                                             
 meta:prev                                          timestamp=1378465754975, value=\xAE\xE1\x9C\xDAY~&quot;,\x08\xE2L\xB8\x06\x13\x81H                                                                         
3 row(s) in 0.0920 seconds

hbase(main):003:0&amp;gt; get &apos;IntegrationTestBigLinkedList&apos;, &lt;span class=&quot;code-quote&quot;&gt;&quot;\xB0\x85\x1D\xF4\x15%\xA2\xB2D&amp;gt;\x94\xE5\x9D\xE3\x9B\xA4&quot;&lt;/span&gt;
COLUMN                                              CELL                                                                                                                                                  
 meta:client                                        timestamp=1378465679500, value=Job: job_1378337631389_0032 Task: attempt_1378337631389_0032_m_000001_0                                                
 meta:count                                         timestamp=1378465679500, value=\x00\x00\x00\x00\x01_\x97z                                                                                             
 meta:prev                                          timestamp=1378465679500, value=\xAE\xDE\x05\xFDVT\xA2p\x08L\x15\x93+\xEB\xBD\x19                                                                      
3 row(s) in 0.0940 seconds

hbase(main):004:0&amp;gt; get &apos;IntegrationTestBigLinkedList&apos;, &lt;span class=&quot;code-quote&quot;&gt;&quot;s\xC3Z\x8B\xAD*\xEF\xF3\x1C\xDAa\x5C#\xE29\x94&quot;&lt;/span&gt;
COLUMN                                              CELL                                                                                                                                                  
 meta:client                                        timestamp=1378465746735, value=Job: job_1378337631389_0032 Task: attempt_1378337631389_0032_m_000002_0                                                
 meta:count                                         timestamp=1378465746735, value=\x00\x00\x00\x00\x01Z:\xEB                                                                                             
 meta:prev                                          timestamp=1378465746735, value=\xAE\xD5GcLOJ\xBD\x1B\xC2\xEE\xDD\x02\xBCi\x0A                                                                         
3 row(s) in 0.1850 seconds

hbase(main):005:0&amp;gt; get &apos;IntegrationTestBigLinkedList&apos;, &lt;span class=&quot;code-quote&quot;&gt;&quot;T\x91$\xE0\xB3~\xB6\x88\x03\x9Df\x99\xE1\xA7qX&quot;&lt;/span&gt;
COLUMN                                              CELL                                                                                                                                                  
 meta:client                                        timestamp=1378465679216, value=Job: job_1378337631389_0032 Task: attempt_1378337631389_0032_m_000000_0                                                
 meta:count                                         timestamp=1378465679216, value=\x00\x00\x00\x00\x01P\xC1!                                                                                             
 meta:prev                                          timestamp=1378465679216, value=\xAE\xCE\xA8\xCDX\x8A\xC7H(t\xBAx\xEF|\x0E\xCD                                                                         
3 row(s) in 0.1400 seconds

hbase(main):006:0&amp;gt; get &apos;IntegrationTestBigLinkedList&apos;, &lt;span class=&quot;code-quote&quot;&gt;&quot;\xB1\xC3+h\xEE\xE0{\x03p\x0C\x83\x87L\x96\xA1\xBB&quot;&lt;/span&gt;
COLUMN                                              CELL                                                                                                                                                  
 meta:client                                        timestamp=1378465684324, value=Job: job_1378337631389_0032 Task: attempt_1378337631389_0032_m_000003_0                                                
 meta:count                                         timestamp=1378465684324, value=\x00\x00\x00\x00\x01b\x12\xCA                                                                                          
 meta:prev                                          timestamp=1378465684324, value=\xAE\xC5\x17H[\xD2o\x9C\xF5\xE0\x8F\xB87\x81\xA7C                                                                      
3 row(s) in 0.0730 seconds

hbase(main):007:0&amp;gt; get &apos;IntegrationTestBigLinkedList&apos;, &lt;span class=&quot;code-quote&quot;&gt;&quot;|@\x1AL\x17\x9E\xF2s\xD8\xD3\x07%\x11l\xDA\x83&quot;&lt;/span&gt;
COLUMN                                              CELL                                                                                                                                                  
 meta:client                                        timestamp=1378465730726, value=Job: job_1378337631389_0032 Task: attempt_1378337631389_0032_m_000000_0                                                
 meta:count                                         timestamp=1378465730726, value=\x00\x00\x00\x00\x01R\x99\x0D                                                                                          
 meta:prev                                          timestamp=1378465730726, value=\xAD\xE10\x10t\xA9\x0D+]\xFC\xA4\xD3\x9A`\x06\xD6                                                                      
3 row(s) in 0.1530 seconds

hbase(main):008:0&amp;gt; get &apos;IntegrationTestBigLinkedList&apos;, &lt;span class=&quot;code-quote&quot;&gt;&quot;|0\xFF8/\x86p ^V\xA4\xD0@\x0A\x0E\xC1&quot;&lt;/span&gt;
COLUMN                                              CELL                                                                                                                                                  
 meta:client                                        timestamp=1378465752879, value=Job: job_1378337631389_0032 Task: attempt_1378337631389_0032_m_000002_0                                                
 meta:count                                         timestamp=1378465752879, value=\x00\x00\x00\x00\x01Z\xC8%                                                                                             
 meta:prev                                          timestamp=1378465752879, value=\xAE\x94)\x93+\xDEa{_\x81\x9Ft,\x9B^\xB6                                                                               
3 row(s) in 0.0780 seconds
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;All of the missing rows start with &quot;\xAE&quot; or &quot;\xAD&quot;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hbase(main):002:0&amp;gt; java.util.Date.&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;(1378465752879).toString
=&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;Fri Sep 06 04:09:12 PDT 2013&quot;&lt;/span&gt;
hbase(main):003:0&amp;gt; java.util.Date.&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;(1378465730726).toString
=&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;Fri Sep 06 04:08:50 PDT 2013&quot;&lt;/span&gt;
hbase(main):004:0&amp;gt; java.util.Date.&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;(1378465684324).toString
=&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;Fri Sep 06 04:08:04 PDT 2013&quot;&lt;/span&gt;
hbase(main):005:0&amp;gt; java.util.Date.&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;(1378465679216).toString
=&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;Fri Sep 06 04:07:59 PDT 2013&quot;&lt;/span&gt;
hbase(main):006:0&amp;gt; java.util.Date.&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;(1378465746735).toString
=&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;Fri Sep 06 04:09:06 PDT 2013&quot;&lt;/span&gt;
hbase(main):007:0&amp;gt; java.util.Date.&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;(1378465679500).toString
=&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;Fri Sep 06 04:07:59 PDT 2013&quot;&lt;/span&gt;
hbase(main):008:0&amp;gt; java.util.Date.&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;(1378465754975).toString
=&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;Fri Sep 06 04:09:14 PDT 2013&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The dangling pointers are all written within 3 mins of each other.&lt;/p&gt;

&lt;h2&gt;&lt;a name=&quot;SideNote&quot;&gt;&lt;/a&gt;Side Note&lt;/h2&gt;

&lt;p&gt;JDK7 seems to core dump a lot when starting up region servers.  Once things are all set up it&apos;s stable.  I need to turn on core dumps into the a known folder so the Jenkins can archive them. &lt;/p&gt;</comment>
                            <comment id="13760671" author="sershe" created="Fri, 6 Sep 2013 21:46:10 +0000"  >&lt;p&gt;there might be several types of failures. Are all of these real data loss? For the last one it looks like something I saw on 94 (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8935&quot; title=&quot;IntegrationTestBigLinkedList fails under load on 0.94 due to some scan issues - add logging&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8935&quot;&gt;&lt;del&gt;HBASE-8935&lt;/del&gt;&lt;/a&gt;), but then it was scanner issues during original verify, which went away on verify rerun.&lt;/p&gt;</comment>
                            <comment id="13760677" author="eclark" created="Fri, 6 Sep 2013 21:53:31 +0000"  >&lt;p&gt;Yes they are all real data loss.  I&apos;ve run the verify multiple times and I never get the data.  hbck comes back clean and a get to the missing rows returns nothing.&lt;/p&gt;

&lt;p&gt;I&apos;ve started a run that will keep all of the data in wal log and I&apos;ll see if the data made it there.&lt;/p&gt;</comment>
                            <comment id="13760728" author="enis" created="Fri, 6 Sep 2013 23:06:20 +0000"  >&lt;blockquote&gt;&lt;p&gt;hbase org.apache.hadoop.hbase.test.IntegrationTestBigLinkedList Loop 5 12 2500000 IntegrationTestBigLinkedList 10&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This shows num nodes per mapper 2.5M, not 25M. Since the default wrap size is 1M, it might cause unreferences. Though, it should not cause undefineds, and low number of unreferenced&apos;s. &lt;/p&gt;</comment>
                            <comment id="13760745" author="eclark" created="Fri, 6 Sep 2013 23:30:43 +0000"  >&lt;blockquote&gt;&lt;p&gt;This shows num nodes per mapper 2.5M, not 25M.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yeah that was a typo.  It&apos;s corrected farther down the page.  &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9338?focusedCommentId=13756918&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13756918&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-9338?focusedCommentId=13756918&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13756918&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Here are the exact commands run for every test:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
export SSH_OPTS=&lt;span class=&quot;code-quote&quot;&gt;&quot;-o IdentityFile=id_rsa -o StrictHostKeyChecking=no&quot;&lt;/span&gt;
ssh $SSH_OPTS hbase@$TEST_HOST -x &lt;span class=&quot;code-quote&quot;&gt;&quot;echo &apos;disable \&quot;&lt;/span&gt;IntegrationTestBigLinkedList\&lt;span class=&quot;code-quote&quot;&gt;&quot;&apos; | hbase shell&quot;&lt;/span&gt;
ssh $SSH_OPTS hbase@$TEST_HOST -x &lt;span class=&quot;code-quote&quot;&gt;&quot;echo &apos;drop \&quot;&lt;/span&gt;IntegrationTestBigLinkedList\&lt;span class=&quot;code-quote&quot;&gt;&quot;&apos; | hbase shell&quot;&lt;/span&gt;
ssh $SSH_OPTS hbase@$TEST_HOST -x &lt;span class=&quot;code-quote&quot;&gt;&quot;hbase org.apache.hadoop.hbase.test.IntegrationTestBigLinkedList --monkey ${monkey} Loop 5 12 25000000 IntegrationTestBigLinkedList 12&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;TEST_HOST is the box that all IT tests are run from for this cluster.  It&apos;s not part of the hdfs, mr, or hbase cluster, but it does have all the software installed.&lt;/p&gt;

&lt;p&gt;monkey is parameterized.  The slowDeterministic fails.&lt;/p&gt;

&lt;p&gt;hbck is run if the above fails.&lt;/p&gt;</comment>
                            <comment id="13760750" author="enis" created="Fri, 6 Sep 2013 23:35:33 +0000"  >&lt;p&gt;Thanks, I am running the tests now with CM as well. Let&apos;s see whether I can repro. &lt;/p&gt;</comment>
                            <comment id="13760922" author="eclark" created="Sat, 7 Sep 2013 05:12:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sershe&quot; class=&quot;user-hover&quot; rel=&quot;sershe&quot;&gt;Sergey Shelukhin&lt;/a&gt;  Here&apos;s an illustration of what I&apos;m seeing:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hbase(main):002:0&amp;gt; get &apos;IntegrationTestBigLinkedList&apos;, &lt;span class=&quot;code-quote&quot;&gt;&quot;\x87\x0Bedk\xD4Y_OJ\xC6;\x92\xEFJ!&quot;&lt;/span&gt;
COLUMN                                              CELL                                                                                                                                                  
0 row(s) in 0.0920 seconds

hbase(main):003:0&amp;gt; get &apos;IntegrationTestBigLinkedList&apos;, &lt;span class=&quot;code-quote&quot;&gt;&quot;\xF9\xE6~\xE7Bkj\xF9\xC2 \xAE\xA2&amp;lt;\x16\x98\x7F&quot;&lt;/span&gt;
COLUMN                                              CELL                                                                                                                                                  
 meta:client                                        timestamp=1378524691149, value=Job: job_1378337631389_0046 Task: attempt_1378337631389_0046_m_000007_0                                                
 meta:count                                         timestamp=1378524691149, value=\x00\x00\x00\x00\x01|\xBA\xDB                                                                                          
 meta:prev                                          timestamp=1378524691149, value=\x87\x0Bedk\xD4Y_OJ\xC6;\x92\xEFJ!                                                                                     
3 row(s) in 0.1540 seconds

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The first row is the missing row (un-defined) the second one is the dangling pointer.&lt;/p&gt;

&lt;p&gt;I&apos;m searching through wal logs now for the missing rows.&lt;/p&gt;
</comment>
                            <comment id="13762125" author="eclark" created="Mon, 9 Sep 2013 18:25:20 +0000"  >&lt;p&gt;Here&apos;s the patch that I used to search for missed row keys.&lt;/p&gt;

&lt;p&gt;The row keys in the RowLogSearchJob are the ones that were referenced but not found.&lt;/p&gt;

&lt;p&gt;I found the keys in 5 different wal logs.  (so it doesn&apos;t seem like it&apos;s an issue with reading the wal log)&lt;/p&gt;

&lt;p&gt;This was then checked like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hbase@a1805:/home/eclark$ hbase org.apache.hadoop.hbase.regionserver.wal.HLogPrettyPrinter -w &lt;span class=&quot;code-quote&quot;&gt;&quot;\\x8E&amp;lt;\\xF3\\xE1f\\x1Al\\x89d\\xD3\\xC1w5\\x9B\\x8FN&quot;&lt;/span&gt; hdfs:&lt;span class=&quot;code-comment&quot;&gt;//a1805.halxg.cloudera.com:8020/hbase/oldWALs/a1809.halxg.cloudera.com%2C60020%2C1378540278223.1378540795093
&lt;/span&gt;Row: \x8E&amp;lt;\xF3\xE1f\x1Al\x89d\xD3\xC1w5\x9B\x8FN
SLF4J: &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; path contains multiple SLF4J bindings.
SLF4J: Found binding in [jar:file:/opt/hbase/jenkins-hbase-custom-branch-34/lib/slf4j-log4j12-1.6.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/opt/hadoop/hadoop-2.1.0-beta/share/hadoop/common/lib/slf4j-log4j12-1.6.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: See http:&lt;span class=&quot;code-comment&quot;&gt;//www.slf4j.org/codes.html#multiple_bindings &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; an explanation.
&lt;/span&gt;2013-09-09 11:19:43,435 WARN  [main] conf.Configuration: fs.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;.name is deprecated. Instead, use fs.defaultFS
Sequence 2846225 from region 8b3a9c2a567f1eca40d25859e9e56fa2 in table IntegrationTestBigLinkedList at write timestamp: Sat Sep 07 00:59:58 PDT 2013
  Action:
    row: \x8E&amp;lt;\xF3\xE1f\x1Al\x89d\xD3\xC1w5\x9B\x8FN
    column: meta:prev
    timestamp: Sat Sep 07 00:59:58 PDT 2013
  Action:
    row: \x8E&amp;lt;\xF3\xE1f\x1Al\x89d\xD3\xC1w5\x9B\x8FN
    column: meta:count
    timestamp: Sat Sep 07 00:59:58 PDT 2013
  Action:
    row: \x8E&amp;lt;\xF3\xE1f\x1Al\x89d\xD3\xC1w5\x9B\x8FN
    column: meta:client
    timestamp: Sat Sep 07 00:59:58 PDT 2013
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="13762412" author="jeffreyz" created="Mon, 9 Sep 2013 22:42:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt; In the SlowDeterministic mode, we have several places doing region move such as MoveRandomRegionOfTableAction and MoveRegionsOfTableAction. In the region assignment code, if we try to move a region from a dead server(or a region is being closed and HMaster retry the unassign), the region will be offlined and we&apos;ll lose the region(because it won&apos;t be re-assigned to any region server anymore). I think it&apos;s better to disable region move(and balancer as well) in the tests to isolate if the data loss is caused by region movement combining with other factors. &lt;/p&gt;</comment>
                            <comment id="13763055" author="jxiang" created="Tue, 10 Sep 2013 14:12:39 +0000"  >&lt;p&gt;I think I know the root cause now: assign region out of SSH. A region server is dead, before SSH handles it and completes the log splitting, a CM assigns a dead region. That&apos;s why it doesn&apos;t happen all the time.  Fortunately, that&apos;s not a scenario normally happens to a real cluster.&lt;/p&gt;

&lt;p&gt;Let me check if we can prevent from assigning a dead region out of SSH from the master.&lt;/p&gt;</comment>
                            <comment id="13763113" author="devaraj" created="Tue, 10 Sep 2013 15:21:19 +0000"  >&lt;p&gt;With the patches from &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9481&quot; title=&quot;Servershutdown handler get aborted with ConcurrentModificationException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9481&quot;&gt;&lt;del&gt;HBASE-9481&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9480&quot; title=&quot;Regions are unexpectedly made offline in certain failure conditions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9480&quot;&gt;&lt;del&gt;HBASE-9480&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9456&quot; title=&quot;Meta doesn&amp;#39;t get assigned in a master failure scenario&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9456&quot;&gt;&lt;del&gt;HBASE-9456&lt;/del&gt;&lt;/a&gt;, and the patch on this jira, I was finally able to get a successful run. I used the following command:&lt;br/&gt;
hbase org.apache.hadoop.hbase.test.IntegrationTestBigLinkedList -Dhbase.client.retries.number=3000 -monkey verySlow Loop 1 12 25000000 IntegrationTestBigLinkedList 12 &amp;amp;&lt;/p&gt;

&lt;p&gt;Note that I increased the retries from a default value of 30 to 3000. This is to make sure that the MR jobs ride over the CM chaos.&lt;/p&gt;

&lt;p&gt;Now I am running the same test with the slowDeterministic CM.&lt;/p&gt;

&lt;p&gt;Yeah, maybe the data loss was caused by the region losses which is at least partially addressed by the &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9481&quot; title=&quot;Servershutdown handler get aborted with ConcurrentModificationException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9481&quot;&gt;&lt;del&gt;HBASE-9481&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9480&quot; title=&quot;Regions are unexpectedly made offline in certain failure conditions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9480&quot;&gt;&lt;del&gt;HBASE-9480&lt;/del&gt;&lt;/a&gt; patches.&lt;/p&gt;</comment>
                            <comment id="13763244" author="devaraj" created="Tue, 10 Sep 2013 17:13:44 +0000"  >&lt;p&gt;Thinking about it a bit more, the lost(offlined) regions should be got back when the master is restarted. So whenever the CM restarts the master we should get those lost regions back since they would have entries in the meta. The data loss is not permanent in that sense but there are windows of time when the data is not accessible. This may or may not lead to the dataloss issue that &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt; is seeing. My test with the slowDeterministic is still running. Let&apos;s see how that goes.&lt;/p&gt;</comment>
                            <comment id="13764612" author="eclark" created="Wed, 11 Sep 2013 18:44:13 +0000"  >&lt;p&gt;So it looks like what &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jxiang&quot; class=&quot;user-hover&quot; rel=&quot;jxiang&quot;&gt;Jimmy Xiang&lt;/a&gt; suggested is it.&lt;/p&gt;

&lt;p&gt;I just ran slowNoMove 10 iterations (5 followed by another 5 without clearing the table) in a row with zero data loss.  This really seems to suggest that it&apos;s related to sending a move to a region that&apos;s currently being split.&lt;/p&gt;

&lt;p&gt;If that is indeed the case then I feel much better.&lt;/p&gt;</comment>
                            <comment id="13764621" author="stack" created="Wed, 11 Sep 2013 18:54:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt; so we need to fix the test?  Or add protection so no assign can work during WAL split?&lt;/p&gt;</comment>
                            <comment id="13764645" author="eclark" created="Wed, 11 Sep 2013 19:12:47 +0000"  >&lt;p&gt;Ideally both.  I think the test fix can go in before a new rc.  And then we can work on adding protection for assign later.&lt;/p&gt;</comment>
                            <comment id="13764695" author="devaraj" created="Wed, 11 Sep 2013 20:03:04 +0000"  >&lt;p&gt;After inspecting the logs that led to the creation of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9480&quot; title=&quot;Regions are unexpectedly made offline in certain failure conditions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9480&quot;&gt;&lt;del&gt;HBASE-9480&lt;/del&gt;&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9481&quot; title=&quot;Servershutdown handler get aborted with ConcurrentModificationException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9481&quot;&gt;&lt;del&gt;HBASE-9481&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jeffreyz&quot; class=&quot;user-hover&quot; rel=&quot;jeffreyz&quot;&gt;Jeffrey Zhong&lt;/a&gt; was convinced (here &lt;a href=&quot;http://bit.ly/1e3hsfD&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bit.ly/1e3hsfD&lt;/a&gt;, and in offline discussions with me) that the region move was the killer for this test. Was he right! (Caveat the issue Enis brought up today on the mail thread on the RC)&lt;/p&gt;</comment>
                            <comment id="13764715" author="eclark" created="Wed, 11 Sep 2013 20:20:15 +0000"  >&lt;p&gt;Something like this is what I was thinking for the test change to make sure we still have move coverage but it&apos;s not happening while log splitting is going on.&lt;/p&gt;

&lt;p&gt;I&apos;m running another big linked list run right now to make sure that it works.&lt;/p&gt;</comment>
                            <comment id="13765614" author="hadoopqa" created="Thu, 12 Sep 2013 16:57:53 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12602803/HBASE-9338-1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12602803/HBASE-9338-1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7192//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7192//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7192//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7192//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7192//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7192//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7192//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7192//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7192//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7192//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7192//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7192//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7192//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7192//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7192//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7192//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7192//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7192//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7192//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7192//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13765825" author="eclark" created="Thu, 12 Sep 2013 19:50:32 +0000"  >&lt;p&gt;The last IT test run passed with the version 1 patch.&lt;/p&gt;</comment>
                            <comment id="13765836" author="eclark" created="Thu, 12 Sep 2013 19:57:06 +0000"  >&lt;p&gt;So the patch changes slow deterministic monkey.  It changes the lists of actions so that MoveRandomRegionOfTableAction and MoveRegionsOfTableAction can&apos;t run in parallel with Region servers being killed.  &lt;/p&gt;

&lt;p&gt;Then it adds extra sleep in those actions so that there&apos;s even more buffer.&lt;/p&gt;</comment>
                            <comment id="13765845" author="stack" created="Thu, 12 Sep 2013 20:03:18 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;Meantime Jimmy is figuring prevention of assign while a regions&apos;s logs are being replayed.&lt;/p&gt;

&lt;p&gt;Thanks E.&lt;/p&gt;</comment>
                            <comment id="13765860" author="eclark" created="Thu, 12 Sep 2013 20:21:03 +0000"  >&lt;p&gt;Thanks for all of the help everyone.  I just committed the test fix. Jimmy&apos;s working on the AM fix in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9514&quot; title=&quot;Prevent region from assigning before log splitting is done&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9514&quot;&gt;&lt;del&gt;HBASE-9514&lt;/del&gt;&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="13765997" author="hudson" created="Thu, 12 Sep 2013 23:18:20 +0000"  >&lt;p&gt;SUCCESS: Integrated in hbase-0.96 #40 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.96/40/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.96/40/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9338&quot; title=&quot;Test Big Linked List fails on Hadoop 2.1.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9338&quot;&gt;&lt;del&gt;HBASE-9338&lt;/del&gt;&lt;/a&gt; Test Big Linked List fails on Hadoop 2.1.0 (eclark: rev 1522712)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-it/src/test/java/org/apache/hadoop/hbase/chaos/actions/MoveRandomRegionOfTableAction.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-it/src/test/java/org/apache/hadoop/hbase/chaos/actions/MoveRegionsOfTableAction.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-it/src/test/java/org/apache/hadoop/hbase/chaos/factories/SlowDeterministicMonkeyFactory.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13766027" author="hudson" created="Thu, 12 Sep 2013 23:40:49 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #4499 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4499/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4499/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9338&quot; title=&quot;Test Big Linked List fails on Hadoop 2.1.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9338&quot;&gt;&lt;del&gt;HBASE-9338&lt;/del&gt;&lt;/a&gt; Test Big Linked List fails on Hadoop 2.1.0 (eclark: rev 1522713)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-it/src/test/java/org/apache/hadoop/hbase/chaos/actions/MoveRandomRegionOfTableAction.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-it/src/test/java/org/apache/hadoop/hbase/chaos/actions/MoveRegionsOfTableAction.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-it/src/test/java/org/apache/hadoop/hbase/chaos/factories/SlowDeterministicMonkeyFactory.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13766100" author="hudson" created="Fri, 13 Sep 2013 00:57:34 +0000"  >&lt;p&gt;SUCCESS: Integrated in hbase-0.96-hadoop2 #21 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.96-hadoop2/21/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.96-hadoop2/21/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9338&quot; title=&quot;Test Big Linked List fails on Hadoop 2.1.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9338&quot;&gt;&lt;del&gt;HBASE-9338&lt;/del&gt;&lt;/a&gt; Test Big Linked List fails on Hadoop 2.1.0 (eclark: rev 1522712)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-it/src/test/java/org/apache/hadoop/hbase/chaos/actions/MoveRandomRegionOfTableAction.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-it/src/test/java/org/apache/hadoop/hbase/chaos/actions/MoveRegionsOfTableAction.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-it/src/test/java/org/apache/hadoop/hbase/chaos/factories/SlowDeterministicMonkeyFactory.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13766140" author="devaraj" created="Fri, 13 Sep 2013 01:25:24 +0000"  >&lt;p&gt;Another one - &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9525&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-9525&lt;/a&gt;. I think &quot;move&quot; of a region should be done with extreme care. I hope we don&apos;t run into these move related issues when the balancer runs (finally leading to region moves).&lt;/p&gt;</comment>
                            <comment id="13766156" author="hudson" created="Fri, 13 Sep 2013 01:45:41 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #724 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/724/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/724/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9338&quot; title=&quot;Test Big Linked List fails on Hadoop 2.1.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9338&quot;&gt;&lt;del&gt;HBASE-9338&lt;/del&gt;&lt;/a&gt; Test Big Linked List fails on Hadoop 2.1.0 (eclark: rev 1522713)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-it/src/test/java/org/apache/hadoop/hbase/chaos/actions/MoveRandomRegionOfTableAction.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-it/src/test/java/org/apache/hadoop/hbase/chaos/actions/MoveRegionsOfTableAction.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-it/src/test/java/org/apache/hadoop/hbase/chaos/factories/SlowDeterministicMonkeyFactory.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13766734" author="enis" created="Fri, 13 Sep 2013 18:00:41 +0000"  >&lt;p&gt;Unfortunately, I ran into the test failure even without doing the region moves. My inspections yesterday on an earlier run did not reveal a root cause. I&apos;ll continue looking for today. &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        org.apache.hadoop.hbase.test.IntegrationTestBigLinkedList$Verify$Counts
                REFERENCED=799996706
                UNDEFINED=1647
                UNREFERENCED=1647
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13766746" author="enis" created="Fri, 13 Sep 2013 18:14:32 +0000"  >&lt;p&gt;Reopening this. We still have a problem. &lt;/p&gt;</comment>
                            <comment id="13767217" author="enis" created="Sat, 14 Sep 2013 00:12:46 +0000"  >&lt;p&gt;We have confirmed that the data loss is due to the log splitting + moving region problem: &lt;br/&gt;
CM kills an RS (hor8n10) and then moves a region (d353d3dc87562957ef5c74559ccb48ca)&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
13/09/13 03:39:54 INFO actions.Action: Performing action: Restart random region server
13/09/13 03:39:54 INFO actions.Action: Killing region server:hor8n10,60020,1379043329928
13/09/13 03:39:56 INFO actions.Action: Killed region server:hor8n10,60020,1379043329928. Reported num of rs:8
13/09/13 03:39:56 INFO actions.Action: Sleeping &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;:60000
13/09/13 03:40:05 INFO actions.Action: Performing action: Move random region of table IntegrationTestBigLinkedList
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The master schedules log splitting and carries it on:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2013-09-13 03:39:57,718 INFO  [MASTER_SERVER_OPERATIONS-hor8n02:60000-1] master.SplitLogManager: started splitting 6 logs in [hdfs:&lt;span class=&quot;code-comment&quot;&gt;//hor8n01:8020/apps/hbase/data/WALs/hor8n10,60020,1379043329928-splitting]&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In the mean time, CM action for move region kicks in and causes to unassign the region, and assign it to hor8n01&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2013-09-13 03:40:06,030 DEBUG [RpcServer.handler=44,port=60000] master.HMaster: Client=hrt_qa&lt;span class=&quot;code-comment&quot;&gt;//68.142.245.212 unassign IntegrationTestBigLinkedList,&amp;amp;\x07\x86\xC5;\xE6\xD9\x18&amp;amp;\xCB\x0B\x89\xF9\xD3\xE6\xC4,1379043123821.d353d3dc87562957ef5c74559ccb48ca. in current location &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; it is online and reassign.force=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
&lt;/span&gt;2013-09-13 03:40:06,030 DEBUG [RpcServer.handler=44,port=60000] master.AssignmentManager: Starting unassign of IntegrationTestBigLinkedList,&amp;amp;\x07\x86\xC5;\xE6\xD9\x18&amp;amp;\xCB\x0B\x89\xF9\xD3\xE6\xC4,1379043123821.d353d3dc87562957ef5c74559ccb48ca. (offlining)
2013-09-13 03:40:06,030 DEBUG [RpcServer.handler=44,port=60000] zookeeper.ZKAssign: master:60000-0x140e5bf86760799 Creating unassigned node d353d3dc87562957ef5c74559ccb48ca in a CLOSING state
2013-09-13 03:40:06,044 INFO  [RpcServer.handler=44,port=60000] master.RegionStates: Transitioned from {d353d3dc87562957ef5c74559ccb48ca state=OPEN, ts=1379043386591, server=hor8n10,60020,1379043329928} to {d353d3dc87562957ef5c74559ccb48ca state=PENDING_CLOSE, ts=1379043606044, server=hor8n10,60020,1379043329928}
2013-09-13 03:40:06,044 DEBUG [RpcServer.handler=44,port=60000] zookeeper.ZKAssign: master:60000-0x140e5bf86760799 Deleting existing unassigned node d353d3dc87562957ef5c74559ccb48ca in expected state M_ZK_REGION_CLOSING
2013-09-13 03:40:06,063 DEBUG [RpcServer.handler=44,port=60000] zookeeper.ZKAssign: master:60000-0x140e5bf86760799 Deleted unassigned node d353d3dc87562957ef5c74559ccb48ca in expected state M_ZK_REGION_CLOSING
2013-09-13 03:40:06,064 DEBUG [RpcServer.handler=44,port=60000] master.RegionStates: Offline d353d3dc87562957ef5c74559ccb48ca with current state=PENDING_CLOSE, expected state=OFFLINE/SPLITTING/MERGING
2013-09-13 03:40:06,064 INFO  [RpcServer.handler=44,port=60000] master.RegionStates: Transitioned from {d353d3dc87562957ef5c74559ccb48ca state=PENDING_CLOSE, ts=1379043606044, server=hor8n10,60020,1379043329928} to {d353d3dc87562957ef5c74559ccb48ca state=OFFLINE, ts=1379043606064, server=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;}
2013-09-13 03:40:06,064 INFO  [RpcServer.handler=44,port=60000] master.RegionStates: Offlined d353d3dc87562957ef5c74559ccb48ca from hor8n10,60020,1379043329928
2013-09-13 03:40:06,064 DEBUG [RpcServer.handler=44,port=60000] master.HMaster: Region IntegrationTestBigLinkedList,&amp;amp;\x07\x86\xC5;\xE6\xD9\x18&amp;amp;\xCB\x0B\x89\xF9\xD3\xE6\xC4,1379043123821.d353d3dc87562957ef5c74559ccb48ca. is not online on any region server, reassigning it.
2013-09-13 03:40:06,064 DEBUG [RpcServer.handler=44,port=60000] master.AssignmentManager: No previous transition plan was found (or we are ignoring an existing plan) &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; IntegrationTestBigLinkedList,&amp;amp;\x07\x86\xC5;\xE6\xD9\x18&amp;amp;\xCB\x0B\x89\xF9\xD3\xE6\xC4,1379043123821.d353d3dc87562957ef5c74559ccb48ca. so generated a random one; hri=IntegrationTestBigLinkedList,&amp;amp;\x07\x86\xC5;\xE6\xD9\x18&amp;amp;\xCB\x0B\x89\xF9\xD3\xE6\xC4,1379043123821.d353d3dc87562957ef5c74559ccb48ca., src=, dest=hor8n01,60020,1379043340943; 7 (online=7, available=7) available servers, forceNewPlan=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
2013-09-13 03:40:06,064 DEBUG [RpcServer.handler=44,port=60000] zookeeper.ZKAssign: master:60000-0x140e5bf86760799 Creating (or updating) unassigned node d353d3dc87562957ef5c74559ccb48ca with OFFLINE state
2013-09-13 03:40:06,089 INFO  [RpcServer.handler=44,port=60000] master.AssignmentManager: Assigning IntegrationTestBigLinkedList,&amp;amp;\x07\x86\xC5;\xE6\xD9\x18&amp;amp;\xCB\x0B\x89\xF9\xD3\xE6\xC4,1379043123821.d353d3dc87562957ef5c74559ccb48ca. to hor8n01,60020,1379043340943
2013-09-13 03:40:06,089 INFO  [RpcServer.handler=44,port=60000] master.RegionStates: Transitioned from {d353d3dc87562957ef5c74559ccb48ca state=OFFLINE, ts=1379043606064, server=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;} to {d353d3dc87562957ef5c74559ccb48ca state=PENDING_OPEN, ts=1379043606089, server=hor8n01,60020,1379043340943}
2013-09-13 03:40:06,121 DEBUG [AM.ZK.Worker-pool2-t71] master.AssignmentManager: Handling transition=RS_ZK_REGION_OPENING, server=hor8n01,60020,1379043340943, region=d353d3dc87562957ef5c74559ccb48ca, current state from region state map ={d353d3dc87562957ef5c74559ccb48ca state=PENDING_OPEN, ts=1379043606089, server=hor8n01,60020,1379043340943}
2013-09-13 03:40:06,121 INFO  [AM.ZK.Worker-pool2-t71] master.RegionStates: Transitioned from {d353d3dc87562957ef5c74559ccb48ca state=PENDING_OPEN, ts=1379043606089, server=hor8n01,60020,1379043340943} to {d353d3dc87562957ef5c74559ccb48ca state=OPENING, ts=1379043606121, server=hor8n01,60020,1379043340943}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, you can see that that at this time, the log splitting is not finished yet: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2013-09-13 03:40:08,022 INFO  [hor8n02,60000,1379042853257.splitLogManagerTimeoutMonitor] master.SplitLogManager: total tasks = 2 unassigned = 0 tasks={/hbase/splitWAL/WALs%2Fhor8n10%2C60020%2C1379043329928-splitting%2Fhor8n10%252C60020%252C1379043329928.1379043472554=last_update = 1379043597820 last_version = 2 cur_worker_name = hor8n08,60020,1379043383930 status = in_progress incarnation = 0 resubmits = 0 batch = installed = 6 done = 4 error = 0, /hbase/splitWAL/WALs%2Fhor8n10%2C60020%2C1379043329928-splitting%2Fhor8n10%252C60020%252C1379043329928.1379043582933=last_update = 1379043597824 last_version = 2 cur_worker_name = hor8n02,60020,1379043313923 status = in_progress incarnation = 0 resubmits = 0 batch = installed = 6 done = 4 error = 0}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And indeed, you can see the log splits finishing up after the region is opened:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
./hbase-hbase-regionserver-hor8n01:2013-09-13 03:40:06,786 DEBUG [RS_OPEN_REGION-hor8n01:60020-1] regionserver.HRegion: Applied 47550, skipped 0, firstSequenceidInLog=30260132, maxSequenceidInLog=30335308, path=hdfs:&lt;span class=&quot;code-comment&quot;&gt;//hor8n01:8020/apps/hbase/data/data/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/IntegrationTestBigLinkedList/d353d3dc87562957ef5c74559ccb48ca/recovered.edits/0000000000030335308
&lt;/span&gt;./hbase-hbase-regionserver-hor8n08:2013-09-13 03:40:07,899 DEBUG [split-log-closeStream-1] wal.HLogSplitter: Closing hdfs:&lt;span class=&quot;code-comment&quot;&gt;//hor8n01:8020/apps/hbase/data/data/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/IntegrationTestBigLinkedList/d353d3dc87562957ef5c74559ccb48ca/recovered.edits/0000000000030002080.temp
&lt;/span&gt;./hbase-hbase-regionserver-hor8n08:2013-09-13 03:40:07,971 INFO  [split-log-closeStream-1] wal.HLogSplitter: Closed wap hdfs:&lt;span class=&quot;code-comment&quot;&gt;//hor8n01:8020/apps/hbase/data/data/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/IntegrationTestBigLinkedList/d353d3dc87562957ef5c74559ccb48ca/recovered.edits/0000000000030002080.temp (wrote 2788 edits in 136ms)
&lt;/span&gt;./hbase-hbase-regionserver-hor8n08:2013-09-13 03:40:08,189 DEBUG [split-log-closeStream-1] wal.HLogSplitter: Rename hdfs:&lt;span class=&quot;code-comment&quot;&gt;//hor8n01:8020/apps/hbase/data/data/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/IntegrationTestBigLinkedList/d353d3dc87562957ef5c74559ccb48ca/recovered.edits/0000000000030002080.temp to hdfs://hor8n01:8020/apps/hbase/data/data/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/IntegrationTestBigLinkedList/d353d3dc87562957ef5c74559ccb48ca/recovered.edits/0000000000030104001
&lt;/span&gt;./hbase-hbase-regionserver-hor8n01:2013-09-13 03:40:08,571 DEBUG [RS_OPEN_REGION-hor8n01:60020-1] regionserver.HRegion: Deleted recovered.edits file=hdfs:&lt;span class=&quot;code-comment&quot;&gt;//hor8n01:8020/apps/hbase/data/data/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/IntegrationTestBigLinkedList/d353d3dc87562957ef5c74559ccb48ca/recovered.edits/0000000000029347901
&lt;/span&gt;./hbase-hbase-regionserver-hor8n01:2013-09-13 03:40:08,732 DEBUG [RS_OPEN_REGION-hor8n01:60020-1] regionserver.HRegion: Deleted recovered.edits file=hdfs:&lt;span class=&quot;code-comment&quot;&gt;//hor8n01:8020/apps/hbase/data/data/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/IntegrationTestBigLinkedList/d353d3dc87562957ef5c74559ccb48ca/recovered.edits/0000000000029358999
&lt;/span&gt;./hbase-hbase-regionserver-hor8n01:2013-09-13 03:40:08,965 DEBUG [RS_OPEN_REGION-hor8n01:60020-1] regionserver.HRegion: Deleted recovered.edits file=hdfs:&lt;span class=&quot;code-comment&quot;&gt;//hor8n01:8020/apps/hbase/data/data/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/IntegrationTestBigLinkedList/d353d3dc87562957ef5c74559ccb48ca/recovered.edits/0000000000030001566
&lt;/span&gt;./hbase-hbase-regionserver-hor8n01:2013-09-13 03:40:09,140 DEBUG [RS_OPEN_REGION-hor8n01:60020-1] regionserver.HRegion: Deleted recovered.edits file=hdfs:&lt;span class=&quot;code-comment&quot;&gt;//hor8n01:8020/apps/hbase/data/data/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/IntegrationTestBigLinkedList/d353d3dc87562957ef5c74559ccb48ca/recovered.edits/0000000000030197753
&lt;/span&gt;./hbase-hbase-regionserver-hor8n01:2013-09-13 03:40:09,348 DEBUG [RS_OPEN_REGION-hor8n01:60020-1] regionserver.HRegion: Deleted recovered.edits file=hdfs:&lt;span class=&quot;code-comment&quot;&gt;//hor8n01:8020/apps/hbase/data/data/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/IntegrationTestBigLinkedList/d353d3dc87562957ef5c74559ccb48ca/recovered.edits/0000000000030260110
&lt;/span&gt;./hbase-hbase-regionserver-hor8n01:2013-09-13 03:40:09,514 DEBUG [RS_OPEN_REGION-hor8n01:60020-1] regionserver.HRegion: Deleted recovered.edits file=hdfs:&lt;span class=&quot;code-comment&quot;&gt;//hor8n01:8020/apps/hbase/data/data/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/IntegrationTestBigLinkedList/d353d3dc87562957ef5c74559ccb48ca/recovered.edits/0000000000030335308
&lt;/span&gt;./hbase-hbase-regionserver-hor8n02:2013-09-13 03:40:09,962 DEBUG [split-log-closeStream-2] wal.HLogSplitter: Closing hdfs:&lt;span class=&quot;code-comment&quot;&gt;//hor8n01:8020/apps/hbase/data/data/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/IntegrationTestBigLinkedList/d353d3dc87562957ef5c74559ccb48ca/recovered.edits/0000000000030335361.temp
&lt;/span&gt;./hbase-hbase-regionserver-hor8n02:2013-09-13 03:40:09,992 INFO  [split-log-closeStream-2] wal.HLogSplitter: Closed wap hdfs:&lt;span class=&quot;code-comment&quot;&gt;//hor8n01:8020/apps/hbase/data/data/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/IntegrationTestBigLinkedList/d353d3dc87562957ef5c74559ccb48ca/recovered.edits/0000000000030335361.temp (wrote 808 edits in 195ms)
&lt;/span&gt;./hbase-hbase-regionserver-hor8n02:2013-09-13 03:40:10,057 DEBUG [split-log-closeStream-2] wal.HLogSplitter: Rename hdfs:&lt;span class=&quot;code-comment&quot;&gt;//hor8n01:8020/apps/hbase/data/data/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/IntegrationTestBigLinkedList/d353d3dc87562957ef5c74559ccb48ca/recovered.edits/0000000000030335361.temp to hdfs://hor8n01:8020/apps/hbase/data/data/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/IntegrationTestBigLinkedList/d353d3dc87562957ef5c74559ccb48ca/recovered.edits/0000000000030364775&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Notice that the region is already opened (because it is deleting the recovered edits files, but 2 log splitting tasks finish after this)&lt;/p&gt;</comment>
                            <comment id="13767600" author="eclark" created="Sat, 14 Sep 2013 22:20:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; did that run have this patch in it?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
13/09/13 03:39:54 INFO actions.Action: Killing region server:hor8n10,60020,1379043329928
13/09/13 03:39:56 INFO actions.Action: Killed region server:hor8n10,60020,1379043329928. Reported num of rs:8
13/09/13 03:39:56 INFO actions.Action: Sleeping &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;:60000
13/09/13 03:40:05 INFO actions.Action: Performing action: Move random region of table IntegrationTestBigLinkedList
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So there&apos;s only 11 seconds in between the kill and the move; even though the chaos monkey thread should be sleeping for 60 seconds.  After this issue the move should always sleep 20 seconds before moving a region.  And it shouldn&apos;t happen in parallel with a kill.&lt;/p&gt;</comment>
                            <comment id="13768582" author="enis" created="Mon, 16 Sep 2013 18:30:46 +0000"  >&lt;p&gt;Hmm, the old jars were in the classpath it seems. But regardless, the merge and balancer is still doing the region moves. This patch only reduces the probably of running into &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9514&quot; title=&quot;Prevent region from assigning before log splitting is done&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9514&quot;&gt;&lt;del&gt;HBASE-9514&lt;/del&gt;&lt;/a&gt;, I am afraid. Plus, once &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9514&quot; title=&quot;Prevent region from assigning before log splitting is done&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9514&quot;&gt;&lt;del&gt;HBASE-9514&lt;/del&gt;&lt;/a&gt; is in, I propose we revert this patch to test properly.  &lt;/p&gt;</comment>
                            <comment id="13768596" author="jxiang" created="Mon, 16 Sep 2013 18:39:21 +0000"  >&lt;p&gt;I will revert some changes of this patch as a test to make sure the patch to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9514&quot; title=&quot;Prevent region from assigning before log splitting is done&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9514&quot;&gt;&lt;del&gt;HBASE-9514&lt;/del&gt;&lt;/a&gt; is good.&lt;/p&gt;</comment>
                            <comment id="13768604" author="eclark" created="Mon, 16 Sep 2013 18:44:37 +0000"  >&lt;blockquote&gt;&lt;p&gt;This patch only reduces the probably of running into &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9514&quot; title=&quot;Prevent region from assigning before log splitting is done&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9514&quot;&gt;&lt;del&gt;HBASE-9514&lt;/del&gt;&lt;/a&gt;, I am afraid. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yep, really this patch was just to get us farther into testing 0.96 rc&apos;s.&lt;/p&gt;</comment>
                            <comment id="13769217" author="stack" created="Tue, 17 Sep 2013 05:32:40 +0000"  >&lt;p&gt;Reresolving.  The committed patch makes this test pass again by avoiding the issue.  Some fixes have gone into fix the issue and Jimmy is on it over in hbase-9514.  So reresolving this one.  hbase-9514 reenables the test to its old state.  Can make that a blocker if we find stuff still broke.&lt;/p&gt;</comment>
                            <comment id="13769794" author="devaraj" created="Tue, 17 Sep 2013 18:41:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt; says the following in a comment on this jira.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;So I ran a job where inside of the generation job I run a get right after the puts. This was SLOW. Like really really really slow. 10x slower. What has happened to our get speed ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Wondering if this was investigated further.&lt;/p&gt;</comment>
                            <comment id="15016491" author="lars_francke" created="Fri, 20 Nov 2015 11:55:28 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12668174">HBASE-9514</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12673722">HBASE-9757</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12602655" name="HBASE-9338-0.patch" size="4268" author="eclark" created="Wed, 11 Sep 2013 20:20:15 +0000"/>
                            <attachment id="12602803" name="HBASE-9338-1.patch" size="4034" author="eclark" created="Thu, 12 Sep 2013 15:13:49 +0000"/>
                            <attachment id="12602179" name="HBASE-9338-TESTING-2.patch" size="40420" author="eclark" created="Mon, 9 Sep 2013 18:25:20 +0000"/>
                            <attachment id="12602628" name="HBASE-9338-TESTING-3.patch" size="41788" author="eclark" created="Wed, 11 Sep 2013 18:44:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 26 Aug 2013 18:30:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>345500</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1nkvr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>345801</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>