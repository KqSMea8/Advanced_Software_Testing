<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 21:13:40 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-16394/HBASE-16394.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-16394] What cause &quot;Compaction is trying to add a bad range&quot;,and Should stop the regionserver?</title>
                <link>https://issues.apache.org/jira/browse/HBASE-16394</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;My cluster dead one regionserver  because of &quot;Compaction is trying to add a bad range&quot;&lt;br/&gt;
Here the log:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-08-09T18:30:19.094+08:00&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; regionserver.ReplicationSource : Log hdfs://athene/hbase/oldWALs/MJQ-HBASE-ATHENE-11139%2C16020%2C1470729882622.default.1470736608897 was moved to hdfs://athene/hbase/oldWA     Ls/MJQ-HBASE-ATHENE%2C16020%2C1470729882622.default.1470736608897&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-08-09T18:30:30.225+08:00&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; regionserver.MemStoreFlusher : Waited 90070ms on a compaction to clean up &apos;TOO MANY STORE FILES&apos;; waited long enough... proceeding with flush of tjs4:popt_info,160608008474430,147073716071     1.7900baab5204e4f36fa49379c30cd584.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-08-09T18:30:30.226+08:00&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; regionserver.HRegion : Started memstore flush for tjs4:popt_info,160608008474430,1470737160711.7900baab5204e4f36fa49379c30cd584., current region memstore size 769.41 MB, and 1/1 column fam     ilies&apos; memstores are being flushed.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-08-09T18:30:30.549+08:00&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; regionserver.StripeStoreFileManager : 3 conflicting files (likely created by a flush)  of size 156153021 are moved to L0 due to concurrent stripe change&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-08-09T18:30:31.199+08:00&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; regionserver.HStore : Completed compaction of 203 file(s) in c of tjs4:popt_info,160608008474430,1470737160711.7900baab5204e4f36fa49379c30cd584. into 20347d203d09442cac30c42b424adda6(size=     3.0 G), ded362eab9cf4a819675cd35992d4974(size=3.0 G), 281b1039ed2643679e5b0a3820f5059d(size=2.4 G), total size for store is 8.6 G. This selection was in queue for 0sec, and took 10mins, 16sec to execute.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-08-09T18:30:31.200+08:00&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; regionserver.CompactSplitThread : Completed compaction: Request = regionName=tjs4:popt_info,160608008474430,1470737160711.7900baab5204e4f36fa49379c30cd584., storeName=c, fileCount=203, fil     eSize=7.2 G, priority=-3, time=5388162916126535; duration=10mins, 16sec&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-08-09T18:30:31.201+08:00&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; regionserver.HRegion : Starting compaction on ci in region ad_union:union_click,3487f383ad484bcbb5cef727b69cec2a,1466484980245.c5772fc60c54f64cc977ba9cc01d74ad.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-08-09T18:30:31.201+08:00&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; regionserver.HStore : Starting compaction of 14 file(s) in ci of ad_union:union_click,3487f383ad484bcbb5cef727b69cec2a,1466484980245.c5772fc60c54f64cc977ba9cc01d74ad. into tmpdir=hdfs://at     hene/hbase/data/ad_union/union_click/c5772fc60c54f64cc977ba9cc01d74ad/.tmp, totalSize=75.0 M&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-08-09T18:30:31.206+08:00&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; hfile.CacheConfig : blockCache=org.apache.hadoop.hbase.io.hfile.CombinedBlockCache@52659482, cacheDataOnRead=true, cacheDataOnWrite=false, cacheIndexesOnWrite=false, cacheBloomsOnWrite=fal     se, cacheEvictOnClose=false, cacheDataCompressed=false, prefetchOnOpen=false&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-08-09T18:30:32.893+08:00&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; regionserver.ReplicationSource : Log hdfs://athene/hbase/oldWALs/MJQ-HBASE-ATHENE-11139l%2C16020%2C1470729882622.default.1470736612825 was moved to hdfs://athene/hbase/oldWA     Ls/MJQ-HBASE-ATHENE-11139.%2C16020%2C1470729882622.default.1470736612825&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-08-09T18:30:34.373+08:00&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; regionserver.HStore : Added hdfs://athene/hbase/data/tjs4/popt_info/7900baab5204e4f36fa49379c30cd584/c/775e8956cd2a48aaae70b9eded4457e9, entries=4336457, sequenceid=582528, filesize=48.7 M&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-08-09T18:30:34.373+08:00&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;FATAL&amp;#93;&lt;/span&gt; regionserver.HRegionServer : ABORTING region server MJQ-HBASE-ATHENE-11139.,16020,1470729882622: Replay of WAL required. Forcing server shutdown&lt;br/&gt;
org.apache.hadoop.hbase.DroppedSnapshotException: region: tjs4:popt_info,160608008474430,1470737160711.7900baab5204e4f36fa49379c30cd584.&lt;br/&gt;
at org.apache.hadoop.hbase.regionserver.HRegion.internalFlushCacheAndCommit(HRegion.java:2354)&lt;br/&gt;
at org.apache.hadoop.hbase.regionserver.HRegion.internalFlushcache(HRegion.java:2057)&lt;br/&gt;
at org.apache.hadoop.hbase.regionserver.HRegion.internalFlushcache(HRegion.java:2019)&lt;br/&gt;
at org.apache.hadoop.hbase.regionserver.HRegion.flushcache(HRegion.java:1911)&lt;br/&gt;
at org.apache.hadoop.hbase.regionserver.HRegion.flush(HRegion.java:1837)&lt;br/&gt;
at org.apache.hadoop.hbase.regionserver.MemStoreFlusher.flushRegion(MemStoreFlusher.java:510)&lt;br/&gt;
at org.apache.hadoop.hbase.regionserver.MemStoreFlusher.flushRegion(MemStoreFlusher.java:471)&lt;br/&gt;
at org.apache.hadoop.hbase.regionserver.MemStoreFlusher.access$800(MemStoreFlusher.java:75)&lt;br/&gt;
at org.apache.hadoop.hbase.regionserver.MemStoreFlusher$FlushHandler.run(MemStoreFlusher.java:259)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:745)&lt;br/&gt;
  Caused by: java.io.IOException: Compaction is trying to add a bad range.&lt;br/&gt;
at org.apache.hadoop.hbase.regionserver.StripeStoreFileManager$CompactionOrFlushMergeCopy.processNewCandidateStripes(StripeStoreFileManager.java:837)&lt;br/&gt;
at org.apache.hadoop.hbase.regionserver.StripeStoreFileManager$CompactionOrFlushMergeCopy.mergeResults(StripeStoreFileManager.java:672)&lt;br/&gt;
at org.apache.hadoop.hbase.regionserver.StripeStoreFileManager.insertNewFiles(StripeStoreFileManager.java:144)&lt;br/&gt;
at org.apache.hadoop.hbase.regionserver.HStore.updateStorefiles(HStore.java:1052)&lt;br/&gt;
at org.apache.hadoop.hbase.regionserver.HStore.access$500(HStore.java:128)&lt;br/&gt;
at org.apache.hadoop.hbase.regionserver.HStore$StoreFlusherImpl.commit(HStore.java:2231)&lt;br/&gt;
at org.apache.hadoop.hbase.regionserver.HRegion.internalFlushCacheAndCommit(HRegion.java:2315)&lt;/p&gt;</description>
                <environment>&lt;p&gt;hadoop-2.6.1 hbase-1.1.2&lt;/p&gt;</environment>
        <key id="12996519">HBASE-16394</key>
            <summary>What cause &quot;Compaction is trying to add a bad range&quot;,and Should stop the regionserver?</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="qgxiaozhan">weizhan Zeng</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 Aug 2016 04:21:01 +0000</created>
                <updated>Thu, 11 Aug 2016 04:36:10 +0000</updated>
                            <resolved>Thu, 11 Aug 2016 04:26:30 +0000</resolved>
                                    <version>1.1.2</version>
                                                    <component>Compaction</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="15416526" author="dimaspivak" created="Thu, 11 Aug 2016 04:26:30 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=qgxiaozhan&quot; class=&quot;user-hover&quot; rel=&quot;qgxiaozhan&quot;&gt;weizhan Zeng&lt;/a&gt;, HBase only uses JIRA to track development work. You&apos;ll have much more luck getting help with the issue you&apos;re seeing if you email &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;mailto:user@hbase.apache.org&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;user@hbase.apache.org&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/mail_small.gif&quot; height=&quot;12&quot; width=&quot;13&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; with details of the problem you&apos;re having. A link to a Pastebin/Gist with log entries from just before the issue happens would also be really useful. &lt;/p&gt;

&lt;p&gt;Cheers!&lt;/p&gt;</comment>
                            <comment id="15416533" author="qgxiaozhan" created="Thu, 11 Aug 2016 04:29:33 +0000"  >&lt;p&gt;I am sorry,should i close it ?&lt;/p&gt;</comment>
                            <comment id="15416537" author="dimaspivak" created="Thu, 11 Aug 2016 04:32:31 +0000"  >&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Don&apos;t worry, I took care of that already. Along with sending an email to &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;mailto:user@hbase.apache.org&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;user@&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/mail_small.gif&quot; height=&quot;12&quot; width=&quot;13&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;, it might be worth looking through the Apache mail archives to see if anyone has had advice about this in the past. A quick Google search &lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/hbase-dev/201604.mbox/%3C2E4914CB1DF61A4382C3DCB0A7516A4F592830AE@mbx05.360buyAD.local%3E&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;led me to this thread&lt;/a&gt;, though it doesn&apos;t look like there was much of a resolution there.&lt;/p&gt;</comment>
                            <comment id="15416541" author="qgxiaozhan" created="Thu, 11 Aug 2016 04:36:10 +0000"  >&lt;p&gt;Thanks ! I saw that before , but could&apos;n find any useful information . Anyway , i will try to found out the solution. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 11 Aug 2016 04:26:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i326pz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>