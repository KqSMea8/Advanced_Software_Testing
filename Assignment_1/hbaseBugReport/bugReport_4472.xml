<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:19:14 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-4472/HBASE-4472.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-4472] MiniHBaseCluster.shutdown() doesn&apos;t work if no active master</title>
                <link>https://issues.apache.org/jira/browse/HBASE-4472</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Running tests over in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4014&quot; title=&quot;Coprocessors: Flag the presence of coprocessors in logged exceptions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4014&quot;&gt;&lt;del&gt;HBASE-4014&lt;/del&gt;&lt;/a&gt; brought up this issue.  If the active master in a MiniHBaseCluster has aborted, then calling MiniHBaseCluster.shutdown() will just hang in JVMClusterUtil.shutdown(), waiting to join each of the region server threads.&lt;/p&gt;

&lt;p&gt;Seems like we should explicitly stop each region server instead of just relying on an active master instance deleting the cluster status znode?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12524465">HBASE-4472</key>
            <summary>MiniHBaseCluster.shutdown() doesn&apos;t work if no active master</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ghelmling">Gary Helmling</assignee>
                                    <reporter username="ghelmling">Gary Helmling</reporter>
                        <labels>
                    </labels>
                <created>Fri, 23 Sep 2011 19:43:28 +0000</created>
                <updated>Fri, 20 Nov 2015 11:55:20 +0000</updated>
                            <resolved>Fri, 23 Sep 2011 22:18:11 +0000</resolved>
                                                    <fixVersion>0.92.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13113691" author="ghelmling" created="Fri, 23 Sep 2011 19:44:48 +0000"  >&lt;p&gt;Adds an explicit call to HRegionServer.stop() in JVMClusterUtil.shutdown().&lt;/p&gt;</comment>
                            <comment id="13113718" author="ekoontz" created="Fri, 23 Sep 2011 20:06:54 +0000"  >&lt;p&gt;Call this.clusterStatusTracker.setClusterDown() during HMaster.abort().&lt;/p&gt;</comment>
                            <comment id="13113724" author="ekoontz" created="Fri, 23 Sep 2011 20:09:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4472&quot; title=&quot;MiniHBaseCluster.shutdown() doesn&amp;#39;t work if no active master&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4472&quot;&gt;&lt;del&gt;HBASE-4472&lt;/del&gt;&lt;/a&gt;.delete-zk-cluster-node-on-master-abort.patch is an alternative patch to fix the same bug: Master will remove the cluster-status ZK node (/hbase/shutdown by default) when it aborts. This will prevent the HRegionServer from hanging in HRegionServer.getMaster().&lt;/p&gt;</comment>
                            <comment id="13113730" author="ekoontz" created="Fri, 23 Sep 2011 20:12:06 +0000"  >&lt;p&gt;jstack of test during hang: note the TIMED_WAITING in HRegionServer.getMaster().&lt;/p&gt;</comment>
                            <comment id="13113784" author="ekoontz" created="Fri, 23 Sep 2011 21:32:57 +0000"  >&lt;p&gt;I think Gary&apos;s patch is better. It&apos;s simpler - with mine, you have the master modifying things outside itself (i.e. a zookeeper node) before aborting.&lt;/p&gt;</comment>
                            <comment id="13113806" author="yuzhihong@gmail.com" created="Fri, 23 Sep 2011 22:16:48 +0000"  >&lt;p&gt;I applied Gary&apos;s patch to 0.92 and TRUNK.&lt;/p&gt;

&lt;p&gt;Thanks Gary and Eugene.&lt;/p&gt;</comment>
                            <comment id="13113878" author="hudson" created="Sat, 24 Sep 2011 02:44:46 +0000"  >&lt;p&gt;Integrated in HBase-0.92 #18 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92/18/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92/18/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4472&quot; title=&quot;MiniHBaseCluster.shutdown() doesn&amp;#39;t work if no active master&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4472&quot;&gt;&lt;del&gt;HBASE-4472&lt;/del&gt;&lt;/a&gt;  MiniHBaseCluster.shutdown() doesn&apos;t work if no active master&lt;/p&gt;

&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/util/JVMClusterUtil.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13113904" author="hudson" created="Sat, 24 Sep 2011 06:07:58 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2247 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2247/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2247/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4472&quot; title=&quot;MiniHBaseCluster.shutdown() doesn&amp;#39;t work if no active master&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4472&quot;&gt;&lt;del&gt;HBASE-4472&lt;/del&gt;&lt;/a&gt;  MiniHBaseCluster.shutdown() doesn&apos;t work if no active master&lt;/p&gt;

&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/JVMClusterUtil.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15016454" author="lars_francke" created="Fri, 20 Nov 2015 11:55:20 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12496315" name="HBASE-4472.delete-zk-cluster-node-on-master-abort.patch" size="693" author="ekoontz" created="Fri, 23 Sep 2011 20:06:54 +0000"/>
                            <attachment id="12496308" name="HBASE-4472.patch" size="769" author="ghelmling" created="Fri, 23 Sep 2011 19:44:48 +0000"/>
                            <attachment id="12496317" name="jstack.txt" size="112760" author="ekoontz" created="Fri, 23 Sep 2011 20:12:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 23 Sep 2011 20:06:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>27310</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b0g7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62183</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>