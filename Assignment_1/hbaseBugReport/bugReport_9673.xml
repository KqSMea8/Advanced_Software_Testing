<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:06:32 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-9673/HBASE-9673.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-9673] Request priority revamp</title>
                <link>https://issues.apache.org/jira/browse/HBASE-9673</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Currently in the server we have three (four?) queues ranging from Normal (0) to High priority (100) with Replication priority falling between the two.&lt;/p&gt;

&lt;p&gt;Priority is determined by introspecting the incoming invocation to pull out which region is targeted by the query and/or to read a &apos;priority&apos; annotation that is on the invocation&apos;s method &amp;#8211; e.g. closeRegion/openRegion have @QosPriority(priority=HConstants.HIGH_QOS)  These annotations are awkwardly on the java implementation, not on the protobuf Service.&lt;/p&gt;

&lt;p&gt;The current means of introspection determining priority running the silly guava function is costly done on each call.  The annotations being on the java implementation rather than on the pb Service or in the pbs themselves requires somersaults extracting priority. If they were on the latter, then they would be more readily available down in rpc where invocation/scheduling is done.&lt;/p&gt;

&lt;p&gt;There is no way currently for a mapreduce task to tell hbase it is a low priority query nor for a webservice coming in the door to say I need a bit of info now &amp;#8211; and I don&apos;t care who you push aside.&lt;/p&gt;

&lt;p&gt;A suggestion of &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt;&apos;s is that we just have the client set the priority.  This has much merit.  We could keep it down low just do what the server currently does &amp;#8211; the introspection, annotations &amp;#8211; on client side and have it then set the priority into the request header where it will be readily available on the server when it is trying to figure what to do w/ the incoming call (high, low, or in-between).&lt;/p&gt;

&lt;p&gt;We could even expose this in our API.&lt;/p&gt;

&lt;p&gt;Above is about revamp of how the server figures the static priority of a call (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9612&quot; title=&quot;Ability to batch edits destined to different regions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9612&quot;&gt;&lt;del&gt;HBASE-9612&lt;/del&gt;&lt;/a&gt; actually adds priority to the RpcController and into the RequestHeader).  Server could just respect the client priority for now.&lt;/p&gt;

&lt;p&gt;Later we&apos;d want the server to adjust priorities based off what it thought of the user &amp;#8211; trusted or an alien &amp;#8211; as well as factor in its current load.  An overloaded server might reject low priority calls (Had a good chat on QoS w/ &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=toffer&quot; class=&quot;user-hover&quot; rel=&quot;toffer&quot;&gt;Francis Liu&lt;/a&gt; about QoS at the corner of Van Ness and Market last night).&lt;/p&gt;

&lt;p&gt;Later calls might come w/ an advertised SLA.  The server might reject calls it thought it could not service in time rather than take on more load (based off history of similarly sized queries, etc.).&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12671038">HBASE-9673</key>
            <summary>Request priority revamp</summary>
                <type id="13" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/genericissue.png">Brainstorming</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Fri, 27 Sep 2013 23:10:48 +0000</created>
                <updated>Fri, 27 Sep 2013 23:10:48 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>350867</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 11 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ohvr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>351158</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>