<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:53:04 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1384/HBASE-1384.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1384] when a regionserver loses it&apos;s ZK connection, it becomes permanently hosed</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1384</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Some regionservers lost their ZK connection (timed out) then this happened:&lt;/p&gt;

&lt;p&gt;2009-05-06 21:09:31,558 WARN org.apache.zookeeper.ClientCnxn: Exception closing session 0x1210ac3ab1400e1 to sun.nio.ch.SelectionKeyImpl@736921fd&lt;br/&gt;
java.io.IOException: TIMED OUT&lt;br/&gt;
        at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:837)&lt;br/&gt;
2009-05-06 21:09:31,558 WARN org.apache.hadoop.hbase.regionserver.HRegionServer: Processing message (Retry: 0)&lt;br/&gt;
org.apache.hadoop.hbase.Leases$LeaseStillHeldException&lt;br/&gt;
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)&lt;br/&gt;
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)&lt;br/&gt;
        at java.lang.reflect.Constructor.newInstance(Constructor.java:539)&lt;br/&gt;
        at org.apache.hadoop.hbase.RemoteExceptionHandler.decodeRemoteException(RemoteExceptionHandler.java:94)&lt;br/&gt;
        at org.apache.hadoop.hbase.RemoteExceptionHandler.checkThrowable(RemoteExceptionHandler.java:48)&lt;br/&gt;
        at org.apache.hadoop.hbase.RemoteExceptionHandler.checkIOException(RemoteExceptionHandler.java:66)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegionServer.run(HRegionServer.java:496)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:717)&lt;/p&gt;

&lt;p&gt;At this point, the regionserver has been hosed for over an hour, and shows no signs of returning.&lt;/p&gt;

&lt;p&gt;Of my 19 regionservers, 15 are left, and when i ls /hbase/rs I only see 15 ephermeral nodes.&lt;/p&gt;

&lt;p&gt;But the master isn&apos;t giving it up and refuses to let the regionservers rejoin the cluster.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12424780">HBASE-1384</key>
            <summary>when a regionserver loses it&apos;s ZK connection, it becomes permanently hosed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="nitay">Nitay Joffe</assignee>
                                    <reporter username="ryanobjc">ryan rawson</reporter>
                        <labels>
                    </labels>
                <created>Thu, 7 May 2009 04:23:27 +0000</created>
                <updated>Sun, 13 Sep 2009 22:24:36 +0000</updated>
                            <resolved>Mon, 11 May 2009 20:27:17 +0000</resolved>
                                    <version>0.20.0</version>
                                    <fixVersion>0.20.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12706717" author="ryanobjc" created="Thu, 7 May 2009 04:38:30 +0000"  >&lt;p&gt;then after i do a stop-hbase.sh / start-hbase.sh  the client says:&lt;/p&gt;

&lt;p&gt;2009-05-06 21:09:33,736 WARN org.apache.hadoop.hbase.zookeeper.ZooKeeperWrapper: Failed to set watcher on ZNode /hbase/master&lt;br/&gt;
org.apache.zookeeper.KeeperException$SessionExpiredException: KeeperErrorCode = Session expired&lt;br/&gt;
        at org.apache.zookeeper.KeeperException.create(KeeperException.java:118)&lt;br/&gt;
        at org.apache.zookeeper.ZooKeeper.exists(ZooKeeper.java:709)&lt;br/&gt;
        at org.apache.hadoop.hbase.zookeeper.ZooKeeperWrapper.watchMasterAddress(ZooKeeperWrapper.java:235)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegionServer.watchMasterAddress(HRegionServer.java:346)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegionServer.process(HRegionServer.java:342)&lt;br/&gt;
        at org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:366)&lt;/p&gt;

&lt;p&gt;I thought we fixed the case where the ZK session expires?  We&apos;re still suffering because of this bug.&lt;/p&gt;</comment>
                            <comment id="12706726" author="nitay" created="Thu, 7 May 2009 05:39:06 +0000"  >&lt;p&gt;Not yet, that&apos;s what &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1311&quot; title=&quot;ZooKeeperWrapper: Failed to set watcher on ZNode /hbase/master&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1311&quot;&gt;&lt;del&gt;HBASE-1311&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1315&quot; title=&quot;when HRS znode expires while HRS is still running, HRS enters infinite loop&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1315&quot;&gt;&lt;del&gt;HBASE-1315&lt;/del&gt;&lt;/a&gt; are for. I&apos;m working on those. This seems like a duplicate?&lt;/p&gt;</comment>
                            <comment id="12707009" author="apurtell" created="Thu, 7 May 2009 17:21:26 +0000"  >&lt;p&gt;I think this is basically a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1311&quot; title=&quot;ZooKeeperWrapper: Failed to set watcher on ZNode /hbase/master&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1311&quot;&gt;&lt;del&gt;HBASE-1311&lt;/del&gt;&lt;/a&gt;, with a slightly different failure mode which leads to the problem. &lt;/p&gt;</comment>
                            <comment id="12708199" author="nitay" created="Mon, 11 May 2009 20:27:17 +0000"  >&lt;p&gt;Should be fixed by &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1311&quot; title=&quot;ZooKeeperWrapper: Failed to set watcher on ZNode /hbase/master&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1311&quot;&gt;&lt;del&gt;HBASE-1311&lt;/del&gt;&lt;/a&gt;. Reopen if you see it again.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 7 May 2009 05:39:06 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25727</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 32 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hcxb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99356</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>