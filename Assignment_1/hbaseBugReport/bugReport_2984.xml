<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:06:23 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-2984/HBASE-2984.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-2984] [shell] Altering a family shouldn&apos;t reset to default unchanged attributes</title>
                <link>https://issues.apache.org/jira/browse/HBASE-2984</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;I changed the replication on a family that was also VERSIONS =&amp;gt; 1 and COMPRESSION =&amp;gt; LZO. I forgot that you have to respecify everything everytime you alter a family, so both were reset to 3 and NONE. Then the regions were compacted... and it has been splitting for about 20 minutes now. Fortunately this is our MR environment so our web site isn&apos;t affected, but it&apos;s still a major pain. Oh and also the table cannot be disabled to be re-altered since split parents are always present (I hope it&apos;ll stop splitting before midnight).&lt;/p&gt;

&lt;p&gt;The shell should use the old values for attributes that aren&apos;t changed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12473871">HBASE-2984</key>
            <summary>[shell] Altering a family shouldn&apos;t reset to default unchanged attributes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jdcryans">Jean-Daniel Cryans</assignee>
                                    <reporter username="jdcryans">Jean-Daniel Cryans</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Sep 2010 22:48:27 +0000</created>
                <updated>Fri, 20 Nov 2015 12:42:45 +0000</updated>
                            <resolved>Fri, 22 Oct 2010 23:29:20 +0000</resolved>
                                                    <fixVersion>0.90.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12908245" author="jdcryans" created="Sat, 11 Sep 2010 00:01:15 +0000"  >&lt;p&gt;If it ever happens to anyone else (I didn&apos;t want to wait for eternity for all the regions to split), here&apos;s a path that makes MetaUtils runnable and that resets the schema like I wanted it for the specified table. Tailor it to your own need. (yes it&apos;s super hacky, kids don&apos;t try this at home!)&lt;/p&gt;</comment>
                            <comment id="12924050" author="jdcryans" created="Fri, 22 Oct 2010 21:57:59 +0000"  >&lt;p&gt;Simple patch that fixes the issue.&lt;/p&gt;</comment>
                            <comment id="12924080" author="stack" created="Fri, 22 Oct 2010 23:26:28 +0000"  >&lt;p&gt;+1  Excellent.&lt;/p&gt;</comment>
                            <comment id="12924082" author="jdcryans" created="Fri, 22 Oct 2010 23:29:20 +0000"  >&lt;p&gt;Committed to trunk, thanks for looking at the patch Stack.&lt;/p&gt;</comment>
                            <comment id="12926429" author="kannanm" created="Fri, 29 Oct 2010 19:48:32 +0000"  >&lt;p&gt;JD:&lt;/p&gt;

&lt;p&gt;Was trying this patch, and ran into an error with Compression/BloomFilter settings, because  family.setBloomFilterType()  &amp;amp; family.setCompressionType() expect enum instead of string.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hbase(main):006:0&amp;gt; alter &apos;t1&apos;, {NAME =&amp;gt; &apos;f1&apos;, VERSIONS=&amp;gt; 2, COMPRESSION =&amp;gt; &apos;LZO&apos;}
alter &apos;t1&apos;, {NAME =&amp;gt; &apos;f1&apos;, VERSIONS=&amp;gt; 2, COMPRESSION =&amp;gt; &apos;LZO&apos;}

ERROR: &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; method HColumnDescriptor.setCompressionType expected [class org.apache.hadoop.hbase.io.hfile.Compression$Algorithm]; got: [java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;]; error: argument type mismatch
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So the patch currently breaks &apos;alter&apos; &amp;amp; &apos;create&apos;  from HBase shell if compression or bloom needs to be specified.&lt;/p&gt;




</comment>
                            <comment id="12926442" author="kannanm" created="Fri, 29 Oct 2010 20:29:45 +0000"  >&lt;p&gt;I suppose something like this: &lt;br/&gt;
family.setBloomFilterType(StoreFile.BloomType.valueOf(arg&lt;span class=&quot;error&quot;&gt;&amp;#91;HColumnDescriptor::BLOOMFILTER&amp;#93;&lt;/span&gt;))  &lt;br/&gt;
would do the trick. But I am getting some errors trying to import the required enum into Jruby. JD: you know how to?&lt;/p&gt;</comment>
                            <comment id="12926448" author="kannanm" created="Fri, 29 Oct 2010 20:41:23 +0000"  >&lt;p&gt;Ok, looks like in jruby the enum should be referred using the &quot;::&quot; syntax ( StoreFile::BloomType.valueOf), and with the appropriate import for  StoreFile thrown in it should work.&lt;/p&gt;</comment>
                            <comment id="12926454" author="jdcryans" created="Fri, 29 Oct 2010 20:57:04 +0000"  >&lt;p&gt;@Kannan, looks like I broke something, can you open a new jira?&lt;/p&gt;</comment>
                            <comment id="12926457" author="kannanm" created="Fri, 29 Oct 2010 21:04:24 +0000"  >&lt;p&gt;sure.&lt;/p&gt;</comment>
                            <comment id="15017336" author="lars_francke" created="Fri, 20 Nov 2015 12:42:45 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12473274">HBASE-2960</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12454350" name="2984-meta-offline-fixer.patch" size="2503" author="jdcryans" created="Sat, 11 Sep 2010 00:01:14 +0000"/>
                            <attachment id="12457877" name="HBASE-2984.patch" size="4060" author="jdcryans" created="Fri, 22 Oct 2010 21:57:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 22 Oct 2010 23:26:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26572</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hk5z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>100529</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>