<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:28:21 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5505/HBASE-5505.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5505] if max file size set to 256M, Per table hbase.hregion.max.filesize setting(at htable creation) overwritten by value set in hbase-site.conf(which might not be 256MB)</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5505</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;seems to me that when set to DEFAULT_MAX_FILE_SIZE, the max region file size set at Htable creation time may later be overwritten by value set in hbase-site.conf, i.e. no &quot;Per table&quot; hbase.hregion.max.filesize at all.&lt;/p&gt;

&lt;p&gt;in this case, on Web UI in the table description, max file is still 256M, but we can find region file much bigger on HDFS.&lt;/p&gt;

&lt;p&gt;In 0.92.0, o.a.h.hbase.regionserver.ConstantSizeRegionSplitPolicy, around line 33:&lt;/p&gt;

&lt;p&gt;    long maxFileSize = region.getTableDesc().getMaxFileSize();&lt;/p&gt;

&lt;p&gt;    // By default we split region if a file &amp;gt; HConstants.DEFAULT_MAX_FILE_SIZE.&lt;br/&gt;
    if (maxFileSize == HConstants.DEFAULT_MAX_FILE_SIZE) &lt;/p&gt;
{         //zx: here setting is over written by configuaration from hbase-site.conf
      maxFileSize = getConf().getLong(&quot;hbase.hregion.max.filesize&quot;,
        HConstants.DEFAULT_MAX_FILE_SIZE);
    }

&lt;p&gt;In 0.90.4(cdh3u3) or earlier version, this is found in o.a.h.hbase.regionserver.Store, around line 188:&lt;/p&gt;

&lt;p&gt;    long maxFileSize = info.getTableDesc().getMaxFileSize();&lt;br/&gt;
    if (maxFileSize == HConstants.DEFAULT_MAX_FILE_SIZE) &lt;/p&gt;
{
      maxFileSize = conf.getLong(&quot;hbase.hregion.max.filesize&quot;,
        HConstants.DEFAULT_MAX_FILE_SIZE);
    }</description>
                <environment></environment>
        <key id="12544878">HBASE-5505</key>
            <summary>if max file size set to 256M, Per table hbase.hregion.max.filesize setting(at htable creation) overwritten by value set in hbase-site.conf(which might not be 256MB)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="7">Later</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stevenzhuang">steven zhuang</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Mar 2012 02:38:57 +0000</created>
                <updated>Wed, 16 Nov 2016 21:18:19 +0000</updated>
                            <resolved>Wed, 16 Nov 2016 21:18:19 +0000</resolved>
                                    <version>0.90.4</version>
                    <version>0.92.0</version>
                                                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13220640" author="stevenzhuang" created="Fri, 2 Mar 2012 03:09:06 +0000"  >&lt;p&gt;we might move the heuristics to table creation time: &amp;lt;br&amp;gt;&lt;br/&gt;
load max file size from conf by default when create the Table Description obj, and overwrite it if there is any customized setting.&lt;/p&gt;</comment>
                            <comment id="13225275" author="jmhsieh" created="Thu, 8 Mar 2012 16:06:08 +0000"  >&lt;p&gt;@steven I agree with your suggestion of where the value should be loaded.  Do you want to look into a fix for this?&lt;/p&gt;</comment>
                            <comment id="13225773" author="stevenzhuang" created="Fri, 9 Mar 2012 01:42:10 +0000"  >&lt;p&gt;sure, I am glad if I can help. I will upload a fix patch later. &lt;/p&gt;</comment>
                            <comment id="13397292" author="stevenzhuang" created="Wed, 20 Jun 2012 06:28:49 +0000"  >&lt;p&gt;after a try, I think its too expensive to fix this minor bug, too many files are involved.&lt;br/&gt;
better we leave it this way?&lt;/p&gt;</comment>
                            <comment id="15671669" author="stack" created="Wed, 16 Nov 2016 21:18:19 +0000"  >&lt;p&gt;Resolving at Steven&apos;s suggestion: &quot;after a try, I think its too expensive to fix this minor bug, too many files are involved. better we leave it this way?&quot;&lt;/p&gt;

&lt;p&gt;This is probably still an issue. Work on it later.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 8 Mar 2012 16:06:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>230064</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02c9z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11590</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>