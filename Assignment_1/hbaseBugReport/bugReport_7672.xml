<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:47:57 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-7672/HBASE-7672.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-7672] Merging compaction requests in the queue for same store</title>
                <link>https://issues.apache.org/jira/browse/HBASE-7672</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;With a high write presesure, we could found many compaction requests for same store in the compaction queue.&lt;/p&gt;

&lt;p&gt;I think we could merge compaction requests for same store to increase compaction efficiency greately. It is so in 0.90 version because doing compacting files selection only when executing compaction&lt;/p&gt;

&lt;p&gt;e.g.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
SmallCompation active count:1,Queue:
regionName=abctest,90F9AUIPK4YO47W55WS4R8RSKGDFNRYBNB79COYKHNQD9F62G7,1359104485823.f05568c159940b8a72bd84c988388ad3., storeName=c1, fileCount=4, fileSize=371.1m (212.0m, 53.0m, 53.0m, 53.0m), priority=15, time=56843340270506608
regionName=abctest,90F9AUIPK4YO47W55WS4R8RSKGDFNRYBNB79COYKHNQD9F62G7,1359104485823.f05568c159940b8a72bd84c988388ad3., storeName=c1, fileCount=4, fileSize=330.4m (171.3m, 53.0m, 53.0m, 53.0m), priority=11, time=56843401092063608
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We could merge these two compaction requests&lt;/p&gt;</description>
                <environment></environment>
        <key id="12629240">HBASE-7672</key>
            <summary>Merging compaction requests in the queue for same store</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="zjushch">chunhui shen</assignee>
                                    <reporter username="zjushch">chunhui shen</reporter>
                        <labels>
                    </labels>
                <created>Fri, 25 Jan 2013 08:26:17 +0000</created>
                <updated>Mon, 23 Sep 2013 18:23:53 +0000</updated>
                            <resolved>Sat, 26 Jan 2013 03:56:00 +0000</resolved>
                                    <version>0.94.4</version>
                                                    <component>Compaction</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13562889" author="mcorgan" created="Fri, 25 Jan 2013 18:17:58 +0000"  >&lt;p&gt;We had a similar discussion on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5479&quot; title=&quot;Postpone CompactionSelection to compaction execution time&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5479&quot;&gt;&lt;del&gt;HBASE-5479&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13562974" author="sershe" created="Fri, 25 Jan 2013 20:07:50 +0000"  >&lt;p&gt;So this basically discards the compaction request and makes the store &quot;recalculate&quot; one?&lt;br/&gt;
Is it safe to call finishRequest on incomplete request from queue?&lt;br/&gt;
Also, if the request is dequeued and discarded anyway, what&apos;s the point of putting it there in the first place?&lt;br/&gt;
Maybe it can be generated once before compaction.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;existedRequest = ((PriorityCompactionQueue) smallCompactions.getQueue())&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;1) &quot;existingRequest&quot;&lt;br/&gt;
2) Casts look hacky. If we know the type why not use the type.&lt;br/&gt;
Also, PriorityCompactionQueue is not actually used as a field anywhere in the patch.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Compcation&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;typo&lt;/p&gt;

</comment>
                            <comment id="13563031" author="apurtell" created="Fri, 25 Jan 2013 21:01:39 +0000"  >&lt;p&gt;I tried something similar once that instead changed the compaction request comparator to only consider region and priority. It worked, but the large compaction queues were a symptom of a problem not the problem itself. Decided to tackle the problem instead. &lt;/p&gt;</comment>
                            <comment id="13563334" author="zjushch" created="Sat, 26 Jan 2013 03:56:00 +0000"  >&lt;p&gt;Duplicated as &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5479&quot; title=&quot;Postpone CompactionSelection to compaction execution time&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5479&quot;&gt;&lt;del&gt;HBASE-5479&lt;/del&gt;&lt;/a&gt;, move discussion to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5479&quot; title=&quot;Postpone CompactionSelection to compaction execution time&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5479&quot;&gt;&lt;del&gt;HBASE-5479&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12544149">HBASE-5479</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12566486" name="HBASE-7672.patch" size="5952" author="zjushch" created="Fri, 25 Jan 2013 08:27:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 25 Jan 2013 18:17:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>309207</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 46 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1e5gf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>290813</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>