<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:18:31 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-4393/HBASE-4393.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-4393] Implement a canary monitoring program</title>
                <link>https://issues.apache.org/jira/browse/HBASE-4393</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;This JIRA is to implement a standalone program that can be used to do &quot;canary monitoring&quot; of a running HBase cluster. This program would gather a list of the regions in the cluster, then iterate over them doing lightweight operations (eg short scans) to provide metrics about latency as well as alert on availability issues.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12522959">HBASE-4393</key>
            <summary>Implement a canary monitoring program</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mbertozzi">Matteo Bertozzi</assignee>
                                    <reporter username="tlipcon">Todd Lipcon</reporter>
                        <labels>
                    </labels>
                <created>Tue, 13 Sep 2011 21:24:29 +0000</created>
                <updated>Tue, 15 Oct 2013 04:46:48 +0000</updated>
                            <resolved>Tue, 24 Apr 2012 07:21:59 +0000</resolved>
                                    <version>0.92.0</version>
                                    <fixVersion>0.94.0</fixVersion>
                    <fixVersion>0.95.0</fixVersion>
                                    <component>monitoring</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>12</watches>
                                                                <comments>
                            <comment id="13104626" author="otis" created="Wed, 14 Sep 2011 16:26:07 +0000"  >&lt;p&gt;Todd, where/how would the metrics be published?  JMX perhaps?&lt;br/&gt;
Please see my comment on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4147&quot; title=&quot;StoreFile query usage report&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4147&quot;&gt;HBASE-4147&lt;/a&gt;: &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4147?focusedCommentId=13104623&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13104623&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-4147?focusedCommentId=13104623&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13104623&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13104922" author="nspiegelberg" created="Wed, 14 Sep 2011 21:58:30 +0000"  >&lt;p&gt;What sort of benefit do you see with doing lightweight operations versus something like RPC sampling?&lt;/p&gt;</comment>
                            <comment id="13104971" author="tlipcon" created="Wed, 14 Sep 2011 22:52:55 +0000"  >&lt;p&gt;RPC sampling on the server side won&apos;t tell you if, for example, one of the servers in the cluster has a faulty NIC and thus is dropping packets and has very high latency. The latency &quot;inside&quot; the server will be fast, but for any clients, it will be slow.&lt;/p&gt;

&lt;p&gt;Availability-wise, we sometimes have clusters which only sporadically see access (eg from an MR job that runs every hour). In that case, it&apos;s nice to have a canary monitor to determine if one of the region servers is having issues &lt;em&gt;before&lt;/em&gt; the job runs and times out. We often find out about these kind of issues from a job failing, instead of proactively from monitoring, since all of the servers are &quot;up&quot;, just one region in some kind of broken state.&lt;/p&gt;</comment>
                            <comment id="13146629" author="jwfbean" created="Tue, 8 Nov 2011 22:59:17 +0000"  >&lt;p&gt;I&apos;m working on a simple canary that tries to fetch a row from each column family at each region. I&apos;ll post it on successful test.&lt;/p&gt;</comment>
                            <comment id="13237619" author="mbertozzi" created="Sat, 24 Mar 2012 18:07:59 +0000"  >&lt;p&gt;I&apos;ve attached a simple draft canary tool, that foreach table (or for the specified tables) tries to fetch a row from each region server, collects and print failures and times.&lt;/p&gt;

&lt;p&gt;should this tool be a service that collect/expose stats for each region/column family or just a tool to get an idea on the cluster state?&lt;/p&gt;

&lt;p&gt;In case this should be just a tool, any idea on the output format, the metrics that we want collect and output?&lt;/p&gt;</comment>
                            <comment id="13237678" author="lhofhansl" created="Sat, 24 Mar 2012 21:11:44 +0000"  >&lt;p&gt;@Matteo: Ideally this could be used for trending. So output that is suitable for Ganglia or OpenTSDB (whatever that means in both cases) would be cool.&lt;br/&gt;
Even just a cluster state tool is great.&lt;/p&gt;</comment>
                            <comment id="13237681" author="lhofhansl" created="Sat, 24 Mar 2012 21:15:02 +0000"  >&lt;p&gt;Java code looks great. Maybe instead of using a scanner in sniffRegion, you could use a Get?&lt;/p&gt;</comment>
                            <comment id="13237684" author="lhofhansl" created="Sat, 24 Mar 2012 21:16:13 +0000"  >&lt;p&gt;I would like to get this into 0.94.&lt;br/&gt;
This needs some of usage description so that folks can find out what you are supposed to pass on the command line.&lt;/p&gt;</comment>
                            <comment id="13237697" author="stack" created="Sat, 24 Mar 2012 21:37:27 +0000"  >&lt;p&gt;I wrote a note to suggest this NOT be added to 0.94 because its only basic and its apart from hbase so we shouldn&apos;t have to hold up hbase to get it in.  Was also going to talk about this tool being too basic &amp;#8211; emissions are on stdout only rather than up in jmx, formatted as json or whatever &amp;#8211; but then I thought we have to start somewhere.   We can add to this basic tool later.&lt;/p&gt;

&lt;p&gt;The class needs a license and a class comment.&lt;/p&gt;

&lt;p&gt;Should be called Canary rather than HBaseCanary.&lt;/p&gt;

&lt;p&gt;Put it into a package.  Would suggest we start a tool package so o.a.h.h.tool.&lt;/p&gt;

&lt;p&gt;Should implement Tool and be run using ToolRunner.  Tool adds a little useful util.&lt;/p&gt;

&lt;p&gt;Needs usage as per lars.&lt;/p&gt;

&lt;p&gt;Could be added to bin/hbase as &apos;canary&apos; &amp;#8211; could start/stop it like we start/stop region.  If you do this, then things like log name and location will be set up for you as it is for rest server and thrift server etc.&lt;/p&gt;

&lt;p&gt;Should output be via LOG rather than stdout?   Then we can hook its output up variously.&lt;/p&gt;

&lt;p&gt;Skip formatting in the output...the &apos; - Region ..&apos; i.e. remove the &apos; - &apos; prefix.&lt;/p&gt;

&lt;p&gt;I think make the few small changes above and we&apos;d have a good start.  Thanks lads. Good stuff&lt;/p&gt;
</comment>
                            <comment id="13237698" author="lhofhansl" created="Sat, 24 Mar 2012 21:39:51 +0000"  >&lt;p&gt;You are more iron-handy than me, stack. Your points are well taken, unscheduling.&lt;/p&gt;</comment>
                            <comment id="13237699" author="stack" created="Sat, 24 Mar 2012 21:40:18 +0000"  >&lt;p&gt;Hmm... this thing comes up reports and goes down immediately so some of my suggestions above may be OTT.  So, I don&apos;t think we need the following to get the script in (we can add it later):&lt;/p&gt;

&lt;p&gt;&quot;Could be added to bin/hbase as &apos;canary&apos; &#8211; could start/stop it like we start/stop region. If you do this, then things like log name and location will be set up for you as it is for rest server and thrift server etc.&quot;&lt;/p&gt;</comment>
                            <comment id="13238740" author="mbertozzi" created="Mon, 26 Mar 2012 19:55:37 +0000"  >&lt;p&gt;I&apos;ve attached a new version of the canary following the stack comments.&lt;/p&gt;

&lt;p&gt;Now the canary is a tool, and has a command line with a couple of options.&lt;/p&gt;

&lt;p&gt;In this implementations the canary runs &quot;forever&quot; and has a pluggable sink interface to collect and output failures and read latencies.&lt;/p&gt;

&lt;p&gt;At the moment the only sink implemented is the FileSink that allows to use a file or stdout as output device. But we can add support for the hadoop metrics later.&lt;/p&gt;</comment>
                            <comment id="13244087" author="hadoopqa" created="Mon, 2 Apr 2012 09:24:08 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12519998/Canary-v0.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12519998/Canary-v0.java&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1367//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1367//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13244491" author="stack" created="Mon, 2 Apr 2012 19:29:10 +0000"  >&lt;p&gt;Please format your contrib as a patch (git or svn add then do a git diff --no-prefix or svn diff).  Thanks.&lt;/p&gt;

&lt;p&gt;This line is not necessary any more:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 * Copyright 2012 The Apache Software Foundation
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Please fix this doc: &apos; * HBase Canary Tool, that that can be used to do&apos;  (too many &apos;that&apos;s)&lt;/p&gt;

&lt;p&gt;On the Sink interface, its not going to be used by anyone else if its private?  That might be fine for first checkin.  Later when other Sinks we can open it up?&lt;/p&gt;

&lt;p&gt;I think filesink is the wrong sink to do as first implementation.  Your first Sink should be StdOutSink using Logging system.  Notice how anything that is started with bin/hbase-daemon.sh gets log files set up for it (master, regionserver, but also rest, thrift, etc.).  Doing this, your emissions will be in a well-known place in files that are named with a format that matches other loggings made by hbase, etc.&lt;/p&gt;

&lt;p&gt;This method is oddly named:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void publish(HRegionInfo region, HColumnDescriptor column, &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; msTime) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It seems like its for logging messages like this: &quot;%s read from region %s column family %s in %dms\n&quot;,&lt;/p&gt;

&lt;p&gt;... should method name be logReadTime?  Or publishReadTiming?&lt;/p&gt;

&lt;p&gt;Whats the BasicParser do?  It matches what Tool does?  We don&apos;t want GnuParser?&lt;/p&gt;

&lt;p&gt;I like this comment:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-comment&quot;&gt;// user has specified an interval &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; canary breaths&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Thats cute.&lt;/p&gt;

&lt;p&gt;Put on one line:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (conf == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
      conf = HBaseConfiguration.create();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I think I should be able to run this once OR run it as a daemon.   Pass an arg if its to run as daemon process?&lt;/p&gt;

&lt;p&gt;Can this code use any of the utility that is in hbck?&lt;/p&gt;

&lt;p&gt;I like the Tool improvements.&lt;/p&gt;

&lt;p&gt;Thanks Matteo.&lt;/p&gt;




</comment>
                            <comment id="13248453" author="mbertozzi" created="Fri, 6 Apr 2012 16:11:36 +0000"  >&lt;p&gt;use LOG as default Sink, renamed methods as suggested and removed the BasicParser.&lt;/p&gt;

&lt;p&gt;@Stack&lt;br/&gt;
What is your idea, about integrating hbck? some sort of automatic recovery in some codition?&lt;/p&gt;</comment>
                            <comment id="13248505" author="hadoopqa" created="Fri, 6 Apr 2012 17:13:29 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12521688/HBASE-4393-v0.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12521688/HBASE-4393-v0.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 4 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1430//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1430//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1430//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1430//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1430//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1430//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13260319" author="stack" created="Tue, 24 Apr 2012 07:21:59 +0000"  >&lt;p&gt;Committed to trunk.  Thanks for the patch Matteo. I tried it out.  Does the basics.  Nice. Thanks.&lt;/p&gt;</comment>
                            <comment id="13260320" author="stack" created="Tue, 24 Apr 2012 07:23:22 +0000"  >&lt;p&gt;Committed to 0.94 (thought you might like this Lars).&lt;/p&gt;</comment>
                            <comment id="13260352" author="hudson" created="Tue, 24 Apr 2012 08:26:29 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #142 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/142/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/142/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4393&quot; title=&quot;Implement a canary monitoring program&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4393&quot;&gt;&lt;del&gt;HBASE-4393&lt;/del&gt;&lt;/a&gt; Implement a canary monitoring program (Revision 1329575)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/tools&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/tools/Canary.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13260370" author="hudson" created="Tue, 24 Apr 2012 09:08:35 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2805 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2805/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2805/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4393&quot; title=&quot;Implement a canary monitoring program&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4393&quot;&gt;&lt;del&gt;HBASE-4393&lt;/del&gt;&lt;/a&gt; Implement a canary monitoring program (Revision 1329574)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/tools&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/tools/Canary.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13260557" author="zhihyu@ebaysf.com" created="Tue, 24 Apr 2012 13:53:00 +0000"  >&lt;p&gt;This checkin might be related to:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[ERROR] Failed to execute goal org.apache.rat:apache-rat-plugin:0.8:check (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;) on project hbase: Too many unapproved licenses: 1 -&amp;gt; [Help 1]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13260651" author="stack" created="Tue, 24 Apr 2012 15:20:41 +0000"  >&lt;p&gt;No.  This patch has a license.  The failure was because of the OOME.  RAT complaint is this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

Unapproved licenses:

  hs_err_pid23951.log

...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13260726" author="stack" created="Tue, 24 Apr 2012 17:28:06 +0000"  >&lt;p&gt;@Ted FYI, if you go under artifacts produced by the build into the target dir, you can see the rat.txt now.  Thats where I got the above from.  Thinking on it, I also went to change the build order so site goes first so we&apos;ll fail fast if a rat problem but it seems build is already this way &amp;#8211; must run unit tests up front anyways.&lt;/p&gt;</comment>
                            <comment id="13260751" author="lars_francke" created="Tue, 24 Apr 2012 17:51:54 +0000"  >&lt;p&gt;The Canary.java file has a wrong package definition.&lt;/p&gt;

&lt;p&gt;Lives in org.apache.hadoop.hbase.tools but says &lt;tt&gt;package org.apache.hadoop.hbase.tool;&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;New issue?&lt;/p&gt;</comment>
                            <comment id="13260766" author="stack" created="Tue, 24 Apr 2012 18:04:22 +0000"  >&lt;p&gt;Let me take care of it Lars.  I should have seen that.  Thanks for pointing it out.  Fixed over in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5866&quot; title=&quot;Canary in tool package but says its in tools.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5866&quot;&gt;&lt;del&gt;HBASE-5866&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13261223" author="hudson" created="Wed, 25 Apr 2012 01:50:43 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #20 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/20/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/20/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4393&quot; title=&quot;Implement a canary monitoring program&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4393&quot;&gt;&lt;del&gt;HBASE-4393&lt;/del&gt;&lt;/a&gt; Implement a canary monitoring program (Revision 1329575)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/tools&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/tools/Canary.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13261286" author="lhofhansl" created="Wed, 25 Apr 2012 04:17:24 +0000"  >&lt;p&gt;Thanks Stack... I do like this in 0.94 (- the wrong package of course &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; )&lt;/p&gt;</comment>
                            <comment id="13261337" author="hudson" created="Wed, 25 Apr 2012 06:20:39 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-security #183 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-security/183/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-security/183/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4393&quot; title=&quot;Implement a canary monitoring program&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4393&quot;&gt;&lt;del&gt;HBASE-4393&lt;/del&gt;&lt;/a&gt; Implement a canary monitoring program (Revision 1329574)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/tools&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/tools/Canary.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13288967" author="jeremy_carroll" created="Mon, 4 Jun 2012 22:32:45 +0000"  >&lt;p&gt;Just wanted to put in a few operational comments. We have a version of this Canary script hooked up to our current HBase cluster for monitoring. It works well to determine if your cluster is responding to RPC&apos;s in a health amount of time. But it does not work well to determine latency for requests overall as the getStartKey becomes cached. Since a request for the same key over, and over again is basically cache warming it returns in &amp;lt;1ms every time after a few iterations.&lt;/p&gt;

&lt;p&gt;We played around with the idea of using a random request within the RegionServer to get non-cache latency responses. In this scenario we basically are testing our disk latency. IMHO the intention of the Canary is not to test my disk response but the overall response / health of the HBase RegionServer. We took an approach to use the fsLatency histogram metrics (99, 999th percent) in a separate check in addition to the Canary for overall health status.&lt;/p&gt;</comment>
                            <comment id="13548606" author="takeshi.miao" created="Wed, 9 Jan 2013 16:02:32 +0000"  >&lt;p&gt;There are 4 differences compared with #&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4393&quot; title=&quot;Implement a canary monitoring program&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4393&quot;&gt;&lt;del&gt;HBASE-4393&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
1. this tool will take any one region from each region server to monitor, not every region in whole HBase cluster&lt;br/&gt;
2. this tool was implemented with multi-threaded feature, so it will not be blocked if any region server being hung&lt;br/&gt;
3. this tool is taking one or more region server FQDN as options, then will monitor the given region servers&lt;br/&gt;
3.1 monitor all region servers if no option given&lt;br/&gt;
4. this tool can also take one or more regular expression patterns for region server FQDN for user easily use&lt;/p&gt;

&lt;p&gt;I use this tool on our internal HBase operation, so I think that other people may have the identical requirements&lt;/p&gt;</comment>
                            <comment id="13548776" author="apurtell" created="Wed, 9 Jan 2013 18:26:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=takeshi.miao&quot; class=&quot;user-hover&quot; rel=&quot;takeshi.miao&quot;&gt;takeshi.miao&lt;/a&gt; Would you be interested in contributing your canary tool? Is it based on the old one? Please consider opening a new issue, this one is closed.&lt;/p&gt;</comment>
                            <comment id="13549308" author="takeshi.miao" created="Thu, 10 Jan 2013 02:39:56 +0000"  >&lt;p&gt;Sorry, Andrew Purtell, I put this comment on the wrong ticket, move it to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7525&quot; title=&quot;A canary monitoring program specifically for regionserver&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7525&quot;&gt;&lt;del&gt;HBASE-7525&lt;/del&gt;&lt;/a&gt;, and thanks for your reminding&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12519998" name="Canary-v0.java" size="8021" author="mbertozzi" created="Mon, 26 Mar 2012 19:55:37 +0000"/>
                            <attachment id="12521706" name="HBASE-4393-v0.patch" size="8470" author="mbertozzi" created="Fri, 6 Apr 2012 18:04:41 +0000"/>
                            <attachment id="12519810" name="HBaseCanary.java" size="4132" author="mbertozzi" created="Sat, 24 Mar 2012 18:07:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 14 Sep 2011 16:26:07 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33530</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 49 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08qnb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48917</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tool to check cluster.  See $ ./bin/hbase org.apache.hadoop.hbase.tool.Canary -help for how to use.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.96notable</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>