<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:54:54 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-8401/HBASE-8401.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-8401] Backport &quot;HBASE-8284 Allow String Offset(s) in ColumnPaginationFilter for bookmark based pagination&quot;</title>
                <link>https://issues.apache.org/jira/browse/HBASE-8401</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;This issue is for discussion of whether or not backport &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8284&quot; title=&quot;Allow String Offset(s) in ColumnPaginationFilter for bookmark based pagination&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8284&quot;&gt;&lt;del&gt;HBASE-8284&lt;/del&gt;&lt;/a&gt;.  It has been applied to trunk and 0.95.  A patch for 0.94 is over on hbase-8284&lt;/p&gt;</description>
                <environment></environment>
        <key id="12644165">HBASE-8401</key>
            <summary>Backport &quot;HBASE-8284 Allow String Offset(s) in ColumnPaginationFilter for bookmark based pagination&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="varunsharma">Varun Sharma</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Apr 2013 17:53:17 +0000</created>
                <updated>Tue, 15 Oct 2013 06:44:27 +0000</updated>
                            <resolved>Fri, 21 Jun 2013 22:20:39 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13657902" author="lhofhansl" created="Wed, 15 May 2013 04:51:11 +0000"  >&lt;p&gt;The suggested patch in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8284&quot; title=&quot;Allow String Offset(s) in ColumnPaginationFilter for bookmark based pagination&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8284&quot;&gt;&lt;del&gt;HBASE-8284&lt;/del&gt;&lt;/a&gt; would break backward compatibility if the current ColumnPaginationFilter is used (the deserializion  would fail).&lt;/p&gt;

&lt;p&gt;If we want this in 0.94, we should introduce a new class (probably a subclass of ColumnPaginationFilter) with the desired behavior.&lt;/p&gt;

&lt;p&gt;Also reading the description this seems to be a pretty special use case anyway.&lt;/p&gt;</comment>
                            <comment id="13658703" author="lhofhansl" created="Wed, 15 May 2013 19:44:33 +0000"  >&lt;p&gt;Pushing to 0.94.9. Bring back if you disagree.&lt;/p&gt;</comment>
                            <comment id="13690821" author="lhofhansl" created="Fri, 21 Jun 2013 22:20:39 +0000"  >&lt;p&gt;No activity. Marking as &quot;Won&apos;t Fix&quot;&lt;/p&gt;</comment>
                            <comment id="13690833" author="varunsharma" created="Fri, 21 Jun 2013 22:33:04 +0000"  >&lt;p&gt;Going back to your comment about backward compatibility being broken. The code goes like this, for serialization:&lt;/p&gt;

&lt;p&gt;   {&lt;br/&gt;
     this.limit = in.readInt();&lt;br/&gt;
     this.offset = in.readInt();&lt;br/&gt;
+    this.columnOffset = Bytes.readByteArray(in);&lt;br/&gt;
+    if (this.columnOffset.length == 0) &lt;/p&gt;
{
+      this.columnOffset = null;
+    }
&lt;p&gt;   }&lt;/p&gt;

&lt;p&gt;   public void write(DataOutput out) throws IOException&lt;/p&gt;
   {
     out.writeInt(this.limit);
     out.writeInt(this.offset);
+    Bytes.writeByteArray(out, this.columnOffset);
   }

&lt;p&gt;Here is my understanding of how it impacts compatibility and it maybe wrong..&lt;br/&gt;
1) Client has patch but region server does not&lt;br/&gt;
In this case, client would marshall extra data which will be discarded by the region server&lt;/p&gt;

&lt;p&gt;2) Client does not have patch but region server does&lt;br/&gt;
In this case, region server would read no additional data and assume the columnOffset to be null.&lt;/p&gt;

&lt;p&gt;I am okay with introducing a new Filter class for this or otherwise, introducing a coprocessor - I am not certain of the performance implications but we have been running the Filter implementation in production for a while. As far as utility, looking at the other JIRA 8284, there was interest in implementing this functionality.&lt;/p&gt;</comment>
                            <comment id="13690856" author="lhofhansl" created="Fri, 21 Jun 2013 22:53:00 +0000"  >&lt;p&gt;I think in case 1 it would leave unread stuff on the wire that would confuse the next reader; in case 2 you&apos;d get an end-of-stream type of exception.&lt;/p&gt;

&lt;p&gt;A subclass is OK, because it does not change the existing filter class, so only if somebody used the new class before fully upgrading the cluster (and client) would there be a problem.&lt;/p&gt;</comment>
                            <comment id="13794936" author="stepinto" created="Tue, 15 Oct 2013 06:44:27 +0000"  >&lt;p&gt;Hi folks,&lt;/p&gt;

&lt;p&gt;We found this feature is helpful to our use case. So I&apos;d like to help on this ticket.&lt;/p&gt;

&lt;p&gt;The current serialization code of ColumnPaginationFilter is as follow:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void readFields(DataInput in) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException
  {
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.limit = in.readInt();
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.offset = in.readInt();
  }

  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void write(DataOutput out) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException
  {
    out.writeInt(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.limit);
    out.writeInt(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.offset);
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If we can accept that old server does not work with a new client, we can use this trick: serialize a negative integer number first, which could be an indicator of using a new serialization format.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 15 May 2013 04:51:11 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>324532</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 9 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1jzo7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>324877</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>