<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:50:27 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-7934/HBASE-7934.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-7934] TableMapReduceUtil doesn&apos;t include all dependency jars in new modular build</title>
                <link>https://issues.apache.org/jira/browse/HBASE-7934</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;From post to hbase-dev:&lt;/p&gt;

&lt;p&gt;I&apos;m seeing ClassNotFoundExceptions when running ImportTsv against trunk. Presumably the old instructions for classpath assembly need an update. I guess I could create a hadoop jar that ships the classpath entries in lib, but IMHO that&apos;s not a viable solution for users who want to run one of the jobs we distribute. Am I missing something?&lt;/p&gt;

&lt;p&gt;For you reference:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$ HADOOP_CLASSPATH=$(./bin/hbase classpath) hadoop jar ./hbase-server/target/hbase-server-0.95-SNAPSHOT.jar importtsv -Dimporttsv.columns=HBASE_ROW_KEY,d:c1,d:c2 -Dimporttsv.bulk.output=hdfs:&lt;span class=&quot;code-comment&quot;&gt;///tmp/hfiles simple hdfs:///tmp/simple.tsv
&lt;/span&gt;
...

Error: java.lang.ClassNotFoundException: org.apache.hadoop.hbase.protobuf.generated.ClientProtos$Mutate$MutateType
	at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:306)
	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:247)
	at org.apache.hadoop.hbase.mapreduce.MutationSerialization$MutationSerializer.serialize(MutationSerialization.java:87)
	at org.apache.hadoop.hbase.mapreduce.MutationSerialization$MutationSerializer.serialize(MutationSerialization.java:70)
	at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.collect(MapTask.java:1069)
	at org.apache.hadoop.mapred.MapTask$NewOutputCollector.write(MapTask.java:691)
	at org.apache.hadoop.mapreduce.TaskInputOutputContext.write(TaskInputOutputContext.java:80)
	at org.apache.hadoop.hbase.mapreduce.TsvImporterMapper.map(TsvImporterMapper.java:151)
	at org.apache.hadoop.hbase.mapreduce.TsvImporterMapper.map(TsvImporterMapper.java:37)
	at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:144)
	at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:764)
	at org.apache.hadoop.mapred.MapTask.run(MapTask.java:370)
	at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:396)
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
	at org.apache.hadoop.mapred.Child.main(Child.java:249)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12634017">HBASE-7934</key>
            <summary>TableMapReduceUtil doesn&apos;t include all dependency jars in new modular build</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12636666">HBASE-8084</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ndimiduk">Nick Dimiduk</assignee>
                                    <reporter username="ndimiduk">Nick Dimiduk</reporter>
                        <labels>
                    </labels>
                <created>Mon, 25 Feb 2013 22:57:41 +0000</created>
                <updated>Mon, 23 Sep 2013 18:31:02 +0000</updated>
                            <resolved>Wed, 27 Feb 2013 00:37:58 +0000</resolved>
                                    <version>0.95.0</version>
                    <version>0.95.2</version>
                                    <fixVersion>0.98.0</fixVersion>
                    <fixVersion>0.95.0</fixVersion>
                                    <component>mapreduce</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13586447" author="enis" created="Mon, 25 Feb 2013 23:19:27 +0000"  >&lt;p&gt;Probably the problem is that, we do only add the hbase-server.jar, but not it&apos;s dependencies, mainly hbase-common, etc. We can fix this in TableMapReduceUtil.addDependencyJars(), by adding some classes from common and client.  &lt;/p&gt;</comment>
                            <comment id="13586485" author="yuzhihong@gmail.com" created="Mon, 25 Feb 2013 23:58:48 +0000"  >&lt;blockquote&gt;&lt;p&gt;by adding some classes from common and client.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Proper class(es) should be picked so that this dependency is maintained after classes are moved across modules.&lt;/p&gt;</comment>
                            <comment id="13586497" author="ndimiduk" created="Tue, 26 Feb 2013 00:04:27 +0000"  >&lt;p&gt;Inclusion of PrefixTreeCodex requires that the hbase-prefix-tree module become a compile-time dependency.&lt;/p&gt;</comment>
                            <comment id="13586505" author="yuzhihong@gmail.com" created="Tue, 26 Feb 2013 00:10:01 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+          &lt;span class=&quot;code-comment&quot;&gt;// pull job classed&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;typo: classed&lt;/p&gt;

&lt;p&gt;With the change in pom.xml, have you verified that debugging in Eclipse still works ?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="13586553" author="ndimiduk" created="Tue, 26 Feb 2013 00:56:20 +0000"  >&lt;blockquote&gt;&lt;p&gt;Right now &lt;span class=&quot;error&quot;&gt;&amp;#91;hbase-prefix-tree&amp;#93;&lt;/span&gt; only used at runtime on the server.  I guess we need a way to prevent instantiation on the client.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This version is less agressive about the dependency scope change. hbase-prefix-tree is only included as a compile-time dependency in hbase-server, rather than project wide.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;With the change in pom.xml, have you verfified that debugging in Eclipse still works ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I have successfully performed &quot;Debug As -&amp;gt; JUnit Test&quot; on all of TestPrefixTreeSearcher (hbase-prefix-tree), TestGet (hbase-client), and TestResult (hbase-server) from with Eclipse.&lt;/p&gt;</comment>
                            <comment id="13586555" author="ndimiduk" created="Tue, 26 Feb 2013 00:57:36 +0000"  >&lt;p&gt;It also addresses &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yuzhihong%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;yuzhihong@gmail.com&quot;&gt;Ted Yu&lt;/a&gt;&apos;s typo comment.&lt;/p&gt;</comment>
                            <comment id="13586568" author="hadoopqa" created="Tue, 26 Feb 2013 01:12:18 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12570893/0001-HBASE-7934-TableMapReduceUtil-include-module-depende.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12570893/0001-HBASE-7934-TableMapReduceUtil-include-module-depende.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.constraint.TestConstraint&lt;br/&gt;
                  org.apache.hadoop.hbase.zookeeper.lock.TestZKInterProcessReadWriteLock&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4543//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4543//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4543//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4543//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4543//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4543//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4543//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4543//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4543//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4543//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4543//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4543//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4543//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4543//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4543//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4543//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4543//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4543//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4543//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4543//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13586623" author="hadoopqa" created="Tue, 26 Feb 2013 02:01:36 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12570901/0001-HBASE-7934-TableMapReduceUtil-include-module-depende.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12570901/0001-HBASE-7934-TableMapReduceUtil-include-module-depende.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4544//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4544//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4544//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4544//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4544//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4544//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4544//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4544//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4544//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4544//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4544//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4544//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4544//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4544//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4544//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4544//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4544//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4544//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4544//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4544//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13587385" author="ndimiduk" created="Tue, 26 Feb 2013 18:49:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mcorgan&quot; class=&quot;user-hover&quot; rel=&quot;mcorgan&quot;&gt;Matt Corgan&lt;/a&gt; Can I get some eyes on this patch before 0.95 branch diverts drastically from trunk?&lt;/p&gt;</comment>
                            <comment id="13587396" author="enis" created="Tue, 26 Feb 2013 18:59:08 +0000"  >&lt;p&gt;Thinking about this, and Elliot&apos;s comments on hbase-client, I am not sure we need all modules from the client code. The thing is, unless we are writing HFile&apos;s, we don&apos;t really even need the hbase-server classes and prefix-tree. And we will need prefix tree only if we are going to encode with it. &lt;/p&gt;</comment>
                            <comment id="13587420" author="ndimiduk" created="Tue, 26 Feb 2013 19:20:17 +0000"  >&lt;p&gt;I agree that we should minimize the weight added to the user&apos;s jobs. On the other hand, if someone wants to use some part of HBase API, I think they shouldn&apos;t have to resolve dependencies manually the first time they run on a real cluster. Why force the user to pretend to be maven when we can do it for them. Better still would be some kind of automatic dependency resolution, but...&lt;/p&gt;

&lt;p&gt;I think the logic of walking the dependency graph to decide precisely which jars are necessary is too complex vs the pain suffered by a user for always including everything that might be needed. As was pointed out, this operation isn&apos;t recursive, so it doesn&apos;t have the potential of polluting the user&apos;s classpath with incompatible versions of 3rd party jars. Worse case scenario, they get hbase-foo.jar when they didn&apos;t need it. So long as the list of dependencies require by hbase doesn&apos;t stray far from those provided by the hadoop runtime, this should be painless to the consumer.&lt;/p&gt;</comment>
                            <comment id="13587455" author="stack" created="Tue, 26 Feb 2013 19:52:42 +0000"  >&lt;p&gt;I don&apos;t like it but I&apos;ll +1 it because of the usability argument and while we are absent a project that is trying to minimize includes MR&apos;ing.&lt;/p&gt;</comment>
                            <comment id="13587462" author="stack" created="Tue, 26 Feb 2013 19:55:09 +0000"  >&lt;p&gt;Hmm... having second thoughts but still arriving at +1.  Only odd-man-out is the prefix-tree include.  We have an issue to address its inclusion (and the fault is not with prefix-tree, it is with datablockencoder which would load all mentioned encoders rather than do lazy loading)&lt;/p&gt;</comment>
                            <comment id="13587493" author="mcorgan" created="Tue, 26 Feb 2013 20:20:53 +0000"  >&lt;p&gt;I&apos;d say it&apos;s fine as a short term fix if you need to get this issue going.  Real fix for prefix-tree, like stack said, is to intruduce a lazy-provider style instantiation of each encoder in DataBlockEncoding.&lt;/p&gt;</comment>
                            <comment id="13587496" author="ndimiduk" created="Tue, 26 Feb 2013 20:25:11 +0000"  >&lt;p&gt;I can exclude prefix-tree for now and open a ticket for adding it back, pending completion of [insert your ticket here]. Your call, chief.&lt;/p&gt;

&lt;p&gt;I&apos;m terrified to even bring it up, but &lt;a href=&quot;http://www.eclipse.org/aether/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Aether&lt;/a&gt; claims to provide dependency graph resolution. I&apos;ve not used it directly; I&apos;m only aware of it via the clojure library &lt;a href=&quot;https://github.com/cemerick/pomegranate&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;pomegranate&lt;/a&gt;. I have no idea if it can inspect bytecode or if it&apos;s purely a client to maven.&lt;/p&gt;</comment>
                            <comment id="13587540" author="mcorgan" created="Tue, 26 Feb 2013 20:57:49 +0000"  >&lt;p&gt;My understanding of Elliott&apos;s findings with hbase-client is that you&apos;ll need to add it for now because something will instantiate the DataBlockEncoding enum which will try instantiate the prefix-tree using reflection.  If the jar isn&apos;t there at runtime you&apos;ll hit ClassNotFoundException&lt;/p&gt;</comment>
                            <comment id="13587542" author="mcorgan" created="Tue, 26 Feb 2013 20:59:07 +0000"  >&lt;p&gt;Linking to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7936&quot; title=&quot;Undo prefix-tree module as dependency for mapreduce and for DataBlockEncoding&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7936&quot;&gt;&lt;del&gt;HBASE-7936&lt;/del&gt;&lt;/a&gt; which may eliminate the need to include the hbase-prefix-tree.jar&lt;/p&gt;</comment>
                            <comment id="13587548" author="enis" created="Tue, 26 Feb 2013 21:02:57 +0000"  >&lt;p&gt;Ok, I&apos;m gonna commit this one to trunk, and 0.95 then. &lt;/p&gt;</comment>
                            <comment id="13587793" author="enis" created="Wed, 27 Feb 2013 00:37:58 +0000"  >&lt;p&gt;Committed this. Thanks Nick. &lt;/p&gt;</comment>
                            <comment id="13587805" author="stack" created="Wed, 27 Feb 2013 00:48:38 +0000"  >&lt;p&gt;What &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mcorgan&quot; class=&quot;user-hover&quot; rel=&quot;mcorgan&quot;&gt;Matt Corgan&lt;/a&gt; said. +1 on the commit.&lt;/p&gt;</comment>
                            <comment id="13587923" author="hudson" created="Wed, 27 Feb 2013 02:30:46 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3901 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3901/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3901/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7934&quot; title=&quot;TableMapReduceUtil doesn&amp;#39;t include all dependency jars in new modular build&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7934&quot;&gt;&lt;del&gt;HBASE-7934&lt;/del&gt;&lt;/a&gt; TableMapReduceUtil doesn&apos;t include all dependency jars in new modular build (Nick Dimiduk) (Revision 1450541)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
enis : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/pom.xml&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13587947" author="hudson" created="Wed, 27 Feb 2013 03:05:17 +0000"  >&lt;p&gt;Integrated in hbase-0.95 #3 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95/3/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95/3/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7934&quot; title=&quot;TableMapReduceUtil doesn&amp;#39;t include all dependency jars in new modular build&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7934&quot;&gt;&lt;del&gt;HBASE-7934&lt;/del&gt;&lt;/a&gt; TableMapReduceUtil doesn&apos;t include all dependency jars in new modular build (Nick Dimiduk) (Revision 1450548)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
enis : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/pom.xml&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13588275" author="hudson" created="Wed, 27 Feb 2013 12:57:24 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #422 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/422/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/422/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7934&quot; title=&quot;TableMapReduceUtil doesn&amp;#39;t include all dependency jars in new modular build&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7934&quot;&gt;&lt;del&gt;HBASE-7934&lt;/del&gt;&lt;/a&gt; TableMapReduceUtil doesn&apos;t include all dependency jars in new modular build (Nick Dimiduk) (Revision 1450541)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
enis : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/pom.xml&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13588304" author="hudson" created="Wed, 27 Feb 2013 13:12:53 +0000"  >&lt;p&gt;Integrated in hbase-0.95-on-hadoop2 #2 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95-on-hadoop2/2/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95-on-hadoop2/2/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7934&quot; title=&quot;TableMapReduceUtil doesn&amp;#39;t include all dependency jars in new modular build&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7934&quot;&gt;&lt;del&gt;HBASE-7934&lt;/del&gt;&lt;/a&gt; TableMapReduceUtil doesn&apos;t include all dependency jars in new modular build (Nick Dimiduk) (Revision 1450548)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
enis : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/pom.xml&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13775231" author="stack" created="Mon, 23 Sep 2013 18:31:02 +0000"  >&lt;p&gt;Marking closed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12634028">HBASE-7936</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12634033">HBASE-7938</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12630493">HBASE-7747</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12570901" name="0001-HBASE-7934-TableMapReduceUtil-include-module-depende.patch" size="2545" author="ndimiduk" created="Tue, 26 Feb 2013 00:56:20 +0000"/>
                            <attachment id="12570893" name="0001-HBASE-7934-TableMapReduceUtil-include-module-depende.patch" size="3132" author="ndimiduk" created="Tue, 26 Feb 2013 00:04:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 25 Feb 2013 23:19:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>314511</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1i9un:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>314855</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>