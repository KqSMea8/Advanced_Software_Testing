<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:18:03 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-10879/HBASE-10879.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-10879] user_permission shell command on namespace doesn&apos;t work</title>
                <link>https://issues.apache.org/jira/browse/HBASE-10879</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Currently user_permission command on namespace, e.g.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
user_permission &apos;@ns&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;would result in the following exception:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Exception `NameError&apos; at /usr/lib/hbase/lib/ruby/hbase/security.rb:170 - no method &apos;getUserPermissions&apos; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; arguments (org.apache.hadoop.hbase.protobuf.generated.          AccessControlProtos.AccessControlService.BlockingStub,org.jruby.java.proxies.ArrayJavaProxy) on Java::OrgApacheHadoopHbaseProtobuf::ProtobufUtil

ERROR: no method &apos;getUserPermissions&apos; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; arguments (org.apache.hadoop.hbase.protobuf.generated.AccessControlProtos.AccessControlService.BlockingStub,org.jruby.java.       proxies.ArrayJavaProxy) on Java::OrgApacheHadoopHbaseProtobuf::ProtobufUtil
Backtrace: /usr/lib/hbase/lib/ruby/hbase/security.rb:170:in `user_permission&apos;
           /usr/lib/hbase/lib/ruby/shell/commands/user_permission.rb:39:in `command&apos;
           org/jruby/RubyKernel.java:2109:in `send&apos;
           /usr/lib/hbase/lib/ruby/shell/commands.rb:34:in `command_safe&apos;
           /usr/lib/hbase/lib/ruby/shell/commands.rb:91:in `translate_hbase_exceptions&apos;
           /usr/lib/hbase/lib/ruby/shell/commands.rb:34:in `command_safe&apos;
           /usr/lib/hbase/lib/ruby/shell.rb:127:in `internal_command&apos;
           /usr/lib/hbase/lib/ruby/shell.rb:119:in `command&apos;
           (eval):2:in `user_permission&apos;
           (hbase):1:in `evaluate&apos;
           org/jruby/RubyKernel.java:1112:in `eval&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12705809">HBASE-10879</key>
            <summary>user_permission shell command on namespace doesn&apos;t work</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yuzhihong@gmail.com">Ted Yu</assignee>
                                    <reporter username="yuzhihong@gmail.com">Ted Yu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 31 Mar 2014 22:51:40 +0000</created>
                <updated>Tue, 15 Mar 2016 03:15:21 +0000</updated>
                            <resolved>Tue, 1 Apr 2014 16:12:10 +0000</resolved>
                                                    <fixVersion>0.98.2</fixVersion>
                    <fixVersion>0.96.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="13955842" author="yuzhihong@gmail.com" created="Mon, 31 Mar 2014 22:53:19 +0000"  >&lt;p&gt;With attached patch,&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hbase(main):004:0&amp;gt; grant &apos;oozie&apos;, &apos;RW&apos;, &apos;@ns&apos;
0 row(s) in 0.1930 seconds

hbase(main):005:0&amp;gt; user_permission &apos;@ns&apos;
User                                         Table,Family,Qualifier:Permission
 oozie                                       ,,: [Permission: actions=READ,WRITE]
1 row(s) in 0.0990 seconds
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13955948" author="hadoopqa" created="Tue, 1 Apr 2014 00:40:29 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12637940/10879-v1.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12637940/10879-v1.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12637940&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9146//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9146//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9146//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9146//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9146//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9146//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9146//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9146//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9146//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9146//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9146//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9146//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9146//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9146//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9146//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9146//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9146//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9146//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9146//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9146//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9146//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9146//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13956047" author="anoop.hbase" created="Tue, 1 Apr 2014 03:03:07 +0000"  >&lt;p&gt;nit&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+   * @param t namespace name
+   * @&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; ServiceException
+   */
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; List&amp;lt;UserPermission&amp;gt; getUserPermissions(
+      AccessControlService.BlockingInterface protocol,
+      &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] namespace) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; ServiceException {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Pls correct the javadoc&lt;/p&gt;</comment>
                            <comment id="13956063" author="anoop.hbase" created="Tue, 1 Apr 2014 03:29:43 +0000"  >&lt;p&gt;V2  LGTM&lt;br/&gt;
I think we need patch for 96 also.&lt;/p&gt;</comment>
                            <comment id="13956106" author="hadoopqa" created="Tue, 1 Apr 2014 04:54:04 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12637990/10879-v2.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12637990/10879-v2.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12637990&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.master.TestMasterNoCluster&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9151//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9151//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9151//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9151//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9151//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9151//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9151//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9151//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9151//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9151//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9151//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9151//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9151//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9151//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9151//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9151//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9151//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9151//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9151//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9151//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9151//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9151//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13956114" author="ram_krish" created="Tue, 1 Apr 2014 05:17:32 +0000"  >&lt;p&gt;+1 on patch.&lt;/p&gt;</comment>
                            <comment id="13956199" author="apurtell" created="Tue, 1 Apr 2014 07:48:03 +0000"  >&lt;p&gt;+1 for trunk and 0.98&lt;/p&gt;

&lt;p&gt;Ping &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; - should go into 0.96 too, another namespace nit&lt;/p&gt;</comment>
                            <comment id="13956583" author="stack" created="Tue, 1 Apr 2014 14:51:14 +0000"  >&lt;p&gt;+1 for 0.96&lt;/p&gt;</comment>
                            <comment id="13956704" author="yuzhihong@gmail.com" created="Tue, 1 Apr 2014 16:12:10 +0000"  >&lt;p&gt;Thanks for the reviews.&lt;/p&gt;</comment>
                            <comment id="13956914" author="hudson" created="Tue, 1 Apr 2014 19:07:18 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98 #260 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/260/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/260/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10879&quot; title=&quot;user_permission shell command on namespace doesn&amp;#39;t work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10879&quot;&gt;&lt;del&gt;HBASE-10879&lt;/del&gt;&lt;/a&gt; user_permission shell command on namespace doesn&apos;t work (tedyu: rev 1583724)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-shell/src/main/ruby/hbase/security.rb&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13956955" author="hudson" created="Tue, 1 Apr 2014 19:48:33 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.98-on-Hadoop-1.1 #244 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/244/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/244/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10879&quot; title=&quot;user_permission shell command on namespace doesn&amp;#39;t work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10879&quot;&gt;&lt;del&gt;HBASE-10879&lt;/del&gt;&lt;/a&gt; user_permission shell command on namespace doesn&apos;t work (tedyu: rev 1583724)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-shell/src/main/ruby/hbase/security.rb&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13956960" author="hudson" created="Tue, 1 Apr 2014 19:55:02 +0000"  >&lt;p&gt;SUCCESS: Integrated in hbase-0.96 #373 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.96/373/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.96/373/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10879&quot; title=&quot;user_permission shell command on namespace doesn&amp;#39;t work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10879&quot;&gt;&lt;del&gt;HBASE-10879&lt;/del&gt;&lt;/a&gt; user_permission shell command on namespace doesn&apos;t work (tedyu: rev 1583727)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-shell/src/main/ruby/hbase/security.rb&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13957115" author="hudson" created="Tue, 1 Apr 2014 22:56:53 +0000"  >&lt;p&gt;SUCCESS: Integrated in hbase-0.96-hadoop2 #257 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.96-hadoop2/257/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.96-hadoop2/257/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10879&quot; title=&quot;user_permission shell command on namespace doesn&amp;#39;t work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10879&quot;&gt;&lt;del&gt;HBASE-10879&lt;/del&gt;&lt;/a&gt; user_permission shell command on namespace doesn&apos;t work (tedyu: rev 1583727)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-shell/src/main/ruby/hbase/security.rb&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15155540" author="water" created="Sat, 20 Feb 2016 10:15:16 +0000"  >&lt;p&gt;Hi Ted, I am working on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14818&quot; title=&quot;user_permission does not list namespace permissions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14818&quot;&gt;&lt;del&gt;HBASE-14818&lt;/del&gt;&lt;/a&gt; and it is based on the function called getUserPermissions() contributed by you in this JIRA. I found that the request sent is with type = Namespace, but the response returned contains Global permissions. I am not sure if I understand it correctly or it might be a bug. Could you please review my findings follow:&lt;/p&gt;

&lt;p&gt;It is in hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java, from line 2380, and I made some comments into it&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; 
 /**
   * A utility used to get permissions &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; selected namespace.
   * &amp;lt;p&amp;gt;
   * It&apos;s also called by the shell, in &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; you want to find references.
   *
   * @param protocol the AccessControlService protocol proxy
   * @param namespace name of the namespace
   * @&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; ServiceException
   */
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; List&amp;lt;UserPermission&amp;gt; getUserPermissions(
      AccessControlService.BlockingInterface protocol,
      &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] namespace) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; ServiceException {
    AccessControlProtos.GetUserPermissionsRequest.Builder builder =
      AccessControlProtos.GetUserPermissionsRequest.newBuilder();
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (namespace != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
      builder.setNamespaceName(ByteStringer.wrap(namespace)); 
    }
    builder.setType(AccessControlProtos.Permission.Type.Namespace);  &lt;span class=&quot;code-comment&quot;&gt;//builder is set with type = Namespace
&lt;/span&gt;    AccessControlProtos.GetUserPermissionsRequest request = builder.build();  &lt;span class=&quot;code-comment&quot;&gt;//I printed the request, its type is Namespace, which is correct.
&lt;/span&gt;    AccessControlProtos.GetUserPermissionsResponse response =  
       protocol.getUserPermissions(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, request);
/* I printed the response, it contains Global permissions, as below, not a Namespace permission. Why?

user_permission {
  user: &lt;span class=&quot;code-quote&quot;&gt;&quot;a1&quot;&lt;/span&gt;
  permission {
    type: Global
    global_permission {
      action: READ
      action: WRITE
      action: ADMIN
      action: EXEC
      action: CREATE
    }
  }
}

AccessControlProtos.GetUserPermissionsRequest has a member called type_ to store the type, but AccessControlProtos.GetUserPermissionsResponse does not.
*/
     
    List&amp;lt;UserPermission&amp;gt; perms = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;UserPermission&amp;gt;(response.getUserPermissionCount());
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (AccessControlProtos.UserPermission perm: response.getUserPermissionList()) {
      perms.add(ProtobufUtil.toUserPermission(perm));  &lt;span class=&quot;code-comment&quot;&gt;// (1)
&lt;/span&gt;    }
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; perms;
  }

The perms returned are all Global user permissions. But I feel that in &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; function, you might would like to &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; a list of Namespace user permission.
If it is the &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt;, the line with &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-comment&quot;&gt;//(1)&quot;&lt;/span&gt; above can be changed from
&lt;/span&gt;from
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;perms.add(ProtobufUtil.toUserPermission(perm));&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
to
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;perms.add(new UserPermission(perm.getUser().toByteArray(), Bytes.toString(namespace), toTablePermission(perm.getPermission()).getActions()));&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ProtobufUtil.toUserPermission() calls toTablePermission() which acts differently according to Global/Namespace/Table user permission types. If perm sent to toTablePermission() has type=Namespace set, the namespace field can be set. But the permissions returned by response.getUserPermissionList() has type=Global.&lt;/p&gt;

&lt;p&gt;It is quite wired that I grant a Namespace user permission, and then send a getUserPermission request which is also with type=Namespace,  but the response returned contains a list of Global user permission. Do you know why?&lt;/p&gt;</comment>
                            <comment id="15155543" author="water" created="Sat, 20 Feb 2016 10:22:41 +0000"  >&lt;p&gt;Need to re-post to correct some errors in format:&lt;/p&gt;

&lt;p&gt;Hi Ted, I am working on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14818&quot; title=&quot;user_permission does not list namespace permissions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14818&quot;&gt;&lt;del&gt;HBASE-14818&lt;/del&gt;&lt;/a&gt; and it is based on the function called getUserPermissions() contributed by you in this JIRA. I found that the request sent is with type = Namespace, but the response returned contains Global permissions. I am not sure if I understand it correctly or it might be a bug. Could you please review my findings follow:&lt;/p&gt;

&lt;p&gt;It is in hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java, from line 2380, and I made some comments into it&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 /**
   * A utility used to get permissions &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; selected namespace.
   * &amp;lt;p&amp;gt;
   * It&apos;s also called by the shell, in &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; you want to find references.
   *
   * @param protocol the AccessControlService protocol proxy
   * @param namespace name of the namespace
   * @&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; ServiceException
   */
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; List&amp;lt;UserPermission&amp;gt; getUserPermissions(
      AccessControlService.BlockingInterface protocol,
      &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] namespace) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; ServiceException {
    AccessControlProtos.GetUserPermissionsRequest.Builder builder =
      AccessControlProtos.GetUserPermissionsRequest.newBuilder();
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (namespace != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
      builder.setNamespaceName(ByteStringer.wrap(namespace)); 
    }
    builder.setType(AccessControlProtos.Permission.Type.Namespace);  &lt;span class=&quot;code-comment&quot;&gt;//builder is set with type = Namespace
&lt;/span&gt;    AccessControlProtos.GetUserPermissionsRequest request = builder.build();  &lt;span class=&quot;code-comment&quot;&gt;//I printed the request, its type is Namespace, which is correct.
&lt;/span&gt;    AccessControlProtos.GetUserPermissionsResponse response =  
       protocol.getUserPermissions(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, request);
/* I printed the response, it contains Global permissions, as below, not a Namespace permission. Why?

user_permission {
  user: &lt;span class=&quot;code-quote&quot;&gt;&quot;a1&quot;&lt;/span&gt;
  permission {
    type: Global
    global_permission {
      action: READ
      action: WRITE
      action: ADMIN
      action: EXEC
      action: CREATE
    }
  }
}

AccessControlProtos.GetUserPermissionsRequest has a member called type_ to store the type, but AccessControlProtos.GetUserPermissionsResponse does not.
*/
     
    List&amp;lt;UserPermission&amp;gt; perms = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;UserPermission&amp;gt;(response.getUserPermissionCount());
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (AccessControlProtos.UserPermission perm: response.getUserPermissionList()) {
      perms.add(ProtobufUtil.toUserPermission(perm));  &lt;span class=&quot;code-comment&quot;&gt;// (1)
&lt;/span&gt;    }
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; perms;
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The perms returned are all Global user permissions. But I feel that in this function, you might would like to return a list of Namespace user permission.&lt;br/&gt;
If it is the case, the line with &quot;//(1)&quot; above can be changed from&lt;br/&gt;
from&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
perms.add(ProtobufUtil.toUserPermission(perm));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
perms.add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; UserPermission(perm.getUser().toByteArray(), Bytes.toString(namespace), toTablePermission(perm.getPermission()).getActions()));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ProtobufUtil.toUserPermission() calls toTablePermission(), which also does new UserPermission according to Global/Namespace/Table user permission types. If perm sent to toTablePermission() has type=Namespace set, the namespace field can be set. But the permissions returned by response.getUserPermissionList() have type=Global.&lt;/p&gt;

&lt;p&gt;It is quite wired that I grant a Namespace user permission, and then send a getUserPermission request which is also with type=Namespace, but the response returned contains a list of Global user permission. Do you know why?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12950161">HBASE-15465</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12637940" name="10879-v1.txt" size="2611" author="yuzhihong@gmail.com" created="Mon, 31 Mar 2014 22:53:19 +0000"/>
                            <attachment id="12637990" name="10879-v2.txt" size="2577" author="yuzhihong@gmail.com" created="Tue, 1 Apr 2014 03:10:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 1 Apr 2014 00:40:29 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>384133</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            42 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1u6fb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>384401</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>