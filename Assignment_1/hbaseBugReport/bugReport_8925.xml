<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:59:48 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-8925/HBASE-8925.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-8925] [replication] Allow lazy RS to help overwhelmed RS</title>
                <link>https://issues.apache.org/jira/browse/HBASE-8925</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Sometimes in usual course of things, one of the regionservers gets waaaaay behind replicating its queue; easily build-ups of 40-50 files over just a day (running YCSB at the same time). However, this is just for a single RS - others don&apos;t have anything to replicate. We can manually get around this by moving the region load away from the overloaded server (and get smarter about this by writing our own load balancer). However, moving regions around just to catch up the replication seems a bit heavyweight.&lt;/p&gt;

&lt;p&gt;From this thread on the dev list: &lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/hbase-dev/201211.mbox/%3CCAFLnt_qj1stL=vre5AbWqawpkwKG7LDebwCyhddkBQvX4UpaAg@mail.gmail.com%3E&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://mail-archives.apache.org/mod_mbox/hbase-dev/201211.mbox/%3CCAFLnt_qj1stL=vre5AbWqawpkwKG7LDebwCyhddkBQvX4UpaAg@mail.gmail.com%3E&lt;/a&gt;&lt;br/&gt;
it seems like we can already get out-of-order updates for a table on the target cluster. Given this is already the behavior (though not common), we could allow a &apos;lazy&apos; RS to have a secondary log to replicate when it has time. &lt;/p&gt;

&lt;p&gt;This adds a bit more complexity around who owns which log for replication, but could dramatically increase throughput as you aren&apos;t bottle-necked by the single slow host.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12657179">HBASE-8925</key>
            <summary>[replication] Allow lazy RS to help overwhelmed RS</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jesse_yates">Jesse Yates</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Jul 2013 23:57:30 +0000</created>
                <updated>Thu, 11 Jul 2013 23:32:51 +0000</updated>
                                            <version>0.98.0</version>
                    <version>0.95.2</version>
                    <version>0.94.10</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13706422" author="jdcryans" created="Thu, 11 Jul 2013 23:16:49 +0000"  >&lt;p&gt;Yeah that&apos;s a good problem I also had in the past. Some tables were uber write intensive (ICV) and if too many regions gathered on one RS it would start lagging, then I&apos;d move all of them by hand elsewhere. Having per-region metrics in 0.94 really helped with that.&lt;/p&gt;

&lt;p&gt;Could we also consider having the same region server replication in multiple thread? Would that be easier than doing moving chunks of queues around?&lt;/p&gt;</comment>
                            <comment id="13706434" author="jesse_yates" created="Thu, 11 Jul 2013 23:27:30 +0000"  >&lt;p&gt;I &lt;em&gt;think&lt;/em&gt; part of the problem is also that the server gets hit with a bunch of compactions, limiting its available IO; not entirely confirmed, but it seems somewhat correlated. &lt;/p&gt;

&lt;p&gt;It would be easier to have multiple threads to manage a single server&apos;s queue and could see some good speedup, unless its bandwidth to the machine that is the limiting factor. I&apos;ll run some more tests (or rather, get &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sameerv&quot; class=&quot;user-hover&quot; rel=&quot;sameerv&quot;&gt;Sameer Vaishampayan&lt;/a&gt; to run them - he was the one who has been doing all the actual testing, I&apos;m just the debugging monkey) to see if we can confirm either way.&lt;/p&gt;</comment>
                            <comment id="13706438" author="jdcryans" created="Thu, 11 Jul 2013 23:29:17 +0000"  >&lt;p&gt;If bandwidth is the problem then you could make it worse if the other RSs are also pulling data from that busy machine.&lt;/p&gt;</comment>
                            <comment id="13706450" author="jesse_yates" created="Thu, 11 Jul 2013 23:32:51 +0000"  >&lt;p&gt;Assuming they are on that machine, that&apos;s definitely the case. But a single RS failure could cause a large massive queue backup (if that one is behind), in which case the files probably aren&apos;t on that machine.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 11 Jul 2013 23:16:49 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>337402</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 23 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1m73z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>337725</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>