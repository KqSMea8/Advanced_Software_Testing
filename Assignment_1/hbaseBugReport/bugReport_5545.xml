<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:28:44 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5545/HBASE-5545.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5545] region can&apos;t be opened for a long time. Because the creating File failed.</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5545</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Scenario:&lt;br/&gt;
------------&lt;br/&gt;
1. File is created &lt;br/&gt;
2. But while writing data, all datanodes might have crashed. So writing data will fail.&lt;br/&gt;
3. Now even if close is called in finally block, close also will fail and throw the Exception because writing data failed.&lt;br/&gt;
4. After this if RS try to create the same file again, then AlreadyBeingCreatedException will come.&lt;/p&gt;

&lt;p&gt;Suggestion to handle this scenario.&lt;br/&gt;
---------------------------&lt;br/&gt;
1. Check for the existence of the file, if exists delete the file and create new file. &lt;/p&gt;

&lt;p&gt;Here delete call for the file will not check whether the file is open or closed.&lt;/p&gt;

&lt;p&gt;Overwrite Option:&lt;br/&gt;
----------------&lt;br/&gt;
1. Overwrite option will be applicable if you are trying to overwrite a closed file.&lt;br/&gt;
2. If the file is not closed, then even with overwrite option Same AlreadyBeingCreatedException will be thrown.&lt;br/&gt;
This is the expected behaviour to avoid the Multiple clients writing to same file.&lt;/p&gt;


&lt;p&gt;Region server logs:&lt;/p&gt;

&lt;p&gt;org.apache.hadoop.ipc.RemoteException: org.apache.hadoop.hdfs.protocol.AlreadyBeingCreatedException: failed to create file /hbase/test1/12c01902324218d14b17a5880f24f64b/.tmp/.regioninfo for DFSClient_hb_rs_158-1-131-48,20020,1331107668635_1331107669061_-252463556_25 on client 158.1.132.19 because current leaseholder is trying to recreate file.&lt;br/&gt;
at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.recoverLeaseInternal(FSNamesystem.java:1570)&lt;br/&gt;
at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.startFileInternal(FSNamesystem.java:1440)&lt;br/&gt;
at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.startFile(FSNamesystem.java:1382)&lt;br/&gt;
at org.apache.hadoop.hdfs.server.namenode.NameNode.create(NameNode.java:658)&lt;br/&gt;
at sun.reflect.GeneratedMethodAccessor9.invoke(Unknown Source)&lt;br/&gt;
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:547)&lt;br/&gt;
at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1137)&lt;br/&gt;
at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1133)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:396)&lt;br/&gt;
at org.apache.hadoop.ipc.Server$Handler.run(Server.java:1131)&lt;/p&gt;

&lt;p&gt;at org.apache.hadoop.ipc.Client.call(Client.java:961)&lt;br/&gt;
at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:245)&lt;br/&gt;
at $Proxy6.create(Unknown Source)&lt;br/&gt;
at sun.reflect.GeneratedMethodAccessor14.invoke(Unknown Source)&lt;br/&gt;
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
at $Proxy6.create(Unknown Source)&lt;br/&gt;
at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.&amp;lt;init&amp;gt;(DFSClient.java:3643)&lt;br/&gt;
at org.apache.hadoop.hdfs.DFSClient.create(DFSClient.java:778)&lt;br/&gt;
at org.apache.hadoop.hdfs.DistributedFileSystem.create(DistributedFileSystem.java:364)&lt;br/&gt;
at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:630)&lt;br/&gt;
at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:611)&lt;br/&gt;
at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:518)&lt;br/&gt;
at org.apache.hadoop.hbase.regionserver.HRegion.checkRegioninfoOnFilesystem(HRegion.java:424)&lt;br/&gt;
at org.apache.hadoop.hbase.regionserver.HRegion.initialize(HRegion.java:340)&lt;br/&gt;
at org.apache.hadoop.hbase.regionserver.HRegion.openHRegion(HRegion.java:2672)&lt;br/&gt;
at org.apache.hadoop.hbase.regionserver.HRegion.openHRegion(HRegion.java:2658)&lt;br/&gt;
at org.apache.hadoop.hbase.regionserver.handler.OpenRegionHandler.openRegion(OpenRegionHandler.java:330)&lt;br/&gt;
at org.apache.hadoop.hbase.regionserver.handler.OpenRegionHandler.process(OpenRegionHandler.java:116)&lt;br/&gt;
at org.apache.hadoop.hbase.executor.EventHandler.run(EventHandler.java:158)&lt;br/&gt;
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)&lt;br/&gt;
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:662)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-03-07 20:51:45,858&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;WARN &amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;RS_OPEN_REGION-158-1-131-48,20020,1331107668635-23&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;com.huawei.isap.ump.ha.client.RPCRetryAndSwitchInvoker 131&amp;#93;&lt;/span&gt; Retrying the method call: public abstract void org.apache.hadoop.hdfs.protocol.ClientProtocol.create(java.lang.String,org.apache.hadoop.fs.permission.FsPermission,java.lang.String,boolean,boolean,short,long) throws java.io.IOException with arguments of length: 7. The exisiting ActiveServerConnection is:&lt;br/&gt;
ActiveServerConnectionInfo:&lt;br/&gt;
Metadata:158-1-131-48/158.1.132.19:9000&lt;br/&gt;
Version:145720623220907&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-03-07 20:51:45,872&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;DEBUG&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;RS_OPEN_REGION-158-1-131-48,20020,1331107668635-20&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.hadoop.hbase.zookeeper.ZKAssign 849&amp;#93;&lt;/span&gt; regionserver:20020-0x135ec32b39e0002-0x135ec32b39e0002 Successfully transitioned node 91bf3e6f8adb2e4b335f061036353126 from M_ZK_REGION_OFFLINE to RS_ZK_REGION_OPENING&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-03-07 20:51:45,873&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;DEBUG&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;RS_OPEN_REGION-158-1-131-48,20020,1331107668635-20&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.hadoop.hbase.regionserver.HRegion 2649&amp;#93;&lt;/span&gt; Opening region: REGION =&amp;gt; {NAME =&amp;gt; &apos;test1,00088613810,1331112369360.91bf3e6f8adb2e4b335f061036353126.&apos;, STARTKEY =&amp;gt; &apos;00088613810&apos;, ENDKEY =&amp;gt; &apos;00088613815&apos;, ENCODED =&amp;gt; 91bf3e6f8adb2e4b335f061036353126, TABLE =&amp;gt; {{NAME =&amp;gt; &apos;test1&apos;, FAMILIES =&amp;gt; [&lt;/p&gt;
{NAME =&amp;gt; &apos;value&apos;, BLOOMFILTER =&amp;gt; &apos;NONE&apos;, REPLICATION_SCOPE =&amp;gt; &apos;0&apos;, VERSIONS =&amp;gt; &apos;3&apos;, COMPRESSION =&amp;gt; &apos;GZ&apos;, TTL =&amp;gt; &apos;86400&apos;, BLOCKSIZE =&amp;gt; &apos;655360&apos;, IN_MEMORY =&amp;gt; &apos;false&apos;, BLOCKCACHE =&amp;gt; &apos;true&apos;}
&lt;p&gt;]}}&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-03-07 20:51:45,873&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;DEBUG&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;RS_OPEN_REGION-158-1-131-48,20020,1331107668635-20&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.hadoop.hbase.regionserver.HRegion 316&amp;#93;&lt;/span&gt; Instantiated test1,00088613810,1331112369360.91bf3e6f8adb2e4b335f061036353126.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-03-07 20:51:45,874&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;RS_OPEN_REGION-158-1-131-48,20020,1331107668635-20&amp;#93;&lt;/span&gt; [ &lt;/p&gt;
</description>
                <environment></environment>
        <key id="12545758">HBASE-5545</key>
            <summary>region can&apos;t be opened for a long time. Because the creating File failed.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ram_krish">ramkrishna.s.vasudevan</assignee>
                                    <reporter username="sunnygao">gaojinchao</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Mar 2012 02:17:53 +0000</created>
                <updated>Fri, 12 Oct 2012 05:35:00 +0000</updated>
                            <resolved>Wed, 18 Apr 2012 20:55:20 +0000</resolved>
                                    <version>0.90.6</version>
                                    <fixVersion>0.90.7</fixVersion>
                    <fixVersion>0.92.2</fixVersion>
                    <fixVersion>0.94.0</fixVersion>
                                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13225815" author="ram_krish" created="Fri, 9 Mar 2012 04:00:21 +0000"  >&lt;p&gt;@Gao&lt;br/&gt;
Thanks for bringing in this. Also we need to see any other place like compaction, flush (incase similar scenarios) are there&lt;br/&gt;
Because every where we first create a file in tmp .  Then rename.&lt;br/&gt;
Also changing the version to 0.92.2&lt;/p&gt;</comment>
                            <comment id="13255441" author="ram_krish" created="Tue, 17 Apr 2012 10:18:39 +0000"  >&lt;p&gt;@Gao&lt;br/&gt;
Are you working on this patch? &lt;/p&gt;</comment>
                            <comment id="13255642" author="ram_krish" created="Tue, 17 Apr 2012 15:27:54 +0000"  >&lt;p&gt;@Lars&lt;br/&gt;
Do you mind taking this into 0.94.0? Though it exists in previous versions!!&lt;/p&gt;</comment>
                            <comment id="13255714" author="lhofhansl" created="Tue, 17 Apr 2012 16:52:16 +0000"  >&lt;p&gt;If this gets done before &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5782&quot; title=&quot;Edits can be appended out of seqid order since HBASE-4487&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5782&quot;&gt;&lt;del&gt;HBASE-5782&lt;/del&gt;&lt;/a&gt; I&apos;ll pull it in, otherwise I don&apos;t think I should hold up the release for this. Sounds good?&lt;/p&gt;</comment>
                            <comment id="13255768" author="ram_krish" created="Tue, 17 Apr 2012 17:54:14 +0000"  >&lt;p&gt;Patch for 0.94.&lt;/p&gt;</comment>
                            <comment id="13255779" author="lhofhansl" created="Tue, 17 Apr 2012 18:02:44 +0000"  >&lt;p&gt;+1 on patch. I assume there no strange race conditions in this part of the code.&lt;/p&gt;</comment>
                            <comment id="13255780" author="zhihyu@ebaysf.com" created="Tue, 17 Apr 2012 18:04:08 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    &lt;span class=&quot;code-comment&quot;&gt;// in the .tmp directory then on next time creation we will be getting&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Should read &apos;then the next creation ...&apos;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      fs.delete(tmpPath, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Please check the return value from fs.delete().&lt;/p&gt;</comment>
                            <comment id="13255781" author="umamaheswararao" created="Tue, 17 Apr 2012 18:04:37 +0000"  >&lt;p&gt;If that is the case, why can&apos;t we create the file with overwrite flag as true?. It will automatically deletes the file if exists right.&lt;/p&gt;</comment>
                            <comment id="13255824" author="hadoopqa" created="Tue, 17 Apr 2012 18:53:27 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12522989/HBASE-5545.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12522989/HBASE-5545.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 4 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1553//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1553//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1553//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1553//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1553//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1553//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13256174" author="ram_krish" created="Wed, 18 Apr 2012 03:39:12 +0000"  >&lt;p&gt;@Uma&lt;br/&gt;
1. Overwrite option will be applicable if you are trying to overwrite a closed file.&lt;br/&gt;
2. If the file is not closed, then even with overwrite option Same AlreadyBeingCreatedException will be thrown.&lt;br/&gt;
This is the expected behaviour to avoid the Multiple clients writing to same file.&lt;/p&gt;

&lt;p&gt;The problem can come if the close of the first create failed.  so even if we use overwrite option it does not work.&lt;br/&gt;
@Ted&lt;br/&gt;
Return value in this case may not help us i feel.  If the delete failed in normal case the create will be successful if the prev time the file was closed normally.  &lt;br/&gt;
What you feel Ted?&lt;/p&gt;</comment>
                            <comment id="13256181" author="ram_krish" created="Wed, 18 Apr 2012 03:54:56 +0000"  >&lt;p&gt;@Lars&lt;br/&gt;
If you will be taking one more day to cut the RC, then by today eve i will give you an updated patch.  May be the delete and exists api can be added in FSUtils.java and use them from there as how create is done?&lt;/p&gt;</comment>
                            <comment id="13256182" author="zhihyu@ebaysf.com" created="Wed, 18 Apr 2012 03:58:23 +0000"  >&lt;p&gt;@Ram:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;If the delete failed in normal case the create will be successful if the prev time the file was closed normally.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;We have a file, closed and isn&apos;t deleted. Can you say more about why creation would succeed ?&lt;/p&gt;</comment>
                            <comment id="13256186" author="ram_krish" created="Wed, 18 Apr 2012 04:09:03 +0000"  >&lt;p&gt;@Zhihong&lt;br/&gt;
The creation will succeed because while creating we pass overwrite as &apos;true&apos;.&lt;/p&gt;</comment>
                            <comment id="13256191" author="umamaheswararao" created="Wed, 18 Apr 2012 04:22:17 +0000"  >&lt;p&gt;@Ram, Ok, in this case, file was not closed as DNs crashed. overwrite flag was already passed as true from FSUtils. So, it can overwrite only closed files. So, your proposal of deletion file if exists should be fine. Delete will succeed in any case.&lt;/p&gt;</comment>
                            <comment id="13256198" author="lhofhansl" created="Wed, 18 Apr 2012 04:33:29 +0000"  >&lt;p&gt;@Ram: Isn&apos;t this a pretty remote corner case?&lt;br/&gt;
If we feel strongly that this should go into 0.94.0, let&apos;s get it in.&lt;/p&gt;</comment>
                            <comment id="13256204" author="ram_krish" created="Wed, 18 Apr 2012 04:50:32 +0000"  >&lt;p&gt;@Lars&lt;br/&gt;
I will upload the patch now.  Even in case the RS goes down just before closing the .tmp file even then we will get the same problem.  I accept it is not a regular one.&lt;/p&gt;

&lt;p&gt;I just thought can give this a try as &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5782&quot; title=&quot;Edits can be appended out of seqid order since HBASE-4487&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5782&quot;&gt;&lt;del&gt;HBASE-5782&lt;/del&gt;&lt;/a&gt; was not yet in.&lt;/p&gt;</comment>
                            <comment id="13256206" author="lhofhansl" created="Wed, 18 Apr 2012 04:58:11 +0000"  >&lt;p&gt;I see. Yep, that is more likely to happen than a DN crash (I think).&lt;br/&gt;
No hurry Ram &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13256210" author="lhofhansl" created="Wed, 18 Apr 2012 05:22:14 +0000"  >&lt;p&gt;2nd patch looks good. I don&apos;t think you needed to the add the FSUtil code, but it cannot hurt.&lt;br/&gt;
fs.delete does not throw if the file does not exist, right?&lt;br/&gt;
Do you want to set recursive to false (just in case somebody changes this around ends up pointing to a directory)... This is a super minor nit.&lt;/p&gt;

&lt;p&gt;+1 on commit if delete does not throw on non-existant file.&lt;/p&gt;</comment>
                            <comment id="13256224" author="hadoopqa" created="Wed, 18 Apr 2012 06:03:05 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12523075/HBASE-5545.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12523075/HBASE-5545.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 6 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.io.hfile.TestLruBlockCache&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1561//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1561//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1561//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1561//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1561//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1561//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13256238" author="ram_krish" created="Wed, 18 Apr 2012 06:26:49 +0000"  >&lt;p&gt;@Lars&lt;br/&gt;
Thanks for your review.&lt;br/&gt;
Just checked, if the file doesnot exists then delete just returns false and no error is thrown.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Do you want to set recursive to false (just in case somebody changes this around ends up pointing to a directory)...&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Here the regioninfo is a file and even if we pass true it will delete only the file.&lt;/p&gt;</comment>
                            <comment id="13256757" author="lhofhansl" created="Wed, 18 Apr 2012 17:59:38 +0000"  >&lt;p&gt;@Ram: yes that is what I meant to say (recursive is not needed, and somebody might misunderstand later and use this to delete tmp directory). Not important.&lt;/p&gt;

&lt;p&gt;+1 on commit as is.&lt;/p&gt;</comment>
                            <comment id="13256938" author="lhofhansl" created="Wed, 18 Apr 2012 20:43:32 +0000"  >&lt;p&gt;I&apos;m going to commit this to 0.94 and 0.96 in the next few minutes.&lt;/p&gt;</comment>
                            <comment id="13256950" author="stack" created="Wed, 18 Apr 2012 20:49:26 +0000"  >&lt;p&gt;The addtions to FSUtils are over the top but +1 on patch &amp;#8211; deleting tmp content on open seems useful.&lt;/p&gt;</comment>
                            <comment id="13256955" author="lhofhansl" created="Wed, 18 Apr 2012 20:55:21 +0000"  >&lt;p&gt;Committed to 0.94 and 0.96&lt;/p&gt;</comment>
                            <comment id="13256981" author="hudson" created="Wed, 18 Apr 2012 21:24:11 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #15 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/15/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/15/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5545&quot; title=&quot;region can&amp;#39;t be opened for a long time. Because the creating File failed.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5545&quot;&gt;&lt;del&gt;HBASE-5545&lt;/del&gt;&lt;/a&gt; region can&apos;t be opened for a long time. Because the creating File failed. (Ram) (Revision 1327676)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/util/FSUtils.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/util/TestFSUtils.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13256996" author="hudson" created="Wed, 18 Apr 2012 21:43:26 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2783 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2783/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2783/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5545&quot; title=&quot;region can&amp;#39;t be opened for a long time. Because the creating File failed.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5545&quot;&gt;&lt;del&gt;HBASE-5545&lt;/del&gt;&lt;/a&gt; region can&apos;t be opened for a long time. Because the creating File failed. (Ram) (Revision 1327677)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/FSUtils.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/TestFSUtils.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13257007" author="hudson" created="Wed, 18 Apr 2012 21:52:27 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #129 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/129/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/129/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5545&quot; title=&quot;region can&amp;#39;t be opened for a long time. Because the creating File failed.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5545&quot;&gt;&lt;del&gt;HBASE-5545&lt;/del&gt;&lt;/a&gt; region can&apos;t be opened for a long time. Because the creating File failed. (Ram) (Revision 1327676)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/util/FSUtils.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/util/TestFSUtils.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13257271" author="hudson" created="Thu, 19 Apr 2012 05:58:45 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-security #175 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-security/175/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-security/175/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5545&quot; title=&quot;region can&amp;#39;t be opened for a long time. Because the creating File failed.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5545&quot;&gt;&lt;del&gt;HBASE-5545&lt;/del&gt;&lt;/a&gt; region can&apos;t be opened for a long time. Because the creating File failed. (Ram) (Revision 1327677)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/FSUtils.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/util/TestFSUtils.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12523075" name="HBASE-5545.patch" size="3687" author="ram_krish" created="Wed, 18 Apr 2012 05:08:05 +0000"/>
                            <attachment id="12522989" name="HBASE-5545.patch" size="927" author="ram_krish" created="Tue, 17 Apr 2012 17:54:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 9 Mar 2012 04:00:21 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>230941</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 35 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0695z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34416</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>