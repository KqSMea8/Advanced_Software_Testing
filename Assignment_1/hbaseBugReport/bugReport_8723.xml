<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:57:55 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-8723/HBASE-8723.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-8723] HBase Intgration tests are failing because of new defaults.</title>
                <link>https://issues.apache.org/jira/browse/HBASE-8723</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Currently any IT tests that have chaos monkey fail because we are not recovering regions before the number of RPC reties is exhausted.&lt;/p&gt;

&lt;p&gt;We should set that default higher.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12652100">HBASE-8723</key>
            <summary>HBase Intgration tests are failing because of new defaults.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="eclark">Elliott Clark</assignee>
                                    <reporter username="eclark">Elliott Clark</reporter>
                        <labels>
                    </labels>
                <created>Mon, 10 Jun 2013 21:59:39 +0000</created>
                <updated>Mon, 23 Sep 2013 19:22:37 +0000</updated>
                            <resolved>Mon, 10 Jun 2013 23:43:44 +0000</resolved>
                                    <version>0.95.0</version>
                                    <fixVersion>0.98.0</fixVersion>
                    <fixVersion>0.95.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13679964" author="eclark" created="Mon, 10 Jun 2013 22:01:40 +0000"  >&lt;p&gt;My hdfs-site has lots of settings that should make fail over faster but from kill to region open is still long enough that we fail it tests:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;?xml version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt;?&amp;gt;
&amp;lt;?xml-stylesheet type=&lt;span class=&quot;code-quote&quot;&gt;&quot;text/xsl&quot;&lt;/span&gt; href=&lt;span class=&quot;code-quote&quot;&gt;&quot;configuration.xsl&quot;&lt;/span&gt;?&amp;gt;
&amp;lt;configuration&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;dfs.datanode.handler.count&amp;lt;/name&amp;gt;
    &amp;lt;!-- &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; 10 --&amp;gt;
    &amp;lt;value&amp;gt;32&amp;lt;/value&amp;gt;
    &amp;lt;description&amp;gt;The number of server threads &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the
    datanode.&amp;lt;/description&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;dfs.namenode.handler.count&amp;lt;/name&amp;gt;
    &amp;lt;!-- &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; 10 --&amp;gt;
    &amp;lt;value&amp;gt;32&amp;lt;/value&amp;gt;
    &amp;lt;description&amp;gt;The number of server threads &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the
    namenode.&amp;lt;/description&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;dfs.block.size&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;134217728&amp;lt;/value&amp;gt;
    &amp;lt;description&amp;gt;The &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; block size &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; files.&amp;lt;/description&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;dfs.datanode.max.xcievers&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;4098&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;dfs.namenode.replication.interval&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;15&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;dfs.balance.bandwidthPerSec&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;10485760&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;fs.checkpoint.dir&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;${hadoop.data.dir1}/dfs/namesecondary&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;dfs.name.dir&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;${hadoop.data.dir0}/dfs/name&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;dfs.data.dir&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;${hadoop.data.dir0}/dfs/data,${hadoop.data.dir1}/dfs/data,${hadoop.data.dir2}/dfs/data,${hadoop.data.dir3}/dfs/data,${hadoop.data.dir4}/dfs/data,${hadoop.data.dir5}/dfs/data,${hadoop.data.dir6}/dfs/data&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;dfs.datanode.socket.write.timeout&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;10000&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;ipc.client.connect.timeout&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;1000&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;ipc.client.connect.max.retries.on.timeouts&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;2&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;dfs.socket.timeout&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;5000&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;dfs.socket.write.timeout&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;5000&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;dfs.domain.socket.path&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/hadoop/dn_socket._PORT&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;dfs.block.local-path-access.user&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;hbase&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
     &amp;lt;name&amp;gt;dfs.client.read.shortcircuit.skip.checksum&amp;lt;/name&amp;gt;
     &amp;lt;value&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;lt;/value&amp;gt;
   &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;dfs.client.file-block-storage-locations.timeout&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;3000&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

&amp;lt;/configuration&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="13679969" author="eclark" created="Mon, 10 Jun 2013 22:04:53 +0000"  >&lt;p&gt;Here&apos;s what I tried and it make the tests go green.&lt;/p&gt;</comment>
                            <comment id="13680040" author="stack" created="Mon, 10 Jun 2013 23:21:38 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;We can work on speeding up MTTR elsewhere.&lt;/p&gt;

&lt;p&gt;Change &apos;Default: 10.&apos; to 30 o commit.&lt;/p&gt;</comment>
                            <comment id="13680045" author="sershe" created="Mon, 10 Jun 2013 23:33:10 +0000"  >&lt;p&gt;how environment-specific is this? I am +1 assuming it&apos;s for a typical cluster&lt;/p&gt;</comment>
                            <comment id="13680047" author="eclark" created="Mon, 10 Jun 2013 23:35:54 +0000"  >&lt;p&gt;Pretty typical clusters unfortunately.  I&apos;ve had this happen consistently on 10 node vm cluster and a 7 node hardware cluster (6 spindles each)&lt;/p&gt;</comment>
                            <comment id="13680048" author="eclark" created="Mon, 10 Jun 2013 23:37:51 +0000"  >&lt;p&gt;Patch that I&apos;ll commit.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Fixed the typo that stack found.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13680053" author="eclark" created="Mon, 10 Jun 2013 23:43:44 +0000"  >&lt;p&gt;Committed to trunk and 0.95&lt;/p&gt;

&lt;p&gt;Thanks for the reviews.&lt;/p&gt;</comment>
                            <comment id="13680054" author="sershe" created="Mon, 10 Jun 2013 23:45:16 +0000"  >&lt;p&gt;sorry, what I meant is cluster with typical failures. Are such lengthy retries only good for CM, or would they actually make sense in some production env&lt;/p&gt;</comment>
                            <comment id="13680059" author="eclark" created="Mon, 10 Jun 2013 23:53:50 +0000"  >&lt;p&gt;I&apos;ve seen the tests fail when just the RS holding meta failed.  So I would say the failures weren&apos;t too un-reasonable.&lt;/p&gt;

&lt;p&gt;We&apos;re seeing failure to open taking ~50 seconds which is outside of what the defaults were (34ish seconds of reties before).&lt;/p&gt;</comment>
                            <comment id="13680167" author="hudson" created="Tue, 11 Jun 2013 03:14:10 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #4171 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4171/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4171/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8723&quot; title=&quot;HBase Intgration tests are failing because of new defaults.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8723&quot;&gt;&lt;del&gt;HBASE-8723&lt;/del&gt;&lt;/a&gt; HBase Intgration tests are failing because of new defaults. (Revision 1491640)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
eclark : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-common/src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-common/src/main/resources/hbase-default.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13680183" author="hudson" created="Tue, 11 Jun 2013 03:38:37 +0000"  >&lt;p&gt;Integrated in hbase-0.95 #235 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95/235/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95/235/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8723&quot; title=&quot;HBase Intgration tests are failing because of new defaults.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8723&quot;&gt;&lt;del&gt;HBASE-8723&lt;/del&gt;&lt;/a&gt; HBase Intgration tests are failing because of new defaults. (Revision 1491645)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
eclark : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-common/src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-common/src/main/resources/hbase-default.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12587142" name="HBASE-8723-0.patch" size="1810" author="eclark" created="Mon, 10 Jun 2013 22:04:53 +0000"/>
                            <attachment id="12587163" name="HBASE-8723-1.patch" size="1881" author="eclark" created="Mon, 10 Jun 2013 23:37:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 10 Jun 2013 23:21:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>332424</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 27 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1lchr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>332753</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Changed default number of RPC reties to 30 to ensure the client doesn&amp;#39;t give up too soon during a region fail over.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>