<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:01:53 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-9155/HBASE-9155.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-9155] Enhance LoadTestTool to support updates</title>
                <link>https://issues.apache.org/jira/browse/HBASE-9155</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;We can enhance LoadTestTool to support updates like increment/append/checkAndPut/checkAndDelete to make sure these operations work as expected during integration testing.&lt;/p&gt;

&lt;p&gt;If chaosmonkey is enabled, increment/append could be invoked multiple times. During verification, we need to keep this in mind before they are guaranteed to be called only once in the sever side.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12662452">HBASE-9155</key>
            <summary>Enhance LoadTestTool to support updates</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jxiang">Jimmy Xiang</assignee>
                                    <reporter username="jxiang">Jimmy Xiang</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 Aug 2013 18:14:51 +0000</created>
                <updated>Mon, 23 Sep 2013 19:22:20 +0000</updated>
                            <resolved>Sat, 10 Aug 2013 19:43:29 +0000</resolved>
                                                    <fixVersion>0.98.0</fixVersion>
                    <fixVersion>0.95.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13732265" author="apurtell" created="Wed, 7 Aug 2013 18:17:20 +0000"  >&lt;p&gt;+1!&lt;/p&gt;</comment>
                            <comment id="13732268" author="sershe" created="Wed, 7 Aug 2013 18:18:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8598&quot; title=&quot;enhance multithreadedaction/reader/writer to test better&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8598&quot;&gt;&lt;del&gt;HBASE-8598&lt;/del&gt;&lt;/a&gt; does something like that. I haven&apos;t look for a while, do you want to take a look at the patch to see if it solves the problem and I can rebase and add other operations.&lt;/p&gt;</comment>
                            <comment id="13732285" author="jxiang" created="Wed, 7 Aug 2013 18:33:11 +0000"  >&lt;p&gt;I looked at &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8598&quot; title=&quot;enhance multithreadedaction/reader/writer to test better&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8598&quot;&gt;&lt;del&gt;HBASE-8598&lt;/del&gt;&lt;/a&gt;. It is a little different. Let me upload a patch soon.  We can merge them later.&lt;/p&gt;</comment>
                            <comment id="13734931" author="jxiang" created="Fri, 9 Aug 2013 15:55:17 +0000"  >&lt;p&gt;In the patch, we introduced a MultiThreadedUpdater which updates rows written by the writer.  Two new columns are added: mutate_info and increment.  The mutate_info column tracks the mutations (increment/append/checkAndPut/checkAndDelete) we have done to the row.  The increment column has an long number so that it can be incremented.  During the verification phase, we verify the mutated values and/or the original values.&lt;/p&gt;</comment>
                            <comment id="13735054" author="hadoopqa" created="Fri, 9 Aug 2013 17:47:48 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12597111/trunk-9155.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12597111/trunk-9155.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 25 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 20 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6680//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6680//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6680//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6680//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6680//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6680//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6680//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6680//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6680//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6680//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6680//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6680//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6680//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6680//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6680//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6680//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6680//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6680//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6680//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6680//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13735139" author="apurtell" created="Fri, 9 Aug 2013 19:00:31 +0000"  >&lt;p&gt;+1 on patch presuming the verification passes when run. Like how the mutations to apply are selected randomly. Would it be useful to provide an option to constrain that though? Maybe I only want to produce a ton of increments? &lt;/p&gt;</comment>
                            <comment id="13735141" author="apurtell" created="Fri, 9 Aug 2013 19:02:55 +0000"  >&lt;p&gt;Also, I opened &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9175&quot; title=&quot;Backport HBASE-9155 (Enhance LoadTestTool to support updates) to 0.94&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9175&quot;&gt;&lt;del&gt;HBASE-9175&lt;/del&gt;&lt;/a&gt; to port this to 0.94. If you were already planning to do that, please feel free to close &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9175&quot; title=&quot;Backport HBASE-9155 (Enhance LoadTestTool to support updates) to 0.94&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9175&quot;&gt;&lt;del&gt;HBASE-9175&lt;/del&gt;&lt;/a&gt; as a dup, otherwise I&apos;m happy to do that.&lt;/p&gt;</comment>
                            <comment id="13735418" author="jxiang" created="Fri, 9 Aug 2013 22:38:48 +0000"  >&lt;p&gt;I don&apos;t have a chance to port it to 0.94 yet.  Please go ahead. Thanks a lot. I have ran and verified the patch in our cluster a while.  It should be good.  I will run it more during the weekend.  As to the option to constrain mutations, we just control the percentage of rows to update for now.  We can add more constraints later on.&lt;/p&gt;</comment>
                            <comment id="13735424" author="apurtell" created="Fri, 9 Aug 2013 22:41:41 +0000"  >&lt;blockquote&gt;&lt;p&gt;We can add more constraints later on.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Ok, will address that in a follow up jira.&lt;/p&gt;

&lt;p&gt;Thanks for this enhancement.&lt;/p&gt;</comment>
                            <comment id="13736011" author="jxiang" created="Sat, 10 Aug 2013 19:43:29 +0000"  >&lt;p&gt;Integrated into trunk and 0.95. Thanks.&lt;/p&gt;</comment>
                            <comment id="13736032" author="hudson" created="Sat, 10 Aug 2013 21:00:53 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #665 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/665/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/665/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9155&quot; title=&quot;Enhance LoadTestTool to support updates&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9155&quot;&gt;&lt;del&gt;HBASE-9155&lt;/del&gt;&lt;/a&gt; Enhance LoadTestTool to support updates (jxiang: rev 1512817)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-common/src/main/java/org/apache/hadoop/hbase/util/test/LoadTestDataGenerator.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-it/src/test/java/org/apache/hadoop/hbase/IngestIntegrationTestBase.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-it/src/test/java/org/apache/hadoop/hbase/IntegrationTestLazyCfLoading.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/util/LoadTestTool.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/util/MultiThreadedAction.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/util/MultiThreadedReader.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/util/MultiThreadedUpdater.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/util/MultiThreadedWriter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/util/MultiThreadedWriterBase.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13736039" author="hudson" created="Sat, 10 Aug 2013 21:17:57 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #4368 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4368/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4368/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9155&quot; title=&quot;Enhance LoadTestTool to support updates&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9155&quot;&gt;&lt;del&gt;HBASE-9155&lt;/del&gt;&lt;/a&gt; Enhance LoadTestTool to support updates (jxiang: rev 1512817)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-common/src/main/java/org/apache/hadoop/hbase/util/test/LoadTestDataGenerator.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-it/src/test/java/org/apache/hadoop/hbase/IngestIntegrationTestBase.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-it/src/test/java/org/apache/hadoop/hbase/IntegrationTestLazyCfLoading.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/util/LoadTestTool.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/util/MultiThreadedAction.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/util/MultiThreadedReader.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/util/MultiThreadedUpdater.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/util/MultiThreadedWriter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/util/MultiThreadedWriterBase.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13736093" author="hudson" created="Sat, 10 Aug 2013 22:30:57 +0000"  >&lt;p&gt;SUCCESS: Integrated in hbase-0.95 #429 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95/429/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95/429/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9155&quot; title=&quot;Enhance LoadTestTool to support updates&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9155&quot;&gt;&lt;del&gt;HBASE-9155&lt;/del&gt;&lt;/a&gt; Enhance LoadTestTool to support updates (jxiang: rev 1512818)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-common/src/main/java/org/apache/hadoop/hbase/util/test/LoadTestDataGenerator.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-it/src/test/java/org/apache/hadoop/hbase/IngestIntegrationTestBase.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-it/src/test/java/org/apache/hadoop/hbase/IntegrationTestLazyCfLoading.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/util/LoadTestTool.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/util/MultiThreadedAction.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/util/MultiThreadedReader.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/util/MultiThreadedUpdater.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/util/MultiThreadedWriter.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/util/MultiThreadedWriterBase.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13736141" author="hudson" created="Sun, 11 Aug 2013 00:15:34 +0000"  >&lt;p&gt;SUCCESS: Integrated in hbase-0.95-on-hadoop2 #233 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95-on-hadoop2/233/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95-on-hadoop2/233/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9155&quot; title=&quot;Enhance LoadTestTool to support updates&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9155&quot;&gt;&lt;del&gt;HBASE-9155&lt;/del&gt;&lt;/a&gt; Enhance LoadTestTool to support updates (jxiang: rev 1512818)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-common/src/main/java/org/apache/hadoop/hbase/util/test/LoadTestDataGenerator.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-it/src/test/java/org/apache/hadoop/hbase/IngestIntegrationTestBase.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-it/src/test/java/org/apache/hadoop/hbase/IntegrationTestLazyCfLoading.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/util/LoadTestTool.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/util/MultiThreadedAction.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/util/MultiThreadedReader.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/util/MultiThreadedUpdater.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/util/MultiThreadedWriter.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/util/MultiThreadedWriterBase.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13765073" author="sershe" created="Thu, 12 Sep 2013 01:46:19 +0000"  >&lt;p&gt;Ok, I started trying to merge my patch into it... it looks like I will just discard my updaterthread/deleterthread inside MultiWriter, because they are very similar to what this patch does. I think it would make more sense to have threads inside writer as opposed to separate class for that but it&apos;s probably too late/unimportant to change now.&lt;/p&gt;

&lt;p&gt;One question I have is about correctness of verification in case of deletes/increments/appends. &lt;br/&gt;
Original test used to fail when multiple CFs were present (e.g. IntegrationTestLazyCf...) because read could start verifying and read partial view of the row, not all CFs were updated; isMultiPut fixed this.&lt;br/&gt;
How is the reader here prevented from reading partial view in case of updates - increments/etc. are sent separately, and MUTATE_INFO is updated later, so reader could read intermediate version.&lt;/p&gt;</comment>
                            <comment id="13765559" author="jxiang" created="Thu, 12 Sep 2013 16:00:44 +0000"  >&lt;blockquote&gt;&lt;p&gt;One question I have is about correctness of verification in case of deletes/increments/appends. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Readers have to start after writer/updaters are done. The order is maintained.&lt;/p&gt;</comment>
                            <comment id="13766096" author="sershe" created="Fri, 13 Sep 2013 00:56:05 +0000"  >&lt;p&gt;Hmm... then this is not a realistic scenario for updates/deletes, right? So it can hardly verify scanning from multiple files, compaction effect, reading old data etc.&lt;br/&gt;
It will always update data that was just written, before it&apos;s ever read.&lt;br/&gt;
I wonder what is the use case.&lt;/p&gt;</comment>
                            <comment id="13766642" author="jxiang" created="Fri, 13 Sep 2013 17:02:31 +0000"  >&lt;p&gt;Scan/compact/flush are not related.  They can still go on as expected.  Not sure what you meant.  As to order of reading, the reason is for verification. If data is not written, how do you verify it?&lt;/p&gt;</comment>
                            <comment id="13766724" author="sershe" created="Fri, 13 Sep 2013 17:54:48 +0000"  >&lt;p&gt;I meant that if update follows write close they will usually end up just being in memstore... scanner merging, compaction of values for the same key from multiple files etc. will never happen. In fact most reads will be served from memstore probably (I am adding random reader threads). When I was manually testing compactions the correctness of reads when compaction is dropping stuff from old files/merging deletes/etc. was important. But nm we can take of it later if needed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12648999">HBASE-8598</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12662922">HBASE-9175</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12597111" name="trunk-9155.patch" size="56714" author="jxiang" created="Fri, 9 Aug 2013 16:28:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 7 Aug 2013 18:17:20 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>342455</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 14 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1n25j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>342760</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>