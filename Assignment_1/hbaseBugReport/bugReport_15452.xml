<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 21:03:42 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-15452/HBASE-15452.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-15452] Consider removing checkScanOrder from StoreScanner.next</title>
                <link>https://issues.apache.org/jira/browse/HBASE-15452</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;In looking why we spent so much time in StoreScanner.next when doing a simple Phoenix count&amp;#40;*) query I came across checkScanOrder. Not only is this a function dispatch (that the JIT would eventually inline), it also requires setting the prevKV member for every Cell encountered.&lt;/p&gt;

&lt;p&gt;Removing that logic a yields measurable end-to-end improvement of 5-20% (in 0.98).&lt;br/&gt;
I will repeat this test on my work machine tomorrow.&lt;/p&gt;

&lt;p&gt;I think we&apos;re stable enough to remove that check anyway.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12949716">HBASE-15452</key>
            <summary>Consider removing checkScanOrder from StoreScanner.next</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="lhofhansl">Lars Hofhansl</reporter>
                        <labels>
                    </labels>
                <created>Sun, 13 Mar 2016 17:40:16 +0000</created>
                <updated>Wed, 16 Mar 2016 16:20:36 +0000</updated>
                            <resolved>Tue, 15 Mar 2016 04:36:57 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="15192546" author="lhofhansl" created="Sun, 13 Mar 2016 22:03:12 +0000"  >&lt;p&gt;Patch... Just to park it. Simply removes the cruft.&lt;br/&gt;
Note that if we come in with identical KVs kvscanned will be off by those.&lt;/p&gt;</comment>
                            <comment id="15192734" author="ram_krish" created="Mon, 14 Mar 2016 04:33:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt;]&lt;br/&gt;
I think you forgot to attach the patch here. &lt;/p&gt;</comment>
                            <comment id="15193677" author="lhofhansl" created="Mon, 14 Mar 2016 17:22:56 +0000"  >&lt;p&gt;Oops. Here it is. Trivial.&lt;/p&gt;</comment>
                            <comment id="15193690" author="lhofhansl" created="Mon, 14 Mar 2016 17:29:39 +0000"  >&lt;p&gt;Two runs with patch applied (test from &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15453&quot; title=&quot;[Performance] Considering reverting HBASE-10015 - reinstate synchronized in StoreScanner&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15453&quot;&gt;HBASE-15453&lt;/a&gt;)&lt;br/&gt;
10 runs  mean:1727.2 sigma:45.20353968440967&lt;br/&gt;
10 runs  mean:1769.9 sigma:16.53148511174964&lt;/p&gt;

&lt;p&gt;Two runs without patch:&lt;br/&gt;
10 runs  mean:2194.8 sigma:56.31838065853811&lt;br/&gt;
10 runs  mean:2183.0 sigma:31.135189095298585&lt;/p&gt;

&lt;p&gt;So this saved about 20% of runtime! Shows again that these code paths are extremely hot and every instruction we can save in these will be noticed!&lt;/p&gt;</comment>
                            <comment id="15193712" author="lhofhansl" created="Mon, 14 Mar 2016 17:38:11 +0000"  >&lt;p&gt;This patch together with &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15453&quot; title=&quot;[Performance] Considering reverting HBASE-10015 - reinstate synchronized in StoreScanner&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15453&quot;&gt;HBASE-15453&lt;/a&gt; (JDK8)&lt;br/&gt;
10 runs  mean:1430.6 sigma:11.612062693595828&lt;/p&gt;

&lt;p&gt;That saves over 1/3 of the runtime!!&lt;/p&gt;</comment>
                            <comment id="15193773" author="lhofhansl" created="Mon, 14 Mar 2016 18:02:32 +0000"  >&lt;p&gt;Wait... We&apos;re running the tests with assertions enabled, right? So this would not be like the production thing.&lt;br/&gt;
In the description I measure this end-to-end in &quot;production&quot; with Phoenix.&lt;/p&gt;</comment>
                            <comment id="15194718" author="lhofhansl" created="Tue, 15 Mar 2016 04:36:57 +0000"  >&lt;p&gt;NM... I&apos;m full of @#%^&lt;/p&gt;</comment>
                            <comment id="15195268" author="stack" created="Tue, 15 Mar 2016 13:09:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt; You did compare of locking techniques and in one run, assertions were enabled but not in the other?&lt;/p&gt;</comment>
                            <comment id="15197603" author="lhofhansl" created="Wed, 16 Mar 2016 16:20:36 +0000"  >&lt;p&gt;Assertion were enabled in all cases.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12793348" name="15452-0.98.txt" size="3422" author="lhofhansl" created="Mon, 14 Mar 2016 17:22:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 14 Mar 2016 04:33:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            39 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ukn3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>