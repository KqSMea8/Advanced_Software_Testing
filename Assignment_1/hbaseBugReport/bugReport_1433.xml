<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:53:28 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1433/HBASE-1433.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1433] Update hbase build to match core, use ivy, publish jars to maven repo, etc.</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1433</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;We are almost close, except for the republication of artifacts to mapreduce snapshot repository from branch-0.21 (after applying the appropriate patch). It would be great to have this out for 0.21 . &lt;/p&gt;</description>
                <environment></environment>
        <key id="12425745">HBASE-1433</key>
            <summary>Update hbase build to match core, use ivy, publish jars to maven repo, etc.</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Mon, 18 May 2009 17:57:56 +0000</created>
                <updated>Fri, 20 Nov 2015 13:01:30 +0000</updated>
                            <resolved>Sun, 10 Jan 2010 02:44:42 +0000</resolved>
                                    <version>0.20.2</version>
                                    <fixVersion>0.90.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12795840" author="kaykay.unique" created="Sat, 2 Jan 2010 07:48:29 +0000"  >&lt;p&gt;stack - curious to see what the status on this is .. &lt;/p&gt;

&lt;p&gt;I have a patch that uses ivy to do the dependency management and pulls the necessary files - except for the following dependencies ( thrift / protocol buffers (contrib-stargate ) and zookeeper  ). &lt;/p&gt;

&lt;p&gt;For now - may be we can just version those piece of software until the ivy repositories become available. Else - dependency management using ivy should be available soon. &lt;/p&gt;</comment>
                            <comment id="12795842" author="kaykay.unique" created="Sat, 2 Jan 2010 08:15:29 +0000"  >&lt;p&gt;Introduce ivy based dependency management - first cut. &lt;/p&gt;</comment>
                            <comment id="12795843" author="kaykay.unique" created="Sat, 2 Jan 2010 08:25:06 +0000"  >&lt;p&gt;Depends on apache snapshots for hadoop-core / hdfs-core / mapreduce-core projects. &lt;/p&gt;

&lt;p&gt;During development - if we want stability - we can maintain another ivy resolver with specific snapshots that we are interested. But for production and releases  - this should suffice. &lt;/p&gt;


&lt;p&gt;Protocol Buffers&lt;br/&gt;
Thrift &lt;br/&gt;
Zookeeper do not seem to publish their (maven/ivy) artifacts publicly yet. &lt;/p&gt;

&lt;p&gt;Until that happens - those binaries are maintained separately in version control and after the public repositories are available , they will move away in favor of ivy.xml (yes - it is ugly now !)&lt;/p&gt;

&lt;p&gt;$ ant compile &lt;br/&gt;
 succeeds &lt;/p&gt;

&lt;p&gt;$ ant test &lt;br/&gt;
succeeds &lt;/p&gt;
</comment>
                            <comment id="12795844" author="kaykay.unique" created="Sat, 2 Jan 2010 08:30:11 +0000"  >&lt;p&gt;protocol buffers seems to be available here- &lt;a href=&quot;http://google-maven-repository.googlecode.com/svn/repository/com/google/protobuf/protobuf-java/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://google-maven-repository.googlecode.com/svn/repository/com/google/protobuf/protobuf-java/&lt;/a&gt; . &lt;/p&gt;

&lt;p&gt;Apparently - there is an issue with the maven repository keys here at - &lt;a href=&quot;http://code.google.com/p/protobuf/issues/detail?id=126&amp;amp;q=ivy&amp;amp;colspec=ID%20Type%20Status%20Priority%20FixedIn%20Owner%20Summary&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://code.google.com/p/protobuf/issues/detail?id=126&amp;amp;q=ivy&amp;amp;colspec=ID%20Type%20Status%20Priority%20FixedIn%20Owner%20Summary&lt;/a&gt; . &lt;/p&gt;

&lt;p&gt;After it goes in - protobuf-java can also be deleted from the source control and added in ivy . &lt;/p&gt;</comment>
                            <comment id="12795845" author="kaykay.unique" created="Sat, 2 Jan 2010 08:34:01 +0000"  >&lt;p&gt;Voting for it since I have vested interest in upgrading  the Lucene index version (2.2 , as of now to 2.9/3.0+) backing the same, and having a proper dependency management system makes it easy . &lt;/p&gt;</comment>
                            <comment id="12795846" author="kaykay.unique" created="Sat, 2 Jan 2010 08:38:44 +0000"  >&lt;blockquote&gt;
&lt;p&gt;$ ant test&lt;br/&gt;
succeeds&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sorry - spoke too soon.  Three test cases failed due to dynamic linking issue. &lt;/p&gt;

&lt;p&gt;java.lang.NoSuchMethodError: org.apache.hadoop.ipc.RPC.getProxy(Ljava/lang/Class;JLjava/net/InetSocketAddress;Lorg/apache/hadoop/security/UserGroupInformation;Lorg/apache/hadoop/conf/Configuration;Ljavax/net/SocketFactory;)Lorg/apache/hadoop/ipc/VersionedProtocol;&lt;/p&gt;


&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Test org.apache.hadoop.hbase.mapreduce.TestTableInputFormatScan FAILED&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.hadoop.hbase.mapreduce.TestTableMapReduce&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 40.874 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Test org.apache.hadoop.hbase.mapreduce.TestTableMapReduce FAILED&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.hadoop.hbase.mapreduce.TestTimeRangeMapRed&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 29.85 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Test org.apache.hadoop.hbase.mapreduce.TestTimeRangeMapRed FAILED&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.hadoop.hbase.master.TestMinimumServerCount&lt;/p&gt;

&lt;p&gt;May be a subsequent snapshot of mapreduce library would resolve the inconsistency. &lt;/p&gt;</comment>
                            <comment id="12795849" author="kaykay.unique" created="Sat, 2 Jan 2010 09:21:34 +0000"  >&lt;p&gt;ZooKeeper needed for contrib/transactional/test as well &lt;/p&gt;</comment>
                            <comment id="12795850" author="kaykay.unique" created="Sat, 2 Jan 2010 09:35:25 +0000"  >&lt;p&gt;Thrift dependency: &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-363&quot; title=&quot;Maven Deploy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-363&quot;&gt;&lt;del&gt;THRIFT-363&lt;/del&gt;&lt;/a&gt; and  Zookeeper dependency: &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-224&quot; title=&quot;Deploy ZooKeeper jars/artifacts to a Maven Repository&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-224&quot;&gt;&lt;del&gt;ZOOKEEPER-224&lt;/del&gt;&lt;/a&gt;   ( for ivy artifacts to be publicly available ). &lt;/p&gt;</comment>
                            <comment id="12795922" author="stack" created="Sat, 2 Jan 2010 21:20:35 +0000"  >&lt;p&gt;@kay kay Checking in the dependencies not available yet in maven repos is the way to go.  Let me check out your patch... will be back (Thanks for doing this).&lt;/p&gt;</comment>
                            <comment id="12795937" author="stack" created="Sun, 3 Jan 2010 01:37:03 +0000"  >&lt;p&gt;@kay kay How&apos;d you fix the above &quot;dynamic linking&quot; issue.  I get that for core tests at least after I changed your patch so it pulled hadoop 0.21 jars rather than hadoop 0.22 jars (hbase TRUNK uses hadoop 0.21).  It seems too like there other jars we could fetch like the content of lib/jsp-2.1 and in stargate, there seems to be jackson-json?  Thanks KK.&lt;/p&gt;</comment>
                            <comment id="12795953" author="kaykay.unique" created="Sun, 3 Jan 2010 05:36:03 +0000"  >&lt;blockquote&gt;
&lt;p&gt; How&apos;d you fix the above &quot;dynamic linking&quot; issue.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I have not. That is tricky because it pulls the latest snapshot across three different projects ( core . hdfs, mapreduce ) . Also - one of the hdfs snapshots (0.21 ) seemed to pull (0.22) from core.  We also need to have some sort of conflict resolver specific to core  / hdfs / mapreduce to prevent similar conflicts ( as opposed to the default one ). &lt;/p&gt;

&lt;p&gt;This specific dll  conflict seems to be an artifact of &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6435&quot; title=&quot;Make RPC.waitForProxy with timeout public&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6435&quot;&gt;&lt;del&gt;HADOOP-6435&lt;/del&gt;&lt;/a&gt; checked in recently and corresponding mismatch in other projects in picking up the same. &lt;/p&gt;

&lt;p&gt;For a release - this would work perfect to avoid the conflicts of different versions. During development though - this would be a headache though during such major API changes. But - may be we can maintain a separate repository during development and flip the order of ivy resolvers for ( core / hdfs/ mapreduce ). &lt;/p&gt;

 &lt;blockquote&gt;
&lt;p&gt;I get that for core tests at least after I changed your patch so it pulled hadoop 0.21 jars rather than hadoop 0.22 jars&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yup. I changed it to see if it avoids the dll linkage issue, but if 0.21 is what we want - we also want to add a custom ivy conflict resolvers to allow only release versions ( and maintain major / minor version compatibility ). I will look into the same. &lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt; It seems too like there other jars we could fetch like the content of lib/jsp-2.1 and in stargate, there seems to be jackson-json? &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes - lib/jsp-2.1 , can also brought under ivy umbrella . &lt;/p&gt;

&lt;p&gt;For json - there is this - &lt;/p&gt;

&lt;p&gt;&amp;lt;dependency org=&quot;com.sun.jersey&quot; name=&quot;jersey-json&quot; &lt;br/&gt;
      rev=&quot;$&lt;/p&gt;
{jersey.version}
&lt;p&gt;&quot; conf=&quot;common-&amp;gt;default&quot;&amp;gt; &lt;/p&gt;

&lt;p&gt;If we are looking for a specific json implementation - we can change this. &lt;/p&gt;
</comment>
                            <comment id="12796023" author="kaykay.unique" created="Sun, 3 Jan 2010 20:15:11 +0000"  >&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; It seems too like there other jars we could fetch like the content of lib/jsp-2.1 and in stargate, there seems to be jackson-json?&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;p&gt;jersey-json depends on jackson-json-asl (1.1.1) transitively &lt;/p&gt;</comment>
                            <comment id="12796024" author="kaykay.unique" created="Sun, 3 Jan 2010 20:33:45 +0000"  >&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; fetch like the content of lib/jsp-2.1&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;p&gt;jsp-2.1 seems to be fetched from the dependency of hadoop-core ( jsp.jar and jsp-api.jar ).  So the lib/jsp-2.1/* files could be deleted as well. &lt;/p&gt;</comment>
                            <comment id="12796042" author="stack" created="Sun, 3 Jan 2010 22:38:07 +0000"  >&lt;p&gt;.bq I have not. That is tricky because it pulls the latest snapshot across three different projects ( core . hdfs, mapreduce ) . Also - one of the hdfs snapshots (0.21 ) seemed to pull (0.22) from core. We also need to have some sort of conflict resolver specific to core / hdfs / mapreduce to prevent similar conflicts ( as opposed to the default one ).&lt;/p&gt;

&lt;p&gt;A custom conflict resolver sounds like loads of fun (smile).  If a 0.21 hdfs snapshot is pulling in 0.22, that sounds well broke.&lt;/p&gt;

&lt;p&gt;How about putting up a patch that leaves the hadoop stuff as checkins and not pull these from a repo just yet (or, maybe if you just check in commons, and pull the other two, does that help)?  I suggest this because the patch as is where it moves the bulk of the jar includes to instead be ivy pulls is a nice fat contribution.  It also gets you what you need, an updated lucene?&lt;/p&gt;

&lt;p&gt;Good stuff on the fact that jsp-2.1 is being pulled already and jersery-json is a transitive include.&lt;/p&gt;</comment>
                            <comment id="12796062" author="kaykay.unique" created="Mon, 4 Jan 2010 01:59:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-1352&quot; title=&quot;0.21.0 - snapshot incorrect dependency published in .pom files &quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-1352&quot;&gt;&lt;del&gt;MAPREDUCE-1352&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-869&quot; title=&quot;0.21.0 - snapshot incorrect dependency published in .pom files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-869&quot;&gt;&lt;del&gt;HDFS-869&lt;/del&gt;&lt;/a&gt; logged to make sure that the pom published in apache snapshot repository is consistent with the version in branch 0.21 . &lt;/p&gt;

&lt;p&gt;Expected: 0.21.0 for hadoop-core . Actuals: 0.21.0 for hadoop-core in either of them. That gives rise to quite a lot of confusion here. &lt;/p&gt;
</comment>
                            <comment id="12796324" author="kaykay.unique" created="Mon, 4 Jan 2010 19:51:00 +0000"  >&lt;p&gt;So far - it seems like the .pom published to mapreduce-0.21 and hdfs-0.21 refers to hadoop-core-0.22 by mistake (when they had intended to mean hadoop-core-0.21 ) .  The teams are working on fixing it and republishing artifacts again. &lt;/p&gt;

&lt;p&gt;Independently - mapreduce-0.21 does not have a green build for a long time in hudson due to the same dynamic link issue that we are facing.&lt;/p&gt;

&lt;p&gt;After hdfs gets a green build with hadoop-core-0.21 dependency - mapreduce needs to do the same thing again. At which point- I expect this dynamic link issue to be resolved and ivy based dependency management in place ( except for zookeeper / thrift ) for us.   &lt;/p&gt;</comment>
                            <comment id="12796331" author="stack" created="Mon, 4 Jan 2010 20:03:06 +0000"  >&lt;p&gt;@ Kay Kay: Good stuff. Seems like we should just commit the pom changes over in mapreduce-1352 (though it looks like the pom change may have broken at least one unit test) and same for hdfs-869.  Whats there is just broke.   Is there an issue up in hadoop for fixing the dynamic link issue or do you think addressing the mapreduce-1352 and hdfs-869 will take care of it?&lt;/p&gt;</comment>
                            <comment id="12796332" author="kaykay.unique" created="Mon, 4 Jan 2010 20:06:17 +0000"  >&lt;p&gt;I believe mapreduce-1352 and hdfs-869 once fixed - should make this green (hopefully &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; ).&lt;/p&gt;</comment>
                            <comment id="12796333" author="kaykay.unique" created="Mon, 4 Jan 2010 20:06:50 +0000"  >&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Expected: 0.21.0 for hadoop-core . Actuals: 0.21.0 for hadoop-core in either of them&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;p&gt;Oops meant - &quot;Expected: 0.21.0 for hadoop-core . Actuals: 0.22.0 for hadoop-core in either of them&quot;&lt;/p&gt;</comment>
                            <comment id="12796354" author="kaykay.unique" created="Mon, 4 Jan 2010 21:01:41 +0000"  >&lt;p&gt;A good number of configurations in ivy.xml have been copied from hadoop-core and hence not necessary. Will revisit that after getting the rest of the dependent issues resolved. &lt;/p&gt;
</comment>
                            <comment id="12796492" author="kaykay.unique" created="Tue, 5 Jan 2010 02:30:15 +0000"  >&lt;p&gt;Having 3 separate ivysettings.xml and libraries.properties seems like an overkill. We can do with 1 . More on the TODO list. &lt;/p&gt;</comment>
                            <comment id="12796500" author="kaykay.unique" created="Tue, 5 Jan 2010 02:39:42 +0000"  >&lt;p&gt;hadoop-core ivy configuration,    conf=&quot;common-&amp;gt;default&quot;   probably needs to be revisited specifically mentioning only the contexts needed for hbase code and not everything else. &apos;default&apos; is not something we would want.  A comma separated , fine-grained dependency is needed. &lt;/p&gt;</comment>
                            <comment id="12796518" author="stack" created="Tue, 5 Jan 2010 03:51:13 +0000"  >&lt;p&gt;I applied hdfs-869.  Lets see if hudson builds clean and posts new jar to apache repo.&lt;/p&gt;</comment>
                            <comment id="12796558" author="kaykay.unique" created="Tue, 5 Jan 2010 06:45:20 +0000"  >&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; I applied hdfs-869. Lets see if hudson builds clean and posts new jar to apache repo.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;p&gt;Thanks stack. That has been applied successfully as the new jars are available in the repository.  mapreduce-0.21 seems to be red  ( &lt;a href=&quot;http://hudson.zones.apache.org/hudson/view/Hadoop/job/Hadoop-Mapreduce-21-Build/51/#showFailuresLink&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/view/Hadoop/job/Hadoop-Mapreduce-21-Build/51/#showFailuresLink&lt;/a&gt; ) though, failing with the same dll issue seen above (RPC.getProxy() signature ). &lt;/p&gt;</comment>
                            <comment id="12796591" author="kaykay.unique" created="Tue, 5 Jan 2010 09:15:49 +0000"  >&lt;p&gt;Revised ivy file attached. &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;single place for ivy settings  / libraries.properties .&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Zookeeper / thrift jars need to be version controlled. Everything else can be deleted. &lt;/p&gt;</comment>
                            <comment id="12796592" author="kaykay.unique" created="Tue, 5 Jan 2010 09:21:30 +0000"  >&lt;p&gt;So far -after hdfs repositories have been published to apache snapshot repository - ran this patch locally , that completes test without the dynamic link issue with the following caveats. &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;The jars in hadoop-mapred/0.21.0 seem to be corrupted.&lt;/li&gt;
	&lt;li&gt;Checked out branch  ( branch-0.21) of mapreduce . manually created the jars (hadoop-mapred and hadoop-mapred-test) and copied them to ~/.ivy2/org.apache.hadoop/hadoop-mapred(-test) to circumvent ivy .  Dynamic link issue disappeared (great !!)&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;org.apache.hadoop.hbase.TestInfoServers FAILED (timeout)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;$ cat build/test/TEST-org.apache.hadoop.hbase.TestInfoServers.txt &lt;br/&gt;
Testsuite: org.apache.hadoop.hbase.TestInfoServers&lt;br/&gt;
Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 0 sec&lt;/p&gt;

&lt;p&gt;Testcase: testInfoServersAreUp took 0.003 sec&lt;br/&gt;
	Caused an ERROR&lt;br/&gt;
Timeout occurred. Please note the time in the report does not reflect the time until the timeout.&lt;br/&gt;
junit.framework.AssertionFailedError: Timeout occurred. Please note the time in the report does not reflect the time until the timeout.&lt;/p&gt;

&lt;p&gt;But that might be a different issue altogether independent on dependency management that we can handle separately . may be. &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;TODO:   Fix &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-1352&quot; title=&quot;0.21.0 - snapshot incorrect dependency published in .pom files &quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-1352&quot;&gt;&lt;del&gt;MAPREDUCE-1352&lt;/del&gt;&lt;/a&gt; with revised checkin to branch and revised publishing of artifacts.  That should resolve this issue.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12796831" author="kaykay.unique" created="Tue, 5 Jan 2010 20:10:50 +0000"  >&lt;p&gt;Remove properties that are redundant. &lt;/p&gt;</comment>
                            <comment id="12796832" author="ryanobjc" created="Tue, 5 Jan 2010 20:28:59 +0000"  >&lt;p&gt;One thing you aren&apos;t surfacing here is this change will require everyone who wants to build HBase to have &lt;em&gt;internet&lt;/em&gt; access on their build machines.&lt;/p&gt;</comment>
                            <comment id="12796849" author="kaykay.unique" created="Tue, 5 Jan 2010 21:02:19 +0000"  >&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; One thing you aren&apos;t surfacing here is this change will require everyone who wants to build HBase to have internet access on their build machines.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;p&gt;Nothing theoretically prevents from a build machine from hosting their own internal ivy repository within the firewall  and configuring ivysettings.xml appropriately ( as another resolver ).  But given the fact that  hbase is using no less than 3 snapshots of other open source projects ( + zookeeper , that makes is four ) - I guess the need is to make sure that hbase does not fall back too much from the code of the dependent projects and wait for the single big merge. That will -vely affect the length of release cycles and the confidence of milestone builds in the middle. &lt;/p&gt;</comment>
                            <comment id="12796850" author="ryanobjc" created="Tue, 5 Jan 2010 21:12:10 +0000"  >&lt;p&gt;I just want to make it clear here that Ivy doesn&apos;t solve the problems you are listing.  Those problems existed before, and were solved before ivy.  Ivy solves your problem because you assume/need/depend on a complex dependency management system.  For those of us who don&apos;t care about ivy in fact lose something - a easy to build hbase.&lt;/p&gt;</comment>
                            <comment id="12796858" author="kaykay.unique" created="Tue, 5 Jan 2010 21:38:18 +0000"  >&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; I just want to make it clear here that Ivy doesn&apos;t solve the problems you are listing. Those problems existed before, and were solved before ivy. Ivy solves your problem because you assume/need/depend on a complex dependency management system. For those of us who don&apos;t care about ivy in fact lose something - a easy to build hbase.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;p&gt;Ivy definitely is not a silver bullet to dependency management issues but it makes a honest attempt towards that. I find the graph visualization / conflict resolution very useful. Agree about hurting slow speed connection users - but you can always set up a proxy dependency server pointing to a main repository to handle it for you, to mitigate the issue. &lt;/p&gt;</comment>
                            <comment id="12796891" author="apurtell" created="Tue, 5 Jan 2010 22:51:17 +0000"  >&lt;p&gt;I agree with Ryan. Why should I have to bother with setting up some kind of ivy proxy (locally?) ? The first thing I do with Hadoop 0.21 is build to pull all the dependencies into build/ivy/.... and then copy them by hand into a lib/ directory so I can put them on the Eclipse build path in a clean manner. Any dependency changes, I have to fix them by hand. Before, SVN add/rm would handle that for me &amp;#8211; the committer would deal with the dependency change. I&apos;m not looking forward to needing to do the same thing for HBase. &lt;/p&gt;

&lt;p&gt;My interest here is not to discourage this if people are generally in favor, but, personally, I prefer ant. I like make. I have a good relationship with Eclipse but otherwise IDEs get in the way. Etc. I see no personal benefit for using ivy or maven, just an (unnecessary, IMO) learning curve, additional work if I need to fix something to get it to work for my changes, and a truckload of external dependencies. &lt;/p&gt;</comment>
                            <comment id="12796906" author="kaykay.unique" created="Tue, 5 Jan 2010 23:16:59 +0000"  >&lt;blockquote&gt;
&lt;p&gt;I agree with Ryan. Why should I have to bother with setting up some kind of ivy proxy (locally?) ? The first thing I do with Hadoop 0.21 is build to pull all the dependencies into build/ivy/.... and then copy them by hand into a lib/ directory so I can put them on the Eclipse build path in a clean manner. Any dependency changes, I have to fix them by hand. Before, SVN add/rm would handle that for me - the committer would deal with the dependency change. I&apos;m not looking forward to needing to do the same thing for HBase.&lt;br/&gt;
My interest here is not to discourage this if people are generally in favor, but, personally, I prefer ant. I like make. I have a good relationship with Eclipse but otherwise IDEs get in the way. Etc. I see no personal benefit for using ivy or maven, just an (unnecessary, IMO) learning curve, additional work if I need to fix something to get it to work for my changes, and a truckload of external dependencies.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I find this thread interesting given that every other project in the eco-system - hadoop-core / mapreduce / hdfs / mahout ( uses maven) / zookeeper (3.3.0+) go with a dependency manager in one form or the other.  It does not conflict with Eclipse in any way since instead of lib/** - people will be required to add build/ivy/common/** to the classpath .  SVN add/rm handling dependency management is definitely possible, but say in the case of lucene - there are at least 6 different jars / contribs that are available and if we want to flip between versions- adding and removing versions from source control is not fun at all.  And with ivy - there is no need to install any piece of software other than ant itself.   Version controlling snapshots of projects will make it hard to keep up with their updates as and when they become available and goes against the very objective of continuous build process.  With this patch - people would be modifying ivy.xml / libraries.properties at max , without worrying about anything else and I find that way comfortable , compared to downloading yet another installation and version controlling them (and deleting old versions), not to mention deciding dependency management winners. &lt;/p&gt;</comment>
                            <comment id="12796917" author="kaykay.unique" created="Tue, 5 Jan 2010 23:25:33 +0000"  >&lt;p&gt;And to state the obvious, both ivy/maven caches the jar files locally , to be nice to slow connection scenarios. (happens transparently , without the need for any config.) . &lt;/p&gt;</comment>
                            <comment id="12797189" author="stack" created="Wed, 6 Jan 2010 17:26:23 +0000"  >&lt;p&gt;(Redo of a mangled iphone comment of mine that I just deleted)&lt;/p&gt;

&lt;p&gt;On having to be connected to the net, it should be the case that if the jar is not in the local ivy cache, then the build should not go to the net.  If this is not the case, we should fix it.  This should do away with having to set up local repo.  The only difficulty that I see will be not going to the net to check for new SNAPSHOTs (Kay Kay says this above).&lt;/p&gt;

&lt;p&gt;In deleted comment, I made the silly remark that build may not be more complex, just different.  Thinking on it, there&apos;ll be more moving parts and more to learn, etc. as Andy says above.&lt;/p&gt;

&lt;p&gt;For me, main reasons we&apos;re doing this change is to keep alignment the parent project.  Ivy also helps with maven publishing, another means of making hbase available especially for folks embedding (we could write ant tasks ourselves to do this but if we use ivy we can just rob the tested parent projects ant tasks and bring them local).&lt;/p&gt;</comment>
                            <comment id="12797196" author="stack" created="Wed, 6 Jan 2010 17:42:44 +0000"  >&lt;p&gt;@kay kay mapreduce-1352 looks likes its committed and resolved but 0.21 build of mapreduce up on hudson looks badly broke.  On TestInfoServers, this could be an ordering of jars issue.  HBase tries to make use of the hadoop webapps.  Have to be careful about which jar comes first (hadoop before hbase IIRC).&lt;/p&gt;</comment>
                            <comment id="12797255" author="kaykay.unique" created="Wed, 6 Jan 2010 19:20:26 +0000"  >&lt;p&gt;yes - &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-1352&quot; title=&quot;0.21.0 - snapshot incorrect dependency published in .pom files &quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-1352&quot;&gt;&lt;del&gt;MAPREDUCE-1352&lt;/del&gt;&lt;/a&gt; has been committed and ran &apos;ant test&apos;. The dynamic link issue does not appear and all tests run successfully except for TestInfoServers. &lt;/p&gt;

&lt;p&gt;(As far as the branch-0.21 of mapreduce being broke - it appears to be an environment issue on the build part at the moment , since it does not seem to have hadoop-core-0.21.0 in its CP ).&lt;/p&gt;

&lt;p&gt;So - that leaves with 1 open issue - TestInfoServers , CP issue. I will look into this when I get time. &lt;/p&gt;</comment>
                            <comment id="12797513" author="kaykay.unique" created="Thu, 7 Jan 2010 05:04:35 +0000"  >&lt;p&gt;added jruby-complete . &lt;/p&gt;

&lt;p&gt;rearranged classpath to have hadoop ahead of hbase . &lt;/p&gt;
</comment>
                            <comment id="12797515" author="kaykay.unique" created="Thu, 7 Jan 2010 05:06:43 +0000"  >&lt;p&gt;attached a revised patch . Error still persists . &lt;/p&gt;

&lt;p&gt;Test log has no significant information.. Where can we get more debugging information ( web context load issue / classpath issue , say ? ). &lt;/p&gt;</comment>
                            <comment id="12797523" author="stack" created="Thu, 7 Jan 2010 05:29:38 +0000"  >&lt;p&gt;If its what I think it is, complaint is that it can&apos;t find a wanted webapp.  Can you print out CLASSPATH used?  Can you make it same as that used running tests in pre-patch days?&lt;/p&gt;</comment>
                            <comment id="12797534" author="stack" created="Thu, 7 Jan 2010 06:20:55 +0000"  >&lt;p&gt;One other thing, if there is an instance of hbase running at same time as you are running tests, that test will fail.&lt;/p&gt;</comment>
                            <comment id="12797782" author="kaykay.unique" created="Thu, 7 Jan 2010 20:28:35 +0000"  >&lt;blockquote&gt;
&lt;p&gt;If its what I think it is, complaint is that it can&apos;t find a wanted webapp. Can you print out CLASSPATH used? Can you make it same as that used running tests in pre-patch days? &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Having src/test : build/test ( in that order ) seems to fix the issue. &lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;One other thing, if there is an instance of hbase running at same time as you are running tests, that test will fail. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Did notice this (when I tried to run tests in parallel on contrib/stargate , contrib/transactional etc.&lt;/p&gt;

&lt;p&gt;So - I have a revised patch that works with TestInfoServers as well. &lt;/p&gt;

&lt;p&gt;TODO: &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Check tests of contrib/stargate  and&lt;/li&gt;
	&lt;li&gt;contrib/transactional .&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12797789" author="kaykay.unique" created="Thu, 7 Jan 2010 21:05:35 +0000"  >&lt;p&gt;So far - &lt;/p&gt;

&lt;p&gt;contrib/transactional: &lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 0 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Test org.apache.hadoop.hbase.client.transactional.TestTransactions FAILED (timeout)&lt;/p&gt;


&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 0 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Test org.apache.hadoop.hbase.regionserver.transactional.TestTHLogRecovery FAILED (timeout)&lt;/p&gt;
</comment>
                            <comment id="12797868" author="kaykay.unique" created="Fri, 8 Jan 2010 01:50:31 +0000"  >&lt;p&gt;&apos;ant compile&apos; and &apos;ant test&apos; succeeds , eventually . &lt;/p&gt;

&lt;p&gt;[ Set transitive=&quot;false&quot; for all test packages to not pollute the classpath by the presence of hadoop-core* / -hdfs* / -mapreduce* jars twice ( in lib/common and lib/test ). ] &lt;/p&gt;

&lt;p&gt;Need to check other targets for compatibility issues.  Ivy - here we come.  &lt;/p&gt;</comment>
                            <comment id="12797871" author="kaykay.unique" created="Fri, 8 Jan 2010 01:54:35 +0000"  >&lt;p&gt;To make thrift publish their artifacts to repositories. &lt;/p&gt;</comment>
                            <comment id="12797879" author="kaykay.unique" created="Fri, 8 Jan 2010 02:21:46 +0000"  >&lt;p&gt;@stack - The revised patch compiles / tests successfully. Can you help review this and may be try this ( on a hudson build ? ) to see how this goes. &lt;/p&gt;</comment>
                            <comment id="12797900" author="stack" created="Fri, 8 Jan 2010 04:39:33 +0000"  >&lt;p&gt;@Kay Kay Good on you for figuring the ugly issue.  We haven&apos;t done the work to setup the hadoop patch-builds up on hudson.   For hbase, only way to get an hudson build is to do an actual commit.   If all tests pass, then I should commit only its a pretty big change so I just sent a heads-up to the hbase-dev list warning of pending commit.  I also asked for commentary in case folks object to the move to ivy.&lt;/p&gt;</comment>
                            <comment id="12797933" author="kaykay.unique" created="Fri, 8 Jan 2010 07:29:40 +0000"  >&lt;ul&gt;
	&lt;li&gt;build-contrib - junit target - if /unless &quot;testcase&quot; retained as before, using $
{testcase}
&lt;p&gt; macro&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12798440" author="stack" created="Sun, 10 Jan 2010 02:44:42 +0000"  >&lt;p&gt;committed after making sure build passes locally.  had to clear my ivy cache but then was fine.  thanks for nice fat patch kay kay&lt;/p&gt;</comment>
                            <comment id="12798443" author="kaykay.unique" created="Sun, 10 Jan 2010 03:22:50 +0000"  >&lt;p&gt;Thanks stack for helping reviewing this one and getting this one in. &lt;/p&gt;

&lt;p&gt;I have put up a primer here , for transition - &lt;a href=&quot;http://wiki.apache.org/hadoop/Hbase/IvyPrimer&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/hadoop/Hbase/IvyPrimer&lt;/a&gt; .  Needs better formatting- but can serve as an initial point to resolve mystery. &lt;/p&gt;</comment>
                            <comment id="15017817" author="lars_francke" created="Fri, 20 Nov 2015 13:01:30 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12416574">THRIFT-363</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12439012">HBASE-1933</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12444554">MAPREDUCE-1352</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12429727" name="HBASE-1433.patch" size="41512" author="kaykay.unique" created="Fri, 8 Jan 2010 07:29:40 +0000"/>
                            <attachment id="12429702" name="HBASE-1433.patch" size="41258" author="kaykay.unique" created="Fri, 8 Jan 2010 01:50:31 +0000"/>
                            <attachment id="12429670" name="HBASE-1433.patch" size="39839" author="kaykay.unique" created="Thu, 7 Jan 2010 20:29:06 +0000"/>
                            <attachment id="12429623" name="HBASE-1433.patch" size="42415" author="kaykay.unique" created="Thu, 7 Jan 2010 05:04:35 +0000"/>
                            <attachment id="12429469" name="HBASE-1433.patch" size="38714" author="kaykay.unique" created="Tue, 5 Jan 2010 20:10:49 +0000"/>
                            <attachment id="12429468" name="HBASE-1433.patch" size="39882" author="kaykay.unique" created="Tue, 5 Jan 2010 20:08:57 +0000"/>
                            <attachment id="12429432" name="HBASE-1433.patch" size="38779" author="kaykay.unique" created="Tue, 5 Jan 2010 09:15:49 +0000"/>
                            <attachment id="12429281" name="HBASE-1433.patch" size="50064" author="kaykay.unique" created="Sat, 2 Jan 2010 19:31:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 2 Jan 2010 07:48:29 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32140</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10342"><![CDATA[Incompatible change]]></customfieldvalue>
    <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hd8f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99406</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>