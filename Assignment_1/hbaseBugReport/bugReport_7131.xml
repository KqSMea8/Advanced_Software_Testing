<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:42:55 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-7131/HBASE-7131.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-7131] Race condition after table is re-enabled: regions are incorrectly reported as being available.</title>
                <link>https://issues.apache.org/jira/browse/HBASE-7131</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;For a table that is re-enabled shortly after it is disabled, regions that are reported to be online are not. This is manifested by a flush attempt throwing a NotServingRegion exception despite all regions from the original table reporting that they are online.&lt;/p&gt;

&lt;p&gt;I have a test in place that verifies this flaky behavior. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12615411">HBASE-7131</key>
            <summary>Race condition after table is re-enabled: regions are incorrectly reported as being available.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="jxiang">Jimmy Xiang</assignee>
                                    <reporter username="aleksshulman">Aleksandr Shulman</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Nov 2012 01:32:35 +0000</created>
                <updated>Thu, 15 Nov 2012 19:52:01 +0000</updated>
                            <resolved>Sun, 11 Nov 2012 03:49:45 +0000</resolved>
                                    <version>0.95.2</version>
                                                    <component>test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13493675" author="aleksshulman" created="Fri, 9 Nov 2012 02:03:07 +0000"  >&lt;p&gt;Test to verify the fix. Right now it is flaky (which demonstrates the bug).&lt;/p&gt;</comment>
                            <comment id="13494130" author="ram_krish" created="Fri, 9 Nov 2012 17:16:24 +0000"  >&lt;p&gt;Present in 0.94 also i think.&lt;/p&gt;</comment>
                            <comment id="13494406" author="jxiang" created="Fri, 9 Nov 2012 23:08:58 +0000"  >&lt;p&gt;Thanks for reporting this issue. It is a test problem.  I will fix the test case you uploaded.&lt;/p&gt;</comment>
                            <comment id="13494425" author="aleksshulman" created="Fri, 9 Nov 2012 23:33:31 +0000"  >&lt;p&gt;Can you elaborate?&lt;/p&gt;</comment>
                            <comment id="13494433" author="jxiang" created="Fri, 9 Nov 2012 23:40:10 +0000"  >&lt;p&gt;After the table is re-enabled, the region could be assigned to a different region server.  However, the HBase client caches the old connection, that&apos;s why the NotServingRegion exception.  Once you add a line to clear the region cache, then it should work as expected:&lt;/p&gt;

&lt;p&gt;original.getConnection().clearRegionCache();&lt;/p&gt;

&lt;p&gt;I was thinking how should the HBase client to deal with such scenario better.&lt;/p&gt;</comment>
                            <comment id="13494497" author="aleksshulman" created="Sat, 10 Nov 2012 01:40:31 +0000"  >&lt;p&gt;Good call. I tried your fix and it stopped the flakiness, with 40 consecutive successful runs. &lt;/p&gt;

&lt;p&gt;Perhaps we should clear the region cache automatically after a table is enabled or disabled?&lt;/p&gt;</comment>
                            <comment id="13494506" author="hadoopqa" created="Sat, 10 Nov 2012 01:47:48 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12552920/trunk-7131.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12552920/trunk-7131.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 87 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 16 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3295//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3295//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3295//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3295//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3295//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3295//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3295//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3295//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3295//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3295//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3295//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3295//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3295//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3295//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3295//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3295//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13494584" author="ram_krish" created="Sat, 10 Nov 2012 07:36:05 +0000"  >&lt;p&gt;Yes Jimmy.  This is what i observed yesterday. It should be done automatically i suppose. &lt;/p&gt;</comment>
                            <comment id="13494821" author="jxiang" created="Sun, 11 Nov 2012 03:49:45 +0000"  >&lt;p&gt;Close this issue as Not A Problem.  Filed a new issue &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7144&quot; title=&quot;Client should not retry the same server on NotServingRegionException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7144&quot;&gt;&lt;del&gt;HBASE-7144&lt;/del&gt;&lt;/a&gt; on the retry issue.  Will re-use the same test on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7144&quot; title=&quot;Client should not retry the same server on NotServingRegionException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7144&quot;&gt;&lt;del&gt;HBASE-7144&lt;/del&gt;&lt;/a&gt;, without clean the region cache.&lt;/p&gt;</comment>
                            <comment id="13494822" author="jxiang" created="Sun, 11 Nov 2012 03:51:45 +0000"  >&lt;p&gt;@Ram, yes, it should be done automatically.  I will look into it in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7144&quot; title=&quot;Client should not retry the same server on NotServingRegionException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7144&quot;&gt;&lt;del&gt;HBASE-7144&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;@Aleks, thanks for verifying the test.  We will use the same test in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7144&quot; title=&quot;Client should not retry the same server on NotServingRegionException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7144&quot;&gt;&lt;del&gt;HBASE-7144&lt;/del&gt;&lt;/a&gt;, without region cache clean.&lt;/p&gt;</comment>
                            <comment id="13498283" author="aleksshulman" created="Thu, 15 Nov 2012 19:52:01 +0000"  >&lt;p&gt;No problem. Thanks everyone for looking into this issue thoroughly.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12615624">HBASE-7144</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12552752" name="HBase-7131-v1.patch" size="5387" author="aleksshulman" created="Fri, 9 Nov 2012 02:03:07 +0000"/>
                            <attachment id="12552920" name="trunk-7131.patch" size="7843" author="jxiang" created="Fri, 9 Nov 2012 23:39:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 9 Nov 2012 17:16:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>256689</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 5 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0iqfb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>107375</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>