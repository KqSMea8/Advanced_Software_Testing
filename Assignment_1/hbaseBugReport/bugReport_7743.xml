<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:48:39 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-7743/HBASE-7743.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-7743] Replace *SortReducers with Hadoop Secondary Sort</title>
                <link>https://issues.apache.org/jira/browse/HBASE-7743</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The mapreduce package provides two Reducer implementations, KeyValueSortReducer and PutSortReducer, which are used by Import, ImportTsv, and WALPlayer in conjunction with the HFileOutputFormat. Both of these implementations make use of a TreeSet to sort values matching a key. This reducer will OOM when rows are large.&lt;/p&gt;

&lt;p&gt;A better solution would be to implement secondary sort of the values. That way hadoop sorts the records, spilling to disk when necessary.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12630488">HBASE-7743</key>
            <summary>Replace *SortReducers with Hadoop Secondary Sort</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12636666">HBASE-8084</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ndimiduk">Nick Dimiduk</reporter>
                        <labels>
                    </labels>
                <created>Sat, 2 Feb 2013 01:10:26 +0000</created>
                <updated>Sun, 6 Mar 2016 01:10:11 +0000</updated>
                                                            <fixVersion>2.0.0</fixVersion>
                                    <component>mapreduce</component>
                    <component>Performance</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13592753" author="ndimiduk" created="Mon, 4 Mar 2013 22:37:19 +0000"  >&lt;blockquote&gt;&lt;p&gt;I could see it going away if we emitted Key and comparator was KeyValues&apos;s Key comparator.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This quote is from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7747&quot; title=&quot;Import tools should use a combiner to merge Puts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7747&quot;&gt;&lt;del&gt;HBASE-7747&lt;/del&gt;&lt;/a&gt;. Can you follow-up on this comment. Is KeyValue$KeyComparator the correct comparator to use for a Hadoop secondary sort before generating an HFile or Mutation instances per row? KeyValueSortReducer uses KeyValue.COMPARATOR which is an instance of KeyValue$KVComparator.&lt;/p&gt;</comment>
                            <comment id="13797100" author="enis" created="Wed, 16 Oct 2013 18:38:30 +0000"  >&lt;p&gt;I think we need to do this sometime. Having reducers group all cells per row will not handle very large rows very well. &lt;/p&gt;</comment>
                            <comment id="13797120" author="ndimiduk" created="Wed, 16 Oct 2013 18:50:31 +0000"  >&lt;blockquote&gt;&lt;p&gt;Having reducers group all cells per row will not handle very large rows very well.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That&apos;s precisely the reason I stumbled into this in the first place &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15029690" author="chenheng" created="Fri, 27 Nov 2015 09:46:29 +0000"  >&lt;p&gt;Any progress?  &lt;br/&gt;
IMO we can remove TreeSet at least to save memory used.  &lt;br/&gt;
As for very large rows,  we can not avoid OOM because we should group all cells per row.  &lt;br/&gt;
And it is not encouraged when we design Table.  &lt;/p&gt;</comment>
                            <comment id="15181935" author="jinghe" created="Sun, 6 Mar 2016 01:09:38 +0000"  >&lt;p&gt;Linked to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13897&quot; title=&quot;OOM may occur when Import imports a row with too many KeyValues&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13897&quot;&gt;&lt;del&gt;HBASE-13897&lt;/del&gt;&lt;/a&gt; as well.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12860584">HBASE-14339</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12837609">HBASE-13897</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12914230">HBASE-14833</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 16 Oct 2013 18:38:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>310982</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            40 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ho2n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>311327</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>