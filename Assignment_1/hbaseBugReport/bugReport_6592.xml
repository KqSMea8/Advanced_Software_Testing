<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:38:07 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6592/HBASE-6592.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6592] [shell] Add means of custom formatting output by column</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6592</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;See Jacques suggestion toward end of this thread for how we should allow adding a custom formatter per column to use outputting column content in shell: &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://search-hadoop.com/m/2WxUB1fuxL11/Printing+integers+in+the+Hbase+shell&amp;amp;subj=Printing+integers+in+the+Hbase+shell&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://search-hadoop.com/m/2WxUB1fuxL11/Printing+integers+in+the+Hbase+shell&amp;amp;subj=Printing+integers+in+the+Hbase+shell&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12603661">HBASE-6592</key>
            <summary>[shell] Add means of custom formatting output by column</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="grace.huang">Jie Huang</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Aug 2012 22:39:42 +0000</created>
                <updated>Wed, 27 May 2015 17:51:48 +0000</updated>
                            <resolved>Tue, 18 Sep 2012 21:42:11 +0000</resolved>
                                                    <fixVersion>0.95.0</fixVersion>
                                    <component>shell</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13441111" author="grace.huang" created="Fri, 24 Aug 2012 12:50:15 +0000"  >&lt;p&gt;This is a quite useful feature. I tried to write a patch to implement this feature. It can accept the column name formatted as either &lt;b&gt;&quot;cf:q:toString&quot;&lt;/b&gt; or &lt;b&gt;&quot;cf:q:c(MyConverterClass).convertFun&quot;&lt;/b&gt;, and then returns the corresponding converted value in shell command. Any suggestion or comment, please let me know. Thanks.&lt;/p&gt;</comment>
                            <comment id="13448548" author="grace.huang" created="Wed, 5 Sep 2012 07:36:51 +0000"  >&lt;p&gt;Add unit-test for this new feature. Any idea?&lt;/p&gt;</comment>
                            <comment id="13450328" author="stack" created="Fri, 7 Sep 2012 04:12:32 +0000"  >&lt;p&gt;Nice feature Jie.  Can you paste in examples of it working?  How will we doc this facility in the shell?  Needs a nice fat release note too.  Good stuff.&lt;/p&gt;</comment>
                            <comment id="13450369" author="grace.huang" created="Fri, 7 Sep 2012 05:38:23 +0000"  >&lt;p&gt;Thanks for your comment. Updated the patch file. &lt;br/&gt;
Add the usage examples in the shell help for both &lt;b&gt;scan&lt;/b&gt; and &lt;b&gt;get&lt;/b&gt; as follows &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hbase&amp;gt; get &apos;t1&apos;, &apos;r1&apos;, {COLUMN =&amp;gt; [&apos;c1:toInt&apos;, &apos;c2:c(org.apache.hadoop.hbase.util.Bytes).toInt&apos;] }

hbase&amp;gt; scan &apos;t1&apos;, {COLUMNS =&amp;gt; [&apos;c1:toInt&apos;, &apos;c2:c(org.apache.hadoop.hbase.util.Bytes).toInt&apos;] }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13450389" author="stack" created="Fri, 7 Sep 2012 06:03:15 +0000"  >&lt;p&gt;I applied the patch (it looks good).  I&apos;m trying to figure how it works.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

hbase(main):011:0&amp;gt; get &apos;x&apos;, &apos;y&apos;
COLUMN                                                                                       CELL                                                                                                                                                                                                                                                                           
 x:y                                                                                         timestamp=1346997605572, value=1                                                                                                                                                                                                                                               
1 row(s) in 0.0430 seconds

hbase(main):012:0&amp;gt; get &apos;x&apos;, &apos;y&apos;, {COLUMNS =&amp;gt; [x:toInt]}
NoMethodError: undefined method `x&apos; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; #&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;:0x73d742a1&amp;gt;

hbase(main):013:0&amp;gt; get &apos;x&apos;, &apos;y&apos;, {COLUMNS =&amp;gt; [&apos;x:toInt&apos;]}
COLUMN                                                                                       CELL                                                                                                                                                                                                                                                                           
0 row(s) in 0.0120 seconds

hbase(main):014:0&amp;gt; get &apos;x&apos;, &apos;y&apos;
COLUMN                                                                                       CELL                                                                                                                                                                                                                                                                           
 x:y                                                                                         timestamp=1346997605572, value=1                                                                                                                                                                                                                                               
1 row(s) in 0.0080 seconds

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Look at above.  What am I doing wrong?  I have cf of x and I&apos;m doing x:toInt on it when i specify columns?&lt;/p&gt;

&lt;p&gt;Thanks Jie.&lt;/p&gt;</comment>
                            <comment id="13450399" author="grace.huang" created="Fri, 7 Sep 2012 06:13:15 +0000"  >&lt;p&gt;Oops. Here is a concrete example. c1 and c2 are formated as &quot;cf:qualifier:format&quot;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;get &apos;t2&apos;, &apos;r2&apos;, [ &apos;f:e_word:toString&apos;,&apos;f:f_word:toString&apos; ]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13450406" author="grace.huang" created="Fri, 7 Sep 2012 06:22:05 +0000"  >&lt;p&gt;From my understanding, the formatting converter is applied on the certain qualifier. Otherwise, it will be confusing between &quot;cf:q&quot; and &quot;cf:format&quot;. what do you think?&lt;/p&gt;</comment>
                            <comment id="13450409" author="hadoopqa" created="Fri, 7 Sep 2012 06:26:56 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12544169/hbase-6952-v1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12544169/hbase-6952-v1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    -1 javac.  The patch appears to cause mvn compile goal to fail.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to cause Findbugs (version 1.3.9) to fail.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.io.hfile.TestForceCacheImportantBlocks&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2812//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2812//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2812//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2812//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13450411" author="grace.huang" created="Fri, 7 Sep 2012 06:27:51 +0000"  >&lt;p&gt;I should have written more concretely in the help notes. Sorry.&lt;/p&gt;</comment>
                            <comment id="13450419" author="stack" created="Fri, 7 Sep 2012 06:43:28 +0000"  >&lt;p&gt;Makes sense.  Can you make it clearer that that is how it works in the shell help for get and scan?  I notice you are following the convention of the other examples and they do not give you much leeway explaining your format which is a little more involved.  What you reckon?&lt;/p&gt;</comment>
                            <comment id="13450428" author="grace.huang" created="Fri, 7 Sep 2012 06:54:08 +0000"  >&lt;p&gt;Thanks Stack. More information in the help and code comments will be expected in the coming version. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13451759" author="grace.huang" created="Mon, 10 Sep 2012 05:12:27 +0000"  >&lt;p&gt;@Stack, Update the patch file with following changes.&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;add test cases for both get and scan.&lt;/li&gt;
	&lt;li&gt;add usage examples in scan/get helper.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Here is the usage info for this feature. Anything improper, please let me know. thanks.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Besides the default &apos;toStringBinary&apos; format, scan also supports customized output format for each column. 
User can define a CONVERTER, which follows the general column spec of &quot;cf:qualifier&quot;, like &quot;cf:qualifier[:CONVERTER]&quot;. 
The CONVERTER can be formatted as 
 1. either &quot;converterFun&quot; alone (e.g, toInt, toString)
 2. or a complete pattern of &apos;c(MyConverterClass).converterFun&apos;.
While using the 1st. CONVERTER definition, it chooses &quot;org.apache.hadoop.hbase.util.Bytes&quot; as the default class.
Example: 
  hbase&amp;gt; scan &apos;t1&apos;, {COLUMNS =&amp;gt; [&apos;cf:qualifier:toInt&apos;, &apos;cf:qualifier:c(org.apache.hadoop.hbase.util.Bytes).toInt&apos;] } 

ATTENTION!The above feature cannot be applied on the entire column family, 
since it is too confusing to distinguish &quot;cf:qualifier&quot; and &quot;cf:CONVERTER&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13451774" author="hadoopqa" created="Mon, 10 Sep 2012 06:05:26 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12544431/hbase-6592-v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12544431/hbase-6592-v2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    -1 javac.  The patch appears to cause mvn compile goal to fail.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to cause Findbugs (version 1.3.9) to fail.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.client.TestShell&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2835//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2835//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2835//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2835//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13451794" author="hadoopqa" created="Mon, 10 Sep 2012 07:05:39 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12544435/hbase-6592-v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12544435/hbase-6592-v2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    -1 javac.  The patch appears to cause mvn compile goal to fail.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to cause Findbugs (version 1.3.9) to fail.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2836//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2836//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2836//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2836//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13453779" author="grace.huang" created="Wed, 12 Sep 2012 06:37:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;, any comment on the latest patch file? thanks.&lt;/p&gt;</comment>
                            <comment id="13454631" author="stack" created="Thu, 13 Sep 2012 04:50:08 +0000"  >&lt;p&gt;Sorry Jie.  Patch looks good.&lt;/p&gt;

&lt;p&gt;There are some issues w/ the help but I can fix those on commit.  When&lt;br/&gt;
you say &apos;converterFun&apos; in the help, what do you mean?  Is this a&lt;br/&gt;
place-holder for &apos;toInt&apos; or &apos;c(CLASSNAME).METHOD&apos;?&lt;/p&gt;

&lt;p&gt;I tried it and had following issue:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hbase(main):021:0&amp;gt; get &apos;x&apos;, &apos;y&apos;, &apos;x:x&apos;
COLUMN                                        CELL
 x:x                                          timestamp=1347496098567,
value=1
1 row(s) in 0.0110 seconds

hbase(main):022:0&amp;gt; get &apos;x&apos;, &apos;y&apos;, {COLUMN =&amp;gt; [&apos;x:x:toInt&apos;]}

ERROR: java.lang.IllegalArgumentException: offset (0) + length (4)
exceed the capacity of the array: 1

Here is some help &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; command:
Get row or cell contents; pass table name, row, and optionally
a dictionary of column(s), timestamp, timerange and versions. Examples:

  hbase&amp;gt; get &apos;t1&apos;, &apos;r1&apos;
  hbase&amp;gt; get &apos;t1&apos;, &apos;r1&apos;, {TIMERANGE =&amp;gt; [ts1, ts2]}
....
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;What you think I&apos;m doing wrong?  Thanks Jie.&lt;/p&gt;</comment>
                            <comment id="13455507" author="grace.huang" created="Fri, 14 Sep 2012 01:06:40 +0000"  >&lt;p&gt;Thanks Stack. &apos;c(CLASSNAME).METHOD&apos; is much better. What I mean is that the user can define their own converter function in the CONVERTER definition.  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;For that Exception, it is caused by the converter itself. We also met the similar problem while running java code. &lt;/p&gt;

&lt;p&gt;The current Bytes.toXXX needs to check the length of the byte array in advance. For example, if you want to encode &lt;b&gt;1&lt;/b&gt;(Int) to a byte array, the array will contain 4 bytes (something like &quot;\000\000\000\001&quot;). And then you are able to convert that byte array to an Int object.  You can find the corresponding code in &lt;b&gt;org.apache.hadoop.hbase.util.Bytes.java&lt;/b&gt;. In order to get rid of those &apos;\000&apos; in the ruby shell result, here we allow the end user to provide a converter to print out the proper output format as they like.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; toInt(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] bytes, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; offset, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; length) {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (length != SIZEOF_INT || offset + length &amp;gt; bytes.length) {  &lt;span class=&quot;code-comment&quot;&gt;//check the length here.
&lt;/span&gt;      &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; explainWrongLengthOrOffset(bytes, offset, length, SIZEOF_INT);
    }
    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; n = 0;
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = offset; i &amp;lt; (offset + length); i++) {
      n &amp;lt;&amp;lt;= 8;
      n ^= bytes[i] &amp;amp; 0xFF;
    }
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; n;
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Meanwhile, we also allow the end user to provide their own converter for the case as you pointed out. They can define a converter as  &apos;c(CLASSNAME).METHOD&apos; as you mentioned. &lt;/p&gt;</comment>
                            <comment id="13455537" author="grace.huang" created="Fri, 14 Sep 2012 02:28:03 +0000"  >&lt;p&gt;here list the examples in the unit test case:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    
+    define_test &lt;span class=&quot;code-quote&quot;&gt;&quot;get should support COLUMNS with value CONVERTER information&quot;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt;
+        @test_table.put(1, &lt;span class=&quot;code-quote&quot;&gt;&quot;x:c&quot;&lt;/span&gt;, [1024].pack(&apos;N&apos;))
+        @test_table.put(1, &lt;span class=&quot;code-quote&quot;&gt;&quot;x:d&quot;&lt;/span&gt;, [98].pack(&apos;N&apos;))
+        begin
+          res = @test_table._get_internal(&apos;1&apos;, [&apos;x:c:toInt&apos;], [&apos;x:d:c(org.apache.hadoop.hbase.util.Bytes).toInt&apos;])
+          assert_not_nil(res)
+          assert_kind_of(Hash, res)
+          assert_not_nil(/value=1024/.match(res[&apos;x:c&apos;]))
+          assert_not_nil(/value=98/.match(res[&apos;x:d&apos;]))
+        ensure
+          # clean up newly added columns &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; test only.
+          @test_table.delete(1, &lt;span class=&quot;code-quote&quot;&gt;&quot;x:c&quot;&lt;/span&gt;)
+          @test_table.delete(1, &lt;span class=&quot;code-quote&quot;&gt;&quot;x:d&quot;&lt;/span&gt;)
+        end
+    end

+    
+    define_test &lt;span class=&quot;code-quote&quot;&gt;&quot;scan should support COLUMNS with value CONVERTER information&quot;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt;
+      @test_table.put(1, &lt;span class=&quot;code-quote&quot;&gt;&quot;x:c&quot;&lt;/span&gt;, [1024].pack(&apos;N&apos;))
+      @test_table.put(1, &lt;span class=&quot;code-quote&quot;&gt;&quot;x:d&quot;&lt;/span&gt;, [98].pack(&apos;N&apos;))
+      begin
+        res = @test_table._scan_internal COLUMNS =&amp;gt; [&apos;x:c:toInt&apos;, &apos;x:d:c(org.apache.hadoop.hbase.util.Bytes).toInt&apos;]
+        assert_not_nil(res)
+        assert_kind_of(Hash, res)
+        assert_not_nil(/value=1024/.match(res[&apos;1&apos;][&apos;x:c&apos;]))
+        assert_not_nil(/value=98/.match(res[&apos;1&apos;][&apos;x:d&apos;]))
+      ensure
+        # clean up newly added columns &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; test only.
+        @test_table.delete(1, &lt;span class=&quot;code-quote&quot;&gt;&quot;x:c&quot;&lt;/span&gt;)
+        @test_table.delete(1, &lt;span class=&quot;code-quote&quot;&gt;&quot;x:d&quot;&lt;/span&gt;)
+    end
+end
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13455571" author="stack" created="Fri, 14 Sep 2012 04:46:04 +0000"  >&lt;p&gt;Understood.  Makes sense.  Let me play around some more....  And I&apos;ll get back to you.  I think all the pieces are here for commit.  I might adjust the doc some after playing with it.  Its a nice addition to shell Jie so lets get it in.&lt;/p&gt;</comment>
                            <comment id="13458206" author="stack" created="Tue, 18 Sep 2012 21:41:16 +0000"  >&lt;p&gt;I did an edit on the help for scan and get.  Otherwise the patch is as Jie posted.&lt;/p&gt;

&lt;p&gt;I tried it. It looks nice:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hbase(main):005:0&amp;gt; put &apos;x&apos;, &apos;x&apos;, &apos;x:x&apos;, &lt;span class=&quot;code-quote&quot;&gt;&quot;\000\000\000\001&quot;&lt;/span&gt;
0 row(s) in 0.0910 seconds

hbase(main):006:0&amp;gt; scan &apos;x&apos;
ROW                                                                              COLUMN+CELL                                                                                                                                                                                                                                  
 x                                                                               column=x:x, timestamp=1348004165894, value=\x00\x00\x00\x01                                                                                                                                                                                  
1 row(s) in 0.1050 seconds

hbase(main):007:0&amp;gt; get &apos;x&apos;, &apos;x&apos;
COLUMN                                                                           CELL                                                                                                                                                                                                                                         
 x:x                                                                             timestamp=1348004165894, value=\x00\x00\x00\x01                                                                                                                                                                                              
1 row(s) in 0.0590 seconds

hbase(main):008:0&amp;gt; get &apos;x&apos;, &apos;x&apos;, {COLUMN =&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;x:x:toInt&quot;&lt;/span&gt;}
COLUMN                                                                           CELL                                                                                                                                                                                                                                         
 x:x                                                                             timestamp=1348004165894, value=1                                                                                                                                                                                                             
1 row(s) in 0.0650 seconds

hbase(main):009:0&amp;gt; get &apos;x&apos;, &apos;x&apos;, {COLUMN =&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;x:x:c(org.apache.hadoop.hbase.util.Bytes).toInt&quot;&lt;/span&gt;}
COLUMN                                                                           CELL                                                                                                                                                                                                                                         
 x:x                                                                             timestamp=1348004165894, value=1                                                                                                                                                                                                             
1 row(s) in 0.0220 seconds
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13458207" author="stack" created="Tue, 18 Sep 2012 21:42:11 +0000"  >&lt;p&gt;Nice addition Jie.  Thanks for the patch.&lt;/p&gt;</comment>
                            <comment id="13458266" author="hudson" created="Tue, 18 Sep 2012 23:01:57 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3350 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3350/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3350/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6592&quot; title=&quot;[shell] Add means of custom formatting output by column&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6592&quot;&gt;&lt;del&gt;HBASE-6592&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;shell&amp;#93;&lt;/span&gt; Add means of custom formatting output by column (Revision 1387369)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/ruby/hbase/table.rb&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/ruby/shell/commands/get.rb&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/ruby/shell/commands/scan.rb&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/ruby/hbase/table_test.rb&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13458287" author="hudson" created="Tue, 18 Sep 2012 23:44:09 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #180 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/180/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/180/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6592&quot; title=&quot;[shell] Add means of custom formatting output by column&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6592&quot;&gt;&lt;del&gt;HBASE-6592&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;shell&amp;#93;&lt;/span&gt; Add means of custom formatting output by column (Revision 1387369)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/ruby/hbase/table.rb&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/ruby/shell/commands/get.rb&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/ruby/shell/commands/scan.rb&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/ruby/hbase/table_test.rb&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12682301">HBASE-10071</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12833119">HBASE-13788</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12545629" name="6592v3.txt" size="9224" author="stack" created="Tue, 18 Sep 2012 21:41:16 +0000"/>
                            <attachment id="12544435" name="hbase-6592-v2.patch" size="8106" author="grace.huang" created="Mon, 10 Sep 2012 06:13:47 +0000"/>
                            <attachment id="12543822" name="hbase-6592.patch" size="4074" author="grace.huang" created="Wed, 5 Sep 2012 07:36:03 +0000"/>
                            <attachment id="12544169" name="hbase-6952-v1.patch" size="5680" author="grace.huang" created="Fri, 7 Sep 2012 05:38:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 24 Aug 2012 12:50:15 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>256649</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 13 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hv7z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>102320</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>