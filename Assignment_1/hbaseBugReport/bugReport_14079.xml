<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:49:32 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-14079/HBASE-14079.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-14079] improve error message when Master fails to connect to Hadoop-auth</title>
                <link>https://issues.apache.org/jira/browse/HBASE-14079</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Current error message at INFO level doesn&apos;t give any hint about what keytab and principle are in use&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;2015-07-14 13:32:48,514 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; impl.MetricsConfig: loaded properties from hadoop-metrics2-hbase.properties&lt;br/&gt;
2015-07-14 13:32:48,640 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; impl.MetricsSystemImpl: Scheduled snapshot period at 10 second(s).&lt;br/&gt;
2015-07-14 13:32:48,640 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; impl.MetricsSystemImpl: HBase metrics system started&lt;br/&gt;
2015-07-14 13:32:48,776 ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; master.HMasterCommandLine: Master exiting&lt;br/&gt;
java.lang.RuntimeException: Failed construction of Master: class org.apache.hadoop.hbase.master.HMaster&lt;br/&gt;
        at org.apache.hadoop.hbase.master.HMaster.constructMaster(HMaster.java:2258)&lt;br/&gt;
        at org.apache.hadoop.hbase.master.HMasterCommandLine.startMaster(HMasterCommandLine.java:234)&lt;br/&gt;
        at org.apache.hadoop.hbase.master.HMasterCommandLine.run(HMasterCommandLine.java:140)&lt;br/&gt;
        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:70)&lt;br/&gt;
        at org.apache.hadoop.hbase.util.ServerCommandLine.doMain(ServerCommandLine.java:126)&lt;br/&gt;
        at org.apache.hadoop.hbase.master.HMaster.main(HMaster.java:2272)&lt;br/&gt;
Caused by: javax.security.auth.login.LoginException: Unable to obtain password from user&lt;/p&gt;

&lt;p&gt;        at com.sun.security.auth.module.Krb5LoginModule.promptForPass(Krb5LoginModule.java:856)&lt;br/&gt;
        at com.sun.security.auth.module.Krb5LoginModule.attemptAuthentication(Krb5LoginModule.java:719)&lt;br/&gt;
        at com.sun.security.auth.module.Krb5LoginModule.login(Krb5LoginModule.java:584)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:606)&lt;br/&gt;
        at javax.security.auth.login.LoginContext.invoke(LoginContext.java:762)&lt;br/&gt;
        at javax.security.auth.login.LoginContext.access$000(LoginContext.java:203)&lt;br/&gt;
        at javax.security.auth.login.LoginContext$4.run(LoginContext.java:690)&lt;br/&gt;
        at javax.security.auth.login.LoginContext$4.run(LoginContext.java:688)&lt;br/&gt;
        at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
        at javax.security.auth.login.LoginContext.invokePriv(LoginContext.java:687)&lt;br/&gt;
        at javax.security.auth.login.LoginContext.login(LoginContext.java:595)&lt;br/&gt;
        at org.apache.hadoop.security.UserGroupInformation.loginUserFromKeytab(UserGroupInformation.java:912)&lt;br/&gt;
        at org.apache.hadoop.security.SecurityUtil.login(SecurityUtil.java:242)&lt;br/&gt;
        at org.apache.hadoop.hbase.security.User$SecureHadoopUser.login(User.java:385)&lt;br/&gt;
        at org.apache.hadoop.hbase.security.User.login(User.java:252)&lt;br/&gt;
        at org.apache.hadoop.hbase.security.UserProvider.login(UserProvider.java:115)&lt;br/&gt;
        at org.apache.hadoop.hbase.master.HMaster.login(HMaster.java:464)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegionServer.&amp;lt;init&amp;gt;(HRegionServer.java:553)&lt;br/&gt;
        at org.apache.hadoop.hbase.master.HMaster.&amp;lt;init&amp;gt;(HMaster.java:351)&lt;br/&gt;
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)&lt;br/&gt;
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)&lt;br/&gt;
        at java.lang.reflect.Constructor.newInstance(Constructor.java:526)&lt;br/&gt;
        at org.apache.hadoop.hbase.master.HMaster.constructMaster(HMaster.java:2253)&lt;br/&gt;
        ... 5 more&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;increasing to DEBUG also doesn&apos;t help.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12845114">HBASE-14079</key>
            <summary>improve error message when Master fails to connect to Hadoop-auth</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="busbey">Sean Busbey</reporter>
                        <labels>
                    </labels>
                <created>Tue, 14 Jul 2015 22:53:37 +0000</created>
                <updated>Mon, 21 Sep 2015 22:25:45 +0000</updated>
                            <resolved>Mon, 21 Sep 2015 22:25:45 +0000</resolved>
                                    <version>0.94.0</version>
                    <version>0.98.0</version>
                    <version>1.0.0</version>
                    <version>1.1.0</version>
                                                    <component>master</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="14627251" author="busbey" created="Tue, 14 Jul 2015 23:09:32 +0000"  >&lt;p&gt;digging in, it looks like the Hadoop exception give use the info we want&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      login = newLoginContext(HadoopConfiguration.KEYTAB_KERBEROS_CONFIG_NAME,
            subject, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HadoopConfiguration());
      start = Time.now();
      login.login();
      metrics.loginSuccess.add(Time.now() - start);
      loginUser = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; UserGroupInformation(subject);
      loginUser.setLogin(login);
      loginUser.setAuthenticationMethod(AuthenticationMethod.KERBEROS);
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (LoginException le) {
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (start &amp;gt; 0) { 
        metrics.loginFailure.add(Time.now() - start);
      }
      &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IOException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Login failure &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &quot;&lt;/span&gt; + user + &lt;span class=&quot;code-quote&quot;&gt;&quot; from keytab &quot;&lt;/span&gt; + 
                            path, le);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Unfortunately, when that IOException gets all the way back up to us we strip off the outer IOException and discard it.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; HMaster constructMaster(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;lt;? &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; HMaster&amp;gt; masterClass,
      &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Configuration conf, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; CoordinatedStateManager cp)  {
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      Constructor&amp;lt;? &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; HMaster&amp;gt; c =
        masterClass.getConstructor(Configuration.class, CoordinatedStateManager.class);
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; c.newInstance(conf, cp);
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (InvocationTargetException ite) {
      Throwable target = ite.getTargetException() != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;?
        ite.getTargetException(): ite;
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (target.getCause() != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) target = target.getCause();
      &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RuntimeException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Failed construction of Master: &quot;&lt;/span&gt; +
        masterClass.toString(), target);
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
      &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RuntimeException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Failed construction of Master: &quot;&lt;/span&gt; +
        masterClass.toString() + ((e.getCause() != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)?
          e.getCause().getMessage(): &quot;&quot;), e);
    } 
  }   
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This looks like a bug. We should at least log the original exception.&lt;/p&gt;</comment>
                            <comment id="14642126" author="mwarhaftig" created="Sun, 26 Jul 2015 23:06:32 +0000"  >&lt;p&gt;In &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14078&quot; title=&quot;improve error message when HMaster can&amp;#39;t bind to port&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14078&quot;&gt;&lt;del&gt;HBASE-14078&lt;/del&gt;&lt;/a&gt; the catch logic in HMaster#constructMaster is improved to log all exceptions (including chained).  Linked the two tickets together as the &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14078&quot; title=&quot;improve error message when HMaster can&amp;#39;t bind to port&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14078&quot;&gt;&lt;del&gt;HBASE-14078&lt;/del&gt;&lt;/a&gt; patch should resolve this ticket too.&lt;/p&gt;</comment>
                            <comment id="14901529" author="apurtell" created="Mon, 21 Sep 2015 22:25:45 +0000"  >&lt;p&gt;Resolving as dup. Please reopen if I&apos;m mistaken&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12845086">HBASE-14078</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12466475">HBASE-2692</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 26 Jul 2015 23:06:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 12 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2h9c7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>