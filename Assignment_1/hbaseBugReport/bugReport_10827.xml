<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:17:32 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-10827/HBASE-10827.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-10827] Making HBase use multiple ethernet cards will improve the performance</title>
                <link>https://issues.apache.org/jira/browse/HBASE-10827</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;In our online cluster, usually there are multiple ethernet cards in one machine, one for outer network, one for inner network. But the current version of HBase can not use all of them which waste the network bandwidth of one ethernet card. If we make HBase use multiple ethernet cards concurrently, the performance of HBase will be improved.&lt;br/&gt;
So I did the work, and test a simple scenario:&lt;br/&gt;
8 clients scan the same region data from a different machine with two ethernet cards.(machine of regionserver also with two ethernet cards)&lt;br/&gt;
The Environment is:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;I start HBase cluster with a master, a regionserver, a zookeeper in a machine.&lt;/li&gt;
	&lt;li&gt;HDFS cluster with a Namenode, a datanode, a secondary namenode is also started in the same machine.&lt;/li&gt;
	&lt;li&gt;8 client run on different machine.&lt;/li&gt;
	&lt;li&gt;all data local&lt;/li&gt;
	&lt;li&gt;22GB data size&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I measure the performance before and after the optimization.&lt;br/&gt;
The results are:&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;client&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;time before optimization&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;time after optimization&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 8 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 1665.07s &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 1242.45s &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;p&gt;The patch is uploaded. What I did is the following:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;create new RPC getAllServerAddress which obtain all the addresses of regionserver&lt;/li&gt;
	&lt;li&gt;client call the RPC to obtain the addresses, choose one of them randomly, validate the address and use the address as the regionLocation address&lt;/li&gt;
	&lt;li&gt;add a cache serverAddressMap to avoid redundant RPC.&lt;/li&gt;
&lt;/ol&gt;
</description>
                <environment></environment>
        <key id="12703430">HBASE-10827</key>
            <summary>Making HBase use multiple ethernet cards will improve the performance</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png" description="A patch for this issue has been uploaded to JIRA by a contributor.">Patch Available</status>
                    <statusCategory id="4" key="indeterminate" colorName="yellow"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="zhaojianbo">zhaojianbo</assignee>
                                    <reporter username="zhaojianbo">zhaojianbo</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 Mar 2014 11:05:31 +0000</created>
                <updated>Thu, 27 Mar 2014 16:28:28 +0000</updated>
                                            <version>0.99.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13946613" author="jmhsieh" created="Tue, 25 Mar 2014 14:38:50 +0000"  >&lt;p&gt;Why not just use port bonding / LACP?&lt;/p&gt;</comment>
                            <comment id="13947470" author="zhaojianbo" created="Wed, 26 Mar 2014 02:23:06 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Why not just use port bonding / LACP?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;You mean that two ethernet cards are bound together. Logically, use them as a ethernet card?&lt;/p&gt;</comment>
                            <comment id="13947945" author="jmhsieh" created="Wed, 26 Mar 2014 14:12:32 +0000"  >&lt;p&gt;Yes.  Why not use that mechanism instead?&lt;/p&gt;</comment>
                            <comment id="13949050" author="zhaojianbo" created="Thu, 27 Mar 2014 08:57:14 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Yes. Why not use that mechanism instead?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;As far as I know, there are some limitation in that mechanism. It seems that both of the two ethernet cards need to be the same configuration, and in addition, the configuration of network structure and switch are complicated, and It needs some operation and maintenance work. So I think the implementation in software is more adaptable, flexible and needs less operation work. &lt;br/&gt;
correct me if I am wrong.  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13949523" author="hadoopqa" created="Thu, 27 Mar 2014 16:28:28 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12636663/HBASE-10827-0.98-branch.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12636663/HBASE-10827-0.98-branch.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12636663&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9113//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9113//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12636663" name="HBASE-10827-0.98-branch.patch" size="63233" author="zhaojianbo" created="Tue, 25 Mar 2014 11:14:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 25 Mar 2014 14:38:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>381765</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 38 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1trvb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>382040</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>