<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:27:00 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HDFS-6946/HDFS-6946.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HDFS-6946] TestBalancerWithSaslDataTransfer fails in trunk</title>
                <link>https://issues.apache.org/jira/browse/HDFS-6946</link>
                <project id="12310942" key="HDFS">Hadoop HDFS</project>
                    <description>&lt;p&gt;From build #1849 :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
REGRESSION:  org.apache.hadoop.hdfs.server.balancer.TestBalancerWithSaslDataTransfer.testBalancer0Integrity

Error Message:
Cluster failed to reached expected values of totalSpace (current: 750, expected: 750), or usedSpace (current: 140, expected: 150), in more than 40000 msec.

Stack Trace:
java.util.concurrent.TimeoutException: Cluster failed to reached expected values of totalSpace (current: 750, expected: 750), or usedSpace (current: 140, expected: 150), in more than 40000 msec.
        at org.apache.hadoop.hdfs.server.balancer.TestBalancer.waitForHeartBeat(TestBalancer.java:253)
        at org.apache.hadoop.hdfs.server.balancer.TestBalancer.runBalancer(TestBalancer.java:578)
        at org.apache.hadoop.hdfs.server.balancer.TestBalancer.doTest(TestBalancer.java:551)
        at org.apache.hadoop.hdfs.server.balancer.TestBalancer.doTest(TestBalancer.java:437)
        at org.apache.hadoop.hdfs.server.balancer.TestBalancer.oneNodeTest(TestBalancer.java:645)
        at org.apache.hadoop.hdfs.server.balancer.TestBalancer.testBalancer0Internal(TestBalancer.java:759)
        at org.apache.hadoop.hdfs.server.balancer.TestBalancerWithSaslDataTransfer.testBalancer0Integrity(TestBalancerWithSaslDataTransfer.java:34)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12736806">HDFS-6946</key>
            <summary>TestBalancerWithSaslDataTransfer fails in trunk</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="schu">Stephen Chu</assignee>
                                    <reporter username="yuzhihong@gmail.com">Ted Yu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Aug 2014 13:58:19 +0000</created>
                <updated>Sat, 14 Mar 2015 04:54:23 +0000</updated>
                            <resolved>Sat, 14 Mar 2015 04:54:23 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="14111455" author="schu" created="Tue, 26 Aug 2014 22:18:25 +0000"  >&lt;p&gt;Similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-5803&quot; title=&quot;TestBalancer.testBalancer0 fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-5803&quot;&gt;&lt;del&gt;HDFS-5803&lt;/del&gt;&lt;/a&gt;, where TestBalancer#TIMEOUT was bumped from 20s to 40s.&lt;/p&gt;

&lt;p&gt;We can run TestBalancer between current trunk and the time when &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-5803&quot; title=&quot;TestBalancer.testBalancer0 fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-5803&quot;&gt;&lt;del&gt;HDFS-5803&lt;/del&gt;&lt;/a&gt; was fixed to see if there is a performance regression while taking into account test code changes. If there isn&apos;t a regression, perhaps we should bump up the timeout.&lt;/p&gt;</comment>
                            <comment id="14112715" author="schu" created="Wed, 27 Aug 2014 19:45:48 +0000"  >&lt;p&gt;I ran TestBalancerWithSaslDataTransfer multiple times with a build of current trunk and a build of when the test was first introduced (&lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-2856&quot; title=&quot;Fix block protocol so that Datanodes don&amp;#39;t require root or jsvc&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-2856&quot;&gt;&lt;del&gt;HDFS-2856&lt;/del&gt;&lt;/a&gt;, git hash 8d5e8c860ed361ed792affcfe06f1a34b017e421).&lt;/p&gt;

&lt;p&gt;git hash 8d5e8c860ed361ed792affcfe06f1a34b017e421 (sec):&lt;br/&gt;
90.254&lt;br/&gt;
84.332&lt;br/&gt;
73.909&lt;br/&gt;
74.057&lt;br/&gt;
84.397&lt;br/&gt;
76.889&lt;br/&gt;
83.687 sec&lt;/p&gt;


&lt;p&gt;Current trunk (sec):&lt;br/&gt;
79.968&lt;br/&gt;
62.116 &lt;br/&gt;
73.788&lt;br/&gt;
79.336&lt;br/&gt;
68.545&lt;br/&gt;
76.846&lt;br/&gt;
70.014&lt;/p&gt;

&lt;p&gt;There doesn&apos;t seem to be a performance regression, and the test cases in both versions look the same. Today (8/27/2014) Hdfs-trunk build had a test failure because of timing out of 40s as well in &lt;tt&gt;TestBlockTokenWithDFS.testEnd2End&lt;/tt&gt;. &lt;/p&gt;

&lt;p&gt;I think we should bump up &lt;tt&gt;TestBalancer#TIMEOUT&lt;/tt&gt; from 40s to 60s. Attaching patch.&lt;/p&gt;</comment>
                            <comment id="14112973" author="hadoopqa" created="Wed, 27 Aug 2014 22:33:30 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12664726/HDFS-6946.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12664726/HDFS-6946.1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 eclipse:eclipse&lt;/font&gt;.  The patch built with eclipse:eclipse.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests in hadoop-hdfs-project/hadoop-hdfs:&lt;/p&gt;

&lt;p&gt;                  org.apache.hadoop.security.TestRefreshUserMappings&lt;br/&gt;
                  org.apache.hadoop.hdfs.server.namenode.ha.TestPipelinesFailover&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 contrib tests&lt;/font&gt;.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HDFS-Build/7791//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HDFS-Build/7791//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HDFS-Build/7791//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HDFS-Build/7791//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14112995" author="schu" created="Wed, 27 Aug 2014 22:46:08 +0000"  >&lt;p&gt;The two failing tests above are not due to the timeout change. I re-ran them locally successfully.&lt;/p&gt;</comment>
                            <comment id="14114095" author="schu" created="Thu, 28 Aug 2014 18:16:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=airbots&quot; class=&quot;user-hover&quot; rel=&quot;airbots&quot;&gt;Chen He&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kihwal&quot; class=&quot;user-hover&quot; rel=&quot;kihwal&quot;&gt;Kihwal Lee&lt;/a&gt;, any thoughts on this one? Checking because you worked on &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-5803&quot; title=&quot;TestBalancer.testBalancer0 fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-5803&quot;&gt;&lt;del&gt;HDFS-5803&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14114194" author="airbots" created="Thu, 28 Aug 2014 19:15:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=schu&quot; class=&quot;user-hover&quot; rel=&quot;schu&quot;&gt;Stephen Chu&lt;/a&gt; can you provide the full log if this error? Balancer test fails because of many reasons and some errors happen intermittently. &lt;/p&gt;</comment>
                            <comment id="14114201" author="schu" created="Thu, 28 Aug 2014 19:21:33 +0000"  >&lt;p&gt;Attaching testBalancer0Integrity failure log from jenkins report. Will go through them again too.&lt;/p&gt;</comment>
                            <comment id="14114205" author="hadoopqa" created="Thu, 28 Aug 2014 19:23:02 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12665044/testBalancer0Integrity-failure.log&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12665044/testBalancer0Integrity-failure.log&lt;/a&gt;&lt;br/&gt;
  against trunk revision c4c9a78.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HDFS-Build/7831//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HDFS-Build/7831//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14114210" author="airbots" created="Thu, 28 Aug 2014 19:25:54 +0000"  >&lt;p&gt;TestRefreshUserMappings errors because of &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11020&quot; title=&quot;TestRefreshUserMappings fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11020&quot;&gt;&lt;del&gt;HADOOP-11020&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14317070" author="yuzhihong@gmail.com" created="Wed, 11 Feb 2015 22:10:18 +0000"  >&lt;p&gt;This test hasn&apos;t failed in recent builds.&lt;/p&gt;</comment>
                            <comment id="14317202" author="hadoopqa" created="Wed, 11 Feb 2015 23:29:43 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12665044/testBalancer0Integrity-failure.log&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12665044/testBalancer0Integrity-failure.log&lt;/a&gt;&lt;br/&gt;
  against trunk revision 085b1e2.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HDFS-Build/9547//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HDFS-Build/9547//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12664726" name="HDFS-6946.1.patch" size="851" author="schu" created="Wed, 27 Aug 2014 19:45:48 +0000"/>
                            <attachment id="12665044" name="testBalancer0Integrity-failure.log" size="175626" author="schu" created="Thu, 28 Aug 2014 19:21:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 26 Aug 2014 22:18:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 44 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1zcc7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>