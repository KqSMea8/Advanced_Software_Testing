<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:34:57 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6234/HBASE-6234.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6234] Move simple KeyValue tests to hbase-common module</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6234</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;TestKeyValue, LoadTestKVGenerator, and TestLoadTestKVGenerator should move up to hbase-common.  This brings MD5Hash up as a dependency as well.&lt;/p&gt;

&lt;p&gt;To play well with Maven as discussed in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6162&quot; title=&quot;Move KeyValue to hbase-common module&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6162&quot;&gt;&lt;del&gt;HBASE-6162&lt;/del&gt;&lt;/a&gt;, I moved LoadTestKVGenerator from the src/test folder to src/main folder so that tests in other modules can see it.  A couple other files&apos; import statements were affected by this.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12595019">HBASE-6234</key>
            <summary>Move simple KeyValue tests to hbase-common module</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mcorgan">Matt Corgan</assignee>
                                    <reporter username="mcorgan">Matt Corgan</reporter>
                        <labels>
                    </labels>
                <created>Mon, 18 Jun 2012 21:14:35 +0000</created>
                <updated>Mon, 23 Sep 2013 18:30:40 +0000</updated>
                            <resolved>Fri, 31 Aug 2012 05:14:56 +0000</resolved>
                                    <version>0.95.2</version>
                                    <fixVersion>0.95.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13396257" author="mcorgan" created="Mon, 18 Jun 2012 21:15:50 +0000"  >&lt;p&gt;Attaching v1 patch matching the issue description.&lt;/p&gt;</comment>
                            <comment id="13396307" author="jesse_yates" created="Mon, 18 Jun 2012 22:12:11 +0000"  >&lt;p&gt;Looks reasonable to me. If it tests fine, I&apos;m +1. Also, I think this is a good paradigm to follow for moving things up.&lt;/p&gt;</comment>
                            <comment id="13445144" author="mdrzal" created="Thu, 30 Aug 2012 18:01:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mcorgan&quot; class=&quot;user-hover&quot; rel=&quot;mcorgan&quot;&gt;Matt Corgan&lt;/a&gt; can you hit the submit patch button to get this going?  It looks like it is stalled.  Seems like a good fix to me.&lt;/p&gt;</comment>
                            <comment id="13445157" author="mcorgan" created="Thu, 30 Aug 2012 18:18:38 +0000"  >&lt;p&gt;i think i need to rebase it.  will look into it&lt;/p&gt;</comment>
                            <comment id="13445233" author="mcorgan" created="Thu, 30 Aug 2012 19:40:56 +0000"  >&lt;p&gt;i think i can remove this from TestKeyValue since it&apos;s moving out of the big test suite?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  @org.junit.Rule
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; org.apache.hadoop.hbase.ResourceCheckerJUnitRule cu =
    &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; org.apache.hadoop.hbase.ResourceCheckerJUnitRule();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13445281" author="nkeywal" created="Thu, 30 Aug 2012 20:43:10 +0000"  >&lt;p&gt;I would recommend to keep it, it does no harm and it makes it consistent with the rest.&lt;br/&gt;
It was used a few months to sort out hadoop-qa misconfiguration + some issues with the tests. Hopefully we will never need it again, but who knows &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13445413" author="mcorgan" created="Thu, 30 Aug 2012 23:14:27 +0000"  >&lt;p&gt;Sorry - it&apos;s been a couple months so i forgot the reasoning behind these things.  The problem is that ResourceCheckerJUnitRule depends on ResourceChecker, which depends on HConnectionTestingUtility, which depends on a bunch of things like HRegionInfo... quick guess is that we should eventually cut the cord between ResourceChecker and HConnectionTestingUtility, but i&apos;ll have to punt that to another jira.&lt;/p&gt;

&lt;p&gt;Do you think it&apos;s ok to drop it for now NK so we can pull up the other stuff?  I don&apos;t really have an opinion since i don&apos;t know what it does (any better than a guess).  I will submit the patch without it since i already made it.&lt;/p&gt;</comment>
                            <comment id="13445501" author="hadoopqa" created="Fri, 31 Aug 2012 00:24:30 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12543188/HBASE-6234-v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12543188/HBASE-6234-v2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 21 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated 110 warning messages.&lt;/p&gt;

&lt;p&gt;    -1 javac.  The applied patch generated 5 javac compiler warnings (more than the trunk&apos;s current 4 warnings).&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 11 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2743//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2743//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2743//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2743//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2743//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2743//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2743//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2743//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2743//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2743//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2743//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2743//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2743//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2743//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13445576" author="mcorgan" created="Fri, 31 Aug 2012 02:13:17 +0000"  >&lt;p&gt;Scary output as usual, but i don&apos;t think it explicitly failed any tests.  Jenkins says 12 skipped.&lt;/p&gt;</comment>
                            <comment id="13445667" author="stack" created="Fri, 31 Aug 2012 05:05:29 +0000"  >&lt;p&gt;Two tests hung:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
pynchon:trunk stack$ ./dev-support/findHangingTest.sh https:&lt;span class=&quot;code-comment&quot;&gt;//builds.apache.org/job/PreCommit-HBASE-Build/2743//console
&lt;/span&gt;  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100  159k    0  159k    0     0   166k      0 --:--:-- --:--:-- --:--:--  232k
Hanging test: Running org.apache.hadoop.hbase.zookeeper.TestZooKeeperNodeTracker
Hanging test: Running org.apache.hadoop.hbase.regionserver.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I tried them locally and passed.  So committing...&lt;/p&gt;</comment>
                            <comment id="13445674" author="stack" created="Fri, 31 Aug 2012 05:14:56 +0000"  >&lt;p&gt;Committed to trunk.  Thanks for the patch Matt.&lt;/p&gt;</comment>
                            <comment id="13445700" author="nkeywal" created="Fri, 31 Aug 2012 05:54:48 +0000"  >&lt;blockquote&gt;&lt;p&gt;Do you think it&apos;s ok to drop it for now NK so we can pull up the other stuff? I don&apos;t really have an opinion since i don&apos;t know what it does (any better than a guess). I will submit the patch without it since i already made it.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;+1 to drop it if it&apos;s not trivial to keep it.&lt;/p&gt;</comment>
                            <comment id="13445712" author="jesse_yates" created="Fri, 31 Aug 2012 06:17:11 +0000"  >&lt;p&gt;I had the same issue moving bytes across. Its not elegant and we should consider doing a ticket where we break out the resource checker into the simple stuff (threads, pools, etc) and then a more complete one that digs into the hconnections, etc. that we use in hbase-server and its dependencies.&lt;/p&gt;</comment>
                            <comment id="13445758" author="nkeywal" created="Fri, 31 Aug 2012 08:05:56 +0000"  >&lt;p&gt;I would not have solved the hadoop qa issues (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4965&quot; title=&quot;Monitor the open file descriptors and the threads counters during the unit tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4965&quot;&gt;&lt;del&gt;HBASE-4965&lt;/del&gt;&lt;/a&gt;) without it. This said, I haven&apos;t used much since (but sometimes I do), so we can as well consider dropping it. Both options (improve / remove) are fine for me if &quot;keep as it is&quot; is not possible.&lt;/p&gt;</comment>
                            <comment id="13446123" author="jesse_yates" created="Fri, 31 Aug 2012 16:49:24 +0000"  >&lt;p&gt;File &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6702&quot; title=&quot;ResourceChecker refinement&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6702&quot;&gt;&lt;del&gt;HBASE-6702&lt;/del&gt;&lt;/a&gt; for this issue.&lt;/p&gt;</comment>
                            <comment id="13446125" author="stack" created="Fri, 31 Aug 2012 16:50:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nkeywal&quot; class=&quot;user-hover&quot; rel=&quot;nkeywal&quot;&gt;Nicolas Liochon&lt;/a&gt; What if hbase-common did not include these lines but hbase-server and all its dependencies did.  We could still do thread and file descriptor counts right?  But it&apos;d just be for the tests that include these lines?  So, we would be losing all-test coverage?  Could we make it so all tests in hbase-common all run in the one JVM and require that they are all &apos;small&apos; as per your categorization?  Would this help contain the damage hbase-common unit tests could do?  i.e. if in their own jvm, thread leakage or file descriptor counts would impinge little on other tests run... and if a problem, because all in one jvm, should be easy enough debugging leakage (you have tools already that could be used here that are other than the lines added to unit test files?).&lt;/p&gt;</comment>
                            <comment id="13446172" author="mcorgan" created="Fri, 31 Aug 2012 17:48:42 +0000"  >&lt;p&gt;btw - i am all for having that kind of test monitoring code thoroughly used in all the tests.  I justified dropping it in this case because it was the only thing standing in the way of an otherwise clean module refactoring... i think it&apos;s much safer to keep the refactorings coming steadily in small patches than to try to yank apart the whole code base at once.  Seemed like a good place to snip some dependencies without major collateral damage.  We should already be thinking of how to clean up the damage (as Jesse already is in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6702&quot; title=&quot;ResourceChecker refinement&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6702&quot;&gt;&lt;del&gt;HBASE-6702&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;Along the lines of what stack says above, the tests in hbase-common should generally (maybe without exception?) not use external resources like the minicluster or the filesystem.  If we find ourselves wanting to put minicluster tests in hbase-common, i would encourage us to further split the hbase-common module so that we retain some central module that holds the crown-jewels of hbase (KeyValue, Bytes, comparators, etc).&lt;/p&gt;</comment>
                            <comment id="13446173" author="nkeywal" created="Fri, 31 Aug 2012 17:48:52 +0000"  >&lt;blockquote&gt;&lt;p&gt;the single line itself&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;It main purpose was that it&apos;s executed within the JVM on hadoop-qa. That&apos;s how we found that our ulimit were not taking into account on hadoop-qa. I now use it to see that the test has actually started &amp;amp; finished in the logs. There&apos;s no impact on test coverage if we don&apos;t have it. I would be lazy here I think: don&apos;t spend time to remove it when it works, don&apos;t spend time to make it work when it doesn&apos;t. We fix/remove it when (if) we need it.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;hbase-common all run in the one JVM&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;It would work short term imho. If we could, it would be better not to have this as a prerequiste, we can imagine having a lot of stuff there, with maybe long running tests or tests playing with the environment (typical stuff: using defaultEdgeEnvironment to manipulate the time needs to be done in isolation as it&apos;s a static). In the same area, if we share code around thread management, with extreme/error cases (too many threads &amp;amp; so on), it&apos;s better to do it on another jvm. I guess there are other example&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Leakage tools&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes, really the main advantage is that it runs on hadoop qa as well. &lt;/p&gt;</comment>
                            <comment id="13775069" author="stack" created="Mon, 23 Sep 2013 18:30:40 +0000"  >&lt;p&gt;Marking closed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12532460" name="HBASE-6234-v1.patch" size="62082" author="mcorgan" created="Mon, 18 Jun 2012 21:15:50 +0000"/>
                            <attachment id="12543188" name="HBASE-6234-v2.patch" size="68352" author="mcorgan" created="Thu, 30 Aug 2012 23:17:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 18 Jun 2012 22:12:11 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>256572</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0huqv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>102243</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>