<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:40:29 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6858/HBASE-6858.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6858] Fix the incorrect BADVERSION checking in the recoverable zookeeper</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6858</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Thanks for Stack and Kaka&apos;s reporting that there is a bug in the recoverable zookeeper when handling BADVERSION exception for setData(). It shall compare the ID payload of the data in zk with its own identifier.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12608693">HBASE-6858</key>
            <summary>Fix the incorrect BADVERSION checking in the recoverable zookeeper</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="liyin">Liyin Tang</assignee>
                                    <reporter username="liyin">Liyin Tang</reporter>
                        <labels>
                    </labels>
                <created>Fri, 21 Sep 2012 20:56:40 +0000</created>
                <updated>Mon, 23 Sep 2013 18:31:27 +0000</updated>
                            <resolved>Tue, 16 Oct 2012 18:50:21 +0000</resolved>
                                                    <fixVersion>0.95.0</fixVersion>
                                    <component>Zookeeper</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                <comments>
                            <comment id="13460823" author="stack" created="Fri, 21 Sep 2012 21:16:32 +0000"  >&lt;p&gt;+1 on patch.&lt;/p&gt;</comment>
                            <comment id="13460825" author="jxiang" created="Fri, 21 Sep 2012 21:21:13 +0000"  >&lt;p&gt;We should add the MAGIC_OFFSET and ID_OFFSET.  ID_OFFSET is one byte off.&lt;/p&gt;</comment>
                            <comment id="13460837" author="lhofhansl" created="Fri, 21 Sep 2012 21:38:07 +0000"  >&lt;p&gt;Is that a 0.96 only issue?&lt;/p&gt;</comment>
                            <comment id="13460838" author="stack" created="Fri, 21 Sep 2012 21:38:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt; No&lt;/p&gt;</comment>
                            <comment id="13460853" author="lhofhansl" created="Fri, 21 Sep 2012 21:47:41 +0000"  >&lt;p&gt;+1 (for 0.94 as well)&lt;/p&gt;</comment>
                            <comment id="13460855" author="liyin" created="Fri, 21 Sep 2012 21:48:10 +0000"  >&lt;p&gt;Addressed Jimmy&apos;s comments!  Thanks Jimmy !&lt;/p&gt;</comment>
                            <comment id="13460857" author="jxiang" created="Fri, 21 Sep 2012 21:49:31 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13460859" author="lhofhansl" created="Fri, 21 Sep 2012 21:50:36 +0000"  >&lt;p&gt;@Liyin: I think it would be better to version the attachments (_v1, _v2, etc) instead of replacing them (I frequently find it useful to look through the attachments, and see the differences between them).&lt;/p&gt;</comment>
                            <comment id="13460861" author="stack" created="Fri, 21 Sep 2012 21:53:40 +0000"  >&lt;p&gt;Committed to 0.94 and trunk.  Thanks for the fast turn around on patch Liyin (Thanks for the hawkeye review Jimmy).&lt;/p&gt;</comment>
                            <comment id="13460868" author="hudson" created="Fri, 21 Sep 2012 22:00:38 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #55 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/55/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/55/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6858&quot; title=&quot;Fix the incorrect BADVERSION checking in the recoverable zookeeper&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6858&quot;&gt;&lt;del&gt;HBASE-6858&lt;/del&gt;&lt;/a&gt; Fix the incorrect BADVERSION checking in the recoverable zookeeper (Revision 1388700)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/zookeeper/RecoverableZooKeeper.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13460872" author="liyin" created="Fri, 21 Sep 2012 22:04:49 +0000"  >&lt;p&gt;The code is difference between 89 and trunk. Some variable has been renamed. Let me re-submit the patch !&lt;/p&gt;</comment>
                            <comment id="13460876" author="stack" created="Fri, 21 Sep 2012 22:10:00 +0000"  >&lt;p&gt;Reverted from 0.94. Trunk patch didn&apos;t apply.&lt;/p&gt;</comment>
                            <comment id="13460877" author="hudson" created="Fri, 21 Sep 2012 22:12:58 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3368 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3368/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3368/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6858&quot; title=&quot;Fix the incorrect BADVERSION checking in the recoverable zookeeper&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6858&quot;&gt;&lt;del&gt;HBASE-6858&lt;/del&gt;&lt;/a&gt; Fix the incorrect BADVERSION checking in the recoverable zookeeper (Revision 1388699)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/zookeeper/RecoverableZooKeeper.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13460892" author="lhofhansl" created="Fri, 21 Sep 2012 22:34:34 +0000"  >&lt;p&gt;He, just noticed. Should I make a working 0.94 patch? I&apos;m not sure when this bug is triggered and whether it is important to fix it.&lt;/p&gt;</comment>
                            <comment id="13460896" author="lhofhansl" created="Fri, 21 Sep 2012 22:36:30 +0000"  >&lt;p&gt;Let&apos;s leave it out of 0.94 for now. Can always pull into 0.94.3 if needed.&lt;/p&gt;</comment>
                            <comment id="13460898" author="hudson" created="Fri, 21 Sep 2012 22:38:57 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #482 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/482/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/482/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6858&quot; title=&quot;Fix the incorrect BADVERSION checking in the recoverable zookeeper&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6858&quot;&gt;&lt;del&gt;HBASE-6858&lt;/del&gt;&lt;/a&gt; Fix the incorrect BADVERSION checking in the recoverable zookeeper; REVERT.... BROKE (Revision 1388704)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/zookeeper/RecoverableZooKeeper.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13460908" author="gchanan" created="Fri, 21 Sep 2012 22:52:23 +0000"  >&lt;p&gt;Let me ask a potentially silly question here...&lt;/p&gt;

&lt;p&gt;Why do we just check that the id is the same?  This basically says that the version of the data in ZK was set by the current recoverable ZooKeeper, but what if the data is different?  This seems like an error to me?  I.e. if I called setData with a certain version/data and I didn&apos;t get an error, I&apos;d expect that at least for that version, the data is what I requested.  But this would swallow that error.&lt;/p&gt;</comment>
                            <comment id="13460912" author="jxiang" created="Fri, 21 Sep 2012 22:55:00 +0000"  >&lt;p&gt;Agree with Gregory.  Should we check the whole thing instead?&lt;/p&gt;</comment>
                            <comment id="13460920" author="hudson" created="Fri, 21 Sep 2012 23:07:48 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #56 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/56/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/56/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6858&quot; title=&quot;Fix the incorrect BADVERSION checking in the recoverable zookeeper&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6858&quot;&gt;&lt;del&gt;HBASE-6858&lt;/del&gt;&lt;/a&gt; Fix the incorrect BADVERSION checking in the recoverable zookeeper; REVERT.... BROKE (Revision 1388704)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/zookeeper/RecoverableZooKeeper.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13460926" author="hudson" created="Fri, 21 Sep 2012 23:18:01 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #186 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/186/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/186/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6858&quot; title=&quot;Fix the incorrect BADVERSION checking in the recoverable zookeeper&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6858&quot;&gt;&lt;del&gt;HBASE-6858&lt;/del&gt;&lt;/a&gt; Fix the incorrect BADVERSION checking in the recoverable zookeeper (Revision 1388699)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/zookeeper/RecoverableZooKeeper.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13460934" author="liyin" created="Fri, 21 Sep 2012 23:23:38 +0000"  >&lt;p&gt;I agree that this is not a very general solution and may introduce race condition if multiple threads in one zk client try to update the same znode with different version number, then current code will hide the BADVERSION exception. We didn&apos;t find this use case in HBase at that time, roughly 1.5 years ago and it is cheaper to compare the identifier than comparing the data payload. &lt;br/&gt;
I also believe leaving this kind of assumption in the system may introduce or has introduced some uncertainty or bugs and it is definitely worth improving.&lt;/p&gt;</comment>
                            <comment id="13460936" author="stack" created="Fri, 21 Sep 2012 23:24:40 +0000"  >&lt;p&gt;Reverted the patch until we address Gregory&apos;s question.&lt;/p&gt;</comment>
                            <comment id="13460938" author="liyin" created="Fri, 21 Sep 2012 23:28:36 +0000"  >&lt;p&gt;@stack, the latest Hudson doesn&apos;t look like building with the latest patch (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6858&quot; title=&quot;Fix the incorrect BADVERSION checking in the recoverable zookeeper&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6858&quot;&gt;&lt;del&gt;HBASE-6858&lt;/del&gt;&lt;/a&gt;_v2.patch). &lt;/p&gt;</comment>
                            <comment id="13460945" author="jxiang" created="Fri, 21 Sep 2012 23:38:39 +0000"  >&lt;p&gt;We have at least two options: 1. Instead of using a fixed identifier, probably we should use a kind-of unique id per call.&lt;br/&gt;
2. Compare the whole data. I noticed that in the create() method, the whole data is compared, not just the id.&lt;/p&gt;

&lt;p&gt;I assume this won&apos;t happen frequently. Then, comparing the whole data should not have too much overhead.&lt;/p&gt;</comment>
                            <comment id="13460947" author="liyin" created="Fri, 21 Sep 2012 23:45:52 +0000"  >&lt;p&gt;The recoverable zk tried to recover from the connection less exception gracefully at beginning and I still believe this problem shall be solved by the zookeeper client library instead of the application such as HBase. The third option shall be check whether the latest zookeeper has supported to be recovered by the connection loss exception gracefully. In that case, we just need to totally remove the recoverable zk !&lt;/p&gt;
</comment>
                            <comment id="13460951" author="gchanan" created="Sat, 22 Sep 2012 00:07:22 +0000"  >&lt;p&gt;+1 on Jimmy&apos;s suggestion #2.  I don&apos;t see any reason to make create and setData different, and this probably happens infrequently (considering previous code was broken and we didn&apos;t notice).&lt;/p&gt;</comment>
                            <comment id="13460960" author="liyin" created="Sat, 22 Sep 2012 00:32:02 +0000"  >&lt;p&gt;Compare the entire data (identifier + data payload) together as discussed. In addition, we may need to append the thread id into the identifier. &lt;/p&gt;</comment>
                            <comment id="13460989" author="hudson" created="Sat, 22 Sep 2012 01:23:27 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3369 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3369/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3369/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6858&quot; title=&quot;Fix the incorrect BADVERSION checking in the recoverable zookeeper&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6858&quot;&gt;&lt;del&gt;HBASE-6858&lt;/del&gt;&lt;/a&gt; Fix the incorrect BADVERSION checking in the recoverable zookeeper; REVERT.... BROKE (Revision 1388725)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/zookeeper/RecoverableZooKeeper.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13461009" author="jxiang" created="Sat, 22 Sep 2012 03:32:15 +0000"  >&lt;p&gt;+1 on v3&lt;/p&gt;</comment>
                            <comment id="13461016" author="stack" created="Sat, 22 Sep 2012 04:04:05 +0000"  >&lt;p&gt;+1 on v3&lt;/p&gt;</comment>
                            <comment id="13461126" author="hudson" created="Sat, 22 Sep 2012 11:39:45 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #187 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/187/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/187/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6858&quot; title=&quot;Fix the incorrect BADVERSION checking in the recoverable zookeeper&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6858&quot;&gt;&lt;del&gt;HBASE-6858&lt;/del&gt;&lt;/a&gt; Fix the incorrect BADVERSION checking in the recoverable zookeeper; REVERT.... BROKE (Revision 1388725)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/zookeeper/RecoverableZooKeeper.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13469900" author="hudson" created="Fri, 5 Oct 2012 00:37:48 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security-on-Hadoop-23 #8 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/8/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/8/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6858&quot; title=&quot;Fix the incorrect BADVERSION checking in the recoverable zookeeper&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6858&quot;&gt;&lt;del&gt;HBASE-6858&lt;/del&gt;&lt;/a&gt; Fix the incorrect BADVERSION checking in the recoverable zookeeper; REVERT.... BROKE (Revision 1388704)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6858&quot; title=&quot;Fix the incorrect BADVERSION checking in the recoverable zookeeper&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6858&quot;&gt;&lt;del&gt;HBASE-6858&lt;/del&gt;&lt;/a&gt; Fix the incorrect BADVERSION checking in the recoverable zookeeper (Revision 1388700)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/zookeeper/RecoverableZooKeeper.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/zookeeper/RecoverableZooKeeper.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13474746" author="jxiang" created="Fri, 12 Oct 2012 02:52:25 +0000"  >&lt;p&gt;I posted a patch trunk-6858.patch based on the discussion and Liyin&apos;s patch.&lt;/p&gt;</comment>
                            <comment id="13474762" author="hadoopqa" created="Fri, 12 Oct 2012 03:50:01 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12548850/trunk-6858.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12548850/trunk-6858.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 81 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 5 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3040//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3040//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3040//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3040//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3040//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3040//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3040//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3040//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3040//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3040//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3040//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3040//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3040//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3040//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13474777" author="stack" created="Fri, 12 Oct 2012 04:33:47 +0000"  >&lt;p&gt;If a BADVERSION, we first retry?  Then if we get it again, then we fall into the getData check?  That seems good.&lt;/p&gt;



&lt;p&gt;This is a random page, &lt;a href=&quot;http://www.javamex.com/tutorials/cryptography/pbe_salt.shtml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.javamex.com/tutorials/cryptography/pbe_salt.shtml&lt;/a&gt;, but its explicit about one thing, something that seems right: &quot;Never use a weak random number generator such as java.util.Random to generate salt bytes!&quot;   It is probably fine in this context but perhaps salt the call to new Random at least?  What can you stuff in there?  Hash of the quorumServers passed in plus the hash of the current instance?&lt;/p&gt;

&lt;p&gt;This patch is only for trunk?  Insertion of salt means that we won&apos;t be able to do rolling upgrade?  Not unless there are no regions in transition at the time?  Is that right?&lt;/p&gt;</comment>
                            <comment id="13474790" author="zhihyu@ebaysf.com" created="Fri, 12 Oct 2012 04:48:28 +0000"  >&lt;p&gt;From &lt;a href=&quot;http://www.javamex.com/tutorials/random_numbers/generators_overview.shtml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.javamex.com/tutorials/random_numbers/generators_overview.shtml&lt;/a&gt; , a replacement for Random would be java.security.SecureRandom &lt;/p&gt;</comment>
                            <comment id="13475142" author="jxiang" created="Fri, 12 Oct 2012 16:44:27 +0000"  >&lt;p&gt;Good point.  I will replace it will SecureRandom.&lt;/p&gt;

&lt;p&gt;If a BADVERSION, and we are not retrying, we should throw the exception, in case other thread/caller set the same data the same version already.&lt;br/&gt;
I think we should check the data only if it is a retry after a connection issue.&lt;/p&gt;

&lt;p&gt;I think the patch doesn&apos;t break rolling upgrade because, in retrieving data, we use the dynamical id length from the data, not the static copy.&lt;/p&gt;</comment>
                            <comment id="13475145" author="jxiang" created="Fri, 12 Oct 2012 16:47:00 +0000"  >&lt;p&gt;In addition to the random number, I can append an atomic long (static, keep incrementing).&lt;/p&gt;</comment>
                            <comment id="13475164" author="stack" created="Fri, 12 Oct 2012 17:05:47 +0000"  >&lt;blockquote&gt;&lt;p&gt;I think the patch doesn&apos;t break rolling upgrade because, in retrieving data, we use the dynamical id length from the data, not the static copy.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I thought you were writing the seed into znode?&lt;/p&gt;</comment>
                            <comment id="13475172" author="jxiang" created="Fri, 12 Oct 2012 17:13:53 +0000"  >&lt;p&gt;Yes, it is written into znode.  But it is not used in getting the original data back.&lt;/p&gt;</comment>
                            <comment id="13475205" author="stack" created="Fri, 12 Oct 2012 18:08:52 +0000"  >&lt;p&gt;Will an older client be able to make sense of data written by a newer one, one w/ this extra salt in it?&lt;/p&gt;</comment>
                            <comment id="13475235" author="jxiang" created="Fri, 12 Oct 2012 18:49:37 +0000"  >&lt;p&gt;I think so.  I didn&apos;t touch the read part which still can read the old data.&lt;br/&gt;
It can&apos;t make sense the identifier though, which is fine, right? To clients,&lt;br/&gt;
it is just a salt.&lt;/p&gt;</comment>
                            <comment id="13475266" author="stack" created="Fri, 12 Oct 2012 19:23:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jxiang&quot; class=&quot;user-hover&quot; rel=&quot;jxiang&quot;&gt;Jimmy Xiang&lt;/a&gt; Yeah, should be fine.  We write the salt into the znode data but the length is appropriately adjusted.  Reading the data out, we get the length from the znode data, not via some hardcoding so should work (we don&apos;t even look at the id when we are removing it).  If a problem, we&apos;ll catch it when we try old client against new cluster testing an RC. &lt;/p&gt;</comment>
                            <comment id="13475325" author="jxiang" created="Fri, 12 Oct 2012 20:34:41 +0000"  >&lt;p&gt;Uploaded patch v2, added a prefix as additional salt.  No sure about the performance impact.  Is a random number good enough?&lt;/p&gt;</comment>
                            <comment id="13475403" author="hadoopqa" created="Fri, 12 Oct 2012 22:16:20 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12548958/trunk-6858_v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12548958/trunk-6858_v2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 81 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 5 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.io.hfile.TestForceCacheImportantBlocks&lt;br/&gt;
                  org.apache.hadoop.hbase.backup.example.TestZooKeeperTableArchiveClient&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3047//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3047//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3047//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3047//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3047//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3047//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3047//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3047//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3047//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3047//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3047//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3047//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3047//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3047//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13475412" author="stack" created="Fri, 12 Oct 2012 22:35:48 +0000"  >&lt;p&gt;The addition of integer seems over the top to me.  You are trying to prevent what?  That two clients both writing exactly same data at about the same time both retry then both happen to get same exact number out of the random number generator?&lt;/p&gt;</comment>
                            <comment id="13475421" author="jxiang" created="Fri, 12 Oct 2012 23:13:48 +0000"  >&lt;p&gt;It may not happen at the same time.  Suppose one client writes the data.  Quite some time later, another client can try to write the same data same version again.  That&apos;s what I&apos;d like to prevent.  I am ok not to have the extra one, just want to be cautious. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13475431" author="stack" created="Fri, 12 Oct 2012 23:22:57 +0000"  >&lt;p&gt;bq ....write the same data same version again.&lt;/p&gt;

&lt;p&gt;Same znode id, same seed (generated by different SecureRandom instances), around same time, and same data... seems highly unlikely?  The extra integer seems too much to me.&lt;/p&gt;</comment>
                            <comment id="13475446" author="jxiang" created="Fri, 12 Oct 2012 23:53:19 +0000"  >&lt;p&gt;Ok, changed it back.  Uploaded trunk-6858_v3.patch.&lt;/p&gt;</comment>
                            <comment id="13475448" author="gchanan" created="Fri, 12 Oct 2012 23:58:11 +0000"  >&lt;p&gt;Another potentially silly question...&lt;/p&gt;

&lt;p&gt;We are trying to prevent all these cases where a client is writing the same data.  There are a couple of variables here:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Same vs different client&lt;/li&gt;
	&lt;li&gt;Same vs different time&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Do either of these matter?  Why do we care if we try to do the same write?&lt;/p&gt;</comment>
                            <comment id="13475451" author="jxiang" created="Sat, 13 Oct 2012 00:06:00 +0000"  >&lt;p&gt;It should throw a BADVERSION exception, as expected, in this case.  We can&apos;t violate the semantics.&lt;/p&gt;

&lt;p&gt;Very likely, the client(s) is trying to doing something it thinks only it&apos;s doing.  It could be done many times, which is ok.&lt;br/&gt;
If it should be done only once, then it is a problem.&lt;/p&gt;</comment>
                            <comment id="13475453" author="gchanan" created="Sat, 13 Oct 2012 00:12:37 +0000"  >&lt;p&gt;Whose semantics are we talking about?  I assume you mean ZK.  We can have our own semantics for what repeated writes to ZK mean and handle it at this layer.  That doesn&apos;t necessarily mean ignore BADVERSIONS if the data is the same, it could mean rethrowing the BADVERSION.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Very likely, the client(s) is trying to doing something it thinks only it&apos;s doing. It could be done many times, which is ok.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;If it should be done only once, then it is a problem.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Where would this cause a problem?  If the data is different, we&apos;ll throw an error.  Will we miss an expected zk dataChanged call or something?&lt;/p&gt;</comment>
                            <comment id="13475456" author="hadoopqa" created="Sat, 13 Oct 2012 00:15:15 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12548988/trunk-6858_v3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12548988/trunk-6858_v3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 81 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 5 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.regionserver.TestSplitTransaction&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3048//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3048//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3048//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3048//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3048//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3048//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3048//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3048//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3048//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3048//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3048//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3048//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3048//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3048//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13475504" author="jxiang" created="Sat, 13 Oct 2012 02:21:17 +0000"  >&lt;p&gt;That&apos;s an interesting idea.  Probably it is out of scope of this jira.  For this jira, I think we should make sure recoverable zk behaves the same way as the previous zk: if the version is not expected, throws badversion exception, no matter the data is the same or not.&lt;/p&gt;</comment>
                            <comment id="13475768" author="yuzhihong@gmail.com" created="Sun, 14 Oct 2012 04:30:19 +0000"  >&lt;p&gt;Latest patch looks good to me.&lt;/p&gt;

&lt;p&gt;I ran TestSplitTransaction twice with the patch and couldn&apos;t reproduce the test failure.&lt;/p&gt;</comment>
                            <comment id="13476283" author="jxiang" created="Mon, 15 Oct 2012 17:26:56 +0000"  >&lt;p&gt;Cool.  Thanks all for the review.&lt;/p&gt;

&lt;p&gt;If no objection, I will commit the latest patch to trunk tomorrow.&lt;/p&gt;</comment>
                            <comment id="13477258" author="jxiang" created="Tue, 16 Oct 2012 18:50:21 +0000"  >&lt;p&gt;Integrated into trunk. Thanks all for the review.&lt;/p&gt;</comment>
                            <comment id="13477306" author="hudson" created="Tue, 16 Oct 2012 20:09:57 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3450 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3450/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3450/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6858&quot; title=&quot;Fix the incorrect BADVERSION checking in the recoverable zookeeper&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6858&quot;&gt;&lt;del&gt;HBASE-6858&lt;/del&gt;&lt;/a&gt; Fix the incorrect BADVERSION checking in the recoverable zookeeper (Revision 1398920)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
jxiang : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/zookeeper/RecoverableZooKeeper.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13477494" author="hudson" created="Wed, 17 Oct 2012 00:31:46 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #223 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/223/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/223/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6858&quot; title=&quot;Fix the incorrect BADVERSION checking in the recoverable zookeeper&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6858&quot;&gt;&lt;del&gt;HBASE-6858&lt;/del&gt;&lt;/a&gt; Fix the incorrect BADVERSION checking in the recoverable zookeeper (Revision 1398920)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
jxiang : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/zookeeper/RecoverableZooKeeper.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13775410" author="stack" created="Mon, 23 Sep 2013 18:31:27 +0000"  >&lt;p&gt;Marking closed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12546092" name="HBASE-6858.patch" size="1614" author="liyin" created="Fri, 21 Sep 2012 21:38:52 +0000"/>
                            <attachment id="12546107" name="HBASE-6858_v2.patch" size="1621" author="liyin" created="Fri, 21 Sep 2012 22:41:23 +0000"/>
                            <attachment id="12546140" name="HBASE-6858_v3.patch" size="1482" author="liyin" created="Sat, 22 Sep 2012 00:32:02 +0000"/>
                            <attachment id="12548850" name="trunk-6858.patch" size="4189" author="jxiang" created="Fri, 12 Oct 2012 02:48:19 +0000"/>
                            <attachment id="12548958" name="trunk-6858_v2.patch" size="5401" author="jxiang" created="Fri, 12 Oct 2012 20:33:20 +0000"/>
                            <attachment id="12548988" name="trunk-6858_v3.patch" size="4740" author="jxiang" created="Fri, 12 Oct 2012 23:52:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 21 Sep 2012 21:16:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>240896</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i016tr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4875</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>