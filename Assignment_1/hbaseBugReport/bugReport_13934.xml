<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:48:05 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-13934/HBASE-13934.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-13934] HBase Client Stuck at ConnectionManager$HConnectionImplementation.locateRegion</title>
                <link>https://issues.apache.org/jira/browse/HBASE-13934</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;HBase Client get&apos;s stuck when I try to execute a PUT operation.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; [BenchmarkThread-0] (Suspended)  
    owns: BufferedMutatorImpl  (id=43)  
    Unsafe.park(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;) line: not available [&lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt; method]  
    LockSupport.park(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;) line: 186  
    AbstractQueuedSynchronizer$ConditionObject.await() line: 2043   
    ArrayBlockingQueue&amp;lt;E&amp;gt;.take() line: 374  
    BoundedCompletionService&amp;lt;V&amp;gt;.take() line: 75 
    ScannerCallableWithReplicas.call(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) line: 190 
    ScannerCallableWithReplicas.call(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) line: 56  
    RpcRetryingCaller&amp;lt;T&amp;gt;.callWithoutRetries(RetryingCallable&amp;lt;T&amp;gt;, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) line: 200 
    ClientSmallReversedScanner.loadCache() line: 211    
    ClientSmallReversedScanner.next() line: 185 
    ConnectionManager$HConnectionImplementation.locateRegionInMeta(TableName, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[], &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) line: 1200 
    ConnectionManager$HConnectionImplementation.locateRegion(TableName, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[], &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) line: 1109   
    AsyncProcess.submit(ExecutorService, TableName, List&amp;lt;Row&amp;gt;, &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;, Callback&amp;lt;CResult&amp;gt;, &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;) line: 369   
    AsyncProcess.submit(TableName, List&amp;lt;Row&amp;gt;, &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;, Callback&amp;lt;CResult&amp;gt;, &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;) line: 320    
    BufferedMutatorImpl.backgroundFlushCommits(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;) line: 206   
    BufferedMutatorImpl.flush() line: 183   
    HTable.flushCommits() line: 1436    
    HTable.put(Put) line: 1032  
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Source code:&lt;/p&gt;

&lt;p&gt;Connect:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.config = HBaseConfiguration.create();
        config.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;hbase.zookeeper.quorum&quot;&lt;/span&gt;, zookeeperHost);

        Connection connection = ConnectionFactory.createConnection(config);
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.table = connection.getTable(TableName.valueOf(tableName));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Put:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Put put = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Put(Bytes.toBytes(key));
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Map.Entry&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; pair : columnValues.entrySet()) {
            &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; column = pair.getKey();
            &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; value = pair.getValue();
            put.addColumn(columnFamily, Bytes.toBytes(column), Bytes.toBytes(value));
        }

        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            table.put(put);
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IOException e) {
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ClientException(&lt;span class=&quot;code-quote&quot;&gt;&quot;put error&quot;&lt;/span&gt;, e);
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Client log:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
17:00:58,193  INFO ZooKeeper:438 - Initiating client connection, connectString=nosql-x64-node-1.local:2181 sessionTimeout=90000 watcher=hconnection-0x3018fc1a0x0, quorum=nosql-x64-node-1.local:2181, baseZNode=/hbase
17:00:58,325  INFO ClientCnxn:975 - Opening socket connection to server 192.168.56.201/192.168.56.201:2181. Will not attempt to authenticate using SASL (unknown error)
17:00:58,329  INFO ClientCnxn:852 - Socket connection established to 192.168.56.201/192.168.56.201:2181, initiating session
17:00:58,346  INFO ClientCnxn:1235 - Session establishment complete on server 192.168.56.201/192.168.56.201:2181, sessionid = 0x14e06dbd6450020, negotiated timeout = 40000
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Server&apos;s log:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2015-06-18 17:12:28,183 INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181] server.NIOServerCnxn: Closed socket connection &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; client /192.168.56.1:35002 which had sessionid 0x14e06dbd6450020
2015-06-18 17:12:30,001 INFO  [SessionTracker] server.ZooKeeperServer: Expiring session 0x14e06dbd645001d, timeout of 40000ms exceeded
2015-06-18 17:12:30,002 INFO  [ProcessThread(sid:0 cport:-1):] server.PrepRequestProcessor: Processed session termination &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; sessionid: 0x14e06dbd645001d
2015-06-18 17:12:31,078 INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181] server.NIOServerCnxnFactory: Accepted socket connection from /192.168.56.1:35130
2015-06-18 17:12:31,080 INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181] server.ZooKeeperServer: Client attempting to establish &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; session at /192.168.56.1:35130
2015-06-18 17:12:31,092 INFO  [SyncThread:0] server.ZooKeeperServer: Established session 0x14e06dbd6450021 with negotiated timeout 40000 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; client /192.168.56.1:35130
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Happens both with HBASE running in standalone and distributed mode.&lt;/p&gt;

&lt;p&gt;Any idea what causing this?&lt;/p&gt;

&lt;p&gt;HBase version: 1.0.1 (client + server)&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12838825">HBASE-13934</key>
            <summary>HBase Client Stuck at ConnectionManager$HConnectionImplementation.locateRegion</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="attila.tokes">Attila T&#337;k&#233;s</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Jun 2015 15:02:29 +0000</created>
                <updated>Thu, 18 Jun 2015 15:34:13 +0000</updated>
                            <resolved>Thu, 18 Jun 2015 15:34:13 +0000</resolved>
                                    <version>1.0.1</version>
                                                    <component>Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="14591979" author="attila.tokes" created="Thu, 18 Jun 2015 15:34:13 +0000"  >&lt;p&gt;Seems that the client tried to connect to &lt;tt&gt;nosql-x64-node-1&lt;/tt&gt;, even if set &lt;tt&gt;nosql-x64-node-1.local&lt;/tt&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 26 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2g7q7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>