<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 21:09:16 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-15992/HBASE-15992.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-15992] Preserve original KeeperException when converted to external exceptions</title>
                <link>https://issues.apache.org/jira/browse/HBASE-15992</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;During an investigation in which we were seeing unexpected &lt;tt&gt;NoServerForRegionException&lt;/tt&gt; errors, the root cause turned out to be a &lt;tt&gt;KeeperException&lt;/tt&gt; that got lost and so resulted in a misleading top level indication.&lt;/p&gt;

&lt;p&gt;The underlying exception with partial stacktrace is this:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.zookeeper.KeeperException$AuthFailedException: KeeperErrorCode = AuthFailed for /hbase/meta-region-server
	at org.apache.zookeeper.KeeperException.create(KeeperException.java:123)
	at org.apache.zookeeper.KeeperException.create(KeeperException.java:51)
	at org.apache.zookeeper.ZooKeeper.getData(ZooKeeper.java:1289)
	at org.apache.hadoop.hbase.zookeeper.RecoverableZooKeeper.getData(RecoverableZooKeeper.java:359)
	at org.apache.hadoop.hbase.zookeeper.ZKUtil.getData(ZKUtil.java:684)
	at org.apache.hadoop.hbase.zookeeper.ZKUtil.blockUntilAvailable(ZKUtil.java:2032)
	at org.apache.hadoop.hbase.zookeeper.MetaRegionTracker.blockUntilAvailable(MetaRegionTracker.java:203)
	at org.apache.hadoop.hbase.client.ZooKeeperRegistry.getMetaRegionLocation(ZooKeeperRegistry.java:58)
	at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateMeta(HConnectionManager.java:1209)
	at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegion(HConnectionManager.java:1175)
	at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegionInMeta(HConnectionManager.java:1301)
	at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegion(HConnectionManager.java:1178)
	at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegion(HConnectionManager.java:1135)
	at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.getRegionLocation(HConnectionManager.java:976)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here is some additional information:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;The exception first gets caught &lt;a href=&quot;https://github.com/apache/hbase/blob/rel/0.98.14/hbase-client/src/main/java/org/apache/hadoop/hbase/zookeeper/RecoverableZooKeeper.java#L366&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;here&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;It gets logged and rethrown from &lt;a href=&quot;https://github.com/apache/hbase/blob/rel/0.98.14/hbase-client/src/main/java/org/apache/hadoop/hbase/zookeeper/RecoverableZooKeeper.java#L279&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;here&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;It gets caught again, logged and rethrown &lt;a href=&quot;https://github.com/apache/hbase/blob/rel/0.98.14/hbase-client/src/main/java/org/apache/hadoop/hbase/zookeeper/ZKUtil.java#L693&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;here&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;This finally gets caught and rethrown as InterruptedException &lt;a href=&quot;https://github.com/apache/hbase/blob/rel/0.98.14/hbase-client/src/main/java/org/apache/hadoop/hbase/zookeeper/ZKUtil.java#L2037&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;here&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;When thrown as &lt;tt&gt;InterruptedException&lt;/tt&gt;, the cause is lost, so &lt;a href=&quot;https://github.com/apache/hbase/blob/rel/0.98.14/hbase-client/src/main/java/org/apache/hadoop/hbase/client/ZooKeeperRegistry.java#L65&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;the code catching it&lt;/a&gt; can&apos;t (and currently doesn&apos;t) determine the cause. Perhaps the exception should be preserved and passed on to &lt;a href=&quot;https://github.com/apache/hbase/blob/rel/0.98.14/hbase-client/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java#L1312&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;the caller&lt;/a&gt; such that it is available when finally the &lt;tt&gt;NoServerForRegionException&lt;/tt&gt; is thrown &lt;a href=&quot;https://github.com/apache/hbase/blob/rel/0.98.14/hbase-client/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java#L1281&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;here&lt;/a&gt;. Alternatively, a more meaningful exception could also be thrown instead of a misleading &lt;tt&gt;NoServerForRegionException&lt;/tt&gt;, especially in cases where the failure indicates a more permanent condition.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12976935">HBASE-15992</key>
            <summary>Preserve original KeeperException when converted to external exceptions</summary>
                <type id="13" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/genericissue.png">Brainstorming</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="haridsv">Hari Krishna Dara</reporter>
                        <labels>
                            <label>client</label>
                            <label>client-auth</label>
                            <label>zookeeper</label>
                    </labels>
                <created>Wed, 8 Jun 2016 17:21:25 +0000</created>
                <updated>Fri, 17 Jun 2016 18:09:37 +0000</updated>
                                            <version>0.98.14</version>
                                                    <component>hbase</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15321282" author="apurtell" created="Wed, 8 Jun 2016 19:18:57 +0000"  >&lt;p&gt;Thanks for filing this &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=haridsv&quot; class=&quot;user-hover&quot; rel=&quot;haridsv&quot;&gt;Hari Krishna Dara&lt;/a&gt;. I agree we should preserve information on the original cause and be smarter about what type of exception to rethrow where the failure indicates a more permanent condition. Do you plan on working on a patch or would you like to hand it off for someone else to look at?&lt;/p&gt;</comment>
                            <comment id="15322123" author="haridsv" created="Thu, 9 Jun 2016 08:04:01 +0000"  >&lt;p&gt;I can definitely make an attempt and propose something.&lt;/p&gt;</comment>
                            <comment id="15335140" author="apurtell" created="Fri, 17 Jun 2016 01:09:15 +0000"  >&lt;p&gt;We will be releasing 0.98.21 in about a month. What do you think &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=haridsv&quot; class=&quot;user-hover&quot; rel=&quot;haridsv&quot;&gt;Hari Krishna Dara&lt;/a&gt; ? &lt;/p&gt;</comment>
                            <comment id="15336597" author="haridsv" created="Fri, 17 Jun 2016 18:09:37 +0000"  >&lt;p&gt;Apologies for the delay, but I haven&apos;t had a chance to work on this yet.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 8 Jun 2016 19:18:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2z687:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>