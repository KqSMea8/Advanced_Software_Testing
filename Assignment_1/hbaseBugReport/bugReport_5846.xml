<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:31:29 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5846/HBASE-5846.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5846] HBase rpm packing is broken at multiple places</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5846</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Here is how I executed rpm build: &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;MAVEN_OPTS=&quot;-Xmx2g&quot; mvn clean package assembly:single -Prpm -DskipTests
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The issues with the rpm build are: &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;There is no clean (%clean) section in the hbase.spec file . Last run can leave stuff in RPM_BUILD_ROOT which in turn will fail build. As a fix I added &apos;rm -rf $RPM_BUILD_ROOT&apos; to %clean section&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;The Buildroot is set to _build_dir . The build fails with this error.
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;cp: cannot copy a directory, `/data/9adda425-1f1e-4fe5-8a53-83bd2ce5ad45/app/jenkins/workspace/hbase.92/target/rpm/hbase/BUILD&apos;, into itself, `/data/9adda425-1f1e-4fe5-8a53-83bd2ce5ad45/app/jenkins/workspace/hbase.92/target/rpm/hbase/BUILD/BUILD&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If we set it to &apos; %{_tmppath}/%&lt;/p&gt;
{name}
&lt;p&gt;-%&lt;/p&gt;
{version}
&lt;p&gt;-root&apos; build passes&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;The src/packages/update-hbase-env.sh script will leave inconsistent state if &apos;yum update hbase&apos; is executed. It deletes data from /etc/init.d/hbase* and does not put scripts back during update.&lt;/li&gt;
&lt;/ul&gt;


</description>
                <environment>&lt;p&gt;CentOS release 5.7 (Final)&lt;/p&gt;</environment>
        <key id="12551825">HBASE-5846</key>
            <summary>HBase rpm packing is broken at multiple places</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="shrijeet">Shrijeet Paliwal</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Apr 2012 18:16:41 +0000</created>
                <updated>Sat, 11 Apr 2015 01:27:13 +0000</updated>
                            <resolved>Sat, 11 Apr 2015 01:27:13 +0000</resolved>
                                    <version>0.92.1</version>
                                                    <component>build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13258467" author="shrijeet" created="Fri, 20 Apr 2012 18:55:00 +0000"  >&lt;p&gt;Here is what happens if one runs update : &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;D:   install: %post(hbase-0.92.1-2.x86_64) synchronous scriptlet start
D:   install: %post(hbase-0.92.1-2.x86_64)	execv(/bin/sh) pid 26772
+ /usr/share/hbase/sbin/update-hbase-env.sh --prefix=/usr --bin-dir=/usr/bin --conf-dir=/etc/hbase --log-dir=/var/log/hbase --pid-dir=/var/run/hbase
D:   install: waitpid(26772) rc 26772 status 0 secs 0.038
D: ========== --- hbase-0.92.1-1 x86_64-linux 0x0
D:     erase: hbase-0.92.1-1 has 224 files, test = 0
D:     erase: %preun(hbase-0.92.1-1.x86_64) asynchronous scriptlet start
D:     erase: %preun(hbase-0.92.1-1.x86_64)	execv(/bin/sh) pid 26819
+ /usr/share/hbase/sbin/update-hbase-env.sh --prefix=/usr --bin-dir=/usr/bin --conf-dir=/etc/hbase --log-dir=/var/log/hbase --pid-dir=/var/run/hbase --uninstall
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is out put of rpm -Uvv . Note how install post runs followed by preun . preun erases all the work that was done by install post.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>236632</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 35 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02bdb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11443</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>