<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:15:00 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-10557/HBASE-10557.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-10557] DroppedSnapshotException is not handled properly for flush triggered by hlog-replay and non-abort region close</title>
                <link>https://issues.apache.org/jira/browse/HBASE-10557</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Flush triggered by hlog-replay(replayRecoveredEdits) and region-close(non-abort close) get processed directly by region without putting flush entry into flushQueue, hence not handled by MemStoreFlusher, So DroppedSnapshotException emitted from internalFlushcache is not handled properly&lt;/p&gt;</description>
                <environment></environment>
        <key id="12695462">HBASE-10557</key>
            <summary>DroppedSnapshotException is not handled properly for flush triggered by hlog-replay and non-abort region close</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="fenghh">Honghua Feng</assignee>
                                    <reporter username="fenghh">Honghua Feng</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Feb 2014 08:22:10 +0000</created>
                <updated>Tue, 18 Feb 2014 08:48:53 +0000</updated>
                            <resolved>Tue, 18 Feb 2014 05:28:05 +0000</resolved>
                                                                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13903056" author="fenghh" created="Mon, 17 Feb 2014 08:27:33 +0000"  >&lt;p&gt;Sorry, this one duplicates to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10556&quot; title=&quot;Possible data loss due to non-handled DroppedSnapshotException for user-triggered flush from client/shell&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10556&quot;&gt;&lt;del&gt;HBASE-10556&lt;/del&gt;&lt;/a&gt;, I pressed the &apos;create&apos; button for second time after no response for a long time due to poor network &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13903087" author="fenghh" created="Mon, 17 Feb 2014 09:13:43 +0000"  >&lt;p&gt;By further investigating, flush triggered by hlog-replay(replayRecoveredEdits) and region-close(non-abort close) also get processed directly by region without putting flush entry into flushQueue, hence not handled by MemStoreFlusher, So DroppedSnapshotException emitted from internalFlushcache is also not handled properly. But the fix would be different from the one for user-triggered flush, and I&apos;ll re-use this jira for the discussion and fix for hlog-replay and non-abort region-close cases.&lt;/p&gt;</comment>
                            <comment id="13903788" author="fenghh" created="Tue, 18 Feb 2014 05:13:51 +0000"  >&lt;p&gt;Update:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;DroppedSnapshotException(as Throwable) thrown during hlog-replay is eventually handled in OpenRegionHandler by failing the region opening of which the hlog-replay is a sub-process, the region is not successfully opened in the regionserver, and master will re-assign this region, no problem regarding data-loss.&lt;/li&gt;
	&lt;li&gt;DroppedSnapshotException(as Throwable) thrown during non-abort region-close is eventually handled in CloseRegionHandler by aborting the hosting regionserver, also no risk of data-loss.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;According to above, this jira is a false alarm and can be closed as something like &apos;won&apos;t fix&apos; or &apos;not a problem&apos;. Sorry &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13903791" author="anoop.hbase" created="Tue, 18 Feb 2014 05:21:28 +0000"  >&lt;p&gt;You can close it as &apos;not a problem&apos;.  Thanks for the analysis.&lt;/p&gt;</comment>
                            <comment id="13903797" author="fenghh" created="Tue, 18 Feb 2014 05:30:01 +0000"  >&lt;p&gt;Close as &apos;not a problem&apos;, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt; for reminder, I thought I don&apos;t have the right to resolve a jira &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13903799" author="lhofhansl" created="Tue, 18 Feb 2014 05:34:52 +0000"  >&lt;p&gt;It seems this code use (a) some cleanup and (b) some Javadoc explaining what Feng just tracked down.&lt;/p&gt;</comment>
                            <comment id="13903880" author="fenghh" created="Tue, 18 Feb 2014 08:48:53 +0000"  >&lt;blockquote&gt;&lt;p&gt;It seems this code use (a) some cleanup and (b) some Javadoc explaining what Feng just tracked down.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes, only one thing is that the place throwing exception and the place catching/handling it are so far apart...&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt;, would you take some time to review and confirm &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10556&quot; title=&quot;Possible data loss due to non-handled DroppedSnapshotException for user-triggered flush from client/shell&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10556&quot;&gt;&lt;del&gt;HBASE-10556&lt;/del&gt;&lt;/a&gt;? It&apos;s a similar issue but looks like not properly handled by current implementation. Thanks&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 18 Feb 2014 05:21:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>373970</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 43 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1sg1z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>374270</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>