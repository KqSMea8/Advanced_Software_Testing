<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:35:40 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6314/HBASE-6314.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6314] Fast fail behavior for unauthenticated user</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6314</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;In case of unauthenticated users in secure hbase, hbase shell does a connection retry at two levels:&lt;br/&gt;
a) HConnection: It retries hbase.client.retries.number times in the getMaster()&lt;br/&gt;
b) HBaseAdmin: it again retries hbase.client.retries.number times in its ctr&lt;/p&gt;

&lt;p&gt;So, hbase shell retries square number of times of the configured setting. We can make it failfast (no retries) in case the user is not authenticated (no valid kerberos credentials).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12597234">HBASE-6314</key>
            <summary>Fast fail behavior for unauthenticated user</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="v.himanshu">Himanshu Vashishtha</assignee>
                                    <reporter username="v.himanshu">Himanshu Vashishtha</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Jul 2012 13:25:07 +0000</created>
                <updated>Tue, 26 Feb 2013 08:16:16 +0000</updated>
                            <resolved>Thu, 5 Jul 2012 17:28:39 +0000</resolved>
                                    <version>0.92.0</version>
                    <version>0.94.0</version>
                    <version>0.95.2</version>
                                    <fixVersion>0.94.1</fixVersion>
                    <fixVersion>0.95.0</fixVersion>
                                    <component>IPC/RPC</component>
                    <component>security</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13405927" author="v.himanshu" created="Tue, 3 Jul 2012 13:41:46 +0000"  >&lt;p&gt;Looking at the code: In the SecureClient#handleSaslConnectionFailure, there is a retry logic in case of kerberos specific failure in case it retries to login from keytab or credential cache. In case of un-authenticated users, shouldAuthenticateOverKrb returns false and it throws an IOException.&lt;br/&gt;
Throwing a DoNotRetryIOException exception at this point instead and then checking &amp;amp; rethrowing it in the above callstack (in HCM&apos;s getMaster and checking it in HBaseAdmin ctr will make it failfast. I can attach a patch if this approach sounds reasonable.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (ex &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; RemoteException)
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; (RemoteException)ex;
          &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DoNotRetryException(ex);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13407261" author="v.himanshu" created="Thu, 5 Jul 2012 16:43:35 +0000"  >&lt;p&gt;Throwing a runtime exception requires minimal changes. Attached is a patch to do so. In case when there is no credentials (user didn&apos;t do a kinit, we throw a runtime exception to avoid the re-trying logic kicking in)&lt;/p&gt;</comment>
                            <comment id="13407263" author="apurtell" created="Thu, 5 Jul 2012 16:47:01 +0000"  >&lt;p&gt;Change the log and exception message to a simple informative statement without an exclamation and I think this is good to go.&lt;/p&gt;</comment>
                            <comment id="13407277" author="v.himanshu" created="Thu, 5 Jul 2012 16:59:21 +0000"  >&lt;p&gt;Improved the log message as per Andy.&lt;/p&gt;</comment>
                            <comment id="13407291" author="apurtell" created="Thu, 5 Jul 2012 17:19:57 +0000"  >&lt;p&gt;Attached updated patches for what was committed.&lt;/p&gt;</comment>
                            <comment id="13407297" author="apurtell" created="Thu, 5 Jul 2012 17:28:39 +0000"  >&lt;p&gt;Committed to trunk, 0.94, and 0.92 branches. Ran a few local tests on each branch to insure the build is not broken. (We don&apos;t have test framework coverage for active Kerberos.)&lt;/p&gt;</comment>
                            <comment id="13407330" author="hudson" created="Thu, 5 Jul 2012 17:54:23 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #298 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/298/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/298/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6314&quot; title=&quot;Fast fail behavior for unauthenticated user&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6314&quot;&gt;&lt;del&gt;HBASE-6314&lt;/del&gt;&lt;/a&gt;. Fast fail behavior for unauthenticated user (Himanshu Vashishtha) (Revision 1357750)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
apurtell : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/security/src/main/java/org/apache/hadoop/hbase/ipc/SecureClient.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13407352" author="hudson" created="Thu, 5 Jul 2012 18:17:25 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security-on-Hadoop-23 #5 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/5/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/5/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6314&quot; title=&quot;Fast fail behavior for unauthenticated user&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6314&quot;&gt;&lt;del&gt;HBASE-6314&lt;/del&gt;&lt;/a&gt;. Fast fail behavior for unauthenticated user (Himanshu Vashishtha) (Revision 1357750)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
apurtell : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/security/src/main/java/org/apache/hadoop/hbase/ipc/SecureClient.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13407523" author="hudson" created="Thu, 5 Jul 2012 21:51:17 +0000"  >&lt;p&gt;Integrated in HBase-0.94-deploy #4 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-deploy/4/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-deploy/4/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6314&quot; title=&quot;Fast fail behavior for unauthenticated user&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6314&quot;&gt;&lt;del&gt;HBASE-6314&lt;/del&gt;&lt;/a&gt;. Fast fail behavior for unauthenticated user (Himanshu Vashishtha) (Revision 1357750)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
apurtell : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/security/src/main/java/org/apache/hadoop/hbase/ipc/SecureClient.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13411166" author="hudson" created="Wed, 11 Jul 2012 02:36:56 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #39 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/39/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/39/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6314&quot; title=&quot;Fast fail behavior for unauthenticated user&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6314&quot;&gt;&lt;del&gt;HBASE-6314&lt;/del&gt;&lt;/a&gt;. Fast fail behavior for unauthenticated user (Himanshu Vashishtha) (Revision 1357750)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
apurtell : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/security/src/main/java/org/apache/hadoop/hbase/ipc/SecureClient.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12535220" name="6314-v1.patch" size="1809" author="v.himanshu" created="Thu, 5 Jul 2012 16:43:35 +0000"/>
                            <attachment id="12535222" name="6314-v2.patch" size="1809" author="v.himanshu" created="Thu, 5 Jul 2012 16:59:21 +0000"/>
                            <attachment id="12535227" name="HBASE-6314-0.94.patch" size="1926" author="apurtell" created="Thu, 5 Jul 2012 17:19:57 +0000"/>
                            <attachment id="12535226" name="HBASE-6314-trunk.patch" size="1936" author="apurtell" created="Thu, 5 Jul 2012 17:19:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 5 Jul 2012 16:47:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>241929</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 23 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02gvj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12335</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>