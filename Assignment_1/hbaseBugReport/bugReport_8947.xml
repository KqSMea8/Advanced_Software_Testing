<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:00:01 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-8947/HBASE-8947.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-8947] Thrift 2 : Replace &quot;bool writeToWAL&quot; with &quot;TDurability durability&quot; </title>
                <link>https://issues.apache.org/jira/browse/HBASE-8947</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Introduce new enum &lt;b&gt;TDurability&lt;/b&gt; to expose more options for &lt;b&gt;Write To Wal.&lt;/b&gt; &lt;/p&gt;</description>
                <environment></environment>
        <key id="12657662">HBASE-8947</key>
            <summary>Thrift 2 : Replace &quot;bool writeToWAL&quot; with &quot;TDurability durability&quot; </summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12655350">HBASE-8818</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="madani">Hamed Madani</assignee>
                                    <reporter username="madani">Hamed Madani</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 Jul 2013 03:16:59 +0000</created>
                <updated>Wed, 21 Aug 2013 00:08:47 +0000</updated>
                            <resolved>Fri, 26 Jul 2013 07:34:21 +0000</resolved>
                                                    <fixVersion>0.98.0</fixVersion>
                    <fixVersion>0.95.2</fixVersion>
                    <fixVersion>0.94.11</fixVersion>
                                    <component>Thrift</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13708221" author="madani" created="Mon, 15 Jul 2013 03:34:03 +0000"  >&lt;p&gt;Missed FSYNC_WAL. Updated the patch and Added FSYNC_WAL to TDurability enum. &lt;/p&gt;</comment>
                            <comment id="13708231" author="hadoopqa" created="Mon, 15 Jul 2013 04:30:52 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12592272/HBASE-8947.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12592272/HBASE-8947.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6335//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6335//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6335//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6335//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6335//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6335//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6335//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6335//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6335//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6335//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6335//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6335//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6335//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6335//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6335//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6335//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6335//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6335//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6335//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6335//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13708238" author="hadoopqa" created="Mon, 15 Jul 2013 04:59:54 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12592275/HBASE-8947-v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12592275/HBASE-8947-v2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6336//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6336//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6336//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6336//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6336//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6336//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6336//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6336//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6336//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6336//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6336//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6336//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6336//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6336//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6336//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6336//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6336//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6336//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6336//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6336//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13714732" author="larsgeorge" created="Sun, 21 Jul 2013 16:23:17 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=madani&quot; class=&quot;user-hover&quot; rel=&quot;madani&quot;&gt;Hamed Madani&lt;/a&gt;, I have two issues here, first a simple one: in hbase.thrift you have under &quot;Specify Durability&quot; twice SKIP_WAL, where for one you meant write SYNC_WAL. &lt;/p&gt;

&lt;p&gt;The more major issue I have is that the patch as it is is breaking compatibility. We should add TDurability, but not replace writeToWAL. In other words, keep the existing, add the new with a new index, and then in the code use isSetDurability() to check if the client is using it and prefer it over the existing Boolean. In case the existing Boolean is used, use the isSetWriteToWAL() and translate it into the SYNC_WAL or SKIP_WAL durability value as needed. Make sense?&lt;/p&gt;</comment>
                            <comment id="13714790" author="madani" created="Sun, 21 Jul 2013 19:49:33 +0000"  >&lt;p&gt;Made this patch late at night. Thanks for reviewing it &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=larsgeorge&quot; class=&quot;user-hover&quot; rel=&quot;larsgeorge&quot;&gt;Lars George&lt;/a&gt;. I can certainly bring back &lt;b&gt;writeToWAL&lt;/b&gt; for backwards compatibility. Do we want to keep this backward compatibility with 0.95 and 0.98 ? or only 0.94 ? &lt;/p&gt;

&lt;p&gt;Also currently, writeToWal defaults to true when it&apos;s not set by user which will translate to &quot;Durability.SYNC_WAL&quot;. If we were to keep &lt;b&gt;writeToWAL&lt;/b&gt; I suggest we remove the default value, so we can set Durability only when writeToWal or TDurability is explicitly set and otherwise default to CF Durability setting. What do you think ?&lt;/p&gt;</comment>
                            <comment id="13714794" author="larsgeorge" created="Sun, 21 Jul 2013 20:01:42 +0000"  >&lt;p&gt;Good question on where to drop this, we would need to deprecate it first. I suggest we follow Mutation and setDurability(), which deprecated setWriteToWAL() in 0.94 and dropped it in 0.95 and trunk.&lt;/p&gt;

&lt;p&gt;Well, with the default of writeToWAL, I thought if we first check if isSetDurability() we favor it over the old setWriteToWAL, then default or not it is ignore. We should also set a default for TDurability though:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  /**
   * If &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; tables durability, use HBase&apos;s global &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; value (SYNC_WAL).
   * Otherwise, &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; mutation, use the table&apos;s &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; setting to determine durability.
   * This must remain the first option.
   */
  USE_DEFAULT,
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is from the Durability.java class. Can we somehow derive this on the Thrift side? I guess we can add a TDurability.USE_DEFAULT, make it the default and then pass it on?&lt;/p&gt;</comment>
                            <comment id="13714807" author="madani" created="Sun, 21 Jul 2013 21:07:12 +0000"  >&lt;p&gt;Well I actually had a default value for TDurability, but then I saw if we don&apos;t set durability, it defaults to CF durability setting. I found it more efficient to not set the default on thrift side because client will be sending an extra field (default value) when thrift server doesn&apos;t need it. (Defaults is set without calling setDurability)&lt;/p&gt;

&lt;p&gt;So if you agree I can drop writeToWal for trunk patch and depreciate it for 0.94 ?&lt;/p&gt;</comment>
                            <comment id="13714904" author="larsgeorge" created="Mon, 22 Jul 2013 04:42:53 +0000"  >&lt;p&gt;Good thinking on not setting it to save an extra field. But what about the default of writeToWAL? Can we simply remove it and &lt;b&gt;not&lt;/b&gt; break compatibility? Because if not, then we are always setting it to its default as opposed to defaulting to the CF dura settings?&lt;/p&gt;

&lt;p&gt;Agreed on the deprecation for 0.94 and drop in trunk.&lt;/p&gt;</comment>
                            <comment id="13715001" author="madani" created="Mon, 22 Jul 2013 08:11:18 +0000"  >&lt;p&gt;For 0.94 we can drop the default for writeToWAL to avoid sending an extra field. I just double checked and for 0.94 &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; writeToWAL = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;writeToWAL get initialized to true , so I suggest we drop default value for writeToWAL, add Durability to Mutation (Apparently Increment doesn&apos;t support it since it doesn&apos;t extend Mutation in 0.94), then as you suggested we check for isSetDurability, if not set then isSetwriteToWAL and if not set then just don&apos;t set writeToWAL since it gets initialized to true inside Mutation class. What do you think ? Also do we need a test for this ? I wasn&apos;t sure how to test it.  &lt;/p&gt;</comment>
                            <comment id="13715271" author="larsgeorge" created="Mon, 22 Jul 2013 15:03:31 +0000"  >&lt;p&gt;If possible, you could somehow emulate the various settings and check if the resulting object reacts the way it should? Somehow we need to make sure that the above strategy works.&lt;/p&gt;</comment>
                            <comment id="13716241" author="madani" created="Tue, 23 Jul 2013 08:54:20 +0000"  >&lt;p&gt;First uploading the easier trunk patch. Added test.&lt;/p&gt;</comment>
                            <comment id="13716274" author="madani" created="Tue, 23 Jul 2013 10:00:08 +0000"  >&lt;p&gt;added 0.94, also test&lt;/p&gt;</comment>
                            <comment id="13716276" author="hadoopqa" created="Tue, 23 Jul 2013 10:03:28 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12593678/HBASE-8947-v3-0.94.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12593678/HBASE-8947-v3-0.94.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6437//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6437//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13716292" author="hadoopqa" created="Tue, 23 Jul 2013 10:38:41 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12593661/HBASE-8947-v3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12593661/HBASE-8947-v3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6436//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6436//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6436//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6436//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6436//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6436//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6436//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6436//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6436//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6436//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6436//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6436//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6436//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6436//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6436//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6436//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6436//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6436//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6436//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6436//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13716423" author="larsgeorge" created="Tue, 23 Jul 2013 14:31:52 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=madani&quot; class=&quot;user-hover&quot; rel=&quot;madani&quot;&gt;Hamed Madani&lt;/a&gt;, I think there is a flaw in the numbering of the Thrift fields:&lt;/p&gt;

&lt;p&gt;In trunk (and 0.95 then):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 struct TPut {
   1: required binary row,
   2: required list&amp;lt;TColumnValue&amp;gt; columnValues
   3: optional i64 timestamp,
-  4: optional bool writeToWal = 1,
+  4: optional TDurability durability,
   5: optional map&amp;lt;binary, binary&amp;gt; attributes
 }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and in 0.94:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 struct TPut {
   1: required binary row,
   2: required list&amp;lt;TColumnValue&amp;gt; columnValues
   3: optional i64 timestamp,
-  4: optional bool writeToWal = 1,
-  5: optional map&amp;lt;binary, binary&amp;gt; attributes
+  4: optional bool writeToWal,
+  5: optional TDurability durability,
+  6: optional map&amp;lt;binary, binary&amp;gt; attributes
 }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &quot;attributes&quot; are changing their numbers, which means a 0.94 client will not work with a trunk server. You need to keep the numbers unique and so that they never change. In other words, the 0.94 patch should be:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 struct TPut {
   1: required binary row,
   2: required list&amp;lt;TColumnValue&amp;gt; columnValues
   3: optional i64 timestamp,
-  4: optional bool writeToWal = 1,
-  5: optional map&amp;lt;binary, binary&amp;gt; attributes
+  4: optional bool writeToWal,
+  6: optional TDurability durability,
+  5: optional map&amp;lt;binary, binary&amp;gt; attributes
 }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;note the flipped numbering to keep the recently added &quot;attributes&quot; on ID #5. The trunk patch then should include&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 struct TPut {
   1: required binary row,
   2: required list&amp;lt;TColumnValue&amp;gt; columnValues
   3: optional i64 timestamp,
-  4: optional bool writeToWal = 1,
+  6: optional TDurability durability,
   5: optional map&amp;lt;binary, binary&amp;gt; attributes
 }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;i.e. removing ID #4 but keeping ID #5 and adding #6 as per the above.&lt;/p&gt;

&lt;p&gt;Makes sense?&lt;/p&gt;</comment>
                            <comment id="13717497" author="madani" created="Tue, 23 Jul 2013 19:17:30 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=larsgeorge&quot; class=&quot;user-hover&quot; rel=&quot;larsgeorge&quot;&gt;Lars George&lt;/a&gt; for reviewing the patch. &lt;br/&gt;
Since 0.94 uses thrift 0.8.0 and trunk uses thrift 0.9.0 I believe clients updating to 0.95 or above have to re-generate their thrift files anyways. As for numbering thrift fields, I was under the impression that the fields should be ordered and a missing field number is not allowed. (i.e can not have 6: optional TDurability durability then 5: optional map&amp;lt;binary, binary&amp;gt; attributes )&lt;/p&gt;</comment>
                            <comment id="13718264" author="larsgeorge" created="Wed, 24 Jul 2013 11:43:43 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=madani&quot; class=&quot;user-hover&quot; rel=&quot;madani&quot;&gt;Hamed Madani&lt;/a&gt;, I am not talking about the client adopting the new features, they need to do that eventually. But for a rolling upgrade, you can have an older client talking to a newer server, or vice versa. See &lt;a href=&quot;http://www.quora.com/Are-different-versions-of-Thrift-compatible-with-each-other-on-the-wire-RPC-level&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;this&lt;/a&gt; for reference. Similar to &lt;a href=&quot;https://developers.google.com/protocol-buffers/docs/proto&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;ProtoBufs&lt;/a&gt; (see &quot;Assigning Tags&quot;) the IDs are what is used during serialization and deserialization to match values to fields. If you change this, then you mix up assignment.&lt;/p&gt;

&lt;p&gt;As for ordering, if you look at the Thrift example, there is a test including a &quot;Backwards&quot; test, which assigns the IDs out of order. I had assumed this is arbitrary (i.e. the ordering) as long as you match IDs to fields and not change them across versions.&lt;/p&gt;

&lt;p&gt;And you should be able to have gaps, since you can that way retire older fields - the deserialization will simply ignore them. I just wish Thrift had a proper documentation. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;</comment>
                            <comment id="13718287" author="larsgeorge" created="Wed, 24 Jul 2013 12:10:58 +0000"  >&lt;p&gt;For reference from &lt;a href=&quot;http://svn.apache.org/repos/asf/thrift/attic/trunk/doc/thrift.tex&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;online&lt;/a&gt; material:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Structs&lt;br/&gt;
...&lt;br/&gt;
Field identifiers will be automatically assigned if omitted, though they are strongly encouraged for versioning reasons discussed later.&lt;br/&gt;
...&lt;br/&gt;
Versioning&lt;br/&gt;
...&lt;br/&gt;
Thrift is robust in the face of versioning and data definition changes. This is critical to enable staged rollouts of changes to deployed services.&lt;br/&gt;
...&lt;br/&gt;
Field Identifiers&lt;br/&gt;
...&lt;br/&gt;
To avoid conflicts between manually and automatically assigned identifiers, fields with identifiers omitted are assigned identifiers decrementing from -1, and the language only supports the manual assignment of positive identifiers.&lt;br/&gt;
...&lt;br/&gt;
If a field identifier is not recognized, the generated code can use the type specifier to skip the unknown field without any error.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;So there is no notion of ordering, but states the fact that there may be gaps because of older to newer definitions.&lt;/p&gt;</comment>
                            <comment id="13719347" author="madani" created="Thu, 25 Jul 2013 07:47:01 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=larsgeorge&quot; class=&quot;user-hover&quot; rel=&quot;larsgeorge&quot;&gt;Lars George&lt;/a&gt; for the explanation. It does make sense now &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Updated the patches. &lt;/p&gt;</comment>
                            <comment id="13719387" author="hadoopqa" created="Thu, 25 Jul 2013 08:41:09 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12594132/HBASE-8947-v4-.094.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12594132/HBASE-8947-v4-.094.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6461//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6461//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13719765" author="larsgeorge" created="Thu, 25 Jul 2013 16:45:19 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=madani&quot; class=&quot;user-hover&quot; rel=&quot;madani&quot;&gt;Hamed Madani&lt;/a&gt;, did you by any chance miss the TIncrement changes in the 0.94 patch? Looking at what you attached, it differs from the trunk patch by ignoring the increments.&lt;/p&gt;</comment>
                            <comment id="13719787" author="madani" created="Thu, 25 Jul 2013 17:13:30 +0000"  >&lt;p&gt;Yes Lars. Since Increment doesn&apos;t extend Mutation in 0.94, it doesn&apos;t support Durability. &lt;/p&gt;</comment>
                            <comment id="13719797" author="larsgeorge" created="Thu, 25 Jul 2013 17:26:54 +0000"  >&lt;p&gt;Ah right, you mentioned this earlier. Duh. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Testing you patches now, but looking at them in the raw, they look pretty good already. Thanks again Hamed!&lt;/p&gt;</comment>
                            <comment id="13719818" author="larsgeorge" created="Thu, 25 Jul 2013 17:39:01 +0000"  >&lt;p&gt;All tests pass, committing to all major branches. Thanks Hamed!&lt;/p&gt;</comment>
                            <comment id="13719841" author="eclark" created="Thu, 25 Jul 2013 17:59:51 +0000"  >&lt;p&gt;Looks like this broke trunk compiles.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.5.1:compile (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-compile) on project hbase-server: Compilation failure: Compilation failure:
[ERROR] /Users/eclark/Code/&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt;/hbase/hbase-server/src/main/java/org/apache/hadoop/hbase/thrift2/generated/TPut.java:[68,9] error: cannot find symbol
[ERROR] symbol:   class TDurability
[ERROR] location: class TPut
[ERROR] /Users/eclark/Code/&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt;/hbase/hbase-server/src/main/java/org/apache/hadoop/hbase/thrift2/generated/TPut.java:[368,9] error: cannot find symbol
[ERROR] symbol:   class TDurability
[ERROR] location: class TPut
[ERROR] /Users/eclark/Code/&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt;/hbase/hbase-server/src/main/java/org/apache/hadoop/hbase/thrift2/generated/TPut.java:[376,28] error: cannot find symbol
[ERROR] symbol:   class TDurability
[ERROR] location: class TPut
[ERROR] /Users/eclark/Code/&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt;/hbase/hbase-server/src/main/java/org/apache/hadoop/hbase/thrift2/generated/TDelete.java:[88,9] error: cannot find symbol
[ERROR] symbol:   class TDurability
[ERROR] location: class TDelete
[ERROR] /Users/eclark/Code/&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt;/hbase/hbase-server/src/main/java/org/apache/hadoop/hbase/thrift2/generated/TDelete.java:[434,9] error: cannot find symbol
[ERROR] symbol:   class TDurability
[ERROR] location: class TDelete
[ERROR] /Users/eclark/Code/&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt;/hbase/hbase-server/src/main/java/org/apache/hadoop/hbase/thrift2/generated/TDelete.java:[442,31] error: cannot find symbol
[ERROR] symbol:   class TDurability
[ERROR] location: class TDelete
[ERROR] /Users/eclark/Code/&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt;/hbase/hbase-server/src/main/java/org/apache/hadoop/hbase/thrift2/generated/TIncrement.java:[61,9] error: cannot find symbol
[ERROR] symbol:   class TDurability
[ERROR] location: class TIncrement
[ERROR] /Users/eclark/Code/&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt;/hbase/hbase-server/src/main/java/org/apache/hadoop/hbase/thrift2/generated/TIncrement.java:[327,9] error: cannot find symbol
[ERROR] symbol:   class TDurability
[ERROR] location: class TIncrement
[ERROR] /Users/eclark/Code/&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt;/hbase/hbase-server/src/main/java/org/apache/hadoop/hbase/thrift2/generated/TIncrement.java:[335,34] error: cannot find symbol
[ERROR] symbol:   class TDurability
[ERROR] location: class TIncrement
[ERROR] /Users/eclark/Code/&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt;/hbase/hbase-server/src/main/java/org/apache/hadoop/hbase/thrift2/ThriftUtilities.java:[413,49] error: cannot find symbol
[ERROR] symbol:   class TDurability
[ERROR] location: class ThriftUtilities
[ERROR] /Users/eclark/Code/&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt;/hbase/hbase-server/src/main/java/org/apache/hadoop/hbase/thrift2/generated/TPut.java:[163,92] error: cannot find symbol
[ERROR] symbol:   class TDurability
[ERROR] location: class TPut
[ERROR] /Users/eclark/Code/&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt;/hbase/hbase-server/src/main/java/org/apache/hadoop/hbase/thrift2/generated/TPut.java:[434,23] error: cannot find symbol
[ERROR] symbol:   class TDurability
[ERROR] location: class TPut
[ERROR] /Users/eclark/Code/&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt;/hbase/hbase-server/src/main/java/org/apache/hadoop/hbase/thrift2/generated/TPut.java:[776,34] error: cannot find symbol
[ERROR] symbol:   variable TDurability
[ERROR] location: class TPutStandardScheme
[ERROR] /Users/eclark/Code/&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt;/hbase/hbase-server/src/main/java/org/apache/hadoop/hbase/thrift2/generated/TPut.java:[933,28] error: cannot find symbol
[ERROR] symbol:   variable TDurability
[ERROR] location: class TPutTupleScheme
[ERROR] /Users/eclark/Code/&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt;/hbase/hbase-server/src/main/java/org/apache/hadoop/hbase/thrift2/generated/TDelete.java:[192,92] error: cannot find symbol
[ERROR] symbol:   class TDurability
[ERROR] location: class TDelete
[ERROR] /Users/eclark/Code/&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt;/hbase/hbase-server/src/main/java/org/apache/hadoop/hbase/thrift2/generated/TDelete.java:[508,23] error: cannot find symbol
[ERROR] symbol:   class TDurability
[ERROR] location: class TDelete
[ERROR] /Users/eclark/Code/&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt;/hbase/hbase-server/src/main/java/org/apache/hadoop/hbase/thrift2/generated/TDelete.java:[891,34] error: cannot find symbol
[ERROR] symbol:   variable TDurability
[ERROR] location: class TDeleteStandardScheme
[ERROR] /Users/eclark/Code/&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt;/hbase/hbase-server/src/main/java/org/apache/hadoop/hbase/thrift2/generated/TDelete.java:[1074,28] error: cannot find symbol
[ERROR] symbol:   variable TDurability
[ERROR] location: class TDeleteTupleScheme
[ERROR] /Users/eclark/Code/&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt;/hbase/hbase-server/src/main/java/org/apache/hadoop/hbase/thrift2/generated/TIncrement.java:[149,92] error: cannot find symbol
[ERROR] symbol:   class TDurability
[ERROR] location: class TIncrement
[ERROR] /Users/eclark/Code/&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt;/hbase/hbase-server/src/main/java/org/apache/hadoop/hbase/thrift2/generated/TIncrement.java:[385,23] error: cannot find symbol
[ERROR] symbol:   class TDurability
[ERROR] location: class TIncrement
[ERROR] /Users/eclark/Code/&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt;/hbase/hbase-server/src/main/java/org/apache/hadoop/hbase/thrift2/generated/TIncrement.java:[687,34] error: cannot find symbol
[ERROR] symbol:   variable TDurability
[ERROR] location: class TIncrementStandardScheme
[ERROR] /Users/eclark/Code/&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt;/hbase/hbase-server/src/main/java/org/apache/hadoop/hbase/thrift2/generated/TIncrement.java:[829,28] error: cannot find symbol
[ERROR] symbol:   variable TDurability
[ERROR] location: class TIncrementTupleScheme
[ERROR] /Users/eclark/Code/&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt;/hbase/hbase-server/src/main/java/org/apache/hadoop/hbase/thrift2/ThriftUtilities.java:[414,32] error: strings in &lt;span class=&quot;code-keyword&quot;&gt;switch&lt;/span&gt; are not supported in -source 1.6
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13719887" author="apurtell" created="Thu, 25 Jul 2013 18:30:12 +0000"  >&lt;p&gt;I see the same breakage.&lt;/p&gt;</comment>
                            <comment id="13719931" author="lhofhansl" created="Thu, 25 Jul 2013 19:23:39 +0000"  >&lt;p&gt;Broke 0.94 build as well. Let&apos;s revert for now (or have an addendum soon).&lt;/p&gt;</comment>
                            <comment id="13719933" author="lhofhansl" created="Thu, 25 Jul 2013 19:24:49 +0000"  >&lt;p&gt;Lars G. probably just forgot to add TDurability.&lt;/p&gt;</comment>
                            <comment id="13719936" author="larsgeorge" created="Thu, 25 Jul 2013 19:26:22 +0000"  >&lt;p&gt;Yes I did, sorry. Coming up ASAP. &lt;/p&gt;</comment>
                            <comment id="13719941" author="stack" created="Thu, 25 Jul 2013 19:27:56 +0000"  >&lt;p&gt;Here is my revert of this on trunk and 0.94.&lt;/p&gt;</comment>
                            <comment id="13719947" author="larsgeorge" created="Thu, 25 Jul 2013 19:30:08 +0000"  >&lt;p&gt;Added file.&lt;/p&gt;</comment>
                            <comment id="13719948" author="lhofhansl" created="Thu, 25 Jul 2013 19:30:25 +0000"  >&lt;p&gt;I just added TDurability locally to 0.94 and all is fine now. This is the part of SVN I hate (I have forgotten to add new file before commit).&lt;/p&gt;</comment>
                            <comment id="13719951" author="stack" created="Thu, 25 Jul 2013 19:30:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=larsgeorge&quot; class=&quot;user-hover&quot; rel=&quot;larsgeorge&quot;&gt;Lars George&lt;/a&gt; Sorry.  Reverted from trunk.  I will get out of your way now you are on it.  Sorry about that.  Let me know if you want me to reapply.&lt;/p&gt;</comment>
                            <comment id="13719981" author="larsgeorge" created="Thu, 25 Jul 2013 19:51:09 +0000"  >&lt;p&gt;Yeah, my bad for not double checking. I will reapply the revert ASAP. &lt;/p&gt;</comment>
                            <comment id="13720493" author="larsgeorge" created="Fri, 26 Jul 2013 07:34:21 +0000"  >&lt;p&gt;Added missing file, sorry guys! Applied patch to trunk again after Stack&apos;s revert.&lt;/p&gt;</comment>
                            <comment id="13720878" author="stack" created="Fri, 26 Jul 2013 15:22:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=larsgeorge&quot; class=&quot;user-hover&quot; rel=&quot;larsgeorge&quot;&gt;Lars George&lt;/a&gt; no harm done&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12594244" name="8947.revert.txt" size="60755" author="stack" created="Thu, 25 Jul 2013 19:27:56 +0000"/>
                            <attachment id="12592275" name="HBASE-8947-v2.patch" size="47414" author="madani" created="Mon, 15 Jul 2013 03:35:41 +0000"/>
                            <attachment id="12593678" name="HBASE-8947-v3-0.94.patch" size="35412" author="madani" created="Tue, 23 Jul 2013 10:01:35 +0000"/>
                            <attachment id="12593661" name="HBASE-8947-v3.patch" size="51632" author="madani" created="Tue, 23 Jul 2013 08:54:20 +0000"/>
                            <attachment id="12594132" name="HBASE-8947-v4-.094.patch" size="28561" author="madani" created="Thu, 25 Jul 2013 07:43:18 +0000"/>
                            <attachment id="12594121" name="HBASE-8947-v4.patch" size="63244" author="madani" created="Thu, 25 Jul 2013 07:23:51 +0000"/>
                            <attachment id="12592272" name="HBASE-8947.patch" size="47097" author="madani" created="Mon, 15 Jul 2013 03:17:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 15 Jul 2013 04:30:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>337882</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 21 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ma2f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>338204</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thrift2</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>