<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:29:20 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5611/HBASE-5611.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5611] Replayed edits from regions that failed to open during recovery aren&apos;t removed from the global MemStore size</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5611</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;This bug is rather easy to get if the &lt;tt&gt;TimeoutMonitor&lt;/tt&gt; is on, else I think it&apos;s still possible to hit it if a region fails to open for more obscure reasons like HDFS errors.&lt;/p&gt;

&lt;p&gt;Consider a region that just went through distributed splitting and that&apos;s now being opened by a new RS. The first thing it does is to read the recovery files and put the edits in the &lt;tt&gt;MemStores&lt;/tt&gt;. If this process takes a long time, the master will move that region away. At that point the edits are still accounted for in the global &lt;tt&gt;MemStore&lt;/tt&gt; size but they are dropped when the &lt;tt&gt;HRegion&lt;/tt&gt; gets cleaned up. It&apos;s completely invisible until the &lt;tt&gt;MemStoreFlusher&lt;/tt&gt; needs to force flush a region and that none of them have edits:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2012-03-21 00:33:39,303 DEBUG org.apache.hadoop.hbase.regionserver.MemStoreFlusher: Flush thread woke up because memory above low water=5.9g
2012-03-21 00:33:39,303 ERROR org.apache.hadoop.hbase.regionserver.MemStoreFlusher: Cache flusher failed for entry null
java.lang.IllegalStateException
        at com.google.common.base.Preconditions.checkState(Preconditions.java:129)
        at org.apache.hadoop.hbase.regionserver.MemStoreFlusher.flushOneForGlobalPressure(MemStoreFlusher.java:199)
        at org.apache.hadoop.hbase.regionserver.MemStoreFlusher.run(MemStoreFlusher.java:223)
        at java.lang.Thread.run(Thread.java:662)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &lt;tt&gt;null&lt;/tt&gt; here is a region. In my case I had so many edits in the &lt;tt&gt;MemStore&lt;/tt&gt; during recovery that I&apos;m over the low barrier although in fact I&apos;m at 0. It happened yesterday and it still printing this out.&lt;/p&gt;

&lt;p&gt;To fix this we need to be able to decrease the global &lt;tt&gt;MemStore&lt;/tt&gt; size when the region can&apos;t open.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12547436">HBASE-5611</key>
            <summary>Replayed edits from regions that failed to open during recovery aren&apos;t removed from the global MemStore size</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jeason">Jieshan Bean</assignee>
                                    <reporter username="jdcryans">Jean-Daniel Cryans</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Mar 2012 18:38:50 +0000</created>
                <updated>Wed, 18 Sep 2013 22:13:23 +0000</updated>
                            <resolved>Mon, 30 Apr 2012 20:34:17 +0000</resolved>
                                    <version>0.90.6</version>
                                    <fixVersion>0.92.2</fixVersion>
                    <fixVersion>0.94.0</fixVersion>
                    <fixVersion>0.95.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13261744" author="jeason" created="Wed, 25 Apr 2012 15:59:44 +0000"  >&lt;p&gt;Patch for review. Thanks.&lt;/p&gt;</comment>
                            <comment id="13261799" author="zhihyu@ebaysf.com" created="Wed, 25 Apr 2012 16:50:57 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-comment&quot;&gt;// global memstore size once a region opening failed.&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&apos;region opening failed&apos; -&amp;gt; &apos;region failed opening&apos;.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; ConcurrentMap&amp;lt;HRegionInfo, AtomicLong&amp;gt; replayEditsPerRegion = 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Do we need HRegionInfo as the key to the Map ? Can we use region name ?&lt;br/&gt;
For rollbackRegionReplayEditsSize():&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      addAndGetGlobalMemstoreSize(-replayEdistsSize.get());
+      clearRegionReplayEditsSize(hri);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I suggest remembering the value of -replayEdistsSize.get() in a variable so that we can exchange the order of the two statements above and return directly from the if block.&lt;br/&gt;
If replayEdistsSize is null, would that indicate certain race condition ?&lt;/p&gt;</comment>
                            <comment id="13261816" author="ram_krish" created="Wed, 25 Apr 2012 17:16:06 +0000"  >&lt;p&gt;@Lars&lt;br/&gt;
Want this in 0.94.0? &lt;/p&gt;</comment>
                            <comment id="13261860" author="lhofhansl" created="Wed, 25 Apr 2012 18:03:09 +0000"  >&lt;p&gt;Yep... Looks bad.&lt;/p&gt;</comment>
                            <comment id="13261904" author="lhofhansl" created="Wed, 25 Apr 2012 18:33:20 +0000"  >&lt;p&gt;Actually... It seems we had this problem since 0.90.&lt;br/&gt;
I&apos;ll pull it in if it gets done in time, otherwise it&apos;ll be in the next point release.&lt;/p&gt;</comment>
                            <comment id="13262309" author="jeason" created="Thu, 26 Apr 2012 01:45:23 +0000"  >&lt;p&gt;Thank you, Ted. I will update the patch immediately. And will make the patch for 94 today.&lt;/p&gt;</comment>
                            <comment id="13262321" author="jeason" created="Thu, 26 Apr 2012 02:05:46 +0000"  >&lt;blockquote&gt;&lt;p&gt;If replayEdistsSize is null, would that indicate certain race condition ?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;If no edits needed to replay, it should be null. Only during region openning process, those new methods will be called. It&apos;s should not be a race condition.&lt;/p&gt;</comment>
                            <comment id="13262648" author="zhihyu@ebaysf.com" created="Thu, 26 Apr 2012 14:47:46 +0000"  >&lt;p&gt;@Jieshan:&lt;br/&gt;
When you have multiple patches for different branches, attach patch for trunk apart from the other patches.&lt;br/&gt;
Otherwise Hadoop QA may pick up the wrong patch.&lt;/p&gt;</comment>
                            <comment id="13262651" author="jeason" created="Thu, 26 Apr 2012 14:50:50 +0000"  >&lt;p&gt;Thank you, Ted. I will take care.&lt;/p&gt;</comment>
                            <comment id="13262652" author="zhihyu@ebaysf.com" created="Thu, 26 Apr 2012 14:55:27 +0000"  >&lt;p&gt;Patch v2 looks good in general.&lt;br/&gt;
Comment on formatting:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+   * @param regionName
+   *          region name.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The line length limit is 100 chars. Please put javadoc for param on the same line as param name.&lt;/p&gt;

&lt;p&gt;You can wait for Hadoop QA result to come back before attaching new patches.&lt;/p&gt;</comment>
                            <comment id="13262656" author="jeason" created="Thu, 26 Apr 2012 14:59:33 +0000"  >&lt;p&gt;I use the formatter from &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3678&quot; title=&quot;Add Eclipse-based Apache Formatter to HBase Wiki&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3678&quot;&gt;&lt;del&gt;HBASE-3678&lt;/del&gt;&lt;/a&gt;. Every time, it format my code like that.&lt;br/&gt;
I will change after QA result.&lt;/p&gt;</comment>
                            <comment id="13262673" author="hadoopqa" created="Thu, 26 Apr 2012 15:36:12 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12524416/HBASE-5611-trunk-v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12524416/HBASE-5611-trunk-v2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 4 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1656//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1656//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1656//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1656//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1656//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1656//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13262702" author="zhihyu@ebaysf.com" created="Thu, 26 Apr 2012 16:13:39 +0000"  >&lt;p&gt;Tests were clear.&lt;/p&gt;

&lt;p&gt;@Jieshan:&lt;br/&gt;
Please address formatting and prepare patches for each branch.&lt;/p&gt;

&lt;p&gt;We should also run test suite for 0.90 and 0.92 once patches are available.&lt;/p&gt;

&lt;p&gt;Good job.&lt;/p&gt;</comment>
                            <comment id="13263326" author="jeason" created="Fri, 27 Apr 2012 03:43:18 +0000"  >&lt;p&gt;Will upload the patches for 92 and 90 today&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13263327" author="zhihyu@ebaysf.com" created="Fri, 27 Apr 2012 03:48:01 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+   * Roll back the global MemStore size when a region can&apos;t open.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above is not accurate: we&apos;re only rolling back the replay edits size for specified region from global MemStore size.&lt;/p&gt;</comment>
                            <comment id="13263333" author="hadoopqa" created="Fri, 27 Apr 2012 04:26:05 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12524809/HBASE-5611-trunk-v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12524809/HBASE-5611-trunk-v2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 2 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.regionserver.TestServerCustomProtocol&lt;br/&gt;
                  org.apache.hadoop.hbase.util.TestHBaseFsck&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1664//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1664//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1664//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1664//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1664//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1664//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13263336" author="hadoopqa" created="Fri, 27 Apr 2012 04:32:24 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12524812/HBASE-5611-94-minorchange.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12524812/HBASE-5611-94-minorchange.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1667//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1667//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13263337" author="jeason" created="Fri, 27 Apr 2012 04:32:30 +0000"  >&lt;p&gt;This problem seems not present in 90 branch. RegionServerAccounting is not in 90. And the global memstore size is calculated by below methods: &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  public long getGlobalMemStoreSize() {
    long total = 0;
    for (HRegion region : onlineRegions.values()) {
      total += region.memstoreSize.get();
    }
    return total;
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13263347" author="hadoopqa" created="Fri, 27 Apr 2012 05:13:01 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12524810/HBASE-5611-trunk-v2-minorchange.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12524810/HBASE-5611-trunk-v2-minorchange.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 2 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1666//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1666//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1666//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1666//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1666//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1666//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13263904" author="yuzhihong@gmail.com" created="Fri, 27 Apr 2012 19:27:15 +0000"  >&lt;p&gt;I ran 0.92 test suite over 0.92 patch and didn&apos;t find regression.&lt;/p&gt;

&lt;p&gt;Will integrate tomorrow if there is no objection.&lt;/p&gt;</comment>
                            <comment id="13264027" author="lhofhansl" created="Fri, 27 Apr 2012 22:08:29 +0000"  >&lt;p&gt;Still waiting for a 0.94.0 blocker. +1 on 0.94 commit as well.&lt;/p&gt;</comment>
                            <comment id="13264210" author="yuzhihong@gmail.com" created="Sat, 28 Apr 2012 04:21:45 +0000"  >&lt;p&gt;Integrated to 0.92, 0.94 and trunk.&lt;/p&gt;

&lt;p&gt;Thanks for the patch, Jieshan.&lt;/p&gt;

&lt;p&gt;Thanks for the review, Lars.&lt;/p&gt;</comment>
                            <comment id="13264225" author="hudson" created="Sat, 28 Apr 2012 05:40:06 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #153 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/153/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/153/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5611&quot; title=&quot;Replayed edits from regions that failed to open during recovery aren&amp;#39;t removed from the global MemStore size&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5611&quot;&gt;&lt;del&gt;HBASE-5611&lt;/del&gt;&lt;/a&gt; Replayed edits from regions that failed to open during recovery aren&apos;t removed from the global MemStore size (Jieshan) (Revision 1331683)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/RegionServerAccounting.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/handler/OpenRegionHandler.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13264228" author="hudson" created="Sat, 28 Apr 2012 06:16:30 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2823 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2823/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2823/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5611&quot; title=&quot;Replayed edits from regions that failed to open during recovery aren&amp;#39;t removed from the global MemStore size&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5611&quot;&gt;&lt;del&gt;HBASE-5611&lt;/del&gt;&lt;/a&gt; Replayed edits from regions that failed to open during recovery aren&apos;t removed from the global MemStore size (Jieshan) (Revision 1331681)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/RegionServerAccounting.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/handler/OpenRegionHandler.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13264238" author="hudson" created="Sat, 28 Apr 2012 07:17:21 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-security #187 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-security/187/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-security/187/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5611&quot; title=&quot;Replayed edits from regions that failed to open during recovery aren&amp;#39;t removed from the global MemStore size&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5611&quot;&gt;&lt;del&gt;HBASE-5611&lt;/del&gt;&lt;/a&gt; Replayed edits from regions that failed to open during recovery aren&apos;t removed from the global MemStore size (Jieshan) (Revision 1331681)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/RegionServerAccounting.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/handler/OpenRegionHandler.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13264242" author="hudson" created="Sat, 28 Apr 2012 07:27:00 +0000"  >&lt;p&gt;Integrated in HBase-0.92 #392 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92/392/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92/392/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5611&quot; title=&quot;Replayed edits from regions that failed to open during recovery aren&amp;#39;t removed from the global MemStore size&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5611&quot;&gt;&lt;del&gt;HBASE-5611&lt;/del&gt;&lt;/a&gt; Replayed edits from regions that failed to open during recovery aren&apos;t removed from the global MemStore size (Jieshan) (Revision 1331684)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/regionserver/RegionServerAccounting.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/regionserver/handler/OpenRegionHandler.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13264327" author="zhihyu@ebaysf.com" created="Sat, 28 Apr 2012 14:00:31 +0000"  >&lt;p&gt;Addendum for 0.94&lt;/p&gt;</comment>
                            <comment id="13264340" author="hudson" created="Sat, 28 Apr 2012 14:56:32 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #155 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/155/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/155/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5611&quot; title=&quot;Replayed edits from regions that failed to open during recovery aren&amp;#39;t removed from the global MemStore size&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5611&quot;&gt;&lt;del&gt;HBASE-5611&lt;/del&gt;&lt;/a&gt; Addendum fixes test failure in TestHeapSize#testSizes (Revision 1331769)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13264395" author="zhihyu@ebaysf.com" created="Sat, 28 Apr 2012 20:28:49 +0000"  >&lt;p&gt;Changes for 0.94 reverted due to TestChangingEncoding failure.&lt;/p&gt;</comment>
                            <comment id="13264414" author="hudson" created="Sat, 28 Apr 2012 21:56:22 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #158 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/158/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/158/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5611&quot; title=&quot;Replayed edits from regions that failed to open during recovery aren&amp;#39;t removed from the global MemStore size&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5611&quot;&gt;&lt;del&gt;HBASE-5611&lt;/del&gt;&lt;/a&gt; Revert due to consistent TestChangingEncoding failure in 0.94 branch (Revision 1331826)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/RegionServerAccounting.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/handler/OpenRegionHandler.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13264420" author="hudson" created="Sat, 28 Apr 2012 22:24:39 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #24 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/24/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/24/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5611&quot; title=&quot;Replayed edits from regions that failed to open during recovery aren&amp;#39;t removed from the global MemStore size&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5611&quot;&gt;&lt;del&gt;HBASE-5611&lt;/del&gt;&lt;/a&gt; Revert due to consistent TestChangingEncoding failure in 0.94 branch (Revision 1331826)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5611&quot; title=&quot;Replayed edits from regions that failed to open during recovery aren&amp;#39;t removed from the global MemStore size&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5611&quot;&gt;&lt;del&gt;HBASE-5611&lt;/del&gt;&lt;/a&gt; Addendum fixes test failure in TestHeapSize#testSizes (Revision 1331769)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5611&quot; title=&quot;Replayed edits from regions that failed to open during recovery aren&amp;#39;t removed from the global MemStore size&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5611&quot;&gt;&lt;del&gt;HBASE-5611&lt;/del&gt;&lt;/a&gt; Replayed edits from regions that failed to open during recovery aren&apos;t removed from the global MemStore size (Jieshan) (Revision 1331683)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/RegionServerAccounting.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/handler/OpenRegionHandler.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/RegionServerAccounting.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/handler/OpenRegionHandler.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13264471" author="jeason" created="Sun, 29 Apr 2012 04:21:57 +0000"  >&lt;p&gt;Thank you, Ted.&lt;br/&gt;
I will check that failure in 94 version.&lt;/p&gt;</comment>
                            <comment id="13264740" author="jeason" created="Mon, 30 Apr 2012 08:49:29 +0000"  >&lt;p&gt;TestHeapSize failure on a 32-bit machine in 94 is caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5900&quot; title=&quot;HRegion#FIXED_OVERHEAD is miscalculated in 94.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5900&quot;&gt;&lt;del&gt;HBASE-5900&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;</comment>
                            <comment id="13264859" author="jeason" created="Mon, 30 Apr 2012 10:07:18 +0000"  >&lt;p&gt;The new version patch for 94 will be uploaded after &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5900&quot; title=&quot;HRegion#FIXED_OVERHEAD is miscalculated in 94.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5900&quot;&gt;&lt;del&gt;HBASE-5900&lt;/del&gt;&lt;/a&gt; get fixed.&lt;/p&gt;</comment>
                            <comment id="13265121" author="zhihyu@ebaysf.com" created="Mon, 30 Apr 2012 19:07:55 +0000"  >&lt;p&gt;Patch for 0.94 branch which fixes FIXED_OVERHEAD.&lt;/p&gt;</comment>
                            <comment id="13265127" author="zhihyu@ebaysf.com" created="Mon, 30 Apr 2012 19:17:40 +0000"  >&lt;p&gt;Integrated 5611-94-v2.txt to 0.94 branch.&lt;/p&gt;</comment>
                            <comment id="13265383" author="hudson" created="Mon, 30 Apr 2012 21:20:58 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #161 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/161/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/161/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5611&quot; title=&quot;Replayed edits from regions that failed to open during recovery aren&amp;#39;t removed from the global MemStore size&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5611&quot;&gt;&lt;del&gt;HBASE-5611&lt;/del&gt;&lt;/a&gt; Replayed edits from regions that failed to open during recovery aren&apos;t removed from the global MemStore size - v2 (Jieshan) (Revision 1332344)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/RegionServerAccounting.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/handler/OpenRegionHandler.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13266126" author="hudson" created="Tue, 1 May 2012 21:28:01 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #25 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/25/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/25/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5611&quot; title=&quot;Replayed edits from regions that failed to open during recovery aren&amp;#39;t removed from the global MemStore size&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5611&quot;&gt;&lt;del&gt;HBASE-5611&lt;/del&gt;&lt;/a&gt; Replayed edits from regions that failed to open during recovery aren&apos;t removed from the global MemStore size - v2 (Jieshan) (Revision 1332344)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/RegionServerAccounting.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/handler/OpenRegionHandler.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13266313" author="jeason" created="Wed, 2 May 2012 03:23:54 +0000"  >&lt;p&gt;Thank you very much, Ted.&lt;/p&gt;</comment>
                            <comment id="13268866" author="hudson" created="Sat, 5 May 2012 02:28:20 +0000"  >&lt;p&gt;Integrated in HBase-0.92-security #106 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92-security/106/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92-security/106/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5611&quot; title=&quot;Replayed edits from regions that failed to open during recovery aren&amp;#39;t removed from the global MemStore size&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5611&quot;&gt;&lt;del&gt;HBASE-5611&lt;/del&gt;&lt;/a&gt; Replayed edits from regions that failed to open during recovery aren&apos;t removed from the global MemStore size (Jieshan) (Revision 1331684)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/regionserver/RegionServerAccounting.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/regionserver/handler/OpenRegionHandler.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12525090" name="5611-94-v2.txt" size="7636" author="zhihyu@ebaysf.com" created="Mon, 30 Apr 2012 19:07:55 +0000"/>
                            <attachment id="12524982" name="5611-94.addendum" size="3129" author="zhihyu@ebaysf.com" created="Sat, 28 Apr 2012 14:00:31 +0000"/>
                            <attachment id="12524811" name="HBASE-5611-92.patch" size="7497" author="jeason" created="Fri, 27 Apr 2012 04:28:25 +0000"/>
                            <attachment id="12524812" name="HBASE-5611-94-minorchange.patch" size="7565" author="jeason" created="Fri, 27 Apr 2012 04:28:25 +0000"/>
                            <attachment id="12524810" name="HBASE-5611-trunk-v2-minorchange.patch" size="7569" author="jeason" created="Fri, 27 Apr 2012 04:12:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 25 Apr 2012 15:59:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>232594</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 32 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0692v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34402</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>