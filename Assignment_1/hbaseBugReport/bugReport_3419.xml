<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:10:02 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-3419/HBASE-3419.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-3419] If re-transition to OPENING during log replay fails, server aborts.  Instead, should just cancel region open.</title>
                <link>https://issues.apache.org/jira/browse/HBASE-3419</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The &lt;tt&gt;Progressable&lt;/tt&gt; used on region open to tickle the ZK OPENING node to prevent the master from timing out a region open operation will currently abort the RegionServer if this fails for some reason.  However it could be &quot;normal&quot; for an RS to have a region open operation aborted by the master, so should just handle as it does other places by reverting the open.&lt;/p&gt;

&lt;p&gt;We had a cluster trip over some other issue (for some reason, the tickle was not happening in &amp;lt; 30 seconds, so master was timing out every time).  Because of the abort on BadVersion, this eventually led to every single RS aborting itself eventually taking down the cluster.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12494745">HBASE-3419</key>
            <summary>If re-transition to OPENING during log replay fails, server aborts.  Instead, should just cancel region open.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="streamy">Jonathan Gray</assignee>
                                    <reporter username="streamy">Jonathan Gray</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Jan 2011 17:36:59 +0000</created>
                <updated>Fri, 20 Nov 2015 12:41:37 +0000</updated>
                            <resolved>Tue, 8 Feb 2011 02:08:14 +0000</resolved>
                                    <version>0.90.0</version>
                    <version>0.92.0</version>
                                    <fixVersion>0.90.1</fixVersion>
                                    <component>regionserver</component>
                    <component>Zookeeper</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12977870" author="streamy" created="Wed, 5 Jan 2011 17:39:35 +0000"  >&lt;p&gt;Currently the &quot;tickle&quot; happens on a number-of-replayed-edits interval (does not count edits skipped).  This is probably not the best idea since edits can be wildly different sizes (in this case, an all increment cluster where there are very high numbers of small edits).&lt;/p&gt;

&lt;p&gt;The tickle is really about time not number of edits.  Maybe a Chore instead set at 1/2 master timeout?  Or some other way of doing it based on time instead of edits?&lt;/p&gt;</comment>
                            <comment id="12977983" author="stack" created="Wed, 5 Jan 2011 21:44:46 +0000"  >&lt;p&gt;Chatting about this up on IRC, the tickle does not happen if we are skipping edits.  Thats wrong.  We should tickle even if we skip edits .&lt;/p&gt;

&lt;p&gt;Regards making progressable a Chore, I&apos;d say not exactly.  Progressable is about whether or no progress is being made.  We dont&apos; want the tickle to happen if we are stuck on HDFS.  Chatting w/ Jon,  the tickle should happen not after N edits but after P milliseconds AS LONG AS we&apos;re making progress. &lt;/p&gt;

&lt;p&gt;Also, killing regionserver if we fail replay recovered.edits in time is wrong.  Instead we should fail the region open.&lt;/p&gt;</comment>
                            <comment id="12978000" author="streamy" created="Wed, 5 Jan 2011 22:09:56 +0000"  >&lt;p&gt;Working on implementing what stack outlined above.&lt;/p&gt;</comment>
                            <comment id="12978036" author="streamy" created="Wed, 5 Jan 2011 23:23:39 +0000"  >&lt;p&gt;As outlined.&lt;/p&gt;

&lt;p&gt;Had to add new &lt;tt&gt;CancelableProgressable&lt;/tt&gt; interface because we needed to be able to tell the caller to cancel the operation.&lt;/p&gt;</comment>
                            <comment id="12978038" author="streamy" created="Wed, 5 Jan 2011 23:27:20 +0000"  >&lt;p&gt;Squashed the v1 patch with another patch.  v2 is just this stuff.&lt;/p&gt;</comment>
                            <comment id="12978553" author="stack" created="Thu, 6 Jan 2011 22:55:35 +0000"  >&lt;p&gt;+1 on patch.&lt;/p&gt;

&lt;p&gt;Jon says he&apos;s running it too.&lt;/p&gt;</comment>
                            <comment id="12991701" author="tlipcon" created="Mon, 7 Feb 2011 23:21:04 +0000"  >&lt;p&gt;patch doesn&apos;t apply anymore - jgray is going to check it out&lt;/p&gt;</comment>
                            <comment id="12991714" author="streamy" created="Mon, 7 Feb 2011 23:35:27 +0000"  >&lt;p&gt;Rebased on branch.&lt;/p&gt;</comment>
                            <comment id="12991724" author="tlipcon" created="Tue, 8 Feb 2011 00:00:55 +0000"  >&lt;p&gt;+1, looks good to me.&lt;/p&gt;</comment>
                            <comment id="12991750" author="streamy" created="Tue, 8 Feb 2011 00:50:52 +0000"  >&lt;p&gt;Rebased on trunk&lt;/p&gt;</comment>
                            <comment id="12991755" author="tlipcon" created="Tue, 8 Feb 2011 00:56:31 +0000"  >&lt;p&gt;+1 for trunk patch&lt;/p&gt;</comment>
                            <comment id="12991769" author="streamy" created="Tue, 8 Feb 2011 02:08:14 +0000"  >&lt;p&gt;Committed to branch and trunk.  Following new convention of marking against branch for fix version and listing under 0.90.1 in CHANGES.&lt;/p&gt;

&lt;p&gt;Thanks for poking me and for reviews Todd!&lt;/p&gt;</comment>
                            <comment id="12991799" author="hudson" created="Tue, 8 Feb 2011 05:09:29 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #1737 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/HBase-TRUNK/1737/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/HBase-TRUNK/1737/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3419&quot; title=&quot;If re-transition to OPENING during log replay fails, server aborts.  Instead, should just cancel region open.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3419&quot;&gt;&lt;del&gt;HBASE-3419&lt;/del&gt;&lt;/a&gt; If re-transition to OPENING during log replay fails, server aborts. Instead, should just cancel region open.&lt;/p&gt;</comment>
                            <comment id="15017028" author="lars_francke" created="Fri, 20 Nov 2015 12:41:37 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12467596" name="HBASE-3419-v1.patch" size="12641" author="streamy" created="Wed, 5 Jan 2011 23:23:38 +0000"/>
                            <attachment id="12467597" name="HBASE-3419-v2.patch" size="13014" author="streamy" created="Wed, 5 Jan 2011 23:27:20 +0000"/>
                            <attachment id="12470531" name="HBASE-3419-v3-TRUNK.patch" size="11415" author="streamy" created="Tue, 8 Feb 2011 00:50:52 +0000"/>
                            <attachment id="12470523" name="HBASE-3419-v3.patch" size="12004" author="streamy" created="Mon, 7 Feb 2011 23:35:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 5 Jan 2011 21:44:46 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26850</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hm7j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>100860</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>