<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:01:16 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-2366/HBASE-2366.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-2366] We should store table metadata in a single location, for HDFS table recovery, not on every region</title>
                <link>https://issues.apache.org/jira/browse/HBASE-2366</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Right now, every region has a .regioninfo file that describes what the region contains. This is used by the add_table tool to recover a table from HDFS, when there are problems with the .META. table. Right now the .regioninfo file stores both region-specific as well as table-specific metadata (the columns), which can cause problems.&lt;/p&gt;

&lt;p&gt;One such problem appears when some of the .regioninfo files are not updates. Workflow to reproduce this is:&lt;br/&gt;
1. Create a new table with a list of columns.&lt;br/&gt;
2. Push some data into the table, so at least one region exists.&lt;br/&gt;
3. Do an ALTER on the table and add some new columns.&lt;br/&gt;
3.1 Look at one of the .regioninfo files. They still contain the old list of columns.&lt;br/&gt;
4. Push some more data into the table, containing values for the new columns.&lt;br/&gt;
5. Run add_table.rb on this table. &lt;br/&gt;
6. Try to push the data at point 4 again. You will get errors - NoSuchColumnFamilyExists exception.&lt;/p&gt;

&lt;p&gt;in our specific case, 10 out of the 140 regions of a table had the initial list of columns, and the others were updated (as part of splits, as we deduced). We had to run add_table, which replaced the .META. entries with the ones on disk, and as a result we couldn&apos;t get to our data anymore. Re-writing the .regioninfo with the correct column list (as done in HRegion.java) and re-adding the table fixed it for us,.&lt;/p&gt;

&lt;p&gt;It should be possible to store the table information in a single location (e.g. /hbase/table_name/.tableinfo maybe?) and work on it on table create / alter which would prevent this case from happening again.&lt;/p&gt;</description>
                <environment>&lt;p&gt;CentOS 5.4, x86_64&lt;/p&gt;</environment>
        <key id="12459997">HBASE-2366</key>
            <summary>We should store table metadata in a single location, for HDFS table recovery, not on every region</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="civascu">Cristian Ivascu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Mar 2010 13:59:30 +0000</created>
                <updated>Fri, 10 Jun 2011 23:54:22 +0000</updated>
                            <resolved>Fri, 10 Jun 2011 23:54:22 +0000</resolved>
                                                                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12848771" author="stack" created="Tue, 23 Mar 2010 15:57:49 +0000"  >&lt;p&gt;Agreed.  Its suboptimal (speaking euphemistically) the way it works now.  Part of the master rewrite, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1816&quot; title=&quot;Master rewrite&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1816&quot;&gt;&lt;del&gt;HBASE-1816&lt;/del&gt;&lt;/a&gt;, hopefully for 0.21, includes moving schema out of .META. and up into zookeeper.  Table schema including column family schemas will all be written to a single znode that all regionservers watch (on change, RSs update schema).  &lt;/p&gt;</comment>
                            <comment id="12867007" author="stack" created="Thu, 13 May 2010 04:41:43 +0000"  >&lt;p&gt;Moved from 0.21 to 0.22 just after merge of old 0.20 branch into TRUNK.&lt;/p&gt;</comment>
                            <comment id="13009503" author="stack" created="Tue, 22 Mar 2011 01:30:07 +0000"  >&lt;p&gt;Cristian &apos;s idea above of a .tableinfo instead of a .regioninfo is a big improvement over what we currently do.&lt;/p&gt;</comment>
                            <comment id="13047598" author="stack" created="Fri, 10 Jun 2011 22:46:01 +0000"  >&lt;p&gt;Moving out of 0.92.0. Pull it back in if you think different.&lt;/p&gt;</comment>
                            <comment id="13047785" author="stack" created="Fri, 10 Jun 2011 23:54:22 +0000"  >&lt;p&gt;Resolving as duplicate.  Subbu is doing what Cristian suggests over in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-451&quot; title=&quot;Remove HTableDescriptor from HRegionInfo&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-451&quot;&gt;&lt;del&gt;HBASE-451&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12436554">HBASE-1867</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12423637">HBASE-1342</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 23 Mar 2010 15:57:49 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26276</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 27 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hhfj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>100086</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>