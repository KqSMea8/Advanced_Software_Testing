<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:36:02 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6356/HBASE-6356.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6356] printStackTrace in FSUtils</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6356</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;This is bad...&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    public boolean accept(Path p) {
      boolean isValid = false;
      try {
        if (HConstants.HBASE_NON_USER_TABLE_DIRS.contains(p.toString())) {
          isValid = false;
        } else {
            isValid = this.fs.getFileStatus(p).isDir();
        }
      } catch (IOException e) {
        e.printStackTrace();          &amp;lt;================ 
      }
      return isValid;
    }
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12598038">HBASE-6356</key>
            <summary>printStackTrace in FSUtils</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gustavoanatoly">Gustavo Anatoly</assignee>
                                    <reporter username="nkeywal">Nicolas Liochon</reporter>
                        <labels>
                    </labels>
                <created>Mon, 9 Jul 2012 14:38:27 +0000</created>
                <updated>Tue, 5 Aug 2014 20:11:41 +0000</updated>
                            <resolved>Wed, 14 Nov 2012 11:18:18 +0000</resolved>
                                    <version>0.95.2</version>
                                                    <component>Client</component>
                    <component>master</component>
                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13409543" author="stack" created="Mon, 9 Jul 2012 14:57:47 +0000"  >&lt;p&gt;I suppose we&apos;re not allowed throw in here?  Should we throw a RuntimeException?&lt;/p&gt;</comment>
                            <comment id="13409552" author="nkeywal" created="Mon, 9 Jul 2012 15:10:08 +0000"  >&lt;p&gt;Yes, we&apos;re not allowed to throw. I wonder if it&apos;s better to log.warn or to stop here. Today when it happens it returns false, so the easy option is to just log and saying that we keep the backward compatibility this way...&lt;/p&gt;</comment>
                            <comment id="13490330" author="gustavoanatoly" created="Sun, 4 Nov 2012 23:41:01 +0000"  >&lt;p&gt;Hi, nkeywal. &lt;/p&gt;

&lt;p&gt;I read about your comment and I make a simple update like this:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;public boolean accept(Path p) {
      boolean isValid = false;
      try {
        if (HConstants.HBASE_NON_USER_TABLE_DIRS.contains(p.toString())) {
          isValid = false;
        } else {
            isValid = this.fs.getFileStatus(p).isDir();
        }
      } catch (IOException e) {
        LOG.warn(e);
      }
      return isValid;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Could you verify if that code above is like you was thinking?&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="13490628" author="nkeywal" created="Mon, 5 Nov 2012 13:41:59 +0000"  >&lt;p&gt;Hi Gustavo,&lt;/p&gt;

&lt;p&gt;Yes, it would work. It&apos;s the simple option. But it&apos;s clean. I would add a message in the log, especially mentioning that we&apos;re ignoring the error and returning false.&lt;/p&gt;

&lt;p&gt;Do you want to submit a patch?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;</comment>
                            <comment id="13490644" author="gustavoanatoly" created="Mon, 5 Nov 2012 14:06:06 +0000"  >&lt;p&gt;Hi, nkeywal&lt;/p&gt;

&lt;p&gt;Thanks for reply firstly. Yes, I would like to work in this task, I will work on a patch to submit for review, adding a message on log. &lt;/p&gt;

&lt;p&gt;Thanks again.&lt;/p&gt;</comment>
                            <comment id="13490989" author="gustavoanatoly" created="Mon, 5 Nov 2012 22:28:55 +0000"  >&lt;p&gt;printStackTrace refactored&lt;/p&gt;</comment>
                            <comment id="13490996" author="gustavoanatoly" created="Mon, 5 Nov 2012 22:40:50 +0000"  >&lt;p&gt;Hi, nkeywal.&lt;/p&gt;

&lt;p&gt;A patch has been uploaded to review, could verify if were that you had thought?&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="13491008" author="nkeywal" created="Mon, 5 Nov 2012 22:53:26 +0000"  >&lt;p&gt;Hum, if I&apos;m not wrong the exception will come only from this.fs.getFileStatus(p).isDir();?&lt;br/&gt;
So it&apos;s not in the HConstants.HBASE_NON_USER_TABLE_DIRS list?&lt;/p&gt;</comment>
                            <comment id="13491127" author="gustavoanatoly" created="Tue, 6 Nov 2012 02:16:46 +0000"  >&lt;p&gt;Hi, nkeywal.&lt;/p&gt;

&lt;p&gt;Really I&apos;m wrong, I will fix it.&lt;/p&gt;

&lt;p&gt;Thanks for your advice&lt;/p&gt;</comment>
                            <comment id="13491463" author="gustavoanatoly" created="Tue, 6 Nov 2012 14:03:08 +0000"  >&lt;p&gt;Hi, nkeywal.&lt;/p&gt;

&lt;p&gt;Could you verify if you are agree with this message to LOG.warn?  &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;public boolean accept(Path p) {
  boolean isValid = false;
  try {
    if (HConstants.HBASE_NON_USER_TABLE_DIRS.contains(p.toString())) {
      isValid = false;
    } else {
      isValid = this.fs.getFileStatus(p).isDir();
    }
  } catch (IOException e) {
    LOG.warn(&quot;An error occured while verify [&quot; + p.toString() + &quot;] if is a valid directory.&quot;, e);
  }
  return isValid;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you are agree, I will submit a new patch.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="13491488" author="nkeywal" created="Tue, 6 Nov 2012 14:51:59 +0000"  >&lt;p&gt;Hi Gustavo,&lt;/p&gt;

&lt;p&gt;What do you think of &lt;br/&gt;
    LOG.warn(&quot;An error occured while verifying &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot; + p.toString() + &amp;quot;&amp;#93;&lt;/span&gt; if is a valid directory. Returning &apos;not valid&apos; and continuing.&quot;, e);&lt;/p&gt;

&lt;p&gt;It&apos;s worth checking what Path#toString() says as well (is it really a name?)&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;

&lt;p&gt;Nicolas&lt;/p&gt;</comment>
                            <comment id="13491754" author="gustavoanatoly" created="Tue, 6 Nov 2012 19:37:41 +0000"  >&lt;p&gt;Hi, Nicolas.&lt;/p&gt;

&lt;p&gt;About the message LOG.warn I think is good, because the log reader will understand what happened, and continue with a not valid return, but about your second question, would you like that check if Path#toString() is really a name before passed to the LOG.warn?&lt;/p&gt;

&lt;p&gt;Thanks for your patience.&lt;/p&gt;</comment>
                            <comment id="13493873" author="nkeywal" created="Fri, 9 Nov 2012 10:12:10 +0000"  >&lt;p&gt;I was wondering what Path#toString() exactly returns. There is no javadoc (at least in version 1.1), but I checked the source code, and yes, it returns the full patch, so I think it&apos;s ok to use it as you did.&lt;/p&gt;</comment>
                            <comment id="13493988" author="gustavoanatoly" created="Fri, 9 Nov 2012 13:07:25 +0000"  >&lt;p&gt;Hi, Nicolas.&lt;/p&gt;

&lt;p&gt;Thanks for reply. I&apos;ve attached the patch for review.&lt;/p&gt;</comment>
                            <comment id="13495200" author="nkeywal" created="Mon, 12 Nov 2012 10:40:49 +0000"  >&lt;p&gt;Seems ok to me, except a typo I can fix on commit. Will do that tomorrow if no one objects.&lt;/p&gt;</comment>
                            <comment id="13495240" author="gustavoanatoly" created="Mon, 12 Nov 2012 13:09:48 +0000"  >&lt;p&gt;Hi, Nicolas.&lt;/p&gt;

&lt;p&gt;Excuse me for the typo. I corrected in this new patch.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="13495946" author="stack" created="Tue, 13 Nov 2012 04:40:34 +0000"  >&lt;p&gt;+1 on commit&lt;/p&gt;</comment>
                            <comment id="13496361" author="nkeywal" created="Tue, 13 Nov 2012 17:36:28 +0000"  >&lt;p&gt;Committed and jira assigned to you, Gustavo. Thanks for the patch!.&lt;/p&gt;</comment>
                            <comment id="13496511" author="gustavoanatoly" created="Tue, 13 Nov 2012 20:27:21 +0000"  >&lt;p&gt;Thanks you Nicolas, for your patience and your reviews.&lt;/p&gt;</comment>
                            <comment id="13496551" author="hudson" created="Tue, 13 Nov 2012 21:16:41 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3536 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3536/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3536/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6356&quot; title=&quot;printStackTrace in FSUtils&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6356&quot;&gt;&lt;del&gt;HBASE-6356&lt;/del&gt;&lt;/a&gt; printStackTrace in FSUtils (Gustavo Anatoly) (Revision 1408851)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
nkeywal : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/util/FSUtils.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13496849" author="hudson" created="Wed, 14 Nov 2012 04:16:26 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #259 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/259/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/259/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6356&quot; title=&quot;printStackTrace in FSUtils&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6356&quot;&gt;&lt;del&gt;HBASE-6356&lt;/del&gt;&lt;/a&gt; printStackTrace in FSUtils (Gustavo Anatoly) (Revision 1408851)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
nkeywal : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/util/FSUtils.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12551766">HBASE-5843</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12553109" name="HBASE-6356.patch" size="667" author="gustavoanatoly" created="Mon, 12 Nov 2012 13:09:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 9 Jul 2012 14:57:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>241720</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 5 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02blb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11479</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>