<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:06:41 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-3021/HBASE-3021.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-3021] Timestamp mismatch between WAL and MemStore for ICVs</title>
                <link>https://issues.apache.org/jira/browse/HBASE-3021</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;We&apos;ve been running replication for a little while now and the tool I wrote to verify replicated data (will be posted in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3013&quot; title=&quot;Tool to verify data in two clusters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3013&quot;&gt;&lt;del&gt;HBASE-3013&lt;/del&gt;&lt;/a&gt;) works great, unless that data is counters. The reason is that in HRegion.incrementColumnValue we append to the WAL a KV with a timestamp that we&apos;re not reusing for the MemStore (since we do some processing on it in updateColumnValue), so the replicated KV is different and comparing sets of rows using time ranges usually fails because one row will almost surely be cut in half on the edges (at least this is what my testing shows).&lt;/p&gt;

&lt;p&gt;I guess this is also an issue on the slave cluster since if we don&apos;t want values on the same ts on the master cluster, why would we want it elsewhere?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12474733">HBASE-3021</key>
            <summary>Timestamp mismatch between WAL and MemStore for ICVs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jdcryans">Jean-Daniel Cryans</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Sep 2010 17:55:25 +0000</created>
                <updated>Tue, 7 May 2013 22:33:44 +0000</updated>
                            <resolved>Tue, 7 May 2013 22:33:44 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12979523" author="dhruba" created="Mon, 10 Jan 2011 10:13:25 +0000"  >&lt;p&gt;&amp;gt; The reason is that in HRegion.incrementColumnValue we append to the WAL a KV with a timestamp that we&apos;re not reusing for the MemStore&lt;/p&gt;

&lt;p&gt;can some kind soul please explain why we do not use the same timestamp for the WAL and the Memstore? Thanks in advance.&lt;/p&gt;</comment>
                            <comment id="12979799" author="ryanobjc" created="Mon, 10 Jan 2011 22:11:09 +0000"  >&lt;p&gt;this is because we previously needed to avoid having 2 KVs with the same timestamp, otherwise we might read from the &apos;older&apos; one with a smaller value and affect counter values.&lt;/p&gt;

&lt;p&gt;With the work on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2856&quot; title=&quot;TestAcidGuarantee broken on trunk &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2856&quot;&gt;&lt;del&gt;HBASE-2856&lt;/del&gt;&lt;/a&gt; we wont have to do this anymore.&lt;/p&gt;</comment>
                            <comment id="13651387" author="jdcryans" created="Tue, 7 May 2013 22:33:44 +0000"  >&lt;p&gt;Not sure what the current situation is now but this is too old to be useful.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 10 Jan 2011 10:13:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26594</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02e8f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11907</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>