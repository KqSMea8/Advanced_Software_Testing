<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:00:17 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-2249/HBASE-2249.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-2249] The PerformanceEvaluation read tests don&apos;t take the MemStore into account.</title>
                <link>https://issues.apache.org/jira/browse/HBASE-2249</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The write tests in the PerformanceEvaluation flush the MemStore after they complete, as a result the read tests don&apos;t take the MemStore into account (because it&apos;s always empty).  An optional flag could be provided when the performance evaluation starts that dictates if the table should be flushed after a test completes.  This optional flag would allow changes to the MemStore to be performance tested...&lt;/p&gt;</description>
                <environment></environment>
        <key id="12457101">HBASE-2249</key>
            <summary>The PerformanceEvaluation read tests don&apos;t take the MemStore into account.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="7">Later</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dan.washusen">Dan Washusen</reporter>
                        <labels>
                            <label>moved_from_0_20_5</label>
                    </labels>
                <created>Tue, 23 Feb 2010 00:47:04 +0000</created>
                <updated>Tue, 12 Aug 2014 19:21:57 +0000</updated>
                            <resolved>Tue, 12 Aug 2014 19:21:57 +0000</resolved>
                                    <version>0.20.3</version>
                                                    <component>Performance</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12837014" author="jdcryans" created="Tue, 23 Feb 2010 00:48:25 +0000"  >&lt;p&gt;Good idea Dan!&lt;/p&gt;</comment>
                            <comment id="12837017" author="stack" created="Tue, 23 Feb 2010 00:54:51 +0000"  >&lt;p&gt;IMO opinion the default should be not flush at end of test&lt;/p&gt;</comment>
                            <comment id="12837449" author="stack" created="Tue, 23 Feb 2010 21:13:37 +0000"  >&lt;p&gt;Adds ---flushCommits and RandomScanWithRangeTest.&lt;/p&gt;</comment>
                            <comment id="12837454" author="dan.washusen" created="Tue, 23 Feb 2010 21:26:03 +0000"  >&lt;p&gt;Should probably also change the timer logic to include the scanner open call as per Dave&apos;s suggestion.&lt;/p&gt;</comment>
                            <comment id="12837495" author="dan.washusen" created="Tue, 23 Feb 2010 23:01:47 +0000"  >&lt;p&gt;I&apos;ve looked over the code in PerformanceEvaluation.  In the patch attached to this issue the call to HTable.getScanner(...) is included in the time... &lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;PerformanceEvaluation.Test#test gets the current time&lt;/li&gt;
	&lt;li&gt;PerformanceEvaluation.Test#test calls PerformanceEvaluation.Test#testTimed&lt;/li&gt;
	&lt;li&gt;PerformanceEvaluation.Test#testTimed calls PerformanceEvaluation.Test#testRow&lt;/li&gt;
	&lt;li&gt;PerformanceEvaluation.Test#testRow opens the scanner and iterates over all rows in the result set&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="12837501" author="dan.washusen" created="Tue, 23 Feb 2010 23:10:38 +0000"  >&lt;p&gt;Oops, I missed a step...&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;PerformanceEvaluation.Test#test gets the current time&lt;/li&gt;
	&lt;li&gt;PerformanceEvaluation.Test#test calls PerformanceEvaluation.Test#testTimed&lt;/li&gt;
	&lt;li&gt;PerformanceEvaluation.Test#testTimed calls PerformanceEvaluation.Test#testRow&lt;/li&gt;
	&lt;li&gt;PerformanceEvaluation.Test#testRow opens the scanner and iterates over all rows in the result set&lt;/li&gt;
	&lt;li&gt;PerformanceEvaluation.Test#test calculates the difference between the start time and end time and reports it as the elapsed time&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="12837560" author="dan.washusen" created="Wed, 24 Feb 2010 01:17:26 +0000"  >&lt;p&gt;Posted on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2248&quot; title=&quot;Provide new non-copy mechanism to assure atomic reads in get and scan&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2248&quot;&gt;&lt;del&gt;HBASE-2248&lt;/del&gt;&lt;/a&gt; based by Dave:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;@Dan: Took a read over the patch, though it seemed to be based in a different dir and didn&apos;t want to apply nicely. From what I can see the ScanTest still does getScanner in testSetup before the timer is begun. This may be fine, if the point of this test is to measure scan performance per-row and not setup/teardown time. It just explains why the ScanTest doesn&apos;t exhibit this issue. It does look like other tests, such as the RandomSeekScanTest and the new RandomScanWithRangeTest do test setup/teardown time as part of each &quot;testRow&quot; and should exhibit this issue, if run.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Dave has a very good point, the ScanTest is a strange one.  It appears to be timing each call to ResetScanner#next and not including the cost of setting up or closing the scanner.  IMO, this should be changed but doing so would change any previous results...&lt;/p&gt;</comment>
                            <comment id="12842344" author="stack" created="Sat, 6 Mar 2010 23:33:13 +0000"  >&lt;p&gt;This is the attached patch with the paths adjusted to match TRUNK.  It still doesn&apos;t apply though because command descriptor is different in TRUNK.&lt;/p&gt;</comment>
                            <comment id="12842345" author="stack" created="Sat, 6 Mar 2010 23:34:57 +0000"  >&lt;p&gt;I applied &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2249&quot; title=&quot;The PerformanceEvaluation read tests don&amp;#39;t take the MemStore into account.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2249&quot;&gt;&lt;del&gt;HBASE-2249&lt;/del&gt;&lt;/a&gt;.patch to the branch.  I made one change adding the scanner setup to timing (I moved the scanner setup out of set setup and into testRow &amp;#8212; if scanner is null, create it).  It changes timings but it should have been in there all along (as Dan and Dave suggest above).&lt;/p&gt;

&lt;p&gt;Maybe someone can fix up the patch so it applies to TRUNK?&lt;/p&gt;</comment>
                            <comment id="12853716" author="jdcryans" created="Tue, 6 Apr 2010 03:31:11 +0000"  >&lt;p&gt;So I&apos;m not sure exactly what was committed to branch WRT to the title of this issue.&lt;/p&gt;

&lt;p&gt;Also the flushCommit thing is broken, it added:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
     void testTakedown()  &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
-      &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.table.flushCommits();
+      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (flushCommits) {
+        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.table.flushCommits();
+      }
     }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This literally means that if flushCommits is false then we don&apos;t flush the client write buffer to HBase... and this is the default value! I don&apos;t understand how this relates to this jira as it means that we don&apos;t commit all the rows to HBase. I discovered this while testing replication, I was missing a few thousand rows and asked Ryan to run it when he told me you have the right number only when you run PE with --flushCommits. This should be reverted until fixed.&lt;/p&gt;</comment>
                            <comment id="12853750" author="stack" created="Tue, 6 Apr 2010 05:12:05 +0000"  >&lt;p&gt;.bq So I&apos;m not sure exactly what was committed to branch WRT to the title of this issue.&lt;/p&gt;

&lt;p&gt;Doesn&apos;t &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;$ svn diff -r919868:919875 .&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; tell you?&lt;/p&gt;

&lt;p&gt;.bq This literally means that if flushCommits is false then we don&apos;t flush the client write buffer to HBase... and this is the default value!&lt;/p&gt;

&lt;p&gt;This looks like a misunderstanding on author&apos;s part.  Let me ask.  This issue is supposed to be about memstore flushing, not client flushing.  Sorry for any inconvenience caused by my hasty commit.&lt;/p&gt;
</comment>
                            <comment id="12853753" author="jdcryans" created="Tue, 6 Apr 2010 05:17:30 +0000"  >&lt;p&gt;smile the diff tells me, but I look at the title of this issue and it&apos;s confusing, half of the code isn&apos;t related to this issue&apos;s scope.&lt;/p&gt;</comment>
                            <comment id="12853758" author="stack" created="Tue, 6 Apr 2010 05:29:09 +0000"  >&lt;p&gt;This patch was idling on my machine.  It was sent by author a few weeks ago but I forgot about it.  &lt;/p&gt;

&lt;p&gt;Here is commit message:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
calling HBaseAdmin.flushTable instead of the the HTable.flushCommits
including the call to HTable.flushCommits within the timer (as per email from Bob Jacoby)
fix bug with flushCommits argument parsing
renamed flushCommits argument to flushTable
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Please review J-D.&lt;/p&gt;</comment>
                            <comment id="12854995" author="jdcryans" created="Thu, 8 Apr 2010 16:48:03 +0000"  >&lt;p&gt;+1, this makes much more sense now.&lt;/p&gt;</comment>
                            <comment id="12855036" author="jdcryans" created="Thu, 8 Apr 2010 17:33:10 +0000"  >&lt;p&gt;Moving this out of 0.20.4, the first patch wasn&apos;t applied there anyways.&lt;/p&gt;

&lt;p&gt;Also the v2 patch fails on 13 chunks out of 22 even with fuzz of 5 on latest branch.&lt;/p&gt;</comment>
                            <comment id="12856470" author="apurtell" created="Tue, 13 Apr 2010 16:21:38 +0000"  >&lt;p&gt;Cancelling patch. Stale, please rebase.&lt;/p&gt;</comment>
                            <comment id="12866836" author="stack" created="Wed, 12 May 2010 23:48:50 +0000"  >&lt;p&gt;Bulk move of 0.20.5 issues into 0.21.0 after vote that we merge branch into TRUNK up on list.&lt;/p&gt;</comment>
                            <comment id="12914773" author="stack" created="Sat, 25 Sep 2010 06:45:36 +0000"  >&lt;p&gt;Moving out of 0.90.  We&apos;re all YCSB these times rather than PE.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12457095">HBASE-2248</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12438117" name="2249-TRUNK.patch" size="23267" author="stack" created="Sat, 6 Mar 2010 23:33:13 +0000"/>
                            <attachment id="12436761" name="HBASE-2249.patch" size="27915" author="stack" created="Tue, 23 Feb 2010 21:13:37 +0000"/>
                            <attachment id="12440844" name="HBASE-2249_v2.patch" size="9930" author="stack" created="Tue, 6 Apr 2010 05:29:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 23 Feb 2010 00:48:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32479</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 12 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02fe7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12095</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>