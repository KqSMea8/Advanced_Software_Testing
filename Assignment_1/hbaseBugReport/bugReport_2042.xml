<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:58:29 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-2042/HBASE-2042.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-2042] ChecksumException generates thousands of open sockets</title>
                <link>https://issues.apache.org/jira/browse/HBASE-2042</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Below is from Stefan Will:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
I just ran into another &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; where a Regionserver wouldn&apos;t properly shut down (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is on my development cluster, so not too critical). In &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt;, it is also holding over 27000 datanode sockets (port 50010) in CLOSE_WAIT state. I was actually using so many that the SSH daemon wouldn&apos;t let me log in to the machine due to too many open file handles (I can probably figure out how to increase that limit). So I shut down the Master and the other regionservers, which might have been the cause &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; it to be in &lt;span class=&quot;code-quote&quot;&gt;&quot;handleConnectionFailure()&quot;&lt;/span&gt;. The last few lines of the log were:

009-12-06 10:30:12,609 INFO org.apache.hadoop.hbase.regionserver.HRegionServer: aborting server at: 10.1.20.144:60020 &amp;lt;http:&lt;span class=&quot;code-comment&quot;&gt;//10.1.20.144:60020&amp;gt;
&lt;/span&gt;- Hide quoted text -
2009-12-06 10:30:12,646 INFO org.apache.hadoop.hbase.regionserver.LogFlusher: regionserver/10.1.20.144:60020.logFlusher exiting
2009-12-06 10:30:12,646 INFO org.apache.hadoop.hbase.regionserver.HRegionServer$MajorCompactionChecker: regionserver/10.1.20.144:60020.majorCompactionChecker exiting
2009-12-06 10:30:14,871 INFO org.apache.hadoop.hbase.Leases: regionserver/10.1.20.144:60020.leaseChecker closing leases
2009-12-06 10:30:14,871 INFO org.apache.hadoop.hbase.Leases: regionserver/10.1.20.144:60020.leaseChecker closed leases
2009-12-06 10:30:17,366 INFO org.apache.hadoop.hbase.regionserver.HRegionServer: worker thread exiting
2009-12-06 10:30:17,366 INFO org.apache.zookeeper.ZooKeeper: Closing session: 0x2255b24f9f1003a
2009-12-06 10:30:17,366 INFO org.apache.zookeeper.ClientCnxn: Closing ClientCnxn &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; session: 0x2255b24f9f1003a
2009-12-06 10:30:17,387 INFO org.apache.zookeeper.ClientCnxn: Exception &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; closing send thread &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; session 0x2255b24f9f1003a : Read error rc = -1 java.nio.DirectByteBuffer[
pos=0 lim=4 cap=4]
2009-12-06 10:30:17,489 INFO org.apache.zookeeper.ClientCnxn: Disconnecting ClientCnxn &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; session: 0x2255b24f9f1003a
2009-12-06 10:30:17,489 INFO org.apache.zookeeper.ZooKeeper: Session: 0x2255b24f9f1003a closed
2009-12-06 10:30:17,548 INFO org.apache.zookeeper.ClientCnxn: EventThread shut down
2009-12-06 20:35:25,725 INFO org.apache.hadoop.hbase.regionserver.HRegionServer: Starting shutdown thread.

And here is the stacktrace taken after I was able to log back into the machine and send a kill to the process (at the last timestamp). It is now 15 minutes later, and the process is still running with no further log output.

Between midnight and 10:30, there are also over 6700 checksum errors in the log, always with the same log file name:

org.apache.hadoop.fs.ChecksumException: Checksum error: /blk_4234778497757442733:of:/hbase/post/1926133619/oldlogfile.log at 62521344
        at org.apache.hadoop.fs.FSInputChecker.verifySum(FSInputChecker.java:277)
        at org.apache.hadoop.fs.FSInputChecker.readChecksumChunk(FSInputChecker.java:241)

Here is the stack dump:

Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;LeaseChecker&quot;&lt;/span&gt; java.lang.NullPointerException
    at org.apache.hadoop.ipc.Client$Connection.handleConnectionFailure(Client.java:351)
    at org.apache.hadoop.ipc.Client$Connection.setupIOstreams(Client.java:313)
    at org.apache.hadoop.ipc.Client$Connection.access$1700(Client.java:176)
    at org.apache.hadoop.ipc.Client.getConnection(Client.java:859)
    at org.apache.hadoop.ipc.Client.call(Client.java:719)
    at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:220)
    at $Proxy1.renewLease(Unknown Source)
    at sun.reflect.GeneratedMethodAccessor12.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:82)
    at org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:59)
    at $Proxy1.renewLease(Unknown Source)
    at org.apache.hadoop.hdfs.DFSClient$LeaseChecker.renew(DFSClient.java:1046)
    at org.apache.hadoop.hdfs.DFSClient$LeaseChecker.run(DFSClient.java:1058)
    at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:619)
2009-12-06 20:43:32
Full thread dump Java HotSpot(TM) 64-Bit Server VM (14.0-b16 mixed mode):

&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-28&quot;&lt;/span&gt; prio=10 tid=0x00000000539e5800 nid=0x742e in &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait() [0x0000000040a45000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: WAITING (on object monitor)
    at java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(Native Method)
    - waiting on &amp;lt;0x00002aaab7803738&amp;gt; (a java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;)
    at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.join(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:1143)
    - locked &amp;lt;0x00002aaab7803738&amp;gt; (a java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;)
    at org.apache.hadoop.hbase.util.Threads.shutdown(Threads.java:77)
    at org.apache.hadoop.hbase.util.Threads.shutdown(Threads.java:66)
    at org.apache.hadoop.hbase.regionserver.HRegionServer$ShutdownThread.run(HRegionServer.java:992)

&lt;span class=&quot;code-quote&quot;&gt;&quot;SIGTERM handler&quot;&lt;/span&gt; daemon prio=10 tid=0x0000000053ca6000 nid=0x742d in &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait() [0x0000000043b02000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: WAITING (on object monitor)
    at java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(Native Method)
    - waiting on &amp;lt;0x00002aaab7941978&amp;gt; (a org.apache.hadoop.hbase.regionserver.HRegionServer$ShutdownThread)
    at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.join(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:1143)
    - locked &amp;lt;0x00002aaab7941978&amp;gt; (a org.apache.hadoop.hbase.regionserver.HRegionServer$ShutdownThread)
    at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.join(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:1196)
    at java.lang.ApplicationShutdownHooks.runHooks(ApplicationShutdownHooks.java:79)
    at java.lang.ApplicationShutdownHooks$1.run(ApplicationShutdownHooks.java:24)
    at java.lang.Shutdown.runHooks(Shutdown.java:79)
    at java.lang.Shutdown.sequence(Shutdown.java:123)
    at java.lang.Shutdown.exit(Shutdown.java:168)
    - locked &amp;lt;0x00002aaaed6f2ef0&amp;gt; (a java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; java.lang.Shutdown)
    at java.lang.Terminator$1.handle(Terminator.java:35)
    at sun.misc.Signal$1.run(Signal.java:195)
    at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:619)

&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-23&quot;&lt;/span&gt; prio=10 tid=0x00002aab08019800 nid=0x2036 sleeping[0x00000000413de000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: TIMED_WAITING (sleeping)
    at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(Native Method)
    at org.apache.hadoop.ipc.Client.stop(Client.java:679)
    at org.apache.hadoop.ipc.RPC$ClientCache.stopClient(RPC.java:192)
    at org.apache.hadoop.ipc.RPC$ClientCache.access$400(RPC.java:141)
    at org.apache.hadoop.ipc.RPC$Invoker.close(RPC.java:234)
    - locked &amp;lt;0x00002aaab7955f10&amp;gt; (a org.apache.hadoop.ipc.RPC$Invoker)
    at org.apache.hadoop.ipc.RPC$Invoker.access$500(RPC.java:199)
    at org.apache.hadoop.ipc.RPC.stopProxy(RPC.java:393)
    at org.apache.hadoop.hdfs.DFSClient.close(DFSClient.java:241)
    - locked &amp;lt;0x00002aaab78e5078&amp;gt; (a org.apache.hadoop.hdfs.DFSClient)
    at org.apache.hadoop.hdfs.DistributedFileSystem.close(DistributedFileSystem.java:269)
    at org.apache.hadoop.fs.FileSystem$Cache.closeAll(FileSystem.java:1419)
    - locked &amp;lt;0x00002aaab79563f0&amp;gt; (a org.apache.hadoop.fs.FileSystem$Cache)
    at org.apache.hadoop.fs.FileSystem.closeAll(FileSystem.java:212)
    at org.apache.hadoop.fs.FileSystem$ClientFinalizer.run(FileSystem.java:197)
    - locked &amp;lt;0x00002aaab78037e0&amp;gt; (a org.apache.hadoop.fs.FileSystem$ClientFinalizer)

&lt;span class=&quot;code-quote&quot;&gt;&quot;LruBlockCache.EvictionThread&quot;&lt;/span&gt; daemon prio=10 tid=0x0000000053920800 nid=0x31a4 in &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait() [0x0000000043900000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: WAITING (on object monitor)
    at java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(Native Method)
    - waiting on &amp;lt;0x00002aaab7a56160&amp;gt; (a org.apache.hadoop.hbase.io.hfile.LruBlockCache$EvictionThread)
    at java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.java:485)
    at org.apache.hadoop.hbase.io.hfile.LruBlockCache$EvictionThread.run(LruBlockCache.java:512)
    - locked &amp;lt;0x00002aaab7a56160&amp;gt; (a org.apache.hadoop.hbase.io.hfile.LruBlockCache$EvictionThread)

&lt;span class=&quot;code-quote&quot;&gt;&quot;DestroyJavaVM&quot;&lt;/span&gt; prio=10 tid=0x00002aaaf800f000 nid=0x2f53 waiting on condition [0x0000000000000000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: RUNNABLE

&lt;span class=&quot;code-quote&quot;&gt;&quot;regionserver/10.1.20.144:60020 &amp;lt;http:&lt;span class=&quot;code-comment&quot;&gt;//10.1.20.144:60020&amp;gt; &quot;&lt;/span&gt; prio=10 tid=0x00002aaaf800e000 nid=0x2f6c waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; monitor entry [0x00000000415e2000]
&lt;/span&gt;- Hide quoted text -

   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: BLOCKED (on object monitor)
    at java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(Native Method)
    - waiting on &amp;lt;0x00002aaab78037e0&amp;gt; (a org.apache.hadoop.fs.FileSystem$ClientFinalizer)
    at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.join(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:1151)
    - locked &amp;lt;0x00002aaab78037e0&amp;gt; (a org.apache.hadoop.fs.FileSystem$ClientFinalizer)
    at org.apache.hadoop.hbase.util.Threads.shutdown(Threads.java:77)
    at org.apache.hadoop.hbase.regionserver.HRegionServer.runThread(HRegionServer.java:722)
    at org.apache.hadoop.hbase.regionserver.HRegionServer.run(HRegionServer.java:677)
    at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:619)

&lt;span class=&quot;code-quote&quot;&gt;&quot;Low Memory Detector&quot;&lt;/span&gt; daemon prio=10 tid=0x00000000536b5000 nid=0x2f66 runnable [0x0000000000000000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: RUNNABLE

&lt;span class=&quot;code-quote&quot;&gt;&quot;CompilerThread1&quot;&lt;/span&gt; daemon prio=10 tid=0x00000000536b2800 nid=0x2f65 waiting on condition [0x0000000000000000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: RUNNABLE

&lt;span class=&quot;code-quote&quot;&gt;&quot;CompilerThread0&quot;&lt;/span&gt; daemon prio=10 tid=0x00000000536ae000 nid=0x2f64 waiting on condition [0x0000000000000000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: RUNNABLE

&lt;span class=&quot;code-quote&quot;&gt;&quot;Signal Dispatcher&quot;&lt;/span&gt; daemon prio=10 tid=0x00000000536ac000 nid=0x2f63 runnable [0x0000000000000000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: RUNNABLE

&lt;span class=&quot;code-quote&quot;&gt;&quot;Surrogate Locker &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; (CMS)&quot;&lt;/span&gt; daemon prio=10 tid=0x00000000536aa000 nid=0x2f62 waiting on condition [0x0000000000000000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: RUNNABLE

&lt;span class=&quot;code-quote&quot;&gt;&quot;Finalizer&quot;&lt;/span&gt; daemon prio=10 tid=0x0000000053687800 nid=0x2f61 in &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait() [0x00000000421e9000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: WAITING (on object monitor)
    at java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(Native Method)
    - waiting on &amp;lt;0x00002aaab77f0108&amp;gt; (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:118)
    - locked &amp;lt;0x00002aaab77f0108&amp;gt; (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:134)
    at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:159)

&lt;span class=&quot;code-quote&quot;&gt;&quot;Reference Handler&quot;&lt;/span&gt; daemon prio=10 tid=0x0000000053685800 nid=0x2f60 in &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait() [0x00000000420e8000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: WAITING (on object monitor)
    at java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(Native Method)
    - waiting on &amp;lt;0x00002aaab77f32b8&amp;gt; (a java.lang.ref.Reference$Lock)
    at java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.java:485)
    at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:116)
    - locked &amp;lt;0x00002aaab77f32b8&amp;gt; (a java.lang.ref.Reference$Lock)

&lt;span class=&quot;code-quote&quot;&gt;&quot;VM &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;&quot;&lt;/span&gt; prio=10 tid=0x000000005367e800 nid=0x2f5f runnable

&lt;span class=&quot;code-quote&quot;&gt;&quot;Gang worker#0 (Parallel GC Threads)&quot;&lt;/span&gt; prio=10 tid=0x00000000534c1800 nid=0x2f54 runnable

&lt;span class=&quot;code-quote&quot;&gt;&quot;Gang worker#1 (Parallel GC Threads)&quot;&lt;/span&gt; prio=10 tid=0x00000000534c3800 nid=0x2f55 runnable

&lt;span class=&quot;code-quote&quot;&gt;&quot;Gang worker#2 (Parallel GC Threads)&quot;&lt;/span&gt; prio=10 tid=0x00000000534c5800 nid=0x2f56 runnable

&lt;span class=&quot;code-quote&quot;&gt;&quot;Gang worker#3 (Parallel GC Threads)&quot;&lt;/span&gt; prio=10 tid=0x00000000534c7000 nid=0x2f57 runnable

&lt;span class=&quot;code-quote&quot;&gt;&quot;Gang worker#4 (Parallel GC Threads)&quot;&lt;/span&gt; prio=10 tid=0x00000000534c9000 nid=0x2f58 runnable

&lt;span class=&quot;code-quote&quot;&gt;&quot;Gang worker#5 (Parallel GC Threads)&quot;&lt;/span&gt; prio=10 tid=0x00000000534cb000 nid=0x2f59 runnable

&lt;span class=&quot;code-quote&quot;&gt;&quot;Gang worker#6 (Parallel GC Threads)&quot;&lt;/span&gt; prio=10 tid=0x00000000534cc800 nid=0x2f5a runnable

&lt;span class=&quot;code-quote&quot;&gt;&quot;Gang worker#7 (Parallel GC Threads)&quot;&lt;/span&gt; prio=10 tid=0x00000000534ce800 nid=0x2f5b runnable

&lt;span class=&quot;code-quote&quot;&gt;&quot;Concurrent Mark-Sweep GC &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;&quot;&lt;/span&gt; prio=10 tid=0x000000005359e800 nid=0x2f5e runnable
&lt;span class=&quot;code-quote&quot;&gt;&quot;Gang worker#0 (Parallel CMS Threads)&quot;&lt;/span&gt; prio=10 tid=0x000000005359b000 nid=0x2f5c runnable

&lt;span class=&quot;code-quote&quot;&gt;&quot;Gang worker#1 (Parallel CMS Threads)&quot;&lt;/span&gt; prio=10 tid=0x000000005359c800 nid=0x2f5d runnable

&lt;span class=&quot;code-quote&quot;&gt;&quot;VM Periodic Task &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;&quot;&lt;/span&gt; prio=10 tid=0x00000000536b7800 nid=0x2f67 waiting on condition

JNI global references: 960

Heap
 par &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; generation   total 115200K, used 67320K [0x00002aaaae6f0000, 0x00002aaab63f0000, 0x00002aaab63f0000)
  eden space 102400K,  65% used [0x00002aaaae6f0000, 0x00002aaab28a6130, 0x00002aaab4af0000)
  from space 12800K,   0% used [0x00002aaab5770000, 0x00002aaab5777f10, 0x00002aaab63f0000)
  to   space 12800K,   0% used [0x00002aaab4af0000, 0x00002aaab4af0000, 0x00002aaab5770000)
 concurrent mark-sweep generation total 896000K, used 705982K [0x00002aaab63f0000, 0x00002aaaecef0000, 0x00002aaaecef0000)
 concurrent-mark-sweep perm gen total 27204K, used 16361K [0x00002aaaecef0000, 0x00002aaaee981000, 0x00002aaaf22f0000)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12443186">HBASE-2042</key>
            <summary>ChecksumException generates thousands of open sockets</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                            <label>delete</label>
                            <label>moved_from_0_20_5</label>
                    </labels>
                <created>Sat, 12 Dec 2009 18:07:29 +0000</created>
                <updated>Wed, 7 Jan 2015 15:21:02 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12792247" author="stack" created="Fri, 18 Dec 2009 00:11:13 +0000"  >&lt;p&gt;I took a quick look at this.  The NPE above is probably because socket is not yet set in DFSClient when we go to handlConnectionFailure.    I&apos;m not sure how the checksum error over in DFS results in leaking socket or file handles.  Should do up a test that reproduces the checksum error.&lt;/p&gt;</comment>
                            <comment id="12794956" author="stack" created="Mon, 28 Dec 2009 22:59:17 +0000"  >&lt;p&gt;Moving out of 0.20.3.  Our handling of a checksum failure makes for pretty abysmal results &amp;#8211; thousands of sockets used up on host node &amp;#8211; but fix need consideration.  Lets not let it get in the way of 0.20.3.  I&apos;ll leave it as blocker.&lt;/p&gt;</comment>
                            <comment id="12866828" author="stack" created="Wed, 12 May 2010 23:48:44 +0000"  >&lt;p&gt;Bulk move of 0.20.5 issues into 0.21.0 after vote that we merge branch into TRUNK up on list.&lt;/p&gt;</comment>
                            <comment id="12867013" author="stack" created="Thu, 13 May 2010 04:41:50 +0000"  >&lt;p&gt;Moved from 0.21 to 0.22 just after merge of old 0.20 branch into TRUNK.&lt;/p&gt;</comment>
                            <comment id="12897756" author="richlackey@roamingcloud.com" created="Thu, 12 Aug 2010 14:07:08 +0000"  >&lt;p&gt;This change applies to trunk. It is a common problem highlighted in hbase-2042 (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2042&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-2042&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;The change is isolated to Hadoop common: org.apache.hadoop.ipc.Client.java Connection.close() svn: 982681&lt;/p&gt;

&lt;p&gt;In general, a RuntimeException in close() will percolate up the stack eliciting unexpected errors. In this case, the file descriptor ulimit was exceeded, resulting in a NPE. &lt;br/&gt;
The change is to protect close(). In addition to the general case, close() checks for a partially built Connection object as needed.&lt;/p&gt;

&lt;p&gt;The proposed patch is attached.&lt;/p&gt;
</comment>
                            <comment id="13009376" author="stack" created="Mon, 21 Mar 2011 20:59:26 +0000"  >&lt;p&gt;Submitting patch&lt;/p&gt;</comment>
                            <comment id="13047505" author="stack" created="Fri, 10 Jun 2011 22:19:59 +0000"  >&lt;p&gt;Moving out of 0.92.  Have not seen this in a long time.&lt;/p&gt;</comment>
                            <comment id="13286144" author="stack" created="Wed, 30 May 2012 22:38:57 +0000"  >&lt;p&gt;Stale&lt;/p&gt;</comment>
                            <comment id="14267733" author="clehene" created="Wed, 7 Jan 2015 15:21:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=saint.ack%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;saint.ack@gmail.com&quot;&gt;Stack&lt;/a&gt; is this still valid?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="12471458">HADOOP-6914</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12451902" name="hbase-2042.patch" size="3028" author="richlackey@roamingcloud.com" created="Thu, 12 Aug 2010 14:07:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 12 Aug 2010 14:07:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26115</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 49 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02csv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11675</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>