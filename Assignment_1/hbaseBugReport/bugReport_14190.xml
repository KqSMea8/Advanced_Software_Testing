<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:50:39 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-14190/HBASE-14190.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-14190] Assign system tables ahead of user region assignment</title>
                <link>https://issues.apache.org/jira/browse/HBASE-14190</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Currently the namespace table region is assigned like user regions.&lt;/p&gt;

&lt;p&gt;I spent several hours working with a customer where master couldn&apos;t finish initialization.&lt;br/&gt;
Even though master was restarted quite a few times, it went down with the following:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2015-08-05 17:16:57,530 FATAL [hdpmaster1:60000.activeMasterManager] master.HMaster: Master server abort: loaded coprocessors are: []
2015-08-05 17:16:57,530 FATAL [hdpmaster1:60000.activeMasterManager] master.HMaster: Unhandled exception. Starting shutdown.
java.io.IOException: Timedout 300000ms waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; namespace table to be assigned
  at org.apache.hadoop.hbase.master.TableNamespaceManager.start(TableNamespaceManager.java:104)
  at org.apache.hadoop.hbase.master.HMaster.initNamespace(HMaster.java:985)
  at org.apache.hadoop.hbase.master.HMaster.finishActiveMasterInitialization(HMaster.java:779)
  at org.apache.hadoop.hbase.master.HMaster.access$500(HMaster.java:182)
  at org.apache.hadoop.hbase.master.HMaster$1.run(HMaster.java:1646)
  at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:744)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;During previous run(s), namespace table was created, hence leaving an entry in hbase:meta.&lt;br/&gt;
The following if block in TableNamespaceManager#start() was skipped:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!MetaTableAccessor.tableExists(masterServices.getConnection(),
      TableName.NAMESPACE_TABLE_NAME)) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;TableNamespaceManager#start() spins, waiting for namespace region to be assigned.&lt;br/&gt;
There was issue in master assigning user regions.&lt;br/&gt;
We tried issuing &apos;assign&apos; command from hbase shell which didn&apos;t work because of the following check in MasterRpcServices#assignRegion():&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      master.checkInitialized();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This scenario can be avoided if we assign hbase:namespace table after hbase:meta is assigned but before user table region assignment.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12852619">HBASE-14190</key>
            <summary>Assign system tables ahead of user region assignment</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="yuzhihong@gmail.com">Ted Yu</assignee>
                                    <reporter username="yuzhihong@gmail.com">Ted Yu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 6 Aug 2015 16:32:55 +0000</created>
                <updated>Tue, 22 Nov 2016 05:43:26 +0000</updated>
                                                                            <component>Region Assignment</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>23</watches>
                                                                                                            <comments>
                            <comment id="14660800" author="yuzhihong@gmail.com" created="Thu, 6 Aug 2015 21:12:25 +0000"  >&lt;p&gt;At start up, if column=info:server has value for hbase:namespace region, we can use retain assignment.&lt;br/&gt;
Otherwise we can randomly assign hbase:namespace region.&lt;/p&gt;</comment>
                            <comment id="14661120" author="apurtell" created="Fri, 7 Aug 2015 00:30:52 +0000"  >&lt;p&gt;When doing this we should also consider, when the security coprocessors are installed, deploying the ACL and labels tables before user tables. &lt;/p&gt;</comment>
                            <comment id="14661136" author="toffer" created="Fri, 7 Aug 2015 00:52:57 +0000"  >&lt;blockquote&gt;
&lt;p&gt;When doing this we should also consider, when the security coprocessors are installed, deploying the ACL and labels tables before user tables.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;It&apos;d be good to handle the general case of assigning system ( hbase:* ) tables first. If I remember right the original patch used to do that. &lt;/p&gt;</comment>
                            <comment id="14661306" author="yuzhihong@gmail.com" created="Fri, 7 Aug 2015 04:44:23 +0000"  >&lt;p&gt;Tentative patch.&lt;/p&gt;

&lt;p&gt;Other system tables are not assigned ahead of user regions yet.&lt;/p&gt;</comment>
                            <comment id="14661933" author="yuzhihong@gmail.com" created="Fri, 7 Aug 2015 14:41:37 +0000"  >&lt;p&gt;Patch v2 fixes an NPE found during local test run.&lt;/p&gt;

&lt;p&gt;I renamed the new method assignSystemTable() so that it can apply to hbase:acl, etc.&lt;/p&gt;</comment>
                            <comment id="14662069" author="yuzhihong@gmail.com" created="Fri, 7 Aug 2015 16:50:36 +0000"  >&lt;p&gt;Patch v3 renames the method to assignSystemTableIfExists() and adds calls for ACL and labels tables.&lt;/p&gt;</comment>
                            <comment id="14662102" author="yuzhihong@gmail.com" created="Fri, 7 Aug 2015 17:17:40 +0000"  >&lt;p&gt;Tested backported patch on an hbase 1.1.1 cluster and saw the following in master log:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2015-08-07 17:15:34,122 DEBUG [perf-eval-test-2:20000.activeMasterManager] master.HMaster: Assigning hbase:namespace to perf-eval-test-3.openstacklocal,16020,1436988205709
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14662145" author="hadoopqa" created="Fri, 7 Aug 2015 17:50:31 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12749285/14190-v2.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12749285/14190-v2.txt&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 741783585306e03eec8074841b342ab742cf37e7.&lt;br/&gt;
  ATTACHMENT ID: 12749285&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.regionserver.TestRegionServerHostname&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 1 zombie test(s): 	at org.apache.hadoop.hbase.snapshot.TestExportSnapshot.testExportFileSystemState(TestExportSnapshot.java:310)&lt;br/&gt;
	at org.apache.hadoop.hbase.snapshot.TestExportSnapshot.testConsecutiveExports(TestExportSnapshot.java:214)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14996//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14996//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14996//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14996//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14996//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14996//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14996//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14996//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14662433" author="hadoopqa" created="Fri, 7 Aug 2015 20:54:35 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12749305/14190-v3.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12749305/14190-v3.txt&lt;/a&gt;&lt;br/&gt;
  against master branch at commit f06daaf010e8e1941946de131a11f018b8419307.&lt;br/&gt;
  ATTACHMENT ID: 12749305&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.regionserver.wal.TestLogRolling&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.TestRowTooBig&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.TestHRegion&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.TestRegionServerMetrics&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestMultiTableInputFormat&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.TestStore&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.TestHRegionOnCluster&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.TestRegionFavoredNodes&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestTimeRangeMapRed&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.TestAtomicOperation&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestLoadIncrementalHFilesUseSecurityEndPoint&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.TestJoinedScanners&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestSyncTable&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.wal.TestSecureWALReplay&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.TestSCVFWithMiniCluster&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestImportTsv&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestClientPushback&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15000//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15000//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15000//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15000//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15000//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15000//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15000//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15000//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14662447" author="yuzhihong@gmail.com" created="Fri, 7 Aug 2015 20:59:40 +0000"  >&lt;p&gt;Did some more cluster testing (based on patch v2):&lt;br/&gt;
1. dropped server column for namespace table:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hbase(main):001:0&amp;gt; delete &apos;hbase:meta&apos;, &apos;hbase:namespace,,1436988213845.553f6143557b29a57346c6172a401953.&apos;, &apos;info:server&apos;
0 row(s) in 0.4580 seconds
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;2. restarted master&lt;br/&gt;
3. in master log, observed the following:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2015-08-07 20:56:59,184 DEBUG [bloomberg-perf-eval-test-2:20000.activeMasterManager] master.HMaster: Assigning hbase:namespace to some server
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Master came up fine.&lt;/p&gt;

&lt;p&gt;Checking test failure in patch v3.&lt;/p&gt;</comment>
                            <comment id="14662466" author="yuzhihong@gmail.com" created="Fri, 7 Aug 2015 21:14:28 +0000"  >&lt;p&gt;I manually ran some failed tests:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 2036  mt -Dtest=TestHRegion
 2037  mt -Dtest=TestRegionServerMetrics,TestTimeRangeMapRed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;which passed.&lt;/p&gt;

&lt;p&gt;From &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15000/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15000/console&lt;/a&gt; :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
testCloseWithFailingFlush(org.apache.hadoop.hbase.regionserver.TestHRegion)  Time elapsed: 0 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
java.lang.OutOfMemoryError: unable to create &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt; thread
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.start0(Native Method)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.start(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:713)
	at org.junit.internal.runners.statements.FailOnTimeout.evaluateStatement(FailOnTimeout.java:25)
	at org.junit.internal.runners.statements.FailOnTimeout.evaluate(FailOnTimeout.java:17)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Seems an environment issue.&lt;/p&gt;</comment>
                            <comment id="14662610" author="hadoopqa" created="Fri, 7 Aug 2015 22:55:32 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12749353/14190-v3.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12749353/14190-v3.txt&lt;/a&gt;&lt;br/&gt;
  against master branch at commit f1c1692d511f72ba0bef42e22d27098c25bd10d9.&lt;br/&gt;
  ATTACHMENT ID: 12749353&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15004//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15004//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15004//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15004//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15004//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15004//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15004//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15004//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14662617" author="devaraj" created="Fri, 7 Aug 2015 23:01:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yuzhihong%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;yuzhihong@gmail.com&quot;&gt;Ted Yu&lt;/a&gt; when you say &apos;There was issue in master assigning user regions.&apos; can you elaborate a little more.. &lt;/p&gt;</comment>
                            <comment id="14662625" author="yuzhihong@gmail.com" created="Fri, 7 Aug 2015 23:05:35 +0000"  >&lt;p&gt;The symptom was that majority of user regions were not assigned (including hbase:namespace table).&lt;br/&gt;
Need to dig into master log again to see what might be the cause.&lt;/p&gt;</comment>
                            <comment id="14662733" author="yuzhihong@gmail.com" created="Sat, 8 Aug 2015 01:14:14 +0000"  >&lt;p&gt;Running test suite locally I got:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Failed tests:
  TestFastFail.testFastFail:271 There should be atleast one thread that retried instead of failing
  TestDistributedLogSplitting.testLogReplayTwoSequentialRSDown:653 expected:&amp;lt;1000&amp;gt; but was:&amp;lt;738&amp;gt;

Tests in error:
  TestJMXListener.setupBeforeClass:57 &#187; IO Shutting down
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The first two failures appeared in Jenkins / QA runs.&lt;br/&gt;
TestJMXListener passes when run by itself.&lt;/p&gt;</comment>
                            <comment id="14662760" author="hadoopqa" created="Sat, 8 Aug 2015 02:33:39 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12749367/14190-v3.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12749367/14190-v3.txt&lt;/a&gt;&lt;br/&gt;
  against master branch at commit ea8833fd63c9ef35292766f646b1e507577e46f5.&lt;br/&gt;
  ATTACHMENT ID: 12749367&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.regionserver.TestRegionServerHostname&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15008//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15008//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15008//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15008//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15008//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15008//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15008//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15008//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14663040" author="yuzhihong@gmail.com" created="Sat, 8 Aug 2015 15:46:59 +0000"  >&lt;p&gt;Patch v4 calls UserProvider.isHBaseSecurityEnabled() to see if ACL and labels table need to be assigned.&lt;br/&gt;
This is to avoid unnecessary calls to MetaTableAccessor.tableExists().&lt;/p&gt;</comment>
                            <comment id="14663121" author="hadoopqa" created="Sat, 8 Aug 2015 19:06:32 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12749421/14190-v4.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12749421/14190-v4.txt&lt;/a&gt;&lt;br/&gt;
  against master branch at commit d4fc7cf2ba0d06b040dad435ab72366c4fd44116.&lt;br/&gt;
  ATTACHMENT ID: 12749421&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 2 zombie test(s): &lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15013//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15013//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15013//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15013//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15013//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15013//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15013//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15013//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14663144" author="yuzhihong@gmail.com" created="Sat, 8 Aug 2015 19:54:12 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Fetching the console output from the URL
Printing hanging tests
Printing Failing tests
Failing test : org.apache.hadoop.hbase.master.procedure.TestWALProcedureStoreOnHDFS
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;TestWALProcedureStoreOnHDFS is known flaky.&lt;/p&gt;</comment>
                            <comment id="14680312" author="yuzhihong@gmail.com" created="Mon, 10 Aug 2015 16:18:41 +0000"  >&lt;p&gt;Patch v5 adds an assertion in TestMasterFailover#testSimpleMasterFailover for namespace table which is assigned before active master initialization finishes.&lt;/p&gt;</comment>
                            <comment id="14680635" author="hadoopqa" created="Mon, 10 Aug 2015 19:38:05 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12749625/14190-v5.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12749625/14190-v5.txt&lt;/a&gt;&lt;br/&gt;
  against master branch at commit ce72ce998f2e9ad23329b48ab8e85912d642fef1.&lt;br/&gt;
  ATTACHMENT ID: 12749625&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.master.procedure.TestWALProcedureStoreOnHDFS&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15030//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15030//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15030//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15030//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15030//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15030//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15030//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15030//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14680641" author="yuzhihong@gmail.com" created="Mon, 10 Aug 2015 19:39:34 +0000"  >&lt;p&gt;TestWALProcedureStoreOnHDFS is known flaky test.&lt;/p&gt;</comment>
                            <comment id="14680805" author="apurtell" created="Mon, 10 Aug 2015 21:35:34 +0000"  >&lt;p&gt;I may be missing something but all tables we are interested in here are in the &apos;hbase:&apos; namespace. Why not just assign all of that namespace first? The special casing seems like the wrong approach, and is further problematic with stuff like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
741	   &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (UserProvider.isHBaseSecurityEnabled(conf)) {
742	      assignSystemTableIfExists(status, AccessControlLists.ACL_TABLE_NAME);
743	      assignSystemTableIfExists(status, VisibilityConstants.LABELS_TABLE_NAME);
744	
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;There&apos;s no guarantee at all security coprocessors are installed just because secure authentication is enabled. I get the ...IfExists part, but isHBaseSecurityEnabled doesn&apos;t say anything about if security coprocessors are installed.&lt;/p&gt;

&lt;p&gt;What about future features or coprocessors that add additional tables to the &apos;hbase:&apos; namespace  with the expectation they are system tables that should be deployed ahead of user tables?&lt;/p&gt;</comment>
                            <comment id="14680819" author="yuzhihong@gmail.com" created="Mon, 10 Aug 2015 21:46:06 +0000"  >&lt;p&gt;A brief search doesn&apos;t locate the method which returns system tables currently deployed in cluster.&lt;br/&gt;
Planning to add one to MetaTableAccessor.&lt;/p&gt;</comment>
                            <comment id="14680834" author="yuzhihong@gmail.com" created="Mon, 10 Aug 2015 21:53:22 +0000"  >&lt;p&gt;I want to get confirmation that &lt;b&gt;all&lt;/b&gt; system tables should be assigned ahead of user table regions.&lt;br/&gt;
This would be behavioral change compared to current approach.&lt;/p&gt;</comment>
                            <comment id="14680866" author="apurtell" created="Mon, 10 Aug 2015 22:17:23 +0000"  >&lt;blockquote&gt;&lt;p&gt;I want to get confirmation that all system tables should be assigned ahead of user table regions.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Isn&apos;t this JIRA titled &quot;Assign system tables ahead of user region assignment&quot;?&lt;/p&gt;

&lt;p&gt;Are your goals different?&lt;/p&gt;</comment>
                            <comment id="14680898" author="yuzhihong@gmail.com" created="Mon, 10 Aug 2015 22:46:51 +0000"  >&lt;blockquote&gt;&lt;p&gt;add additional tables to the &apos;hbase:&apos; namespace with the expectation they are system tables that should be deployed ahead of user tables?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;To my knowledge, there is currently no static registry of system tables. Patch v7 adds MetaTableAccessor#getSystemTableRegionsAndLocations() which scans hbase:meta table for system tables.&lt;/p&gt;

&lt;p&gt;However, on fresh start, this method would not work.&lt;/p&gt;

&lt;p&gt;Comment is welcome.&lt;/p&gt;</comment>
                            <comment id="14680947" author="yuzhihong@gmail.com" created="Mon, 10 Aug 2015 23:27:00 +0000"  >&lt;p&gt;Patch v7 uses hbase:meta as the registry of system tables.&lt;br/&gt;
I think this should be fine for this JIRA.&lt;/p&gt;

&lt;p&gt;It is also consistent with the approach of patch v1: we assign the system table if it appears in hbase:meta.&lt;/p&gt;</comment>
                            <comment id="14681063" author="hadoopqa" created="Tue, 11 Aug 2015 01:20:28 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12749715/14190-v7.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12749715/14190-v7.txt&lt;/a&gt;&lt;br/&gt;
  against master branch at commit ae35f65e9ac12256b4514e6ba6ef5333e9e90870.&lt;br/&gt;
  ATTACHMENT ID: 12749715&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 1865 checkstyle errors (more than the master&apos;s current 1862 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.security.visibility.TestDefaultScanLabelGeneratorStack&lt;br/&gt;
                  org.apache.hadoop.hbase.util.hbck.TestOfflineMetaRebuildBase&lt;br/&gt;
                  org.apache.hadoop.hbase.master.TestRestartCluster&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 3 zombie test(s): 	at org.apache.hadoop.hbase.client.TestRestoreSnapshotFromClient.testCloneSnapshotOfCloned(TestRestoreSnapshotFromClient.java:245)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.TestReplicasClient.testReverseScanWithReplicas(TestReplicasClient.java:612)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15034//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15034//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15034//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15034//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15034//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15034//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15034//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15034//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14681084" author="yuzhihong@gmail.com" created="Tue, 11 Aug 2015 01:39:14 +0000"  >&lt;p&gt;TestDefaultScanLabelGeneratorStack passes locally.&lt;br/&gt;
I can work on investigating / fixing test failures.&lt;/p&gt;

&lt;p&gt;Meanwhile, comment on approach in v7 would help shape the direction we go.&lt;/p&gt;</comment>
                            <comment id="14687390" author="avandana" created="Tue, 11 Aug 2015 21:12:15 +0000"  >&lt;p&gt;In the MetaTableAccessor class, getSystemTableRegionsAndLocations() method,  since we know that we need system table region information and they start with NamespaceDescriptor.SYSTEM_NAMESPACE_NAME_STR string, can we optimize this :&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;+    scanMeta(connection, HConstants.EMPTY_START_ROW, HConstants.EMPTY_END_ROW,&lt;br/&gt;
+      QueryType.REGION, visitor);&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;In this way we will avoid scanning the entire meta table.&lt;/p&gt;</comment>
                            <comment id="14692300" author="yuzhihong@gmail.com" created="Tue, 11 Aug 2015 21:37:36 +0000"  >&lt;p&gt;Patch v8 addresses Vandana&apos;s comment by narrowing the key range for the meta scan.&lt;/p&gt;</comment>
                            <comment id="14692743" author="hadoopqa" created="Wed, 12 Aug 2015 01:33:34 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12749972/14190-v8.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12749972/14190-v8.txt&lt;/a&gt;&lt;br/&gt;
  against master branch at commit a78e6e94994aaba2bee7747054ea9a55f1edd421.&lt;br/&gt;
  ATTACHMENT ID: 12749972&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 1860 checkstyle errors (more than the master&apos;s current 1857 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to cause Findbugs (version 2.0.3) to fail.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15062//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15062//testReport/&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15062//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15062//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15062//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15062//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14693759" author="yuzhihong@gmail.com" created="Wed, 12 Aug 2015 16:27:31 +0000"  >&lt;p&gt;If some system region can&apos;t be assigned, master initialization could be longer.&lt;/p&gt;

&lt;p&gt;I wonder if a new config, cough, should be introduced (default to false).&lt;br/&gt;
e.g. hbase.master.assign.system.tables.first&lt;/p&gt;</comment>
                            <comment id="14693790" author="eclark" created="Wed, 12 Aug 2015 16:41:41 +0000"  >&lt;p&gt;I can&apos;t think of a single time that I would want a master to say the cluster is initialized while the most important regions aren&apos;t assigned.&lt;br/&gt;
As such I can&apos;t see anyone ever wanting to have the master not assign the system tables first. So I can&apos;t see another config option being anything but more config bloat.&lt;/p&gt;</comment>
                            <comment id="14693996" author="syuanjiang" created="Wed, 12 Aug 2015 18:40:17 +0000"  >&lt;p&gt;I agree with Elliott - without those system tables, the cluster cannot be fully functional.  &lt;/p&gt;

&lt;p&gt;However, I think we should have a new JIRA to allow MASTER to start with minimal initialization (need to define what is &apos;minimal&apos;, eg. META regions have to be assigned)  - in &apos;safe mode&apos; or &apos;single-user mode&apos; so that admin could do some manual task.  Sometimes we could have problems during master initialization (eg. assign a system region).  If we don&apos;t allow MASTER to start, our option to fix the issue is limited.  To provide a way (single-user mode) to let MASTER up-and-running and accept limited requests (admin tasks) would help admin manually fix some issues (eg. admin manually assign a region to a RS).  Once issues are fixed, we can re-start MASTER with full functional mode (eg. going through all the master initialization operations). &lt;/p&gt;</comment>
                            <comment id="14694535" author="yuzhihong@gmail.com" created="Thu, 13 Aug 2015 01:41:44 +0000"  >&lt;p&gt;I have been working on making TestRestartCluster pass.&lt;br/&gt;
This patch is work in progress.&lt;/p&gt;</comment>
                            <comment id="14694697" author="hadoopqa" created="Thu, 13 Aug 2015 05:11:23 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12750213/14190-v12.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12750213/14190-v12.txt&lt;/a&gt;&lt;br/&gt;
  against master branch at commit d7178aa27c55ae06cfbd6db94d6839311dfb4089.&lt;br/&gt;
  ATTACHMENT ID: 12750213&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.replication.TestReplicationDisableInactivePeer&lt;br/&gt;
                  org.apache.hadoop.hbase.master.TestRollingRestart&lt;br/&gt;
                  org.apache.hadoop.hbase.master.procedure.TestMasterFailoverWithProcedures&lt;br/&gt;
                  org.apache.hadoop.hbase.namespace.TestNamespaceAuditor&lt;br/&gt;
                  org.apache.hadoop.hbase.TestAcidGuarantees&lt;br/&gt;
                  org.apache.hadoop.hbase.replication.TestReplicationSyncUpTool&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 11 zombie test(s): 	at org.apache.hadoop.hbase.client.TestHTablePool$TestHTableReusablePool.testCloseTablePool(TestHTablePool.java:263)&lt;br/&gt;
	at org.apache.hadoop.hbase.master.TestMasterOperationsForRegionReplicas.testCreateTableWithMultipleReplicas(TestMasterOperationsForRegionReplicas.java:228)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.TestTimestampsFilter.testWithVersionDeletes(TestTimestampsFilter.java:235)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.TestTimestampsFilter.testWithVersionDeletes(TestTimestampsFilter.java:222)&lt;br/&gt;
	at org.apache.hadoop.hbase.mapred.TestTableInputFormat.testInputFormat(TestTableInputFormat.java:354)&lt;br/&gt;
	at org.apache.hadoop.hbase.mapred.TestTableInputFormat.testExtensionOfTableInputFormatBase(TestTableInputFormat.java:326)&lt;br/&gt;
	at org.apache.hadoop.hbase.io.hfile.TestCacheOnWrite.testStoreFileCacheOnWriteInternals(TestCacheOnWrite.java:270)&lt;br/&gt;
	at org.apache.hadoop.hbase.io.hfile.TestCacheOnWrite.testStoreFileCacheOnWrite(TestCacheOnWrite.java:486)&lt;br/&gt;
	at org.apache.hadoop.hbase.io.hfile.TestCacheOnWrite.testNotCachingDataBlocksDuringCompactionInternals(TestCacheOnWrite.java:489)&lt;br/&gt;
	at org.apache.hadoop.hbase.io.hfile.TestCacheOnWrite.testNotCachingDataBlocksDuringCompaction(TestCacheOnWrite.java:507)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.TestRestoreSnapshotFromClient.testRestoreSnapshot(TestRestoreSnapshotFromClient.java:158)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15079//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15079//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15079//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15079//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15079//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15079//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Javadoc warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15079//artifact/patchprocess/patchJavadocWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15079//artifact/patchprocess/patchJavadocWarnings.txt&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15079//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15079//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14697985" author="yuzhihong@gmail.com" created="Sat, 15 Aug 2015 00:16:21 +0000"  >&lt;p&gt;I did some debugging for test failure in TestNamespaceAuditor#testRegionOperations&lt;br/&gt;
In the middle of the test, this is called:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    restartMaster();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;When new master initializes, it assigns hbase:quota again, resulting in:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2015-08-13 02:43:33,420 FATAL [PriorityRpcServer.handler=16,queue=0,port=50627] regionserver.HRegionServer(2072): ABORTING region server 192.168.0.12,50627,1439458945214:        Received OPEN &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the region:hbase:quota,,1439458947828.c74bc53e12f6aae7f979d1ed6d8b4387., which is already online
015-08-13 02:43:33,443 INFO  [PriorityRpcServer.handler=16,queue=0,port=50627] regionserver.HRegionServer(1873): STOPPED: Received OPEN &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the region:hbase:quota,,              1439458947828.c74bc53e12f6aae7f979d1ed6d8b4387., which is already online
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Trying to find a solution for this scenario.&lt;/p&gt;</comment>
                            <comment id="14697991" author="stack" created="Sat, 15 Aug 2015 00:27:44 +0000"  >&lt;p&gt;Should close this related issue?&lt;/p&gt;</comment>
                            <comment id="14697993" author="yuzhihong@gmail.com" created="Sat, 15 Aug 2015 00:30:40 +0000"  >&lt;p&gt;What is the JIRA number for the related issue ?&lt;/p&gt;</comment>
                            <comment id="14698533" author="stack" created="Sun, 16 Aug 2015 04:21:52 +0000"  >&lt;p&gt;See &apos;Issue Links&apos; at top of this issue: &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13556&quot; title=&quot;In assignment, treat system tables as &amp;#39;special&amp;#39;; assign after hbase:meta and before user-space tables&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13556&quot;&gt;HBASE-13556&lt;/a&gt; In assignment, treat system tables as &apos;special&apos;; assign after hbase:meta and before user-space tables&quot;&lt;/p&gt;</comment>
                            <comment id="14698587" author="yuzhihong@gmail.com" created="Sun, 16 Aug 2015 08:35:58 +0000"  >&lt;p&gt;The original intention of this JIRA didn&apos;t go as far as giving system tables their own WALs.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13556&quot; title=&quot;In assignment, treat system tables as &amp;#39;special&amp;#39;; assign after hbase:meta and before user-space tables&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13556&quot;&gt;HBASE-13556&lt;/a&gt; can be kept open, in my opinion.&lt;/p&gt;</comment>
                            <comment id="14699757" author="yuzhihong@gmail.com" created="Mon, 17 Aug 2015 16:12:11 +0000"  >&lt;p&gt;For 14190-v12.4.txt (for clean cluster start), I got unit tests passing.&lt;/p&gt;

&lt;p&gt;Please comment on whether I should iterate on 14190-v12.4.txt or, separate WAL for system tables should be implemented first.&lt;/p&gt;</comment>
                            <comment id="14709606" author="yuzhihong@gmail.com" created="Mon, 24 Aug 2015 16:50:36 +0000"  >&lt;p&gt;w.r.t. separate WAL for system tables , how about using .sys suffix for WAL of non-meta system tables ?&lt;/p&gt;</comment>
                            <comment id="14711933" author="yuzhihong@gmail.com" created="Tue, 25 Aug 2015 20:37:21 +0000"  >&lt;p&gt;First cut (work in progress) for separate WAL file for system tables.&lt;/p&gt;

&lt;p&gt;Comments are welcome.&lt;/p&gt;

&lt;p&gt;Once this gets more mature, I can merge it with previously posted patch.&lt;/p&gt;</comment>
                            <comment id="14724513" author="yuzhihong@gmail.com" created="Tue, 1 Sep 2015 01:05:25 +0000"  >&lt;p&gt;For system tables, can we assume that there would be only one region ?&lt;br/&gt;
This would be true for hbase:meta and hbase:namespace&lt;/p&gt;

&lt;p&gt;Not sure about hbase:acl table.&lt;/p&gt;</comment>
                            <comment id="14724574" author="apurtell" created="Tue, 1 Sep 2015 01:51:01 +0000"  >&lt;blockquote&gt;&lt;p&gt;For system tables, can we assume that there would be only one region ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;No that is not a safe assumption at all. The only table that doesn&apos;t split as META, and we&apos;re going to (eventually) fix that.&lt;/p&gt;</comment>
                            <comment id="14729772" author="jinghe" created="Thu, 3 Sep 2015 20:58:02 +0000"  >&lt;p&gt;Hi, Ted&lt;/p&gt;

&lt;p&gt;A late question.  What was the cause that the namespace region wasn&apos;t assigned within the 300000ms timeout in your original case?&lt;/p&gt;</comment>
                            <comment id="14729812" author="yuzhihong@gmail.com" created="Thu, 3 Sep 2015 21:22:14 +0000"  >&lt;p&gt;Master log has been analyzed but no conclusion as of now.&lt;/p&gt;</comment>
                            <comment id="14957125" author="yuzhihong@gmail.com" created="Wed, 14 Oct 2015 15:51:29 +0000"  >&lt;p&gt;Please take a look at 14190-system-wal-v1.txt and see if the direction is good.&lt;/p&gt;</comment>
                            <comment id="14957328" author="syuanjiang" created="Wed, 14 Oct 2015 17:26:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu&quot; class=&quot;user-hover&quot; rel=&quot;tedyu&quot;&gt;Ted Yu&lt;/a&gt;, could you put the change in review board, it is easy to review a big change in RB than looking at the flat text file?&lt;/p&gt;</comment>
                            <comment id="14957342" author="syuanjiang" created="Wed, 14 Oct 2015 17:31:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu&quot; class=&quot;user-hover&quot; rel=&quot;tedyu&quot;&gt;Ted Yu&lt;/a&gt;, another thinking on the original intension (the master would not shut down due to namespace region unassigned), I think we also can think of a lightweight master initialization - thinking about this: without meta online, master is not very useful; if namespace is not online, master can still server in limited role (cannot do master table DDL, like CREATE TABLE); without acl online, master is not useful for secure cluster, but unsecure connection can still work.  With this in mind, we could have master up-and-running without complete all initialization steps (master up with limited role, and at the same time, master completes full initialization async) - well, this would be a different improvement, just some thoughts. &lt;/p&gt;</comment>
                            <comment id="14959219" author="yuzhihong@gmail.com" created="Thu, 15 Oct 2015 16:52:48 +0000"  >&lt;p&gt;Since the patch is not complete, I am not sure if putting on review board is needed.&lt;/p&gt;

&lt;p&gt;Can you utilize the plugin below ?&lt;br/&gt;
&lt;a href=&quot;http://search-hadoop.com/m/YGbbJN3O913jjgj2/A+Chome+extension+for+rendering+patch+on+JIRA&amp;amp;subj=A+Chome+extension+for+rendering+patch+on+JIRA&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://search-hadoop.com/m/YGbbJN3O913jjgj2/A+Chome+extension+for+rendering+patch+on+JIRA&amp;amp;subj=A+Chome+extension+for+rendering+patch+on+JIRA&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="14959459" author="syuanjiang" created="Thu, 15 Oct 2015 19:20:01 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;~Ted Yu&amp;#93;&lt;/span&gt;, thanks, Git Patch Viewer is great!  It is much clear to see the change that way.  &lt;/p&gt;

&lt;p&gt;Looks like the logic in &lt;tt&gt;14190-system-wal-v1.txt&lt;/tt&gt; just follow what we treat with META.  From my understanding, it should work.  I think the change should be in a different JIRA (something like that &quot;implement dedicated WAL for system tables&quot;).&lt;/p&gt;

&lt;p&gt;Also a small code suggestion (nothing wrong with the logic, just from code maint point of view) - instead of &lt;tt&gt;regionInfo.getReplicaId() == HRegionInfo.DEFAULT_REPLICA_ID&lt;/tt&gt;, use &lt;tt&gt;RegionReplicaUtil.isDefaultReplica(regionInfo)&lt;/tt&gt;.  &lt;/p&gt;</comment>
                            <comment id="15320124" author="water" created="Wed, 8 Jun 2016 06:45:03 +0000"  >&lt;p&gt;Hi Stephen, +1 for this as well as the safe mode or single-user mode in your comment back for 13/Aug/2015 &lt;/p&gt;</comment>
                            <comment id="15685779" author="gunjan4132279" created="Tue, 22 Nov 2016 05:43:26 +0000"  >&lt;p&gt;Hi Ted,&lt;/p&gt;

&lt;p&gt;Was just wondering what could be the possible scenario in which the &apos;info:server&apos; entry from &apos;hbase:meta&apos; would get deleted/manipulated.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12823798">HBASE-13556</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12752315" name="14190-system-wal-v1.txt" size="9710" author="yuzhihong@gmail.com" created="Tue, 25 Aug 2015 20:37:21 +0000"/>
                            <attachment id="12750844" name="14190-v12.4.txt" size="22311" author="yuzhihong@gmail.com" created="Mon, 17 Aug 2015 16:12:11 +0000"/>
                            <attachment id="12750213" name="14190-v12.txt" size="19711" author="yuzhihong@gmail.com" created="Thu, 13 Aug 2015 01:41:44 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12905316">HBASE-14623</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 7 Aug 2015 00:30:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ife7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>