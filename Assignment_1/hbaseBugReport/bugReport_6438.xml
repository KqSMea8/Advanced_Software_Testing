<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:36:46 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6438/HBASE-6438.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6438] RegionAlreadyInTransitionException needs to give more info to avoid assignment inconsistencies</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6438</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Seeing some of the recent issues in region assignment, RegionAlreadyInTransitionException is one reason after which the region assignment may or may not happen(in the sense we need to wait for the TM to assign).&lt;br/&gt;
In &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6317&quot; title=&quot;Master clean start up and Partially enabled tables make region assignment inconsistent.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6317&quot;&gt;&lt;del&gt;HBASE-6317&lt;/del&gt;&lt;/a&gt; we got one problem due to RegionAlreadyInTransitionException on master restart.&lt;br/&gt;
Consider the following case, due to some reason like master restart or external assign call, we try to assign a region that is already getting opened in a RS.&lt;br/&gt;
Now the next call to assign has already changed the state of the znode and so the current assign that is going on the RS is affected and it fails.  The second assignment that started also fails getting RAITE exception.  Finally both assignments not carrying on.  Idea is to find whether any such RAITE exception can be retried or not.&lt;br/&gt;
Here again we have following cases like where&lt;br/&gt;
-&amp;gt; The znode is yet to transitioned from OFFLINE to OPENING in RS&lt;br/&gt;
-&amp;gt; RS may be in the step of openRegion.&lt;br/&gt;
-&amp;gt; RS may be trying to transition OPENING to OPENED.&lt;br/&gt;
-&amp;gt; RS is yet to add to online regions in the RS side.&lt;/p&gt;

&lt;p&gt;Here in openRegion() and updateMeta() any failures we are moving the znode to FAILED_OPEN.  So in these cases getting an RAITE should be ok.  But in other cases the assignment is stopped.&lt;br/&gt;
The idea is to just add the current state of the region assignment in the RIT map in the RS side and using that info we can determine whether the assignment can be retried or not on getting an RAITE.&lt;/p&gt;

&lt;p&gt;Considering the current work going on in AM, pls do share if this is needed atleast in the 0.92/0.94 versions?  &lt;/p&gt;</description>
                <environment></environment>
        <key id="12599720">HBASE-6438</key>
            <summary>RegionAlreadyInTransitionException needs to give more info to avoid assignment inconsistencies</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rajesh23">rajeshbabu</assignee>
                                    <reporter username="ram_krish">ramkrishna.s.vasudevan</reporter>
                        <labels>
                    </labels>
                <created>Sat, 21 Jul 2012 12:05:29 +0000</created>
                <updated>Sun, 7 Apr 2013 04:39:48 +0000</updated>
                            <resolved>Sun, 16 Sep 2012 09:01:39 +0000</resolved>
                                                    <fixVersion>0.94.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>13</watches>
                                                                <comments>
                            <comment id="13431890" author="rajesh23" created="Thu, 9 Aug 2012 15:14:38 +0000"  >&lt;p&gt;Patch for trunk. Please review and provide your comments/suggestions.&lt;/p&gt;</comment>
                            <comment id="13432008" author="ram_krish" created="Thu, 9 Aug 2012 17:30:33 +0000"  >&lt;p&gt;This patch solves the problem of depending on TM in case of RIT exception. Pls provide your suggestions.&lt;/p&gt;
</comment>
                            <comment id="13432331" author="zhihyu@ebaysf.com" created="Fri, 10 Aug 2012 00:09:56 +0000"  >&lt;p&gt;Patch makes sense.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+        &lt;span class=&quot;code-comment&quot;&gt;// If region opened on destination of present plan and reassign to &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RS may cause&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;nit: &apos; and reassign to new RS may cause&apos; -&amp;gt; &apos;, reassigning to new RS may cause&apos;&lt;/p&gt;</comment>
                            <comment id="13438556" author="hadoopqa" created="Tue, 21 Aug 2012 09:25:29 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12540041/HBASE-6438_trunk.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12540041/HBASE-6438_trunk.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    -1 javac.  The applied patch generated 5 javac compiler warnings (more than the trunk&apos;s current 4 warnings).&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 6 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.TestDrainingServer&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2637//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2637//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2637//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2637//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2637//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2637//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2637//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2637//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2637//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2637//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2637//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2637//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2637//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2637//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13441416" author="stack" created="Fri, 24 Aug 2012 19:19:28 +0000"  >&lt;p&gt;I think this patch, while it has merit, it is a hack.  Its passing a state caught in one location tenuously elsewhere via an opaque-looking boolean.  It seems like there should be a more mainline conduit for the passing of this kind of feedback.  That said, this patch could go into 0.92 and 0.94 and we can fix it better in trunk.  To that end, I think we should try and confine the hack as best we can.  So, I think you need to rename the variable isRITException as regionAlreadyInTransitionException (there should be no &apos;is&apos; as isRegionAlreadyInTransitionException is a method name for a method that tests regionAlreadyInTransitionException and returns a boolean).  This will narrow what the boolean is about and it will help explain better this boolean when we are far from its source down in the setOfflineInZooKeeper method.&lt;/p&gt;

&lt;p&gt;Otherwise the patch looks good Rajesh.&lt;/p&gt;</comment>
                            <comment id="13448843" author="ram_krish" created="Wed, 5 Sep 2012 16:01:06 +0000"  >&lt;p&gt;@Stack&lt;br/&gt;
Sorry for missing out this review comment all these days.  &lt;br/&gt;
Actually we would like to get in HBASe-6299 also and this patch.  As you mentioned can we give a patch for 0.94 and 0.92 combining both.&lt;br/&gt;
We faced &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6299&quot; title=&quot;RS starting region open while failing ack to HMaster.sendRegionOpen() causes inconsistency in HMaster&amp;#39;s region state and a series of successive problems&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6299&quot;&gt;&lt;del&gt;HBASE-6299&lt;/del&gt;&lt;/a&gt; recently in one of our testing. Both should be an useful one.&lt;/p&gt;</comment>
                            <comment id="13450543" author="hadoopqa" created="Fri, 7 Sep 2012 11:53:45 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12544203/HBASE-6438_94.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12544203/HBASE-6438_94.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2813//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2813//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13450544" author="rajesh23" created="Fri, 7 Sep 2012 11:58:59 +0000"  >&lt;p&gt;Patch for 94 addressing Stack&apos;s and Ted&apos;s comments. In this patch included fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6299&quot; title=&quot;RS starting region open while failing ack to HMaster.sendRegionOpen() causes inconsistency in HMaster&amp;#39;s region state and a series of successive problems&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6299&quot;&gt;&lt;del&gt;HBASE-6299&lt;/del&gt;&lt;/a&gt; also.&lt;br/&gt;
Please provide your comments/suggestions. If this patch is ok I will prepare patch for 92 also.&lt;/p&gt;</comment>
                            <comment id="13450550" author="rajesh23" created="Fri, 7 Sep 2012 12:11:12 +0000"  >&lt;p&gt;Test suite passes locally with this patch.&lt;/p&gt;</comment>
                            <comment id="13450844" author="yuzhihong@gmail.com" created="Fri, 7 Sep 2012 18:14:57 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (LOG.isDebugEnabled()) {
+              LOG.debug(t.getMessage());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Please add some text preceding t.getMessage() so that we know the context of the debug log.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+        &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; assignments. In &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; of RITException reassigning to same RS.&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Please expand RITException to RegionAlreadyInTransitionException. Same here:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+   *          - &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; we need to retry assignment because of RITException. 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and here:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+        LOG.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Unexpected state : &quot;&lt;/span&gt; + state + &lt;span class=&quot;code-quote&quot;&gt;&quot; but retrying to assign because RITException.&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13451559" author="rajesh23" created="Sun, 9 Sep 2012 10:22:37 +0000"  >&lt;p&gt;Patch for 94 addressing Ted&apos;s comments.&lt;/p&gt;</comment>
                            <comment id="13451560" author="hadoopqa" created="Sun, 9 Sep 2012 10:33:02 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12544396/HBASE-6438_2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12544396/HBASE-6438_2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2833//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2833//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13451608" author="yuzhihong@gmail.com" created="Sun, 9 Sep 2012 14:50:44 +0000"  >&lt;p&gt;@Rajesh:&lt;br/&gt;
Do all tests pass ?&lt;/p&gt;

&lt;p&gt;@Stack, @Lars:&lt;br/&gt;
Can you take a look ?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="13451876" author="rajesh23" created="Mon, 10 Sep 2012 10:47:13 +0000"  >&lt;p&gt;@Ted&lt;/p&gt;

&lt;p&gt;When I ran test suite in my local below test cases are always(without this patch also) failing because of environment problems. I ran failed tests individually in our jenkins multiple times. They are always passing.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Failed tests:   testPermMask(org.apache.hadoop.hbase.util.TestFSUtils): expected:&amp;lt;rwx------&amp;gt; but was:&amp;lt;rwxrwxrwx&amp;gt;

Tests in error: 
  testCacheOnWriteInSchema[1](org.apache.hadoop.hbase.regionserver.TestCacheOnWriteInSchema): Target HLog directory already exists: /mnt/F/hbase94Com/target/test-data/8a5bb561-edfc-4fab-9358-7ab726cb44fc/TestCacheOnWriteInSchema/logs
  testCacheOnWriteInSchema[2](org.apache.hadoop.hbase.regionserver.TestCacheOnWriteInSchema): Target HLog directory already exists: /mnt/F/hbase94Com/target/test-data/8a5bb561-edfc-4fab-9358-7ab726cb44fc/TestCacheOnWriteInSchema/logs
  testWholesomeSplit(org.apache.hadoop.hbase.regionserver.TestSplitTransaction): Failed delete of /mnt/F/hbase94Com/target/test-data/9d7234b4-1f6a-42a7-bbb1-641eb464b7e6/org.apache.hadoop.hbase.regionserver.TestSplitTransaction/table/4bbe087ebab2243b8b9633bb3d870f4c
  testRollback(org.apache.hadoop.hbase.regionserver.TestSplitTransaction): Failed delete of /mnt/F/hbase94Com/target/test-data/4afca7c8-ee29-47fb-b660-f2ee661bced7/org.apache.hadoop.hbase.regionserver.TestSplitTransaction/table/ad08ee3070175df954844582816d5927
  testOffPeakCompactionRatio(org.apache.hadoop.hbase.regionserver.TestCompactSelection): Target HLog directory already exists: /mnt/F/hbase94Com/target/test-data/dd6ca8f4-4321-42d8-825b-fc6a42ab84c0/TestCompactSelection/logs

Tests run: 1590, Failures: 1, Errors: 5, Skipped: 12


Running org.apache.hadoop.hbase.regionserver.TestSplitTransaction
Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 8.383 sec
Results :
Tests run: 7, Failures: 0, Errors: 0, Skipped: 0

Running org.apache.hadoop.hbase.regionserver.TestCompactSelection
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.264 sec
Results :
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0

Running org.apache.hadoop.hbase.regionserver.TestCacheOnWriteInSchema
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.564 sec
Results :
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0

Running org.apache.hadoop.hbase.util.TestFSUtils
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 11.43 sec
Results :
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13453227" author="lhofhansl" created="Tue, 11 Sep 2012 17:47:14 +0000"  >&lt;p&gt;Patch looks good.&lt;br/&gt;
Why the special check for SocketTimeoutException? Could we just check isRegionInTransition(region), log an INFO and then return (because the region has in fact transitioned)?&lt;/p&gt;</comment>
                            <comment id="13453698" author="lhofhansl" created="Wed, 12 Sep 2012 04:31:06 +0000"  >&lt;p&gt;So the SocketTimeoutException is from &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6299&quot; title=&quot;RS starting region open while failing ack to HMaster.sendRegionOpen() causes inconsistency in HMaster&amp;#39;s region state and a series of successive problems&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6299&quot;&gt;&lt;del&gt;HBASE-6299&lt;/del&gt;&lt;/a&gt;... Still the question remains, why single out this exception? If the region was assigned in the meanwhile we&apos;re good - regardless of what the exception.&lt;/p&gt;</comment>
                            <comment id="13453734" author="ram_krish" created="Wed, 12 Sep 2012 05:47:25 +0000"  >&lt;p&gt;@Lars&lt;br/&gt;
Thanks for your review.  Your comment makes sense.  We can update the patch based on this.&lt;/p&gt;</comment>
                            <comment id="13454141" author="lhofhansl" created="Wed, 12 Sep 2012 17:20:51 +0000"  >&lt;p&gt;Let&apos;s put this in the next point release (which will be soon).&lt;/p&gt;</comment>
                            <comment id="13454906" author="ram_krish" created="Thu, 13 Sep 2012 14:01:32 +0000"  >&lt;p&gt;@Lars/@Ted&lt;br/&gt;
Maryann has come up with a patch for HBASe-6299 where there is no retry on SocketTimeOut.  May be if he is fine we can merge both or we can seperate this &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6438&quot; title=&quot;RegionAlreadyInTransitionException needs to give more info to avoid assignment inconsistencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6438&quot;&gt;&lt;del&gt;HBASE-6438&lt;/del&gt;&lt;/a&gt; seperately.&lt;/p&gt;</comment>
                            <comment id="13454929" author="yuzhihong@gmail.com" created="Thu, 13 Sep 2012 14:58:13 +0000"  >&lt;p&gt;I think separating the fix would make discussion easier.&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="13454956" author="lhofhansl" created="Thu, 13 Sep 2012 15:33:10 +0000"  >&lt;p&gt;I&apos;m fine either way. 0.94.2RC0 is nit spun, yet. If we can get this in quickly I can pull it into the that RC.&lt;/p&gt;</comment>
                            <comment id="13455911" author="rajesh23" created="Fri, 14 Sep 2012 16:27:03 +0000"  >&lt;p&gt;Updated patch for 94.&lt;/p&gt;</comment>
                            <comment id="13455921" author="hadoopqa" created="Fri, 14 Sep 2012 16:36:23 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12545165/HBASE-6438_94_3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12545165/HBASE-6438_94_3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2869//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2869//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13455937" author="ram_krish" created="Fri, 14 Sep 2012 16:55:56 +0000"  >&lt;p&gt;@Rajesh&lt;br/&gt;
Thanks for the patch.&lt;br/&gt;
This patch address only the current JIRA.  Maryann&apos;s latest patch addresses &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6299&quot; title=&quot;RS starting region open while failing ack to HMaster.sendRegionOpen() causes inconsistency in HMaster&amp;#39;s region state and a series of successive problems&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6299&quot;&gt;&lt;del&gt;HBASE-6299&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13455969" author="yuzhihong@gmail.com" created="Fri, 14 Sep 2012 17:31:24 +0000"  >&lt;p&gt;@Rajesh:&lt;br/&gt;
Latest patch looks good.&lt;br/&gt;
nit: else keyword is not needed below:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; -1;
+      } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Please produce patch for trunk and let Hadoop QA run the tests.&lt;/p&gt;</comment>
                            <comment id="13456363" author="rajesh23" created="Sat, 15 Sep 2012 10:11:54 +0000"  >&lt;p&gt;Submitted trunk patch to Hadoop QA just to run tests&lt;/p&gt;</comment>
                            <comment id="13456364" author="rajesh23" created="Sat, 15 Sep 2012 10:12:44 +0000"  >&lt;p&gt;Patch for 94 addressing Ted&apos;s comment.&lt;/p&gt;</comment>
                            <comment id="13456366" author="hadoopqa" created="Sat, 15 Sep 2012 10:22:13 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12545273/HBASE-6438_94_4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12545273/HBASE-6438_94_4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2880//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2880//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13456368" author="yuzhihong@gmail.com" created="Sat, 15 Sep 2012 10:56:00 +0000"  >&lt;p&gt;From &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2881/console:&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2881/console:&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
HBASE-6438 patch is being downloaded at Sat Sep 15 10:31:35 UTC 2012 from
http:&lt;span class=&quot;code-comment&quot;&gt;//issues.apache.org/jira/secure/attachment/12545274/HBASE-6438-trunk_2.patch
&lt;/span&gt;...
======================================================================
    Checking against hadoop 2.0 build
======================================================================
======================================================================


======================================================================
======================================================================
    Finished build.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Maybe the patch doesn&apos;t compile against hadoop 2.0 ?&lt;/p&gt;</comment>
                            <comment id="13456374" author="rajesh23" created="Sat, 15 Sep 2012 11:41:20 +0000"  >&lt;p&gt;@Ted,&lt;br/&gt;
I am not getting any compilation failures with hadoop 2.0 profile.&lt;/p&gt;</comment>
                            <comment id="13456420" author="yuzhihong@gmail.com" created="Sat, 15 Sep 2012 14:52:59 +0000"  >&lt;p&gt;Re-attaching for QA run.&lt;/p&gt;</comment>
                            <comment id="13456440" author="yuzhihong@gmail.com" created="Sat, 15 Sep 2012 16:37:03 +0000"  >&lt;p&gt;I tried compilation against hadoop 2.0:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] HBase ............................................. SUCCESS [0.264s]
[INFO] HBase - Common .................................... SUCCESS [6.768s]
[INFO] HBase - Hadoop Compatibility ...................... SUCCESS [0.257s]
[INFO] HBase - Hadoop Two Compatibility .................. SUCCESS [1.290s]
[INFO] HBase - Server .................................... SUCCESS [38.820s]
[INFO] HBase - Hadoop One Compatibility .................. SUCCESS [0.431s]
[INFO] HBase - Integration Tests ......................... SUCCESS [0.959s]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 53.259s
[INFO] Finished at: Sat Sep 15 09:35:48 PDT 2012
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Running test suite locally.&lt;/p&gt;</comment>
                            <comment id="13456494" author="yuzhihong@gmail.com" created="Sat, 15 Sep 2012 21:10:40 +0000"  >&lt;p&gt;I ran the test suite:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[INFO] HBase - Server .................................... FAILURE [45:18.213s]
[INFO] HBase - Hadoop Two Compatibility .................. SKIPPED
[INFO] HBase - Integration Tests ......................... SKIPPED
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 45:27.603s
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; and got one test failure:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  queueFailover(org.apache.hadoop.hbase.replication.TestReplication): test timed out after 300000 milliseconds
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I don&apos;t think the above is related to Rajesh&apos;s patch.&lt;/p&gt;

&lt;p&gt;+1 from me.&lt;/p&gt;</comment>
                            <comment id="13456503" author="yuzhihong@gmail.com" created="Sat, 15 Sep 2012 22:52:23 +0000"  >&lt;p&gt;Patch for 0.92 branch.&lt;/p&gt;</comment>
                            <comment id="13456515" author="yuzhihong@gmail.com" created="Sun, 16 Sep 2012 01:11:03 +0000"  >&lt;p&gt;All tests passed for 0.92 patch.&lt;/p&gt;

&lt;p&gt;Will integrate tonight if there is no objection.&lt;/p&gt;</comment>
                            <comment id="13456524" author="yuzhihong@gmail.com" created="Sun, 16 Sep 2012 02:54:49 +0000"  >&lt;p&gt;Integrated to 0.92, 0.94 and trunk.&lt;/p&gt;

&lt;p&gt;Thanks for the patch, Rajesh.&lt;/p&gt;

&lt;p&gt;Thanks for the review, Stack, Lars and Ram.&lt;/p&gt;</comment>
                            <comment id="13456530" author="hudson" created="Sun, 16 Sep 2012 03:18:37 +0000"  >&lt;p&gt;Integrated in HBase-0.92 #578 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92/578/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92/578/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6438&quot; title=&quot;RegionAlreadyInTransitionException needs to give more info to avoid assignment inconsistencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6438&quot;&gt;&lt;del&gt;HBASE-6438&lt;/del&gt;&lt;/a&gt; RegionAlreadyInTransitionException needs to give more info to avoid assignment inconsistencies (Rajesh) (Revision 1385204)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13456535" author="hudson" created="Sun, 16 Sep 2012 04:12:44 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3338 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3338/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3338/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6438&quot; title=&quot;RegionAlreadyInTransitionException needs to give more info to avoid assignment inconsistencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6438&quot;&gt;&lt;del&gt;HBASE-6438&lt;/del&gt;&lt;/a&gt; RegionAlreadyInTransitionException needs to give more info to avoid assignment inconsistencies (Rajesh) (Revision 1385210)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13456539" author="hudson" created="Sun, 16 Sep 2012 04:29:47 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #471 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/471/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/471/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6438&quot; title=&quot;RegionAlreadyInTransitionException needs to give more info to avoid assignment inconsistencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6438&quot;&gt;&lt;del&gt;HBASE-6438&lt;/del&gt;&lt;/a&gt; RegionAlreadyInTransitionException needs to give more info to avoid assignment inconsistencies (Rajesh) (Revision 1385209)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13456564" author="hudson" created="Sun, 16 Sep 2012 09:46:14 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #176 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/176/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/176/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6438&quot; title=&quot;RegionAlreadyInTransitionException needs to give more info to avoid assignment inconsistencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6438&quot;&gt;&lt;del&gt;HBASE-6438&lt;/del&gt;&lt;/a&gt; RegionAlreadyInTransitionException needs to give more info to avoid assignment inconsistencies (Rajesh) (Revision 1385210)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13456755" author="ram_krish" created="Mon, 17 Sep 2012 04:27:00 +0000"  >&lt;p&gt;@Ted&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;That said, this patch could go into 0.92 and 0.94 and we can fix it better in trunk.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;As per Stack this patch need not go in to Trunk.  Can we revert from Trunk Ted?&lt;/p&gt;</comment>
                            <comment id="13457632" author="zjushch" created="Tue, 18 Sep 2012 06:17:34 +0000"  >&lt;p&gt;As per the patch, we will reassign the region to same regionServer if regionAlreadyInTransitionException,&lt;/p&gt;

&lt;p&gt;But in fact, &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void assign(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; HRegionInfo region, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; RegionState state,
      &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; setOfflineInZK, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; forceNewPlan,
      &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; hijack)
{
..
RegionPlan plan = getRegionPlan(state, forceNewPlan);
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (plan == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
        LOG.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Unable to determine a plan to assign &quot;&lt;/span&gt; + state);
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.timeoutMonitor.setAllRegionServersOffline(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;; &lt;span class=&quot;code-comment&quot;&gt;// Should get reassigned later when RIT times out.
&lt;/span&gt;      }
      &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
        LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Assigning region &quot;&lt;/span&gt; + state.getRegion().getRegionNameAsString() +
..
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;we will get regionPlan(plan = getRegionPlan(state, forceNewPlan)&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; again before sending open region rpc in the retry,&lt;/p&gt;

&lt;p&gt;So if forceNewPlan=true, it may assign region to another regionServer even if regionAlreadyInTransitionException=true&lt;/p&gt;



&lt;p&gt;So, I think we should modify the following code&lt;br/&gt;
RegionPlan plan = getRegionPlan(state, !regionAlreadyInTransitionException&amp;amp;forceNewPlan);&lt;/p&gt;</comment>
                            <comment id="13457641" author="ram_krish" created="Tue, 18 Sep 2012 06:36:00 +0000"  >&lt;p&gt;@Chunhui&lt;br/&gt;
Very good catch.  Thanks for your review.&lt;/p&gt;</comment>
                            <comment id="13457822" author="yuzhihong@gmail.com" created="Tue, 18 Sep 2012 13:52:10 +0000"  >&lt;p&gt;Addendum for trunk.&lt;/p&gt;</comment>
                            <comment id="13457824" author="yuzhihong@gmail.com" created="Tue, 18 Sep 2012 13:54:17 +0000"  >&lt;p&gt;Addendum integrated to trunk.&lt;/p&gt;

&lt;p&gt;Will apply similar addendum to 0.92 and 0.94 when I get into office.&lt;/p&gt;</comment>
                            <comment id="13457854" author="ram_krish" created="Tue, 18 Sep 2012 14:29:30 +0000"  >&lt;p&gt;@Ted&lt;br/&gt;
I was about to give the patch &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.  Thanks anyway.&lt;br/&gt;
Do we need to revert the patch from Trunk?  See my comment at 17/Sep/12 09:57 and also Stack&apos;s comment 25/Aug/12 00:49&lt;/p&gt;</comment>
                            <comment id="13457857" author="hudson" created="Tue, 18 Sep 2012 14:35:03 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3346 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3346/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3346/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6438&quot; title=&quot;RegionAlreadyInTransitionException needs to give more info to avoid assignment inconsistencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6438&quot;&gt;&lt;del&gt;HBASE-6438&lt;/del&gt;&lt;/a&gt; Addendum checks regionAlreadyInTransitionException when generating region plan (Chunhui) (Revision 1387164)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13457860" author="yuzhihong@gmail.com" created="Tue, 18 Sep 2012 14:44:11 +0000"  >&lt;p&gt;@Ram:&lt;br/&gt;
I will wait for Stack&apos;s comment.&lt;/p&gt;</comment>
                            <comment id="13457870" author="yuzhihong@gmail.com" created="Tue, 18 Sep 2012 14:57:55 +0000"  >&lt;p&gt;Addendum for 0.94&lt;/p&gt;</comment>
                            <comment id="13457873" author="yuzhihong@gmail.com" created="Tue, 18 Sep 2012 15:01:40 +0000"  >&lt;p&gt;Integrated addendum to 0.92 and 0.94 as well.&lt;/p&gt;

&lt;p&gt;Thanks for the finding, Chunhui.&lt;/p&gt;</comment>
                            <comment id="13457893" author="hudson" created="Tue, 18 Sep 2012 15:49:35 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #472 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/472/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/472/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6438&quot; title=&quot;RegionAlreadyInTransitionException needs to give more info to avoid assignment inconsistencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6438&quot;&gt;&lt;del&gt;HBASE-6438&lt;/del&gt;&lt;/a&gt; Addendum checks regionAlreadyInTransitionException when generating region plan (Chunhui) (Revision 1387209)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13457968" author="hudson" created="Tue, 18 Sep 2012 17:21:08 +0000"  >&lt;p&gt;Integrated in HBase-0.92 #580 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92/580/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92/580/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6438&quot; title=&quot;RegionAlreadyInTransitionException needs to give more info to avoid assignment inconsistencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6438&quot;&gt;&lt;del&gt;HBASE-6438&lt;/del&gt;&lt;/a&gt; Addendum checks regionAlreadyInTransitionException when generating region plan (Chunhui) (Revision 1387210)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13458288" author="hudson" created="Tue, 18 Sep 2012 23:44:09 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #180 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/180/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/180/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6438&quot; title=&quot;RegionAlreadyInTransitionException needs to give more info to avoid assignment inconsistencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6438&quot;&gt;&lt;del&gt;HBASE-6438&lt;/del&gt;&lt;/a&gt; Addendum checks regionAlreadyInTransitionException when generating region plan (Chunhui) (Revision 1387164)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13458973" author="stack" created="Wed, 19 Sep 2012 18:57:06 +0000"  >&lt;p&gt;I&apos;d say, leave the patch in trunk.  Hopefully we&apos;ll do a better fix but until then, keep this improvement.&lt;/p&gt;</comment>
                            <comment id="13460753" author="hudson" created="Fri, 21 Sep 2012 19:28:49 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #53 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/53/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/53/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6438&quot; title=&quot;RegionAlreadyInTransitionException needs to give more info to avoid assignment inconsistencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6438&quot;&gt;&lt;del&gt;HBASE-6438&lt;/del&gt;&lt;/a&gt; Addendum checks regionAlreadyInTransitionException when generating region plan (Chunhui) (Revision 1387209)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6438&quot; title=&quot;RegionAlreadyInTransitionException needs to give more info to avoid assignment inconsistencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6438&quot;&gt;&lt;del&gt;HBASE-6438&lt;/del&gt;&lt;/a&gt; RegionAlreadyInTransitionException needs to give more info to avoid assignment inconsistencies (Rajesh) (Revision 1385209)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13469892" author="hudson" created="Fri, 5 Oct 2012 00:37:47 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security-on-Hadoop-23 #8 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/8/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/8/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6438&quot; title=&quot;RegionAlreadyInTransitionException needs to give more info to avoid assignment inconsistencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6438&quot;&gt;&lt;del&gt;HBASE-6438&lt;/del&gt;&lt;/a&gt; Addendum checks regionAlreadyInTransitionException when generating region plan (Chunhui) (Revision 1387209)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6438&quot; title=&quot;RegionAlreadyInTransitionException needs to give more info to avoid assignment inconsistencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6438&quot;&gt;&lt;del&gt;HBASE-6438&lt;/del&gt;&lt;/a&gt; RegionAlreadyInTransitionException needs to give more info to avoid assignment inconsistencies (Rajesh) (Revision 1385209)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13469993" author="hudson" created="Fri, 5 Oct 2012 02:59:34 +0000"  >&lt;p&gt;Integrated in HBase-0.92-security #143 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92-security/143/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92-security/143/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6438&quot; title=&quot;RegionAlreadyInTransitionException needs to give more info to avoid assignment inconsistencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6438&quot;&gt;&lt;del&gt;HBASE-6438&lt;/del&gt;&lt;/a&gt; Addendum checks regionAlreadyInTransitionException when generating region plan (Chunhui) (Revision 1387210)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6438&quot; title=&quot;RegionAlreadyInTransitionException needs to give more info to avoid assignment inconsistencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6438&quot;&gt;&lt;del&gt;HBASE-6438&lt;/del&gt;&lt;/a&gt; RegionAlreadyInTransitionException needs to give more info to avoid assignment inconsistencies (Rajesh) (Revision 1385204)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13624648" author="stack" created="Sun, 7 Apr 2013 04:39:48 +0000"  >&lt;p&gt;Fix up after bulk move overwrote some 0.94.2 fix versions w/ 0.95.0 (Noticed by Lars Hofhansl)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12596526">HBASE-6299</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12545291" name="6438-0.92.txt" size="4887" author="yuzhihong@gmail.com" created="Sat, 15 Sep 2012 22:52:23 +0000"/>
                            <attachment id="12545571" name="6438-addendum.94" size="756" author="yuzhihong@gmail.com" created="Tue, 18 Sep 2012 14:57:55 +0000"/>
                            <attachment id="12545280" name="6438-trunk_2.patch" size="5039" author="yuzhihong@gmail.com" created="Sat, 15 Sep 2012 14:52:59 +0000"/>
                            <attachment id="12545562" name="6438.addendum" size="795" author="yuzhihong@gmail.com" created="Tue, 18 Sep 2012 13:52:10 +0000"/>
                            <attachment id="12545274" name="HBASE-6438-trunk_2.patch" size="5039" author="rajesh23" created="Sat, 15 Sep 2012 10:27:31 +0000"/>
                            <attachment id="12544396" name="HBASE-6438_2.patch" size="9383" author="rajesh23" created="Sun, 9 Sep 2012 10:22:37 +0000"/>
                            <attachment id="12544203" name="HBASE-6438_94.patch" size="9176" author="rajesh23" created="Fri, 7 Sep 2012 11:41:22 +0000"/>
                            <attachment id="12545165" name="HBASE-6438_94_3.patch" size="4945" author="rajesh23" created="Fri, 14 Sep 2012 16:27:03 +0000"/>
                            <attachment id="12545273" name="HBASE-6438_94_4.patch" size="4926" author="rajesh23" created="Sat, 15 Sep 2012 10:12:44 +0000"/>
                            <attachment id="12540041" name="HBASE-6438_trunk.patch" size="4628" author="rajesh23" created="Thu, 9 Aug 2012 15:14:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>10.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 9 Aug 2012 15:14:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>241989</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 36 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02hp3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12468</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>