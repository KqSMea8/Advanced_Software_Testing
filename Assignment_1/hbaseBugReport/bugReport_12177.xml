<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:30:29 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-12177/HBASE-12177.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-12177] TestIPv6NIOServerSocketChannel hangs consistently on Java 8</title>
                <link>https://issues.apache.org/jira/browse/HBASE-12177</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;TestIPv6NIOServerSocketChannel hangs consistently on Java 8u20. jstack dump attached. This is on a 64-bit Ubuntu 14.04 system kernel &quot;Linux version 3.13.0-29-generic (buildd@toyol) (gcc version 4.8.2 (Ubuntu 4.8.2-19ubuntu1) ) #53-Ubuntu SMP Wed Jun 4 21:00:20 UTC 2014&quot;&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&quot;pool-1-thread-1&quot; #9 prio=5 os_prio=0 tid=0x00007ff330707000 nid=0x41a8 runnable [0x00007ff309e8f000]
   java.lang.Thread.State: RUNNABLE
	at java.net.PlainSocketImpl.socketBind(Native Method)
	at java.net.AbstractPlainSocketImpl.bind(AbstractPlainSocketImpl.java:382)
	- locked &amp;lt;0x00000000e1c004e0&amp;gt; (a java.net.SocksSocketImpl)
	at java.net.ServerSocket.bind(ServerSocket.java:375)
	at java.net.ServerSocket.bind(ServerSocket.java:329)
	at org.apache.hadoop.hbase.TestIPv6NIOServerSocketChannel.bindServerSocket(TestIPv6NIOServerSocketChannel.java:60)
	at org.apache.hadoop.hbase.TestIPv6NIOServerSocketChannel.testServerSocketFromLocalhostResolution(TestIPv6NIOServerSocketChannel.java:149)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I am going to disable this test in 0.98 branch for now.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12746166">HBASE-12177</key>
            <summary>TestIPv6NIOServerSocketChannel hangs consistently on Java 8</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="apurtell">Andrew Purtell</reporter>
                        <labels>
                    </labels>
                <created>Mon, 6 Oct 2014 15:21:35 +0000</created>
                <updated>Tue, 7 Oct 2014 03:26:34 +0000</updated>
                            <resolved>Mon, 6 Oct 2014 20:35:24 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="14160395" author="apurtell" created="Mon, 6 Oct 2014 15:24:19 +0000"  >&lt;p&gt;The test doesn&apos;t just hang, it also spins on one core at 100%&lt;/p&gt;</comment>
                            <comment id="14160397" author="apurtell" created="Mon, 6 Oct 2014 15:30:56 +0000"  >&lt;p&gt;Attached what I pushed to 0.98 to disable the affected tests&lt;/p&gt;</comment>
                            <comment id="14160450" author="hudson" created="Mon, 6 Oct 2014 16:25:25 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98-on-Hadoop-1.1 #545 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/545/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/545/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12177&quot; title=&quot;TestIPv6NIOServerSocketChannel hangs consistently on Java 8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12177&quot;&gt;&lt;del&gt;HBASE-12177&lt;/del&gt;&lt;/a&gt; TestIPv6NIOServerSocketChannel hangs consistently on Java 8 (apurtell: rev 7f8a86441ed9177498a7e73b2815055fd5271b54)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/TestIPv6NIOServerSocketChannel.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14160542" author="stack" created="Mon, 6 Oct 2014 17:28:12 +0000"  >&lt;p&gt;Should we push to all branches Mr &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="14160605" author="hudson" created="Mon, 6 Oct 2014 18:10:59 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.98 #574 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/574/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/574/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12177&quot; title=&quot;TestIPv6NIOServerSocketChannel hangs consistently on Java 8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12177&quot;&gt;&lt;del&gt;HBASE-12177&lt;/del&gt;&lt;/a&gt; TestIPv6NIOServerSocketChannel hangs consistently on Java 8 (apurtell: rev 7f8a86441ed9177498a7e73b2815055fd5271b54)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/TestIPv6NIOServerSocketChannel.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14160645" author="enis" created="Mon, 6 Oct 2014 18:31:00 +0000"  >&lt;p&gt;What is localhost resolution on the host? The test resolves all the ips for localhost and creates a ServerSocket and NIO server socket and tries to bind to a random free port for each of the resolved ips. &lt;/p&gt;</comment>
                            <comment id="14160668" author="apurtell" created="Mon, 6 Oct 2014 18:38:53 +0000"  >&lt;blockquote&gt;&lt;p&gt;What is localhost resolution on the host?&lt;/p&gt;&lt;/blockquote&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;apurtell@acer$ host -4 localhost
localhost has address 127.0.0.1
apurtell@acer$ host -6 localhost
;; connection timed out; no servers could be reached
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;/etc/hosts:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;127.0.0.1       localhost acer
::1     localhost ip6-localhost ip6-loopback
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Ping:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;apurtell@acer$ ping -c 1 localhost
PING localhost (127.0.0.1) 56(84) bytes of data.
64 bytes from localhost (127.0.0.1): icmp_seq=1 ttl=64 time=0.025 ms

apurtell@acer$ ping6 -c 1 localhost
PING localhost(localhost) 56 data bytes
64 bytes from localhost: icmp_seq=1 ttl=64 time=0.026 ms

apurtell@acer$ ping6 -c 1 ::1
PING ::1(::1) 56 data bytes
64 bytes from ::1: icmp_seq=1 ttl=64 time=0.026 ms
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14160705" author="apurtell" created="Mon, 6 Oct 2014 18:56:58 +0000"  >&lt;p&gt;I&apos;m chasing down another weird test issue on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12179&quot; title=&quot;TestConstraints intermittently hangs on Java 8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12179&quot;&gt;&lt;del&gt;HBASE-12179&lt;/del&gt;&lt;/a&gt; and it looks like every so often &apos;localhost&apos; might be resolved to junk or we&apos;re stomping on the result (I see ZK client send threads calling themselves main-SendThread(252.127.0.0:63034))&lt;/p&gt;

&lt;p&gt;Let me reboot, switch to another host, etc. &lt;/p&gt;</comment>
                            <comment id="14160894" author="apurtell" created="Mon, 6 Oct 2014 20:35:24 +0000"  >&lt;p&gt;I have an Ubuntu 14 dev/test box that causes Oracle JDK 8u11 and 8u20 to play russian roulette with hostname lookups. Oracle JDK 7u67 works fine. If I compile 8u myself (currently 8u40) I see the same problem. Not observed on Amazon Linux or MacOSX with any of these versions. Resolving as invalid as it&apos;s likely an Ubuntu problem.&lt;/p&gt;

&lt;p&gt;Reverted the 0.98 commit.&lt;/p&gt;</comment>
                            <comment id="14160996" author="hudson" created="Mon, 6 Oct 2014 21:32:18 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98 #576 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/576/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/576/&lt;/a&gt;)&lt;br/&gt;
Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12177&quot; title=&quot;TestIPv6NIOServerSocketChannel hangs consistently on Java 8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12177&quot;&gt;&lt;del&gt;HBASE-12177&lt;/del&gt;&lt;/a&gt; TestIPv6NIOServerSocketChannel hangs consistently on Java 8&quot; (apurtell: rev d2b3ecf6964aace0bbcddda7d3bec8dce971b638)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/TestIPv6NIOServerSocketChannel.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14161171" author="hudson" created="Mon, 6 Oct 2014 23:01:09 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98-on-Hadoop-1.1 #547 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/547/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/547/&lt;/a&gt;)&lt;br/&gt;
Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12177&quot; title=&quot;TestIPv6NIOServerSocketChannel hangs consistently on Java 8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12177&quot;&gt;&lt;del&gt;HBASE-12177&lt;/del&gt;&lt;/a&gt; TestIPv6NIOServerSocketChannel hangs consistently on Java 8&quot; (apurtell: rev d2b3ecf6964aace0bbcddda7d3bec8dce971b638)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/TestIPv6NIOServerSocketChannel.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14161411" author="enis" created="Tue, 7 Oct 2014 03:26:34 +0000"  >&lt;blockquote&gt;&lt;p&gt;Resolving as invalid as it&apos;s likely an Ubuntu problem&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Sounds good. Thanks Andrew. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12673106" name="HBASE-12177-0.98.patch" size="1893" author="apurtell" created="Mon, 6 Oct 2014 15:30:56 +0000"/>
                            <attachment id="12673104" name="jstack.txt" size="5406" author="apurtell" created="Mon, 6 Oct 2014 15:21:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 6 Oct 2014 16:25:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 10 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i20udb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>