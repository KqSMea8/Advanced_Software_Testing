<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:27:32 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-11879/HBASE-11879.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-11879] Change TableInputFormatBase to take interface arguments</title>
                <link>https://issues.apache.org/jira/browse/HBASE-11879</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;As part of the ongoing interface abstraction work, I&apos;m now investigating &lt;tt&gt;TableInputFormatBase&lt;/tt&gt;, which has two methods that break encapsulation:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; HTable getHTable();
&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void setHTable(HTable table);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;While these are protected methods, the base @InterfaceAudience.Public is abstract, meaning that it supports extension by user code.&lt;/p&gt;

&lt;p&gt;I propose deprecating these two methods and replacing them with these four, once the Table interface is merged:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; Table getTable();
&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void setTable(Table table);
&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; RegionLocator getRegionLocator();
&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void setRegionLocator(RegionLocator regionLocator);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Since users will frequently call &lt;tt&gt;setTable&lt;/tt&gt; and &lt;tt&gt;setRegionLocator&lt;/tt&gt; together, it probably also makes sense to add the following convenience method:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void setTableAndRegionLocator(Table table, RegionLocator regionLocator);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12738486">HBASE-11879</key>
            <summary>Change TableInputFormatBase to take interface arguments</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sduskis">Solomon Duskis</assignee>
                                    <reporter username="carterpage">Carter</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Sep 2014 18:25:31 +0000</created>
                <updated>Sat, 21 Feb 2015 23:41:45 +0000</updated>
                            <resolved>Wed, 1 Oct 2014 04:26:50 +0000</resolved>
                                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>0.99.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="14118568" author="carterpage" created="Tue, 2 Sep 2014 19:15:58 +0000"  >&lt;p&gt;Actually, I&apos;m changing my mind about the convenience method.  Looks clunky and only saves one additional line of code.  I&apos;ll propose just the four new methods.&lt;/p&gt;</comment>
                            <comment id="14118582" author="carterpage" created="Tue, 2 Sep 2014 19:27:03 +0000"  >&lt;p&gt;One other alternative I&apos;ll throw out there.  Rather than passing the individual Table and RegionLocator interfaces, it would be possible to throw out the Connection interface and HIFB can use that to retrieve the Admin and Table interfaces for itself.&lt;/p&gt;

&lt;p&gt;Option 2:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; Connection getConnection();
&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void setConnection(Connection connection);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14119002" author="enis" created="Wed, 3 Sep 2014 00:03:04 +0000"  >&lt;p&gt;I like option 2.&lt;/p&gt;</comment>
                            <comment id="14121638" author="ndimiduk" created="Thu, 4 Sep 2014 17:43:04 +0000"  >&lt;p&gt;+1 for option 2. Be sure to define/document the semantics of the connection lifecycle &amp;#8211; presumably the caller owns it.&lt;/p&gt;</comment>
                            <comment id="14121887" author="carterpage" created="Thu, 4 Sep 2014 19:58:36 +0000"  >&lt;p&gt;#2 it is.  Agreed the caller should own the connection.  We&apos;ll have to create the Connection interface first, then work can proceed on this issue.&lt;/p&gt;</comment>
                            <comment id="14131638" author="sduskis" created="Fri, 12 Sep 2014 14:58:55 +0000"  >&lt;p&gt;Most of the work in this patch was from Enis&apos;s patch in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10602&quot; title=&quot;Cleanup HTable public interface&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10602&quot;&gt;&lt;del&gt;HBASE-10602&lt;/del&gt;&lt;/a&gt;.  There were a few things that changed since April, so I did my best to make sure that differences between Enis&apos;s patch and the current master are resolved.  Given that this is my first patch, I&apos;m pretty sure that I&apos;ve missed something, but not sure what.&lt;/p&gt;</comment>
                            <comment id="14131643" author="sduskis" created="Fri, 12 Sep 2014 15:03:46 +0000"  >&lt;p&gt;Ugh.  My first comment was on the wrong issue.  It was meant for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11825&quot; title=&quot;Create Connection and ConnectionManager&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11825&quot;&gt;&lt;del&gt;HBASE-11825&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14131668" author="sduskis" created="Fri, 12 Sep 2014 15:41:26 +0000"  >&lt;p&gt;Does approach #2 also need to have a TableName passed in order to get both the Table and RegionLocator?&lt;/p&gt;</comment>
                            <comment id="14134455" author="sduskis" created="Mon, 15 Sep 2014 20:45:37 +0000"  >&lt;p&gt;I&apos;m not sure that setConnection would work by itself.  It looks like a TableName is needed in order to get a Table and RegionLocator.  I think that if we want to have something like setConnection() method to replace setTable() and setRegionLocator(), &lt;/p&gt;

&lt;p&gt;Option 2a:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void initializeTable(Connection connection, TableName tableName);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Am I missing something?  If the TableName is needed should we implement the original implementation with get/set table/regionLocator?  Is there a better alternative?&lt;/p&gt;</comment>
                            <comment id="14139030" author="sduskis" created="Thu, 18 Sep 2014 15:02:11 +0000"  >&lt;p&gt;I took a first stab at this problem.  I implemented set/get Table and RegionLocator.  &lt;/p&gt;

&lt;p&gt;I didn&apos;t address the convenience method issues.&lt;/p&gt;

&lt;p&gt;There is a gotcha with table.getRegionLocations().  That&apos;s a deprecated method in HTAble that seems to be used all over the place.  Does it make sense to migrate getRegionLocations() and its dependencies to use the new Table/RegionLocator/Connection/Admin interfaces?&lt;/p&gt;</comment>
                            <comment id="14140069" author="stack" created="Fri, 19 Sep 2014 06:21:37 +0000"  >&lt;p&gt;Took a quick look. I think it looking good.  Looks like old MR jobs will continue to work.&lt;/p&gt;

&lt;p&gt;nits: Fix spelling in + *          ConnectionFactory.createConnectin(HBaseConfiguration.create(job));&lt;br/&gt;
nits: When you @Deprecated a method, you can add a @deprecated to javadoc too and qualify it with what you would have the user call instead.  You actually have javadoc already doing &apos;* Use setTable&apos;.  Instead making &apos;* @deprecated Use setTable instead&apos;.  Minor.&lt;/p&gt;

&lt;p&gt;Is this right (in mapred package &amp;#8211; seems right in mapreduce package)?&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public void setHTable(Table htable) {&lt;/li&gt;
	&lt;li&gt;Configuration conf = htable.getConfiguration();&lt;br/&gt;
+  public void setHTable(Table table) {&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Should there be a deprecation of setHTable going on here?&lt;/p&gt;

&lt;p&gt;What was wrong w/ your 2a suggestion?  That looked nice.  Let this class internally go get regionlocators?&lt;/p&gt;

&lt;p&gt;Otherwise patch is looking good.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Does it make sense to migrate getRegionLocations() and its dependencies to use the new Table/RegionLocator/Connection/Admin interfaces?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That would make sense.  In another JIRA?&lt;/p&gt;

&lt;p&gt;Good stuff.&lt;/p&gt;</comment>
                            <comment id="14140726" author="sduskis" created="Fri, 19 Sep 2014 15:19:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;&apos;s comments were incorporated.  Good suggestions.&lt;/p&gt;</comment>
                            <comment id="14140960" author="stack" created="Fri, 19 Sep 2014 17:47:23 +0000"  >&lt;p&gt;+1 I like it.  Clean.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt; You are our TIFB man.  What you think?&lt;/p&gt;</comment>
                            <comment id="14141247" author="enis" created="Fri, 19 Sep 2014 20:30:14 +0000"  >&lt;p&gt;LGTM. Waiting for Nick. &lt;/p&gt;</comment>
                            <comment id="14151642" author="sduskis" created="Mon, 29 Sep 2014 12:44:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt;: What&apos;s the good word on this patch?&lt;/p&gt;</comment>
                            <comment id="14153478" author="sduskis" created="Tue, 30 Sep 2014 18:07:58 +0000"  >&lt;p&gt;Update due to merging with master.&lt;/p&gt;</comment>
                            <comment id="14153909" author="sduskis" created="Tue, 30 Sep 2014 22:38:58 +0000"  >&lt;p&gt;This is a better merge of master.&lt;/p&gt;</comment>
                            <comment id="14153964" author="stack" created="Tue, 30 Sep 2014 23:02:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt; Now you are back, any opinion on this patch sir?&lt;/p&gt;</comment>
                            <comment id="14154110" author="ndimiduk" created="Wed, 1 Oct 2014 00:41:49 +0000"  >&lt;p&gt;+1 from me.&lt;/p&gt;</comment>
                            <comment id="14154325" author="stack" created="Wed, 1 Oct 2014 04:24:08 +0000"  >&lt;p&gt;Rebase. What I committed to 0.99.1+&lt;/p&gt;</comment>
                            <comment id="14154328" author="stack" created="Wed, 1 Oct 2014 04:26:50 +0000"  >&lt;p&gt;Committed to branch-1+.  Thanks for the patch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sduskis&quot; class=&quot;user-hover&quot; rel=&quot;sduskis&quot;&gt;Solomon Duskis&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14154450" author="hudson" created="Wed, 1 Oct 2014 06:39:16 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #5596 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/5596/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/5596/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11879&quot; title=&quot;Change TableInputFormatBase to take interface arguments&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11879&quot;&gt;&lt;del&gt;HBASE-11879&lt;/del&gt;&lt;/a&gt; Change TableInputFormatBase to take interface arguments (Solomon Duskis) (stack: rev ff31691c84587c2fc938705e184f2a3238ef3070)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/TableRecordReader.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/MultiTableInputFormatBase.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/MetaScanner.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14154591" author="hudson" created="Wed, 1 Oct 2014 09:17:04 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.0 #253 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/253/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.0/253/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11879&quot; title=&quot;Change TableInputFormatBase to take interface arguments&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11879&quot;&gt;&lt;del&gt;HBASE-11879&lt;/del&gt;&lt;/a&gt; Change TableInputFormatBase to take interface arguments (Solomon Duskis) (stack: rev 7b64e7d7df757c3d58b564e01245109cb8b9f660)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/TableRecordReader.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/MultiTableInputFormatBase.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/MetaScanner.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14331543" author="enis" created="Sat, 21 Feb 2015 23:41:45 +0000"  >&lt;p&gt;Closing this issue after 0.99.1 release.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12697038">HBASE-10602</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12736810">HBASE-11825</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12672249" name="11879v4.txt" size="14312" author="stack" created="Wed, 1 Oct 2014 04:24:08 +0000"/>
                            <attachment id="12672082" name="HBASE-11879_v2.patch" size="15604" author="sduskis" created="Tue, 30 Sep 2014 18:07:58 +0000"/>
                            <attachment id="12672168" name="HBASE-11879_v3.patch" size="13931" author="sduskis" created="Tue, 30 Sep 2014 22:38:58 +0000"/>
                            <attachment id="12669741" name="HBASE_11879.patch" size="24072" author="sduskis" created="Thu, 18 Sep 2014 15:02:11 +0000"/>
                            <attachment id="12670018" name="HBASE_11879_v1.patch" size="15568" author="sduskis" created="Fri, 19 Sep 2014 15:19:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 3 Sep 2014 00:03:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1zl6n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>