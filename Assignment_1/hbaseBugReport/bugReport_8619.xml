<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:56:56 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-8619/HBASE-8619.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-8619] [HBase Client]: Improve client to retry if master is down when requesting getHTableDescriptor</title>
                <link>https://issues.apache.org/jira/browse/HBASE-8619</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;In our rolling upgrade testing, running ImportTsv failed in the job submission phase when the master was down. This was when the master was failing over to the backup master. In this case, a retry would have been helpful and made sure that the job would get submitted.&lt;/p&gt;

&lt;p&gt;A good solution would be to refresh the master information before placing the call to getHTableDescriptor.&lt;/p&gt;

&lt;p&gt;Command:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; sudo -u hbase hbase org.apache.hadoop.hbase.mapreduce.ImportTsv -Dimporttsv.columns=HBASE_ROW_KEY,c1,c2,c3 -Dimporttsv.bulk.output=/user/hbase/storeFiles2_2/import2_table1369439156 import2_table1369439156 /user/hbase/tsv2&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here is the stack trace:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; 13/05/24 16:55:49 INFO compress.CodecPool: Got brand-&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; compressor [.deflate]
16:45:44  Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.lang.reflect.UndeclaredThrowableException
16:45:44  	at $Proxy7.getHTableDescriptors(Unknown Source)
16:45:44  	at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.getHTableDescriptor(HConnectionManager.java:1861)
16:45:44  	at org.apache.hadoop.hbase.client.HTable.getTableDescriptor(HTable.java:440)
16:45:44  	at org.apache.hadoop.hbase.mapreduce.HFileOutputFormat.configureCompression(HFileOutputFormat.java:458)
16:45:44  	at org.apache.hadoop.hbase.mapreduce.HFileOutputFormat.configureIncrementalLoad(HFileOutputFormat.java:375)
16:45:44  	at org.apache.hadoop.hbase.mapreduce.ImportTsv.createSubmittableJob(ImportTsv.java:280)
16:45:44  	at org.apache.hadoop.hbase.mapreduce.ImportTsv.main(ImportTsv.java:424)
16:45:44  Caused by: java.io.IOException: Call to hbase-rolling-6.ent.cloudera.com/10.20.186.99:22001 failed on local exception: java.io.EOFException
16:45:44  	at org.apache.hadoop.hbase.ipc.HBaseClient.wrapException(HBaseClient.java:1030)
16:45:44  	at org.apache.hadoop.hbase.ipc.HBaseClient.call(HBaseClient.java:999)
16:45:44  	at org.apache.hadoop.hbase.ipc.WritableRpcEngine$Invoker.invoke(WritableRpcEngine.java:86)
16:45:44  	... 7 more
16:45:44  Caused by: java.io.EOFException
16:45:44  	at java.io.DataInputStream.readInt(DataInputStream.java:375)
16:45:44  	at org.apache.hadoop.hbase.ipc.HBaseClient$Connection.receiveResponse(HBaseClient.java:646)
16:45:44  	at org.apache.hadoop.hbase.ipc.HBaseClient$Connection.run(HBaseClient.java:580)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12649425">HBASE-8619</key>
            <summary>[HBase Client]: Improve client to retry if master is down when requesting getHTableDescriptor</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="eclark">Elliott Clark</assignee>
                                    <reporter username="aleksshulman">Aleksandr Shulman</reporter>
                        <labels>
                    </labels>
                <created>Sat, 25 May 2013 00:50:57 +0000</created>
                <updated>Thu, 18 Sep 2014 21:17:13 +0000</updated>
                            <resolved>Thu, 18 Sep 2014 21:17:13 +0000</resolved>
                                    <version>0.94.8</version>
                                                    <component>Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13704359" author="lhofhansl" created="Wed, 10 Jul 2013 09:35:07 +0000"  >&lt;p&gt;Moving to 0.94.11 for now, since there is no proposed patch, yet.&lt;/p&gt;</comment>
                            <comment id="13727305" author="lhofhansl" created="Fri, 2 Aug 2013 04:09:59 +0000"  >&lt;p&gt;Any update?&lt;br/&gt;
Pushing to 0.94.12&lt;/p&gt;</comment>
                            <comment id="13736179" author="aleksshulman" created="Sun, 11 Aug 2013 04:00:28 +0000"  >&lt;p&gt;I&apos;m seeing this occur in my testing. It&apos;s a race condition so it&apos;s hard to repro, unfortunately.&lt;br/&gt;
The latest stack trace where I saw it looked like this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.lang.reflect.UndeclaredThrowableException
20:30:00  	at $Proxy7.getHTableDescriptors(Unknown Source)
20:30:00  	at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.getHTableDescriptor(HConnectionManager.java:1863)
20:30:00  	at org.apache.hadoop.hbase.client.HTable.getTableDescriptor(HTable.java:440)
20:30:00  	at org.apache.hadoop.hbase.mapreduce.HFileOutputFormat.configureCompression(HFileOutputFormat.java:458)
20:30:00  	at org.apache.hadoop.hbase.mapreduce.HFileOutputFormat.configureIncrementalLoad(HFileOutputFormat.java:375)
20:30:00  	at org.apache.hadoop.hbase.mapreduce.ImportTsv.createSubmittableJob(ImportTsv.java:280)
20:30:00  	at org.apache.hadoop.hbase.mapreduce.ImportTsv.main(ImportTsv.java:424)
20:30:00  Caused by: java.io.IOException: Call to hbase-rolling-6.ent.cloudera.com/10.20.186.99:22001 failed on local exception: java.io.IOException: Connection reset by peer
20:30:00  	at org.apache.hadoop.hbase.ipc.HBaseClient.wrapException(HBaseClient.java:1033)
20:30:00  	at org.apache.hadoop.hbase.ipc.HBaseClient.call(HBaseClient.java:1002)
20:30:00  	at org.apache.hadoop.hbase.ipc.WritableRpcEngine$Invoker.invoke(WritableRpcEngine.java:86)
20:30:00  	... 7 more
20:30:00  Caused by: java.io.IOException: Connection reset by peer
20:30:00  	at sun.nio.ch.FileDispatcher.read0(Native Method)
20:30:00  	at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:21)
20:30:00  	at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:198)
20:30:00  	at sun.nio.ch.IOUtil.read(IOUtil.java:171)
20:30:00  	at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:243)
20:30:00  	at org.apache.hadoop.net.SocketInputStream$Reader.performIO(SocketInputStream.java:56)
20:30:00  	at org.apache.hadoop.net.SocketIOWithTimeout.doIO(SocketIOWithTimeout.java:143)
20:30:00  	at org.apache.hadoop.net.SocketInputStream.read(SocketInputStream.java:156)
20:30:00  	at org.apache.hadoop.net.SocketInputStream.read(SocketInputStream.java:129)
20:30:00  	at java.io.FilterInputStream.read(FilterInputStream.java:116)
20:30:00  	at java.io.FilterInputStream.read(FilterInputStream.java:116)
20:30:00  	at org.apache.hadoop.hbase.ipc.HBaseClient$Connection$PingInputStream.read(HBaseClient.java:373)
20:30:00  	at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
20:30:00  	at java.io.BufferedInputStream.read(BufferedInputStream.java:237)
20:30:00  	at java.io.DataInputStream.readInt(DataInputStream.java:370)
20:30:00  	at org.apache.hadoop.hbase.ipc.HBaseClient$Connection.receiveResponse(HBaseClient.java:646)
20:30:00  	at org.apache.hadoop.hbase.ipc.HBaseClient$Connection.run(HBaseClient.java:580)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13800231" author="lhofhansl" created="Sun, 20 Oct 2013 21:08:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt;, are you still working on this?&lt;/p&gt;</comment>
                            <comment id="13838597" author="lhofhansl" created="Wed, 4 Dec 2013 05:06:14 +0000"  >&lt;p&gt;Is this a 0.94 issue only (i.e. fixed in 0.96+)?&lt;/p&gt;</comment>
                            <comment id="13860837" author="lhofhansl" created="Thu, 2 Jan 2014 21:56:36 +0000"  >&lt;p&gt;Unscheduling for now.&lt;/p&gt;</comment>
                            <comment id="14139534" author="eclark" created="Thu, 18 Sep 2014 21:17:13 +0000"  >&lt;p&gt;This got better somewhere along the way&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 10 Jul 2013 09:35:07 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>329752</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 13 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1kw2n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>330087</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>