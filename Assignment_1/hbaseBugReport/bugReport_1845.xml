<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:56:51 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1845/HBASE-1845.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1845] MultiGet, MultiDelete, and MultiPut - batched to the appropriate region servers</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1845</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;I&apos;ve started to create a general interface for doing these batch/multi calls and would like to get some input and thoughts about how we should handle this and what the protocol should&lt;br/&gt;
look like. &lt;/p&gt;

&lt;p&gt;First naive patch, coming soon.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12435843">HBASE-1845</key>
            <summary>MultiGet, MultiDelete, and MultiPut - batched to the appropriate region servers</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mlimotte">Marc Limotte</assignee>
                                    <reporter username="erikholstad@gmail.com">Erik Holstad</reporter>
                        <labels>
                    </labels>
                <created>Wed, 16 Sep 2009 15:50:04 +0000</created>
                <updated>Fri, 20 Nov 2015 13:01:54 +0000</updated>
                            <resolved>Sat, 25 Sep 2010 06:33:21 +0000</resolved>
                                                    <fixVersion>0.90.0</fixVersion>
                                        <due></due>
                            <votes>8</votes>
                                    <watches>16</watches>
                                                                <comments>
                            <comment id="12756701" author="erikholstad@gmail.com" created="Thu, 17 Sep 2009 18:59:21 +0000"  >&lt;p&gt;Added a first draft of something that is a way to deal with batching of all types of actions, Deletes, Gets and Puts.&lt;/p&gt;

&lt;p&gt;The patch includes a couple of different classes to deal with sending and receiving theses multi calls. The calls to the different Region servers&lt;br/&gt;
are threaded on the client, but the instantiation is happening in the call at the moment, will be moved so we don&apos;t have to do it every time.&lt;br/&gt;
The return format from all the calls multi(List&amp;lt;Delete&amp;gt;), multi(List&amp;lt;Get&amp;gt;) and multi(List&amp;lt;Put&amp;gt;) all return the same type Result [] of the same length&lt;br/&gt;
as the request to the specific RS. For all elements where the Result&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt; == null we have to retry the action, from the client. This common return type&lt;br/&gt;
adds a little bit of overhead for returns of Puts and Deletes but is needed to keep it simple and generic.&lt;/p&gt;

&lt;p&gt;Changed the Row interface a little to be WritableComparable&amp;lt;Row&amp;gt;, needed for the new methods.&lt;/p&gt;

&lt;p&gt;I have only done sanity check tests so far and are going to add more test to cover corner cases, but just wanted&lt;br/&gt;
to get the first draft out there to get feedback.&lt;/p&gt;</comment>
                            <comment id="12756890" author="erikholstad@gmail.com" created="Fri, 18 Sep 2009 00:59:15 +0000"  >&lt;p&gt;Fixed some issues after comments from Jonathan, also moved most of the code into the HConnectionManager to not pollute &lt;br/&gt;
HTable too much. Renamed the call from multi to batch and fixed some bugs related to the grouping into HRS maps.&lt;/p&gt;</comment>
                            <comment id="12757220" author="erikholstad@gmail.com" created="Fri, 18 Sep 2009 16:01:15 +0000"  >&lt;p&gt;Small changes&lt;/p&gt;</comment>
                            <comment id="12757497" author="stack" created="Fri, 18 Sep 2009 22:46:41 +0000"  >&lt;p&gt;I think this patch looks great Holstad.&lt;/p&gt;

&lt;p&gt;Here are some initial comments.&lt;/p&gt;

&lt;p&gt;Deprecate the old means of batching in favor of your new method?  You can have the old methods call into your new method?&lt;/p&gt;

&lt;p&gt;The check a list is sorted probably takes as long as actual sort?&lt;/p&gt;

&lt;p&gt;If only one item in list, avoid sort?  Its an optimization we have elsehwere.&lt;/p&gt;

&lt;p&gt;Multi should be renamed.  Name it Rows?  MultiResults should be renamed Results?  Says in class comment that Multi is about Gets but its more general than this?&lt;/p&gt;

&lt;p&gt;Row has to be a Writable?  Is it OK making it WritableComparable?  I was going to make Row implement Comparable but thought that it&apos;d narrow our ability to mix it in?  If Row is WritableComparable, then should change how Get, Put, etc. implement removing the Comparable and Writable and just use Row?&lt;/p&gt;

&lt;p&gt;Can we batch Puts, Deletes, and Gets?  Or does the batch have to be pure &amp;#8211; all of one type?&lt;/p&gt;

&lt;p&gt;Whats the threading story?  HTable has a pool of executors used for batching.  So, this would be a continuation of HTable not being thread-safe.  It looks like HCM should be fine if used by many threads?&lt;/p&gt;

&lt;p&gt;Testing of failure mid-put with verification that we recover properly would be nice, especially if could be done in a unit test?&lt;/p&gt;









</comment>
                            <comment id="12757528" author="ryanobjc" created="Fri, 18 Sep 2009 23:43:15 +0000"  >&lt;p&gt;when we batch, the old code used to batch by region, which is not the most performant, instead we should batch by regionserver. the recovery might be a little more complex, since did we fail due to split or due to regions moving?&lt;/p&gt;</comment>
                            <comment id="12757539" author="streamy" created="Fri, 18 Sep 2009 23:56:52 +0000"  >&lt;p&gt;@ryan this groups by regionserver, and sends out to each in threads.  it definitely adds complexity to recovery, but is solvable and at least partially solved in the current patch, though not well tested yet.&lt;/p&gt;</comment>
                            <comment id="12757546" author="ryanobjc" created="Sat, 19 Sep 2009 00:11:33 +0000"  >&lt;p&gt;great, i havent been looking at patches yet, too busy. much better approach, i look forward to seeing it speed up some of my jobs.&lt;/p&gt;</comment>
                            <comment id="12757553" author="erikholstad@gmail.com" created="Sat, 19 Sep 2009 00:16:43 +0000"  >&lt;p&gt;@Stack &lt;/p&gt;

&lt;p&gt;Deprecating sounds good to me, will have the old calls use this new one behind the scenes if we decide to use this.&lt;/p&gt;

&lt;p&gt;I would say that checking if the list is sorted will probably go pretty fast, usually, since it breaks at the first occurrence of an unsorted element, but I&apos;m open to remove it, would like to do&lt;br/&gt;
some timing test to see if it is worth it or not before making the decision. &lt;/p&gt;

&lt;p&gt;Will add the check for one element&lt;/p&gt;

&lt;p&gt;Like the name Results, but not really liking Rows but it is not a big deal to me either. Think that batch is kinda ok.&lt;/p&gt;

&lt;p&gt;The reason that Row needs to be writable is the same as for Filter. Will make it WritableComparable, so that will lead to Gets, Puts and Deletes just implement Row. Not sure that this is good though, to hide those inside Row?&lt;/p&gt;

&lt;p&gt;As the code is written now, you can mix and match all of the types into one batch, but I need to do more testing on this and we might need to extend the compare code to include something more than row.&lt;/p&gt;

&lt;p&gt;Yeah, I guess that it what that means, Not really sure what would be the best alternative here and if we are looking to make HTable thread safe?&lt;/p&gt;

&lt;p&gt;I have done some test for recovery, that are not in the patch, but those required modifying the actual code, but will try to figure something out so we can put it in a unit test.&lt;/p&gt;
</comment>
                            <comment id="12757558" author="erikholstad@gmail.com" created="Sat, 19 Sep 2009 00:28:12 +0000"  >&lt;p&gt;Will try to move the sorting into the server instead of the client so it will be done on smaller lists and in parallel on the individual servers.&lt;/p&gt;</comment>
                            <comment id="12757577" author="stack" created="Sat, 19 Sep 2009 00:59:50 +0000"  >&lt;p&gt;HTable is not thread-safe, for updates anyways. Lets go w/ that.  Just make sure that changes down in HCM are.&lt;/p&gt;

&lt;p&gt;Would be sweet if didn&apos;t have to do all testing spinning up a minicluster.&lt;/p&gt;</comment>
                            <comment id="12774990" author="apurtell" created="Mon, 9 Nov 2009 14:41:50 +0000"  >&lt;p&gt;I assume that write buffering of single operations will wrap the new multi calls. Currently there is a wart with respect to the write buffer.&lt;/p&gt;

&lt;p&gt;From a Trend dev team:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;When insert rows into one table by calling the method public synchronized void put(final Put put), if the column family of one row does not exist, the insert operation will failed and throw NoSuchColumnFamilyException.. We observed that all the following insert operation will fails even though all of them have valid column family. That is one exception of insert operation can cause failure of all the following insert operation.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Their further analysis explains in detail the scenario, which I will summarize here:&lt;/p&gt;

&lt;p&gt;1) An invalid put is added to the writeBuffer by put(Put put). It will trigger a NoSuchColumnFamilyException once it goes to the region server.&lt;/p&gt;

&lt;p&gt;2) At some point, the buffer is flushed.&lt;/p&gt;

&lt;p&gt;3) When the invalid put is processed, an exception is thrown. The finally clause of flushCommits() removes all successful puts from the writebuffer list but the failed put remains at the top.&lt;/p&gt;

&lt;p&gt;4) Subsequent puts will add more entries to the write buffer but the first entry on the list is invalid so eventually every Put will throw an exception once the buffer limit . &lt;/p&gt;

&lt;p&gt;I don&apos;t see how the patch on this issue handles this. The invalid entries will be retried here over and over as well. &lt;/p&gt;

&lt;p&gt;A workaround with the current write buffering in HTable is for the client to call getWriteBuffer() and remove the entry at the head of the list manually. &lt;/p&gt;</comment>
                            <comment id="12775021" author="erikholstad@gmail.com" created="Mon, 9 Nov 2009 16:45:51 +0000"  >&lt;p&gt;@Andrew&lt;br/&gt;
I haven&apos;t worked on this for a little while, but they way I was thinking it is that the failed inserts gets returned separately from the successful once and that only the failed are retried.&lt;br/&gt;
If the code that you have looked at doesn&apos;t do that, it is wrong. &lt;/p&gt;

&lt;p&gt;About the write buffer I&apos;m not sure how we want to do, since I think that we are gong to be able to mix calls, get, puts and deletes in a single multi call, so we have to decide if this is something that makes sense and in that case maybe not use the write buffer. But like I said earlier, havn&apos;t looked at the code recently, so don&apos;t exactly remember. &lt;/p&gt;

&lt;p&gt;Erik&lt;/p&gt;</comment>
                            <comment id="12784027" author="ryanobjc" created="Tue, 1 Dec 2009 03:03:33 +0000"  >&lt;p&gt;Hey guys any update on this patch?  Should I beta test it and see if I can shake out and hopefully fix some bugs?&lt;/p&gt;</comment>
                            <comment id="12784631" author="erik_h" created="Wed, 2 Dec 2009 05:10:44 +0000"  >&lt;p&gt;@ Ryan!&lt;br/&gt;
Sorry that I haven&apos;t been to active on this, but have had some other stuff to work on.&lt;br/&gt;
But it would be great if you would test it out so I could get some feedback.&lt;/p&gt;</comment>
                            <comment id="12832086" author="mlimotte" created="Wed, 10 Feb 2010 17:30:47 +0000"  >&lt;p&gt;After some discussion with Jonathan, it seems that Erik is no longer actively working on this patch.  I&apos;d like to help out.&lt;/p&gt;

&lt;p&gt;So far, I&apos;ve updated the patch, so that it applies to hbase-0.20.3, and I&apos;ve expanded some of the unit tests.  I have not yet implemented the other comments in this ticket and there&apos;s still some other clean up to do.&lt;/p&gt;

&lt;p&gt;Also, I haven&apos;t looked in detail at &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2066&quot; title=&quot;Perf: parallelize puts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2066&quot;&gt;&lt;del&gt;HBASE-2066&lt;/del&gt;&lt;/a&gt;, but need to think about how it impacts this issue.  I&apos;m not sure, yet, but I don&apos;t think it&apos;s a replacement of the MultiPut functionality here.  &lt;/p&gt;
</comment>
                            <comment id="12832103" author="erik_h" created="Wed, 10 Feb 2010 18:04:37 +0000"  >&lt;p&gt;Marc, have at it, good luck and let me know if you have any questions.&lt;/p&gt;

&lt;p&gt;Erik&lt;/p&gt;</comment>
                            <comment id="12832114" author="ryanobjc" created="Wed, 10 Feb 2010 18:36:44 +0000"  >&lt;p&gt;this won&apos;t be able to go into 0.20 for the same reason 2066 cant - it requires a version bump in the RPC. Even adding methods changes the on-wire protocol alas.&lt;/p&gt;</comment>
                            <comment id="12832188" author="kaykay.unique" created="Wed, 10 Feb 2010 20:43:27 +0000"  >&lt;p&gt;To optimize puts - avoid the expensive array copy , that is currently done due to the limitation of the RPC.&lt;/p&gt;</comment>
                            <comment id="12832619" author="mlimotte" created="Thu, 11 Feb 2010 18:37:11 +0000"  >&lt;p&gt;Ryan, &lt;/p&gt;

&lt;p&gt;Good point.  Maybe there is time to get it into 0.21?&lt;/p&gt;</comment>
                            <comment id="12832620" author="stack" created="Thu, 11 Feb 2010 18:39:33 +0000"  >&lt;p&gt;Marc: I&apos;d aim for 0.21, yes.  Also, see hbase-2209 for more on what Kay Kay is on about.&lt;/p&gt;</comment>
                            <comment id="12839480" author="mlimotte" created="Sun, 28 Feb 2010 19:22:52 +0000"  >&lt;p&gt;Stack, thanks for the pointer on 2209.&lt;/p&gt;

&lt;p&gt;To shoot for 0.21, I should work against the trunk?  Or is there a separate branch for what will be 0.21?&lt;/p&gt;
</comment>
                            <comment id="12839548" author="ryanobjc" created="Mon, 1 Mar 2010 03:55:56 +0000"  >&lt;p&gt;you should work this against the branch for 0.20.4 - will will introduce &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2219&quot; title=&quot;stop using code mapping for method names in the RPC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2219&quot;&gt;&lt;del&gt;HBASE-2219&lt;/del&gt;&lt;/a&gt; to the branch and allow the addition of methods in patches from now on.  So aim for the branch and we can get it in for 0.20.4 - sounds good?&lt;/p&gt;</comment>
                            <comment id="12862083" author="mlimotte" created="Thu, 29 Apr 2010 04:11:52 +0000"  >&lt;p&gt;This is a completely new implementation of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1845&quot; title=&quot;MultiGet, MultiDelete, and MultiPut - batched to the appropriate region servers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1845&quot;&gt;&lt;del&gt;HBASE-1845&lt;/del&gt;&lt;/a&gt;, based on the work Ryan did for MultiPut (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2066&quot; title=&quot;Perf: parallelize puts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2066&quot;&gt;&lt;del&gt;HBASE-2066&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;I also applied a lot of the code from &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2421&quot; title=&quot;Put hangs for 10 retries on failed region servers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2421&quot;&gt;&lt;del&gt;HBASE-2421&lt;/del&gt;&lt;/a&gt;, which had a lot of useful improvements.&lt;/p&gt;

&lt;p&gt;The unit tests are in &quot;src/test/org/apache/hadoop/hbase/TestMultiParallel.java&quot;, which also replaces &quot;src/test/org/apache/hadoop/hbase/TestMultiParallelPut.java&quot;.  it includes a test with a forced failure of one RegionServer.&lt;/p&gt;

&lt;p&gt;I&apos;ve deprecated the old batch methods and made the implementations of those method call this new one.&lt;/p&gt;

</comment>
                            <comment id="12876134" author="hbasereviewboard" created="Mon, 7 Jun 2010 06:25:30 +0000"  >&lt;p&gt;Message from: &quot;Marc Limotte&quot; &amp;lt;mslimotte@gmail.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.hbase.org/r/151/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/151/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hbase.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Updated the patch to work on the trunk.  New unit tests are in TestMultiParallel.java, which replaces TestMultiParallelPut.java.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1845&quot; title=&quot;MultiGet, MultiDelete, and MultiPut - batched to the appropriate region servers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1845&quot;&gt;&lt;del&gt;HBASE-1845&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  &lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/Action.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/Action.java&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/Get.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/Get.java&lt;/a&gt; 951973 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnection.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnection.java&lt;/a&gt; 951973 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&lt;/a&gt; 951973 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HTable.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HTable.java&lt;/a&gt; 951973 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/MultiAction.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/MultiAction.java&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/MultiPut.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/MultiPut.java&lt;/a&gt; 951973 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/MultiPutResponse.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/MultiPutResponse.java&lt;/a&gt; 951973 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/MultiResponse.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/MultiResponse.java&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/Row.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/Row.java&lt;/a&gt; 951973 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/io/HbaseObjectWritable.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/io/HbaseObjectWritable.java&lt;/a&gt; 951973 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/ipc/HRegionInterface.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/ipc/HRegionInterface.java&lt;/a&gt; 951973 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/a&gt; 951973 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/test/java/org/apache/hadoop/hbase/TestMultiParallel.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/test/java/org/apache/hadoop/hbase/TestMultiParallel.java&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/test/java/org/apache/hadoop/hbase/TestMultiParallelPut.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/test/java/org/apache/hadoop/hbase/TestMultiParallelPut.java&lt;/a&gt; 951973 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;http://review.hbase.org/r/151/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/151/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Marc&lt;/p&gt;

</comment>
                            <comment id="12876558" author="hammer" created="Tue, 8 Jun 2010 06:14:00 +0000"  >&lt;p&gt;Hey,&lt;/p&gt;

&lt;p&gt;Forgive my ignorance, but how is a MultiGet different from a Scan with a filter? I suppose I understand from a query execution perspective, but it feels a bit odd to have different client APIs for grabbing multiple rows.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Jeff&lt;/p&gt;</comment>
                            <comment id="12876559" author="ryanobjc" created="Tue, 8 Jun 2010 06:19:41 +0000"  >&lt;p&gt;multi-get is more of a parallel random get, not like a scan at all.&lt;/p&gt;



&lt;p&gt;On Mon, Jun 7, 2010 at 11:14 PM, Jeff Hammerbacher (JIRA)&lt;/p&gt;
</comment>
                            <comment id="12876563" author="hammer" created="Tue, 8 Jun 2010 06:28:48 +0000"  >&lt;p&gt;As I mentioned, I see the difference in execution strategies, but it would be nice to have HBase take care of that for you depending on the selectivity of the Scan/MultiGet. As a concrete example, a FilterList full of RowFilters looks an awful lot like a MultiGet.&lt;/p&gt;</comment>
                            <comment id="12876698" author="mlimotte" created="Tue, 8 Jun 2010 15:24:54 +0000"  >&lt;p&gt;I think you&apos;re right that you could accomplish some of the same things with the Scan/Filter semantics.  Multi has a couple of additional capabilities.&lt;/p&gt;

&lt;p&gt;Scan is limited to one table.  Multi can do Gets from lots of different tables.  This applies to families or columns, too.&lt;/p&gt;

&lt;p&gt;Second, Multi lets you mix and match Get, Put and Delete.  It&apos;s not clear to me how often that will happen, but it&apos;s there.&lt;/p&gt;
</comment>
                            <comment id="12876701" author="stack" created="Tue, 8 Jun 2010 15:29:16 +0000"  >&lt;p&gt;.bq ...but how is a MultiGet different from a Scan with a filter? I suppose I understand from a query execution perspective, but it feels a bit odd to have different client APIs for grabbing multiple rows.&lt;/p&gt;

&lt;p&gt;MultiGet ia parallel fetching of many random rows.  For small numbers (hundreds/thousands?) itt should run faster than the (usually) single-threaded full table scan plus filter that only returns those rows that pass the filter.  There is an inflection point at which the scan becomes faster than MultiGet but you&apos;d have be returning a good percentage of the table for that to be the case.  Also, a filter to return some random set of the table content would have to carry all rows I believe, unless there is a pattern to the wanted row keys that you can extract; it&apos;d be pretty fat w/ payload.&lt;/p&gt;

&lt;p&gt;(&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1935&quot; title=&quot;Scan in parallel&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1935&quot;&gt;HBASE-1935&lt;/a&gt; is scanning in parallel.  It has a patch attached). &lt;/p&gt;</comment>
                            <comment id="12876705" author="streamy" created="Tue, 8 Jun 2010 15:49:00 +0000"  >&lt;p&gt;A parallel scan w/ filters &lt;em&gt;could&lt;/em&gt; be approaching the same performance as a MultiGet, but after we implement some performance features we still don&apos;t have.  As of now, we are not aggressive with re-seeking during a scan, we basically will always do full scans of all blocks even if we want to jump to the next row for example, we&apos;ll keep reading through the previous row.  See &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1517&quot; title=&quot;Implement inexpensive seek operations in HFile&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1517&quot;&gt;&lt;del&gt;HBASE-1517&lt;/del&gt;&lt;/a&gt; and stuff like &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2517&quot; title=&quot;During reads when passed the specified time range, seek to next column&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2517&quot;&gt;&lt;del&gt;HBASE-2517&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2450&quot; title=&quot;For single row reads of specific columns, seek to the first column in HFiles rather than start of row&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2450&quot;&gt;&lt;del&gt;HBASE-2450&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The second requirement would be adding more calls into filters to allow them to push-down seeking information.  For example, after every KV passed into the filter, there could be a call to ask if the scan should re-seek (return null if it needs to see every KV still, or return the KV to seek to if for example it knows it&apos;s done with the current row and it knows the next row it wants).&lt;/p&gt;

&lt;p&gt;So I think we will eventually get to the point where MultiGet and parallel scans with filters become virtually the same thing... but it&apos;s going to be a while.  I think keeping Gets around and adding MultiGet gives us an easy target for optimization and won&apos;t require adding further complexity to filters just yet.&lt;/p&gt;</comment>
                            <comment id="12898493" author="tsuna" created="Sat, 14 Aug 2010 01:09:20 +0000"  >&lt;p&gt;Hello,&lt;br/&gt;
I just became aware of this issue.  I haven&apos;t read all the comments and haven&apos;t looked at the patches yet, but I&apos;d like to draw your attention to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2898&quot; title=&quot;MultiPut makes proper error handling impossible and leads to corrupted data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2898&quot;&gt;&lt;del&gt;HBASE-2898&lt;/del&gt;&lt;/a&gt; and so you can make sure that whatever you do, you don&apos;t reproduce this issue.  It&apos;d be nice if this issue solved &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2898&quot; title=&quot;MultiPut makes proper error handling impossible and leads to corrupted data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2898&quot;&gt;&lt;del&gt;HBASE-2898&lt;/del&gt;&lt;/a&gt; as a side-effect of rewriting multiPut as part of the multi-everything code.  I&apos;ll take a look at the code proposed here when time permits.&lt;/p&gt;</comment>
                            <comment id="12898659" author="hbasereviewboard" created="Sun, 15 Aug 2010 03:18:46 +0000"  >&lt;p&gt;Message from: &quot;Benoit Sigoure&quot; &amp;lt;tsunanet@gmail.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.cloudera.org/r/151/#review905&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#review905&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;-1 overall.&lt;/p&gt;

&lt;p&gt;The good thing about this change is that it addresses a ~third of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2898&quot; title=&quot;MultiPut makes proper error handling impossible and leads to corrupted data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2898&quot;&gt;&lt;del&gt;HBASE-2898&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
The very bad thing about this change is that it generalizes the disease that started with MultiPut, which is described in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2898&quot; title=&quot;MultiPut makes proper error handling impossible and leads to corrupted data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2898&quot;&gt;&lt;del&gt;HBASE-2898&lt;/del&gt;&lt;/a&gt;.  I &lt;b&gt;really&lt;/b&gt; don&apos;t want &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2898&quot; title=&quot;MultiPut makes proper error handling impossible and leads to corrupted data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2898&quot;&gt;&lt;del&gt;HBASE-2898&lt;/del&gt;&lt;/a&gt; to spread like cancer.  I believe multi-everything is the way to go, but we need to change more things to also cure &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2898&quot; title=&quot;MultiPut makes proper error handling impossible and leads to corrupted data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2898&quot;&gt;&lt;del&gt;HBASE-2898&lt;/del&gt;&lt;/a&gt; instead of spreading it.&lt;/p&gt;

&lt;p&gt;The MultiResponse does the right thing in the sense that it gives us the result of each individual Action, instead of what the old MultiPutResponse does which is to give us the &quot;index&quot; of the first failed Put.  This is necessary but not sufficient.  When there&apos;s a failure for a particular Action, the client &lt;b&gt;needs&lt;/b&gt; to know what the failure was for this particular Action.  If it&apos;s a NoSuchColumnFamilyException, then the client should bail out immediately and escalate the exception to the user.  Other exceptions (like NotServingRegionException) can be handled by the client.  Maybe instead of storing a Result per Action, we could store an Object with is either a Result or an Exception.&lt;/p&gt;


&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/Action.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/Action.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment2944&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment2944&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Missing copyright header.&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/Action.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/Action.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment2946&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment2946&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Missing javadoc.&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/Action.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/Action.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment2945&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment2945&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Why is the `Row&apos; called `action&apos;?&lt;br/&gt;
    edit: Ah OK I get it, `Row&apos; is a very poorly named interface.  Ignore my comment.&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/Action.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/Action.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment2943&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment2943&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Kill ALL trailing whitespaces in all the files.&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/Action.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/Action.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment2973&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment2973&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    I don&apos;t like the fact that you have to store the original order of the `Action&apos; instances.  I understand you need to do this because the server sorts the actions, but I&apos;d be in favor of doing the sorting on the client side and removing this unnecessary complication.&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/Get.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/Get.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment2947&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment2947&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    why is the argument named `del&apos;?&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnection.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnection.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment2971&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment2971&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Please move the @return after all the @param.&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnection.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnection.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment2948&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment2948&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Please use the same style as in the rest of the file.&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnection.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnection.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment2969&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment2969&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    I don&apos;t see the point in doing that.&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnection.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnection.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment2970&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment2970&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    No spaces before the `[]&apos;.&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment2949&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment2949&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    No spaces inside parentheses.  Stick to the existing coding style.&lt;br/&gt;
    It doesn&apos;t seem necessary to cast `list&apos; to a `List&apos;.&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment2950&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment2950&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    This is not an IOException, it&apos;s an IllegalArgumentException.&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment2951&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment2951&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Instead of doing that, give `list&apos; in argument to the constructor of ArrayList, so that the list can be sized and constructed properly immediately.  This avoids an unnecessary array resize.&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment2952&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment2952&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Unnecessary parentheses on the RHS.&lt;br/&gt;
    Also this variable can be declared final.&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment2953&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment2953&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    This is bad.  Don&apos;t do that.&lt;br/&gt;
    Please read &lt;a href=&quot;http://www.ibm.com/developerworks/java/library/j-jtp05236.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.ibm.com/developerworks/java/library/j-jtp05236.html&lt;/a&gt;&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment2954&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment2954&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Missing spaces after the commas.&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment2955&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment2955&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Missing space after the comma.  Please fix all of those.&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment2956&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment2956&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Above you used just `Entry&apos;, here you use `Map.Entry&apos;.  Stick to one or the other.&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment2957&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment2957&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Missing spaces around the equal sign.&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment2958&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment2958&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    This is also improperly handling InterruptedException.  I realize the code was already wrong but since you&apos;re changing it, you may as well fix it.&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment2972&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment2972&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Remove the unnecessary cast to `DoNotRetryIOException&apos;.&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment2959&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment2959&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Missing spaces around `=&apos;, `&amp;lt;&apos; and after the last `;&apos;.&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment2960&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment2960&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Remove the extra spaces inside the parentheses and the unnecessary cast to a plain `List&apos;.&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HTable.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HTable.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment2961&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment2961&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Thanks for writing that javadoc.&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/MultiAction.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/MultiAction.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment2962&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment2962&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Technically, users won&apos;t use this class, so it doesn&apos;t need to be made `public&apos;.  Also, it could be marked as `final&apos;.&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/MultiAction.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/MultiAction.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment2963&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment2963&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Bad English: &quot;with the attempting to locate&quot;&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/MultiPut.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/MultiPut.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment2964&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment2964&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    When adding a deprecation warning, is it possible in Java to specify an arbitrary message to explain what should be used instead?  If not, then please at least mention that in the javadoc.&lt;br/&gt;
    This also holds true for MultiPutResponse below.&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment2965&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment2965&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Poorly named variable.  It&apos;s not a row, it&apos;s an action...&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment2966&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment2966&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    The fact that you have to introspect the type in order to know what to do makes me feel uneasy.  It shows that you&apos;re using the wrong interface for what you&apos;re trying to achieve.&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment2967&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment2967&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Don&apos;t throw an exception without a message describing why the exception was thrown.&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment2968&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment2968&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Remove this unnecessary line you added.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Benoit&lt;/li&gt;
&lt;/ul&gt;



</comment>
                            <comment id="12900810" author="hbasereviewboard" created="Fri, 20 Aug 2010 18:13:46 +0000"  >&lt;p&gt;Message from: &quot;Ted Yu&quot; &amp;lt;ted_yu@yahoo.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.cloudera.org/r/151/#review972&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#review972&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment3162&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment3162&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Should call get(long timeout, TimeUnit unit) so that we can process MultiResponse from other RS&lt;br/&gt;
    Should we introduce timeout for step 3?&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Ted&lt;/li&gt;
&lt;/ul&gt;



</comment>
                            <comment id="12904445" author="mlimotte" created="Tue, 31 Aug 2010 00:27:59 +0000"  >&lt;p&gt;Updated patch hbase-1845-trunk.patch.  Addresses the review board comments from benoit and Ted.  And updated to work with the current trunk.&lt;/p&gt;</comment>
                            <comment id="12904447" author="hbasereviewboard" created="Tue, 31 Aug 2010 00:31:10 +0000"  >&lt;p&gt;Message from: &quot;Marc Limotte&quot; &amp;lt;mslimotte@gmail.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.cloudera.org/r/151/#review1057&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#review1057&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/Get.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/Get.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment3362&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment3362&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    oversight.  fixed now.&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnection.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnection.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment3364&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment3364&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    fixed&lt;/p&gt;




&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnection.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnection.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment3363&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment3363&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    fixed&lt;/p&gt;




&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnection.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnection.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment3367&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment3367&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    i made the return type void instead.&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnection.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnection.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment3365&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment3365&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    fixed&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment3352&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment3352&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Fixing spaces.&lt;/p&gt;

&lt;p&gt;    Compile error without (List) cast: method processBatch(List&amp;lt;Row&amp;gt; ...) is not applicable for argument type ArrayList&amp;lt;Put&amp;gt;.&lt;/p&gt;





&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment3353&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment3353&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    fixed&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment3354&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment3354&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    fixed&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment3368&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment3368&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    I think the parens aid readability.&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment3355&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment3355&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    I have abort and maintain the thread interupted status now.&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment3369&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment3369&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    fixed&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment3356&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment3356&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    I added a 1000 ms timeout for the future.get.  Hope that is a reasonable time limit.  I still allow for a retry in this case.  Not confident this is the right behavior. &lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment3357&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment3357&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    fixed.  Sticking with Entry.&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment3358&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment3358&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    fixed&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment3359&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment3359&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    fixed, as above.&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment3360&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment3360&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Cast is necessary.  Otherwise method would have to declare itself as Throws Throwable (the return type of e.getCause()).&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment3361&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment3361&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    fixed&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HConnectionManager.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment3370&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment3370&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    spaces fixed&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/MultiAction.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/MultiAction.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment3371&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment3371&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    marked final, but needs to be public for use in HRegionInterface. &lt;/p&gt;




&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/MultiAction.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/MultiAction.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment3372&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment3372&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    thanks&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/MultiPut.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/MultiPut.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment3373&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment3373&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    fixed - message can go after @deprecated in javadoc&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment3374&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment3374&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    fixed&lt;/p&gt;




&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/151/#comment3375&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#comment3375&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Could refactor to add a &quot;doAction()&quot; method to each Action delegate? &lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Marc&lt;/li&gt;
&lt;/ul&gt;



</comment>
                            <comment id="12904448" author="mlimotte" created="Tue, 31 Aug 2010 00:31:39 +0000"  >&lt;p&gt;Note.  This patch doesn&apos;t address &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2898&quot; title=&quot;MultiPut makes proper error handling impossible and leads to corrupted data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2898&quot;&gt;&lt;del&gt;HBASE-2898&lt;/del&gt;&lt;/a&gt; yet.  Although I agree that &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2898&quot; title=&quot;MultiPut makes proper error handling impossible and leads to corrupted data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2898&quot;&gt;&lt;del&gt;HBASE-2898&lt;/del&gt;&lt;/a&gt; is a valid concern.&lt;/p&gt;</comment>
                            <comment id="12904726" author="ryanobjc" created="Tue, 31 Aug 2010 18:55:04 +0000"  >&lt;p&gt;committed this to trunk. Thanks for the contribution Marc!&lt;/p&gt;</comment>
                            <comment id="12904797" author="hbasereviewboard" created="Tue, 31 Aug 2010 22:18:51 +0000"  >&lt;p&gt;Message from: &quot;Ryan Rawson&quot; &amp;lt;ryanobjc@gmail.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.cloudera.org/r/151/#review1064&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/151/#review1064&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Ship it!&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Ryan&lt;/li&gt;
&lt;/ul&gt;



</comment>
                            <comment id="12904875" author="streamy" created="Wed, 1 Sep 2010 02:12:19 +0000"  >&lt;p&gt;Thanks for the great work, Marc!&lt;/p&gt;</comment>
                            <comment id="12904888" author="stack" created="Wed, 1 Sep 2010 03:30:57 +0000"  >&lt;p&gt;@Marc Thanks for persevering... how long was it since you put up your first patch?&lt;/p&gt;</comment>
                            <comment id="12905120" author="mlimotte" created="Wed, 1 Sep 2010 17:58:56 +0000"  >&lt;p&gt;Almost 9 months, Stack.  Do I get a tshirt?&lt;/p&gt;

&lt;p&gt;And thanks to everyone for their support.&lt;/p&gt;</comment>
                            <comment id="12905126" author="stack" created="Wed, 1 Sep 2010 18:15:36 +0000"  >&lt;blockquote&gt;&lt;p&gt;Do I get a tshirt?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Wrong project (&amp;lt;- injoke).&lt;/p&gt;

&lt;p&gt;If we do t-shirts, you first in line.&lt;/p&gt;</comment>
                            <comment id="12906073" author="lars_francke" created="Fri, 3 Sep 2010 20:38:34 +0000"  >&lt;p&gt;It seems as if the &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2692&quot; title=&quot;Master rewrite and cleanup for 0.90&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2692&quot;&gt;&lt;del&gt;HBASE-2692&lt;/del&gt;&lt;/a&gt; commit accidentally backed this out again: &lt;a href=&quot;http://github.com/apache/hbase/commit/be4c32c28d22ddaad78cd4ced9019ca0b3f5c83e&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://github.com/apache/hbase/commit/be4c32c28d22ddaad78cd4ced9019ca0b3f5c83e&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12906074" author="stack" created="Fri, 3 Sep 2010 20:40:31 +0000"  >&lt;p&gt;Looks like I messed up this commit w/ master rewrite patch; reopening till I fix it.&lt;/p&gt;</comment>
                            <comment id="12906217" author="stack" created="Sat, 4 Sep 2010 03:58:28 +0000"  >&lt;p&gt;Sorry about that Lars (and Marc).  Reapplied.&lt;/p&gt;</comment>
                            <comment id="12914767" author="stack" created="Sat, 25 Sep 2010 06:33:21 +0000"  >&lt;p&gt;Closing.  I reapplied the pieces of the patch squashed by new master commit a while back.&lt;/p&gt;</comment>
                            <comment id="12922385" author="ryanobjc" created="Tue, 19 Oct 2010 00:42:36 +0000"  >&lt;p&gt;an addition to this issue, the as-is unit test was testing the order of mixed-operations, in that they were applied in the order they were provided.  That is not realistic, especially if we want to implement &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2985&quot; title=&quot;HRegionServer.multi() no longer calls HRegion.put(List) when possible&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2985&quot;&gt;&lt;del&gt;HBASE-2985&lt;/del&gt;&lt;/a&gt;, which does the Puts last in 1 batch.  The regionserver should not be constrained to the most optimal order of operations by the API. &lt;/p&gt;</comment>
                            <comment id="12922437" author="stack" created="Tue, 19 Oct 2010 05:00:40 +0000"  >&lt;p&gt;@Ryan Want to open new issue to address?&lt;/p&gt;</comment>
                            <comment id="15017928" author="lars_francke" created="Fri, 20 Nov 2015 13:01:54 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12426953">HBASE-1476</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12440768">HBASE-1986</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12470753">HBASE-2898</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12443964">HBASE-2066</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12435909">HBASE-1849</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12465912">HBASE-2648</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12455856">HBASE-2208</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12441379">HBASE-2002</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12441373">HBASE-2000</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12443472">HBASE-2051</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12468651">HBASE-2814</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12435725">HBASE-1839</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12420037" name="batch.patch" size="36854" author="erikholstad@gmail.com" created="Fri, 18 Sep 2009 16:01:15 +0000"/>
                            <attachment id="12453480" name="hbase-1845-trunk.patch" size="68868" author="mlimotte" created="Tue, 31 Aug 2010 00:27:59 +0000"/>
                            <attachment id="12435470" name="hbase-1845_0.20.3.patch" size="38165" author="mlimotte" created="Wed, 10 Feb 2010 17:30:47 +0000"/>
                            <attachment id="12443159" name="hbase-1845_0.20.5.patch" size="65841" author="mlimotte" created="Thu, 29 Apr 2010 04:11:52 +0000"/>
                            <attachment id="12419915" name="multi-v1.patch" size="31394" author="erikholstad@gmail.com" created="Thu, 17 Sep 2009 18:59:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 18 Sep 2009 22:46:41 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32289</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hfl3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99787</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>