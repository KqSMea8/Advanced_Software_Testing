<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:13:46 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-10436/HBASE-10436.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-10436] restore regionserver lists removed from hbase 0.96+ jmx</title>
                <link>https://issues.apache.org/jira/browse/HBASE-10436</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;HBase 0.96&apos;s refactored jmx beans do not contain the master&apos;s list of dead region servers and live regionservers with load info.  HBase 0.94 did (though in a single monolithic blob).  &lt;/p&gt;

&lt;p&gt;This JMX interface should be considered as much of an API as the the normal wire or java api.  Dropping values from this was done without deprecation and the removal of this information is a functional regression.&lt;/p&gt;

&lt;p&gt;We should provide the information in the 0.96+ JMX.  HBase 0.94 had a  monolithic JMX blob (&quot;hadoop:service=Master,name=Master&quot;)  that contained a lot of information, including the regionserver list and the cached regionserver load for each region  found on the master webpage.  0.96+ refactored jmx this into several jmx beans which could be selectively retrieved.  These include:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;hadoop:service=HBase,name=Master,sub=AssignmentManager&lt;/li&gt;
	&lt;li&gt;hadoop:service=HBase,name=Master,sub=Balancer&lt;/li&gt;
	&lt;li&gt;hadoop:service=HBase,name=Master,sub=Server&lt;/li&gt;
	&lt;li&gt;hadoop:service=HBase,name=Master,sub=FileSystem&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Specifically the (Hadoop:service=HBase,name=Master,sub=Server) listing that used to contain regionservers and deadregionservers in jmx were replaced in   with numRegionServers and numDeadRegionservers which only contain counts.  &lt;/p&gt;

&lt;p&gt;I propose just adding another mbean called &quot;RegionServers&quot; under the bean: &quot;hadoop:service=HBase,name=Master,sub=RegionServers&quot;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12691941">HBASE-10436</key>
            <summary>restore regionserver lists removed from hbase 0.96+ jmx</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jmhsieh">Jonathan Hsieh</assignee>
                                    <reporter username="jmhsieh">Jonathan Hsieh</reporter>
                        <labels>
                    </labels>
                <created>Tue, 28 Jan 2014 23:52:55 +0000</created>
                <updated>Sat, 21 Feb 2015 23:33:02 +0000</updated>
                            <resolved>Wed, 26 Feb 2014 01:03:43 +0000</resolved>
                                    <version>0.98.0</version>
                    <version>0.96.0</version>
                    <version>0.99.0</version>
                                    <fixVersion>0.96.2</fixVersion>
                    <fixVersion>0.98.1</fixVersion>
                    <fixVersion>0.99.0</fixVersion>
                                    <component>metrics</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>12</watches>
                                                                <comments>
                            <comment id="13884930" author="jmhsieh" created="Wed, 29 Jan 2014 02:38:36 +0000"  >&lt;p&gt;Patch for trunk.&lt;/p&gt;</comment>
                            <comment id="13884932" author="jmhsieh" created="Wed, 29 Jan 2014 02:41:10 +0000"  >&lt;p&gt;here&apos;s a sample output if you look at hbasemaster/jmx&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  }, {
    &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;Hadoop:service=HBase,name=Master,sub=Server&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;modelerType&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;Master,sub=Server&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;tag.Context&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;master&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;tag.zookeeperQuorum&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;localhost:2181&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;tag.serverName&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;localhost,53655,1390950016536&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;tag.clusterId&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;3b5b95ba-315f-495d-9e08-08a9626ccb37&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;tag.isActiveMaster&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;tag.Context&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;master&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;tag.Hostname&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;swoop&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;masterActiveTime&quot;&lt;/span&gt; : 1390950018853,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;masterStartTime&quot;&lt;/span&gt; : 1390950018513,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;averageLoad&quot;&lt;/span&gt; : 3.0,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;numRegionServers&quot;&lt;/span&gt; : 1,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;numDeadRegionServers&quot;&lt;/span&gt; : 0,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;clusterRequests&quot;&lt;/span&gt; : 22172
  }, {
....
 }, {
    &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;hadoop:service=HBase,name=Master,sub=RegionServers&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;modelerType&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.hadoop.hbase.master.MasterRSTrackerMXBeanImpl&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;RegionServers&quot;&lt;/span&gt; : [ {
      &lt;span class=&quot;code-quote&quot;&gt;&quot;key&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;localhost,38682,1390950017735&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt; : {
        &lt;span class=&quot;code-quote&quot;&gt;&quot;currentCompactedKVs&quot;&lt;/span&gt; : 0,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;infoServerPort&quot;&lt;/span&gt; : 43366,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;load&quot;&lt;/span&gt; : 3,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;maxHeapMB&quot;&lt;/span&gt; : 966,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;memstoreSizeInMB&quot;&lt;/span&gt; : 0,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;numberOfRegions&quot;&lt;/span&gt; : 3,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;numberOfRequests&quot;&lt;/span&gt; : 0,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;readRequestsCount&quot;&lt;/span&gt; : 30,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;regionServerCoprocessors&quot;&lt;/span&gt; : [ ],
        &lt;span class=&quot;code-quote&quot;&gt;&quot;regionsLoad&quot;&lt;/span&gt; : [ {
          &lt;span class=&quot;code-quote&quot;&gt;&quot;key&quot;&lt;/span&gt; : [ 104, 98, 97, 115, 101, 58, 109, 101, 116, 97, 44, 44, 49 ],
          &lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt; : {
            &lt;span class=&quot;code-quote&quot;&gt;&quot;completeSequenceId&quot;&lt;/span&gt; : 19,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;currentCompactedKVs&quot;&lt;/span&gt; : 0,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;memStoreSizeMB&quot;&lt;/span&gt; : 0,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : [ 104, 98, 97, 115, 101, 58, 109, 101, 116, 97, 44, 44, 49 ],
            &lt;span class=&quot;code-quote&quot;&gt;&quot;nameAsString&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;hbase:meta,,1&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;readRequestsCount&quot;&lt;/span&gt; : 26,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;requestsCount&quot;&lt;/span&gt; : 28,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;rootIndexSizeKB&quot;&lt;/span&gt; : 0,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;storeUncompressedSizeMB&quot;&lt;/span&gt; : 0,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;storefileIndexSizeMB&quot;&lt;/span&gt; : 0,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;storefileSizeMB&quot;&lt;/span&gt; : 0,
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;here&apos;s what is in 0.94.x&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
, {
    &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;hadoop:service=Master,name=Master&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;modelerType&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.hadoop.hbase.master.MXBeanImpl&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;ZookeeperQuorum&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;localhost:2181&quot;&lt;/span&gt;,
  ....
   &lt;span class=&quot;code-quote&quot;&gt;&quot;RegionsInTransition&quot;&lt;/span&gt; : [ ],
    &lt;span class=&quot;code-quote&quot;&gt;&quot;RegionServers&quot;&lt;/span&gt; : [ {
      &lt;span class=&quot;code-quote&quot;&gt;&quot;key&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;localhost,48346,1390857257246&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt; : {
        &lt;span class=&quot;code-quote&quot;&gt;&quot;load&quot;&lt;/span&gt; : 2,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;maxHeapMB&quot;&lt;/span&gt; : 966,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;memStoreSizeInMB&quot;&lt;/span&gt; : 0,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;numberOfRegions&quot;&lt;/span&gt; : 2,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;numberOfRequests&quot;&lt;/span&gt; : 0,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;regionsLoad&quot;&lt;/span&gt; : [ {
          &lt;span class=&quot;code-quote&quot;&gt;&quot;key&quot;&lt;/span&gt; : [ 45, 82, 79, 79, 84, 45, 44, 44, 48 ],
          &lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt; : {
            &lt;span class=&quot;code-quote&quot;&gt;&quot;currentCompactedKVs&quot;&lt;/span&gt; : 0,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;memStoreSizeMB&quot;&lt;/span&gt; : 0,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : [ 45, 82, 79, 79, 84, 45, 44, 44, 48 ],
            &lt;span class=&quot;code-quote&quot;&gt;&quot;nameAsString&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;-ROOT-,,0&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;readRequestsCount&quot;&lt;/span&gt; : 24,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;requestsCount&quot;&lt;/span&gt; : 25,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;rootIndexSizeKB&quot;&lt;/span&gt; : 0,         
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13885074" author="hadoopqa" created="Wed, 29 Jan 2014 06:48:25 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12625770/hbase-10436.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12625770/hbase-10436.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12625770&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 @author&lt;/font&gt;.  The patch appears to contain 1 @author tags which the Hadoop community has agreed to not allow in code contributions.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.1&lt;/font&gt;.  The patch compiles against the hadoop 1.1 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.regionserver.TestHRegionBusyWait&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8547//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8547//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8547//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8547//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8547//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8547//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8547//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8547//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8547//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8547//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8547//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8547//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8547//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8547//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8547//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8547//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8547//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8547//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8547//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8547//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8547//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8547//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13885163" author="eclark" created="Wed, 29 Jan 2014 09:31:30 +0000"  >&lt;p&gt;First this patch only addresses jmx and not the actual metrics system. (See how the other HMaster metrics are exposed; Interfaces in hbase-hadoop-compat and implementations in hbase-hadoop1|2-compat)&lt;/p&gt;

&lt;p&gt;Secondly, This will synchronize on the online servers list everytime that JMX is polled.  That seems pretty onerous for exposing the list of region servers.  That api already exists; We should have one way of getting that list, not multiple.&lt;/p&gt;

&lt;p&gt;Thirdly I disagree that the metrics api should be treated like the user api.  It&apos;s not the same at all.  If the HTable interface changes then compatibility is broken and users aren&apos;t able to get or put data.  If the metrics interface changes then some charts aren&apos;t filled in.  Those seems very different to me.  Also there is no concept of deprecation with metrics.  That just isn&apos;t ever surfaced to users.  We told users the metrics would change very early in 0.95 so there was notice given in this case. If we can&apos;t make changes with 0.96 then it will be tough to ever iterate on these.&lt;/p&gt;

&lt;p&gt;Finally I feel that since metrics are very closely tied to the internals of HBase they should be treated as internal interfaces(limited private annotation equivalent).  For example:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;When/If we ever change to have lots of HLogs that will require metrics to change.&lt;/li&gt;
	&lt;li&gt;Changing the memstore to be all off heap will require re-working the metrics.&lt;/li&gt;
	&lt;li&gt;Different RPC servers will have very different metrics (different queues)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Change of the system shouldn&apos;t be held up because metrics will change.&lt;/p&gt;</comment>
                            <comment id="13885308" author="jmhsieh" created="Wed, 29 Jan 2014 12:55:18 +0000"  >&lt;blockquote&gt;&lt;p&gt;First this patch only addresses jmx and not the actual metrics system. (See how the other HMaster metrics are exposed; Interfaces in hbase-hadoop-compat and implementations in hbase-hadoop1|2-compat)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This is intentional and actually the point.  It is pretty clear from the JMX (java management extensions) documentation &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; that it is a &lt;b&gt;management&lt;/b&gt; interface - not just a &lt;b&gt;metrics&lt;/b&gt; interface.  It is intended to be a common interface for managing java services.  Services could be designed to accept input and provide information all via the JMX interface and could be designed (if facilities were provided) to manage and runtime configuration changes.&lt;/p&gt;

&lt;p&gt;I do agree that I should remove the word &quot;metrics&quot; from the jira name.  &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Secondly, This will synchronize on the online servers list everytime that JMX is polled. That seems pretty onerous for exposing the list of region servers. That api already exists; We should have one way of getting that list, not multiple.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Having separate jmx modules allows the user to selectively poll information and thus avoid any cost associated with gathering the online regionserver list &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;.  Furthermore, this is at the master and I contend that any synchronization would actually be fairly cheap &amp;#8211; I don&apos;t believe there is evidence that there is high contention on this online regionserver list.  This only retrieves info when polled - its is not a &quot;NotificationEmmitter&quot;.   If it was truly onerous, I would make the same argument that we shouldn&apos;t provide this info in the hbase master webpage and we dare not auto refresh the page (what a NotificationEmitter would do) because of the synchronization costs.  &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Thirdly I disagree that the metrics api should be treated like the user api.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;JMX is a management api protocol not just meant to server metrics.&lt;/p&gt;

&lt;p&gt;Do external programs plug into this api?  Does a user have to change code if the api changes?  yes. &lt;br/&gt;
Should users need to significantly modify their applications when deciding to upgrade?  ideally no.&lt;br/&gt;
There is a concept of versioning apis and metrics &amp;#8211; ideally we should have used that approach.  Instead for this transition our users would have to validate &quot;modelerType&quot; and &quot;name&quot; attributes. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;We told users the metrics would change very early in 0.95&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Removal is different is generally called out and not just a change.  We preserved functionality when we changed the signature of methods to use ServerName. We didn&apos;t change rowlocks, we removed them. &lt;/p&gt;

&lt;p&gt;Regarding the examples &amp;#8211; each hlog or memstore implementation would have a different bean.  The refactoring that split the metrics into separate beans was a really good thing &amp;#8211; I believe that IPC, memstore and hlog is already split out into separate jmx beans.  This split allows for different flavors with different implementations.  I would hope that there would be common attributes regardless of what kind of future hlogs come to be &amp;#8211; (# of kvs or waledits written will always be hlog concepts regardless of its implementation details).  &lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;  &lt;a href=&quot;http://docs.oracle.com/javase/tutorial/jmx/overview/index.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://docs.oracle.com/javase/tutorial/jmx/overview/index.html&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://docs.oracle.com/cd/E13222_01/wls/docs100/jmxinst/understanding.html#wp1100632&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://docs.oracle.com/cd/E13222_01/wls/docs100/jmxinst/understanding.html#wp1100632&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13885319" author="jmhsieh" created="Wed, 29 Jan 2014 13:09:40 +0000"  >&lt;blockquote&gt;&lt;p&gt;That api already exists; We should have one way of getting that list, not multiple.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;What is your suggestion on how to get this information?&lt;/p&gt;</comment>
                            <comment id="13885479" author="jmhsieh" created="Wed, 29 Jan 2014 16:23:49 +0000"  >&lt;p&gt;v2 updates some comments and removes the @author that snuck in.&lt;/p&gt;</comment>
                            <comment id="13885607" author="hadoopqa" created="Wed, 29 Jan 2014 18:15:24 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12625891/hbase-10436.v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12625891/hbase-10436.v2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12625891&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.1&lt;/font&gt;.  The patch compiles against the hadoop 1.1 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8552//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8552//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8552//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8552//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8552//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8552//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8552//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8552//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8552//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8552//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8552//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8552//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8552//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8552//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8552//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8552//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8552//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8552//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8552//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8552//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8552//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8552//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13885653" author="eclark" created="Wed, 29 Jan 2014 18:58:03 +0000"  >&lt;blockquote&gt;&lt;p&gt;This is intentional and actually the point. It is pretty clear from the JMX (java management extensions) documentation &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; that it is a management interface - not just a metrics interface. It is intended to be a common interface for managing java services. Services could be designed to accept input and provide information all via the JMX interface and could be designed (if facilities were provided) to manage and runtime configuration changes.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Why would you want some of the metrics to be accessible though the hadoop metrics system and not others ?  People are using the hadoop sinks to get this information.  I&apos;m -1 on not being consistent. A ton of work was done to make the metrics regular and all exposed through the new hadoop metrics2 system. The hadoop metrics system will expose all of this through jmx and will also expose it to the sinks plugins.  In my opinion if this functionality was really wanted (and I&apos;m not convinced that it is) it should be as a single source that isn&apos;t registered at all unless a configuration is set.  And we should deprecate exposing anything but master metrics through the master.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Having separate jmx modules allows the user to selectively poll information and thus avoid any cost associated with gathering the online regionserver list &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;. Furthermore, this is at the master and I contend that any synchronization would actually be fairly cheap &#8211; I don&apos;t believe there is evidence that there is high contention on this online regionserver list. This only retrieves info when polled - its is not a &quot;NotificationEmmitter&quot;. If it was truly onerous, I would make the same argument that we shouldn&apos;t provide this info in the hbase master webpage and we dare not auto refresh the page (what a NotificationEmitter would do) because of the synchronization costs.&lt;/p&gt;&lt;/blockquote&gt;


&lt;p&gt;If someone is connected to the JMX port the info is usually polled and streamed (see opentsdb&apos;s implementation of jmx polling).  Meaning that every few seconds the online region servers will be locked and copy of the collection will be made.  I would contend that having the web page show it once is very different from somehting that will be know to poll every second.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;JMX is a management api protocol not just meant to server metrics.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;HBase has never used it as more than just another way to get metrics.  We shouldn&apos;t start now.  This patch doesn&apos;t expose that so I don&apos;t understand bringing it up at all.&lt;/p&gt;


&lt;blockquote&gt;
&lt;p&gt;Do external programs plug into this api? Does a user have to change code if the api changes? yes. &lt;br/&gt;
Should users need to significantly modify their applications when deciding to upgrade? ideally no.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;By your definitions the log messages emitted from log4j can&apos;t be changed if monitoring system is tailing the logs.  I think your criteria are way too loose. Monitoring a service by is less important than using a service and so the metrics and things used by monitoring should have a lower bar.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Regarding the examples &#8211; each hlog or memstore implementation would have a different bean&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;But then the unused beans would either need to be removed or worse would emit wrong metrics.  Hence anyone monitoring the beans will need to change their monitoring code. It&apos;s way too onerous to expect that everything that exposes a metric must always expose that metric.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;What is your suggestion on how to get this information?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Every RegionServer already exposes all of this information.&lt;/p&gt;</comment>
                            <comment id="13885730" author="jmhsieh" created="Wed, 29 Jan 2014 20:02:06 +0000"  >&lt;blockquote&gt;&lt;p&gt;Why would you want some of the metrics to be accessible though the hadoop metrics system and not others ?   People are using the hadoop sinks to get this information. I&apos;m -1 on not being consistent.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;In an offline conversation, you mentioned that the hadoop/hbase metrics should only have numerical values (aka, only numerical values are metrics).  In HBase, this is an undocumented invariant &amp;#8211; it is not in the jira discussion around the &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4050&quot; title=&quot;Update HBase metrics framework to metrics2 framework&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4050&quot;&gt;&lt;del&gt;HBASE-4050&lt;/del&gt;&lt;/a&gt; new metrics umbrella; nor &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6411&quot; title=&quot;Move Master Metrics to metrics 2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6411&quot;&gt;&lt;del&gt;HBASE-6411&lt;/del&gt;&lt;/a&gt;, the patch that acutally change behavior; nor from dev list discussion around 10/jul/2012 &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; when this went in.  &lt;/p&gt;

&lt;p&gt;I buy the general argument about metrics &amp;#8211; the old master&apos;s regionservers data is presented by jmx but isn&apos;t usable by other metrics consumers like ganglia as implemented in 0.94.   This is because they were organized with non-numerical information.  That part of the newer metrics regime makes sense.&lt;/p&gt;

&lt;p&gt;By not including non-numerical information like the list of live servers and dead servers in the metrics, the approach I&apos;m taking is consistent with the rule above.  Since your contention there was this did not only contain numerical data (this info is not metrics), I chose an approach to restore this info bypassing the metrics system and only plugging them directly into the jmx management interface.  This seems consistent to me.&lt;/p&gt;

&lt;p&gt;These lists are completely valid to have in a management interface like JMX.  (if you look you&apos;ll see java classpaths and command line args lists in other jmx beans).  Moreover, this info was presented in the past by the JMX management interface and still is a functional regression.  &lt;/p&gt;

&lt;p&gt;To further solidify the JMX mechanism, I can do another version of the next patch that add unit tests to codify JMX interface names and make it more obvious when compatibility is being broken.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;A ton of work was done to make the metrics regular and all exposed through the new hadoop metrics2 system.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;And we love you for it. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;The hadoop metrics system will expose all of this through jmx and will also expose it to the sinks plugins.  In my opinion if this functionality was really wanted (and I&apos;m not convinced that it is) it should be as a single source that isn&apos;t registered at all unless a configuration is set. And we should deprecate exposing anything but master metrics through the master.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Metrics are exposed via JMX but other things and can be exposed via JMX as well. These lists are in the &quot;other things&quot; category.&lt;/p&gt;

&lt;p&gt;I can definitely tell you that &quot;this functionality was really wanted&quot; &amp;#8211; I have a support customer who upgraded to 0.96.1.1 and is asking for this feature back. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;

&lt;p&gt;I&apos;m not sure I&apos;m parsing the last two sentences correctly &amp;#8211; are you saying if I added a conf setting to optionally make the new bean with restored data not show up you&apos;d be ok?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;By your definitions the log messages emitted from log4j can&apos;t be changed if monitoring system is tailing the logs. I think your criteria are way too loose. Monitoring a service by is less important than using a service and so the metrics and things used by monitoring should have a lower bar.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Logs are meant to be consumed directly by humans, and there is an understanding that they will change between versions.  Logs, like the the web ui, are not interfaces that are meant to be consumed by machines.  JMX, like a rest interface or code api, is a managment interface and meant to be consumed by machines.  Thus we should ideally maintain compatibility and  feature parity.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;But then the unused beans would either need to be removed or worse would emit wrong metrics. Hence anyone monitoring the beans will need to change their monitoring code. It&apos;s way too onerous to expect that everything that exposes a metric must always expose that metric.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The unused bean shouldn&apos;t be present.  I haven&apos;t dug into the hadoop metrics part in depth yet but i would think that if you chose different implementations of hlogs or memstores certain beans would show up and others would not.  To change this today we&apos;d need to restart the server.  (e.g. we have a WAL metric bean, but maybe we&apos;d have a multiwal bean &amp;#8211; which would potentially need a RS restart to activate).&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Every RegionServer already exposes all of this information.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;How do I get the list of regionservers?  That list should at the least be exposed so that a program that points to the master&apos;s jmx can go to the regionservers. no?  Its sort of the point of the management interface to provide this info.&lt;/p&gt;

&lt;p&gt;Is the contention that the rs list also contains metrics and other numerical things?  Would removing the numbers be sufficient? (just having the list of regionservers and regions)&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/hbase-dev/201207.mbox/thread&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://mail-archives.apache.org/mod_mbox/hbase-dev/201207.mbox/thread&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13885818" author="lhofhansl" created="Wed, 29 Jan 2014 21:12:25 +0000"  >&lt;p&gt;Tangentially related. I just submitted a patch to the OpenTSDB tcollector framework, to make it work with 0.96+ HBase metrics.&lt;/p&gt;</comment>
                            <comment id="13885839" author="eclark" created="Wed, 29 Jan 2014 21:33:43 +0000"  >&lt;p&gt;I&apos;m -1 any patch that goes directly to JMX to expose data.&lt;br/&gt;
I&apos;m also -1 any patch that adds back in any locks into the metrics by default.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Metrics are exposed via JMX but other things and can be exposed via JMX as well.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;But you&apos;re not exposing anything that the hadoop metrics system can&apos;t export.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I&apos;m not sure I&apos;m parsing the last two sentences correctly &#8211; are you saying if I added a conf setting to optionally make the new bean with restored data not show up you&apos;d be ok?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sources are things in metrics2 that expose data.  If you don&apos;t register a source they aren&apos;t available and are never polled. So I&apos;m saying that if you add a source that only registers itself with metrics2 if the user asks for it then it seems better.  Also this functionality should be deprecated as soon as it goes in.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;How do I get the list of regionservers?&lt;/p&gt;&lt;/blockquote&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;cat $HBASE_HOME/conf/regionservers&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/apache/hbase/blob/trunk/conf/regionservers&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hbase/blob/trunk/conf/regionservers&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Tangentially related. I just submitted a patch to the OpenTSDB tcollector framework, to make it work with 0.96+ HBase metrics.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I did too but mine was pretty invasive.  Lets hope that yours gets more love.&lt;/p&gt;

</comment>
                            <comment id="13885949" author="lhofhansl" created="Wed, 29 Jan 2014 22:54:37 +0000"  >&lt;p&gt;&lt;tt&gt;$HBASE_HOME/conf/regionservers&lt;/tt&gt; does not contain the actual set of regionserver (alive or dead), just the configured ones.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I did too but mine was pretty invasive. Lets hope that yours gets more love&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Benoit pulled it already. Mine was very simple (&lt;a href=&quot;https://github.com/OpenTSDB/tcollector/pull/131&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/OpenTSDB/tcollector/pull/131&lt;/a&gt;) and it works with 0.94 and 0.96+. Needs to test replication still.&lt;/p&gt;

&lt;p&gt;As for this issue. Could you suggest a simple approach/patch that exposes the set of current (alive and dead) RSs through metrics2? I do not think anybody is opposed to doing that if it can be easily done.&lt;/p&gt;</comment>
                            <comment id="13886025" author="jmhsieh" created="Wed, 29 Jan 2014 23:53:18 +0000"  >
&lt;blockquote&gt;&lt;p&gt;I&apos;m -1 any patch that goes directly to JMX to expose data.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;By your definitions here &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; the list of regionservers and dead regionservers are not a metrics.  (it is not a measurement) You also define JMX as a system that &quot;includes the ability to expose metrics&quot; which implies it is not just limited to exposing metrics.  &lt;/p&gt;

&lt;p&gt;From my point of view, this is a functional regression and it is a potential blocker for further releases.  &lt;/p&gt;

&lt;p&gt;If you disapprove sending non-metrics to the hadoop metrics system, and you disapprove of directly to JMX, you need to give me a reasonable alternative.  How shall we expose non-metrics via JMX? Saying we cannot is not reasonable so please suggest a viable mechanism.  &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I&apos;m also -1 any patch that adds back in any locks into the metrics by default.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;For the master, this seems a bit extreme.  There is one lock and it isn&apos;t even in a performance critical portion of hbase.  This is in the master in a place that is idle most of the time.  We make exactly the same call in the web ui here &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; and eventually traverse the structure &lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt; which is extremely similar to the MasterRSTrackerMXBean I present in the patch.  Both approaches take one lock here &lt;span class=&quot;error&quot;&gt;&amp;#91;4&amp;#93;&lt;/span&gt; to copy the current servername serverload map. Nothing else in this path takes a lock.  This can only block the addition removal or interrogation of the current live server list.  I doubt there is much contention here at all (we didn&apos;t even bother to optimize it to us one of the concurrent maps).  &lt;/p&gt;

&lt;p&gt;Are you really suggesting that we should we tell users not to refresh the master ui because it can cause performance hits on the master? &lt;/p&gt;

&lt;p&gt;This sounds like a reasonable invariant for the more perf critical parts of hbase.  If we want to maintain it please document it in the code or provide link to these requirments.  This isn&apos;t mentioned in the design docs or blog post &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; you did.  &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;But you&apos;re not exposing anything that the hadoop metrics system can&apos;t export.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;So are you saying I should expose it via the metrics even though it is non-numeric data?  If thats what you want I can do that.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Sources are things in metrics2 that expose data. If you don&apos;t register a source they aren&apos;t available and are never polled. So I&apos;m saying that if you add a source that only registers itself with metrics2 if the user asks for it then it seems better. Also this functionality should be deprecated as soon as it goes in.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;So is there a metrics-are-numeric-values-only rule? Or is it now ok to expose non-numeric values via this interface?  We expose the non-numeric zk quorum list in metrics and jmx &amp;#8211; should we remove that too to be consistent?  Sounds like another functional regression to me.&lt;/p&gt;

&lt;p&gt;Why should these formerly exposed values go in as deprecated? &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
cat $HBASE_HOME/conf/regionservers
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Insufficient.  Does not work with deployments with multiple regionservers present on each physical node (which is the case I&apos;m looking at). Pinging the list to see which are live and which are dead is unacceptable. (takes too long). Spawning another process to pull this information is more expensive than taking a single lock. Please give another suggestion.  &lt;/p&gt;

&lt;p&gt;Unanswered questions:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Are you saying if I added a conf setting to optionally make the new bean with restored data not show up you&apos;d be ok?&lt;/li&gt;
	&lt;li&gt;Would this be as contentious if we just dumped only the live and dead regionserver list (and non of the master&apos;s cached load info)?  If I did this and their regions without any of the numeric values associated with the regions and rs&apos;s?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://blogs.apache.org/hbase/entry/migration_to_the_new_metrics&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://blogs.apache.org/hbase/entry/migration_to_the_new_metrics&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/hbase/blob/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/MasterStatusServlet.java#L72&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hbase/blob/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/MasterStatusServlet.java#L72&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/hbase/blob/trunk/hbase-server/src/main/jamon/org/apache/hadoop/hbase/tmpl/master/RegionServerListTmpl.jamon#L90&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hbase/blob/trunk/hbase-server/src/main/jamon/org/apache/hadoop/hbase/tmpl/master/RegionServerListTmpl.jamon#L90&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;4&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/hbase/blob/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/ServerManager.java#L419&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hbase/blob/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/ServerManager.java#L419&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13896133" author="jmhsieh" created="Mon, 10 Feb 2014 01:04:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt; still waiting for responses here.&lt;/p&gt;

&lt;p&gt;I&apos;ve atttached another version, hbase-10436.notbean.patch, includes a version that goes through the newer metrics system.  It takes the exact same locks that the current numRegionServers metric takes, and presents data in a less friendly manner than the original patches.&lt;/p&gt;</comment>
                            <comment id="13896158" author="jmhsieh" created="Mon, 10 Feb 2014 01:59:35 +0000"  >&lt;p&gt;here&apos;s how it looks in the jmx&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 {
    &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;Hadoop:service=HBase,name=Master,sub=Server&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;modelerType&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;Master,sub=Server&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;tag.Context&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;master&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;tag.liveRegionServers&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;localhost,56196,1391992019130&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;tag.deadRegionServers&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;localhost,40010,1391035309673;localhost,41408,1391990380724;localhost,38682,1390950017735&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;tag.zookeeperQuorum&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;localhost:2181&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;tag.serverName&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;localhost,37288,1391992016212&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;tag.clusterId&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;3b5b95ba-315f-495d-9e08-08a9626ccb37&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;tag.isActiveMaster&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;tag.Context&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;master&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;tag.Hostname&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;swoop&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;masterActiveTime&quot;&lt;/span&gt; : 1391992021835,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;masterStartTime&quot;&lt;/span&gt; : 1391992020960,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;averageLoad&quot;&lt;/span&gt; : 3.0,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;numRegionServers&quot;&lt;/span&gt; : 1,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;numDeadRegionServers&quot;&lt;/span&gt; : 3,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;clusterRequests&quot;&lt;/span&gt; : 103248
  }, 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note that numRegionServers and numDeadRegionsrevers both take the exact same locks &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; as the previous implementation I posted in the core metrics path.  Not sure why it isn&apos;t an issue with those values and why it is an issue with the new ones.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/hbase/blob/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/MetricsMasterWrapperImpl.java#L76&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hbase/blob/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/MetricsMasterWrapperImpl.java#L76&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/hbase/blob/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/ServerManager.java#L419&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hbase/blob/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/ServerManager.java#L419&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13896176" author="hadoopqa" created="Mon, 10 Feb 2014 02:44:39 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12627906/hbase-10436.notbean.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12627906/hbase-10436.notbean.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12627906&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.1&lt;/font&gt;.  The patch compiles against the hadoop 1.1 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 site&lt;/font&gt;.  The patch appears to cause mvn site goal to fail.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8646//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8646//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8646//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8646//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8646//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8646//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8646//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8646//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8646//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8646//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8646//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8646//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8646//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8646//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8646//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8646//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8646//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8646//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8646//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8646//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8646//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8646//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13906675" author="jmhsieh" created="Thu, 20 Feb 2014 06:47:30 +0000"  >&lt;p&gt;ping.  Anyone want to review this for me? &lt;/p&gt;</comment>
                            <comment id="13906736" author="eclark" created="Thu, 20 Feb 2014 08:02:07 +0000"  >&lt;p&gt;+1 hbase-10436.notbean.patch&lt;/p&gt;</comment>
                            <comment id="13912288" author="jmhsieh" created="Wed, 26 Feb 2014 00:02:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; I plan on committing to trunk/0.98/0.96 since this was a functional regression.&lt;/p&gt;</comment>
                            <comment id="13912290" author="apurtell" created="Wed, 26 Feb 2014 00:05:50 +0000"  >&lt;blockquote&gt;&lt;p&gt;I plan on committing to trunk/0.98/0.96 since this was a functional regression.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1 here. Release note, please.&lt;/p&gt;</comment>
                            <comment id="13912356" author="jmhsieh" created="Wed, 26 Feb 2014 01:03:43 +0000"  >&lt;p&gt;Committed to 0.96/0.98/trunk.&lt;/p&gt;</comment>
                            <comment id="13912537" author="hudson" created="Wed, 26 Feb 2014 05:30:31 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98 #185 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/185/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/185/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10436&quot; title=&quot;restore regionserver lists removed from hbase 0.96+ jmx&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10436&quot;&gt;&lt;del&gt;HBASE-10436&lt;/del&gt;&lt;/a&gt; restore regionserver lists removed from hbase 0.96.0 jmx (jmhsieh: rev 1571889)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-hadoop-compat/src/main/java/org/apache/hadoop/hbase/master/MetricsMasterSource.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-hadoop-compat/src/main/java/org/apache/hadoop/hbase/master/MetricsMasterWrapper.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-hadoop1-compat/src/main/java/org/apache/hadoop/hbase/master/MetricsMasterSourceImpl.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-hadoop2-compat/src/main/java/org/apache/hadoop/hbase/master/MetricsMasterSourceImpl.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-server/src/main/java/org/apache/hadoop/hbase/master/MetricsMasterWrapperImpl.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestMasterMetricsWrapper.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13912546" author="hudson" created="Wed, 26 Feb 2014 05:48:12 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #4955 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4955/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4955/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10436&quot; title=&quot;restore regionserver lists removed from hbase 0.96+ jmx&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10436&quot;&gt;&lt;del&gt;HBASE-10436&lt;/del&gt;&lt;/a&gt; restore regionserver lists removed from hbase 0.96.0 jmx (jmhsieh: rev 1571887)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-hadoop-compat/src/main/java/org/apache/hadoop/hbase/master/MetricsMasterSource.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-hadoop-compat/src/main/java/org/apache/hadoop/hbase/master/MetricsMasterWrapper.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-hadoop1-compat/src/main/java/org/apache/hadoop/hbase/master/MetricsMasterSourceImpl.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-hadoop2-compat/src/main/java/org/apache/hadoop/hbase/master/MetricsMasterSourceImpl.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/MetricsMasterWrapperImpl.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestMasterMetricsWrapper.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13912558" author="hudson" created="Wed, 26 Feb 2014 06:10:28 +0000"  >&lt;p&gt;FAILURE: Integrated in hbase-0.96 #315 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.96/315/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.96/315/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10436&quot; title=&quot;restore regionserver lists removed from hbase 0.96+ jmx&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10436&quot;&gt;&lt;del&gt;HBASE-10436&lt;/del&gt;&lt;/a&gt; restore regionserver lists removed from hbase 0.96.0 jmx (jmhsieh: rev 1571888)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-hadoop-compat/src/main/java/org/apache/hadoop/hbase/master/MetricsMasterSource.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-hadoop-compat/src/main/java/org/apache/hadoop/hbase/master/MetricsMasterWrapper.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-hadoop1-compat/src/main/java/org/apache/hadoop/hbase/master/MetricsMasterSourceImpl.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-hadoop2-compat/src/main/java/org/apache/hadoop/hbase/master/MetricsMasterSourceImpl.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/main/java/org/apache/hadoop/hbase/master/MetricsMasterWrapperImpl.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestMasterMetricsWrapper.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13912561" author="hudson" created="Wed, 26 Feb 2014 06:14:50 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98-on-Hadoop-1.1 #173 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/173/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/173/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10436&quot; title=&quot;restore regionserver lists removed from hbase 0.96+ jmx&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10436&quot;&gt;&lt;del&gt;HBASE-10436&lt;/del&gt;&lt;/a&gt; restore regionserver lists removed from hbase 0.96.0 jmx (jmhsieh: rev 1571889)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-hadoop-compat/src/main/java/org/apache/hadoop/hbase/master/MetricsMasterSource.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-hadoop-compat/src/main/java/org/apache/hadoop/hbase/master/MetricsMasterWrapper.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-hadoop1-compat/src/main/java/org/apache/hadoop/hbase/master/MetricsMasterSourceImpl.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-hadoop2-compat/src/main/java/org/apache/hadoop/hbase/master/MetricsMasterSourceImpl.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-server/src/main/java/org/apache/hadoop/hbase/master/MetricsMasterWrapperImpl.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestMasterMetricsWrapper.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13912829" author="hudson" created="Wed, 26 Feb 2014 12:48:58 +0000"  >&lt;p&gt;SUCCESS: Integrated in hbase-0.96-hadoop2 #217 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.96-hadoop2/217/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.96-hadoop2/217/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10436&quot; title=&quot;restore regionserver lists removed from hbase 0.96+ jmx&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10436&quot;&gt;&lt;del&gt;HBASE-10436&lt;/del&gt;&lt;/a&gt; restore regionserver lists removed from hbase 0.96.0 jmx (jmhsieh: rev 1571888)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-hadoop-compat/src/main/java/org/apache/hadoop/hbase/master/MetricsMasterSource.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-hadoop-compat/src/main/java/org/apache/hadoop/hbase/master/MetricsMasterWrapper.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-hadoop1-compat/src/main/java/org/apache/hadoop/hbase/master/MetricsMasterSourceImpl.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-hadoop2-compat/src/main/java/org/apache/hadoop/hbase/master/MetricsMasterSourceImpl.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/main/java/org/apache/hadoop/hbase/master/MetricsMasterWrapperImpl.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestMasterMetricsWrapper.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13913965" author="hudson" created="Thu, 27 Feb 2014 02:39:43 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK-on-Hadoop-1.1 #100 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-1.1/100/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-1.1/100/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10436&quot; title=&quot;restore regionserver lists removed from hbase 0.96+ jmx&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10436&quot;&gt;&lt;del&gt;HBASE-10436&lt;/del&gt;&lt;/a&gt; restore regionserver lists removed from hbase 0.96.0 jmx (jmhsieh: rev 1571887)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-hadoop-compat/src/main/java/org/apache/hadoop/hbase/master/MetricsMasterSource.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-hadoop-compat/src/main/java/org/apache/hadoop/hbase/master/MetricsMasterWrapper.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-hadoop1-compat/src/main/java/org/apache/hadoop/hbase/master/MetricsMasterSourceImpl.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-hadoop2-compat/src/main/java/org/apache/hadoop/hbase/master/MetricsMasterSourceImpl.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/MetricsMasterWrapperImpl.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestMasterMetricsWrapper.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14331042" author="enis" created="Sat, 21 Feb 2015 23:33:02 +0000"  >&lt;p&gt;Closing this issue after 0.99.0 release. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12627906" name="hbase-10436.notbean.patch" size="10531" author="jmhsieh" created="Mon, 10 Feb 2014 01:04:19 +0000"/>
                            <attachment id="12625770" name="hbase-10436.patch" size="6680" author="jmhsieh" created="Wed, 29 Jan 2014 02:38:36 +0000"/>
                            <attachment id="12625891" name="hbase-10436.v2.patch" size="6650" author="jmhsieh" created="Wed, 29 Jan 2014 16:23:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 29 Jan 2014 06:48:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>370531</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1rv13:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>370841</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Many of the metrics exposed in 0.94 were removed with the refactorization of metrics in 0.96.  This patch restores the availability of the live and dead regionserver lists.  In 0.94 this used to be found as a large nested structure which included regionserver lists and metrics from each region. &lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;{&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;quot;name&amp;quot; : &amp;quot;hadoop:service=Master,name=Master&amp;quot;,&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;quot;modelerType&amp;quot; : &amp;quot;org.apache.hadoop.hbase.master.MXBeanImpl&amp;quot;,&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;quot;ZookeeperQuorum&amp;quot; : &amp;quot;localhost:2181&amp;quot;,&lt;br/&gt;
&amp;nbsp;&amp;nbsp;....&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;quot;RegionsInTransition&amp;quot; : [ ],&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;quot;RegionServers&amp;quot; : [ {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;quot;key&amp;quot; : &amp;quot;localhost,48346,1390857257246&amp;quot;,&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;quot;value&amp;quot; : {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;quot;load&amp;quot; : 2,&lt;br/&gt;
....&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br/&gt;
In 0.96.0, 0.96.1.x and 0.98.0 did not contain this list -- it only contained counts of the number of live and dead regionservers.  After this patch, the list are present in a &amp;#39;;&amp;#39; separated field like so:&lt;br/&gt;
&lt;br/&gt;
{&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;quot;name&amp;quot; : &amp;quot;Hadoop:service=HBase,name=Master,sub=Server&amp;quot;,&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;quot;modelerType&amp;quot; : &amp;quot;Master,sub=Server&amp;quot;,&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;quot;tag.Context&amp;quot; : &amp;quot;master&amp;quot;,&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;quot;tag.liveRegionServers&amp;quot; : &amp;quot;localhost,56196,1391992019130&amp;quot;,&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;quot;tag.deadRegionServers&amp;quot; : &amp;quot;localhost,40010,1391035309673;localhost,41408,1391990380724;localhost,38682,1390950017735&amp;quot;,&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;...&lt;br/&gt;
}</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>