<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:03:02 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-2579/HBASE-2579.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-2579] Add atomic checkAndDelete support</title>
                <link>https://issues.apache.org/jira/browse/HBASE-2579</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Currently HBase has support for atomic checkAndPut operations on individual rows. It would be very useful to also support atomic checkAndDelete. I have added support for atomic checkAndDelete to trunk and will provide the corresponding patch tonight after I merge in any upstream changes from the last few days.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12464977">HBASE-2579</key>
            <summary>Add atomic checkAndDelete support</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mwdalton">Michael Dalton</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 May 2010 00:19:47 +0000</created>
                <updated>Fri, 20 Nov 2015 12:44:12 +0000</updated>
                            <resolved>Wed, 2 Jun 2010 20:06:22 +0000</resolved>
                                                    <fixVersion>0.90.0</fixVersion>
                                    <component>regionserver</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="12869426" author="mwdalton" created="Thu, 20 May 2010 00:37:23 +0000"  >&lt;p&gt;Here is a patch with support for checkAndDelete. I have updated TestHRegion to provide tests for checkAndDelete in addition to its existing tests for checkAndPut.&lt;/p&gt;</comment>
                            <comment id="12869540" author="mwdalton" created="Thu, 20 May 2010 09:39:50 +0000"  >&lt;p&gt;Woops &amp;#8211; previous patch was built against trunk &lt;em&gt;before&lt;/em&gt; the May 18 SVN move (from asf/repos/hadoop/hbase to asf/repos/hbase). Patch updated to actually reflect current trunk.&lt;/p&gt;</comment>
                            <comment id="12871050" author="mwdalton" created="Tue, 25 May 2010 08:25:08 +0000"  >&lt;p&gt;Could someone please take a look at this when they get a chance? This seems like a relatively uncontroversial patch that filled an existing need when I discussed it on hbase-user a few weeks go.&lt;/p&gt;</comment>
                            <comment id="12871307" author="hbasereviewboard" created="Tue, 25 May 2010 19:24:27 +0000"  >&lt;p&gt;Message from: &quot;Todd Lipcon&quot; &amp;lt;todd@cloudera.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.hbase.org/r/84/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/84/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hbase.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Submitting to RB on behalf of Michael Dalton&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2579&quot; title=&quot;Add atomic checkAndDelete support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2579&quot;&gt;&lt;del&gt;HBASE-2579&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/src/main/java/org/apache/hadoop/hbase/client/HTable.java 946565 &lt;br/&gt;
  trunk/src/main/java/org/apache/hadoop/hbase/client/HTableInterface.java 946565 &lt;br/&gt;
  trunk/src/main/java/org/apache/hadoop/hbase/ipc/HRegionInterface.java 946565 &lt;br/&gt;
  trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java 946565 &lt;br/&gt;
  trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java 946565 &lt;br/&gt;
  trunk/src/main/java/org/apache/hadoop/hbase/rest/client/RemoteHTable.java 946565 &lt;br/&gt;
  trunk/src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java 946565 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;http://review.hbase.org/r/84/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/84/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Todd&lt;/p&gt;

</comment>
                            <comment id="12871314" author="hbasereviewboard" created="Tue, 25 May 2010 19:34:26 +0000"  >&lt;p&gt;Message from: &quot;Todd Lipcon&quot; &amp;lt;todd@cloudera.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.hbase.org/r/84/#review54&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/84/#review54&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;Looks pretty good. The one thing I don&apos;t like is that checkAndMutate takes a Writable, and then downcasts based on instanceof. Can we extract a common interface between Put and Delete? maybe something like RowMutation or RowOperation, which would have getRowLock and a &quot;performMutation()&quot; or something? What do you guys think?&lt;/p&gt;


&lt;p&gt;trunk/src/main/java/org/apache/hadoop/hbase/client/HTable.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.hbase.org/r/84/#comment308&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/84/#comment308&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    typo: executed&lt;/p&gt;



&lt;p&gt;trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.hbase.org/r/84/#comment309&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/84/#comment309&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    since this modifies its parameter, I don&apos;t know that it makes sense to also return it. I&apos;d make this void and add javadoc that it will mutate its arg (also explain what it does)&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Todd&lt;/li&gt;
&lt;/ul&gt;




</comment>
                            <comment id="12871343" author="hbasereviewboard" created="Tue, 25 May 2010 20:35:26 +0000"  >&lt;p&gt;Message from: &quot;Ryan Rawson&quot; &amp;lt;ryanobjc@gmail.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.hbase.org/r/84/#review58&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/84/#review58&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.hbase.org/r/84/#comment341&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/84/#comment341&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    this is a somewhat reasonable compromise until one day we unify Put/Delete in an object hierarchy and fix up the API a bit.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Ryan&lt;/li&gt;
&lt;/ul&gt;




</comment>
                            <comment id="12871344" author="hbasereviewboard" created="Tue, 25 May 2010 20:37:32 +0000"  >&lt;p&gt;Message from: &quot;Ryan Rawson&quot; &amp;lt;ryanobjc@gmail.com&amp;gt;&lt;/p&gt;



&lt;p&gt;I think we should address that in a different JIRA, just because its more of an API design.  This is one more API endpoint and that is more of a refactor.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Ryan&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.hbase.org/r/84/#review54&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/84/#review54&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;On 2010-05-25 12:22:03, Todd Lipcon wrote:&lt;/p&gt;

</comment>
                            <comment id="12871354" author="hbasereviewboard" created="Tue, 25 May 2010 20:49:32 +0000"  >&lt;p&gt;Message from: &quot;Todd Lipcon&quot; &amp;lt;todd@cloudera.com&amp;gt;&lt;/p&gt;



&lt;p&gt;Fair enough&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Todd&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.hbase.org/r/84/#review54&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.hbase.org/r/84/#review54&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;On 2010-05-25 12:22:03, Todd Lipcon wrote:&lt;/p&gt;

</comment>
                            <comment id="12874769" author="stack" created="Wed, 2 Jun 2010 20:06:21 +0000"  >&lt;p&gt;Committed (after adding in the two Todd suggestions).  Thanks for the patch Michael and to Ryan and Todd for reviews.&lt;/p&gt;</comment>
                            <comment id="12919392" author="hbasereviewboard" created="Fri, 8 Oct 2010 22:03:30 +0000"  >&lt;p&gt;Message from: stack@duboce.net&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2010-05-25 12:32:28, Todd Lipcon wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; Looks pretty good. The one thing I don&apos;t like is that checkAndMutate takes a Writable, and then downcasts based on instanceof. Can we extract a common interface between Put and Delete? maybe something like RowMutation or RowOperation, which would have getRowLock and a &quot;performMutation()&quot; or something? What do you guys think?&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Ryan Rawson wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;I think we should address that in a different JIRA, just because its more of an API design.  This is one more API endpoint and that is more of a refactor.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Todd Lipcon wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Fair enough&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;So, is this ready for commit? (we can address Todd comments on commit).  I can make an issue for common interface across Delete/Put.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;stack&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.cloudera.org/r/84/#review54&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/84/#review54&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


</comment>
                            <comment id="15017734" author="lars_francke" created="Fri, 20 Nov 2015 12:44:12 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12445044" name="2579-v2.patch" size="19119" author="mwdalton" created="Thu, 20 May 2010 09:39:50 +0000"/>
                            <attachment id="12445006" name="2579.patch" size="19262" author="mwdalton" created="Thu, 20 May 2010 00:37:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 25 May 2010 19:24:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32659</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10342"><![CDATA[Incompatible change]]></customfieldvalue>
    <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hic7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>100233</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Adds support for atomic checkAndDelete (updates to both client &amp;amp; regionserver). Test cases in TestHRegion updated to support this new method.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>