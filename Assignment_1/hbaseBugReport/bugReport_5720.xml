<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:30:21 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5720/HBASE-5720.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5720] HFileDataBlockEncoderImpl uses wrong header size when reading HFiles with no checksums</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5720</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;When reading a .92 HFile without checksums, encoding it, and storing in the block cache, the HFileDataBlockEncoderImpl always allocates a dummy header appropriate for checksums even though there are none.  This corrupts the byte[].&lt;/p&gt;

&lt;p&gt;Attaching a patch that allocates a DUMMY_HEADER_NO_CHECKSUM in that case which I think is the desired behavior.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12549604">HBASE-5720</key>
            <summary>HFileDataBlockEncoderImpl uses wrong header size when reading HFiles with no checksums</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mcorgan">Matt Corgan</assignee>
                                    <reporter username="mcorgan">Matt Corgan</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 Apr 2012 02:14:14 +0000</created>
                <updated>Fri, 12 Oct 2012 05:34:58 +0000</updated>
                            <resolved>Sun, 8 Apr 2012 00:43:51 +0000</resolved>
                                    <version>0.94.0</version>
                                    <fixVersion>0.94.0</fixVersion>
                                    <component>io</component>
                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                            <comments>
                            <comment id="13246945" author="hadoopqa" created="Thu, 5 Apr 2012 02:19:19 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12521445/HBASE-5720-v1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12521445/HBASE-5720-v1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1400//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1400//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13246952" author="zhihyu@ebaysf.com" created="Thu, 5 Apr 2012 02:47:30 +0000"  >&lt;p&gt;Looks like the issue only exists in 0.94 branch.&lt;br/&gt;
There is no such code in trunk version of HFileDataBlockEncoderImpl.java:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
*** 194,200 ****
        DataBlockEncoding algo, &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; includesMemstoreTS) {
      ByteBuffer compressedBuffer = encodeBufferToHFileBlockBuffer(
          block.getBufferWithoutHeader(), algo, includesMemstoreTS,
-         HFileBlock.DUMMY_HEADER);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13246970" author="mcorgan" created="Thu, 5 Apr 2012 02:59:24 +0000"  >&lt;p&gt;that&apos;s right, .94, though i assumed the code would still be in trunk&lt;/p&gt;</comment>
                            <comment id="13247013" author="lhofhansl" created="Thu, 5 Apr 2012 04:40:02 +0000"  >&lt;p&gt;Patch makes sense. Let&apos;s get Dhruba to have a look at it.&lt;/p&gt;</comment>
                            <comment id="13247373" author="dhruba" created="Thu, 5 Apr 2012 17:02:48 +0000"  >&lt;p&gt;+1 to this patch. &lt;/p&gt;

&lt;p&gt;I think this bug exists in trunk too. Matt, thanks for finding it. Have you tried this patch in your setup to verify that it fixes the problem for 0.94? If so, i will submit a patch for trunk too.&lt;/p&gt;</comment>
                            <comment id="13247378" author="mcorgan" created="Thu, 5 Apr 2012 17:12:33 +0000"  >&lt;p&gt;I&apos;ve confirmed in some isolated test cases, and I&apos;m running the test suite now.  I think i have one more fix as well though where .92 files cannot get encoded from disk to memory because the .92 files have no encoderId.  Doesn&apos;t break anything but skips the desired encoding.  I&apos;ll add that fix to this patch since they&apos;re both related to .92 compatibility.&lt;/p&gt;</comment>
                            <comment id="13247495" author="mcorgan" created="Thu, 5 Apr 2012 18:39:12 +0000"  >&lt;p&gt;v2 patch also reverts the logic in HFileDataBlockEncoderImpl.createFromFileInfo to an earlier version.  Version on .94 branch will not allow disk-&amp;gt;cache encoding on a .92 because (in short) it doesn&apos;t have an encoderId.  I&apos;m pretty sure this is something we want to support, but correct me if i&apos;m wrong.  Without it you&apos;d have to major compact everything before using encoding (or something along those lines)&lt;/p&gt;

&lt;p&gt;Test suite passing (except unrelated failure), and it works in my benchmarking setup for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4676&quot; title=&quot;Prefix Compression - Trie data block encoding&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4676&quot;&gt;&lt;del&gt;HBASE-4676&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13247501" author="hadoopqa" created="Thu, 5 Apr 2012 18:42:10 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12521547/HBASE-5720-v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12521547/HBASE-5720-v2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1408//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1408//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13247530" author="lhofhansl" created="Thu, 5 Apr 2012 18:59:51 +0000"  >&lt;p&gt;Minor nit on v2: Don&apos;t need to create dataBlockEncodingStr if dataBlockEncodingType is null. I.e. could pull the if statement up.&lt;/p&gt;

&lt;p&gt;I guess it&apos;s not reasonable to write a unittest for this.&lt;/p&gt;

&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13247533" author="lhofhansl" created="Thu, 5 Apr 2012 19:00:36 +0000"  >&lt;p&gt;Patch doesn&apos;t apply to trunk, that&apos;s why HadoopQA fails.&lt;/p&gt;</comment>
                            <comment id="13247551" author="mcorgan" created="Thu, 5 Apr 2012 19:18:28 +0000"  >&lt;p&gt;v3 delays only creates dataBlockEncodingStr if needed&lt;/p&gt;</comment>
                            <comment id="13247605" author="hadoopqa" created="Thu, 5 Apr 2012 20:10:52 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12521557/HBASE-5720-v3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12521557/HBASE-5720-v3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1411//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1411//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13247676" author="stack" created="Thu, 5 Apr 2012 21:10:46 +0000"  >&lt;p&gt;For trunk&lt;/p&gt;</comment>
                            <comment id="13247680" author="lhofhansl" created="Thu, 5 Apr 2012 21:14:33 +0000"  >&lt;p&gt;Is the 1st problem actually a problem in trunk? The code was changed around a lot.&lt;/p&gt;</comment>
                            <comment id="13247682" author="lhofhansl" created="Thu, 5 Apr 2012 21:15:41 +0000"  >&lt;p&gt;Comment crossing again. Ah, I see, yes a problem in trunk too.&lt;br/&gt;
+1 on both patches.&lt;/p&gt;</comment>
                            <comment id="13247694" author="hadoopqa" created="Thu, 5 Apr 2012 21:27:08 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12521577/5720v4.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12521577/5720v4.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    -1 javac.  The patch appears to cause mvn compile goal to fail.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to cause Findbugs (version 1.3.9) to fail.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1413//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1413//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1413//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1413//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13247702" author="stack" created="Thu, 5 Apr 2012 21:32:11 +0000"  >&lt;p&gt;Retry&lt;/p&gt;</comment>
                            <comment id="13248094" author="lhofhansl" created="Fri, 6 Apr 2012 05:52:17 +0000"  >&lt;p&gt;Trying again.&lt;/p&gt;</comment>
                            <comment id="13248109" author="hadoopqa" created="Fri, 6 Apr 2012 06:05:15 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12521650/5720v4.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12521650/5720v4.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    -1 javac.  The patch appears to cause mvn compile goal to fail.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to cause Findbugs (version 1.3.9) to fail.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1427//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1427//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1427//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1427//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13248116" author="dhruba" created="Fri, 6 Apr 2012 06:13:37 +0000"  >&lt;p&gt;Stack&apos;s patch for trunk looks good to me, +1&lt;/p&gt;</comment>
                            <comment id="13248538" author="lhofhansl" created="Fri, 6 Apr 2012 17:52:05 +0000"  >&lt;p&gt;v4 does not compile:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/trunk/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileDataBlockEncoderImpl.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;74,39&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; symbol  : variable block&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; location: class org.apache.hadoop.hbase.io.hfile.HFileDataBlockEncoderImpl&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The &quot;block&quot; indeed is not known to HFileDataBlockEncoderImpl. I&apos;m lacking a bit context to suggest a different fix.&lt;/p&gt;</comment>
                            <comment id="13248626" author="mcorgan" created="Fri, 6 Apr 2012 19:21:17 +0000"  >&lt;p&gt;Looks like &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5313&quot; title=&quot;Restructure hfiles layout for better compression&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5313&quot;&gt;HBASE-5313&lt;/a&gt; shuffles things around by adding the HFileBlockDefaultEncodingContext&lt;/p&gt;</comment>
                            <comment id="13248641" author="stack" created="Fri, 6 Apr 2012 19:33:30 +0000"  >&lt;p&gt;Sorry for attaching non-compiling patch.  Looking at this, its hard to get the a default header into the HFileBlockDefaultEncodingContext where it seems it now belongs.&lt;/p&gt;</comment>
                            <comment id="13248773" author="lhofhansl" created="Fri, 6 Apr 2012 21:07:04 +0000"  >&lt;p&gt;Yeah, I poked around a few minutes. Seems we need to pass the header at the time when we do the encoding, rather than storing it in the EncodingContext. The changes for that are not entirely trivial.&lt;br/&gt;
An ugly way out might be a setter for the header in the EncodingContext and then set it when known, but that is too nasty and error prone. Maybe Dhruba has an idea...?&lt;/p&gt;

&lt;p&gt;At this point I think I want to commit to and close this for 0.94 and file another jira for trunk. Any objections to that?&lt;/p&gt;</comment>
                            <comment id="13248901" author="zhihyu@ebaysf.com" created="Fri, 6 Apr 2012 21:42:54 +0000"  >&lt;p&gt;I was experimenting along the same direction as Lars outlined.&lt;br/&gt;
Patch is for reference only.&lt;/p&gt;</comment>
                            <comment id="13248934" author="zhihyu@ebaysf.com" created="Fri, 6 Apr 2012 22:22:52 +0000"  >&lt;p&gt;Patch for trunk v2 removes white spaces.&lt;/p&gt;</comment>
                            <comment id="13249007" author="hadoopqa" created="Fri, 6 Apr 2012 22:35:44 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12521763/5720-trunk.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12521763/5720-trunk.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.client.TestFromClientSide&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1440//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1440//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1440//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1440//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1440//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1440//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13249010" author="zhihyu@ebaysf.com" created="Fri, 6 Apr 2012 22:37:32 +0000"  >&lt;p&gt;I ran TestFromClientSide on MacBook with patch v2 and it passed.&lt;/p&gt;</comment>
                            <comment id="13249034" author="hadoopqa" created="Fri, 6 Apr 2012 23:20:19 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12521775/5720-trunk-v2.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12521775/5720-trunk-v2.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 12 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1442//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1442//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1442//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1442//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1442//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1442//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13249328" author="lhofhansl" created="Sat, 7 Apr 2012 20:42:30 +0000"  >&lt;p&gt;That patch looks like it should work. As I mention in an earlier comment, though, this strategy is brittle especially considering future changes. At the same time I cannot think of anything better offhand.&lt;/p&gt;

&lt;p&gt;Let me move the trunk discussion into another jira and commit the 0.94 fix via this one. Everybody OK with that?&lt;/p&gt;</comment>
                            <comment id="13249383" author="mcorgan" created="Sat, 7 Apr 2012 22:06:03 +0000"  >&lt;p&gt;Sounds fine to me. .94 is the important fix, while trunk has some time for more thorough testing, and things will probbaly get moved around even more by other features. &lt;/p&gt;

&lt;p&gt;Eventually it would be nice to isolate the code that deals with the fragile byte[]&apos;s inside HFile blocks into separate src directories or projects. Then have that code implement interfaces similar to DataBlockEncoder.java. This would: &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;make it more testable, like a normal in-memory data structure without having to set up heavyweight testing environments&lt;/li&gt;
	&lt;li&gt;separate the encoding concerns from IO concerns. after the checksum happens, encoders/decoders should not even know what an IOException is&lt;/li&gt;
	&lt;li&gt;strongly discourage people from modifying anything in the codec packages without knowing what they&apos;re getting into&lt;/li&gt;
	&lt;li&gt;ensure the main project code only references the interfaces and not any codec internals (see if main project compiles without codecs in classpath)&lt;/li&gt;
	&lt;li&gt;make it easier for contributors to develop and profile the codecs without having to become experts in all aspects of hbase&lt;/li&gt;
	&lt;li&gt;help to simplify the main project. imagine if the gzip or snappy internals were sprinkled throughout the regionserver code. yikes.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13249386" author="stack" created="Sat, 7 Apr 2012 22:25:10 +0000"  >&lt;p&gt;+1 on commit to 0.94.  Open a blocker issue for fix on TRUNK.&lt;/p&gt;

&lt;p&gt;@Matt Sounds great.  How do we do it?  The testable and individually maintained riffs I like.  When you say separate directories or projects, what you thinking?  It&apos;d be a separate package or even a separate module if we ever get around to modularizing our build.  Regards separate project, where you think?&lt;/p&gt;</comment>
                            <comment id="13249388" author="lhofhansl" created="Sat, 7 Apr 2012 22:28:55 +0000"  >&lt;p&gt;OK, I&apos;ll commit to 0.94 today and create a sub task for further trunk discussion.&lt;/p&gt;

&lt;p&gt;@Matt: +1 on all points (like Stack I do not follow the &quot;project&quot; references in your comment, though). Do you want (and have time) to work out a patch for that?&lt;/p&gt;</comment>
                            <comment id="13249401" author="lhofhansl" created="Sat, 7 Apr 2012 22:57:02 +0000"  >&lt;p&gt;@Matt: Can you make a 0.94 patch? I think your patch is off an older version of trunk rather than 0.94. Thanks.&lt;/p&gt;</comment>
                            <comment id="13249408" author="mcorgan" created="Sat, 7 Apr 2012 23:17:12 +0000"  >&lt;p&gt;Lars - i just checked out the latest .94 branch, and &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5720&quot; title=&quot;HFileDataBlockEncoderImpl uses wrong header size when reading HFiles with no checksums&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5720&quot;&gt;&lt;del&gt;HBASE-5720&lt;/del&gt;&lt;/a&gt;-v3.patch applies cleanly for me.  Is that the patch you&apos;re using for .94?&lt;/p&gt;</comment>
                            <comment id="13249415" author="mcorgan" created="Sat, 7 Apr 2012 23:35:27 +0000"  >&lt;p&gt;The ideal way to split code in my opinion would be to put it in multiple source directories in the same project, and then configure the build path to set up one-way visibility between source directories.  For example, the src/test/java folder would be able to see the src/main/java folder but not vice versa.  Unfortunately, eclipse does not support that.  It has a global classpath per project.  Can&apos;t find the exact discussion, but similar to: &lt;a href=&quot;https://bugs.eclipse.org/bugs/show_bug.cgi?id=224708&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://bugs.eclipse.org/bugs/show_bug.cgi?id=224708&lt;/a&gt;.  &lt;/p&gt;

&lt;p&gt;I can think of two alternatives:&lt;/p&gt;

&lt;p&gt;1) Put multiple src directories in the main project, so everything is in that project&apos;s classpath.  Periodically have a human or something else remove non-core src directories from the classpath and see if that causes compilation errors in the main src.  I just tried removing the src/main/test directory from the classpath and was happy to see that the src/main/java folder still compiles.&lt;/p&gt;

&lt;p&gt;2) A more heavy handed approach would be to create separate projects so you can actually enforce unidirectional classpath visibility.  That&apos;s how I&apos;ve been developing &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4676&quot; title=&quot;Prefix Compression - Trie data block encoding&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4676&quot;&gt;&lt;del&gt;HBASE-4676&lt;/del&gt;&lt;/a&gt; which can be added to the main project as a separate jar.  Main project still compiles without it.  The downside of this is that having multiple projects is more configuration overhead, like you would probably need multiple svn repos.&lt;/p&gt;

&lt;p&gt;I think moving towards #1 is a good start for core stuff while more exotic contributions could be made by submitting jars.  I&apos;ll try to nudge us in this direction with &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4676&quot; title=&quot;Prefix Compression - Trie data block encoding&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4676&quot;&gt;&lt;del&gt;HBASE-4676&lt;/del&gt;&lt;/a&gt;, just wanted to make sure people agree that it&apos;s important =)&lt;/p&gt;</comment>
                            <comment id="13249425" author="stack" created="Sat, 7 Apr 2012 23:50:40 +0000"  >&lt;p&gt;@Matt I think you are making a new argument, number #4 I believe, for why we should do &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4336&quot; title=&quot;Convert source tree into maven modules&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4336&quot;&gt;&lt;del&gt;HBASE-4336&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13249433" author="lhofhansl" created="Sun, 8 Apr 2012 00:36:25 +0000"  >&lt;p&gt;@Matt... I&apos;m an idiot, I used the wrong patch. Sigh.&lt;/p&gt;</comment>
                            <comment id="13249434" author="mcorgan" created="Sun, 8 Apr 2012 00:37:26 +0000"  >&lt;p&gt;@Stack - yep. &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4336&quot; title=&quot;Convert source tree into maven modules&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4336&quot;&gt;&lt;del&gt;HBASE-4336&lt;/del&gt;&lt;/a&gt; is pretty much what i&apos;m getting at, but I don&apos;t know much about maven.  I think one-shot modularization of a large, fast moving project is dangerous/impossible.  A more practical approach is to decide on a couple modules and slowly start pulling things into them.  It could take years and never really be finished, but every time something is extracted to a module the main project becomes a little bit simpler.&lt;/p&gt;</comment>
                            <comment id="13249435" author="lhofhansl" created="Sun, 8 Apr 2012 00:43:28 +0000"  >&lt;p&gt;Added you as contributor Matt.&lt;/p&gt;</comment>
                            <comment id="13249436" author="lhofhansl" created="Sun, 8 Apr 2012 00:43:51 +0000"  >&lt;p&gt;Comitted to 0.94 only.&lt;/p&gt;</comment>
                            <comment id="13249437" author="lhofhansl" created="Sun, 8 Apr 2012 00:44:33 +0000"  >&lt;p&gt;Let&apos;s move all followup discussions into &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5746&quot; title=&quot;HFileDataBlockEncoderImpl uses wrong header size when reading HFiles with no checksums (0.96)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5746&quot;&gt;&lt;del&gt;HBASE-5746&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13249453" author="hudson" created="Sun, 8 Apr 2012 01:12:52 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #98 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/98/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/98/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5720&quot; title=&quot;HFileDataBlockEncoderImpl uses wrong header size when reading HFiles with no checksums&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5720&quot;&gt;&lt;del&gt;HBASE-5720&lt;/del&gt;&lt;/a&gt; HFileDataBlockEncoderImpl uses wrong header size when reading HFiles with no checksums (Matt Corgan) (Revision 1310932)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlock.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileDataBlockEncoderImpl.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13253630" author="hudson" created="Fri, 13 Apr 2012 18:32:53 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #9 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/9/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/9/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5720&quot; title=&quot;HFileDataBlockEncoderImpl uses wrong header size when reading HFiles with no checksums&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5720&quot;&gt;&lt;del&gt;HBASE-5720&lt;/del&gt;&lt;/a&gt; HFileDataBlockEncoderImpl uses wrong header size when reading HFiles with no checksums (Matt Corgan) (Revision 1310932)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileBlock.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileDataBlockEncoderImpl.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12535789">HBASE-5074</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12521775" name="5720-trunk-v2.txt" size="14512" author="zhihyu@ebaysf.com" created="Fri, 6 Apr 2012 22:22:52 +0000"/>
                            <attachment id="12521763" name="5720-trunk.txt" size="13773" author="zhihyu@ebaysf.com" created="Fri, 6 Apr 2012 21:42:54 +0000"/>
                            <attachment id="12521650" name="5720v4.txt" size="3467" author="lhofhansl" created="Fri, 6 Apr 2012 05:52:17 +0000"/>
                            <attachment id="12521580" name="5720v4.txt" size="3467" author="stack" created="Thu, 5 Apr 2012 21:32:10 +0000"/>
                            <attachment id="12521577" name="5720v4.txt" size="3467" author="stack" created="Thu, 5 Apr 2012 21:10:46 +0000"/>
                            <attachment id="12521445" name="HBASE-5720-v1.patch" size="2178" author="mcorgan" created="Thu, 5 Apr 2012 02:15:53 +0000"/>
                            <attachment id="12521547" name="HBASE-5720-v2.patch" size="3581" author="mcorgan" created="Thu, 5 Apr 2012 18:39:12 +0000"/>
                            <attachment id="12521557" name="HBASE-5720-v3.patch" size="3714" author="mcorgan" created="Thu, 5 Apr 2012 19:18:28 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12550130">HBASE-5746</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 5 Apr 2012 02:19:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>234595</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 36 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i068y7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34381</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>