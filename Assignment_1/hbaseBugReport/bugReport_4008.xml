<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:14:59 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-4008/HBASE-4008.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-4008] Problem while stopping HBase</title>
                <link>https://issues.apache.org/jira/browse/HBASE-4008</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;stop-hbase.sh stops the server successfully if and only if the server is instantiated properly. &lt;/p&gt;

&lt;p&gt;When u Run &lt;/p&gt;

&lt;p&gt;start-hbase.sh; sleep 10; stop-hbase.sh; ( This works totally fine and has no issues )&lt;/p&gt;

&lt;p&gt;Whereas when u run &lt;/p&gt;

&lt;p&gt;start-hbase.sh; stop-hbase.sh; ( This never stops the server and neither the server gets initialized and starts properly )&lt;/p&gt;</description>
                <environment></environment>
        <key id="12510937">HBASE-4008</key>
            <summary>Problem while stopping HBase</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thehellmaker">Akash Ashok</assignee>
                                    <reporter username="thehellmaker">Akash Ashok</reporter>
                        <labels>
                            <label>HMaster</label>
                    </labels>
                <created>Mon, 20 Jun 2011 10:26:52 +0000</created>
                <updated>Fri, 20 Nov 2015 11:55:57 +0000</updated>
                            <resolved>Fri, 19 Aug 2011 03:37:59 +0000</resolved>
                                                    <fixVersion>0.92.0</fixVersion>
                                    <component>scripts</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13052233" author="jdcryans" created="Mon, 20 Jun 2011 21:39:08 +0000"  >&lt;p&gt;It&apos;s a weird use case... but looking at the .out file, I can see the following:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
11/06/20 14:35:32 INFO client.HConnectionManager$HConnectionImplementation: getMaster attempt 0 of 1 failed; no more retrying.
org.apache.hadoop.ipc.RemoteException: org.apache.hadoop.hbase.ipc.ServerNotRunningException: Server is not running yet
        at org.apache.hadoop.hbase.ipc.HBaseServer$Handler.run(HBaseServer.java:1038)

        at org.apache.hadoop.hbase.ipc.HBaseClient.call(HBaseClient.java:771)
        at org.apache.hadoop.hbase.ipc.HBaseRPC$Invoker.invoke(HBaseRPC.java:257)
        at $Proxy4.getProtocolVersion(Unknown Source)
        at org.apache.hadoop.hbase.ipc.HBaseRPC.getProxy(HBaseRPC.java:419)
        at org.apache.hadoop.hbase.ipc.HBaseRPC.getProxy(HBaseRPC.java:393)
        at org.apache.hadoop.hbase.ipc.HBaseRPC.getProxy(HBaseRPC.java:444)
        at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.getMaster(HConnectionManager.java:360)
        at org.apache.hadoop.hbase.client.HBaseAdmin.&amp;lt;init&amp;gt;(HBaseAdmin.java:89)
        at org.apache.hadoop.hbase.master.HMasterCommandLine.stopMaster(HMasterCommandLine.java:163)
        at org.apache.hadoop.hbase.master.HMasterCommandLine.run(HMasterCommandLine.java:104)
        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
        at org.apache.hadoop.hbase.util.ServerCommandLine.doMain(ServerCommandLine.java:76)
        at org.apache.hadoop.hbase.master.HMaster.main(HMaster.java:1078)
11/06/20 14:35:32 ERROR master.HMasterCommandLine: Master not running
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It seems we should retry if it says that the master isn&apos;t running yet instead of ERROR&apos;ing out and leaving the bash script hanging.&lt;/p&gt;</comment>
                            <comment id="13052433" author="thehellmaker" created="Tue, 21 Jun 2011 08:47:59 +0000"  >&lt;p&gt;Also this problem exists with the current startup of HMaster that if any Exception is thrown during the startup of the master then HMaster will still be running as a process but its meaningless. stop-hbase.sh fails even then. Shouldn&apos;t it be the case that if a serious exception is thrown the HMaster process should die?&lt;/p&gt;</comment>
                            <comment id="13052709" author="stack" created="Tue, 21 Jun 2011 17:51:34 +0000"  >&lt;blockquote&gt;&lt;p&gt;Shouldn&apos;t it be the case that if a serious exception is thrown the HMaster process should die?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes.&lt;/p&gt;</comment>
                            <comment id="13053773" author="thehellmaker" created="Thu, 23 Jun 2011 10:07:26 +0000"  >&lt;p&gt;If such is the case, can I change this bug priority to Major?&lt;/p&gt;</comment>
                            <comment id="13061681" author="stack" created="Thu, 7 Jul 2011 23:55:16 +0000"  >&lt;p&gt;@Akash Yes.&lt;/p&gt;</comment>
                            <comment id="13062091" author="thehellmaker" created="Fri, 8 Jul 2011 18:20:20 +0000"  >&lt;p&gt;I think the main issue is in HMaster.run() method which on throwing an exception aborts all the HMaster threads and neatly executes finally block and exits which in turn would result in HMasterCommandLine thinking that HMaster has started because it hasn&apos;t thrown an exception and returns 0. I think we have to throw any exception within HMaster.run() and let it rise thru the stack and let HMasterCommandLine also handle it. &lt;/p&gt;</comment>
                            <comment id="13062095" author="stack" created="Fri, 8 Jul 2011 18:26:54 +0000"  >&lt;p&gt;Want to throw a RuntimeException Akash?&lt;/p&gt;</comment>
                            <comment id="13062098" author="thehellmaker" created="Fri, 8 Jul 2011 18:28:34 +0000"  >&lt;p&gt;yeah was thinking of that. Would that result in any issues ?&lt;/p&gt;</comment>
                            <comment id="13062112" author="stack" created="Fri, 8 Jul 2011 18:52:26 +0000"  >&lt;p&gt;Not that I know of.&lt;/p&gt;</comment>
                            <comment id="13062121" author="thehellmaker" created="Fri, 8 Jul 2011 19:13:18 +0000"  >&lt;p&gt;Only thing I fear is catching the exception thrown from the HMaster threads using an UncaughtExceptionHandler. So that should be a fairly simple change. Would check it out !&lt;/p&gt;</comment>
                            <comment id="13062314" author="thehellmaker" created="Sat, 9 Jul 2011 04:21:58 +0000"  >&lt;p&gt;Hey I am not sure how to handle if any Exceptions were thrown by the HMaster threads as these any Exceptions just terminate the threads leaving the HMasterCommandLine thinking that Master has started successfully. These Exceptions can&apos;t be propogated to HMasterCommandLine. Any idea on how this could be handled ?&lt;/p&gt;</comment>
                            <comment id="13066098" author="thehellmaker" created="Fri, 15 Jul 2011 17:56:30 +0000"  >&lt;p&gt;I have a question regarding the standalone HBase which might not be a real world scenario but fixing this issue I need to know what the behaviour should be after the fix. So for a standalone HBase setup if the HMaster throws a severe exception and master doesn&apos;t come up then HBase doesn&apos;t stop and goes to an inconsistent. &lt;/p&gt;

&lt;p&gt;In the case of True Distributed Mode only HMaster goes down as it runs on a separate JVM. &lt;/p&gt;

&lt;p&gt;But how about a standalone case where exiting the JVM causes the RegionServer threads also to be terminated ? In such a case master fails whole standalone HBase setup goes down. This makes logical sense as its a single node setup. Just wanted to clarify if this is ok. &lt;/p&gt;</comment>
                            <comment id="13066311" author="stack" created="Fri, 15 Jul 2011 23:48:15 +0000"  >&lt;p&gt;Akash: Yes.  Thats what should happen. My guess is that this interlocking case where RegionServer and Master (and ZK) are up in the one JVM and one of the &apos;servers&apos; fails, then all should fail, was just never considered.  If you could fix it, you&apos;d be a good man.&lt;/p&gt;</comment>
                            <comment id="13066575" author="thehellmaker" created="Sun, 17 Jul 2011 02:49:02 +0000"  >&lt;p&gt;Attaching HBase-4008-v2.patch as the first one had an extra unused import.&lt;/p&gt;</comment>
                            <comment id="13071515" author="stack" created="Wed, 27 Jul 2011 05:22:18 +0000"  >&lt;p&gt;I think isAborted belongs in the Abortable Interface.  That&apos;d be a big change though.  Wouldn&apos;t wish that on you (Could do it in another issue &amp;#8211; this is not the first time isAborted has been wanted).&lt;/p&gt;

&lt;p&gt;Otherwise, do you think it should be protected rather than public since it is only used by HMasterCommandLine, at least currently.&lt;/p&gt;

&lt;p&gt;Else, patch looks great.  Does it work for you Akash?&lt;/p&gt;
</comment>
                            <comment id="13087246" author="thehellmaker" created="Thu, 18 Aug 2011 20:17:36 +0000"  >&lt;p&gt;Making it protected works for me. Because it isn&apos;t used by anything else currently. But I am thinking making it protected means only the class or the subclasses or the classes in the same package is able to call this method. So it means we are intending this method to be used only by subclasses or within same package. Just like isStopped() or isActiveMaster() even isAborted() has the potential to be called from somehwere outside the package. So based on how it could be called it could still be public. I would love to hear your thoughts on this. &lt;/p&gt;</comment>
                            <comment id="13087259" author="stack" created="Thu, 18 Aug 2011 20:28:28 +0000"  >&lt;p&gt;Akash:  My motivation is keeping the public API as narrow as possible.  I&apos;ll make it protected on commit and then if someone else makes good arg. that they need it public, we&apos;ll deal then.  Does this patch work for you?  If so, I&apos;ll commit w/ above change.&lt;/p&gt;</comment>
                            <comment id="13087465" author="thehellmaker" created="Fri, 19 Aug 2011 02:49:19 +0000"  >&lt;p&gt;Ok sure This patch works for me. Thanks. &lt;/p&gt;

&lt;p&gt;Also about including the isAborted in the Abortable interface is there a JIRA already open for this? Could I take that up ?&lt;/p&gt;</comment>
                            <comment id="13087494" author="stack" created="Fri, 19 Aug 2011 03:35:25 +0000"  >&lt;blockquote&gt;&lt;p&gt;Also about including the isAborted in the Abortable interface is there a JIRA already open for this? Could I take that up ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;No.  Please.&lt;/p&gt;</comment>
                            <comment id="13087495" author="stack" created="Fri, 19 Aug 2011 03:37:59 +0000"  >&lt;p&gt;Committed to trunk.  Thanks for the patch Akash.&lt;/p&gt;</comment>
                            <comment id="13087561" author="hudson" created="Fri, 19 Aug 2011 06:09:35 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2125 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2125/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2125/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4008&quot; title=&quot;Problem while stopping HBase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4008&quot;&gt;&lt;del&gt;HBASE-4008&lt;/del&gt;&lt;/a&gt; Problem while stopping HBase&lt;/p&gt;

&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/HMasterCommandLine.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13089609" author="thehellmaker" created="Tue, 23 Aug 2011 17:37:31 +0000"  >&lt;p&gt;&amp;lt;blockquote &amp;gt; &lt;br/&gt;
&amp;lt;p&amp;gt;Also about including the isAborted in the Abortable interface is there a JIRA already open for this? Could I take that up ? &amp;lt;/p&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;p&amp;gt;No. Please.&amp;lt;/p&amp;gt;&lt;br/&gt;
&amp;lt;/blockquote&amp;gt;&lt;/p&gt;

&lt;p&gt;@Stack: I&apos;m kinda confused. Just wanted to clarify. Did u mean another JIRA is not open and I could take it up. Or did u ask me not to take it up? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13089750" author="stack" created="Tue, 23 Aug 2011 20:52:29 +0000"  >&lt;p&gt;@Akash Pardon my terseness.  Please open a new issue to add isAbortable.  I do not of an existing issue.&lt;/p&gt;</comment>
                            <comment id="13126158" author="jigneshmpatel" created="Wed, 12 Oct 2011 21:07:54 +0000"  >&lt;p&gt;When I am trying to stop Hbase it goes in infinite loop.&lt;/p&gt;

&lt;p&gt;Jignesh-MacBookPro:hadoop-hbase hadoop-user$ bin/stop-hbase.sh&lt;br/&gt;
stopping hbase................................................................................................................................................................................................................................................................................................................................................................................&lt;/p&gt;</comment>
                            <comment id="13126167" author="stack" created="Wed, 12 Oct 2011 21:21:05 +0000"  >&lt;p&gt;@Jignesh Added comment on closed issue is usually not a good way to get help.  I&apos;d say do mailing list first.  Look in your logs too first to see why hbase is not going down.  Also what version of hbase you should say when asking on mailing list.  Does it have the above patch?  Is it same issue?&lt;/p&gt;</comment>
                            <comment id="15016622" author="lars_francke" created="Fri, 20 Nov 2015 11:55:57 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12486750" name="HBase-4008-v2.patch" size="3001" author="thehellmaker" created="Sun, 17 Jul 2011 02:48:06 +0000"/>
                            <attachment id="12486749" name="HBase-4008.patch" size="3171" author="thehellmaker" created="Sun, 17 Jul 2011 02:40:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 20 Jun 2011 21:39:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>27129</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hoyf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>101305</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Stop Hbase </customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>