<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:44:57 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-7354/HBASE-7354.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-7354] Snapshot Info/Debug Tool</title>
                <link>https://issues.apache.org/jira/browse/HBASE-7354</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Tool that show snapshot metadata, hfiles and logs retained.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12623950">HBASE-7354</key>
            <summary>Snapshot Info/Debug Tool</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12556488">HBASE-6055</parent>
                                    <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mbertozzi">Matteo Bertozzi</assignee>
                                    <reporter username="mbertozzi">Matteo Bertozzi</reporter>
                        <labels>
                    </labels>
                <created>Fri, 14 Dec 2012 12:57:11 +0000</created>
                <updated>Mon, 23 Sep 2013 18:31:28 +0000</updated>
                            <resolved>Thu, 3 Jan 2013 23:07:30 +0000</resolved>
                                    <version>hbase-6055</version>
                    <version>hbase-7290</version>
                                    <fixVersion>0.95.0</fixVersion>
                                    <component>snapshots</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13540963" author="jmhsieh" created="Sat, 29 Dec 2012 18:47:59 +0000"  >&lt;p&gt;I like.  Please add the comments (comments near where some of these questions are would be good) and please post what an example run&apos;s output looks like (instead of tests)?&lt;/p&gt;

&lt;p&gt;change to o.a.h.h.snapshot? (my fault, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7207&quot; title=&quot;Consolidate snapshot related classes into fewer packages&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7207&quot;&gt;&lt;del&gt;HBASE-7207&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; org.apache.hadoop.hbase.snapshot.tool;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;class Javadoc?  what is this for (for someone looking only at the code?)&lt;/p&gt;

&lt;p&gt;Log when dir doesn&apos;t exist (more helpful to have dir name here &amp;#8211; calling site doesn&apos;t have it)&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    snapshotDir = SnapshotDescriptionUtils.getCompletedSnapshotDir(snapshotName, rootDir);
+    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!fs.exists(snapshotDir)) &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Worth showing if in archive or in original file location? (could be follow on)&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+          &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (showFiles) {
+            &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.printf(&lt;span class=&quot;code-quote&quot;&gt;&quot;%8s %s/%s/%s/%s\n&quot;&lt;/span&gt;,
+              StringUtils.humanReadableInt(size), table, region, family, hfile);
+          }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The storefile case had if with two branches &amp;#8211; this logfile link doesn&apos;t need to do this?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void logFile (&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; server, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; logfile)
+            &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
+          HLogLink logLink = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HLogLink(conf, server, logfile);
+          &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; size = logLink.getFileStatus(fs).getLen();
+          logSize.addAndGet(size);
+          logsCount.addAndGet(1);
+
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="13541064" author="mbertozzi" created="Sun, 30 Dec 2012 11:30:13 +0000"  >&lt;p&gt;The tool gives you an idea of what is in the snapshot, and if the snapshot is valid.&lt;br/&gt;
.snapshotinfo dump, files dump and an idea of how many are in archive (extra space) and how many are shared with the table...&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$ hbase org.apache.hadoop.hbase.snapshot.SnapshotInfo -snapshot test-snapshot -files
Snapshot Info
----------------------------------------
   Name: test-snapshot
   Type: DISABLED
  Table: test-table
Version: 0
Created: 2012-12-30T11:21:21

Snapshot Files
----------------------------------------
   52.4k test-table/02ba3a0f8964669520cf96bb4e314c60/cf/bdf29c39da2a4f2b81889eb4f7b18107 (archive)
   52.4k test-table/02ba3a0f8964669520cf96bb4e314c60/cf/1e06029d0a2a4a709051b417aec88291 (archive)
   86.8k test-table/02ba3a0f8964669520cf96bb4e314c60/cf/506f601e14dc4c74a058be5843b99577 (archive)
   52.4k test-table/02ba3a0f8964669520cf96bb4e314c60/cf/5c7f6916ab724eacbcea218a713941c4 (archive)
  293.4k test-table/02ba3a0f8964669520cf96bb4e314c60/cf/aec5e33a6564441d9bd423e31fc93abb (archive)
   52.4k test-table/02ba3a0f8964669520cf96bb4e314c60/cf/97782b2fbf0743edaacd8fef06ba51e4 (archive)

6 HFiles (6 in archive), total size 589.7k (0.00% 0.0 shared with the source table)
0 Logs, total size 0.0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;The storefile case had if with two branches &#8211; this logfile link doesn&apos;t need to do this?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I&apos;ve skipped this one, because I think that in 90% of the cases logs are in the archive.&lt;/p&gt;</comment>
                            <comment id="13541071" author="mbertozzi" created="Sun, 30 Dec 2012 12:13:28 +0000"  >&lt;p&gt;Added some comment&lt;br/&gt;
the archive/NOT FOUND file status&lt;br/&gt;
and the table descriptor dump (aka hbase shell describe)&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
   52.4k test-table/e5983c6d60a60e4f9a1cc8bc6617b75f/cf/eea089030d544028a2fc67adc4575513 
   52.4k test-table/e5983c6d60a60e4f9a1cc8bc6617b75f/cf/14a2189ebc8e4f3db9ab5a08f1da1b1e (archive)
       - test-table/e5983c6d60a60e4f9a1cc8bc6617b75f/cf/d40d6b5b3c43470a89287ed73e5c086e (NOT FOUND)
   52.4k test-table/e5983c6d60a60e4f9a1cc8bc6617b75f/cf/34c02cea48c44ffe91936498eb74d2e2 
   52.4k test-table/e5983c6d60a60e4f9a1cc8bc6617b75f/cf/2819041820f04bf1a4011066791362ad 

**************************************************************
BAD SNAPSHOT: 1 hfile(s) and 0 log(s) missing.
**************************************************************
4 HFiles (1 in archive), total size 209.4k (75.00% 157.1k shared with the source table)
0 Logs, total size 0.0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13541445" author="jmhsieh" created="Mon, 31 Dec 2012 18:37:53 +0000"  >&lt;p&gt;Lgtm, +1.  Please fix this nit before commtting to the offline and online snapshots branches!&lt;/p&gt;

&lt;p&gt;nit: spelling.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  /**
+   * Dump the @{SnapshotDescriptionh}
+   */
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="13542248" author="mbertozzi" created="Wed, 2 Jan 2013 17:29:39 +0000"  >&lt;p&gt;v2 fixes the @&lt;/p&gt;
{SnapshotDescriptionh}</comment>
                            <comment id="13543379" author="jmhsieh" created="Thu, 3 Jan 2013 22:46:34 +0000"  >&lt;p&gt;If that&apos;s all that&apos;s been fixed in v2 go ahead and commit. (generally, if we +1 with only nits just fix the nit as suggested and commit).&lt;/p&gt;</comment>
                            <comment id="13775422" author="stack" created="Mon, 23 Sep 2013 18:31:28 +0000"  >&lt;p&gt;Marking closed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12560966" name="HBASE-7354-v0.patch" size="9613" author="mbertozzi" created="Fri, 14 Dec 2012 12:57:58 +0000"/>
                            <attachment id="12562716" name="HBASE-7354-v1.patch" size="12047" author="mbertozzi" created="Sun, 30 Dec 2012 12:13:28 +0000"/>
                            <attachment id="12562929" name="HBASE-7354-v2.patch" size="12051" author="mbertozzi" created="Wed, 2 Jan 2013 17:31:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 29 Dec 2012 18:47:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>297849</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i14vlz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>236586</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>