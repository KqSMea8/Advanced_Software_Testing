<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:40:58 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-13217/HBASE-13217.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-13217] Procedure fails due to ZK issue</title>
                <link>https://issues.apache.org/jira/browse/HBASE-13217</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;When ever I try to flush explicitly in the trunk code the flush procedure fails due to ZK issue&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ERROR: org.apache.hadoop.hbase.errorhandling.ForeignException$ProxyThrowable via stobdtserver3,16040,1426172670959:org.apache.hadoop.hbase.errorhandling.ForeignException$ProxyThrowable: java.io.IOException: org.apache.zookeeper.KeeperException$NoNodeException: KeeperErrorCode = NoNode &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; /hbase/flush-table-proc/acquired/TestTable/stobdtserver3,16040,1426172670959
        at org.apache.hadoop.hbase.errorhandling.ForeignExceptionDispatcher.rethrowException(ForeignExceptionDispatcher.java:83)
        at org.apache.hadoop.hbase.procedure.Procedure.isCompleted(Procedure.java:368)
        at org.apache.hadoop.hbase.procedure.flush.MasterFlushTableProcedureManager.isProcedureDone(MasterFlushTableProcedureManager.java:196)
        at org.apache.hadoop.hbase.master.MasterRpcServices.isProcedureDone(MasterRpcServices.java:905)
        at org.apache.hadoop.hbase.protobuf.generated.MasterProtos$MasterService$2.callBlockingMethod(MasterProtos.java:47019)
        at org.apache.hadoop.hbase.ipc.RpcServer.call(RpcServer.java:2073)
        at org.apache.hadoop.hbase.ipc.CallRunner.run(CallRunner.java:107)
        at org.apache.hadoop.hbase.ipc.RpcExecutor.consumerLoop(RpcExecutor.java:130)
        at org.apache.hadoop.hbase.ipc.RpcExecutor$1.run(RpcExecutor.java:107)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
Caused by: org.apache.hadoop.hbase.errorhandling.ForeignException$ProxyThrowable: java.io.IOException: org.apache.zookeeper.KeeperException$NoNodeException: KeeperErrorCode = NoNode &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; /hbase/flush-table-proc/acquired/TestTable/stobdtserver3,16040,1426172670959
        at org.apache.hadoop.hbase.procedure.Subprocedure.cancel(Subprocedure.java:273)
        at org.apache.hadoop.hbase.procedure.ProcedureMember.controllerConnectionFailure(ProcedureMember.java:225)
        at org.apache.hadoop.hbase.procedure.ZKProcedureMemberRpcs.sendMemberAcquired(ZKProcedureMemberRpcs.java:254)
        at org.apache.hadoop.hbase.procedure.Subprocedure.call(Subprocedure.java:166)
        at org.apache.hadoop.hbase.procedure.Subprocedure.call(Subprocedure.java:52)
        at java.util.concurrent.FutureTask.run(FutureTask.java:262)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
        ... 1 more

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Once this occurs, even on restart of the RS the RS becomes unusable.  I have verified that the ZK remains intact and there is no problem with it.  a bit older version of trunk ( 3months) does not have this problem.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12781449">HBASE-13217</key>
            <summary>Procedure fails due to ZK issue</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jerryhe">Jerry He</assignee>
                                    <reporter username="ram_krish">ramkrishna.s.vasudevan</reporter>
                        <labels>
                    </labels>
                <created>Thu, 12 Mar 2015 09:39:11 +0000</created>
                <updated>Mon, 31 Aug 2015 22:39:51 +0000</updated>
                            <resolved>Tue, 12 May 2015 18:12:46 +0000</resolved>
                                    <version>2.0.0</version>
                    <version>1.0.1</version>
                    <version>1.1.0</version>
                    <version>0.98.12</version>
                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>0.98.13</fixVersion>
                    <fixVersion>1.0.2</fixVersion>
                    <fixVersion>1.2.0</fixVersion>
                    <fixVersion>1.1.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>14</watches>
                                                                <comments>
                            <comment id="14358388" author="ram_krish" created="Thu, 12 Mar 2015 09:44:13 +0000"  >&lt;p&gt;The stack trace that we get is &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ble-proc
2015-03-12 20:41:07,914 INFO  [(stobdtserver3,16040,1426172670959)-proc-coordinator-pool3-thread-1] procedure.Procedure: Starting procedure &apos;TestTable&apos;
2015-03-12 20:41:07,916 INFO  [main-EventThread] procedure.ZKProcedureMemberRpcs: Received procedure start children changed event: /hbase/flush-table-proc/acquired
2015-03-12 20:41:07,917 INFO  [(stobdtserver3,16040,1426172670959)-proc-coordinator-pool3-thread-1] procedure.Procedure: Procedure &apos;TestTable&apos; execution completed
2015-03-12 20:41:07,917 INFO  [(stobdtserver3,16040,1426172670959)-proc-coordinator-pool3-thread-1] procedure.ZKProcedureUtil: Clearing all znodes &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; procedure TestTableincluding nodes /hbase/flush-table-proc/acquired /hbase/flush-table-proc/reached /hbase/flush-table-proc/abort
2015-03-12 20:41:07,920 INFO  [main-EventThread] procedure.ZKProcedureMemberRpcs: Received procedure start children changed event: /hbase/flush-table-proc/acquired
2015-03-12 20:41:07,922 INFO  [B.defaultRpcServer.handler=15,queue=0,port=16040] flush.MasterFlushTableProcedureManager: Done waiting - exec procedure flush-table-proc &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &apos;TestTable&apos;
2015-03-12 20:41:07,930 INFO  [B.defaultRpcServer.handler=15,queue=0,port=16040] flush.MasterFlushTableProcedureManager: Master flush table procedure is successful!
2015-03-12 20:41:07,939 ERROR [member: &apos;stobdtserver3,16040,1426172670959&apos; subprocedure-pool4-thread-1] procedure.ProcedureMember: Failed to acquire barrier &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; procedure: TestTable and member: stobdtserver3,16040,1426172670959
java.io.IOException: org.apache.zookeeper.KeeperException$NoNodeException: KeeperErrorCode = NoNode &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; /hbase/flush-table-proc/acquired/TestTable/stobdtserver3,16040,1426172670959
        at org.apache.hadoop.hbase.procedure.ZKProcedureMemberRpcs.sendMemberAcquired(ZKProcedureMemberRpcs.java:254)
        at org.apache.hadoop.hbase.procedure.Subprocedure.call(Subprocedure.java:166)
        at org.apache.hadoop.hbase.procedure.Subprocedure.call(Subprocedure.java:52)
        at java.util.concurrent.FutureTask.run(FutureTask.java:262)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
Caused by: org.apache.zookeeper.KeeperException$NoNodeException: KeeperErrorCode = NoNode &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; /hbase/flush-table-proc/acquired/TestTable/stobdtserver3,16040,1426172670959
        at org.apache.zookeeper.KeeperException.create(KeeperException.java:111)
        at org.apache.zookeeper.KeeperException.create(KeeperException.java:51)
        at org.apache.zookeeper.ZooKeeper.create(ZooKeeper.java:783)
        at org.apache.hadoop.hbase.zookeeper.RecoverableZooKeeper.createNonSequential(RecoverableZooKeeper.java:512)
        at org.apache.hadoop.hbase.zookeeper.RecoverableZooKeeper.create(RecoverableZooKeeper.java:491)
        at org.apache.hadoop.hbase.zookeeper.ZKUtil.createAndFailSilent(ZKUtil.java:1257)
        at org.apache.hadoop.hbase.zookeeper.ZKUtil.createAndFailSilent(ZKUtil.java:1246)
        at org.apache.hadoop.hbase.zookeeper.ZKUtil.createAndFailSilent(ZKUtil.java:1229)
        at org.apache.hadoop.hbase.procedure.ZKProcedureMemberRpcs.sendMemberAcquired(ZKProcedureMemberRpcs.java:245)
        ... 6 more
2015-03-12 20:41:07,941 ERROR [member: &apos;stobdtserver3,16040,1426172670959&apos; subprocedure-pool4-thread-1] procedure.Subprocedure: Failed to acquire barrier &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; procedure: TestTable and member: stobdtserver3,16040,1426172670959
java.io.IOException: org.apache.zookeeper.KeeperException$NoNodeException: KeeperErrorCode = NoNode &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; /hbase/flush-table-proc/acquired/TestTable/stobdtserver3,16040,1426172670959
        at org.apache.hadoop.hbase.procedure.ZKProcedureMemberRpcs.sendMemberAcquired(ZKProcedureMemberRpcs.java:254)
        at org.apache.hadoop.hbase.procedure.Subprocedure.call(Subprocedure.java:166)
        at org.apache.hadoop.hbase.procedure.Subprocedure.call(Subprocedure.java:52)
        at java.util.concurrent.FutureTask.run(FutureTask.java:262)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
Caused by: org.apache.zookeeper.KeeperException$NoNodeException: KeeperErrorCode = NoNode &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; /hbase/flush-table-proc/acquired/TestTable/stobdtserver3,16040,1426172670959
        at org.apache.zookeeper.KeeperException.create(KeeperException.java:111)
        at org.apache.zookeeper.KeeperException.create(KeeperException.java:51)
        at org.apache.zookeeper.ZooKeeper.create(ZooKeeper.java:783)
        at org.apache.hadoop.hbase.zookeeper.RecoverableZooKeeper.createNonSequential(RecoverableZooKeeper.java:512)
        at org.apache.hadoop.hbase.zookeeper.RecoverableZooKeeper.create(RecoverableZooKeeper.java:491)
        at org.apache.hadoop.hbase.zookeeper.ZKUtil.createAndFailSilent(ZKUtil.java:1257)
        at org.apache.hadoop.hbase.zookeeper.ZKUtil.createAndFailSilent(ZKUtil.java:1246)
        at org.apache.hadoop.hbase.zookeeper.ZKUtil.createAndFailSilent(ZKUtil.java:1229)
        at org.apache.hadoop.hbase.procedure.ZKProcedureMemberRpcs.sendMemberAcquired(ZKProcedureMemberRpcs.java:245)
        ... 6 more
2015-03-12 20:41:07,952 INFO  [main-EventThread] procedure.ZKProcedureMemberRpcs: Received created event:/hbase/flush-table-proc/abort/TestTable
2015-03-12 20:41:07,953 ERROR [member: &apos;stobdtserver3,16040,1426172670959&apos; subprocedure-pool4-thread-1] procedure.Subprocedure: Subprocedure &apos;TestTable&apos; aborting due to a ForeignException!
java.io.IOException via stobdtserver3,16040,1426172670959:java.io.IOException: org.apache.zookeeper.KeeperException$NoNodeException: KeeperErrorCode = NoNode &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; /hbase/flush-table-proc/acquired/TestTable/stobdtserver3,16040,1426172670959
        at org.apache.hadoop.hbase.errorhandling.ForeignExceptionDispatcher.rethrowException(ForeignExceptionDispatcher.java:83)
        at org.apache.hadoop.hbase.procedure.Procedure.waitForLatch(Procedure.java:397)
        at org.apache.hadoop.hbase.procedure.Subprocedure.waitForReachedGlobalBarrier(Subprocedure.java:299)
        at org.apache.hadoop.hbase.procedure.Subprocedure.call(Subprocedure.java:171)
        at org.apache.hadoop.hbase.procedure.Subprocedure.call(Subprocedure.java:52)
        at java.util.concurrent.FutureTask.run(FutureTask.java:262)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
Caused by: java.io.IOException: org.apache.zookeeper.KeeperException$NoNodeException: KeeperErrorCode = NoNode &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; /hbase/flush-table-proc/acquired/TestTable/stobdtserver3,16040,1426172670959
        at org.apache.hadoop.hbase.procedure.ZKProcedureMemberRpcs.sendMemberAcquired(ZKProcedureMemberRpcs.java:254)
        at org.apache.hadoop.hbase.procedure.Subprocedure.call(Subprocedure.java:166)
        ... 5 more
Caused by: org.apache.zookeeper.KeeperException$NoNodeException: KeeperErrorCode = NoNode &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; /hbase/flush-table-proc/acquired/TestTable/stobdtserver3,16040,1426172670959
        at org.apache.zookeeper.KeeperException.create(KeeperException.java:111)
        at org.apache.zookeeper.KeeperException.create(KeeperException.java:51)
        at org.apache.zookeeper.ZooKeeper.create(ZooKeeper.java:783)
        at org.apache.hadoop.hbase.zookeeper.RecoverableZooKeeper.createNonSequential(RecoverableZooKeeper.java:512)
        at org.apache.hadoop.hbase.zookeeper.RecoverableZooKeeper.create(RecoverableZooKeeper.java:491)
        at org.apache.hadoop.hbase.zookeeper.ZKUtil.createAndFailSilent(ZKUtil.java:1257)
        at org.apache.hadoop.hbase.zookeeper.ZKUtil.createAndFailSilent(ZKUtil.java:1246)
        at org.apache.hadoop.hbase.zookeeper.ZKUtil.createAndFailSilent(ZKUtil.java:1229)
        at org.apache.hadoop.hbase.procedure.ZKProcedureMemberRpcs.sendMemberAcquired(ZKProcedureMemberRpcs.java:245)
        ... 6 more
2015-03-12 20:41:07,953 ERROR [main-EventThread] procedure.ProcedureMember: Propagating foreign exception to subprocedure TestTable
org.apache.hadoop.hbase.errorhandling.ForeignException$ProxyThrowable via stobdtserver3,16040,1426172670959:org.apache.hadoop.hbase.errorhandling.ForeignException$ProxyThrowable: java.io.IOException: org.apache.zookeeper.KeeperException$NoNodeException: KeeperErrorCode = NoNode &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; /hbase/flush-table-proc/acquired/TestTable/stobdtserver3,16040,1426172670959
        at org.apache.hadoop.hbase.errorhandling.ForeignException.deserialize(ForeignException.java:171)
        at org.apache.hadoop.hbase.procedure.ZKProcedureMemberRpcs.abort(ZKProcedureMemberRpcs.java:329)
        at org.apache.hadoop.hbase.procedure.ZKProcedureMemberRpcs$1.nodeCreated(ZKProcedureMemberRpcs.java:94)
        at org.apache.hadoop.hbase.zookeeper.ZooKeeperWatcher.process(ZooKeeperWatcher.java:405)
        at org.apache.zookeeper.ClientCnxn$EventThread.processEvent(ClientCnxn.java:522)
        at org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:498)
Caused by: org.apache.hadoop.hbase.errorhandling.ForeignException$ProxyThrowable: java.io.IOException: org.apache.zookeeper.KeeperException$NoNodeException: KeeperErrorCode = NoNode &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; /hbase/flush-table-proc/acquired/TestTable/stobdtserver3,16040,1426172670959
        at org.apache.hadoop.hbase.procedure.Subprocedure.cancel(Subprocedure.java:273)
        at org.apache.hadoop.hbase.procedure.ProcedureMember.controllerConnectionFailure(ProcedureMember.java:225)
        at org.apache.hadoop.hbase.procedure.ZKProcedureMemberRpcs.sendMemberAcquired(ZKProcedureMemberRpcs.java:254)
        at org.apache.hadoop.hbase.procedure.Subprocedure.call(Subprocedure.java:166)
        at org.apache.hadoop.hbase.procedure.Subprocedure.call(Subprocedure.java:52)
        at java.util.concurrent.FutureTask.run(FutureTask.java:262)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
2015-03-12 20:41:07,960 INFO  [member: &apos;stobdtserver3,16040,1426172670959&apos; subprocedure-pool4-thread-1] flush.FlushTableSubprocedure: Aborting all flush region subprocedure task threads &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &apos;TestTable&apos; due to error
java.io.IOException via stobdtserver3,16040,1426172670959:java.io.IOException: org.apache.zookeeper.KeeperException$NoNodeException: KeeperErrorCode = NoNode &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; /hbase/flush-table-proc/acquired/TestTable/stobdtserver3,16040,1426172670959
        at org.apache.hadoop.hbase.errorhandling.ForeignExceptionDispatcher.rethrowException(ForeignExceptionDispatcher.java:83)
        at org.apache.hadoop.hbase.procedure.Procedure.waitForLatch(Procedure.java:397)
        at org.apache.hadoop.hbase.procedure.Subprocedure.waitForReachedGlobalBarrier(Subprocedure.java:299)
        at org.apache.hadoop.hbase.procedure.Subprocedure.call(Subprocedure.java:171)
        at org.apache.hadoop.hbase.procedure.Subprocedure.call(Subprocedure.java:52)
        at java.util.concurrent.FutureTask.run(FutureTask.java:262)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
Caused by: java.io.IOException: org.apache.zookeeper.KeeperException$NoNodeException: KeeperErrorCode = NoNode &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; /hbase/flush-table-proc/acquired/TestTable/stobdtserver3,16040,1426172670959
        at org.apache.hadoop.hbase.procedure.ZKProcedureMemberRpcs.sendMemberAcquired(ZKProcedureMemberRpcs.java:254)
        at org.apache.hadoop.hbase.procedure.Subprocedure.call(Subprocedure.java:166)
        ... 5 more
Caused by: org.apache.zookeeper.KeeperException$NoNodeException: KeeperErrorCode = NoNode &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; /hbase/flush-table-proc/acquired/TestTable/stobdtserver3,16040,1426172670959
        at org.apache.zookeeper.KeeperException.create(KeeperException.java:111)
        at org.apache.zookeeper.KeeperException.create(KeeperException.java:51)
        at org.apache.zookeeper.ZooKeeper.create(ZooKeeper.java:783)
        at org.apache.hadoop.hbase.zookeeper.RecoverableZooKeeper.createNonSequential(RecoverableZooKeeper.java:512)
        at org.apache.hadoop.hbase.zookeeper.RecoverableZooKeeper.create(RecoverableZooKeeper.java:491)
        at org.apache.hadoop.hbase.zookeeper.ZKUtil.createAndFailSilent(ZKUtil.java:1257)
        at org.apache.hadoop.hbase.zookeeper.ZKUtil.createAndFailSilent(ZKUtil.java:1246)
        at org.apache.hadoop.hbase.zookeeper.ZKUtil.createAndFailSilent(ZKUtil.java:1229)
        at org.apache.hadoop.hbase.procedure.ZKProcedureMemberRpcs.sendMemberAcquired(ZKProcedureMemberRpcs.java:245)
        ... 6 more
2015-03-12 20:41:07,961 ERROR [main-EventThread] procedure.Subprocedure: Propagating foreign exception to subprocedure TestTable
org.apache.hadoop.hbase.errorhandling.ForeignException$ProxyThrowable via stobdtserver3,16040,1426172670959:org.apache.hadoop.hbase.errorhandling.ForeignException$ProxyThrowable: java.io.IOException: org.apache.zookeeper.KeeperException$NoNodeException: KeeperErrorCode = NoNode &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; /hbase/flush-table-proc/acquired/TestTable/stobdtserver3,16040,1426172670959
        at org.apache.hadoop.hbase.errorhandling.ForeignException.deserialize(ForeignException.java:171)
        at org.apache.hadoop.hbase.procedure.ZKProcedureMemberRpcs.abort(ZKProcedureMemberRpcs.java:329)
        at org.apache.hadoop.hbase.procedure.ZKProcedureMemberRpcs$1.nodeCreated(ZKProcedureMemberRpcs.java:94)
        at org.apache.hadoop.hbase.zookeeper.ZooKeeperWatcher.process(ZooKeeperWatcher.java:405)
        at org.apache.zookeeper.ClientCnxn$EventThread.processEvent(ClientCnxn.java:522)
        at org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:498)
Caused by: org.apache.hadoop.hbase.errorhandling.ForeignException$ProxyThrowable: java.io.IOException: org.apache.zookeeper.KeeperException$NoNodeException: KeeperErrorCode = NoNode &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; /hbase/flush-table-proc/acquired/TestTable/stobdtserver3,16040,1426172670959
        at org.apache.hadoop.hbase.procedure.Subprocedure.cancel(Subprocedure.java:273)
        at org.apache.hadoop.hbase.procedure.ProcedureMember.controllerConnectionFailure(ProcedureMember.java:225)
        at org.apache.hadoop.hbase.procedure.ZKProcedureMemberRpcs.sendMemberAcquired(ZKProcedureMemberRpcs.java:254)
        at org.apache.hadoop.hbase.procedure.Subprocedure.call(Subprocedure.java:166)
        at org.apache.hadoop.hbase.procedure.Subprocedure.call(Subprocedure.java:52)
        at java.util.concurrent.FutureTask.run(FutureTask.java:262)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
2015-03-12 20:41:07,962 INFO  [main-EventThread] procedure.ZKProcedureMemberRpcs: Received procedure abort children changed event: /hbase/flush-table-proc/abort
2015-03-12 20:41:07,963 ERROR [main-EventThread] procedure.ProcedureMember: Propagating foreign exception to subprocedure TestTable
org.apache.hadoop.hbase.errorhandling.ForeignException$ProxyThrowable via stobdtserver3,16040,1426172670959:org.apache.hadoop.hbase.errorhandling.ForeignException$ProxyThrowable: java.io.IOException: org.apache.zookeeper.KeeperException$NoNodeException: KeeperErrorCode = NoNode &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; /hbase/flush-table-proc/acquired/TestTable/stobdtserver3,16040,1426172670959
        at org.apache.hadoop.hbase.errorhandling.ForeignException.deserialize(ForeignException.java:171)
        at org.apache.hadoop.hbase.procedure.ZKProcedureMemberRpcs.abort(ZKProcedureMemberRpcs.java:329)
        at org.apache.hadoop.hbase.procedure.ZKProcedureMemberRpcs.watchForAbortedProcedures(ZKProcedureMemberRpcs.java:142)
        at org.apache.hadoop.hbase.procedure.ZKProcedureMemberRpcs.access$200(ZKProcedureMemberRpcs.java:55)
        at org.apache.hadoop.hbase.procedure.ZKProcedureMemberRpcs$1.nodeChildrenChanged(ZKProcedureMemberRpcs.java:110)
        at org.apache.hadoop.hbase.zookeeper.ZooKeeperWatcher.process(ZooKeeperWatcher.java:426)
        at org.apache.zookeeper.ClientCnxn$EventThread.processEvent(ClientCnxn.java:522)
        at org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:498)
Caused by: org.apache.hadoop.hbase.errorhandling.ForeignException$ProxyThrowable: java.io.IOException: org.apache.zookeeper.KeeperException$NoNodeException: KeeperErrorCode = NoNode &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; /hbase/flush-table-proc/acquired/TestTable/stobdtserver3,16040,1426172670959
        at org.apache.hadoop.hbase.procedure.Subprocedure.cancel(Subprocedure.java:273)
        at org.apache.hadoop.hbase.procedure.ProcedureMember.controllerConnectionFailure(ProcedureMember.java:225)
        at org.apache.hadoop.hbase.procedure.ZKProcedureMemberRpcs.sendMemberAcquired(ZKProcedureMemberRpcs.java:254)
        at org.apache.hadoop.hbase.procedure.Subprocedure.call(Subprocedure.java:166)
        at org.apache.hadoop.hbase.procedure.Subprocedure.call(Subprocedure.java:52)
        at java.util.concurrent.FutureTask.run(FutureTask.java:262)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
2015-03-12 20:41:07,964 ERROR [main-EventThread] procedure.Subprocedure: Propagating foreign exception to subprocedure TestTable
org.apache.hadoop.hbase.errorhandling.ForeignException$ProxyThrowable via stobdtserver3,16040,1426172670959:org.apache.hadoop.hbase.errorhandling.ForeignException$ProxyThrowable: java.io.IOException: org.apache.zookeeper.KeeperException$NoNodeException: KeeperErrorCode = NoNode &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; /hbase/flush-table-proc/acquired/TestTable/stobdtserver3,16040,1426172670959
        at org.apache.hadoop.hbase.errorhandling.ForeignException.deserialize(ForeignException.java:171)
        at org.apache.hadoop.hbase.procedure.ZKProcedureMemberRpcs.abort(ZKProcedureMemberRpcs.java:329)
        at org.apache.hadoop.hbase.procedure.ZKProcedureMemberRpcs.watchForAbortedProcedures(ZKProcedureMemberRpcs.java:142)
        at org.apache.hadoop.hbase.procedure.ZKProcedureMemberRpcs.access$200(ZKProcedureMemberRpcs.java:55)
        at org.apache.hadoop.hbase.procedure.ZKProcedureMemberRpcs$1.nodeChildrenChanged(ZKProcedureMemberRpcs.java:110)
        at org.apache.hadoop.hbase.zookeeper.ZooKeeperWatcher.process(ZooKeeperWatcher.java:426)
        at org.apache.zookeeper.ClientCnxn$EventThread.processEvent(ClientCnxn.java:522)
        at org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:498)
Caused by: org.apache.hadoop.hbase.errorhandling.ForeignException$ProxyThrowable: java.io.IOException: org.apache.zookeeper.KeeperException$NoNodeException: KeeperErrorCode = NoNode &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; /hbase/flush-table-proc/acquired/TestTable/stobdtserver3,16040,1426172670959
        at org.apache.hadoop.hbase.procedure.Subprocedure.cancel(Subprocedure.java:273)
        at org.apache.hadoop.hbase.procedure.ProcedureMember.controllerConnectionFailure(ProcedureMember.java:225)
        at org.apache.hadoop.hbase.procedure.ZKProcedureMemberRpcs.sendMemberAcquired(ZKProcedureMemberRpcs.java:254)
        at org.apache.hadoop.hbase.procedure.Subprocedure.call(Subprocedure.java:166)
        at org.apache.hadoop.hbase.procedure.Subprocedure.call(Subprocedure.java:52)
        at java.util.concurrent.FutureTask.run(FutureTask.java:262)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14358600" author="ram_krish" created="Thu, 12 Mar 2015 12:43:04 +0000"  >&lt;p&gt;If somebody is ready to pick it up, pls feel free to do so. Otherwise will pick this up in a day or two.&lt;/p&gt;</comment>
                            <comment id="14362639" author="jinghe" created="Mon, 16 Mar 2015 00:59:27 +0000"  >&lt;p&gt;Hi, Ram&lt;/p&gt;

&lt;p&gt;I just had a chance to test it on a cluster (1 master, 2 rs) with latest 2.0 build.  flush table works ok.&lt;br/&gt;
It looks like a race condition?  Are you able to re-create it constantly?&lt;br/&gt;
If you turn on DEBUG logging, we will be able to see more details and see what is wrong.&lt;/p&gt;</comment>
                            <comment id="14362735" author="ram_krish" created="Mon, 16 Mar 2015 04:47:46 +0000"  >&lt;p&gt;I am able to recreate in the test cluster that I have now.  I will have a deeper look into this. And close if this if it is really only my issue.&lt;/p&gt;</comment>
                            <comment id="14362869" author="ram_krish" created="Mon, 16 Mar 2015 07:34:27 +0000"  >&lt;p&gt;I am closing this issue for now.  It still occurs for me in our internal branch last updated on March 12th.  May be there is something internally that is causing this. When I raised this issue I verified cross version also. May be that was the reason the flush was failing even if the RS was a pure trunk based version. Thanks to Jerry he for helping in verifying the issue.&lt;/p&gt;</comment>
                            <comment id="14519631" author="syuanjiang" created="Wed, 29 Apr 2015 16:07:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ram_krish&quot; class=&quot;user-hover&quot; rel=&quot;ram_krish&quot;&gt;ramkrishna.s.vasudevan&lt;/a&gt; are you still seeing this issue?  I am curious about your investigation and why you close the issue (cannot repro from master?)&lt;/p&gt;

&lt;p&gt;I am interested because we had similar failure in flush procedure from branch-1.1 system test run (though it is not from ZK, the RS throws ForeignException complaining about region not opened).  &lt;/p&gt;</comment>
                            <comment id="14521101" author="syuanjiang" created="Thu, 30 Apr 2015 08:09:22 +0000"  >&lt;p&gt;It can repro recently (April 20, 2015) in branch-1.&lt;/p&gt;</comment>
                            <comment id="14521110" author="syuanjiang" created="Thu, 30 Apr 2015 08:18:02 +0000"  >&lt;p&gt;Actually, we have reproduced the same issue in our branch-1.1 testing on April 20, 2015.&lt;/p&gt;

&lt;p&gt;Here is the issue:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Master issued &apos;reached&apos; request as part of 2-phase-commit, the problem is that it did not wait for all RS to response and declare that the procedure is done and deleted the znodes.&lt;/li&gt;
	&lt;li&gt;one RS completed the 2nd phase and tried to update the &apos;reached&apos; znode, but znode was gone and hence threw exception.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Here is what the znode looks like when MASTER thinks the procedure is completed (obviously, myregionserver-5 is missing under &apos;reached&apos; znode&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2015-04-20 11:50:19,004 DEBUG [(myclustermaster.novalocal,16000,1429530381377)-proc-coordinator-pool2-thread-1] procedure.ZKProcedureCoordinatorRpcs: Creating reached barrier zk node:/hbase-unsecure/flush-table-proc/reached/MyTargetTable
2015-04-20 11:50:19,010 DEBUG [main-EventThread] procedure.ZKProcedureCoordinatorRpcs: Node created: /hbase-unsecure/flush-table-proc/reached/MyTargetTable/myregionserver-4.novalocal,16020,1429530401185
2015-04-20 11:50:19,010 DEBUG [main-EventThread] procedure.ZKProcedureUtil: Current zk system:
2015-04-20 11:50:19,011 DEBUG [main-EventThread] procedure.ZKProcedureUtil: |-/hbase-unsecure/flush-table-proc
2015-04-20 11:50:19,011 DEBUG [main-EventThread] procedure.ZKProcedureUtil: |-acquired
2015-04-20 11:50:19,011 DEBUG [main-EventThread] procedure.ZKProcedureUtil: |----MyTargetTable
2015-04-20 11:50:19,012 DEBUG [main-EventThread] procedure.ZKProcedureUtil: |-------myregionserver-4.novalocal,16020,1429530401185
2015-04-20 11:50:19,012 DEBUG [main-EventThread] procedure.ZKProcedureUtil: |-------myregionserver-1.novalocal,16020,1429530398903
2015-04-20 11:50:19,013 DEBUG [main-EventThread] procedure.ZKProcedureUtil: |-------myregionserver-5.novalocal,16020,1429530399802
2015-04-20 11:50:19,013 DEBUG [main-EventThread] procedure.ZKProcedureUtil: |-------myregionserver-6.novalocal,16020,1429530404517
2015-04-20 11:50:19,014 DEBUG [main-EventThread] procedure.ZKProcedureUtil: |-------myclustermaster.novalocal,16020,1429530402734
2015-04-20 11:50:19,014 DEBUG [main-EventThread] procedure.ZKProcedureUtil: |-abort
2015-04-20 11:50:19,015 DEBUG [main-EventThread] procedure.ZKProcedureUtil: |-reached
2015-04-20 11:50:19,015 DEBUG [main-EventThread] procedure.ZKProcedureUtil: |----MyTargetTable
2015-04-20 11:50:19,016 DEBUG [main-EventThread] procedure.ZKProcedureUtil: |-------myregionserver-4.novalocal,16020,1429530401185
2015-04-20 11:50:19,016 DEBUG [main-EventThread] procedure.ZKProcedureUtil: |-------myregionserver-1.novalocal,16020,1429530398903
2015-04-20 11:50:19,017 DEBUG [main-EventThread] procedure.ZKProcedureUtil: |-------myregionserver-6.novalocal,16020,1429530404517
2015-04-20 11:50:19,017 DEBUG [main-EventThread] procedure.ZKProcedureUtil: |-------myclustermaster.novalocal,16020,1429530402734
2015-04-20 11:50:19,018 INFO  [(myclustermaster.novalocal,16000,1429530381377)-proc-coordinator-pool2-thread-1] procedure.Procedure: Procedure &apos;MyTargetTable&apos; execution completed
2015-04-20 11:50:19,018 INFO  [(myclustermaster.novalocal,16000,1429530381377)-proc-coordinator-pool2-thread-1] procedure.ZKProcedureUtil: Clearing all znodes for procedure MyTargetTable including nodes /hbase-unsecure/flush-table-proc/acquired /hbase-unsecure/flush-table-proc/reached /hbase-unsecure/flush-table-proc/abort
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14521118" author="mbertozzi" created="Thu, 30 Apr 2015 08:22:40 +0000"  >&lt;blockquote&gt;&lt;p&gt;Here is what the znode looks like when MASTER thinks the procedure is completed (obviously, myregionserver-5 is missing under &apos;reached&apos; znode&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;my first guess is that when the procedure started the regionserver-5 was in transition and not in the list. there should be a list of &quot;online regionservers&quot; that the procedure uses to setup the latch used to decide when everyone is completed. that procedure code doesn&apos;t tolerate region in transition, so that may be the problem you are seeing. (but may be something else, this is just my first guess without looking at the code)&lt;/p&gt;</comment>
                            <comment id="14523311" author="elserj" created="Fri, 1 May 2015 15:17:09 +0000"  >&lt;blockquote&gt;&lt;p&gt;that procedure code doesn&apos;t tolerate region in transition, so that may be the problem you are seeing&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Assuming your hunch is correct, isn&apos;t this a relatively easy fix? If a region is in transition, there shouldn&apos;t be anything to flush (so it&apos;s not &lt;em&gt;entirely&lt;/em&gt; incorrect that the master didn&apos;t know about it). So, if the master is correctly doing the 2pc over a sufficient set of servers to implement a synchronous flush, a region server which runs into the above error &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=syuanjiang&quot; class=&quot;user-hover&quot; rel=&quot;syuanjiang&quot;&gt;Stephen Yuan Jiang&lt;/a&gt; outlined can just ignore the ZK exception. It&apos;s not entirely the cleanest approach, but I think it would work.&lt;/p&gt;

&lt;p&gt;Am I way off base?&lt;/p&gt;</comment>
                            <comment id="14523362" author="mbertozzi" created="Fri, 1 May 2015 15:56:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=elserj&quot; class=&quot;user-hover&quot; rel=&quot;elserj&quot;&gt;Josh Elser&lt;/a&gt; I used &quot;region in transition&quot; to indicate a category of problems, RS in GC/restarting/reassigning/not-responding/... &lt;br/&gt;
the exception thrown here is just a side effect of the procedure framework used for something that was not supposed to do. it was designed for snapshot where if something fails you rollback everything cleanly and you report to the user. here failure or not failure some regions may have flushed, so the behavior is wrong. &lt;br/&gt;
with the proc-v2 code that will probably be in 1.2, we will solve once and for all all this kind of problem and the semantic of flush will be more clear for the user. &lt;br/&gt;
so, in my opinion if there is a quick fix for this that doesn&apos;t touch too much code  (e.g. ignoring the exception) is ok to put it in. otherwise since this is just a corner case and the exception doesn&apos;t really matter (and this problem is in by design) we should punt until 1.2 where we will have a proper fix.&lt;/p&gt;</comment>
                            <comment id="14523365" author="elserj" created="Fri, 1 May 2015 15:59:31 +0000"  >&lt;p&gt;Thanks for the clarification &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14526129" author="jinghe" created="Mon, 4 May 2015 01:10:04 +0000"  >&lt;p&gt;From what is shown and described, the problem can happen in normal situations (with no region transition, etc).&lt;br/&gt;
Or no?&lt;/p&gt;

&lt;p&gt;Here is a simple case.&lt;br/&gt;
The cluster has 3 region servers. table1 has 2 regions, one hosted on rs1 and one hosted on rs2.&lt;br/&gt;
When the master procedure is issued, all region servers will be triggered.  Master only waits for rs1 and rs2 to check in.&lt;br/&gt;
But rs3 will report in as well, but of course its vote will be ignored.&lt;br/&gt;
If rs3 is slower in response, it may try to report in after the master has said the procedure is complete and cleaned the procedure nodes.&lt;/p&gt;

&lt;p&gt;I wonder why we have not seen this problem in Snapshot procedure. It could happen there as well?&lt;/p&gt;</comment>
                            <comment id="14526225" author="mbertozzi" created="Mon, 4 May 2015 04:18:21 +0000"  >&lt;blockquote&gt;&lt;p&gt;The cluster has 3 region servers. table1 has 2 regions, one hosted on rs1 and one hosted on rs2.&lt;br/&gt;
When the master procedure is issued, all region servers will be triggered. Master only waits for rs1 and rs2 to check in.&lt;br/&gt;
But rs3 will report in as well, but of course its vote will be ignored.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;unless the code is changed, rs3 doesn&apos;t do anything because he doesn&apos;t host any region of the table.&lt;/p&gt;</comment>
                            <comment id="14526238" author="ram_krish" created="Mon, 4 May 2015 04:50:04 +0000"  >&lt;p&gt;bbq.ramkrishna.s.vasudevan are you still seeing this issue? I am curious about your investigation and why you close the issue (cannot repro from master?)&lt;br/&gt;
ACtually this thing happened to me continuously when I upgraded my internal version to one of the master version during that time.  whenever I called flush this was happening.  I did not get in to the details of it due to lack of time.&lt;/p&gt;

&lt;p&gt;Then later i upgraded the version that I had and this problem went off.  So one reason for closing was if there was some problem in my internal version this could have happened, but one thing to note is that that had nothing to do with flushes and procedures. But had a doubt that if there was any exception (runtime) then the flush procedures where not able to identify that (Just a wild guess).&lt;/p&gt;</comment>
                            <comment id="14526887" author="jinghe" created="Mon, 4 May 2015 17:21:39 +0000"  >&lt;p&gt;I took a quick look at the code, it seems that all the region servers would go thru the Procedure steps via ZK? &lt;br/&gt;
Only RS with no hosted region would do nothing in the procedure body. &lt;/p&gt;</comment>
                            <comment id="14527517" author="jinghe" created="Mon, 4 May 2015 23:03:07 +0000"  >&lt;p&gt;Thinking about it a little more.&lt;br/&gt;
Logically, the abstract Procedure framework on the RS does not have a way to know whether to skip this procedure until it gets down to the subprocedure implementation.&lt;br/&gt;
In Procedure 2, there are a couple of things we do:&lt;br/&gt;
1. Only notifies/triggers the region servers that are needed.&lt;br/&gt;
2. Provides a way for a RS to skip this procedure.&lt;/p&gt;

&lt;p&gt;For the current Procedure, we can only amend it so that a RS can choose to skip participating in the vote.&lt;/p&gt;</comment>
                            <comment id="14527681" author="mbertozzi" created="Tue, 5 May 2015 00:50:27 +0000"  >&lt;p&gt;I haven&apos;t looked at the code in awhile but in theory, the idea was:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;master broadcast the new operation via zk&lt;/li&gt;
	&lt;li&gt;each RS read the request, and it executes only if the request can be applied to the RS. (e.g. flush(table=foo) if that RS has no &quot;foo&quot; table has nothing to do, keep in mind that the master in general snapshot/flush keeps a list of &quot;regions online&quot; so the master already assume that kind of behavior from the RS)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;proc-v2 (not part of this jira) has a different way of sending messages to the regions involved in this operation and is based on AM notifications since we will tolerate move,  but the idea is like the above. if the RS has nothing todo with what we asked it will not partecipate. &lt;/p&gt;</comment>
                            <comment id="14527953" author="jinghe" created="Tue, 5 May 2015 05:30:11 +0000"  >&lt;p&gt;We will be good in Procedure-v2.  &lt;br/&gt;
We will just need a small fix here then.&lt;br/&gt;
Thanks.&lt;/p&gt;</comment>
                            <comment id="14536937" author="jinghe" created="Sat, 9 May 2015 22:42:05 +0000"  >&lt;p&gt;Guess you guys are probably busy with Procedure v2 work.&lt;br/&gt;
Don&apos;t want this bug to slip away.&lt;br/&gt;
I attached a patch. It basically does two changes:&lt;br/&gt;
1. If the subprocedure gets a local KeeperException, don&apos;t attempt to notify the master or other members  This is probably the original design.&lt;br/&gt;
2. If a subprocedure instance has error, only cancel this subprocedure. Do not cancel all subprocedure instances.&lt;/p&gt;</comment>
                            <comment id="14536988" author="hadoopqa" created="Sun, 10 May 2015 01:49:24 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12731757/HBASE-13217.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12731757/HBASE-13217.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 5a2ca43fa16a95d8db67e5a3d8b48e4d3f3a9aeb.&lt;br/&gt;
  ATTACHMENT ID: 12731757&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.1 2.5.2 2.6.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 1897 checkstyle errors (more than the master&apos;s current 1896 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 5 zombie test(s): &lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13992//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13992//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13992//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13992//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13992//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13992//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Javadoc warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13992//artifact/patchprocess/patchJavadocWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13992//artifact/patchprocess/patchJavadocWarnings.txt&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13992//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13992//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14537004" author="mbertozzi" created="Sun, 10 May 2015 02:59:49 +0000"  >&lt;p&gt;haven&apos;t really looked at the problem, but patch looks ok to me.&lt;br/&gt;
+1 for me, you can fix on commit the javadoc s/proName/procName and the checkstyle (if it is yours, I haven&apos;t checked that)&lt;/p&gt;</comment>
                            <comment id="14537315" author="jinghe" created="Sun, 10 May 2015 18:57:33 +0000"  >&lt;p&gt;Thanks for the review, Matteo.&lt;br/&gt;
I attached v2 to address the javadoc and checkstyle error.&lt;/p&gt;</comment>
                            <comment id="14537327" author="syuanjiang" created="Sun, 10 May 2015 19:46:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbertozzi&quot; class=&quot;user-hover&quot; rel=&quot;mbertozzi&quot;&gt;Matteo Bertozzi&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jerryhe&quot; class=&quot;user-hover&quot; rel=&quot;jerryhe&quot;&gt;Jerry He&lt;/a&gt;, I have a question for this approach: how safe to ignore all KeeperException? - what if it is a real exception (not the timing issue in this ticket)?  To me, it is too danger to make this kind of change (flush procedure might not matter; but snapshot procedure might give us incomplete snapshot).  If we can limit to only KeeperException.NoNodeException, the change would be safer - if the sub-procedure can talk to ZK successfully, but just some particular node not exist, it indicates that the master probably complete the procedure.  &lt;/p&gt;
</comment>
                            <comment id="14537380" author="hadoopqa" created="Sun, 10 May 2015 21:38:03 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12731813/HBASE-13217-v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12731813/HBASE-13217-v2.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 7bdacf53f41d7e3c6c6698c5d20fdcebaa10a1bb.&lt;br/&gt;
  ATTACHMENT ID: 12731813&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.1 2.5.2 2.6.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14000//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14000//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14000//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14000//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14000//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14000//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14000//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14000//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14537462" author="jinghe" created="Mon, 11 May 2015 00:35:31 +0000"  >&lt;p&gt;Hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=syuanjiang&quot; class=&quot;user-hover&quot; rel=&quot;syuanjiang&quot;&gt;Stephen Yuan Jiang&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks for your review and comment.&lt;/p&gt;

&lt;p&gt;I think the original intention of controllerConnectionFailure() matches what we are doing.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  /**
   * The connection to the &lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt; of the procedure group (member and coordinator) has been
   * broken/lost/failed. This should fail any interested subprocedure, but not attempt to notify
   * other members since we cannot reach them anymore.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Most of the sub-exceptions of KeeperException are more serious than NoNodeException: e.g connection, ACL, timeout, etc&lt;br/&gt;
In these cases, we have a stronger reason not to attempt to notify the master or other members via ZK abort.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;snapshot procedure might give us incomplete snapshot&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Can you explain?&lt;br/&gt;
We are not ignoring the KeeperException. We still abort locally.  We only skip Proactively trying to notify the master via ZK abort.&lt;br/&gt;
We have seen the proactive notification causes mess.&lt;br/&gt;
If this procedure member is needed in the snapshot, the entire procedure will still fail. The master coordinator is the overall judge and coordinator.&lt;/p&gt;</comment>
                            <comment id="14537851" author="syuanjiang" created="Mon, 11 May 2015 11:47:00 +0000"  >&lt;p&gt;sounds good.  thanks for the explanation.  &lt;/p&gt;

&lt;p&gt;+1 &lt;/p&gt;</comment>
                            <comment id="14537852" author="syuanjiang" created="Mon, 11 May 2015 11:47:03 +0000"  >&lt;p&gt;sounds good.  thanks for the explanation.  &lt;/p&gt;

&lt;p&gt;+1 &lt;/p&gt;</comment>
                            <comment id="14538219" author="jinghe" created="Mon, 11 May 2015 17:26:41 +0000"  >&lt;p&gt;Thanks.&lt;/p&gt;

&lt;p&gt;Will commit soon if there is no objection.&lt;/p&gt;</comment>
                            <comment id="14538859" author="hudson" created="Mon, 11 May 2015 23:21:31 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.1 #478 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.1/478/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.1/478/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13217&quot; title=&quot;Procedure fails due to ZK issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13217&quot;&gt;&lt;del&gt;HBASE-13217&lt;/del&gt;&lt;/a&gt; Procedure fails due to ZK issue (jerryjch: rev 22dad3775a1106e9f4a4a649ca0b2a28f2f66bb8)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/procedure/Subprocedure.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/procedure/ZKProcedureMemberRpcs.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/procedure/ProcedureMember.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14538877" author="jinghe" created="Mon, 11 May 2015 23:31:11 +0000"  >&lt;p&gt;Committed to branch 1+&lt;/p&gt;

&lt;p&gt;Attached 0.98 patch. &lt;br/&gt;
FYI  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;.  This is a bug fix.  It is good to get it into to 0.98 as well.&lt;/p&gt;</comment>
                            <comment id="14538883" author="apurtell" created="Mon, 11 May 2015 23:36:05 +0000"  >&lt;p&gt;Skimmed the 0.98 patch, lgtm&lt;/p&gt;

&lt;p&gt;Minor nit: Consider wrapping the LOG.debug call in LOG.isDebugEnabled(). Could be fixed up on commit.&lt;/p&gt;</comment>
                            <comment id="14538908" author="hudson" created="Mon, 11 May 2015 23:52:35 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.0 #908 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/908/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.0/908/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13217&quot; title=&quot;Procedure fails due to ZK issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13217&quot;&gt;&lt;del&gt;HBASE-13217&lt;/del&gt;&lt;/a&gt; Procedure fails due to ZK issue (jerryjch: rev 68a6c2b91cb5d863b4ca36b9421b62be133294f2)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/procedure/ProcedureMember.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/procedure/ZKProcedureMemberRpcs.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/procedure/Subprocedure.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14538933" author="hudson" created="Tue, 12 May 2015 00:09:58 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.2 #71 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2/71/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2/71/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13217&quot; title=&quot;Procedure fails due to ZK issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13217&quot;&gt;&lt;del&gt;HBASE-13217&lt;/del&gt;&lt;/a&gt; Procedure fails due to ZK issue (jerryjch: rev 2b5616462896823c71d2b12a6cce75ec8bb3df53)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/procedure/ZKProcedureMemberRpcs.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/procedure/Subprocedure.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/procedure/ProcedureMember.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14539012" author="hudson" created="Tue, 12 May 2015 00:50:58 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #6474 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/6474/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/6474/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13217&quot; title=&quot;Procedure fails due to ZK issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13217&quot;&gt;&lt;del&gt;HBASE-13217&lt;/del&gt;&lt;/a&gt; Procedure fails due to ZK issue (jerryjch: rev 174632111c1f844151eea682331d9b5b157e4dd4)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/procedure/ProcedureMember.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/procedure/Subprocedure.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/procedure/ZKProcedureMemberRpcs.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14539110" author="hadoopqa" created="Tue, 12 May 2015 02:28:38 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12732062/HBASE-13217-0.98-v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12732062/HBASE-13217-0.98-v2.patch&lt;/a&gt;&lt;br/&gt;
  against 0.98 branch at commit 30ecf990fe2a343e418eedcffd1d8d5c94ab1fd3.&lt;br/&gt;
  ATTACHMENT ID: 12732062&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.1 2.5.2 2.6.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 25 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 1 zombie test(s): 	at org.apache.tajo.engine.planner.global.TestBroadcastJoinPlan.testBroadcastJoinAllSmallTables(TestBroadcastJoinPlan.java:243)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14021//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14021//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14021//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14021//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14021//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14021//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Javadoc warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14021//artifact/patchprocess/patchJavadocWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14021//artifact/patchprocess/patchJavadocWarnings.txt&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14021//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14021//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14540165" author="apurtell" created="Tue, 12 May 2015 16:34:14 +0000"  >&lt;p&gt;I have this staged for commit to 0.98 and will push it after local tests come back.&lt;/p&gt;</comment>
                            <comment id="14540167" author="apurtell" created="Tue, 12 May 2015 16:36:35 +0000"  >&lt;p&gt;Pushed to 0.98&lt;/p&gt;</comment>
                            <comment id="14540376" author="jinghe" created="Tue, 12 May 2015 18:10:28 +0000"  >&lt;p&gt;Thanks, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;&lt;br/&gt;
Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ram_krish&quot; class=&quot;user-hover&quot; rel=&quot;ram_krish&quot;&gt;ramkrishna.s.vasudevan&lt;/a&gt; for filing, and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=syuanjiang&quot; class=&quot;user-hover&quot; rel=&quot;syuanjiang&quot;&gt;Stephen Yuan Jiang&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbertozzi&quot; class=&quot;user-hover&quot; rel=&quot;mbertozzi&quot;&gt;Matteo Bertozzi&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14540740" author="hudson" created="Tue, 12 May 2015 21:11:15 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98 #986 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/986/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/986/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13217&quot; title=&quot;Procedure fails due to ZK issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13217&quot;&gt;&lt;del&gt;HBASE-13217&lt;/del&gt;&lt;/a&gt; Procedure fails due to ZK issue (Jerry He) (apurtell: rev 8774b463a24ba164299969919575169f8a9613ca)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/procedure/ProcedureMember.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/procedure/ZKProcedureMemberRpcs.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/procedure/Subprocedure.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14540878" author="hudson" created="Tue, 12 May 2015 22:10:53 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98-on-Hadoop-1.1 #937 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/937/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/937/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13217&quot; title=&quot;Procedure fails due to ZK issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13217&quot;&gt;&lt;del&gt;HBASE-13217&lt;/del&gt;&lt;/a&gt; Procedure fails due to ZK issue (Jerry He) (apurtell: rev 8774b463a24ba164299969919575169f8a9613ca)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/procedure/ZKProcedureMemberRpcs.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/procedure/Subprocedure.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/procedure/ProcedureMember.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14724290" author="enis" created="Mon, 31 Aug 2015 22:39:51 +0000"  >&lt;p&gt;Closing this issue after 1.0.2 release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12732062" name="HBASE-13217-0.98-v2.patch" size="7628" author="jinghe" created="Mon, 11 May 2015 23:31:40 +0000"/>
                            <attachment id="12731813" name="HBASE-13217-v2.patch" size="7771" author="jinghe" created="Sun, 10 May 2015 18:57:33 +0000"/>
                            <attachment id="12731757" name="HBASE-13217.patch" size="6804" author="jinghe" created="Sat, 9 May 2015 22:43:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 16 Mar 2015 00:59:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 15 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i26ohj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>