<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:12:03 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-10258/HBASE-10258.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-10258] [0.94] Fix JDK 7 related test failures.</title>
                <link>https://issues.apache.org/jira/browse/HBASE-10258</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Starting with these:&lt;/p&gt;

&lt;p&gt;org.apache.hadoop.hbase.mapreduce.TestCopyTable.testCopyTable    org.apache.hadoop.hbase.regionserver.TestSplitTransactionOnCluster.testShouldFailSplitIfZNodeDoesNotExistDueToPrevRollBack&lt;br/&gt;
org.apache.hadoop.hbase.regionserver.TestStore.testDeleteExpiredStoreFiles&lt;br/&gt;
org.apache.hadoop.hbase.snapshot.TestRestoreFlushSnapshotFromClient.testRestoreSnapshotOfCloned&lt;br/&gt;
org.apache.hadoop.hbase.util.TestEnvironmentEdgeManager.testManageSingleton&lt;/p&gt;</description>
                <environment></environment>
        <key id="12686721">HBASE-10258</key>
            <summary>[0.94] Fix JDK 7 related test failures.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="lhofhansl">Lars Hofhansl</reporter>
                        <labels>
                    </labels>
                <created>Mon, 30 Dec 2013 05:52:40 +0000</created>
                <updated>Thu, 2 Jan 2014 19:09:51 +0000</updated>
                            <resolved>Thu, 2 Jan 2014 19:09:51 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13858585" author="lhofhansl" created="Mon, 30 Dec 2013 06:07:57 +0000"  >&lt;p&gt;Hmm...&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;TestEnvironmentEdgeManager.testManageSingleton passes locally (OpenJDK 7)&lt;/li&gt;
	&lt;li&gt;TestRestoreFlushSnapshotFromClient.testRestoreSnapshotOfCloned failed due to HMaster aborting, fixed with &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10257&quot; title=&quot;[0.94] Master aborts due to assignment race&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10257&quot;&gt;&lt;del&gt;HBASE-10257&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;TestStore.testDeleteExpiredStoreFiles passes locally (OpenJDK 7)&lt;/li&gt;
	&lt;li&gt;TestSplitTransactionOnCluster.testShouldFailSplitIfZNodeDoesNotExistDueToPrevRollBack passes locally (OpenJDK 7)&lt;/li&gt;
	&lt;li&gt;TestCopyTable.testCopyTable also passes locally.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Meh... Closing.&lt;/p&gt;</comment>
                            <comment id="13858616" author="lhofhansl" created="Mon, 30 Dec 2013 07:01:23 +0000"  >&lt;p&gt;Nope. Some of these fail repeatedly in Jenkins run... I&apos;ll take a look.&lt;/p&gt;</comment>
                            <comment id="13858636" author="lhofhansl" created="Mon, 30 Dec 2013 07:35:28 +0000"  >&lt;p&gt;These three failed again:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;org.apache.hadoop.hbase.mapreduce.TestCopyTable.testCopyTable&lt;/li&gt;
	&lt;li&gt;org.apache.hadoop.hbase.regionserver.TestStore.testDeleteExpiredStoreFiles&lt;/li&gt;
	&lt;li&gt;org.apache.hadoop.hbase.util.TestEnvironmentEdgeManager.testManageSingleton&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;ll try to track these down.&lt;/p&gt;</comment>
                            <comment id="13858703" author="xieliang007" created="Mon, 30 Dec 2013 10:50:21 +0000"  >&lt;p&gt;I ran those 3 cases locally, only TestEnvironmentEdgeManager failed.&lt;br/&gt;
to me, it was caused by case running order, if testCurrentTimeInMillis() was invoked firstly, then testManageSingleton() will be influenced by that mock statement.&lt;/p&gt;</comment>
                            <comment id="13858711" author="nkeywal" created="Mon, 30 Dec 2013 11:08:38 +0000"  >&lt;p&gt;Likely you already know this, but just in case:&lt;br/&gt;
with the jdk 1.7 and junit 4.10, the test execution order is random.&lt;br/&gt;
With hbase 0.96 we use the junit 4.11. The execution order is not random anymore but is different than the one with the jdk 1.6 plus junit 4.10&lt;/p&gt;

&lt;p&gt;See: &lt;a href=&quot;https://github.com/junit-team/junit/blob/master/doc/ReleaseNotes4.11.md#test-execution-order&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/junit-team/junit/blob/master/doc/ReleaseNotes4.11.md#test-execution-order&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13858939" author="lhofhansl" created="Mon, 30 Dec 2013 17:25:06 +0000"  >&lt;p&gt;I did not know that. Should we use junit 4.11 in 0.94 then?&lt;/p&gt;</comment>
                            <comment id="13859041" author="apurtell" created="Mon, 30 Dec 2013 20:04:29 +0000"  >&lt;blockquote&gt;&lt;p&gt;Should we use junit 4.11 in 0.94 then?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, and we should fix the test issues and tag them for improvement simultaneously with &lt;tt&gt;@FixMethodOrder(MethodSorters.NAME_ASCENDING)&lt;/tt&gt; (from &lt;a href=&quot;https://github.com/junit-team/junit/blob/master/doc/ReleaseNotes4.11.md#test-execution-order&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/junit-team/junit/blob/master/doc/ReleaseNotes4.11.md#test-execution-order&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="13859200" author="lhofhansl" created="Tue, 31 Dec 2013 00:14:59 +0000"  >&lt;p&gt;Filed subtask.&lt;/p&gt;</comment>
                            <comment id="13859222" author="lhofhansl" created="Tue, 31 Dec 2013 01:00:15 +0000"  >&lt;p&gt;How do I &quot;tag &lt;span class=&quot;error&quot;&gt;&amp;#91;a test&amp;#93;&lt;/span&gt; for improvement&quot;?&lt;/p&gt;</comment>
                            <comment id="13859283" author="apurtell" created="Tue, 31 Dec 2013 03:03:43 +0000"  >&lt;blockquote&gt;&lt;p&gt;How do I &quot;tag &lt;span class=&quot;error&quot;&gt;&amp;#91;a test&amp;#93;&lt;/span&gt; for improvement&quot;?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The fact that it would be decorated with &lt;tt&gt;@FixMethodOrder(MethodSorters.NAME_ASCENDING)&lt;/tt&gt;, indicating a sensitivity to method/case ordering, is in effect a tag that the test requires improvement, in my opinion. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13859325" author="lhofhansl" created="Tue, 31 Dec 2013 04:16:51 +0000"  >&lt;p&gt;Fair enough &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13859406" author="nkeywal" created="Tue, 31 Dec 2013 08:47:12 +0000"  >&lt;p&gt;Using junit 4.11 for the 0.94 is likely the simplest option.&lt;br/&gt;
0.96 uses the default junit order. When I did the upgrade, I had to change some tests, they are listed here: &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7574&quot; title=&quot;Migrate to JUnit 4.11&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7574&quot;&gt;&lt;del&gt;HBASE-7574&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13860617" author="lhofhansl" created="Thu, 2 Jan 2014 19:09:51 +0000"  >&lt;p&gt;Child &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10259&quot; title=&quot;[0.94] Upgrade JUnit to 4.11&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10259&quot;&gt;&lt;del&gt;HBASE-10259&lt;/del&gt;&lt;/a&gt; fixes all JDK7 test issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 30 Dec 2013 10:50:21 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365714</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 50 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1r1fz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366021</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>