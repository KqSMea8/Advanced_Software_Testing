<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:14:08 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-3904/HBASE-3904.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-3904] HConnection.isTableAvailable returns true even with not all regions available.</title>
                <link>https://issues.apache.org/jira/browse/HBASE-3904</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;This function as per the java doc is supposed to return true iff &quot;all the regions in the table are available&quot;. But if the table is still being created this function may return inconsistent results (For example, when a table with a large number of split keys is created). &lt;/p&gt;</description>
                <environment></environment>
        <key id="12507826">HBASE-3904</key>
            <summary>HConnection.isTableAvailable returns true even with not all regions available.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yuzhihong@gmail.com">Ted Yu</assignee>
                                    <reporter username="vidhyash">Vidhyashankar Venkataraman</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 May 2011 22:49:16 +0000</created>
                <updated>Wed, 13 Jul 2011 18:15:43 +0000</updated>
                            <resolved>Fri, 8 Jul 2011 23:54:30 +0000</resolved>
                                                                    <component>Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13036678" author="stack" created="Fri, 20 May 2011 05:21:15 +0000"  >&lt;p&gt;So, how do you think this should work Vidhya?  isTableAvailable won&apos;t ever know how many regions there are supposed to be in a table.  Checking for &amp;gt; 0 is probably the best it could ever do.  It sounds to me like we need something else or that after isTableAvailable returns true, that then you should get an HTable instance and call &lt;a href=&quot;http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/client/HTable.html#getRegionsInfo(&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/client/HTable.html#getRegionsInfo(&lt;/a&gt;) in a loop with a bit of wait until the number of regions comes up to close the number you passed to create table?  (FYI: I haven&apos;t tried this to see if it will work).&lt;/p&gt;</comment>
                            <comment id="13036687" author="vidhyash" created="Fri, 20 May 2011 05:53:31 +0000"  >&lt;p&gt;That&apos;s exactly what I did with my table existence check! And getRegionsInfo works accurately.&lt;/p&gt;

&lt;p&gt; I think we have kind of misunderstood what is actually happening: Or I am wrong this time &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt; From what I read in the isTableAvailable function, the Metascanvisitor ensures that if there is at least one region not assigned, then the function will return false. This isn&apos;t enough since the createTable function in master assigns one region after another. (Refer to HMAster.createTable(final HRegionInfo [] newRegions, boolean sync)) Hence there might be a case when all regions are indeed fully assigned in META but it is just that the master is yet to populate META with the rest of the regions. I believe that&apos;s the reason why I got those inconsistent responses from isTableAvailable.&lt;/p&gt;

&lt;p&gt;Therefor for isTableAvailable to work correctly with createTable(splitkeys), the master will have to populate all the regions in meta first before assigning them. I think that will do the trick.&lt;/p&gt;</comment>
                            <comment id="13036913" author="yuzhihong@gmail.com" created="Fri, 20 May 2011 16:26:46 +0000"  >&lt;p&gt;In Master, we have:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void createTable(HTableDescriptor desc, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; [][] splitKeys)
  &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    createTable(desc, splitKeys, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above is called by HBaseAdmin.createTableAsync() - meaning it is asynchronous.&lt;/p&gt;

&lt;p&gt;In order to keep backward compatibility, I propose introducing new methods in HBaseAdmin:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void createTableSync(HTableDescriptor desc);
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void createTableSync(HTableDescriptor desc, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; [][] splitKeys);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;They would end up with Master calling:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void createTableSync(HTableDescriptor desc, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; [][] splitKeys)
  &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    createTable(desc, splitKeys, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13036947" author="stack" created="Fri, 20 May 2011 17:39:48 +0000"  >&lt;blockquote&gt;&lt;p&gt;From what I read in the isTableAvailable function, the Metascanvisitor ensures that if there is at least one region not assigned, then the function will return false.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That and at least one region must be assigned (where &apos;assigned&apos; is a non-null server column which is a far from definitive test of assignedness).&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;This isn&apos;t enough since the createTable function in master assigns one region after another. (Refer to HMAster.createTable(final HRegionInfo [] newRegions, boolean sync))&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, it adds regions one at at time to .META. but then uses the bulk assign engine (this was a recent addition by Ted &amp;#8211; do you have this?)&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Hence there might be a case when all regions are indeed fully assigned in META but it is just that the master is yet to populate META with the rest of the regions.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Is this so?  We add the regions to .META. before we assign.  On add to .META. they will have an empty server field so isTableAssigned should be returning false. &lt;/p&gt;

&lt;p&gt;I wonder if this check inside in HBaseAdmin#isTableAssigned is &apos;off&apos;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
              &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (value == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                available.set(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
              }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Maybe the value is &apos;empty&apos;, zero-length byte array.  We should check for that?  Perhaps this is why you got &quot;...inconsistent responses from isTableAvailable.&quot;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Therefor for isTableAvailable to work correctly with createTable(splitkeys), the master will have to populate all the regions in meta first before assigning them.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Unless I&apos;m reading it wrong, this is what it &lt;b&gt;is&lt;/b&gt; doing.   Something else is up (maybe the above check?).&lt;/p&gt;


</comment>
                            <comment id="13036948" author="stack" created="Fri, 20 May 2011 17:40:10 +0000"  >&lt;p&gt;@Ted What issue are you trying to fix?  Thanks.&lt;/p&gt;</comment>
                            <comment id="13036959" author="yuzhihong@gmail.com" created="Fri, 20 May 2011 17:55:38 +0000"  >&lt;p&gt;My proposal is based on the observation that Vidhyashankar (and other users) used a loop to check for table availability.&lt;br/&gt;
This is equivalent to calling the newly introduced createTableSync() method where there is no need to write the loop above.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Hence there might be a case when all regions are indeed fully assigned in META but it is just that the master is yet to populate META with the rest of the regions.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;What Vidhyashankar meant was that the existing entries for the table in .META. carried server information, but there were more regions to be assigned by Master which weren&apos;t in .META. yet.&lt;/p&gt;</comment>
                            <comment id="13036968" author="yuzhihong@gmail.com" created="Fri, 20 May 2011 18:07:02 +0000"  >&lt;p&gt;Looking at MetaEditor.addRegionToMeta() which is called by HMaster.createTable():&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void addRegionToMeta(CatalogTracker catalogTracker,
      HRegionInfo regionInfo)
  &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    Put put = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Put(regionInfo.getRegionName());
    put.add(HConstants.CATALOG_FAMILY, HConstants.REGIONINFO_QUALIFIER,
        Writables.getBytes(regionInfo));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Server info was initially omitted.&lt;/p&gt;</comment>
                            <comment id="13036970" author="yuzhihong@gmail.com" created="Fri, 20 May 2011 18:13:16 +0000"  >&lt;p&gt;This may not be the final fix.&lt;br/&gt;
We can use this patch to verify Vidhyashankar&apos;s observation.&lt;/p&gt;

&lt;p&gt;I borrowed some code from HTable.getRegionsInfo()&lt;/p&gt;

&lt;p&gt;Also added check for empty server info as suggested by Stack.&lt;/p&gt;</comment>
                            <comment id="13037005" author="stack" created="Fri, 20 May 2011 19:01:46 +0000"  >&lt;blockquote&gt;&lt;p&gt;What Vidhyashankar meant was that the existing entries for the table in .META. carried server information, but there were more regions to be assigned by Master which weren&apos;t in .META. yet.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m not sure how this is possible but I may not have done sufficient study.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Server info was initially omitted.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, thats how it works.  Later, on assignment, the server gets filled in.&lt;/p&gt;

&lt;p&gt;On your patch:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+              &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!(info.isOffline() || info.isSplit())) {
+                regionCount.incrementAndGet();
+              }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is good Ted.&lt;/p&gt;

&lt;p&gt;This is good too --&amp;gt; &apos;+      MetaScanner.metaScan(conf, visitor, tableName);&apos;&lt;/p&gt;

&lt;p&gt;Vidhya, do you want to try Ted&apos;s patch?  Its client-side only patch.&lt;/p&gt;

&lt;p&gt;@Ted A unit test would be nice.&lt;/p&gt;</comment>
                            <comment id="13037150" author="yuzhihong@gmail.com" created="Fri, 20 May 2011 23:18:40 +0000"  >&lt;p&gt;I have run tests related to table creation and availability checking. &lt;br/&gt;
Namely this code in LoadIncrementalHFiles:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (!conn.isTableAvailable(table.getTableName()) &amp;amp;&amp;amp; (ctr&amp;lt;TABLE_CREATE_MAX_RETRIES)) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;TestHFileOutputFormat, TestLoadIncrementalHFiles and TestAdmin.&lt;/p&gt;

&lt;p&gt;Please outline what more test(s) should be devised.&lt;/p&gt;</comment>
                            <comment id="13037218" author="yuzhihong@gmail.com" created="Sat, 21 May 2011 01:23:54 +0000"  >&lt;p&gt;From Vidhyashankar&apos;s test:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Table test-v6 not yet available... Sleeping &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 5 more minutes... Expected #regions = 17933
Table is probably available!! : test-v6 Available? &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
Table test-v6may not be available... &lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt; checking: Sleeping &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 5 minutes more...
Table test-v6: Expected # Regions = 17933 Actual number = 4744
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We can see that after conn.isTableAvailable() returned true, there were still at least 13189 regions that were not assigned - not reaching .META.&lt;/p&gt;

&lt;p&gt;I think we should implement createTableSync() as I proposed earlier.&lt;br/&gt;
We can ask user to call table.getRegionsInfo() but that is not convenient, and getRegionsInfo() is marked deprecated.&lt;/p&gt;</comment>
                            <comment id="13037610" author="yuzhihong@gmail.com" created="Sun, 22 May 2011 15:04:35 +0000"  >&lt;p&gt;The second version of patch stores the number of initial regions in HTableDescriptor&apos;s values map.&lt;br/&gt;
HConnectionManager.isTableAvailable() tries to retrieve this metadata. If it is present, isTableAvailable() would wait for this many regions to be online before returning.&lt;/p&gt;

&lt;p&gt;TestAdmin, TestLoadIncrementalHFiles and TestHFileOutputFormat passed.&lt;/p&gt;</comment>
                            <comment id="13038173" author="stack" created="Mon, 23 May 2011 19:56:20 +0000"  >&lt;p&gt;Adding the getter and setter getNumberOfInitialRegions to HTD is a little odd.  You are using HTD to carry a message used by the create table where you pass lots of regions.   Seems like an odd thing to expose as public new methods.  If you need to pass this message, perhaps use the generic get/set attributes.&lt;/p&gt;
</comment>
                            <comment id="13038188" author="yuzhihong@gmail.com" created="Mon, 23 May 2011 20:18:27 +0000"  >&lt;p&gt;I removed the getNumberOfInitialRegions and switched to the generic getValue/setValue methods.&lt;/p&gt;</comment>
                            <comment id="13038380" author="stack" created="Tue, 24 May 2011 04:30:27 +0000"  >&lt;p&gt;@Ted Seems good.  Lets get Vidhya to try it.&lt;/p&gt;</comment>
                            <comment id="13040356" author="yuzhihong@gmail.com" created="Fri, 27 May 2011 17:57:46 +0000"  >&lt;p&gt;Version 3 uses String form for the value of NUM_INITIAL_REGS so that the display on Web UI is meaningful.&lt;/p&gt;</comment>
                            <comment id="13040395" author="vidhyash" created="Fri, 27 May 2011 19:13:26 +0000"  >&lt;p&gt;I tested the patch while creating a table with 10000 regions using createTableAsync. Tested it thrice and isTableAvailable worked as expected. (the only weird thing was createTableAsync always threw a Socket timeout exception and I had to catch it and move on. Of course that should be raised somewhere else I guess).&lt;/p&gt;</comment>
                            <comment id="13049905" author="jdcryans" created="Wed, 15 Jun 2011 17:23:39 +0000"  >&lt;p&gt;Putting the number of initial regions in HTD is really odd, it means it&apos;s going to show up for every table (created after this patch) in the master web UI, will show when someone does a describe of a table, etc.&lt;/p&gt;</comment>
                            <comment id="13050086" author="yuzhihong@gmail.com" created="Wed, 15 Jun 2011 22:33:44 +0000"  >&lt;p&gt;Using HTD is a way of passing region count for subsequent check.&lt;br/&gt;
(See Stack&apos;s comment @ 20/May/11 05:21)&lt;/p&gt;

&lt;p&gt;We can also introduce createTableSync() which waits for initial region creation to complete before returning. (My comment @ 20/May/11 16:26)&lt;/p&gt;</comment>
                            <comment id="13050155" author="jdcryans" created="Thu, 16 Jun 2011 00:04:18 +0000"  >&lt;p&gt;Creating createTableSync() wouldn&apos;t make much sense since the HBA.createTable() methods are per their javadoc already synchronized with the creation of the table. To me this means that they aren&apos;t respecting their contract so I wouldn&apos;t worry about keeping backward compatibility.&lt;/p&gt;

&lt;p&gt;About HCM.isTableAvailable, I&apos;d think it&apos;s fine if it returns true even tho not all regions are available in the case where the table creation wasn&apos;t completed because the process was async. Because it&apos;s async.&lt;/p&gt;</comment>
                            <comment id="13050700" author="stack" created="Thu, 16 Jun 2011 20:14:55 +0000"  >&lt;p&gt;Can we do something else?  The HBaseAdmin createTable knows how many regions it has to create so in here, it could wait till all are on line?  You might want to add an isTableAvailable that takes a count of regions which will only return true if it finds that many or more regions on line?&lt;/p&gt;</comment>
                            <comment id="13051614" author="yuzhihong@gmail.com" created="Sat, 18 Jun 2011 22:41:12 +0000"  >&lt;p&gt;Version 5 added check in HBA.createTable(final HTableDescriptor desc, byte [][] splitKeys) to wait for the number of regions online equal to initial region count.&lt;br/&gt;
TestAdmin passes.&lt;/p&gt;

&lt;p&gt;There is only one createTable() method in HMasterInterface which is currently asynchronous and is called by HBA.createTableAsync(). Please advise whether createTableAsync() should be added to HMasterInterface.&lt;/p&gt;</comment>
                            <comment id="13057384" author="nspiegelberg" created="Wed, 29 Jun 2011 18:32:56 +0000"  >&lt;p&gt;@Ted: Are all these versions different patches or revisions on the same patch?  Maybe saying part1, part2 would clarify.  We were working on the createTable part of this issue internally as well.  We&apos;ll peer review.&lt;/p&gt;</comment>
                            <comment id="13057423" author="yuzhihong@gmail.com" created="Wed, 29 Jun 2011 19:41:42 +0000"  >&lt;p&gt;Vidhyashankar verified that version 4 works. But J-D doesn&apos;t like populating values map in HTD.&lt;/p&gt;

&lt;p&gt;So I came up with patch version 5 which actually fixes &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4041&quot; title=&quot;createTable(splitKeys) should be synchronous&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4041&quot;&gt;&lt;del&gt;HBASE-4041&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Comment is welcome to move this forward.&lt;/p&gt;

&lt;p&gt;Thanks for your attention Nicholas.&lt;/p&gt;</comment>
                            <comment id="13057510" author="jdcryans" created="Wed, 29 Jun 2011 22:12:52 +0000"  >&lt;p&gt;On the patch:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The visitor looks completely copy pasted HTable.getRegionsInfo, should be refactored.&lt;/li&gt;
	&lt;li&gt;Inside the visitor it creates a Addressing.createInetSocketAddressFromHostAndPortStr, which IIRC does a DNS lookup when creating the InetSocketAddress. Now let&apos;s say you create a 10k regions table, and you need to loop a few times, I&apos;m afraid this call will become very costly. I believe you don&apos;t even need to create the HSA, all you want is to check if something is there or not right?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13057520" author="yuzhihong@gmail.com" created="Wed, 29 Jun 2011 22:28:06 +0000"  >&lt;p&gt;Updated patch version 5 according to J-D&apos;s comment.&lt;/p&gt;</comment>
                            <comment id="13057531" author="jdcryans" created="Wed, 29 Jun 2011 22:45:51 +0000"  >&lt;p&gt;On the new v5 (should have been v6?):&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I don&apos;t think you need to keep that map of regions, all you really want is a count? Like it&apos;s creating the map with the hostAndPort possibly null and the rest of the code couldn&apos;t care less. I think you could keep a counter and reset it when you loop.&lt;/li&gt;
	&lt;li&gt;About that hostAndPort, if it&apos;s null should you consider that region as unassigned and not counted as an available region?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13057546" author="yuzhihong@gmail.com" created="Wed, 29 Jun 2011 23:17:51 +0000"  >&lt;p&gt;Updated version 5 according to J-D&apos;s comments.&lt;br/&gt;
TestAdmin passes.&lt;/p&gt;

&lt;p&gt;I want to keep the version number at 5 since I referenced it in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4041&quot; title=&quot;createTable(splitKeys) should be synchronous&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4041&quot;&gt;&lt;del&gt;HBASE-4041&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13060708" author="jiraposter@reviews.apache.org" created="Wed, 6 Jul 2011 17:31:16 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1016/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1016/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hbase.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Check is added in HBA.createTable(final HTableDescriptor desc, byte [][] splitKeys) to wait for the number of regions online equal to initial region count.&lt;br/&gt;
This makes HBA.createTable() synchronous.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3904&quot; title=&quot;HConnection.isTableAvailable returns true even with not all regions available.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3904&quot;&gt;&lt;del&gt;HBASE-3904&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3904&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-3904&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  /src/main/java/org/apache/hadoop/hbase/client/HBaseAdmin.java 1141318 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1016/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1016/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;TestAdmin passes.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Ted&lt;/p&gt;
</comment>
                            <comment id="13060740" author="jiraposter@reviews.apache.org" created="Wed, 6 Jul 2011 18:26:16 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1016/#review974&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1016/#review974&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Ship it!&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Andrew&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-07-06 17:30:36, Ted Yu wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/1016/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1016/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-07-06 17:30:36)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hbase.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Check is added in HBA.createTable(final HTableDescriptor desc, byte [][] splitKeys) to wait for the number of regions online equal to initial region count.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This makes HBA.createTable() synchronous.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3904&quot; title=&quot;HConnection.isTableAvailable returns true even with not all regions available.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3904&quot;&gt;&lt;del&gt;HBASE-3904&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3904&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-3904&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/src/main/java/org/apache/hadoop/hbase/client/HBaseAdmin.java 1141318 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1016/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1016/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;TestAdmin passes.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Ted&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13060751" author="yuzhihong@gmail.com" created="Wed, 6 Jul 2011 18:39:10 +0000"  >&lt;p&gt;Integrate to branch and TRUNK.&lt;/p&gt;

&lt;p&gt;Thanks for the review J-D and Andrew.&lt;/p&gt;</comment>
                            <comment id="13060802" author="yuzhihong@gmail.com" created="Wed, 6 Jul 2011 20:14:17 +0000"  >&lt;p&gt;All tests passed for 0.90 branch with today&apos;s checkins.&lt;/p&gt;</comment>
                            <comment id="13060808" author="hudson" created="Wed, 6 Jul 2011 20:26:53 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2007 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2007/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2007/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3904&quot; title=&quot;HConnection.isTableAvailable returns true even with not all regions available.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3904&quot;&gt;&lt;del&gt;HBASE-3904&lt;/del&gt;&lt;/a&gt;  HBA.createTable(final HTableDescriptor desc, byte [][] splitKeys)&lt;br/&gt;
            should be synchronous&lt;/p&gt;

&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HBaseAdmin.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13062257" author="yuzhihong@gmail.com" created="Fri, 8 Jul 2011 23:54:30 +0000"  >&lt;p&gt;I am closing this JIRA as there lacks consensus how HConnection.isTableAvailable() should be implemented for table which was created asynchronously.&lt;/p&gt;</comment>
                            <comment id="13064110" author="itapai" created="Tue, 12 Jul 2011 20:12:37 +0000"  >&lt;p&gt;The calls in the try block don&apos;t reliably throw RegionException, so most of the time after several retries, it would silently returns.&lt;/p&gt;

&lt;p&gt;Attached is another version that fixed this problem, along with some minor changes to the logic.&lt;/p&gt;

&lt;p&gt;TestAdmin passed after applying this patch.&lt;/p&gt;</comment>
                            <comment id="13064113" author="itapai" created="Tue, 12 Jul 2011 20:15:36 +0000"  >&lt;p&gt;&quot;Another version&quot; refers to v6.&lt;/p&gt;

&lt;p&gt;It also changes the behavior when user interrupts the sleep.&lt;/p&gt;</comment>
                            <comment id="13064244" author="itapai" created="Tue, 12 Jul 2011 23:58:31 +0000"  >&lt;p&gt;The file 3904_v6.patch is for 0.90 branch. Added the patch 3904_v6_trunk.patch for TRUNK.&lt;/p&gt;</comment>
                            <comment id="13064315" author="yuzhihong@gmail.com" created="Wed, 13 Jul 2011 03:17:39 +0000"  >&lt;p&gt;Ran patch v6 through all 0.90 tests.&lt;/p&gt;

&lt;p&gt;Integrated patch v6 to branch and TRUNK.&lt;/p&gt;

&lt;p&gt;Thanks Ita for the patches.&lt;/p&gt;</comment>
                            <comment id="13064351" author="hudson" created="Wed, 13 Jul 2011 04:31:07 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2022 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2022/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2022/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3904&quot; title=&quot;HConnection.isTableAvailable returns true even with not all regions available.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3904&quot;&gt;&lt;del&gt;HBASE-3904&lt;/del&gt;&lt;/a&gt; Addendum that fixes number of retries (Ita Pai)&lt;/p&gt;

&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HBaseAdmin.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13064375" author="stack" created="Wed, 13 Jul 2011 06:07:34 +0000"  >&lt;p&gt;Is this commit good for you Ted?  I see NPEs like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
testForCheckingIfEnableAndDisableWorksFineAfterSwitch(org.apache.hadoop.hbase.master.TestMasterRestartAfterDisablingTable)  Time elapsed: 12.491 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
java.lang.NullPointerException
        at org.apache.hadoop.hbase.client.HBaseAdmin$1.processRow(HBaseAdmin.java:348)
        at org.apache.hadoop.hbase.client.MetaScanner.metaScan(MetaScanner.java:212)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;v6 patch messed with processRow.&lt;/p&gt;

&lt;p&gt;When I run full suite on trunk I see failures stating with org.apache.hadoop.hbase.client.TestMultipleTimestamps.&lt;/p&gt;

&lt;p&gt;If I back out this patch, things work for me again.&lt;/p&gt;</comment>
                            <comment id="13064431" author="yuzhihong@gmail.com" created="Wed, 13 Jul 2011 08:35:26 +0000"  >&lt;p&gt;info.getTableName() should have been used to get table name.&lt;br/&gt;
I didn&apos;t run test suite before committing patch v6 for TRUNK.&lt;br/&gt;
Sorry.&lt;/p&gt;</comment>
                            <comment id="13064478" author="hudson" created="Wed, 13 Jul 2011 10:53:12 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2024 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2024/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2024/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3904&quot; title=&quot;HConnection.isTableAvailable returns true even with not all regions available.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3904&quot;&gt;&lt;del&gt;HBASE-3904&lt;/del&gt;&lt;/a&gt; Reapply patch v6 for TRUNK with addendum&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3904&quot; title=&quot;HConnection.isTableAvailable returns true even with not all regions available.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3904&quot;&gt;&lt;del&gt;HBASE-3904&lt;/del&gt;&lt;/a&gt; Revert patch v6 from TRUNK&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3904&quot; title=&quot;HConnection.isTableAvailable returns true even with not all regions available.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3904&quot;&gt;&lt;del&gt;HBASE-3904&lt;/del&gt;&lt;/a&gt; info.getTableName() should be used to get table name&lt;/p&gt;

&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HBaseAdmin.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HBaseAdmin.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HBaseAdmin.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13064694" author="stack" created="Wed, 13 Jul 2011 16:54:30 +0000"  >&lt;blockquote&gt;&lt;p&gt;I didn&apos;t run test suite before committing patch v6 for TRUNK.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;np.  I&apos;ve never broken the build (smile).&lt;/p&gt;</comment>
                            <comment id="13064743" author="itapai" created="Wed, 13 Jul 2011 18:15:43 +0000"  >&lt;p&gt;Re-attached v6 patch for TRUNK with the correction.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12479744">HBASE-3229</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12480156" name="3904-v3.txt" size="4779" author="yuzhihong@gmail.com" created="Mon, 23 May 2011 20:18:27 +0000"/>
                            <attachment id="12480678" name="3904-v4.txt" size="4846" author="yuzhihong@gmail.com" created="Fri, 27 May 2011 17:57:46 +0000"/>
                            <attachment id="12484702" name="3904-v5.txt" size="3357" author="yuzhihong@gmail.com" created="Wed, 29 Jun 2011 23:18:40 +0000"/>
                            <attachment id="12479935" name="3904.txt" size="1482" author="yuzhihong@gmail.com" created="Fri, 20 May 2011 18:13:16 +0000"/>
                            <attachment id="12486218" name="3904_v6.patch" size="4446" author="itapai" created="Tue, 12 Jul 2011 20:12:37 +0000"/>
                            <attachment id="12486340" name="3904_v6_trunk.patch" size="4344" author="itapai" created="Wed, 13 Jul 2011 18:15:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 20 May 2011 05:21:15 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>27083</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 23 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hog7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>101223</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>HBA.createTable(final HTableDescriptor desc, byte [][] splitKeys)&lt;br/&gt;
is synchronous. Use this method instead of creating table asynchronously followed by call to HConnection.isTableAvailable().</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>