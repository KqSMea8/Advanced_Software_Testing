<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:27:25 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5401/HBASE-5401.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5401] PerformanceEvaluation generates 10x the number of expected mappers</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5401</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;With a command line like &apos;hbase org.apache.hadoop.hbase.PerformanceEvaluation randomWrite 10&apos; there are 100 mappers spawned, rather than the expected 10.  The culprit appears to be the outer loop in writeInputFile which sets up 10 splits for every &quot;asked-for client&quot;.  I think the fix is just to remove that outer loop.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12542685">HBASE-5401</key>
            <summary>PerformanceEvaluation generates 10x the number of expected mappers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="oliver@mineallmeyn.com">Oliver Meyn</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Feb 2012 14:22:34 +0000</created>
                <updated>Wed, 14 Jan 2015 01:28:53 +0000</updated>
                                                                            <component>test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13446199" author="ivarley" created="Fri, 31 Aug 2012 18:21:32 +0000"  >&lt;p&gt;Hey Oliver, I see in your blog post (&lt;a href=&quot;http://gbif.blogspot.com/2012/02/performance-evaluation-of-hbase.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://gbif.blogspot.com/2012/02/performance-evaluation-of-hbase.html&lt;/a&gt;) that you patched this issue. Mind posting that patch back here?&lt;/p&gt;</comment>
                            <comment id="14268474" author="clehene" created="Wed, 7 Jan 2015 23:09:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ivarley&quot; class=&quot;user-hover&quot; rel=&quot;ivarley&quot;&gt;Ian Varley&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=oliver_meyn&quot; class=&quot;user-hover&quot; rel=&quot;oliver_meyn&quot;&gt;Oliver Meyn&lt;/a&gt; is this still an issue?&lt;/p&gt;</comment>
                            <comment id="14268484" author="clehene" created="Wed, 7 Jan 2015 23:19:23 +0000"  >&lt;p&gt;The outer loop is still there, but based on how it looks it doesn&apos;t seem it should be removed &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt; can you comment?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  /**
   * Per client, how many tasks will we run?  We divide number of rows by &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; number and have the
   * client &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; the resulting count in a map task.
   */
  &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; TASKS_PER_CLIENT = 10;

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

      &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; TASKS_PER_CLIENT; i++) {
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; j = 0; j &amp;lt; opts.numClientThreads; j++) {
          TestOptions next = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TestOptions(opts);
          next.startRow = (j * perClientRows) + (i * (perClientRows/10));
          next.perClientRunRows = perClientRows / 10;
          &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; s = MAPPER.writeValueAsString(next);
          LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Client=&quot;&lt;/span&gt; + j + &lt;span class=&quot;code-quote&quot;&gt;&quot;, maptask=&quot;&lt;/span&gt; + i + &lt;span class=&quot;code-quote&quot;&gt;&quot;, input=&quot;&lt;/span&gt; + s);
          &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; hash = h.hash(Bytes.toBytes(s));
          m.put(hash, s);
        }
      }

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14269155" author="oliver_meyn" created="Thu, 8 Jan 2015 10:29:23 +0000"  >&lt;p&gt;I&apos;ve just run it against 0.98.6 (so, for the first time in 2 years) and it appears to be generating the same 10x # of splits, and therefore mappers, more than I would expect. The final rowcount looks fine though (ie hbase pe sequentialWrite 1 produces 10 mappers but total 1M rows). My original patch was just removing that outer loop, which I think would still work.&lt;/p&gt;

&lt;p&gt;But, I think the chances are good that I&apos;ve just misunderstood something - with all those magical 10&apos;s in there I&apos;m sure it&apos;s not a surprise to the original dev that there are 10 mappers for every 1 on the command line. Maybe it&apos;s just a documentation change needed?&lt;/p&gt;</comment>
                            <comment id="14276336" author="ndimiduk" created="Wed, 14 Jan 2015 01:28:53 +0000"  >&lt;p&gt;I don&apos;t know why the 10x multiplier is there. I usually run in --nomapred mode, so I haven&apos;t thought about this much. If you want to work out a patch we can get it committed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 31 Aug 2012 18:21:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>227971</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 48 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02cnb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11650</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>