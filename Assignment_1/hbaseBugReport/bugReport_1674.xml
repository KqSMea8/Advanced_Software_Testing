<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:55:25 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1674/HBASE-1674.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1674] regionserver goes down on system suspend and does not start back. </title>
                <link>https://issues.apache.org/jira/browse/HBASE-1674</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;when i suspend my system and resume it ... regionserver does not start back. looks like it actually shuts down completely. but the master and the zookeeper resume properly. &lt;/p&gt;

&lt;p&gt;i cannot stop-hbase.sh also properly. it goes on for a long time without doing anything. i have kill the master and zookeeper processes manually and do to &quot;start-hbase.sh&quot; to get back to the normal state.&lt;/p&gt;

&lt;p&gt;irfan@damascus:~/qw/sandbox_7/qws$ stop-hbase.sh &lt;br/&gt;
stopping master....................................................................................................&lt;/p&gt;

&lt;p&gt;irfan@damascus:~$ jps&lt;br/&gt;
956 &lt;br/&gt;
11871 JobTracker&lt;br/&gt;
1816 HMaster&lt;br/&gt;
5908 Launcher&lt;br/&gt;
1742 HQuorumPeer&lt;br/&gt;
11790 SecondaryNameNode&lt;br/&gt;
3352 &lt;br/&gt;
32390 RunJar&lt;br/&gt;
11974 TaskTracker&lt;br/&gt;
4656 Child&lt;br/&gt;
11673 DataNode&lt;br/&gt;
6121 Jps&lt;br/&gt;
4669 Child&lt;br/&gt;
11568 NameNode&lt;br/&gt;
12770 PluginMain&lt;/p&gt;

&lt;p&gt;irfan@damascus:~/apps/hbase-latest/logs$ tail -1000f hbase-irfan-regionserver-damascus.log&lt;br/&gt;
...&lt;br/&gt;
...&lt;br/&gt;
...&lt;br/&gt;
2009-07-19 11:48:59,538 INFO org.apache.hadoop.hbase.regionserver.HRegion: region site,,1247899770208/471872655 available; sequence id is 0&lt;br/&gt;
2009-07-19 11:48:59,539 INFO org.apache.hadoop.hbase.regionserver.HRegion: Starting compaction on region site,,1247899770208&lt;br/&gt;
2009-07-19 11:48:59,542 INFO org.apache.hadoop.hbase.regionserver.HRegion: compaction completed on region site,,1247899770208 in 0sec&lt;br/&gt;
2009-07-19 11:58:09,369 INFO org.apache.hadoop.hbase.regionserver.HRegionServer: compactions no longer limited&lt;br/&gt;
2009-07-19 12:47:59,493 INFO org.apache.hadoop.hbase.regionserver.HLog: Roll /hbase/.logs/damascus,60020,1247984279075/hlog.dat.1247984279311, entries=109890, calcsize=18397518, filesize=12396338. New hlog /hbase/.logs/damascus,60020,1247984279075/hlog.dat.1247987879487&lt;br/&gt;
2009-07-19 15:37:42,291 WARN org.apache.zookeeper.ClientCnxn: Exception closing session 0x12291a8d2be0001 to sun.nio.ch.SelectionKeyImpl@1542a75&lt;br/&gt;
java.io.IOException: TIMED OUT&lt;br/&gt;
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:858)&lt;br/&gt;
2009-07-19 15:37:42,292 WARN org.apache.hadoop.hbase.util.Sleeper: We slept 7207717ms, ten times longer than scheduled: 3000&lt;br/&gt;
2009-07-19 15:37:42,292 WARN org.apache.hadoop.hbase.regionserver.HRegionServer: unable to report to master for 7207717 milliseconds - retrying&lt;br/&gt;
2009-07-19 15:37:42,294 WARN org.apache.hadoop.hbase.util.Sleeper: We slept 7212721ms, ten times longer than scheduled: 10000&lt;br/&gt;
2009-07-19 15:37:42,295 WARN org.apache.zookeeper.ClientCnxn: Exception closing session 0x12291a8d2be0005 to sun.nio.ch.SelectionKeyImpl@628704&lt;br/&gt;
java.io.IOException: TIMED OUT&lt;br/&gt;
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:858)&lt;br/&gt;
2009-07-19 15:37:42,296 WARN org.apache.hadoop.hdfs.DFSClient: DFSOutputStream ResponseProcessor exception  for block blk_5565548861312875890_4766java.net.SocketTimeoutException: 63000 millis timeout while waiting for channel to be ready for read. ch : java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/127.0.0.1:15928 remote=/127.0.0.1:50010&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.hadoop.net.SocketIOWithTimeout.doIO(SocketIOWithTimeout.java:164)&lt;br/&gt;
	at org.apache.hadoop.net.SocketInputStream.read(SocketInputStream.java:155)&lt;br/&gt;
	at org.apache.hadoop.net.SocketInputStream.read(SocketInputStream.java:128)&lt;br/&gt;
	at java.io.DataInputStream.readFully(DataInputStream.java:178)&lt;br/&gt;
	at java.io.DataInputStream.readLong(DataInputStream.java:399)&lt;br/&gt;
	at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream$ResponseProcessor.run(DFSClient.java:2369)&lt;/p&gt;

&lt;p&gt;2009-07-19 15:37:42,297 WARN org.apache.hadoop.hdfs.DFSClient: Error Recovery for block blk_5565548861312875890_4766 bad datanode&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; 127.0.0.1:50010&lt;br/&gt;
2009-07-19 15:37:42,298 FATAL org.apache.hadoop.hbase.regionserver.LogRoller: Log rolling failed with ioe: &lt;br/&gt;
java.io.IOException: All datanodes 127.0.0.1:50010 are bad. Aborting...&lt;br/&gt;
	at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.processDatanodeError(DFSClient.java:2495)&lt;br/&gt;
	at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.access$1600(DFSClient.java:2048)&lt;br/&gt;
	at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream$DataStreamer.run(DFSClient.java:2211)&lt;br/&gt;
2009-07-19 15:37:42,300 INFO org.apache.hadoop.hbase.regionserver.HRegionServer: Dump of metrics: request=0.0, regions=3, stores=6, storefiles=4, storefileIndexSize=0, memstoreSize=0, usedHeap=29, maxHeap=996, blockCacheSize=1961680, blockCacheFree=416131792, blockCacheCount=2, blockCacheHitRatio=99&lt;br/&gt;
2009-07-19 15:37:42,300 INFO org.apache.hadoop.hbase.regionserver.LogRoller: LogRoller exiting.&lt;br/&gt;
2009-07-19 15:37:42,300 INFO org.apache.hadoop.hbase.regionserver.LogFlusher: regionserver/127.0.1.1:60020.logFlusher exiting&lt;br/&gt;
2009-07-19 15:37:42,392 INFO org.apache.hadoop.hbase.regionserver.HRegionServer: Got ZooKeeper event, state: Disconnected, type: None, path: null&lt;br/&gt;
2009-07-19 15:37:44,192 INFO org.apache.zookeeper.ClientCnxn: Attempting connection to server localhost/127.0.0.1:2181&lt;br/&gt;
2009-07-19 15:37:44,193 INFO org.apache.zookeeper.ClientCnxn: Priming connection to java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/127.0.0.1:55018 remote=localhost/127.0.0.1:2181&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-19 15:37:44,193 INFO org.apache.zookeeper.ClientCnxn: Server connection successful&lt;br/&gt;
2009-07-19 15:37:44,197 WARN org.apache.zookeeper.ClientCnxn: Exception closing session 0x12291a8d2be0005 to sun.nio.ch.SelectionKeyImpl@118cb72&lt;br/&gt;
java.io.IOException: Session Expired&lt;br/&gt;
	at org.apache.zookeeper.ClientCnxn$SendThread.readConnectResult(ClientCnxn.java:548)&lt;br/&gt;
	at org.apache.zookeeper.ClientCnxn$SendThread.doIO(ClientCnxn.java:661)&lt;br/&gt;
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:897)&lt;br/&gt;
2009-07-19 15:37:44,198 INFO org.apache.zookeeper.ZooKeeper: Closing session: 0x12291a8d2be0005&lt;br/&gt;
2009-07-19 15:37:44,199 INFO org.apache.zookeeper.ClientCnxn: Closing ClientCnxn for session: 0x12291a8d2be0005&lt;br/&gt;
2009-07-19 15:37:44,199 INFO org.apache.zookeeper.ClientCnxn: Disconnecting ClientCnxn for session: 0x12291a8d2be0005&lt;br/&gt;
2009-07-19 15:37:44,199 INFO org.apache.zookeeper.ZooKeeper: Session: 0x12291a8d2be0005 closed&lt;br/&gt;
2009-07-19 15:37:44,200 INFO org.apache.zookeeper.ClientCnxn: EventThread shut down&lt;br/&gt;
2009-07-19 15:37:44,297 INFO org.apache.zookeeper.ClientCnxn: Attempting connection to server localhost/127.0.0.1:2181&lt;br/&gt;
2009-07-19 15:37:44,297 INFO org.apache.zookeeper.ClientCnxn: Priming connection to java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/127.0.0.1:55020 remote=localhost/127.0.0.1:2181&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-19 15:37:44,297 INFO org.apache.zookeeper.ClientCnxn: Server connection successful&lt;br/&gt;
2009-07-19 15:37:44,298 WARN org.apache.zookeeper.ClientCnxn: Exception closing session 0x12291a8d2be0001 to sun.nio.ch.SelectionKeyImpl@d4b411&lt;br/&gt;
java.io.IOException: Session Expired&lt;br/&gt;
	at org.apache.zookeeper.ClientCnxn$SendThread.readConnectResult(ClientCnxn.java:548)&lt;br/&gt;
	at org.apache.zookeeper.ClientCnxn$SendThread.doIO(ClientCnxn.java:661)&lt;br/&gt;
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:897)&lt;br/&gt;
2009-07-19 15:37:44,299 INFO org.apache.hadoop.hbase.regionserver.HRegionServer: Got ZooKeeper event, state: Expired, type: None, path: null&lt;br/&gt;
2009-07-19 15:37:45,302 INFO org.apache.hadoop.ipc.HBaseServer: Stopping server on 60020&lt;br/&gt;
2009-07-19 15:37:45,303 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 4 on 60020: exiting&lt;br/&gt;
2009-07-19 15:37:45,303 INFO org.apache.hadoop.hbase.regionserver.HRegionServer: Stopping infoServer&lt;br/&gt;
2009-07-19 15:37:45,314 INFO org.apache.hadoop.ipc.HBaseServer: Stopping IPC Server Responder&lt;br/&gt;
2009-07-19 15:37:45,352 INFO org.apache.hadoop.hbase.regionserver.MemStoreFlusher: regionserver/127.0.1.1:60020.cacheFlusher exiting&lt;br/&gt;
2009-07-19 15:37:45,353 INFO org.apache.hadoop.hbase.regionserver.CompactSplitThread: regionserver/127.0.1.1:60020.compactor exiting&lt;br/&gt;
2009-07-19 15:37:45,353 INFO org.apache.hadoop.hbase.regionserver.HRegionServer$MajorCompactionChecker: regionserver/127.0.1.1:60020.majorCompactionChecker exiting&lt;br/&gt;
2009-07-19 15:37:45,353 INFO org.apache.hadoop.hbase.regionserver.HRegionServer: On abort, closed hlog&lt;br/&gt;
2009-07-19 15:37:45,354 INFO org.apache.hadoop.hbase.regionserver.HRegion: Closed .META.,,1&lt;br/&gt;
2009-07-19 15:37:45,354 INFO org.apache.hadoop.hbase.regionserver.HRegion: Closed site,,1247899770208&lt;br/&gt;
2009-07-19 15:37:45,354 INFO org.apache.hadoop.hbase.regionserver.HRegion: Closed &lt;del&gt;ROOT&lt;/del&gt;,,0&lt;br/&gt;
2009-07-19 15:37:45,354 INFO org.apache.hadoop.hbase.regionserver.HRegionServer: aborting server at: 127.0.1.1:60020&lt;br/&gt;
2009-07-19 15:37:45,362 INFO org.apache.hadoop.ipc.HBaseServer: Stopping IPC Server listener on 60020&lt;br/&gt;
2009-07-19 15:37:45,372 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 3 on 60020: exiting&lt;br/&gt;
2009-07-19 15:37:45,372 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 2 on 60020: exiting&lt;br/&gt;
2009-07-19 15:37:45,372 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 0 on 60020: exiting&lt;br/&gt;
2009-07-19 15:37:45,372 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 9 on 60020: exiting&lt;br/&gt;
2009-07-19 15:37:45,372 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 8 on 60020: exiting&lt;br/&gt;
2009-07-19 15:37:45,372 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 7 on 60020: exiting&lt;br/&gt;
2009-07-19 15:37:45,372 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 6 on 60020: exiting&lt;br/&gt;
2009-07-19 15:37:45,373 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 5 on 60020: exiting&lt;br/&gt;
2009-07-19 15:37:45,373 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 1 on 60020: exiting&lt;br/&gt;
2009-07-19 15:37:52,295 INFO org.apache.hadoop.hbase.Leases: regionserver/127.0.1.1:60020.leaseChecker closing leases&lt;br/&gt;
2009-07-19 15:37:52,295 INFO org.apache.hadoop.hbase.Leases: regionserver/127.0.1.1:60020.leaseChecker closed leases&lt;br/&gt;
2009-07-19 15:37:52,295 INFO org.apache.hadoop.hbase.regionserver.HRegionServer: worker thread exiting&lt;br/&gt;
2009-07-19 15:37:52,295 INFO org.apache.zookeeper.ZooKeeper: Closing session: 0x12291a8d2be0001&lt;br/&gt;
2009-07-19 15:37:52,295 INFO org.apache.zookeeper.ClientCnxn: Closing ClientCnxn for session: 0x12291a8d2be0001&lt;br/&gt;
2009-07-19 15:37:52,296 INFO org.apache.zookeeper.ClientCnxn: Disconnecting ClientCnxn for session: 0x12291a8d2be0001&lt;br/&gt;
2009-07-19 15:37:52,296 INFO org.apache.zookeeper.ZooKeeper: Session: 0x12291a8d2be0001 closed&lt;br/&gt;
2009-07-19 15:37:52,296 INFO org.apache.zookeeper.ClientCnxn: EventThread shut down&lt;br/&gt;
2009-07-19 15:37:52,398 INFO org.apache.hadoop.hbase.regionserver.HRegionServer: regionserver/127.0.1.1:60020 exiting&lt;br/&gt;
2009-07-19 15:37:52,399 INFO org.apache.hadoop.hbase.regionserver.HRegionServer: Starting shutdown thread.&lt;br/&gt;
2009-07-19 15:37:52,400 INFO org.apache.hadoop.hbase.regionserver.HRegionServer: Shutdown thread complete&lt;/p&gt;
</description>
                <environment>&lt;p&gt;ubuntu 9.04&lt;/p&gt;</environment>
        <key id="12430876">HBASE-1674</key>
            <summary>regionserver goes down on system suspend and does not start back. </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="irfanmohammed">Irfan Mohammed</reporter>
                        <labels>
                    </labels>
                <created>Sun, 19 Jul 2009 12:57:44 +0000</created>
                <updated>Mon, 20 Jul 2009 02:23:10 +0000</updated>
                            <resolved>Sun, 19 Jul 2009 18:22:52 +0000</resolved>
                                    <version>0.20.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12733025" author="apurtell" created="Sun, 19 Jul 2009 18:22:51 +0000"  >&lt;p&gt;Marking as WONTFIX. &lt;/p&gt;

&lt;p&gt;If I understand correctly, this issue is about a test setup of Hadoop+HBase not recovering after a suspend/resume power operation, possibly a laptop.&lt;/p&gt;

&lt;p&gt;Suspend/resume is not a supported action and I doubt it ever will be. &lt;/p&gt;</comment>
                            <comment id="12733102" author="irfanmohammed" created="Mon, 20 Jul 2009 01:45:22 +0000"  >&lt;p&gt;Thanks Andrew for the quick response.&lt;/p&gt;

&lt;p&gt;Is there a way to stop the hbase with the regionserver dead? stop-hbase.sh goes on forever. at least having the ability to stop/start hbase when the regionserver(s) are dead would help.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="12733106" author="stack" created="Mon, 20 Jul 2009 02:23:10 +0000"  >&lt;p&gt;@Irfan  Update to TRUNK.  Has fixes for bad start/stop in hbase.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 19 Jul 2009 18:22:51 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25907</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 22 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hemn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99632</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>