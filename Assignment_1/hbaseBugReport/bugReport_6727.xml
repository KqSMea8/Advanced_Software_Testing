<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:39:20 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6727/HBASE-6727.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6727] [89-fb] allow HBaseServers&apos;s callqueue to be better configurable to avoid OOMs</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6727</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The callQueue size (where requests get queued up if all handlers are busy) is a LinkedBlockingQueue of size 100 * number_of_handlers. So, with say 300 handler threads, the call queue can have upto 30k entries queued up. If the requests are large enough, this can result in OOM or severe GC pauses.&lt;/p&gt;

&lt;p&gt;Ideally, we should allow this param to be separately configurable independent of the numberof handlers; perhaps an even better approach would be to specify a memory size based limit, instead of a number of entries based limit.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;I have not looked at the trunk version for this issue. So it may or may not be relevant there.&amp;#93;&lt;/span&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12606450">HBASE-6727</key>
            <summary>[89-fb] allow HBaseServers&apos;s callqueue to be better configurable to avoid OOMs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="adela">Adela Maznikar</assignee>
                                    <reporter username="kannanm">Kannan Muthukkaruppan</reporter>
                        <labels>
                    </labels>
                <created>Thu, 6 Sep 2012 18:00:07 +0000</created>
                <updated>Sun, 21 Oct 2012 00:01:48 +0000</updated>
                            <resolved>Sat, 20 Oct 2012 03:16:58 +0000</resolved>
                                                    <fixVersion>0.89-fb</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13450053" author="stack" created="Thu, 6 Sep 2012 21:15:56 +0000"  >&lt;p&gt;Check out &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3813&quot; title=&quot;Change RPC callQueue size from &amp;quot;handlerCount * MAX_QUEUE_SIZE_PER_HANDLER;&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3813&quot;&gt;&lt;del&gt;HBASE-3813&lt;/del&gt;&lt;/a&gt; Kannan.&lt;/p&gt;</comment>
                            <comment id="13450177" author="kannanm" created="Thu, 6 Sep 2012 23:44:56 +0000"  >&lt;p&gt;Stack: Thanks. It is indeed a dup. Going to keep this issue open for the 89-fb branch. The fix in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3813&quot; title=&quot;Change RPC callQueue size from &amp;quot;handlerCount * MAX_QUEUE_SIZE_PER_HANDLER;&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3813&quot;&gt;&lt;del&gt;HBASE-3813&lt;/del&gt;&lt;/a&gt; appears to be the simpler one-- of using a # number of entries based limit. We plan to look into using a memory size based limit.&lt;/p&gt;</comment>
                            <comment id="13479785" author="xieliang007" created="Fri, 19 Oct 2012 08:02:50 +0000"  >&lt;p&gt;Hi Kannan, can we close it now, since i saw &quot;Revision: 1395033&quot; had resolved it on FB-89 branch. &lt;/p&gt;</comment>
                            <comment id="13480613" author="kannanm" created="Sat, 20 Oct 2012 03:16:36 +0000"  >&lt;p&gt;Yes, this has been fixed by Adela in the rev you mention.&lt;/p&gt;

&lt;p&gt;Details here: &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1395033&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1395033&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13480802" author="yuzhihong@gmail.com" created="Sat, 20 Oct 2012 18:59:25 +0000"  >&lt;p&gt;Patch from 0.89-fb&lt;/p&gt;

&lt;p&gt;There is one queue in 0.89-fb branch: callQueue&lt;br/&gt;
In trunk, we need to handle three queues: priorityCallQueue, replicationQueue and callQueue&lt;/p&gt;

&lt;p&gt;I think one callQueueThrottler should be used for the three queues.&lt;/p&gt;</comment>
                            <comment id="13480856" author="stack" created="Sun, 21 Oct 2012 00:01:48 +0000"  >&lt;p&gt;Created &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7023&quot; title=&quot;Forward-port HBASE-6727 size-based HBaseServer callQueue throttle from 0.89fb branch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7023&quot;&gt;HBASE-7023&lt;/a&gt; to forward-port this facility that is nicer than what we have in trunk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12550148" name="6727.txt" size="6568" author="yuzhihong@gmail.com" created="Sat, 20 Oct 2012 18:59:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 6 Sep 2012 21:15:56 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>241833</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 8 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02e3z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11887</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>