<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:54:14 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1521/HBASE-1521.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1521] Optimize codepath for minor compactions</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1521</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;There are some additional optimizations in the specialized StoreScanner and also in HFile for minor compactions.  For example, there is some KV disassembling and sanity checking in HFile even though in a minor compaction these checks have already been run during the flush.&lt;/p&gt;

&lt;p&gt;Another area to discuss is whether we should actually process deletes during minor compactions.  It&apos;s not especially expensive (ScanDeleteTracker is quite simple) but it requires looking at both the row and the qualifier value of every single KV.  Removing this would drop our axiom that &quot;Deletes only apply to later storefiles&quot;, which is used during Get processing to have more efficient delete handling.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12427836">HBASE-1521</key>
            <summary>Optimize codepath for minor compactions</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="amitanand">Amitanand Aiyer</assignee>
                                    <reporter username="streamy">Jonathan Gray</reporter>
                        <labels>
                    </labels>
                <created>Sun, 14 Jun 2009 15:39:05 +0000</created>
                <updated>Wed, 21 Oct 2015 05:34:46 +0000</updated>
                            <resolved>Wed, 21 Oct 2015 05:34:45 +0000</resolved>
                                    <version>0.20.0</version>
                    <version>0.90.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12719281" author="streamy" created="Sun, 14 Jun 2009 15:40:27 +0000"  >&lt;p&gt;My opinion on the delete matter is basically that if we are trading off between making all compactions faster but making Gets in the presence of deletes slower, then we should do it.  Compactions are very important to get fast and with optimizations in this issue we could potentially get rid of almost all KV disassembly.&lt;/p&gt;</comment>
                            <comment id="12719320" author="erikholstad@gmail.com" created="Sun, 14 Jun 2009 19:08:52 +0000"  >&lt;p&gt;I totally agree with Jonathan on this one, even though we are the once that have tried to optimize the get path. Having a fast compact and is more important,&lt;br/&gt;
in my opinion. The one case where it will make the biggest slowdown is the case when getting stuff from memcache, which is already one of the fastest, so&lt;br/&gt;
feels like a good place to make the system more even. And since we don&apos;t even are sure about the future of the get implementation I think it is more important&lt;br/&gt;
to focus on other parts like compaction speed. &lt;/p&gt;</comment>
                            <comment id="12719321" author="ryanobjc" created="Sun, 14 Jun 2009 19:23:02 +0000"  >&lt;p&gt;for now we have a reasonably fast (but not fastest) minor compactor that enforces deletes.  So we don&apos;t have to decide today.&lt;/p&gt;

&lt;p&gt;we may want to consider moving that for semantic/data preservation reasons, so we can undo deletes before a major compact, but I&apos;m ok either way.&lt;/p&gt;</comment>
                            <comment id="12742640" author="streamy" created="Wed, 12 Aug 2009 22:54:04 +0000"  >&lt;p&gt;Let&apos;s revisit for 0.21, seems to be consensus on leaving it for now.&lt;/p&gt;</comment>
                            <comment id="12902200" author="jdcryans" created="Wed, 25 Aug 2010 00:26:42 +0000"  >&lt;p&gt;Dupe of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2462&quot; title=&quot;Review compaction heuristic and move compaction code out so standalone and independently testable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2462&quot;&gt;&lt;del&gt;HBASE-2462&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12902233" author="streamy" created="Wed, 25 Aug 2010 00:53:18 +0000"  >&lt;p&gt;This is not a dupe of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2462&quot; title=&quot;Review compaction heuristic and move compaction code out so standalone and independently testable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2462&quot;&gt;&lt;del&gt;HBASE-2462&lt;/del&gt;&lt;/a&gt;.  That jira deals with the heuristics for actually doing a compaction and which files to compact.  This jira deals with what should be processed during a minor compaction (deletes, versions, ttl, etc).&lt;/p&gt;

&lt;p&gt;I&apos;m going to be revisiting this issue in the next few days as part of a new use case I have where enforcing maxVersions on minors (and possibly even on flush) would be necessary.&lt;/p&gt;

&lt;p&gt;Let&apos;s keep open for now and I will either resolve or punt next week.&lt;/p&gt;</comment>
                            <comment id="12923228" author="stack" created="Wed, 20 Oct 2010 23:23:04 +0000"  >&lt;p&gt;Moving out an &apos;improvement&apos; issue.  If patch comes in soon, we can reconsider but moving out for now.&lt;/p&gt;</comment>
                            <comment id="13047558" author="stack" created="Fri, 10 Jun 2011 22:45:49 +0000"  >&lt;p&gt;Moving out of 0.92.0. Pull it back in if you think different.&lt;/p&gt;</comment>
                            <comment id="14311828" author="lhofhansl" created="Mon, 9 Feb 2015 05:43:11 +0000"  >&lt;p&gt;Is this still relevant? We do treat deletes in minor compactions (we delete any Cell that is affected by a delete). Delete markers themselves are only removed during major compactions.&lt;/p&gt;

&lt;p&gt;Seems we can close this 5 year old issue.&lt;/p&gt;</comment>
                            <comment id="14966275" author="stack" created="Wed, 21 Oct 2015 05:34:45 +0000"  >&lt;p&gt;Resolving as no longer pertinent. Please reopen if I have it wrong.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 14 Jun 2009 19:08:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32177</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 8 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hdqn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99488</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>