<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:40:51 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6900/HBASE-6900.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6900] RegionScanner.reseek() creates NPE when a flush or compaction happens before the reseek.</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6900</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5520&quot; title=&quot;Support reseek() at RegionScanner&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5520&quot;&gt;&lt;del&gt;HBASE-5520&lt;/del&gt;&lt;/a&gt; introduced reseek() on the RegionScanner.  &lt;br/&gt;
Now when a scanner is created we have the StoreScanner heap.  After this if a flush or compaction happens parallely all the StoreScannerObservers are cleared so that whenever a new next() call happens we tend to recreate the scanner based on the latest store files.&lt;br/&gt;
The reseek() in StoreScanner expects the heap not to be null because always reseek would be called from next()&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; reseek(KeyValue kv) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    &lt;span class=&quot;code-comment&quot;&gt;//Heap cannot be &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, because &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is only called from next() which
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;//guarantees that heap will never be &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; before &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; call.
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (explicitColumnQuery &amp;amp;&amp;amp; lazySeekEnabledGlobally) {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; heap.requestSeek(kv, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, useRowColBloom);
    } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; heap.reseek(kv);
    }
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Now when we call RegionScanner.reseek() directly using CPs we tend to get a NPE.  In our case it happened when a major compaction was going on.  I will also attach a testcase to show the problem.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12609643">HBASE-6900</key>
            <summary>RegionScanner.reseek() creates NPE when a flush or compaction happens before the reseek.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ram_krish">ramkrishna.s.vasudevan</assignee>
                                    <reporter username="ram_krish">ramkrishna.s.vasudevan</reporter>
                        <labels>
                    </labels>
                <created>Sat, 29 Sep 2012 11:26:41 +0000</created>
                <updated>Sun, 7 Apr 2013 05:05:45 +0000</updated>
                            <resolved>Fri, 5 Oct 2012 06:33:05 +0000</resolved>
                                                    <fixVersion>0.94.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                <comments>
                            <comment id="13466186" author="ram_krish" created="Sat, 29 Sep 2012 11:34:09 +0000"  >&lt;p&gt;Added a printStackTrace line to the reseek() api in RegionScannerImpl.  When the testcase is run with this stmt, we can see the NPE in the console.&lt;/p&gt;</comment>
                            <comment id="13466187" author="ram_krish" created="Sat, 29 Sep 2012 11:34:41 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2012-09-29 17:02:10,765 INFO  [main] regionserver.HStore(1045): Completed major compaction of 1 file(s) in family of testToShowNPEOnRegionScannerReseek,,1348918329648.73944279562b7d512a9f318cc90098d2. into 279f1073e9ba4e6db93d93eab86258cf, size=782.0; total size &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; store is 782.0
java.lang.NullPointerException
	at org.apache.hadoop.hbase.regionserver.StoreScanner.reseek(StoreScanner.java:569)
	at org.apache.hadoop.hbase.regionserver.NonLazyKeyValueScanner.doRealSeek(NonLazyKeyValueScanner.java:55)
	at org.apache.hadoop.hbase.regionserver.NonLazyKeyValueScanner.requestSeek(NonLazyKeyValueScanner.java:39)
	at org.apache.hadoop.hbase.regionserver.KeyValueHeap.generalizedSeek(KeyValueHeap.java:319)
	at org.apache.hadoop.hbase.regionserver.KeyValueHeap.requestSeek(KeyValueHeap.java:278)
	at org.apache.hadoop.hbase.regionserver.HRegion$RegionScannerImpl.reseek(HRegion.java:3588)
	at org.apache.hadoop.hbase.regionserver.TestHRegion.testToShowNPEOnRegionScannerReseek(TestHRegion.java:232)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13466302" author="stack" created="Sat, 29 Sep 2012 20:35:03 +0000"  >&lt;p&gt;Patch looks good Ram.  Doesn&apos;t fix the issue though?  What would you suggest?&lt;/p&gt;</comment>
                            <comment id="13466322" author="lhofhansl" created="Sat, 29 Sep 2012 21:32:20 +0000"  >&lt;p&gt;The patch is just to confirm the issue?&lt;br/&gt;
If this is to deal with something that is possibly null we should do that (i.e. add a null check and not catch throwable).&lt;/p&gt;

&lt;p&gt;My dev machine is dead currently so I cannot look at code easily. From your description reseek should do whatever check and setup next() performs, right?&lt;/p&gt;</comment>
                            <comment id="13466484" author="ram_krish" created="Sun, 30 Sep 2012 14:11:28 +0000"  >&lt;p&gt;@Lars/@Stack&lt;br/&gt;
The patch does not fix the issue. I feel that what ever next() does, by calling checkReseek() we need to do the same thing.&lt;/p&gt;</comment>
                            <comment id="13466518" author="ram_krish" created="Sun, 30 Sep 2012 16:59:01 +0000"  >&lt;p&gt;Patch with fix.  I have not run testsuite yet.&lt;br/&gt;
The checkReseek() returns true if the heap is null.  So both checkReseek and null check is needed i feel.&lt;br/&gt;
Pls review and provide your comments/suggestions.&lt;/p&gt;</comment>
                            <comment id="13466532" author="hadoopqa" created="Sun, 30 Sep 2012 17:56:22 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12547166/HBASE-6900_1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12547166/HBASE-6900_1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 149 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 7 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2973//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2973//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2973//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2973//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2973//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2973//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2973//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2973//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2973//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2973//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2973//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2973//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2973//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2973//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13466551" author="lhofhansl" created="Sun, 30 Sep 2012 19:49:22 +0000"  >&lt;p&gt;Hmm... Shouldn&apos;t the RegionScannerImpl.reseek perform these extra checks? (again, I do not have a machine with Eclipse to browse the code easily ATM)&lt;/p&gt;</comment>
                            <comment id="13466553" author="yuzhihong@gmail.com" created="Sun, 30 Sep 2012 20:02:38 +0000"  >&lt;p&gt;RegionScannerImpl doesn&apos;t override reseek() presently.&lt;/p&gt;

&lt;p&gt;FYI&lt;/p&gt;</comment>
                            <comment id="13466555" author="yuzhihong@gmail.com" created="Sun, 30 Sep 2012 20:05:23 +0000"  >&lt;p&gt;I was looking at 0.92 code base.&lt;br/&gt;
In trunk, RegionScannerImpl has reseek().&lt;/p&gt;</comment>
                            <comment id="13466561" author="yuzhihong@gmail.com" created="Sun, 30 Sep 2012 20:29:03 +0000"  >&lt;p&gt;RegionScannerImpl.reseek() would call this.storeHeap.requestSeek(), ending up in StoreScanner.reseek().&lt;/p&gt;

&lt;p&gt;So I think Ram&apos;s change should be fine.&lt;/p&gt;</comment>
                            <comment id="13466562" author="lhofhansl" created="Sun, 30 Sep 2012 20:32:48 +0000"  >&lt;p&gt;yes, but StoreScanner should not need to be changed for this&lt;/p&gt;</comment>
                            <comment id="13466640" author="ram_krish" created="Mon, 1 Oct 2012 04:56:53 +0000"  >&lt;p&gt;@Lars&lt;br/&gt;
I too first thought of performing these checks in the RegionScannerImpl level but &lt;br/&gt;
-&amp;gt; The StoreScanner heap is not exposed outside as the storeHeap internally has the Storescanner heap(which is on the memstore and the storefiles).  The KeyValueScanner is the one that invokes the reseek() api.&lt;br/&gt;
-&amp;gt; RegionScanner can have customised implementations also.&lt;br/&gt;
What do you feel Lars?&lt;/p&gt;</comment>
                            <comment id="13467590" author="ram_krish" created="Tue, 2 Oct 2012 09:21:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt;&lt;br/&gt;
Can you take a look at this?  So that i can rebase the patch based on your suggestion.&lt;/p&gt;</comment>
                            <comment id="13467881" author="lhofhansl" created="Tue, 2 Oct 2012 17:23:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ram_krish&quot; class=&quot;user-hover&quot; rel=&quot;ram_krish&quot;&gt;ramkrishna.s.vasudevan&lt;/a&gt; Sorry for the delay.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
{+    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!checkReseek() &amp;amp;&amp;amp; heap != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Do we need to call checkReseek here? This is a somewhat expensive operation and we&apos;re now doing it for every reseek issued to a StoreScanner.&lt;br/&gt;
Could we just check for &lt;tt&gt;heap == null&lt;/tt&gt; in the beginning of the method and return &lt;tt&gt;false&lt;/tt&gt; if so?&lt;/p&gt;</comment>
                            <comment id="13468356" author="ram_krish" created="Wed, 3 Oct 2012 05:44:21 +0000"  >&lt;p&gt;@Lars&lt;br/&gt;
If really the heap is not null then checkReseek will return immediately.  Attaching the checkReseek code incase you dont have eclipse with you.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; checkReseek() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.heap == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.lastTop != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
      resetScannerStack(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.lastTop);
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.heap.peek() == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
          || store.comparator.compare(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.lastTop, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.heap.peek()) != 0) {
        LOG.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Storescanner.peek() is changed where before = &quot;&lt;/span&gt;
            + &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.lastTop.toString() + &lt;span class=&quot;code-quote&quot;&gt;&quot;,and after = &quot;&lt;/span&gt; + &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.heap.peek());
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.lastTop = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
      }
      &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.lastTop = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;; &lt;span class=&quot;code-comment&quot;&gt;// gone!
&lt;/span&gt;    }
    &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; dont need to reseek
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Again why i added &lt;span class=&quot;error&quot;&gt;Unable to render embedded object: File (checkReseek() and heap) not found.&lt;/span&gt;=null is because&lt;br/&gt;
thought heap is not null the lasttop could be null?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Could we just check &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; heap == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; in the beginning of the method and &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; so?
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Actually we can return false on seeing heap to be null, but am not sure whether it will be generic.  Because if the CP impl is such a way that i do a reseek and return of false implies that the given row key is not available then it gives a different meaning.  But whereas if i reset the heap and then do a reseek then am ensuring that i am reseeking to the required kv on the newly created heap.&lt;br/&gt;
Infact our internal usage of heap needs this behaviour.  If you feel that is not generic then am open to change this Lars.&lt;/p&gt;

&lt;p&gt;Thanks a lot for your review.&lt;/p&gt;
</comment>
                            <comment id="13469463" author="lhofhansl" created="Thu, 4 Oct 2012 15:48:26 +0000"  >&lt;p&gt;Thanks for explaining Ram.&lt;/p&gt;

&lt;p&gt;Are you sure you care for the return value of checkReseek?&lt;br/&gt;
After you explanation it seems like you can just call checkReseek always, and then always seek to the kv passed it. Like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  @Override
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; reseek(KeyValue kv) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    &lt;span class=&quot;code-comment&quot;&gt;//Heap will not be &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is called from next() which.
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;//If called from RegionScanner.reseek(...) make sure the scanner
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;//stack is reset &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; needed.
&lt;/span&gt;    checkReseek();
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (explicitColumnQuery &amp;amp;&amp;amp; lazySeekEnabledGlobally) {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; heap.requestSeek(kv, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, useRowColBloom);
    } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; heap.reseek(kv);
    }
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13469517" author="ram_krish" created="Thu, 4 Oct 2012 17:11:21 +0000"  >&lt;p&gt;I was just seeing what if the lastTop was null so that checkReseek doesn&apos;t reset the heap.  If that will not happen then the above change should be fine Lars. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
Thank you.&lt;/p&gt;</comment>
                            <comment id="13469524" author="lhofhansl" created="Thu, 4 Oct 2012 17:19:42 +0000"  >&lt;p&gt;Even if that happens, don&apos;t you always want to reseek to the kv that passed in?&lt;/p&gt;</comment>
                            <comment id="13469620" author="lhofhansl" created="Thu, 4 Oct 2012 19:27:22 +0000"  >&lt;p&gt;Attaching this as a test patch (to see what HadoopQA has to say)&lt;/p&gt;</comment>
                            <comment id="13469650" author="hadoopqa" created="Thu, 4 Oct 2012 20:25:41 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12547805/6900-test.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12547805/6900-test.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 81 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 5 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.io.hfile.TestForceCacheImportantBlocks&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3003//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3003//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3003//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3003//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3003//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3003//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3003//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3003//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3003//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3003//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3003//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3003//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3003//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3003//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13469676" author="lhofhansl" created="Thu, 4 Oct 2012 20:50:37 +0000"  >&lt;p&gt;Failed test passed locally. Will leave it to Ram to decide whether to commit this.&lt;/p&gt;</comment>
                            <comment id="13470024" author="anoopsamjohn" created="Fri, 5 Oct 2012 04:57:57 +0000"  >&lt;blockquote&gt;&lt;p&gt;I was just seeing what if the lastTop was null so that checkReseek doesn&apos;t reset the heap. If that will not happen then the above change should be fine Lars.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Store#notifyChangedReadersObservers() will set this lastTop to the old heap peeked value. This will happen when in between of scan compaction happens or flush.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Even if that happens, don&apos;t you always want to reseek to the kv that passed in?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes ideally whatever be the case when reseek() API is called from the CP expect a reseek to happen to the passed KV&lt;/p&gt;</comment>
                            <comment id="13470028" author="ram_krish" created="Fri, 5 Oct 2012 05:22:42 +0000"  >&lt;p&gt;@Lars&lt;br/&gt;
Yes we wanted to reseek.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; could be &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;.
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.lastTop = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.peek();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above code while updating the reader says the lastTop could be null.  That is why i had to add some additional checks.  Anyway will analyse once more if it is fine i will take up your changes.  Thanks once again.&lt;/p&gt;</comment>
                            <comment id="13470036" author="lhofhansl" created="Fri, 5 Oct 2012 05:54:18 +0000"  >&lt;p&gt;I&apos;m rolling an RC as soon as &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6900&quot; title=&quot;RegionScanner.reseek() creates NPE when a flush or compaction happens before the reseek.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6900&quot;&gt;&lt;del&gt;HBASE-6900&lt;/del&gt;&lt;/a&gt; is committed.&lt;br/&gt;
(I assume this can go into 0.94.3 if needed, which will be soon after 0.94.2)&lt;/p&gt;</comment>
                            <comment id="13470046" author="ram_krish" created="Fri, 5 Oct 2012 06:23:06 +0000"  >&lt;p&gt;@Lars&lt;br/&gt;
Its better if we get it in 0.94.2.  I was once again checking the lastTop behaviour.  Even if two times updateReaders happen i feel the lastTop will not be null.  Verified the same with a testcase.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// All &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; API calls will call &apos;checkReseek&apos; which will cause
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// the scanner stack to reseek &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.heap==&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.lastTop != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;.
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// But &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; two calls to updateReaders() happen without a &apos;next&apos; or &apos;peek&apos; then we
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// will end up calling &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.peek() which would cause a reseek in the middle of a updateReaders
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// which is NOT what we want, not to mention could cause an NPE. So we early out here.
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.heap == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So i feel the patch that you gave should be fine without additional checks.  +1 on it.&lt;br/&gt;
Lars if you can commit that would be great because i cannot do the commit from office and also i may not be able to do it today.  &lt;/p&gt;</comment>
                            <comment id="13470051" author="lhofhansl" created="Fri, 5 Oct 2012 06:33:05 +0000"  >&lt;p&gt;Committed to 0.94 and 0.96.&lt;br/&gt;
Thanks for your patience Ram.&lt;/p&gt;</comment>
                            <comment id="13470101" author="hudson" created="Fri, 5 Oct 2012 08:26:37 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #507 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/507/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/507/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6900&quot; title=&quot;RegionScanner.reseek() creates NPE when a flush or compaction happens before the reseek.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6900&quot;&gt;&lt;del&gt;HBASE-6900&lt;/del&gt;&lt;/a&gt; RegionScanner.reseek() creates NPE when a flush or compaction happens before the reseek. (Revision 1394378)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13470102" author="hudson" created="Fri, 5 Oct 2012 08:26:37 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3429 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3429/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3429/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6900&quot; title=&quot;RegionScanner.reseek() creates NPE when a flush or compaction happens before the reseek.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6900&quot;&gt;&lt;del&gt;HBASE-6900&lt;/del&gt;&lt;/a&gt; RegionScanner.reseek() creates NPE when a flush or compaction happens before the reseek. (Revision 1394377)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13470242" author="hudson" created="Fri, 5 Oct 2012 11:46:47 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #210 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/210/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/210/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6900&quot; title=&quot;RegionScanner.reseek() creates NPE when a flush or compaction happens before the reseek.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6900&quot;&gt;&lt;del&gt;HBASE-6900&lt;/del&gt;&lt;/a&gt; RegionScanner.reseek() creates NPE when a flush or compaction happens before the reseek. (Revision 1394377)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13470875" author="hudson" created="Sat, 6 Oct 2012 02:35:51 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #60 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/60/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/60/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6900&quot; title=&quot;RegionScanner.reseek() creates NPE when a flush or compaction happens before the reseek.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6900&quot;&gt;&lt;del&gt;HBASE-6900&lt;/del&gt;&lt;/a&gt; RegionScanner.reseek() creates NPE when a flush or compaction happens before the reseek. (Revision 1394378)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13490370" author="hudson" created="Mon, 5 Nov 2012 01:35:35 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security-on-Hadoop-23 #9 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/9/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/9/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6900&quot; title=&quot;RegionScanner.reseek() creates NPE when a flush or compaction happens before the reseek.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6900&quot;&gt;&lt;del&gt;HBASE-6900&lt;/del&gt;&lt;/a&gt; RegionScanner.reseek() creates NPE when a flush or compaction happens before the reseek. (Revision 1394378)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13624698" author="stack" created="Sun, 7 Apr 2013 05:05:45 +0000"  >&lt;p&gt;Fix up after bulk move overwrote some 0.94.2 fix versions w/ 0.95.0 (Noticed by Lars Hofhansl)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12547805" name="6900-test.txt" size="3044" author="lhofhansl" created="Thu, 4 Oct 2012 19:27:22 +0000"/>
                            <attachment id="12547113" name="HBASE-6900.patch" size="2399" author="ram_krish" created="Sat, 29 Sep 2012 11:34:09 +0000"/>
                            <attachment id="12547166" name="HBASE-6900_1.patch" size="3139" author="ram_krish" created="Sun, 30 Sep 2012 16:59:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 29 Sep 2012 20:35:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>239546</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 36 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i00r3r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2323</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>