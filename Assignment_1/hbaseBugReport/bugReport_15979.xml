<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 21:09:09 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-15979/HBASE-15979.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-15979] replication_admin_test.rb fails in 0.98 branch</title>
                <link>https://issues.apache.org/jira/browse/HBASE-15979</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;From &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-matrix/jdk=latest1.7,label=yahoo-not-h2/352/testReport/junit/org.apache.hadoop.hbase.client/TestShell/testRunShellTests/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-matrix/jdk=latest1.7,label=yahoo-not-h2/352/testReport/junit/org.apache.hadoop.hbase.client/TestShell/testRunShellTests/&lt;/a&gt; :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  1) Error:
test_add_peer:_multiple_zk_cluster_key_-_peer_config(Hbase::ReplicationAdminTest):
NativeException: org.apache.hadoop.hbase.replication.ReplicationException: Could not remove peer with id=1
    org/apache/hadoop/hbase/replication/ReplicationPeersZKImpl.java:144:in `removePeer&apos;
    org/apache/hadoop/hbase/client/replication/ReplicationAdmin.java:229:in `removePeer&apos;
    /home/jenkins/jenkins-slave/workspace/HBase-0.98-matrix/jdk/latest1.7/label/yahoo-not-h2/hbase-shell/src/main/ruby/hbase/replication_admin.rb:102:in `remove_peer&apos;
    ./src/test/ruby/hbase/replication_admin_test.rb:140:in `test_add_peer:_multiple_zk_cluster_key_-_peer_config&apos;
    org/jruby/RubyProc.java:270:in `call&apos;
    org/jruby/RubyKernel.java:2105:in `send&apos;
    org/jruby/RubyArray.java:1620:in `each&apos;
    org/jruby/RubyArray.java:1620:in `each&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above led to assertion failures for subsequent tests:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2) Failure:
test_add_peer:_multiple_zk_cluster_key_-_peer_config(Hbase::ReplicationAdminTest)
    [./src/test/ruby/hbase/replication_admin_test.rb:41:in `teardown&apos;
     org/jruby/RubyArray.java:1620:in `each&apos;
     org/jruby/RubyArray.java:1620:in `each&apos;]:
&amp;lt;0&amp;gt; expected but was
&amp;lt;1&amp;gt;.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12976556">HBASE-15979</key>
            <summary>replication_admin_test.rb fails in 0.98 branch</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="yuzhihong@gmail.com">Ted Yu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Jun 2016 17:53:02 +0000</created>
                <updated>Fri, 17 Jun 2016 00:56:44 +0000</updated>
                            <resolved>Sun, 12 Jun 2016 21:24:08 +0000</resolved>
                                    <version>0.98.19</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15319007" author="yuzhihong@gmail.com" created="Tue, 7 Jun 2016 17:54:16 +0000"  >&lt;p&gt;After adding exception message to the log:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
diff --git a/hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationPeersZKImpl.java b/hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationPeersZKImpl.java
index 632894c..0be7278 100644
--- a/hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationPeersZKImpl.java
+++ b/hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationPeersZKImpl.java
@@ -141,7 +141,7 @@ &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; class ReplicationPeersZKImpl &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; ReplicationStateZKBase &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; Re
       }
       ZKUtil.deleteNodeRecursively(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.zookeeper, ZKUtil.joinZNode(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.peersZNode, id));
     } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (KeeperException e) {
-      &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ReplicationException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Could not remove peer with id=&quot;&lt;/span&gt; + id, e);
+      &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ReplicationException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Could not remove peer with id=&quot;&lt;/span&gt; + id + e.getMessage(), e);
     }
   }

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I saw:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  1) Error:
test_add_peer:_multiple_zk_cluster_key(Hbase::ReplicationAdminTest):
NativeException: org.apache.hadoop.hbase.replication.ReplicationException: Could not remove peer with id=1KeeperErrorCode = Directory not empty &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; /hbase/replication/peers/1
    org/apache/hadoop/hbase/replication/ReplicationPeersZKImpl.java:144:in `removePeer&apos;
    org/apache/hadoop/hbase/client/replication/ReplicationAdmin.java:229:in `removePeer&apos;
    /home/hbase/98/hbase-shell/src/main/ruby/hbase/replication_admin.rb:102:in `remove_peer&apos;
    ./src/test/ruby/hbase/replication_admin_test.rb:97:in `test_add_peer:_multiple_zk_cluster_key&apos;
    org/jruby/RubyProc.java:270:in `call&apos;
    org/jruby/RubyKernel.java:2105:in `send&apos;
    org/jruby/RubyArray.java:1620:in `each&apos;
    org/jruby/RubyArray.java:1620:in `each&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15319362" author="apurtell" created="Tue, 7 Jun 2016 20:39:57 +0000"  >&lt;p&gt;A problem with concurrently executing test suites maybe? FWIW, I cannot reproduce this after multiple attempts. &lt;/p&gt;</comment>
                            <comment id="15319368" author="yuzhihong@gmail.com" created="Tue, 7 Jun 2016 20:47:53 +0000"  >&lt;p&gt;I was able to reproduce the test failure.&lt;/p&gt;

&lt;p&gt;Test output attached.&lt;/p&gt;</comment>
                            <comment id="15319383" author="apurtell" created="Tue, 7 Jun 2016 20:53:30 +0000"  >&lt;p&gt;Can you look at this &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu&quot; class=&quot;user-hover&quot; rel=&quot;tedyu&quot;&gt;Ted Yu&lt;/a&gt; since you can reproduce it?&lt;/p&gt;</comment>
                            <comment id="15319401" author="yuzhihong@gmail.com" created="Tue, 7 Jun 2016 20:56:59 +0000"  >&lt;p&gt;Is this urgent ?&lt;/p&gt;

&lt;p&gt;I have a few things on hand.&lt;/p&gt;</comment>
                            <comment id="15319421" author="apurtell" created="Tue, 7 Jun 2016 21:02:51 +0000"  >&lt;blockquote&gt;&lt;p&gt;Is this urgent ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;d say no? But you filed this (smile)&lt;/p&gt;</comment>
                            <comment id="15326639" author="yuzhihong@gmail.com" created="Sun, 12 Jun 2016 21:24:08 +0000"  >&lt;p&gt;I haven&apos;t been able to reproduce this test failure.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12808753" name="TestShell-output.txt" size="4371705" author="yuzhihong@gmail.com" created="Tue, 7 Jun 2016 20:47:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 7 Jun 2016 20:39:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            26 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2z3w7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>