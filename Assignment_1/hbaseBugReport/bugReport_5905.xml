<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:32:01 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5905/HBASE-5905.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5905] Protobuf interface for Admin: split between the internal and the external/customer interface</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5905</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;After a short discussion with Stack, I create a jira.&lt;br/&gt;
&amp;#8211;&lt;br/&gt;
I&apos;am a little bit confused by the protobuf interface for closeRegion.&lt;/p&gt;

&lt;p&gt;We have two types of closeRegion today:&lt;br/&gt;
1) the external ones; available in client.HBaseAdmin. They take the server and the region identifier as a parameter and nothing else.&lt;br/&gt;
2) The internal ones, called for example by the master. They have more parameters (like versionOfClosingNode or transitionInZK).&lt;/p&gt;

&lt;p&gt;When I look at protobuf.ProtobufUtil, I see:&lt;/p&gt;

&lt;p&gt;  public static void closeRegion(final AdminProtocol admin,&lt;br/&gt;
      final byte[] regionName, final boolean transitionInZK) throws IOException {&lt;br/&gt;
    CloseRegionRequest closeRegionRequest =&lt;br/&gt;
      RequestConverter.buildCloseRegionRequest(regionName, transitionInZK);&lt;br/&gt;
    try &lt;/p&gt;
{
      admin.closeRegion(null, closeRegionRequest);
    }
&lt;p&gt; catch (ServiceException se) &lt;/p&gt;
{
      throw getRemoteException(se);
    }
&lt;p&gt;  }&lt;/p&gt;


&lt;p&gt;In other words, it seems that we merged the two interfaces into a single one. Is that the intend?&lt;br/&gt;
I checked, the internal fields in closeRegionRequest are all optional (that&apos;s good). Still, it means that the end user could use them or at least would need to distinguish between the &quot;optional for functional reasons&quot; and the &quot;optional - do not use&quot;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12553399">HBASE-5905</key>
            <summary>Protobuf interface for Admin: split between the internal and the external/customer interface</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nkeywal">Nicolas Liochon</reporter>
                        <labels>
                    </labels>
                <created>Mon, 30 Apr 2012 17:54:48 +0000</created>
                <updated>Sat, 11 Apr 2015 01:30:24 +0000</updated>
                            <resolved>Sat, 11 Apr 2015 01:30:24 +0000</resolved>
                                    <version>0.95.2</version>
                                                    <component>Client</component>
                    <component>master</component>
                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13265072" author="stack" created="Mon, 30 Apr 2012 18:15:30 +0000"  >&lt;p&gt;Sorry N, should have read closer (was running out the door):&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;In other words, it seems that we merged the two interfaces into a single one. Is that the intend?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I checked, the internal fields in closeRegionRequest are all optional (that&apos;s good). Still, it means that the end user could use them or at least would need to distinguish between the &quot;optional for functional reasons&quot; and the &quot;optional - do not use&quot;.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Agree.&lt;/p&gt;

&lt;p&gt;I&apos;d say this minor issue though given pb classes do not come out through pur admin public api, just the api on servers.&lt;/p&gt;</comment>
                            <comment id="13265102" author="jxiang" created="Mon, 30 Apr 2012 18:47:53 +0000"  >&lt;p&gt;Is there a way to specify a parameter private/internal in pb?  Otherwise, we may end up with some private protocol for internal usage.&lt;/p&gt;</comment>
                            <comment id="13265710" author="nkeywal" created="Tue, 1 May 2012 08:47:56 +0000"  >&lt;p&gt;I don&apos;t think so. But we could add a specific comment?&lt;/p&gt;</comment>
                            <comment id="13265928" author="tlipcon" created="Tue, 1 May 2012 17:37:44 +0000"  >&lt;p&gt;Maybe we can split out an AdminProtocol from an InternalClusterProtocol, etc?&lt;/p&gt;</comment>
                            <comment id="13266839" author="nkeywal" created="Wed, 2 May 2012 19:14:49 +0000"  >&lt;p&gt;This would make sense if we think that customers should/will use the protobuf interface.&lt;/p&gt;</comment>
                            <comment id="13270818" author="stack" created="Tue, 8 May 2012 20:59:03 +0000"  >&lt;p&gt;If we were to make an InternalClusterProtocol, we could:&lt;/p&gt;

&lt;p&gt;1. Subclass the user-facing open and close messages (thats all that would need it as I see it).&lt;br/&gt;
2. We could do the internal version of open and close as extensions (&lt;a href=&quot;https://developers.google.com/protocol-buffers/docs/proto#extensions&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://developers.google.com/protocol-buffers/docs/proto#extensions&lt;/a&gt;) naming the extensions &apos;Internal&apos; or something or we could do nested extensions naming the nested extention ForInternalUse?&lt;/p&gt;

&lt;p&gt;I&apos;m thinking that since there are only open and close effected, and since its only the one field in open and only two in close region, its not enough to justify doing the above extra work?  How about we doc the .proto file &apos;for internal use&apos; only and be done with it?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 30 Apr 2012 18:15:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>237554</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02ejb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11956</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>