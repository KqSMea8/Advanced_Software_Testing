<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:38:06 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6591/HBASE-6591.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6591] checkAndPut executed/not metrics</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6591</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;checkAndPut/checkAndDelete return true if the new put was executed, false otherwise.&lt;/p&gt;

&lt;p&gt;So clients can figure out this metric for themselves, but it would be useful to get a look at what is happening on the cluster as a whole, across all clients.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12603630">HBASE-6591</key>
            <summary>checkAndPut executed/not metrics</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gchanan">Gregory Chanan</assignee>
                                    <reporter username="gchanan">Gregory Chanan</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Aug 2012 19:33:36 +0000</created>
                <updated>Mon, 23 Sep 2013 18:45:04 +0000</updated>
                            <resolved>Wed, 19 Sep 2012 20:41:14 +0000</resolved>
                                                    <fixVersion>0.95.0</fixVersion>
                                    <component>metrics</component>
                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13454885" author="mdrzal" created="Thu, 13 Sep 2012 13:30:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gchanan&quot; class=&quot;user-hover&quot; rel=&quot;gchanan&quot;&gt;Gregory Chanan&lt;/a&gt; just to make sure I understand you correctly, you would want metrics at the regionserver level along the lines of:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;checkAndPutSuccesses&lt;/li&gt;
	&lt;li&gt;checkAndPutFailures&lt;/li&gt;
	&lt;li&gt;checkAndDeleteSuccesses&lt;/li&gt;
	&lt;li&gt;checkAndDeleteFailures&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Would they actually be helpful at the regionserver level or would you need them more granular?&lt;/p&gt;</comment>
                            <comment id="13454968" author="gchanan" created="Thu, 13 Sep 2012 16:01:14 +0000"  >&lt;p&gt;Michael,&lt;/p&gt;

&lt;p&gt;Those are the metrics I was thinking.  What do you think about granularity?  regionserver level? region level?&lt;/p&gt;</comment>
                            <comment id="13454974" author="mdrzal" created="Thu, 13 Sep 2012 16:12:30 +0000"  >&lt;p&gt;I don&apos;t know.  You&apos;d have to tell me what would work for your use case.  If you track it at the regionserver level, you could end up with multiple regions affecting this counter.  I&apos;m not sure if you&apos;d end up with valuable data in that case.&lt;/p&gt;</comment>
                            <comment id="13454990" author="lhofhansl" created="Thu, 13 Sep 2012 16:37:22 +0000"  >&lt;p&gt;What would the use of this metric generally be?&lt;/p&gt;</comment>
                            <comment id="13455057" author="gchanan" created="Thu, 13 Sep 2012 17:44:46 +0000"  >&lt;p&gt;We had a customer with a very slow-running application that consisted mainly of checkAndPuts.  checkAndPut latency looked good.  It would have been nice to just look at the metrics and be able to eliminate the possibility that their checkAndPuts simply weren&apos;t getting executed.&lt;/p&gt;</comment>
                            <comment id="13455210" author="gchanan" created="Thu, 13 Sep 2012 20:14:57 +0000"  >&lt;p&gt;Any thoughts on the use case Michael/Lars?&lt;/p&gt;

&lt;p&gt;Worth doing?  Or push people to actually log the results in the client?  If it&apos;s worthwhile, what granularity?&lt;/p&gt;</comment>
                            <comment id="13455213" author="mdrzal" created="Thu, 13 Sep 2012 20:18:10 +0000"  >&lt;p&gt;I&apos;m indifferent.  It is really up to you.  If this is a pain point for you and you feel like putting in the work to create a patch or convincing others that this is important, go for it.&lt;/p&gt;</comment>
                            <comment id="13455223" author="lhofhansl" created="Thu, 13 Sep 2012 20:22:18 +0000"  >&lt;p&gt;Whatever is more portable &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
If the old syntax is, then let&apos;s use that.&lt;/p&gt;</comment>
                            <comment id="13455226" author="lhofhansl" created="Thu, 13 Sep 2012 20:23:30 +0000"  >&lt;p&gt;Oops... Wrong jira.&lt;br/&gt;
If that metric is useful and it&apos;s collection is cheap, let&apos;s add it.&lt;/p&gt;</comment>
                            <comment id="13456266" author="gchanan" created="Sat, 15 Sep 2012 00:51:03 +0000"  >&lt;ul&gt;
	&lt;li&gt;Attached &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6591&quot; title=&quot;checkAndPut executed/not metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6591&quot;&gt;&lt;del&gt;HBASE-6591&lt;/del&gt;&lt;/a&gt;.patch *&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13456298" author="hadoopqa" created="Sat, 15 Sep 2012 03:22:53 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12545259/HBASE-6591.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12545259/HBASE-6591.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    -1 javac.  The patch appears to cause mvn compile goal to fail.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to cause Findbugs (version 1.3.9) to fail.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.io.TestHeapSize&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2878//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2878//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2878//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2878//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13456338" author="stack" created="Sat, 15 Sep 2012 07:14:07 +0000"  >&lt;p&gt;The TestHeapSize probably failed because you added checkAndMutateChecksFailed w/o updating HRegion#FIXED_OVERHEAD (I&apos;d guess)&lt;/p&gt;</comment>
                            <comment id="13457373" author="gchanan" created="Mon, 17 Sep 2012 21:41:04 +0000"  >&lt;ul&gt;
	&lt;li&gt;Attached &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6591&quot; title=&quot;checkAndPut executed/not metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6591&quot;&gt;&lt;del&gt;HBASE-6591&lt;/del&gt;&lt;/a&gt;-v2.patch *&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Thanks, stack.  Added two references to FIXED_OVERHEAD.  Do I need to add to DEEP_OVERHEAD as well?&lt;/p&gt;

&lt;p&gt;Doesn&apos;t look like we did last time we added a counter:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/hbase/commit/bb027e97e1eced21c5ee2f6ce7cbe30634aaf144#L2L3386&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hbase/commit/bb027e97e1eced21c5ee2f6ce7cbe30634aaf144#L2L3386&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13457578" author="stack" created="Tue, 18 Sep 2012 03:34:43 +0000"  >&lt;p&gt;Ain&apos;t sure Gregory.  Try your test.  See if it passes.  Then add the -d32 flag so mvn runs 32bit...maybe you put it in MAVEN_OPTS environment variable... to ensure your change works in both 32bit and 64bit jvm (I think jenkins machines run 32bit in some places; its my only explaination for why a TestHeapSize works locally but fails when its run up on jenkins).&lt;/p&gt;</comment>
                            <comment id="13458040" author="gchanan" created="Tue, 18 Sep 2012 18:40:52 +0000"  >&lt;p&gt;Reattaching patch, trying to kick off HadoopQA&lt;/p&gt;</comment>
                            <comment id="13458051" author="hadoopqa" created="Tue, 18 Sep 2012 18:52:59 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12545594/HBASE-6591-v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12545594/HBASE-6591-v2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2891//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2891//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13458084" author="gchanan" created="Tue, 18 Sep 2012 19:51:32 +0000"  >&lt;ul&gt;
	&lt;li&gt;Attached &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6591&quot; title=&quot;checkAndPut executed/not metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6591&quot;&gt;&lt;del&gt;HBASE-6591&lt;/del&gt;&lt;/a&gt;-v3.patch *&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Rebased against newest trunk.&lt;/p&gt;</comment>
                            <comment id="13458092" author="eclark" created="Tue, 18 Sep 2012 19:57:56 +0000"  >&lt;p&gt;Looks good to me. +1&lt;/p&gt;</comment>
                            <comment id="13458240" author="gchanan" created="Tue, 18 Sep 2012 22:16:58 +0000"  >&lt;p&gt;Looks like failing hadoop-2.0 build.  Doubt it&apos;s due to this patch.  Will investigate.&lt;/p&gt;</comment>
                            <comment id="13458388" author="stack" created="Wed, 19 Sep 2012 03:42:41 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;Looks like there are a couple of tests failing in hadoop 2.0 w/ a while.&lt;/p&gt;</comment>
                            <comment id="13459069" author="gchanan" created="Wed, 19 Sep 2012 20:41:14 +0000"  >&lt;p&gt;Thanks for the reviews, Elliot and stack.&lt;/p&gt;

&lt;p&gt;Committed to trunk.&lt;/p&gt;</comment>
                            <comment id="13459122" author="hudson" created="Wed, 19 Sep 2012 21:36:22 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3354 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3354/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3354/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6591&quot; title=&quot;checkAndPut executed/not metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6591&quot;&gt;&lt;del&gt;HBASE-6591&lt;/del&gt;&lt;/a&gt; checkAndPut executed/not metrics (Revision 1387746)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
gchanan : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/metrics/RegionServerMetrics.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionServerMetrics.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13459218" author="hudson" created="Wed, 19 Sep 2012 23:40:46 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #182 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/182/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/182/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6591&quot; title=&quot;checkAndPut executed/not metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6591&quot;&gt;&lt;del&gt;HBASE-6591&lt;/del&gt;&lt;/a&gt; checkAndPut executed/not metrics (Revision 1387746)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
gchanan : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/metrics/RegionServerMetrics.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionServerMetrics.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12545594" name="HBASE-6591-v2.patch" size="8936" author="gchanan" created="Tue, 18 Sep 2012 18:40:52 +0000"/>
                            <attachment id="12545480" name="HBASE-6591-v2.patch" size="8936" author="gchanan" created="Mon, 17 Sep 2012 21:41:04 +0000"/>
                            <attachment id="12545607" name="HBASE-6591-v3.patch" size="8936" author="gchanan" created="Tue, 18 Sep 2012 19:51:32 +0000"/>
                            <attachment id="12545259" name="HBASE-6591.patch" size="8572" author="gchanan" created="Sat, 15 Sep 2012 00:51:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 13 Sep 2012 13:30:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>256648</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 13 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hv7r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>102319</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>