<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:51:26 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1185/HBASE-1185.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1185] wrong request/sec in the gui reporting wrong</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1185</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;I am seeing lower number of request in the masters gui then I have seen in 0.18.0 while scanning.&lt;br/&gt;
I thank part of it is we moved to report per sec request not per 3 secs so the request should be 1/3 of the old numbers I was getting.&lt;/p&gt;

&lt;p&gt;hbase.client.scanner.caching is not the reason the request are under reported.&lt;br/&gt;
I set hbase.client.scanner.caching = 1 and still get about 2K request a sec in the gui&lt;br/&gt;
but when the job is done I take records / job time and get 36,324/ records /sec. So&lt;br/&gt;
there must be some caching out side of the hbase.client.scanner.caching making the&lt;br/&gt;
request per sec lower then it should be. I know it running faster then reported just thought&lt;br/&gt;
it might give some new users the wrong impression that request/sec = read/write /sec.&lt;/p&gt;</description>
                <environment>&lt;p&gt;0.19.0&lt;/p&gt;</environment>
        <key id="12414121">HBASE-1185</key>
            <summary>wrong request/sec in the gui reporting wrong</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jdcryans">Jean-Daniel Cryans</assignee>
                                    <reporter username="viper799">Billy Pearson</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 Feb 2009 17:29:06 +0000</created>
                <updated>Sun, 13 Sep 2009 22:24:24 +0000</updated>
                            <resolved>Thu, 5 Mar 2009 14:10:12 +0000</resolved>
                                    <version>0.19.0</version>
                                    <fixVersion>0.19.1</fixVersion>
                    <fixVersion>0.20.0</fixVersion>
                                    <component>Client</component>
                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12678122" author="larsgeorge" created="Mon, 2 Mar 2009 21:36:45 +0000"  >&lt;p&gt;Hi Billy,&lt;/p&gt;

&lt;p&gt;I am trying to understand what the issue is exactly. I can see what the UI does to report request per interval. You say you have changed yours from 3 to 1 sec and therefore would expect the number to be a third from your actual numbers?&lt;/p&gt;

&lt;p&gt;Where do you get the second number from? Or in other words, how do you compute the &quot;records / job time&quot;? Based on the number of the table you are scanning? For example, if you had 10,000 rows and scan it using a M/R job, you divide the number of records by the total job runtime? &lt;/p&gt;

&lt;p&gt;And what you want is that the UI&apos;s &quot;total requests&quot; number to be close to the above?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Lars&lt;/p&gt;</comment>
                            <comment id="12678123" author="larsgeorge" created="Mon, 2 Mar 2009 21:44:11 +0000"  >&lt;p&gt;HI Stack,&lt;/p&gt;

&lt;p&gt;When I look at the code in the HRegionServer.run() I see this:&lt;/p&gt;

&lt;p&gt;            this.serverInfo.setLoad(new HServerLoad(requestCount.get(),&lt;br/&gt;
                onlineRegions.size()));&lt;br/&gt;
            this.requestCount.set(0);&lt;/p&gt;

&lt;p&gt;Which effectively means that this number is aggregated during the &quot;message-interval&quot; timeframe of the default 3 seconds. Then it handed over to the master and reset. The master UI takes this number and display it divided by the message-interval to get the requests per second value.&lt;/p&gt;

&lt;p&gt;But since this in not actually aggregating the total number of request &lt;b&gt;per&lt;/b&gt; HRegionServer it is always just a snapshot of what happened in the last three seconds. Once the job ends and no further requests are done it drops down to zero within 3 seconds.&lt;/p&gt;

&lt;p&gt;Which I think is OK for a gauge. But what Billy is asking for sounds like something different, i.e. the load as an average over time - similar maybe to the unix &quot;w&quot; output.&lt;/p&gt;

&lt;p&gt;Am I wrong here?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Lars&lt;/p&gt;</comment>
                            <comment id="12678493" author="viper799" created="Tue, 3 Mar 2009 22:31:45 +0000"  >&lt;p&gt;I get my second number from a MR Job so yes number of records by the total job runtime&lt;/p&gt;

&lt;p&gt;what I was saying about the 2 secs before in the past we reported &lt;br/&gt;
request in the gui on a 3 sec interval now we take the count and report it per sec. pre 0.19.0 I thank &lt;br/&gt;
0.18.0 maybe before that its been a while.&lt;/p&gt;

&lt;p&gt;I thank the problem I am seeing is coming from the hbase.client.scanner.caching if it is set to 20 is that counted as 1 request or as 20 when we are scanning?&lt;/p&gt;</comment>
                            <comment id="12678731" author="jdcryans" created="Wed, 4 Mar 2009 13:35:30 +0000"  >&lt;p&gt;Billy, I can confirm that it&apos;s scanner pre-fetching. In HRS :&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; RowResult[] next(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; scannerId, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; nbRows) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    checkOpen();
    requestCount.incrementAndGet();
    ArrayList&amp;lt;RowResult&amp;gt; resultSets = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;RowResult&amp;gt;();
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; scannerName = &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.valueOf(scannerId);
      InternalScanner s = scanners.get(scannerName);
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (s == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
        &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; UnknownScannerException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Name: &quot;&lt;/span&gt; + scannerName);
      }
      &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.leases.renewLease(scannerName);
      &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; nbRows; i++) {
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We increment for the whole batch of rows. I take the blame since it&apos;s my modification. The fix will be easy.&lt;/p&gt;</comment>
                            <comment id="12678750" author="viper799" created="Wed, 4 Mar 2009 14:48:56 +0000"  >&lt;p&gt;no big deal just thought it should report correctly sense we where under reporting the speeds.&lt;/p&gt;</comment>
                            <comment id="12678846" author="jdcryans" created="Wed, 4 Mar 2009 19:02:34 +0000"  >&lt;p&gt;Billy, try this patch (against 0.19 branch) to see if you have better numbers.&lt;/p&gt;</comment>
                            <comment id="12678936" author="viper799" created="Wed, 4 Mar 2009 21:38:20 +0000"  >&lt;p&gt;+1 the numbers look good now&lt;br/&gt;
thanks for the patch&lt;/p&gt;</comment>
                            <comment id="12678944" author="viper799" created="Wed, 4 Mar 2009 21:49:00 +0000"  >&lt;p&gt;I tested on 0.19.1 branch from a month or so ago.&lt;/p&gt;</comment>
                            <comment id="12679202" author="jdcryans" created="Thu, 5 Mar 2009 14:10:12 +0000"  >&lt;p&gt;Committed to branch and trunk. Thanks trying it out Billy!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12401445" name="hbase-1185.patch" size="909" author="jdcryans" created="Wed, 4 Mar 2009 19:02:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 2 Mar 2009 21:36:45 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25617</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 42 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hbtz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99179</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>