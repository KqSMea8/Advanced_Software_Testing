<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:01:11 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-9079/HBASE-9079.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-9079] FilterList getNextKeyHint skips rows that should be included in the results</title>
                <link>https://issues.apache.org/jira/browse/HBASE-9079</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;I hit a weird issue/bug and am able to reproduce the error consistently. The problem arises when FilterList has two filters where each implements the getNextKeyHint method.&lt;/p&gt;

&lt;p&gt;The way the current implementation works is, StoreScanner will call matcher.getNextKeyHint() whenever it gets a SEEK_NEXT_USING_HINT. This in turn will call filter.getNextKeyHint() which at this stage is of type FilterList. The implementation in FilterList iterates through all the filters and keeps the max KeyValue that it sees. All is fine if you wrap filters in FilterList in which only one of them implements getNextKeyHint. but if multiple of them implement then that&apos;s where things get weird.&lt;/p&gt;

&lt;p&gt;For example:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;create two filters: one is FuzzyRowFilter and second is ColumnRangeFilter. Both of them implement getNextKeyHint&lt;/li&gt;
	&lt;li&gt;wrap them in FilterList with MUST_PASS_ALL&lt;/li&gt;
	&lt;li&gt;FuzzyRowFilter will seek to the correct first row and then pass it to ColumnRangeFilter which will return the SEEK_NEXT_USING_HINT code.&lt;/li&gt;
	&lt;li&gt;Now in FilterList when getNextKeyHint is called, it calls the one on FuzzyRow first which basically says what the next row should be. While in reality we want the ColumnRangeFilter to give the seek hint.&lt;/li&gt;
	&lt;li&gt;The above behavior skips data that should be returned, which I have verified by using a RowFilter with RegexStringComparator.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I updated the FilterList to maintain state on which filter returns the SEEK_NEXT_USING_HINT and in getNextKeyHint, I invoke the method on the saved filter and reset that state. I tested it with my current queries and it works fine but I need to run the entire test suite to make sure I have not introduced any regression. In addition to that I need to figure out what should be the behavior when the opeation is MUST_PASS_ONE, but I doubt it should be any different.&lt;/p&gt;

&lt;p&gt;Is my understanding of it being a bug correct ? Or am I trivializing it and ignoring something very important ? If it&apos;s tough to wrap your head around the explanation, then I can open a JIRA and upload a patch against 0.94 head.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12660525">HBASE-9079</key>
            <summary>FilterList getNextKeyHint skips rows that should be included in the results</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="viralbajaria">Viral Bajaria</assignee>
                                    <reporter username="viralbajaria">Viral Bajaria</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Jul 2013 23:39:58 +0000</created>
                <updated>Wed, 21 Aug 2013 00:08:46 +0000</updated>
                            <resolved>Thu, 8 Aug 2013 20:30:07 +0000</resolved>
                                    <version>0.94.10</version>
                                    <fixVersion>0.98.0</fixVersion>
                    <fixVersion>0.95.2</fixVersion>
                    <fixVersion>0.94.11</fixVersion>
                                    <component>Filters</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13723166" author="yuzhihong@gmail.com" created="Mon, 29 Jul 2013 23:59:57 +0000"  >&lt;p&gt;For TestFuzzyAndColumnRangeFilter, please add license.&lt;/p&gt;

&lt;p&gt;Can you provide trunk patch so that we can let Hadoop QA run through it ?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+        FilterList filterList = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FilterList(Lists.&amp;lt;Filter&amp;gt;newArrayList(fuzzyRowFilter, columnRangeFilter));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Can you alter the order of the two filters above so that we know the correctness isn&apos;t dependent on ordering of the Filters ?&lt;br/&gt;
Meaning both orders are tested.&lt;/p&gt;

&lt;p&gt;Indentation is off - it should be two spaces for each level of indentation.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+                LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Got rk: &quot;&lt;/span&gt; + Bytes.toStringBinary(kv.getRow()) + &lt;span class=&quot;code-quote&quot;&gt;&quot; cq: &quot;&lt;/span&gt; + Bytes.toStringBinary(kv.getQualifier()));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Length limit should be 100 per line.&lt;/p&gt;

&lt;p&gt;In getNextKeyHint():&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
     &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Filter filter : filters) {
+      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (seekHintFilter != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; seekHintFilter != filter) {
+        &lt;span class=&quot;code-comment&quot;&gt;//get hint from the filter that was responsible &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the
&lt;/span&gt;+        &lt;span class=&quot;code-comment&quot;&gt;//SEEK_NEXT_USING_HINT code
&lt;/span&gt;+        &lt;span class=&quot;code-keyword&quot;&gt;continue&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Does the above if block mean that only one Filter which provides seek hint would be respected ?&lt;/p&gt;</comment>
                            <comment id="13723193" author="lhofhansl" created="Tue, 30 Jul 2013 00:30:01 +0000"  >&lt;p&gt;I also have a question about this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (seekHintFilter != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; seekHintFilter != filter) {
+        &lt;span class=&quot;code-comment&quot;&gt;//get hint from the filter that was responsible &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the
&lt;/span&gt;+        &lt;span class=&quot;code-comment&quot;&gt;//SEEK_NEXT_USING_HINT code
&lt;/span&gt;+        &lt;span class=&quot;code-keyword&quot;&gt;continue&lt;/span&gt;;
+      }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As Ted asks... It seems only one filter should provide the hint. Can we turn this around and return &lt;tt&gt;filter.getNextKeyHint(...)&lt;/tt&gt; if &lt;tt&gt;seekFilter == filter&lt;/tt&gt;?&lt;/p&gt;</comment>
                            <comment id="13723305" author="viralbajaria" created="Tue, 30 Jul 2013 02:31:50 +0000"  >&lt;p&gt;I will upload a new patch with the fixes that Ted pointed out.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tedyu@apache.org&quot;&gt;Ted Yu&lt;/a&gt; When you say trunk patch you mean against the 0.95/0.96 tree ?&lt;/p&gt;

&lt;p&gt;Regards Lars comment on turning it around to ==, I could move it to the following prior to even running the for loop:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (seekHintFilter != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
  &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; seekHintFilter.getNextKeyHint();
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Regarding the ordering, I think the issue will be when operator is MUST_PASS_ONE and both filters want to give you a SEEK_HINT but one of them is operating at the row level while the other is operating at the column level. For example, if ColumnRange comes before FuzzyRow and operator is MUST_PASS_ONE, we will iterate through both the filters filterKeyValue method and keep the state returned from FuzzyRow and not from ColumnRange. I think this issue exists in current code too since we go through each filter and keep the max row. &lt;/p&gt;

&lt;p&gt;Personally I feel it&apos;s not a good use-case to make a FilterList with one filter operating at the row level and another at the column level and asking the operator to be MUST_PASS_ONE. That&apos;s almost like saying that keep a column even if row does not match. Any suggestions on what should be done here ?&lt;/p&gt;</comment>
                            <comment id="13723343" author="yuzhihong@gmail.com" created="Tue, 30 Jul 2013 03:28:11 +0000"  >&lt;p&gt;w.r.t. ordering, there is no method in FilterBase which can tell us whether the hint provider operates at row or column level.&lt;/p&gt;

&lt;p&gt;For 0.96 / trunk, we may add such a method so that FilterList can (re)order the Filters accordingly.&lt;/p&gt;

&lt;p&gt;For 0.94, we can provide documentation on this aspect so that user can register Filters in correct order.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;you mean against the 0.95/0.96 tree ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes. I meant patch against trunk.&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="13723981" author="yuzhihong@gmail.com" created="Tue, 30 Jul 2013 15:51:39 +0000"  >&lt;p&gt;For trunk, can we introduce the following method to Filter:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; KeyHintType getKeyHintType() {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;where KeyHintType is an enum that can carry NONE, ROW or COL.&lt;/p&gt;

&lt;p&gt;FilterList can poll the Filters and reorder them.&lt;/p&gt;</comment>
                            <comment id="13724652" author="viralbajaria" created="Wed, 31 Jul 2013 00:22:05 +0000"  >&lt;p&gt;What kind of re-ordering will you do ? Isn&apos;t the re-ordering more dependent on what kind of ordering the user wants in the FilterList ? i.e. apply my PrefixFilter first, then FuzzyRow then ColumnRange. If the user says apply PrefixFilter, then ColumnRange and then FuzzyRow should we not preserve that ordering ?&lt;/p&gt;

&lt;p&gt;I also take my words back on the issue existing in the current code. I think it does not because for MUST_PASS_ONE it keeps the min rowkey as the hint while for MUST_PASS_ALL it keeps the max. Maybe I could limit the scope of this ticket to MUST_PASS_ALL and keep MUST_PASS_ONE as-is ?&lt;/p&gt;</comment>
                            <comment id="13724719" author="yuzhihong@gmail.com" created="Wed, 31 Jul 2013 01:21:10 +0000"  >&lt;blockquote&gt;&lt;p&gt;Maybe I could limit the scope of this ticket to MUST_PASS_ALL&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Fine with me.&lt;/p&gt;</comment>
                            <comment id="13725684" author="viralbajaria" created="Wed, 31 Jul 2013 20:34:03 +0000"  >&lt;p&gt;Uploaded patch for both 0.94 and trunk. Interestingly 0.94 FilterList and trunk FilterList are not in sync. Is that expected ?&lt;/p&gt;

&lt;p&gt;I added the test to trunk too and tested it too.&lt;/p&gt;</comment>
                            <comment id="13725776" author="hadoopqa" created="Wed, 31 Jul 2013 22:12:44 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12595268/HBASE-9079-0.94.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12595268/HBASE-9079-0.94.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6548//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6548//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13725805" author="yuzhihong@gmail.com" created="Wed, 31 Jul 2013 22:51:09 +0000"  >&lt;p&gt;@Viral:&lt;br/&gt;
The difference you saw in FilterList was due to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8847&quot; title=&quot;Filter.transform() always applies unconditionally, even when combined in a FilterList&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8847&quot;&gt;&lt;del&gt;HBASE-8847&lt;/del&gt;&lt;/a&gt; which went into 0.94.10&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; KeyValue transformedKV = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Please refresh your workspace and put your changes while keeping &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8847&quot; title=&quot;Filter.transform() always applies unconditionally, even when combined in a FilterList&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8847&quot;&gt;&lt;del&gt;HBASE-8847&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13725987" author="viralbajaria" created="Thu, 1 Aug 2013 02:43:22 +0000"  >&lt;p&gt;Is it not a good idea to work from the github.com branches ? I was working off the latest 0.94 branch and did a pull again but don&apos;t see the changes that &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8847&quot; title=&quot;Filter.transform() always applies unconditionally, even when combined in a FilterList&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8847&quot;&gt;&lt;del&gt;HBASE-8847&lt;/del&gt;&lt;/a&gt; made to it.&lt;/p&gt;

&lt;p&gt;What am I missing ?&lt;/p&gt;</comment>
                            <comment id="13725991" author="yuzhihong@gmail.com" created="Thu, 1 Aug 2013 02:59:10 +0000"  >&lt;p&gt;That&apos;s strange.&lt;br/&gt;
I saw the changes from &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12592491/HBASE-8847.base%3D0.94.diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12592491/HBASE-8847.base%3D0.94.diff&lt;/a&gt; in 0.94 branch.&lt;/p&gt;</comment>
                            <comment id="13725995" author="viralbajaria" created="Thu, 1 Aug 2013 03:11:18 +0000"  >&lt;p&gt;Oh wait! I do see all those changes on 0.94 branch, I don&apos;t see those changes on trunk right now. Which is why I said that FilterList on trunk is not in sync with that on 0.94&lt;/p&gt;</comment>
                            <comment id="13726025" author="yuzhihong@gmail.com" created="Thu, 1 Aug 2013 04:06:15 +0000"  >&lt;p&gt;Here was the checkin for trunk:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
r1499851 | tedyu | 2013-07-04 12:59:24 -0700 (Thu, 04 Jul 2013) | 3 lines

HBASE-8847 Filter.transform() always applies unconditionally, even when combined in a FilterList (Christophe Taton)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13726773" author="viralbajaria" created="Thu, 1 Aug 2013 19:18:46 +0000"  >&lt;p&gt;new patch for trunk&lt;/p&gt;</comment>
                            <comment id="13726775" author="viralbajaria" created="Thu, 1 Aug 2013 19:21:26 +0000"  >&lt;p&gt;(pressed enter too soon when attaching file... no easy way to edit a comment)&lt;/p&gt;

&lt;p&gt;I have uploaded a new patch for trunk after refreshing my workspace. I think the switch between branches wasn&apos;t clean for me when I did it the first time.&lt;/p&gt;

&lt;p&gt;The current patch should work fine on trunk too. I also cleaned up the TODO comment since there is no Configuration object anymore in FilterList. Also cleaned up the typo in the javadocs for areSerializedFieldsEqual()&lt;/p&gt;</comment>
                            <comment id="13726777" author="yuzhihong@gmail.com" created="Thu, 1 Aug 2013 19:29:28 +0000"  >&lt;p&gt;There&apos;re a few long lines in test:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    ColumnRangeFilter columnRangeFilter = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ColumnRangeFilter(Bytes.toBytes(cqStart), &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, Bytes.toBytes(4), &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt;:&lt;br/&gt;
What do you think of latest patch ?&lt;/p&gt;</comment>
                            <comment id="13726944" author="viralbajaria" created="Thu, 1 Aug 2013 21:53:00 +0000"  >&lt;p&gt;Fixed the long lines as recommended by Ted.&lt;/p&gt;</comment>
                            <comment id="13727020" author="hadoopqa" created="Thu, 1 Aug 2013 22:48:54 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12595494/HBASE-9079-0.94.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12595494/HBASE-9079-0.94.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6561//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6561//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13727039" author="viralbajaria" created="Thu, 1 Aug 2013 23:04:56 +0000"  >&lt;p&gt;Removed the TestFail and TestSuccess patches which were only here to demonstrate what was breaking.&lt;/p&gt;</comment>
                            <comment id="13727133" author="viralbajaria" created="Fri, 2 Aug 2013 00:08:28 +0000"  >&lt;p&gt;reattaching trunk patch since Hadoop QA wasn&apos;t picking both of them due to same timestamp.&lt;/p&gt;</comment>
                            <comment id="13727245" author="hadoopqa" created="Fri, 2 Aug 2013 03:02:02 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12595522/HBASE-9079-trunk.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12595522/HBASE-9079-trunk.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6562//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6562//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6562//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6562//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6562//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6562//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6562//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6562//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6562//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6562//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6562//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6562//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6562//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6562//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6562//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6562//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6562//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6562//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6562//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6562//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13729738" author="viralbajaria" created="Mon, 5 Aug 2013 18:08:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt; Can you review the patch when you get a chance ? I have already deployed this to my production cluster and have not had any issues.&lt;/p&gt;</comment>
                            <comment id="13731116" author="lhofhansl" created="Tue, 6 Aug 2013 19:03:57 +0000"  >&lt;p&gt;So thinking about this again. Why can&apos;t we take the largest of any seekHint when we &lt;b&gt;and&lt;/b&gt; all the filters together in a FilterList?&lt;br/&gt;
In your case if you add the filters to the list in a different order, will your patch still work?&lt;/p&gt;

&lt;p&gt;Is the actual problem here that a Filter returns a KV from getNextKeyHint even when it would not have returned SEEK_NEXT_USING_HINT?&lt;/p&gt;</comment>
                            <comment id="13731130" author="viralbajaria" created="Tue, 6 Aug 2013 19:14:58 +0000"  >&lt;p&gt;If we take the largest seekHint, the problem can be explained as follows:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;FilterList with FuzzyRow + ColumnRange with MUST_PASS_ALL.&lt;/li&gt;
	&lt;li&gt;FuzzyRow includes the filter and says move on to ColumnRange.&lt;/li&gt;
	&lt;li&gt;ColumnRange says first column is not a match and I can give you a better seekHint&lt;/li&gt;
	&lt;li&gt;FilterList calls seekHint on both FuzzyRow and ColumnRange. FuzzyRow returns the next row that we should use while ColumnRange returns the next column from the originally selected row. If we keep max here then we move on to the next row and do no return the columns from the row that should have been returned. The test case proves that this is what happened originally (though I removed the TestFail.patch due to some Hadoop QA issues)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Yes the current changes work even if you change the ordering of filters. The test in the patch verified that behavior too.&lt;/p&gt;</comment>
                            <comment id="13731276" author="lhofhansl" created="Tue, 6 Aug 2013 21:08:37 +0000"  >&lt;p&gt;I see.&lt;/p&gt;

&lt;p&gt;But what you hit a scenario where the FuzzyRowFilter would also return SEEK_NEXT_USING_HINT and it happens to be first in the filter list? In that case you&apos;d still seek past columns that should be included. So the problem is that SEEK_NEXT_USING_HINT is not transitive to following columns/row.&lt;/p&gt;

&lt;p&gt;It seems the only 100% safe way to do this in a FilterList is treat any seek optimization as a simple SKIP.&lt;/p&gt;</comment>
                            <comment id="13731387" author="viralbajaria" created="Tue, 6 Aug 2013 22:27:37 +0000"  >&lt;p&gt;The current patch only calls the filter that gave the SEEK_NEXT_USING_HINT, we don&apos;t go through all the filters in the FilterList if the operator is MUST_PASS_ALL.&lt;/p&gt;

&lt;p&gt;For MUST_PASS_ONE, the logic is to select the minimum of the hints and thus we will not skip the rows/columns even if one of the filters suggests to jump over since we are going to keep the minimum.&lt;/p&gt;</comment>
                            <comment id="13731447" author="lhofhansl" created="Tue, 6 Aug 2013 23:32:20 +0000"  >&lt;p&gt;From your example the problem is (1) &quot;FuzzyRow includes the filter and says move on to ColumnRange&quot; paired with (2) &quot;FuzzyRow returns the next row that we should use&quot;.&lt;br/&gt;
Even though the FuzzyRowInclude said we should include the row the call to getNextKeyHint() returns a non-null KV.&lt;/p&gt;

&lt;p&gt;So from that angle we should only consult the filters that we actually called, which your patch does correctly.&lt;/p&gt;

&lt;p&gt;Now, what if FuzzyRowFilter had been the one that returned SEEK_NEXT_USING_HINT. Then that filter would be the one to provide the getNextKeyHint as well, and might skip right past the KV you want for the ColumnRangeFilter. You are saying in that case FuzzyRowFilter did not INCLUDE it, and thus it would be correct use its getNextKeyHint?&lt;/p&gt;

&lt;p&gt;And because we&apos;re short-circuiting the and when we encounter SEEK_NEXT_USING_HINT, we can safely jump to that KV. OK. Seems that is correct. Just making sure...&lt;/p&gt;

&lt;p&gt;In that case I only have one further comment:&lt;br/&gt;
getNextKeyHint on FilterList is only called when SEEK_NEXT_USING_HINT is returned. If this FilterList is MUST_PASS_ALL the seekHintFilter must not be null, correct? So we could simplify like this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@@ -332,9 +337,15 @@
   @Override
   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; KeyValue getNextKeyHint(KeyValue currentKV) {
     KeyValue keyHint = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
+    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt; == Operator.MUST_PASS_ALL) {
+      keyHint = seekHintFilter.getNextKeyHint(currentKV);
+      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; keyHint;
+    }
+
     &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Filter filter : filters) {
       KeyValue curKeyHint = filter.getNextKeyHint(currentKV);
-      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (curKeyHint == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt; == Operator.MUST_PASS_ONE) {
+      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (curKeyHint == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
         &lt;span class=&quot;code-comment&quot;&gt;// If we ever don&apos;t have a hint and &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is must-pass-one, then no hint
&lt;/span&gt;         &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
       }
@@ -344,13 +355,7 @@
           keyHint = curKeyHint;
           &lt;span class=&quot;code-keyword&quot;&gt;continue&lt;/span&gt;;
         }
-        &lt;span class=&quot;code-comment&quot;&gt;// There is an existing hint
&lt;/span&gt;-        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt; == Operator.MUST_PASS_ALL &amp;amp;&amp;amp;
-            KeyValue.COMPARATOR.compare(keyHint, curKeyHint) &amp;lt; 0) {
-          &lt;span class=&quot;code-comment&quot;&gt;// If all conditions must pass, we can keep the max hint
&lt;/span&gt;-          keyHint = curKeyHint;
-        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt; == Operator.MUST_PASS_ONE &amp;amp;&amp;amp;
-            KeyValue.COMPARATOR.compare(keyHint, curKeyHint) &amp;gt; 0) {
+        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (KeyValue.COMPARATOR.compare(keyHint, curKeyHint) &amp;gt; 0) {
           &lt;span class=&quot;code-comment&quot;&gt;// If any condition can pass, we need to keep the min hint
&lt;/span&gt;           keyHint = curKeyHint;
         }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;And then also reset the seekHintFilter in the reset() method.&lt;/p&gt;</comment>
                            <comment id="13731490" author="lhofhansl" created="Wed, 7 Aug 2013 00:34:59 +0000"  >&lt;p&gt;Then again this breaks TestFilterList.testHintPassThru. But the breaking part should be removed as it tests that MUST_PASS_ALL returns the larger of the key hints, which is no longer the case.&lt;/p&gt;</comment>
                            <comment id="13731503" author="lhofhansl" created="Wed, 7 Aug 2013 00:46:54 +0000"  >&lt;p&gt;How about this patch?&lt;br/&gt;
Removes unnecessary code from FilterList and fixes TestFilterList to exercise new logic correctly.&lt;br/&gt;
Please have a look.&lt;/p&gt;</comment>
                            <comment id="13731504" author="lhofhansl" created="Wed, 7 Aug 2013 00:48:46 +0000"  >&lt;p&gt;Oops. Here&apos;s the right file.&lt;/p&gt;</comment>
                            <comment id="13731514" author="lhofhansl" created="Wed, 7 Aug 2013 01:08:40 +0000"  >&lt;p&gt;And for trunk. Please have a look.&lt;/p&gt;</comment>
                            <comment id="13731571" author="yuzhihong@gmail.com" created="Wed, 7 Aug 2013 02:02:57 +0000"  >&lt;p&gt;I ran Filter related tests and they passed.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
     &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Filter filter : filters) {
       KeyValue curKeyHint = filter.getNextKeyHint(currentKV);
-      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (curKeyHint == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt; == Operator.MUST_PASS_ONE) {
+      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (curKeyHint == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
         &lt;span class=&quot;code-comment&quot;&gt;// If we ever don&apos;t have a hint and &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is must-pass-one, then no hint&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;nit: maybe lift the comment about must-pass-one before the for loop.&lt;/p&gt;</comment>
                            <comment id="13731575" author="hadoopqa" created="Wed, 7 Aug 2013 02:17:31 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12596477/9079-trunk-v2.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12596477/9079-trunk-v2.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6623//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6623//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6623//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6623//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6623//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6623//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6623//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6623//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6623//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6623//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6623//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6623//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6623//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6623//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6623//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6623//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6623//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6623//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6623//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6623//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13731612" author="lhofhansl" created="Wed, 7 Aug 2013 03:54:03 +0000"  >&lt;p&gt;Will move the comment upon commit. So Ted and Viral, you both good with this?&lt;/p&gt;</comment>
                            <comment id="13731621" author="viralbajaria" created="Wed, 7 Aug 2013 04:20:58 +0000"  >&lt;p&gt;Looks good to me. I have applied the patch to my local repo and will test with real data in a bit. Will provide an update after that (hopefully before tomorrow).&lt;/p&gt;</comment>
                            <comment id="13731622" author="lhofhansl" created="Wed, 7 Aug 2013 04:29:55 +0000"  >&lt;p&gt;Thanks Viral. I added you as HBase contributor and credited this issue to you.&lt;/p&gt;</comment>
                            <comment id="13732119" author="lhofhansl" created="Wed, 7 Aug 2013 16:10:17 +0000"  >&lt;p&gt;Did you get a chance to test this with real data, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=viralbajaria&quot; class=&quot;user-hover&quot; rel=&quot;viralbajaria&quot;&gt;Viral Bajaria&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="13732627" author="viralbajaria" created="Wed, 7 Aug 2013 19:34:41 +0000"  >&lt;p&gt;Not yet, got caught in something else. Will get to it before EOD (PST) for sure.&lt;/p&gt;</comment>
                            <comment id="13733117" author="lhofhansl" created="Thu, 8 Aug 2013 03:57:57 +0000"  >&lt;p&gt;&amp;lt;ping&amp;gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;It&apos;s also fine to push into next month&apos;s 0.94.12.&lt;/p&gt;</comment>
                            <comment id="13733330" author="viralbajaria" created="Thu, 8 Aug 2013 10:14:44 +0000"  >&lt;p&gt;Sorry for the delay. I did a local test with production data and it looks fine.&lt;/p&gt;</comment>
                            <comment id="13733943" author="lhofhansl" created="Thu, 8 Aug 2013 20:30:07 +0000"  >&lt;p&gt;Committed to 0.94, 0.95, and trunk.&lt;br/&gt;
Thanks for the patch, Viral.&lt;/p&gt;</comment>
                            <comment id="13733946" author="viralbajaria" created="Thu, 8 Aug 2013 20:34:25 +0000"  >&lt;p&gt;Thanks for all the help &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ted_yu&quot; class=&quot;user-hover&quot; rel=&quot;ted_yu&quot;&gt;Ted Yu&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt; to get this patch cleaned up and integrated! Look forward to contributing more. You guys rock!&lt;/p&gt;</comment>
                            <comment id="13734075" author="hudson" created="Thu, 8 Aug 2013 22:05:51 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.94-security #249 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/249/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/249/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9079&quot; title=&quot;FilterList getNextKeyHint skips rows that should be included in the results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9079&quot;&gt;&lt;del&gt;HBASE-9079&lt;/del&gt;&lt;/a&gt; FilterList getNextKeyHint skips rows that should be included in the results (Viral Bajaria and LarsH) (larsh: rev 1512021)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/filter/FilterList.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/filter/TestFilterList.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/filter/TestFuzzyRowAndColumnRangeFilter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13734086" author="hudson" created="Thu, 8 Aug 2013 22:16:36 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.94 #1100 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/1100/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/1100/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9079&quot; title=&quot;FilterList getNextKeyHint skips rows that should be included in the results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9079&quot;&gt;&lt;del&gt;HBASE-9079&lt;/del&gt;&lt;/a&gt; FilterList getNextKeyHint skips rows that should be included in the results (Viral Bajaria and LarsH) (larsh: rev 1512021)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/filter/FilterList.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/filter/TestFilterList.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/filter/TestFuzzyRowAndColumnRangeFilter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13734181" author="hudson" created="Thu, 8 Aug 2013 23:34:04 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #4357 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4357/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4357/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9079&quot; title=&quot;FilterList getNextKeyHint skips rows that should be included in the results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9079&quot;&gt;&lt;del&gt;HBASE-9079&lt;/del&gt;&lt;/a&gt; FilterList getNextKeyHint skips rows that should be included in the results (Viral Bajaria and LarsH) (larsh: rev 1512018)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-client/src/main/java/org/apache/hadoop/hbase/filter/FilterList.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/filter/TestFilterList.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/filter/TestFuzzyRowAndColumnRangeFilter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13734195" author="hudson" created="Thu, 8 Aug 2013 23:48:44 +0000"  >&lt;p&gt;FAILURE: Integrated in hbase-0.95 #418 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95/418/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95/418/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9079&quot; title=&quot;FilterList getNextKeyHint skips rows that should be included in the results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9079&quot;&gt;&lt;del&gt;HBASE-9079&lt;/del&gt;&lt;/a&gt; Missed new test (larsh: rev 1512020)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/filter/TestFuzzyRowAndColumnRangeFilter.java&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9079&quot; title=&quot;FilterList getNextKeyHint skips rows that should be included in the results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9079&quot;&gt;&lt;del&gt;HBASE-9079&lt;/del&gt;&lt;/a&gt; FilterList getNextKeyHint skips rows that should be included in the results (Viral Bajaria and LarsH) (larsh: rev 1512019)&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-client/src/main/java/org/apache/hadoop/hbase/filter/FilterList.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/filter/TestFilterList.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13734293" author="hudson" created="Fri, 9 Aug 2013 01:07:54 +0000"  >&lt;p&gt;FAILURE: Integrated in hbase-0.95-on-hadoop2 #225 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95-on-hadoop2/225/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95-on-hadoop2/225/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9079&quot; title=&quot;FilterList getNextKeyHint skips rows that should be included in the results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9079&quot;&gt;&lt;del&gt;HBASE-9079&lt;/del&gt;&lt;/a&gt; Missed new test (larsh: rev 1512020)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/filter/TestFuzzyRowAndColumnRangeFilter.java&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9079&quot; title=&quot;FilterList getNextKeyHint skips rows that should be included in the results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9079&quot;&gt;&lt;del&gt;HBASE-9079&lt;/del&gt;&lt;/a&gt; FilterList getNextKeyHint skips rows that should be included in the results (Viral Bajaria and LarsH) (larsh: rev 1512019)&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-client/src/main/java/org/apache/hadoop/hbase/filter/FilterList.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/filter/TestFilterList.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13734310" author="hudson" created="Fri, 9 Aug 2013 01:22:53 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #658 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/658/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/658/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9079&quot; title=&quot;FilterList getNextKeyHint skips rows that should be included in the results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9079&quot;&gt;&lt;del&gt;HBASE-9079&lt;/del&gt;&lt;/a&gt; FilterList getNextKeyHint skips rows that should be included in the results (Viral Bajaria and LarsH) (larsh: rev 1512018)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-client/src/main/java/org/apache/hadoop/hbase/filter/FilterList.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/filter/TestFilterList.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/filter/TestFuzzyRowAndColumnRangeFilter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12596474" name="9079-0.94-v2.txt" size="11837" author="lhofhansl" created="Wed, 7 Aug 2013 00:48:46 +0000"/>
                            <attachment id="12596477" name="9079-trunk-v2.txt" size="12329" author="lhofhansl" created="Wed, 7 Aug 2013 01:08:40 +0000"/>
                            <attachment id="12595494" name="HBASE-9079-0.94.patch" size="7690" author="viralbajaria" created="Thu, 1 Aug 2013 21:53:00 +0000"/>
                            <attachment id="12595522" name="HBASE-9079-trunk.patch" size="8597" author="viralbajaria" created="Fri, 2 Aug 2013 00:08:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 29 Jul 2013 23:59:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>340716</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 19 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1mri7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>341034</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>