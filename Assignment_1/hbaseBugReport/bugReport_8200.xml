<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:52:58 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-8200/HBASE-8200.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-8200] Integration Test classes are not part of the default HBase classpath</title>
                <link>https://issues.apache.org/jira/browse/HBASE-8200</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Expected behavior:&lt;br/&gt;
Following the instructions here:&lt;br/&gt;
&lt;a href=&quot;http://hbase.apache.org/book/hbase.tests.html#integration.tests&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hbase.apache.org/book/hbase.tests.html#integration.tests&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;After pulling down the latest bits from trunk and running,&lt;br/&gt;
&amp;gt; mvn clean compile test-compile package install assembly:assembly -DskipTests&lt;/p&gt;

&lt;p&gt;I should be able to run integration tests with the following command:&lt;br/&gt;
&amp;gt; bin/hbase --config /path/to/configs  org.apache.hadoop.hbase.IntegrationTestsDriver&lt;/p&gt;

&lt;p&gt;According to the documentation, this should kick off the tests.&lt;/p&gt;

&lt;p&gt;Observed behavior:&lt;br/&gt;
Upon executing &lt;br/&gt;
&amp;gt; bin/hbase --config /path/to/configs  org.apache.hadoop.hbase.IntegrationTestsDriver&lt;/p&gt;

&lt;p&gt;I see the following:&lt;br/&gt;
Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/hadoop/hbase/IntegrationTestsDriver&lt;br/&gt;
Caused by: java.lang.ClassNotFoundException: org.apache.hadoop.hbase.IntegrationTestsDriver&lt;br/&gt;
	at java.net.URLClassLoader$1.run(URLClassLoader.java:202)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at java.net.URLClassLoader.findClass(URLClassLoader.java:190)&lt;br/&gt;
	at java.lang.ClassLoader.loadClass(ClassLoader.java:306)&lt;br/&gt;
	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)&lt;br/&gt;
	at java.lang.ClassLoader.loadClass(ClassLoader.java:247)&lt;/p&gt;


&lt;p&gt;I can fix it by adding the following line to the hbase-env.sh file corresponding to the configs:&lt;/p&gt;

&lt;p&gt;export HBASE_CLASSPATH=/path/to/project/hbase/hbase-it/target/test-classes/&lt;/p&gt;

&lt;p&gt;This produces the correct output.&lt;/p&gt;
</description>
                <environment>&lt;p&gt;ubuntu&lt;/p&gt;</environment>
        <key id="12639174">HBASE-8200</key>
            <summary>Integration Test classes are not part of the default HBase classpath</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="enis">Enis Soztutar</assignee>
                                    <reporter username="aleksshulman">Aleksandr Shulman</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Mar 2013 20:16:37 +0000</created>
                <updated>Mon, 23 Sep 2013 19:22:33 +0000</updated>
                            <resolved>Tue, 9 Jul 2013 23:10:55 +0000</resolved>
                                                    <fixVersion>0.98.0</fixVersion>
                    <fixVersion>0.95.2</fixVersion>
                                    <component>test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13614493" author="aleksshulman" created="Tue, 26 Mar 2013 20:18:36 +0000"  >&lt;p&gt;A quick fix might be to just add it to /bin/hbase&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Add integration-test to the classpath&lt;br/&gt;
CLASSPATH=$
{CLASSPATH}
&lt;p&gt;:$HBASE_HOME/hbase-it/target/test-classes/&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="13614496" author="aleksshulman" created="Tue, 26 Mar 2013 20:20:14 +0000"  >&lt;p&gt;The autoformatting mangled the above comment. Here is what is should be:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
#Add integration-test to the classpath
CLASSPATH=${CLASSPATH}:$HBASE_HOME/hbase-it/target/test-classes/
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13614505" author="aleksshulman" created="Tue, 26 Mar 2013 20:29:13 +0000"  >&lt;p&gt;This issue is present in trunk but not in 0.94 because in 0.94, org.apache.hadoop.hbase.IntegrationTestsDriver is placed into ./target/test-classes/org/apache/hadoop/hbase, which is part of the classpath by default.&lt;/p&gt;</comment>
                            <comment id="13614538" author="enis" created="Tue, 26 Mar 2013 20:56:51 +0000"  >&lt;p&gt;Yes, this has been broken in trunk, after the recent changes to pom. We should fix it. &lt;/p&gt;</comment>
                            <comment id="13614542" author="sershe" created="Tue, 26 Mar 2013 21:00:57 +0000"  >&lt;p&gt;on local, you can use mvn to run the tests. ITD is mostly to run on cluster; for me it works from an untarred tarball presently. Are you trying to run on local or cluster?&lt;/p&gt;</comment>
                            <comment id="13614554" author="aleksshulman" created="Tue, 26 Mar 2013 21:20:18 +0000"  >&lt;p&gt;I&apos;m trying to run it on a remote cluster.&lt;/p&gt;</comment>
                            <comment id="13614557" author="enis" created="Tue, 26 Mar 2013 21:24:35 +0000"  >&lt;blockquote&gt;&lt;p&gt;for me it works from an untarred tarball presently.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;It does not work from the source checkout. hbase-it/pom.xml builds the target/cached_classpath.txt from all the modules, but does not add itself(hbase-it jars) there. &lt;/p&gt;</comment>
                            <comment id="13614756" author="ndimiduk" created="Wed, 27 Mar 2013 00:51:46 +0000"  >&lt;p&gt;I started work on a fix for this, but progress was halted by lack of consensus around what expected behavior should actually be. See also &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7971&quot; title=&quot;mvn clean compile on trunk and 0.95 does not produce target/cached_classpath.txt&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7971&quot;&gt;&lt;del&gt;HBASE-7971&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13614759" author="ndimiduk" created="Wed, 27 Mar 2013 00:53:44 +0000"  >&lt;p&gt;Depending on the integration test you&apos;d like to run, it may be sufficient to run the test&apos;s main. This is how things are implemented over in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8147&quot; title=&quot;Add Integration Test for &amp;quot;The HCat Scenario&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8147&quot;&gt;&lt;del&gt;HBASE-8147&lt;/del&gt;&lt;/a&gt;, for instance. In that case, this will get the job done.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ HADOOP_CLASSPATH=$(./bin/hbase classpath) hadoop \
  jar hbase-it/target/hbase-it-0.97-SNAPSHOT-tests.jar \
  org.apache.hadoop.hbase.mapreduce.IntegrationTestImportTsv
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13615596" author="sershe" created="Wed, 27 Mar 2013 18:27:50 +0000"  >&lt;p&gt;Should it work from source checkout? I thought the prescribed way for that is to use mvn.&lt;/p&gt;</comment>
                            <comment id="13615620" author="enis" created="Wed, 27 Mar 2013 18:47:01 +0000"  >&lt;blockquote&gt;&lt;p&gt;Should it work from source checkout? &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes, ideally. Maven is one way of running things, but it should be runnable from the command line as well. &lt;/p&gt;</comment>
                            <comment id="13615869" author="aleksshulman" created="Wed, 27 Mar 2013 22:58:58 +0000"  >&lt;p&gt;The documentation seems to say that it&apos;s runnable from source: &lt;a href=&quot;http://hbase.apache.org/book/hbase.tests.html#integration.tests&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hbase.apache.org/book/hbase.tests.html#integration.tests&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13702453" author="enis" created="Mon, 8 Jul 2013 21:25:57 +0000"  >&lt;p&gt;How about this patch? &lt;br/&gt;
It moves classpath generation from hbase-it to hbase-assembly. &lt;/p&gt;</comment>
                            <comment id="13703497" author="ndimiduk" created="Tue, 9 Jul 2013 16:58:46 +0000"  >&lt;p&gt;hbase-assembly seems like the correct place to put this. IIRC, the trick from &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7971&quot; title=&quot;mvn clean compile on trunk and 0.95 does not produce target/cached_classpath.txt&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7971&quot;&gt;&lt;del&gt;HBASE-7971&lt;/del&gt;&lt;/a&gt; was to ensure the destination of the cached_classpath.txt was not cleaned by a subsequent step in the build. Adding all the other modules as dependencies of hbase-assembly will force that module to go last, which I suspect is what you require.&lt;/p&gt;

&lt;p&gt;nit: &lt;tt&gt;mvn clean package -DskipTests&lt;/tt&gt; is sufficient; &lt;tt&gt;install&lt;/tt&gt; not required.&lt;/p&gt;

&lt;p&gt;The generated file does indeed contain the hbase-it tests jar, so I think you&apos;ve solved it.&lt;/p&gt;

&lt;p&gt;IntegrationTestImportTsv runs via bin/hbase.&lt;/p&gt;

&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13703806" author="stack" created="Tue, 9 Jul 2013 21:19:06 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;I tried it.  Worked for me.&lt;/p&gt;</comment>
                            <comment id="13703808" author="stack" created="Tue, 9 Jul 2013 21:19:50 +0000"  >&lt;p&gt;I mean, I ran through the steps our Alek outlined above and now it works w/ this patch applied.&lt;/p&gt;</comment>
                            <comment id="13703811" author="aleksshulman" created="Tue, 9 Jul 2013 21:23:10 +0000"  >&lt;p&gt;Patch looks good. Thanks Enis!&lt;/p&gt;</comment>
                            <comment id="13703880" author="enis" created="Tue, 9 Jul 2013 22:13:13 +0000"  >&lt;p&gt;Thanks for reviews. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nkeywal&quot; class=&quot;user-hover&quot; rel=&quot;nkeywal&quot;&gt;Nicolas Liochon&lt;/a&gt; do you want to test this before I commit, or shall I go ahead? &lt;/p&gt;</comment>
                            <comment id="13703889" author="nkeywal" created="Tue, 9 Jul 2013 22:17:48 +0000"  >&lt;p&gt;Please go ahead Enis. Thanks a lot.&lt;/p&gt;


</comment>
                            <comment id="13703969" author="enis" created="Tue, 9 Jul 2013 23:10:55 +0000"  >&lt;p&gt;Committed this. &lt;/p&gt;</comment>
                            <comment id="13703994" author="hudson" created="Tue, 9 Jul 2013 23:36:07 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #606 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/606/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/606/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8200&quot; title=&quot;Integration Test classes are not part of the default HBase classpath&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8200&quot;&gt;&lt;del&gt;HBASE-8200&lt;/del&gt;&lt;/a&gt; Integration Test classes are not part of the default HBase classpath. (Revision 1501602)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
enis : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/bin/hbase&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/bin/hbase.cmd&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-assembly/pom.xml&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-it/pom.xml&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/pom.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13704002" author="hudson" created="Tue, 9 Jul 2013 23:36:38 +0000"  >&lt;p&gt;Integrated in hbase-0.95-on-hadoop2 #172 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95-on-hadoop2/172/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95-on-hadoop2/172/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8200&quot; title=&quot;Integration Test classes are not part of the default HBase classpath&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8200&quot;&gt;&lt;del&gt;HBASE-8200&lt;/del&gt;&lt;/a&gt; Integration Test classes are not part of the default HBase classpath. (Revision 1501604)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
enis : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/bin/hbase&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/bin/hbase.cmd&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-assembly/pom.xml&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-it/pom.xml&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/pom.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13704167" author="hudson" created="Wed, 10 Jul 2013 04:00:04 +0000"  >&lt;p&gt;Integrated in hbase-0.95 #306 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95/306/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95/306/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8200&quot; title=&quot;Integration Test classes are not part of the default HBase classpath&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8200&quot;&gt;&lt;del&gt;HBASE-8200&lt;/del&gt;&lt;/a&gt; Integration Test classes are not part of the default HBase classpath. (Revision 1501604)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
enis : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/bin/hbase&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/bin/hbase.cmd&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-assembly/pom.xml&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-it/pom.xml&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/pom.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13704173" author="hudson" created="Wed, 10 Jul 2013 04:03:03 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #4233 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4233/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4233/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8200&quot; title=&quot;Integration Test classes are not part of the default HBase classpath&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8200&quot;&gt;&lt;del&gt;HBASE-8200&lt;/del&gt;&lt;/a&gt; Integration Test classes are not part of the default HBase classpath. (Revision 1501602)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
enis : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/bin/hbase&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/bin/hbase.cmd&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-assembly/pom.xml&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-it/pom.xml&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/pom.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                            <outwardlinks description="supercedes">
                                        <issuelink>
            <issuekey id="12634883">HBASE-7971</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12591283" name="hbase-8200_v1.patch" size="5663" author="enis" created="Mon, 8 Jul 2013 21:25:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 26 Mar 2013 20:56:51 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>319644</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 23 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1j5i7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>319985</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>