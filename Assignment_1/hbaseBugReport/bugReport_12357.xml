<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:32:14 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-12357/HBASE-12357.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-12357] TestHCM#testClusterStatus is continuosly failing in jenkins</title>
                <link>https://issues.apache.org/jira/browse/HBASE-12357</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Tests run: 21, Failures: 0, Errors: 1, Skipped: 2, Time elapsed: 187.475 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.hadoop.hbase.client.TestHCM
testClusterStatus(org.apache.hadoop.hbase.client.TestHCM)  Time elapsed: 41.477 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
java.lang.Exception: Unexpected exception, expected&amp;lt;org.apache.hadoop.hbase.regionserver.RegionServerStoppedException&amp;gt; but was&amp;lt;junit.framework.AssertionFailedError&amp;gt;
	at junit.framework.Assert.fail(Assert.java:57)
	at org.apache.hadoop.hbase.Waiter.waitFor(Waiter.java:193)
	at org.apache.hadoop.hbase.HBaseTestingUtility.waitFor(HBaseTestingUtility.java:3537)
	at org.apache.hadoop.hbase.client.TestHCM.testClusterStatus(TestHCM.java:273)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12751012">HBASE-12357</key>
            <summary>TestHCM#testClusterStatus is continuosly failing in jenkins</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="dimaspivak">Dima Spivak</assignee>
                                    <reporter username="ashish singhi">Ashish Singhi</reporter>
                        <labels>
                    </labels>
                <created>Tue, 28 Oct 2014 07:37:33 +0000</created>
                <updated>Tue, 23 Dec 2014 20:15:21 +0000</updated>
                            <resolved>Tue, 23 Dec 2014 20:15:21 +0000</resolved>
                                    <version>1.0.0</version>
                                                    <component>test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="14186531" author="dimaspivak" created="Tue, 28 Oct 2014 07:46:52 +0000"  >&lt;p&gt;Do you got this one, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashish+singhi&quot; class=&quot;user-hover&quot; rel=&quot;ashish singhi&quot;&gt;Ashish Singhi&lt;/a&gt;? I can take this on if you don&apos;t feel like it. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14186535" author="ashish singhi" created="Tue, 28 Oct 2014 07:50:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dimaspivak&quot; class=&quot;user-hover&quot; rel=&quot;dimaspivak&quot;&gt;Dima Spivak&lt;/a&gt; I am not able to run this test locally &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
Yes you can take this up, I will never mind for that. Thanks&lt;/p&gt;</comment>
                            <comment id="14186538" author="dimaspivak" created="Tue, 28 Oct 2014 07:52:58 +0000"  >&lt;p&gt;Can do! I was just about to reply to your dev@ email about not being able to run it locally; I&apos;ve been running it on my rig consistently without a problem.&lt;/p&gt;</comment>
                            <comment id="14186551" author="dimaspivak" created="Tue, 28 Oct 2014 08:13:41 +0000"  >&lt;p&gt;Being caused by Waiter#waitFor timing out (specifically, on &lt;a href=&quot;https://github.com/apache/hbase/blob/branch-1/hbase-common/src/test/java/org/apache/hadoop/hbase/Waiter.java#L193&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;this line&lt;/a&gt;) and, as a result, the @Test(expected = RegionServerStoppedException.class) on #testClusterStatus isn&apos;t being satisfied. Any relevant classes haven&apos;t actually been touched for a while, and this tests passes on my local rig, so I&apos;m betting that this is a problem with the Jenkins environment on a particular build machine. Note, specifically, that this test has failed at least four times in the last day or so (&lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/363/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;1&lt;/a&gt;, &lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/366/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;2&lt;/a&gt;, &lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/369/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;3&lt;/a&gt;, and &lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/370/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;4&lt;/a&gt;) only when run on &lt;a href=&quot;https://builds.apache.org/computer/H11/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;machine H11&lt;/a&gt;, but not a few other builds with minimal changes (&lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/368/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;5&lt;/a&gt;, &lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/367/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;6&lt;/a&gt;, &lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/365/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;7&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;I&apos;ll look at filing a JIRA with Apache Infra if I can&apos;t figure out what&apos;s weird about this slave on my own.&lt;/p&gt;</comment>
                            <comment id="14186563" author="tianq" created="Tue, 28 Oct 2014 08:22:29 +0000"  >&lt;p&gt;it looks here&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Caused by: java.lang.IllegalArgumentException: IPv6 socket cannot join IPv4 multicast group&lt;br/&gt;
       at sun.nio.ch.DatagramChannelImpl.innerJoin(DatagramChannelImpl.java:779)&lt;br/&gt;
       at sun.nio.ch.DatagramChannelImpl.join(DatagramChannelImpl.java:865)&lt;br/&gt;
       at io.netty.channel.socket.nio.NioDatagramChannel.joinGroup(NioDatagramChannel.java:394)&lt;br/&gt;
       at org.apache.hadoop.hbase.master.ClusterStatusPublisher$MulticastPublisher.connect(ClusterStatusPublisher.java:273)&lt;br/&gt;
       at org.apache.hadoop.hbase.master.ClusterStatusPublisher.&amp;lt;init&amp;gt;(ClusterStatusPublisher.java:121)&lt;br/&gt;
       at org.apache.hadoop.hbase.master.HMaster.&amp;lt;init&amp;gt;(HMaster.java:307)&lt;br/&gt;
       at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)&lt;br/&gt;
       at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)&lt;br/&gt;
       at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)&lt;br/&gt;
       at java.lang.reflect.Constructor.newInstance(Constructor.java:525)&lt;br/&gt;
       at org.apache.hadoop.hbase.util.JVMClusterUtil.createMasterThread(JVMClusterUtil.java:142)&lt;/p&gt;&lt;/blockquote&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 756       &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; MembershipKey innerJoin(InetAddress group,
  757                                       NetworkInterface interf,
  758                                       InetAddress source)
  759           &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException
  760       {
  761           &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!group.isMulticastAddress())
  762               &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IllegalArgumentException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Group not a multicast address&quot;&lt;/span&gt;);
  763   
  764           &lt;span class=&quot;code-comment&quot;&gt;// check multicast address is compatible with &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; socket
&lt;/span&gt;  765           &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (group &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; Inet4Address) {
  766               &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (family == StandardProtocolFamily.INET6 &amp;amp;&amp;amp; !Net.canIPv6SocketJoinIPv4Group())
  767                   &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IllegalArgumentException(&lt;span class=&quot;code-quote&quot;&gt;&quot;IPv6 socket cannot join IPv4 multicast group&quot;&lt;/span&gt;);
  768           } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (group &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; Inet6Address) {
  769               &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (family != StandardProtocolFamily.INET6)
  770                   &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IllegalArgumentException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Only IPv6 sockets can join IPv6 multicast group&quot;&lt;/span&gt;);
  771           } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
  772               &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IllegalArgumentException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Address type not supported&quot;&lt;/span&gt;);
  773           }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;looks need to specify &lt;tt&gt;StandardProtocolFamily.INET6&lt;/tt&gt; for IPV6 addr..?&lt;/p&gt;
</comment>
                            <comment id="14186566" author="dimaspivak" created="Tue, 28 Oct 2014 08:25:09 +0000"  >&lt;p&gt;Whaaat? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Where&apos;s all this coming from, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tianq&quot; class=&quot;user-hover&quot; rel=&quot;tianq&quot;&gt;Qiang Tian&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="14186577" author="dimaspivak" created="Tue, 28 Oct 2014 08:33:53 +0000"  >&lt;p&gt;These are two separate problems, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tianq&quot; class=&quot;user-hover&quot; rel=&quot;tianq&quot;&gt;Qiang Tian&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14186580" author="tianq" created="Tue, 28 Oct 2014 08:35:14 +0000"  >&lt;p&gt;oops. the stacktrace comes from Ashish&apos;s email.&lt;br/&gt;
the code is JDK code about:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;java.lang.IllegalArgumentException: IPv6 socket cannot join IPv4 multicast group&lt;/p&gt;&lt;/blockquote&gt;


&lt;p&gt;see the error here:&lt;br/&gt;
&lt;a href=&quot;http://docs.oracle.com/javase/7/docs/api/java/nio/channels/MulticastChannel.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://docs.oracle.com/javase/7/docs/api/java/nio/channels/MulticastChannel.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;we are hitting here:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 765           &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (group &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; Inet4Address) {
 766               &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (family == StandardProtocolFamily.INET6 &amp;amp;&amp;amp; !Net.canIPv6SocketJoinIPv4Group())
  767                   &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IllegalArgumentException(&lt;span class=&quot;code-quote&quot;&gt;&quot;IPv6 socket cannot join IPv4 multicast group&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the parameter group is IPV4, and family is IPV6(StandardProtocolFamily.INET6), but I do not see family is specified to IPv6 in ClusterStPublisher.java. strange..&lt;/p&gt;

</comment>
                            <comment id="14186584" author="tianq" created="Tue, 28 Oct 2014 08:38:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashish+singhi&quot; class=&quot;user-hover&quot; rel=&quot;ashish singhi&quot;&gt;Ashish Singhi&lt;/a&gt;,&lt;br/&gt;
Can you confirm is it the same problem?&lt;/p&gt;</comment>
                            <comment id="14186590" author="dimaspivak" created="Tue, 28 Oct 2014 08:42:44 +0000"  >&lt;p&gt;Ashish&apos;s email on dev@ was related to problems starting a minicluster in this test on Windows whereas this JIRA is about the test failing by timeout in Jenkins (which runs on *nix boxes). Two separate problems. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14186602" author="tianq" created="Tue, 28 Oct 2014 08:55:23 +0000"  >&lt;p&gt;ah..sorry for that &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dimaspivak&quot; class=&quot;user-hover&quot; rel=&quot;dimaspivak&quot;&gt;Dima Spivak&lt;/a&gt;.&lt;br/&gt;
that looks a bug too. will open a new jira&lt;/p&gt;
</comment>
                            <comment id="14186603" author="ashish singhi" created="Tue, 28 Oct 2014 08:56:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tianq&quot; class=&quot;user-hover&quot; rel=&quot;tianq&quot;&gt;Qiang Tian&lt;/a&gt; I got this problem on windows. On Linux vim I does not have any issue.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dimaspivak&quot; class=&quot;user-hover&quot; rel=&quot;dimaspivak&quot;&gt;Dima Spivak&lt;/a&gt; Yes, I was facing problem with starting minicluster  in windows for TestHCM. But I am able to start minicluster successfully on windows for other test cases where it does not hit flow into ClusterStatusPublisher.java&lt;/p&gt;</comment>
                            <comment id="14257416" author="stack" created="Tue, 23 Dec 2014 19:43:42 +0000"  >&lt;p&gt;This is a dup of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12558&quot; title=&quot;Disable TestHCM.testClusterStatus Unexpected exception, expected&amp;lt;org.apache.hadoop.hbase.regionserver.RegionServerStoppedException&amp;gt; but was&amp;lt;junit.framework.AssertionFailedError&amp;gt;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12558&quot;&gt;&lt;del&gt;HBASE-12558&lt;/del&gt;&lt;/a&gt; ?&lt;/p&gt;</comment>
                            <comment id="14257429" author="dimaspivak" created="Tue, 23 Dec 2014 19:54:14 +0000"  >&lt;p&gt;Looks like it, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;. Same test failing with the same error that seems confined to some environments (and can&apos;t be reproduced by either of us locally). Doesn&apos;t seem to be happening much anymore, though.&lt;/p&gt;</comment>
                            <comment id="14257455" author="stack" created="Tue, 23 Dec 2014 20:14:56 +0000"  >&lt;blockquote&gt;&lt;p&gt;Doesn&apos;t seem to be happening much anymore, though.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Smile. Its disabled. That probably explains it.&lt;/p&gt;</comment>
                            <comment id="14257456" author="stack" created="Tue, 23 Dec 2014 20:15:21 +0000"  >&lt;p&gt;Marking as duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12558&quot; title=&quot;Disable TestHCM.testClusterStatus Unexpected exception, expected&amp;lt;org.apache.hadoop.hbase.regionserver.RegionServerStoppedException&amp;gt; but was&amp;lt;junit.framework.AssertionFailedError&amp;gt;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12558&quot;&gt;&lt;del&gt;HBASE-12558&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 28 Oct 2014 07:46:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 51 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i21nnb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>