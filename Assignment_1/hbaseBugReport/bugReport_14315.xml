<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:51:50 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-14315/HBASE-14315.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-14315] Save one call to KeyValueHeap.peek per row</title>
                <link>https://issues.apache.org/jira/browse/HBASE-14315</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Another one of my micro optimizations.&lt;br/&gt;
In StoreScanner.next(...) we can actually save a call to KeyValueHeap.peek, which in my runs of scan heavy loads shows up at top.&lt;/p&gt;

&lt;p&gt;Based on the run and data this can safe between 3 and 10% of runtime.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12858891">HBASE-14315</key>
            <summary>Save one call to KeyValueHeap.peek per row</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lhofhansl">Lars Hofhansl</assignee>
                                    <reporter username="lhofhansl">Lars Hofhansl</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Aug 2015 06:51:08 +0000</created>
                <updated>Wed, 27 Jan 2016 15:28:52 +0000</updated>
                            <resolved>Fri, 28 Aug 2015 22:26:48 +0000</resolved>
                                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>1.2.0</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                    <fixVersion>0.98.15</fixVersion>
                    <fixVersion>1.0.3</fixVersion>
                    <fixVersion>1.1.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="14712611" author="lhofhansl" created="Wed, 26 Aug 2015 06:54:38 +0000"  >&lt;p&gt;Simple patch (for 0.98 for now).&lt;/p&gt;

&lt;p&gt;The observation is simple: We already peeked the current KV, &lt;em&gt;and&lt;/em&gt; already checked whether it&apos;s null. We can use that in the loop and peek a new value at the end. It&apos;s guaranteed to save one call to peek.&lt;/p&gt;

&lt;p&gt;Whether it&apos;s worth the slide decrease in readability is a different discussion.&lt;/p&gt;</comment>
                            <comment id="14712635" author="ram_krish" created="Wed, 26 Aug 2015 07:18:26 +0000"  >&lt;p&gt;I think patch makes sense. +1.&lt;/p&gt;</comment>
                            <comment id="14713499" author="anoop.hbase" created="Wed, 26 Aug 2015 14:19:39 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14720612" author="lhofhansl" created="Fri, 28 Aug 2015 21:32:15 +0000"  >&lt;p&gt;I intend to patch this into all code lines. Let me know if there are objections.&lt;/p&gt;</comment>
                            <comment id="14720639" author="lhofhansl" created="Fri, 28 Aug 2015 21:44:29 +0000"  >&lt;p&gt;Patch against master.&lt;br/&gt;
(also had convince myself that the semantic with &lt;tt&gt;break LOOP&lt;/tt&gt; are still the same - they are)&lt;/p&gt;</comment>
                            <comment id="14720694" author="lhofhansl" created="Fri, 28 Aug 2015 22:26:48 +0000"  >&lt;p&gt;Committed to every branch on the planet.&lt;/p&gt;</comment>
                            <comment id="14720758" author="hudson" created="Fri, 28 Aug 2015 23:08:49 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.1 #641 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.1/641/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.1/641/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14315&quot; title=&quot;Save one call to KeyValueHeap.peek per row&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14315&quot;&gt;&lt;del&gt;HBASE-14315&lt;/del&gt;&lt;/a&gt; Save one call to KeyValueHeap.peek per row. (larsh: rev 74c5ee41ed10971b8d7cc515695d3ca07faff13a)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14720808" author="hudson" created="Fri, 28 Aug 2015 23:54:50 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.0 #1034 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/1034/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.0/1034/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14315&quot; title=&quot;Save one call to KeyValueHeap.peek per row&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14315&quot;&gt;&lt;del&gt;HBASE-14315&lt;/del&gt;&lt;/a&gt; Save one call to KeyValueHeap.peek per row. (larsh: rev 89b106231f6f10a13a2fbc317c5770a3841db7ab)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14720872" author="hudson" created="Sat, 29 Aug 2015 01:11:01 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.2 #142 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2/142/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2/142/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14315&quot; title=&quot;Save one call to KeyValueHeap.peek per row&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14315&quot;&gt;&lt;del&gt;HBASE-14315&lt;/del&gt;&lt;/a&gt; Save one call to KeyValueHeap.peek per row. (larsh: rev a733d741f411d1994d8e4d6ac118f3f65eee406e)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14720878" author="hudson" created="Sat, 29 Aug 2015 01:16:10 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.2-IT #118 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2-IT/118/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2-IT/118/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14315&quot; title=&quot;Save one call to KeyValueHeap.peek per row&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14315&quot;&gt;&lt;del&gt;HBASE-14315&lt;/del&gt;&lt;/a&gt; Save one call to KeyValueHeap.peek per row. (larsh: rev a733d741f411d1994d8e4d6ac118f3f65eee406e)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14720888" author="hudson" created="Sat, 29 Aug 2015 01:29:38 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.3-IT #121 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3-IT/121/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3-IT/121/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14315&quot; title=&quot;Save one call to KeyValueHeap.peek per row&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14315&quot;&gt;&lt;del&gt;HBASE-14315&lt;/del&gt;&lt;/a&gt; Save one call to KeyValueHeap.peek per row. (larsh: rev c277166fd1f3104c0db9011f700eebf404b812ad)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14720902" author="hudson" created="Sat, 29 Aug 2015 01:53:02 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98-on-Hadoop-1.1 #1058 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/1058/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/1058/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14315&quot; title=&quot;Save one call to KeyValueHeap.peek per row&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14315&quot;&gt;&lt;del&gt;HBASE-14315&lt;/del&gt;&lt;/a&gt; Save one call to KeyValueHeap.peek per row. (larsh: rev 7a4fa7f20cf8084ce57dcaa83e0c4f430d290736)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14720908" author="hudson" created="Sat, 29 Aug 2015 02:00:33 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.3 #139 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3/139/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3/139/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14315&quot; title=&quot;Save one call to KeyValueHeap.peek per row&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14315&quot;&gt;&lt;del&gt;HBASE-14315&lt;/del&gt;&lt;/a&gt; Save one call to KeyValueHeap.peek per row. (larsh: rev c277166fd1f3104c0db9011f700eebf404b812ad)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14720920" author="hudson" created="Sat, 29 Aug 2015 02:22:03 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #6763 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/6763/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/6763/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14315&quot; title=&quot;Save one call to KeyValueHeap.peek per row&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14315&quot;&gt;&lt;del&gt;HBASE-14315&lt;/del&gt;&lt;/a&gt; Save one call to KeyValueHeap.peek per row. (larsh: rev cf4c0fb71ccb8b15549b2410083434398aa0ebb3)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14720930" author="hudson" created="Sat, 29 Aug 2015 02:42:40 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98 #1104 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/1104/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/1104/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14315&quot; title=&quot;Save one call to KeyValueHeap.peek per row&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14315&quot;&gt;&lt;del&gt;HBASE-14315&lt;/del&gt;&lt;/a&gt; Save one call to KeyValueHeap.peek per row. (larsh: rev 7a4fa7f20cf8084ce57dcaa83e0c4f430d290736)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15119396" author="ndimiduk" created="Wed, 27 Jan 2016 15:05:25 +0000"  >&lt;p&gt;Updating fix version based on release audit vs what&apos;s committed.&lt;/p&gt;</comment>
                            <comment id="15119558" author="ndimiduk" created="Wed, 27 Jan 2016 15:28:52 +0000"  >&lt;p&gt;Bulk closing 1.1.3 issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12752405" name="14315-0.98.txt" size="1950" author="lhofhansl" created="Wed, 26 Aug 2015 06:54:38 +0000"/>
                            <attachment id="12753078" name="14315-master.txt" size="2393" author="lhofhansl" created="Fri, 28 Aug 2015 21:44:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 26 Aug 2015 07:18:26 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            46 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jdxb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>