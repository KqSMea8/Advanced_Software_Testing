<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:56:00 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-8519/HBASE-8519.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-8519] Backup master will never come up if primary master dies during initialization</title>
                <link>https://issues.apache.org/jira/browse/HBASE-8519</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The problem happens if primary master dies after becoming master but before it completes initialization and calls clusterStatusTracker.setClusterUp(),&lt;br/&gt;
The backup master will try to become the master, but will shutdown itself promptly because it sees &apos;the cluster is not up&apos;.&lt;/p&gt;

&lt;p&gt;This is the backup master log:&lt;/p&gt;

&lt;p&gt;2013-05-09 15:08:05,568 INFO org.apache.hadoop.hbase.master.metrics.MasterMetrics: Initialized&lt;br/&gt;
2013-05-09 15:08:05,573 DEBUG org.apache.hadoop.hbase.master.HMaster: HMaster started in backup mode.  Stalling until master znode is written.&lt;br/&gt;
2013-05-09 15:08:05,589 INFO org.apache.hadoop.hbase.zookeeper.RecoverableZooKeeper: Node /hbase/master already exists and this is not a retry&lt;br/&gt;
2013-05-09 15:08:05,590 INFO org.apache.hadoop.hbase.master.ActiveMasterManager: Adding ZNode for /hbase/backup-masters/xxx.com,60000,1368137285373 in backup master directory&lt;br/&gt;
2013-05-09 15:08:05,595 INFO org.apache.hadoop.hbase.master.ActiveMasterManager: Another master is the active master, xxx.com,60000,1368137283107; waiting to become the next active master&lt;br/&gt;
2013-05-09 15:09:45,006 DEBUG org.apache.hadoop.hbase.master.ActiveMasterManager: No master available. Notifying waiting threads&lt;br/&gt;
2013-05-09 15:09:45,006 INFO org.apache.hadoop.hbase.master.HMaster: Cluster went down before this master became active&lt;br/&gt;
2013-05-09 15:09:45,006 DEBUG org.apache.hadoop.hbase.master.HMaster: Stopping service threads&lt;br/&gt;
2013-05-09 15:09:45,006 INFO org.apache.hadoop.ipc.HBaseServer: Stopping server on 60000&lt;/p&gt;

&lt;p&gt;In ActiveMasterManager::blockUntilBecomingActiveMaster()&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  ..
  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!clusterStatusTracker.isClusterUp()) {
          &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.master.stop(
            &lt;span class=&quot;code-quote&quot;&gt;&quot;Cluster went down before &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; master became active&quot;&lt;/span&gt;);
        }
  ..
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12646906">HBASE-8519</key>
            <summary>Backup master will never come up if primary master dies during initialization</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jinghe">Jerry He</assignee>
                                    <reporter username="jinghe">Jerry He</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 May 2013 22:38:59 +0000</created>
                <updated>Tue, 18 Feb 2014 02:44:35 +0000</updated>
                            <resolved>Wed, 15 May 2013 18:09:59 +0000</resolved>
                                    <version>0.94.7</version>
                    <version>0.95.0</version>
                                    <fixVersion>0.98.0</fixVersion>
                    <fixVersion>0.95.1</fixVersion>
                                    <component>master</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13653383" author="yuzhihong@gmail.com" created="Thu, 9 May 2013 23:32:17 +0000"  >&lt;p&gt;Looks like we can introduce another state, stored at beginning of initialization in clusterup znode, that signifies primary master tries to start the cluster.&lt;br/&gt;
ActiveMasterManager can check for this state to decide whether backup master should be brought up.&lt;/p&gt;</comment>
                            <comment id="13653398" author="jinghe" created="Fri, 10 May 2013 00:00:56 +0000"  >&lt;p&gt;Hi, Ted&lt;br/&gt;
Is it ok that we still use the clusterStatusTracker, but move up the call clusterStatusTracker.setClusterUp() in the master&lt;br/&gt;
to right after this succeeds in creating the master zk node.&lt;/p&gt;</comment>
                            <comment id="13653457" author="yuzhihong@gmail.com" created="Fri, 10 May 2013 01:13:51 +0000"  >&lt;blockquote&gt;&lt;p&gt;to right after this succeeds in creating the master zk node.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This would lead to region server sending RPC requests to master prematurely because master is not really ready.&lt;/p&gt;</comment>
                            <comment id="13653551" author="jinghe" created="Fri, 10 May 2013 05:31:03 +0000"  >&lt;p&gt;Thanks, Ted.&lt;br/&gt;
I&apos;ll try to provide a patch following your suggestion.&lt;/p&gt;</comment>
                            <comment id="13654593" author="stack" created="Fri, 10 May 2013 16:46:37 +0000"  >&lt;blockquote&gt;&lt;p&gt;This would lead to region server sending RPC requests to master prematurely because master is not really ready.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That happens in &apos;normal&apos; operations so no need to avoid.  See PleaseHoldException exception.&lt;/p&gt;

&lt;p&gt;I would suggest no new states introduced unless good case made that it is really needed.&lt;/p&gt;</comment>
                            <comment id="13654613" author="jdcryans" created="Fri, 10 May 2013 17:11:06 +0000"  >&lt;blockquote&gt;&lt;p&gt;I would suggest no new states introduced unless good case made that it is really needed.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13654859" author="jdcryans" created="Fri, 10 May 2013 21:24:08 +0000"  >&lt;p&gt;What this jira describes is not the only failure mode. If you kill the master while it&apos;s shutting down the cluster and you try to restart HBase, it will have the same error and will go down (and the cluster won&apos;t even come up).&lt;/p&gt;

&lt;p&gt;All you need is the master and the shutdown znodes in place when starting HMaster.&lt;/p&gt;

&lt;p&gt;There&apos;s a weird misconnection here:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;If you start the cluster on a clean ZK, you won&apos;t find either znodes so you just start.&lt;/li&gt;
	&lt;li&gt;If you start the cluster and the shutdown znode exists but not the master znode, &lt;b&gt;you just clean it&lt;/b&gt;:
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-comment&quot;&gt;// Set the cluster as up.  If &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RSs, they&apos;ll be waiting on &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; before
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// going ahead with their startup.
&lt;/span&gt;    &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; wasUp = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.clusterStatusTracker.isClusterUp();
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!wasUp) &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.clusterStatusTracker.setClusterUp();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;If you start the cluster and the master znode exists but not the shutdown, you are a backup master.&lt;/li&gt;
	&lt;li&gt;Finally, this jira, you have both so you assume the cluster is shutting down and you were meant to be a backup cluster.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;The tricky part here is that 2 and 4 are almost the same, except that you want to handle the case where the whole cluster is shutting down while you&apos;re waiting. Maybe we could check if both znodes are there before waiting and then recognize the situation as being a start and not a stop, but I&apos;m sure that&apos;s going to screw someone at some point too...&lt;/p&gt;

&lt;p&gt;Comments?&lt;/p&gt;</comment>
                            <comment id="13655032" author="yuzhihong@gmail.com" created="Fri, 10 May 2013 23:41:16 +0000"  >&lt;blockquote&gt;&lt;p&gt;Finally, this jira, you have both&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I think Jerry&apos;s description mentioned that clusterStatusTracker.isClusterUp() returned false, leading to backup master stopping.&lt;/p&gt;</comment>
                            <comment id="13655040" author="jinghe" created="Fri, 10 May 2013 23:52:11 +0000"  >&lt;blockquote&gt;&lt;p&gt;If you kill the master while it&apos;s shutting down the cluster and you try to restart HBase, it will have the same error and will go down (and the cluster won&apos;t even come up).&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Can you give more details on the sequence of events?&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;All you need is the master and the shutdown znodes in place when starting HMaster.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;If the shutdown/clusterStateZNode znode exists, we will be ok thru this code, correct?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  ..
  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!clusterStatusTracker.isClusterUp()) {
          &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.master.stop(
            &lt;span class=&quot;code-quote&quot;&gt;&quot;Cluster went down before &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; master became active&quot;&lt;/span&gt;);
        }
  ..
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The master znode is ephemeral, and the clusterStateZNode is persistent.&lt;/p&gt;</comment>
                            <comment id="13655047" author="jdcryans" created="Fri, 10 May 2013 23:59:36 +0000"  >&lt;blockquote&gt;&lt;p&gt;I think Jerry&apos;s description mentioned that clusterStatusTracker.isClusterUp() returned false, leading to backup master stopping.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sorry, I meant the reverse for the shutdown znode. Which should also answer Jerry&apos;s second question.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Can you give more details on the sequence of events?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Do a stop-hbase then kill the master just after that, you should get the same &quot;Cluster went down before this master became active&quot; when you restart.&lt;/p&gt;</comment>
                            <comment id="13655117" author="jinghe" created="Sat, 11 May 2013 02:26:50 +0000"  >&lt;blockquote&gt;&lt;p&gt;I meant the reverse for the shutdown znode.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, that all make sense now.&lt;/p&gt;

&lt;p&gt;I am able to re-create the problem easily by killing the master right after issuing the stop-hbase. Then re-start the master before the ephemeral master znode goes away.&lt;/p&gt;

&lt;p&gt;2013-05-10 18:20:17,690 INFO org.apache.hadoop.hbase.master.metrics.MasterMetrics: Initialized&lt;br/&gt;
2013-05-10 18:20:17,704 INFO org.apache.hadoop.hbase.zookeeper.RecoverableZooKeeper: Node /hbase/master already exists and this is not a retry&lt;br/&gt;
2013-05-10 18:20:17,705 INFO org.apache.hadoop.hbase.master.ActiveMasterManager: Adding ZNode for /hbase/backup-masters/xxx.com,60000,1368235217501 in backup master directory&lt;br/&gt;
2013-05-10 18:20:17,711 INFO org.apache.hadoop.hbase.master.ActiveMasterManager: Current master has this master&apos;s address, xxx.com,60000,1368234912934; master was restarted? Deleting node.&lt;br/&gt;
2013-05-10 18:20:17,711 DEBUG org.apache.hadoop.hbase.master.ActiveMasterManager: No master available. Notifying waiting threads&lt;br/&gt;
2013-05-10 18:20:17,711 INFO org.apache.hadoop.hbase.master.HMaster: Cluster went down before this master became active&lt;br/&gt;
2013-05-10 18:20:17,711 DEBUG org.apache.hadoop.hbase.master.HMaster: Stopping service threads&lt;/p&gt;</comment>
                            <comment id="13655179" author="jinghe" created="Sat, 11 May 2013 06:45:41 +0000"  >&lt;p&gt;The missing part seems to be this.&lt;br/&gt;
The backup master only check the clusterStateZNode once at the end when it wakes up and tries to be master again.&lt;br/&gt;
It is not notified if the clusterStateZNode has ever been up or not before that.&lt;/p&gt;

&lt;p&gt;The real &apos;stop&apos; case is: clusterStateZNode up --&amp;gt; clusterStateZNode down&lt;/p&gt;

&lt;p&gt;The backup master needs to watch for clusterStateZNode. If it is not aware clusterStateZNode has ever been up &lt;br/&gt;
or was up in its whole life, it should treat it as not a real &apos;stop&apos; case at the end.&lt;/p&gt;

&lt;p&gt;The if condition would become:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  ..
  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (clusterHasBeenUp &amp;amp;&amp;amp; !clusterStatusTracker.isClusterUp()) {
          &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.master.stop(
            &lt;span class=&quot;code-quote&quot;&gt;&quot;Cluster went down before &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; master became active&quot;&lt;/span&gt;);
        }
  ..
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Comments, please.&lt;/p&gt;</comment>
                            <comment id="13655243" author="yuzhihong@gmail.com" created="Sat, 11 May 2013 12:52:41 +0000"  >&lt;p&gt;Makes sense to me. &lt;/p&gt;</comment>
                            <comment id="13655371" author="jdcryans" created="Sat, 11 May 2013 21:14:55 +0000"  >&lt;blockquote&gt;
&lt;p&gt;The backup master needs to watch for clusterStateZNode. If it is not aware clusterStateZNode has ever been up &lt;br/&gt;
or was up in its whole life, it should treat it as not a real &apos;stop&apos; case at the end.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Right, that&apos;s also sort of what I was thinking.&lt;/p&gt;</comment>
                            <comment id="13655424" author="jinghe" created="Sun, 12 May 2013 02:10:35 +0000"  >&lt;p&gt;ok. I&apos;ll try to provide a patch based on this and do some testing.&lt;/p&gt;</comment>
                            <comment id="13656409" author="jdcryans" created="Mon, 13 May 2013 21:29:41 +0000"  >&lt;blockquote&gt;&lt;p&gt;+        if (clusterShutDown.get() &amp;amp;&amp;amp; !clusterStatusTracker.isClusterUp()) {&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Do we still need the second statement?&lt;/p&gt;

&lt;p&gt;Also I&apos;m not a fan of clusterShutDown&apos;s name since the cluster could be down when the master starts, or at least we need to doc more to explain why we don&apos;t care if the cluster is down when we start.&lt;/p&gt;</comment>
                            <comment id="13656471" author="jinghe" created="Mon, 13 May 2013 22:37:34 +0000"  >&lt;p&gt;We probably don&apos;t need the second statement. &lt;br/&gt;
Checking the current cluster status is just to be safe because getting the notification is a past event. Thoughts?&lt;br/&gt;
What do you think we should use for the name?&lt;br/&gt;
I can put comments right before the statement as this:&lt;br/&gt;
// We want to make sure before we stop the backup master the cluster is meant to go down.&lt;br/&gt;
// We&apos;ll only stop backup master if we have received cluster notification and the current cluster status is &quot;not up&quot;.&lt;/p&gt;

&lt;p&gt;We are indeed more restrictive on stopping backup master? Any thoughts if we are too restrictive?&lt;/p&gt;</comment>
                            <comment id="13656492" author="jdcryans" created="Mon, 13 May 2013 22:56:06 +0000"  >&lt;blockquote&gt;&lt;p&gt;Checking the current cluster status is just to be safe because getting the notification is a past event. Thoughts?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We&apos;re really talking about a few ms window, FWIW you could run isClusterUp() and then have it go down the millisecond later. So I think it&apos;s reasonably not too far in the past.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;What do you think we should use for the name?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t any good idea, so better comments won&apos;t hurt.&lt;/p&gt;

&lt;p&gt;Here&apos;s what I would say in nodeDeleted instead of before the if statement:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// We need to keep track of the cluster&apos;s shutdown status &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt;
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// we wait on the current master. We consider that, &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the cluster
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// was already in a &lt;span class=&quot;code-quote&quot;&gt;&quot;shutdown&quot;&lt;/span&gt; state when we started, that &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; master
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// is part of a &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; cluster that was started shortly after the old cluster
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// shut down, so that state is now irrelevant. This means that the shutdown
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// state must be set &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; we wait on the active master in order
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// to shutdown &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; master. See HBASE-8519.&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Makes sense? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;, can you tell me if this comment makes sense to you?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;We are indeed more restrictive on stopping backup master? Any thoughts if we are too restrictive?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;You mean that we may not stop the master when we should? I guess if you start a master at the same time that the cluster is going down then it will continue running, but to me this seems less bad than a master that shuts down when we need it to start a cluster.&lt;/p&gt;</comment>
                            <comment id="13656590" author="jinghe" created="Tue, 14 May 2013 00:34:07 +0000"  >&lt;blockquote&gt;&lt;p&gt;You mean that we may not stop the master when we should?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes.&lt;/p&gt;

&lt;p&gt;Much clearer comments than what I had!&lt;/p&gt;

&lt;p&gt;Also some basic testing I did to cover the cases we described:&lt;/p&gt;

&lt;p&gt;1.  Primary master running.  Backup master waiting.  stop-hbase.sh works successfully.&lt;br/&gt;
2.  Kills primary master in normal operation. Backup master becomes active successfully.&lt;br/&gt;
3.  Kills primary master during its initialization. Backup master becomes primary master successfully.&lt;br/&gt;
4.  Run stop-hbase.sh to stop hbase, but kills master before it finishes shutdown.  Re-start hbase is successful afterwards.&lt;/p&gt;</comment>
                            <comment id="13657470" author="jinghe" created="Tue, 14 May 2013 20:28:53 +0000"  >&lt;p&gt;Attached v2.patch incorporating &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdcryans&quot; class=&quot;user-hover&quot; rel=&quot;jdcryans&quot;&gt;Jean-Daniel Cryans&lt;/a&gt;&apos;s comments above.&lt;br/&gt;
Have done various ad hoc testing with combinations of master and backup master.&lt;br/&gt;
And entire UT suite.&lt;/p&gt;</comment>
                            <comment id="13657496" author="jinghe" created="Tue, 14 May 2013 20:49:35 +0000"  >&lt;p&gt;While doing testing on master and backup master, I found out there are some issues with stop-hbase.sh:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
# distributed == &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; means that the HMaster will kill ZK when it exits
# HBASE-6504 - only take the first line of the output in &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; verbose gc is on
distMode=`$bin/hbase --config &lt;span class=&quot;code-quote&quot;&gt;&quot;$HBASE_CONF_DIR&quot;&lt;/span&gt; org.apache.hadoop.hbase.util.HBaseConfTool hbase.cluster.distributed | head -n 1`
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; [ &lt;span class=&quot;code-quote&quot;&gt;&quot;$distMode&quot;&lt;/span&gt; == &apos;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&apos; ]
then
  # TODO: store backup masters in ZooKeeper and have the primary send them a shutdown message
  # stop any backup masters
  &lt;span class=&quot;code-quote&quot;&gt;&quot;$bin&quot;&lt;/span&gt;/hbase-daemons.sh --config &lt;span class=&quot;code-quote&quot;&gt;&quot;${HBASE_CONF_DIR}&quot;&lt;/span&gt; \
    --hosts &lt;span class=&quot;code-quote&quot;&gt;&quot;${HBASE_BACKUP_MASTERS}&quot;&lt;/span&gt; stop master-backup

  &lt;span class=&quot;code-quote&quot;&gt;&quot;$bin&quot;&lt;/span&gt;/hbase-daemons.sh --config &lt;span class=&quot;code-quote&quot;&gt;&quot;${HBASE_CONF_DIR}&quot;&lt;/span&gt; stop zookeeper
fi
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;1. Do we still need the TODO part to stop the backup master?&lt;br/&gt;
2. If the primary master died and backup master became active, running stop-hbase.sh will not work anymore. &lt;br/&gt;
   With the above TODO part, the backup master is killed by force. We can not even go to backup master and issue the stop-hbase.sh.&lt;br/&gt;
3. Should we have a &apos;else&apos; before the last killing zookeeper statement? It should be executed when &apos;distributed == false&apos;? &lt;/p&gt;

&lt;p&gt;Should I open another JIRA for this, or add to this current JIRA?&lt;/p&gt;
</comment>
                            <comment id="13657549" author="hadoopqa" created="Tue, 14 May 2013 21:46:28 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12583200/HBASE-8519-trunk-v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12583200/HBASE-8519-trunk-v2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 1 zombie test(s): &lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5678//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5678//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5678//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5678//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5678//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5678//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5678//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5678//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5678//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5678//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5678//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5678//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5678//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5678//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5678//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5678//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5678//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5678//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5678//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5678//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13657557" author="jdcryans" created="Tue, 14 May 2013 21:51:10 +0000"  >&lt;blockquote&gt;&lt;p&gt;While doing testing on master and backup master, I found out there are some issues with stop-hbase.sh:&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;IIUC those issues aren&apos;t related at all with this patch right? Meaning, is your patch causing any of those issues? If yes, then different jira.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;3. Should we have a &apos;else&apos; before the last killing zookeeper statement? It should be executed when &apos;distributed == false&apos;?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It&apos;s doing the right thing, if distributed=false then the HMaster and ZooKeeper are in the same JVM so killing one kills the other. If it&apos;s distributed then ZK is in a different JVM which you need to kill.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Attached v2.patch incorporating Jean-Daniel Cryans&apos;s comments above.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;You have my +1, let&apos;s wait for Jenkins then I&apos;ll commit. Good job!&lt;/p&gt;</comment>
                            <comment id="13657574" author="stack" created="Tue, 14 May 2013 21:59:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdcryans&quot; class=&quot;user-hover&quot; rel=&quot;jdcryans&quot;&gt;Jean-Daniel Cryans&lt;/a&gt; I was able to parse your canadian, yes (LGTM)&lt;/p&gt;</comment>
                            <comment id="13657591" author="jdcryans" created="Tue, 14 May 2013 22:17:34 +0000"  >&lt;p&gt;Looks like TestZookeeper was zombie but I don&apos;t think it&apos;s related to this jira. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; are you +1ing this?&lt;/p&gt;</comment>
                            <comment id="13657606" author="stack" created="Tue, 14 May 2013 22:28:03 +0000"  >&lt;p&gt;I defer to your +1 and Jerry&apos;s testing.  Patch looks good but I did not spend time on it.&lt;/p&gt;</comment>
                            <comment id="13657719" author="jinghe" created="Wed, 15 May 2013 00:02:28 +0000"  >&lt;p&gt;Thanks, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdcryans&quot; class=&quot;user-hover&quot; rel=&quot;jdcryans&quot;&gt;Jean-Daniel Cryans&lt;/a&gt;.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;It&apos;s doing the right thing, if distributed=false then the HMaster and ZooKeeper are in the same JVM so killing one kills the other. If it&apos;s distributed then ZK is in a different JVM which you need to kill.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Ok. Right. A different concept HBASE_MANAGES_ZK was in my mind &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;If yes, then different jira.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;You mean &apos;If no&apos;?&lt;/p&gt;

&lt;p&gt;The listed issue in stop-hbase.sh is not caused by the patch.&lt;/p&gt;
</comment>
                            <comment id="13658618" author="jdcryans" created="Wed, 15 May 2013 18:09:13 +0000"  >&lt;blockquote&gt;&lt;p&gt;You mean &apos;If no&apos;?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Ah sorry, it was a yes to &quot;IIUC those issues aren&apos;t related at all with this patch right?&quot;, my bad.&lt;/p&gt;</comment>
                            <comment id="13658619" author="jdcryans" created="Wed, 15 May 2013 18:09:59 +0000"  >&lt;p&gt;I committed this to 0.95 and trunk. Thanks Jerry!&lt;/p&gt;</comment>
                            <comment id="13658952" author="yuzhihong@gmail.com" created="Wed, 15 May 2013 22:49:11 +0000"  >&lt;p&gt;I wonder if the following test failure in EC2 HBase-TRUNK #286 was related to this patch:&lt;/p&gt;

&lt;p&gt;Tests in error:&lt;br/&gt;
  testMasterShutdownBeforeStartingAnyRegionServer(org.apache.hadoop.hbase.master.TestMasterShutdown): test timed out after 180000 milliseconds&lt;/p&gt;</comment>
                            <comment id="13658955" author="stack" created="Wed, 15 May 2013 22:51:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ted_yu&quot; class=&quot;user-hover&quot; rel=&quot;ted_yu&quot;&gt;Ted Yu&lt;/a&gt; You have any evidence?&lt;/p&gt;</comment>
                            <comment id="13658965" author="hudson" created="Wed, 15 May 2013 22:57:42 +0000"  >&lt;p&gt;Integrated in hbase-0.95 #196 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95/196/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95/196/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8519&quot; title=&quot;Backup master will never come up if primary master dies during initialization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8519&quot;&gt;&lt;del&gt;HBASE-8519&lt;/del&gt;&lt;/a&gt;  Backup master will never come up if primary master dies during initialization&lt;br/&gt;
            (Jerry He via JD) (Revision 1482986)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
jdcryans : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/master/ActiveMasterManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestActiveMasterManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13658971" author="yuzhihong@gmail.com" created="Wed, 15 May 2013 23:00:33 +0000"  >&lt;p&gt;Looking closer, I don&apos;t think Jerry&apos;s patch was related to test failure of testMasterShutdownBeforeStartingAnyRegionServer&lt;/p&gt;</comment>
                            <comment id="13659157" author="hudson" created="Thu, 16 May 2013 02:35:38 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #4122 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4122/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4122/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8519&quot; title=&quot;Backup master will never come up if primary master dies during initialization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8519&quot;&gt;&lt;del&gt;HBASE-8519&lt;/del&gt;&lt;/a&gt;  Backup master will never come up if primary master dies during initialization&lt;br/&gt;
            (Jerry He via JD) (Revision 1482981)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
jdcryans : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/ActiveMasterManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestActiveMasterManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13659237" author="hudson" created="Thu, 16 May 2013 05:19:50 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #532 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/532/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/532/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8519&quot; title=&quot;Backup master will never come up if primary master dies during initialization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8519&quot;&gt;&lt;del&gt;HBASE-8519&lt;/del&gt;&lt;/a&gt;  Backup master will never come up if primary master dies during initialization&lt;br/&gt;
            (Jerry He via JD) (Revision 1482981)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
jdcryans : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/ActiveMasterManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestActiveMasterManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13659271" author="hudson" created="Thu, 16 May 2013 06:13:06 +0000"  >&lt;p&gt;Integrated in hbase-0.95-on-hadoop2 #101 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95-on-hadoop2/101/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95-on-hadoop2/101/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8519&quot; title=&quot;Backup master will never come up if primary master dies during initialization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8519&quot;&gt;&lt;del&gt;HBASE-8519&lt;/del&gt;&lt;/a&gt;  Backup master will never come up if primary master dies during initialization&lt;br/&gt;
            (Jerry He via JD) (Revision 1482986)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
jdcryans : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/master/ActiveMasterManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestActiveMasterManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13903619" author="hudson" created="Tue, 18 Feb 2014 00:15:24 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.94-security #415 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/415/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/415/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10555&quot; title=&quot;Backport HBASE-8519 to 0.94, Backup master will never come up if primary master dies during initialization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10555&quot;&gt;&lt;del&gt;HBASE-10555&lt;/del&gt;&lt;/a&gt; Backport &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8519&quot; title=&quot;Backup master will never come up if primary master dies during initialization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8519&quot;&gt;&lt;del&gt;HBASE-8519&lt;/del&gt;&lt;/a&gt; to 0.94, Backup master will never come up if primary master dies during initialization (Jingcheng Du, original patch by Jerry He) (larsh: rev 1569123)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/ActiveMasterManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/master/TestActiveMasterManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13903646" author="hudson" created="Tue, 18 Feb 2014 00:41:20 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.94-on-Hadoop-2 #26 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-on-Hadoop-2/26/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-on-Hadoop-2/26/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10555&quot; title=&quot;Backport HBASE-8519 to 0.94, Backup master will never come up if primary master dies during initialization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10555&quot;&gt;&lt;del&gt;HBASE-10555&lt;/del&gt;&lt;/a&gt; Backport &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8519&quot; title=&quot;Backup master will never come up if primary master dies during initialization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8519&quot;&gt;&lt;del&gt;HBASE-8519&lt;/del&gt;&lt;/a&gt; to 0.94, Backup master will never come up if primary master dies during initialization (Jingcheng Du, original patch by Jerry He) (larsh: rev 1569123)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/ActiveMasterManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/master/TestActiveMasterManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13903658" author="hudson" created="Tue, 18 Feb 2014 00:51:53 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.94-JDK7 #55 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-JDK7/55/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-JDK7/55/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10555&quot; title=&quot;Backport HBASE-8519 to 0.94, Backup master will never come up if primary master dies during initialization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10555&quot;&gt;&lt;del&gt;HBASE-10555&lt;/del&gt;&lt;/a&gt; Backport &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8519&quot; title=&quot;Backup master will never come up if primary master dies during initialization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8519&quot;&gt;&lt;del&gt;HBASE-8519&lt;/del&gt;&lt;/a&gt; to 0.94, Backup master will never come up if primary master dies during initialization (Jingcheng Du, original patch by Jerry He) (larsh: rev 1569123)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/ActiveMasterManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/master/TestActiveMasterManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13903717" author="hudson" created="Tue, 18 Feb 2014 02:44:35 +0000"  >&lt;p&gt;ABORTED: Integrated in HBase-0.94 #1292 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/1292/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/1292/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10555&quot; title=&quot;Backport HBASE-8519 to 0.94, Backup master will never come up if primary master dies during initialization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10555&quot;&gt;&lt;del&gt;HBASE-10555&lt;/del&gt;&lt;/a&gt; Backport &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8519&quot; title=&quot;Backup master will never come up if primary master dies during initialization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8519&quot;&gt;&lt;del&gt;HBASE-8519&lt;/del&gt;&lt;/a&gt; to 0.94, Backup master will never come up if primary master dies during initialization (Jingcheng Du, original patch by Jerry He) (larsh: rev 1569123)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/ActiveMasterManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/master/TestActiveMasterManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12538595">HBASE-5213</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12583200" name="HBASE-8519-trunk-v2.patch" size="5711" author="jinghe" created="Tue, 14 May 2013 20:21:34 +0000"/>
                            <attachment id="12582995" name="HBASE-8519-trunk.patch" size="1369" author="jinghe" created="Mon, 13 May 2013 20:58:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 9 May 2013 23:32:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>327263</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 43 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1kgs7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>327607</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>