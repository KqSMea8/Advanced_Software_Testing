<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:57:22 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1909/HBASE-1909.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1909] Balancer assigns to most loaded server when assigning a single region</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1909</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;fake on irc found a bug where he truncated his tables and they all ended up getting assigned to the same regionserver.&lt;/p&gt;

&lt;p&gt;4 total nodes, root and meta each ended up on one node, another node had 0 regions, and the final one ended up with all 5 regions of user tables.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12438242">HBASE-1909</key>
            <summary>Balancer assigns to most loaded server when assigning a single region</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="streamy">Jonathan Gray</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Oct 2009 20:21:26 +0000</created>
                <updated>Wed, 1 Sep 2010 05:25:22 +0000</updated>
                            <resolved>Wed, 1 Sep 2010 05:25:22 +0000</resolved>
                                    <version>0.20.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12766219" author="streamy" created="Thu, 15 Oct 2009 20:22:02 +0000"  >&lt;p&gt;I believe this bug was introduced from &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1868&quot; title=&quot;Spew about rebalancing but none done....&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1868&quot;&gt;&lt;del&gt;HBASE-1868&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12766222" author="ilya" created="Thu, 15 Oct 2009 20:23:20 +0000"  >&lt;p&gt;Attaching my log. &lt;/p&gt;</comment>
                            <comment id="12766224" author="streamy" created="Thu, 15 Oct 2009 20:27:06 +0000"  >&lt;p&gt;There is a very misleading comment:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    int nRegionsToAssign = regionsToAssign.size();
    // Now many regions to assign this server.
    int nregions = regionsPerServer(nRegionsToAssign, thisServersLoad);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In reality, what&apos;s returned by regionsPerServer is the number of regions that should be assigned to less-loaded servers (javadoc of that method is right)&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    if (nRegionsToAssign &amp;lt;= nregions) {
      // I do not know whats supposed to happen in this case.  Assign one.
      LOG.debug(&quot;Assigning one region only (playing it safe..)&quot;);
      assignRegions(regionsToAssign, 1, info, returnMsgs);
    } else {
      nRegionsToAssign -= nregions;
      if (nRegionsToAssign &amp;gt; 0 || isMetaAssign) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1868&quot; title=&quot;Spew about rebalancing but none done....&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1868&quot;&gt;&lt;del&gt;HBASE-1868&lt;/del&gt;&lt;/a&gt; made it so if nRegionsToAssign &amp;lt;= nregions, we just assign one.  This was to prevent conditions where we didn&apos;t assign and a region got left in the abyss.&lt;/p&gt;

&lt;p&gt;Need to study what was happening in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1868&quot; title=&quot;Spew about rebalancing but none done....&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1868&quot;&gt;&lt;del&gt;HBASE-1868&lt;/del&gt;&lt;/a&gt;...&lt;/p&gt;</comment>
                            <comment id="12766325" author="stack" created="Thu, 15 Oct 2009 23:46:31 +0000"  >&lt;p&gt;Is this a critical issue?  If you start loading again, does stuff get distributed out ok?&lt;/p&gt;</comment>
                            <comment id="12766327" author="stack" created="Thu, 15 Oct 2009 23:47:25 +0000"  >&lt;p&gt;Pardon me; its not critical issue according to priority but I&apos;m wondering if its an issue that needs fixing in 0.20 or can it wait on 0.21?&lt;/p&gt;</comment>
                            <comment id="12904917" author="streamy" created="Wed, 1 Sep 2010 05:25:22 +0000"  >&lt;p&gt;New LoadBalancer (and accompanied tests) invalidate this issue.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12462821">HBASE-2480</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12422272" name="unbalanced.txt" size="30893" author="ilya" created="Thu, 15 Oct 2009 20:23:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 15 Oct 2009 20:23:20 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26052</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 16 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hfuf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99829</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>