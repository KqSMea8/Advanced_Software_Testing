<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:26:34 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5304/HBASE-5304.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5304] Pluggable split key policy</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5304</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;We need a way to specify custom policies to determine split keys.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12540482">HBASE-5304</key>
            <summary>Pluggable split key policy</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lhofhansl">Lars Hofhansl</assignee>
                                    <reporter username="lhofhansl">Lars Hofhansl</reporter>
                        <labels>
                    </labels>
                <created>Tue, 31 Jan 2012 02:12:04 +0000</created>
                <updated>Fri, 12 Oct 2012 05:35:05 +0000</updated>
                            <resolved>Thu, 2 Feb 2012 23:01:25 +0000</resolved>
                                                    <fixVersion>0.94.0</fixVersion>
                                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                            <comments>
                            <comment id="13196644" author="lhofhansl" created="Tue, 31 Jan 2012 02:12:32 +0000"  >&lt;p&gt;Jesse Yates and I are working pluggable split key policies. Will attach a patch momentarily.&lt;/p&gt;</comment>
                            <comment id="13196646" author="lhofhansl" created="Tue, 31 Jan 2012 02:14:08 +0000"  >&lt;p&gt;Initial sketch (no testing done, yet) that Jesse and I came up with.&lt;/p&gt;</comment>
                            <comment id="13196702" author="lhofhansl" created="Tue, 31 Jan 2012 05:09:42 +0000"  >&lt;p&gt;Might as well make sure that DefaultSplitKeyPolicy did not break anything.&lt;/p&gt;</comment>
                            <comment id="13196712" author="hadoopqa" created="Tue, 31 Jan 2012 05:29:18 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12512513/5304.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12512513/5304.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -136 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 161 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.io.TestHeapSize&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/879//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/879//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/879//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/879//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/879//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/879//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13196745" author="lhofhansl" created="Tue, 31 Jan 2012 06:54:36 +0000"  >&lt;p&gt;TestHeapSize is a legit failure, need to fix FIXED_OVERHEAD in HRegion by a REFERENCE.&lt;br/&gt;
We&apos;ll add specific tests for this tomorrow.&lt;/p&gt;</comment>
                            <comment id="13197465" author="zhihyu@ebaysf.com" created="Wed, 1 Feb 2012 01:07:08 +0000"  >&lt;p&gt;SplitKeyPolicy.java and SplitConfigurationUtil.java are missing license.&lt;/p&gt;

&lt;p&gt;Along with SPLIT_KEY_CONFIG_KEY we&apos;re storing another config in HTableDescription. Is there some measure that we can take to make sure the config isn&apos;t bloated ?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
+        splitKeyPolicy = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DefaultSplitKeyPolicy();
+      }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I think DefaultSplitKeyPolicy should be given the config for SPLIT_KEY_CONFIG_KEY if the config is present in HTableDescriptor.&lt;/p&gt;</comment>
                            <comment id="13197473" author="zhihyu@ebaysf.com" created="Wed, 1 Feb 2012 01:10:42 +0000"  >&lt;p&gt;It would be nice if the new patch is published on review board.&lt;/p&gt;</comment>
                            <comment id="13197522" author="zhihyu@ebaysf.com" created="Wed, 1 Feb 2012 02:40:33 +0000"  >&lt;p&gt;How do we deal with the case where a single region gets too big (according to the first N bytes) ?&lt;/p&gt;

&lt;p&gt;I think we should poll dev@hbase to see how useful this feature is.&lt;/p&gt;</comment>
                            <comment id="13197532" author="lhofhansl" created="Wed, 1 Feb 2012 02:52:07 +0000"  >&lt;p&gt;@Ted&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Region too big... That is why we make this pluggable. If you cannot manage your region size then do not write a pluggable split key policy. This is like a coprocessor calling System.exit(). You need to know what you are doing.&lt;br/&gt;
The whole point of this is to not put any specific split key policy into the trunk, so that trunk does not have to be changed and folks can hood up their own policy.&lt;br/&gt;
Surely you will not argue that nobody will ever want to change the split key policy. We do the same for the existing split policy (what if that leads to too big regions?)&lt;/li&gt;
	&lt;li&gt;Will publish the next version of RB. Good point. I&apos;ll actually remove the PrefixSplitKeyPolicy, which should not be part of the patch. Instead we&apos;ll add documentation of SplitKeyPolicy on how to add a new policy.&lt;/li&gt;
	&lt;li&gt;DefaultSplitKeyPolicy is not configurable. So passing in the config might be confusing.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13197537" author="zhihyu@ebaysf.com" created="Wed, 1 Feb 2012 03:01:26 +0000"  >&lt;p&gt;Since there is a chance that SplitKeyPolicy may decide not to split, I think the following code should be prepared:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      SplitTransaction st = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SplitTransaction(parent, parent
+          .getSplitKeyPolicy().getSplitKey(parent, midKey));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Meaning, we should check whether a SplitTransaction is needed.&lt;/p&gt;</comment>
                            <comment id="13197567" author="lhofhansl" created="Wed, 1 Feb 2012 04:06:28 +0000"  >&lt;p&gt;SplitTransaction just returns when null or a key that does not fall inside the parent region is passed. I guess we could make this more explicit: If SplitKeyPolicy.getSplitKey(...) returns null or an empty byte[], it means we will not split.&lt;br/&gt;
I&apos;ll have a new patch soon.&lt;/p&gt;</comment>
                            <comment id="13197578" author="jiraposter@reviews.apache.org" created="Wed, 1 Feb 2012 04:52:58 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/3717/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3717/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hbase.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;This patch allows for simple pluggable SplitKeyPolicies. A SplitKeyPolicy determines the actual to key to be split on after a SplitRequest was issued.&lt;/p&gt;

&lt;p&gt;A SplitKeyPolicy can optionally be configured via a Configuration object that is serialized (as XML) into anb HTableDescriptor (in analogy to the Constraints feature - some common between the two features is factored out).&lt;/p&gt;

&lt;p&gt;DefaultSplitKeyPolicy implements the current logic (which splits along a store&apos;s midKey as determined by HFileReaderV*).&lt;/p&gt;

&lt;p&gt;No alternate SplitKeyPolicy is provided as part of this patch.&lt;/p&gt;

&lt;p&gt;Some changes to the HBase Shell are included to allow setting arbitrary HTableDescriptor values.&lt;/p&gt;

&lt;p&gt;Jesse Yates and I worked together on the initial version of this patch.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5304&quot; title=&quot;Pluggable split key policy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5304&quot;&gt;&lt;del&gt;HBASE-5304&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5304&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-5304&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  &lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/HConstants.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;/a&gt; 1238830 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/constraint/Constraints.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/constraint/Constraints.java&lt;/a&gt; 1238830 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/DefaultSplitKeyPolicy.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/DefaultSplitKeyPolicy.java&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/a&gt; 1238830 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/SplitKeyPolicy.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/SplitKeyPolicy.java&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/SplitRequest.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/SplitRequest.java&lt;/a&gt; 1238830 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/ConfigurationUtil.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/ConfigurationUtil.java&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/ruby/hbase/admin.rb&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/ruby/hbase/admin.rb&lt;/a&gt; 1238830 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/3717/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3717/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Existing tests. No functional changes are introduced with this.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Lars&lt;/p&gt;
</comment>
                            <comment id="13197632" author="mcorgan" created="Wed, 1 Feb 2012 07:15:09 +0000"  >&lt;p&gt;This would be useful for time series data.  Let&apos;s say you split a region every 2 weeks.  The current split policy would be back in time 1 week ago.  It would be better if it split at the current time and just let the old region go to sleep (maybe it gets a few more inserts from lagging clients).  Or you could get more intricate and split on nice rounded hour or day intervals.&lt;/p&gt;</comment>
                            <comment id="13197642" author="lhofhansl" created="Wed, 1 Feb 2012 07:34:28 +0000"  >&lt;p&gt;@Matt: Do you think what we propose is flexible enough. Another idea we have floated here is to make the run() method of SplitRequest pluggable, or have even deeper &quot;pluggability&quot;. The current proposal is very simple and provided for the use-cases that we could think of.&lt;/p&gt;</comment>
                            <comment id="13197892" author="jiraposter@reviews.apache.org" created="Wed, 1 Feb 2012 15:06:57 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/3717/#review4744&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3717/#review4744&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;Looks pretty good.  I&apos;m not strong of the subtleties of the ruby parts &amp;#8211; I&apos;ll leave that to someone else to review.&lt;/p&gt;

&lt;p&gt;Could we add a test case for the split veto case? (that is new functionality and a new unexercised code path).  &lt;/p&gt;





&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/HConstants.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/3717/#comment10477&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3717/#comment10477&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    nit&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/3717/#comment10473&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3717/#comment10473&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    maybe debug level log saying splitKeyPolicy loaded?&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/SplitKeyPolicy.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/SplitKeyPolicy.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/3717/#comment10474&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3717/#comment10474&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    sp: sat-&amp;gt;say&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/ConfigurationUtil.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/ConfigurationUtil.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/3717/#comment10476&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3717/#comment10476&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    nit&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/ConfigurationUtil.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/ConfigurationUtil.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/3717/#comment10478&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3717/#comment10478&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    I&apos;m assuming this handles binary encoding (CDATA xml stuff?) and escaping?  What happens if we insert a goofy string with &apos;&amp;lt;&apos;, &apos;&amp;gt;&apos; or other xml control chars?&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;jmhsieh&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2012-02-01 04:52:33, Lars Hofhansl wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/3717/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3717/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2012-02-01 04:52:33)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hbase.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This patch allows for simple pluggable SplitKeyPolicies. A SplitKeyPolicy determines the actual to key to be split on after a SplitRequest was issued.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;A SplitKeyPolicy can optionally be configured via a Configuration object that is serialized (as XML) into anb HTableDescriptor (in analogy to the Constraints feature - some common between the two features is factored out).&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;DefaultSplitKeyPolicy implements the current logic (which splits along a store&apos;s midKey as determined by HFileReaderV*).&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;No alternate SplitKeyPolicy is provided as part of this patch.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Some changes to the HBase Shell are included to allow setting arbitrary HTableDescriptor values.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Jesse Yates and I worked together on the initial version of this patch.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5304&quot; title=&quot;Pluggable split key policy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5304&quot;&gt;&lt;del&gt;HBASE-5304&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5304&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-5304&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/HConstants.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;/a&gt; 1238830 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/constraint/Constraints.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/constraint/Constraints.java&lt;/a&gt; 1238830 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/DefaultSplitKeyPolicy.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/DefaultSplitKeyPolicy.java&lt;/a&gt; PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/a&gt; 1238830 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/SplitKeyPolicy.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/SplitKeyPolicy.java&lt;/a&gt; PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/SplitRequest.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/SplitRequest.java&lt;/a&gt; 1238830 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/ConfigurationUtil.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/ConfigurationUtil.java&lt;/a&gt; PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/ruby/hbase/admin.rb&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/ruby/hbase/admin.rb&lt;/a&gt; 1238830 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/3717/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3717/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Existing tests. No functional changes are introduced with this.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Lars&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13197954" author="jiraposter@reviews.apache.org" created="Wed, 1 Feb 2012 17:02:58 +0000"  >

&lt;blockquote&gt;&lt;p&gt;On 2012-02-01 15:06:48, jmhsieh wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; Looks pretty good.  I&apos;m not strong of the subtleties of the ruby parts &amp;#8211; I&apos;ll leave that to someone else to review.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; Could we add a test case for the split veto case? (that is new functionality and a new unexercised code path).  &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The ruby part does two things:&lt;br/&gt;
1. Allow arbitrary HTableDescriptor values to be set (strange that nobody needed that, yet).&lt;br/&gt;
2. If the value to be set is actually a configuration it is automatically serialized (as XML).&lt;/p&gt;

&lt;p&gt;Neither of them are stricly needed for this, but make it possible to set/configure a SplitKeyPolicy via the shell.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2012-02-01 15:06:48, jmhsieh wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/a&gt;, line 503&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/3717/diff/2/?file=71604#file71604line503&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3717/diff/2/?file=71604#file71604line503&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     maybe debug level log saying splitKeyPolicy loaded?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Ah yes, forgot that. Will add.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2012-02-01 15:06:48, jmhsieh wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/ConfigurationUtil.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/ConfigurationUtil.java&lt;/a&gt;, line 76&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/3717/diff/2/?file=71607#file71607line76&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3717/diff/2/?file=71607#file71607line76&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     I&apos;m assuming this handles binary encoding (CDATA xml stuff?) and escaping?  What happens if we insert a goofy string with &apos;&amp;lt;&apos;, &apos;&amp;gt;&apos; or other xml control chars?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yep.&lt;/p&gt;

&lt;p&gt;I think I am going to backpaddle on prescribing that SplitKeyPolicies need to be configured via a Configuration. It should be up to the implementor of a SplitKeyPolicy how it is configured.&lt;/p&gt;

&lt;p&gt;This utility class is still useful, so I&apos;ll leave them in, and show in an example how one could them.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Lars&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/3717/#review4744&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3717/#review4744&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;On 2012-02-01 04:52:33, Lars Hofhansl wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/3717/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3717/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2012-02-01 04:52:33)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hbase.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This patch allows for simple pluggable SplitKeyPolicies. A SplitKeyPolicy determines the actual to key to be split on after a SplitRequest was issued.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;A SplitKeyPolicy can optionally be configured via a Configuration object that is serialized (as XML) into anb HTableDescriptor (in analogy to the Constraints feature - some common between the two features is factored out).&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;DefaultSplitKeyPolicy implements the current logic (which splits along a store&apos;s midKey as determined by HFileReaderV*).&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;No alternate SplitKeyPolicy is provided as part of this patch.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Some changes to the HBase Shell are included to allow setting arbitrary HTableDescriptor values.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Jesse Yates and I worked together on the initial version of this patch.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5304&quot; title=&quot;Pluggable split key policy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5304&quot;&gt;&lt;del&gt;HBASE-5304&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5304&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-5304&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/HConstants.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;/a&gt; 1238830 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/constraint/Constraints.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/constraint/Constraints.java&lt;/a&gt; 1238830 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/DefaultSplitKeyPolicy.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/DefaultSplitKeyPolicy.java&lt;/a&gt; PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/a&gt; 1238830 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/SplitKeyPolicy.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/SplitKeyPolicy.java&lt;/a&gt; PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/SplitRequest.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/SplitRequest.java&lt;/a&gt; 1238830 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/ConfigurationUtil.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/ConfigurationUtil.java&lt;/a&gt; PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hbase/trunk/src/main/ruby/hbase/admin.rb&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hbase/trunk/src/main/ruby/hbase/admin.rb&lt;/a&gt; 1238830 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/3717/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3717/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Existing tests. No functional changes are introduced with this.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Lars&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13198012" author="lhofhansl" created="Wed, 1 Feb 2012 18:06:18 +0000"  >&lt;p&gt;In the end it might be cleaner to unify this with RegionSplitPolicy, rather than having two mechanisms to define part of the split policy.&lt;/p&gt;</comment>
                            <comment id="13198111" author="lhofhansl" created="Wed, 1 Feb 2012 20:16:43 +0000"  >&lt;p&gt;Here&apos;s an entirely different patch that used RegionSplitPolicy instead.&lt;br/&gt;
(Seems RegionSplitPolicy needs to be documented more prominently).&lt;/p&gt;

&lt;p&gt;Consider the original patch abandoned.&lt;/p&gt;

&lt;p&gt;Only two changes:&lt;br/&gt;
1. Allow classes outside of org.apache.hadoop.hbase.regionserver to extend RegionSplitPolicy or ConstantSizeRegionSplitPolicy&lt;br/&gt;
2. Deal correctly with forced splits.&lt;/p&gt;

&lt;p&gt;Please have a look. Thanks.&lt;/p&gt;</comment>
                            <comment id="13198191" author="hadoopqa" created="Wed, 1 Feb 2012 21:55:33 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12512795/5304-v4.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12512795/5304-v4.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -136 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 156 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.replication.TestReplicationPeer&lt;br/&gt;
                  org.apache.hadoop.hbase.coprocessor.TestMasterObserver&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat&lt;br/&gt;
                  org.apache.hadoop.hbase.mapred.TestTableMapReduce&lt;br/&gt;
                  org.apache.hadoop.hbase.io.hfile.TestHFileBlock&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestImportTsv&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/889//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/889//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/889//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/889//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/889//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/889//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13198288" author="tlipcon" created="Wed, 1 Feb 2012 22:53:39 +0000"  >&lt;p&gt;I&apos;m a little skeptical of combining this with RegionSplitPolicy &amp;#8211; but perhaps that class needs a better name. In my mind, the decision of &quot;when should we split?&quot; is orthogonal to &quot;what key should we split at&quot;. Of course there is some interaction between the two - eg if the split policy says we should split, but the region has only one row, we can&apos;t actually do so... but for the common case they seem to be separate decisions.&lt;/p&gt;

&lt;p&gt;For example, there&apos;s a proposal (which I never got around to implementing) of a split policy which would make small regions &quot;early on&quot; as a table&apos;s created, and then once a table has many regions, start to up the region size automatically. That should work whether you do the current mid-point splits or you do a custom split policy that avoids &quot;entity groups&quot;.&lt;/p&gt;</comment>
                            <comment id="13198348" author="lhofhansl" created="Thu, 2 Feb 2012 00:04:24 +0000"  >&lt;p&gt;I don&apos;t have much of a preference one way or the other.&lt;/p&gt;

&lt;p&gt;Just that we have need for controlling &quot;what key should we split at&quot; to be able to co-locate certain parts of the data that belong to the same tenant...&lt;/p&gt;

&lt;p&gt;Note that RegionSplitPolicy already determines the split point, that part was not just not extensible and did not work correctly for forced-splits.&lt;br/&gt;
This is a small change to make the existing functionality more useful.&lt;/p&gt;

&lt;p&gt;Not opposed separating the two. In a different jira?&lt;/p&gt;</comment>
                            <comment id="13198359" author="lhofhansl" created="Thu, 2 Feb 2012 00:18:35 +0000"  >&lt;p&gt;And of course deciding what key we split on, would also allow us to do some changes atomically across multiple rows (also something we are going to need soon)&lt;/p&gt;</comment>
                            <comment id="13198378" author="lhofhansl" created="Thu, 2 Feb 2012 00:37:00 +0000"  >&lt;p&gt;All the failed tests in the run pass locally, it&apos;s a small patch, scratches an itch that we need to scratch, so from my side this is good to go.&lt;/p&gt;

&lt;p&gt;@Todd: Are you opposed to the change?&lt;br/&gt;
@Ted: Any comments?&lt;br/&gt;
@Jesse: Any comments?&lt;/p&gt;</comment>
                            <comment id="13198409" author="tlipcon" created="Thu, 2 Feb 2012 00:51:16 +0000"  >&lt;p&gt;Oh, I see... indeed you&apos;re right. Nope, no objection (though I did not review the code, only the discussion here)&lt;/p&gt;</comment>
                            <comment id="13198419" author="jesse_yates" created="Thu, 2 Feb 2012 00:59:35 +0000"  >&lt;p&gt;@Lars:&lt;/p&gt;

&lt;p&gt;I was thinking you could make PrefixSplitKeyPolicy its own full class in the test package. This would help make it more obvious to people that it is around. Also, some docs on it&apos;s usage would be awesome.&lt;/p&gt;

&lt;p&gt;I&apos;m also worried that the test for the split policy needs to be run on a minicluster to ensure that we &quot;do the right thing&quot; for messed up splits. This goes into Ted&apos;s point of about what if we put in a bad policy. My first inclination on that was that we fall back on the default split policy and push and angry message (possibly tying that into the log), rather than just bailing (taking a preference here for uptime)&lt;/p&gt;

&lt;p&gt;Excuse the ignorance here, nbut since the policy is loaded just based on the configuration of the RS, is there a way to make it just table based? Or will it be global across the cluster? If the former, then I think a little more work needs to be put into make that work. Also, shell support?&lt;/p&gt;</comment>
                            <comment id="13198427" author="lhofhansl" created="Thu, 2 Feb 2012 01:16:33 +0000"  >&lt;p&gt;@Jesse: Thanks for the comments.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Good point on making PrefixSplitKeyPolicy it&apos;s own class. I&apos;ll do that. Need to make it a bit nicer then. Or I can add a section to the HBase book (reference guide) with PrefixSplitKeyPolicy as an example.&lt;/li&gt;
	&lt;li&gt;The splitKey is always validated against the region before the actual split. If it is not valid you get an error message (see HRegion.checkSplit and SplitTransaction.prepare) and the split is not performed. Falling back to the default instead might invalidate other assumptions that the application code had based on the provided SplitPolicy. Generally I see this as a server extension. If you wanted to call System.exit() from the code you can, and it&apos;ll kill your server on every split &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/li&gt;
	&lt;li&gt;RegionSplitPolicy is already optionally loaded per table as well as per configuration (see RegionSplitPolicy.getSplitPolicyClass)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I think shell support would be for generally for setting HTableDescriptor values. I have some ideas, but some refactoring would be needed to get it right, I&apos;d rather do that in another jira.&lt;/p&gt;</comment>
                            <comment id="13198433" author="jesse_yates" created="Thu, 2 Feb 2012 01:26:52 +0000"  >&lt;blockquote&gt;&lt;p&gt;I can add a section to the HBase book (reference guide) with PrefixSplitKeyPolicy as an example&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Can you do both? This would be a good start to that Tips and Tricks section that has been mentioned recently.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;The splitKey is always validated against the region before the actual split. If it is not valid you get an error message (see HRegion.checkSplit and SplitTransaction.prepare) and the split is not performed. Falling back to the default instead might invalidate other assumptions that the application code had based on the provided SplitPolicy. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Good call. +1 on that and everything else.&lt;/p&gt;</comment>
                            <comment id="13198452" author="lhofhansl" created="Thu, 2 Feb 2012 01:48:35 +0000"  >&lt;p&gt;Addressing Jesse&apos;s comments.&lt;/p&gt;</comment>
                            <comment id="13198457" author="jesse_yates" created="Thu, 2 Feb 2012 01:57:43 +0000"  >&lt;p&gt;I don&apos;t think the program listing for the prefixSplitKeyPolicy should be copied into the docs, but instead just use a link to the javadocs for the the class and then just include the bit about setting the values on the HTD.&lt;/p&gt;

&lt;p&gt;Also, I not loving the camel casing or the underscore in &quot;PREFIX_LENGTH_KEY = &quot;PrefixSplitKeyPolicy.prefix_length&quot;, but I can live with it.&lt;/p&gt;

&lt;p&gt;otherwise, +1.&lt;/p&gt;</comment>
                            <comment id="13198463" author="lhofhansl" created="Thu, 2 Feb 2012 02:03:57 +0000"  >&lt;p&gt;The test classes are not part of the public API, so I cannot link to it. And I do not want to place PrefixSplitKeyPolicy outside the test directory becuase then it becomes an official part of HBase.&lt;/p&gt;

&lt;p&gt;Agree on the camel stuff.&lt;/p&gt;</comment>
                            <comment id="13198469" author="lhofhansl" created="Thu, 2 Feb 2012 02:12:25 +0000"  >&lt;p&gt;Removed the verbatim copy and just linked to RegionSplitPolicy and CostantSizeRegionSplitPolicy... That&apos;s better anyway.&lt;/p&gt;</comment>
                            <comment id="13198504" author="hadoopqa" created="Thu, 2 Feb 2012 03:22:29 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12512899/5304-v6.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12512899/5304-v6.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -136 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 156 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat&lt;br/&gt;
                  org.apache.hadoop.hbase.mapred.TestTableMapReduce&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestInstantSchemaChangeSplit&lt;br/&gt;
                  org.apache.hadoop.hbase.io.hfile.TestHFileBlock&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestImportTsv&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/892//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/892//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/892//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/892//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/892//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/892//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13199018" author="jesse_yates" created="Thu, 2 Feb 2012 17:37:04 +0000"  >&lt;p&gt;+1 ship it.&lt;/p&gt;</comment>
                            <comment id="13199046" author="zhihyu@ebaysf.com" created="Thu, 2 Feb 2012 18:13:50 +0000"  >&lt;p&gt;Wait, TestInstantSchemaChangeSplit was a new test failure.&lt;/p&gt;</comment>
                            <comment id="13199070" author="lhofhansl" created="Thu, 2 Feb 2012 18:41:19 +0000"  >&lt;p&gt;I noticed... Will check it out of course.&lt;/p&gt;</comment>
                            <comment id="13199088" author="lhofhansl" created="Thu, 2 Feb 2012 18:54:22 +0000"  >&lt;p&gt;TestInstantSchemaChangeSplit passes locally. Not sure what is going on with precommit and why we see all these spurious failures.&lt;/p&gt;</comment>
                            <comment id="13199094" author="jesse_yates" created="Thu, 2 Feb 2012 18:59:08 +0000"  >&lt;p&gt;A lot of it can be if jenkins is sketchy. Can we rerun it on jenkins to see if we get the failures again?&lt;/p&gt;</comment>
                            <comment id="13199100" author="zhihyu@ebaysf.com" created="Thu, 2 Feb 2012 19:04:31 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.region.getExplicitSplitPoint() != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
+      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.region.getExplicitSplitPoint();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Can we store the return value from region.getExplicitSplitPoint() in the above case ?&lt;/p&gt;</comment>
                            <comment id="13199109" author="zhihyu@ebaysf.com" created="Thu, 2 Feb 2012 19:11:46 +0000"  >&lt;p&gt;Table creation may take some time.&lt;br/&gt;
The test failure was caused by findRSWithOnlineRegionFor() not retrying.&lt;/p&gt;</comment>
                            <comment id="13199148" author="lhofhansl" created="Thu, 2 Feb 2012 19:48:57 +0000"  >&lt;p&gt;@Ted: re: storing the value... Sure. I&apos;ll do that at commit, unless you have other objections.&lt;br/&gt;
I&apos;ll reattach the same file to another jenkins build.&lt;/p&gt;</comment>
                            <comment id="13199151" author="lhofhansl" created="Thu, 2 Feb 2012 19:52:24 +0000"  >&lt;p&gt;Getting another test run.&lt;br/&gt;
I also ran TestInstantSchemaChangeSplit in a loop for a bit.&lt;/p&gt;</comment>
                            <comment id="13199197" author="hadoopqa" created="Thu, 2 Feb 2012 20:41:42 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12513024/5304-v7.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12513024/5304-v7.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -136 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 156 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.io.hfile.TestHFileBlock&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestAdmin&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/896//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/896//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/896//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/896//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/896//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/896//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13199280" author="lhofhansl" created="Thu, 2 Feb 2012 22:13:29 +0000"  >&lt;p&gt;Ran test admin locally... passes fine. Do I get a +1 Ted? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13199284" author="zhihyu@ebaysf.com" created="Thu, 2 Feb 2012 22:21:05 +0000"  >&lt;p&gt;Good to go.&lt;/p&gt;</comment>
                            <comment id="13199332" author="lhofhansl" created="Thu, 2 Feb 2012 23:01:25 +0000"  >&lt;p&gt;Committed to trunk.&lt;br/&gt;
Thanks for the reviews Jesse and Ted.&lt;/p&gt;</comment>
                            <comment id="13199537" author="hudson" created="Fri, 3 Feb 2012 05:46:08 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-security #96 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-security/96/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-security/96/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5304&quot; title=&quot;Pluggable split key policy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5304&quot;&gt;&lt;del&gt;HBASE-5304&lt;/del&gt;&lt;/a&gt; Pluggable split key policy&lt;/p&gt;

&lt;p&gt;larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/docbkx/book.xml&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/HTableDescriptor.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/ConstantSizeRegionSplitPolicy.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/RegionSplitPolicy.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/regionserver/PrefixSplitKeyPolicy.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionSplitPolicy.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13199999" author="hudson" created="Fri, 3 Feb 2012 20:01:08 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2653 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2653/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2653/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5304&quot; title=&quot;Pluggable split key policy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5304&quot;&gt;&lt;del&gt;HBASE-5304&lt;/del&gt;&lt;/a&gt; Pluggable split key policy&lt;/p&gt;

&lt;p&gt;larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/docbkx/book.xml&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/HTableDescriptor.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/ConstantSizeRegionSplitPolicy.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/RegionSplitPolicy.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/regionserver/PrefixSplitKeyPolicy.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionSplitPolicy.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12512795" name="5304-v4.txt" size="6714" author="lhofhansl" created="Wed, 1 Feb 2012 20:40:25 +0000"/>
                            <attachment id="12512897" name="5304-v5.txt" size="10889" author="lhofhansl" created="Thu, 2 Feb 2012 01:48:35 +0000"/>
                            <attachment id="12512899" name="5304-v6.txt" size="9868" author="lhofhansl" created="Thu, 2 Feb 2012 02:12:25 +0000"/>
                            <attachment id="12513024" name="5304-v7.txt" size="9904" author="lhofhansl" created="Thu, 2 Feb 2012 19:51:51 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12542021">HBASE-5368</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 31 Jan 2012 05:29:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>225895</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 45 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08qun:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48950</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>