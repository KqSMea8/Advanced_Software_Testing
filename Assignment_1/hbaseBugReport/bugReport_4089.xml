<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:15:49 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-4089/HBASE-4089.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-4089] blockCache contents report</title>
                <link>https://issues.apache.org/jira/browse/HBASE-4089</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Summarized block-cache report for a RegionServer would be helpful.  For example ...&lt;/p&gt;

&lt;p&gt;table1&lt;br/&gt;
  cf1   100 blocks, totalBytes=yyyyy, averageTimeInCache=XXXX hours&lt;br/&gt;
  cf2   200 blocks, totalBytes=zzzzz, averageTimeInCache=XXXX hours&lt;/p&gt;

&lt;p&gt;table2&lt;br/&gt;
  cf1  75 blocks, totalBytes=yyyyy, averageTimeInCache=XXXX hours&lt;br/&gt;
  cf2 150 blocks, totalBytes=zzzzz, averageTimeInCache=XXXX hours&lt;/p&gt;

&lt;p&gt;... Etc.&lt;/p&gt;

&lt;p&gt;The current metrics list blockCacheSize and blockCacheFree, but there is no way to know what&apos;s in there.  Any single block isn&apos;t really important, but the patterns of what CF/Table they came from, how big are they, and how long (on average) they&apos;ve been in the cache, are important.&lt;/p&gt;

&lt;p&gt;No such interface exists in HRegionInterface.  But I think it would be helpful from an operational perspective.&lt;/p&gt;

&lt;p&gt;Updated (7-29):  Removing suggestion for UI.  I would be happy just to get this report on a configured interval dumped to a log file.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12513845">HBASE-4089</key>
            <summary>blockCache contents report</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stack">stack</assignee>
                                    <reporter username="dmeil">Doug Meil</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Jul 2011 20:47:26 +0000</created>
                <updated>Sat, 21 Feb 2015 23:33:33 +0000</updated>
                            <resolved>Mon, 9 Jun 2014 23:49:19 +0000</resolved>
                                                    <fixVersion>0.99.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>12</watches>
                                                                                                            <comments>
                            <comment id="13072809" author="dmeil" created="Fri, 29 Jul 2011 13:29:40 +0000"  >&lt;p&gt;Regarding dumping the summary report to the log, I think exposing a public &apos;printSummary&apos; (logSummary?) method on LruBlockCache would do it.  Another thread can take care of the scheduling on how often the block cache summary should be run.&lt;/p&gt;
</comment>
                            <comment id="13072812" author="dmeil" created="Fri, 29 Jul 2011 13:32:23 +0000"  >&lt;p&gt;If this approach is acceptable, probably should add this to the BlockCache interface.  This is how the block cache is accessed.&lt;/p&gt;</comment>
                            <comment id="13073562" author="dmeil" created="Mon, 1 Aug 2011 14:55:59 +0000"  >&lt;p&gt;Adding writeup of use-cases and 1st-pass general design.&lt;/p&gt;</comment>
                            <comment id="13073635" author="jdcryans" created="Mon, 1 Aug 2011 18:03:48 +0000"  >&lt;p&gt;Nice document Doug, it puts everyone else to shame &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I don&apos;t think we can expose those metrics through JMX/Ganglia/OpenTSDB as they will be changing a lot. It would be &quot;doable&quot; only if the regions and families never changed IMO. I&apos;d prefer we concentrate on presenting this information from inside HBase.&lt;/p&gt;

&lt;p&gt;In the nice to haves I&apos;d like to see:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Number of accesses/misses per block or family (could see what&apos;s hot, well cached, etc)&lt;/li&gt;
	&lt;li&gt;Total size of the family on disk (then you can tell what portion of the dataset you cached)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Regarding the Writable question, you have to do that because it&apos;s required by Hadoop RPC. Since you are adding new infos, you&apos;ll have to implement it. Don&apos;t forget the default constructor! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;For the web UI, what about making the region name clickable?&lt;/p&gt;
</comment>
                            <comment id="13073638" author="dmeil" created="Mon, 1 Aug 2011 18:12:44 +0000"  >&lt;p&gt;Thanks JD.  I included the JMX/Ganglia/et al. because it came up as suggestions in the dist-list, but I really didn&apos;t see how it would fit with this type of usage reporting.  I&apos;m glad you came to the same conclusion!&lt;/p&gt;</comment>
                            <comment id="13076004" author="apurtell" created="Tue, 2 Aug 2011 02:22:53 +0000"  >&lt;blockquote&gt;&lt;p&gt;Does that mean that BlockCacheSummary returned from BlockCache should implement writable, or is there another class that represents the BlockCacheSummary that implements Writable that has the same information&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Objects sent over RPC implement Writable directly, so by that convention BlockCacheSummary should implement Writable.&lt;/p&gt;</comment>
                            <comment id="13079349" author="dmeil" created="Thu, 4 Aug 2011 12:20:39 +0000"  >&lt;p&gt;Ok, how about this for the next course of action: &lt;/p&gt;

&lt;p&gt;Subtask #1:  implement basic summary in BlockCache/LruBlockCache, RS-API change, web-UI.&lt;/p&gt;

&lt;p&gt;Subtask #2:  this is the &quot;output to X&quot; part of the ticket.&lt;/p&gt;

&lt;p&gt;I&apos;ll start with #1, hold off on #2 for now.&lt;/p&gt;

&lt;p&gt;Does that sound reasonable?&lt;/p&gt;</comment>
                            <comment id="13079523" author="jdcryans" created="Thu, 4 Aug 2011 18:40:43 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13080509" author="dmeil" created="Sun, 7 Aug 2011 01:36:58 +0000"  >&lt;p&gt;Hmmm..    started implementation and have been running other unit tests and getting more information on blockNames in the cache, and here&apos;s what they look like now:  &quot;8351478435190657655_0&quot;.  That looks a lot more like a &quot;block&quot; than what I had documented in the writeup, but unfortunately I have nothing else to go on.  Based on what I see, I need to do a reverse lookup in the catalog for the containing StoreFile (to hopefully get full-path, where I can get table/CF).&lt;/p&gt;

&lt;p&gt;Anybody know any easy way to do that?  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13081815" author="stack" created="Tue, 9 Aug 2011 18:24:55 +0000"  >&lt;p&gt;Tell us more about this reverse lookup.... whats that going to look like?  Are you sure what you are seeing is not a filename plus an offset?&lt;/p&gt;</comment>
                            <comment id="13082387" author="dmeil" created="Wed, 10 Aug 2011 15:12:05 +0000"  >&lt;p&gt;Let me back up a bit on this...   what is the contract on the &apos;name&apos; attribute in CachedBlock (the value class of the internal block cache map)?  What is that supposed to be? &lt;/p&gt;</comment>
                            <comment id="13082640" author="stack" created="Wed, 10 Aug 2011 20:10:29 +0000"  >&lt;p&gt;I&apos;d say the name just has to be guaranteed unique... short would be nice too.&lt;/p&gt;

&lt;p&gt;Currently name is made in here for both v1 and v2 hfiles:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getBlockCacheKey(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; hfileName, &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; offset) {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; hfileName + CACHE_KEY_SEPARATOR + offset;
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The hfilename seems to depend on the fact storefile names are unique across hbase. They are made here using the &apos;name&apos; part of the full storefile Path (from the AbstractHFileReader constructor):&lt;/p&gt;

&lt;p&gt;    this.name = path.getName();&lt;/p&gt;
</comment>
                            <comment id="13083145" author="dmeil" created="Thu, 11 Aug 2011 14:58:42 +0000"  >&lt;p&gt;Ahhh.. ok, I get it.  This... &quot;8351478435190657655_0&quot; ... makes sense now.  &lt;/p&gt;

&lt;p&gt;Since the first part is a StoreFile, I can use directory paths to figure out which CF, which region, and which table this StoreFile belongs to because the directory structure is /table/region/cf/storefile.  I&apos;ll basically construct a Map where the key is the hfileName (aka StoreFile) and the value is an object that contains table/cf (since that is the level that the report needs to roll up to).&lt;/p&gt;

&lt;p&gt;I&apos;m currently not aware of any utility that has this kind of lookup, but I think I now understand how to build it.&lt;/p&gt;</comment>
                            <comment id="13083670" author="dmeil" created="Thu, 11 Aug 2011 21:45:34 +0000"  >&lt;p&gt;Hey JD/Stack, can you guys sniff this patch?  This is only a checkpoint - not the final product - but it actually works (I have a hacked up unit test that isn&apos;t in this patch).  What I hope to be the hard-part hopefully (i.e., the summarization) is done, now it needs to be added to the RS API.&lt;/p&gt;
</comment>
                            <comment id="13083671" author="mingma" created="Thu, 11 Aug 2011 21:45:48 +0000"  >&lt;p&gt;useful doc, Doug.&lt;/p&gt;

&lt;p&gt;It seems like this one, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4147&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-4147&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4145&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-4145&lt;/a&gt; need some common infrastructure to log and analyze structured data.&lt;/p&gt;

&lt;p&gt;1. RS Web UI is useful. But that only provides the most recent value.&lt;/p&gt;

&lt;p&gt;2. As you mentioned in the doc, we can create a static metric for each combination of table and CF. That could end up with lots of metrics. Might not be ideal.&lt;/p&gt;

&lt;p&gt;3. How we plan to analyze the data is an important factor for the design.&lt;br/&gt;
   a. Is there a latency requirement? In a production system, it is better to get these reports sooner than later.&lt;br/&gt;
   b. Is it easy to do query and analysis on the data?, e.g., aggregate, max, etc.&lt;/p&gt;

&lt;p&gt;4. Some ideas along the line of custom output&lt;br/&gt;
   a. Can the log data be asynchronously uploaded to a special table in hbase? It might be a bit strange to upload data back to hbase. However, for performance, we can partition the special table into regions so that each region is colocated on the same RS where the log is generated; no automatic compaction, split, load balancing on the table.&lt;br/&gt;
   b. Upload the log to HDFS periodically. Run map reduce jobs to mine the data with a customized inputformat. This might be ok if there is no strong latency requirement.&lt;/p&gt;</comment>
                            <comment id="13083689" author="dmeil" created="Thu, 11 Aug 2011 21:53:49 +0000"  >&lt;p&gt;Yep, I logged &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4147&quot; title=&quot;StoreFile query usage report&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4147&quot;&gt;HBASE-4147&lt;/a&gt; and did that writeup too.  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;    Summarizing and periodically outputting data is a theme.  I think that writing these summaries back into an hbase table is a good idea.  I personally don&apos;t think this kind of data fits well into what are currently called &apos;metrics&apos; which is much higher level.&lt;/p&gt;
</comment>
                            <comment id="13084290" author="jdcryans" created="Fri, 12 Aug 2011 18:20:38 +0000"  >&lt;p&gt;Some comments on the patch:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Writables need a default constructor! See my 01/Aug/11 18:03 comment &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/li&gt;
	&lt;li&gt;About the style, I&apos;d prefer you don&apos;t put extra white spaces like in this snippet:
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
arg0.writeUTF( table );
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;Also pay attention to those lines &amp;gt; 80 chars.&lt;/li&gt;
	&lt;li&gt;Shouldn&apos;t the pattern in getBlockCacheSummary be a member of the class instead? (and still final)&lt;/li&gt;
	&lt;li&gt;Try to set the size of containers when you already know it, like at the end of getBlockCacheSummary&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13084347" author="dmeil" created="Fri, 12 Aug 2011 20:14:49 +0000"  >&lt;p&gt;Thanks!  I&apos;ll make the changes.&lt;/p&gt;

&lt;p&gt;re:  &quot;default constructor&quot;&lt;br/&gt;
Yep, you said that already.  Doh!  Although in my doh-fense I hadn&apos;t gotten to the RS-API yet.  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;re:  &quot;Shouldn&apos;t the pattern in getBlockCacheSummary be a member of the class instead? (and still final)&quot;&lt;br/&gt;
I&apos;m not sure I know what you mean... &lt;/p&gt;</comment>
                            <comment id="13084377" author="jdcryans" created="Fri, 12 Aug 2011 21:02:40 +0000"  >&lt;p&gt;Move this out of the method:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; pattern = &lt;span class=&quot;code-quote&quot;&gt;&quot;\\&quot;&lt;/span&gt; + HFile.CACHE_KEY_SEPARATOR;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13084381" author="dmeil" created="Fri, 12 Aug 2011 21:10:39 +0000"  >&lt;p&gt;Sure thing.  I didn&apos;t want it in the loop obviously, but it didn&apos;t seem like it was important enough to be permanently in memory in the block cache (although it&apos;s pretty small).&lt;/p&gt;</comment>
                            <comment id="13443538" author="lhofhansl" created="Tue, 28 Aug 2012 21:09:55 +0000"  >&lt;p&gt;Doug, are you planning on finishing this?&lt;/p&gt;</comment>
                            <comment id="13444241" author="dmeil" created="Wed, 29 Aug 2012 17:45:37 +0000"  >&lt;p&gt;The sub-task &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4200&quot; title=&quot;blockCache summary - web UI&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4200&quot;&gt;&lt;del&gt;HBASE-4200&lt;/del&gt;&lt;/a&gt; was closed as a dup, what was the ticket that implemented that UI?&lt;/p&gt;</comment>
                            <comment id="13444243" author="dmeil" created="Wed, 29 Aug 2012 17:46:07 +0000"  >&lt;p&gt;Realistically, I don&apos;t think I can do the front-end work.&lt;/p&gt;</comment>
                            <comment id="13444285" author="lhofhansl" created="Wed, 29 Aug 2012 18:15:57 +0000"  >&lt;p&gt;Maybe I closed the sub task in error. Looking at the Web UI, I can see block cache statistics. But this is different. Should I reopen?&lt;/p&gt;</comment>
                            <comment id="13444421" author="dmeil" created="Wed, 29 Aug 2012 21:09:19 +0000"  >&lt;p&gt;Unless somebody already did the UI showing the details of the block cache report (by table, etc.) then it&apos;s not done.&lt;/p&gt;</comment>
                            <comment id="14007746" author="stack" created="Fri, 23 May 2014 21:39:54 +0000"  >&lt;p&gt;Let me take this over.  The committed backend code, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4199&quot; title=&quot;blockCache summary - backend&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4199&quot;&gt;&lt;del&gt;HBASE-4199&lt;/del&gt;&lt;/a&gt;, was never used.  Let me pull it around and have it show in UI (Will hijack &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4200&quot; title=&quot;blockCache summary - web UI&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4200&quot;&gt;&lt;del&gt;HBASE-4200&lt;/del&gt;&lt;/a&gt; too).  Let me make it work for bucketcache and lrublockcache at least doing something like the comment over in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4027?focusedCommentId=13068544&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13068544&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-4027?focusedCommentId=13068544&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13068544&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14007751" author="stack" created="Fri, 23 May 2014 21:45:07 +0000"  >&lt;p&gt;Can dump out a blockcache page that lists the BlockCaches involved.  For the lrublockcache can dump out the metrics and a summary listing size, and histogram of block ages&lt;/p&gt;

&lt;p&gt;2014-05-23 14:40:10,399 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; hfile.TestBlockCacheSummary(66): hitCount=0, hitCachingCount=0, missCount=0,  missCachingCount=0, evictionCount=0, evictedBlockCount=0&lt;br/&gt;
2014-05-23 14:40:10,414 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; hfile.TestBlockCacheSummary(68): LruBlockCache Summary count=100, size=32800, mean age=1.24991E7, stddev age=3681288.5576173523, min age=1.1762E7, max age=4.8877E7, 95th percentile age=1.251815E7, 99th percentile age=4.8513689999999814E7&lt;/p&gt;

&lt;p&gt;Would follow the above with a list of files involved and per file a summary:&lt;/p&gt;

&lt;p&gt;2014-05-23 14:40:10,429 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; hfile.TestBlockCacheSummary(85): file=f, blockCount=100, blockCountData=100, size=32800&lt;/p&gt;

&lt;p&gt;Maybe the file summary is clickable and then you get listing of all blocks with offset into the file, size of block, age in nanos, and type:&lt;/p&gt;

&lt;p&gt;2014-05-23 14:40:10,428 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; hfile.TestBlockCacheSummary(80): offset=93, size=328, ageInNanos=11806000, priority=SINGLE, blockType=DATA&lt;/p&gt;

&lt;p&gt;You might in this screen get the full filename so you can find table and column family.&lt;/p&gt;

&lt;p&gt;Above is doable for the lrublockcache.&lt;/p&gt;

&lt;p&gt;For BucketCache, there is less info available.  In this case we&apos;d dump out a summary followed by stats per bucket from the bucketallocator.&lt;/p&gt;
</comment>
                            <comment id="14007752" author="apurtell" created="Fri, 23 May 2014 21:46:16 +0000"  >&lt;p&gt;+1, that would be a nice improvement&lt;/p&gt;</comment>
                            <comment id="14011849" author="stack" created="Wed, 28 May 2014 23:58:16 +0000"  >&lt;p&gt;wip&lt;/p&gt;

&lt;p&gt;Make BlockCaches Iterable.&lt;/p&gt;

&lt;p&gt;Make it so can ask BlockCache if it has sub BlockCaches.&lt;/p&gt;

&lt;p&gt;Add tools that can do sums, report block types, and age histograms when passed block cache Iterators.  Currently we report by file.&lt;/p&gt;

&lt;p&gt;Removed the unused BlockCacheColumnFamilySummary stuff.&lt;/p&gt;

&lt;p&gt;Made BlockPriority class since priority was in BucketCache and LruBlockCache.&lt;/p&gt;

&lt;p&gt;TODO: Build out cache stats so report by slab for SlabCache and by bucket for BucketCache.&lt;/p&gt;

&lt;p&gt;TODO: See if I can remove the hokey reporting thread that dumps into the logs every 5minutes the block cache &apos;status&apos;.... see if can make data available via metrics and elsewise (Currently we launch a thread to report but logging is at DEBUG level so thread does nothing).&lt;/p&gt;

&lt;p&gt;TODO: add a few web pages to report this stuff on.&lt;/p&gt;

&lt;p&gt;Renamed CachedBlock as LruCachedBlock and then added new Interface CachedBlock that has info common to all BlockCache implementaitons. &lt;/p&gt;

&lt;p&gt;Renamed CachedBlockQueue as LruCachedBlockQueue&lt;/p&gt;
</comment>
                            <comment id="14017396" author="stack" created="Wed, 4 Jun 2014 05:48:08 +0000"  >&lt;p&gt;Some pictures of what I have so far.&lt;/p&gt;

&lt;p&gt;I&apos;ve added a section to the RS UI called Block Cache.&lt;/p&gt;

&lt;p&gt;You tab over &apos;basic info&apos;, &apos;configuration&apos;, &apos;stats&apos;, &apos;l1 stats&apos;, and &apos;l2 stats&apos;.  If no l2, says &apos;no l2 deployed&apos;.  If DoubleBlockCache or CombinedBlockCache, shows these as implementations and then detail on the LruBlockCache L1 and the SlabCache or BucketCache L2s.  Shows Slabs and their stats if SlabCache.  Shows buckets and their stats if it is deployed.&lt;/p&gt;

&lt;p&gt;Should be general enough to entertain other deploy types.&lt;/p&gt;

&lt;p&gt;TODO: expose these details to monitoring tools; though expensive to calculate I can imagine folks wanting to study them over periods of investigation or setup.  Could add json view here or probably better, make real metrics of them (might be too much).&lt;/p&gt;

&lt;p&gt;TODO: Finish up the blocks by files page; good for geting rough view on what files are hot and how hot.  The info is there, just need to add a template.&lt;/p&gt;</comment>
                            <comment id="14017398" author="stack" created="Wed, 4 Jun 2014 05:49:08 +0000"  >&lt;p&gt;Oh, other TODOs: put up on real cluster and tune some of the numbers reported.&lt;/p&gt;</comment>
                            <comment id="14017399" author="stack" created="Wed, 4 Jun 2014 05:53:18 +0000"  >&lt;p&gt;wip v2.&lt;/p&gt;</comment>
                            <comment id="14019614" author="stack" created="Fri, 6 Jun 2014 06:25:31 +0000"  >&lt;p&gt;More pictures including some showing JSON dumps of block cache content (including bucket state if BucketCache and slabs if SlabCache) &amp;#8211; and listings by file of block cache content (in JSON).&lt;/p&gt;</comment>
                            <comment id="14019623" author="stack" created="Fri, 6 Jun 2014 06:40:49 +0000"  >&lt;p&gt;Tried this patch up on cluster.  Basically works.  SlabCache numbers are odd.  Eviction counts need better description.  Here is list of changes&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Fix capitalization in web page top navbar.

Add two templates, one to &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; block cache tabs and then another to
&lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; JSON views on block cache.

Hook them up in RSStatusTmpl.

In BlockCache remove getEvictedCount.  Redundant with same method
in CacheStats.  Make BlockCache implement CachedBlock iterator.
Allow implementations &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; L1 and L2 &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; present.

Remove old BlockCacheColumnFamilySummary and supporting classes
and tests.  Unused.  Not hooked up.
Heavyweight doing filter of hdfs contents to find file names.

Add a BlockCacheUtil that has aggregating functions, toString
and toJSON methods.

Make common BlockPriority class rather than dup enums

Renamed CachedBlock as LruCachedBlock and added CachedBlock
as Interface.

Renamed CachedBlockQueue as LruCachedBlockQueue.

Adds a cache reporting test but has few asserts; exercises, 
doesn&apos;t confirm.

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14019624" author="stack" created="Fri, 6 Jun 2014 06:41:12 +0000"  >&lt;p&gt;try hadoopqa&lt;/p&gt;</comment>
                            <comment id="14019625" author="stack" created="Fri, 6 Jun 2014 06:44:56 +0000"  >&lt;p&gt;rb is up here &lt;a href=&quot;https://reviews.apache.org/r/22299/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/22299/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14019635" author="hadoopqa" created="Fri, 6 Jun 2014 07:22:23 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12648605/4089v3.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12648605/4089v3.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12648605&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 24 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +  String bcUrl = &quot;http://hbase.apache.org/devapidocs/&quot; + bc.getClass().getName().replaceAll(&quot;&lt;br class=&quot;atl-forced-newline&quot; /&gt;.&quot;, &quot;/&quot;) + &quot;.html&quot;;&lt;br/&gt;
+            &amp;lt;&amp;amp; bc_l1; bc = cacheConfig.getBlockCache().getBlockCaches() != null? cacheConfig.getBlockCache().getBlockCaches()&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;: cacheConfig.getBlockCache(); &amp;amp;&amp;gt;&lt;br/&gt;
+            &amp;lt;&amp;amp; bc_l2; bc = cacheConfig.getBlockCache().getBlockCaches() != null &amp;amp;&amp;amp; cacheConfig.getBlockCache().getBlockCaches().length &amp;gt; 1 ? cacheConfig.getBlockCache().getBlockCaches()&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;: null;  &amp;amp;&amp;gt;&lt;br/&gt;
+      bcl1Url = &quot;http://hbase.apache.org/devapidocs/&quot; + bcl1.getClass().getName().replaceAll(&quot;&lt;br class=&quot;atl-forced-newline&quot; /&gt;.&quot;, &quot;/&quot;) + &quot;.html&quot;;&lt;br/&gt;
+      bcl2Url = &quot;http://hbase.apache.org/devapidocs/&quot; + bcl2.getClass().getName().replaceAll(&quot;&lt;br class=&quot;atl-forced-newline&quot; /&gt;.&quot;, &quot;/&quot;) + &quot;.html&quot;;&lt;br/&gt;
+&amp;lt;p&amp;gt;See &amp;lt;a href=&quot;http://hbase.apache.org/book.html#block.cache&quot;&amp;gt;Block Cache&amp;lt;/a&amp;gt; in the HBase Reference Guide for help.&amp;lt;/p&amp;gt;&lt;br/&gt;
+        &amp;lt;td&amp;gt;&amp;lt;% StringUtils.humanReadableInt(cacheConfig.getBlockCache().getStats().getEvictedCount()) %&amp;gt;&amp;lt;/td&amp;gt;&lt;br/&gt;
+        &amp;lt;td&amp;gt;&amp;lt;% StringUtils.humanReadableInt(cacheConfig.getBlockCache().getStats().getEvictionCount()) %&amp;gt;&amp;lt;/td&amp;gt;&lt;br/&gt;
+        &amp;lt;td&amp;gt;&amp;lt;% StringUtils.humanReadableInt(cacheConfig.getBlockCache().getStats().getHitCount()) %&amp;gt;&amp;lt;/td&amp;gt;&lt;br/&gt;
+        &amp;lt;td&amp;gt;&amp;lt;% StringUtils.humanReadableInt(cacheConfig.getBlockCache().getStats().getHitCachingCount()) %&amp;gt;&amp;lt;/td&amp;gt;&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.regionserver.TestRSStatusServlet&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9702//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9702//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9702//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9702//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9702//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9702//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9702//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9702//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9702//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9702//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9702//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9702//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9702//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9702//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9702//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9702//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9702//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9702//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9702//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9702//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9702//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9702//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14020013" author="stack" created="Fri, 6 Jun 2014 16:40:17 +0000"  >&lt;p&gt;Fix unit test failure.  The long lines in the jamon templates are hard to avoid.&lt;/p&gt;</comment>
                            <comment id="14020159" author="hadoopqa" created="Fri, 6 Jun 2014 18:19:24 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12648656/4089v4.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12648656/4089v4.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12648656&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 24 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +    bcUrl = &quot;http://hbase.apache.org/devapidocs/&quot; + bc.getClass().getName().replaceAll(&quot;&lt;br class=&quot;atl-forced-newline&quot; /&gt;.&quot;, &quot;/&quot;) + &quot;.html&quot;;&lt;br/&gt;
+  BlockCache [] bcs = cacheConfig == null? null: cacheConfig.getBlockCache() == null? null: cacheConfig.getBlockCache().getBlockCaches();&lt;br/&gt;
+      bcl1Url = &quot;http://hbase.apache.org/devapidocs/&quot; + bcl1.getClass().getName().replaceAll(&quot;&lt;br class=&quot;atl-forced-newline&quot; /&gt;.&quot;, &quot;/&quot;) + &quot;.html&quot;;&lt;br/&gt;
+      bcl2Url = &quot;http://hbase.apache.org/devapidocs/&quot; + bcl2.getClass().getName().replaceAll(&quot;&lt;br class=&quot;atl-forced-newline&quot; /&gt;.&quot;, &quot;/&quot;) + &quot;.html&quot;;&lt;br/&gt;
+&amp;lt;p&amp;gt;See &amp;lt;a href=&quot;http://hbase.apache.org/book.html#block.cache&quot;&amp;gt;Block Cache&amp;lt;/a&amp;gt; in the HBase Reference Guide for help.&amp;lt;/p&amp;gt;&lt;br/&gt;
+        &amp;lt;td&amp;gt;&amp;lt;% StringUtils.humanReadableInt(cacheConfig.getBlockCache().getStats().getEvictedCount()) %&amp;gt;&amp;lt;/td&amp;gt;&lt;br/&gt;
+        &amp;lt;td&amp;gt;&amp;lt;% StringUtils.humanReadableInt(cacheConfig.getBlockCache().getStats().getEvictionCount()) %&amp;gt;&amp;lt;/td&amp;gt;&lt;br/&gt;
+        &amp;lt;td&amp;gt;&amp;lt;% StringUtils.humanReadableInt(cacheConfig.getBlockCache().getStats().getHitCount()) %&amp;gt;&amp;lt;/td&amp;gt;&lt;br/&gt;
+        &amp;lt;td&amp;gt;&amp;lt;% StringUtils.humanReadableInt(cacheConfig.getBlockCache().getStats().getHitCachingCount()) %&amp;gt;&amp;lt;/td&amp;gt;&lt;br/&gt;
+        &amp;lt;td&amp;gt;&amp;lt;% StringUtils.humanReadableInt(cacheConfig.getBlockCache().getStats().getMissCount()) %&amp;gt;&amp;lt;/td&amp;gt;&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9707//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9707//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9707//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9707//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9707//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9707//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9707//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9707//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9707//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9707//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9707//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9707//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9707//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9707//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9707//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9707//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9707//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9707//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9707//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9707//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9707//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9707//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14020178" author="apurtell" created="Fri, 6 Jun 2014 18:30:38 +0000"  >&lt;p&gt;This is fantastic. I skimmed the jamon changes on RB and the attached snaps look good. &lt;/p&gt;

&lt;p&gt;IMO the line length warnings in the templates can be ignored.&lt;/p&gt;

&lt;p&gt;Please check the javadoc warn isn&apos;t related to this change. Otherwise +1&lt;/p&gt;

&lt;p&gt;The code changes are all on Private audience classes. CachedBlock is converted from a class to an interface, but only affected code is all internal. Can we have this in 0.98?&lt;/p&gt;</comment>
                            <comment id="14020247" author="stack" created="Fri, 6 Jun 2014 19:07:42 +0000"  >&lt;p&gt;Fix a NPE over in SlabCache.  Exclude age info on SlabCache because it doesn&apos;t support it.  Add help note to that effect explaining why not present.  Do similar w/ help note on BucketCache that it doesn&apos;t distingush DATA blocks.&lt;/p&gt;

&lt;p&gt;Misc clean up.&lt;/p&gt;</comment>
                            <comment id="14020248" author="stack" created="Fri, 6 Jun 2014 19:08:44 +0000"  >&lt;p&gt;Updated rb w/ v6.&lt;/p&gt;</comment>
                            <comment id="14020264" author="stack" created="Fri, 6 Jun 2014 19:17:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andrew.purtell%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;andrew.purtell@gmail.com&quot;&gt;Andrew Purtell&lt;/a&gt; Sorry, yeah, this v6 should get the javadoc.  It should go into 0.98.  Thanks for the +1.  Will commit if v6 makes it (&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt; &amp;#8211; you up or a looksee?)&lt;/p&gt;</comment>
                            <comment id="14020406" author="hadoopqa" created="Fri, 6 Jun 2014 21:33:50 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12648698/4089v6.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12648698/4089v6.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12648698&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 24 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +    bcUrl = &quot;http://hbase.apache.org/devapidocs/&quot; + bc.getClass().getName().replaceAll(&quot;&lt;br class=&quot;atl-forced-newline&quot; /&gt;.&quot;, &quot;/&quot;) + &quot;.html&quot;;&lt;br/&gt;
+  BlockCache [] bcs = cacheConfig == null? null: cacheConfig.getBlockCache() == null? null: cacheConfig.getBlockCache().getBlockCaches();&lt;br/&gt;
+      bcl1Url = &quot;http://hbase.apache.org/devapidocs/&quot; + bcl1.getClass().getName().replaceAll(&quot;&lt;br class=&quot;atl-forced-newline&quot; /&gt;.&quot;, &quot;/&quot;) + &quot;.html&quot;;&lt;br/&gt;
+      bcl2Url = &quot;http://hbase.apache.org/devapidocs/&quot; + bcl2.getClass().getName().replaceAll(&quot;&lt;br class=&quot;atl-forced-newline&quot; /&gt;.&quot;, &quot;/&quot;) + &quot;.html&quot;;&lt;br/&gt;
+&amp;lt;p&amp;gt;See &amp;lt;a href=&quot;http://hbase.apache.org/book.html#block.cache&quot;&amp;gt;Block Cache&amp;lt;/a&amp;gt; in the HBase Reference Guide for help.&amp;lt;/p&amp;gt;&lt;br/&gt;
+        &amp;lt;td&amp;gt;&amp;lt;% StringUtils.humanReadableInt(cacheConfig.getBlockCache().getStats().getEvictedCount()) %&amp;gt;&amp;lt;/td&amp;gt;&lt;br/&gt;
+        &amp;lt;td&amp;gt;&amp;lt;% StringUtils.humanReadableInt(cacheConfig.getBlockCache().getStats().getEvictionCount()) %&amp;gt;&amp;lt;/td&amp;gt;&lt;br/&gt;
+        &amp;lt;td&amp;gt;&amp;lt;% StringUtils.humanReadableInt(cacheConfig.getBlockCache().getStats().getHitCount()) %&amp;gt;&amp;lt;/td&amp;gt;&lt;br/&gt;
+        &amp;lt;td&amp;gt;&amp;lt;% StringUtils.humanReadableInt(cacheConfig.getBlockCache().getStats().getHitCachingCount()) %&amp;gt;&amp;lt;/td&amp;gt;&lt;br/&gt;
+        &amp;lt;td&amp;gt;&amp;lt;% StringUtils.humanReadableInt(cacheConfig.getBlockCache().getStats().getMissCount()) %&amp;gt;&amp;lt;/td&amp;gt;&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.client.TestMultiParallel&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9711//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9711//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9711//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9711//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9711//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9711//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9711//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9711//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9711//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9711//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9711//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9711//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9711//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9711//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9711//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9711//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9711//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9711//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9711//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9711//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9711//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9711//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14020520" author="stack" created="Fri, 6 Jun 2014 23:18:10 +0000"  >&lt;p&gt;Fix one javadoc issue.&lt;/p&gt;</comment>
                            <comment id="14020613" author="hadoopqa" created="Sat, 7 Jun 2014 01:17:01 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12648752/4089v7.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12648752/4089v7.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12648752&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 24 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +    bcUrl = &quot;http://hbase.apache.org/devapidocs/&quot; + bc.getClass().getName().replaceAll(&quot;&lt;br class=&quot;atl-forced-newline&quot; /&gt;.&quot;, &quot;/&quot;) + &quot;.html&quot;;&lt;br/&gt;
+  BlockCache [] bcs = cacheConfig == null? null: cacheConfig.getBlockCache() == null? null: cacheConfig.getBlockCache().getBlockCaches();&lt;br/&gt;
+      bcl1Url = &quot;http://hbase.apache.org/devapidocs/&quot; + bcl1.getClass().getName().replaceAll(&quot;&lt;br class=&quot;atl-forced-newline&quot; /&gt;.&quot;, &quot;/&quot;) + &quot;.html&quot;;&lt;br/&gt;
+      bcl2Url = &quot;http://hbase.apache.org/devapidocs/&quot; + bcl2.getClass().getName().replaceAll(&quot;&lt;br class=&quot;atl-forced-newline&quot; /&gt;.&quot;, &quot;/&quot;) + &quot;.html&quot;;&lt;br/&gt;
+&amp;lt;p&amp;gt;See &amp;lt;a href=&quot;http://hbase.apache.org/book.html#block.cache&quot;&amp;gt;Block Cache&amp;lt;/a&amp;gt; in the HBase Reference Guide for help.&amp;lt;/p&amp;gt;&lt;br/&gt;
+        &amp;lt;td&amp;gt;&amp;lt;% StringUtils.humanReadableInt(cacheConfig.getBlockCache().getStats().getEvictedCount()) %&amp;gt;&amp;lt;/td&amp;gt;&lt;br/&gt;
+        &amp;lt;td&amp;gt;&amp;lt;% StringUtils.humanReadableInt(cacheConfig.getBlockCache().getStats().getEvictionCount()) %&amp;gt;&amp;lt;/td&amp;gt;&lt;br/&gt;
+        &amp;lt;td&amp;gt;&amp;lt;% StringUtils.humanReadableInt(cacheConfig.getBlockCache().getStats().getHitCount()) %&amp;gt;&amp;lt;/td&amp;gt;&lt;br/&gt;
+        &amp;lt;td&amp;gt;&amp;lt;% StringUtils.humanReadableInt(cacheConfig.getBlockCache().getStats().getHitCachingCount()) %&amp;gt;&amp;lt;/td&amp;gt;&lt;br/&gt;
+        &amp;lt;td&amp;gt;&amp;lt;% StringUtils.humanReadableInt(cacheConfig.getBlockCache().getStats().getMissCount()) %&amp;gt;&amp;lt;/td&amp;gt;&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 1 zombie test(s): &lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9714//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9714//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9714//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9714//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9714//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9714//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9714//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9714//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9714//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9714//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9714//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9714//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9714//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9714//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9714//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9714//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9714//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9714//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9714//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9714//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9714//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9714//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14020674" author="hadoopqa" created="Sat, 7 Jun 2014 03:38:18 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12648783/4089v7.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12648783/4089v7.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12648783&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 24 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +    bcUrl = &quot;http://hbase.apache.org/devapidocs/&quot; + bc.getClass().getName().replaceAll(&quot;&lt;br class=&quot;atl-forced-newline&quot; /&gt;.&quot;, &quot;/&quot;) + &quot;.html&quot;;&lt;br/&gt;
+  BlockCache [] bcs = cacheConfig == null? null: cacheConfig.getBlockCache() == null? null: cacheConfig.getBlockCache().getBlockCaches();&lt;br/&gt;
+      bcl1Url = &quot;http://hbase.apache.org/devapidocs/&quot; + bcl1.getClass().getName().replaceAll(&quot;&lt;br class=&quot;atl-forced-newline&quot; /&gt;.&quot;, &quot;/&quot;) + &quot;.html&quot;;&lt;br/&gt;
+      bcl2Url = &quot;http://hbase.apache.org/devapidocs/&quot; + bcl2.getClass().getName().replaceAll(&quot;&lt;br class=&quot;atl-forced-newline&quot; /&gt;.&quot;, &quot;/&quot;) + &quot;.html&quot;;&lt;br/&gt;
+&amp;lt;p&amp;gt;See &amp;lt;a href=&quot;http://hbase.apache.org/book.html#block.cache&quot;&amp;gt;Block Cache&amp;lt;/a&amp;gt; in the HBase Reference Guide for help.&amp;lt;/p&amp;gt;&lt;br/&gt;
+        &amp;lt;td&amp;gt;&amp;lt;% StringUtils.humanReadableInt(cacheConfig.getBlockCache().getStats().getEvictedCount()) %&amp;gt;&amp;lt;/td&amp;gt;&lt;br/&gt;
+        &amp;lt;td&amp;gt;&amp;lt;% StringUtils.humanReadableInt(cacheConfig.getBlockCache().getStats().getEvictionCount()) %&amp;gt;&amp;lt;/td&amp;gt;&lt;br/&gt;
+        &amp;lt;td&amp;gt;&amp;lt;% StringUtils.humanReadableInt(cacheConfig.getBlockCache().getStats().getHitCount()) %&amp;gt;&amp;lt;/td&amp;gt;&lt;br/&gt;
+        &amp;lt;td&amp;gt;&amp;lt;% StringUtils.humanReadableInt(cacheConfig.getBlockCache().getStats().getHitCachingCount()) %&amp;gt;&amp;lt;/td&amp;gt;&lt;br/&gt;
+        &amp;lt;td&amp;gt;&amp;lt;% StringUtils.humanReadableInt(cacheConfig.getBlockCache().getStats().getMissCount()) %&amp;gt;&amp;lt;/td&amp;gt;&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9716//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9716//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9716//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9716//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9716//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9716//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9716//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9716//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9716//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9716//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9716//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9716//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9716//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9716//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9716//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9716//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9716//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9716//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9716//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9716//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9716//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9716//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14025916" author="ndimiduk" created="Mon, 9 Jun 2014 23:19:20 +0000"  >&lt;blockquote&gt;&lt;p&gt;SlabCache numbers are odd.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;ve noticed this in the past; don&apos;t really trust its metrics. I think it&apos;s because DoubleBlockCache caches twice, and metrics are all sums.&lt;/p&gt;

&lt;p&gt;Added a couple comments on rb; nothing major. Really nice addition, +1&lt;/p&gt;</comment>
                            <comment id="14025928" author="stack" created="Mon, 9 Jun 2014 23:30:05 +0000"  >&lt;p&gt;Version which incorporates &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt; feedback.&lt;/p&gt;</comment>
                            <comment id="14026114" author="hudson" created="Tue, 10 Jun 2014 04:55:25 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #5189 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/5189/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/5189/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4089&quot; title=&quot;blockCache contents report&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4089&quot;&gt;&lt;del&gt;HBASE-4089&lt;/del&gt;&lt;/a&gt; blockCache contents report (stack: rev 5851a064120634f8572a39a3d51afb4d8fc66a10)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;pom.xml&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/bucket/BucketCacheStats.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/TestHeapSize.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/BlockCacheUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/CachedBlock.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/monitoring/StateDumpServlet.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/CachedBlockQueue.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/LruCachedBlockQueue.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestCachedBlockQueue.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/resources/hbase-webapps/master/table.jsp&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/CombinedBlockCache.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestBlockCacheColumnFamilySummary.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RSStatusServlet.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/resources/hbase-webapps/master/tablesDetailed.jsp&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/BlockCacheColumnFamilySummary.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/bucket/BucketAllocator.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/CacheStats.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/resources/hbase-webapps/master/snapshot.jsp&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/jamon/org/apache/hadoop/hbase/tmpl/regionserver/BlockCacheTmpl.jamon&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestCacheConfig.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/DoubleBlockCache.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/BlockCachesIterator.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestStoreFileBlockCacheSummary.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestLruBlockCache.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/slab/SlabCache.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/CacheConfig.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/jamon/org/apache/hadoop/hbase/tmpl/regionserver/RSStatusTmpl.jamon&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/jamon/org/apache/hadoop/hbase/tmpl/regionserver/BlockCacheViewTmpl.jamon&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/BlockCache.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/LruCachedBlock.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/jamon/org/apache/hadoop/hbase/tmpl/master/MasterStatusTmpl.jamon&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/resources/hbase-webapps/master/zk.jsp&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/LruBlockCache.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/slab/SingleSizeCache.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/BlockCacheKey.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/bucket/BucketCache.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/ReplicationSourceDummy.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/BlockPriority.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/jamon/org/apache/hadoop/hbase/tmpl/regionserver/ServerMetricsTmpl.jamon&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestBlockCacheReporting.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14028675" author="mantonov" created="Thu, 12 Jun 2014 01:06:25 +0000"  >&lt;p&gt;Btw, is that something you guys have seen running org.apache.hadoop.hbase.io.hfile.TestBlockCacheReporting.testBucketCache as part of whole suite (when I run individual test locally, it passes)? Not sure if that&apos;s my local issue.&lt;/p&gt;

&lt;p&gt;java.lang.NullPointerException&lt;br/&gt;
	at org.apache.hadoop.hbase.io.hfile.bucket.BucketCache.getBlock(BucketCache.java:386)&lt;br/&gt;
	at org.apache.hadoop.hbase.io.hfile.CombinedBlockCache.getBlock(CombinedBlockCache.java:79)&lt;br/&gt;
	at org.apache.hadoop.hbase.io.hfile.TestBlockCacheReporting.addDataAndHits(TestBlockCacheReporting.java:66)&lt;br/&gt;
	at org.apache.hadoop.hbase.io.hfile.TestBlockCacheReporting.testBucketCache(TestBlockCacheReporting.java:98)&lt;/p&gt;</comment>
                            <comment id="14029429" author="stack" created="Thu, 12 Jun 2014 17:13:09 +0000"  >&lt;p&gt;How you get the NPE &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mantonov&quot; class=&quot;user-hover&quot; rel=&quot;mantonov&quot;&gt;Mikhail Antonov&lt;/a&gt;? It happens when you run the suite?  If I run the single test it seems to pass fine and passed above for the hadoopqa run.  That said, there is something here for sure if you are seeing a regular failure.&lt;/p&gt;</comment>
                            <comment id="14029629" author="mantonov" created="Thu, 12 Jun 2014 19:04:31 +0000"  >&lt;p&gt;It actually happens on my jenkins (centos 6.4) which builds ASF master, cloning from &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf/hbase.git&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://git-wip-us.apache.org/repos/asf/hbase.git&lt;/a&gt; using simply &apos;mvn test&apos;. I can reproduce it every time now (wiping out workspace from jenkins didn&apos;t help). So I&apos;m just wondering if others ever seen this - if not, apparently it&apos;s something mine, local.&lt;/p&gt;</comment>
                            <comment id="14029691" author="stack" created="Thu, 12 Jun 2014 19:49:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mantonov&quot; class=&quot;user-hover&quot; rel=&quot;mantonov&quot;&gt;Mikhail Antonov&lt;/a&gt; Let me try.....&lt;/p&gt;</comment>
                            <comment id="14029935" author="stack" created="Thu, 12 Jun 2014 22:30:03 +0000"  >&lt;p&gt;Test suite passes on macosx.  Trying elsewhere too.  May be a race in here:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
          CacheableDeserializer&amp;lt;Cacheable&amp;gt; deserializer =
            bucketEntry.deserializerReference(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.deserialiserMap);
          Cacheable cachedBlock = deserializer.deserialize(bb, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14030153" author="misty" created="Fri, 13 Jun 2014 01:40:43 +0000"  >&lt;p&gt;Does this JIRA address or relate to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8315?&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-8315?&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14030923" author="stack" created="Fri, 13 Jun 2014 18:04:49 +0000"  >&lt;blockquote&gt;&lt;p&gt;Does this JIRA address or relate to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8315?&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-8315?&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=misty&quot; class=&quot;user-hover&quot; rel=&quot;misty&quot;&gt;Misty Stanley-Jones&lt;/a&gt; It does with some minor mods commtted against &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8315&quot; title=&quot;Documentation should have more information of LRU Stats&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8315&quot;&gt;&lt;del&gt;HBASE-8315&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14034880" author="hudson" created="Wed, 18 Jun 2014 06:37:25 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.98 #345 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/345/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/345/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11366&quot; title=&quot;Backport HBASE-4089 (block cache contents report UI) to 0.98&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11366&quot;&gt;&lt;del&gt;HBASE-11366&lt;/del&gt;&lt;/a&gt; Backport &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4089&quot; title=&quot;blockCache contents report&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4089&quot;&gt;&lt;del&gt;HBASE-4089&lt;/del&gt;&lt;/a&gt; (block cache contents report UI) to 0.98 (stack: rev da94cd398f9a0b1dc8d601a894314559e4f0939f)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/BlockCacheUtil.java&lt;/li&gt;
	&lt;li&gt;pom.xml&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/bucket/BucketCache.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestStoreFileBlockCacheSummary.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/RandomSeek.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/CombinedBlockCache.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/BlockCacheKey.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/resources/hbase-webapps/master/snapshot.jsp&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/CachedBlock.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/TestHeapSize.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/bucket/BucketAllocator.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/monitoring/StateDumpServlet.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/CacheStats.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/jamon/org/apache/hadoop/hbase/tmpl/regionserver/BlockCacheViewTmpl.jamon&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/bucket/BucketCacheStats.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/resources/hbase-webapps/master/zk.jsp&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/jamon/org/apache/hadoop/hbase/tmpl/regionserver/BlockCacheTmpl.jamon&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/LruCachedBlock.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/ReplicationSourceDummy.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/jamon/org/apache/hadoop/hbase/tmpl/master/MasterStatusTmpl.jamon&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/slab/SlabCache.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/SimpleBlockCache.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestLruBlockCache.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RSStatusServlet.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestCachedBlockQueue.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/CachedBlockQueue.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestBlockCacheColumnFamilySummary.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/bucket/FileIOEngine.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/resources/hbase-webapps/master/tablesDetailed.jsp&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/BlockPriority.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/jamon/org/apache/hadoop/hbase/tmpl/regionserver/RSStatusTmpl.jamon&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/resources/hbase-webapps/master/table.jsp&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/slab/SingleSizeCache.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/BlockCachesIterator.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/BlockCache.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/LruCachedBlockQueue.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/bucket/ByteBufferIOEngine.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/BlockCacheColumnFamilySummary.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/LruBlockCache.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/DoubleBlockCache.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/jamon/org/apache/hadoop/hbase/tmpl/regionserver/ServerMetricsTmpl.jamon&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14034928" author="hudson" created="Wed, 18 Jun 2014 07:35:05 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.98-on-Hadoop-1.1 #326 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/326/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/326/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11366&quot; title=&quot;Backport HBASE-4089 (block cache contents report UI) to 0.98&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11366&quot;&gt;&lt;del&gt;HBASE-11366&lt;/del&gt;&lt;/a&gt; Backport &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4089&quot; title=&quot;blockCache contents report&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4089&quot;&gt;&lt;del&gt;HBASE-4089&lt;/del&gt;&lt;/a&gt; (block cache contents report UI) to 0.98 (stack: rev da94cd398f9a0b1dc8d601a894314559e4f0939f)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/CachedBlock.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/resources/hbase-webapps/master/table.jsp&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/bucket/ByteBufferIOEngine.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/bucket/BucketCache.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/LruCachedBlockQueue.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/BlockCacheKey.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/bucket/BucketCacheStats.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/RandomSeek.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/bucket/FileIOEngine.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/ReplicationSourceDummy.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/BlockPriority.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/DoubleBlockCache.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/TestHeapSize.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RSStatusServlet.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/resources/hbase-webapps/master/snapshot.jsp&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/SimpleBlockCache.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/resources/hbase-webapps/master/zk.jsp&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/BlockCacheColumnFamilySummary.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/CacheStats.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/bucket/BucketAllocator.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/slab/SingleSizeCache.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/BlockCacheUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestBlockCacheColumnFamilySummary.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/CombinedBlockCache.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestCachedBlockQueue.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/jamon/org/apache/hadoop/hbase/tmpl/regionserver/BlockCacheViewTmpl.jamon&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/slab/SlabCache.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/LruCachedBlock.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/CachedBlockQueue.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/BlockCachesIterator.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/BlockCache.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/jamon/org/apache/hadoop/hbase/tmpl/regionserver/ServerMetricsTmpl.jamon&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestLruBlockCache.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/resources/hbase-webapps/master/tablesDetailed.jsp&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/monitoring/StateDumpServlet.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/jamon/org/apache/hadoop/hbase/tmpl/master/MasterStatusTmpl.jamon&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/LruBlockCache.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/jamon/org/apache/hadoop/hbase/tmpl/regionserver/RSStatusTmpl.jamon&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/jamon/org/apache/hadoop/hbase/tmpl/regionserver/BlockCacheTmpl.jamon&lt;/li&gt;
	&lt;li&gt;pom.xml&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestStoreFileBlockCacheSummary.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14331110" author="enis" created="Sat, 21 Feb 2015 23:33:33 +0000"  >&lt;p&gt;Closing this issue after 0.99.0 release. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12647254" name="4089.wip.txt" size="90918" author="stack" created="Wed, 28 May 2014 23:58:16 +0000"/>
                            <attachment id="12648277" name="4089.wip.v2.txt" size="122329" author="stack" created="Wed, 4 Jun 2014 05:53:18 +0000"/>
                            <attachment id="12648605" name="4089v3.txt" size="150923" author="stack" created="Fri, 6 Jun 2014 06:40:49 +0000"/>
                            <attachment id="12648656" name="4089v4.txt" size="152721" author="stack" created="Fri, 6 Jun 2014 16:40:17 +0000"/>
                            <attachment id="12648698" name="4089v6.txt" size="154133" author="stack" created="Fri, 6 Jun 2014 19:07:42 +0000"/>
                            <attachment id="12648783" name="4089v7.txt" size="154139" author="stack" created="Sat, 7 Jun 2014 01:39:59 +0000"/>
                            <attachment id="12648752" name="4089v7.txt" size="154139" author="stack" created="Fri, 6 Jun 2014 23:18:10 +0000"/>
                            <attachment id="12649488" name="4089v8.txt" size="154117" author="stack" created="Mon, 9 Jun 2014 23:30:05 +0000"/>
                            <attachment id="12648276" name="bc_basic.png" size="130811" author="stack" created="Wed, 4 Jun 2014 05:48:08 +0000"/>
                            <attachment id="12648602" name="bc_bucketcache.png" size="100576" author="stack" created="Fri, 6 Jun 2014 06:25:31 +0000"/>
                            <attachment id="12648600" name="bc_buckets.png" size="92835" author="stack" created="Fri, 6 Jun 2014 06:25:31 +0000"/>
                            <attachment id="12648275" name="bc_config.png" size="124066" author="stack" created="Wed, 4 Jun 2014 05:48:08 +0000"/>
                            <attachment id="12648273" name="bc_l1.png" size="91603" author="stack" created="Wed, 4 Jun 2014 05:48:08 +0000"/>
                            <attachment id="12648271" name="bc_l2_buckets.png" size="143801" author="stack" created="Wed, 4 Jun 2014 05:48:08 +0000"/>
                            <attachment id="12648601" name="bc_showing_buckets_start.png" size="51086" author="stack" created="Fri, 6 Jun 2014 06:25:31 +0000"/>
                            <attachment id="12648599" name="bc_slabs.png" size="203349" author="stack" created="Fri, 6 Jun 2014 06:25:31 +0000"/>
                            <attachment id="12648272" name="bc_slabs.png" size="112150" author="stack" created="Wed, 4 Jun 2014 05:48:08 +0000"/>
                            <attachment id="12648274" name="bc_stats.png" size="111566" author="stack" created="Wed, 4 Jun 2014 05:48:08 +0000"/>
                            <attachment id="12488408" name="hbase_4089_blockcachereport.pdf" size="148470" author="dmeil" created="Mon, 1 Aug 2011 14:55:59 +0000"/>
                            <attachment id="12490178" name="java_blockcache_checkpoint_2011_08_11.patch" size="12926" author="dmeil" created="Thu, 11 Aug 2011 21:43:30 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12518794">HBASE-4199</subtask>
                            <subtask id="12518822">HBASE-4200</subtask>
                            <subtask id="12733952">HBASE-11739</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 1 Aug 2011 18:03:48 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33360</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hpbj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>101364</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Show more detail on blockcache deployed in new BlockCache section under Tasks and above Regions; shows blockcache type, what for L1 and L2, help pointers, type-specific and L1/L2 stats as well as dumps of bucket/slab cache stats when bucket/slabs enabled.  Keeps block cache age (works in Bucket and LruBlockCache, not for Slab).  Adds JSON page with details on block caches and a facility for listing block cache content by file (useful finding hot files).</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>