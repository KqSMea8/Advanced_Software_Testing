<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:29:52 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5667/HBASE-5667.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5667] RegexStringComparator supports java.util.regex.Pattern flags</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5667</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;ul&gt;
	&lt;li&gt;Add constructor that takes in a Pattern&lt;/li&gt;
	&lt;li&gt;Add Pattern&apos;s flags to Writable fields, and actually use them when recomposing the Filter&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12548555">HBASE-5667</key>
            <summary>RegexStringComparator supports java.util.regex.Pattern flags</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mumrah">David Arthur</assignee>
                                    <reporter username="mumrah">David Arthur</reporter>
                        <labels>
                    </labels>
                <created>Wed, 28 Mar 2012 21:13:34 +0000</created>
                <updated>Mon, 23 Sep 2013 18:45:07 +0000</updated>
                            <resolved>Fri, 28 Sep 2012 04:03:54 +0000</resolved>
                                                    <fixVersion>0.95.0</fixVersion>
                                    <component>Filters</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13240753" author="zhihyu@ebaysf.com" created="Wed, 28 Mar 2012 21:36:47 +0000"  >&lt;p&gt;This is an incompatible change, right ?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.pattern = Pattern.compile(expr);
+    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; flags = in.readInt();
+    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.pattern = Pattern.compile(expr, flags);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;What&apos;s the advantage of passing Pattern directly ?&lt;/p&gt;</comment>
                            <comment id="13240778" author="hadoopqa" created="Wed, 28 Mar 2012 22:07:39 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12520321/HBASE-5667.diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12520321/HBASE-5667.diff&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.mapreduce.TestImportTsv&lt;br/&gt;
                  org.apache.hadoop.hbase.mapred.TestTableMapReduce&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1334//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1334//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1334//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1334//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1334//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1334//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13240818" author="mumrah" created="Wed, 28 Mar 2012 23:16:02 +0000"  >&lt;p&gt;@Zhihong, yes it would be incompatible if it tried to read Filters that were serialized with the current code. I&apos;m assuming that these Filters are ephemeral and aren&apos;t stored anywhere (could be a very wrong assumption). &lt;/p&gt;

&lt;p&gt;Otherwise, the purpose of this patch is to expose the ability to add regex flags to the comparator. E.g., if I want a case-insensitive match I could construct a Filter like:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SingleColumnValueFilter(COLUMN_FAMILY, COLUMN_QUALIFIER, CompareOp.EQUAL,
  &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RegexStringComparator(Pattern.compile(&lt;span class=&quot;code-quote&quot;&gt;&quot;foo&quot;&lt;/span&gt;, Pattern.CASE_INSENSITIVE | Pattern.DOTALL)));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Also, in the current code, DOTALL is added to the underlying Pattern, but doesn&apos;t appear to be applied when deserializing. &lt;/p&gt;</comment>
                            <comment id="13240839" author="zhihyu@ebaysf.com" created="Wed, 28 Mar 2012 23:50:36 +0000"  >&lt;p&gt;Maintaining backward compatibility would be desirable.&lt;/p&gt;

&lt;p&gt;Would moving the read of flags to after the following line be better ?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; charset = in.readUTF();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13240978" author="stack" created="Thu, 29 Mar 2012 05:16:47 +0000"  >&lt;p&gt;Patch looks good.  We could commit it as is to trunk since the next release is going to &apos;incompatible&apos; anyways, 0.96 (Should take the opportunity and make everything subclass versionedwritable but better, Writables should be on their way out)&lt;/p&gt;</comment>
                            <comment id="13241197" author="mumrah" created="Thu, 29 Mar 2012 13:00:32 +0000"  >&lt;p&gt;Anything needed from me to get this in?&lt;/p&gt;</comment>
                            <comment id="13241835" author="stack" created="Thu, 29 Mar 2012 21:51:49 +0000"  >&lt;p&gt;@Jimmy Whats going to happen in 0.96 serializing filters?  Will these be pb&apos;d?  Or should we go to the bother of making all filters VersionedWritables?&lt;/p&gt;</comment>
                            <comment id="13241861" author="jxiang" created="Thu, 29 Mar 2012 22:14:57 +0000"  >&lt;p&gt;@Stack, I prefer to change them to pb so we should not bother to make them VersionedWritables for now.&lt;br/&gt;
We have lots of filters.  We need to abstract them out and have a generic way to define them in pb.&lt;/p&gt;</comment>
                            <comment id="13241870" author="jxiang" created="Thu, 29 Mar 2012 22:22:38 +0000"  >&lt;p&gt;For this patch, it changes the constructor of RegexStringComparator.  A Pattern is hard to be pb&apos;d.  Can we specify the flags in a different way,&lt;br/&gt;
for example, using string, and/or some primitive parameters?&lt;/p&gt;</comment>
                            <comment id="13241905" author="mumrah" created="Thu, 29 Mar 2012 23:04:24 +0000"  >&lt;p&gt;If I&apos;m not mistaken, a Pattern is just the pattern string and the flags. The constructor could just as easily be (String, int) rather than a Pattern instance if that jives better with pb&lt;/p&gt;</comment>
                            <comment id="13241914" author="jxiang" created="Thu, 29 Mar 2012 23:20:57 +0000"  >&lt;p&gt;Pattern is fine if we can get it.&lt;/p&gt;</comment>
                            <comment id="13241940" author="stack" created="Thu, 29 Mar 2012 23:55:48 +0000"  >&lt;p&gt;Yeah, it looks like we can do the String plus int for flags as David suggests given thats all it takes to create a Pattern instance: &lt;a href=&quot;http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#compile(java.lang.String&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#compile(java.lang.String&lt;/a&gt;, int)&lt;/p&gt;</comment>
                            <comment id="13242424" author="mumrah" created="Fri, 30 Mar 2012 15:17:47 +0000"  >&lt;ul&gt;
	&lt;li&gt;Changed constructor to (String, int)&lt;/li&gt;
	&lt;li&gt;Added example in docs&lt;/li&gt;
	&lt;li&gt;Removed DOTALL from (String) constructor&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13242508" author="zhihyu@ebaysf.com" created="Fri, 30 Mar 2012 16:25:57 +0000"  >&lt;p&gt;The new test failures are most likely inherited from TRUNK which were caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5673&quot; title=&quot;The OOM problem of IPC client call  cause all handle block&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5673&quot;&gt;HBASE-5673&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13242521" author="zhihyu@ebaysf.com" created="Fri, 30 Mar 2012 16:43:30 +0000"  >&lt;p&gt;I think we should keep the Pattern.DOTALL in (String) constructor:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.pattern = Pattern.compile(expr, Pattern.DOTALL);
+    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.pattern = Pattern.compile(expr);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13242531" author="stack" created="Fri, 30 Mar 2012 16:57:07 +0000"  >&lt;p&gt;Yes, and call through to the other constructor so its super(expr, Pattern.DOTALL).&lt;/p&gt;</comment>
                            <comment id="13242547" author="mumrah" created="Fri, 30 Mar 2012 17:07:31 +0000"  >&lt;p&gt;Yea on second thought keeping DOTALL is best for compatability. However, I don&apos;t like implicit things like that, so I added a comment to the (String) explaining it.&lt;/p&gt;</comment>
                            <comment id="13242613" author="hadoopqa" created="Fri, 30 Mar 2012 18:08:15 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12520628/HBASE-5667.diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12520628/HBASE-5667.diff&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.mapreduce.TestImportTsv&lt;br/&gt;
                  org.apache.hadoop.hbase.mapred.TestTableMapReduce&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1353//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1353//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1353//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1353//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1353//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1353//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13242615" author="zhihyu@ebaysf.com" created="Fri, 30 Mar 2012 18:14:30 +0000"  >&lt;p&gt;Patch v3 looks good.&lt;/p&gt;

&lt;p&gt;Will integrate later if there is no objection.&lt;/p&gt;</comment>
                            <comment id="13242672" author="zhihyu@ebaysf.com" created="Fri, 30 Mar 2012 19:34:49 +0000"  >&lt;p&gt;Patch v3 integrated to TRUNK.&lt;/p&gt;

&lt;p&gt;Thanks for the patch David.&lt;/p&gt;

&lt;p&gt;Thanks for the review Stack.&lt;/p&gt;</comment>
                            <comment id="13242701" author="hudson" created="Fri, 30 Mar 2012 20:26:47 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2699 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2699/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2699/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5667&quot; title=&quot;RegexStringComparator supports java.util.regex.Pattern flags&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5667&quot;&gt;&lt;del&gt;HBASE-5667&lt;/del&gt;&lt;/a&gt; RegexStringComparator supports java.util.regex.Pattern flags (David Arthur) (Revision 1307580)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/filter/RegexStringComparator.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/filter/TestSingleColumnValueFilter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13243041" author="hudson" created="Sat, 31 Mar 2012 05:54:10 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-security #155 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-security/155/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-security/155/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5667&quot; title=&quot;RegexStringComparator supports java.util.regex.Pattern flags&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5667&quot;&gt;&lt;del&gt;HBASE-5667&lt;/del&gt;&lt;/a&gt; RegexStringComparator supports java.util.regex.Pattern flags (David Arthur) (Revision 1307580)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/filter/RegexStringComparator.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/filter/TestSingleColumnValueFilter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13465326" author="stack" created="Fri, 28 Sep 2012 04:03:54 +0000"  >&lt;p&gt;Committed to trunk a while back.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12520628" name="HBASE-5667.diff" size="5759" author="mumrah" created="Fri, 30 Mar 2012 17:07:31 +0000"/>
                            <attachment id="12520612" name="HBASE-5667.diff" size="5677" author="mumrah" created="Fri, 30 Mar 2012 15:17:47 +0000"/>
                            <attachment id="12520321" name="HBASE-5667.diff" size="5051" author="mumrah" created="Wed, 28 Mar 2012 21:14:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 28 Mar 2012 21:36:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>233652</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 12 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0htvz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>102104</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>