<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:32:02 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5907/HBASE-5907.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5907] enhance HLog pretty printer to print additional useful stats</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5907</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;It would be useful for analysis purposes to enhance the HLog pretty printer to optionally print a bunch of additional stats such as:&lt;/p&gt;

&lt;p&gt;1) # of txns&lt;br/&gt;
2) # of KVs updated&lt;br/&gt;
3) avg size of txns&lt;br/&gt;
4) avg size of KVs&lt;br/&gt;
5) avg # of KVs written per txn&lt;br/&gt;
5) unique CF signatures involved in put/delete operatons; and breakdown of some of the above metrics by these signatures, etc.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12553428">HBASE-5907</key>
            <summary>enhance HLog pretty printer to print additional useful stats</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="4">Incomplete</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kannanm">Kannan Muthukkaruppan</reporter>
                        <labels>
                    </labels>
                <created>Mon, 30 Apr 2012 22:08:01 +0000</created>
                <updated>Sat, 11 Apr 2015 01:30:01 +0000</updated>
                            <resolved>Sat, 11 Apr 2015 01:30:01 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13265438" author="kannanm" created="Mon, 30 Apr 2012 22:08:10 +0000"  >&lt;p&gt;working on a patch for this.&lt;/p&gt;</comment>
                            <comment id="13265464" author="phabricator@reviews.facebook.net" created="Mon, 30 Apr 2012 22:35:45 +0000"  >&lt;p&gt;Kannan requested code review of &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5907&quot; title=&quot;enhance HLog pretty printer to print additional useful stats&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5907&quot;&gt;&lt;del&gt;HBASE-5907&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;89-fb&amp;#93;&lt;/span&gt; enhance HLog pretty printer to print additional useful stats&quot;.&lt;br/&gt;
Reviewers: Liyin, JIRA&lt;/p&gt;

&lt;p&gt;  It would be useful for analysis purposes to enhance the HLog pretty printer to optionally print a bunch of additional stats such as:&lt;/p&gt;

&lt;p&gt;  1) # of txns&lt;br/&gt;
  2) # of KVs updated&lt;br/&gt;
  3) avg size of txns&lt;br/&gt;
  4) avg size of KVs&lt;br/&gt;
  5) avg # of KVs written per txn&lt;br/&gt;
  5) unique CF signatures involved in put/delete operatons; and breakdown of some of the above metrics by these signatures, etc.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  unit tests&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2979&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2979&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogKey.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogPrettyPrinter.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/6783/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/6783/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13265469" author="phabricator@reviews.facebook.net" created="Mon, 30 Apr 2012 22:43:46 +0000"  >&lt;p&gt;Kannan updated the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5907&quot; title=&quot;enhance HLog pretty printer to print additional useful stats&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5907&quot;&gt;&lt;del&gt;HBASE-5907&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;89-fb&amp;#93;&lt;/span&gt; enhance HLog pretty printer to print additional useful stats&quot;.&lt;br/&gt;
Reviewers: Liyin, JIRA&lt;/p&gt;

&lt;p&gt;  remove unused imports&lt;/p&gt;


&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2979&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2979&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogKey.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogPrettyPrinter.java&lt;/p&gt;</comment>
                            <comment id="13265474" author="phabricator@reviews.facebook.net" created="Mon, 30 Apr 2012 22:51:48 +0000"  >&lt;p&gt;Liyin has accepted the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5907&quot; title=&quot;enhance HLog pretty printer to print additional useful stats&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5907&quot;&gt;&lt;del&gt;HBASE-5907&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;89-fb&amp;#93;&lt;/span&gt; enhance HLog pretty printer to print additional useful stats&quot;.&lt;/p&gt;

&lt;p&gt;  LGTM ! Thanks Kannan !&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2979&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2979&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  svn&lt;/p&gt;</comment>
                            <comment id="13265483" author="phabricator@reviews.facebook.net" created="Mon, 30 Apr 2012 23:01:46 +0000"  >&lt;p&gt;Kannan has added CCs to the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5907&quot; title=&quot;enhance HLog pretty printer to print additional useful stats&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5907&quot;&gt;&lt;del&gt;HBASE-5907&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;89-fb&amp;#93;&lt;/span&gt; enhance HLog pretty printer to print additional useful stats&quot;.&lt;br/&gt;
Added CCs: HBase Diffs Facebook Group&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2979&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2979&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  svn&lt;/p&gt;</comment>
                            <comment id="13266085" author="stack" created="Tue, 1 May 2012 20:53:05 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;Have you tried it against a few hlogs Kannan?&lt;/p&gt;</comment>
                            <comment id="13266664" author="kannanm" created="Wed, 2 May 2012 16:11:12 +0000"  >&lt;p&gt;Stack: Yes, I will post some sample output.&lt;/p&gt;</comment>
                            <comment id="13266739" author="kannanm" created="Wed, 2 May 2012 17:29:44 +0000"  >&lt;p&gt;Sample run:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
% bin/hbase org.apache.hadoop.hbase.regionserver.wal.HLog --dump &amp;lt;PathToHLog&amp;gt;  --analyze

=== SUMMARY ===
&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; of txns: 49398
&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; of KVs: 943861
Total Size of KVs: 244004297
Avg number of KVs/txn: 19
Avg size of txn: 4939
Avg size of KV: 258
Avg CFs written to per txn: 5
Txns/sec: 380
 KVs/sec: 7279
======= CF Level Stats ======
    # of KVs|CF Name
      372739 test_table:cf1
      257880 test_table:cf3
       82845 test_table:cf2
       72649 test_table:cf7
       38224 test_table:cf4
       36213 test_table:cf6
       29446 test_table:cf10
       26787 test_table:cf5
       26787 test_table:cf9
         288 test_table:cf8
           3 test_table:METAFAMILY
=====
Total KVSize|CF Name
    56814996 test_table:cf3
    51452389 test_table:cf6
    42377022 test_table:cf1
    39258289 test_table:cf4
    31404256 test_table:cf2
     9814939 test_table:cf7
     4727038 test_table:cf9
     4708267 test_table:cf10
     3412347 test_table:cf5
       34592 test_table:cf8
         162 test_table:METAFAMILY
=====
 == TxnCount|Put/Delete&apos;s CF Signature ==
       26602 test_table:[cf1, cf2, cf3, cf4, cf5, cf6, cf7, cf9, cf10]
       12247 test_table:[cf3]
        9311 test_table:[cf3, cf4, cf6]
         937 test_table:[cf3, cf4]
         176 test_table:[cf1, cf2, cf3, cf4, cf5, cf6, cf7, cf8, cf9, cf10]
         110 test_table:[cf2, cf3, cf4, cf6, cf7, cf8, cf10]
           9 test_table:[cf2, cf3, cf4, cf5, cf6, cf9, cf10]
           3 test_table:[METAFAMILY]
           2 test_table:[cf3, cf4, cf6, cf7]
           1 test_table:[cf3, cf8]
===========================
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13266904" author="phabricator@reviews.facebook.net" created="Wed, 2 May 2012 21:00:48 +0000"  >&lt;p&gt;mbautin has committed the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5907&quot; title=&quot;enhance HLog pretty printer to print additional useful stats&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5907&quot;&gt;&lt;del&gt;HBASE-5907&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;89-fb&amp;#93;&lt;/span&gt; enhance HLog pretty printer to print additional useful stats&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2979&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D2979&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMIT&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHBASEEIGHTNINEFBBRANCH1333198&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHBASEEIGHTNINEFBBRANCH1333198&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13267925" author="stack" created="Thu, 3 May 2012 23:07:16 +0000"  >&lt;p&gt;@Kannan That is pretty.  +1 again.  Let me know if you want me commit.&lt;/p&gt;</comment>
                            <comment id="13268900" author="kannanm" created="Sat, 5 May 2012 05:01:19 +0000"  >&lt;p&gt;@Stack: Sure, if you can help commit to trunk, please do. Thanks.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12525127" name="ASF.LICENSE.NOT.GRANTED--D2979.1.patch" size="12414" author="phabricator@reviews.facebook.net" created="Mon, 30 Apr 2012 22:35:46 +0000"/>
                            <attachment id="12525129" name="ASF.LICENSE.NOT.GRANTED--D2979.2.patch" size="12023" author="phabricator@reviews.facebook.net" created="Mon, 30 Apr 2012 22:43:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 30 Apr 2012 22:35:45 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>237588</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 32 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i016hr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4821</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>