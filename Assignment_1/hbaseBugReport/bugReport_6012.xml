<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:33:00 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6012/HBASE-6012.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6012] Handling RegionOpeningState for bulk assign</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6012</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Since &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5914&quot; title=&quot;Bulk assign regions in the process of ServerShutdownHandler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5914&quot;&gt;&lt;del&gt;HBASE-5914&lt;/del&gt;&lt;/a&gt;, we using bulk assign for SSH&lt;/p&gt;

&lt;p&gt;But in the bulk assign case if we get an ALREADY_OPENED case there is no one to clear the znode created by bulk assign. &lt;/p&gt;


&lt;p&gt;Another thing, when RS opening a list of regions, if one region is already in transition, it will throw RegionAlreadyInTransitionException and stop opening other regions.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12555948">HBASE-6012</key>
            <summary>Handling RegionOpeningState for bulk assign</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zjushch">chunhui shen</assignee>
                                    <reporter username="zjushch">chunhui shen</reporter>
                        <labels>
                    </labels>
                <created>Wed, 16 May 2012 03:07:24 +0000</created>
                <updated>Tue, 15 Oct 2013 04:46:46 +0000</updated>
                            <resolved>Tue, 19 Jun 2012 16:22:17 +0000</resolved>
                                    <version>0.95.2</version>
                                    <fixVersion>0.95.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="13276445" author="ram_krish" created="Wed, 16 May 2012 04:27:42 +0000"  >&lt;p&gt;@Chunhi&lt;br/&gt;
You mean this change is applicable to trunk alone where &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5914&quot; title=&quot;Bulk assign regions in the process of ServerShutdownHandler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5914&quot;&gt;&lt;del&gt;HBASE-5914&lt;/del&gt;&lt;/a&gt; has gone in?&lt;/p&gt;</comment>
                            <comment id="13276467" author="zjushch" created="Wed, 16 May 2012 05:08:38 +0000"  >&lt;p&gt;@ram&lt;br/&gt;
Yes, we found this issue after &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5914&quot; title=&quot;Bulk assign regions in the process of ServerShutdownHandler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5914&quot;&gt;&lt;del&gt;HBASE-5914&lt;/del&gt;&lt;/a&gt;. &lt;br/&gt;
Without &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5914&quot; title=&quot;Bulk assign regions in the process of ServerShutdownHandler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5914&quot;&gt;&lt;del&gt;HBASE-5914&lt;/del&gt;&lt;/a&gt;, I think it wouldn&apos;t happen when bulk assigning&lt;/p&gt;</comment>
                            <comment id="13276470" author="ram_krish" created="Wed, 16 May 2012 05:14:30 +0000"  >&lt;p&gt;@Chunhuui&lt;br/&gt;
We observed similar problems when we tried to work on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5917&quot; title=&quot;Hbase customer filter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5917&quot;&gt;&lt;del&gt;HBASE-5917&lt;/del&gt;&lt;/a&gt;.  Hence in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5917&quot; title=&quot;Hbase customer filter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5917&quot;&gt;&lt;del&gt;HBASE-5917&lt;/del&gt;&lt;/a&gt; we have tried to handle one such issue.  We are trying to see if any such problems can happen.&lt;br/&gt;
Because in normal assign flow we have many conditions added for various scenarios but the same doesn&apos;t apply in bulk assign.  Will keep you updated on that.&lt;/p&gt;

&lt;p&gt;Mentioned the issue id wrongly. it is &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5927&quot; title=&quot;SSH and DisableTableHandler happening together does not clear the znode of the region and RIT map.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5927&quot;&gt;&lt;del&gt;HBASE-5927&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;
{edit}&lt;br/&gt;
We observed similar problems when we tried to work on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5927&quot; title=&quot;SSH and DisableTableHandler happening together does not clear the znode of the region and RIT map.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5927&quot;&gt;&lt;del&gt;HBASE-5927&lt;/del&gt;&lt;/a&gt;.  Hence in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5927&quot; title=&quot;SSH and DisableTableHandler happening together does not clear the znode of the region and RIT map.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5927&quot;&gt;&lt;del&gt;HBASE-5927&lt;/del&gt;&lt;/a&gt; we have tried to handle one such issue.  We are trying to see if any such problems can happen.&lt;br/&gt;
Because in normal assign flow we have many conditions added for various scenarios but the same doesn&apos;t apply in bulk assign.  Will keep you updated on that.{edit}</comment>
                            <comment id="13276488" author="zjushch" created="Wed, 16 May 2012 05:36:36 +0000"  >&lt;p&gt;@ram&lt;br/&gt;
Do you mean about &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (setOfflineInZK) {
        &lt;span class=&quot;code-comment&quot;&gt;// get the version of the znode after setting it to OFFLINE.
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// versionOfOfflineNode will be -1 &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the znode was not set to OFFLINE
&lt;/span&gt;        versionOfOfflineNode = setOfflineInZooKeeper(state, hijack);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (versionOfOfflineNode != -1) {
          &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (isDisabledorDisablingRegionInRIT(region)) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
          }
          setEnabledTable(region);
        }
      }
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (setOfflineInZK &amp;amp;&amp;amp; versionOfOfflineNode == -1) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
      }&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When we bulk assign region, should we check each region? Could we ensure it in the upper layer who called the bulk assign.&lt;/p&gt;
</comment>
                            <comment id="13276495" author="ram_krish" created="Wed, 16 May 2012 05:48:08 +0000"  >&lt;p&gt;@Chunhui&lt;br/&gt;
Yes and not only that one&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!hijack &amp;amp;&amp;amp; isDisabledorDisablingRegionInRIT(region)) {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So once assign is called immediately the disable and disabling will be taken care of.  &lt;/p&gt;</comment>
                            <comment id="13276528" author="zjushch" created="Wed, 16 May 2012 07:03:15 +0000"  >&lt;p&gt;@ram&lt;br/&gt;
I think we should take care of the disable and disabling table before called bulk assign&lt;/p&gt;</comment>
                            <comment id="13285698" author="ram_krish" created="Wed, 30 May 2012 14:27:31 +0000"  >&lt;p&gt;I think this change we need to get into trunk after reviews for the SSH part to work fine introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5914&quot; title=&quot;Bulk assign regions in the process of ServerShutdownHandler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5914&quot;&gt;&lt;del&gt;HBASE-5914&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13287416" author="ram_krish" created="Fri, 1 Jun 2012 14:00:08 +0000"  >&lt;p&gt;@Chunhui&lt;br/&gt;
Please check the issue &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6147&quot; title=&quot;SSH and AM.joinCluster leads to region assignment inconsistency in many cases.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6147&quot;&gt;&lt;del&gt;HBASE-6147&lt;/del&gt;&lt;/a&gt;.  Along with the scenario mentioned there if we take the current patch here I feel the following problem can come&lt;br/&gt;
-&amp;gt; Because as per the current patch attached here ,we force the znode to OFFLINE state,  if there was any current assignment going on due to SSH in one of the RS that will get stopped because of znode version mismatch.&lt;br/&gt;
Internally that failure to OPEN regin will make the znode to FAILED_OPEN.  Now based on this master will again start a new assignment. So this along with the issue in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6147&quot; title=&quot;SSH and AM.joinCluster leads to region assignment inconsistency in many cases.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6147&quot;&gt;&lt;del&gt;HBASE-6147&lt;/del&gt;&lt;/a&gt; may lead to double assignment.  So what we felt here is this patch should go along with some changes in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6147&quot; title=&quot;SSH and AM.joinCluster leads to region assignment inconsistency in many cases.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6147&quot;&gt;&lt;del&gt;HBASE-6147&lt;/del&gt;&lt;/a&gt;.  &lt;br/&gt;
Pls feel free to correct me if am wrong.&lt;/p&gt;</comment>
                            <comment id="13288322" author="zjushch" created="Mon, 4 Jun 2012 02:59:24 +0000"  >&lt;p&gt;@ram&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;one of the RS that will get stopped because of znode version mismatch&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, I has found this error case.&lt;/p&gt;

&lt;p&gt;In my opinion, when doing asyncSetOfflineInZooKeeper, if node exists, I delete it first. &lt;/p&gt;

&lt;p&gt;Done in patch v2.&lt;/p&gt;

</comment>
                            <comment id="13288597" author="ram_krish" created="Mon, 4 Jun 2012 14:42:33 +0000"  >&lt;p&gt;@Chunhui&lt;br/&gt;
But deleting the node, what improvment we get here? Still the scenario that i was mentioning may happen right? &lt;br/&gt;
Correct me if am wrong.&lt;/p&gt;</comment>
                            <comment id="13289054" author="zjushch" created="Tue, 5 Jun 2012 01:25:44 +0000"  >&lt;p&gt;@ram&lt;br/&gt;
If deleting the node first, znode version mismatch won&apos;t happen and RS could open region successfully.&lt;br/&gt;
Existing nodes is small probability case, so we can ignore it when measure improvment.&lt;/p&gt;

&lt;p&gt;Anyway, about the double assignment, I think we should fix it through &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6147&quot; title=&quot;SSH and AM.joinCluster leads to region assignment inconsistency in many cases.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6147&quot;&gt;&lt;del&gt;HBASE-6147&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;This issue tries to fix the case node exists when doing AssignmentManager#asyncSetOfflineInZooKeeper, is it right?&lt;/p&gt;</comment>
                            <comment id="13289141" author="stack" created="Tue, 5 Jun 2012 04:23:25 +0000"  >&lt;p&gt;Chunhui This method is only called bulk assigning?  Why would there be a znode at all if we are bulk assigning?  Should we do cleanup of znode state before we bulk assign?  The delete of the znode ahead of forcing it offline makes me nervous.  If this issue only started showing up because we added bulk assigning to SSH (hbase-5914), then maybe in SSH before we do the bulk assign, we should be doing the clean of zk and not do this delete and then offline?  What you think?&lt;/p&gt;</comment>
                            <comment id="13289144" author="ram_krish" created="Tue, 5 Jun 2012 04:30:54 +0000"  >&lt;p&gt;@Stack&lt;br/&gt;
Yes I agree with you.  &lt;br/&gt;
@Chunhui&lt;br/&gt;
The problem mainly i am worried is in the bulk assign case if we get an ALREADY_OPENED case there is no one to clear the znode created by bulk assign.  So if we try to do like delete and force it to offline still the nodes will keep exisiting in zk.&lt;br/&gt;
This change is actually very much needed and important now, but just need to make sure we don&apos;t create open areas. Good on you Chunhui.&lt;/p&gt;</comment>
                            <comment id="13289189" author="zjushch" created="Tue, 5 Jun 2012 06:11:36 +0000"  >&lt;p&gt;@ram&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;The problem mainly i am worried is in the bulk assign case if we get an ALREADY_OPENED case&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, in the current code , we don&apos;t handle the reponses from sendRegionOpen RPC in the bulk assign.&lt;br/&gt;
So we must also handle reponses for bulking assign. &lt;/p&gt;

&lt;p&gt;Another problem is that RS will throw RegionAlreadyInTransitionException in bulking assign, it means one exception would stop all the regions&apos;s opening.&lt;/p&gt;</comment>
                            <comment id="13290045" author="zjushch" created="Wed, 6 Jun 2012 09:21:17 +0000"  >&lt;p&gt;Updating patch,&lt;br/&gt;
fetch Stack&apos;s and ram&apos;s suggestion in&lt;/p&gt;</comment>
                            <comment id="13290075" author="ram_krish" created="Wed, 6 Jun 2012 10:51:27 +0000"  >&lt;p&gt;@Chunhui&lt;br/&gt;
Great stuff.&lt;/p&gt;

&lt;p&gt;&apos;alreadyOpendRegion&apos; should be &apos;processAlreadyOpenedRegion&apos;.&lt;br/&gt;
In the sendRegionOpen()  in the patch&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (admin == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
      LOG.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Attempting to send OPEN RPC to server &quot;&lt;/span&gt; + server.toString() +
        &lt;span class=&quot;code-quote&quot;&gt;&quot; failed because no RPC connection found to &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; server&quot;&lt;/span&gt;);
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;we may need to handle FAILED_OPEN also.  May be it was not present but i think handling it here is necessary or else the znode will be created and no one will delete the znode. And subsequent bulk assign may cause the same issue reported here.&lt;br/&gt;
Others are great.  Lets see others reviews also.  Thanks Chunhui.&lt;/p&gt;</comment>
                            <comment id="13290077" author="ram_krish" created="Wed, 6 Jun 2012 10:54:59 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
            }&lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (KeeperException ke) {
                    &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IOException(ke);
                  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This may not be correct I feel. Throwing exception from here will just kill the SSH thread. And may not carry on with assignment.  What you feel? Can we abort master?&lt;/p&gt;</comment>
                            <comment id="13290254" author="zhihyu@ebaysf.com" created="Wed, 6 Jun 2012 16:40:29 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+          List&amp;lt;RegionOpeningState&amp;gt; regionOpeningStateList = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.serverManager
+              .sendRegionOpen(destination, regions);
+          &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; regionOpeningStateList.size(); i++) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Should we check whether the return from sendRegionOpen() is null ?&lt;/p&gt;

&lt;p&gt;In ServerShutdownHandler.java:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(rit != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;){
+                  &lt;span class=&quot;code-comment&quot;&gt;//clean zk node
&lt;/span&gt;+                  &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt;{
+                    ZKAssign.deleteNodeFailSilent(services.getZooKeeper(), e.getKey());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Log statement should be added that reveals the value of rit.&lt;/p&gt;</comment>
                            <comment id="13290773" author="zjushch" created="Thu, 7 Jun 2012 03:59:11 +0000"  >&lt;p&gt;Updating patch v4&#65292;&lt;br/&gt;
fetching Ted&apos;s and Ram&apos;s comments in&lt;br/&gt;
handling RegionOpeningState.FAILED_OPENING&lt;/p&gt;</comment>
                            <comment id="13290790" author="ram_krish" created="Thu, 7 Jun 2012 04:52:32 +0000"  >&lt;p&gt;@Chunhui&lt;br/&gt;
Minor comments&lt;br/&gt;
It should be &apos;processAlreadyOpenedRegion&apos;, i think you forgot to add &apos;e&apos; in &apos;opened&apos;. Currently it is processAlreadyOpendRegion&lt;br/&gt;
&apos;Reassigning region with rs=&apos; should be &apos;Reassigning region with rs =&apos; (a space is needed).&lt;/p&gt;

&lt;p&gt;Any specific reason for making this change now?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (HRegionInfo region : reassigningRegions) {
        assign(region, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
      }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// Failed opening &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; region, reassign it
&lt;/span&gt;              assign(regions.get(i), &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;before doing this can we call getRegionPlan() passing the current server on which failure happened so that i can be excluded.(May not be mandatory).&lt;/p&gt;

&lt;p&gt;Overall looks good. Thanks Chunhui.&lt;/p&gt;
</comment>
                            <comment id="13290793" author="zjushch" created="Thu, 7 Jun 2012 05:00:03 +0000"  >&lt;p&gt;@ram&lt;br/&gt;
Thanks to reviewe,&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Any specific reason for making this change now?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;For the failed regions through bulk assigning, we already created zk node, it will fail again if using bulk assign.&lt;/p&gt;</comment>
                            <comment id="13290795" author="zjushch" created="Thu, 7 Jun 2012 05:06:34 +0000"  >&lt;p&gt;Getting ram&apos;s comment about name and log,&lt;br/&gt;
updating patch v5.&lt;/p&gt;

&lt;p&gt;@ram&lt;br/&gt;
Could you make it run by hadoopQA&lt;/p&gt;</comment>
                            <comment id="13290799" author="ram_krish" created="Thu, 7 Jun 2012 05:23:35 +0000"  >&lt;blockquote&gt;&lt;p&gt;For the failed regions through bulk assigning, we already created zk node, it will fail again if using bulk assign.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Ok. Got it.&lt;/p&gt;</comment>
                            <comment id="13291122" author="zhihyu@ebaysf.com" created="Thu, 7 Jun 2012 16:53:58 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
       LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Unable to communicate with the region server in order&quot;&lt;/span&gt; +
           &lt;span class=&quot;code-quote&quot;&gt;&quot; to assign regions&quot;&lt;/span&gt;, e);
-      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
+      &lt;span class=&quot;code-comment&quot;&gt;// Server may already get RPC
&lt;/span&gt;+      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;What was the reasoning behind the above change ?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-      &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
-        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!assign(e.getKey(), e.getValue())) {
-          failedPlans.put(e.getKey(), e.getValue());
-        }
-      } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Throwable t) {
+      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!assign(e.getKey(), e.getValue())) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I think the catch clause should be kept.&lt;/p&gt;

&lt;p&gt;For HRegionServer.java, there&apos;re a lot of formatting changes which distract reviewing.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (RegionAlreadyInTransitionException rie) {
+        LOG.warn(&quot;&quot;, rie);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Please add some sentence for the log above.&lt;/p&gt;</comment>
                            <comment id="13291159" author="ram_krish" created="Thu, 7 Jun 2012 17:49:42 +0000"  >&lt;p&gt;@Chunhui&lt;br/&gt;
As Ted suggested pls correct the formatting changes like for eg&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(rit != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;){
+                  &lt;span class=&quot;code-comment&quot;&gt;//clean zk node
&lt;/span&gt;+                  &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt;{
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13292711" author="zjushch" created="Mon, 11 Jun 2012 09:35:44 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// Can be a socket timeout, EOF, NoRouteToHost, etc
&lt;/span&gt;LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Unable to communicate with the region server in order&quot;&lt;/span&gt; +
           &lt;span class=&quot;code-quote&quot;&gt;&quot; to assign regions&quot;&lt;/span&gt;, e);
-      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
+      &lt;span class=&quot;code-comment&quot;&gt;// Server may already get RPC
&lt;/span&gt;+      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;blockquote&gt;&lt;p&gt;What was the reasoning behind the above change ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;At first, I think we can&apos;t ensure regionserver not receive the OPENREGION rpc, in order to prevent double assign, so I make this change. Also here could return false because of protecting through single assign.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RegionAlreadyInTransitionException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Received:&quot;&lt;/span&gt; + currentAction +
        &lt;span class=&quot;code-quote&quot;&gt;&quot; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the region:&quot;&lt;/span&gt; + region.getRegionNameAsString() +
        &lt;span class=&quot;code-quote&quot;&gt;&quot; ,which we are already trying to &quot;&lt;/span&gt; +
        (openAction ? OPEN : CLOSE)+ &lt;span class=&quot;code-quote&quot;&gt;&quot;.&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;&lt;p&gt;Please add some sentence for the log above.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We have added message about it in RegionAlreadyInTransitionException, so I think we needn&apos;t add again.&lt;/p&gt;

&lt;p&gt;For other comments, I update it in patch v6.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="13292715" author="zjushch" created="Mon, 11 Jun 2012 09:43:21 +0000"  >&lt;p&gt;Created a Review Request with the patch v6.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://review.cloudera.org/r/2132/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://review.cloudera.org/r/2132/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Could you review again? Thanks.&lt;/p&gt;
</comment>
                            <comment id="13292718" author="zjushch" created="Mon, 11 Jun 2012 09:47:46 +0000"  >&lt;p&gt;e...I find I can&apos;t upload diff for Review Request...&lt;/p&gt;

&lt;p&gt;Is it a server&apos;s error?&lt;/p&gt;</comment>
                            <comment id="13292742" author="zjushch" created="Mon, 11 Jun 2012 10:41:50 +0000"  >&lt;p&gt;The above Review Request is discarded&lt;/p&gt;

&lt;p&gt;New:&lt;br/&gt;
&lt;a href=&quot;https://review.cloudera.org/r/2136/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://review.cloudera.org/r/2136/&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="13292868" author="zhihyu@ebaysf.com" created="Mon, 11 Jun 2012 16:38:52 +0000"  >&lt;p&gt;@Chunhui:&lt;br/&gt;
Hadoop QA is not functioning. Can you run the whole test suite and post the result ?&lt;/p&gt;</comment>
                            <comment id="13293267" author="hadoopqa" created="Tue, 12 Jun 2012 01:48:19 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12531650/HBASE-6012v6.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12531650/HBASE-6012v6.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 5 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.master.TestAssignmentManager&lt;br/&gt;
                  org.apache.hadoop.hbase.master.TestZKBasedOpenCloseRegion&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2137//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2137//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2137//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2137//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2137//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2137//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2137//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2137//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13293270" author="zhihyu@ebaysf.com" created="Tue, 12 Jun 2012 01:51:43 +0000"  >&lt;p&gt;There was NPE in TestAssignmentManager#testSSHWhenSplitRegionInProgress&lt;br/&gt;
Please fix.&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="13293313" author="zjushch" created="Tue, 12 Jun 2012 03:32:47 +0000"  >&lt;p&gt;Updating patchv7, fix the two failed test case&lt;/p&gt;</comment>
                            <comment id="13293320" author="zjushch" created="Tue, 12 Jun 2012 03:50:02 +0000"  >&lt;p&gt;Updating patch v8, fetch ted&apos;s review board comments in&lt;/p&gt;</comment>
                            <comment id="13293343" author="hadoopqa" created="Tue, 12 Jun 2012 04:40:26 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12531768/HBASE-6012v8.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12531768/HBASE-6012v8.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 5 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.regionserver.TestAtomicOperation&lt;br/&gt;
                  org.apache.hadoop.hbase.replication.TestReplication&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2141//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2141//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2141//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2141//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2141//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2141//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2141//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2141//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13293356" author="zhihyu@ebaysf.com" created="Tue, 12 Jun 2012 05:03:32 +0000"  >&lt;p&gt;I ran the two failed tests manually and they passed.&lt;/p&gt;

&lt;p&gt;Will integrate tomorrow if there is no objection.&lt;/p&gt;</comment>
                            <comment id="13293371" author="hadoopqa" created="Tue, 12 Jun 2012 05:44:58 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12531768/HBASE-6012v8.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12531768/HBASE-6012v8.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 5 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2143//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2143//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2143//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2143//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2143//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2143//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2143//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2143//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13293668" author="zhihyu@ebaysf.com" created="Tue, 12 Jun 2012 14:49:05 +0000"  >&lt;p&gt;Integrated to trunk.&lt;/p&gt;

&lt;p&gt;Thanks for the patch, Chunhui.&lt;/p&gt;

&lt;p&gt;Thanks for the review, Stack and Ram.&lt;/p&gt;</comment>
                            <comment id="13293793" author="hudson" created="Tue, 12 Jun 2012 17:31:26 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3014 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3014/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3014/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6012&quot; title=&quot;Handling RegionOpeningState for bulk assign&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6012&quot;&gt;&lt;del&gt;HBASE-6012&lt;/del&gt;&lt;/a&gt; Handling RegionOpeningState for bulk assign (Chunhui) (Revision 1349377)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/ServerManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/handler/ServerShutdownHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/protobuf/ResponseConverter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestAssignmentManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13294012" author="hudson" created="Wed, 13 Jun 2012 00:07:16 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #51 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/51/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/51/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6012&quot; title=&quot;Handling RegionOpeningState for bulk assign&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6012&quot;&gt;&lt;del&gt;HBASE-6012&lt;/del&gt;&lt;/a&gt; Handling RegionOpeningState for bulk assign (Chunhui) (Revision 1349377)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/ServerManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/handler/ServerShutdownHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/protobuf/ResponseConverter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestAssignmentManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13775378" author="stack" created="Mon, 23 Sep 2013 18:31:23 +0000"  >&lt;p&gt;Marking closed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12553586">HBASE-5914</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12613222">HBASE-7039</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12527558" name="HBASE-6012.patch" size="3923" author="zjushch" created="Wed, 16 May 2012 03:17:46 +0000"/>
                            <attachment id="12530718" name="HBASE-6012v2.patch" size="2528" author="zjushch" created="Mon, 4 Jun 2012 03:00:12 +0000"/>
                            <attachment id="12531084" name="HBASE-6012v3.patch" size="10640" author="zjushch" created="Wed, 6 Jun 2012 09:21:17 +0000"/>
                            <attachment id="12531213" name="HBASE-6012v4.patch" size="15773" author="zjushch" created="Thu, 7 Jun 2012 03:59:11 +0000"/>
                            <attachment id="12531218" name="HBASE-6012v5.patch" size="15689" author="zjushch" created="Thu, 7 Jun 2012 05:06:34 +0000"/>
                            <attachment id="12531650" name="HBASE-6012v6.patch" size="15257" author="zjushch" created="Mon, 11 Jun 2012 09:37:51 +0000"/>
                            <attachment id="12531766" name="HBASE-6012v7.patch" size="16385" author="zjushch" created="Tue, 12 Jun 2012 03:32:47 +0000"/>
                            <attachment id="12531768" name="HBASE-6012v8.patch" size="16482" author="zjushch" created="Tue, 12 Jun 2012 03:50:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 16 May 2012 04:27:42 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>245432</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i068hj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34306</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.96notable</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>