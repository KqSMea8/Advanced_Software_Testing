<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:22:23 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-11352/HBASE-11352.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-11352] When HMaster starts up it deletes the tmp snapshot directory, if you are exporting a snapshot at that time the job will fail</title>
                <link>https://issues.apache.org/jira/browse/HBASE-11352</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;We are exporting a very large table.  The export snapshot job takes 7+ days to complete.  During that time we had to bounce HMaster.  When HMaster initializes, it initializes the SnapshotManager which subsequently deletes the .tmp directory.&lt;/p&gt;

&lt;p&gt;If this happens while the ExportSnapshot job is running the reference files get removed and the job fails.&lt;/p&gt;

&lt;p&gt;Maybe we could put some sort of token such that when this job is running HMaster wont reset the tmp directory.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12721208">HBASE-11352</key>
            <summary>When HMaster starts up it deletes the tmp snapshot directory, if you are exporting a snapshot at that time the job will fail</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="churromorales">churro morales</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 Jun 2014 22:35:40 +0000</created>
                <updated>Tue, 23 Feb 2016 17:38:39 +0000</updated>
                            <resolved>Tue, 23 Feb 2016 17:38:39 +0000</resolved>
                                    <version>0.94.19</version>
                                                        <due></due>
                            <votes>1</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="14041307" author="churromorales" created="Mon, 23 Jun 2014 21:03:54 +0000"  >&lt;p&gt;Created a configuration option for expiration of in progress snapshots, now master checks this as well as the modified timestamp for the snapshotInProgress and only deletes when the snapshot is expired.  Thought 30 days would be a conservative starting value.&lt;/p&gt;

&lt;p&gt;This really hurt us when we did an ExportSnapshot that took 1+ week to complete.&lt;/p&gt;</comment>
                            <comment id="14041325" author="yuzhihong@gmail.com" created="Mon, 23 Jun 2014 21:15:43 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; SNAPSHOT_INPROGRESS_EXPIRATION_MILLIS_KEY = 
+          &lt;span class=&quot;code-quote&quot;&gt;&quot;hbase.snapshot.inProgress.expiration.timeMillis&quot;&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Expiration would be measured in days. Maybe use different unit for the above config ?&lt;/p&gt;

&lt;p&gt;There&apos;re long lines in the patch - line length should be 100 or shorter.&lt;/p&gt;</comment>
                            <comment id="14042725" author="churromorales" created="Tue, 24 Jun 2014 21:36:34 +0000"  >&lt;p&gt;Fixed the long log lines and updated the expiration time to hours.&lt;/p&gt;</comment>
                            <comment id="14042736" author="yuzhihong@gmail.com" created="Tue, 24 Jun 2014 21:42:54 +0000"  >&lt;p&gt;Can you attach patch for trunk ?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="15159262" author="churromorales" created="Tue, 23 Feb 2016 17:38:39 +0000"  >&lt;p&gt;In newer versions of HBase you can just select the skipTmp option when Exporting Snapshots this will resolve this issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12652061" name="HBASE-11352-0.94.patch" size="10642" author="churromorales" created="Mon, 23 Jun 2014 21:03:54 +0000"/>
                            <attachment id="12652293" name="HBASE-11352-v2.0.94.patch" size="3941" author="churromorales" created="Tue, 24 Jun 2014 21:36:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 23 Jun 2014 21:15:43 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>399404</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            42 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1wr9z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>399513</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>