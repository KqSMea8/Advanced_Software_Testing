<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:17:43 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-4304/HBASE-4304.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-4304] requestsPerSecond counter stuck at 0</title>
                <link>https://issues.apache.org/jira/browse/HBASE-4304</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Running trunk @ r1163343, all of the requestsPerSecond counters are showing 0 both in the master UI and in the RS UI. The writeRequestsCount metric is properly updating in the RS UI.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12520831">HBASE-4304</key>
            <summary>requestsPerSecond counter stuck at 0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="li">Li Pi</assignee>
                                    <reporter username="tlipcon">Todd Lipcon</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Aug 2011 20:45:05 +0000</created>
                <updated>Fri, 20 Nov 2015 11:54:17 +0000</updated>
                            <resolved>Fri, 28 Oct 2011 06:09:11 +0000</resolved>
                                    <version>0.92.0</version>
                                    <fixVersion>0.92.0</fixVersion>
                                    <component>master</component>
                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13100252" author="subramanian" created="Thu, 8 Sep 2011 12:11:04 +0000"  >&lt;p&gt;I want to provide my analysis &amp;amp; background since its relatd to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3807&quot; title=&quot;Fix units in RS UI metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3807&quot;&gt;&lt;del&gt;HBASE-3807&lt;/del&gt;&lt;/a&gt; fixed &lt;br/&gt;
by me earlier&lt;/p&gt;

&lt;p&gt;1) Previously the problem was present only in the region server.  &lt;/p&gt;

&lt;p&gt;As part of defect &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3807&quot; title=&quot;Fix units in RS UI metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3807&quot;&gt;&lt;del&gt;HBASE-3807&lt;/del&gt;&lt;/a&gt;:Fix units in RS UI metrics &lt;/p&gt;

&lt;p&gt;I had changed the HServerLoad also to use the region server metrics and made it to be consistent as  &lt;font color=&quot;green&quot;&gt;requestPerSecond &lt;/font&gt;.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HServerLoad(requestCount.get(),(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;)metrics.getRequests(),
      (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;)(memory.getUsed() / 1024 / 1024),
      (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) (memory.getMax() / 1024 / 1024), regionLoads);      
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Request per second value derived from here :&lt;font color=&quot;green&quot;&gt;(int)metrics.getRequests()&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;2) But what i missed to find out was the region server metrics itself was not functioning properly.&lt;/p&gt;

&lt;p&gt;Digged in and found following things.&lt;/p&gt;

&lt;p&gt;1) HRegionServer.run() method is the major source of value provided for request.It runs by default every three seconds &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ((now - lastMsg) &amp;gt;= msgInterval) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The request count is populated here into the metrics as part of the doMetrics method.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.metrics.incrementRequests(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.requestCount.get())
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;will go and update the metrics rate thro the method &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; void inc(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; incr) {
    value += incr;
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;  

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;This gives the request received between the previous run and current run.&lt;/font&gt;  &lt;/p&gt;

&lt;p&gt;But the request per second value will be populated only when the following piece gets executed of the class MetricsRate &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; void intervalHeartBeat() {
    &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; now = &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.currentTimeMillis();
    &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; diff = (now-ts)/1000;
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (diff == 0) diff = 1; &lt;span class=&quot;code-comment&quot;&gt;// sigh &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is crap.
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.prevRate = (&lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt;)value / diff;
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.value = 0;
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.ts = now;
  }
  
    @Override
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; void pushMetric(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; MetricsRecord mr) {
    intervalHeartBeat();
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      mr.setMetric(getName(), getPreviousIntervalValue());
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
      LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;pushMetric failed &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &quot;&lt;/span&gt; + getName() + &lt;span class=&quot;code-quote&quot;&gt;&quot;\n&quot;&lt;/span&gt; +
          StringUtils.stringifyException(e));
    }
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt; pushMetric wont be invoked by default since the metrics won&apos;t be enabled by default &lt;br/&gt;
hbase.class=org.apache.hadoop.metrics.spi.NullContext.&lt;br/&gt;
Please do correct me if i am  wrong here&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;So ideally the value is always displayed as zero.&lt;/p&gt;</comment>
                            <comment id="13100261" author="subramanian" created="Thu, 8 Sep 2011 12:22:39 +0000"  >&lt;p&gt;What i felt as corrective action could be is like :&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void metrics() {
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.metrics.regions.set(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.onlineRegions.size());
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.metrics.incrementRequests(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.requestCount.get());
    &lt;span class=&quot;code-comment&quot;&gt;//TODO:compute the request per second here  &lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;//TODO:compute the request per second here &lt;/font&gt;&lt;/p&gt;

&lt;p&gt;So the the request per second value will be fixed till the next run &lt;br/&gt;
which will be recalculated in the next run and the counter is reset to zero as part of &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 void tryRegionServerReport()
  &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    HServerLoad hsl = buildServerLoad();
    &lt;span class=&quot;code-comment&quot;&gt;// Why we &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;?
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.requestCount.set(0); 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;But this has a contradiction with the usage of context based metrics update , when the context is enabled. &lt;br/&gt;
There could be a chance of race in the computation of the value. &lt;br/&gt;
The race will be resetting of the value to zero {this.value = 0;}&lt;br/&gt;
after computation &lt;/font&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; void intervalHeartBeat() {
    &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; now = &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.currentTimeMillis();
    &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; diff = (now-ts)/1000;
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (diff == 0) diff = 1; &lt;span class=&quot;code-comment&quot;&gt;// sigh &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is crap.
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.prevRate = (&lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt;)value / diff;
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.value = 0;
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.ts = now;
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13100263" author="subramanian" created="Thu, 8 Sep 2011 12:24:20 +0000"  >&lt;p&gt;@LiPi are you working on this patch?&lt;/p&gt;</comment>
                            <comment id="13100552" author="li" created="Thu, 8 Sep 2011 18:34:08 +0000"  >&lt;p&gt;Yup. Its on my barnburner. But I do intend to complete it.&lt;br/&gt;
On Sep 8, 2011 5:26 AM, &quot;subramanian raghunathan (JIRA)&quot; &amp;lt;jira@apache.org&amp;gt;&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4304?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&amp;amp;focusedCommentId=13100263#comment-13100263&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-4304?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&amp;amp;focusedCommentId=13100263#comment-13100263&lt;/a&gt;]&lt;br/&gt;
showing 0 both in the master UI and in the RS UI. The writeRequestsCount&lt;br/&gt;
metric is properly updating in the RS UI.&lt;/p&gt;</comment>
                            <comment id="13107569" author="li" created="Mon, 19 Sep 2011 00:27:19 +0000"  >&lt;p&gt;Working on this now. I see it being updated at :this.metrics.readRequestsCount.set(readRequestsCount);&lt;/p&gt;</comment>
                            <comment id="13134801" author="stack" created="Tue, 25 Oct 2011 07:15:10 +0000"  >&lt;p&gt;@Li Any update on this one boss?&lt;/p&gt;</comment>
                            <comment id="13135534" author="li@idle.li" created="Tue, 25 Oct 2011 23:06:32 +0000"  >&lt;p&gt;On it!&lt;/p&gt;

&lt;p&gt;On Tue, Oct 25, 2011 at 12:16 AM, stack (Commented) (JIRA)&lt;/p&gt;</comment>
                            <comment id="13136696" author="li" created="Thu, 27 Oct 2011 01:57:46 +0000"  >&lt;p&gt;fixed.&lt;/p&gt;</comment>
                            <comment id="13136715" author="hadoopqa" created="Thu, 27 Oct 2011 02:11:35 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12501015/4304v1.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12501015/4304v1.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/76//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/76//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13136726" author="li" created="Thu, 27 Oct 2011 02:29:24 +0000"  >&lt;p&gt;Do these patches need to svn patches?&lt;/p&gt;</comment>
                            <comment id="13136740" author="tlipcon" created="Thu, 27 Oct 2011 03:01:38 +0000"  >&lt;p&gt;Try &quot;git show --no-prefix&quot; or &quot;git diff --no-prefix&quot; instead. That way it will apply with patch -p0 and should work in test-patch (if it&apos;s like Hadoop&apos;s old test-patch script)&lt;/p&gt;</comment>
                            <comment id="13136841" author="stack" created="Thu, 27 Oct 2011 06:42:41 +0000"  >&lt;p&gt;@Li Yeah.  Svn for now.  Do what Mr. Todd says.&lt;/p&gt;</comment>
                            <comment id="13136842" author="stack" created="Thu, 27 Oct 2011 06:43:48 +0000"  >&lt;p&gt;@Li Click the &apos;Cancel Patch&apos; at the head of his JIRA, upload your --no-prefix git thingy, then submit the patch again.&lt;/p&gt;</comment>
                            <comment id="13136851" author="li" created="Thu, 27 Oct 2011 07:05:52 +0000"  >&lt;p&gt;done. going to sleep now.&lt;/p&gt;</comment>
                            <comment id="13136920" author="hadoopqa" created="Thu, 27 Oct 2011 09:08:52 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12501046/4304v2.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12501046/4304v2.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -167 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.metrics.TestMetricsMBeanBase&lt;br/&gt;
                  org.apache.hadoop.hbase.master.TestDistributedLogSplitting&lt;br/&gt;
                  org.apache.hadoop.hbase.coprocessor.TestRegionServerCoprocessorExceptionWithAbort&lt;br/&gt;
                  org.apache.hadoop.hbase.coprocessor.TestMasterObserver&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/77//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/77//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/77//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/77//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/77//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/77//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13137152" author="yuzhihong@gmail.com" created="Thu, 27 Oct 2011 13:53:34 +0000"  >&lt;p&gt;@Li:&lt;br/&gt;
Please address TestMetricsMBeanBase first.&lt;/p&gt;</comment>
                            <comment id="13137316" author="li" created="Thu, 27 Oct 2011 17:37:13 +0000"  >&lt;p&gt;Fixed tests.&lt;/p&gt;</comment>
                            <comment id="13137445" author="hadoopqa" created="Thu, 27 Oct 2011 19:49:39 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12501125/4304v3.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12501125/4304v3.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -167 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.master.TestDistributedLogSplitting&lt;br/&gt;
                  org.apache.hadoop.hbase.master.TestMasterFailover&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/80//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/80//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/80//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/80//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/80//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/80//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13137447" author="li" created="Thu, 27 Oct 2011 19:53:34 +0000"  >&lt;p&gt;My testing shows &lt;/p&gt;

&lt;p&gt;org.apache.hadoop.hbase.master.TestDistributedLogSplitting&lt;br/&gt;
org.apache.hadoop.hbase.master.TestMasterFailover&lt;/p&gt;

&lt;p&gt;fails anyways.&lt;/p&gt;</comment>
                            <comment id="13137461" author="stack" created="Thu, 27 Oct 2011 20:06:10 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
     &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; now = &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.currentTimeMillis();
     &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; diff = (now-ts)/1000;
-    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (diff == 0) diff = 1; &lt;span class=&quot;code-comment&quot;&gt;// sigh &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is crap.
&lt;/span&gt;+    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (diff &amp;lt; 0.5){
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;diff is a long.  It can&apos;t be 0.5.  You want to use a float or something?&lt;/p&gt;

&lt;p&gt;Should the below instead be an accessor on RSM rather than expose the data member?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; MetricsRate requests = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MetricsRate(&lt;span class=&quot;code-quote&quot;&gt;&quot;requests&quot;&lt;/span&gt;, registry);
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; MetricsRate requests = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MetricsRate(&lt;span class=&quot;code-quote&quot;&gt;&quot;requests&quot;&lt;/span&gt;, registry);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Good stuff Li.  Agree on failing tests.&lt;/p&gt;</comment>
                            <comment id="13137791" author="li" created="Fri, 28 Oct 2011 00:46:40 +0000"  >&lt;p&gt;Isn&apos;t diff in seconds? If so, I meant if diff &amp;lt; 1.&lt;/p&gt;</comment>
                            <comment id="13138022" author="stack" created="Fri, 28 Oct 2011 04:56:22 +0000"  >&lt;p&gt;@Li Want me to make it that way on commit? (You&apos;d have the same logic as previous effectively).&lt;/p&gt;</comment>
                            <comment id="13138024" author="stack" created="Fri, 28 Oct 2011 04:56:45 +0000"  >&lt;p&gt;Or you want to make a new patch?&lt;/p&gt;</comment>
                            <comment id="13138026" author="li@idle.li" created="Fri, 28 Oct 2011 05:00:32 +0000"  >&lt;p&gt;Yeah sure&lt;/p&gt;
</comment>
                            <comment id="13138029" author="li@idle.li" created="Fri, 28 Oct 2011 05:06:32 +0000"  >&lt;p&gt;Sure to just modifying it and committing. I&apos;m on cell phone.&lt;/p&gt;

&lt;p&gt;On Thu, Oct 27, 2011 at 10:00 PM, Li Pi (Commented) (JIRA)&lt;/p&gt;</comment>
                            <comment id="13138084" author="stack" created="Fri, 28 Oct 2011 06:08:47 +0000"  >&lt;p&gt;Here is what I applied.  I tested it too.  Seems to work.&lt;/p&gt;</comment>
                            <comment id="13138085" author="stack" created="Fri, 28 Oct 2011 06:09:11 +0000"  >&lt;p&gt;Applied branch and trunk.  Thanks for the patch Li.&lt;/p&gt;</comment>
                            <comment id="13138744" author="hudson" created="Fri, 28 Oct 2011 20:54:54 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2379 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2379/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2379/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4304&quot; title=&quot;requestsPerSecond counter stuck at 0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4304&quot;&gt;&lt;del&gt;HBASE-4304&lt;/del&gt;&lt;/a&gt; requestsPerSecond counter stuck at 0&lt;/p&gt;

&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/metrics/MetricsRate.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/metrics/RegionServerMetrics.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/metrics/TestMetricsMBeanBase.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13140839" author="hudson" created="Tue, 1 Nov 2011 02:08:02 +0000"  >&lt;p&gt;Integrated in HBase-0.92 #90 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92/90/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92/90/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4304&quot; title=&quot;requestsPerSecond counter stuck at 0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4304&quot;&gt;&lt;del&gt;HBASE-4304&lt;/del&gt;&lt;/a&gt; requestsPerSecond counter stuck at 0&lt;/p&gt;

&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/metrics/MetricsRate.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/regionserver/metrics/RegionServerMetrics.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/metrics/TestMetricsMBeanBase.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15016186" author="lars_francke" created="Fri, 20 Nov 2015 11:54:17 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12501015" name="4304v1.txt" size="2483" author="li" created="Thu, 27 Oct 2011 01:57:01 +0000"/>
                            <attachment id="12501046" name="4304v2.txt" size="2459" author="li" created="Thu, 27 Oct 2011 07:05:27 +0000"/>
                            <attachment id="12501125" name="4304v3.txt" size="3566" author="li" created="Thu, 27 Oct 2011 17:36:45 +0000"/>
                            <attachment id="12501244" name="4304v4.txt" size="4035" author="stack" created="Fri, 28 Oct 2011 06:08:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 8 Sep 2011 12:11:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>27253</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hqbr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>101527</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>