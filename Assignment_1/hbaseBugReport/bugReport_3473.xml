<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:10:30 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-3473/HBASE-3473.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-3473] Add a configuration property for socket receive buffer size for replication endpoints</title>
                <link>https://issues.apache.org/jira/browse/HBASE-3473</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Looking at this blog post about optimizing replication throughput for LinkedIn&apos;s Kafka:&lt;br/&gt;
&lt;a href=&quot;http://sna-projects.com/blog/2011/01/optimizing-tcp-socket-across-data-centers/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://sna-projects.com/blog/2011/01/optimizing-tcp-socket-across-data-centers/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It seems worth testing out if HBase replication connections can also benefit from increasing the socket receive buffer size on (expected to be) high-latency connections.&lt;/p&gt;

&lt;p&gt;To this end, we would add a new configuration property for receive buffer size for replication connection and do some benchmarking to evaluate throughput with different values, verifying that making this configurable would have significant impact. For the moment, it seems best to scope the configuration setting to replication connections only, in order to avoid also impacting (negatively) intra-cluster communications.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12496608">HBASE-3473</key>
            <summary>Add a configuration property for socket receive buffer size for replication endpoints</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ghelmling">Gary Helmling</reporter>
                        <labels>
                    </labels>
                <created>Mon, 24 Jan 2011 22:03:57 +0000</created>
                <updated>Tue, 10 Feb 2015 04:41:37 +0000</updated>
                                                                            <component>Replication</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="14311870" author="lhofhansl" created="Mon, 9 Feb 2015 06:53:46 +0000"  >&lt;p&gt;I&apos;m interested in this as we&apos;ve seen fairly low replication speeds (compared to the speed with which we can load data into the primary cluster).&lt;/p&gt;

&lt;p&gt;Turns out the TCP receive buffer can only be set to anything bigger than 64K before the negotiation phase and only on the ServerSocket. Since we&apos;re listening on one port only we have a single ServerSocket only (unless I am missing something), so I am not sure how we can set this only for the replication RPCs. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ghelmling&quot; class=&quot;user-hover&quot; rel=&quot;ghelmling&quot;&gt;Gary Helmling&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Part of the slower replication speed - presumably - is that we have only a single thread writing to the remote cluster, while we have potentially many threads writing into the primary cluster. If we want to preserve ordering I also do not see an easy way out of this.&lt;/p&gt;</comment>
                            <comment id="14311887" author="hongyu.bi" created="Mon, 9 Feb 2015 07:21:27 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt;&#65292;&lt;br/&gt;
we may try parallel replication by hash rowkey to thread# , so we can preserve ordering on row-level which i think is fine to HBase.&lt;br/&gt;
thanks&lt;/p&gt;</comment>
                            <comment id="14311895" author="hongyu.bi" created="Mon, 9 Feb 2015 07:38:17 +0000"  >&lt;p&gt;just revisit replication code, in ReplicationSink#replicateEntries, we can do a quick minor improvement to send batchRPC parallely on table-level.&lt;/p&gt;</comment>
                            <comment id="14311903" author="hongyu.bi" created="Mon, 9 Feb 2015 07:47:44 +0000"  >&lt;p&gt;filed &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12988&quot; title=&quot;[Replication]Parallel apply edits across regions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12988&quot;&gt;&lt;del&gt;HBASE-12988&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14313556" author="lhofhansl" created="Tue, 10 Feb 2015 04:41:37 +0000"  >&lt;p&gt;These are great ideas. Let&apos;s do that.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 9 Feb 2015 06:53:46 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33045</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 44 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02frr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12156</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>