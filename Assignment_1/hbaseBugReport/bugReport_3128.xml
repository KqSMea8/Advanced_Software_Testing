<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:07:34 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-3128/HBASE-3128.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-3128] On assign, if ConnectException, reassign another server</title>
                <link>https://issues.apache.org/jira/browse/HBASE-3128</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

2010-10-19 13:29:56,116 DEBUG [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-216-EventThread] master.AssignmentManager(321): Handling transition=M_ZK_REGION_OFFLINE, server=172.24.152.112:51845, region=1028785192/.META.
2010-10-19 13:29:56,116 ERROR [Master:0;172.24.152.112:51845] master.ServerManager(573): Error connecting to region server
org.apache.hadoop.hbase.client.RetriesExhaustedException: Failed setting up proxy &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; org.apache.hadoop.hbase.ipc.HRegionInterface to /172.24.152.112:51850 after attempts=1
	at org.apache.hadoop.hbase.ipc.HBaseRPC.waitForProxy(HBaseRPC.java:351)
	at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.getHRegionConnection(HConnectionManager.java:936)
	at org.apache.hadoop.hbase.master.ServerManager.getServerConnection(ServerManager.java:568)
	at org.apache.hadoop.hbase.master.ServerManager.sendRegionOpen(ServerManager.java:511)
	at org.apache.hadoop.hbase.master.AssignmentManager.assign(AssignmentManager.java:726)
	at org.apache.hadoop.hbase.master.AssignmentManager.assign(AssignmentManager.java:640)
	at org.apache.hadoop.hbase.master.AssignmentManager.assignMeta(AssignmentManager.java:935)
	at org.apache.hadoop.hbase.master.HMaster.assignRootAndMeta(HMaster.java:430)
	at org.apache.hadoop.hbase.master.HMaster.finishInitialization(HMaster.java:377)
	at org.apache.hadoop.hbase.master.HMaster.run(HMaster.java:266)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:637)
Caused by: java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:574)
	at org.apache.hadoop.net.SocketIOWithTimeout.connect(SocketIOWithTimeout.java:206)
	at org.apache.hadoop.net.NetUtils.connect(NetUtils.java:404)
	at org.apache.hadoop.hbase.ipc.HBaseClient$Connection.setupIOstreams(HBaseClient.java:310)
	at org.apache.hadoop.hbase.ipc.HBaseClient.getConnection(HBaseClient.java:860)
	at org.apache.hadoop.hbase.ipc.HBaseClient.call(HBaseClient.java:728)
	at org.apache.hadoop.hbase.ipc.HBaseRPC$Invoker.invoke(HBaseRPC.java:255)
	at $Proxy10.getProtocolVersion(Unknown Source)
	at org.apache.hadoop.hbase.ipc.HBaseRPC.getProxy(HBaseRPC.java:412)
	at org.apache.hadoop.hbase.ipc.HBaseRPC.getProxy(HBaseRPC.java:388)
	at org.apache.hadoop.hbase.ipc.HBaseRPC.getProxy(HBaseRPC.java:435)
	at org.apache.hadoop.hbase.ipc.HBaseRPC.waitForProxy(HBaseRPC.java:345)
	... 10 more
2010-10-19 13:29:56,116 WARN  [Master:0;172.24.152.112:51845] master.AssignmentManager(730): Failed assignment of .META.,,1.1028785192 to serverName=172.24.152.112,51850,1287520189982, load=(requests=0, regions=0, usedHeap=60, maxHeap=123)
java.lang.RuntimeException: Fatal error connection to RS
	at org.apache.hadoop.hbase.master.ServerManager.getServerConnection(ServerManager.java:574)
	at org.apache.hadoop.hbase.master.ServerManager.sendRegionOpen(ServerManager.java:511)
	at org.apache.hadoop.hbase.master.AssignmentManager.assign(AssignmentManager.java:726)
	at org.apache.hadoop.hbase.master.AssignmentManager.assign(AssignmentManager.java:640)
	at org.apache.hadoop.hbase.master.AssignmentManager.assignMeta(AssignmentManager.java:935)
	at org.apache.hadoop.hbase.master.HMaster.assignRootAndMeta(HMaster.java:430)
	at org.apache.hadoop.hbase.master.HMaster.finishInitialization(HMaster.java:377)
	at org.apache.hadoop.hbase.master.HMaster.run(HMaster.java:266)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:637)
Caused by: org.apache.hadoop.hbase.client.RetriesExhaustedException: Failed setting up proxy &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; org.apache.hadoop.hbase.ipc.HRegionInterface to /172.24.152.112:51850 after attempts=1
	at org.apache.hadoop.hbase.ipc.HBaseRPC.waitForProxy(HBaseRPC.java:351)
	at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.getHRegionConnection(HConnectionManager.java:936)
	at org.apache.hadoop.hbase.master.ServerManager.getServerConnection(ServerManager.java:568)
	... 8 more
Caused by: java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:574)
	at org.apache.hadoop.net.SocketIOWithTimeout.connect(SocketIOWithTimeout.java:206)
	at org.apache.hadoop.net.NetUtils.connect(NetUtils.java:404)
	at org.apache.hadoop.hbase.ipc.HBaseClient$Connection.setupIOstreams(HBaseClient.java:310)
	at org.apache.hadoop.hbase.ipc.HBaseClient.getConnection(HBaseClient.java:860)
	at org.apache.hadoop.hbase.ipc.HBaseClient.call(HBaseClient.java:728)
	at org.apache.hadoop.hbase.ipc.HBaseRPC$Invoker.invoke(HBaseRPC.java:255)
	at $Proxy10.getProtocolVersion(Unknown Source)
	at org.apache.hadoop.hbase.ipc.HBaseRPC.getProxy(HBaseRPC.java:412)
	at org.apache.hadoop.hbase.ipc.HBaseRPC.getProxy(HBaseRPC.java:388)
	at org.apache.hadoop.hbase.ipc.HBaseRPC.getProxy(HBaseRPC.java:435)
	at org.apache.hadoop.hbase.ipc.HBaseRPC.waitForProxy(HBaseRPC.java:345)
	... 10 more

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12477783">HBASE-3128</key>
            <summary>On assign, if ConnectException, reassign another server</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stack">stack</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Oct 2010 21:24:51 +0000</created>
                <updated>Fri, 20 Nov 2015 12:42:51 +0000</updated>
                            <resolved>Wed, 20 Oct 2010 05:13:36 +0000</resolved>
                                                    <fixVersion>0.90.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12922845" author="stack" created="Wed, 20 Oct 2010 05:03:37 +0000"  >&lt;p&gt;This exception is way louder than its bite.  In fact, its harmless &amp;#8211; not the reason for the test failure.&lt;/p&gt;

&lt;p&gt;The noise comes of the fact that we had weird catch inside in ServerManager openRegion where we&apos;d print exception, convert IOE to a RuntimeException then up in AssignmentManager assign we&apos;d catch this exception, print it out again, then go reassign but to a different server.  Here&apos;s the log after the big spew:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2010-10-19 13:29:56,117 DEBUG [Master:0;172.24.152.112:51845] master.AssignmentManager(801): No previous transition plan &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; .META.,,1.1028785192 so generated a random one; hri=.META.,,1.1028785192, src=, dest=172.24.152.112,51852,1287520190000; 3 (online=3, exclude=serverName=172.24.152.112,51850,1287520189982, load=(requests=0, regions=0, usedHeap=60, maxHeap=123)) available servers
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This happens a few times in this log.&lt;/p&gt;

&lt;p&gt;Actual issue that broke test might be this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;2010-10-19 13:29:56,235 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Master:0;172.24.152.112:51845&amp;#93;&lt;/span&gt; master.AssignmentManager(1004): Bulk assigning done&lt;br/&gt;
2010-10-19 13:29:56,237 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;MASTER_OPEN_REGION-172.24.152.112:51845-1&amp;#93;&lt;/span&gt; handler.OpenedRegionHandler(87): Handling OPENED event for f98a67e5ccb2d3d04e8c1d20a71c20db; deleting unassigned node&lt;br/&gt;
2010-10-19 13:29:56,237 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;MASTER_OPEN_REGION-172.24.152.112:51845-1&amp;#93;&lt;/span&gt; zookeeper.ZKAssign(349): master:51845-0x12bc62e746c0014 Deleting existing unassigned node for f98a67e5ccb2d3d04e8c1d20a71c20db that is in expected state RS_ZK_REGION_OPENED&lt;br/&gt;
2010-10-19 13:29:56,238 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;MASTER_OPEN_REGION-172.24.152.112:51845-1&amp;#93;&lt;/span&gt; zookeeper.ZKUtil(1012): master:51845-0x12bc62e746c0014 Retrieved 112 byte(s) of data from znode /hbase/unassigned/f98a67e5ccb2d3d04e8c1d20a71c20db; data=&lt;/p&gt;</comment>
                            <comment id="12922848" author="stack" created="Wed, 20 Oct 2010 05:13:36 +0000"  >&lt;p&gt;So, yeah, we were already reassiging a different server on ConnectException... the commit just cleans up the exceptions thrown so its more plain we&apos;re doing the right thing.&lt;/p&gt;</comment>
                            <comment id="15017362" author="lars_francke" created="Fri, 20 Nov 2015 12:42:51 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12457642" name="3128.txt" size="4480" author="stack" created="Wed, 20 Oct 2010 05:03:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 20 Nov 2015 12:42:51 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26664</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hkv3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>100642</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>