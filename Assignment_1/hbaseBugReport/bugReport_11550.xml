<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:24:17 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-11550/HBASE-11550.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-11550] Custom value for BUCKET_CACHE_BUCKETS_KEY should be sorted</title>
                <link>https://issues.apache.org/jira/browse/HBASE-11550</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;User can pass bucket sizes through &quot;hbase.bucketcache.bucket.sizes&quot; config entry.&lt;br/&gt;
The sizes are supposed to be in increasing order. Validation should be added in CacheConfig#getL2().&lt;/p&gt;</description>
                <environment></environment>
        <key id="12728433">HBASE-11550</key>
            <summary>Custom value for BUCKET_CACHE_BUCKETS_KEY should be sorted</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gustavoanatoly">Gustavo Anatoly</assignee>
                                    <reporter username="yuzhihong@gmail.com">Ted Yu</reporter>
                        <labels>
                    </labels>
                <created>Sun, 20 Jul 2014 13:51:29 +0000</created>
                <updated>Sat, 21 Feb 2015 23:38:20 +0000</updated>
                            <resolved>Thu, 14 Aug 2014 04:24:27 +0000</resolved>
                                    <version>0.99.0</version>
                    <version>0.98.4</version>
                    <version>0.98.5</version>
                                    <fixVersion>0.99.0</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>0.98.6</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="14068016" author="stack" created="Sun, 20 Jul 2014 18:42:46 +0000"  >&lt;p&gt;Trivial.  If anyone notices these can be changed at all, rarer still will be those who actually do.&lt;/p&gt;

&lt;p&gt;Ted, how do you come up with such trivial stuff?  Why not give Gustavo something substantial?&lt;/p&gt;</comment>
                            <comment id="14068615" author="apurtell" created="Mon, 21 Jul 2014 15:18:49 +0000"  >&lt;p&gt;I agree with Stack. Resolve this as &apos;Not a Problem&apos;?&lt;/p&gt;</comment>
                            <comment id="14068906" author="gustavoanatoly" created="Mon, 21 Jul 2014 17:58:28 +0000"  >&lt;p&gt;Gentlemen watchers,&lt;/p&gt;

&lt;p&gt;Who could please review the patch?&lt;/p&gt;</comment>
                            <comment id="14069494" author="ndimiduk" created="Mon, 21 Jul 2014 23:17:55 +0000"  >&lt;p&gt;Thanks for the patch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gustavoanatoly&quot; class=&quot;user-hover&quot; rel=&quot;gustavoanatoly&quot;&gt;Gustavo Anatoly&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;If the list of bucket sizes is required to be of increasing capacity, I would prefer this be enforced by BucketAllocator in its constructor. That is, don&apos;t do validation, just sort the array before it&apos;s used. As far as I can tell, BucketAllocator is the only place where this configuration is consumed. The only reason BucketCache keeps around a local reference to this configuration value is to make the value available when hydrating a persisted cache. Looking at the code again, I think the local variable can be dropped entirely. Ie, pass it through as a parameter to BucketCache.retrieveFromFile.&lt;/p&gt;</comment>
                            <comment id="14069710" author="gustavoanatoly" created="Tue, 22 Jul 2014 02:22:42 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt;, for your attention.&lt;/p&gt;

&lt;p&gt;I will prepare a new draft patch, to resubmit. I agree, it makes no sense drop the variable, it&apos;s merely punctual. I didn&apos;t saw this possibility to refactor, transferring the responsability to BucketCache.retrieveFromFile &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Thanks again.&lt;/p&gt;</comment>
                            <comment id="14073148" author="gustavoanatoly" created="Thu, 24 Jul 2014 12:14:56 +0000"  >&lt;p&gt;Hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Could you please review the new patch?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="14073230" author="hadoopqa" created="Thu, 24 Jul 2014 14:19:54 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12657596/HBASE-11550-v1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12657596/HBASE-11550-v1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12657596&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.TestRegionRebalancing&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10177//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10177//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10177//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10177//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10177//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10177//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10177//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10177//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10177//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10177//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10177//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10177//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10177//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10177//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10177//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10177//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10177//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10177//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10177//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10177//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10177//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10177//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14074585" author="ndimiduk" created="Fri, 25 Jul 2014 17:04:30 +0000"  >&lt;p&gt;Patch is looking good, but I&apos;m not convinced the ticket is valid.&lt;/p&gt;

&lt;p&gt;From the description&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;The sizes are supposed to be in increasing order.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;and yet&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+    Collections.sort(this.bucketSizes, Collections.reverseOrder());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Reverse is opposite the description. Which is correct?&lt;/p&gt;

&lt;p&gt;nit: Why switch to List everywhere?&lt;/p&gt;

&lt;p&gt;Can you add a test exercising the lack of sort as a problem? Something that fails on master but passes with your patch. I tried this naive change but nothing fails. Skimming the code, I would expect the cache to be underutilized &amp;#8211; if this is a problem at all.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;diff --git a/hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/bucket/TestBucketCache.java b/hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/bucket/TestBucketCache.java
index c526834..38a9a43 100644
--- a/hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/bucket/TestBucketCache.java
+++ b/hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/bucket/TestBucketCache.java
@@ -57,8 +57,8 @@ public class TestBucketCache {
     return Arrays.asList(new Object[][] {
       { 8192, null }, // TODO: why is 8k the default blocksize for these tests?
       { 16 * 1024, new int[] {
-        2 * 1024 + 1024, 4 * 1024 + 1024, 8 * 1024 + 1024, 16 * 1024 + 1024,
-        28 * 1024 + 1024, 32 * 1024 + 1024, 64 * 1024 + 1024, 96 * 1024 + 1024,
+        64 * 1024 + 1024, 32 * 1024 + 1024, 8 * 1024 + 1024, 16 * 1024 + 1024,
+        28 * 1024 + 1024, 4 * 1024 + 1024, 2 * 1024 + 1024, 96 * 1024 + 1024,
         128 * 1024 + 1024 } }
     });
   }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14074609" author="yuzhihong@gmail.com" created="Fri, 25 Jul 2014 17:18:46 +0000"  >&lt;p&gt;Using Nick&apos;s sample change above, first item is 64 * 1024 + 1024.&lt;br/&gt;
In BucketAllocator#roundUpToBucketSizeInfo() :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; bucketSizes.length; ++i)
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (blockSize &amp;lt;= bucketSizes[i])
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; bucketSizeInfos[i];
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If we search for a bucket which is supposed to fit 32 * 1024 + 1024, the bucket for 64 * 1024 + 1024 would be returned. This would result in wasted storage.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    Collections.sort(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.bucketSizes, Collections.reverseOrder());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Order should not be reversed.&lt;/p&gt;</comment>
                            <comment id="14074687" author="stack" created="Fri, 25 Jul 2014 18:01:54 +0000"  >&lt;blockquote&gt;&lt;p&gt;This would result in wasted storage.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Prove it.  Add tests to assert wastage.&lt;/p&gt;</comment>
                            <comment id="14075530" author="gustavoanatoly" created="Sun, 27 Jul 2014 02:19:11 +0000"  >&lt;p&gt;Gentlemen, thanks for review.&lt;/p&gt;

&lt;p&gt;Hello, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt; about your question:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Why switch to List everywhere?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We have the follow code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; BucketSizeInfo roundUpToBucketSizeInfo(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; blockSize) {
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; bucketSizes.size(); ++i)
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (blockSize &amp;lt;= bucketSizes.get(i))
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; bucketSizeInfos[i];
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Thus, if we have a reversed bucketSizes it will search in the largest bucketSizes( i ) on the top of array first. This sounds obvious, but the intention is increase the probability to find the bucketSizeInfo in the largest bucketSizes first. It&apos;s a pretty simple optimization.&lt;/p&gt;

&lt;p&gt;But how you suggest and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; I can add some tests to verify the sort problem and other test to wastage.&lt;/p&gt;

&lt;p&gt;Hello, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu&quot; class=&quot;user-hover&quot; rel=&quot;tedyu&quot;&gt;Ted Yu&lt;/a&gt; thanks for the comment, I will write some test to verify the condition mentioned by you.&lt;/p&gt;

&lt;p&gt;Thanks, guys.&lt;/p&gt;</comment>
                            <comment id="14075797" author="stack" created="Sun, 27 Jul 2014 23:39:47 +0000"  >&lt;p&gt;Changing priority. If wastage, fix is important.&lt;/p&gt;

&lt;p&gt;Regards test assert we are giving out the wrong sized buckets before your patch and that we are not after your patch?&lt;/p&gt;</comment>
                            <comment id="14075801" author="gustavoanatoly" created="Mon, 28 Jul 2014 00:00:51 +0000"  >&lt;p&gt;Hello, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I will do the confrontation for both ways to after and before of my patch.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;
</comment>
                            <comment id="14086719" author="stack" created="Tue, 5 Aug 2014 20:46:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gustavoanatoly&quot; class=&quot;user-hover&quot; rel=&quot;gustavoanatoly&quot;&gt;Gustavo Anatoly&lt;/a&gt; Any luck?  Want a hand?  Thanks.&lt;/p&gt;</comment>
                            <comment id="14086753" author="gustavoanatoly" created="Tue, 5 Aug 2014 21:01:05 +0000"  >&lt;p&gt;Hello, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Sorry for delay to delivery, I was a little bit busy lately. But I&apos;m working the patch at this moment, so these days I&apos;ll finish the task.&lt;/p&gt;

&lt;p&gt;Thank you for your attention.&lt;/p&gt;</comment>
                            <comment id="14092676" author="gustavoanatoly" created="Mon, 11 Aug 2014 11:10:36 +0000"  >&lt;p&gt;Gentlemen,&lt;/p&gt;

&lt;p&gt;The new patch was attached with sorted array instead reverse order to that finish this issue. So about the wastage tests I will need more time to complete it.&lt;/p&gt;

&lt;p&gt;Thanks for the patience.&lt;/p&gt;</comment>
                            <comment id="14095420" author="hadoopqa" created="Wed, 13 Aug 2014 12:35:12 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12661428/HBASE-11550-v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12661428/HBASE-11550-v2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12661428&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10411//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10411//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10411//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10411//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10411//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10411//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10411//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10411//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10411//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10411//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10411//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10411//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10411//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10411//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10411//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10411//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10411//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10411//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10411//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10411//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10411//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10411//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14095592" author="yuzhihong@gmail.com" created="Wed, 13 Aug 2014 15:35:51 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-    void reconfigure(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; sizeIndex, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;[] bucketSizes, &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; bucketCapacity) {
-      Preconditions.checkElementIndex(sizeIndex, bucketSizes.length);
+    void reconfigure(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; sizeIndex, List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; bucketSizes, &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; bucketCapacity) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Consider using &lt;a href=&quot;http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#sort(int[&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#sort(int[&lt;/a&gt;]) so that the number of changes in the patch comes down.&lt;/p&gt;</comment>
                            <comment id="14095612" author="hadoopqa" created="Wed, 13 Aug 2014 15:43:18 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12661445/HBASE-11550-v3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12661445/HBASE-11550-v3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12661445&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.TestRegionRebalancing&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 1 zombie test(s): &lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10412//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10412//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10412//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10412//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10412//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10412//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10412//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10412//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10412//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10412//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10412//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10412//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10412//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10412//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10412//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10412//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10412//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10412//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10412//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10412//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10412//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10412//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14095661" author="ndimiduk" created="Wed, 13 Aug 2014 16:18:04 +0000"  >&lt;p&gt;Most of patch v3 is converting the &lt;tt&gt;int[]&lt;/tt&gt; to &lt;tt&gt;List&amp;lt;Integer&amp;gt;&lt;/tt&gt;; I see no value in this change. Please undo this part of the refactor. Otherwise, the refactor to remove &lt;tt&gt;bucketSizes&lt;/tt&gt; local variable from BucketCache and sorting the custom config are good changes. I&apos;m happy to commit such a patch.&lt;/p&gt;

&lt;p&gt;One more time &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gustavoanatoly&quot; class=&quot;user-hover&quot; rel=&quot;gustavoanatoly&quot;&gt;Gustavo Anatoly&lt;/a&gt;? Thanks a lot for sticking with it!&lt;/p&gt;</comment>
                            <comment id="14095750" author="gustavoanatoly" created="Wed, 13 Aug 2014 17:24:34 +0000"  >&lt;p&gt;Hello Nick, &lt;/p&gt;

&lt;p&gt;I will convert again to int[].&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="14095979" author="gustavoanatoly" created="Wed, 13 Aug 2014 19:24:25 +0000"  >&lt;p&gt;Gentlemen,&lt;/p&gt;

&lt;p&gt;New patch (v4) has been attached.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="14096161" author="hadoopqa" created="Wed, 13 Aug 2014 21:32:21 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12661511/HBASE-11550-v4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12661511/HBASE-11550-v4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12661511&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.master.TestRollingRestart&lt;br/&gt;
                  org.apache.hadoop.hbase.TestRegionRebalancing&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10415//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10415//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10415//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10415//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10415//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10415//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10415//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10415//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10415//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10415//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10415//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10415//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10415//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10415//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10415//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10415//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10415//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10415//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10415//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10415//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10415//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10415//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14096362" author="ndimiduk" created="Thu, 14 Aug 2014 00:48:09 +0000"  >&lt;p&gt;Patch v4 is great, +1. I&apos;ll commit this in a couple hours unless there&apos;s an objection. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gustavoanatoly&quot; class=&quot;user-hover&quot; rel=&quot;gustavoanatoly&quot;&gt;Gustavo Anatoly&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;We can leave tests for detecting wasted space as a separate ticket.&lt;/p&gt;</comment>
                            <comment id="14096479" author="gustavoanatoly" created="Thu, 14 Aug 2014 02:47:46 +0000"  >&lt;p&gt;I don&apos;t have objections &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt;. &lt;br/&gt;
Thanks everyone. I get happy to help a little bit. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;
</comment>
                            <comment id="14096543" author="ndimiduk" created="Thu, 14 Aug 2014 04:24:00 +0000"  >&lt;p&gt;Pushed to master. Cherry-picked to branch-1 with minimal conflict. Applied manually to 0.98, attaching patch.&lt;/p&gt;</comment>
                            <comment id="14096545" author="ndimiduk" created="Thu, 14 Aug 2014 04:24:27 +0000"  >&lt;p&gt;Thanks for the contribution &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gustavoanatoly&quot; class=&quot;user-hover&quot; rel=&quot;gustavoanatoly&quot;&gt;Gustavo Anatoly&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="14096648" author="hudson" created="Thu, 14 Aug 2014 06:34:02 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.98 #447 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/447/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/447/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11550&quot; title=&quot;Custom value for BUCKET_CACHE_BUCKETS_KEY should be sorted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11550&quot;&gt;&lt;del&gt;HBASE-11550&lt;/del&gt;&lt;/a&gt; Custom value for BUCKET_CACHE_BUCKETS_KEY should be sorted (Gustavo Anatoly) (ndimiduk: rev 7e1e818bbc0bed59c12fbd8c003eaed702cf16ad)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/bucket/BucketAllocator.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/CacheConfig.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/bucket/BucketCache.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14096739" author="hudson" created="Thu, 14 Aug 2014 08:31:30 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.0 #100 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/100/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.0/100/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11550&quot; title=&quot;Custom value for BUCKET_CACHE_BUCKETS_KEY should be sorted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11550&quot;&gt;&lt;del&gt;HBASE-11550&lt;/del&gt;&lt;/a&gt; Custom value for BUCKET_CACHE_BUCKETS_KEY should be sorted (Gustavo Anatoly) (ndimiduk: rev cd59a023c4f84ba458b9665e1a12add2f702ad96)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/bucket/BucketAllocator.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/bucket/BucketCache.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/CacheConfig.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14096802" author="hudson" created="Thu, 14 Aug 2014 09:48:05 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.98-on-Hadoop-1.1 #421 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/421/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/421/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11550&quot; title=&quot;Custom value for BUCKET_CACHE_BUCKETS_KEY should be sorted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11550&quot;&gt;&lt;del&gt;HBASE-11550&lt;/del&gt;&lt;/a&gt; Custom value for BUCKET_CACHE_BUCKETS_KEY should be sorted (Gustavo Anatoly) (ndimiduk: rev 7e1e818bbc0bed59c12fbd8c003eaed702cf16ad)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/bucket/BucketAllocator.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/bucket/BucketCache.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/CacheConfig.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14096842" author="hudson" created="Thu, 14 Aug 2014 10:54:47 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #5396 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/5396/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/5396/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11550&quot; title=&quot;Custom value for BUCKET_CACHE_BUCKETS_KEY should be sorted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11550&quot;&gt;&lt;del&gt;HBASE-11550&lt;/del&gt;&lt;/a&gt; Custom value for BUCKET_CACHE_BUCKETS_KEY should be sorted (Gustavo Anatoly) (ndimiduk: rev c60cfbc999e6ae2222064632e297fd361c8c16e4)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/bucket/BucketAllocator.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/CacheConfig.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/bucket/BucketCache.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14097113" author="stack" created="Thu, 14 Aug 2014 15:56:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt; Why commit without the test? You start out with &quot;... I&apos;m not convinced the ticket is valid.&quot; &amp;#8211; something a test would clear up &amp;#8211; and then &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;c&amp;#93;&lt;/span&gt;an you add a test exercising the lack of sort as a problem?&quot;  There is assertion that there is wastage being fixed by this patch. I&apos;d be interested in assertions in code that this is actually the case. I ask &quot;Add tests to assert wastage.&quot; I&apos;d also like to know by how much.&lt;/p&gt;

&lt;p&gt;I have been looking at this stuff of late and notice that bucketcache has a &apos;cost&apos;. I&apos;m interested in figuring where it comes from.  This committed patch as is gives no insight when it seems like it could have some bearing.&lt;/p&gt;
</comment>
                            <comment id="14097190" author="ndimiduk" created="Thu, 14 Aug 2014 16:46:22 +0000"  >&lt;p&gt;I committed v4 of this patch because it ensures the placement semantics are identical for the default setting and user-provided value, something I inadvertently missed in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10641&quot; title=&quot;Configurable Bucket Sizes in bucketCache&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10641&quot;&gt;&lt;del&gt;HBASE-10641&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Yes, I think a test would be good. Wastage will depend on the size of buckets, the placement strategy used, and the sequence of block sizes inserted. The difficulty with a test is that memory allocation strategies are not black-and-white. It could well be that there&apos;s a better strategy for most of our users than the current greedy approach. I guess there&apos;s now &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11743&quot; title=&quot;Add unit test for the fix that sorts custom value of BUCKET_CACHE_BUCKETS_KEY&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11743&quot;&gt;HBASE-11743&lt;/a&gt; that will look at this.&lt;/p&gt;</comment>
                            <comment id="14098133" author="stack" created="Fri, 15 Aug 2014 04:36:48 +0000"  >&lt;p&gt;Marking trivial again. Thought we were going to get some questions answered in this JIRA (&apos;wastage&apos;) but it turns out not. Fix the priority if you think I have it wrong.&lt;/p&gt;

&lt;p&gt;Filing an issue to add a test for a patch already committed is elision complicating accounting, wasting a JIRA, and teaching a new committer dodgy practice.&lt;/p&gt;</comment>
                            <comment id="14099232" author="ndimiduk" created="Fri, 15 Aug 2014 21:59:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; Trivial is fine. I think it&apos;s important that the semantics of the allocator placement policy be identical, but the change itself is trivial. I didn&apos;t communicate my shift in opinion after researching allocation strategies. I believe Ted&apos;s point about roundUpToBucketSizeInfo is quite valid, makes it clear that this allocator implementation does indeed depend on the order of target sizes.&lt;/p&gt;

&lt;p&gt;I don&apos;t think it fair to the new contributor to have their contributions get caught up in the project politicking. I&apos;m happy to help see a valuable patch through, even if the circumstances around it are not ideal.&lt;/p&gt;

&lt;p&gt;More, valid tests are better than less. I don&apos;t know what the new issue&apos;s test might look like. For a cache of configured size and shape, for given sequence of blocks, they&apos;re placed such that they all fit, something like this? I&apos;m much more interested in thinking through what constitutes a &quot;better&quot; or &quot;worse&quot; criteria for HBase and if there&apos;s a different allocation strategy that fits HBase access patterns &quot;better&quot;.&lt;/p&gt;

&lt;p&gt;This looks like a decent starting point &lt;a href=&quot;http://www.memorymanagement.org/mmref/index.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.memorymanagement.org/mmref/index.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14099247" author="apurtell" created="Fri, 15 Aug 2014 22:07:45 +0000"  >&lt;blockquote&gt;&lt;p&gt;I don&apos;t think it fair to the new contributor to have their contributions get caught up in the project politicking.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Hmm, I&apos;m sure there is universal agreement on that point but maybe not agreement that the only thing happening here on this issue is political in nature. There is a certain amount of churn on our JIRA caused by filing of (nearly) content-free issues, or considerations of trivial import. Some are more responsible for that churn than others. Some are more annoyed by that churn than others. A report filtering for issues closed as Invalid or Cannot Reproduce will provide indication of both. It is a problem occasionally worth complaint. When it happens it is indeed bad example, and valid to discuss if the JIRA is helpful or just a distraction. Disagreement on that point is fine, not politics.&lt;/p&gt;</comment>
                            <comment id="14101124" author="stack" created="Mon, 18 Aug 2014 19:19:35 +0000"  >&lt;blockquote&gt;&lt;p&gt;I don&apos;t think it fair to the new contributor to have their contributions get caught up in the project politicking.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gustavoanatoly&quot; class=&quot;user-hover&quot; rel=&quot;gustavoanatoly&quot;&gt;Gustavo Anatoly&lt;/a&gt; To be clear, ill-defined JIRAs consume the attention of those who are trying to follow along. Lack of clarity in the definition requires we need to keep an active eye out. When the issue is trivial, this is particularly irksome.&lt;/p&gt;

&lt;p&gt;This issue is a good example.  It starts out without provenance &amp;#8211; does the issue come of &apos;code-reading&apos;, testing?, a user reported issue?, an attempt at setting bucket sizes in configs &amp;#8211; and it has &apos;shoulds&apos; and &apos;supposed to&apos; in subject and original description but there is no justification as to why. Nick, a third party altogether, has to do detective work to elicit there is an actual problem here.&lt;/p&gt;

&lt;p&gt;For another example, see the follow-on, filed again by Ted assigned to you, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11743&quot; title=&quot;Add unit test for the fix that sorts custom value of BUCKET_CACHE_BUCKETS_KEY&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11743&quot;&gt;HBASE-11743&lt;/a&gt;.  Look at it. It says this issue, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11550&quot; title=&quot;Custom value for BUCKET_CACHE_BUCKETS_KEY should be sorted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11550&quot;&gt;&lt;del&gt;HBASE-11550&lt;/del&gt;&lt;/a&gt;, makes it &quot;...such that there is no wastage in bucket allocation&quot;. But Nick resolves this issue with the comment that your patch ensures default and user-supplied config align punting on the wastage question... to he &apos;guesses&apos; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11743&quot; title=&quot;Add unit test for the fix that sorts custom value of BUCKET_CACHE_BUCKETS_KEY&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11743&quot;&gt;HBASE-11743&lt;/a&gt;. This is lack of alignment here. The mess that is this issue looks like it is to repeat over in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11743&quot; title=&quot;Add unit test for the fix that sorts custom value of BUCKET_CACHE_BUCKETS_KEY&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11743&quot;&gt;HBASE-11743&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;To avoid any crossfire in the future, I&apos;d suggest file your own issues especially if you are trying to build yourself a bit of a track record. Also work on non-trivial issues as said before.  You will find it easier getting reviewers if the issue is non-trivial.&lt;/p&gt;</comment>
                            <comment id="14331394" author="enis" created="Sat, 21 Feb 2015 23:38:20 +0000"  >&lt;p&gt;Closing this issue after 0.99.0 release.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12698005">HBASE-10641</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12734063">HBASE-11743</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12733933">HBASE-11735</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12657596" name="HBASE-11550-v1.patch" size="14371" author="gustavoanatoly" created="Thu, 24 Jul 2014 12:14:56 +0000"/>
                            <attachment id="12661428" name="HBASE-11550-v2.patch" size="15466" author="gustavoanatoly" created="Wed, 13 Aug 2014 11:03:03 +0000"/>
                            <attachment id="12661445" name="HBASE-11550-v3.patch" size="15468" author="gustavoanatoly" created="Wed, 13 Aug 2014 12:57:13 +0000"/>
                            <attachment id="12661638" name="HBASE-11550-v4-0.98.patch" size="4879" author="ndimiduk" created="Thu, 14 Aug 2014 04:24:00 +0000"/>
                            <attachment id="12661511" name="HBASE-11550-v4.patch" size="5686" author="gustavoanatoly" created="Wed, 13 Aug 2014 19:24:25 +0000"/>
                            <attachment id="12656911" name="HBASE-11550.patch" size="6566" author="gustavoanatoly" created="Mon, 21 Jul 2014 17:58:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 20 Jul 2014 18:42:46 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>406509</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1xyc7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>406529</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>