<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:47:47 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-13902/HBASE-13902.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-13902] Remove Sync RpcClientImpl</title>
                <link>https://issues.apache.org/jira/browse/HBASE-13902</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;For an async Table api to be supported we need to remove the sync RpcClientImpl. &lt;/p&gt;

&lt;p&gt;For the Async Table Api some internals for scanning are changed to use async apis so they can&apos;t be used with the Sync RpcClientImpl.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12837842">HBASE-13902</key>
            <summary>Remove Sync RpcClientImpl</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png" description="A patch for this issue has been uploaded to JIRA by a contributor.">Patch Available</status>
                    <statusCategory id="4" key="indeterminate" colorName="yellow"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="jurmous">Jurriaan Mous</assignee>
                                    <reporter username="jurmous">Jurriaan Mous</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 Jun 2015 13:51:23 +0000</created>
                <updated>Sat, 15 Aug 2015 00:14:44 +0000</updated>
                                                            <fixVersion>2.0.0</fixVersion>
                                    <component>Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="14586061" author="jurmous" created="Mon, 15 Jun 2015 13:54:32 +0000"  >&lt;ul&gt;
	&lt;li&gt;Removing RpcClientImpl and Call&lt;/li&gt;
	&lt;li&gt;Adapted tests which used an RpcClientImpl to use AsyncRpcClient&lt;/li&gt;
	&lt;li&gt;Removed TestIPC since its functionality is tested with TestAsyncIPC&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14586231" author="stack" created="Mon, 15 Jun 2015 15:51:46 +0000"  >&lt;p&gt;After a quick skim... &lt;/p&gt;

&lt;p&gt;Radical!&lt;/p&gt;

&lt;p&gt;Its easy to review (smile) given its just removal (and a one line change)&lt;/p&gt;

&lt;p&gt;How can we get away with removing such fundamental types as Call and RpcClientImpl  Want to say a few words on it &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jurmous&quot; class=&quot;user-hover&quot; rel=&quot;jurmous&quot;&gt;Jurriaan Mous&lt;/a&gt; ?&lt;/p&gt;

&lt;p&gt;The plus is now we have an async chassis and so can do an async Table &amp;#8211; that is great &amp;#8211; and do we get a simplification of the client path but can you think of any downsides?  For example, doing sync calls on an async chassis continue to be slower than pure sync (I&apos;d guess so but probably not by much?).  I could help test this out if that&apos;d help.  Any other downsides you can think of ?&lt;/p&gt;</comment>
                            <comment id="14586290" author="hadoopqa" created="Mon, 15 Jun 2015 16:39:19 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12739616/HBASE-13902.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12739616/HBASE-13902.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 714668a40dff6d7aa9207a0846d6f8ed800276ee.&lt;br/&gt;
  ATTACHMENT ID: 12739616&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 20 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.1 2.5.2 2.6.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 1 zombie test(s): &lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14414//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14414//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14414//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14414//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14414//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14414//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14414//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14414//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14587752" author="jurmous" created="Tue, 16 Jun 2015 09:33:22 +0000"  >&lt;blockquote&gt;
&lt;p&gt;How can we get away with removing such fundamental types as Call and RpcClientImpl Want to say a few words on it Jurriaan Mous ?&lt;/p&gt;

&lt;p&gt;The plus is now we have an async chassis and so can do an async Table &#8211; that is great &#8211; and do we get a simplification of the client path but can you think of any downsides? For example, doing sync calls on an async chassis continue to be slower than pure sync (I&apos;d guess so but probably not by much?). I could help test this out if that&apos;d help. Any other downsides you can think of ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Luckily Call and RpcClientImpl are private and are only accessed through the RpcClient interface. So it is easy to remove them. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I looked into it a bit more. It is technically possible to keep supporting the RpcClientImpl by adding a Netty EventLoop to the RpcClientImpl and make an abstraction around the async channel. To properly support the Async Table I needed to make scans use the async client internally so these will probably get slower with the Async patch in RpcClientImpl and faster with AsyncRpcClient because of transferred abstraction. And it is possible that the async based sync Table implementation removes some of the delay.&lt;/p&gt;

&lt;p&gt;Maybe the best way is to keep RpcClientImpl in at this moment, implement the async methods and remove it later if it proves to be slower with all the new code in.&lt;/p&gt;</comment>
                            <comment id="14589942" author="stack" created="Wed, 17 Jun 2015 15:43:28 +0000"  >&lt;blockquote&gt;&lt;p&gt;Maybe the best way is to keep RpcClientImpl in at this moment, implement the async methods and remove it later if it proves to be slower with all the new code in.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Lets get some numbers first. If it is NOT slower (or close enough) and it all works, lets try and go with the removal/simplification.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12739616" name="HBASE-13902.patch" size="70471" author="jurmous" created="Mon, 15 Jun 2015 13:54:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 15 Jun 2015 15:51:46 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 26 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2g1rr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>