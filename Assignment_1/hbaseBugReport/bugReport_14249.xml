<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:51:12 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-14249/HBASE-14249.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-14249] shaded jar modules create spurious source and test jars with incorrect LICENSE/NOTICE info</title>
                <link>https://issues.apache.org/jira/browse/HBASE-14249</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;the shaded jar modules don&apos;t need to create a source or test jar (because the jars contain nothing other than META-INF)&lt;/p&gt;

&lt;p&gt;currently we create &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;the test jars are missing LICENSE&lt;/li&gt;
	&lt;li&gt;source jars have LICENSE/NOTICE files that claim all the bundled works in the normal jar.&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hbase-1.1.2-rc0 busbey$ find hbase-shaded-server-1.1.2-sources.jar/
hbase-shaded-server-1.1.2-sources.jar/
hbase-shaded-server-1.1.2-sources.jar&lt;span class=&quot;code-comment&quot;&gt;//META-INF
&lt;/span&gt;hbase-shaded-server-1.1.2-sources.jar&lt;span class=&quot;code-comment&quot;&gt;//META-INF/LICENSE
&lt;/span&gt;hbase-shaded-server-1.1.2-sources.jar&lt;span class=&quot;code-comment&quot;&gt;//META-INF/MANIFEST.MF
&lt;/span&gt;hbase-shaded-server-1.1.2-sources.jar&lt;span class=&quot;code-comment&quot;&gt;//META-INF/NOTICE
&lt;/span&gt;hbase-1.1.2-rc0 busbey$ find hbase-shaded-client-1.1.2-sources.jar/
hbase-shaded-client-1.1.2-sources.jar/
hbase-shaded-client-1.1.2-sources.jar&lt;span class=&quot;code-comment&quot;&gt;//META-INF
&lt;/span&gt;hbase-shaded-client-1.1.2-sources.jar&lt;span class=&quot;code-comment&quot;&gt;//META-INF/LICENSE
&lt;/span&gt;hbase-shaded-client-1.1.2-sources.jar&lt;span class=&quot;code-comment&quot;&gt;//META-INF/MANIFEST.MF
&lt;/span&gt;hbase-shaded-client-1.1.2-sources.jar&lt;span class=&quot;code-comment&quot;&gt;//META-INF/NOTICE
&lt;/span&gt;hbase-1.1.2-rc0 busbey$ find hbase-shaded-client-1.1.2-tests.jar/
hbase-shaded-client-1.1.2-tests.jar/
hbase-shaded-client-1.1.2-tests.jar&lt;span class=&quot;code-comment&quot;&gt;//META-INF
&lt;/span&gt;hbase-shaded-client-1.1.2-tests.jar&lt;span class=&quot;code-comment&quot;&gt;//META-INF/NOTICE
&lt;/span&gt;hbase-1.1.2-rc0 busbey$ find hbase-shaded-server-1.1.2-tests.jar/
hbase-shaded-server-1.1.2-tests.jar/
hbase-shaded-server-1.1.2-tests.jar&lt;span class=&quot;code-comment&quot;&gt;//META-INF
&lt;/span&gt;hbase-shaded-server-1.1.2-tests.jar&lt;span class=&quot;code-comment&quot;&gt;//META-INF/NOTICE&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12857115">HBASE-14249</key>
            <summary>shaded jar modules create spurious source and test jars with incorrect LICENSE/NOTICE info</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="busbey">Sean Busbey</assignee>
                                    <reporter username="busbey">Sean Busbey</reporter>
                        <labels>
                    </labels>
                <created>Wed, 19 Aug 2015 05:41:23 +0000</created>
                <updated>Thu, 20 Aug 2015 23:16:38 +0000</updated>
                            <resolved>Thu, 20 Aug 2015 15:51:57 +0000</resolved>
                                    <version>2.0.0</version>
                    <version>1.2.0</version>
                    <version>1.1.2</version>
                    <version>1.3.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>1.2.0</fixVersion>
                    <fixVersion>1.1.2</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                                    <component>build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="14702526" author="busbey" created="Wed, 19 Aug 2015 05:41:50 +0000"  >&lt;p&gt;solution is to just not create these jars at all.&lt;/p&gt;</comment>
                            <comment id="14702568" author="apurtell" created="Wed, 19 Aug 2015 06:25:01 +0000"  >&lt;p&gt;How difficult is it to patch the POMs for this? We are still effectively unable to release. It would be great to seperate must haves from &quot;not great but we will get to it next time&quot;. I think this should be not be a blocker. &lt;/p&gt;</comment>
                            <comment id="14702586" author="apurtell" created="Wed, 19 Aug 2015 06:40:44 +0000"  >&lt;p&gt;I take that back for this one. Not only are the license and meta files wrong it doesn&apos;t make sense in the first place to have source and test jars for the shaded artifacts. Agreed this should be a blocker.&lt;/p&gt;</comment>
                            <comment id="14702633" author="busbey" created="Wed, 19 Aug 2015 07:28:23 +0000"  >&lt;p&gt;This one should be relatively easy to fix. we just need to say to skip the source-jar plugin and the jar execution for building the test-jar.&lt;/p&gt;

&lt;p&gt;those both get set up in the root pom, and I think we can configure skipping both in the parent-of-shaded-jars pom.&lt;/p&gt;

&lt;p&gt;my big concern is that we should be skipping the test-jar already (from hbase-shaded/pom.xml):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &amp;lt;properties&amp;gt;
      &amp;lt;!-- Don&apos;t make a test-jar --&amp;gt;
      &amp;lt;maven.test.skip&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;lt;/maven.test.skip&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14703281" author="eclark" created="Wed, 19 Aug 2015 16:26:54 +0000"  >&lt;p&gt;We are going to want to create a shaded test jar at some point for people that are trying to use the test-util jar and need the relocations.&lt;/p&gt;</comment>
                            <comment id="14703356" author="busbey" created="Wed, 19 Aug 2015 16:56:30 +0000"  >&lt;p&gt;won&apos;t that be an additional module? persuming it is, it&apos;ll just list dependencies on the needed test-jars and get built at the normal compile / package phases without its own test-jar.&lt;/p&gt;</comment>
                            <comment id="14703440" author="eclark" created="Wed, 19 Aug 2015 17:45:02 +0000"  >&lt;p&gt;It would be a different module, though I&apos;m not sure about the phases. I&apos;ve had issues with getting everything to pull to compile phase sometimes.&lt;/p&gt;

&lt;p&gt;But whatever is needed so that rc&apos;s can pass for now.&lt;/p&gt;</comment>
                            <comment id="14703844" author="apurtell" created="Wed, 19 Aug 2015 22:22:54 +0000"  >&lt;p&gt;Looking at this now.&lt;/p&gt;

&lt;p&gt;maven.test.skip is a surefire property. &lt;/p&gt;

&lt;p&gt;There appear config options for maven-source-plugin and maven-jar-plugin that might help.&lt;/p&gt;</comment>
                            <comment id="14703848" author="apurtell" created="Wed, 19 Aug 2015 22:25:16 +0000"  >&lt;p&gt;Correction, maven docs talk about maven.test.skip for both surefire and the jar plugin, sigh. So it wasn&apos;t an incorrect thought to think it would disable test jar creation.&lt;/p&gt;</comment>
                            <comment id="14703859" author="apurtell" created="Wed, 19 Aug 2015 22:37:14 +0000"  >&lt;p&gt;Attached patch. No -source and -test artifacts made under the hbase-shaded module after application.&lt;/p&gt;</comment>
                            <comment id="14703900" author="ndimiduk" created="Wed, 19 Aug 2015 23:03:15 +0000"  >&lt;p&gt;Did you build with -Prelease ? That&apos;s the only time shaded modules are built.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ patch -p1 &amp;lt; /tmp/HBASE-14249.patch
$ mvn clean package -DskipTests -Dcheckstyle.skip -Dmaven.javadoc.skip -Prelease
...
[INFO] BUILD SUCCESS
...
$ find hbase-shaded -iname *.jar
hbase-shaded/hbase-shaded-client/target/hbase-shaded-client-1.1.2-tests.jar
hbase-shaded/hbase-shaded-client/target/hbase-shaded-client-1.1.2.jar
hbase-shaded/hbase-shaded-client/target/original-hbase-shaded-client-1.1.2.jar
hbase-shaded/hbase-shaded-server/target/hbase-shaded-server-1.1.2-tests.jar
hbase-shaded/hbase-shaded-server/target/hbase-shaded-server-1.1.2.jar
hbase-shaded/hbase-shaded-server/target/original-hbase-shaded-server-1.1.2.jar
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14703904" author="apurtell" created="Wed, 19 Aug 2015 23:06:17 +0000"  >&lt;p&gt;I built with &apos;clean install package&apos; and looked in hbase-shaded/*/target/ &lt;/p&gt;

&lt;p&gt;Maybe with the release profile enabled I need to put those configuration changes in each module pom. Let me try that.&lt;/p&gt;</comment>
                            <comment id="14703928" author="apurtell" created="Wed, 19 Aug 2015 23:15:42 +0000"  >&lt;p&gt;I can turn off sources jar creation with the option createSourcesJar=false to the shade plugin, but not the tests jar. &lt;/p&gt;</comment>
                            <comment id="14703930" author="ndimiduk" created="Wed, 19 Aug 2015 23:16:52 +0000"  >&lt;p&gt;Yeah, I was just trying that. Now I&apos;m fighting with the rat plugin:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;diff --git a/hbase-shaded/hbase-shaded-client/pom.xml b/hbase-shaded/hbase-shaded-client/pom.xml
index c6178d6..d4d0d35 100644
--- a/hbase-shaded/hbase-shaded-client/pom.xml
+++ b/hbase-shaded/hbase-shaded-client/pom.xml
@@ -63,6 +63,22 @@
                         &amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;
                         &amp;lt;artifactId&amp;gt;maven-shade-plugin&amp;lt;/artifactId&amp;gt;
                     &amp;lt;/plugin&amp;gt;
+            &amp;lt;plugin&amp;gt;
+                &amp;lt;!-- Do not make source jars --&amp;gt;
+                &amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;
+                &amp;lt;artifactId&amp;gt;maven-source-plugin&amp;lt;/artifactId&amp;gt;
+                &amp;lt;configuration&amp;gt;
+                    &amp;lt;skipSource&amp;gt;true&amp;lt;/skipSource&amp;gt;
+                &amp;lt;/configuration&amp;gt;
+            &amp;lt;/plugin&amp;gt;
+            &amp;lt;plugin&amp;gt;
+                &amp;lt;!-- Do not make test jars --&amp;gt;
+                &amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;
+                &amp;lt;artifactId&amp;gt;maven-jar-plugin&amp;lt;/artifactId&amp;gt;
+                &amp;lt;configuration&amp;gt;
+                    &amp;lt;skip&amp;gt;true&amp;lt;/skip&amp;gt;
+                &amp;lt;/configuration&amp;gt;
+            &amp;lt;/plugin&amp;gt;
                 &amp;lt;/plugins&amp;gt;
             &amp;lt;/build&amp;gt;
         &amp;lt;/profile&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Unapproved licenses:

  /Users/ndimiduk/repos/hbase/hbase-shaded/hbase-shaded-client/target/dependency-reduced-pom.xml
  /Users/ndimiduk/repos/hbase/hbase-shaded/hbase-shaded-client/target/rat.txt
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14703933" author="apurtell" created="Wed, 19 Aug 2015 23:18:29 +0000"  >&lt;p&gt;Attached an updated patch that will at least stop the production of source jars.&lt;/p&gt;</comment>
                            <comment id="14703953" author="apurtell" created="Wed, 19 Aug 2015 23:30:32 +0000"  >&lt;p&gt;I don&apos;t seem to be able to stop the creation of the stub test jar, but may be able to stuff LICENSE and NOTICE files into it. Trying&lt;/p&gt;</comment>
                            <comment id="14703960" author="apurtell" created="Wed, 19 Aug 2015 23:35:21 +0000"  >&lt;p&gt;Nope, can&apos;t specify different behavior for main and test jar.&lt;/p&gt;</comment>
                            <comment id="14703987" author="busbey" created="Wed, 19 Aug 2015 23:47:41 +0000"  >&lt;p&gt;you can get a different test jar by placing things in src/test/resources htere should be examples in e..g hbase-server.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt; those target dirs should already be exempt from rat. could you do &quot;mvn help:effective-pom&quot; (along with whatever profile activations you were using) and attach it here?&lt;/p&gt;</comment>
                            <comment id="14703994" author="ndimiduk" created="Wed, 19 Aug 2015 23:52:01 +0000"  >&lt;p&gt;Effective pom with my changes to hbase-shaded/hbase-shaded-client/pom.xml from the diff above.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;mvn help:effective-pom -DskipTests -Dcheckstyle.skip -Dmaven.javadoc.skip -Prelease 2&amp;amp;&amp;gt;1 &amp;gt; effective-pom.xml&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="14704004" author="apurtell" created="Wed, 19 Aug 2015 23:56:47 +0000"  >&lt;p&gt;Cleaned up version of earlier patch that tells the shade plugin not to make a source jar&lt;/p&gt;</comment>
                            <comment id="14704019" author="apurtell" created="Thu, 20 Aug 2015 00:03:40 +0000"  >&lt;p&gt;Now I have the RAT problem too&lt;/p&gt;</comment>
                            <comment id="14704025" author="busbey" created="Thu, 20 Aug 2015 00:10:53 +0000"  >&lt;p&gt;Does the  &quot;add src/main/asciidoc/.gitignore&quot; workaround from &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14225&quot; title=&quot;Exclude **/target/** from RAT checks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14225&quot;&gt;&lt;del&gt;HBASE-14225&lt;/del&gt;&lt;/a&gt; work?&lt;/p&gt;</comment>
                            <comment id="14704029" author="apurtell" created="Thu, 20 Aug 2015 00:11:56 +0000"  >&lt;p&gt;Just placing META-INF into src/test/resources in the hbase-shaded-foo module isn&apos;t sufficient. Those who know more about Maven than I probably knew that already. Unassigning from myself as this is outside what I can do with Maven.&lt;/p&gt;

&lt;p&gt;I&apos;d want to remove the hbase-shaded-*-tests jars from the tarball assembly but don&apos;t know how. Can we do that? I suppose worst case we could remove it by hand, at least in the short term, so we can get 1.1.x releases out again.&lt;/p&gt;</comment>
                            <comment id="14704031" author="apurtell" created="Thu, 20 Aug 2015 00:14:10 +0000"  >&lt;p&gt;The RAT problem may be specific to Nick&apos;s test invocation: &lt;tt&gt;mvn clean package -DskipTests -Dcheckstyle.skip -Dmaven.javadoc.skip -Prelease&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;Let me try the usual set of release commands with the patch applied that disables source jar building.&lt;/p&gt;</comment>
                            <comment id="14704034" author="ndimiduk" created="Thu, 20 Aug 2015 00:15:30 +0000"  >&lt;p&gt;rat is only invoked by the release profile, which is also the only profile where the shaded assemblies are produced.&lt;/p&gt;</comment>
                            <comment id="14704059" author="apurtell" created="Thu, 20 Aug 2015 00:43:59 +0000"  >&lt;p&gt;No RAT problems if following the steps documented in &lt;a href=&quot;http://hbase.apache.org/book.html#releasing&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hbase.apache.org/book.html#releasing&lt;/a&gt; . (I didn&apos;t do &apos;deploy&apos; though.) This is with master branch with the patch on this issue applied. &lt;/p&gt;

&lt;p&gt;We don&apos;t include shaded jars in the assembly it seems. Pardon, my head is still back with 0.98 and 1.0. Therefore the issue is, assuming we have the patch on this issue applied, that we end up uploading an empty hbase-shaded-*-tests jar to Nexus with a 0 length NOTICE, is that right? Is that really a blocker? Agreed its ugly and should be fixed longer term. Maybe there&apos;s a way to exclude them from the deploy goal.&lt;/p&gt;
</comment>
                            <comment id="14704077" author="ndimiduk" created="Thu, 20 Aug 2015 00:57:59 +0000"  >&lt;p&gt;Okay, now I can&apos;t repro my earlier rat problem o.O.&lt;/p&gt;

&lt;p&gt;Rolling back to &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ git rev-parse HEAD
0acbff24cebe78dae37225d65e75f74c887a01d0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Run &lt;tt&gt;mvn clean install -DskipTests -Dcheckstyle.skip -Dmaven.javadoc.skip -Prelease&lt;/tt&gt;, which is roughly analogous to &lt;a href=&quot;https://github.com/apache/hbase/blob/branch-1.1/dev-support/make_rc.sh#L57&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hbase/blob/branch-1.1/dev-support/make_rc.sh#L57&lt;/a&gt;, I get&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ find hbase-shaded -iname *.jar
hbase-shaded/hbase-shaded-client/target/hbase-shaded-client-1.1.2-tests.jar
hbase-shaded/hbase-shaded-client/target/hbase-shaded-client-1.1.2.jar
hbase-shaded/hbase-shaded-client/target/original-hbase-shaded-client-1.1.2.jar
hbase-shaded/hbase-shaded-server/target/hbase-shaded-server-1.1.2-tests.jar
hbase-shaded/hbase-shaded-server/target/hbase-shaded-server-1.1.2.jar
hbase-shaded/hbase-shaded-server/target/original-hbase-shaded-server-1.1.2.jar
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So, no source jars.&lt;/p&gt;

&lt;p&gt;hbase-shaded/hbase-shaded-client/target/hbase-shaded-client-1.1.2-tests.jar contains only a meta-inf/notice file, which is empty. IMO this is not a blocker for any release.&lt;/p&gt;</comment>
                            <comment id="14704086" author="apurtell" created="Thu, 20 Aug 2015 01:06:34 +0000"  >&lt;p&gt;Drop priority to default. Shall we apply the patch on this issue? Better than before.&lt;/p&gt;</comment>
                            <comment id="14704087" author="ndimiduk" created="Thu, 20 Aug 2015 01:08:07 +0000"  >&lt;p&gt;From that build sandbox state, I run &lt;a href=&quot;https://github.com/apache/hbase/blob/branch-1.1/dev-support/make_rc.sh#L58&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;the next command&lt;/a&gt; and get&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ find hbase-shaded -iname *.jar
hbase-shaded/hbase-shaded-client/target/hbase-shaded-client-1.1.2-tests.jar
hbase-shaded/hbase-shaded-client/target/hbase-shaded-client-1.1.2.jar
hbase-shaded/hbase-shaded-client/target/original-hbase-shaded-client-1.1.2-tests.jar
hbase-shaded/hbase-shaded-client/target/original-hbase-shaded-client-1.1.2.jar
hbase-shaded/hbase-shaded-server/target/hbase-shaded-server-1.1.2-tests.jar
hbase-shaded/hbase-shaded-server/target/hbase-shaded-server-1.1.2.jar
hbase-shaded/hbase-shaded-server/target/original-hbase-shaded-server-1.1.2-tests.jar
hbase-shaded/hbase-shaded-server/target/original-hbase-shaded-server-1.1.2.jar
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This time hbase-shaded/hbase-shaded-client/target/hbase-shaded-client-1.1.2-tests.jar contains just a meta-inf/notice, but it&apos;s not empty&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;
Apache HBase - Shaded - Client
Copyright 2007-2015 The Apache Software Foundation

This product includes software developed at
The Apache Software Foundation (http://www.apache.org/).

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14704092" author="ndimiduk" created="Thu, 20 Aug 2015 01:11:26 +0000"  >&lt;blockquote&gt;
&lt;p&gt;This time hbase-shaded/hbase-shaded-client/target/hbase-shaded-client-1.1.2-tests.jar contains just a meta-inf/notice, but it&apos;s not empty&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Apache HBase - Shaded - Client
Copyright 2007-2015 The Apache Software Foundation

This product includes software developed at
The Apache Software Foundation (http://www.apache.org/).
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;

&lt;p&gt;This is what I see in &lt;a href=&quot;https://repository.apache.org/content/repositories/orgapachehbase-1090/org/apache/hbase/hbase-shaded-client/1.1.2/hbase-shaded-client-1.1.2-tests.jar&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://repository.apache.org/content/repositories/orgapachehbase-1090/org/apache/hbase/hbase-shaded-client/1.1.2/hbase-shaded-client-1.1.2-tests.jar&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14704099" author="apurtell" created="Thu, 20 Aug 2015 01:14:11 +0000"  >&lt;p&gt;When I pulled out the shaded test jars after a build and unpacked them, the NOTICE file was 0 bytes long, but I was working with master branch.&lt;/p&gt;</comment>
                            <comment id="14704107" author="ndimiduk" created="Thu, 20 Aug 2015 01:18:08 +0000"  >&lt;p&gt;I applied the &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12751368/HBASE-14249.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;attached patch&lt;/a&gt; and ran again the first command, line 57 from make_rc.sh. It doesn&apos;t appear to have any impact on the resulting shaded artifacts. Same jars, tests no sources. Same empty notice file in client-tests.jar.&lt;/p&gt;</comment>
                            <comment id="14704113" author="apurtell" created="Thu, 20 Aug 2015 01:22:48 +0000"  >&lt;p&gt;The patch only manages to turn off shaded source jars. &lt;/p&gt;</comment>
                            <comment id="14704392" author="busbey" created="Thu, 20 Aug 2015 06:45:33 +0000"  >&lt;p&gt;-04&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;relies on user properties to skip test and source jars&lt;/li&gt;
	&lt;li&gt;tells the shade plugin not to create a shaded test jar&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;the shade plugin was forcing the creation of a test jar even when we skipped the module&apos;s test-jar.&lt;/p&gt;

&lt;p&gt;tested by running {{mvn -Prelease -Papache-release -DskipTests clean package }}. using &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt;&apos;s invocation now.&lt;/p&gt;</comment>
                            <comment id="14704408" author="busbey" created="Thu, 20 Aug 2015 07:04:35 +0000"  >&lt;p&gt;first command done, no source and no test jars for the shaded module. second command is running.&lt;/p&gt;</comment>
                            <comment id="14704691" author="busbey" created="Thu, 20 Aug 2015 11:17:31 +0000"  >&lt;p&gt;second command, still no source nor test jars for shaded modules.&lt;/p&gt;</comment>
                            <comment id="14705041" author="apurtell" created="Thu, 20 Aug 2015 14:48:49 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;&amp;gt; &amp;lt;shadeTestJar&amp;gt;false&amp;lt;/shadeTestJar&amp;gt;&lt;/p&gt;

&lt;p&gt;I saw this and interpreted it as &quot;we will have a test jar, decide if it should be shaded or not&quot; . Sigh, sorry about that.&lt;/p&gt;</comment>
                            <comment id="14705105" author="busbey" created="Thu, 20 Aug 2015 15:21:15 +0000"  >&lt;p&gt;I got through the third command (with install instead of deploy), and still no source or test jars. (sooooo many gpg passphrases)&lt;/p&gt;

&lt;p&gt;will push shortly&lt;/p&gt;</comment>
                            <comment id="14705158" author="busbey" created="Thu, 20 Aug 2015 15:51:57 +0000"  >&lt;p&gt;pushed to branch-1.1+&lt;/p&gt;</comment>
                            <comment id="14705412" author="ndimiduk" created="Thu, 20 Aug 2015 17:51:55 +0000"  >&lt;p&gt;+1, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=busbey&quot; class=&quot;user-hover&quot; rel=&quot;busbey&quot;&gt;Sean Busbey&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14705429" author="hudson" created="Thu, 20 Aug 2015 17:57:01 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.2-IT #102 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2-IT/102/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2-IT/102/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14249&quot; title=&quot;shaded jar modules create spurious source and test jars with incorrect LICENSE/NOTICE info&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14249&quot;&gt;&lt;del&gt;HBASE-14249&lt;/del&gt;&lt;/a&gt; shaded jar modules create spurious source and test jars with incorrect LICENSE/NOTICE info (busbey: rev 63d91af1dece4da9090af4c9c339d9403522498c)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-shaded/pom.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14705443" author="hudson" created="Thu, 20 Aug 2015 18:03:31 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.3-IT #106 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3-IT/106/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3-IT/106/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14249&quot; title=&quot;shaded jar modules create spurious source and test jars with incorrect LICENSE/NOTICE info&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14249&quot;&gt;&lt;del&gt;HBASE-14249&lt;/del&gt;&lt;/a&gt; shaded jar modules create spurious source and test jars with incorrect LICENSE/NOTICE info (busbey: rev 610dbc0f5e71bfec6eb97175103fde61e3641625)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-shaded/pom.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14705493" author="hudson" created="Thu, 20 Aug 2015 18:23:38 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.1 #626 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.1/626/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.1/626/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14249&quot; title=&quot;shaded jar modules create spurious source and test jars with incorrect LICENSE/NOTICE info&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14249&quot;&gt;&lt;del&gt;HBASE-14249&lt;/del&gt;&lt;/a&gt; shaded jar modules create spurious source and test jars with incorrect LICENSE/NOTICE info (busbey: rev f261d9c0baeaaf3fcc6da17435c1abcb6bb83763)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-shaded/pom.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14705532" author="hudson" created="Thu, 20 Aug 2015 18:45:04 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.3 #121 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3/121/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3/121/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14249&quot; title=&quot;shaded jar modules create spurious source and test jars with incorrect LICENSE/NOTICE info&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14249&quot;&gt;&lt;del&gt;HBASE-14249&lt;/del&gt;&lt;/a&gt; shaded jar modules create spurious source and test jars with incorrect LICENSE/NOTICE info (busbey: rev 610dbc0f5e71bfec6eb97175103fde61e3641625)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-shaded/pom.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14705716" author="hudson" created="Thu, 20 Aug 2015 20:39:06 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #6741 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/6741/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/6741/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14249&quot; title=&quot;shaded jar modules create spurious source and test jars with incorrect LICENSE/NOTICE info&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14249&quot;&gt;&lt;del&gt;HBASE-14249&lt;/del&gt;&lt;/a&gt; shaded jar modules create spurious source and test jars with incorrect LICENSE/NOTICE info (busbey: rev e917787d9782961976c6489fb4a1dba19984b0ca)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-shaded/pom.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14705951" author="hudson" created="Thu, 20 Aug 2015 23:16:38 +0000"  >&lt;p&gt;ABORTED: Integrated in HBase-1.2 #123 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2/123/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2/123/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14249&quot; title=&quot;shaded jar modules create spurious source and test jars with incorrect LICENSE/NOTICE info&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14249&quot;&gt;&lt;del&gt;HBASE-14249&lt;/del&gt;&lt;/a&gt; shaded jar modules create spurious source and test jars with incorrect LICENSE/NOTICE info (busbey: rev 63d91af1dece4da9090af4c9c339d9403522498c)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-shaded/pom.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12751426" name="HBASE-14249.4.patch" size="1813" author="busbey" created="Thu, 20 Aug 2015 06:45:33 +0000"/>
                            <attachment id="12751368" name="HBASE-14249.patch" size="2004" author="apurtell" created="Wed, 19 Aug 2015 23:56:47 +0000"/>
                            <attachment id="12751360" name="HBASE-14249.patch" size="3425" author="apurtell" created="Wed, 19 Aug 2015 23:17:58 +0000"/>
                            <attachment id="12751357" name="HBASE-14249.patch" size="1067" author="apurtell" created="Wed, 19 Aug 2015 22:37:14 +0000"/>
                            <attachment id="12751366" name="effective-pom.xml" size="2790600" author="ndimiduk" created="Wed, 19 Aug 2015 23:52:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 19 Aug 2015 06:25:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 17 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2j35j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>