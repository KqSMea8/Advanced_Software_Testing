<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:32:38 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5972/HBASE-5972.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5972] RegionServer Hangs on Compaction upon NameNode Death</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5972</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Noticed 20-minute hangs when doing a namenode kill test on our production shadow cluster. All regionservers terminated except one, which got stuck with the following. There might be some race conditions/deadlocks on compaction thread shutdown worth investigating.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12554515">HBASE-5972</key>
            <summary>RegionServer Hangs on Compaction upon NameNode Death</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nspiegelberg">Nicolas Spiegelberg</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 May 2012 15:21:00 +0000</created>
                <updated>Sat, 10 Jan 2015 02:10:15 +0000</updated>
                            <resolved>Sat, 10 Jan 2015 02:10:15 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13271479" author="nspiegelberg" created="Wed, 9 May 2012 15:21:05 +0000"  >&lt;p&gt;RS lost its znode at around 9:02. .. but kept dragging on until 9:22 am to finally die.&lt;/p&gt;

&lt;p&gt;2012-05-01 09:02:47,617 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 32 on 60020: exiting&lt;br/&gt;
2012-05-01 09:02:47,616 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 289 on 60020: exiting&lt;br/&gt;
2012-05-01 09:02:47,617 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 51 on 60020: exiting&lt;br/&gt;
2012-05-01 09:03:38,395 DEBUG org.apache.hadoop.hbase.regionserver.CompactSplitThread: Waiting for Large Compaction Thread to finish...&lt;br/&gt;
2012-05-01 09:04:38,395 DEBUG org.apache.hadoop.hbase.regionserver.CompactSplitThread: Waiting for Large Compaction Thread to finish...&lt;br/&gt;
2012-05-01 09:05:38,396 DEBUG org.apache.hadoop.hbase.regionserver.CompactSplitThread: Waiting for Large Compaction Thread to finish...2012-05-01 09:06:38,396 DEBUG org.apache.hadoop.hbase.regionserver.CompactSplitThread: Waiting for Large Compaction Thread to finish...2012-05-01 09:07:38,396 DEBUG org.apache.hadoop.hbase.regionserver.CompactSplitThread: Waiting for Large Compaction Thread to finish...&lt;br/&gt;
2012-05-01 09:08:38,396 DEBUG org.apache.hadoop.hbase.regionserver.CompactSplitThread: Waiting for Large Compaction Thread to finish...&lt;br/&gt;
2012-05-01 09:09:38,396 DEBUG org.apache.hadoop.hbase.regionserver.CompactSplitThread: Waiting for Large Compaction Thread to finish...2012-05-01 09:10:38,422 DEBUG org.apache.hadoop.hbase.regionserver.CompactSplitThread: Waiting for Large Compaction Thread to finish...2012-05-01 09:11:38,472 DEBUG org.apache.hadoop.hbase.regionserver.CompactSplitThread: Waiting for Large Compaction Thread to finish...2012-05-01 09:12:38,472 DEBUG org.apache.hadoop.hbase.regionserver.CompactSplitThread: Waiting for Large Compaction Thread to finish...2012-05-01 09:13:38,473 DEBUG org.apache.hadoop.hbase.regionserver.CompactSplitThread: Waiting for Large Compaction Thread to finish...2012-05-01 09:14:38,473 DEBUG org.apache.hadoop.hbase.regionserver.CompactSplitThread: Waiting for Large Compaction Thread to finish...2012-05-01 09:15:38,482 DEBUG org.apache.hadoop.hbase.regionserver.CompactSplitThread: Waiting for Large Compaction Thread to finish...2012-05-01 09:16:38,482 DEBUG org.apache.hadoop.hbase.regionserver.CompactSplitThread: Waiting for Large Compaction Thread to finish...2012-05-01 09:17:38,482 DEBUG org.apache.hadoop.hbase.regionserver.CompactSplitThread: Waiting for Large Compaction Thread to finish...2012-05-01 09:18:38,483 DEBUG org.apache.hadoop.hbase.regionserver.CompactSplitThread: Waiting for Large Compaction Thread to finish...2012-05-01 09:19:38,483 DEBUG org.apache.hadoop.hbase.regionserver.CompactSplitThread: Waiting for Large Compaction Thread to finish...2012-05-01 09:20:38,483 DEBUG org.apache.hadoop.hbase.regionserver.CompactSplitThread: Waiting for Large Compaction Thread to finish...2012-05-01 09:21:38,483 DEBUG org.apache.hadoop.hbase.regionserver.CompactSplitThread: Waiting for Large Compaction Thread to finish...2012-05-01 09:22:38,483 DEBUG org.apache.hadoop.hbase.regionserver.CompactSplitThread: Waiting for Large Compaction Thread to finish...&lt;br/&gt;
2012-05-01 09:22:40,378 WARN org.apache.hadoop.hdfs.DFSClient: DataStreamer Exception: org.apache.hadoop.ipc.RemoteException: org.apache.hadoop.hdfs.server.namenode.LeaseExpiredException: No lease on /TITAN019-ASH3-HBASE/MailBox_cell19_v1/a&lt;br/&gt;
296dd72364afee146190f5a751606eb/.tmp/ca501bfd82474bd39a94f5aff0e08709 File does not exist. &lt;span class=&quot;error&quot;&gt;&amp;#91;Lease. Holder: DFSClient_-1458957666, pendingcreates: 1&amp;#93;&lt;/span&gt; at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.checkLease(FSNamesystem.java:1830)&lt;br/&gt;
at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.checkLease(FSNamesystem.java:1821) at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBlock(FSNamesystem.java:1665) at org.apache.hadoop.hdfs.server.namenode.NameNode.addBlock(NameNode.java:600)&lt;br/&gt;
at sun.reflect.GeneratedMethodAccessor45.invoke(Unknown Source)&lt;br/&gt;
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
at java.lang.reflect.Method.invoke(Method.java:597) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:737)&lt;br/&gt;
at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1065)&lt;br/&gt;
at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1061)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;/p&gt;</comment>
                            <comment id="13273192" author="gopinathan.av" created="Fri, 11 May 2012 12:08:32 +0000"  >&lt;p&gt;We are also getting the same issue.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2012-05-06 21:11:28,805 INFO org.apache.hadoop.hbase.regionserver.Leases: regionserver60020 closing leases
2012-05-06 21:11:28,806 INFO org.apache.hadoop.hbase.regionserver.Leases: regionserver60020 closed leases
2012-05-06 21:11:28,812 INFO org.apache.zookeeper.ZooKeeper: Session: 0x237235e09230006 closed
2012-05-06 21:11:28,812 INFO org.apache.hadoop.hbase.regionserver.HRegionServer: stopping server HOST-192-168-47-207,60020,1336336462275; zookeeper connection closed.
2012-05-06 21:11:28,812 INFO org.apache.zookeeper.ClientCnxn: EventThread shut down
2012-05-06 21:11:28,812 DEBUG org.apache.hadoop.hbase.regionserver.CompactSplitThread: Waiting for Split Thread to finish...
2012-05-06 21:11:28,812 DEBUG org.apache.hadoop.hbase.regionserver.CompactSplitThread: Waiting for Large Compaction Thread to finish...
2012-05-06 21:11:28,812 DEBUG org.apache.hadoop.hbase.regionserver.CompactSplitThread: Waiting for Small Compaction Thread to finish...
2012-05-06 21:11:28,826 INFO org.apache.hadoop.hbase.regionserver.HRegionServer: regionserver60020 exiting

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13273193" author="ram_krish" created="Fri, 11 May 2012 12:11:38 +0000"  >&lt;p&gt;@Nicolas&lt;br/&gt;
ARe you working on this? If not we would like to dig in on this?&lt;/p&gt;</comment>
                            <comment id="13566127" author="subrata4096" created="Wed, 30 Jan 2013 03:50:16 +0000"  >&lt;p&gt;How to reproduce this one?&lt;/p&gt;</comment>
                            <comment id="14269092" author="clehene" created="Thu, 8 Jan 2015 09:43:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ramkrishna.s.vasudevan%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;ramkrishna.s.vasudevan@gmail.com&quot;&gt;ramkrishna vasudevan&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gopinathan.av&quot; class=&quot;user-hover&quot; rel=&quot;gopinathan.av&quot;&gt;Gopinathan A&lt;/a&gt; still an issue? Can you confirm affected versions?&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt; ping.&lt;/p&gt;</comment>
                            <comment id="14272258" author="apurtell" created="Sat, 10 Jan 2015 02:10:15 +0000"  >&lt;p&gt;Was never reported in a reproductable manner.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 11 May 2012 12:08:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>238765</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 48 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02d9b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11749</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>