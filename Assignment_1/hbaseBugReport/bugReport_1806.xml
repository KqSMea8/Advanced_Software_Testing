<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:56:32 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1806/HBASE-1806.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1806] Scanners do not respect row locks; scanner view could return a skewed view on row if ongoing update</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1806</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;What I&apos;m seeing is that BaseScanner misses updates made by an update milliseconds before &amp;#8211; even hundreds of milliseconds before.  See hbase-1784 where I&apos;m seeing double-assignment of regions.&lt;/p&gt;

&lt;p&gt;Scanners do not respect row locks.  They should else could return a row with partial updates committed.  What if a .META. region has tens of storefiles and a scan does a get full row which takes a long time.  Say an update comes in during this read.  First it will go in because no row lock is outstanding.  Second, we&apos;ll miss the edit given we look at things in order &amp;#8211; memstore, then each storefile down to the oldest.  What if the update is followed by an update of server state; e.g. region is moved out of intransition state?  And inside in same server, say the master, it makes decisions dependent on what it sees when it does a scanner#next; e.g. BaseScanner checking for assignment?&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12434479">HBASE-1806</key>
            <summary>Scanners do not respect row locks; scanner view could return a skewed view on row if ongoing update</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Sep 2009 04:44:16 +0000</created>
                <updated>Sun, 31 Jan 2010 07:18:14 +0000</updated>
                            <resolved>Fri, 16 Oct 2009 01:28:19 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12749962" author="streamy" created="Tue, 1 Sep 2009 16:14:52 +0000"  >&lt;p&gt;These kinds of race conditions are another reason why moving stuff into ZK will make life easier.  Do you think we need to do something major for 0.20 or can we wait for 0.21?&lt;/p&gt;</comment>
                            <comment id="12749977" author="stack" created="Tue, 1 Sep 2009 16:32:08 +0000"  >&lt;p&gt;I don&apos;t think we can fix this w/ tools available to us in 0.20 hbase other than by doing the ugly stuff we&apos;re doing over in hbase-1784.  This is a contrary issue.  ZK will help but will not be enough (IMO).&lt;/p&gt;</comment>
                            <comment id="12749983" author="apurtell" created="Tue, 1 Sep 2009 16:41:47 +0000"  >&lt;p&gt;I&apos;ve always accepted this fact about scanners. It&apos;s debatable if we should take the performance hit to consider transactional semantics of any kind for scanners. Could be enough to just document that TableMappers should test for inconsistent state from the application&apos;s perspective and ignore the record as appropriate. Can get another shot at it during the next job. Of course master scanners are a special case. I wonder why this did not occur to me before... Moving META into ZK is the appropriate strategy to use for this and other reasons IMO. &lt;/p&gt;</comment>
                            <comment id="12749990" author="streamy" created="Tue, 1 Sep 2009 17:03:22 +0000"  >&lt;p&gt;Agree with apurtell.  It&apos;s an accepted fact about scanners, from user POV.  But must be addressed for master/meta, and I think ZK is the right direction.  For now, ugly stuff in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1784&quot; title=&quot;Missing rows after medium intensity insert&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1784&quot;&gt;&lt;del&gt;HBASE-1784&lt;/del&gt;&lt;/a&gt; is fine with me... this is another one of the issues that only rears it&apos;s head during high-load, sustained imports.  But dealing with it in the case it does happen with a Get sounds fine for now.&lt;/p&gt;</comment>
                            <comment id="12749994" author="jdcryans" created="Tue, 1 Sep 2009 17:09:24 +0000"  >&lt;p&gt;I bet this issue is playing a lot against us on small clusters under high load, at least 1784 can temporarily help fixing that.&lt;/p&gt;</comment>
                            <comment id="12750732" author="apurtell" created="Wed, 2 Sep 2009 23:28:16 +0000"  >&lt;p&gt;Close as WontFix?&lt;/p&gt;</comment>
                            <comment id="12750734" author="stack" created="Wed, 2 Sep 2009 23:35:03 +0000"  >&lt;p&gt;Ok.  I buy the argument.  I opened &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1812&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-1812&lt;/a&gt; for 0.20.1 so we doc. this agreement preferably in Scanner javadoc.&lt;/p&gt;</comment>
                            <comment id="12766366" author="apurtell" created="Fri, 16 Oct 2009 01:28:19 +0000"  >&lt;p&gt;Closed as WontFix.&lt;/p&gt;</comment>
                            <comment id="12766384" author="stack" created="Fri, 16 Oct 2009 02:53:53 +0000"  >&lt;p&gt;Thanks Andrew.  I added a note to javadoc a while back.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12446391">HBASE-2162</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 1 Sep 2009 16:14:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25994</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 10 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hfd3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99751</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>