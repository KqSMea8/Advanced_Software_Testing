<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:54:15 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-14556/HBASE-14556.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-14556] Make prefetchOnOpen configurable for index and/or data blocks</title>
                <link>https://issues.apache.org/jira/browse/HBASE-14556</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;This came up in user discussions. It would be great to add an extra option to the &lt;tt&gt;CacheConfig&lt;/tt&gt; that allows to specify what blocks are cached during region/file opening. This should allows to set &lt;tt&gt;BlockIndexOnly&lt;/tt&gt;, &lt;tt&gt;BloomFilterOnly&lt;/tt&gt;, &lt;tt&gt;AllIndexesOnly&lt;/tt&gt;, &lt;tt&gt;DataOnly&lt;/tt&gt;, and &lt;tt&gt;AllBlocks&lt;/tt&gt;. &lt;/p&gt;

&lt;p&gt;For large datasets it is not viable to load all blocks into memory, but to speed up access it still makes sense to prefetch the index blocks (being block index and Bloom filter blocks).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12902562">HBASE-14556</key>
            <summary>Make prefetchOnOpen configurable for index and/or data blocks</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="aliciashu">Alicia Ying Shu</assignee>
                                    <reporter username="larsgeorge">Lars George</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Oct 2015 00:36:35 +0000</created>
                <updated>Mon, 8 Feb 2016 23:36:48 +0000</updated>
                                                                            <component>BlockCache</component>
                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                <comments>
                            <comment id="14952628" author="apurtell" created="Mon, 12 Oct 2015 04:50:34 +0000"  >&lt;p&gt;We changed KEEP_DELETED_CELLS from a boolean to an end on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12363&quot; title=&quot;Improve how KEEP_DELETED_CELLS works with MIN_VERSIONS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12363&quot;&gt;&lt;del&gt;HBASE-12363&lt;/del&gt;&lt;/a&gt;. Although that was a schema option not a CacheConfig option, perhaps we could do something similar here for prefetchOnOpen. &lt;/p&gt;</comment>
                            <comment id="14952629" author="apurtell" created="Mon, 12 Oct 2015 04:51:30 +0000"  >&lt;p&gt;Above comment fell victim to spell mangling on the phone. Should read &quot;from a boolean to an enum...&quot;&lt;/p&gt;</comment>
                            <comment id="14956372" author="chenheng" created="Wed, 14 Oct 2015 06:46:59 +0000"  >&lt;blockquote&gt;
&lt;p&gt;For large datasets it is not viable to load all blocks into memory, but to speed up access it still makes sense to prefetch the index blocks (being block index and Bloom filter blocks).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Is it means we should prefetch index blocks even if &lt;tt&gt;prefetchOnOpen&lt;/tt&gt; option set false?&lt;/p&gt;</comment>
                            <comment id="14956420" author="chenheng" created="Wed, 14 Oct 2015 07:26:13 +0000"  >&lt;blockquote&gt;
&lt;p&gt;For large datasets it is not viable to load all blocks into memory, but to speed up access it still makes sense to prefetch the index blocks (being block index and Bloom filter blocks).&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;As current logic,  when readblock,  index blocks will be cached already.  As code below, after read block from hdfs, it will call &lt;tt&gt;shouldCacheBlockOnRead&lt;/tt&gt; to decide whether we should cache the block.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; shouldCacheBlockOnRead(BlockCategory category) {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; isBlockCacheEnabled()
        &amp;amp;&amp;amp; (cacheDataOnRead ||
            category == BlockCategory.INDEX ||
            category == BlockCategory.BLOOM ||
            (prefetchOnOpen &amp;amp;&amp;amp;
                (category != BlockCategory.META &amp;amp;&amp;amp;
                 category != BlockCategory.UNKNOWN)));
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 12 Oct 2015 04:50:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 9 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2mm6f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>