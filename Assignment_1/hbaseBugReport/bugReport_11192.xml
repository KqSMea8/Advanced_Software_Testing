<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:21:00 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-11192/HBASE-11192.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-11192] HBase ClusterId File Empty Check Loggic</title>
                <link>https://issues.apache.org/jira/browse/HBASE-11192</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;if the clusterid file exists but empty ,then the following check logic in the MasterFileSystem.java has none effects.&lt;br/&gt;
    if (!FSUtils.checkClusterIdExists(fs, rd, c.getInt(&lt;br/&gt;
        HConstants.THREAD_WAKE_FREQUENCY, 10 * 1000))) &lt;/p&gt;
{
          FSUtils.setClusterId(fs, rd, UUID.randomUUID().toString(), c.getInt(
          HConstants.THREAD_WAKE_FREQUENCY, 10 * 1000));
    }
&lt;p&gt;    clusterId = FSUtils.getClusterId(fs, rd);&lt;br/&gt;
because the checkClusterIdExists method only check the path .&lt;br/&gt;
        Path filePath = new Path(rootdir, HConstants.CLUSTER_ID_FILE_NAME);&lt;br/&gt;
        return fs.exists(filePath);&lt;/p&gt;

&lt;p&gt;in my case ,the file exists but is empty,so the readed clusterid is null which cause a nullPointerException:&lt;/p&gt;

&lt;p&gt;java.lang.NullPointerException&lt;br/&gt;
	at org.apache.hadoop.hbase.util.Bytes.toBytes(Bytes.java:441)&lt;br/&gt;
	at org.apache.hadoop.hbase.zookeeper.ClusterId.setClusterId(ClusterId.java:72)&lt;br/&gt;
	at org.apache.hadoop.hbase.master.HMaster.finishInitialization(HMaster.java:581)&lt;br/&gt;
	at org.apache.hadoop.hbase.master.HMaster.run(HMaster.java:433)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:745)&lt;/p&gt;

&lt;p&gt;is this a bug?please make sure!&lt;/p&gt;</description>
                <environment>&lt;p&gt;HBase 0.94+Hadoop2.2.0+Zookeeper3.4.5&lt;/p&gt;</environment>
        <key id="12714689">HBASE-11192</key>
            <summary>HBase ClusterId File Empty Check Loggic</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sunjingtao">sunjingtao</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 May 2014 01:53:17 +0000</created>
                <updated>Thu, 16 Oct 2014 14:15:28 +0000</updated>
                            <resolved>Thu, 16 Oct 2014 14:15:28 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="14000591" author="jmspaggi" created="Sat, 17 May 2014 01:25:18 +0000"  >&lt;p&gt;FSUtils.getClusterId() will return null because your file is empty and will store null in clusterId too. And this value is used later for many other operations. You should have an entry on your logs saying that ID can not be retrieved. This is normal for HBase to not start in those conditions. I don&apos;t think this is a big. Can you please confirm the master is down after that? It should.&lt;/p&gt;</comment>
                            <comment id="14173790" author="ashish singhi" created="Thu, 16 Oct 2014 14:15:28 +0000"  >&lt;p&gt;Duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11191&quot; title=&quot;HBase ClusterId File Empty Check Loggic&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11191&quot;&gt;HBASE-11191&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 17 May 2014 01:25:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>393002</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 9 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1vobr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>393169</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>