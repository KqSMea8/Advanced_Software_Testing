<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:40:40 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6878/HBASE-6878.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6878] DistributerLogSplit can fail to resubmit a task done if there is an exception during the log archiving</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6878</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The code in SplitLogManager# getDataSetWatchSuccess is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (slt.isDone()) {
      LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;task &quot;&lt;/span&gt; + path + &lt;span class=&quot;code-quote&quot;&gt;&quot; entered state: &quot;&lt;/span&gt; + slt.toString());
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (taskFinisher != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; !ZKSplitLog.isRescanNode(watcher, path)) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (taskFinisher.finish(slt.getServerName(), ZKSplitLog.getFileName(path)) == Status.DONE) {
          setDone(path, SUCCESS);
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
          resubmitOrFail(path, CHECK);
        }
      } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
        setDone(path, SUCCESS);
      }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;          resubmitOrFail(path, CHECK);&lt;/p&gt;

&lt;p&gt;should be &lt;br/&gt;
          resubmitOrFail(path, FORCE);&lt;/p&gt;

&lt;p&gt;Without it, the task won&apos;t be resubmitted if the delay is not reached, and the task will be marked as failed.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12609042">HBASE-6878</key>
            <summary>DistributerLogSplit can fail to resubmit a task done if there is an exception during the log archiving</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nkeywal">Nicolas Liochon</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 Sep 2012 13:58:28 +0000</created>
                <updated>Tue, 2 Oct 2012 19:09:51 +0000</updated>
                            <resolved>Tue, 2 Oct 2012 19:09:51 +0000</resolved>
                                                                    <component>master</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13463686" author="nkeywal" created="Wed, 26 Sep 2012 10:17:53 +0000"  >&lt;p&gt;Any feedback on this? It&apos;s in the &quot;probability of occurrence: very low&quot; category, but &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6738&quot; title=&quot;Too aggressive task resubmission from the distributed log manager&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6738&quot;&gt;&lt;del&gt;HBASE-6738&lt;/del&gt;&lt;/a&gt; increases the delay so the probability, so I would prefer to commit the two altogether.&lt;/p&gt;

&lt;p&gt;A few lines after the one mentioned in the description there is a similar pattern. I will fix both of them if it&apos;s confirmed.&lt;/p&gt;</comment>
                            <comment id="13464471" author="stack" created="Thu, 27 Sep 2012 05:51:54 +0000"  >&lt;p&gt;taskFinisher will not return Status.DONE under what circumstances?  If we get an IOE splitting the log it seems.  And that could happen within the timeout... and task won&apos;t be resubmitted if we pass in CHECK?  I don&apos;t know this code well.  Jimmy?  You have an opinion.  Let me trying pinging Prakash.&lt;/p&gt;</comment>
                            <comment id="13464874" author="khemani" created="Thu, 27 Sep 2012 16:59:50 +0000"  >&lt;p&gt;The logic to indefinitely retry a failing log-splitting task is not inside SplitLogManager. SplitLogManager will retry a task finite number of times. If it fails then it is the outer Master layers that indefinitely retry. the reason for this behavior is to build tools around distributed log splitting. If distributed log splitting were being used by a tool then you wouldn&apos;t want it to indefinitely retry.&lt;/p&gt;

&lt;p&gt;So the behavior outlined in this bug report is correct. But this behavior shouldn&apos;t lead to any bug.&lt;/p&gt;

&lt;p&gt;(There are only a few places in SplitLogManager where it resubmits the task forcefully, disregarding the retry limit. I think the only two cases are when a region server (splitlogworker) dies and when a splitlogworker &quot;resigns&quot; from the task (i.e. gives up the task even though there were no failures))&lt;/p&gt;</comment>
                            <comment id="13467980" author="nkeywal" created="Tue, 2 Oct 2012 19:09:36 +0000"  >&lt;p&gt;Thanks a lot Prakash. I understand I could change the CHECK to FORCE, but it won&apos;t actually change much in real cases. So let&apos;s mark this to wont fix &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                                                <inwardlinks description="is required by">
                                        <issuelink>
            <issuekey id="12551766">HBASE-5843</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 27 Sep 2012 05:51:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>242538</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 11 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02vjb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14710</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>