<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:19:38 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-4518/HBASE-4518.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-4518] TestServerCustomProtocol is flaky</title>
                <link>https://issues.apache.org/jira/browse/HBASE-4518</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;TestServerCustomProtocol has been showing some intermittent failures in Jenkins due to what looks like region transitions.&lt;/p&gt;

&lt;p&gt;Here is the most recent failure:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Results :

Failed tests:   testRowRange(org.apache.hadoop.hbase.regionserver.TestServerCustomProtocol): Results should contain region test,bbb,1317332645939.aea9154349b9e0dc207e2e9476702763. for row &apos;bbb&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12525254">HBASE-4518</key>
            <summary>TestServerCustomProtocol is flaky</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ghelmling">Gary Helmling</assignee>
                                    <reporter username="ghelmling">Gary Helmling</reporter>
                        <labels>
                    </labels>
                <created>Thu, 29 Sep 2011 23:07:52 +0000</created>
                <updated>Fri, 20 Nov 2015 11:55:14 +0000</updated>
                            <resolved>Thu, 3 Nov 2011 05:59:51 +0000</resolved>
                                    <version>0.92.0</version>
                                    <fixVersion>0.92.0</fixVersion>
                                    <component>Coprocessors</component>
                    <component>test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13141481" author="stack" created="Tue, 1 Nov 2011 19:26:10 +0000"  >&lt;p&gt;This has not failed in ages.  Can we close Gary?&lt;/p&gt;</comment>
                            <comment id="13141837" author="yuzhihong@gmail.com" created="Wed, 2 Nov 2011 01:40:22 +0000"  >&lt;p&gt;I got the following when running test suite for latest TRUNK:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
testRowRange(org.apache.hadoop.hbase.regionserver.TestServerCustomProtocol)  Time elapsed: 0.057 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
java.lang.AssertionError: Results should contain region test,ccc,1320196026392.a22c262d449fa04ca4beeeb78afaf650. &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; row &apos;ccc&apos;
  at org.junit.Assert.fail(Assert.java:91)
  at org.junit.Assert.assertTrue(Assert.java:43)
  at org.apache.hadoop.hbase.regionserver.TestServerCustomProtocol.verifyRegionResults(TestServerCustomProtocol.java:328)
  at org.apache.hadoop.hbase.regionserver.TestServerCustomProtocol.verifyRegionResults(TestServerCustomProtocol.java:320)
  at org.apache.hadoop.hbase.regionserver.TestServerCustomProtocol.testRowRange(TestServerCustomProtocol.java:220)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13141849" author="ghelmling" created="Wed, 2 Nov 2011 02:23:19 +0000"  >&lt;p&gt;I just tried and am still able to trigger failures locally as well:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Running org.apache.hadoop.hbase.regionserver.TestServerCustomProtocol
Tests run: 6, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 25.045 sec &amp;lt;&amp;lt;&amp;lt; FAILURE!

Results :

Failed tests:   testRowRange(org.apache.hadoop.hbase.regionserver.TestServerCustomProtocol): Results should contain region test,bbb,1320200292803.20c8a68e32824178b128060aff59386d. for row &apos;bbb&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;ll dig into it tonight.&lt;/p&gt;</comment>
                            <comment id="13142244" author="stack" created="Wed, 2 Nov 2011 16:10:03 +0000"  >&lt;p&gt;I shouldn&apos;t have said anything.  My mention of this issue caused the test to start failing up on jenkins again.&lt;/p&gt;</comment>
                            <comment id="13142290" author="ghelmling" created="Wed, 2 Nov 2011 16:50:58 +0000"  >&lt;p&gt;This patch cleans up the config of the PingHandler endpoint and changes the mini cluster to use a single region server to avoid region transition issues.  With this patch I was able to run TestServerCustomProtocol in a batch of 50 runs with no failures.&lt;/p&gt;</comment>
                            <comment id="13142294" author="stack" created="Wed, 2 Nov 2011 16:56:39 +0000"  >&lt;p&gt;This line:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    util.getConfiguration().set(CoprocessorHost.REGION_COPROCESSOR_CONF_KEY,
+        PingHandler.class.getName()); 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;does what&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-    &lt;span class=&quot;code-comment&quot;&gt;// TODO: use a test coprocessor &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; registration (once merged with CP code)
&lt;/span&gt;-    &lt;span class=&quot;code-comment&quot;&gt;// sleep here is an ugly hack to allow region transitions to finish
&lt;/span&gt;-    &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(5000);
-    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (JVMClusterUtil.RegionServerThread t :
-      cluster.getRegionServerThreads()) {
-      &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (HRegionInfo r : t.getRegionServer().getOnlineRegions()) {
-        t.getRegionServer().getOnlineRegion(r.getRegionName())
-            .registerProtocol(PingProtocol.class, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PingHandler());
-      }
-    }  
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;... used to do?&lt;/p&gt;


&lt;p&gt;If so, +1 on commit if patch-build gives back reasonable results.&lt;/p&gt;</comment>
                            <comment id="13142307" author="ghelmling" created="Wed, 2 Nov 2011 17:05:25 +0000"  >&lt;p&gt;@Stack,&lt;/p&gt;

&lt;p&gt;Yes, for some reason in the original code I was being a bit too &quot;clever&quot; and registering the protocol handler directly.  Maybe it was before all the connecting bits had been filled in yet...  In any case, the manual registration in the original code would mean that the PingHandler would not get re-registered if a region closed on one RS and was reopened on another.  So that is a flaw.  And the test code should really be doing what we tell people to do with endpoints, which is to configure them as coprocessors.&lt;/p&gt;</comment>
                            <comment id="13142400" author="hadoopqa" created="Wed, 2 Nov 2011 18:38:37 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12501985/HBASE-4518.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12501985/HBASE-4518.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -165 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 42 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.master.TestDistributedLogSplitting&lt;br/&gt;
                  org.apache.hadoop.hbase.TestGlobalMemStoreSize&lt;br/&gt;
                  org.apache.hadoop.hbase.master.TestMasterFailover&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/141//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/141//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/141//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/141//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/141//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/141//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13142860" author="ghelmling" created="Thu, 3 Nov 2011 05:59:51 +0000"  >&lt;p&gt;Hadoop QA test failures were unrelated, so patch committed to 0.92 branch and trunk.&lt;/p&gt;</comment>
                            <comment id="13143028" author="hudson" created="Thu, 3 Nov 2011 10:13:36 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2406 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2406/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2406/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4518&quot; title=&quot;TestServerCustomProtocol is flaky&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4518&quot;&gt;&lt;del&gt;HBASE-4518&lt;/del&gt;&lt;/a&gt;  TestServerCustomProtocol fails intermittently&lt;/p&gt;

&lt;p&gt;garyh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/regionserver/TestServerCustomProtocol.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13143054" author="hudson" created="Thu, 3 Nov 2011 11:53:56 +0000"  >&lt;p&gt;Integrated in HBase-0.92 #104 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92/104/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92/104/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4518&quot; title=&quot;TestServerCustomProtocol is flaky&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4518&quot;&gt;&lt;del&gt;HBASE-4518&lt;/del&gt;&lt;/a&gt;  TestServerCustomProtocol fails intermittently&lt;/p&gt;

&lt;p&gt;garyh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/regionserver/TestServerCustomProtocol.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15016434" author="lars_francke" created="Fri, 20 Nov 2015 11:55:14 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12501985" name="HBASE-4518.patch" size="3469" author="ghelmling" created="Wed, 2 Nov 2011 16:50:58 +0000"/>
                            <attachment id="12501892" name="org.apache.hadoop.hbase.regionserver.TestServerCustomProtocol-output.txt" size="207280" author="yuzhihong@gmail.com" created="Wed, 2 Nov 2011 01:52:18 +0000"/>
                            <attachment id="12501891" name="org.apache.hadoop.hbase.regionserver.TestServerCustomProtocol.txt" size="3497" author="yuzhihong@gmail.com" created="Wed, 2 Nov 2011 01:51:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 1 Nov 2011 19:26:10 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40610</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hr7b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>101669</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>