<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:30:08 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-12144/HBASE-12144.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-12144] Backport HBASE-10141 &apos;instead of putting expired store files thru compaction, just archive them&apos; to 0.98</title>
                <link>https://issues.apache.org/jira/browse/HBASE-12144</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;This improvement makes compaction more efficient.&lt;/p&gt;

&lt;p&gt;Backport to 0.98&lt;/p&gt;</description>
                <environment></environment>
        <key id="12745336">HBASE-12144</key>
            <summary>Backport HBASE-10141 &apos;instead of putting expired store files thru compaction, just archive them&apos; to 0.98</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yuzhihong@gmail.com">Ted Yu</assignee>
                                    <reporter username="yuzhihong@gmail.com">Ted Yu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 1 Oct 2014 19:42:16 +0000</created>
                <updated>Fri, 20 Nov 2015 11:53:32 +0000</updated>
                            <resolved>Fri, 14 Nov 2014 22:59:26 +0000</resolved>
                                                    <fixVersion>0.98.7</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="14155392" author="yuzhihong@gmail.com" created="Wed, 1 Oct 2014 20:03:05 +0000"  >&lt;p&gt;Patch for 0.98&lt;/p&gt;

&lt;p&gt;TestStore passes&lt;br/&gt;
Running test suite now.&lt;/p&gt;</comment>
                            <comment id="14155531" author="yuzhihong@gmail.com" created="Wed, 1 Oct 2014 21:08:55 +0000"  >&lt;p&gt;Test suite run completed showing no regression.&lt;/p&gt;

&lt;p&gt;Do you have any comment(s), &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt; ?&lt;/p&gt;</comment>
                            <comment id="14155536" author="apurtell" created="Wed, 1 Oct 2014 21:11:32 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14155545" author="yuzhihong@gmail.com" created="Wed, 1 Oct 2014 21:14:11 +0000"  >&lt;p&gt;Integrated to 0.98&lt;/p&gt;

&lt;p&gt;Thanks Andrew&lt;/p&gt;</comment>
                            <comment id="14155853" author="hudson" created="Thu, 2 Oct 2014 00:17:55 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98-on-Hadoop-1.1 #529 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/529/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/529/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12144&quot; title=&quot;Backport HBASE-10141 &amp;#39;instead of putting expired store files thru compaction, just archive them&amp;#39; to 0.98&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12144&quot;&gt;&lt;del&gt;HBASE-12144&lt;/del&gt;&lt;/a&gt; Backport &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10141&quot; title=&quot;instead of putting expired store files thru compaction, just archive them&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10141&quot;&gt;&lt;del&gt;HBASE-10141&lt;/del&gt;&lt;/a&gt; &apos;instead of putting expired store files thru compaction, just archive them&apos; to 0.98 (tedyu: rev c88bec7cd37cbbb202d9683e5ef70ace903b6f89)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StripeStoreFileManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/DefaultStoreFileManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/compactions/CompactionConfiguration.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreFileManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/compactions/RatioBasedCompactionPolicy.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestStore.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14155870" author="hudson" created="Thu, 2 Oct 2014 00:26:15 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98 #557 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/557/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/557/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12144&quot; title=&quot;Backport HBASE-10141 &amp;#39;instead of putting expired store files thru compaction, just archive them&amp;#39; to 0.98&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12144&quot;&gt;&lt;del&gt;HBASE-12144&lt;/del&gt;&lt;/a&gt; Backport &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10141&quot; title=&quot;instead of putting expired store files thru compaction, just archive them&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10141&quot;&gt;&lt;del&gt;HBASE-10141&lt;/del&gt;&lt;/a&gt; &apos;instead of putting expired store files thru compaction, just archive them&apos; to 0.98 (tedyu: rev c88bec7cd37cbbb202d9683e5ef70ace903b6f89)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HStore.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StripeStoreFileManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestStore.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/compactions/RatioBasedCompactionPolicy.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/DefaultStoreFileManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/compactions/CompactionConfiguration.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreFileManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14212889" author="apurtell" created="Fri, 14 Nov 2014 21:49:23 +0000"  >&lt;p&gt;Reopening due to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12478&quot; title=&quot;HBASE-10141 and MIN_VERSIONS are not compatible&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12478&quot;&gt;&lt;del&gt;HBASE-12478&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14212892" author="apurtell" created="Fri, 14 Nov 2014 21:50:11 +0000"  >&lt;p&gt;Thinking of reverting this change from 0.98.8 and cutting a new RC. Thoughts? &lt;/p&gt;</comment>
                            <comment id="14212896" author="apurtell" created="Fri, 14 Nov 2014 21:52:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14212900" author="enis" created="Fri, 14 Nov 2014 21:52:56 +0000"  >&lt;p&gt;The fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12478&quot; title=&quot;HBASE-10141 and MIN_VERSIONS are not compatible&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12478&quot;&gt;&lt;del&gt;HBASE-12478&lt;/del&gt;&lt;/a&gt; should be easy enough I think, but I do not have a patch yet. The unfortunate thing is there is no conf control for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10141&quot; title=&quot;instead of putting expired store files thru compaction, just archive them&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10141&quot;&gt;&lt;del&gt;HBASE-10141&lt;/del&gt;&lt;/a&gt;. Reverting might be the easiest solution for the RC. &lt;/p&gt;</comment>
                            <comment id="14212906" author="apurtell" created="Fri, 14 Nov 2014 21:55:43 +0000"  >&lt;p&gt;Ok, I&apos;m going to revert and add a fix version on this issue for .9 if &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu&quot; class=&quot;user-hover&quot; rel=&quot;tedyu&quot;&gt;Ted Yu&lt;/a&gt; wants to attempt another backport including the &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12478&quot; title=&quot;HBASE-10141 and MIN_VERSIONS are not compatible&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12478&quot;&gt;&lt;del&gt;HBASE-12478&lt;/del&gt;&lt;/a&gt; fix later.&lt;/p&gt;</comment>
                            <comment id="14212923" author="apurtell" created="Fri, 14 Nov 2014 22:02:40 +0000"  >&lt;p&gt;I&apos;ve reverted this change locally but want to run the unit test suite before pushing. &lt;/p&gt;</comment>
                            <comment id="14212925" author="yuzhihong@gmail.com" created="Fri, 14 Nov 2014 22:03:59 +0000"  >&lt;p&gt;Andrew:&lt;br/&gt;
I have attached patch to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12478&quot; title=&quot;HBASE-10141 and MIN_VERSIONS are not compatible&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12478&quot;&gt;&lt;del&gt;HBASE-12478&lt;/del&gt;&lt;/a&gt;. Please take a look.&lt;/p&gt;

&lt;p&gt;In my opinion, that fix should be included in 0.98.8&lt;/p&gt;</comment>
                            <comment id="14212929" author="apurtell" created="Fri, 14 Nov 2014 22:07:36 +0000"  >&lt;p&gt;Thanks Ted. Let&apos;s revert this for .8, and put it back in .9&lt;/p&gt;</comment>
                            <comment id="14213000" author="yuzhihong@gmail.com" created="Fri, 14 Nov 2014 22:47:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;:&lt;br/&gt;
I have attached full patch to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12478&quot; title=&quot;HBASE-10141 and MIN_VERSIONS are not compatible&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12478&quot;&gt;&lt;del&gt;HBASE-12478&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
It wouldn&apos;t take long for Hadoop QA to validate the patch.&lt;/p&gt;

&lt;p&gt;I still think the fix should be put into 0.98.8&lt;/p&gt;</comment>
                            <comment id="14213018" author="apurtell" created="Fri, 14 Nov 2014 22:59:26 +0000"  >&lt;p&gt;Re resolving. The patch on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12478&quot; title=&quot;HBASE-10141 and MIN_VERSIONS are not compatible&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12478&quot;&gt;&lt;del&gt;HBASE-12478&lt;/del&gt;&lt;/a&gt; has a couple votes already, I&apos;ll take that in 0.98&lt;/p&gt;</comment>
                            <comment id="15016008" author="lars_francke" created="Fri, 20 Nov 2015 11:53:32 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12684309">HBASE-10141</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12755490">HBASE-12478</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12672390" name="12144.txt" size="17531" author="yuzhihong@gmail.com" created="Wed, 1 Oct 2014 20:03:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 1 Oct 2014 21:11:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i20p6v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>