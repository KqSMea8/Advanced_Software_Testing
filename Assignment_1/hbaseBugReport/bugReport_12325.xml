<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:31:55 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-12325/HBASE-12325.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-12325] Add Utility to remove snapshot from a directory</title>
                <link>https://issues.apache.org/jira/browse/HBASE-12325</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;If there are several snapshots exported to a single directory, it&apos;s nice to be able to remove the oldest one. Since snapshots in the same directory can share files it&apos;s not as simple as just removing all files in a snapshot.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12749931">HBASE-12325</key>
            <summary>Add Utility to remove snapshot from a directory</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="eclark">Elliott Clark</assignee>
                                    <reporter username="eclark">Elliott Clark</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Oct 2014 00:04:48 +0000</created>
                <updated>Tue, 11 Aug 2015 14:52:09 +0000</updated>
                            <resolved>Tue, 11 Aug 2015 14:52:08 +0000</resolved>
                                    <version>2.0.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14181088" author="mbertozzi" created="Thu, 23 Oct 2014 07:21:47 +0000"  >&lt;p&gt;I had a tool that I wrote long time ago, I haven&apos;t checked if it work now but it should.&lt;/p&gt;

&lt;p&gt;anyway, you are using export in a wrong way &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
The initial design was exporting from one hbase cluster to another, not from hbase to a backup disk. mainly because you need someone that takes care of cleaning unused file.&lt;/p&gt;

&lt;p&gt;so in case you want to export to disk you can:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Create one folder per snapshot, which allows you to use rm -rf to drop the snapshot, but you don&apos;t get delta updates.&lt;/li&gt;
	&lt;li&gt;Create a &quot;month-x&quot; folder and drop all the snapshot of month x, which allows you to get the delta updates, and allows you drop all the snapshot of month-x with a simple rm -rf&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;...or, you can use the tool. but the tool requires coordination.&lt;br/&gt;
You can not run both the tools and export snapshot together, otherwise the tool may remove the files in progress.&lt;br/&gt;
so, in my opinion this tool doesn&apos;t belong to hbase-core, because once your stuff are not under the hbase control it is your responsibility do the coordination (so, don&apos;t try to propose a zk-lock taken by both the tool and export or similar).&lt;/p&gt;</comment>
                            <comment id="14181489" author="eclark" created="Thu, 23 Oct 2014 15:52:39 +0000"  >&lt;blockquote&gt;&lt;p&gt;The initial design was exporting from one hbase cluster to another,&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Export to HDFS has been there for a long time now. What the initial design was doesn&apos;t matter much. It&apos;s all about what&apos;s useful now.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;anyway, you are using export in a wrong way &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Disagree.  This is an easy way to get differential backups that are easily importable and clean up is pretty easy. If HDFS ever gets hard links then this can go away. But that doesn&apos;t look like it will ever happen.&lt;/p&gt;

&lt;p&gt;So users can get differential backups right now. By&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Export all of your snapshots into the same directory on a remote HDFS.&lt;/li&gt;
	&lt;li&gt;Keep N snapshots removing the oldest after each export.&lt;/li&gt;
	&lt;li&gt;That&apos;s it. There are no other steps required.&lt;/li&gt;
&lt;/ol&gt;


&lt;blockquote&gt;&lt;p&gt;...or, you can use the tool. but the tool requires coordination.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m working on a tool that doesn&apos;t require any coordination. It just removes the files from the oldest snapshot that are not referenced any more. So as long as the oldest snapshot is not still in transition (pretty easy if you&apos;re keeping more than 2 snapshots). Then you can run clean up and snapshot in parallel.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;in my opinion this tool doesn&apos;t belong to hbase-core&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Users of HBase can benefit from a way of doing differential backups. Right now this is the best way to do that.&lt;/p&gt;</comment>
                            <comment id="14181504" author="mbertozzi" created="Thu, 23 Oct 2014 16:01:18 +0000"  >&lt;blockquote&gt;
&lt;p&gt;I&apos;m working on a tool that doesn&apos;t require any coordination. It just removes the files from the oldest snapshot that are not referenced any more. So as long as the oldest snapshot is not still in transition (pretty easy if you&apos;re keeping more than 2 snapshots). Then you can run clean up and snapshot in parallel.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;on the last sentence you are implying coordination (export and clean, not snapshot... snapshot are hbase local and don&apos;t impact what you do on the remote copy)&lt;br/&gt;
if you look at what I have attached it is basically what you are describing.&lt;/p&gt;</comment>
                            <comment id="14181515" author="eclark" created="Thu, 23 Oct 2014 16:12:22 +0000"  >&lt;blockquote&gt;&lt;p&gt;on the last sentence you are implying coordination (export and clean, not snapshot... snapshot are hbase local and don&apos;t impact what you do on the remote copy)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Export, snapshot, and clean up can all run in parallel as long as you are keeping more than one snapshot.&lt;/p&gt;</comment>
                            <comment id="14681902" author="eclark" created="Tue, 11 Aug 2015 14:52:08 +0000"  >&lt;p&gt;The backup tool that&apos;s being created is a better way to do this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12676539" name="DeleteRemoteSnapshotTool.java" size="11933" author="mbertozzi" created="Thu, 23 Oct 2014 07:21:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 23 Oct 2014 07:21:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 18 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i21h4f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>