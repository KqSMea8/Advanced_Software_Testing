<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:52:54 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-14423/HBASE-14423.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-14423] TestStochasticBalancerJmxMetrics.testJmxMetrics_PerTableMode:183 NullPointer</title>
                <link>https://issues.apache.org/jira/browse/HBASE-14423</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Two of my test runs failed with this.&lt;/p&gt;

&lt;p&gt;The mbean is not available.&lt;/p&gt;

&lt;p&gt;Let me add dumping of what mbeans are available and then adding in a retry ... guessing they are slow getting published.  Extra printout will give more clues.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12863694">HBASE-14423</key>
            <summary>TestStochasticBalancerJmxMetrics.testJmxMetrics_PerTableMode:183 NullPointer</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12863637">HBASE-14420</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stack">stack</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Sun, 13 Sep 2015 14:18:50 +0000</created>
                <updated>Mon, 14 Sep 2015 22:54:25 +0000</updated>
                            <resolved>Sun, 13 Sep 2015 14:39:35 +0000</resolved>
                                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                                    <component>test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14742500" author="stack" created="Sun, 13 Sep 2015 14:39:35 +0000"  >&lt;p&gt;Pushed small test only change (adding logging and a retry) to master and branch-1. The test is not in earlier versions... 1.2 etc.&lt;/p&gt;</comment>
                            <comment id="14742555" author="hudson" created="Sun, 13 Sep 2015 17:14:17 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.3-IT #150 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3-IT/150/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3-IT/150/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14423&quot; title=&quot;TestStochasticBalancerJmxMetrics.testJmxMetrics_PerTableMode:183 NullPointer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14423&quot;&gt;&lt;del&gt;HBASE-14423&lt;/del&gt;&lt;/a&gt; TestStochasticBalancerJmxMetrics.testJmxMetrics_PerTableMode:183 NullPointer (stack: rev 75d3d7d1060c6191bc3917add98c3c6e3945185f)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/TestStochasticBalancerJmxMetrics.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14742562" author="hudson" created="Sun, 13 Sep 2015 17:25:08 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #6802 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/6802/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/6802/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14423&quot; title=&quot;TestStochasticBalancerJmxMetrics.testJmxMetrics_PerTableMode:183 NullPointer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14423&quot;&gt;&lt;del&gt;HBASE-14423&lt;/del&gt;&lt;/a&gt; TestStochasticBalancerJmxMetrics.testJmxMetrics_PerTableMode:183 NullPointer (stack: rev 439ca071ecbbf09d80eca840d8a7279c9dde33de)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/TestStochasticBalancerJmxMetrics.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14742577" author="hudson" created="Sun, 13 Sep 2015 17:47:37 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.3 #168 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3/168/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3/168/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14423&quot; title=&quot;TestStochasticBalancerJmxMetrics.testJmxMetrics_PerTableMode:183 NullPointer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14423&quot;&gt;&lt;del&gt;HBASE-14423&lt;/del&gt;&lt;/a&gt; TestStochasticBalancerJmxMetrics.testJmxMetrics_PerTableMode:183 NullPointer (stack: rev 75d3d7d1060c6191bc3917add98c3c6e3945185f)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/TestStochasticBalancerJmxMetrics.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14744434" author="stack" created="Mon, 14 Sep 2015 22:54:25 +0000"  >&lt;p&gt;So, even with retries I can get an odd failure of this test. Interesting is that with the extra info dumped by this patch, I see we are adding our bean in the correct place. We fail with:&lt;/p&gt;

&lt;p&gt;2015-09-14 12:53:25,174 WARN  &lt;span class=&quot;error&quot;&gt;&amp;#91;Time-limited test&amp;#93;&lt;/span&gt; hbase.TestStochasticBalancerJmxMetrics(229): Failed to get bean!!! Hadoop:service=HBase,name=Master,sub=Balancer&lt;br/&gt;
javax.management.InstanceNotFoundException: Hadoop:service=HBase,name=Master,sub=Balancer&lt;/p&gt;

&lt;p&gt;... but then after a bit of cycling I see this show up:&lt;/p&gt;

&lt;p&gt;Class Name: Master,sub=Balancer&lt;br/&gt;
Object Name: Hadoop:service=DataNode,name=Master,sub=Balancer&lt;/p&gt;

&lt;p&gt;...&lt;/p&gt;

&lt;p&gt;Other interesting looking beans are:&lt;/p&gt;

&lt;p&gt;Class Name: Master,sub=AssignmentManger&lt;br/&gt;
Object Name: Hadoop:service=DataNode,name=Master,sub=AssignmentManger&lt;/p&gt;

&lt;p&gt;...&lt;/p&gt;


&lt;p&gt;and&lt;/p&gt;

&lt;p&gt;Object Name: Hadoop:service=DataNode,name=RegionServer,sub=Server&lt;br/&gt;
Class Name: sun.management.GarbageCollectorImpl&lt;/p&gt;

&lt;p&gt;The code emitting this stuff seems right using the raw Iterator returned by the bean query. Let me see about how registration is done.&lt;/p&gt;


</comment>
                    </comments>
                    <attachments>
                            <attachment id="12755602" name="14423.patch" size="5363" author="stack" created="Sun, 13 Sep 2015 14:19:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 13 Sep 2015 17:14:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 13 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2k3rj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>