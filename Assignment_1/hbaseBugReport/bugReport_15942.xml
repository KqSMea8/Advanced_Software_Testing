<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 21:08:46 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-15942/HBASE-15942.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-15942] User with &apos;RWX&apos; permission of the table should be able to describe the table</title>
                <link>https://issues.apache.org/jira/browse/HBASE-15942</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Currently only the user who has &apos;ADMIN&apos; or &apos;CREATE&apos; permission could describe the table (via shell), it brings some inconvenience and confusion to those uses who have RWX permission since they couldn&apos;t describe the table to get the schema.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12975032">HBASE-15942</key>
            <summary>User with &apos;RWX&apos; permission of the table should be able to describe the table</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="yguang11">Guang Yang</reporter>
                        <labels>
                    </labels>
                <created>Thu, 2 Jun 2016 03:48:27 +0000</created>
                <updated>Fri, 3 Jun 2016 00:38:52 +0000</updated>
                                                                            <component>Admin</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="15311693" author="yguang11" created="Thu, 2 Jun 2016 03:56:22 +0000"  >&lt;p&gt;The patch also contains a minor refactoring for AccessController#requirePermission, which might unnecessarily create some AuthResult instances. &lt;/p&gt;</comment>
                            <comment id="15311846" author="dimaspivak" created="Thu, 2 Jun 2016 07:03:34 +0000"  >&lt;p&gt;Hm, I&apos;m not sure I&apos;d call this a bug as it&apos;s specifically referenced as the correct behavior in our ref guide. Changing this now might cause more confusion than it would fix... :-/&lt;/p&gt;</comment>
                            <comment id="15312654" author="yguang11" created="Thu, 2 Jun 2016 16:54:26 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dimaspivak&quot; class=&quot;user-hover&quot; rel=&quot;dimaspivak&quot;&gt;Dima Spivak&lt;/a&gt; for the quick reply.&lt;/p&gt;

&lt;p&gt;In practice, we may grant access of the table to multiple users (e.g. the engineering team, headless account), they are able to RW the table but not describe to check the schema... which is kind of weird. Is there a security risk that that you are concern of?&lt;/p&gt;</comment>
                            <comment id="15312728" author="dimaspivak" created="Thu, 2 Jun 2016 17:33:11 +0000"  >&lt;p&gt;Yeah, I think it&apos;s what you say. An administrator may not want a user who can read data in a table to have information about the TTL or details about whether replication is enabled, for example. My bigger concern though is the fact that changing it now would be tantamount to a privilege escalation, which could be a very unwelcome break for people used to doing this as they are currently documented. Anyone else have thoughts?&lt;/p&gt;</comment>
                            <comment id="15312733" author="mbertozzi" created="Thu, 2 Jun 2016 17:36:10 +0000"  >&lt;p&gt;I haven&apos;t checked the patch yet (I&apos;ll promise I&apos;ll do that later). &lt;br/&gt;
the only reason we have only ADMIN/CREATE able to describe the table is because we don&apos;t want to leak the descriptor to people that has only permission to read/write a single qualifier. &lt;br/&gt;
there may also be a reason that we don&apos;t want to expose some &quot;config&quot; passed to the table descriptors to the user.&lt;br/&gt;
for the second we may need to add filtering to the various getters we have in HTD/HCD. and maybe not worth at this point?&lt;br/&gt;
for the first one in theory is possible to have users that have access to every cfs see the descriptor (which I guess is what your patch does, again I&apos;ll give it a look at it later). &lt;/p&gt;</comment>
                            <comment id="15312819" author="yguang11" created="Thu, 2 Jun 2016 18:19:04 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbertozzi&quot; class=&quot;user-hover&quot; rel=&quot;mbertozzi&quot;&gt;Matteo Bertozzi&lt;/a&gt;, yeah that is what the patch does (I guess there are two ways to represent the permission to access all CFs: a. the CF field is empty, b. a full lis to CFs, this patch only takes care of the former one). Thanks for help to look at the patch.&lt;/p&gt;</comment>
                            <comment id="15312820" author="enis" created="Thu, 2 Jun 2016 18:19:49 +0000"  >&lt;blockquote&gt;&lt;p&gt;there may also be a reason that we don&apos;t want to expose some &quot;config&quot; passed to the table descriptors to the user.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I believe we store encryption keys in HTD / HCD which is considered sensitive data. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt; may have some more insights. &lt;/p&gt;</comment>
                            <comment id="15312828" author="apurtell" created="Thu, 2 Jun 2016 18:24:44 +0000"  >&lt;blockquote&gt;&lt;p&gt;I believe we store encryption keys in HTD / HCD which is considered sensitive data. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Correct. However furthermore a user can put any metadata they want into HTD or HCD and so both structures must be considered potentially sensitive on that score as well. &lt;/p&gt;</comment>
                            <comment id="15313005" author="mbertozzi" created="Thu, 2 Jun 2016 20:34:16 +0000"  >&lt;p&gt;I guess in this case we want to describe the table to list the column families. so we can provide a smaller version of the descriptor with the families if the user requesting has not CREATE/ADMIN but has read/write on them. but at that point the descriptor will be &quot;wrong&quot; because the defaults returned by the getter will not represent the real value. adding another mapping to know permission of each conf seems too much. do you guys have other suggestion? introducing a String[] listFamilies(table) which is more or less the same as listTableNames() seems just an hack but if that is the only case it simplifies things a lot.&lt;/p&gt;</comment>
                            <comment id="15313403" author="yguang11" created="Fri, 3 Jun 2016 00:38:52 +0000"  >&lt;p&gt;Thanks all for the comments.&lt;/p&gt;

&lt;p&gt;I might be wrong, but at least for now, only the table schema would be exposed to caller once the validation passed (HMaster#getTableDescriptors), the details of HCD (including the encryption keys, etc) would not.&lt;/p&gt;

&lt;p&gt;As &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andrew.purtell%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;andrew.purtell@gmail.com&quot;&gt;Andrew Purtell&lt;/a&gt; pointed out, more information might get added to HTD and HCD, but if the contract that we only expose schema for the getTableDescriptors holds, I guess we are safe in that regard?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12807610" name="HBASE-15942.v0.patch" size="7122" author="yguang11" created="Thu, 2 Jun 2016 03:52:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 2 Jun 2016 07:03:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            28 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2yv8f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>