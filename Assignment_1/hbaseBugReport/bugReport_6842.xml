<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:40:20 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6842/HBASE-6842.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6842] the jar used in  coprocessor is not deleted in local which will exhaust  the space of /tmp </title>
                <link>https://issues.apache.org/jira/browse/HBASE-6842</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;FileSystem fs = path.getFileSystem(HBaseConfiguration.create());&lt;br/&gt;
      Path dst = new Path(System.getProperty(&quot;java.io.tmpdir&quot;) +&lt;br/&gt;
          java.io.File.separator +&quot;.&quot; + pathPrefix +&lt;br/&gt;
          &quot;.&quot; + className + &quot;.&quot; + System.currentTimeMillis() + &quot;.jar&quot;);&lt;br/&gt;
fs.copyToLocalFile(path, dst);&lt;br/&gt;
fs.deleteOnExit(dst);&lt;/p&gt;


&lt;p&gt;change to &lt;/p&gt;

&lt;p&gt;File tmpLocal = new File(dst.toString());&lt;br/&gt;
tmpLocal.deleteOnExit();&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12608378">HBASE-6842</key>
            <summary>the jar used in  coprocessor is not deleted in local which will exhaust  the space of /tmp </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zhou wen jian">Zhou wenjian</assignee>
                                    <reporter username="zhou wen jian">Zhou wenjian</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 Sep 2012 04:01:44 +0000</created>
                <updated>Sun, 7 Apr 2013 05:01:24 +0000</updated>
                            <resolved>Thu, 20 Sep 2012 05:42:09 +0000</resolved>
                                    <version>0.94.1</version>
                                    <fixVersion>0.94.2</fixVersion>
                                    <component>Coprocessors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13459312" author="apurtell" created="Thu, 20 Sep 2012 04:07:30 +0000"  >&lt;p&gt;Might want to make the directory for local jar temp storage Separately configurable to java.io.tmpdir (but defaulting to its value).&lt;/p&gt;</comment>
                            <comment id="13459334" author="stack" created="Thu, 20 Sep 2012 04:45:54 +0000"  >&lt;p&gt;Does it work Zhou?  How is fs.deleteOnExit different from your use of File and then on it doing deleteOnExit.  Thanks.&lt;/p&gt;</comment>
                            <comment id="13459338" author="zhou wen jian" created="Thu, 20 Sep 2012 04:51:12 +0000"  >&lt;p&gt;@stack&lt;br/&gt;
in our cluster,it does work. the jar in /tmp will be deleted when the jvm exits.&lt;br/&gt;
IMO, fs.deleteOnExit means to delete the file in hdfs rather than delete it in local fs.&lt;/p&gt;</comment>
                            <comment id="13459359" author="stack" created="Thu, 20 Sep 2012 05:42:09 +0000"  >&lt;p&gt;Applied to trunk and to 0.94 branch (using -p1).  Thanks for the patch Zhou.&lt;/p&gt;</comment>
                            <comment id="13459393" author="hudson" created="Thu, 20 Sep 2012 06:58:59 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3358 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3358/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3358/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6842&quot; title=&quot;the jar used in  coprocessor is not deleted in local which will exhaust  the space of /tmp &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6842&quot;&gt;&lt;del&gt;HBASE-6842&lt;/del&gt;&lt;/a&gt; the jar used in coprocessor is not deleted in local which will exhaust the space of /tmp (Revision 1387861)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/coprocessor/CoprocessorHost.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13459418" author="hudson" created="Thu, 20 Sep 2012 07:38:09 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #475 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/475/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/475/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6842&quot; title=&quot;the jar used in  coprocessor is not deleted in local which will exhaust  the space of /tmp &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6842&quot;&gt;&lt;del&gt;HBASE-6842&lt;/del&gt;&lt;/a&gt; the jar used in coprocessor is not deleted in local which will exhaust the space of /tmp (Revision 1387862)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/coprocessor/CoprocessorHost.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13459527" author="hudson" created="Thu, 20 Sep 2012 11:42:00 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #183 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/183/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/183/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6842&quot; title=&quot;the jar used in  coprocessor is not deleted in local which will exhaust  the space of /tmp &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6842&quot;&gt;&lt;del&gt;HBASE-6842&lt;/del&gt;&lt;/a&gt; the jar used in coprocessor is not deleted in local which will exhaust the space of /tmp (Revision 1387861)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/coprocessor/CoprocessorHost.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13460751" author="hudson" created="Fri, 21 Sep 2012 19:28:49 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #53 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/53/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/53/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6842&quot; title=&quot;the jar used in  coprocessor is not deleted in local which will exhaust  the space of /tmp &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6842&quot;&gt;&lt;del&gt;HBASE-6842&lt;/del&gt;&lt;/a&gt; the jar used in coprocessor is not deleted in local which will exhaust the space of /tmp (Revision 1387862)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/coprocessor/CoprocessorHost.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13469883" author="hudson" created="Fri, 5 Oct 2012 00:37:47 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security-on-Hadoop-23 #8 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/8/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/8/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6842&quot; title=&quot;the jar used in  coprocessor is not deleted in local which will exhaust  the space of /tmp &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6842&quot;&gt;&lt;del&gt;HBASE-6842&lt;/del&gt;&lt;/a&gt; the jar used in coprocessor is not deleted in local which will exhaust the space of /tmp (Revision 1387862)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/coprocessor/CoprocessorHost.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13624690" author="stack" created="Sun, 7 Apr 2013 05:01:24 +0000"  >&lt;p&gt;Fix up after bulk move overwrote some 0.94.2 fix versions w/ 0.95.0 (Noticed by Lars Hofhansl)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12608166">HBASE-6824</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12545844" name="HBASE-6842-trunk.patch" size="768" author="zhou wen jian" created="Thu, 20 Sep 2012 04:43:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 20 Sep 2012 04:07:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>241983</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 36 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02hnb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12460</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>