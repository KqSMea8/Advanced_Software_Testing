<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:14:25 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-10501/HBASE-10501.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-10501] Improve IncreasingToUpperBoundRegionSplitPolicy to avoid too many regions</title>
                <link>https://issues.apache.org/jira/browse/HBASE-10501</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;During some (admittedly artificial) load testing we found a large amount split activity, which we tracked down the IncreasingToUpperBoundRegionSplitPolicy.&lt;/p&gt;

&lt;p&gt;The current logic is this (from the comments):&lt;br/&gt;
&quot;regions that are on this server that all are of the same table, squared, times the region flush size OR the maximum region split size, whichever is smaller&quot;&lt;/p&gt;

&lt;p&gt;So with a flush size of 128mb and max file size of 20gb, we&apos;d need 13 region of the same table on an RS to reach the max size.&lt;br/&gt;
With 10gb file sized it is still 9 regions of the same table.&lt;br/&gt;
Considering that the number of regions that an RS can carry is limited and there might be multiple tables, this should be more configurable.&lt;/p&gt;

&lt;p&gt;I think the squaring is smart and we do not need to change it.&lt;/p&gt;

&lt;p&gt;We could&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Make the start size configurable and default it to the flush size&lt;/li&gt;
	&lt;li&gt;Add multiplier for the initial size, i.e. start with n * flushSize&lt;/li&gt;
	&lt;li&gt;Also change the default to start with 2*flush size&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Of course one can override the default split policy, but these seem like simple tweaks.&lt;/p&gt;

&lt;p&gt;Or we could instead set the goal of how many regions of the same table would need to be present in order to reach the max size. In that case we&apos;d start with maxSize/goal^2. So if max size is 20gb and the goal is three we&apos;d start with 20g/9 = 2.2g for the initial region size.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;, I&apos;m especially interested in your opinion.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12694545">HBASE-10501</key>
            <summary>Improve IncreasingToUpperBoundRegionSplitPolicy to avoid too many regions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lhofhansl">Lars Hofhansl</assignee>
                                    <reporter username="lhofhansl">Lars Hofhansl</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 Feb 2014 18:24:26 +0000</created>
                <updated>Wed, 26 Feb 2014 04:45:39 +0000</updated>
                            <resolved>Tue, 18 Feb 2014 19:44:06 +0000</resolved>
                                                    <fixVersion>0.96.2</fixVersion>
                    <fixVersion>0.98.1</fixVersion>
                    <fixVersion>0.99.0</fixVersion>
                    <fixVersion>0.94.17</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13898513" author="stack" created="Tue, 11 Feb 2014 23:47:51 +0000"  >&lt;p&gt;The original motivation was split quickly, initially, so regions got farmed out across the cluster sooner so full cluster got in on the action faster than if say, you had to wait till one region hit a max size.&lt;/p&gt;

&lt;p&gt;Was also hoping to keep the logic simple &amp;#8211; easy to understand &amp;#8211; and was trying to make it so you&apos;d not have to touch this splitter going forward.&lt;/p&gt;

&lt;p&gt;As you point out 13 splits to reach  max seems too many especially if many tables on the one server.  Suggestions for when to split the first time all seem fine &amp;#8211; just pick one I&apos;d say.&lt;/p&gt;

&lt;p&gt;What if we tripled rather than doubled?&lt;/p&gt;</comment>
                            <comment id="13898538" author="lhofhansl" created="Wed, 12 Feb 2014 00:15:48 +0000"  >&lt;p&gt;You mean do number of regions ^ 3? Or start with 3*flushsize?&lt;/p&gt;

&lt;p&gt;Flush size might just be too small as initial size, it is set due to memory considerations, whereas the max size is set due to disk IO considerations. Until we start to see multiple regions of a table on an RS we&apos;d split on each flush.&lt;/p&gt;

&lt;p&gt;So many options &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13898540" author="lhofhansl" created="Wed, 12 Feb 2014 00:17:56 +0000"  >&lt;p&gt;Starting with flush size means that every flush will cause a split until we see multiple regions of a table on an RS.&lt;br/&gt;
Maybe just starting with 2*flushsize would avert that.&lt;/p&gt;</comment>
                            <comment id="13898541" author="lhofhansl" created="Wed, 12 Feb 2014 00:18:49 +0000"  >&lt;p&gt;Here&apos;s a trivial patch allowing to set the initial size.&lt;/p&gt;

&lt;p&gt;Or is simpler to tweak default to 2*flushsize?&lt;/p&gt;</comment>
                            <comment id="13900003" author="lhofhansl" created="Thu, 13 Feb 2014 04:19:22 +0000"  >&lt;p&gt;Thinking about this a bit more. It is probably fairly unlikely that an RS will see 3 or 4 regions of the same table, unless that table is already spread over the cluster. So I think we should ensure we&apos;re pretty close to the max file when we see that many regions.&lt;br/&gt;
In most setups the ration of maxFileSize to flushSize is somewhere around 100:1. (10g regions and 128mb flushsize makes this 80).&lt;/p&gt;

&lt;p&gt;So if we start with 3*flushsize we get an initial 30:1 ratio and thus we&apos;d reach the max at about 5 (sqrt(30) = 5.4...)&lt;br/&gt;
That would also avoid the initial split storm after each flush.&lt;/p&gt;

&lt;p&gt;Should I change the initial size to 3 or 4 x the flush size, instead of making it configurable at all?&lt;/p&gt;</comment>
                            <comment id="13901105" author="lhofhansl" created="Fri, 14 Feb 2014 04:48:46 +0000"  >&lt;p&gt;OK, so here&apos;s my proposal:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;By default we set the initial size to 2*flushSize&lt;/li&gt;
	&lt;li&gt;Allow to configure the initial size&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Starting with flush size just makes for a bad experience when folks just play around with loading a bunch of data the first time. It leads to too aggressive splitting. Just adding the factor of two here means that not &lt;b&gt;every&lt;/b&gt; flush will result in a split until we see multiple regions per RS.&lt;/p&gt;</comment>
                            <comment id="13901113" author="stack" created="Fri, 14 Feb 2014 04:58:23 +0000"  >&lt;p&gt;lgtm.  When you do your little squaring math, its sqrt(50) which is 7?  Still too much?  cuberoot is between 3 and 4.  Would that be better? &lt;/p&gt;</comment>
                            <comment id="13901172" author="lhofhansl" created="Fri, 14 Feb 2014 07:11:00 +0000"  >&lt;p&gt;Cubing could be better indeed. Was thinking not to change too much. But maybe we should.&lt;/p&gt;

&lt;p&gt;So with initialSize = 2*flushSize and cubing we&apos;d get the following by default (128m memstores, 10g regions):&lt;br/&gt;
256m, 2048m, 6912m, 10g&lt;br/&gt;
With squaring we&apos;d get&lt;br/&gt;
256m, 1024m, 2304m, 4096m, 6400m, 9216m, 10g&lt;br/&gt;
With 4*flushsize and squaring it&apos;s:&lt;br/&gt;
512m, 2048m, 4608m, 8192m, 10g&lt;/p&gt;

&lt;p&gt;Note sure. Looks like 2*flushSize + cubing is best. When cluster is sparsely used we spread quickly, but also grow quickly once we start seeing multiple regions. Let&apos;s do that then?&lt;br/&gt;
As I said this is fuzzy and there is not right or wrong &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Do we have to worry about numerical overflow? We&apos;d blow past 2^63 after a few 1000 regions depending on flush size. Maybe clamp to max file size after 100 regions.&lt;/p&gt;

&lt;p&gt;One bit of information. In our test on a 9 RS/DN cluster we loaded 1bn rows/250gb and ended up with 171 regions. I.e. 1.4g on average and 19 per region server. Definitely not good - and we have 256mb flush size and 10g max file size. Now, 250gb is not exactly a lot of data, but it illustrates the point.&lt;br/&gt;
(It&apos;s much higher than our math here; presumably because some of the RS have fewer regions at times, so they split faster even)&lt;/p&gt;

&lt;p&gt;Maybe I can get our perf folks to do some testing.&lt;/p&gt;</comment>
                            <comment id="13901827" author="enis" created="Fri, 14 Feb 2014 19:29:09 +0000"  >&lt;p&gt;+1 for changing the default. 2*flushSize + cube looks good. &lt;br/&gt;
I think we should also go for more global split decisions, rather than local decisions. But this is for another issue.  &lt;/p&gt;</comment>
                            <comment id="13902153" author="lhofhansl" created="Fri, 14 Feb 2014 23:57:24 +0000"  >&lt;p&gt;Marking critical as the current default will lead to a bad experience for everyone using HBase the first time and loading a lot of data.&lt;/p&gt;</comment>
                            <comment id="13902773" author="lhofhansl" created="Sun, 16 Feb 2014 18:29:08 +0000"  >&lt;p&gt;v3&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;cubes the count&lt;/li&gt;
	&lt;li&gt;starts with 2 x flushSize&lt;/li&gt;
	&lt;li&gt;makes initial size configurable&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Please have a look. Now that the first 0.94.17 RC is sunk I&apos;d like pull this into 0.94.17.&lt;/p&gt;</comment>
                            <comment id="13902831" author="lhofhansl" created="Sun, 16 Feb 2014 20:48:40 +0000"  >&lt;p&gt;Fixed the Javadoc.&lt;br/&gt;
This is what I would like commit.&lt;/p&gt;</comment>
                            <comment id="13902906" author="lhofhansl" created="Mon, 17 Feb 2014 01:47:13 +0000"  >&lt;p&gt;Trunk patch with test fix.&lt;/p&gt;</comment>
                            <comment id="13902907" author="lhofhansl" created="Mon, 17 Feb 2014 01:47:25 +0000"  >&lt;p&gt;Let&apos;s get a test run in.&lt;/p&gt;</comment>
                            <comment id="13902929" author="hadoopqa" created="Mon, 17 Feb 2014 03:32:19 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12629296/10501-trunk.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12629296/10501-trunk.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12629296&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.1&lt;/font&gt;.  The patch compiles against the hadoop 1.1 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 1 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8723//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8723//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8723//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8723//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8723//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8723//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8723//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8723//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8723//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8723//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8723//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8723//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8723//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8723//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8723//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8723//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8723//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8723//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8723//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8723//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8723//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8723//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13902972" author="lhofhansl" created="Mon, 17 Feb 2014 05:28:51 +0000"  >&lt;p&gt;Make findbugs happy (and remove the HFilePerformanceEvaluation part - mixed in from another jira)&lt;/p&gt;</comment>
                            <comment id="13903015" author="hadoopqa" created="Mon, 17 Feb 2014 07:27:23 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12629311/10501-trunk-v2.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12629311/10501-trunk-v2.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12629311&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.1&lt;/font&gt;.  The patch compiles against the hadoop 1.1 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8725//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8725//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8725//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8725//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8725//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8725//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8725//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8725//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8725//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8725//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8725//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8725//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8725//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8725//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8725//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8725//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8725//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8725//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8725//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8725//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8725//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8725//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13903544" author="lhofhansl" created="Mon, 17 Feb 2014 22:10:15 +0000"  >&lt;p&gt;If there are no objections I am going to commit this soon.&lt;/p&gt;</comment>
                            <comment id="13903579" author="lhofhansl" created="Mon, 17 Feb 2014 22:48:28 +0000"  >&lt;p&gt;And to summarize the change in the behavior. 128 memstores, 10g regions:&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;no. regions&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;1&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;2&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;3&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;4&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;5&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;6&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;7&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;8&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;9&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;w/ patch&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;128&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;512&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1151&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2048&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3200&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4608&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;6772&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;8192&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10240&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;w/o patch&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;256&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2048&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;6912&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10240&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10240&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10240&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10240&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10240&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10240&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;

&lt;p&gt;(sizes in MB)&lt;/p&gt;

&lt;p&gt;So as soon as we see multiple regions of the same table we&apos;d grow pretty quickly, until then we allow two flushes before we split.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt;, you OK with the last patch? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;, I&apos;d like to get your blessing of the patch first since you came up with the original version.&lt;/p&gt;</comment>
                            <comment id="13904341" author="stack" created="Tue, 18 Feb 2014 18:14:43 +0000"  >&lt;p&gt;OK.  Needs fat release note.&lt;/p&gt;</comment>
                            <comment id="13904342" author="stack" created="Tue, 18 Feb 2014 18:15:09 +0000"  >&lt;p&gt;What if someone has configuration for when to split already?  Will it be overridden or preserved?&lt;/p&gt;</comment>
                            <comment id="13904390" author="lhofhansl" created="Tue, 18 Feb 2014 18:45:37 +0000"  >&lt;p&gt;Currently IncreasingToUpperBoundRegionSplitPolicy is not configurable. If using another RegionSplitPolicy it&apos;s fine.&lt;br/&gt;
You sound a bit concerned. You&apos;d rather not change it? Or change is too aggressive?&lt;/p&gt;

&lt;p&gt;I think the key is that there is no scenario now that would split earlier than before (because that could lead to a split storm).&lt;br/&gt;
As along as we have a table sparsely distributed (i.e. 0 or 1 regions on a given region server) the behavior would be very similar, we&apos;d split at 256m instead of 128m.&lt;br/&gt;
Just that as soon as we see more regions on a regionserer we should start to assume that the table is already somewhat distributed across the cluster.&lt;/p&gt;</comment>
                            <comment id="13904440" author="stack" created="Tue, 18 Feb 2014 19:22:33 +0000"  >&lt;p&gt;OK.  Go for it.  Release note it.&lt;/p&gt;</comment>
                            <comment id="13904457" author="lhofhansl" created="Tue, 18 Feb 2014 19:33:08 +0000"  >&lt;p&gt;How&apos;s this for a release note?&lt;/p&gt;</comment>
                            <comment id="13904462" author="stack" created="Tue, 18 Feb 2014 19:37:06 +0000"  >&lt;p&gt;Release note looks good.  Add note that initial split size went up from 128M&lt;/p&gt;</comment>
                            <comment id="13904467" author="lhofhansl" created="Tue, 18 Feb 2014 19:39:22 +0000"  >&lt;p&gt;0.94 patch with test fix&lt;/p&gt;</comment>
                            <comment id="13904475" author="lhofhansl" created="Tue, 18 Feb 2014 19:44:06 +0000"  >&lt;p&gt;Committed to all branches. Thanks for taking a look &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; (and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="13904581" author="hudson" created="Tue, 18 Feb 2014 21:01:47 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.94-on-Hadoop-2 #29 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-on-Hadoop-2/29/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-on-Hadoop-2/29/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10501&quot; title=&quot;Improve IncreasingToUpperBoundRegionSplitPolicy to avoid too many regions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10501&quot;&gt;&lt;del&gt;HBASE-10501&lt;/del&gt;&lt;/a&gt; Improve IncreasingToUpperBoundRegionSplitPolicy to avoid too many regions. (larsh: rev 1569504)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/IncreasingToUpperBoundRegionSplitPolicy.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionSplitPolicy.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13904625" author="hudson" created="Tue, 18 Feb 2014 21:24:50 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.94-JDK7 #58 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-JDK7/58/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-JDK7/58/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10501&quot; title=&quot;Improve IncreasingToUpperBoundRegionSplitPolicy to avoid too many regions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10501&quot;&gt;&lt;del&gt;HBASE-10501&lt;/del&gt;&lt;/a&gt; Improve IncreasingToUpperBoundRegionSplitPolicy to avoid too many regions. (larsh: rev 1569504)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/IncreasingToUpperBoundRegionSplitPolicy.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionSplitPolicy.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13904647" author="hudson" created="Tue, 18 Feb 2014 21:43:10 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.94 #1294 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/1294/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/1294/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10501&quot; title=&quot;Improve IncreasingToUpperBoundRegionSplitPolicy to avoid too many regions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10501&quot;&gt;&lt;del&gt;HBASE-10501&lt;/del&gt;&lt;/a&gt; Improve IncreasingToUpperBoundRegionSplitPolicy to avoid too many regions. (larsh: rev 1569504)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/IncreasingToUpperBoundRegionSplitPolicy.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionSplitPolicy.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13904657" author="hudson" created="Tue, 18 Feb 2014 21:51:07 +0000"  >&lt;p&gt;ABORTED: Integrated in HBase-0.94-security #418 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/418/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/418/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10501&quot; title=&quot;Improve IncreasingToUpperBoundRegionSplitPolicy to avoid too many regions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10501&quot;&gt;&lt;del&gt;HBASE-10501&lt;/del&gt;&lt;/a&gt; Improve IncreasingToUpperBoundRegionSplitPolicy to avoid too many regions. (larsh: rev 1569504)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/IncreasingToUpperBoundRegionSplitPolicy.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionSplitPolicy.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13904746" author="hudson" created="Tue, 18 Feb 2014 22:51:48 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.98 #165 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/165/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/165/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10501&quot; title=&quot;Improve IncreasingToUpperBoundRegionSplitPolicy to avoid too many regions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10501&quot;&gt;&lt;del&gt;HBASE-10501&lt;/del&gt;&lt;/a&gt; Improve IncreasingToUpperBoundRegionSplitPolicy to avoid too many regions. (larsh: rev 1569506)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/IncreasingToUpperBoundRegionSplitPolicy.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionSplitPolicy.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13904781" author="hudson" created="Tue, 18 Feb 2014 23:18:21 +0000"  >&lt;p&gt;FAILURE: Integrated in hbase-0.96 #299 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.96/299/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.96/299/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10501&quot; title=&quot;Improve IncreasingToUpperBoundRegionSplitPolicy to avoid too many regions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10501&quot;&gt;&lt;del&gt;HBASE-10501&lt;/del&gt;&lt;/a&gt; Improve IncreasingToUpperBoundRegionSplitPolicy to avoid too many regions. (larsh: rev 1569505)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/IncreasingToUpperBoundRegionSplitPolicy.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionSplitPolicy.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13904790" author="hudson" created="Tue, 18 Feb 2014 23:21:54 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.98-on-Hadoop-1.1 #154 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/154/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/154/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10501&quot; title=&quot;Improve IncreasingToUpperBoundRegionSplitPolicy to avoid too many regions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10501&quot;&gt;&lt;del&gt;HBASE-10501&lt;/del&gt;&lt;/a&gt; Improve IncreasingToUpperBoundRegionSplitPolicy to avoid too many regions. (larsh: rev 1569506)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/IncreasingToUpperBoundRegionSplitPolicy.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.98/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionSplitPolicy.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13904885" author="hudson" created="Wed, 19 Feb 2014 00:43:06 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-TRUNK #4928 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4928/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4928/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10501&quot; title=&quot;Improve IncreasingToUpperBoundRegionSplitPolicy to avoid too many regions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10501&quot;&gt;&lt;del&gt;HBASE-10501&lt;/del&gt;&lt;/a&gt; Improve IncreasingToUpperBoundRegionSplitPolicy to avoid too many regions. (larsh: rev 1569507)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/IncreasingToUpperBoundRegionSplitPolicy.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionSplitPolicy.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13904900" author="hudson" created="Wed, 19 Feb 2014 00:49:59 +0000"  >&lt;p&gt;FAILURE: Integrated in hbase-0.96-hadoop2 #207 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.96-hadoop2/207/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.96-hadoop2/207/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10501&quot; title=&quot;Improve IncreasingToUpperBoundRegionSplitPolicy to avoid too many regions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10501&quot;&gt;&lt;del&gt;HBASE-10501&lt;/del&gt;&lt;/a&gt; Improve IncreasingToUpperBoundRegionSplitPolicy to avoid too many regions. (larsh: rev 1569505)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/IncreasingToUpperBoundRegionSplitPolicy.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionSplitPolicy.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13904995" author="enis" created="Wed, 19 Feb 2014 01:59:53 +0000"  >&lt;p&gt;sorry, late +1. &lt;/p&gt;</comment>
                            <comment id="13905031" author="hudson" created="Wed, 19 Feb 2014 02:20:47 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK-on-Hadoop-1.1 #93 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-1.1/93/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-1.1/93/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10501&quot; title=&quot;Improve IncreasingToUpperBoundRegionSplitPolicy to avoid too many regions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10501&quot;&gt;&lt;del&gt;HBASE-10501&lt;/del&gt;&lt;/a&gt; Improve IncreasingToUpperBoundRegionSplitPolicy to avoid too many regions. (larsh: rev 1569507)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/IncreasingToUpperBoundRegionSplitPolicy.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionSplitPolicy.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12628952" name="10501-0.94-v2.txt" size="2693" author="lhofhansl" created="Fri, 14 Feb 2014 04:48:46 +0000"/>
                            <attachment id="12629276" name="10501-0.94-v3.txt" size="3110" author="lhofhansl" created="Sun, 16 Feb 2014 18:29:08 +0000"/>
                            <attachment id="12629281" name="10501-0.94-v4.txt" size="3112" author="lhofhansl" created="Sun, 16 Feb 2014 20:48:40 +0000"/>
                            <attachment id="12629602" name="10501-0.94-v5.txt" size="5489" author="lhofhansl" created="Tue, 18 Feb 2014 19:39:22 +0000"/>
                            <attachment id="12628381" name="10501-0.94.txt" size="1710" author="lhofhansl" created="Wed, 12 Feb 2014 00:18:49 +0000"/>
                            <attachment id="12629311" name="10501-trunk-v2.txt" size="5613" author="lhofhansl" created="Mon, 17 Feb 2014 05:28:51 +0000"/>
                            <attachment id="12629296" name="10501-trunk.txt" size="6830" author="lhofhansl" created="Mon, 17 Feb 2014 01:47:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 11 Feb 2014 23:47:51 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>373053</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 43 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1safj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>373355</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Changes the default split policy to avoid too many regions with default settings.&lt;br/&gt;
The old policy calculates the split size at each RS as follows: MIN(maxFileSize, flushSize*NoRegions^2) (NoRegions is the number of regions for the table in question seen on this RS)&lt;br/&gt;
&lt;br/&gt;
The new policy calculates the size this way: MIN(maxFileSize, flushSize*2*NoRegions^3)&lt;br/&gt;
Note that the initial split size is now 2 * the flushSize. With default settings it increased from 128mb to 256mb.&lt;br/&gt;
&lt;br/&gt;
The new policy still allows spreading out the regions over the cluster quickly, but then grows the desired size fairly quickly in order to avoid too many regions per RS.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>