<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:30:34 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-12187/HBASE-12187.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-12187] Review in source the paper &quot;Simple Testing Can Prevent Most Critical Failures&quot;</title>
                <link>https://issues.apache.org/jira/browse/HBASE-12187</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Review the helpful paper &lt;a href=&quot;https://www.usenix.org/system/files/conference/osdi14/osdi14-paper-yuan.pdf&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://www.usenix.org/system/files/conference/osdi14/osdi14-paper-yuan.pdf&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It describes &apos;catastrophic failures&apos;, especially issues where exceptions are thrown but not properly handled.  Their static analysis tool Aspirator turns up a bunch of the obvious offenders (Lets add to test-patch.sh alongside findbugs?).  This issue is about going through code base making sub-issues to root out these and others (Don&apos;t we have the test described in figure #6 already? I thought we did?  If we don&apos;t, need to add).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12746421">HBASE-12187</key>
            <summary>Review in source the paper &quot;Simple Testing Can Prevent Most Critical Failures&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Oct 2014 15:08:34 +0000</created>
                <updated>Mon, 31 Aug 2015 21:08:47 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>12</watches>
                                                                                                            <comments>
                            <comment id="14168691" author="d.yuan" created="Sun, 12 Oct 2014 16:00:04 +0000"  >&lt;p&gt;Hi Stack,&lt;br/&gt;
I&apos;m the author of this paper you mentioned. Thanks for your attentions. &lt;br/&gt;
I understand that it may be more convenient to build the checks implemented by aspirator into the tools you guys already use. I am very happy to help here. Do you think it would be helpful to build these checks into FindBugs or other tools you guys use? If so, I&apos;m happy to give it a shot.&lt;/p&gt;</comment>
                            <comment id="14169991" author="stack" created="Mon, 13 Oct 2014 21:16:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=d.yuan&quot; class=&quot;user-hover&quot; rel=&quot;d.yuan&quot;&gt;Ding Yuan&lt;/a&gt; Thank you for paper, your findings, your previous patches, and your now showing up to offer help.  Much appreciated. We have a bunch of work to do to address items raised in your paper.&lt;/p&gt;

&lt;p&gt;Currently we run findbugs and other checks out of a script as part of precommit test on patches.  The script we run is at ./dev-test/test-patch.sh.  We could add stuff in here but looking at aspirator as-is, it looks a bit tough to integrate (build Chord then put in place files...).  How hard to integrate into findbugs?  Then your work would get wide dissemination?&lt;/p&gt;


</comment>
                            <comment id="14170162" author="apurtell" created="Mon, 13 Oct 2014 22:55:27 +0000"  >&lt;p&gt;We are also looking at introducing static code checks at compile time via &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11912&quot; title=&quot;Catch some bad practices at compile time with error-prone&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11912&quot;&gt;&lt;del&gt;HBASE-11912&lt;/del&gt;&lt;/a&gt;, which could be another implementation option.&lt;/p&gt;</comment>
                            <comment id="14170285" author="d.yuan" created="Tue, 14 Oct 2014 00:22:22 +0000"  >&lt;p&gt;Hi Stack and Andrew,&lt;br/&gt;
It seems from the discussion of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11912&quot; title=&quot;Catch some bad practices at compile time with error-prone&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11912&quot;&gt;&lt;del&gt;HBASE-11912&lt;/del&gt;&lt;/a&gt; you guys think error-prone might be a better approach, then I will try to add a few checks into error-prone to catch the trivial bug patterns implemented by aspirator. I am not familiar with error-prone&apos;s AST representation, so I am not sure whether some of the checks can be easily implemented, but it shouldn&apos;t be complicated anyway. Afterward I can also try to provide a FindBugs implementation. &lt;/p&gt;

&lt;p&gt;Do you guys have your own error-prone repository or I should simply work on the one from &lt;a href=&quot;https://code.google.com/p/error-prone/?&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://code.google.com/p/error-prone/?&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;cheers, &lt;/p&gt;
</comment>
                            <comment id="14170427" author="apurtell" created="Tue, 14 Oct 2014 03:00:39 +0000"  >&lt;p&gt;We don&apos;t have our own repository (yet)&lt;/p&gt;</comment>
                            <comment id="14170452" author="stack" created="Tue, 14 Oct 2014 03:15:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=d.yuan&quot; class=&quot;user-hover&quot; rel=&quot;d.yuan&quot;&gt;Ding Yuan&lt;/a&gt; What &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt; said but if you need us to check it in local, we have the dev-tools dir where we could add it a while if you need a guinea pig, etc.&lt;/p&gt;</comment>
                            <comment id="14170714" author="d.yuan" created="Tue, 14 Oct 2014 09:29:49 +0000"  >&lt;p&gt;Great! I will work on it and get back to you in a few days. &lt;/p&gt;</comment>
                            <comment id="14184734" author="d.yuan" created="Mon, 27 Oct 2014 01:27:30 +0000"  >&lt;p&gt;I have implemented the three checks from aspirator into error-prone version 1.1.2. These three checks are:&lt;br/&gt;
(1). Catch block that ignores exception (including containing only a log printing statement);&lt;br/&gt;
(2). Aborting the system on exception over-catch; &lt;br/&gt;
(3). Catch block containing &quot;TODO&quot; or &quot;FIXME&quot; in comments&lt;/p&gt;

&lt;p&gt;Among them, (1) is a bit complicated since I included quite a few false positive suppression heuristics as described in the paper. &lt;/p&gt;

&lt;p&gt;I have tested all three checks on HBase-0.99.0. The first check found 111 cases, while the other two found less than 10 each. I have attached the reported cases as attachments.&lt;/p&gt;

&lt;p&gt;Currently I assigned all of the three checks as &quot;ERROR&quot; severity. So if one thinks that a case is fine, an annotation like &quot;@SupressWarnings(&quot;EmptyCatch&quot;)&quot; is needed to get the compilation to succeed. &lt;/p&gt;

&lt;p&gt;I am attaching the patch to error-prone v1.1.2, which contains the three added checks. I have also uploaded my error-prone repository to:&lt;br/&gt;
&lt;a href=&quot;https://github.com/diy1/error-prone-aspirator&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/diy1/error-prone-aspirator&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please let me know how i can further help.&lt;br/&gt;
cheers,&lt;br/&gt;
ding&lt;/p&gt;</comment>
                            <comment id="14718631" author="busbey" created="Fri, 28 Aug 2015 14:20:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=d.yuan&quot; class=&quot;user-hover&quot; rel=&quot;d.yuan&quot;&gt;Ding Yuan&lt;/a&gt;, did your changes to error-prone ever get accepted into the main error-prone repository? I&apos;m having some difficulty finding them.&lt;/p&gt;</comment>
                            <comment id="14721858" author="d.yuan" created="Mon, 31 Aug 2015 01:27:47 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=busbey&quot; class=&quot;user-hover&quot; rel=&quot;busbey&quot;&gt;Sean Busbey&lt;/a&gt;, i don&apos;t think so. I remember I sent error-prone&apos;s developers the patches last year via google group, but I can no longer find those discussion threads (seems they migrated the whole thing to github). Should I send the patch to the error-prone devs again or you guys are hosting error-prone repository locally?&lt;/p&gt;</comment>
                            <comment id="14724046" author="busbey" created="Mon, 31 Aug 2015 21:08:47 +0000"  >&lt;p&gt;we only run upstream releases of error-prone. It&apos;d be great if you could submit a pull request to get the changes into the main repo. I suspect a PR on github (i.e. &lt;a href=&quot;https://github.com/google/error-prone/pulls&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/google/error-prone/pulls&lt;/a&gt; ) will get more traction than a post to their google group.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12739916">HBASE-11912</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12677217" name="HBASE-12187.patch" size="29290" author="d.yuan" created="Mon, 27 Oct 2014 01:29:24 +0000"/>
                            <attachment id="12677218" name="abortInOvercatch.warnings.txt" size="5398" author="d.yuan" created="Mon, 27 Oct 2014 01:29:24 +0000"/>
                            <attachment id="12677219" name="emptyCatch.warnings.txt" size="61393" author="d.yuan" created="Mon, 27 Oct 2014 01:29:24 +0000"/>
                            <attachment id="12677220" name="todoInCatch.warnings.txt" size="2090" author="d.yuan" created="Mon, 27 Oct 2014 01:29:24 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12746460">HBASE-12189</subtask>
                            <subtask id="12739916">HBASE-11912</subtask>
                            <subtask id="12751718">HBASE-12382</subtask>
                            <subtask id="12750798">HBASE-12349</subtask>
                            <subtask id="12750815">HBASE-12350</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 12 Oct 2014 16:00:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 15 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i20vwn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>