<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:04:43 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-9466/HBASE-9466.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-9466] Read-only mode</title>
                <link>https://issues.apache.org/jira/browse/HBASE-9466</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Can we provide a read-only mode for a table? write to the table in read-only mode will be rejected, but read-only mode is different from disable in that:&lt;br/&gt;
1. it doesn&apos;t offline the regions of the table(hence much more lightweight than disable)&lt;br/&gt;
2. it can serve read requests&lt;/p&gt;

&lt;p&gt;Comments?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12667563">HBASE-9466</key>
            <summary>Read-only mode</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="fenghh">Honghua Feng</assignee>
                                    <reporter username="fenghh">Honghua Feng</reporter>
                        <labels>
                    </labels>
                <created>Mon, 9 Sep 2013 13:07:26 +0000</created>
                <updated>Tue, 17 Sep 2013 00:42:18 +0000</updated>
                                                                                <due></due>
                            <votes>1</votes>
                                    <watches>13</watches>
                                                                <comments>
                            <comment id="13761821" author="jmspaggi" created="Mon, 9 Sep 2013 13:11:27 +0000"  >&lt;p&gt;I guess this can be achieve using Kerberos or something like that?  But might still be a good idea to have something easier to use that K?&lt;/p&gt;</comment>
                            <comment id="13762025" author="ndimiduk" created="Mon, 9 Sep 2013 16:55:36 +0000"  >&lt;p&gt;More that just filtering with Kerberos, if the RS knowns a Region is in RO mode, it can skip initialization of write-path components to save resources. This would also allow the RO regions to be served by all three favored notes.&lt;/p&gt;

&lt;p&gt;(cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=devaraj&quot; class=&quot;user-hover&quot; rel=&quot;devaraj&quot;&gt;Devaraj Das&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="13762095" author="jdcryans" created="Mon, 9 Sep 2013 17:53:19 +0000"  >&lt;p&gt;How would that compare to the current feature where you can set a table to be read-only? &lt;a href=&quot;https://github.com/apache/hbase/blob/trunk/hbase-client/src/main/java/org/apache/hadoop/hbase/HTableDescriptor.java#L566&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hbase/blob/trunk/hbase-client/src/main/java/org/apache/hadoop/hbase/HTableDescriptor.java#L566&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13762204" author="stack" created="Mon, 9 Sep 2013 19:50:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdcryans&quot; class=&quot;user-hover&quot; rel=&quot;jdcryans&quot;&gt;Jean-Daniel Cryans&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fenghh&quot; class=&quot;user-hover&quot; rel=&quot;fenghh&quot;&gt;Honghua Feng&lt;/a&gt; doesn&apos;t want to disable the table to flip it to RO.  That is what this issue is about.&lt;/p&gt;</comment>
                            <comment id="13762211" author="jdcryans" created="Mon, 9 Sep 2013 19:58:02 +0000"  >&lt;p&gt;My understanding is he&apos;s comparing a proposed &quot;read-only mode&quot; to just disabling the table.&lt;/p&gt;</comment>
                            <comment id="13762503" author="enis" created="Tue, 10 Sep 2013 00:14:03 +0000"  >&lt;p&gt;You can do an alter table w/o disable with online schema changes. This is disabled by default for now, but if we can nail down the root cause of what Elliot observed during tests, we can re-enable it. &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;This would also allow the RO regions to be served by all three favored notes&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This would be a nice thing to have. Will need changes in meta, AM, and the client side though. &lt;/p&gt;</comment>
                            <comment id="13762675" author="fenghh" created="Tue, 10 Sep 2013 03:07:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdcryans&quot; class=&quot;user-hover&quot; rel=&quot;jdcryans&quot;&gt;Jean-Daniel Cryans&lt;/a&gt; Yes, I&apos;m proposing a &apos;read-only mode&apos;(can be per-table or per-cluster) rather than &apos;disabling table&apos;, the latter is pretty heavyweight in that it needs to offline all regions of the given table.&lt;br/&gt;
If we just want to temporarily disable &apos;update&apos; to a table or the whole cluster and later on we want to enable &apos;update&apos; again, disabling a table or all tables of the cluster seems a quite heavy choice.&lt;/p&gt;

&lt;p&gt;Thanks for pointing me to the read-only interface of HTableDescriptor of trunk, but I don&apos;t see any code using it, how is this RO expected to work?&lt;/p&gt;</comment>
                            <comment id="13763471" author="jdcryans" created="Tue, 10 Sep 2013 20:31:25 +0000"  >&lt;p&gt;It is set here: &lt;a href=&quot;https://github.com/apache/hbase/blob/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java#L621&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hbase/blob/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java#L621&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Then we check the write state when doing operations that can mutate data.&lt;/p&gt;</comment>
                            <comment id="13767288" author="apurtell" created="Sat, 14 Sep 2013 01:32:44 +0000"  >&lt;p&gt;I guess the issue is then online schema updates are disabled by default now on account of flakiness observed during integration tests, so a read-only flip without disabling the table isn&apos;t currently possible. Is that a correct summary of the current state? So if we get online updates back, we will be able to flip a table read only without a disable. &lt;/p&gt;</comment>
                            <comment id="13768268" author="fenghh" created="Mon, 16 Sep 2013 12:11:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdcryans&quot; class=&quot;user-hover&quot; rel=&quot;jdcryans&quot;&gt;Jean-Daniel Cryans&lt;/a&gt; Thanks for the pointer. But currently the readonly mode can&apos;t be switched on/off without disabling a table. What I proposed for this JIRA is to provide user the capability to switch a table to readonly mode(temporarily reject write) without disabling it(hence without offling all its regions, which is heavy).&lt;/p&gt;

&lt;p&gt;Current readonly(table attribute) supports read to a table and rejects update, but if user wants to enable write to this table, he needs to do online schema change for this table and which incurs offling/re-onlining operations for all regions of this table. My proposal is can we provide readonly as table mode(as enable/disable) rather than table attribute which indicates whether a table accepts write and can switch on/off without offlining/onlining all its regions.&lt;/p&gt;</comment>
                            <comment id="13768503" author="stack" created="Mon, 16 Sep 2013 17:12:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fenghh&quot; class=&quot;user-hover&quot; rel=&quot;fenghh&quot;&gt;Honghua Feng&lt;/a&gt; Sounds good to me.  Make the new API generic if you can, not just read-only, because I can see us adding other on-line switches in near future (good stuff)&lt;/p&gt;</comment>
                            <comment id="13768606" author="jdcryans" created="Mon, 16 Sep 2013 18:45:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fenghh&quot; class=&quot;user-hover&quot; rel=&quot;fenghh&quot;&gt;Honghua Feng&lt;/a&gt; see what Andrew said regarding enabling/disabling (but online altering still requires closing the regions, flushing, etc).&lt;/p&gt;

&lt;p&gt;If we do go down the patch flipping switches, I&apos;m with Stack here. We&apos;ll need a generic framework for doing this. One could envision changing a lot more things live than just read-only, but we don&apos;t have to implement them all right away. Yours would be the first implemented use case.&lt;/p&gt;</comment>
                            <comment id="13768946" author="fenghh" created="Mon, 16 Sep 2013 23:22:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; / &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdcryans&quot; class=&quot;user-hover&quot; rel=&quot;jdcryans&quot;&gt;Jean-Daniel Cryans&lt;/a&gt; : OK, I&apos;ll make a generic framework first and then implement readonly based on it.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 9 Sep 2013 13:11:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>347500</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 13 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1nx6n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>347799</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>