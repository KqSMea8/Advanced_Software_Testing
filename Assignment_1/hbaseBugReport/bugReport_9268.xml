<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:02:55 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-9268/HBASE-9268.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-9268] Client doesn&apos;t recover from a stalled region server</title>
                <link>https://issues.apache.org/jira/browse/HBASE-9268</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Got this testing the 0.95.2 RC.&lt;/p&gt;

&lt;p&gt;I killed -STOP a region server and let it stay like that while running PE. The clients didn&apos;t find the new region locations and in the jstack were stuck doing RPC. Eventually I killed -CONT and the client printed these:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Exception in thread &quot;TestClient-6&quot; java.lang.RuntimeException: org.apache.hadoop.hbase.client.RetriesExhaustedWithDetailsException: Failed 128 actions: IOException: 90 times, SocketTimeoutException: 38 times,&lt;/p&gt;&lt;/blockquote&gt;</description>
                <environment></environment>
        <key id="12664469">HBASE-9268</key>
            <summary>Client doesn&apos;t recover from a stalled region server</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="nkeywal">Nicolas Liochon</assignee>
                                    <reporter username="jdcryans">Jean-Daniel Cryans</reporter>
                        <labels>
                    </labels>
                <created>Mon, 19 Aug 2013 22:42:01 +0000</created>
                <updated>Fri, 20 Nov 2015 11:54:44 +0000</updated>
                            <resolved>Sat, 24 Aug 2013 06:02:27 +0000</resolved>
                                    <version>0.95.2</version>
                                    <fixVersion>0.98.0</fixVersion>
                    <fixVersion>0.96.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                <comments>
                            <comment id="13744491" author="jdcryans" created="Mon, 19 Aug 2013 23:21:02 +0000"  >&lt;p&gt;It&apos;s actually MultiServerCallable that gets stuck, I don&apos;t get this issue while reading. I see all my clients stuck on:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&quot;hbase-table-pool-16-thread-1&quot; daemon prio=10 tid=0x00007f2e8487e000 nid=0x5952 waiting for monitor entry [0x00007f2e5da05000]
   java.lang.Thread.State: BLOCKED (on object monitor)
	at org.apache.hadoop.hbase.ipc.RpcClient$Connection.writeRequest(RpcClient.java:1036)
	- waiting to lock &amp;lt;0x00000000c40526a0&amp;gt; (a java.io.DataOutputStream)
	at org.apache.hadoop.hbase.ipc.RpcClient.call(RpcClient.java:1403)
	at org.apache.hadoop.hbase.ipc.RpcClient.callBlockingMethod(RpcClient.java:1630)
	at org.apache.hadoop.hbase.ipc.RpcClient$BlockingRpcChannelImplementation.callBlockingMethod(RpcClient.java:1687)
	at org.apache.hadoop.hbase.protobuf.generated.ClientProtos$ClientService$BlockingStub.multi(ClientProtos.java:21274)
	at org.apache.hadoop.hbase.client.MultiServerCallable.call(MultiServerCallable.java:105)
	at org.apache.hadoop.hbase.client.MultiServerCallable.call(MultiServerCallable.java:43)
	at org.apache.hadoop.hbase.client.RpcRetryingCaller.callWithoutRetries(RpcRetryingCaller.java:183)
	at org.apache.hadoop.hbase.client.AsyncProcess$1.run(AsyncProcess.java:420)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13744518" author="jdcryans" created="Mon, 19 Aug 2013 23:38:14 +0000"  >&lt;p&gt;Oh and when it fails when I -CONT, I missed that I was getting this:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2013-08-19 23:37:03,468 DEBUG [TestClient-11] client.ClientScanner: Finished region={ENCODED =&amp;gt; 1588230740, NAME =&amp;gt; &apos;hbase:meta,,1&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;}
Exception in thread &quot;TestClient-8&quot; java.lang.NullPointerException
	at org.apache.hadoop.hbase.client.AsyncProcess.findDestLocation(AsyncProcess.java:294)
	at org.apache.hadoop.hbase.client.AsyncProcess.submit(AsyncProcess.java:239)
	at org.apache.hadoop.hbase.client.HTable.backgroundFlushCommits(HTable.java:894)
	at org.apache.hadoop.hbase.client.HTable.flushCommits(HTable.java:1275)
	at org.apache.hadoop.hbase.PerformanceEvaluation$Test.testTakedown(PerformanceEvaluation.java:853)
	at org.apache.hadoop.hbase.PerformanceEvaluation$Test.test(PerformanceEvaluation.java:870)
	at org.apache.hadoop.hbase.PerformanceEvaluation.runOneClient(PerformanceEvaluation.java:1209)
	at org.apache.hadoop.hbase.PerformanceEvaluation$1.run(PerformanceEvaluation.java:585)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13744758" author="nkeywal" created="Tue, 20 Aug 2013 07:04:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdcryans&quot; class=&quot;user-hover&quot; rel=&quot;jdcryans&quot;&gt;Jean-Daniel Cryans&lt;/a&gt;&lt;br/&gt;
I won&apos;t have access to a real cluster this week, but I would like to have a look. Could you please attach or send me the client logs?&lt;/p&gt;</comment>
                            <comment id="13745145" author="nkeywal" created="Tue, 20 Aug 2013 17:16:07 +0000"  >&lt;p&gt;I&apos;ve played with a pseudo distributed cluster + ycsb and got this when I kill -STOP the regionserver:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   java.lang.Thread.State: BLOCKED (on object monitor)
        at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
        - waiting to lock &amp;lt;0x00000007de6af410****** &amp;gt; (a java.io.BufferedOutputStream)
        at java.io.DataOutputStream.flush(DataOutputStream.java:106)
        at java.io.FilterOutputStream.close(FilterOutputStream.java:140)
        at org.apache.hadoop.io.IOUtils.cleanup(IOUtils.java:232)
        at org.apache.hadoop.io.IOUtils.closeStream(IOUtils.java:248)
        at org.apache.hadoop.hbase.ipc.RpcClient$Connection.close(RpcClient.java:963)
        - locked &amp;lt;0x00000007de6ab808&amp;gt; (a org.apache.hadoop.hbase.ipc.RpcClient$Connection)
        at org.apache.hadoop.hbase.ipc.RpcClient$Connection.run(RpcClient.java:718)

&quot;hbase-table-pool-1-thread-6&quot; daemon prio=10 tid=0x00007f93000ce800 nid=0x649c runnable [0x00007f932aa85000]
   java.lang.Thread.State: RUNNABLE
        at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)
        at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:210)
        at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:65)
        at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:69)
        - locked &amp;lt;0x00000007deb3ff60&amp;gt; (a sun.nio.ch.Util$2)
        - locked &amp;lt;0x00000007deb3ff50&amp;gt; (a java.util.Collections$UnmodifiableSet)
        - locked &amp;lt;0x00000007deb3fd48&amp;gt; (a sun.nio.ch.EPollSelectorImpl)
        at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:80)
        at org.apache.hadoop.net.SocketIOWithTimeout$SelectorPool.select(SocketIOWithTimeout.java:332)
        at org.apache.hadoop.net.SocketIOWithTimeout.doIO(SocketIOWithTimeout.java:157)
        at org.apache.hadoop.net.SocketOutputStream.write(SocketOutputStream.java:146)
        at org.apache.hadoop.net.SocketOutputStream.write(SocketOutputStream.java:107)
        at java.io.BufferedOutputStream.write(BufferedOutputStream.java:105)
        - locked &amp;lt;0x00000007de6af410******&amp;gt; (a java.io.BufferedOutputStream)
        at java.io.DataOutputStream.write(DataOutputStream.java:90)
        - locked &amp;lt;0x00000007de6af3f0&amp;gt; (a java.io.DataOutputStream)
        at org.apache.hadoop.hbase.ipc.IPCUtil.write(IPCUtil.java:230)
        at org.apache.hadoop.hbase.ipc.IPCUtil.write(IPCUtil.java:220)
        at org.apache.hadoop.hbase.ipc.RpcClient$Connection.writeRequest(RpcClient.java:1039)
        - locked &amp;lt;0x00000007de6af3f0&amp;gt; (a java.io.DataOutputStream)
        at org.apache.hadoop.hbase.ipc.RpcClient.call(RpcClient.java:1407)
        at org.apache.hadoop.hbase.ipc.RpcClient.callBlockingMethod(RpcClient.java:1635)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;It&apos;s exactly like if the timeout on the socket was not set. Strange.&lt;/p&gt;</comment>
                            <comment id="13745149" author="jdcryans" created="Tue, 20 Aug 2013 17:18:05 +0000"  >&lt;p&gt;Yup, but if you look at the log message I posted in this jira&apos;s description, it says it got a SocketTimeout 38 times!&lt;/p&gt;</comment>
                            <comment id="13746169" author="nkeywal" created="Wed, 21 Aug 2013 15:39:03 +0000"  >&lt;p&gt;Hum. Different points:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;38 is about the number of puts that have failed with a SocketTimeout. As it&apos;s a multi put, it&apos;s likely to be a single message. It does not mean that the client retried 38 times.&lt;/li&gt;
	&lt;li&gt;we do a socket#setSoTimeout, but this is only for reads, not for write.&lt;/li&gt;
	&lt;li&gt;it&apos;s not possible to do write timeout in java w/o using nio API.&lt;/li&gt;
	&lt;li&gt;HDFS added SocketOutputStream back in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-2346&quot; title=&quot;DataNode should have timeout on socket writes.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-2346&quot;&gt;&lt;del&gt;HADOOP-2346&lt;/del&gt;&lt;/a&gt;, but HBase does not use it.&lt;/li&gt;
	&lt;li&gt;The API to use is NetUtils.getOutputStream(socket, timeout); Tested, it works.&lt;/li&gt;
	&lt;li&gt;We can use it, but the API does not allows to change the timeout on the fly as we do.&lt;/li&gt;
	&lt;li&gt;I&apos;m not sure of the time needed by ZooKeeper to decide that the server was dead. The tests were strange.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;So, synthesis is:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Looking at the code, I don&apos;t think it&apos;s a new issue. JD, what do you think?&lt;/li&gt;
	&lt;li&gt;It seems we can fix or improve things here. I will give it a try.&lt;/li&gt;
	&lt;li&gt;I need to double check the zookeeper stuff.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13746493" author="nkeywal" created="Wed, 21 Aug 2013 15:46:09 +0000"  >&lt;p&gt;btw, I&apos;m interested to know if you have the same issue when you activate &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7590&quot; title=&quot;Add a costless notifications mechanism from master to regionservers &amp;amp; clients&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7590&quot;&gt;&lt;del&gt;HBASE-7590&lt;/del&gt;&lt;/a&gt; (it should work well).&lt;/p&gt;</comment>
                            <comment id="13746919" author="jdcryans" created="Wed, 21 Aug 2013 22:23:01 +0000"  >&lt;blockquote&gt;&lt;p&gt;Looking at the code, I don&apos;t think it&apos;s a new issue. JD, what do you think?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;How do you define &quot;new&quot; here? I haven&apos;t tested it but I&apos;m pretty sure this wasn&apos;t an issue in 0.94.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;btw, I&apos;m interested to know if you have the same issue when you activate &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7590&quot; title=&quot;Add a costless notifications mechanism from master to regionservers &amp;amp; clients&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7590&quot;&gt;&lt;del&gt;HBASE-7590&lt;/del&gt;&lt;/a&gt; (it should work well).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It worked fine with &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7590&quot; title=&quot;Add a costless notifications mechanism from master to regionservers &amp;amp; clients&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7590&quot;&gt;&lt;del&gt;HBASE-7590&lt;/del&gt;&lt;/a&gt; once I fixed the class name in the release note &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/tongue.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13747272" author="nkeywal" created="Thu, 22 Aug 2013 06:01:18 +0000"  >&lt;blockquote&gt;&lt;p&gt;How do you define &quot;new&quot; here? I haven&apos;t tested it but I&apos;m pretty sure this wasn&apos;t an issue in 0.94.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yeah, that&apos;s the 0.94 I was thinking about. The code has changed a lot around this area, but in HBaseClient.java it seems like in 0.95: no timeouts on writes. So I wonder what&apos;s the extra logic that makes it work on 0.94 (it&apos;s not purely theoretical: we could have this issue somewhere else in 0.95). I&apos;m going to try the 0.94 to be sure.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;It worked fine with &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7590&quot; title=&quot;Add a costless notifications mechanism from master to regionservers &amp;amp; clients&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7590&quot;&gt;&lt;del&gt;HBASE-7590&lt;/del&gt;&lt;/a&gt; once I fixed the class name in the release note &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Thanks for the test and the fix, JD.&lt;/p&gt;</comment>
                            <comment id="13747458" author="hadoopqa" created="Thu, 22 Aug 2013 12:02:22 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12599207/9268-hack.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12599207/9268-hack.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 2 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6837//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6837//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6837//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6837//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6837//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6837//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6837//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6837//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6837//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6837//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6837//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6837//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6837//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6837//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6837//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6837//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6837//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6837//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6837//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6837//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13747552" author="nkeywal" created="Thu, 22 Aug 2013 14:11:41 +0000"  >&lt;p&gt;I tried the 0.94 on a pseudo cluster. It seems to work well 90% of the time (that is, I had a failure).&lt;br/&gt;
A possible explanation is that the writes won&apos;t block until the server side buffer is full (a side effect of kill -STOP: the socket stuff is done by the OS not the process), and that the 0.95 message size is bigger than the 0.94 (why would it be?). It&apos;s not very satisfying. The patch seems to work however, to there is a solution that makes sense even if I don&apos;t fully understand the 0.94 scenario. I will spend more time on this.&lt;/p&gt;

&lt;p&gt;The stack when it works on 0.94 is &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Caused by: java.net.SocketTimeoutException: 60000 millis timeout while waiting for channel to be ready for read. ch : java.nio.channels.SocketChannel[connected local=/127.0.0.1:42395 remote=sd-box/127.0.0.1:60020]
        at org.apache.hadoop.net.SocketIOWithTimeout.doIO(SocketIOWithTimeout.java:164)
        at org.apache.hadoop.net.SocketInputStream.read(SocketInputStream.java:155)
        at org.apache.hadoop.net.SocketInputStream.read(SocketInputStream.java:128)
        at java.io.FilterInputStream.read(FilterInputStream.java:116)
        at org.apache.hadoop.hbase.ipc.HBaseClient$Connection$PingInputStream.read(HBaseClient.java:373)
        at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
        at java.io.BufferedInputStream.read(BufferedInputStream.java:237)
        at java.io.DataInputStream.readInt(DataInputStream.java:370)
        at org.apache.hadoop.hbase.ipc.HBaseClient$Connection.receiveResponse(HBaseClient.java:646)
        at org.apache.hadoop.hbase.ipc.HBaseClient$Connection.run(HBaseClient.java:580)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13748457" author="hadoopqa" created="Fri, 23 Aug 2013 11:05:06 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12599598/9268.v1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12599598/9268.v1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.migration.TestNamespaceUpgrade&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6856//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6856//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6856//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6856//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6856//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6856//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6856//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6856//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6856//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6856//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6856//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6856//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6856//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6856//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6856//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6856//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6856//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6856//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6856//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6856//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13748910" author="jdcryans" created="Fri, 23 Aug 2013 19:35:28 +0000"  >&lt;p&gt;+1 on v1, tried it and it was seamless.&lt;/p&gt;</comment>
                            <comment id="13748938" author="stack" created="Fri, 23 Aug 2013 19:59:27 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;I put in an attempted fix for the above unrelated TestNamespaceUpgrade failure.&lt;/p&gt;</comment>
                            <comment id="13749320" author="nkeywal" created="Sat, 24 Aug 2013 05:58:48 +0000"  >&lt;p&gt;Committed on 0.95 &amp;amp; trunk. I don&apos;t know why it doesn&apos;t show up on the 0.94.&lt;br/&gt;
Thanks for the finding, the tests and the review JD!. Thanks for the review Stack.&lt;/p&gt;</comment>
                            <comment id="13749335" author="hudson" created="Sat, 24 Aug 2013 07:47:01 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-TRUNK #4434 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4434/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4434/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9268&quot; title=&quot;Client doesn&amp;#39;t recover from a stalled region server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9268&quot;&gt;&lt;del&gt;HBASE-9268&lt;/del&gt;&lt;/a&gt;  Client doesn&apos;t recover from a stalled region server (nkeywal: rev 1517108)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/RpcClient.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13749339" author="hudson" created="Sat, 24 Aug 2013 08:58:22 +0000"  >&lt;p&gt;FAILURE: Integrated in hbase-0.95 #493 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95/493/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95/493/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9268&quot; title=&quot;Client doesn&amp;#39;t recover from a stalled region server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9268&quot;&gt;&lt;del&gt;HBASE-9268&lt;/del&gt;&lt;/a&gt;  Client doesn&apos;t recover from a stalled region server (nkeywal: rev 1517109)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/RpcClient.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13749368" author="hudson" created="Sat, 24 Aug 2013 11:56:04 +0000"  >&lt;p&gt;FAILURE: Integrated in hbase-0.95-on-hadoop2 #272 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95-on-hadoop2/272/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95-on-hadoop2/272/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9268&quot; title=&quot;Client doesn&amp;#39;t recover from a stalled region server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9268&quot;&gt;&lt;del&gt;HBASE-9268&lt;/del&gt;&lt;/a&gt;  Client doesn&apos;t recover from a stalled region server (nkeywal: rev 1517109)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/RpcClient.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13749377" author="hudson" created="Sat, 24 Aug 2013 13:17:09 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #697 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/697/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/697/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9268&quot; title=&quot;Client doesn&amp;#39;t recover from a stalled region server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9268&quot;&gt;&lt;del&gt;HBASE-9268&lt;/del&gt;&lt;/a&gt;  Client doesn&apos;t recover from a stalled region server (nkeywal: rev 1517108)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/RpcClient.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15016303" author="lars_francke" created="Fri, 20 Nov 2015 11:54:44 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12599207" name="9268-hack.patch" size="802" author="nkeywal" created="Wed, 21 Aug 2013 15:31:47 +0000"/>
                            <attachment id="12599598" name="9268.v1.patch" size="1709" author="nkeywal" created="Fri, 23 Aug 2013 09:52:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 20 Aug 2013 07:04:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>344470</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1nejj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>344770</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>