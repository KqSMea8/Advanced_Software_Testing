<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:29:15 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5601/HBASE-5601.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5601] Add per-column-family data block cache hit ratios</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5601</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;In addition to the overall block cache hit ratio it would be extremely useful to have per-column-family data block cache hit ratio metrics.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12547087">HBASE-5601</key>
            <summary>Add per-column-family data block cache hit ratios</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="enis">Enis Soztutar</assignee>
                                    <reporter username="mikhail">Mikhail Bautin</reporter>
                        <labels>
                    </labels>
                <created>Mon, 19 Mar 2012 21:06:40 +0000</created>
                <updated>Wed, 21 May 2014 22:13:57 +0000</updated>
                            <resolved>Wed, 21 May 2014 20:38:21 +0000</resolved>
                                                                    <component>metrics</component>
                    <component>monitoring</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13244822" author="enis" created="Mon, 2 Apr 2012 23:22:12 +0000"  >&lt;p&gt;I have started working on this (and other per-table-cf metrics), but soon realized that some of the changes require breaking compatibility with (soon to be released) 0.94 in terms of metric names. So I decided to list the proposed changes first to see whether we can come up with a plan. &lt;/p&gt;

&lt;p&gt;As you know, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4219&quot; title=&quot;Add Per-Column Family Metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4219&quot;&gt;&lt;del&gt;HBASE-4219&lt;/del&gt;&lt;/a&gt; and others added per-cf metrics, but there are a couple of things we can improve on that (great) work. Some ideas I have: &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Make Per-cf and global block cache metrics naming consistent (hbase.regionserver.blockCacheHitCount vs hbase.RegionServerDynamicStatistics.tbl.usertable.cf.ycsb.bt.Data.fsBlockReadCacheHitCnt)&lt;/li&gt;
	&lt;li&gt;Rename hbase.RegionServerDynamicStatistics.XXX -&amp;gt; hbase.regionserver.dyn.XXX&lt;/li&gt;
	&lt;li&gt;Rename dynamic metric names tbl.usertable.cf.ycsb.bt.Data.fsBlockReadCacheHitCnt -&amp;gt; tbl=usertable.cf=ycsb.bt=Data.at=scan.BlockCacheHitCount. Here at stands for access type, and can be scan or compaction.&lt;/li&gt;
	&lt;li&gt;For at=compaction, we probably do not need per-block type (Data, Index, ...) metric values, shall we aggregate them?&lt;/li&gt;
	&lt;li&gt;Shall we extend per-cf metrics into &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5533&quot; title=&quot;Add more metrics to HBase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5533&quot;&gt;&lt;del&gt;HBASE-5533&lt;/del&gt;&lt;/a&gt; (read/write latency histograms)?&lt;/li&gt;
	&lt;li&gt;With slab cache, we may no longer have one global block cache. Shall we enable per-cache type metrics? This can imply renaming hbase.regionserver.blockCache =&amp;gt; hbase.regionserver.lrublockcache, slabblockcache, etc.&lt;/li&gt;
	&lt;li&gt;Add a configuration for disabling per-cf metrics.&lt;/li&gt;
	&lt;li&gt;Thoughts ?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13245469" author="stack" created="Tue, 3 Apr 2012 16:32:45 +0000"  >&lt;blockquote&gt;&lt;p&gt;Make Per-cf and global block cache metrics naming consistent (hbase.regionserver.blockCacheHitCount vs hbase.RegionServerDynamicStatistics.tbl.usertable.cf.ycsb.bt.Data.fsBlockReadCacheHitCnt)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Is it really named the latter?  Please fix (Proposal looks good).&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Rename hbase.RegionServerDynamicStatistics.XXX -&amp;gt; hbase.regionserver.dyn.XXX&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;hbase-5701 just committed did this (sort-of).&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Rename dynamic metric names tbl.usertable.cf.ycsb.bt.Data.fsBlockReadCacheHitCnt -&amp;gt; tbl=usertable.cf=ycsb.bt=Data.at=scan.BlockCacheHitCount. Here at stands for access type, and can be scan or compaction.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t follow the above.  Something didn&apos;t make it across.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;For at=compaction, we probably do not need per-block type (Data, Index, ...) metric values, shall we aggregate them?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sure, on compaction.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Shall we extend per-cf metrics into &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5533&quot; title=&quot;Add more metrics to HBase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5533&quot;&gt;&lt;del&gt;HBASE-5533&lt;/del&gt;&lt;/a&gt; (read/write latency histograms)?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That would be sweet but maybe for later.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;With slab cache, we may no longer have one global block cache. Shall we enable per-cache type metrics? This can imply renaming hbase.regionserver.blockCache =&amp;gt; hbase.regionserver.lrublockcache, slabblockcache, etc.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Having them distinctly named makes sense to me.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Add a configuration for disabling per-cf metrics.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes.  There could be an overwhelming amount.&lt;/p&gt;

&lt;p&gt;ba. Thoughts?&lt;/p&gt;

&lt;p&gt;Sounds excellent.  Sounds like work that would be checked in with the singularity, 0.96?&lt;/p&gt;</comment>
                            <comment id="13249147" author="jiraposter@reviews.apache.org" created="Sat, 7 Apr 2012 03:33:23 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/4675/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4675/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hbase.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5601&quot; title=&quot;Add per-column-family data block cache hit ratios&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5601&quot;&gt;&lt;del&gt;HBASE-5601&lt;/del&gt;&lt;/a&gt;. Add per-column-family data block cache hit ratios. First shot at the patch.&lt;/p&gt;

&lt;p&gt;    Changes are as follows (some are backwards incompatible):&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Renamed hbase.RegionServerDynamicStatistics.XXX -&amp;gt; hbase.regionserver.dyn.XXX&lt;/li&gt;
	&lt;li&gt;Renamed the metrics name generation from&lt;br/&gt;
       hbase.RegionServerDynamicStatistics.tbl.usertable.cf.ycsb.bt.Data.fsBlockReadCacheHitCnt&lt;br/&gt;
       -&amp;gt; tbl=usertable.cf=ycsb.bt=Data.at=scan.blockCacheHitCount&lt;br/&gt;
       Notice that tbl.TableName is changed to tbl=TableName, cf.Family is&lt;br/&gt;
       changed to cf=Family, the fs or compaction prefix is changed to&lt;br/&gt;
       at=scan or at=compaction. at stands for access type.&lt;/li&gt;
	&lt;li&gt;Through using CacheAccessStats/CacheSizeStats, metric names&lt;br/&gt;
       across per-cf and global are made consistent.&lt;/li&gt;
	&lt;li&gt;For compaction, per-block type metrics are disabled. For compaction&lt;br/&gt;
       we do not need to distinguish between block types.&lt;/li&gt;
	&lt;li&gt;Added a configuration &quot;hbase.metrics.dynamic.enabled&quot; for disabling&lt;br/&gt;
       dynamic metrics. It is enabled by default.&lt;/li&gt;
	&lt;li&gt;Changed bloom filter metrics from keyMaybeInBloomCnt -&amp;gt; bloomHitCount&lt;/li&gt;
	&lt;li&gt;Removed some code for keeping BC related to META block types&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Some changes in HFileReaders are due to automatic trailing whitespace&lt;br/&gt;
    settings in my eclipse. I can regenerate those parts if it is hard to&lt;br/&gt;
    review.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5601&quot; title=&quot;Add per-column-family data block cache hit ratios&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5601&quot;&gt;&lt;del&gt;HBASE-5601&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5601&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-5601&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  src/main/java/org/apache/hadoop/hbase/io/hfile/BlockType.java e3c4fe4 &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/CacheAccessMetrics.java PRE-CREATION &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/CacheAccessStats.java PRE-CREATION &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/CacheAccessStatsImpl.java PRE-CREATION &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/BlockCache.java 2ba3ab2 &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/CacheSizeMetrics.java PRE-CREATION &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/CacheSizeStats.java PRE-CREATION &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/CacheSizeStatsImpl.java PRE-CREATION &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/CacheStats.java ef03075 &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/CacheStatsImpl.java PRE-CREATION &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/DoubleBlockCache.java e952ef9 &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileReaderV1.java 79ffee0 &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileReaderV2.java aa99add &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/LruBlockCache.java 91562f7 &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/SimpleBlockCache.java 87634ba &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/slab/SingleSizeCache.java 1795229 &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/slab/SlabCache.java 251ccd4 &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java f1a68e0 &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java 8a61f7d &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/metrics/RegionServerDynamicMetrics.java 3b46dd8 &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/metrics/RegionServerMetrics.java da08532 &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/metrics/SchemaMetrics.java 5ad7406 &lt;br/&gt;
  src/main/resources/hbase-default.xml 44ee689 &lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/client/TestFromClientSide.java f7430ee &lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/hfile/TestForceCacheImportantBlocks.java 5f8214e &lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/hfile/TestLruBlockCache.java d980948 &lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/hfile/TestScannerSelectionUsingTTL.java 17284a3 &lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/TestBlocksRead.java bd83a71 &lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/metrics/TestSchemaMetrics.java dbe425f &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/4675/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4675/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Tested with existing unit tests, and manually using FileContext&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;enis&lt;/p&gt;
</comment>
                            <comment id="13249148" author="jiraposter@reviews.apache.org" created="Sat, 7 Apr 2012 03:41:17 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/4675/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4675/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2012-04-07 03:40:41.839514)&lt;/p&gt;


&lt;p&gt;Review request for hbase.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Fixed a failing test case. &lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5601&quot; title=&quot;Add per-column-family data block cache hit ratios&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5601&quot;&gt;&lt;del&gt;HBASE-5601&lt;/del&gt;&lt;/a&gt;. Add per-column-family data block cache hit ratios. First shot at the patch.&lt;/p&gt;

&lt;p&gt;    Changes are as follows (some are backwards incompatible):&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Renamed hbase.RegionServerDynamicStatistics.XXX -&amp;gt; hbase.regionserver.dyn.XXX&lt;/li&gt;
	&lt;li&gt;Renamed the metrics name generation from&lt;br/&gt;
       hbase.RegionServerDynamicStatistics.tbl.usertable.cf.ycsb.bt.Data.fsBlockReadCacheHitCnt&lt;br/&gt;
       -&amp;gt; tbl=usertable.cf=ycsb.bt=Data.at=scan.blockCacheHitCount&lt;br/&gt;
       Notice that tbl.TableName is changed to tbl=TableName, cf.Family is&lt;br/&gt;
       changed to cf=Family, the fs or compaction prefix is changed to&lt;br/&gt;
       at=scan or at=compaction. at stands for access type.&lt;/li&gt;
	&lt;li&gt;Through using CacheAccessStats/CacheSizeStats, metric names&lt;br/&gt;
       across per-cf and global are made consistent.&lt;/li&gt;
	&lt;li&gt;For compaction, per-block type metrics are disabled. For compaction&lt;br/&gt;
       we do not need to distinguish between block types.&lt;/li&gt;
	&lt;li&gt;Added a configuration &quot;hbase.metrics.dynamic.enabled&quot; for disabling&lt;br/&gt;
       dynamic metrics. It is enabled by default.&lt;/li&gt;
	&lt;li&gt;Changed bloom filter metrics from keyMaybeInBloomCnt -&amp;gt; bloomHitCount&lt;/li&gt;
	&lt;li&gt;Removed some code for keeping BC related to META block types&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Some changes in HFileReaders are due to automatic trailing whitespace&lt;br/&gt;
    settings in my eclipse. I can regenerate those parts if it is hard to&lt;br/&gt;
    review.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5601&quot; title=&quot;Add per-column-family data block cache hit ratios&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5601&quot;&gt;&lt;del&gt;HBASE-5601&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5601&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-5601&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  src/main/java/org/apache/hadoop/hbase/io/hfile/BlockCache.java 2ba3ab2 &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/BlockType.java e3c4fe4 &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/CacheAccessMetrics.java PRE-CREATION &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/CacheAccessStats.java PRE-CREATION &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/CacheAccessStatsImpl.java PRE-CREATION &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/CacheSizeMetrics.java PRE-CREATION &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/CacheSizeStats.java PRE-CREATION &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/CacheSizeStatsImpl.java PRE-CREATION &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/CacheStats.java ef03075 &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/CacheStatsImpl.java PRE-CREATION &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/DoubleBlockCache.java e952ef9 &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileReaderV1.java 79ffee0 &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/HFileReaderV2.java aa99add &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/LruBlockCache.java 91562f7 &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/SimpleBlockCache.java 87634ba &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/slab/SingleSizeCache.java 1795229 &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/io/hfile/slab/SlabCache.java 251ccd4 &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java f1a68e0 &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java 8a61f7d &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/metrics/RegionServerDynamicMetrics.java 3b46dd8 &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/metrics/RegionServerMetrics.java da08532 &lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/metrics/SchemaMetrics.java 5ad7406 &lt;br/&gt;
  src/main/resources/hbase-default.xml 44ee689 &lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/client/TestFromClientSide.java f7430ee &lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/hfile/TestForceCacheImportantBlocks.java 5f8214e &lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/hfile/TestLruBlockCache.java d980948 &lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/io/hfile/TestScannerSelectionUsingTTL.java 17284a3 &lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/TestBlocksRead.java bd83a71 &lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/regionserver/metrics/TestSchemaMetrics.java dbe425f &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/4675/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4675/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Tested with existing unit tests, and manually using FileContext&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;enis&lt;/p&gt;
</comment>
                            <comment id="14005199" author="stack" created="Wed, 21 May 2014 20:38:21 +0000"  >&lt;p&gt;Resolving as won&apos;t fix for trunk at least (may be in 0.89fb).  The items raised by Enis in the description are no longer apt given per-cf metrics were removed by &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6410&quot; title=&quot;Move RegionServer Metrics to metrics2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6410&quot;&gt;&lt;del&gt;HBASE-6410&lt;/del&gt;&lt;/a&gt; (in 0.96) &amp;#8211; too expensive to calculate.&lt;/p&gt;

&lt;p&gt;That said, let me respond to the original list since much of it still has merit and I am trying to address in our new per-1.0 context.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Make Per-cf and global block cache metrics naming consistent (hbase.regionserver.blockCacheHitCount vs hbase.RegionServerDynamicStatistics.tbl.usertable.cf.ycsb.bt.Data.fsBlockReadCacheHitCnt)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This change looks done though rather than hbase.regionserver.blockCacheHitCount  we have hbase.regionserver.server.blockCacheHitCount (The mbean that hosts this metric is hbase.regionserver.server).&lt;/p&gt;

&lt;p&gt;All blockcache metrics have a blockCache prefix in hadoop metrics2 (except &apos;blockCountHitPercent&apos; which I&apos;ll fix).&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Rename hbase.RegionServerDynamicStatistics.XXX -&amp;gt; hbase.regionserver.dyn.XXX&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Rename dynamic metric names tbl.usertable.cf.ycsb.bt.Data.fsBlockReadCacheHitCnt -&amp;gt; tbl=usertable.cf=ycsb.bt=Data.at=scan.BlockCacheHitCount. Here at stands for access type, and can be scan or compaction.&lt;br/&gt;
For at=compaction, we probably do not need per-block type (Data, Index, ...) metric values, shall we aggregate them?&lt;/p&gt;

&lt;p&gt;Not pertinent to trunk.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Shall we extend per-cf metrics into &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5533&quot; title=&quot;Add more metrics to HBase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5533&quot;&gt;&lt;del&gt;HBASE-5533&lt;/del&gt;&lt;/a&gt; (read/write latency histograms)?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Not pertinent anymore.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;With slab cache, we may no longer have one global block cache. Shall we enable per-cache type metrics? This can imply renaming hbase.regionserver.blockCache =&amp;gt; hbase.regionserver.lrublockcache, slabblockcache, etc.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We need this. Will file an issue.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Add a configuration for disabling per-cf metrics.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;No longer pertinent since removal.&lt;/p&gt;</comment>
                            <comment id="14005200" author="stack" created="Wed, 21 May 2014 20:38:40 +0000"  >&lt;p&gt;Oh, reopen if I am wrong in the above &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14005312" author="enis" created="Wed, 21 May 2014 22:13:57 +0000"  >&lt;p&gt;Thanks Stack. Agreed with the resolution. We can continue on this piecemeal on other issues. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12549237">HBASE-5701</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 2 Apr 2012 23:22:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>232245</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 30 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02fan:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12079</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>