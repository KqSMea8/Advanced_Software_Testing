<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:33:04 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-12441/HBASE-12441.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-12441] Export and CopyTable need to be able to keep tags/labels in cells</title>
                <link>https://issues.apache.org/jira/browse/HBASE-12441</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Export and CopyTable (and possibly other MR tools) currently do not carry over tags/labels in cells.&lt;/p&gt;

&lt;p&gt;These tools should be able to keep tags/labels in cells when they back up the table cells.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12753566">HBASE-12441</key>
            <summary>Export and CopyTable need to be able to keep tags/labels in cells</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jinghe">Jerry He</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 Nov 2014 00:23:24 +0000</created>
                <updated>Wed, 3 Feb 2016 21:28:54 +0000</updated>
                                            <version>0.98.7</version>
                    <version>0.99.2</version>
                                                    <component>mapreduce</component>
                    <component>security</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="14201289" author="jinghe" created="Fri, 7 Nov 2014 00:33:16 +0000"  >&lt;p&gt;The root is that currently scan Result KVs/cells on the client side do not contain tags/labels.&lt;br/&gt;
On the region server side, scanner Result KVs/cells do contain tags/labels.  But they are not carried over in RPCs.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; CellProtos.Cell toCell(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Cell kv) {
    &lt;span class=&quot;code-comment&quot;&gt;// Doing &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is going to kill us &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; we &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; it &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; all data passed.
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// St.Ack 20121205
&lt;/span&gt;    CellProtos.Cell.Builder kvbuilder = CellProtos.Cell.newBuilder();
    kvbuilder.setRow(ByteStringer.wrap(kv.getRowArray(), kv.getRowOffset(),
        kv.getRowLength()));
    kvbuilder.setFamily(ByteStringer.wrap(kv.getFamilyArray(),
        kv.getFamilyOffset(), kv.getFamilyLength()));
    kvbuilder.setQualifier(ByteStringer.wrap(kv.getQualifierArray(),
        kv.getQualifierOffset(), kv.getQualifierLength()));
    kvbuilder.setCellType(CellProtos.CellType.valueOf(kv.getTypeByte()));
    kvbuilder.setTimestamp(kv.getTimestamp());
    kvbuilder.setValue(ByteStringer.wrap(kv.getValueArray(), kv.getValueOffset(),
        kv.getValueLength()));
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; kvbuilder.build();
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14201295" author="jinghe" created="Fri, 7 Nov 2014 00:39:29 +0000"  >&lt;p&gt;There are a couple of choices we can do:&lt;br/&gt;
1.  Always carry over tags/labels to the client side Scan Result.&lt;br/&gt;
2. Provide an attribute (say &apos;INCLUDE_TAGS&apos;) similar to &apos;RAW&apos; in Scan to optionally include tags/labels in Result.&lt;/p&gt;</comment>
                            <comment id="14201471" author="anoop.hbase" created="Fri, 7 Nov 2014 02:35:10 +0000"  >&lt;p&gt;I thought some time back that this might be an issue. But forgot to test..  Thanks for testing and filing&lt;br/&gt;
There is a Codec which can carry tags back to client. If this Codec can be used we can get tags.&lt;/p&gt;</comment>
                            <comment id="14201524" author="ram_krish" created="Fri, 7 Nov 2014 03:29:03 +0000"  >&lt;p&gt;We allowed the tags/labels to be carried over in case of SYSTEM users if I remember correctly. To the client side we don&apos;t generally pass the tags as it is not safe to pass over visibility tags to the client which other wise would need stripping of the tags based on the type.&lt;br/&gt;
Also currently the codec that can be used on the server and the client side was not two way. I need to read the code as I need to recollect the current behaviour.&lt;/p&gt;</comment>
                            <comment id="14201533" author="anoop.hbase" created="Fri, 7 Nov 2014 03:39:07 +0000"  >&lt;blockquote&gt;&lt;p&gt;We allowed the tags/labels to be carried over in case of SYSTEM users if I remember correctly. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;No Ram..  In case of super user we allow all the cells to be send back (with out label check) but still the codec will be the one which strips tags.  Only replication side we fixed this with a custom codec for Replication alone.  Need to solve this.&lt;/p&gt;</comment>
                            <comment id="14201557" author="ram_krish" created="Fri, 7 Nov 2014 04:01:35 +0000"  >&lt;blockquote&gt;&lt;p&gt;In case of super user we allow all the cells to be send back (with out label check) but still the codec will be the one which strips tags&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Okie. But the issue was that the codecs that were used we were not able to specify the codec for an import/export case and a normal case where the client gets back the result.( when we tried with connection negotiation).&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Provide an attribute (say &apos;INCLUDE_TAGS&apos;) similar to &apos;RAW&apos; in Scan to optionally include tags/labels in Result.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;If the export and copy table could be changed to accomodate this, then it would be good. But it would have issues in case a suspicious user tries to use a scan with INCLUDE_TAGS. &lt;/p&gt;</comment>
                            <comment id="14201608" author="jinghe" created="Fri, 7 Nov 2014 05:04:50 +0000"  >&lt;p&gt;.Hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ram_krish&quot; class=&quot;user-hover&quot; rel=&quot;ram_krish&quot;&gt;ramkrishna.s.vasudevan&lt;/a&gt;&lt;br/&gt;
Thanks for the comments.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;There is a Codec which can carry tags back to client.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Can you provide a little more info on this?&lt;/p&gt;</comment>
                            <comment id="14201619" author="anoop.hbase" created="Fri, 7 Nov 2014 05:27:26 +0000"  >&lt;p&gt;Why default the Codec which RPC uses is KeyValueCodec which strips tags&lt;br/&gt;
There is a KeyValueCodecWithTags you can see. This will carry the tags also.&lt;br/&gt;
Replication uses this.&lt;br/&gt;
To carry tags from server to client, this Codec should be used at both ends.&lt;/p&gt;</comment>
                            <comment id="14203585" author="jinghe" created="Sat, 8 Nov 2014 20:28:08 +0000"  >&lt;p&gt;I looked up some good background info from HBase-10322, linking them as related.&lt;/p&gt;</comment>
                            <comment id="15130633" author="anoop.hbase" created="Wed, 3 Feb 2016 16:22:13 +0000"  >&lt;p&gt;Missed this for a long time.  So what do u think &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jerryhe&quot; class=&quot;user-hover&quot; rel=&quot;jerryhe&quot;&gt;Jerry He&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="15131168" author="jinghe" created="Wed, 3 Feb 2016 21:28:54 +0000"  >&lt;p&gt;Hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks for reminding this one. I think it is a good thing to add to the Cell labels feature.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12755072">HBASE-12470</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12688432">HBASE-10322</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 7 Nov 2014 02:35:10 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            45 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i22327:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>