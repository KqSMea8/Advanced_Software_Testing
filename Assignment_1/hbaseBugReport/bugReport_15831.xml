<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 21:07:40 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-15831/HBASE-15831.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-15831] we are running a Spark Job for scanning Hbase table getting Caused by: org.apache.hadoop.hbase.exceptions.OutOfOrderScannerNextException</title>
                <link>https://issues.apache.org/jira/browse/HBASE-15831</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;I am getting following error when I am trying to scan  hbase table in QED environment for a particular collection&lt;/p&gt;

&lt;p&gt;Caused by: org.apache.hadoop.hbase.exceptions.OutOfOrderScannerNextException: org.apache.hadoop.hbase.exceptions.OutOfOrderScannerNextException: Expected nextCallSeq: 1 But the nextCallSeq got from client: 0; request=scanner_id: 1629041 number_of_rows: 100 close_scanner: false next_call_seq: 0&lt;/p&gt;

&lt;p&gt;Following is the command to execute the spark job&lt;/p&gt;

&lt;p&gt;spark-submit --master yarn --deploy-mode client --driver-memory 4g --queue root.ecpqedv1patents --class com.thomsonreuters.spark.hbase.HbaseSparkFinal HbaseSparkVenus.jar ecpqedv1patents:NovusDocCopy w_3rd_bonds&lt;/p&gt;


&lt;p&gt;even I tried running this adding following two parameter also --num-executors 200 --executor-cores 4 but even it was throwing same exception.&lt;/p&gt;


&lt;p&gt;I goggled and found if we add following properties we would not be getting above issue, but this property changes also did not help&lt;/p&gt;



&lt;p&gt;.set(&quot;hbase.client.pause&quot;,&quot;1000&quot;)&lt;br/&gt;
      .set(&quot;hbase.rpc.timeout&quot;,&quot;90000&quot;)&lt;br/&gt;
      .set(&quot;hbase.client.retries.number&quot;,&quot;3&quot;)&lt;br/&gt;
      .set(&quot;zookeeper.recovery.retry&quot;,&quot;1&quot;)&lt;br/&gt;
      .set(&quot;hbase.client.operation.timeout&quot;,&quot;30000&quot;)&lt;br/&gt;
      .set(&quot;hbase.client.scanner.timeout.period&quot;,&quot;90000&quot;)&lt;/p&gt;

&lt;p&gt;Please let us know how to resolve this issue&lt;/p&gt;</description>
                <environment></environment>
        <key id="12969813">HBASE-15831</key>
            <summary>we are running a Spark Job for scanning Hbase table getting Caused by: org.apache.hadoop.hbase.exceptions.OutOfOrderScannerNextException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="neemesh.chandrigopal">Neemesh</reporter>
                        <labels>
                    </labels>
                <created>Sun, 15 May 2016 07:13:06 +0000</created>
                <updated>Tue, 31 May 2016 19:28:03 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15284656" author="anoop.hbase" created="Mon, 16 May 2016 14:38:25 +0000"  >&lt;p&gt;Each Job is trying to scan how many rows?  And how many rows in one RPC? (HBase scanner caching value).   Any filtering on scan job?&lt;/p&gt;</comment>
                            <comment id="15307669" author="neemesh.chandrigopal" created="Tue, 31 May 2016 12:38:39 +0000"  >&lt;p&gt;there are nearly 9 million record, i am using Filter Start and End row filter to reduce the scan row.&lt;br/&gt;
Scanner cache is set as 500&lt;/p&gt;</comment>
                            <comment id="15308424" author="anoop.hbase" created="Tue, 31 May 2016 19:28:03 +0000"  >&lt;p&gt;Why you need a filter?  Can u use Scan setStart and setStop rows to set the range?   The issue is you are trying to fetch 500 rows in one RPC and there is filters also..  So at server end, we might be touching many more rows in one RPC call..  This eats up time and client side gets RPC time out and it retry.  You have to either increase the time outs or/and reduce the possible #rows touch per scan rpc.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 16 May 2016 14:38:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            28 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2xzf3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>