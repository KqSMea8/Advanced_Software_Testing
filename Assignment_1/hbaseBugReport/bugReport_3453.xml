<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:10:21 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-3453/HBASE-3453.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-3453] How about RowPaginationFilter</title>
                <link>https://issues.apache.org/jira/browse/HBASE-3453</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;I know hbase has already PageFilter.&lt;br/&gt;
But, sometime we need to get row data from specified position.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;only for newbie:&lt;br/&gt;
  If you want to write custom Filter, you also add filter class to an hbase server classpath.&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;RowPaginationFilter&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
/**
	 * Constructor that takes a maximum page size.
	 * 
	 * get row from offset to offset+limit ( offset&amp;lt;= row&amp;lt;=offset+limit )
	 * @param offset start position
	 * @param limit count from offset position
	 */
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; RowPaginationFilter(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; offset, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; limit) {
		&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.offset = offset;
		&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.limit = limit;
	}

	&lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; to exclude row, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; to include row.
&lt;/span&gt;	@Override
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; filterRow() {	
	
		&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isExclude = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.rowsAccepted &amp;lt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.offset || &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.rowsAccepted&amp;gt;=&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.limit+&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.offset;

		rowsAccepted++;
		&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; isExclude;
	}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;-----------------&lt;/p&gt;</description>
                <environment>&lt;p&gt;windows 7&lt;/p&gt;</environment>
        <key id="12496092">HBASE-3453</key>
            <summary>How about RowPaginationFilter</summary>
                <type id="5" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Wish</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ncanis">ncanis</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 Jan 2011 04:11:09 +0000</created>
                <updated>Sat, 19 Jul 2014 01:03:21 +0000</updated>
                            <resolved>Sat, 19 Jul 2014 01:03:21 +0000</resolved>
                                    <version>0.90.1</version>
                                                    <component>Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12984019" author="ncanis" created="Thu, 20 Jan 2011 04:15:44 +0000"  >&lt;p&gt;I attach RowPaginationFilter.java&lt;/p&gt;</comment>
                            <comment id="12984021" author="ryanobjc" created="Thu, 20 Jan 2011 04:40:56 +0000"  >&lt;p&gt;thanks for the code!&lt;/p&gt;

&lt;p&gt;I have a question, what happens if the offset lies in the next region?&lt;/p&gt;</comment>
                            <comment id="12984042" author="ncanis" created="Thu, 20 Jan 2011 06:46:06 +0000"  >&lt;p&gt;I converted RowPaginationFilter.java to hbase 0.90.0&lt;/p&gt;

&lt;p&gt;Congratulations on HBase 0.90.0 release!&lt;br/&gt;
I am really happy about that. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12984047" author="ncanis" created="Thu, 20 Jan 2011 07:00:31 +0000"  >&lt;p&gt;why offset lies?, I don&apos;t understand your question. please tell me more detaily.&lt;/p&gt;

&lt;p&gt;------------------------&lt;br/&gt;
if you want to get  5 count from 3position&lt;br/&gt;
RowPaginationFilter filter = new RowPaginationFilter(3,5);&lt;/p&gt;</comment>
                            <comment id="12984055" author="ncanis" created="Thu, 20 Jan 2011 07:14:01 +0000"  >
&lt;p&gt;if we use ResultScanner for paging, follow code.&lt;/p&gt;

&lt;p&gt;(I found from googling)&lt;br/&gt;
&lt;a href=&quot;http://devblog.streamy.com/2009/04/23/hbase-row-key-design-for-paging-limit-offset-queries/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://devblog.streamy.com/2009/04/23/hbase-row-key-design-for-paging-limit-offset-queries/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;that will be extremely slow. (rows are 50,0000 over)&lt;/p&gt;

&lt;p&gt;I think we should use Filter for specified position&lt;/p&gt;
</comment>
                            <comment id="12984270" author="streamy" created="Thu, 20 Jan 2011 16:42:32 +0000"  >&lt;p&gt;The code there is returning all the rows back to the client rather than using a server-side filter.  You won&apos;t need to scan every row, but you will need to scan past &lt;tt&gt;offset&lt;/tt&gt; number of rows.  Your filter will behave the same way but will prevent the offset lines from being sent back to the client, which is good.&lt;/p&gt;

&lt;p&gt;The issue is as Ryan points out.  Filters do not currently work between regions, so if your offset or page jumps between regions, it will not work.&lt;/p&gt;</comment>
                            <comment id="12984271" author="streamy" created="Thu, 20 Jan 2011 16:43:04 +0000"  >&lt;p&gt;0.90.0 already released&lt;/p&gt;</comment>
                            <comment id="12984479" author="ncanis" created="Thu, 20 Jan 2011 23:43:57 +0000"  >&lt;p&gt;Thanks for reply Jonathan Gray&lt;/p&gt;

&lt;p&gt;I understood about that, that&apos;s why we can use it when regions are only one.&lt;/p&gt;

&lt;p&gt;is there anything to solve the issue?&lt;br/&gt;
like this:(db)&lt;br/&gt;
for example&amp;gt; select * from user limit 100,20   (this is common issue)&lt;/p&gt;

&lt;p&gt;if we have table has 500,000 rows, search time will be taken too long.&lt;/p&gt;

&lt;p&gt;What should I do?&lt;/p&gt;



</comment>
                            <comment id="12984493" author="ryanobjc" created="Thu, 20 Jan 2011 23:58:46 +0000"  >&lt;p&gt;at this point we do not have distributed filter state, that is as a&lt;br/&gt;
scanner skips between regions, each region gets a new instantiation of&lt;br/&gt;
the filter.&lt;/p&gt;

&lt;p&gt;while it&apos;s really attractive to have the DB handle this for you, most&lt;br/&gt;
of the scalable designs i&apos;ve heard do not use the offset/limit of the&lt;br/&gt;
database.  Even the mysql implementation is not very efficient because&lt;br/&gt;
it must do the entire query every time and use internal counters to&lt;br/&gt;
skip (while still incurring the io overhead).  HBase is similar, but&lt;br/&gt;
the twist of our regions prevents this from effectively working in all&lt;br/&gt;
cases.&lt;/p&gt;</comment>
                            <comment id="12984499" author="ncanis" created="Fri, 21 Jan 2011 00:10:27 +0000"  >&lt;p&gt;Thanks ryan rawson,&lt;br/&gt;
but google gmail has paging.(bigtable)&lt;/p&gt;

&lt;p&gt;in gmail, we can click previos and next page.&lt;/p&gt;</comment>
                            <comment id="12984574" author="ncanis" created="Fri, 21 Jan 2011 05:28:02 +0000"  >&lt;p&gt;to ryan rawson&lt;/p&gt;

&lt;p&gt;you&apos;re right.&lt;br/&gt;
most&lt;br/&gt;
of the scalable designs don&apos;t use offset,limit&lt;/p&gt;

&lt;p&gt;gmail of google also doesn&apos;t have paging, just using prev/next&lt;/p&gt;

&lt;p&gt;If we want to implement like gmail list, we must know start row key.(clients know last rowkey. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; )&lt;/p&gt;

&lt;p&gt;so, I&apos;m working to solve paging problem.&lt;/p&gt;

&lt;p&gt;-----------------&lt;br/&gt;
for example&lt;/p&gt;

&lt;p&gt;1. search(byte[] startRow, String col, byte[] value)   : clients know last startRow value in their list.&lt;br/&gt;
2. find out column position in col index table.&lt;br/&gt;
3. I set start rowkey = Bytes.add(si.getValue(),startRow);&lt;br/&gt;
4. add PageFilter&lt;br/&gt;
5. run getIndexedScanner&lt;br/&gt;
6. done.&lt;/p&gt;

&lt;p&gt;Thanks a lot  for your help.&lt;/p&gt;

&lt;p&gt;I deprecated RowPaginationFilter&lt;/p&gt;

</comment>
                            <comment id="12984575" author="ryanobjc" created="Fri, 21 Jan 2011 05:33:45 +0000"  >&lt;p&gt;hey,&lt;/p&gt;

&lt;p&gt;a common tactic is for the http layer/client to store the last&lt;br/&gt;
previous retrieved row so when people hit &apos;next&apos; the code can start&lt;br/&gt;
from there, and you retrieve PAGE_SIZE+1 to know the &apos;next&apos; row id.&lt;/p&gt;

&lt;p&gt;good luck!&lt;/p&gt;</comment>
                            <comment id="12984578" author="ncanis" created="Fri, 21 Jan 2011 05:48:03 +0000"  >&lt;p&gt;Thanks Ryan&lt;/p&gt;

&lt;p&gt;I finished.&lt;br/&gt;
performace was good.&lt;/p&gt;

&lt;p&gt;table has 15,000 rows. (and table has index table for column)&lt;br/&gt;
1. using old scan : 312ms&lt;br/&gt;
2. using start rowKey : 89ms&lt;/p&gt;

&lt;p&gt;It works. Thanks.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12468834" name="RowPaginationFilter.java" size="2808" author="ncanis" created="Thu, 20 Jan 2011 06:46:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 20 Jan 2011 04:40:56 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33031</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 48 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hmc7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>100881</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>