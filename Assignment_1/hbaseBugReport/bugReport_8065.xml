<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:51:42 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-8065/HBASE-8065.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-8065] bulkload can load the hfile into hbase table,but this mechanism can&apos;t remove prior data</title>
                <link>https://issues.apache.org/jira/browse/HBASE-8065</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;this patch can do bulkload for one more parameter &#8216;need to refresh&#8217;,when this parameter is true.bulkload can clean the old date in the hbase table ,then do the new date load&lt;/p&gt;</description>
                <environment>&lt;p&gt;hadoop-1.0.2&#12289;hbase-0.94.0&lt;/p&gt;</environment>
        <key id="12636298">HBASE-8065</key>
            <summary>bulkload can load the hfile into hbase table,but this mechanism can&apos;t remove prior data</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="kirayuan">Yuan Kang</assignee>
                                    <reporter username="kirayuan">Yuan Kang</reporter>
                        <labels>
                    </labels>
                <created>Mon, 11 Mar 2013 07:02:04 +0000</created>
                <updated>Wed, 21 Sep 2016 04:34:46 +0000</updated>
                                            <version>0.94.0</version>
                                                    <component>IPC/RPC</component>
                    <component>mapreduce</component>
                    <component>regionserver</component>
                        <due>Mon, 11 Mar 2013 00:00:00 +0000</due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13598584" author="kirayuan" created="Mon, 11 Mar 2013 07:03:25 +0000"  >&lt;p&gt;this patch change the regionserver/ipc/mapreduce code to enable the bulkload remove the old date&lt;/p&gt;</comment>
                            <comment id="13598592" author="hadoopqa" created="Mon, 11 Mar 2013 07:12:19 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12573032/LoadIncrementalHFiles-bulkload-can-clean-olddata.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12573032/LoadIncrementalHFiles-bulkload-can-clean-olddata.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4753//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4753//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13599092" author="yuzhihong@gmail.com" created="Mon, 11 Mar 2013 18:24:42 +0000"  >&lt;p&gt;Is your target release 0.94 ?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; server.bulkLoadHFilesRefresh(famPaths, regionName);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;How do we know that the server supports this new feature ?&lt;/p&gt;

&lt;p&gt;Can you provide patch for trunk ?&lt;/p&gt;

&lt;p&gt;It would be nice if you can upload the trunk patch onto review board.&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="13599104" author="yuzhihong@gmail.com" created="Mon, 11 Mar 2013 18:35:34 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+   * @param familyPaths List of Pair&amp;lt;&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] column family, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; hfilePath&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In javadoc, there is no need to mention parameter names.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.lock.writeLock().lock();
+    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.lock.readLock().lock();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Why are the write/read locks taken consecutively ?&lt;/p&gt;</comment>
                            <comment id="13599636" author="kirayuan" created="Tue, 12 Mar 2013 02:45:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ted_yu&quot; class=&quot;user-hover&quot; rel=&quot;ted_yu&quot;&gt;Ted Yu&lt;/a&gt;write/read locks taken to prevent this progress from being disturb by other operation .whether it is read or write&lt;/p&gt;</comment>
                            <comment id="13599639" author="yuzhihong@gmail.com" created="Tue, 12 Mar 2013 02:48:25 +0000"  >&lt;p&gt;I was saying that if you take write lock, there is no need to take read lock at the same time.&lt;/p&gt;</comment>
                            <comment id="13599645" author="ndimiduk" created="Tue, 12 Mar 2013 02:57:40 +0000"  >&lt;p&gt;What&apos;s wrong with truncating/dropping a table before loading HFiles? LoadIncrementalHFiles needs the ability to replace data?&lt;/p&gt;</comment>
                            <comment id="13599648" author="kirayuan" created="Tue, 12 Mar 2013 03:16:43 +0000"  >&lt;p&gt;After truncate operation,the table will have one region ,instead of the former region splited situation&lt;/p&gt;</comment>
                            <comment id="13599650" author="ndimiduk" created="Tue, 12 Mar 2013 03:20:24 +0000"  >&lt;p&gt;Good point. Perhaps a less invasive approach would be to extend the truncate API to preserve the original topology? You might also be interested in another ticket I just opened today: &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8073&quot; title=&quot;HFileOutputFormat support for offline operation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8073&quot;&gt;HBASE-8073&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13918412" author="ndimiduk" created="Mon, 3 Mar 2014 18:49:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5525&quot; title=&quot;Truncate and preserve region boundaries option&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5525&quot;&gt;&lt;del&gt;HBASE-5525&lt;/del&gt;&lt;/a&gt; provides the &lt;tt&gt;truncate_preserve&lt;/tt&gt; command that does just as I suggested. It&apos;s best to use this feature instead. Does it satisfy your need?&lt;/p&gt;</comment>
                            <comment id="15508710" author="rakesh.saini" created="Wed, 21 Sep 2016 04:34:46 +0000"  >&lt;p&gt;The lock free  on callback mechanism will assure  the removal of  old data with every successful bulk load operation.It also take care of data contention problem raised during read operation.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12573032" name="LoadIncrementalHFiles-bulkload-can-clean-olddata.patch" size="19671" author="kirayuan" created="Mon, 11 Mar 2013 07:03:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 11 Mar 2013 07:12:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>316790</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1inwf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>317132</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>bulkload mechanism can remove the old date optionally</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>