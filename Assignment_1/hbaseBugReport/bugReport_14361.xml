<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:52:17 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-14361/HBASE-14361.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-14361] ReplicationSink should create Connection instances lazily</title>
                <link>https://issues.apache.org/jira/browse/HBASE-14361</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Over on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12911&quot; title=&quot;Client-side metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12911&quot;&gt;&lt;del&gt;HBASE-12911&lt;/del&gt;&lt;/a&gt; I have a patch that registers Connection instances with the metrics system. In both standalone server and tll client applications, I was surprised to see multiple connection objects showing up that are unused. These are pretty heavy objects, including lots of client threads for the batch pool. We should track these down and remove them &amp;#8211; if they&apos;re not some kind of phantom artifacts of my WIP patch over there.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12861648">HBASE-14361</key>
            <summary>ReplicationSink should create Connection instances lazily</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chenheng">Heng Chen</assignee>
                                    <reporter username="ndimiduk">Nick Dimiduk</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Sep 2015 19:05:05 +0000</created>
                <updated>Wed, 27 Jan 2016 15:28:51 +0000</updated>
                            <resolved>Tue, 15 Sep 2015 12:19:22 +0000</resolved>
                                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>1.2.0</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                    <fixVersion>1.0.3</fixVersion>
                    <fixVersion>1.1.3</fixVersion>
                                    <component>Replication</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>12</watches>
                                                                <comments>
                            <comment id="14730031" author="stack" created="Thu, 3 Sep 2015 23:30:57 +0000"  >&lt;p&gt;Excellent justification for client-side metrics.&lt;/p&gt;</comment>
                            <comment id="14730280" author="eclark" created="Fri, 4 Sep 2015 04:04:29 +0000"  >&lt;p&gt;I&apos;ve seen some leaking connections too. For example The chaos monkey seems to create two connections. Though I can&apos;t see how.&lt;/p&gt;</comment>
                            <comment id="14732301" author="chenheng" created="Sun, 6 Sep 2015 08:37:38 +0000"  >&lt;p&gt;I print stack trace in &lt;tt&gt;ConnectionImplementation&lt;/tt&gt; constructor.  &lt;br/&gt;
And found there are five &lt;tt&gt;ConnectionImplementation&lt;/tt&gt; instance after running start-hbase.sh standalone.&lt;/p&gt;

&lt;p&gt;I upload the hmaster.log,  and the stack trace below:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

  0 java.lang.Throwable
    1 &amp;gt;---at org.apache.hadoop.hbase.client.ConnectionImplementation.&amp;lt;init&amp;gt;(ConnectionImplementation.java:217)
    2 &amp;gt;---at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    3 &amp;gt;---at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
    4 &amp;gt;---at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    5 &amp;gt;---at java.lang.reflect.Constructor.newInstance(Constructor.java:422)
    6 &amp;gt;---at org.apache.hadoop.hbase.client.ConnectionFactory.createConnection(ConnectionFactory.java:231)
    7 &amp;gt;---at org.apache.hadoop.hbase.client.ConnectionFactory.createConnection(ConnectionFactory.java:118)
    8 &amp;gt;---at org.apache.hadoop.hbase.master.ServerManager.&amp;lt;init&amp;gt;(ServerManager.java:222)
    9 &amp;gt;---at org.apache.hadoop.hbase.master.ServerManager.&amp;lt;init&amp;gt;(ServerManager.java:212)
   10 &amp;gt;---at org.apache.hadoop.hbase.master.HMaster.createServerManager(HMaster.java:853)
   11 &amp;gt;---at org.apache.hadoop.hbase.master.HMaster.finishActiveMasterInitialization(HMaster.java:661)
   12 &amp;gt;---at org.apache.hadoop.hbase.master.HMaster.access$500(HMaster.java:180)
   13 &amp;gt;---at org.apache.hadoop.hbase.master.HMaster$1.run(HMaster.java:1670)
   14 &amp;gt;---at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)




   34 2015-09-06 16:07:20,904 INFO  [RS:0;10.0.3.80:52456] client.ConnectionImplementation:.
   33 java.lang.Throwable
   32 &amp;gt;---at org.apache.hadoop.hbase.client.ConnectionImplementation.&amp;lt;init&amp;gt;(ConnectionImplementation.java:217)
   31 &amp;gt;---at org.apache.hadoop.hbase.client.ConnectionUtils$1.&amp;lt;init&amp;gt;(ConnectionUtils.java:128)
   30 &amp;gt;---at org.apache.hadoop.hbase.client.ConnectionUtils.createShortCircuitConnection(ConnectionUtils.java:128)
   29 &amp;gt;---at org.apache.hadoop.hbase.regionserver.HRegionServer.createClusterConnection(HRegionServer.java:686)
   28 &amp;gt;---at org.apache.hadoop.hbase.regionserver.HRegionServer.setupClusterConnection(HRegionServer.java:717)
   27 &amp;gt;---at org.apache.hadoop.hbase.regionserver.HRegionServer.preRegistrationInitialization(HRegionServer.java:730)
   26 &amp;gt;---at org.apache.hadoop.hbase.regionserver.HRegionServer.run(HRegionServer.java:885)
   25 &amp;gt;---at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)

   24 2015-09-06 16:07:20,905 INFO  [M:0;10.0.3.80:52454] client.ConnectionImplementation:.
   23 java.lang.Throwable
   22 &amp;gt;---at org.apache.hadoop.hbase.client.ConnectionImplementation.&amp;lt;init&amp;gt;(ConnectionImplementation.java:217)
   21 &amp;gt;---at org.apache.hadoop.hbase.client.ConnectionUtils$1.&amp;lt;init&amp;gt;(ConnectionUtils.java:128)
   20 &amp;gt;---at org.apache.hadoop.hbase.client.ConnectionUtils.createShortCircuitConnection(ConnectionUtils.java:128)
   19 &amp;gt;---at org.apache.hadoop.hbase.regionserver.HRegionServer.createClusterConnection(HRegionServer.java:686)
   18 &amp;gt;---at org.apache.hadoop.hbase.regionserver.HRegionServer.setupClusterConnection(HRegionServer.java:717)
   17 &amp;gt;---at org.apache.hadoop.hbase.regionserver.HRegionServer.preRegistrationInitialization(HRegionServer.java:730)
   16 &amp;gt;---at org.apache.hadoop.hbase.regionserver.HRegionServer.run(HRegionServer.java:885)
   15 &amp;gt;---at org.apache.hadoop.hbase.master.HMasterCommandLine$LocalHMaster.run(HMasterCommandLine.java:311)
   14 &amp;gt;---at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)


    0 java.lang.Throwable
    1 &amp;gt;---at org.apache.hadoop.hbase.client.ConnectionImplementation.&amp;lt;init&amp;gt;(ConnectionImplementation.java:217)
    2 &amp;gt;---at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    3 &amp;gt;---at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
    4 &amp;gt;---at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    5 &amp;gt;---at java.lang.reflect.Constructor.newInstance(Constructor.java:422)
    6 &amp;gt;---at org.apache.hadoop.hbase.client.ConnectionFactory.createConnection(ConnectionFactory.java:231)
    7 &amp;gt;---at org.apache.hadoop.hbase.client.ConnectionFactory.createConnection(ConnectionFactory.java:118)
    8 &amp;gt;---at org.apache.hadoop.hbase.replication.regionserver.ReplicationSink.&amp;lt;init&amp;gt;(ReplicationSink.java:91)
    9 &amp;gt;---at org.apache.hadoop.hbase.replication.regionserver.Replication.startReplicationService(Replication.java:213)
   10 &amp;gt;---at org.apache.hadoop.hbase.regionserver.HRegionServer.startServiceThreads(HRegionServer.java:1730)
   11 &amp;gt;---at org.apache.hadoop.hbase.regionserver.HRegionServer.handleReportForDutyResponse(HRegionServer.java:1374)
   12 &amp;gt;---at org.apache.hadoop.hbase.regionserver.HRegionServer.run(HRegionServer.java:908)
   13 &amp;gt;---at org.apache.hadoop.hbase.master.HMasterCommandLine$LocalHMaster.run(HMasterCommandLine.java:311)
   14 &amp;gt;---at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)


 24 java.lang.Throwable
   23 &amp;gt;---at org.apache.hadoop.hbase.client.ConnectionImplementation.&amp;lt;init&amp;gt;(ConnectionImplementation.java:217)
   22 &amp;gt;---at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
   21 &amp;gt;---at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
   20 &amp;gt;---at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
   19 &amp;gt;---at java.lang.reflect.Constructor.newInstance(Constructor.java:422)
   18 &amp;gt;---at org.apache.hadoop.hbase.client.ConnectionFactory.createConnection(ConnectionFactory.java:231)
   17 &amp;gt;---at org.apache.hadoop.hbase.client.ConnectionFactory.createConnection(ConnectionFactory.java:118)
   16 &amp;gt;---at org.apache.hadoop.hbase.replication.regionserver.ReplicationSink.&amp;lt;init&amp;gt;(ReplicationSink.java:91)
   15 &amp;gt;---at org.apache.hadoop.hbase.replication.regionserver.Replication.startReplicationService(Replication.java:213)
   14 &amp;gt;---at org.apache.hadoop.hbase.regionserver.HRegionServer.startServiceThreads(HRegionServer.java:1730)
   13 &amp;gt;---at org.apache.hadoop.hbase.regionserver.HRegionServer.handleReportForDutyResponse(HRegionServer.java:1374)
   12 &amp;gt;---at org.apache.hadoop.hbase.regionserver.HRegionServer.run(HRegionServer.java:908)
   11 &amp;gt;---at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It seems  Replication create two instance,  RS create two instance,  and hmaster create one. &lt;/p&gt;

&lt;p&gt;Hopes it will be helpful.&lt;/p&gt;</comment>
                            <comment id="14732307" author="chenheng" created="Sun, 6 Sep 2015 08:47:42 +0000"  >&lt;p&gt;In standalone mode,  there are two RS,   So we can see there are two &lt;tt&gt;ConnectionImplementation&lt;/tt&gt; created by &lt;tt&gt;org.apache.hadoop.hbase.replication.regionserver.ReplicationSink.&amp;lt;init&amp;gt;(ReplicationSink.java:91)&lt;/tt&gt; and &lt;br/&gt;
&lt;tt&gt;org.apache.hadoop.hbase.regionserver.HRegionServer.createClusterConnection(HRegionServer.java:686)&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="14736202" author="stack" created="Wed, 9 Sep 2015 05:21:11 +0000"  >&lt;p&gt;Nice &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chenheng&quot; class=&quot;user-hover&quot; rel=&quot;chenheng&quot;&gt;Heng Chen&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Standalone mode should have one RS only I&apos;d say, not two.&lt;/p&gt;

&lt;p&gt;That Replication puts up a connection to nowhere (because in standalone, there is no configured sink... Would be good if Replication didn&apos;t put up a Connection till it had something to Connect to.&lt;/p&gt;</comment>
                            <comment id="14736378" author="chenheng" created="Wed, 9 Sep 2015 07:42:43 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Would be good if Replication didn&apos;t put up a Connection till it had something to Connect to.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Upload patch as this suggestion.  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14736618" author="ashish singhi" created="Wed, 9 Sep 2015 10:21:49 +0000"  >&lt;p&gt;+1(non-binding)&lt;/p&gt;</comment>
                            <comment id="14737536" author="ndimiduk" created="Wed, 9 Sep 2015 20:33:17 +0000"  >&lt;p&gt;Looks alright to me, +1.&lt;/p&gt;

&lt;p&gt;Let&apos;s see what build bot has to say about it.&lt;/p&gt;</comment>
                            <comment id="14737559" author="ndimiduk" created="Wed, 9 Sep 2015 20:48:31 +0000"  >&lt;p&gt;Attaching 0.98 patch for reference. Simple enough back port.&lt;/p&gt;</comment>
                            <comment id="14737922" author="hadoopqa" created="Thu, 10 Sep 2015 01:02:33 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12754996/HBASE-14361-0.98.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12754996/HBASE-14361-0.98.patch&lt;/a&gt;&lt;br/&gt;
  against 0.98 branch at commit a11bb2a933ad799546e7179fdf6ce75e3e22d44b.&lt;br/&gt;
  ATTACHMENT ID: 12754996&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 22 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15512//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15512//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15512//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15512//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15512//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15512//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Javadoc warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15512//artifact/patchprocess/patchJavadocWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15512//artifact/patchprocess/patchJavadocWarnings.txt&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15512//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15512//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14739048" author="stack" created="Thu, 10 Sep 2015 16:23:01 +0000"  >&lt;p&gt;Pushed to 0.98+ Should mean less resources spun up for tests too.&lt;/p&gt;

&lt;p&gt;Thanks for the patch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chenheng&quot; class=&quot;user-hover&quot; rel=&quot;chenheng&quot;&gt;Heng Chen&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Did you say that we start up two regionservers when we do standalone mode?  Are there other Connections we can get rid of?  Can do in a sub issue of this one.&lt;/p&gt;</comment>
                            <comment id="14739169" author="hudson" created="Thu, 10 Sep 2015 17:16:01 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.2-IT #135 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2-IT/135/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2-IT/135/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14361&quot; title=&quot;ReplicationSink should create Connection instances lazily&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14361&quot;&gt;&lt;del&gt;HBASE-14361&lt;/del&gt;&lt;/a&gt; Investigate unused connection objects (stack: rev 17a59cb7eb68cd62f5944360b7acfb3233314ca0)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14739236" author="hudson" created="Thu, 10 Sep 2015 18:00:50 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.3-IT #142 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3-IT/142/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3-IT/142/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14361&quot; title=&quot;ReplicationSink should create Connection instances lazily&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14361&quot;&gt;&lt;del&gt;HBASE-14361&lt;/del&gt;&lt;/a&gt; Investigate unused connection objects (stack: rev 6c16d244bbe26716c1b5af9877a74e63ef16a0cc)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14739255" author="hudson" created="Thu, 10 Sep 2015 18:09:52 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.0 #1043 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/1043/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.0/1043/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14361&quot; title=&quot;ReplicationSink should create Connection instances lazily&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14361&quot;&gt;&lt;del&gt;HBASE-14361&lt;/del&gt;&lt;/a&gt; Investigate unused connection objects (stack: rev 73bdaf0783b7ab007d4135446b1717028b73f852)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14739267" author="hudson" created="Thu, 10 Sep 2015 18:16:19 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98 #1114 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/1114/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/1114/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14361&quot; title=&quot;ReplicationSink should create Connection instances lazily&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14361&quot;&gt;&lt;del&gt;HBASE-14361&lt;/del&gt;&lt;/a&gt; ReplicationSink should create Connection instances lazily (stack: rev d2c6979c4e31e4b5b5b83d7c378bf26bf937abd9)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14739287" author="hudson" created="Thu, 10 Sep 2015 18:23:14 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.1 #654 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.1/654/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.1/654/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14361&quot; title=&quot;ReplicationSink should create Connection instances lazily&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14361&quot;&gt;&lt;del&gt;HBASE-14361&lt;/del&gt;&lt;/a&gt; Investigate unused connection objects (stack: rev 57744203b4a91525162d97331f23d78250aca2d2)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14739326" author="ndimiduk" created="Thu, 10 Sep 2015 18:37:55 +0000"  >&lt;blockquote&gt;&lt;p&gt;Can do in a sub issue of this one.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This ticket became a specific fix, so I renamed it thusly. Let&apos;s definitely open more for further improvements.&lt;/p&gt;</comment>
                            <comment id="14739398" author="hudson" created="Thu, 10 Sep 2015 19:13:43 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.3 #159 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3/159/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3/159/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14361&quot; title=&quot;ReplicationSink should create Connection instances lazily&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14361&quot;&gt;&lt;del&gt;HBASE-14361&lt;/del&gt;&lt;/a&gt; Investigate unused connection objects (stack: rev 6c16d244bbe26716c1b5af9877a74e63ef16a0cc)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14739433" author="hudson" created="Thu, 10 Sep 2015 19:33:30 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98-on-Hadoop-1.1 #1067 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/1067/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/1067/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14361&quot; title=&quot;ReplicationSink should create Connection instances lazily&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14361&quot;&gt;&lt;del&gt;HBASE-14361&lt;/del&gt;&lt;/a&gt; ReplicationSink should create Connection instances lazily (stack: rev d2c6979c4e31e4b5b5b83d7c378bf26bf937abd9)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14739527" author="hudson" created="Thu, 10 Sep 2015 20:23:28 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.2 #160 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2/160/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2/160/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14361&quot; title=&quot;ReplicationSink should create Connection instances lazily&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14361&quot;&gt;&lt;del&gt;HBASE-14361&lt;/del&gt;&lt;/a&gt; Investigate unused connection objects (stack: rev 17a59cb7eb68cd62f5944360b7acfb3233314ca0)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14739590" author="lhofhansl" created="Thu, 10 Sep 2015 21:09:24 +0000"  >&lt;p&gt;Are there threading issues? Can two thread come into the sink and cause the shared connection to be created? In that case there could be a race and we (a) operate on a partially constructed object or (b) create two instances.&lt;/p&gt;</comment>
                            <comment id="14739601" author="stack" created="Thu, 10 Sep 2015 21:13:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt; Good point. Yes. In batch, for sure. Let me revert until fixed. Thanks.&lt;/p&gt;</comment>
                            <comment id="14739616" author="stack" created="Thu, 10 Sep 2015 21:18:39 +0000"  >&lt;p&gt;Reverted from all FIVE branches. Thanks for intercession &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14739720" author="hudson" created="Thu, 10 Sep 2015 22:16:27 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #6793 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/6793/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/6793/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14361&quot; title=&quot;ReplicationSink should create Connection instances lazily&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14361&quot;&gt;&lt;del&gt;HBASE-14361&lt;/del&gt;&lt;/a&gt; Investigate unused connection objects (stack: rev eb8a8c4fd9f431e86008f374f7f40f9a70c1657d)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14739890" author="hudson" created="Fri, 11 Sep 2015 00:06:26 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.0 #1044 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/1044/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.0/1044/&lt;/a&gt;)&lt;br/&gt;
Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14361&quot; title=&quot;ReplicationSink should create Connection instances lazily&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14361&quot;&gt;&lt;del&gt;HBASE-14361&lt;/del&gt;&lt;/a&gt; Investigate unused connection objects&quot; (stack: rev 1ac591ff752cda202c904f5e0fa971e69420070e)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14739921" author="hudson" created="Fri, 11 Sep 2015 00:33:48 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.1 #655 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.1/655/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.1/655/&lt;/a&gt;)&lt;br/&gt;
Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14361&quot; title=&quot;ReplicationSink should create Connection instances lazily&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14361&quot;&gt;&lt;del&gt;HBASE-14361&lt;/del&gt;&lt;/a&gt; Investigate unused connection objects&quot; (stack: rev d1b808d9143f47f3644c1e87e7b225fe6097c52d)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14739944" author="hudson" created="Fri, 11 Sep 2015 00:54:07 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #6794 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/6794/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/6794/&lt;/a&gt;)&lt;br/&gt;
Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14361&quot; title=&quot;ReplicationSink should create Connection instances lazily&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14361&quot;&gt;&lt;del&gt;HBASE-14361&lt;/del&gt;&lt;/a&gt; Investigate unused connection objects&quot; (stack: rev bf26088d7be4386864148516b151dfb0a858c416)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14739977" author="hudson" created="Fri, 11 Sep 2015 01:20:47 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.3 #160 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3/160/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3/160/&lt;/a&gt;)&lt;br/&gt;
Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14361&quot; title=&quot;ReplicationSink should create Connection instances lazily&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14361&quot;&gt;&lt;del&gt;HBASE-14361&lt;/del&gt;&lt;/a&gt; Investigate unused connection objects&quot; (stack: rev 66ed392412f5f55958b478433f3d431b9aa36907)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14739993" author="hudson" created="Fri, 11 Sep 2015 01:36:20 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.2 #161 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2/161/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2/161/&lt;/a&gt;)&lt;br/&gt;
Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14361&quot; title=&quot;ReplicationSink should create Connection instances lazily&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14361&quot;&gt;&lt;del&gt;HBASE-14361&lt;/del&gt;&lt;/a&gt; Investigate unused connection objects&quot; (stack: rev 3b93132644d129dbebc16709af64a61c7133492a)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14740030" author="chenheng" created="Fri, 11 Sep 2015 02:18:58 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Are there threading issues? Can two thread come into the sink and cause the shared connection to be created? In that case there could be a race and we (a) operate on a partially constructed object or (b) create two instances.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Thanks for your advice!  I update patch as your suggestion. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14740040" author="hudson" created="Fri, 11 Sep 2015 02:35:21 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.98 #1115 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/1115/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/1115/&lt;/a&gt;)&lt;br/&gt;
Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14361&quot; title=&quot;ReplicationSink should create Connection instances lazily&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14361&quot;&gt;&lt;del&gt;HBASE-14361&lt;/del&gt;&lt;/a&gt; ReplicationSink should create Connection instances lazily&quot; (stack: rev be102f587b9c24be5cfaeaec0a9b973ee10f3b83)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14740073" author="hudson" created="Fri, 11 Sep 2015 03:05:56 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.2-IT #136 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2-IT/136/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2-IT/136/&lt;/a&gt;)&lt;br/&gt;
Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14361&quot; title=&quot;ReplicationSink should create Connection instances lazily&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14361&quot;&gt;&lt;del&gt;HBASE-14361&lt;/del&gt;&lt;/a&gt; Investigate unused connection objects&quot; (stack: rev 3b93132644d129dbebc16709af64a61c7133492a)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14740074" author="hudson" created="Fri, 11 Sep 2015 03:06:10 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98-on-Hadoop-1.1 #1068 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/1068/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/1068/&lt;/a&gt;)&lt;br/&gt;
Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14361&quot; title=&quot;ReplicationSink should create Connection instances lazily&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14361&quot;&gt;&lt;del&gt;HBASE-14361&lt;/del&gt;&lt;/a&gt; ReplicationSink should create Connection instances lazily&quot; (stack: rev be102f587b9c24be5cfaeaec0a9b973ee10f3b83)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14740096" author="hudson" created="Fri, 11 Sep 2015 03:22:45 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.3-IT #143 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3-IT/143/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3-IT/143/&lt;/a&gt;)&lt;br/&gt;
Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14361&quot; title=&quot;ReplicationSink should create Connection instances lazily&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14361&quot;&gt;&lt;del&gt;HBASE-14361&lt;/del&gt;&lt;/a&gt; Investigate unused connection objects&quot; (stack: rev 66ed392412f5f55958b478433f3d431b9aa36907)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14740293" author="hadoopqa" created="Fri, 11 Sep 2015 06:41:50 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12755303/HBASE-14361_v1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12755303/HBASE-14361_v1.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit ae3176b9c0f63644deffc82dc424d219c1472818.&lt;br/&gt;
  ATTACHMENT ID: 12755303&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15551//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15551//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15551//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15551//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15551//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15551//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15551//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15551//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14740326" author="chenheng" created="Fri, 11 Sep 2015 07:20:06 +0000"  >&lt;p&gt;QA console shows testcase was killed......&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Running org.apache.hadoop.hbase.mob.TestDefaultMobStoreFlusher&lt;br/&gt;
Killed&lt;br/&gt;
Killed&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="14741094" author="stack" created="Fri, 11 Sep 2015 16:35:58 +0000"  >&lt;p&gt;Do you want to take lock and set to null here:&lt;/p&gt;

&lt;p&gt;216	      if (this.sharedHtableCon != null) &lt;/p&gt;
{
217	        this.sharedHtableCon.close();
218	      }</comment>
                            <comment id="14741734" author="chenheng" created="Fri, 11 Sep 2015 23:37:01 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Do you want to take lock and set to null here:&lt;br/&gt;
216	if (this.sharedHtableCon != null)&lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: { 217	this.sharedHtableCon.close(); 218	}&lt;/span&gt; &lt;/div&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, we can set &lt;tt&gt;sharedHtableCon&lt;/tt&gt; to be &lt;tt&gt;null&lt;/tt&gt; after close.&lt;/p&gt;

&lt;p&gt;But i don&apos;t think there is any need to lock here, because &lt;tt&gt;stopReplicationSinkServices&lt;/tt&gt; is only called when RS is stopped, &lt;br/&gt;
And old code has no lock here too.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14742010" author="hadoopqa" created="Sat, 12 Sep 2015 10:54:42 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12755549/HBASE-14361_v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12755549/HBASE-14361_v2.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 36675c81fb2803418191e44c7eb9560a92a23411.&lt;br/&gt;
  ATTACHMENT ID: 12755549&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15572//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15572//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15572//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15572//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15572//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15572//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15572//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15572//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14744043" author="stack" created="Mon, 14 Sep 2015 19:01:20 +0000"  >&lt;p&gt;Does the double-checked locking as per prescription with volatile and local variable.. added links. Did same for the close too for completness sake.&lt;/p&gt;</comment>
                            <comment id="14744354" author="ndimiduk" created="Mon, 14 Sep 2015 21:55:09 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14744440" author="hadoopqa" created="Mon, 14 Sep 2015 22:57:14 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12755794/14361.v3.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12755794/14361.v3.txt&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 63a2fb5143ab41d84b6b44001b63806534b26bdd.&lt;br/&gt;
  ATTACHMENT ID: 12755794&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 1835 checkstyle errors (more than the master&apos;s current 1834 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 2 zombie test(s): 	at org.apache.hadoop.hbase.TestClassFinder.testClassFinderFiltersByClassInJar(TestClassFinder.java:165)&lt;br/&gt;
	at org.apache.hadoop.hbase.replication.TestReplicationSyncUpTool.testSyncUpTool(TestReplicationSyncUpTool.java:148)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15583//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15583//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15583//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15583//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15583//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15583//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15583//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15583//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14744655" author="stack" created="Tue, 15 Sep 2015 01:33:03 +0000"  >&lt;p&gt;Tried the zombies locally but no relation to this patch and they pass for me.&lt;/p&gt;</comment>
                            <comment id="14744719" author="hadoopqa" created="Tue, 15 Sep 2015 02:37:41 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12755885/14361.v3.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12755885/14361.v3.txt&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 2c150fbbcb1682d77381956212f9e11ffaea9fa1.&lt;br/&gt;
  ATTACHMENT ID: 12755885&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to cause Findbugs (version 2.0.3) to fail.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 site&lt;/font&gt;.  The patch appears to cause mvn post-site goal to fail.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15594//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15594//testReport/&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15594//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15594//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15594//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15594//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14744722" author="stack" created="Tue, 15 Sep 2015 02:41:26 +0000"  >&lt;p&gt;Now H4 has forgotten where mvn is.&lt;/p&gt;</comment>
                            <comment id="14744743" author="eclark" created="Tue, 15 Sep 2015 03:00:56 +0000"  >&lt;p&gt;Jenkins has lost it&apos;s mind&lt;/p&gt;</comment>
                            <comment id="14744745" author="stack" created="Tue, 15 Sep 2015 03:02:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt; Smile. Yeah.&lt;/p&gt;</comment>
                            <comment id="14744767" author="chenheng" created="Tue, 15 Sep 2015 03:27:59 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Does the double-checked locking as per prescription with volatile and local variable.. added links. Did same for the close too for completness sake.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; for your review. I learned a lot from your patch!&lt;/p&gt;</comment>
                            <comment id="14744799" author="hadoopqa" created="Tue, 15 Sep 2015 04:23:18 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12755893/14361.v3.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12755893/14361.v3.txt&lt;/a&gt;&lt;br/&gt;
  against master branch at commit bf46fc55426d1e0dc0f775f7f0a9bacaec97149f.&lt;br/&gt;
  ATTACHMENT ID: 12755893&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to cause Findbugs (version 2.0.3) to fail.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 site&lt;/font&gt;.  The patch appears to cause mvn post-site goal to fail.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15595//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15595//testReport/&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15595//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15595//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15595//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15595//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14744804" author="stack" created="Tue, 15 Sep 2015 04:32:19 +0000"  >&lt;p&gt;H4 can&apos;t find mvn. Retry but logging where build  machine thinks mvn is so can file issue to INFRA&lt;/p&gt;</comment>
                            <comment id="14745090" author="hadoopqa" created="Tue, 15 Sep 2015 09:03:39 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12755902/14361.v3.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12755902/14361.v3.txt&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 72b4c906b806236cd5fcf5a69f12628d00941df9.&lt;br/&gt;
  ATTACHMENT ID: 12755902&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 1835 checkstyle errors (more than the master&apos;s current 1834 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.master.procedure.TestWALProcedureStoreOnHDFS&lt;br/&gt;
                  org.apache.hadoop.hbase.TestStochasticBalancerJmxMetrics&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15596//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15596//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15596//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15596//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15596//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15596//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15596//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15596//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14745324" author="stack" created="Tue, 15 Sep 2015 12:14:59 +0000"  >&lt;p&gt;The jmxmetrics is another instance of our registering the mbean with the wrong service:&lt;/p&gt;

&lt;p&gt;Class Name: Master,sub=Balancer&lt;br/&gt;
Object Name: Hadoop:service=DataNode,name=Master,sub=Balancer&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14423&quot; title=&quot;TestStochasticBalancerJmxMetrics.testJmxMetrics_PerTableMode:183 NullPointer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14423&quot;&gt;&lt;del&gt;HBASE-14423&lt;/del&gt;&lt;/a&gt; for more.&lt;/p&gt;

&lt;p&gt;The org.apache.hadoop.hbase.master.procedure.TestWALProcedureStoreOnHDFS fail is to be fixed over in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14362&quot; title=&quot;org.apache.hadoop.hbase.master.procedure.TestWALProcedureStoreOnHDFS is super duper flaky&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14362&quot;&gt;&lt;del&gt;HBASE-14362&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Looking at hanging tests I also see Failing test : org.apache.hadoop.hbase.client.TestSnapshotCloneIndependence Ain&apos;t sure what that one is about.&lt;/p&gt;

&lt;p&gt;Going to commit.&lt;/p&gt;</comment>
                            <comment id="14745332" author="stack" created="Tue, 15 Sep 2015 12:19:22 +0000"  >&lt;p&gt;Pushed to 1.0+ Doesn&apos;t go into 0.98. Pushed because it has it so we use less threads which helps when trying to diagnose failing tests (at a minimum).&lt;/p&gt;

&lt;p&gt;Thanks for the patch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chenheng&quot; class=&quot;user-hover&quot; rel=&quot;chenheng&quot;&gt;Heng Chen&lt;/a&gt; Thanks for review &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14745404" author="hudson" created="Tue, 15 Sep 2015 12:55:51 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.2 #172 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2/172/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2/172/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14361&quot; title=&quot;ReplicationSink should create Connection instances lazily&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14361&quot;&gt;&lt;del&gt;HBASE-14361&lt;/del&gt;&lt;/a&gt; ReplicationSink should create Connection instances lazily (stack: rev 303e49e89a7eeda9c23a939e729927997f97dda9)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14745709" author="hudson" created="Tue, 15 Sep 2015 16:47:46 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.2-IT #146 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2-IT/146/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2-IT/146/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14361&quot; title=&quot;ReplicationSink should create Connection instances lazily&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14361&quot;&gt;&lt;del&gt;HBASE-14361&lt;/del&gt;&lt;/a&gt; ReplicationSink should create Connection instances lazily (stack: rev 303e49e89a7eeda9c23a939e729927997f97dda9)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14745811" author="hudson" created="Tue, 15 Sep 2015 17:46:09 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.3-IT #155 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3-IT/155/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3-IT/155/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14361&quot; title=&quot;ReplicationSink should create Connection instances lazily&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14361&quot;&gt;&lt;del&gt;HBASE-14361&lt;/del&gt;&lt;/a&gt; ReplicationSink should create Connection instances lazily (stack: rev 236f0050881384fcfc6d7c2c1209b80ae225e472)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14745842" author="hudson" created="Tue, 15 Sep 2015 18:05:23 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.0 #1050 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/1050/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.0/1050/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14361&quot; title=&quot;ReplicationSink should create Connection instances lazily&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14361&quot;&gt;&lt;del&gt;HBASE-14361&lt;/del&gt;&lt;/a&gt; ReplicationSink should create Connection instances lazily (stack: rev 7f1806dc3f2f628dfa4473bfcd4283c28383d39b)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14745867" author="hudson" created="Tue, 15 Sep 2015 18:16:46 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.1 #662 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.1/662/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.1/662/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14361&quot; title=&quot;ReplicationSink should create Connection instances lazily&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14361&quot;&gt;&lt;del&gt;HBASE-14361&lt;/del&gt;&lt;/a&gt; ReplicationSink should create Connection instances lazily (stack: rev 7e797d3d47778609dd0f916e4c4f4c11bacc3352)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14745897" author="hudson" created="Tue, 15 Sep 2015 18:36:02 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.3 #174 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3/174/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3/174/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14361&quot; title=&quot;ReplicationSink should create Connection instances lazily&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14361&quot;&gt;&lt;del&gt;HBASE-14361&lt;/del&gt;&lt;/a&gt; ReplicationSink should create Connection instances lazily (stack: rev 236f0050881384fcfc6d7c2c1209b80ae225e472)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14746124" author="hudson" created="Tue, 15 Sep 2015 20:39:13 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #6808 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/6808/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/6808/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14361&quot; title=&quot;ReplicationSink should create Connection instances lazily&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14361&quot;&gt;&lt;del&gt;HBASE-14361&lt;/del&gt;&lt;/a&gt; ReplicationSink should create Connection instances lazily (stack: rev d147f8f8f4c0c4436245ea7ea95661d22306f906)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14900415" author="chenheng" created="Mon, 21 Sep 2015 09:17:28 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Did you say that we start up two regionservers when we do standalone mode? Are there other Connections we can get rid of? Can do in a sub issue of this one.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sorry for being late to see this...  I have created an issue &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14455&quot; title=&quot;Try to get rid of unused HConnection instance &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14455&quot;&gt;&lt;del&gt;HBASE-14455&lt;/del&gt;&lt;/a&gt;  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15119556" author="ndimiduk" created="Wed, 27 Jan 2016 15:28:51 +0000"  >&lt;p&gt;Bulk closing 1.1.3 issues.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12895074">HBASE-14455</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12755902" name="14361.v3.txt" size="2562" author="stack" created="Tue, 15 Sep 2015 04:32:19 +0000"/>
                            <attachment id="12755893" name="14361.v3.txt" size="2562" author="stack" created="Tue, 15 Sep 2015 02:41:26 +0000"/>
                            <attachment id="12755885" name="14361.v3.txt" size="2562" author="stack" created="Tue, 15 Sep 2015 01:33:03 +0000"/>
                            <attachment id="12755794" name="14361.v3.txt" size="2562" author="stack" created="Mon, 14 Sep 2015 19:01:20 +0000"/>
                            <attachment id="12754996" name="HBASE-14361-0.98.patch" size="2295" author="ndimiduk" created="Wed, 9 Sep 2015 20:48:31 +0000"/>
                            <attachment id="12754852" name="HBASE-14361.patch" size="2155" author="chenheng" created="Wed, 9 Sep 2015 07:42:43 +0000"/>
                            <attachment id="12755303" name="HBASE-14361_v1.patch" size="2382" author="chenheng" created="Fri, 11 Sep 2015 02:18:58 +0000"/>
                            <attachment id="12755549" name="HBASE-14361_v2.patch" size="2461" author="chenheng" created="Sat, 12 Sep 2015 07:42:27 +0000"/>
                            <attachment id="12754377" name="hmaster.log" size="122866" author="chenheng" created="Sun, 6 Sep 2015 08:38:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 3 Sep 2015 23:30:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            46 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jrdb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>