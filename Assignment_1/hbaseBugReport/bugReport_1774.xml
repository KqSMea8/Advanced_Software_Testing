<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:56:15 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1774/HBASE-1774.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1774] HTable$ClientScanner modifies its input parameters</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1774</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;HTable$ClientScanner modifies the Scan that is passed to it on construction.&lt;/p&gt;

&lt;p&gt;I would consider this to be bad programming practice because if I wanted to use the same Scan object to scan multiple tables, I would not expect one table scan to effect the other, but it does.&lt;/p&gt;

&lt;p&gt;If input parameters are going to be modified either now or later it should be called out &lt;b&gt;loudly&lt;/b&gt; in the javadoc. The only way I found this behavior was by creating an application that did scan multiple tables using the same Scan object and having &apos;wierd stuff&apos; happen.&lt;/p&gt;

&lt;p&gt;In my opinion, if you want to modify a field in an input parameter, you should:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;make a copy of the original object&lt;/li&gt;
	&lt;li&gt;optionally return a reference to the copy.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;There is no javadoc about this behavior. The only thing I found was a comment in HTable$ClientScanner:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-comment&quot;&gt;// HEADSUP: The scan internal start row can change as we move through table.&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Is there a use case that requires this behavior? If so, I would recommend that ResultScanner  (and the classes that implement it) provide an accessor to the mutable copy of the input Scan and leave the input argument alone.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12433284">HBASE-1774</key>
            <summary>HTable$ClientScanner modifies its input parameters</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="jimk">Jim Kellerman</assignee>
                                    <reporter username="jimk">Jim Kellerman</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Aug 2009 02:38:12 +0000</created>
                <updated>Mon, 8 Apr 2013 20:51:21 +0000</updated>
                            <resolved>Mon, 8 Apr 2013 20:51:21 +0000</resolved>
                                    <version>0.20.0</version>
                                                    <component>Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12968997" author="stack" created="Tue, 7 Dec 2010 21:24:02 +0000"  >&lt;p&gt;Should make a copy of the Scan object passed to HTable and remove the HEADSUP.&lt;/p&gt;</comment>
                            <comment id="13174481" author="lhofhansl" created="Wed, 21 Dec 2011 23:17:12 +0000"  >&lt;p&gt;Unfortunately making a copy is no longer possible in trunk because of ScanMetrics, which are collected on the Scan object itself. If we make a copy the copy will have its metrics populated. Hrrmmmfff.&lt;/p&gt;

&lt;p&gt;Could keep a reference to copied copied, but then the application may have to walk a chain of these references. I think we should just document this at this point. I&apos;m in this code right now anyway (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4439&quot; title=&quot;Move ClientScanner out of HTable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4439&quot;&gt;&lt;del&gt;HBASE-4439&lt;/del&gt;&lt;/a&gt;)... I&apos;ll add JavaDoc for this.&lt;/p&gt;</comment>
                            <comment id="13625147" author="anoop.hbase" created="Mon, 8 Apr 2013 05:11:28 +0000"  >&lt;p&gt;So now we can this note in the javadoc for HTableInterface#getScanner(Scan scan)&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
* Note that the passed {@link Scan}&apos;s start row and caching properties
* maybe changed.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt; we can close this issue as WontFix?&lt;/p&gt;</comment>
                            <comment id="13625794" author="lhofhansl" created="Mon, 8 Apr 2013 20:51:21 +0000"  >&lt;p&gt;The Javadoc should suffice&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 7 Dec 2010 21:24:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25970</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 36 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02bdz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11446</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>noob</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>