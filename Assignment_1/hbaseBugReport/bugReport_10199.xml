<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:11:26 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-10199/HBASE-10199.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-10199] Improve rolling restart latency</title>
                <link>https://issues.apache.org/jira/browse/HBASE-10199</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10049&quot; title=&quot;Small improvments in region_mover.rb&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10049&quot;&gt;&lt;del&gt;HBASE-10049&lt;/del&gt;&lt;/a&gt; introduced a 20 seconds delay in the region_mover script to make sure server is online before starting the transfer. On big cluster, this can add more than 1 hour to the total time. We need to find a way to make 100% sure the server is online without having to wait for those 20 seconds.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12685426">HBASE-10199</key>
            <summary>Improve rolling restart latency</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="jmspaggi">Jean-Marc Spaggiari</assignee>
                                    <reporter username="jmspaggi">Jean-Marc Spaggiari</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 Dec 2013 18:20:21 +0000</created>
                <updated>Thu, 19 Dec 2013 02:40:47 +0000</updated>
                                            <version>0.94.14</version>
                    <version>0.98.1</version>
                    <version>0.99.0</version>
                    <version>0.96.1.1</version>
                                                    <component>scripts</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13852518" author="jmspaggi" created="Thu, 19 Dec 2013 02:40:47 +0000"  >&lt;p&gt;Valuable comments from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=liushaohui&quot; class=&quot;user-hover&quot; rel=&quot;liushaohui&quot;&gt;Liu Shaohui&lt;/a&gt; from &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10049&quot; title=&quot;Small improvments in region_mover.rb&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10049&quot;&gt;&lt;del&gt;HBASE-10049&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;

&lt;p&gt;    What is the reason behind the 20 seconds delay?&lt;/p&gt;

&lt;p&gt;There is a time gap between RS&apos;s startup report to HMaster and it&apos;s starting of service threads. And we found some exceptions in moving regions for RS have not finished to start it&apos;s service threads. So we add 20 seconds delay to make sure the RS have enough time to finish initialization.&lt;br/&gt;
But the 20 may be not reasonable, especially for large clusters.&lt;/p&gt;

&lt;p&gt;Ps: For large clusters, we plan to dev a region_mover which can unload/load multi regionservers at the same time&lt;/p&gt;

&lt;p&gt;    Adding a log in the move method make the application VERY verbose, doubling the output. Is that really useful? &lt;/p&gt;

&lt;p&gt;Yes. I think it&apos;s very useful to measure the maximum unavailable time for each region using region_mover.rb.&lt;br/&gt;
And many other factors and configs will affect this time, eg: hbase.hstore.open.and.close.threads.max.&lt;br/&gt;
According to this time. we can do more optimizations to reduce the unavailable time in gracefull upgrade.&lt;/p&gt;

&lt;p&gt;I don&apos;t know if the explanation is clear. More discussions are welcomed. Thanks.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m waiting for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8803&quot; title=&quot;region_mover.rb should move multiple regions at a time&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8803&quot;&gt;&lt;del&gt;HBASE-8803&lt;/del&gt;&lt;/a&gt; to be commited and will address all of there in this JIRA. Will make sure that we keep the idea of all  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=liushaohui&quot; class=&quot;user-hover&quot; rel=&quot;liushaohui&quot;&gt;Liu Shaohui&lt;/a&gt;  modifications.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364503</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1qttj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364803</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>