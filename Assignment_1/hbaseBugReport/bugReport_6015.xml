<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:33:02 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6015/HBASE-6015.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6015] HBCK rerun should check all the regions which it checked in the first run</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6015</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;When after the 1st round of run and possible fixes, HBCK does a rerun to check the consistency of the regions. At this rerun&lt;br/&gt;
1.It should check all the regions which it checked in the 1st round. &lt;br/&gt;
2.It should check only those regions which it checked in the 1st round. Might be some other regions can come out of the timelag check at rerun time.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12555961">HBASE-6015</key>
            <summary>HBCK rerun should check all the regions which it checked in the first run</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="anoopsamjohn">Anoop Sam John</reporter>
                        <labels>
                    </labels>
                <created>Wed, 16 May 2012 06:16:53 +0000</created>
                <updated>Sat, 10 Jan 2015 02:50:12 +0000</updated>
                            <resolved>Sat, 10 Jan 2015 02:50:11 +0000</resolved>
                                                                    <component>hbck</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13277611" author="jmhsieh" created="Thu, 17 May 2012 06:30:07 +0000"  >&lt;p&gt;Anoop &amp;#8211; I&apos;m not sure I understand.  Is the idea that it &lt;b&gt;only&lt;/b&gt; checks problem regions from a previous round?  Current behavior reloads all regions on the follow up rounds. &lt;/p&gt;</comment>
                            <comment id="13277622" author="anoopsamjohn" created="Thu, 17 May 2012 06:55:55 +0000"  >&lt;p&gt;My doubt was like below&lt;br/&gt;
One region found to be problematic and it is fixed. In the rerun we should recheck this region right. Now the timelag factor can apply and can remove this region from checking in the rerun &lt;span class=&quot;error&quot;&gt;&amp;#91;If this region fix has changed the modtime of the HRegionInfo&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Also at the 1st run some of the regions might have been excluded because those are changed recently &lt;span class=&quot;error&quot;&gt;&amp;#91;As per the timelag value&amp;#93;&lt;/span&gt;  In the rerun do we need to check those regions? What if those at this time check happens and reports some issues?  Will it look like for the use that the HBCK was not able to fix the issues which it reported in the 1st run?&lt;/p&gt;

&lt;p&gt;These are my thought after seeing the timelag concept... Pls correct me if my understanding is wrong  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13544613" author="anoopsamjohn" created="Sat, 5 Jan 2013 07:04:30 +0000"  >&lt;p&gt;@Jon  - You got what I mean? If it make sense I can put a patch.&lt;/p&gt;</comment>
                            <comment id="13544635" author="jmhsieh" created="Sat, 5 Jan 2013 08:55:40 +0000"  >&lt;p&gt;thanks for pinging me on this &amp;#8211; sorry I didn&apos;t respond a while back.&lt;/p&gt;

&lt;p&gt;I think these are what you are concerned about:  (am I right?)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;if we fix a region, we actually fail to verify that it was fixed properly because it gets ignored on the follow-up check run?&lt;/li&gt;
	&lt;li&gt;if there were some excluded regions in the initial run, they might show up as new problems in the secondary check run?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;If so, what is the fix you are proposing?&lt;/p&gt;</comment>
                            <comment id="13545619" author="anoopsamjohn" created="Mon, 7 Jan 2013 04:07:52 +0000"  >&lt;p&gt;@Jon&lt;br/&gt;
 Yep now you got what is in my mind &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
During the 1st run can we store region ids selected? Second run we mark as rerun and check only region id against this list. I forgot what I have done coding change for this in the patch. I will see the patch and tell more details and will try submitting that so that you can have a look. Patch at my home laptop so can check tonight.&lt;br/&gt;
Thanks Jon for taking a look..&lt;/p&gt;</comment>
                            <comment id="13546116" author="jmhsieh" created="Mon, 7 Jan 2013 18:16:46 +0000"  >&lt;p&gt;sounds good.&lt;/p&gt;</comment>
                            <comment id="13547002" author="anoopsamjohn" created="Tue, 8 Jan 2013 16:52:15 +0000"  >&lt;p&gt;Simple patch for 94 branch&lt;/p&gt;</comment>
                            <comment id="13547009" author="anoopsamjohn" created="Tue, 8 Jan 2013 16:56:26 +0000"  >&lt;p&gt;Another place where the timelag is checked is Getting the table names and checking whether to be skipped.&lt;br/&gt;
One doubt I got after going through the code is &lt;br/&gt;
we just consider the Meta modTime of the 1st region to tell table is ignored.&lt;br/&gt;
Actually in the consistency check regions are skipped not entire table.&lt;br/&gt;
Also there it consider the HDFS modtime.&lt;/p&gt;

&lt;p&gt;That area is left as it is as of now. Any way that is being used just to display the details. No functional issues as such&lt;/p&gt;</comment>
                            <comment id="13554033" author="anoopsamjohn" created="Tue, 15 Jan 2013 17:31:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jmhsieh&quot; class=&quot;user-hover&quot; rel=&quot;jmhsieh&quot;&gt;Jonathan Hsieh&lt;/a&gt;&lt;br/&gt;
Is this patch looks good? After your review I can prepare patch for trunk as well.&lt;/p&gt;</comment>
                            <comment id="13554050" author="jmhsieh" created="Tue, 15 Jan 2013 17:50:35 +0000"  >&lt;p&gt;is it possible to add a test?&lt;/p&gt;

&lt;p&gt;maybe print out the list of skipped regions in the rerun?&lt;/p&gt;</comment>
                            <comment id="13554051" author="jmhsieh" created="Tue, 15 Jan 2013 17:50:58 +0000"  >&lt;p&gt;(what does the output look like when this is triggered?)&lt;/p&gt;</comment>
                            <comment id="13554945" author="anoopsamjohn" created="Wed, 16 Jan 2013 11:16:31 +0000"  >&lt;blockquote&gt;&lt;p&gt;is it possible to add a test?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Ok. I will try adding a test&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;maybe print out the list of skipped regions in the rerun?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Do we really need to print this? In the 1st run are we priniting the list of skipper regions in that run? IMHO we need to print there only. In the rerun it is by default we need to run only those regions which were run in 1st run and avoid those excluded in the 1st run. The rerun is to check whether the fix is done or not &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  Correct me if I am wrong Jon. You are the master of HBCK and you judge better than me&lt;/p&gt;</comment>
                            <comment id="13556119" author="jmhsieh" created="Thu, 17 Jan 2013 12:29:44 +0000"  >&lt;p&gt;This is partially why I was asking for an example output &amp;#8211; I don&apos;t know if we have enough information in the existing already. &lt;/p&gt;

&lt;p&gt;If writing a test is hard, at least having instructions to duplicate a condition that actives this code (and example outputs) so that I can verify it would be helpful.&lt;/p&gt;</comment>
                            <comment id="13556948" author="anoopsamjohn" created="Fri, 18 Jan 2013 04:07:18 +0000"  >&lt;p&gt;Yes Jon.. I will try to write test case or else the o/p...&lt;br/&gt;
Got a bit busy with some other important work and deadlines &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
I will take some time for this.  Thanks Jon&lt;/p&gt;</comment>
                            <comment id="13589152" author="anoopsamjohn" created="Thu, 28 Feb 2013 03:50:26 +0000"  >&lt;p&gt;Oh sorry &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jmhsieh&quot; class=&quot;user-hover&quot; rel=&quot;jmhsieh&quot;&gt;Jonathan Hsieh&lt;/a&gt;..  I some how missed this from my TODOs.&lt;br/&gt;
I will work on the test this week..&lt;br/&gt;
I think a test case is needed...&lt;/p&gt;</comment>
                            <comment id="14269115" author="clehene" created="Thu, 8 Jan 2015 10:02:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt; did you get a chance to work on this that week? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt; not sure if this is still the case, perhaps this should get a second look if still wanted..&lt;/p&gt;</comment>
                            <comment id="14272261" author="apurtell" created="Sat, 10 Jan 2015 02:12:27 +0000"  >&lt;p&gt;Should we resolve this &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt;? Definitely time to unassign though (smile)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12551088">HBASE-5798</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12563776" name="HBASE-6015_94.patch" size="1972" author="anoopsamjohn" created="Tue, 8 Jan 2013 16:52:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 17 May 2012 06:30:07 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>241730</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 48 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02bpb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11497</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>