<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:01:29 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-2392/HBASE-2392.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-2392] upgrade to ZooKeeper 3.3.0</title>
                <link>https://issues.apache.org/jira/browse/HBASE-2392</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;See &lt;a href=&quot;http://hadoop.apache.org/zookeeper/docs/r3.3.0/releasenotes.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hadoop.apache.org/zookeeper/docs/r3.3.0/releasenotes.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Key features of the 3.3.0 release:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;observers - non-voting members of the ensemble, scale reads  &lt;a href=&quot;http://bit.ly/9wPnpq&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bit.ly/9wPnpq&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;distributed queue recipe implementation (c/java)&lt;/li&gt;
	&lt;li&gt;additional 4letterword/jmx features to support operations&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Changes in contrib:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;zookeeper-tree: export/import znode namespace&lt;/li&gt;
	&lt;li&gt;zooinspector: gui browser for znode namespace&lt;/li&gt;
	&lt;li&gt;bookkeeper client rewrite, use of netty&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This change can&apos;t be done on the 0.20 branch. From the release notes:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Note: a new feature was added to the version 3.3 client which breaks backward compatibility, at the wire protocol level, between version 3.3 clients and prior versions of the server (server versions prior to 3.3).&lt;/p&gt;&lt;/blockquote&gt;</description>
                <environment></environment>
        <key id="12460672">HBASE-2392</key>
            <summary>upgrade to ZooKeeper 3.3.0</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="apurtell">Andrew Purtell</assignee>
                                    <reporter username="apurtell">Andrew Purtell</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Mar 2010 07:21:07 +0000</created>
                <updated>Fri, 20 Nov 2015 12:43:16 +0000</updated>
                            <resolved>Tue, 18 May 2010 08:07:39 +0000</resolved>
                                                    <fixVersion>0.90.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12851295" author="apurtell" created="Tue, 30 Mar 2010 07:22:57 +0000"  >&lt;p&gt;Note someone has to put zk 3.3.0 in a public Maven repo. I installed the jar into my local repo by hand to test.&lt;/p&gt;</comment>
                            <comment id="12851296" author="stack" created="Tue, 30 Mar 2010 07:28:57 +0000"  >&lt;p&gt;Andrew: Is zk 3.3.0 not in a maven repo now?  It was supposed to be published there as part of release.  If not available, lets go terrorize phunt and mahadev.  Also, see &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2380&quot; title=&quot;Update to zookeeper 3.3.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2380&quot;&gt;&lt;del&gt;HBASE-2380&lt;/del&gt;&lt;/a&gt;.  There are some considerations there you should include in this patch?  Why you thinking of not doing this on branch?  Real installs will be pissed off about required upgrade of zk? (Though unsupported, seems like zk 3.2.2 can talk to a 3.3.0).&lt;/p&gt;</comment>
                            <comment id="12851300" author="apurtell" created="Tue, 30 Mar 2010 07:39:58 +0000"  >&lt;p&gt;Sorry, didn&apos;t catch the dupe.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Is zk 3.3.0 not in a maven repo now? &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I updated zookeeper.version to 3.3.0 in the toplevel pom and Maven complained about not being able to find it. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Why you thinking of not doing this on branch? Real installs will be pissed off about required upgrade of zk? &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes. But if we&apos;ve already frustrated rolling restarts, then do people care? Same patch trivially applies to branch.&lt;/p&gt;</comment>
                            <comment id="12851443" author="kaykay.unique" created="Tue, 30 Mar 2010 15:46:16 +0000"  >&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; I updated zookeeper.version to 3.3.0 in the toplevel pom and Maven complained about not being able to find it.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;p&gt;This might have to do with the repository where zk publishes the artifacts, and may be some new repositories need to be added (to pom.xml ).  &lt;/p&gt;</comment>
                            <comment id="12851448" author="streamy" created="Tue, 30 Mar 2010 16:05:01 +0000"  >&lt;p&gt;We already agreed to break compatibility between 0.20.3 and 0.20.4 right?  I vote to apply to branch.&lt;/p&gt;</comment>
                            <comment id="12851449" author="apurtell" created="Tue, 30 Mar 2010 16:10:30 +0000"  >&lt;p&gt;Ok, will commit to both, with config updates as discussed on the other issue. Currently all tests pass except delete tests (broken on both trunk and branch) but those are unrelated failures.&lt;/p&gt;</comment>
                            <comment id="12851532" author="phunt" created="Tue, 30 Mar 2010 19:41:00 +0000"  >&lt;p&gt;This is from the ZK readme for 3.3.0:&lt;/p&gt;

&lt;p&gt;As of version 3.3.0 bin/src/javadoc jars are deployed to the Apache Maven repository.&lt;br/&gt;
  &lt;a href=&quot;http://people.apache.org/repo/m2-ibiblio-rsync-repository/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://people.apache.org/repo/m2-ibiblio-rsync-repository/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Not sure if anyone has tried this yet though, let us know if there are issues. FYI we&apos;re basically following the same approach as&lt;br/&gt;
Avro.&lt;/p&gt;</comment>
                            <comment id="12851595" author="apurtell" created="Tue, 30 Mar 2010 21:12:42 +0000"  >&lt;p&gt;@Patrick:&lt;/p&gt;

&lt;p&gt;I added the m2-ibiblio-rsync-repository to the HBase pom. Maven wants:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Downloading: http://people.apache.org/repo/m2-ibiblio-rsync-repository//org/apache/hadoop/zookeeper/zookeeper/3.3.0/zookeeper-3.3.0.pom
[INFO] Unable to find resource &apos;org.apache.hadoop.zookeeper:zookeeper:pom:3.3.0&apos;  in repository m2-ibiblio-rsync-repository (http://people.apache.org/repo/m2-ibiblio-rsync-repository/)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The actual path in the repo is&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;http://people.apache.org/repo/m2-ibiblio-rsync-repository/org/apache/hadoop/zookeeper/3.3.0/
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12851600" author="kaykay.unique" created="Tue, 30 Mar 2010 21:17:10 +0000"  >&lt;p&gt;The groupId in core/pom.xml needs to be changed to org.apache.hadoop ( as opposed to org.apache.hadoop.zookeeper) &lt;/p&gt;</comment>
                            <comment id="12851601" author="apurtell" created="Tue, 30 Mar 2010 21:19:26 +0000"  >&lt;p&gt;@Kay Kay: Thanks for helping a mvn noob.&lt;/p&gt;</comment>
                            <comment id="12851606" author="kaykay.unique" created="Tue, 30 Mar 2010 21:23:11 +0000"  >&lt;p&gt;welcome.. added a patch with some of the comments ( with diff-s from your earlier patch as well ) changed .  please review. &lt;/p&gt;</comment>
                            <comment id="12851612" author="apurtell" created="Tue, 30 Mar 2010 21:27:54 +0000"  >&lt;p&gt;Applied, mvn issues resolved. &lt;/p&gt;</comment>
                            <comment id="12851639" author="phunt" created="Tue, 30 Mar 2010 22:24:50 +0000"  >&lt;p&gt;Good to hear, thanks for verifying this!&lt;/p&gt;</comment>
                            <comment id="12851646" author="apurtell" created="Tue, 30 Mar 2010 22:45:30 +0000"  >&lt;p&gt;Committed to trunk and 0.20 branch. All tests pass except the currently failing testDeletes() tests, which is an unrelated failure. &lt;/p&gt;

&lt;p&gt;I took out the following from hbase-default.xml:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;hbase.zookeeper.property.tickTime&lt;/li&gt;
	&lt;li&gt;hbase.zookeeper.property.initLimit&lt;/li&gt;
	&lt;li&gt;hbase.zookeeper.property.syncLimit&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Rework or take advantage of new features in 3.3.0 in a new issue.&lt;/p&gt;</comment>
                            <comment id="12854644" author="kannanm" created="Wed, 7 Apr 2010 18:55:12 +0000"  >&lt;p&gt;@Andrew: &lt;/p&gt;

&lt;p&gt;With the above parameters removed from hbase-default.xml, I get the following error during ZK startup:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.IllegalArgumentException: initLimit is not set
at org.apache.zookeeper.server.quorum.QuorumPeerConfig.parseProperties(QuorumPeerConfig.java:246)
at org.apache.hadoop.hbase.zookeeper.HQuorumPeer.main(HQuorumPeer.java:76)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12854646" author="apurtell" created="Wed, 7 Apr 2010 19:02:37 +0000"  >&lt;p&gt;@Kannan: Are you sure there is not an older version of ZK on the classpath. I don&apos;t see such exceptions on test clusters and the ZK related HBase unit tests would fail I&apos;d expect.&lt;/p&gt;



</comment>
                            <comment id="12855226" author="kannanm" created="Fri, 9 Apr 2010 00:32:59 +0000"  >&lt;p&gt;@Andrew: Try with a ZK quorum of more than one server to repro the problem.  phunt/stack confirmed this as well. Will open a separate JIRA.&lt;/p&gt;</comment>
                            <comment id="12855227" author="kannanm" created="Fri, 9 Apr 2010 00:36:43 +0000"  >&lt;p&gt;Filed &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2431&quot; title=&quot;ZK settings for initLimit/syncLimit shouldn&amp;#39;t have been removed from hbase-default.xml&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2431&quot;&gt;&lt;del&gt;HBASE-2431&lt;/del&gt;&lt;/a&gt; for the above issue.&lt;/p&gt;</comment>
                            <comment id="12855654" author="apurtell" created="Sat, 10 Apr 2010 22:09:45 +0000"  >&lt;p&gt;Upgrade to 3.3.1 (&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-737&quot; title=&quot;some 4 letter words may fail with netcat (nc)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-737&quot;&gt;&lt;del&gt;ZOOKEEPER-737&lt;/del&gt;&lt;/a&gt;) if in time for release, otherwise leave 3.3.0 in place. &lt;/p&gt;</comment>
                            <comment id="12857128" author="stack" created="Wed, 14 Apr 2010 22:43:54 +0000"  >&lt;p&gt;Moving to 0.20.5 since not ready yet.&lt;/p&gt;</comment>
                            <comment id="12858531" author="apurtell" created="Mon, 19 Apr 2010 14:48:59 +0000"  >
&lt;p&gt;   [[ Old comment, sent by email on Wed, 14 Apr 2010 23:54:45 +0000 ]]&lt;/p&gt;

&lt;p&gt;I think it&apos;s ok for 0.20.4. 3.3.0 only has an issue with nc. Does any HBase user monitor ZK with nc? I think it unlikely. The four letter stat commands work fine otherwise. &lt;/p&gt;

</comment>
                            <comment id="12866861" author="stack" created="Wed, 12 May 2010 23:52:37 +0000"  >&lt;p&gt;Marking these as fixed against 0.21.0 rather than against 0.20.5.&lt;/p&gt;</comment>
                            <comment id="12868562" author="stack" created="Tue, 18 May 2010 08:07:39 +0000"  >&lt;p&gt;I updated our zk to 3.3.1.  It was just released.  I did it by doing the following:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Index: pom.xml
===================================================================
--- pom.xml     (revision 945529)
+++ pom.xml     (working copy)
@@ -298,7 +298,7 @@
     &amp;lt;jetty.version&amp;gt;6.1.14&amp;lt;/jetty.version&amp;gt;
     &amp;lt;junit.version&amp;gt;4.8.1&amp;lt;/junit.version&amp;gt;
     &amp;lt;log4j.version&amp;gt;1.2.15&amp;lt;/log4j.version&amp;gt;
-    &amp;lt;zookeeper.version&amp;gt;3.3.0&amp;lt;/zookeeper.version&amp;gt;
+    &amp;lt;zookeeper.version&amp;gt;3.3.1&amp;lt;/zookeeper.version&amp;gt;
   &amp;lt;/properties&amp;gt;
 
   &amp;lt;dependencyManagement&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15017478" author="lars_francke" created="Fri, 20 Nov 2015 12:43:16 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12460282">HBASE-2380</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12440281" name="HBASE-2392.patch" size="3761" author="kaykay.unique" created="Tue, 30 Mar 2010 21:21:30 +0000"/>
                            <attachment id="12440189" name="HBASE-2392.patch" size="2512" author="apurtell" created="Tue, 30 Mar 2010 07:21:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 30 Mar 2010 07:28:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32559</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10342"><![CDATA[Incompatible change]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hhk7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>100107</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>This version of HBase uses ZooKeeper 3.3.0. If you are running a separate ZK quorum ensemble, you should upgrade it. See the ZooKeeper release notes for 3.3.0: &lt;a href=&quot;http://hadoop.apache.org/zookeeper/docs/r3.3.0/releasenotes.html&quot;&gt;http://hadoop.apache.org/zookeeper/docs/r3.3.0/releasenotes.html&lt;/a&gt;&lt;br/&gt;
</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>