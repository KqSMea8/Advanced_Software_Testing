<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:55:22 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-14679/HBASE-14679.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-14679] Separate security shell tests from other shell tests</title>
                <link>https://issues.apache.org/jira/browse/HBASE-14679</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;TestShell takes a long time to run, sometimes timing out (especially on branch-1).&lt;/p&gt;

&lt;p&gt;This issue proposes the following changes:&lt;/p&gt;

&lt;p&gt;separate security shell tests into their own test class&lt;br/&gt;
use unique table names for different tests&lt;/p&gt;</description>
                <environment></environment>
        <key id="12907198">HBASE-14679</key>
            <summary>Separate security shell tests from other shell tests</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="yuzhihong@gmail.com">Ted Yu</assignee>
                                    <reporter username="yuzhihong@gmail.com">Ted Yu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 22 Oct 2015 20:18:05 +0000</created>
                <updated>Mon, 2 Nov 2015 05:15:51 +0000</updated>
                            <resolved>Sun, 1 Nov 2015 17:17:34 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="14969825" author="yuzhihong@gmail.com" created="Thu, 22 Oct 2015 20:23:10 +0000"  >&lt;p&gt;Here is result with patch and patch from &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14583&quot; title=&quot;Enabled client-side metrics by default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14583&quot;&gt;HBASE-14583&lt;/a&gt; :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Running org.apache.hadoop.hbase.client.TestReplicationShell
Tests run: 1, Failures: 0, Errors: 0, Skipped: 1, Time elapsed: 0.002 sec - in org.apache.hadoop.hbase.client.TestReplicationShell
Running org.apache.hadoop.hbase.client.TestShell
Running org.apache.hadoop.hbase.client.TestSecurityShell
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 15.182 sec - in org.apache.hadoop.hbase.client.TestSecurityShell
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 364.39 sec - in org.apache.hadoop.hbase.client.TestShell

Results :

Tests run: 3, Failures: 0, Errors: 0, Skipped: 1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Previously TestShell times out on the following platform on branch-1:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Linux cn012.a.com 2.6.32-504.el6.x86_64 #1 SMP Wed Oct 15 04:27:16 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14969833" author="stack" created="Thu, 22 Oct 2015 20:27:09 +0000"  >&lt;p&gt;You know what it runs so long or which test is timing out?&lt;/p&gt;</comment>
                            <comment id="14969851" author="yuzhihong@gmail.com" created="Thu, 22 Oct 2015 20:34:48 +0000"  >&lt;p&gt;I haven&apos;t dug deep enough to pinpoint the exact cause.&lt;/p&gt;

&lt;p&gt;From what I observed, it was related to security shell test:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2015-10-22 09:31:32,755 DEBUG [main] client.ConnectionManager$HConnectionImplementation(1349): locateRegionInMeta parentTable=hbase:meta, metaLocation=, attempt=1 of 6 failed; retrying after sleep of 500 because: Failed after attempts=7, exceptions:
Thu Oct 22 09:31:32 PDT 2015, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, java.net.SocketTimeoutException: callTimeout=60000, callDuration=60756: row &apos;hbase:acl,,99999999999999&apos; on table &apos;hbase:meta&apos; at            region=hbase:meta,,1.1588230740, hostname=cn012.a.com,46788,1445530781461, seqNum=0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14969901" author="stack" created="Thu, 22 Oct 2015 21:17:01 +0000"  >&lt;blockquote&gt;&lt;p&gt;I haven&apos;t dug deep enough to pinpoint the exact cause.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It would help all around if you did.&lt;/p&gt;

&lt;p&gt;Cutting the balancer test in two, a tactic you tried in the past, does not seem to have got us over the hanging balancer problem... it seems to be still there.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;From what I observed, it was related to security shell test:&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;So, splitting the test would just move the problem into a new class?&lt;/p&gt;</comment>
                            <comment id="14969917" author="yuzhihong@gmail.com" created="Thu, 22 Oct 2015 21:22:18 +0000"  >&lt;p&gt;Separating existing test into smaller ones has been used by others.&lt;br/&gt;
e.g. &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14570&quot; title=&quot;Split TestHBaseFsck in order to help with hanging tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14570&quot;&gt;&lt;del&gt;HBASE-14570&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Will continue digging into balancer test hang though I haven&apos;t seen recent occurrence.&lt;/p&gt;</comment>
                            <comment id="14970272" author="hadoopqa" created="Fri, 23 Oct 2015 01:39:10 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12768183/14679-branch-1-v1.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12768183/14679-branch-1-v1.txt&lt;/a&gt;&lt;br/&gt;
  against branch-1 branch at commit eb4f9b8b32cf0551088a342cfa9b46b20593ac27.&lt;br/&gt;
  ATTACHMENT ID: 12768183&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 19 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16187//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16187//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14970442" author="stack" created="Fri, 23 Oct 2015 04:56:06 +0000"  >&lt;blockquote&gt;&lt;p&gt;Separating existing test into smaller ones has been used by others.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Difference context. The case you cite was shot-in-the-dark. Here you seem to think the problem will exist post-split (going by your own words).&lt;/p&gt;</comment>
                            <comment id="14971661" author="apurtell" created="Fri, 23 Oct 2015 19:20:30 +0000"  >&lt;p&gt;This is just moving the problem around. The security tests are sensitive to weirdness in Connection level matters like ZooKeeper watchers, connection caching. As an example, I fixed a problem in this area before on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14209&quot; title=&quot;TestShell visibility tests failing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14209&quot;&gt;&lt;del&gt;HBASE-14209&lt;/del&gt;&lt;/a&gt;. Should do the same type of investigation and test fix here IMHO&lt;/p&gt;</comment>
                            <comment id="14984460" author="yuzhihong@gmail.com" created="Sun, 1 Nov 2015 17:17:34 +0000"  >&lt;p&gt;Investigation on TestShell is needed.&lt;/p&gt;

&lt;p&gt;Resolving.&lt;/p&gt;</comment>
                            <comment id="14984755" author="stack" created="Mon, 2 Nov 2015 05:15:51 +0000"  >&lt;blockquote&gt;&lt;p&gt;Investigation on TestShell is needed.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;And so.....&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Resolving.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12768183" name="14679-branch-1-v1.txt" size="4997" author="yuzhihong@gmail.com" created="Fri, 23 Oct 2015 01:01:01 +0000"/>
                            <attachment id="12768128" name="14679-branch-1-v1.txt" size="4997" author="yuzhihong@gmail.com" created="Thu, 22 Oct 2015 20:19:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 22 Oct 2015 20:27:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 6 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2nef3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>