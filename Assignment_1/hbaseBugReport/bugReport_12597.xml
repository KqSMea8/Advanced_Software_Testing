<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:34:34 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-12597/HBASE-12597.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-12597] Add RpcClient interface and enable changing of RpcClient implementation</title>
                <link>https://issues.apache.org/jira/browse/HBASE-12597</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Currently HConnectionImplementation works with the included RpcClient which is a direct implementation and not defined by an interface.&lt;/p&gt;

&lt;p&gt;It would be great to be able to swap out the default RpcClient with another implementation which can also be controlled by the default HConnectionImplementation. &lt;/p&gt;

&lt;p&gt;Suggested changes:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Create a RpcClient interface which defines all the ways HConnectionImplementation interacts with an RPC client. Like getting a blocking protobuf service interface or closing the client.&lt;/li&gt;
	&lt;li&gt;Define which RpcClient implementation to construct by setting a configuration variable which defaults to the current RpcClient.&lt;/li&gt;
	&lt;li&gt;Possibly create an abstract RpcClient class to only load all the basic Rpc layer configurations to be used in an implementation.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Why? It enables experimentation with RpcClients which could enable new features or could be more performant than the included client. &lt;br/&gt;
I created a new RpcClient implementation based on Netty which can also be called asynchronously. It would be great to also be able to use this RpcClient in all the default ways and tests to see if there are any issues with it. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/jurmous/async-hbase-client/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/jurmous/async-hbase-client/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/jurmous/async-hbase-client/blob/master/src/main/java/org/apache/hadoop/hbase/ipc/AsyncRpcClient.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/jurmous/async-hbase-client/blob/master/src/main/java/org/apache/hadoop/hbase/ipc/AsyncRpcClient.java&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12758352">HBASE-12597</key>
            <summary>Add RpcClient interface and enable changing of RpcClient implementation</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jurmous">Jurriaan Mous</assignee>
                                    <reporter username="jurmous">Jurriaan Mous</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Nov 2014 13:29:14 +0000</created>
                <updated>Sat, 21 Feb 2015 23:49:00 +0000</updated>
                            <resolved>Mon, 8 Dec 2014 23:28:07 +0000</resolved>
                                                    <fixVersion>1.0.0</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                    <component>Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                <comments>
                            <comment id="14228879" author="stack" created="Sat, 29 Nov 2014 18:18:45 +0000"  >&lt;p&gt;Sweet &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jurmous&quot; class=&quot;user-hover&quot; rel=&quot;jurmous&quot;&gt;Jurriaan Mous&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You refer to HConnectionImplementation (and in your code to HConnection). Is that because you have been working off 0.94 or 0.98 rather than branch-1 or master branches?  In master branch, there is a bunch of cleanup and now we have a Connection Interface.  Perhaps you&apos;ve noticed that and your reference to HCI is just because this is still the Implementation? &lt;/p&gt;

&lt;p&gt;Your project looks great (Can you call your client HBaseClient rather than HbaseClient?)  How does it relate to asynchbase if it atll?  Its more derivative of native hbase client than asynchbase is?&lt;/p&gt;

&lt;p&gt;I see you pass in our configs. Do they work for your async context. I would not be afraid introducing new ones if it makes your implementation easier... ours have been around a long time and have been overloaded and their original intent may have been lost over time.  Just FYI.&lt;/p&gt;

&lt;p&gt;Thats great you carried over codecs. Maybe in netty context, we can drop these and use netty channel compression instead? (won&apos;t work for sasl I suppose but for everything else).&lt;/p&gt;

&lt;p&gt;Hmm... you support nonce too? If so, thats great.&lt;/p&gt;





</comment>
                            <comment id="14229102" author="jurmous" created="Sun, 30 Nov 2014 13:33:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;&lt;br/&gt;
I indeed mention HCI since it is indeed still the default implementation in branch-1. And I would like to switch out the RpcClient in whatever the default implementation is so I don&apos;t need to reimplement everything in a new Connection implementation. &lt;br/&gt;
I have been working of the 0.98 branch with my project since I currently use that within my project. I currently use the HConnection for 3 main reasons: getting the region for a table/row, getting the cluster ID for authorization and getting the Nonce generator. I have studied what has changed in master-1 and it would not be difficult to incorporate the changes. I only based my implementation on a few classes in HBase client, mainly RpcClient and the ResultScanners. &lt;/p&gt;

&lt;p&gt;&quot;Can you call your client HBaseClient rather than HbaseClient?&quot;&lt;br/&gt;
Ah, I used a different naming scheme but since this is what HBase uses itself as a naming scheme I will adopt it &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;

&lt;p&gt;&quot;How does it relate to asynchbase if it atll? Its more derivative of native hbase client than asynchbase is?&quot;&lt;br/&gt;
Yes, I didn&apos;t like asynchbase was a complete new implementation of the Api. While it looks like it implemented to be as fast as possible it missed out on a few features that I was using. To use it I would also need to rebuild lots of code which return Puts etc. And studying it I saw it was easier to do a new implementation based on the Hbase client itself and the newer different Netty 4 api. Since everything is based on protobuf services it would be relatively easy. And I had experience with Netty 4 recently so I saw I could do this pretty quickly. And I used the Hbase implementation as the basis for connection pooling and more so I wouldn&apos;t reinvent the wheel. &lt;/p&gt;

&lt;p&gt;&quot;I see you pass in our configs. Do they work for your async context. I would not be afraid introducing new ones if it makes your implementation easier... ours have been around a long time and have been overloaded and their original intent may have been lost over time. Just FYI.&quot;&lt;br/&gt;
Almost all the connection configs in RpcClient mapped 1-to-1 to Netty socket or channel handler settings so I reused them. (maxretries, socket-timeout, tcpnodelay etc) And for the scanner they were also great to have some sensible defaults for things like retries, timeouts and max result count. I did not have any problem implementing them since the async context didn&apos;t matter to them.&lt;/p&gt;

&lt;p&gt;&quot;Thats great you carried over codecs. Maybe in netty context, we can drop these and use netty channel compression instead? (won&apos;t work for sasl I suppose but for everything else).&quot;&lt;br/&gt;
Yes that would be a great experiment &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Those kind of experiments are the reason I am advocating this issue to make it easy to swap out the RpcClient so it can also be tested in current environments which do not use an async context yet. Although such a change would also need changes to the server. (I havent studied yet how it is implemented and to do a Netty implementation there is outside my current ambitions)&lt;/p&gt;

&lt;p&gt;&quot;Hmm... you support nonce too? If so, thats great.&quot;&lt;br/&gt;
Yes I currently read it out of the nonce generator of the passed in HConnection. I see that needs to change with new Connection interface.&lt;/p&gt;</comment>
                            <comment id="14229105" author="jurmous" created="Sun, 30 Nov 2014 13:58:58 +0000"  >&lt;p&gt;Some followup on your Channel codec/compression suggestion. You mentioned it would probably not work with SASL. But I think it would be trivial to implement channel compression with a Netty stack even with SASL since compression/encoding/decoding is handled within Channel handlers. I already reimplemented the SASL handling to be a channel handler and you need to add the compression to be after (or possibly before) the SASL handler for it to work correctly. As long as the server implements it in the same way it would work. It would indeed be a better way to compress/encode since it will compress all transported bytes instead of only the cell blocks.&lt;/p&gt;</comment>
                            <comment id="14229298" author="stack" created="Mon, 1 Dec 2014 00:15:21 +0000"  >&lt;blockquote&gt;&lt;p&gt;And I would like to switch out the RpcClient in whatever the default implementation is so I don&apos;t need to reimplement everything in a new Connection implementation. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I was just trying to warn you off the implementation to instead work against the Connection (rather than HCI) if possible.  The new Interfaces are kinda sweet. Would be grand if your new rpc Interface could be in the same style.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I have been working of the 0.98 branch with my project since I currently use that within my project. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Fair enough. Make it work in your context first.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I have studied what has changed in master-1 and it would not be difficult to incorporate the changes. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sweet.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;While it looks like it implemented to be as fast as possible it missed out on a few features that I was using. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That is a good characterization I would say.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;And I used the Hbase implementation as the basis for connection pooling and more so I wouldn&apos;t reinvent the wheel.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Can you say more on the above?  Why would you use hbase implementation connection pooling and not Netty&apos;s (I&apos;m not sure &amp;#8211; I&apos;m guessing it can do this)&lt;/p&gt;

&lt;p&gt;I&apos;m am glad there was a mapping from our configs to those needed by netty. Good.&lt;/p&gt;

&lt;p&gt;Do you have a proposal for rpcclient interface?&lt;/p&gt;

&lt;p&gt;There is our use of the protobuf Service Interfaces taking rpc controllers etc.  We just took it on because it was there and the pb code generation did all the stubbing for us.  Just saying we are amenable to change long as the basic protocol stays the same, for now.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I already reimplemented the SASL handling to be a channel handler and you need to add the compression to be after (or possibly before) the SASL handler for it to work correctly. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That&apos;d be pretty great. Thinking on it, I suppose it should be ok doing it as netty channel. You just have to have our idiosyncratic header stuff up  front on the connection which I believe netty will let you just insert. Thats great.&lt;/p&gt;</comment>
                            <comment id="14229559" author="jurmous" created="Mon, 1 Dec 2014 09:07:35 +0000"  >&lt;blockquote&gt;&lt;p&gt;I was just trying to warn you off the implementation to instead work against the Connection (rather than HCI) if possible. The new Interfaces are kinda sweet. Would be grand if your new rpc Interface could be in the same style.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Since the RpcClient changes proposed here would probably land on branch-1 and/or master I think I need to make a branch myself to support the new Hbase version. I will take your recommendation and base it on the new Api. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Can you say more on the above? Why would you use hbase implementation connection pooling and not Netty&apos;s (I&apos;m not sure &#8211; I&apos;m guessing it can do this)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;While Netty pools the connections (called channels) for the outside world in a connection pool, inside the application depends on how you want to recycle connections. I based it on the ConnectionId inside RpcClient so channels get mapped in the same way as in Hbase itself. &lt;br/&gt;
ConnectionId takes care of the grouping which is on User ticket, protobuf servicename, the region server address and the rpc timeout. This is pretty HBase specific. The map it would end up in is PoolMap&amp;lt;RpcClient.ConnectionId, AsyncRpcChannel&amp;gt; connections. And the client uses the map to give users an existing or a new connection.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Do you have a proposal for rpcclient interface? &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Will look into it. I would probably extract whatever is used in the HConnectionImplementation into an interface.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;There is our use of the protobuf Service Interfaces taking rpc controllers etc. We just took it on because it was there and the pb code generation did all the stubbing for us. Just saying we are amenable to change long as the basic protocol stays the same, for now.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The protobuf Service interface made it easy to make a comparable implementation. Although I could see that it could be made more optimal since like the Hbase implementation I also needed to create a new async PayloadCarryingRpcController to pass information around the limiting interface. Although it was not that big of a problem. I would recommend not to make big changes in it without taking care of an async implementation. But I don&apos;t know if it is worth it to create new implementations for each Service.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;That&apos;d be pretty great. Thinking on it, I suppose it should be ok doing it as netty channel. You just have to have our idiosyncratic header stuff up front on the connection which I believe netty will let you just insert. Thats great.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I handle those directly after channel creation. If channel compression is added there needs to be a new header defining the compression defined. We need something of a header in which the client announces in the connect header which compressions it supports and the server replying with a header which compression it uses.&lt;/p&gt;

&lt;p&gt;As said I will return with a first suggestion on the RpcClient interface.&lt;/p&gt;</comment>
                            <comment id="14229686" author="jurmous" created="Mon, 1 Dec 2014 11:37:41 +0000"  >&lt;p&gt;First suggestion for RpcClientInterface with cancelConnections, createBlockingRpcChannel and stop.&lt;/p&gt;

&lt;p&gt;There is no way yet to use another implementation than RpcClient yet.&lt;/p&gt;</comment>
                            <comment id="14229688" author="jurmous" created="Mon, 1 Dec 2014 11:40:12 +0000"  >&lt;p&gt;I did something wrong here, I will cancel the patch. Am trying to figure out how the patching works. &lt;/p&gt;</comment>
                            <comment id="14229693" author="jurmous" created="Mon, 1 Dec 2014 11:47:02 +0000"  >&lt;p&gt;Retry:&lt;/p&gt;

&lt;p&gt;First suggestion for RpcClientInterface with cancelConnections, createBlockingRpcChannel and stop.&lt;br/&gt;
There is no way yet to use another implementation than RpcClient yet.&lt;/p&gt;</comment>
                            <comment id="14229697" author="jurmous" created="Mon, 1 Dec 2014 11:49:32 +0000"  >&lt;p&gt;Also updated my client to use the new Connection interface. I currently use 0.99.0 published to maven central. It is available in this branch: &lt;a href=&quot;https://github.com/jurmous/async-hbase-client/tree/HBase-0.99&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/jurmous/async-hbase-client/tree/HBase-0.99&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14230238" author="stack" created="Mon, 1 Dec 2014 18:55:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jurmous&quot; class=&quot;user-hover&quot; rel=&quot;jurmous&quot;&gt;Jurriaan Mous&lt;/a&gt; Just in case you&apos;ve not seen this before, &lt;a href=&quot;http://hbase.apache.org/book.html#hbase.rpc&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hbase.apache.org/book.html#hbase.rpc&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I just pushed a new snapshot for you so you have more current state of code. Its 0.99.2-SNAPSHOT.&lt;/p&gt;

&lt;p&gt;Regards branch-1, would be good to get your Interface in even if your netty client is not done yet... &lt;/p&gt;

&lt;p&gt;Yes, keying connections by ConnectionId is the way to go with this as the key client apps use to find existing connections if they exist.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;And the client uses the map to give users an existing or a new connection.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes. Be careful here though. You should be ok but we just made a change where the management of connections was done under the covers for applications such that internally we did connection setup and then did refcounting so if multiple client apps, they could share underlying connections.  We&apos;ve moved away from doing this internally forcing client apps to do this going forward (In past you got a HTable instance, not you first get a Connection and then Table instance... With the former the Connection setup and management was done internally... with the latter style, it is up to the app to manage the Connection).  Just FYI.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Although I could see that it could be made more optimal since like the Hbase implementation I also needed to create a new async PayloadCarryingRpcController to pass information around the limiting interface.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yeah. Above is ugly but as you say, we can move off the pb generated stubs at some other time.&lt;/p&gt;

&lt;p&gt;Good stuff&lt;/p&gt;












</comment>
                            <comment id="14230255" author="stack" created="Mon, 1 Dec 2014 19:02:51 +0000"  >&lt;p&gt;On your patch, what if RpcClient was the interface and the current RpcClient was moved to be a RpcClientImpl?  RpcClient is marked @InterfaceAudience.Private so you are free to change it (no one should be referencing other than hbase internals)&lt;/p&gt;

&lt;p&gt;Add a license to head of the file RpcClientInterface&lt;/p&gt;

&lt;p&gt;Do we need a start in the Interface?  Or does calling createBlockingRpcChannel serve this purpose?&lt;/p&gt;

&lt;p&gt;In below, it takes a hostname and a port where createBlockingRpcChannel takes a ServerName.  They should be the same?&lt;/p&gt;

&lt;p&gt;	  public void cancelConnections(String hostname, int port);&lt;/p&gt;


&lt;p&gt;Otherwise, looks good.&lt;/p&gt;</comment>
                            <comment id="14231558" author="jurmous" created="Tue, 2 Dec 2014 14:50:03 +0000"  >&lt;blockquote&gt;&lt;p&gt;I just pushed a new snapshot for you so you have more current state of code. Its 0.99.2-SNAPSHOT.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Thanks! I have updated the 0.99 branch to the 0.99.2 snapshot. Fortunately the changes I needed to make were simple.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Yes. Be careful here though. You should be ok but we just made a change where the management of connections was done under the covers for applications such that internally we did connection setup and then did refcounting so if multiple client apps, they could share underlying connections. We&apos;ve moved away from doing this internally forcing client apps to do this going forward (In past you got a HTable instance, not you first get a Connection and then Table instance... With the former the Connection setup and management was done internally... with the latter style, it is up to the app to manage the Connection). Just FYI.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes makes sense to do it that way. Much cleaner. It will not be a problem with the Connection/Channel pool within an RpcClient implementation but indeed good to know.&lt;/p&gt;</comment>
                            <comment id="14231575" author="jurmous" created="Tue, 2 Dec 2014 15:02:51 +0000"  >&lt;p&gt;New patch. I have adapted your suggestions. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Do we need a start in the Interface? Or does calling createBlockingRpcChannel serve this purpose?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes createBlockingRpcChannel serves this purpose.&lt;/p&gt;

&lt;p&gt;Now I have two questions about the next steps:&lt;/p&gt;

&lt;p&gt;1. I would like to make the RpcClient configurable. I want to inspire its implementation on the ConnectionFactory createConnection method. Is it ok to use &quot;hbase.ipc.client.impl&quot; as the setting name? And to embed its implementation in a RpcClientFactory class?&lt;/p&gt;

&lt;p&gt;2. I would like to abstract some basic implementation details for RpcClient like the config settings. Basically everything in the constructor for the implementation, its parameters, config name constants and static config setters. I would like to call it RpcClientAdapter and let RpcClientImpl implement it. Is this ok? This would save duplication in my own AsyncRpcClient.&lt;/p&gt;</comment>
                            <comment id="14231874" author="stack" created="Tue, 2 Dec 2014 18:31:19 +0000"  >&lt;blockquote&gt;&lt;p&gt;Is it ok to use &quot;hbase.ipc.client.impl&quot; as the setting name? And to embed its implementation in a RpcClientFactory class?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes.  Will you have a Configuration in your RpcClientFactory class context?  If so, read the class name from here?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I would like to call it RpcClientAdapter and let RpcClientImpl implement it. Is this ok? &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sounds good.  Is it an adapter or rpc configuration/settings?  What is it adapting?  We can always revisit naming.&lt;/p&gt;

&lt;p&gt;On the patch, this will become a factory?&lt;/p&gt;

&lt;p&gt;      this.rpcClient = new RpcClientImpl(this.conf, this.clusterId);&lt;/p&gt;

&lt;p&gt;Looks like tests will want to have a different rpcclientimpl&lt;/p&gt;

&lt;p&gt;    @VisibleForTesting RpcClient setRpcClient(final RpcClient rpcClient) {&lt;/p&gt;

&lt;p&gt;We can then get rid of the above method and go factory route instead.  That&apos;d be good cleanup&lt;/p&gt;

&lt;p&gt;nit: Change this so its not inner exception?&lt;/p&gt;

&lt;p&gt;import org.apache.hadoop.hbase.ipc.RpcClientImpl.FailedServerException;&lt;/p&gt;

&lt;p&gt;I presume no changes in RpcClientImpl other than rename from RpcClient?&lt;/p&gt;

&lt;p&gt;Would be good to move this stuff up out of RpcClient? &lt;/p&gt;

&lt;p&gt;          if (unwrappedDataLength == RpcClientImpl.PING_CALL_ID) {&lt;/p&gt;

&lt;p&gt;and this stuff?&lt;/p&gt;

&lt;p&gt;RpcClientImpl.FAILED_SERVER_EXPIRY_DEFAULT&lt;/p&gt;

&lt;p&gt;Patch is great.&lt;/p&gt;

&lt;p&gt;Move on to your factory basis and then lets commit that much?&lt;/p&gt;</comment>
                            <comment id="14232822" author="anoop.hbase" created="Wed, 3 Dec 2014 09:43:31 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
} &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (RpcClientImpl.FailedServerException e) {
...
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Better move the Exception out of RpcClientImpl now? The custom impl also might have to throw this?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; sleepTime = 1 + conf.getInt(RpcClientImpl.FAILED_SERVER_EXPIRY_KEY,
   RpcClientImpl.FAILED_SERVER_EXPIRY_DEFAULT);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We  may have to move these constants also outside of RpcClientImpl.    Put in interface?  There are some other such constants too.&lt;/p&gt;</comment>
                            <comment id="14232932" author="jurmous" created="Wed, 3 Dec 2014 12:06:00 +0000"  >&lt;p&gt;New patch.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Created a new RpcClientFactory which creates a RpcClient from &quot;hbase.rpc.client.impl&quot; setting or the default RpcClientImpl&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Moved all the RpcClientImpl instantiation to the new factory where possible. Some tests were specific to RpcClientImpl which I left as is. One test (TestClientTimeouts) needed a custom implementation which is loaded with the RpcClientFactory by a custom configuration. This enabled me to remove setRpcClient on HConnectionImplementation.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Created a RpcClientAdapter (ideas are welcome for better name) which implements all the configuration loading and the Logger implementation. Some tests call that logger to enable output of debug logs and this is now enabled for all RpcClients that implement the adapter. All static methods and constants of the RpcClientImpl are also moved here.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Moved out all the classes that could be reused by a new RpcClient out of RpcClientImpl. (I use them already in my AsyncRpcClient) Those are: ConnectionId, FailedServerException and FailedServers.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Assigned @InterfaceAudience.Private to RpcClient interface. (A unit test demanded a InterfaceAudience) I am not sure if this should be private or public since it can now be used for a new implementation.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14232938" author="jurmous" created="Wed, 3 Dec 2014 12:09:59 +0000"  >&lt;blockquote&gt;&lt;p&gt;I presume no changes in RpcClientImpl other than rename from RpcClient?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;There are no other changes in functionality. In the newest patch some classes are moved out but not changed in their working. (A shame that git does not detect the move because the new interface is called RpcClient.)&lt;/p&gt;</comment>
                            <comment id="14233037" author="anoop.hbase" created="Wed, 3 Dec 2014 14:35:22 +0000"  >&lt;p&gt;ConnectionId &lt;br/&gt;
You should add Apache license header as well as InterfaceAudience.&lt;/p&gt;

&lt;p&gt;FailedServerException&lt;br/&gt;
You should add Apache license header&lt;/p&gt;

&lt;p&gt;FailedServers &lt;br/&gt;
You should add Apache license header as well as InterfaceAudience. &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; rpcClientClass =
	        conf.get(CUSTOM_RPC_CLIENT_IMPL_CONF_KEY,
	          RpcClientImpl.class.getName());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The agreement is that RpcClient implementations to have a 3 arg constructor. Need to add the info in release notes&lt;/p&gt;

&lt;p&gt;RpcClientAdapter -&amp;gt; Is this an adapter class?  This is a common base class for diff RpcClient impls. This name correct?&lt;/p&gt;</comment>
                            <comment id="14233103" author="jurmous" created="Wed, 3 Dec 2014 15:26:04 +0000"  >&lt;p&gt;Thanks for the feedback!&lt;/p&gt;

&lt;p&gt;New patch&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Moved CallTimeoutException out of RpcClientImpl. Seemed to missed it.&lt;/li&gt;
	&lt;li&gt;Added Apache license information and InterfaceAudience where it was needed.&lt;/li&gt;
	&lt;li&gt;RpcClientAdapter is renamed to AbstractRpcClient. (Is this the right name?)&lt;/li&gt;
&lt;/ul&gt;



&lt;blockquote&gt;&lt;p&gt;The agreement is that RpcClient implementations to have a 3 arg constructor. Need to add the info in release notes&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;What is the process to add this?&lt;/p&gt;</comment>
                            <comment id="14233726" author="stack" created="Thu, 4 Dec 2014 00:52:51 +0000"  >&lt;blockquote&gt;&lt;p&gt;This enabled me to remove setRpcClient on HConnectionImplementation.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Nice.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I am not sure if this should be private or public since it can now be used for a new implementation.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Keep it private for now. Once it working and two implementations, then we can make it public/evolving.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;What is the process to add this?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I beileve &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoopsamjohn&quot; class=&quot;user-hover&quot; rel=&quot;anoopsamjohn&quot;&gt;Anoop Sam John&lt;/a&gt; is refering to the &apos;release note&apos; attribute of this here JIRA.&lt;/p&gt;

&lt;p&gt;The defines look generic enough that they should be in RpcClient Interface rather than in AbstractRpcClient.   These defines in Abstract class probably ain&apos;t the best.   Otherwise, if defines go to the Interface, I think this AbstractRpcClient looks good &amp;#8211; you using it in your async class?  If so, that&apos;d be argument in favor...&lt;/p&gt;

&lt;p&gt;One thought is that rather than &apos;stop&apos; an RpcClient, should it implement &lt;a href=&quot;https://docs.oracle.com/javase/7/docs/api/java/io/Closeable.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://docs.oracle.com/javase/7/docs/api/java/io/Closeable.html&lt;/a&gt; instead?&lt;/p&gt;

&lt;p&gt;What about stuff like Call class inside in the RpcClientImpl? You don&apos;t need them in your implementation?  You do something else? Ditto Connection.  If so, np.  I suppose an RpcClient has a Connection?  A single Connection?  Or this is implementation detail?   Or I supopse it is not... protocol is all around Connections.  If so, how you doing this over in your client?&lt;/p&gt;

&lt;p&gt;Yeah, referring to defines in abstract classes is a little odd AbstractRpcClient.FAILED_SERVER_EXPIRY_DEFAULT&lt;/p&gt;

&lt;p&gt;Looking good.&lt;/p&gt;

</comment>
                            <comment id="14234063" author="jurmous" created="Thu, 4 Dec 2014 09:43:50 +0000"  >&lt;p&gt;New patch&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Moved the static constants to RpcClient interface. They are indeed pretty generic and I use them too in my implementation.&lt;/li&gt;
	&lt;li&gt;RpcClient extends Closeable now and stop method is now called close()&lt;/li&gt;
	&lt;li&gt;Moved out Call class from RpcClientImpl. I didn&apos;t use it in my async implementation, but maybe others can use it in another sync implementation.&lt;/li&gt;
&lt;/ul&gt;


&lt;blockquote&gt;&lt;p&gt;Ditto Connection. If so, np. I suppose an RpcClient has a Connection? A single Connection? Or this is implementation detail? Or I supopse it is not... protocol is all around Connections. If so, how you doing this over in your client?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Connection is not a static class and is tightly linked into RpcClientImpl. It uses the socket factory and creates sockets which are pretty much tied into RpcClientImpl its implementation. In many ways it is the implementation of RpcClient. I had to create something new in my implementation based on Netty Channels. Maybe something reusable can be abstracted out of it to also simplify how I implemented it but I think that falls outside the scope of this issue. &lt;br/&gt;
CallFuture is pretty small and a private static class. It is used in the internal queue. I couldn&apos;t use it for my implementation.&lt;br/&gt;
BlockingRpcChannelImplementation links to the call method in RpcClientImpl which is currently not in the RpcClient interface. And I would not like it to be in there since PayloadCarryingRpcController is currently not reusable in async context. Could be with some changes but I think they need some discussion, but somehow I think it is better to leave RpcClient as clean as possible so RpcClients can try out new things like doing without an PayloadCarryingRpcController.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I beileve Anoop Sam John is refering to the &apos;release note&apos; attribute of this here JIRA.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Ah I see. &lt;/p&gt;</comment>
                            <comment id="14234426" author="stack" created="Thu, 4 Dec 2014 18:16:24 +0000"  >&lt;p&gt;Skimmed.  Will come back with a better review (should the defines in the Interface be public so folks don&apos;t have to be in same package to make an implementation?)&lt;/p&gt;

&lt;p&gt;Marked this as for 1.0.  Would be good to get it in before 1.0 goes out.  Lets see what hadoopqa thinks of this patch.&lt;/p&gt;</comment>
                            <comment id="14235181" author="stack" created="Fri, 5 Dec 2014 06:56:39 +0000"  >&lt;p&gt;Retry now hadoopqa seems to be back.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; you good w/ this refactor or 1.0?&lt;/p&gt;</comment>
                            <comment id="14235332" author="jurmous" created="Fri, 5 Dec 2014 10:19:19 +0000"  >&lt;p&gt;Updated the patch which several changes to access controls so it is possible to create an implementation outside the ipc package. &lt;br/&gt;
Changed the statics in interface to be public. Made the methods in the classes that moved from the RpcClient implementation like FailedServers and ConnectionId public. Made IPCUtil better accessible outside of the package.&lt;/p&gt;</comment>
                            <comment id="14235337" author="hadoopqa" created="Fri, 5 Dec 2014 10:23:03 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12685299/HBASE-12597-v5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12685299/HBASE-12597-v5.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 08754f2c431b829b0d6269bdb23284dd679ed8ca.&lt;br/&gt;
  ATTACHMENT ID: 12685299&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 51 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javac&lt;/font&gt;.  The patch appears to cause mvn compile goal to fail.&lt;/p&gt;

&lt;p&gt;    Compilation errors resume:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; COMPILATION ERROR : &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestHMasterRPCException.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;92,16&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-server/src/test/java/org/apache/hadoop/hbase/ipc/TestDelayedRpc.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;121,16&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-server/src/test/java/org/apache/hadoop/hbase/ipc/TestDelayedRpc.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;203,16&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-server/src/test/java/org/apache/hadoop/hbase/ipc/TestDelayedRpc.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;326,16&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-server/src/test/java/org/apache/hadoop/hbase/ipc/TestProtoBufRpc.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;139,16&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestClientTimeouts.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;125,16&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-server/src/test/java/org/apache/hadoop/hbase/security/token/TestTokenAuthentication.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;416,20&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-server/src/test/java/org/apache/hadoop/hbase/ipc/TestIPC.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;200,13&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-server/src/test/java/org/apache/hadoop/hbase/ipc/TestIPC.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;242,13&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-server/src/test/java/org/apache/hadoop/hbase/ipc/TestIPC.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;273,13&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-server/src/test/java/org/apache/hadoop/hbase/ipc/TestIPC.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;357,13&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-server/src/test/java/org/apache/hadoop/hbase/security/TestSecureRPC.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;120,16&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.2:testCompile (default-testCompile) on project hbase-server: Compilation failure: Compilation failure:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestHMasterRPCException.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;92,16&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; symbol:   method stop()&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; location: variable rpcClient of type org.apache.hadoop.hbase.ipc.RpcClient&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-server/src/test/java/org/apache/hadoop/hbase/ipc/TestDelayedRpc.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;121,16&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; symbol:   method stop()&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; location: variable rpcClient of type org.apache.hadoop.hbase.ipc.RpcClient&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-server/src/test/java/org/apache/hadoop/hbase/ipc/TestDelayedRpc.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;203,16&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; symbol:   method stop()&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; location: variable rpcClient of type org.apache.hadoop.hbase.ipc.RpcClient&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-server/src/test/java/org/apache/hadoop/hbase/ipc/TestDelayedRpc.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;326,16&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; symbol:   method stop()&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; location: variable rpcClient of type org.apache.hadoop.hbase.ipc.RpcClient&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-server/src/test/java/org/apache/hadoop/hbase/ipc/TestProtoBufRpc.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;139,16&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; symbol:   method stop()&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; location: variable rpcClient of type org.apache.hadoop.hbase.ipc.RpcClient&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestClientTimeouts.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;125,16&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; symbol:   method stop()&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; location: variable rpcClient of type org.apache.hadoop.hbase.client.TestClientTimeouts.RandomTimeoutRpcClient&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-server/src/test/java/org/apache/hadoop/hbase/security/token/TestTokenAuthentication.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;416,20&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; symbol:   method stop()&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; location: variable rpcClient of type org.apache.hadoop.hbase.ipc.RpcClient&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-server/src/test/java/org/apache/hadoop/hbase/ipc/TestIPC.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;200,13&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; symbol:   method stop()&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; location: variable client of type org.apache.hadoop.hbase.ipc.RpcClientImpl&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-server/src/test/java/org/apache/hadoop/hbase/ipc/TestIPC.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;242,13&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; symbol:   method stop()&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; location: variable client of type org.apache.hadoop.hbase.ipc.RpcClientImpl&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-server/src/test/java/org/apache/hadoop/hbase/ipc/TestIPC.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;273,13&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; symbol:   method stop()&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; location: variable client of type org.apache.hadoop.hbase.ipc.RpcClientImpl&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-server/src/test/java/org/apache/hadoop/hbase/ipc/TestIPC.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;357,13&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; symbol:   method stop()&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; location: variable client of type org.apache.hadoop.hbase.ipc.RpcClientImpl&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-server/src/test/java/org/apache/hadoop/hbase/security/TestSecureRPC.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;120,16&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; symbol:   method stop()&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; location: variable rpcClient of type org.apache.hadoop.hbase.ipc.RpcClient&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; To see the full stack trace of the errors, re-run Maven with the -e switch.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Re-run Maven using the -X switch to enable full debug logging.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; For more information about the errors and possible solutions, please read the following articles:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; After correcting the problems, you can resume the build with the command&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt;   mvn &amp;lt;goals&amp;gt; -rf :hbase-server&lt;/p&gt;


&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11949//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11949//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14235343" author="jurmous" created="Fri, 5 Dec 2014 10:40:08 +0000"  >&lt;p&gt;I can maven compile it on my local machine with the same master revision. I think something is wrong with the build server? What&apos;s next?&lt;/p&gt;</comment>
                            <comment id="14235670" author="stack" created="Fri, 5 Dec 2014 16:08:48 +0000"  >&lt;p&gt;It fails for me too when I apply your patch to the master branch.  Have you rebased?  Are you using hbase master branch?  (hadoopqa builds against master branch and patches should go in there first)&lt;/p&gt;</comment>
                            <comment id="14235779" author="jurmous" created="Fri, 5 Dec 2014 17:43:44 +0000"  >&lt;p&gt;New patch.&lt;br/&gt;
I did something wrong and I saw the errors after a full rebuild. Was already working from master.&lt;/p&gt;</comment>
                            <comment id="14236034" author="hadoopqa" created="Fri, 5 Dec 2014 20:12:19 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12685361/HBASE-12597-v6.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12685361/HBASE-12597-v6.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 155a644b1cce68b5ef7dcf20eca8ed29bf39c771.&lt;br/&gt;
  ATTACHMENT ID: 12685361&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 51 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 2078 checkstyle errors (more than the master&apos;s current 2072 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +   * either &lt;/p&gt;
{@link org.apache.hadoop.hbase.util.PoolMap.PoolType#RoundRobin}
&lt;p&gt; or &lt;/p&gt;
{@link org.apache.hadoop.hbase.util.PoolMap.PoolType#ThreadLocal}
&lt;p&gt;,&lt;br/&gt;
+   * thread-local pool. In any case, the number of &lt;/p&gt;
{@link org.apache.hadoop.hbase.ipc.RpcClient}
&lt;p&gt; instances&lt;br/&gt;
+   * Creates a new RpcClient by the class defined in the configuration or falls back to RpcClientImpl&lt;br/&gt;
+   * Creates a new RpcClient by the class defined in the configuration or falls back to RpcClientImpl&lt;br/&gt;
+  public static RpcClient createClient(Configuration conf, String clusterId, SocketAddress localAddr) {&lt;br/&gt;
+      new Class[] &lt;/p&gt;
{ Configuration.class, String.class, SocketAddress.class }
&lt;p&gt;, new Object[] &lt;/p&gt;
{ conf, clusterId, localAddr }
&lt;p&gt;);&lt;br/&gt;
+  static class RandomTimeoutBlockingRpcChannel extends RpcClientImpl.BlockingRpcChannelImplementation {&lt;br/&gt;
+    RpcClient rpcClient = RpcClientFactory.createClient(conf, HConstants.DEFAULT_CLUSTER_ID.toString());&lt;br/&gt;
+    RpcClient rpcClient = RpcClientFactory.createClient(conf, HConstants.DEFAULT_CLUSTER_ID.toString());&lt;br/&gt;
+    RpcClient rpcClient = RpcClientFactory.createClient(conf, HConstants.DEFAULT_CLUSTER_ID.toString());&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.client.TestReplicasClient&lt;br/&gt;
                  org.apache.hadoop.hbase.TestAcidGuarantees&lt;br/&gt;
                  org.apache.hadoop.hbase.security.visibility.TestVisibilityLabelsWithDistributedLogReplay&lt;br/&gt;
                  org.apache.hadoop.hbase.coprocessor.TestCoprocessorEndpoint&lt;br/&gt;
                  org.apache.hadoop.hbase.TestFullLogReconstruction&lt;br/&gt;
                  org.apache.hadoop.hbase.coprocessor.TestRegionServerObserver&lt;br/&gt;
                  org.apache.hadoop.hbase.ipc.TestDelayedRpc&lt;br/&gt;
                  org.apache.hadoop.hbase.security.visibility.TestVisibilityLabelsWithDefaultVisLabelService&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestFastFail&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestMultiParallel&lt;br/&gt;
                  org.apache.hadoop.hbase.coprocessor.TestRowProcessorEndpoint&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestAdmin2&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 16 zombie test(s): 	at org.apache.hadoop.hbase.coprocessor.TestMasterObserver.testRegionTransitionOperations(TestMasterObserver.java:1523)&lt;br/&gt;
	at org.apache.hadoop.hbase.mapreduce.TestTableSnapshotInputFormat.testWithMapReduceImpl(TestTableSnapshotInputFormat.java:247)&lt;br/&gt;
	at org.apache.hadoop.hbase.mapreduce.TableSnapshotInputFormatTestBase.testWithMapReduce(TableSnapshotInputFormatTestBase.java:111)&lt;br/&gt;
	at org.apache.hadoop.hbase.mapreduce.TableSnapshotInputFormatTestBase.testWithMapReduceMultiRegion(TableSnapshotInputFormatTestBase.java:95)&lt;br/&gt;
	at org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat.testMRIncrementalLoadWithSplit(TestHFileOutputFormat.java:366)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.TestAdmin1.testDeleteEditUnknownColumnFamilyAndOrTable(TestAdmin1.java:134)&lt;br/&gt;
	at org.apache.hadoop.hbase.security.visibility.TestVisibilityLabels.testVisibilityLabelsOnRSRestart(TestVisibilityLabels.java:406)&lt;br/&gt;
	at org.apache.hadoop.hbase.security.visibility.TestVisibilityLabels.testVisibilityLabelsInScanThatDoesNotMatchAnyDefinedLabels(TestVisibilityLabels.java:278)&lt;br/&gt;
	at org.apache.hadoop.hbase.TestFullLogReconstruction.testReconstruction(TestFullLogReconstruction.java:100)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.TestTableSnapshotScanner.testScanner(TestTableSnapshotScanner.java:133)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.TestTableSnapshotScanner.testWithMultiRegion(TestTableSnapshotScanner.java:120)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11955//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11955//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11955//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11955//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11955//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11955//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11955//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11955//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11955//artifact/patchprocess/newPatchFindbugsWarningshbase-annotations.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11955//artifact/patchprocess/newPatchFindbugsWarningshbase-annotations.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11955//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11955//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11955//artifact/patchprocess/newPatchFindbugsWarningshbase-rest.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11955//artifact/patchprocess/newPatchFindbugsWarningshbase-rest.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11955//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11955//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11955//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11955//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11955//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11955//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11955//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11955//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11955//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11955//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11955//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11955//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Javadoc warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11955//artifact/patchprocess/patchJavadocWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11955//artifact/patchprocess/patchJavadocWarnings.txt&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11955//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11955//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14236460" author="enis" created="Sat, 6 Dec 2014 01:43:27 +0000"  >&lt;p&gt;Skimmed the patch. It should be ok for branch-1, if it makes in time. &lt;/p&gt;</comment>
                            <comment id="14236785" author="jurmous" created="Sat, 6 Dec 2014 13:34:26 +0000"  >&lt;p&gt;Fixed the test failures. (Which was of a move of callIdCntr to Call class, took some serious debugging to find that one)&lt;br/&gt;
Fixed the line length issues.&lt;/p&gt;

&lt;p&gt;Will need another build for the javadoc and firebug issues that are mentioned because the build logs of that build is gone. (404s)&lt;/p&gt;

&lt;p&gt;What is the deadline for branch-1? &lt;br/&gt;
When can this patch be committed? If Hadoop QA calls it a success? Or are other steps needed?&lt;/p&gt;</comment>
                            <comment id="14236850" author="hadoopqa" created="Sat, 6 Dec 2014 15:30:53 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12685541/HBASE-12597-v7.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12685541/HBASE-12597-v7.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit b7d1790411a379a27c59514c806f48c91e7186c8.&lt;br/&gt;
  ATTACHMENT ID: 12685541&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 51 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 2089 checkstyle errors (more than the master&apos;s current 2088 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11971//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11971//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11971//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11971//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11971//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11971//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11971//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11971//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11971//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11971//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11971//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11971//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11971//artifact/patchprocess/newPatchFindbugsWarningshbase-rest.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11971//artifact/patchprocess/newPatchFindbugsWarningshbase-rest.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11971//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11971//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11971//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11971//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11971//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11971//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11971//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11971//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11971//artifact/patchprocess/newPatchFindbugsWarningshbase-annotations.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11971//artifact/patchprocess/newPatchFindbugsWarningshbase-annotations.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11971//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11971//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Javadoc warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11971//artifact/patchprocess/patchJavadocWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11971//artifact/patchprocess/patchJavadocWarnings.txt&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11971//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11971//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14236863" author="jurmous" created="Sat, 6 Dec 2014 16:01:38 +0000"  >&lt;p&gt;With the extra information in the latest build output I was able to fix the javadoc issue and 3 check style issues. This should enable all the HadoopQA checks to pass.&lt;/p&gt;</comment>
                            <comment id="14236870" author="stack" created="Sat, 6 Dec 2014 16:22:25 +0000"  >&lt;p&gt;Great.  Lets see how hadoopqa does.  Let me try this on a cluster just be sure and then we can commit.  Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jurmous&quot; class=&quot;user-hover&quot; rel=&quot;jurmous&quot;&gt;Jurriaan Mous&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14236908" author="hadoopqa" created="Sat, 6 Dec 2014 18:00:56 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12685547/HBASE-12597-v8.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12685547/HBASE-12597-v8.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit b7d1790411a379a27c59514c806f48c91e7186c8.&lt;br/&gt;
  ATTACHMENT ID: 12685547&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 51 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11972//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11972//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11972//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11972//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11972//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11972//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11972//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11972//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11972//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11972//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11972//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11972//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11972//artifact/patchprocess/newPatchFindbugsWarningshbase-rest.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11972//artifact/patchprocess/newPatchFindbugsWarningshbase-rest.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11972//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11972//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11972//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11972//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11972//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11972//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11972//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11972//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11972//artifact/patchprocess/newPatchFindbugsWarningshbase-annotations.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11972//artifact/patchprocess/newPatchFindbugsWarningshbase-annotations.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11972//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11972//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11972//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11972//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14236921" author="jurmous" created="Sat, 6 Dec 2014 18:48:01 +0000"  >&lt;p&gt;Here you go. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I hope that the cluster tests all work out.&lt;/p&gt;

&lt;p&gt;And thanks for all your input! Was nice to learn how it all works here. &lt;br/&gt;
Am looking forward to run the included RpcClient tests on my new client after I adopt the new RpcClient interface. Nice way to test all kinds of failure situations.&lt;/p&gt;</comment>
                            <comment id="14236927" author="stack" created="Sat, 6 Dec 2014 18:58:15 +0000"  >&lt;p&gt;Nice.  All green.  Please make a branch-1 patch for me to try.  The current master one has lots of rejects.  Its probably just difference in imports but you&apos;d probably be better at the fixup than I. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jurmous&quot; class=&quot;user-hover&quot; rel=&quot;jurmous&quot;&gt;Jurriaan Mous&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14236929" author="stack" created="Sat, 6 Dec 2014 18:58:51 +0000"  >&lt;p&gt;I could apply current patch to trunk as is but would rather apply in two branches in the one go.&lt;/p&gt;</comment>
                            <comment id="14236961" author="jurmous" created="Sat, 6 Dec 2014 20:19:52 +0000"  >&lt;p&gt;Here you go with a branch-1 patch. It was indeed all about imports. I did a file-diff on RpcClient to be sure and there were no differences in actual code between master and branch-1 so al the moved out code should be ok.&lt;/p&gt;</comment>
                            <comment id="14236962" author="hadoopqa" created="Sat, 6 Dec 2014 20:22:08 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12685565/HBASE-12597-v8-branch-1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12685565/HBASE-12597-v8-branch-1.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit b7d1790411a379a27c59514c806f48c91e7186c8.&lt;br/&gt;
  ATTACHMENT ID: 12685565&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 51 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11974//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11974//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14238663" author="stack" created="Mon, 8 Dec 2014 23:28:07 +0000"  >&lt;p&gt;Tried up on a cluster.  Did big linked list on small cluster.  All came back good. No odd logging or errors.&lt;/p&gt;

&lt;p&gt;Committed to branch-1+.  Thanks for the nice patch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jurmous&quot; class=&quot;user-hover&quot; rel=&quot;jurmous&quot;&gt;Jurriaan Mous&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14238687" author="stack" created="Mon, 8 Dec 2014 23:42:15 +0000"  >&lt;p&gt;Just to say that I committed and then had to revert because I put it in w/ wrong commit message.  Here is what I did (two commits, two reverts, and then a final commit)&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
commit a8e646185569ac121993c49cea0cfebfadac1b5c
Author: Jurriaan Mous &amp;lt;jurmous@jurmo.us&amp;gt;
Date:   Sat Dec 6 13:29:15 2014 +0100

    HBASE-12597

    Signed-off-by: stack &amp;lt;stack@apache.org&amp;gt;

commit 1a27cb7b0ff2194567b04ea5076df47b8128aca3
Author: stack &amp;lt;stack@apache.org&amp;gt;
Date:   Mon Dec 8 15:35:50 2014 -0800

    Revert &lt;span class=&quot;code-quote&quot;&gt;&quot;HBASE-12597 Add RpcClient &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; and enable changing of RpcClient implementation (Jurriaan Mous)&quot;&lt;/span&gt;

    Revert partial commit of HBASE-12597

    This reverts commit 4be2034a26020f16faa85937195710a50c0aa1bf.

commit b8ab1b176cfa6e5898f6aedea3c2d7af1fa92675
Author: stack &amp;lt;stack@apache.org&amp;gt;
Date:   Mon Dec 8 15:34:53 2014 -0800

    Revert &lt;span class=&quot;code-quote&quot;&gt;&quot;HBASE-12558 TestHCM.testClusterStatus Unexpected exception, expected&amp;lt;org.apache.hadoop.hbase.regionserver.RegionServerStoppedException&amp;gt; but was&amp;lt;junit.framework.AssertionFailedError&amp;gt; -- ADDED DEBUG&quot;&lt;/span&gt;

    Accidental commit. Reverting.

    This reverts commit 2458be08ed894c33bea48983e3fe390dbbb0fe28.

commit 4be2034a26020f16faa85937195710a50c0aa1bf
Author: stack &amp;lt;stack@apache.org&amp;gt;
Date:   Mon Dec 8 15:13:50 2014 -0800

    HBASE-12597 Add RpcClient &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; and enable changing of RpcClient implementation (Jurriaan Mous)

commit 2458be08ed894c33bea48983e3fe390dbbb0fe28
Author: stack &amp;lt;stack@apache.org&amp;gt;
Date:   Mon Dec 8 15:04:59 2014 -0800

    HBASE-12558 TestHCM.testClusterStatus Unexpected exception, expected&amp;lt;org.apache.hadoop.hbase.regionserver.RegionServerStoppedException&amp;gt; but was&amp;lt;junit.framework.AssertionFailedError&amp;gt; -- ADDED DEBUG

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14238767" author="hudson" created="Tue, 9 Dec 2014 00:56:03 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.0 #552 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/552/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.0/552/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12597&quot; title=&quot;Add RpcClient interface and enable changing of RpcClient implementation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12597&quot;&gt;&lt;del&gt;HBASE-12597&lt;/del&gt;&lt;/a&gt; Add RpcClient interface and enable changing of RpcClient implementation (Jurriaan Mous) (stack: rev 1d880e3f60989437ab10ecc285037b32bc694464)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/ipc/TestDelayedRpc.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/ipc/TestProtoBufRpc.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/security/token/TestTokenAuthentication.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/RpcClientImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/filter/FilterTestingCluster.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/RpcClient.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/Call.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/ipc/TestHBaseClient.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/AbstractRpcClient.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/zookeeper/MetaTableLocator.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/ConnectionId.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestHCM.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/RpcClientFactory.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/PreemptiveFastFailInterceptor.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/IPCUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/ipc/RpcServer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestClientScannerRPCTimeout.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestHMasterRPCException.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/FailedServers.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/security/TestSecureRPC.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/ipc/TestIPC.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/FailedServerException.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/snapshot/TestFlushSnapshotFromClient.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/ConnectionManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestClientTimeouts.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/CallTimeoutException.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestFromClientSideNoCodec.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14238811" author="hudson" created="Tue, 9 Dec 2014 01:29:27 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-TRUNK #5888 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/5888/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/5888/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12597&quot; title=&quot;Add RpcClient interface and enable changing of RpcClient implementation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12597&quot;&gt;&lt;del&gt;HBASE-12597&lt;/del&gt;&lt;/a&gt; Add RpcClient interface and enable changing of RpcClient implementation (Jurriaan Mous) (stack: rev 4be2034a26020f16faa85937195710a50c0aa1bf)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/RpcClientFactory.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/Call.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/ConnectionId.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/FailedServerException.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/RpcClientImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/FailedServers.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/CallTimeoutException.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/AbstractRpcClient.java&lt;br/&gt;
Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12597&quot; title=&quot;Add RpcClient interface and enable changing of RpcClient implementation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12597&quot;&gt;&lt;del&gt;HBASE-12597&lt;/del&gt;&lt;/a&gt; Add RpcClient interface and enable changing of RpcClient implementation (Jurriaan Mous)&quot; (stack: rev 1a27cb7b0ff2194567b04ea5076df47b8128aca3)&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/AbstractRpcClient.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/CallTimeoutException.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/FailedServerException.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/Call.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/RpcClientFactory.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/RpcClientImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/FailedServers.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/ConnectionId.java&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12597&quot; title=&quot;Add RpcClient interface and enable changing of RpcClient implementation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12597&quot;&gt;&lt;del&gt;HBASE-12597&lt;/del&gt;&lt;/a&gt; (stack: rev a8e646185569ac121993c49cea0cfebfadac1b5c)&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/FailedServerException.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/zookeeper/MetaTableLocator.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/security/TestSecureRPC.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestFromClientSideNoCodec.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/RpcClientImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/CallTimeoutException.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/filter/FilterTestingCluster.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/RpcClientFactory.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/ipc/RpcServer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestHCM.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/PreemptiveFastFailInterceptor.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestClientScannerRPCTimeout.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/IPCUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/Call.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/FailedServers.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/ipc/TestHBaseClient.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/ipc/TestProtoBufRpc.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/ipc/TestIPC.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/snapshot/TestFlushSnapshotFromClient.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/ConnectionManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestHMasterRPCException.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/security/token/TestTokenAuthentication.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/ConnectionId.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/AbstractRpcClient.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/ipc/TestDelayedRpc.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestClientTimeouts.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/RpcClient.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14239230" author="jurmous" created="Tue, 9 Dec 2014 10:21:06 +0000"  >&lt;p&gt;Thanks for the commit! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
Would it be possible to do a new SNAPSHOT release so I could more easily use it in the async client?&lt;/p&gt;</comment>
                            <comment id="14239523" author="stack" created="Tue, 9 Dec 2014 15:14:22 +0000"  >&lt;p&gt;I pushed a 1.0.0-SNAPSHOT &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jurmous&quot; class=&quot;user-hover&quot; rel=&quot;jurmous&quot;&gt;Jurriaan Mous&lt;/a&gt;  Let me know if issue.&lt;/p&gt;</comment>
                            <comment id="14241063" author="jurmous" created="Wed, 10 Dec 2014 13:12:12 +0000"  >&lt;p&gt;Thanks for the SNAPSHOT! It works. &lt;/p&gt;

&lt;p&gt;I have been busy with implementing the interface and loading HBase with the async client. I seemed to have missed that to swap out the client in HBase it has to use PayloadCarryingRpcController which cannot currently be used in async context. &lt;/p&gt;

&lt;p&gt;I have opened &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12668&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;HBASE-12668&lt;/a&gt; to address this.&lt;/p&gt;</comment>
                            <comment id="14331772" author="enis" created="Sat, 21 Feb 2015 23:49:00 +0000"  >&lt;p&gt;Closing this issue after 1.0.0 release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12684667" name="HBASE-12597-v1.patch" size="179847" author="jurmous" created="Tue, 2 Dec 2014 15:02:51 +0000"/>
                            <attachment id="12684877" name="HBASE-12597-v2.patch" size="189994" author="jurmous" created="Wed, 3 Dec 2014 12:06:00 +0000"/>
                            <attachment id="12684913" name="HBASE-12597-v3.patch" size="194140" author="jurmous" created="Wed, 3 Dec 2014 15:26:04 +0000"/>
                            <attachment id="12685267" name="HBASE-12597-v4.patch" size="186903" author="stack" created="Fri, 5 Dec 2014 06:56:39 +0000"/>
                            <attachment id="12685080" name="HBASE-12597-v4.patch" size="186903" author="jurmous" created="Thu, 4 Dec 2014 09:43:50 +0000"/>
                            <attachment id="12685299" name="HBASE-12597-v5.patch" size="191066" author="jurmous" created="Fri, 5 Dec 2014 10:19:19 +0000"/>
                            <attachment id="12685361" name="HBASE-12597-v6.patch" size="193798" author="jurmous" created="Fri, 5 Dec 2014 17:43:44 +0000"/>
                            <attachment id="12685541" name="HBASE-12597-v7.patch" size="193975" author="jurmous" created="Sat, 6 Dec 2014 13:34:26 +0000"/>
                            <attachment id="12685565" name="HBASE-12597-v8-branch-1.patch" size="194485" author="jurmous" created="Sat, 6 Dec 2014 20:19:52 +0000"/>
                            <attachment id="12685547" name="HBASE-12597-v8.patch" size="194657" author="jurmous" created="Sat, 6 Dec 2014 16:01:38 +0000"/>
                            <attachment id="12684394" name="HBASE-12597.patch" size="7161" author="jurmous" created="Mon, 1 Dec 2014 11:47:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 29 Nov 2014 18:18:45 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i22vfz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Adds an RpcClient Interface and an RpcClientFactory to get RpcClient implementation.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>client</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>