<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:59:55 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-8937/HBASE-8937.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-8937] createEphemeralNodeAndWatch don&apos;t set watcher if the node is created successfully</title>
                <link>https://issues.apache.org/jira/browse/HBASE-8937</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;CreateEphemeralNodeAndWatch in zkUtil don&apos;t set watcher if the node is created successfully. This is not consistent with the comment and may causes the ActiveMasterManager cannot get events that master node is deleted or changed.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; createEphemeralNodeAndWatch(ZooKeeperWatcher zkw,
      &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; znode, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; [] data)
  &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; KeeperException {
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      zkw.getRecoverableZooKeeper().create(znode, data, createACL(zkw, znode),
          CreateMode.EPHEMERAL);
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (KeeperException.NodeExistsException nee) {
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(!watchAndCheckExists(zkw, znode)) {
        &lt;span class=&quot;code-comment&quot;&gt;// It did exist but now it doesn&apos;t, &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; again
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; createEphemeralNodeAndWatch(zkw, znode, data);
      }
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (InterruptedException e) {
      LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Interrupted&quot;&lt;/span&gt;, e);
      &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.currentThread().interrupt();
    }
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

</description>
                <environment></environment>
        <key id="12657405">HBASE-8937</key>
            <summary>createEphemeralNodeAndWatch don&apos;t set watcher if the node is created successfully</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="liushaohui">Liu Shaohui</reporter>
                        <labels>
                            <label>master</label>
                            <label>wacter</label>
                    </labels>
                <created>Fri, 12 Jul 2013 04:25:27 +0000</created>
                <updated>Sun, 2 Feb 2014 05:43:06 +0000</updated>
                            <resolved>Sun, 2 Feb 2014 05:43:06 +0000</resolved>
                                                                    <component>master</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13721869" author="stack" created="Sun, 28 Jul 2013 05:03:11 +0000"  >&lt;p&gt;Do you have a patch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=liushaohui&quot; class=&quot;user-hover&quot; rel=&quot;liushaohui&quot;&gt;Liu Shaohui&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="13826276" author="fight4gold" created="Tue, 19 Nov 2013 07:27:38 +0000"  >&lt;p&gt;I also wonder how it works without registering a watcher when create master znode.&lt;/p&gt;

&lt;p&gt;Is this code:&lt;br/&gt;
byte [] bytes = ZKUtil.getDataAndWatch(this.watcher, this.watcher.masterAddressZNode);&lt;br/&gt;
that makes it work well?&lt;/p&gt;</comment>
                            <comment id="13888835" author="stack" created="Sun, 2 Feb 2014 05:43:06 +0000"  >&lt;p&gt;Resolving as dup of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10448&quot; title=&quot;ZKUtil create and watch methods don&amp;#39;t set watch in some cases&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10448&quot;&gt;&lt;del&gt;HBASE-10448&lt;/del&gt;&lt;/a&gt;  Reopen please if I have it wrong (At suggestion of our &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jerryhe&quot; class=&quot;user-hover&quot; rel=&quot;jerryhe&quot;&gt;Jerry He&lt;/a&gt;)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12692558">HBASE-10448</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 28 Jul 2013 05:03:11 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>337627</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 45 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1m8hz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>337950</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>