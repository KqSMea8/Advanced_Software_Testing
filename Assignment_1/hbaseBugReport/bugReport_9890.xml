<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:08:32 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-9890/HBASE-9890.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-9890] MR jobs are not working if started by a delegated user</title>
                <link>https://issues.apache.org/jira/browse/HBASE-9890</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;If Map-Reduce jobs are started with by a proxy user that has already the delegation tokens, we get an exception on &quot;obtain token&quot; since the proxy user doesn&apos;t have the kerberos auth.&lt;/p&gt;

&lt;p&gt;For example:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;If we use oozie to execute RowCounter - oozie will get the tokens required (HBASE_AUTH_TOKEN) and it will start the RowCounter. Once the RowCounter tries to obtain the token, it will get an exception.&lt;/li&gt;
	&lt;li&gt;If we use oozie to execute LoadIncrementalHFiles - oozie will get the tokens required (HDFS_DELEGATION_TOKEN) and it will start the LoadIncrementalHFiles. Once the LoadIncrementalHFiles tries to obtain the token, it will get an exception.&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 org.apache.hadoop.hbase.security.AccessDeniedException: Token generation only allowed &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Kerberos authenticated clients
    at org.apache.hadoop.hbase.security.token.TokenProvider.getAuthenticationToken(TokenProvider.java:87)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.hadoop.ipc.RemoteException(java.io.IOException): Delegation Token can be issued only with kerberos or web authentication
	at org.apache.hadoop.hdfs.DFSClient.getDelegationToken(DFSClient.java:783)
	at org.apache.hadoop.hdfs.DistributedFileSystem.getDelegationToken(DistributedFileSystem.java:868)
	at org.apache.hadoop.fs.FileSystem.collectDelegationTokens(FileSystem.java:509)
	at org.apache.hadoop.fs.FileSystem.addDelegationTokens(FileSystem.java:487)
	at org.apache.hadoop.mapreduce.security.TokenCache.obtainTokensForNamenodesInternal(TokenCache.java:130)
	at org.apache.hadoop.mapreduce.security.TokenCache.obtainTokensForNamenodesInternal(TokenCache.java:111)
	at org.apache.hadoop.mapreduce.security.TokenCache.obtainTokensForNamenodes(TokenCache.java:85)
	at org.apache.hadoop.filecache.TrackerDistributedCacheManager.getDelegationTokens(TrackerDistributedCacheManager.java:949)
	at org.apache.hadoop.mapred.JobClient.copyAndConfigureFiles(JobClient.java:854)
	at org.apache.hadoop.mapred.JobClient.copyAndConfigureFiles(JobClient.java:743)
	at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:945)
	at org.apache.hadoop.mapreduce.Job.submit(Job.java:566)
	at org.apache.hadoop.mapreduce.Job.waitForCompletion(Job.java:596)
	at org.apache.hadoop.hbase.mapreduce.RowCounter.main(RowCounter.java:173)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12677485">HBASE-9890</key>
            <summary>MR jobs are not working if started by a delegated user</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mbertozzi">Matteo Bertozzi</assignee>
                                    <reporter username="mbertozzi">Matteo Bertozzi</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Nov 2013 00:52:24 +0000</created>
                <updated>Tue, 26 Nov 2013 05:53:45 +0000</updated>
                            <resolved>Sat, 9 Nov 2013 01:44:28 +0000</resolved>
                                    <version>0.98.0</version>
                    <version>0.94.12</version>
                    <version>0.96.0</version>
                                    <fixVersion>0.98.0</fixVersion>
                    <fixVersion>0.96.1</fixVersion>
                    <fixVersion>0.94.14</fixVersion>
                                    <component>mapreduce</component>
                    <component>security</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>11</watches>
                                                                <comments>
                            <comment id="13813515" author="ndimiduk" created="Tue, 5 Nov 2013 01:16:30 +0000"  >&lt;p&gt;Patch looks good to me (I&apos;m shaking my head at code duplication across these namespaces).&lt;/p&gt;

&lt;p&gt;This fixes the issue for your secured Oozie environment?&lt;/p&gt;</comment>
                            <comment id="13813519" author="mbertozzi" created="Tue, 5 Nov 2013 01:25:50 +0000"  >&lt;blockquote&gt;&lt;p&gt;Patch looks good to me (I&apos;m shaking my head at code duplication across these namespaces).&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;yeah... suggestions? I don&apos;t think adding the check in obtainAuthTokenForJob() is the right thing, since you may don&apos;t want always get the cached one.. so maybe adding a new method &quot;check the cache and create if not present&quot; (no idea on how to name it).&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;This fixes the issue for your secured Oozie environment?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;yes, the patch fixes the problems described&lt;/p&gt;</comment>
                            <comment id="13813528" author="ghelmling" created="Tue, 5 Nov 2013 01:34:09 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      &lt;span class=&quot;code-comment&quot;&gt;// propagate delegation related props from launcher job to MR job
&lt;/span&gt;+      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.getenv(&lt;span class=&quot;code-quote&quot;&gt;&quot;HADOOP_TOKEN_FILE_LOCATION&quot;&lt;/span&gt;) != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
+        job.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;mapreduce.job.credentials.binary&quot;&lt;/span&gt;,
+                &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.getenv(&lt;span class=&quot;code-quote&quot;&gt;&quot;HADOOP_TOKEN_FILE_LOCATION&quot;&lt;/span&gt;));
+      }
+
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;What is this part doing?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+        Token&amp;lt;?&amp;gt; authToken = user.getToken(&lt;span class=&quot;code-quote&quot;&gt;&quot;HBASE_AUTH_TOKEN&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Use &lt;tt&gt;AuthenticationTokenIdentifier.AUTH_TOKEN_TYPE.toString()&lt;/tt&gt; here instead of duplicating the identifier, and same in the other util class as well.&lt;/p&gt;</comment>
                            <comment id="13813532" author="mbertozzi" created="Tue, 5 Nov 2013 01:40:54 +0000"  >&lt;blockquote&gt;&lt;p&gt;What is this part doing?  HADOOP_TOKEN_FILE_LOCATION&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This solves the second stack trace, the one starting from the job.submit(). There&apos;s an HDFS token requested from TokenCache.obtainTokensForNamenodes()&lt;/p&gt;</comment>
                            <comment id="13813543" author="ghelmling" created="Tue, 5 Nov 2013 01:49:37 +0000"  >&lt;p&gt;I see.  Then that bit might need to be restructured a little bit.  It&apos;s currently protected by:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (userProvider.isHBaseSecurityEnabled()) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;but it seems like it should be pulled above that block and be protected by a check on &lt;tt&gt;userProvider.isSecurityEnabled()&lt;/tt&gt;, since HDFS secure auth could be enabled without HBase secure auth.&lt;/p&gt;</comment>
                            <comment id="13813554" author="mbertozzi" created="Tue, 5 Nov 2013 02:00:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ghelmling&quot; class=&quot;user-hover&quot; rel=&quot;ghelmling&quot;&gt;Gary Helmling&lt;/a&gt; right, so I should also move out the fs token request in loadIncrementalHFiles, since you can get secure HDFS but not secure HBase, right? &lt;a href=&quot;https://github.com/apache/hbase/blob/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/LoadIncrementalHFiles.java#L256&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hbase/blob/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/LoadIncrementalHFiles.java#L256&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13813573" author="ghelmling" created="Tue, 5 Nov 2013 02:27:05 +0000"  >&lt;blockquote&gt;&lt;p&gt;so I should also move out the fs token request in loadIncrementalHFiles, since you can get secure HDFS but not secure HBase, right?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That is a good question.  In that section, the entire SecureBulkLoadClient usage seems to be conditioned on HBase security being enabled though.  Would SecureBulkLoadClient be needed (and does it work) if HDFS secure auth is enabled but not HBase security?  If not, then that part seems okay as it is.&lt;/p&gt;

&lt;p&gt;The secure bulk load implementation seems to assume both HDFS security and HBase security are enabled (SecureBulkLoadEndpoint for example assumes that AccessController is enabled).  So it seems okay to leave that bit of LoadIncrementalHFiles as it is, unless you see problems from the Oozie case you&apos;re tackling.&lt;/p&gt;</comment>
                            <comment id="13813582" author="mbertozzi" created="Tue, 5 Nov 2013 02:44:41 +0000"  >&lt;blockquote&gt;&lt;p&gt;Would SecureBulkLoadClient be needed (and does it work) if HDFS secure auth is enabled but not HBase security? If not, then that part seems okay as it is.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;My guess is that the SecureBulkLoad is required if HDFS is secure, since it plays with the file rights. but I&apos;ve to look more into it, and see if it works with hbase security off. I&apos;ll do that in another jira and keep the current assumption with hbase security on.&lt;/p&gt;</comment>
                            <comment id="13813583" author="hadoopqa" created="Tue, 5 Nov 2013 02:49:11 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12612079/HBASE-9890-v0.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12612079/HBASE-9890-v0.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 2 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 site&lt;/font&gt;.  The patch appears to cause mvn site goal to fail.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.regionserver.TestHRegionBusyWait&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.TestHRegion&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 1 zombie test(s): 	at org.apache.hadoop.hbase.TestZooKeeper.testRegionAssignmentAfterMasterRecoveryDueToZKExpiry(TestZooKeeper.java:486)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7732//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7732//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7732//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7732//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7732//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7732//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7732//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7732//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7732//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7732//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7732//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7732//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7732//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7732//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7732//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7732//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7732//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7732//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7732//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7732//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7732//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7732//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13813853" author="hadoopqa" created="Tue, 5 Nov 2013 11:14:43 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12612094/HBASE-9890-v1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12612094/HBASE-9890-v1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 2 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 site&lt;/font&gt;.  The patch appears to cause mvn site goal to fail.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7736//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7736//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7736//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7736//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7736//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7736//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7736//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7736//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7736//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7736//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7736//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7736//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7736//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7736//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7736//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7736//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7736//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7736//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7736//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7736//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7736//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7736//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13814101" author="ndimiduk" created="Tue, 5 Nov 2013 18:29:18 +0000"  >&lt;p&gt;It&apos;s also possible to go the other way, ie secured HBase but not secured HDFS: &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9482&quot; title=&quot;Do not enforce secure Hadoop for secure HBase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9482&quot;&gt;&lt;del&gt;HBASE-9482&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13814188" author="ghelmling" created="Tue, 5 Nov 2013 19:43:01 +0000"  >&lt;p&gt;I&apos;ve looked through the secure bulk load code in a little more detail, but I still can&apos;t say I understand why use of SecureBulkLoadClient in LoadIncrementalHFiles is conditioned on isHBaseSecurityEnabled(), instead of isHadoopSecurityEnabled().  It seems like they should be conditioned on isHadoopSecurityEnabled() instead, since this is all in place to pass through an HDFS delegation token for moving the HFiles on secure Hadoop.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbertozzi&quot; class=&quot;user-hover&quot; rel=&quot;mbertozzi&quot;&gt;Matteo Bertozzi&lt;/a&gt; Makes sense to me to change the LoadIncrementatlHFiles conditions here as well, assuming that doesn&apos;t cascade into broken tests.  But I&apos;m also okay with pushing that part into a separate JIRA, since it&apos;s somewhat independent of the original issue.  The rest of the patch looks good to me.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=toffer&quot; class=&quot;user-hover&quot; rel=&quot;toffer&quot;&gt;Francis Liu&lt;/a&gt; Any insights into why SecureBulkLoadClient usage is conditioned on HBase security being enabled instead of HDFS security?&lt;/p&gt;</comment>
                            <comment id="13814213" author="ndimiduk" created="Tue, 5 Nov 2013 20:06:18 +0000"  >&lt;blockquote&gt;&lt;p&gt;use of SecureBulkLoadClient in LoadIncrementalHFiles is conditioned on isHBaseSecurityEnabled(), instead of isHadoopSecurityEnabled().&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think this is a question of practicality &amp;#8211; LoadIncrementalHFiles can only use the SecureBulkLoadClient when the appropriate coprocessor is available on the RS. It&apos;s only available when HBase security is enabled.&lt;/p&gt;</comment>
                            <comment id="13814309" author="ghelmling" created="Tue, 5 Nov 2013 22:10:52 +0000"  >&lt;blockquote&gt;&lt;p&gt;I think this is a question of practicality &#8211; LoadIncrementalHFiles can only use the SecureBulkLoadClient when the appropriate coprocessor is available on the RS. It&apos;s only available when HBase security is enabled.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Whether &lt;tt&gt;hbase.security.authentication == &quot;kerberos&quot;&lt;/tt&gt; has nothing to do with whether SecureBulkLoadEndpoint is loaded on a table&apos;s regions.  The coprocessor needs to be configured independently (via hbase.coprocessor.region.classes, hbase.coprocessor.user.region.classes, or directly on the table).  It does also assume that the AccessController coprocessor is enabled, but that again can be independent of authentication.&lt;/p&gt;

&lt;p&gt;I may be missing something, but it seems like the main use of SecureBulkLoadEndpoint is to move the bulk load HFiles to a staging directory, proxying to HDFS as the end user.  Even the AccessController checks (which should only happen if AccessController is enabled), can be done independently of whether HBase requires kerberos authentication (you can do access control without kerberos auth).  So the secure bulk loading seems to me to only be required when HDFS secure auth is enabled, and should be usable in that case regardless of the value of hbase.security.authentication.&lt;/p&gt;

&lt;p&gt;There is a bigger issue here, in that we are amassing a pile of security configurations that are all exposed (and must be put together) by end users.  But I think that is solvable by providing a simpler end user configuration, while still retaining the correct granularity of configuration checks within the code itself. &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4817&quot; title=&quot;Simplify configuration of security components&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4817&quot;&gt;HBASE-4817&lt;/a&gt; is a long standing issue to simplify the end user configuration.&lt;/p&gt;</comment>
                            <comment id="13814363" author="ghelmling" created="Tue, 5 Nov 2013 22:58:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbertozzi&quot; class=&quot;user-hover&quot; rel=&quot;mbertozzi&quot;&gt;Matteo Bertozzi&lt;/a&gt; I created &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9897&quot; title=&quot;Clean up some security configuration checks in LoadIncrementalHFiles&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9897&quot;&gt;HBASE-9897&lt;/a&gt; to handle any additional LoadIncrementalHFiles changes separately.  It seemed to be expanding the scope of this issue.&lt;/p&gt;</comment>
                            <comment id="13814378" author="ghelmling" created="Tue, 5 Nov 2013 23:13:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbertozzi&quot; class=&quot;user-hover&quot; rel=&quot;mbertozzi&quot;&gt;Matteo Bertozzi&lt;/a&gt; somehow I missed your earlier comment that you would handle any secure bulk loading changes separately.  Feel free to close my issue as a dupe if you&apos;ve already opened one.&lt;/p&gt;

&lt;p&gt;+1 on the v1 patch.&lt;/p&gt;</comment>
                            <comment id="13814522" author="mbertozzi" created="Wed, 6 Nov 2013 02:09:49 +0000"  >&lt;p&gt;In 94 I have to use the &quot;HBASE_AUTH_TOKEN&quot; string because AuthenticationTokenIdentifier.AUTH_TOKEN_TYPE requires -Psecurity&lt;/p&gt;</comment>
                            <comment id="13814524" author="hadoopqa" created="Wed, 6 Nov 2013 02:12:33 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12612303/HBASE-9890-94-v1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12612303/HBASE-9890-94-v1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7741//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7741//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13814592" author="toffer" created="Wed, 6 Nov 2013 04:18:08 +0000"  >&lt;p&gt;Sorry late to the party here. Went through the patch looks good. &lt;/p&gt;

&lt;p&gt;We should probably address the case where we&apos;re talking to more than one hbase cluster hence more than one hbase DT token. We should probably support the mechanism hbase provided via QUORUM_ADDRESS. As well as oozie outright retrieve a bunch of hbase delegation tokens and us just making sure that gets passed onto the job.&lt;/p&gt;</comment>
                            <comment id="13814594" author="toffer" created="Wed, 6 Nov 2013 04:25:48 +0000"  >&lt;p&gt;To answer the question why I chose SecureBulkLoad to be keyed on isHBaseSecurity enabled. It was mainly because I wanted to keep things simple, I was under the assumption that most would choose to secure the entire stack or secure none. For the non-secure hbase + secure hdfs, I&apos;d expect the user to just run &quot;chmod 777&quot; before calling LoadIncrementalHFiles. Having said that it prolly won&apos;t hurt as a convenience to the user if we key it on isHadoopSecurityEnabled.&lt;/p&gt;</comment>
                            <comment id="13814600" author="mbertozzi" created="Wed, 6 Nov 2013 04:47:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=toffer&quot; class=&quot;user-hover&quot; rel=&quot;toffer&quot;&gt;Francis Liu&lt;/a&gt; do you have a suggestion for how to fix the quorum address? to me that stuff in initCredentials() seems there just because CopyTable requires the 2 cluster connections. What if you have 3+ cluster? initCredentials() is no longer working.. also how do you fetch the correct token for each cluster? Also you should let oozie or others to fetch more than one token.&lt;br/&gt;
My guess is that if you have the MR job against more than one cluster you have to writing something manually.&lt;/p&gt;</comment>
                            <comment id="13815447" author="ghelmling" created="Wed, 6 Nov 2013 23:34:00 +0000"  >&lt;p&gt;In the case that Francis points out, whether using CopyTable or something custom, you would actually have more than one token of type HBASE_AUTH_TOKEN.  Does Oozie support running CopyTable between two clusters?  If so, it needs to fetch the delegation token for each, but this patch wouldn&apos;t pass along both, only the first that it sees.  Obtaining the token from UGI by type alone does not guarantee it is associated with the given cluster.  That need to match the token service against the cluster ID.&lt;/p&gt;

&lt;p&gt;In fact, I think the change as it is will cause CopyTable between 2 secure HBase clusters to fail.  The change in this section of o.a.h.h.mapreduce.TableMapReduce.initCredentials() is the problem:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
        &lt;span class=&quot;code-comment&quot;&gt;// init credentials &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; remote cluster
&lt;/span&gt;        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; quorumAddress = job.getConfiguration().get(TableOutputFormat.QUORUM_ADDRESS);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (quorumAddress != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
          Configuration peerConf = HBaseConfiguration.create(job.getConfiguration());
          ZKUtil.applyClusterKeyToConf(peerConf, quorumAddress);
-          userProvider.getCurrent().obtainAuthTokenForJob(peerConf, job);
+          user.obtainAuthTokenForJob(peerConf, job);
         }
-        userProvider.getCurrent().obtainAuthTokenForJob(job.getConfiguration(), job);
+
+        Token&amp;lt;?&amp;gt; authToken = user.getToken(AuthenticationTokenIdentifier.AUTH_TOKEN_TYPE.toString());
+        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (authToken == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When running between 2 secure clusters, we&apos;ll obtain a token against one cluster (using the config value of TableOutputFormat.QUORUM_ADDRESS), then the following call to user.getToken(&quot;HBASE_AUTH_TOKEN&quot;) will return the token just obtained, so we never fetch the second token.&lt;/p&gt;

&lt;p&gt;You can use AuthenticationTokenSelector.selectToken() to pull out the correct token for a given cluster.  But first you will need the cluster ID for the cluster you&apos;re connecting to.&lt;/p&gt;</comment>
                            <comment id="13815503" author="mbertozzi" created="Thu, 7 Nov 2013 00:41:54 +0000"  >&lt;p&gt;what about something like v2... &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;fetch the ClusterId&lt;/li&gt;
	&lt;li&gt;use AuthenticationTokenSelector to select the token based on the clusterId&lt;/li&gt;
	&lt;li&gt;if the token is not present ask for a new one&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Is there a way to get the ClusterId without connecting to zookeeper? should I try to get the token without connecting to zookeeper if we&apos;ve only one token and there is no quorum address specified?&lt;/p&gt;</comment>
                            <comment id="13815556" author="ghelmling" created="Thu, 7 Nov 2013 02:09:43 +0000"  >&lt;p&gt;v2 looks good.  A couple comments:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;instead of ZKClusterId.getUUIDForCluster() and converting back to String, you can just use ZKClusterId.readClusterIdZNode().&lt;/li&gt;
	&lt;li&gt;I think we need the same changes in mapred.TableMapReduceUtil.  Although that one doesn&apos;t have the 2 ZK quorum support, if more than one HBASE_AUTH_TOKEN is present for the UGI, you could still wind up returning the wrong one and adding it to the job.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13815607" author="hadoopqa" created="Thu, 7 Nov 2013 03:33:05 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12612491/HBASE-9890-v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12612491/HBASE-9890-v2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 4 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 site&lt;/font&gt;.  The patch appears to cause mvn site goal to fail.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7767//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7767//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7767//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7767//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7767//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7767//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7767//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7767//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7767//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7767//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7767//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7767//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7767//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7767//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7767//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7767//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7767//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7767//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7767//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7767//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7767//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7767//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13816120" author="toffer" created="Thu, 7 Nov 2013 16:51:33 +0000"  >&lt;p&gt;V2 looks good.  +1 on fixing mapred.*.&lt;/p&gt;</comment>
                            <comment id="13816155" author="jdcryans" created="Thu, 7 Nov 2013 17:31:15 +0000"  >&lt;p&gt;The mapred package is deprecated in 0.94, meaning it should have been removed in 0.96, so I don&apos;t think we need the fix there.&lt;/p&gt;</comment>
                            <comment id="13816250" author="ndimiduk" created="Thu, 7 Nov 2013 18:52:59 +0000"  >&lt;p&gt;The mapred package is marked deprecated because it&apos;s marked deprecated in Hadoop. We should &lt;b&gt;not&lt;/b&gt; drop support for it until Hadoop does. Please make sure this feature is compatible in both implementations. If you can recommend paths to refactor so as to reduce code duplication, I&apos;m all ears &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13816460" author="ghelmling" created="Thu, 7 Nov 2013 21:40:01 +0000"  >&lt;p&gt;Reviewed v3.&lt;/p&gt;

&lt;p&gt;In mapred.TableMapReduceUtil, looks like there is a slight regression from v2:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void initCredentials(JobConf job) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
     UserProvider userProvider = UserProvider.instantiate(job);
-    &lt;span class=&quot;code-comment&quot;&gt;// login the server principal (&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; using secure Hadoop)
&lt;/span&gt;     &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (userProvider.isHBaseSecurityEnabled()) {
+      &lt;span class=&quot;code-comment&quot;&gt;// propagate delegation related props from launcher job to MR job
&lt;/span&gt;+      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.getenv(&lt;span class=&quot;code-quote&quot;&gt;&quot;HADOOP_TOKEN_FILE_LOCATION&quot;&lt;/span&gt;) != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
+        job.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;mapreduce.job.credentials.binary&quot;&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.getenv(&lt;span class=&quot;code-quote&quot;&gt;&quot;HADOOP_TOKEN_FILE_LOCATION&quot;&lt;/span&gt;));
+      }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Shouldn&apos;t the check and use of HADOOP_TOKEN_FILE_LOCATION be pulled out of the userProvider.isHBaseSecurityEnabled() block and conditioned on userProvider.isHadoopSecurityEnabled()?&lt;/p&gt;

&lt;p&gt;The same applies to mapreduce.TableMapReduceUtil.initCredentials() though I didn&apos;t spot the issue there in earlier versions.  Let me know if I somehow have that wrong.&lt;/p&gt;

&lt;p&gt;The rest of the patch looks good.&lt;/p&gt;</comment>
                            <comment id="13816506" author="ghelmling" created="Thu, 7 Nov 2013 22:15:53 +0000"  >&lt;p&gt;+1 on v4 patch.  Let&apos;s run it through HadoopQA one more time.&lt;/p&gt;</comment>
                            <comment id="13816844" author="hadoopqa" created="Fri, 8 Nov 2013 00:29:08 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12612715/HBASE-9890-v4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12612715/HBASE-9890-v4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 site&lt;/font&gt;.  The patch appears to cause mvn site goal to fail.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7783//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7783//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7783//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7783//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7783//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7783//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7783//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7783//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7783//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7783//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7783//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7783//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7783//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7783//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7783//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7783//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7783//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7783//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7783//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7783//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7783//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7783//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13816854" author="ghelmling" created="Fri, 8 Nov 2013 00:44:46 +0000"  >&lt;p&gt;+1 on 94 v4 patch as well.&lt;/p&gt;</comment>
                            <comment id="13817059" author="hadoopqa" created="Fri, 8 Nov 2013 06:57:40 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12612749/HBASE-9890-94-v4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12612749/HBASE-9890-94-v4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7787//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7787//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13818052" author="hudson" created="Sat, 9 Nov 2013 07:15:26 +0000"  >&lt;p&gt;FAILURE: Integrated in hbase-0.96-hadoop2 #117 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.96-hadoop2/117/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.96-hadoop2/117/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9890&quot; title=&quot;MR jobs are not working if started by a delegated user&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9890&quot;&gt;&lt;del&gt;HBASE-9890&lt;/del&gt;&lt;/a&gt; MR jobs are not working if started by a delegated user (mbertozzi: rev 1540240)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-common/src/main/java/org/apache/hadoop/hbase/security/User.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/main/java/org/apache/hadoop/hbase/mapred/TableMapReduceUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/LoadIncrementalHFiles.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13818073" author="hudson" created="Sat, 9 Nov 2013 08:40:24 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.94-security #332 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/332/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/332/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9890&quot; title=&quot;MR jobs are not working if started by a delegated user&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9890&quot;&gt;&lt;del&gt;HBASE-9890&lt;/del&gt;&lt;/a&gt; MR jobs are not working if started by a delegated user (mbertozzi: rev 1540241)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/mapred/TableMapReduceUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/mapreduce/LoadIncrementalHFiles.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/security/User.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13818075" author="hudson" created="Sat, 9 Nov 2013 08:42:16 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.94 #1198 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/1198/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/1198/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9890&quot; title=&quot;MR jobs are not working if started by a delegated user&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9890&quot;&gt;&lt;del&gt;HBASE-9890&lt;/del&gt;&lt;/a&gt; MR jobs are not working if started by a delegated user (mbertozzi: rev 1540241)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/mapred/TableMapReduceUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/mapreduce/LoadIncrementalHFiles.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/security/User.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13818097" author="hudson" created="Sat, 9 Nov 2013 10:34:28 +0000"  >&lt;p&gt;SUCCESS: Integrated in hbase-0.96 #186 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.96/186/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.96/186/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9890&quot; title=&quot;MR jobs are not working if started by a delegated user&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9890&quot;&gt;&lt;del&gt;HBASE-9890&lt;/del&gt;&lt;/a&gt; MR jobs are not working if started by a delegated user (mbertozzi: rev 1540240)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-common/src/main/java/org/apache/hadoop/hbase/security/User.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/main/java/org/apache/hadoop/hbase/mapred/TableMapReduceUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/LoadIncrementalHFiles.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13818107" author="hudson" created="Sat, 9 Nov 2013 11:12:50 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-TRUNK #4677 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4677/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4677/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9890&quot; title=&quot;MR jobs are not working if started by a delegated user&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9890&quot;&gt;&lt;del&gt;HBASE-9890&lt;/del&gt;&lt;/a&gt; MR jobs are not working if started by a delegated user (mbertozzi: rev 1540242)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-common/src/main/java/org/apache/hadoop/hbase/security/User.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/mapred/TableMapReduceUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/LoadIncrementalHFiles.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13818123" author="hudson" created="Sat, 9 Nov 2013 12:09:01 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #834 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/834/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/834/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9890&quot; title=&quot;MR jobs are not working if started by a delegated user&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9890&quot;&gt;&lt;del&gt;HBASE-9890&lt;/del&gt;&lt;/a&gt; MR jobs are not working if started by a delegated user (mbertozzi: rev 1540242)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-common/src/main/java/org/apache/hadoop/hbase/security/User.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/mapred/TableMapReduceUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/LoadIncrementalHFiles.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12677670">HBASE-9897</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12612072" name="HBASE-9890-94-v0.patch" size="6114" author="mbertozzi" created="Tue, 5 Nov 2013 00:52:57 +0000"/>
                            <attachment id="12612303" name="HBASE-9890-94-v1.patch" size="6332" author="mbertozzi" created="Wed, 6 Nov 2013 02:09:49 +0000"/>
                            <attachment id="12612749" name="HBASE-9890-94-v4.patch" size="9745" author="mbertozzi" created="Fri, 8 Nov 2013 00:38:07 +0000"/>
                            <attachment id="12612079" name="HBASE-9890-v0.patch" size="6719" author="mbertozzi" created="Tue, 5 Nov 2013 01:06:18 +0000"/>
                            <attachment id="12612094" name="HBASE-9890-v1.patch" size="7732" author="mbertozzi" created="Tue, 5 Nov 2013 02:44:41 +0000"/>
                            <attachment id="12612491" name="HBASE-9890-v2.patch" size="9078" author="mbertozzi" created="Thu, 7 Nov 2013 00:41:54 +0000"/>
                            <attachment id="12612670" name="HBASE-9890-v3.patch" size="10916" author="mbertozzi" created="Thu, 7 Nov 2013 19:22:28 +0000"/>
                            <attachment id="12612715" name="HBASE-9890-v4.patch" size="11034" author="mbertozzi" created="Thu, 7 Nov 2013 21:57:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 5 Nov 2013 01:16:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>356860</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 5 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1piqf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>357150</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>