<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:20:58 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-11188/HBASE-11188.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-11188] &quot;Inconsistent configuration&quot; for SchemaMetrics is always shown</title>
                <link>https://issues.apache.org/jira/browse/HBASE-11188</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Some users have been complaining about this message:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ERROR org.apache.hadoop.hbase.regionserver.metrics.SchemaMetrics: Inconsistent configuration. Previous configuration for using table name in metrics: true, new configuration: false
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The interesting thing is that we see it with default configurations, which made me think that some code path must have been passing the wrong thing. I found that if SchemaConfigured is passed a null Configuration in its constructor that it will then pass null to SchemaMetrics#configureGlobally which will interpret useTableName as being false:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void configureGlobally(Configuration conf) {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (conf != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
      &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; useTableNameNew =
          conf.getBoolean(SHOW_TABLE_NAME_CONF_KEY, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
      setUseTableName(useTableNameNew);
    } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
      setUseTableName(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
    }
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It should be set to true since that&apos;s the new default, meaning we missed it in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5671&quot; title=&quot;hbase.metrics.showTableName should be true by default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5671&quot;&gt;&lt;del&gt;HBASE-5671&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I found one code path that passes a null configuration, StoreFile.Reader extends SchemaConfigured and uses the constructor that only passes a Path, so the Configuration is set to null.&lt;/p&gt;

&lt;p&gt;I&apos;m planning on just passing true instead of false, fixing the problem for almost everyone (those that disable this feature will get the error message). IMO it&apos;s not worth more efforts since it&apos;s a 0.94-only problem and it&apos;s not actually doing anything bad.&lt;/p&gt;

&lt;p&gt;I&apos;m closing both &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10990&quot; title=&quot;Running CompressionTest yields unrelated schema metrics configuration errors.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10990&quot;&gt;&lt;del&gt;HBASE-10990&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10946&quot; title=&quot;hbase.metrics.showTableName  cause run &#8220;hbase xxx.Hfile&#8221;  report Inconsistent configuration&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10946&quot;&gt;&lt;del&gt;HBASE-10946&lt;/del&gt;&lt;/a&gt; as duplicates.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12714596">HBASE-11188</key>
            <summary>&quot;Inconsistent configuration&quot; for SchemaMetrics is always shown</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jdcryans">Jean-Daniel Cryans</assignee>
                                    <reporter username="jdcryans">Jean-Daniel Cryans</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 May 2014 19:51:00 +0000</created>
                <updated>Wed, 11 Jun 2014 02:53:04 +0000</updated>
                            <resolved>Fri, 16 May 2014 17:04:23 +0000</resolved>
                                    <version>0.94.19</version>
                                    <fixVersion>0.94.20</fixVersion>
                                    <component>metrics</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13999171" author="jdcryans" created="Thu, 15 May 2014 19:54:10 +0000"  >&lt;p&gt;Proposing this one-liner patch, passes both TestSchemaConfigured and TestSchemaMetrics.&lt;/p&gt;</comment>
                            <comment id="13999185" author="jdcryans" created="Thu, 15 May 2014 20:06:41 +0000"  >&lt;p&gt;To be extra correct there&apos;s another line that should default to true, attaching the patch.&lt;/p&gt;</comment>
                            <comment id="13999815" author="mbertozzi" created="Fri, 16 May 2014 14:09:12 +0000"  >&lt;p&gt;+1 on v2&lt;/p&gt;</comment>
                            <comment id="13999997" author="jdcryans" created="Fri, 16 May 2014 17:04:23 +0000"  >&lt;p&gt;Grazie Matteo, I committed the patch to 0.94&lt;/p&gt;</comment>
                            <comment id="14003428" author="hudson" created="Tue, 20 May 2014 15:19:39 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.94-security #484 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/484/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/484/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11188&quot; title=&quot;&amp;quot;Inconsistent configuration&amp;quot; for SchemaMetrics is always shown&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11188&quot;&gt;&lt;del&gt;HBASE-11188&lt;/del&gt;&lt;/a&gt; &quot;Inconsistent configuration&quot; for SchemaMetrics is always shown (jdcryans: rev 1595266)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/metrics/SchemaMetrics.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14003452" author="hudson" created="Tue, 20 May 2014 15:33:36 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.94 #1368 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/1368/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/1368/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11188&quot; title=&quot;&amp;quot;Inconsistent configuration&amp;quot; for SchemaMetrics is always shown&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11188&quot;&gt;&lt;del&gt;HBASE-11188&lt;/del&gt;&lt;/a&gt; &quot;Inconsistent configuration&quot; for SchemaMetrics is always shown (jdcryans: rev 1595266)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/metrics/SchemaMetrics.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14003636" author="hudson" created="Tue, 20 May 2014 17:03:45 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.94-on-Hadoop-2 #85 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-on-Hadoop-2/85/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-on-Hadoop-2/85/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11188&quot; title=&quot;&amp;quot;Inconsistent configuration&amp;quot; for SchemaMetrics is always shown&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11188&quot;&gt;&lt;del&gt;HBASE-11188&lt;/del&gt;&lt;/a&gt; &quot;Inconsistent configuration&quot; for SchemaMetrics is always shown (jdcryans: rev 1595266)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/metrics/SchemaMetrics.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14003642" author="hudson" created="Tue, 20 May 2014 17:05:48 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.94-JDK7 #136 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-JDK7/136/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-JDK7/136/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11188&quot; title=&quot;&amp;quot;Inconsistent configuration&amp;quot; for SchemaMetrics is always shown&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11188&quot;&gt;&lt;del&gt;HBASE-11188&lt;/del&gt;&lt;/a&gt; &quot;Inconsistent configuration&quot; for SchemaMetrics is always shown (jdcryans: rev 1595266)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/metrics/SchemaMetrics.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12645081" name="HBASE-11188-0.94-v2.patch" size="750" author="jdcryans" created="Thu, 15 May 2014 20:06:41 +0000"/>
                            <attachment id="12645078" name="HBASE-11188-0.94.patch" size="562" author="jdcryans" created="Thu, 15 May 2014 19:54:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 16 May 2014 14:09:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>392909</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 30 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1vnrr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>393079</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Region servers with the default value for hbase.metrics.showTableName will stop showing the error message &amp;quot;ERROR org.apache.hadoop.hbase.regionserver.metrics.SchemaMetrics: Inconsistent configuration. Previous configuration for using table name in metrics: true, new configuration: false&amp;quot;.&lt;br/&gt;
Region servers configured with hbase.metrics.showTableName=false should now get a message like this one: &amp;quot;ERROR org.apache.hadoop.hbase.regionserver.metrics.SchemaMetrics: Inconsistent configuration. Previous configuration for using table name in metrics: false, new configuration: true&amp;quot;, and it&amp;#39;s nothing to be concerned about.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>