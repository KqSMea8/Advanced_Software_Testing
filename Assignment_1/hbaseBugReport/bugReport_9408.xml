<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:04:10 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-9408/HBASE-9408.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-9408] Fix proto for ServerName so startcode cannot be negative</title>
                <link>https://issues.apache.org/jira/browse/HBASE-9408</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;From Devaraj on the mailing list:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
On Sat, Aug 31, 2013 at 11:23 AM, Devaraj Das &amp;lt;ddas@hortonworks.com&amp;gt; wrote:
Thanks &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; making the RC, Stack. I bumped into one thing which I thought I
should bring up in the context of singularity - the ServerName message in
hbase.proto should have the start_code as a signed &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;. We allow &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; -1 (
ServerName.NON_STARTCODE) as a start_code. Hence.. Yes it can be worked
around, and, maybe there won&apos;t any wire-compat issues &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; we make the change
later (not sure about it) but I think we should fix it now. What &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; you
think?

For illustration, here is the proposed fix.

diff --git a/hbase-protocol/src/main/protobuf/hbase.proto
b/hbase-protocol/src/main/protobuf/hbase.proto
index 08061e5..2f9a8d1 100644
--- a/hbase-protocol/src/main/protobuf/hbase.proto
+++ b/hbase-protocol/src/main/protobuf/hbase.proto
@@ -120,7 +120,7 @@ &lt;span class=&quot;code-keyword&quot;&gt;enum&lt;/span&gt; CompareType {
 message ServerName {
   required string host_name = 1;
   optional uint32 port = 2;
-  optional uint64 start_code = 3;
+  optional int64 start_code = 3;
 }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Will make this fix in next RC if there is one.  Filing against 0.96.1 for now.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12666473">HBASE-9408</key>
            <summary>Fix proto for ServerName so startcode cannot be negative</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="stack">stack</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Sat, 31 Aug 2013 22:16:23 +0000</created>
                <updated>Wed, 27 Nov 2013 23:26:31 +0000</updated>
                                            <version>0.96.0</version>
                                                    <component>Protobufs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13819836" author="stack" created="Tue, 12 Nov 2013 05:04:13 +0000"  >&lt;p&gt;We can&apos;t change the pb now that 0.96.0 has shipped.  We will have to work around it in code.&lt;/p&gt;</comment>
                            <comment id="13834302" author="apurtell" created="Wed, 27 Nov 2013 23:12:27 +0000"  >&lt;p&gt;Benoit&apos;s rant after Hadoop made this type of change on a minor release is a fun read. What should we do with this?&lt;/p&gt;</comment>
                            <comment id="13834315" author="stack" created="Wed, 27 Nov 2013 23:18:52 +0000"  >&lt;p&gt;We should check it but thinking on it, isn&apos;t this a non-issue?  Startcode is System.currentMillis which is much less than 64-bit max so should not be verging on sign bit unless we change how startcode is done &amp;#8211; then we should just deal in code... see what happens when you serialized a signed startcode and deal.&lt;/p&gt;</comment>
                            <comment id="13834325" author="apurtell" created="Wed, 27 Nov 2013 23:23:14 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13834334" author="stack" created="Wed, 27 Nov 2013 23:26:31 +0000"  >&lt;p&gt;I unscheduled this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 27 Nov 2013 23:12:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>346412</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 3 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1nqhr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>346713</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>