<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:35:22 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6282/HBASE-6282.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6282] The introspection, etc. of objects in the RPC has to be handled for PB objects</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6282</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The places where the type of objects are inspected need to be updated to take into consideration PB types. I have noticed Objects.describeQuantity being used, and the private WritableRpcEngine.Server.logResponse method also needs updating (in the PB world, all information about operations/tablenames is contained in one PB argument).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12596141">HBASE-6282</key>
            <summary>The introspection, etc. of objects in the RPC has to be handled for PB objects</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12540505">HBASE-5305</parent>
                                    <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stack">stack</assignee>
                                    <reporter username="devaraj">Devaraj Das</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 Jun 2012 19:07:57 +0000</created>
                <updated>Mon, 23 Sep 2013 18:30:39 +0000</updated>
                            <resolved>Thu, 15 Nov 2012 03:56:24 +0000</resolved>
                                                    <fixVersion>0.95.0</fixVersion>
                                    <component>IPC/RPC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13410705" author="devaraj" created="Tue, 10 Jul 2012 18:58:07 +0000"  >&lt;p&gt;To add to the list, QosFunction in the HRegionServer class needs to be updated (the method arguments, etc. are going to be PB types when the PB objects are used).&lt;/p&gt;</comment>
                            <comment id="13422564" author="devaraj" created="Wed, 25 Jul 2012 20:08:56 +0000"  >&lt;p&gt;MonitoredRPCHandlerImpl.toMap() also needs to be updated.&lt;/p&gt;</comment>
                            <comment id="13422571" author="devaraj" created="Wed, 25 Jul 2012 20:15:34 +0000"  >&lt;p&gt;Upgrading the Priority so that it gets due attention (maybe after a couple of more PB jira fixes).&lt;/p&gt;</comment>
                            <comment id="13432055" author="devaraj" created="Thu, 9 Aug 2012 18:44:26 +0000"  >&lt;p&gt;BTW the patch in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6414&quot; title=&quot;Remove the WritableRpcEngine &amp;amp; associated Invocation classes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6414&quot;&gt;&lt;del&gt;HBASE-6414&lt;/del&gt;&lt;/a&gt; addresses the QosFunction part.&lt;/p&gt;</comment>
                            <comment id="13473902" author="stack" created="Thu, 11 Oct 2012 06:53:21 +0000"  >&lt;p&gt;What do I need to do here &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=devaraj&quot; class=&quot;user-hover&quot; rel=&quot;devaraj&quot;&gt;Devaraj Das&lt;/a&gt;?  Enable trace on RPC and I&apos;ll see all the problems above (the pb objects will come out all binary?)&lt;/p&gt;

&lt;p&gt;We don&apos;t need to do &apos;...and the private WritableRpcEngine.Server.logResponse method also needs updating&apos; because WritableRpcEngine has been removed?&lt;/p&gt;

&lt;p&gt;How do I see output from &apos;MonitoredRPCHandlerImpl.toMap()&apos;?&lt;/p&gt;

&lt;p&gt;Thanks DD.&lt;/p&gt;</comment>
                            <comment id="13474356" author="devaraj" created="Thu, 11 Oct 2012 17:36:48 +0000"  >&lt;blockquote&gt;&lt;p&gt;What do I need to do here Devaraj Das? Enable trace on RPC and I&apos;ll see all the problems above (the pb objects will come out all binary?)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; Thanks for taking a look at this. Yes, I guess that&apos;s what you&apos;d see.. &lt;/p&gt;

&lt;p&gt;I think most of the changes would be similar to the changes that I did to the QosFunction as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6414&quot; title=&quot;Remove the WritableRpcEngine &amp;amp; associated Invocation classes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6414&quot;&gt;&lt;del&gt;HBASE-6414&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;How do I see output from &apos;MonitoredRPCHandlerImpl.toMap()&apos;?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I guess this is used in the UI side. I see toJSON (that internally invokes toMap) being called from within TaskMonitorTmpl.jamon.&lt;/p&gt;</comment>
                            <comment id="13474381" author="devaraj" created="Thu, 11 Oct 2012 18:09:17 +0000"  >&lt;blockquote&gt;&lt;p&gt;We don&apos;t need to do &apos;...and the private WritableRpcEngine.Server.logResponse method also needs updating&apos; because WritableRpcEngine has been removed?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sorry, missed this question.. Actually I had moved logResponse to ProtobufRpcEngine as part of some jira.&lt;/p&gt;</comment>
                            <comment id="13497668" author="stack" created="Thu, 15 Nov 2012 01:04:21 +0000"  >&lt;p&gt;If I enable IPC trace, its not bad as is:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
...e.hadoop.ipc.HBaseServer.trace: Call #18; Served: ClientProtocol#multi queueTime=1 processingTime=0 contents=1 MultiRequest
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I can call toString on the pb param.  This is totally obnoxious but would be a nice option to have debugging.  Let me post a patch.&lt;/p&gt;

&lt;p&gt;Regards the logResponse, that needs fixup in general.  I had it recently and found the message reported close to useless.  Lets file a new issue to fix that distinct from pb&apos;ing.&lt;/p&gt;</comment>
                            <comment id="13497669" author="stack" created="Thu, 15 Nov 2012 01:07:12 +0000"  >&lt;p&gt;Lets apply this and close this issue.  W/ this applied, if you enable TRACE, you see this kinda of stuff:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2012-11-14 16:57:48,441 DEBUG org.apache.hadoop.ipc.HBaseServer.trace: Call #101; Served: RegionServerStatusProtocol#regionServerReport queueTime=1 processingTime=0 contents=server {
  hostName: &lt;span class=&quot;code-quote&quot;&gt;&quot;android_352668048612046&quot;&lt;/span&gt;
  port: 59354
  startCode: 1352940891735
}
load {
  numberOfRequests: 0
  totalNumberOfRequests: 44
  usedHeapMB: 31
  maxHeapMB: 987
  regionLoads {
    regionSpecifier {
      type: REGION_NAME
      value: &lt;span class=&quot;code-quote&quot;&gt;&quot;.META.,,1&quot;&lt;/span&gt;
    }
    stores: 1
    storefiles: 0
    storeUncompressedSizeMB: 0
    storefileSizeMB: 0
    memstoreSizeMB: 0
    storefileIndexSizeMB: 0
    readRequestsCount: 4
    writeRequestsCount: 0
    totalCompactingKVs: 0
    currentCompactedKVs: 0
    rootIndexSizeKB: 0
    totalStaticIndexSizeKB: 0
    totalStaticBloomSizeKB: 0
    completeSequenceId: 18446744073709551615
  }
  regionLoads {
    regionSpecifier {
      type: REGION_NAME
      value: &lt;span class=&quot;code-quote&quot;&gt;&quot;-ROOT-,,0&quot;&lt;/span&gt;
    }
    stores: 1
    storefiles: 1
    storeUncompressedSizeMB: 0
    storefileSizeMB: 0
    memstoreSizeMB: 0
    storefileIndexSizeMB: 0
    readRequestsCount: 26
    writeRequestsCount: 1
    totalCompactingKVs: 0
    currentCompactedKVs: 0
    rootIndexSizeKB: 0
    totalStaticIndexSizeKB: 0
    totalStaticBloomSizeKB: 0
    completeSequenceId: 18446744073709551615
  }
  reportStartTime: 1352941065437
  reportEndTime: 1352941068438
  infoServerPort: 60030
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;It is ridiculous detail but could be life saver debugging.&lt;/p&gt;

&lt;p&gt;Could later work on pb toStringing so it doesn&apos;t dump it all... just start of String and a length instead but this should be good for now.&lt;/p&gt;

&lt;p&gt;Remove Objects class since no longer used.&lt;/p&gt;</comment>
                            <comment id="13497670" author="stack" created="Thu, 15 Nov 2012 01:07:27 +0000"  >&lt;p&gt;Any chance of review on this?&lt;/p&gt;</comment>
                            <comment id="13497684" author="devaraj" created="Thu, 15 Nov 2012 01:30:22 +0000"  >&lt;p&gt;Yeah &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;, seems reasonable to me. +1&lt;/p&gt;</comment>
                            <comment id="13497743" author="stack" created="Thu, 15 Nov 2012 03:56:24 +0000"  >&lt;p&gt;Thanks for review Devaraj.  Committed to trunk.&lt;/p&gt;</comment>
                            <comment id="13497765" author="hudson" created="Thu, 15 Nov 2012 05:11:32 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3544 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3544/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3544/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6282&quot; title=&quot;The introspection, etc. of objects in the RPC has to be handled for PB objects&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6282&quot;&gt;&lt;del&gt;HBASE-6282&lt;/del&gt;&lt;/a&gt; The introspection, etc. of objects in the RPC has to be handled for PB objects (Revision 1409643)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/ipc/ProtobufRpcEngine.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/util/Objects.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13497771" author="stack" created="Thu, 15 Nov 2012 05:25:38 +0000"  >&lt;p&gt;Addendum committed to trunk that adds printing of the response we send back (Original patch just does the request)&lt;/p&gt;</comment>
                            <comment id="13497775" author="stack" created="Thu, 15 Nov 2012 05:34:17 +0000"  >&lt;p&gt;Committed the addendum.&lt;/p&gt;</comment>
                            <comment id="13497815" author="hudson" created="Thu, 15 Nov 2012 07:24:13 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3545 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3545/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3545/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6282&quot; title=&quot;The introspection, etc. of objects in the RPC has to be handled for PB objects&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6282&quot;&gt;&lt;del&gt;HBASE-6282&lt;/del&gt;&lt;/a&gt; The introspection, etc. of objects in the RPC has to be handled for PB objects (Revision 1409648)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/ipc/ProtobufRpcEngine.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13497949" author="hudson" created="Thu, 15 Nov 2012 11:29:12 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #262 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/262/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/262/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6282&quot; title=&quot;The introspection, etc. of objects in the RPC has to be handled for PB objects&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6282&quot;&gt;&lt;del&gt;HBASE-6282&lt;/del&gt;&lt;/a&gt; The introspection, etc. of objects in the RPC has to be handled for PB objects (Revision 1409648)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6282&quot; title=&quot;The introspection, etc. of objects in the RPC has to be handled for PB objects&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6282&quot;&gt;&lt;del&gt;HBASE-6282&lt;/del&gt;&lt;/a&gt; The introspection, etc. of objects in the RPC has to be handled for PB objects (Revision 1409643)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/ipc/ProtobufRpcEngine.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/ipc/ProtobufRpcEngine.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/util/Objects.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13775062" author="stack" created="Mon, 23 Sep 2013 18:30:39 +0000"  >&lt;p&gt;Marking closed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12540505">HBASE-5305</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12553599" name="6282.txt" size="7397" author="stack" created="Thu, 15 Nov 2012 01:07:12 +0000"/>
                            <attachment id="12553622" name="6282addendum.txt" size="2591" author="stack" created="Thu, 15 Nov 2012 05:25:38 +0000"/>
                            <attachment id="12553621" name="6282addendum.txt" size="1194" author="stack" created="Thu, 15 Nov 2012 05:25:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 11 Oct 2012 06:53:21 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>247272</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i089jj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46145</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Enable IPC trace and see all of the calls coming into the server toString&amp;#39;d.  Its a load of data but could be useful debugging.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>