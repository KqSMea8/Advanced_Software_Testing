<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:26:30 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-11777/HBASE-11777.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-11777] Find a way to set sequenceId on Cells on the server</title>
                <link>https://issues.apache.org/jira/browse/HBASE-11777</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Over in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11591&quot; title=&quot;Scanner fails to retrieve KV  from bulk loaded file with highest sequence id than the cell&amp;#39;s mvcc in a non-bulk loaded file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11591&quot;&gt;&lt;del&gt;HBASE-11591&lt;/del&gt;&lt;/a&gt; there was a need to set the sequenceId of the HFile to the bulk loaded KVs.  Since we are trying to use the concept of Cells in the read path if we need to use setSequenceId(), then the Cell has to be converted to KV and only KeyValue impl has the accessor setSequenceId().&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt; suggested if we can use a Server side impl of Cell and have these accessors in them.&lt;br/&gt;
This JIRA aims to solve this and see the related code changes that needs to be carried out for this.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12734947">HBASE-11777</key>
            <summary>Find a way to set sequenceId on Cells on the server</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="anoop.hbase">Anoop Sam John</assignee>
                                    <reporter username="ram_krish">ramkrishna.s.vasudevan</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Aug 2014 05:33:07 +0000</created>
                <updated>Sat, 21 Feb 2015 23:31:29 +0000</updated>
                            <resolved>Thu, 4 Sep 2014 07:57:52 +0000</resolved>
                                    <version>0.99.0</version>
                                    <fixVersion>0.99.0</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="14101899" author="anoop.hbase" created="Tue, 19 Aug 2014 05:56:15 +0000"  >&lt;p&gt;Client side deals with only Cells.&lt;br/&gt;
Have an Interface MutableCell  extending Cell. Server side read path to pass new interface type than Cell type.   &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/help_16.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14101901" author="ram_krish" created="Tue, 19 Aug 2014 05:58:47 +0000"  >&lt;blockquote&gt;&lt;p&gt;Server side read path to pass new interface type than Cell type&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes.  Either we should change every where to MutableCell(the new impl) on the read path Or is it enough if we just do an instance of the new cell type where ever needed and set the setSeqId on to that? &lt;/p&gt;</comment>
                            <comment id="14103768" author="ram_krish" created="Wed, 20 Aug 2014 11:30:26 +0000"  >&lt;p&gt;Just adding an impl of Cell but it is sort of a delegator. Now in the place where we need to set the KV.setSeqId(), we could create an object of this new Cell Impl passing the seqId that we need to set and return that new Cell.  No change in the method return types (it can still be cell).&lt;br/&gt;
This is applicable only on trunk and only after the change in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11591&quot; title=&quot;Scanner fails to retrieve KV  from bulk loaded file with highest sequence id than the cell&amp;#39;s mvcc in a non-bulk loaded file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11591&quot;&gt;&lt;del&gt;HBASE-11591&lt;/del&gt;&lt;/a&gt; goes in. Thoughts?&lt;/p&gt;</comment>
                            <comment id="14104176" author="stack" created="Wed, 20 Aug 2014 17:34:06 +0000"  >&lt;p&gt;CellWithSequenceNumber is kinda odd.  Cell always has a SequenceNumber (though method is getSequenceId).  We just want to override the sequenceid that comes up out of the bulk loaded file?  Is there a threshold (or a few thresholds) at which Cells leave an hfile at which we could create the delegating Cell instance.  If one or a few, could be anonymous?  Thanks Ram.&lt;/p&gt;</comment>
                            <comment id="14104181" author="apurtell" created="Wed, 20 Aug 2014 17:37:05 +0000"  >&lt;p&gt;So for every server side cell we now have to carry at least two objects? Cell and CellWith...? That&apos;s not good. In scanning load tests the most frequently allocated object is KeyValue. This change would immediately double the allocation rate. &lt;/p&gt;</comment>
                            <comment id="14105298" author="ram_krish" created="Thu, 21 Aug 2014 11:02:13 +0000"  >&lt;blockquote&gt;&lt;p&gt;If one or a few, could be anonymous?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Ya.  It would be few only. Anonymous is fine with me. &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;This change would immediately double the allocation rate.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;May be this happens only in case of bulk loaded files. Not in all cases. What do you think?&lt;/p&gt;</comment>
                            <comment id="14106149" author="stack" created="Thu, 21 Aug 2014 23:33:14 +0000"  >&lt;p&gt;What would it take to make a Cell implementation with a mutable sequenceid Interface?  If bulk loaded file and mutable sequenceid interface, rather than create new instance, just call setSequenceId?&lt;/p&gt;

&lt;p&gt;Otherwise, if new Cell for bulk loaded files only, it wouldn&apos;t be bad... but then was thinking of a few scenarios where cluster is only bulk-loaded files.... of which we have a good few.... and some largish.&lt;/p&gt;</comment>
                            <comment id="14106420" author="ram_krish" created="Fri, 22 Aug 2014 03:49:57 +0000"  >&lt;blockquote&gt;&lt;p&gt;Cell implementation with a mutable sequenceid Interface?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Ya I tried that. So this impl will be only on the server side only?  If only on the server side then we have to create an instance of it because currently the code is having only KV everywhere. We need to wrap it with the new instance somewhere.&lt;br/&gt;
If you want the Cell itself to impl SequenceNumber interface then it is much easier.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Otherwise, if new Cell for bulk loaded files only, it wouldn&apos;t be bad... but then was thinking of a few scenarios where cluster is only bulk-loaded files.... of which we have a good few.... and some largish.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;True. Agree.&lt;/p&gt;</comment>
                            <comment id="14106474" author="stack" created="Fri, 22 Aug 2014 05:16:45 +0000"  >&lt;p&gt;Makes sense Ram.&lt;/p&gt;

&lt;p&gt;You know, servers-side, we have to be able to set the sequence id on the Cell/KV when writing at least (we set the sequenceid after we&apos;ve written the WAL in ringbuffer event handler... see stampRegionSequenceId.  Its stamping a KV, not a Cell.  So its another place where we need to be able to set seqid on a Cell.&lt;/p&gt;</comment>
                            <comment id="14110921" author="ram_krish" created="Tue, 26 Aug 2014 16:38:20 +0000"  >&lt;blockquote&gt;&lt;p&gt;You know, servers-side, we have to be able to set the sequence id on the Cell/KV when writing at least&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;So we will create a new Cell implementation on the Cell side that can set sequenceId? Just wanted to clarify. I think this would benefit &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11805&quot; title=&quot;KeyValue to Cell Convert in WALEdit APIs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11805&quot;&gt;&lt;del&gt;HBASE-11805&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14114120" author="anoop.hbase" created="Thu, 28 Aug 2014 18:26:06 +0000"  >&lt;blockquote&gt;&lt;p&gt;You know, servers-side, we have to be able to set the sequence id on the Cell/KV when writing at least (we set the sequenceid after we&apos;ve written the WAL in ringbuffer event handler... see stampRegionSequenceId. Its stamping a KV, not a Cell. So its another place where we need to be able to set seqid on a Cell.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes, we late bind the seqId to the ref to the added Cells in MemStore. Till MemStore it takes Cells as param and in HLog level it is KV. And we use KeyValueUtil.ensureKeyValue(Cell) to convert this to a KV. But this is dangerous. If the passed in Cell is not an instance of KV, we recreate a new KV and this is no longer a reference to the original Cell added to MemStore!!&lt;/p&gt;

&lt;p&gt;I am trying out with this and changing some places from KV to Cell  as this blocks &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11805&quot; title=&quot;KeyValue to Cell Convert in WALEdit APIs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11805&quot;&gt;&lt;del&gt;HBASE-11805&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14114143" author="apurtell" created="Thu, 28 Aug 2014 18:41:57 +0000"  >&lt;blockquote&gt;&lt;p&gt;And we use KeyValueUtil.ensureKeyValue(Cell) to convert this to a KV. But this is dangerous. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14114144" author="anoop.hbase" created="Thu, 28 Aug 2014 18:42:31 +0000"  >&lt;p&gt;Any better name for the new Interface?&lt;/p&gt;</comment>
                            <comment id="14114341" author="stack" created="Thu, 28 Aug 2014 21:03:32 +0000"  >&lt;p&gt;It is amost as though setSequenceId shoudl be called stampSequenceId (smle).&lt;/p&gt;

&lt;p&gt;setSequenceId is better.&lt;/p&gt;

&lt;p&gt;How about SettableSequenceNumber?&lt;/p&gt;

&lt;p&gt;Or going back to Cell, it seems like SequenceNumber should be SequenceId else we have two names for same thing?&lt;/p&gt;

&lt;p&gt;Suggest we change SequenceNumber Interface to SequenceId.  Also change its method to be getSequenceId to match Cell.&lt;/p&gt;

&lt;p&gt;Add new SettableSequenceId Interface?&lt;/p&gt;

&lt;p&gt;Otherwise patch looks good.&lt;/p&gt;

&lt;p&gt;THats good going to CellUtil to do it.&lt;/p&gt;
</comment>
                            <comment id="14114816" author="anoop.hbase" created="Fri, 29 Aug 2014 03:54:24 +0000"  >&lt;blockquote&gt;&lt;p&gt;Suggest we change SequenceNumber Interface to SequenceId. Also change its method to be getSequenceId to match Cell.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;You mean setSequenceId?&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Add new SettableSequenceId Interface?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;So SettableSequenceId  is the name u suggest for the new Interface? Fine.&lt;/p&gt;</comment>
                            <comment id="14114820" author="anoop.hbase" created="Fri, 29 Aug 2014 04:01:06 +0000"  >&lt;p&gt;V2 patch change the Interface name as suggested by Stack.&lt;br/&gt;
Also removed an unused private method KeyValue#getTotalColumnLength&lt;/p&gt;</comment>
                            <comment id="14114946" author="hadoopqa" created="Fri, 29 Aug 2014 06:53:49 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12665204/HBASE-11777_V2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12665204/HBASE-11777_V2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12665204&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.security.visibility.TestVisibilityWithCheckAuths&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestReplicaWithCluster&lt;br/&gt;
                  org.apache.hadoop.hbase.replication.TestPerTableCFReplication&lt;br/&gt;
                  org.apache.hadoop.hbase.TestRegionRebalancing&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestScannersFromClientSide&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 2 zombie test(s): 	at org.apache.hadoop.hbase.mapreduce.TestTableInputFormatScanBase.testScan(TestTableInputFormatScanBase.java:238)&lt;br/&gt;
	at org.apache.hadoop.hbase.mapreduce.TestTableInputFormatScan1.testScanEmptyToBBA(TestTableInputFormatScan1.java:70)&lt;br/&gt;
	at org.apache.hadoop.hdfs.TestFileCorruption.testArrayOutOfBoundsException(TestFileCorruption.java:130)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10632//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10632//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10632//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10632//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10632//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10632//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10632//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10632//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10632//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10632//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10632//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10632//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10632//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10632//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10632//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10632//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10632//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10632//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10632//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10632//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10632//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10632//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14115480" author="stack" created="Fri, 29 Aug 2014 17:04:38 +0000"  >&lt;p&gt;+1 on patch. On commit, mind renaming SequenceNumber to SequenceId and SequenceNumber#getSequenceNumber to getSequenceId so they align with the new interface you are introducing here?  Thanks Anoop.&lt;/p&gt;</comment>
                            <comment id="14115505" author="anoop.hbase" created="Fri, 29 Aug 2014 17:14:23 +0000"  >&lt;p&gt;I see. You were talking about the existing SequenceNumber interface . Sure I will change this on commit. Thanks boss.&lt;/p&gt;</comment>
                            <comment id="14115553" author="anoop.hbase" created="Fri, 29 Aug 2014 17:45:55 +0000"  >&lt;p&gt;Let QA run on V3&lt;/p&gt;</comment>
                            <comment id="14115607" author="stack" created="Fri, 29 Aug 2014 18:13:31 +0000"  >&lt;p&gt;+1 Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14115694" author="hadoopqa" created="Fri, 29 Aug 2014 19:21:35 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12665375/HBASE-11777_V3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12665375/HBASE-11777_V3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12665375&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.TestRegionRebalancing&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 3 zombie test(s): 	at org.apache.hadoop.hbase.mapreduce.TestLoadIncrementalHFilesSplitRecovery.testSplitWhileBulkLoadPhase(TestLoadIncrementalHFilesSplitRecovery.java:358)&lt;br/&gt;
	at org.apache.hadoop.hbase.mapreduce.TableSnapshotInputFormatTestBase.testWithMapReduce(TableSnapshotInputFormatTestBase.java:114)&lt;br/&gt;
	at org.apache.hadoop.hbase.mapreduce.TableSnapshotInputFormatTestBase.testWithMapReduceMultiRegion(TableSnapshotInputFormatTestBase.java:95)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10646//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10646//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10646//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10646//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10646//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10646//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10646//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10646//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10646//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10646//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10646//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10646//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10646//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10646//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10646//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10646//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10646//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10646//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10646//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10646//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10646//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10646//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14116171" author="anoop.hbase" created="Sat, 30 Aug 2014 01:53:47 +0000"  >&lt;p&gt;Ping &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; for branch-1&lt;/p&gt;</comment>
                            <comment id="14116276" author="ram_krish" created="Sat, 30 Aug 2014 07:11:04 +0000"  >&lt;p&gt;SeekerState in BufferedDataEncoder would need this SettableSequenceID. Why do we need a SettableSequenceId?  Can we just add a setter in the exisitng SequenceId ?  That is what I did and it would make sense?&lt;/p&gt;</comment>
                            <comment id="14116309" author="anoop.hbase" created="Sat, 30 Aug 2014 08:55:12 +0000"  >&lt;p&gt;Are we try setting seqId in this SeekerState object after its initialization? I dont think. I searched in code where all we set seqId.&lt;br/&gt;
SequenceId interface is for HLog related. New interface is ideal&lt;/p&gt;</comment>
                            <comment id="14116422" author="stack" created="Sat, 30 Aug 2014 15:26:28 +0000"  >&lt;p&gt;If we don&apos;t need to set sequenceid post instantiation of the Cell, can&apos;t we just pass the sequenceid to use in on Cell creation?  The new SettableSequenceId is for the case where we have an instance of Cell and then later we want to set the sequenceid on it.&lt;/p&gt;</comment>
                            <comment id="14116454" author="anoop.hbase" created="Sat, 30 Aug 2014 16:42:52 +0000"  >&lt;p&gt;I see.. you mean here Ram?&lt;br/&gt;
StoreFileScanner#setCurrentCell&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
   &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.cur != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.reader.isBulkLoaded() &amp;amp;&amp;amp; cur.getSequenceId() &amp;lt;= 0) {
     KeyValue curKV = KeyValueUtil.ensureKeyValue(cur);
     curKV.setSequenceId(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.reader.getSequenceID());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Compactor#performCompaction&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
       &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Cell c : kvs) {
         KeyValue kv = KeyValueUtil.ensureKeyValue(c);
         &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (cleanSeqId &amp;amp;&amp;amp; kv.getSequenceId() &amp;lt;= smallestReadPoint) {
           kv.setSequenceId(0);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Up in the scan layer we set the seqId and here we can get an object of BufferedDataBlockEncoder.ClonedSeekerState. I know the 1st one is added recently.  But both these existing code were not good wrt performance. We added BufferedDataBlockEncoder.ClonedSeekerState to avoid need for copy value part also when we scan encoded data. But see the call to KeyValueUtil.ensureKeyValue which will recreate KV and copy both key and value parts!!!&lt;/p&gt;

&lt;p&gt;I can correct this by BufferedDataBlockEncoder.ClonedSeekerState implementing SettableSequenceId and now we wont be having KeyValueUtil.ensureKeyValue.&lt;/p&gt;

&lt;p&gt;Also suggest we can get rid of this KeyValueUtil.ensureKeyValue.  We can work on that with sub tasks later.&lt;/p&gt;</comment>
                            <comment id="14116525" author="hadoopqa" created="Sat, 30 Aug 2014 18:57:35 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12665574/HBASE-11777_V4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12665574/HBASE-11777_V4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12665574&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.TestRegionRebalancing&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10655//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10655//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10655//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10655//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10655//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10655//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10655//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10655//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10655//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10655//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10655//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10655//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10655//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10655//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10655//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10655//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10655//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10655//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10655//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10655//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10655//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10655//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14117053" author="anoop.hbase" created="Mon, 1 Sep 2014 05:42:22 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+@InterfaceAudience.Private
+&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; SettableSequenceId {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I think it should be limited private for cp and Replication.  Any objections?&lt;/p&gt;</comment>
                            <comment id="14117055" author="ram_krish" created="Mon, 1 Sep 2014 05:43:54 +0000"  >&lt;blockquote&gt;&lt;p&gt;But see the call to KeyValueUtil.ensureKeyValue which will recreate KV and copy both key and value parts!!!&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;I can correct this by BufferedDataBlockEncoder.ClonedSeekerState implementing SettableSequenceId and now we wont be having KeyValueUtil.ensureKeyValue.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes, that is why ClonedSeekerState was added to avoid copying of value.  Infact the setSequenceId introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11591&quot; title=&quot;Scanner fails to retrieve KV  from bulk loaded file with highest sequence id than the cell&amp;#39;s mvcc in a non-bulk loaded file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11591&quot;&gt;&lt;del&gt;HBASE-11591&lt;/del&gt;&lt;/a&gt; was aware that we were copying both values and key part and that is why raised this JIRA to solve it. &lt;br/&gt;
Ideally this setSequenceId change is only needed for ClonedSeekerState only.  Because in all other non DBE cases it will be only KV any way and so ensureKeyValue would not copy anything (i mean before we go about offheap type of cells). So this change is mainly for DBE cases only. &lt;/p&gt;</comment>
                            <comment id="14117059" author="ram_krish" created="Mon, 1 Sep 2014 05:51:45 +0000"  >&lt;p&gt;SeekerState need not have SettableSequenceId, only ClonedSeekerState need to have it.  Because getKeyValue() would always call CloneedSeekerState and while setting memStoreTS we could call the setSequenceId(). Rest looks good to me. &lt;/p&gt;</comment>
                            <comment id="14117086" author="anoop.hbase" created="Mon, 1 Sep 2014 06:45:27 +0000"  >&lt;p&gt;Addressing Ram&apos;s comments.&lt;/p&gt;</comment>
                            <comment id="14117164" author="hadoopqa" created="Mon, 1 Sep 2014 08:16:03 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12665714/HBASE-11777_V5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12665714/HBASE-11777_V5.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12665714&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.TestRegionRebalancing&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10663//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10663//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10663//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10663//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10663//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10663//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10663//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10663//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10663//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10663//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10663//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10663//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10663//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10663//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10663//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10663//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10663//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10663//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10663//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10663//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10663//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10663//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14117168" author="enis" created="Mon, 1 Sep 2014 08:18:38 +0000"  >&lt;p&gt;&lt;ins&gt;1 for branch-1&lt;/ins&gt; if you addressed &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=saint.ack%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;saint.ack@gmail.com&quot;&gt;Stack&lt;/a&gt;&apos;s and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ram_krish&quot; class=&quot;user-hover&quot; rel=&quot;ram_krish&quot;&gt;ramkrishna.s.vasudevan&lt;/a&gt;&apos;s comments. &lt;/p&gt;</comment>
                            <comment id="14117182" author="ram_krish" created="Mon, 1 Sep 2014 08:29:16 +0000"  >&lt;p&gt;+1 on patch.&lt;/p&gt;</comment>
                            <comment id="14117254" author="anoop.hbase" created="Mon, 1 Sep 2014 09:42:05 +0000"  >&lt;p&gt;Thanks all for the reviews. Pushed to master and branch-1&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt; This is needed for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11805&quot; title=&quot;KeyValue to Cell Convert in WALEdit APIs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11805&quot;&gt;&lt;del&gt;HBASE-11805&lt;/del&gt;&lt;/a&gt; which I would like to get into 0.98 also.  So can I get this into 0.98?&lt;/p&gt;</comment>
                            <comment id="14117317" author="hudson" created="Mon, 1 Sep 2014 11:19:27 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #5455 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/5455/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/5455/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11777&quot; title=&quot;Find a way to set sequenceId on Cells on the server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11777&quot;&gt;&lt;del&gt;HBASE-11777&lt;/del&gt;&lt;/a&gt; Find a way to set sequenceId on Cells on the server. (anoopsamjohn: rev 125f5619b9ba08ce5a44829ceab5177b53d943a9)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/SequenceId.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreFileScanner.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/CellUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/MultiVersionConsistencyControl.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/FSWALEntry.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/FSHLog.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/SettableSequenceId.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HStore.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLog.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/KeyValue.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/io/encoding/BufferedDataBlockEncoder.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/compactions/Compactor.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogKey.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/SequenceNumber.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/Store.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14117399" author="hudson" created="Mon, 1 Sep 2014 13:01:52 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.0 #143 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/143/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.0/143/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11777&quot; title=&quot;Find a way to set sequenceId on Cells on the server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11777&quot;&gt;&lt;del&gt;HBASE-11777&lt;/del&gt;&lt;/a&gt; Find a way to set sequenceId on Cells on the server. (anoopsamjohn: rev 58b5bce1721ca8b16fdddecd6f6232982ca35e87)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/FSWALEntry.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/SettableSequenceId.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogKey.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/io/encoding/BufferedDataBlockEncoder.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/FSHLog.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreFileScanner.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/CellUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/Store.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/SequenceNumber.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/KeyValue.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HStore.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/SequenceId.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/compactions/Compactor.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLog.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/MultiVersionConsistencyControl.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14118983" author="apurtell" created="Tue, 2 Sep 2014 23:49:47 +0000"  >&lt;blockquote&gt;&lt;p&gt;This is needed for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11805&quot; title=&quot;KeyValue to Cell Convert in WALEdit APIs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11805&quot;&gt;&lt;del&gt;HBASE-11805&lt;/del&gt;&lt;/a&gt; which I would like to get into 0.98 also.  So can I get this into 0.98?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14121082" author="anoop.hbase" created="Thu, 4 Sep 2014 07:57:52 +0000"  >&lt;p&gt;When trying to rebase this for 0.98, most of the patch parts not at all needed in 0.98. Whichever part is applicable that also might be not really needed as we can not remove KeyValueUtil#ensureKeyValue there.  In 0.98 still the MemStore, Store in write paths and Scanners in read path deal with KeyValue only.    Also for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11805&quot; title=&quot;KeyValue to Cell Convert in WALEdit APIs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11805&quot;&gt;&lt;del&gt;HBASE-11805&lt;/del&gt;&lt;/a&gt; to be in 0.98 , this issue is not needed. (In branch-1+ this was a mandatory item for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11805&quot; title=&quot;KeyValue to Cell Convert in WALEdit APIs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11805&quot;&gt;&lt;del&gt;HBASE-11805&lt;/del&gt;&lt;/a&gt;)&lt;br/&gt;
Am closing this issue with branch-1+ commit.&lt;/p&gt;</comment>
                            <comment id="14330831" author="enis" created="Sat, 21 Feb 2015 23:31:29 +0000"  >&lt;p&gt;Closing this issue after 0.99.0 release. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12736121">HBASE-11805</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12663108" name="CellWithSequenceNumber.java" size="3446" author="ram_krish" created="Wed, 20 Aug 2014 11:30:26 +0000"/>
                            <attachment id="12665035" name="HBASE-11777.patch" size="26568" author="anoop.hbase" created="Thu, 28 Aug 2014 18:42:31 +0000"/>
                            <attachment id="12665204" name="HBASE-11777_V2.patch" size="27016" author="anoop.hbase" created="Fri, 29 Aug 2014 04:01:06 +0000"/>
                            <attachment id="12665375" name="HBASE-11777_V3.patch" size="33422" author="anoop.hbase" created="Fri, 29 Aug 2014 17:45:55 +0000"/>
                            <attachment id="12665574" name="HBASE-11777_V4.patch" size="35825" author="anoop.hbase" created="Sat, 30 Aug 2014 17:24:11 +0000"/>
                            <attachment id="12665714" name="HBASE-11777_V5.patch" size="37206" author="anoop.hbase" created="Mon, 1 Sep 2014 06:45:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 19 Aug 2014 05:56:15 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>412887</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1z0zb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>412873</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>