<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:39:16 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6721/HBASE-6721.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6721] RegionServer Group based Assignment</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6721</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;In multi-tenant deployments of HBase, it is likely that a RegionServer will be serving out regions from a number of different tables owned by various client applications. Being able to group a subset of running RegionServers and assign specific tables to it, provides a client application a level of isolation and resource allocation.&lt;/p&gt;

&lt;p&gt;The proposal essentially is to have an AssignmentManager which is aware of RegionServer groups and assigns tables to region servers based on groupings. Load balancing will occur on a per group basis as well. &lt;/p&gt;

&lt;p&gt;This is essentially a simplification of the approach taken in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4120&quot; title=&quot;isolation and allocation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4120&quot;&gt;&lt;del&gt;HBASE-4120&lt;/del&gt;&lt;/a&gt;. See attached document.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12606272">HBASE-6721</key>
            <summary>RegionServer Group based Assignment</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="toffer">Francis Liu</assignee>
                                    <reporter username="toffer">Francis Liu</reporter>
                        <labels>
                            <label>hbase-6721</label>
                    </labels>
                <created>Wed, 5 Sep 2012 17:41:12 +0000</created>
                <updated>Wed, 16 Mar 2016 17:30:20 +0000</updated>
                            <resolved>Tue, 15 Mar 2016 01:45:50 +0000</resolved>
                                                    <fixVersion>2.0.0</fixVersion>
                                    <component>regionserver</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>62</watches>
                                                                                                            <comments>
                            <comment id="13448916" author="avandana" created="Wed, 5 Sep 2012 17:42:43 +0000"  >&lt;p&gt;Design document for HBase region server grouping feature.&lt;/p&gt;</comment>
                            <comment id="13448970" author="yuzhihong@gmail.com" created="Wed, 5 Sep 2012 18:24:02 +0000"  >&lt;p&gt;More details should be added to the design.&lt;br/&gt;
Have you considered introducing interface for AssignmentManager so that existing and new managers can be easily swapped ?&lt;br/&gt;
Have you considered storing group information in zookeeper instead of on hdfs ?&lt;/p&gt;

&lt;p&gt;Please explain more about RegionServerGroupProtocol.&lt;/p&gt;

&lt;p&gt;Thanks for the initiative.&lt;/p&gt;</comment>
                            <comment id="13449007" author="yuzhihong@gmail.com" created="Wed, 5 Sep 2012 18:58:33 +0000"  >&lt;p&gt;Another aspect is fault tolerance.&lt;br/&gt;
Say the smallest group consists of 6 region servers, the impact of majority of the 6 servers going down at the same time is much higher than 6 servers out of whole cluster going down where there is only one group.&lt;/p&gt;</comment>
                            <comment id="13449185" author="toffer" created="Wed, 5 Sep 2012 22:07:56 +0000"  >&lt;p&gt;&amp;gt; Have you considered introducing interface for AssignmentManager so that existing and new managers can be easily swapped?&lt;br/&gt;
Yes, part of the proposal is to make AssignmentManager pluggable. I&apos;ll add that as a subtask for this.&lt;/p&gt;

&lt;p&gt;&amp;gt; Have you considered storing group information in zookeeper instead of on hdfs ?&lt;br/&gt;
Correct me if I&apos;m wrong, but it seems the approach HBase has taken for it&apos;s usage of ZK is more towards storing temporal data for coordination and the real source of truth is on HDFS or Tables. And we decided to follow the same approach. &lt;/p&gt;

&lt;p&gt;&amp;gt; Please explain more about RegionServerGroupProtocol.&lt;br/&gt;
RegionServerGroupProtocol exposes APIs to manage Grouping (see API in doc). The currently plan is that these APIs will be used and exposed via the CLI commands. &lt;/p&gt;

&lt;p&gt;&amp;gt; Another aspect is fault tolerance.&lt;br/&gt;
&amp;gt; Say the smallest group consists of 6 region servers, the impact of majority of the 6 servers going down at the same time is much higher than 6 &lt;br/&gt;
&amp;gt; servers out of whole cluster going down where there is only one group.&lt;br/&gt;
This is similar to hbase cluster sizing for fault tolerance. Let&apos;s play around with it and later on document best practices.&lt;/p&gt;

</comment>
                            <comment id="13449238" author="yuzhihong@gmail.com" created="Wed, 5 Sep 2012 23:07:11 +0000"  >&lt;p&gt;Looking at current doc, GroupInfo would be passed to (new) AssignmentManager.&lt;br/&gt;
Do you plan to reference GroupInfo in AssignmentManager interface ?&lt;/p&gt;</comment>
                            <comment id="13449738" author="toffer" created="Thu, 6 Sep 2012 15:29:40 +0000"  >&lt;p&gt;GroupInfo may be retrieved internally through an instance of the GroupInfoManager. This shouldn&apos;t leak through the interface. On a similar note Stack was suggesting something different to making it pluggable in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6723&quot; title=&quot;Implement RegionServer Group Based Balancer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6723&quot;&gt;&lt;del&gt;HBASE-6723&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13449791" author="yuzhihong@gmail.com" created="Thu, 6 Sep 2012 16:39:22 +0000"  >&lt;blockquote&gt;&lt;p&gt;through an instance of the GroupInfoManager&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;If I understand correctly, GroupInfoManager singleton would be used inside new AssignmentManager.&lt;/p&gt;</comment>
                            <comment id="13449844" author="yuzhihong@gmail.com" created="Thu, 6 Sep 2012 17:35:44 +0000"  >&lt;blockquote&gt;&lt;p&gt;This is similar to hbase cluster sizing for fault tolerance.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I think what I wanted to say was that we may need to reserve some region servers from the Default pool for emergency scenario so that each group can have decent size all the time.&lt;/p&gt;</comment>
                            <comment id="13449848" author="toffer" created="Thu, 6 Sep 2012 17:38:33 +0000"  >&lt;blockquote&gt;&lt;p&gt;If I understand correctly, GroupInfoManager singleton would be used inside new AssignmentManager&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yep it will create an instance of it internally.&lt;/p&gt;</comment>
                            <comment id="13449854" author="toffer" created="Thu, 6 Sep 2012 17:47:45 +0000"  >&lt;blockquote&gt;&lt;p&gt;I think what I wanted to say was that we may need to reserve some region servers from the Default pool for emergency scenario so that each group can have decent size all the time.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I see, that could be something we could add later on. There are some scenarios we have to think more thoroughly about. A conservative group sizing and manual intervention should be good enough for now? Let&apos;s get the basics fully baked first.&lt;/p&gt;</comment>
                            <comment id="13458038" author="avandana" created="Tue, 18 Sep 2012 18:40:09 +0000"  >&lt;p&gt;At the recent HBase contributor meet up, the topic of making the assignment manager pluggable was discussed. There was agreement that the assignment manager is a core and complex component of HBase, and making it pluggable is not a good idea. Alternatively, suggestions were made to introduce the region placement logic  into the load balancer which is already pluggable. This idea works for this feature with making some changes to the LoadBalancer interface. &lt;/p&gt;

&lt;p&gt;I will update the design document with the changes I have mentioned. &lt;/p&gt;</comment>
                            <comment id="13466031" author="stack" created="Sat, 29 Sep 2012 00:02:41 +0000"  >&lt;p&gt;Lads, do you think this a 0.96 issue?  You think it will be done in time?  (W/i a couple of weeks or so)?  If not, can we move it out?  Thanks.&lt;/p&gt;</comment>
                            <comment id="13466920" author="toffer" created="Mon, 1 Oct 2012 16:36:53 +0000"  >&lt;p&gt;Stack, we&apos;d like to get this into 0.96 (and if possible 0.94 as that&apos;s what we&apos;re planning on deploying). We should be have a usable patch in ~2 weeks. Does that sound acceptable?&lt;/p&gt;</comment>
                            <comment id="13466971" author="stack" created="Mon, 1 Oct 2012 17:23:26 +0000"  >&lt;p&gt;That should work.&lt;/p&gt;</comment>
                            <comment id="13467043" author="ram_krish" created="Mon, 1 Oct 2012 18:18:41 +0000"  >&lt;p&gt;Will the group info persisted in the META table?&lt;/p&gt;</comment>
                            <comment id="13467059" author="toffer" created="Mon, 1 Oct 2012 18:29:56 +0000"  >&lt;p&gt;Stack, great&lt;/p&gt;

&lt;p&gt;Ram, it&apos;ll be persisted in a file. Our thoughts were that the approach would be more invasive (and complex) if the information would be persisted in a table since we would have to know the group of a table before we can assign them to a region server and read it.&lt;/p&gt;</comment>
                            <comment id="13467068" author="ram_krish" created="Mon, 1 Oct 2012 18:35:07 +0000"  >&lt;p&gt;Ok, so if a region gets splitted then the daughter regions fall in the parents&apos;s group? So the group info file will be updated based on this info?&lt;br/&gt;
Also groups cannot be updated once created right?  &lt;/p&gt;</comment>
                            <comment id="13467073" author="toffer" created="Mon, 1 Oct 2012 18:38:26 +0000"  >&lt;p&gt;Group membership is based on tables, for a split no update will be necessary on the file. Groups can be updated. Each update will be updated in memory and flushed to the file for persistence.&lt;/p&gt;</comment>
                            <comment id="13483055" author="toffer" created="Wed, 24 Oct 2012 07:43:01 +0000"  >&lt;p&gt;0.94 patch for initial review&lt;/p&gt;</comment>
                            <comment id="13483057" author="toffer" created="Wed, 24 Oct 2012 07:48:04 +0000"  >&lt;p&gt;0.94 patch for initial review, We decided to combine the patch of two subtasks into one.&lt;/p&gt;</comment>
                            <comment id="13483065" author="hadoopqa" created="Wed, 24 Oct 2012 07:53:10 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12550599/HBASE-6721_94.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12550599/HBASE-6721_94.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3137//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3137//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13483069" author="hadoopqa" created="Wed, 24 Oct 2012 08:02:43 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12550601/HBASE-6721_94.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12550601/HBASE-6721_94.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 11 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3138//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3138//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13483325" author="yuzhihong@gmail.com" created="Wed, 24 Oct 2012 15:44:16 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; LoadBalancer getBalancer() {
+    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; balancer;
+  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above method can be package private.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; class GroupAdminEndpoint &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; BaseEndpointCoprocessor &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; GroupAdminProtocol, EventHandler.EventHandlerListener {
+ &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Log LOG = LogFactory.getLog(GroupAdminClient.class);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Please add javadoc for the class. The line is beyond 100 characters.&lt;br/&gt;
Log has wrong class.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; ConcurrentMap&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;,&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; serversInTransition =
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;What does the value in serversInTransition map represent ?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+   List&amp;lt;HRegionInfo&amp;gt; regions = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;HRegionInfo&amp;gt;();
+   &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (groupName == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
+      &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; NullPointerException(&lt;span class=&quot;code-quote&quot;&gt;&quot;groupName can&apos;t be &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;nit: move ArrayList creation after the if statement.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Collection&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; listTablesOfGroup(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; groupName) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The return type is a collection, more generic than List that listOnlineRegionsOfGroup() returns. I guess there might be a reason.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      HTableDescriptor[] tables = master.getTableDescriptors().getAll().values().toArray(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HTableDescriptor[0]);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;nit: line too long.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; GroupInfo getGroup(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; groupName) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Suggest renaming the method getGroupInfo(). getGroup() is kind of vague.&lt;/p&gt;

&lt;p&gt;More reviews to follow.&lt;/p&gt;</comment>
                            <comment id="13483385" author="yuzhihong@gmail.com" created="Wed, 24 Oct 2012 16:52:18 +0000"  >&lt;p&gt;In GroupAdminEndpoint:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+     &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IOException(
+         &lt;span class=&quot;code-quote&quot;&gt;&quot;The region server or the target to move found to be &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;.&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It would be nice to point out which parameter is null.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+        &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DoNotRetryIOException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Group must have no associated tables.&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Include group name in the exception message.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; listServersInTransition() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Return type of Map includes additional information which is not used by callers. Suggest returning keySet.&lt;br/&gt;
Down in GroupAdminClient:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; server: proxy.listServersInTransition().keySet()) {
+        found = found || servers.contains(server);
+      }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Can you tell me what the body is supposed to achieve ?&lt;br/&gt;
Back to GroupAdminEndpoint:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; GroupInfoManager getGroupInfoManager() {
+    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ((GroupBasedLoadBalancer)menv.getMasterServices().getAssignmentManager().getBalancer()).getGroupInfoManager();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Does GroupInfoManager belong to balancer ? The above is probably the longest indirection I have ever seen &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; List&amp;lt;HRegionInfo&amp;gt; getOnlineRegions(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; hostPort) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above method is only called by listOnlineRegionsOfGroup() in a loop over online servers, resulting in nested loop.&lt;br/&gt;
Please consider collapsing the nested loop into one loop.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      LOG.error(&lt;span class=&quot;code-quote&quot;&gt;&quot;Failed to complete GroupMoveServer with of &quot;&lt;/span&gt;+h.getPlan().getServers().size()+
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;nit: remove &apos; of &apos; in above sentence.&lt;/p&gt;</comment>
                            <comment id="13483464" author="toffer" created="Wed, 24 Oct 2012 18:49:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yuzhihong%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;yuzhihong@gmail.com&quot;&gt;Ted Yu&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;What does the value in serversInTransition map represent?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It represents servers that are being moved from one group to another.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Can you tell me what the body is supposed to achieve ?&lt;br/&gt;
Back to GroupAdminEndpoint:&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Retrieveing the balancer during start() returns null. Thus I have to retrieve it lazily as needed.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Does GroupInfoManager belong to balancer ? The above is probably the longest indirection I have ever seen&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We had to do this since we didn&apos;t want to touch AssignmentManager as much as possible &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;
</comment>
                            <comment id="13483471" author="toffer" created="Wed, 24 Oct 2012 18:56:12 +0000"  >&lt;blockquote&gt;
&lt;p&gt;We had to do this since we didn&apos;t want to touch AssignmentManager as much as possible&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;As an alternative, we can add a getBalancer() Method to MasterServices. Thoughts?&lt;/p&gt;</comment>
                            <comment id="13483498" author="yuzhihong@gmail.com" created="Wed, 24 Oct 2012 19:23:35 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void beforeProcess(EventHandler event) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I think normally the above should be called preProcess().&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void afterProcess(EventHandler event) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Rename to postProcess().&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+ * Copyright 2011 The Apache Software Foundation
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above is no longer needed in license header.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; GroupAdminProtocol &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; GroupAdmin, CoprocessorProtocol {
+}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I wasn&apos;t expecting a Protocol to not have methods in it &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; class GroupBasedLoadBalancer &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; LoadBalancer {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Add javadoc for GroupBasedLoadBalancer.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IOException e) {
+        LOG.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;IOException &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; creating GroupInfoManagerImpl.&quot;&lt;/span&gt;, e);
+      }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I think if groupManager cannot be initialized, we should abort master because group policy wouldn&apos;t be enforced.&lt;br/&gt;
In correctAssignments():&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ((info == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) || (!info.containsServer(sName.getHostAndPort()))) {
+          &lt;span class=&quot;code-comment&quot;&gt;// Misplaced region.
&lt;/span&gt;+          misplacedRegions.add(region);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Under what scenario would a region be misplaced at runtime ? I think rebalancing misplaced region(s) would affect normal operation of related groups.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    &lt;span class=&quot;code-comment&quot;&gt;//unassign misplaced regions, so that they are assigned to correct groups.
&lt;/span&gt;+    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.services.getAssignmentManager().unassign(misplacedRegions);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13483502" author="yuzhihong@gmail.com" created="Wed, 24 Oct 2012 19:27:00 +0000"  >&lt;blockquote&gt;&lt;p&gt;Can you tell me what the body is supposed to achieve ?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I was asking about the following line of code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
found = found || servers.contains(server);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It seems to be condition checking.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;As an alternative, we can add a getBalancer() Method to MasterServices.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;That would be better than the current form.&lt;/p&gt;</comment>
                            <comment id="13483550" author="eclark" created="Wed, 24 Oct 2012 20:19:15 +0000"  >&lt;p&gt;Just some initial thoughts:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;I couldn&apos;t seem to get it to compile for me on 0.94&lt;/li&gt;
	&lt;li&gt;There seem to be a bunch of formatting changes that aren&apos;t needed.&lt;/li&gt;
	&lt;li&gt;Passing in the preferred server into the load balancer on randomAssignment is messy.  If we know the preferred server why call this function at all ?&lt;/li&gt;
	&lt;li&gt;The balancer is a public interface and we can&apos;t make changes to it in a minor release. And this patch won&apos;t apply to trunk.&lt;/li&gt;
	&lt;li&gt;With this many interfaces and classes it might make sense to move them into a namespace.&lt;/li&gt;
	&lt;li&gt;Why is GroupAdminClient in the master namespace and not in the client namespace.&lt;/li&gt;
	&lt;li&gt;Why a co-processor and not build it in ?
	&lt;ul&gt;
		&lt;li&gt;Security was done that was because it can be added or removed. As the patch is that&apos;s not really possible&lt;/li&gt;
		&lt;li&gt;This makes a lot of changes in core code for something that is a co-processor.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Don&apos;t create a DefaultLoadBalancer in GroupBasedLoadBalancer.  The balancer was made pluggable and that feature shouldn&apos;t go away.&lt;/li&gt;
	&lt;li&gt;Why return ArrayListMultimap from groupRegions in GroupBasedLoadBalancer? Why not the base class&lt;/li&gt;
	&lt;li&gt;HTableDescriptor seems like the correct location for info about the table if you don&apos;t want to put that data into meta.&lt;/li&gt;
	&lt;li&gt;putting things into the filesystem seems like the wrong way to do it. There are just so many different moving parts with getting things from hdfs with caching and cache invalidation, and edge cases on failure.&lt;/li&gt;
	&lt;li&gt;There&apos;s a lot of logic about balancing bleeding into the AssignmentManager.  Right now assignment manager is already too complex.  I would much prefer a solution that had everything in the balancer.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13483562" author="yuzhihong@gmail.com" created="Wed, 24 Oct 2012 20:28:32 +0000"  >&lt;blockquote&gt;&lt;p&gt;There&apos;s a lot of logic about balancing bleeding into the AssignmentManager.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Looking at the changes in AssignmentManager, they are mostly white space removal.&lt;br/&gt;
There is only one real change:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; LoadBalancer getBalancer() {
+    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; balancer;
+  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;which Francis agrees to move out.&lt;/p&gt;</comment>
                            <comment id="13483642" author="toffer" created="Wed, 24 Oct 2012 22:02:00 +0000"  >&lt;blockquote&gt;
&lt;p&gt;I was asking about the following line of code:&lt;/p&gt;

&lt;p&gt;found = found || servers.contains(server);&lt;/p&gt;

&lt;p&gt;It seems to be condition checking.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yeah it&apos;s basically checking if the list of servers to be moved is already in the ServersInTransition list, meaning it is already being moved so we shouldn&apos;t allow that.&lt;/p&gt;</comment>
                            <comment id="13483645" author="eclark" created="Wed, 24 Oct 2012 22:06:03 +0000"  >&lt;blockquote&gt;&lt;p&gt;Looking at the changes in AssignmentManager, they are mostly white space removal.&lt;br/&gt;
There is only one real change:&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;You&apos;re missing the change where null plans are no longer queued which comes about because of this patch.&lt;/p&gt;</comment>
                            <comment id="13483768" author="toffer" created="Thu, 25 Oct 2012 00:33:40 +0000"  >&lt;p&gt;Thanks for the comments &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;I couldn&apos;t seem to get it to compile for me on 0.94&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Did you apply the patches attached in the subtasks prior to apply this patch? If you&apos;d like them all in one single patch I can do that as well.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;There seem to be a bunch of formatting changes that aren&apos;t needed.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Will clean that up in the next update.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Passing in the preferred server into the load balancer on randomAssignment is messy. If we know the preferred server why call this function at all ?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Good point, will remove that argument.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;The balancer is a public interface and we can&apos;t make changes to it in a minor release. And this patch won&apos;t apply to trunk.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I see, we can make it binary compatible at least by supporting both interfaces if you&apos;re amenable to that. We&apos;re planning on getting 0.94 into production and it&apos;d be great if we didn&apos;t have a lot of custom patches on top of it.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;With this many interfaces and classes it might make sense to move them into a namespace.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Will look into doing this, my main concern is if there any dependencies to package private methods.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Why a co-processor and not build it in ?&lt;br/&gt;
    Security was done that was because it can be added or removed. As the patch is that&apos;s not really possible&lt;br/&gt;
    This makes a lot of changes in core code for something that is a co-processor.&lt;/p&gt;&lt;/blockquote&gt; 
&lt;p&gt;As part of the design, HBase should run fine without the group based classes enabled (endpoint, balancer, etc). If it is not that case then that&apos;s a bug. As for some code changes in core code. Some may be unavoidable, but we could probably still make it less invasive (ie remove the EventHandler changes). Having said that, I don&apos;t mind if the community would like to have this fully integrated into HBase, just let us know.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Don&apos;t create a DefaultLoadBalancer in GroupBasedLoadBalancer. The balancer was made pluggable and that feature shouldn&apos;t go away.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The balancer is still pluggable it&apos;s just not pluggable for the GroupBasedLoadBalancer. Though should be ok to make that pluggable as well.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;HTableDescriptor seems like the correct location for info about the table if you don&apos;t want to put that data into meta.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes, we have group affiliation store as a table property. Though group information is stored on hdfs.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;putting things into the filesystem seems like the wrong way to do it. There are just so many different moving parts with getting things from hdfs with caching and cache invalidation, and edge cases on failure.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I see, were do you suggest we put it? Zookeeper? We mainly had it in HDFS since ZK, seemed to be the place to store only ephemeral data? Putting the data in tables would be a lot more complex and would require more core code change.&lt;/p&gt;
</comment>
                            <comment id="13483785" author="toffer" created="Thu, 25 Oct 2012 00:57:11 +0000"  >&lt;blockquote&gt;
&lt;p&gt;You&apos;re missing the change where null plans are no longer queued which comes about because of this patch.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;We needed this change to prevent regions from being assigned to region servers they don&apos;t belong to. We can continue to recognize null, we just need another way to prevent regions from being assigned to the wrong group of region servers. One option is to have a dead/bogus server as part of the plan if no online servers are available for a given group, this way it eventually gets reassigned once a live server is up. Would that work?&lt;/p&gt;</comment>
                            <comment id="13483801" author="eclark" created="Thu, 25 Oct 2012 01:24:13 +0000"  >&lt;blockquote&gt;&lt;p&gt;Did you apply the patches attached in the subtasks prior to apply this patch? If you&apos;d like them all in one single patch I can do that as well.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Nope I had missed those.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;As part of the design, HBase should run fine without the group based classes enabled (endpoint, balancer, etc).&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Then they should be a seperate module.  This half in half removable part is just a little worrisome.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;The balancer is still pluggable it&apos;s just not pluggable for the GroupBasedLoadBalancer&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;If this is going to be a feature then it will need to work with all balancers.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I see, were do you suggest we put it? Zookeeper? We mainly had it in HDFS since ZK, seemed to be the place to store only ephemeral data? Putting the data in tables would be a lot more complex and would require more core code change.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I would prefer something like security has.  We have a perfectly usable key/value storage system no need to use a different storage path.&lt;/p&gt;
</comment>
                            <comment id="13483819" author="yuzhihong@gmail.com" created="Thu, 25 Oct 2012 01:51:51 +0000"  >&lt;blockquote&gt;&lt;p&gt;Then they should be a seperate module.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;In 0.94, there is no support for modules.&lt;br/&gt;
It would be nice to keep implementation roughly the same for 0.94 and 0.96. This way users can try this feature earlier and it is easier to maintain across major releases.&lt;/p&gt;</comment>
                            <comment id="13483849" author="toffer" created="Thu, 25 Oct 2012 03:00:28 +0000"  >&lt;blockquote&gt;
&lt;p&gt;I would prefer something like security has. We have a perfectly usable key/value storage system no need to use a different storage path.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;That was what we had originally in mind, but decided to punt on it due to the complexity. The main problem here is during startup before the catalog tables get assigned we would need to know what group the tables are members of. And since the &quot;group&quot; table isn&apos;t assigned yet we have to get creative. In my mind one way to do that is manually read the region on hdfs to retrieve the group information. Does that sound feasible?&lt;/p&gt;</comment>
                            <comment id="13486278" author="apurtell" created="Mon, 29 Oct 2012 19:36:54 +0000"  >&lt;blockquote&gt;&lt;p&gt;And since the &quot;group&quot; table isn&apos;t assigned yet we have to get creative. In my mind one way to do that is manually read the region on hdfs to retrieve the group information.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;How do you handle META? Why not handle the &quot;group&quot; table the same way?&lt;/p&gt;</comment>
                            <comment id="13487571" author="toffer" created="Wed, 31 Oct 2012 06:11:04 +0000"  >&lt;p&gt;In the current implementation we handle META the same way as all the other tables. Since we just load the group information from hdfs. If the &quot;group&quot; information was stored on a table we won&apos;t be able to access the group information through normal means until after we assign ROOT, META and the &quot;group&quot; table itself.&lt;/p&gt;</comment>
                            <comment id="13488076" author="apurtell" created="Wed, 31 Oct 2012 18:43:26 +0000"  >&lt;blockquote&gt;&lt;p&gt;If the &quot;group&quot; information was stored on a table we won&apos;t be able to access the group information through normal means until after we assign ROOT, META and the &quot;group&quot; table itself.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Right, so you could assign ROOT, META, and the &quot;group&quot; table randomly at first, and then calculate placement and moves of the rest and perhaps also META and &quot;group&quot; after the &quot;group&quot; table becomes available, right? Worst case that would be 3 moves?&lt;/p&gt;</comment>
                            <comment id="13488082" author="apurtell" created="Wed, 31 Oct 2012 18:50:35 +0000"  >&lt;p&gt;The current attached patch for 0.94 makes a ton of changes in o.a.h.h.master.&lt;/p&gt;

&lt;p&gt;This stuff should all be pulled out into a separate package that can be put into a Maven module like done with security in 0.94.&lt;/p&gt;

&lt;p&gt;What changes to core code remain after that?&lt;/p&gt;</comment>
                            <comment id="13490498" author="toffer" created="Mon, 5 Nov 2012 08:21:04 +0000"  >&lt;p&gt;Updated patch addressed most of the comments. Mainly:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;moved storage of group information from hdfs to zookeeper&lt;/li&gt;
	&lt;li&gt;cleaned up whitespace and removed unnecessary changes into core master classes&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13490503" author="hadoopqa" created="Mon, 5 Nov 2012 08:32:31 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12552071/HBASE-5498_94_4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12552071/HBASE-5498_94_4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 20 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3224//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3224//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13490504" author="toffer" created="Mon, 5 Nov 2012 08:32:44 +0000"  >&lt;blockquote&gt;
&lt;p&gt;This stuff should all be pulled out into a separate package that can be put into a Maven module like done with security in 0.94.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Isn&apos;t that a bit too much overhead? Wasn&apos;t the reason security was a separate module was because it had to depend on a secure version of hadoop which the community didn&apos;t want?&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;What changes to core code remain after that?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I&apos;ve updated the patch, there should be minimal and no invasive changes.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Right, so you could assign ROOT, META, and the &quot;group&quot; table randomly at first, and then calculate placement and moves of the rest and perhaps also META and &quot;group&quot; after the &quot;group&quot; table becomes available, right? Worst case that would be 3 moves?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Since we are not doing any changes to the assignment manager this actually is complicated since we won&apos;t really  know what state assignment is in based on just calls to the load balancer and information we can glean through the master services.&lt;/p&gt;</comment>
                            <comment id="13490507" author="toffer" created="Mon, 5 Nov 2012 08:35:18 +0000"  >&lt;p&gt;anyone know how to get a git patch onto review board? It seems it only works for trunk.&lt;/p&gt;</comment>
                            <comment id="13490511" author="hadoopqa" created="Mon, 5 Nov 2012 08:44:38 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12552073/HBASE-6721_94_2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12552073/HBASE-6721_94_2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 20 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3226//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3226//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13490741" author="apurtell" created="Mon, 5 Nov 2012 17:09:40 +0000"  >&lt;p&gt;Looks like the &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6721&quot; title=&quot;RegionServer Group based Assignment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6721&quot;&gt;&lt;del&gt;HBASE-6721&lt;/del&gt;&lt;/a&gt;_94_2 patch contains the patch on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7042&quot; title=&quot;Master Coprocessor Endpoint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7042&quot;&gt;&lt;del&gt;HBASE-7042&lt;/del&gt;&lt;/a&gt; too?&lt;/p&gt;

&lt;p&gt;MasterExec and MasterExecResult are still in the &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6721&quot; title=&quot;RegionServer Group based Assignment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6721&quot;&gt;&lt;del&gt;HBASE-6721&lt;/del&gt;&lt;/a&gt;_94_2 patch, please use Exec and ExecResult and remove MasterExec and MasterExecResult and the change to HbaseObjectWritable.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;moved storage of group information from hdfs to zookeeper&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Nice, this moves forward in the right direction IMHO. However, I don&apos;t see where this information is persisted into a table. Did I miss it? Because HBase state in ZooKeeper can be cleared by administrators in some recovery scenarios, we can&apos;t consider it persistent storage. See how the security coprocessor handles this.&lt;/p&gt;

&lt;blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This stuff should all be pulled out into a separate package that can be put into a Maven module like done with security in 0.94.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Isn&apos;t that a bit too much overhead? &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The patch adds group-based assignment coprocessor specific classes to the main Master package and the main Client package. I should clarify that I didn&apos;t say your work must be put into a separate Maven module, but rather coprocessors are mini-applications, and should be organized as such. It is important to keep this set of changes, distinct optional functionality, grouped together apart from unrelated core code. Why not &lt;tt&gt;org.apache.hadoop.hbase.client.group&lt;/tt&gt; and &lt;tt&gt;org.apache.hadoop.hbase.master.group&lt;/tt&gt; etc.? I hope this feedback is clearer now. &lt;/p&gt;

&lt;blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;What changes to core code remain after that?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I&apos;ve updated the patch, there should be minimal and no invasive changes.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Thanks! Much better.&lt;/p&gt;

&lt;p&gt;Still some possible whitepsace issues though, the patch may contain mixed tabs and spaces? Some of the formatting looks off when I view it. If you are using Eclipse, we have a HBase formatter in dev-support/ now that may be helpful. &lt;/p&gt;</comment>
                            <comment id="13490754" author="apurtell" created="Mon, 5 Nov 2012 17:26:46 +0000"  >&lt;p&gt;Regarding storing the group assignment information in ZooKeeper, I think this is a good strategy. You can optimize for the case where HBase (re)starts with valid group assignment data available in ZK. Therefore you can avoid some bootstrapping challenges. However, you must persist the group assignment information into a table, like how security does with &lt;tt&gt;&lt;em&gt;acl&lt;/em&gt;&lt;/tt&gt;. After starting up, if in the uncommon case there is group assignment information in the &lt;tt&gt;&lt;em&gt;group&lt;/em&gt;&lt;/tt&gt; (or similar) table that is not in sync with that in ZK (perhaps because ZK state was cleared), you should update ZK data accordingly. From there, there are a couple of options:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;WARN the administrator that the table assignments should be updated via disable and enable.&lt;/li&gt;
	&lt;li&gt;Automatically trigger reassignment via disable and enable.&lt;/li&gt;
	&lt;li&gt;Region moves (if the assignment information is available - trunk only)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Edit: Fix incorrect use of markup.&lt;/p&gt;</comment>
                            <comment id="13490763" author="yuzhihong@gmail.com" created="Mon, 5 Nov 2012 17:40:07 +0000"  >&lt;p&gt;@Francis:&lt;br/&gt;
On &lt;a href=&quot;https://reviews.apache.org&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org&lt;/a&gt;, you can select hbase-git repository and upload the patch for 0.94&lt;br/&gt;
Review board is able to generate proper diff.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+ * Copyright 2011 The Apache Software Foundation
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above line is no longer needed.&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="13490775" author="lhofhansl" created="Mon, 5 Nov 2012 17:55:32 +0000"  >&lt;p&gt;Can this also colocate regions of different tables, maybe based on a key prefix?&lt;br/&gt;
In our case we&apos;d tenants share tables, and each row key would be a prefixed by a tenant id.&lt;/p&gt;</comment>
                            <comment id="13490800" author="yuzhihong@gmail.com" created="Mon, 5 Nov 2012 18:32:19 +0000"  >&lt;p&gt;In SecureGroupAdminEndpoint, the following code is called repeatedly:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; AccessController getAccessController() {
+    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; (AccessController)menv.getMasterServices()
+        .getCoprocessorHost().findCoprocessor(AccessController.class.getName());
+  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Should AccessController be stored in a field variable ?&lt;br/&gt;
For TestSecureGroupAdminEndpoint:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  @Test
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testGetAddRemove() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Would testGroupGetterAdditionRemoval() be better name for the above method ?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
For GroupAdmin &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt;:

+   * List servers that are currently being moved to a &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; group
+   * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;
+   * @&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException
+   */
+  Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; listServersInTransition() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Please describe the meaning of key and value in the returned Map.&lt;br/&gt;
For GroupAdminClient.java:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; server: proxy.listServersInTransition().keySet()) {
+        found = found || servers.contains(server);
+      }
+      &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(1000);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We can break out of the for loop once found becomes true, right ?&lt;br/&gt;
Would suggest using a shorter sleep interval above.&lt;br/&gt;
For DefaultLoadBalancer.java:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; ServerName randomAssignment(List&amp;lt;ServerName&amp;gt; servers) {
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; ServerName randomAssignment(HRegionInfo region, List&amp;lt;ServerName&amp;gt; servers) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The new parameter region is not used. We don&apos;t need to introduce this parameter, right ?&lt;br/&gt;
BTW StochasticLoadBalancer doesn&apos;t have randomAssignment().&lt;/p&gt;

&lt;p&gt;Will provide more comments for next patch.&lt;/p&gt;</comment>
                            <comment id="13490885" author="avandana" created="Mon, 5 Nov 2012 20:06:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ted_yu&quot; class=&quot;user-hover&quot; rel=&quot;ted_yu&quot;&gt;Ted Yu&lt;/a&gt; In your previous comment, the extra parameter (HRegionInfo) is used by the GroupBasedLoadBalancer class to determine the group information.&lt;/p&gt;</comment>
                            <comment id="13491075" author="toffer" created="Tue, 6 Nov 2012 00:15:49 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Still some possible whitepsace issues though, the patch may contain mixed tabs and spaces? Some of the formatting looks off when I view it. If you are using Eclipse, we have a HBase formatter in dev-support/ now that may be helpful. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I&apos;m using intellij and it doesn&apos;t seem to like the trailing whitespaces in the original file. I couldn&apos;t figure out a way to turn it off.&lt;/p&gt;

&lt;p&gt;re: moving into another package - I see that sounds reasonable. Will do that but I will have to make some package private methods in assignment manager public.&lt;/p&gt;</comment>
                            <comment id="13491081" author="toffer" created="Tue, 6 Nov 2012 00:18:49 +0000"  >&lt;blockquote&gt;
&lt;p&gt;BTW StochasticLoadBalancer doesn&apos;t have randomAssignment().&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;randomAssignment is part of the original interface StochasticLoadBalancer should have it. Also I don&apos;t see it that balancer in 0.94?&lt;/p&gt;</comment>
                            <comment id="13491084" author="toffer" created="Tue, 6 Nov 2012 00:24:33 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Can this also colocate regions of different tables, maybe based on a key prefix?&lt;br/&gt;
In our case we&apos;d tenants share tables, and each row key would be a prefixed by a tenant id.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Currently it determines group membership based on a table property. We can make things more generic and have membership determined from region metadata (ie startKey). Would that work for you? Would each tenant become a group? Or can multiple tenants be part of the same group?&lt;/p&gt;</comment>
                            <comment id="13491085" author="apurtell" created="Tue, 6 Nov 2012 00:27:27 +0000"  >&lt;blockquote&gt;&lt;p&gt;re: moving into another package - I see that sounds reasonable. Will do that but I will have to make some package private methods in assignment manager public.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t see that as a problem if you could also kindly tag them with private interface annotations.&lt;/p&gt;</comment>
                            <comment id="13491093" author="lhofhansl" created="Tue, 6 Nov 2012 00:39:23 +0000"  >&lt;blockquote&gt;&lt;p&gt;Currently it determines group membership based on a table property. We can make things more generic and have membership determined from region metadata (ie startKey). Would that work for you? Would each tenant become a group? Or can multiple tenants be part of the same group?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That should work. I would need to think this through in a bit more detail. Might be a bit tricky, since many small tenants could be in the same region, in which case colocation might not be possible at all.&lt;/p&gt;</comment>
                            <comment id="13491134" author="yuzhihong@gmail.com" created="Tue, 6 Nov 2012 02:29:15 +0000"  >&lt;p&gt;In trunk, BaseLoadBalancer has:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; ServerName randomAssignment(HRegionInfo regionInfo, List&amp;lt;ServerName&amp;gt; servers) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;StochasticLoadBalancer extends BaseLoadBalancer.&lt;br/&gt;
so the addition of HRegionInfo region parameter in 0.94 should be fine.&lt;/p&gt;</comment>
                            <comment id="13492214" author="toffer" created="Wed, 7 Nov 2012 09:21:26 +0000"  >&lt;p&gt;First stab at using a table to store the group information. GroupBasedLoadBalancer now works in two modes online and offline. In offline, balance doesn&apos;t work and the rest does random assignment but only for the catalog table and group table the rest are given a null/bogus assignment. Random assignment will then need to be corrected with a call to balance() or just let the chore call balance eventually. The implementation is a bit clunky but probably the prolly the best choice if we want to keep the data in the tables. I&apos;ve tested this on a distributed cluster and it seems to work. Let me know if this is ok so I can continue working on this and addressing the comments. Please call out other major concerns that I should be addressing. I&apos;m hoping we can start working on a trunk patch soon &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;</comment>
                            <comment id="13492218" author="hadoopqa" created="Wed, 7 Nov 2012 09:32:28 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12552446/HBASE-6721_94_3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12552446/HBASE-6721_94_3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 71 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3249//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3249//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13492474" author="apurtell" created="Wed, 7 Nov 2012 16:26:10 +0000"  >&lt;blockquote&gt;&lt;p&gt;The implementation is a bit clunky but probably the prolly the best choice if we want to keep the data in the tables.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=toffer&quot; class=&quot;user-hover&quot; rel=&quot;toffer&quot;&gt;Francis Liu&lt;/a&gt; Keeping the group assignment data in a table (at least the authoritative record of it) seems appropriate and consistent with feedback. Have you also considered adding a state mirror in ZK to avoid the need for random assignment of catalog tables and the group table if it is available on (re)start?&lt;/p&gt;

&lt;p&gt;FYI, looks like the _3 patch picks up unrelated work.&lt;/p&gt;

&lt;p&gt;Edit: See my above recent comment in this regard.&lt;/p&gt;</comment>
                            <comment id="13492523" author="yuzhihong@gmail.com" created="Wed, 7 Nov 2012 17:23:24 +0000"  >&lt;p&gt;@Francis:&lt;br/&gt;
Please refresh your 0.94 workspace. Some changes in patch v3 were from &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6796&quot; title=&quot;Backport HBASE-5547, Don&amp;#39;t delete HFiles in backup mode.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6796&quot;&gt;&lt;del&gt;HBASE-6796&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13492557" author="yuzhihong@gmail.com" created="Wed, 7 Nov 2012 18:06:27 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; GroupMoveServerWorker(Server master, Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; serversInTransition,
...
+    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.master = (MasterServices)master;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;master parameter should be declared as MasterServices.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(sourceGroup != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; !tmpGroup.equals(sourceGroup)) {
+          &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DoNotRetryIOException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Move server request should only come from one source group&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Consider including sourceGroup and tmpGroup in the exception message.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(!sourceGroup.startsWith(GroupInfo.TRANSITION_GROUP_PREFIX)) {
+        transGroup = GroupInfo.TRANSITION_GROUP_PREFIX+
+            &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.currentTimeMillis()+&lt;span class=&quot;code-quote&quot;&gt;&quot;_&quot;&lt;/span&gt;+sourceGroup+&lt;span class=&quot;code-quote&quot;&gt;&quot;-&quot;&lt;/span&gt;+plan.getTargetGroup();
+        groupManager.addGroup(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GroupInfo(transGroup, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TreeSet&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;()));
+      }
+    }
+    groupManager.moveServers(plan.getServers(), sourceGroup, transGroup!=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;?transGroup:plan.getTargetGroup());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Why moving the servers to a transitional group ?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (InterruptedException e) {
+          LOG.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Sleep interrupted&quot;&lt;/span&gt;, e);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Restore interrupt status.&lt;br/&gt;
In complete():&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(success) {
+        groupManager.moveServers(plan.getServers(), tmpSourceGroup, plan.getTargetGroup());
+        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(transGroup != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
+          groupManager.removeGroup(transGroup);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If early action in run() wasn&apos;t successful, the transitional group would hang around ?&lt;/p&gt;</comment>
                            <comment id="13492575" author="yuzhihong@gmail.com" created="Wed, 7 Nov 2012 18:33:22 +0000"  >&lt;p&gt;In GroupInfoManager:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; moveServers(Set&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; hostPort, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; srcGroup, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; dstGroup) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Please add javadoc for moveServers() method.&lt;br/&gt;
For GroupInfoManagerImpl , indentation should be 2 spaces.&lt;br/&gt;
For moveServers:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; el: hostPort) {
+      foundOne = foundOne || src.removeServer(el);
+      dst.addServer(el);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If foundOne is true in the middle of the loop, would the call to src.removeServer(el) be skipped ? That would lead to server being in both groups.&lt;/p&gt;</comment>
                            <comment id="13492613" author="toffer" created="Wed, 7 Nov 2012 19:19:15 +0000"  >&lt;p&gt;clean patch, sorry for the confusion&lt;/p&gt;</comment>
                            <comment id="13492616" author="hadoopqa" created="Wed, 7 Nov 2012 19:22:33 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12552520/HBASE-6721_94_3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12552520/HBASE-6721_94_3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 14 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3257//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3257//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13492658" author="toffer" created="Wed, 7 Nov 2012 20:03:01 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Have you also considered adding a state mirror in ZK to avoid the need for random assignment of catalog tables and the group table if it is available on (re)start?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I&apos;m wondering if it&apos;s worth the added complexity it introduces. For security it was needed since consumers of acl data was distributed and zk could do the orchestration. But in this case the data is only read and written to by the active master which to me makes mirroring things in ZK more of an enhancement. I don&apos;t feel strongly about it but I&apos;m more inclined to keep things simple for now and see how things go. Thoughts?&lt;/p&gt;</comment>
                            <comment id="13493317" author="toffer" created="Thu, 8 Nov 2012 17:28:12 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Have you also considered adding a state mirror in ZK to avoid the need for random assignment of catalog tables and the group table if it is available on (re)start?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Another approach is to mirror only the catalog and group table assignment information in ZK. This would add less complexity and minimizes the cost of having inconsistent data between the two stores.&lt;/p&gt;</comment>
                            <comment id="13493330" author="jxiang" created="Thu, 8 Nov 2012 17:42:20 +0000"  >&lt;p&gt;Do you have a patch for 0.96 on review board?&lt;/p&gt;</comment>
                            <comment id="13493367" author="avandana" created="Thu, 8 Nov 2012 18:24:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jxiang&quot; class=&quot;user-hover&quot; rel=&quot;jxiang&quot;&gt;Jimmy Xiang&lt;/a&gt; &amp;#8211; We have not started to work on the patch for trunk as we wanted the patch for branch-94 to address all the review comments. Hopefully after one more rounds of review, we will start working on the patch for the trunk.&lt;/p&gt;</comment>
                            <comment id="13494818" author="zhihyu@ebaysf.com" created="Sun, 11 Nov 2012 01:28:28 +0000"  >&lt;p&gt;In GroupBasedLoadBalancer.roundRobinAssignment():&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (HRegionInfo region : regions) {
...
+          assignments.put(ServerName.parseServerName(&lt;span class=&quot;code-quote&quot;&gt;&quot;127.0.0.1:1&quot;&lt;/span&gt;),regions);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Should regions for ROOT, .META. and group tables be excluded from the above put() ? These regions are handled earlier by the call to assignments.putAll().&lt;br/&gt;
Should we confine these special tables to default group ?&lt;/p&gt;</comment>
                            <comment id="13495007" author="yuzhihong@gmail.com" created="Sun, 11 Nov 2012 21:46:34 +0000"  >&lt;p&gt;I went over GroupBasedLoadBalancer.&lt;br/&gt;
In correctAssignments():&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+        }&lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt;(IOException exp){
+          LOG.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Group information &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; region of table &quot;&lt;/span&gt; + region.getTableNameAsString(),
+              exp);
+        }
+        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ((info == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) || (!info.containsServer(sName.getHostAndPort()))) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If groupManager.getGroup() fails to return group information, it is likely the exception would occur multiple times inside the loop. We should distinguish this from the case of !info.containsServer(sName.getHostAndPort()). Meaning, in case of exception, we don&apos;t conclude that the regions are misplaced.&lt;/p&gt;

&lt;p&gt;In roundRobinAssignment():&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+              regionGroup.get(groupKey), getServerToAssign(info, servers)));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Rename getServerToAssign() -&amp;gt; getServersToAssign()&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+          assignments.put(ServerName.parseServerName(&lt;span class=&quot;code-quote&quot;&gt;&quot;127.0.0.1:1&quot;&lt;/span&gt;),regions);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above statement would be executed many times. Consider creating a singleton for ServerName.parseServerName(&quot;127.0.0.1:1&quot;).&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IllegalStateException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Failed to access group store&quot;&lt;/span&gt;, e);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above would cause master to exit, right ? If you don&apos;t want to change the signature of roundRobinAssignment(), consider returning null.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(nulled.size() &amp;gt; 0) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;style: insert space between if and (.&lt;/p&gt;

&lt;p&gt;offlineRetainAssignment() contains only one method call. Consider merging it into retainAssignment().&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    &lt;span class=&quot;code-comment&quot;&gt;//chances are most are not, then we just use balance to correct&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&apos;are not&apos;: not correct or not incorrect ? Please clarify. It would be nice to end each line of comment with a period.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      ListMultimap&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, HRegionInfo&amp;gt; rGroup = ArrayListMultimap.create();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Would groupToRegionMap be better name for the above variable ?&lt;/p&gt;</comment>
                            <comment id="13495015" author="yuzhihong@gmail.com" created="Sun, 11 Nov 2012 22:20:01 +0000"  >&lt;p&gt;More comments about GroupBasedLoadBalancer.&lt;br/&gt;
In randomAssignment():&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(SPECIAL_TABLES.contains(region.getTableName())){
+        candidateList = servers;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If you limit special tables to default group, there is no need to move them after system becomes online.&lt;br/&gt;
For GroupStartupWorker, isOnline is set to true after waitForGroupTableOnline() returns. In waitForGroupTableOnline():&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+          &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(found.get()) {
+            ((GroupBasedLoadBalancer)masterServices.getLoadBalancer()).getGroupInfoManager();
+          }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Would the above call be effective (isOnline is false at this point) ?&lt;/p&gt;</comment>
                            <comment id="13495129" author="toffer" created="Mon, 12 Nov 2012 07:18:07 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Should we confine these special tables to default group ?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;That&apos;s a good point, I just realized that it&apos;s not possible to add table properties to the catalog tables. Looks like I will have to move group membership into the group metadata table as well. It felt clunky that changing group membership would be considered as a schema change anyway.&lt;/p&gt;</comment>
                            <comment id="13526025" author="toffer" created="Thu, 6 Dec 2012 23:57:03 +0000"  >&lt;p&gt;Patch address most of the comments. Mainly:&lt;/p&gt;

&lt;p&gt;-zookeeper as a temporary storage for special table group assignments.&lt;br/&gt;
-storing group table membership in the group table instead of the table descriptor&lt;/p&gt;</comment>
                            <comment id="13526029" author="toffer" created="Fri, 7 Dec 2012 00:01:05 +0000"  >&lt;p&gt;review board:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/8389/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/8389/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13526558" author="yuzhihong@gmail.com" created="Fri, 7 Dec 2012 17:20:01 +0000"  >&lt;p&gt;I got a test failure in one of the newly added tests:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
testOffline(org.apache.hadoop.hbase.master.TestGroupsOfflineMode)  Time elapsed: 1.283 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
java.lang.NullPointerException
  at org.apache.hadoop.hbase.master.TestGroupsOfflineMode.testOffline(TestGroupsOfflineMode.java:116)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13530720" author="hadoopqa" created="Thu, 13 Dec 2012 06:18:09 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12559999/HBASE-6721_94_5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12559999/HBASE-6721_94_5.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 16 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3518//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3518//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13571197" author="toffer" created="Tue, 5 Feb 2013 10:00:25 +0000"  >&lt;p&gt;updated patch, also updated review board.&lt;/p&gt;</comment>
                            <comment id="13571198" author="toffer" created="Tue, 5 Feb 2013 10:01:02 +0000"  >&lt;p&gt;Will update documentation tomorrow.&lt;/p&gt;</comment>
                            <comment id="13571199" author="hadoopqa" created="Tue, 5 Feb 2013 10:02:54 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12567985/HBASE-6721_94_6.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12567985/HBASE-6721_94_6.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 28 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4329//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4329//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13571622" author="sershe" created="Tue, 5 Feb 2013 19:16:26 +0000"  >&lt;p&gt;Started reviewing, got as far as GroupInfoManagerImpl.java, this will probably take several go-s to go thru the entire patch.&lt;br/&gt;
My main question is - what is the state of the trunk patch? It looks like a huge feature so it should go into trunk first.&lt;br/&gt;
Another one may be (may be - due to not having seen the rest of the patch yet) - why is some JSON serialization used? Will it be different in trunk? We already have PB and writables, so I wonder how it works with them.&lt;/p&gt;</comment>
                            <comment id="13571633" author="toffer" created="Tue, 5 Feb 2013 19:28:09 +0000"  >&lt;blockquote&gt;&lt;p&gt;My main question is - what is the state of the trunk patch?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Our main focus was to get something released internally thus it&apos;s a bit behind. Now that we have things more or less stabilized we&apos;ll have time to get this done. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Another one may be (may be - due to not having seen the rest of the patch yet) - why is some JSON serialization used?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;It was an easy way of not having to deal with actually serializing the data. I&apos;m open to suggestions. For trunk we can use PB.&lt;/p&gt;</comment>
                            <comment id="13575602" author="hadoopqa" created="Mon, 11 Feb 2013 02:52:39 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12568784/HBASE-6721_94_7.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12568784/HBASE-6721_94_7.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 28 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4409//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4409//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13576340" author="enis" created="Tue, 12 Feb 2013 03:19:29 +0000"  >&lt;p&gt;With this, master, zk and META are still shared across different groups with little isolation guarantees or SLAs. I am wondering whether this is worth the effort without having proper multi-tenancy at all levels. Isn&apos;t it way more easier to install multiple clusters?&lt;/p&gt;</comment>
                            <comment id="13576402" author="toffer" created="Tue, 12 Feb 2013 05:42:16 +0000"  >&lt;blockquote&gt;
&lt;p&gt;With this, master, zk and META are still shared across different groups with little isolation guarantees or SLAs. I am wondering whether this is worth the effort without having proper multi-tenancy at all levels.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The isolation it provides has been very useful for us. We already have this deployed on 2 clusters. I don&apos;t see sharing the master as an issue as interaction to it is normally administrative. As for ZK, there&apos;s an effort to make it highly scalable if the majority of clients are read-only. Regarding META, you can have an group which serves only internal tables. &lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;I am wondering whether this is worth the effort without having proper multi-tenancy at all levels. Isn&apos;t it way more easier to install multiple clusters?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This is much more easier to operate (installing, reallocating servers, tables, etc) while providing us the level of isolation we need. Interacting with it is easier as well, one single configuration file to access any of the tables (if ACLs permit). Keep in mind this does not preclude adding more multi-tenancy features (ie rate limiting, priorities, quotas, etc). This is just the first step, one which we felt provided the biggest gains as well as adding a new primitive we can build upon.&lt;/p&gt;</comment>
                            <comment id="13576806" author="apurtell" created="Tue, 12 Feb 2013 17:32:21 +0000"  >&lt;blockquote&gt;&lt;p&gt;With this, master, zk and META are still shared across different groups with little isolation guarantees or SLAs. I am wondering whether this is worth the effort without having proper multi-tenancy at all levels.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I agree with this, but in defense of Francis&apos; approach here, HDFS is also shared (though it helps that writes prefer the local datanode, as do shortcut reads). Admission control / QoS is a hard problem that requires a full stack conversation and, in my opinion, calls for considering a framework for admission control spanning from Common outward, something similar to a security access token (perhaps even an attribute of same) with support at each layer for mapping a logical notion of priority or quota to the actual enforcement mechanism, whatever it is. That will be a difficult project to say the least and in the meantime we could make incremental improvements at various layers of the stack if there is a demonstrated benefit. &lt;/p&gt;</comment>
                            <comment id="13585763" author="zjushch" created="Mon, 25 Feb 2013 10:05:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=toffer&quot; class=&quot;user-hover&quot; rel=&quot;toffer&quot;&gt;Francis Liu&lt;/a&gt;&lt;br/&gt;
How about for this now? &lt;br/&gt;
Is it available in your cluster?&lt;br/&gt;
When do you consider to apply in trunk?&lt;/p&gt;

&lt;p&gt;Since we have all the tables&apos; group info, could we remove GroupInfo.TABLEDESC_PROP_GROUP?&lt;/p&gt;

&lt;p&gt;Could we only use hbase table to storage group information?&lt;/p&gt;

&lt;p&gt;When we update the group information, why not update the memory the first?  Then we need&apos;t roll back if persistence failed&lt;/p&gt;

</comment>
                            <comment id="13589802" author="toffer" created="Thu, 28 Feb 2013 18:56:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zjushch&quot; class=&quot;user-hover&quot; rel=&quot;zjushch&quot;&gt;chunhui shen&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;We have the 0.94 running in our cluster for a while now.&lt;/p&gt;

&lt;p&gt;I&apos;ve uploaded the trunk patch on review board: &lt;a href=&quot;https://reviews.apache.org/r/9680/diff/#index_header&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/9680/diff/#index_header&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Since we have all the tables&apos; group info, could we remove GroupInfo.TABLEDESC_PROP_GROUP?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This is needed so we can create and assign a table to a group as part of a create table request.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Could we only use hbase table to storage group information?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes this is already done in the current implementation.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;When we update the group information, why not update the memory the first? Then we need&apos;t roll back if persistence failed&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Can you call out which section in GroupInfoManager you&apos;re referring to?&lt;/p&gt;


</comment>
                            <comment id="13589807" author="toffer" created="Thu, 28 Feb 2013 19:03:28 +0000"  >&lt;p&gt;I need to updated the 0.94 patch to match changes made it trunk. Will post it soon.&lt;/p&gt;</comment>
                            <comment id="13589812" author="toffer" created="Thu, 28 Feb 2013 19:09:03 +0000"  >&lt;p&gt;Forgot to mention Vandana and I worked on this patch.&lt;/p&gt;</comment>
                            <comment id="13589936" author="toffer" created="Thu, 28 Feb 2013 21:23:26 +0000"  >&lt;p&gt;Included Trunk patch with Generated PB classes.&lt;/p&gt;</comment>
                            <comment id="13590004" author="hadoopqa" created="Thu, 28 Feb 2013 22:35:35 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12571470/HBASE-6721_trunk.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12571470/HBASE-6721_trunk.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 30 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 6 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4611//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4611//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4611//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4611//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4611//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4611//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4611//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4611//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4611//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4611//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4611//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4611//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4611//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4611//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4611//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4611//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4611//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4611//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4611//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4611//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13590083" author="toffer" created="Fri, 1 Mar 2013 00:02:21 +0000"  >&lt;p&gt;Updated design doc&lt;/p&gt;</comment>
                            <comment id="13590097" author="toffer" created="Fri, 1 Mar 2013 00:21:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ted_yu&quot; class=&quot;user-hover&quot; rel=&quot;ted_yu&quot;&gt;Ted Yu&lt;/a&gt; Why move the status to &quot;open&quot;?&lt;/p&gt;</comment>
                            <comment id="13590101" author="yuzhihong@gmail.com" created="Fri, 1 Mar 2013 00:25:02 +0000"  >&lt;p&gt;Otherwise hadoop QA would treat pdf files as patches.&lt;/p&gt;</comment>
                            <comment id="13595428" author="zjushch" created="Thu, 7 Mar 2013 01:58:17 +0000"  >&lt;p&gt;I apply the latest patch to our 0.94 cluster, it seems good. &lt;/p&gt;

&lt;p&gt;We will test it then, and feedback the usage&lt;/p&gt;

&lt;p&gt;Other way, should we add group informations on masert web UI?&lt;/p&gt;

&lt;p&gt;Upload the webUI patch if needed&lt;/p&gt;</comment>
                            <comment id="13595634" author="stack" created="Thu, 7 Mar 2013 07:21:07 +0000"  >&lt;p&gt;Late to the game... but maybe below is of some help:&lt;/p&gt;

&lt;p&gt;Design doc should have author, date, and reference to this issue.&lt;/p&gt;

&lt;p&gt;Something is incomplete around here in the doc ... &quot;configured to not use the region server grouping features,&quot;&lt;/p&gt;

&lt;p&gt;Should explain why table has such an odd-looking name &#8220;0group0&#8221;&lt;/p&gt;

&lt;p&gt;When you refer to servers in the shell, should you use the full servername rather than just host and port?  e.g:&lt;/p&gt;

&lt;p&gt;group_move_servers &apos;dest&apos;,&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;server1:port&amp;#39;,&amp;#39;server2:port&amp;#39;&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Doc. looks good Francis.&lt;/p&gt;
</comment>
                            <comment id="13643333" author="toffer" created="Fri, 26 Apr 2013 22:40:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=saint.ack%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;saint.ack@gmail.com&quot;&gt;Stack&lt;/a&gt; I&apos;ve updated the doc. Addressing your questions. Let me me know if it&apos;s missing anything else.&lt;/p&gt;
</comment>
                            <comment id="13643354" author="hadoopqa" created="Fri, 26 Apr 2013 23:14:55 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12580760/HBASE-6721_8.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12580760/HBASE-6721_8.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 30 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 6 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 release audit&lt;/font&gt;.  The applied patch generated 2 release audit warnings (more than the trunk&apos;s current 0 warnings).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.backup.TestHFileArchiving&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5469//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5469//testReport/&lt;/a&gt;&lt;br/&gt;
Release audit warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5469//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5469//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5469//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5469//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5469//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5469//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5469//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5469//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5469//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5469//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5469//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5469//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5469//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5469//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5469//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5469//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5469//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5469//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5469//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5469//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13643411" author="hadoopqa" created="Sat, 27 Apr 2013 00:11:57 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12580775/HBASE-6721_9.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12580775/HBASE-6721_9.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 30 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 6 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 release audit&lt;/font&gt;.  The applied patch generated 2 release audit warnings (more than the trunk&apos;s current 0 warnings).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.TestFullLogReconstruction&lt;br/&gt;
                  org.apache.hadoop.hbase.group.TestRegionServerGroups&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5470//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5470//testReport/&lt;/a&gt;&lt;br/&gt;
Release audit warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5470//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5470//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5470//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5470//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5470//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5470//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5470//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5470//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5470//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5470//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5470//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5470//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5470//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5470//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5470//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5470//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5470//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5470//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5470//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5470//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13643472" author="yuzhihong@gmail.com" created="Sat, 27 Apr 2013 02:17:19 +0000"  >&lt;p&gt;Looks like MetaScanner.allTableRegions() returned a map where some entry has null ServerName.&lt;br/&gt;
There is no null check:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        ServerName serverName = HRegionInfo.getServerName(rowResult);
        regions.put(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; UnmodifyableHRegionInfo(info), serverName);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;After adding null check in GroupAdminEndpoint#moveTables :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Map.Entry&amp;lt;HRegionInfo, ServerName&amp;gt; entry: regionMap.entrySet()) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (entry.getValue() == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;continue&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;TestRegionServerGroups#testTableMoveAndDrop passed reliably.&lt;/p&gt;</comment>
                            <comment id="13644352" author="hadoopqa" created="Mon, 29 Apr 2013 08:19:41 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12580943/HBASE-6721_9.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12580943/HBASE-6721_9.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 32 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 6 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 release audit&lt;/font&gt;.  The applied patch generated 2 release audit warnings (more than the trunk&apos;s current 0 warnings).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.backup.TestHFileArchiving&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5483//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5483//testReport/&lt;/a&gt;&lt;br/&gt;
Release audit warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5483//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5483//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5483//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5483//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5483//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5483//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5483//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5483//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5483//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5483//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5483//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5483//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5483//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5483//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5483//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5483//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5483//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5483//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5483//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5483//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13644692" author="toffer" created="Mon, 29 Apr 2013 18:01:25 +0000"  >&lt;p&gt;fixed line length and missing apache header&lt;/p&gt;</comment>
                            <comment id="13644765" author="hadoopqa" created="Mon, 29 Apr 2013 19:05:40 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12581000/HBASE-6721_10.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12581000/HBASE-6721_10.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 32 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 6 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 release audit&lt;/font&gt;.  The applied patch generated 1 release audit warnings (more than the trunk&apos;s current 0 warnings).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.util.TestHBaseFsck&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5485//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5485//testReport/&lt;/a&gt;&lt;br/&gt;
Release audit warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5485//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5485//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5485//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5485//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5485//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5485//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5485//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5485//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5485//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5485//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5485//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5485//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5485//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5485//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5485//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5485//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5485//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5485//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5485//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5485//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13741866" author="apurtell" created="Fri, 16 Aug 2013 03:45:11 +0000"  >&lt;p&gt;The current state of this issue is confusing. The parent is in &apos;Patch Available&apos; state but seems stale. Subtask #3 has been committed to trunk/0.96 and 0.94. Other subtasks are resolved as &apos;Invalid&apos;. We should at least have a release note describing what is going to be in 0.96 (and already in 0.94). What further work is going to be done here? What been abandoned? Has enough functionality been committed already to address the contributors&apos; use case? Did something turn out to be problematic? Nothing more for 0.96 since &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; has frozen 0.95, correct? Nothing more need in 0.96 to support placing tables on certain regionservers only (will help with 0.96 to 0.98 migration story)? I can research the answers to my questions in commit history but maybe we can get an authoritative answer from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=avandana&quot; class=&quot;user-hover&quot; rel=&quot;avandana&quot;&gt;Vandana Ayyalasomayajula&lt;/a&gt; or &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=toffer&quot; class=&quot;user-hover&quot; rel=&quot;toffer&quot;&gt;Francis Liu&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="13742727" author="toffer" created="Fri, 16 Aug 2013 23:53:15 +0000"  >&lt;blockquote&gt;
&lt;p&gt;The current state of this issue is confusing. The parent is in &apos;Patch Available&apos; state but seems stale.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The decision was to get the NS patch in and this can follow. Hence it got stale. &lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Subtask #3 has been committed to trunk/0.96 and 0.94. Other subtasks are resolved as &apos;Invalid&apos;. We should at least have a release note describing what is going to be in 0.96 (and already in 0.94).&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Subtask #3, is a generic requirement, support for MasterCoprocessor Endpoints. It&apos;s an implementation specific to this jira. And so is the nature of subtask #6. Do we need release notes for this? I&apos;m not familiar with what needs to get into release notes. Or how do I update them?&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;What further work is going to be done here? What been abandoned? Has enough functionality been committed already to address the contributors&apos; use case? Did something turn out to be problematic? &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;It essentially needs a rebase. Also I&apos;d like to update it to make use of FavoredNodes. This jira and subtask #4 needs to be completed to get basic functionality.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Nothing more for 0.96 since stack has frozen 0.95, correct? Nothing more need in 0.96 to support placing tables on certain regionservers only (will help with 0.96 to 0.98 migration story)? I can research the answers to my questions in commit history but maybe we can get an authoritative answer from Vandana Ayyalasomayajula or Francis Liu?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;In terms of backwards compatilibity issues the only piece missing was updating the LoadBalancer interface which is subtask #6. Tho I did a recheck. The LoadBalancer interface also needs a configure/initialize method (my bad), see LoadBalancer in the patch. Hopefully we can get that in 0.96. If not we&apos;ll have to write code to support old LoadBalancers which doesn&apos;t have this method.&lt;/p&gt;

&lt;p&gt;My memory is a bit rusty but essentially the rest of the code resides in the custom balancer and the coprocessors. Maybe some internal code changes in AM. So no backwards compatibility issues apart from the one I mentioned. I&apos;ll double check early next week.&lt;/p&gt;
</comment>
                            <comment id="13742734" author="toffer" created="Sat, 17 Aug 2013 00:02:22 +0000"  >&lt;blockquote&gt;
&lt;p&gt;It&apos;s an implementation specific to this jira.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Sorry I meant &quot;it&apos;s &lt;em&gt;not&lt;/em&gt; an implementation specific....&quot;&lt;/p&gt;</comment>
                            <comment id="13743082" author="stack" created="Sun, 18 Aug 2013 00:51:36 +0000"  >&lt;p&gt;This is to be finished post-0.96 then.  We should move the issue out &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=toffer&quot; class=&quot;user-hover&quot; rel=&quot;toffer&quot;&gt;Francis Liu&lt;/a&gt;.  Adding an init/configure to LoadBalancer could come in into 0.96 but would have to be available real fast.&lt;/p&gt;</comment>
                            <comment id="13744001" author="toffer" created="Mon, 19 Aug 2013 17:04:34 +0000"  >&lt;p&gt;Yep post-0.96 is fine. It could be backported to minor versions if need be. Is getting the init/configure patch up tonight fast enough?&lt;/p&gt;</comment>
                            <comment id="13744014" author="stack" created="Mon, 19 Aug 2013 17:20:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=toffer&quot; class=&quot;user-hover&quot; rel=&quot;toffer&quot;&gt;Francis Liu&lt;/a&gt; yes&lt;/p&gt;</comment>
                            <comment id="13744080" author="apurtell" created="Mon, 19 Aug 2013 18:14:13 +0000"  >&lt;p&gt;Thanks for clearing it up guys.&lt;/p&gt;

&lt;p&gt;Edit: Would be good if we can get this into 0.98 and also a 0.96 minor, then there&apos;s a great rolling upgrade story. Please let me know if I can be helpful there.&lt;/p&gt;</comment>
                            <comment id="13747257" author="stack" created="Thu, 22 Aug 2013 05:39:23 +0000"  >&lt;p&gt;Moving out new feature.  Chatting w/ Francis Liu last night, could be good one for 0.98.&lt;/p&gt;</comment>
                            <comment id="13747671" author="apurtell" created="Thu, 22 Aug 2013 17:18:30 +0000"  >&lt;p&gt;Well then we couldn&apos;t use this to stage a 0.96 to 0.98 upgrade on just one placement group. I think that would be a great test of our compatibility story. Any reason this can&apos;t come in on a minor 0.96.x release?&lt;/p&gt;</comment>
                            <comment id="13747787" author="stack" created="Thu, 22 Aug 2013 19:22:29 +0000"  >&lt;p&gt;Its moved out because no dev going on and it a feature.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Any reason this can&apos;t come in on a minor 0.96.x release?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Because 0.98 will be weeks behind and groups+tags will be reason to upgrade&lt;/p&gt;</comment>
                            <comment id="13747809" author="stack" created="Thu, 22 Aug 2013 19:40:31 +0000"  >&lt;p&gt;Sorry, should have said also that I do not see us needing groups to try out a 0.98 daemon in a 0.96 cluster.&lt;/p&gt;</comment>
                            <comment id="14200030" author="toffer" created="Thu, 6 Nov 2014 09:32:22 +0000"  >&lt;p&gt;Draft of trunk patch. I still need to move group apis from CP to part of core api. Everything else should remain the same so most of the patch shouldn&apos;t change pending review comments.&lt;/p&gt;

&lt;p&gt;Review board here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/27673/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/27673/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14215299" author="yuzhihong@gmail.com" created="Mon, 17 Nov 2014 22:22:45 +0000"  >&lt;p&gt;@Francis:&lt;br/&gt;
I went through the updated patch but didn&apos;t seem to find utilization of FavoredNodes.&lt;br/&gt;
Would that be handled in separate JIRA ?&lt;/p&gt;

&lt;p&gt;Getting Hadoop QA run on this patch is desirable.&lt;/p&gt;</comment>
                            <comment id="14215422" author="toffer" created="Mon, 17 Nov 2014 23:40:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ted_yu&quot; class=&quot;user-hover&quot; rel=&quot;ted_yu&quot;&gt;Ted Yu&lt;/a&gt; Yes, that would be in a separate Jira. This is patch is already largish. How do I get Hadoop QA to run?&lt;/p&gt;</comment>
                            <comment id="14215596" author="hadoopqa" created="Tue, 18 Nov 2014 01:49:49 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12679918/HBASE-6721_trunk2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12679918/HBASE-6721_trunk2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12679918&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 27 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 7 warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 3841 checkstyle errors (more than the trunk&apos;s current 3788 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 8 new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +       * &amp;lt;code&amp;gt;rpc ListTablesOfGroup(.ListTablesOfGroupRequest) returns (.ListTablesOfGroupResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc GetGroupInfoOfTable(.GetGroupInfoOfTableRequest) returns (.GetGroupInfoOfTableResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc GetGroupOfServer(.GetGroupOfServerRequest) returns (.GetGroupOfServerResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc ListServersInTransition(.ListServersInTransitionRequest) returns (.ListServersInTransitionResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+     * &amp;lt;code&amp;gt;rpc ListTablesOfGroup(.ListTablesOfGroupRequest) returns (.ListTablesOfGroupResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+     * &amp;lt;code&amp;gt;rpc GetGroupInfoOfTable(.GetGroupInfoOfTableRequest) returns (.GetGroupInfoOfTableResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+     * &amp;lt;code&amp;gt;rpc GetGroupOfServer(.GetGroupOfServerRequest) returns (.GetGroupOfServerResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+     * &amp;lt;code&amp;gt;rpc ListServersInTransition(.ListServersInTransitionRequest) returns (.ListServersInTransitionResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+  public void listTablesOfGroup(RpcController controller, RSGroupProtos.ListTablesOfGroupRequest request, RpcCallback&amp;lt;RSGroupProtos.ListTablesOfGroupResponse&amp;gt; done) {&lt;br/&gt;
+  public void getGroupInfo(RpcController controller, RSGroupProtos.GetGroupInfoRequest request, RpcCallback&amp;lt;RSGroupProtos.GetGroupInfoResponse&amp;gt; done) {&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11725//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11725//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11725//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11725//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11725//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11725//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11725//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11725//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11725//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11725//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11725//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11725//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11725//artifact/patchprocess/newPatchFindbugsWarningshbase-rest.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11725//artifact/patchprocess/newPatchFindbugsWarningshbase-rest.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11725//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11725//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11725//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11725//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11725//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11725//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11725//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11725//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11725//artifact/patchprocess/newPatchFindbugsWarningshbase-annotations.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11725//artifact/patchprocess/newPatchFindbugsWarningshbase-annotations.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11725//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11725//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Javadoc warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11725//artifact/patchprocess/patchJavadocWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11725//artifact/patchprocess/patchJavadocWarnings.txt&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11725//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11725//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14223835" author="enis" created="Tue, 25 Nov 2014 00:32:40 +0000"  >&lt;p&gt;I left some comments in RB, but I wanted to comment on high level things here. &lt;/p&gt;

&lt;p&gt;I think this is generally a useful feature, since we are seeing more and more multi-tenant use cases, and without really good isolation rs groups allow the cluster to be shared more easily. &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I was reading up on the recent YARN label feature (&lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-796&quot; title=&quot;Allow for (admin) labels on nodes and resource-requests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-796&quot;&gt;YARN-796&lt;/a&gt;), since the ideas are very similar. However, in YARN labels, a node can have multiple labels, versus here, a server can only have one group. Will it be better to have one-to-many relationship from servers to groups? All servers will have the default group, as well as any more groups that it is assigned. We can do the same thing for tables as well. By default, tables will belong to group default, but can be added more. For assignment, we just look at all the cumulative list of servers that this region will be assignable to. Will this complicate assignment?&lt;/li&gt;
	&lt;li&gt;Alternatively we can also name this labels (just a suggestion).&lt;/li&gt;
	&lt;li&gt;For all new features, I think it is fair to request one single source of truth and also some more transactional guarantees for operations. If possible, we should not use zk at all (for caching as done in patch). Instead we can just open the region from master. This is different than the co-location discussion for master and meta. This table is tiny, and not query&apos;able from clients. The data is just there for the master to access. If we do this, we do not even have to have a cache.&lt;/li&gt;
	&lt;li&gt;I am ok with bringing this as a core functionality rather than CP + LB. The reasoning is that as clusters grow bigger, more users might be interested in this for better isolation.&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="14224150" author="toffer" created="Tue, 25 Nov 2014 07:34:38 +0000"  >&lt;p&gt;Enis, thanks for the review:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Will it be better to have one-to-many relationship from servers to groups? All servers will have the default group, as well as any more groups that it is assigned. We can do the same thing for tables as well. By default, tables will belong to group default, but can be added more. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I skimmed through &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-796&quot; title=&quot;Allow for (admin) labels on nodes and resource-requests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-796&quot;&gt;YARN-796&lt;/a&gt; doc. To me it seems the notion of yarn labels and rs groups are very different. Labels are intended to add attributes to certain resources (ie gpu, high-memory, etc) so you can request for specific attributes when requesting for resources. While groups mentioned in this jira is meant to identify a logical grouping of resources, meant to guarantee an amount of resources/capacity for a tenant. We have not seen a need for it to date. What do we gain from doing the same for tables? It seems to me the purpose of groups has no need for overlaps either way. Please correct me if I missed something. &lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;For all new features, I think it is fair to request one single source of truth and also some more transactional guarantees for operations. If possible, we should not use zk at all (for caching as done in patch). Instead we can just open the region from master. This is different than the co-location discussion for master and meta. This table is tiny, and not query&apos;able from clients. The data is just there for the master to access. If we do this, we do not even have to have a cache.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I have thought of this as well, we can do this but it would require handling group table in a special way. ie make sure it is assigned after meta and before any other table. have a groupWAL, have it&apos;s one sets of handlers similar to meta, etc. As well as have a special case for making sure meta and root end up in their designated groups even when group table hasn&apos;t been assigned yet. So we&apos;re essentially trading one set of complexities for another. Having said that, I&apos;m ok with either approach. Should write up a patch with this approach?&lt;/p&gt;

&lt;p&gt;On a related note, region servers consume group information from ZK similar to security ACL. This is used in replication and other features we are working on. As mentioned it is possible to remove caching usage of ZK but it would be good to keep the information in there until the same facility security acl will eventually be migrating to is available. Thoughts?&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;I am ok with bringing this as a core functionality rather than CP + LB. The reasoning is that as clusters grow bigger, more users might be interested in this for better isolation.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Great with this we can do the approach mentioned earlier if need be.&lt;/p&gt;
</comment>
                            <comment id="14362830" author="eclark" created="Mon, 16 Mar 2015 06:58:57 +0000"  >&lt;p&gt;I still don&apos;t see the need for the added complexity for most users. HBase is running the risk of being too big and too complex for what most users will use it for.&lt;/p&gt;

&lt;p&gt;The real answer to get large clusters is to get multi-tenancy to just work.&lt;/p&gt;

&lt;p&gt;The best answer is not to add a more different admin tools, config options, and things that add more operational overheard. As you add more and more machine to HBase the answer is not to make more and more special cases. It&apos;s instead to make the base case better. Get QOS, quotas, tiered storage, and better load balancing to work well and the whole idea of group based assignment is then useless. That&apos;s what should be solution for users of HBase. Not more things that need to be explained in the book for the default config/install. Things like:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;does locality based load balancing work with groups?&lt;/li&gt;
	&lt;li&gt;What should hbck return when there&apos;s a region that can&apos;t be assigned due to groups?&lt;/li&gt;
	&lt;li&gt;Does hbck know about groups? If it does then what&apos;s the message there when I haven&apos;t used that feature? If not then will it break things when I use hbck ?&lt;/li&gt;
	&lt;li&gt;How does the open region command work with the groups ?&lt;/li&gt;
	&lt;li&gt;Are the commands listed if the balancer isn&apos;t the group based balancer ?&lt;/li&gt;
	&lt;li&gt;What&apos;s the default group?&lt;/li&gt;
	&lt;li&gt;Is meta/namespace/acl in the default group?&lt;/li&gt;
	&lt;li&gt;I had zookeeper get deleted/go corrupt/ get restored from backup why are all of my regions moving around?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;All of those are added complexities that real users will run into, and in return only a very few will get any added benefit.&lt;/p&gt;

&lt;p&gt;HBase can&apos;t provide the great qos and multi-tenancy right now, so the group based assignment might work well for a specific use case. However it adds complexity and layers of abstraction that hurt most users, while making the ideal solution harder. For that reason I&apos;m against anything that&apos;s built into the the default install. &lt;/p&gt;

&lt;p&gt;HBase should be more like nginx and less like apache in this regard. If you need an added feature and it&apos;s not what most users want then compile/package it in. It should not be a kitchen sink with 10 million different xml configs needed. The first question asked on every posting to user@ mailing list shouldn&apos;t always be &quot;can you post your configs?&quot;&lt;/p&gt;

&lt;p&gt;With all that said I do not want this to seem like I dislike the feature, the code, or the contribution. I really want to say thanks to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=toffer&quot; class=&quot;user-hover&quot; rel=&quot;toffer&quot;&gt;Francis Liu&lt;/a&gt;. I would be a +1 if the code was a co-proc and a different module, something that was much less invasive on the main assignment, and master code.&lt;/p&gt;</comment>
                            <comment id="14362855" author="lhofhansl" created="Mon, 16 Mar 2015 07:24:30 +0000"  >&lt;p&gt;Let me 2nd that. Many thanks to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=toffer&quot; class=&quot;user-hover&quot; rel=&quot;toffer&quot;&gt;Francis Liu&lt;/a&gt;, and also that some of the changes are very complex and pretty invasive.&lt;br/&gt;
Even at Salesforce we do not worry too much cross tenant impact, we rather throw enough resources at it and let HBase do the work, when we see issues we look into general fixes such as the ones that &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt; mentions above.&lt;/p&gt;

&lt;p&gt;Now, Yahoo is a big place with very large clusters and many users on those clusters. If the need arises there for this kind of mulit tenancy, we&apos;d better listen to them and to Francis, before we decide this it not the right path forward.&lt;/p&gt;</comment>
                            <comment id="14364749" author="enis" created="Tue, 17 Mar 2015 08:12:43 +0000"  >&lt;p&gt;This is the reason why we have started the discussion thread on dev@ some time ago: &lt;a href=&quot;http://search-hadoop.com/m/DHED47vIer1&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://search-hadoop.com/m/DHED47vIer1&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;RS group based assignment is already a plugin implementation, but we thought that bringing it as a &quot;core&quot; feature made sense because it will take some time to have full QOS and isolation. In the mean time, RS group based assignments are a reasonable solution that solves a real problem (although at Yahoo!&apos;s scale). However, we are seeing more interest in this patch from other users as well. &lt;/p&gt;

&lt;p&gt;If there is strong objection for this being a core feature, I think we should still commit this as a co-proc based implementation. &lt;/p&gt;</comment>
                            <comment id="14365417" author="apurtell" created="Tue, 17 Mar 2015 16:16:33 +0000"  >&lt;p&gt;It could be useful to have a list of pros and cons for coprocessor implementation vs. core integration. Are we considering core integration for mainly code aesthetic reasons, for example, or are there significant obstacles imposed by a coprocessor implementations strategy? &lt;/p&gt;</comment>
                            <comment id="14366033" author="lhofhansl" created="Tue, 17 Mar 2015 20:37:55 +0000"  >&lt;blockquote&gt;&lt;p&gt;If there is strong objection for this being a core feature&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I&apos;m not objecting. If this is needed we should chose the path of least future pain. Coprocessors lead to pain (as seen with Phoenix, where it is hard to implement core features without using some of our private interfaces), core changes lead to pain too.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;It could be useful to have a list of pros and cons for coprocessor implementation vs. core integration.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14372314" author="toffer" created="Fri, 20 Mar 2015 23:30:28 +0000"  >&lt;p&gt;Thanks for the interest and attention guys. I&apos;ll put up a seed list of pros and cons over the weekend. And we can hammer out concerns there.  &lt;/p&gt;

&lt;p&gt;Similar to namespaces, regionserver groups can actually be enabled by default and existing users wouldn&apos;t notice any difference (except for the extra table that needs to be assigned). Unless they actually use it (similar to namespaces). &lt;/p&gt;

&lt;p&gt;FWIW I believe this feature is useful even for small clusters as long as you have a variation of tenants (or just misbehaving tenants). There are bunch of scenarios that need protection/isolation/QoS. ie cascading failures caused by a tenant, block cache thrashing, different configurations (ie GC configs), different requirements. This becomes even more important in a mixed workload environment (MR, storm, etc).  &lt;/p&gt;</comment>
                            <comment id="14379459" author="toffer" created="Wed, 25 Mar 2015 08:02:45 +0000"  >&lt;p&gt;Here&apos;s the doc as promised:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://docs.google.com/document/d/1tUCDEEEFknn-HYlDqA72gtv02_nVsoKY_Er_8nBoW_0/edit&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://docs.google.com/document/d/1tUCDEEEFknn-HYlDqA72gtv02_nVsoKY_Er_8nBoW_0/edit&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Comments are enabled ping me if anyone want&apos;s edit access to the doc.&lt;/p&gt;

&lt;p&gt;I&apos;ve also update the design doc. &lt;/p&gt;

&lt;p&gt;Fire away.&lt;/p&gt;
</comment>
                            <comment id="14540341" author="toffer" created="Tue, 12 May 2015 17:51:37 +0000"  >&lt;p&gt;We discussed this during HBaseCon. The consensus was to get this into a feature branch to address any stability/integration issues as well as any other concerns. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jmhsieh&quot; class=&quot;user-hover&quot; rel=&quot;jmhsieh&quot;&gt;Jonathan Hsieh&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; How to we go about creating the branch? Should we finish the review and merge it in? Should I rebase?&lt;/p&gt;</comment>
                            <comment id="14540356" author="jmhsieh" created="Tue, 12 May 2015 17:58:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=toffer&quot; class=&quot;user-hover&quot; rel=&quot;toffer&quot;&gt;Francis Liu&lt;/a&gt;.  Here&apos;s my suggestion: Let&apos;s finish the current review in review board.  Then instead of rebasing, let&apos;s use that patch from the point you branched at and start a &apos;hbase-6721&apos; from there.   We can do periodic merges into the &apos;hbase-6721&apos; branch afterwards and capture the changes due to the merges.&lt;/p&gt;</comment>
                            <comment id="14540366" author="toffer" created="Tue, 12 May 2015 18:03:33 +0000"  >&lt;p&gt;Works for me.&lt;/p&gt;</comment>
                            <comment id="14615154" author="yuzhihong@gmail.com" created="Mon, 6 Jul 2015 15:15:56 +0000"  >&lt;p&gt;Looks like branch hbase-6721 has not been created.&lt;/p&gt;

&lt;p&gt;Should we proceed with what Jon suggested above ?&lt;/p&gt;</comment>
                            <comment id="14625103" author="apurtell" created="Mon, 13 Jul 2015 18:26:22 +0000"  >&lt;p&gt;Creating the branch is easy. Was the review on RB finished? &lt;/p&gt;</comment>
                            <comment id="14633078" author="toffer" created="Mon, 20 Jul 2015 06:03:05 +0000"  >&lt;p&gt;Unless I&apos;m missing something it seems the review is still pending. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jmhsieh&quot; class=&quot;user-hover&quot; rel=&quot;jmhsieh&quot;&gt;Jonathan Hsieh&lt;/a&gt; would you still be able to complete the review? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14633661" author="jmhsieh" created="Mon, 20 Jul 2015 14:49:45 +0000"  >&lt;p&gt;Sorry, I didn&apos;t realize I was blocking.  I can&apos;t commit to doing a review in the short term &amp;#8211; please proceed without me.  Let me suggest that we commit what we have with a cursory review to a branch and then make progress there.&lt;/p&gt;
</comment>
                            <comment id="14634174" author="apurtell" created="Mon, 20 Jul 2015 22:27:49 +0000"  >&lt;blockquote&gt;&lt;p&gt;Let me suggest that we commit what we have with a cursory review to a branch and then make progress there.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1&lt;br/&gt;
Ping me for assistance when you&apos;re ready to commit to a branch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=toffer&quot; class=&quot;user-hover&quot; rel=&quot;toffer&quot;&gt;Francis Liu&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="14634541" author="toffer" created="Tue, 21 Jul 2015 05:37:32 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt; let me go through the patch and rebase it as well. Will put up an updated patch this week.&lt;/p&gt;</comment>
                            <comment id="14645394" author="toffer" created="Wed, 29 Jul 2015 03:19:15 +0000"  >&lt;p&gt;Rebased patch.&lt;/p&gt;</comment>
                            <comment id="14645396" author="toffer" created="Wed, 29 Jul 2015 03:21:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt; I rebased the patch onto trunk. This should be good enough to commit to a branch. &lt;/p&gt;</comment>
                            <comment id="14645446" author="hadoopqa" created="Wed, 29 Jul 2015 04:58:57 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12747704/HBASE-6721_11.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12747704/HBASE-6721_11.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 05de2ec5801fbba4577fb363f858a6e6f282c104.&lt;br/&gt;
  ATTACHMENT ID: 12747704&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 30 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 6 warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 1908 checkstyle errors (more than the master&apos;s current 1864 errors).&lt;/p&gt;

&lt;p&gt;		    &lt;font color=&quot;red&quot;&gt;-1 InterfaceAudience&lt;/font&gt;.  The patch appears to contain InterfaceAudience from hadoop rather than hbase:&lt;br/&gt;
             +import org.apache.hadoop.classification.InterfaceAudience;&lt;br/&gt;
+import org.apache.hadoop.classification.InterfaceStability;&lt;br/&gt;
+import org.apache.hadoop.classification.InterfaceAudience;&lt;br/&gt;
+import org.apache.hadoop.classification.InterfaceAudience;.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 release audit&lt;/font&gt;.  The applied patch generated 1 release audit warnings (more than the master&apos;s current 0 warnings).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +       * &amp;lt;code&amp;gt;rpc getLastMajorCompactionTimestamp(.hbase.pb.MajorCompactionTimestampRequest) returns (.hbase.pb.MajorCompactionTimestampResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc getLastMajorCompactionTimestampForRegion(.hbase.pb.MajorCompactionTimestampForRegionRequest) returns (.hbase.pb.MajorCompactionTimestampResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc getProcedureResult(.hbase.pb.GetProcedureResultRequest) returns (.hbase.pb.GetProcedureResultResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc GetGroupInfo(.hbase.pb.GetGroupInfoRequest) returns (.hbase.pb.GetGroupInfoResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc GetGroupInfoOfTable(.hbase.pb.GetGroupInfoOfTableRequest) returns (.hbase.pb.GetGroupInfoOfTableResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc GetGroupInfoOfServer(.hbase.pb.GetGroupInfoOfServerRequest) returns (.hbase.pb.GetGroupInfoOfServerResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc MoveServers(.hbase.pb.MoveServersRequest) returns (.hbase.pb.MoveServersResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc MoveTables(.hbase.pb.MoveTablesRequest) returns (.hbase.pb.MoveTablesResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc RemoveGroup(.hbase.pb.RemoveGroupRequest) returns (.hbase.pb.RemoveGroupResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc BalanceGroup(.hbase.pb.BalanceGroupRequest) returns (.hbase.pb.BalanceGroupResponse);&amp;lt;/code&amp;gt;&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14922//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14922//testReport/&lt;/a&gt;&lt;br/&gt;
Release audit warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14922//artifact/patchprocess/patchReleaseAuditWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14922//artifact/patchprocess/patchReleaseAuditWarnings.txt&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14922//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14922//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14922//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14922//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Javadoc warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14922//artifact/patchprocess/patchJavadocWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14922//artifact/patchprocess/patchJavadocWarnings.txt&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14922//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14922//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14650440" author="apurtell" created="Sat, 1 Aug 2015 16:36:14 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=toffer&quot; class=&quot;user-hover&quot; rel=&quot;toffer&quot;&gt;Francis Liu&lt;/a&gt;. I applied your latest patch to master and pushed the result as new branch &quot;hbase-6721&quot;. I checked that it compiled before pushing but didn&apos;t run tests.&lt;/p&gt;

&lt;p&gt;Do you need this for 0.98? If so, we can do another branch &quot;hbase-6721-0.98&quot; with a backport and rebase it at every RC. Or branch-1.&lt;/p&gt;</comment>
                            <comment id="14659561" author="toffer" created="Thu, 6 Aug 2015 06:27:59 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;, that&apos;d be great let me work on one.&lt;/p&gt;</comment>
                            <comment id="14662670" author="gwu91" created="Fri, 7 Aug 2015 23:55:11 +0000"  >&lt;p&gt;As I&apos;ve been studying this code, in order to aid with the understanding of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6721&quot; title=&quot;RegionServer Group based Assignment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6721&quot;&gt;&lt;del&gt;HBASE-6721&lt;/del&gt;&lt;/a&gt;, I&#8217;ve created some UML sequence diagrams of functions within GroupBasedLoadBalancer.java. This UML diagram only focuses on GroupBasedLoadBalancer, since GroupBasedLoadBalancer, along with GroupInfoManager, GroupInfoManagerImpl and GroupInfo as well as some way to configure groups represent the core functionality needed for this implementation. This represents the 1,500 core lines implementing the region server group functionality; this documentation does not cover the extensive configuration management via CLI stored in Zookeeper and an HBase table.&lt;/p&gt;

&lt;p&gt;The goal of &lt;tt&gt;GroupBasedLoadBalancer&lt;/tt&gt; is to separate servers and regions into groups, and to balance within groups using another load balancer (referred to as internal load balancer). The default load balancer used is &lt;tt&gt;StochasticLoadBalancer&lt;/tt&gt;. Each group is stored as a &lt;tt&gt;GroupInfo&lt;/tt&gt; object, and &lt;tt&gt;GroupInfoManagerImpl&lt;/tt&gt; holds a collection of &lt;tt&gt;GroupInfo&lt;/tt&gt; objects with APIs allowing for the manipulation of this collection. These groups can be created and configured via the CLI, and are stored within an HBase table as well as Zookeeper. As &lt;tt&gt;GroupBasedLoadBalancer&lt;/tt&gt; implements the &lt;tt&gt;LoadBalancer&lt;/tt&gt; interface, it has the following functions from the interface: &lt;br/&gt;
As GroupBasedLoadBalancer implements the LoadBalancer interface, it has the following functions from the interface: &lt;br/&gt;
&#8226;	balanceCluster&lt;br/&gt;
&#8226;	roundRobinAssignment&lt;br/&gt;
&#8226;	retainAssignment&lt;br/&gt;
&#8226;	immediateAssignment&lt;br/&gt;
&#8226;	randomAssignment&lt;br/&gt;
&#8226;	initialize&lt;br/&gt;
&#8226;	isStopped&lt;br/&gt;
&#8226;	setGroupInfoManager&lt;/p&gt;

&lt;p&gt;Additionally, GroupBasedLoadBalancer has several helper functions:&lt;br/&gt;
&#8226;	offlineRetainAssignment&lt;br/&gt;
&#8226;	onlineRetainAssignment&lt;br/&gt;
&#8226;	generateGroupMaps&lt;br/&gt;
&#8226;	filterOfflineServers&lt;br/&gt;
&#8226;	filterServers&lt;br/&gt;
&#8226;	getMisplacedRegions&lt;br/&gt;
&#8226;	correctAssignments&lt;br/&gt;
&#8226;	isOnline&lt;br/&gt;
&#8226;	getGroupInfoManager&lt;/p&gt;

&lt;p&gt;Through reading the code for the load balancer portion of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6721&quot; title=&quot;RegionServer Group based Assignment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6721&quot;&gt;&lt;del&gt;HBASE-6721&lt;/del&gt;&lt;/a&gt;, I have a few questions:&lt;br/&gt;
1.	Within the interface GroupInfoManager.java, I noticed that the function getGroupOfServer returns a GroupInfo object, but the function getGroupOfTable returns a String object. Was there a performance consideration or some other reason for returning a string? (It seems the API would be more consistent to return a GroupInfo object.)&lt;br/&gt;
2.	For the function onlineRetainAssignment why are regions assigned to bogus so it ends up in RIT if a server is not available? (We would like to keep as few regions in RIT as possible in order to maximize our availability.)&lt;br/&gt;
3.	On the topic of onlineRetainAssignment, what is the objective for separating online and offline servers? I noticed that another balancer such as the StochasticLoadBalancer does not make such a distinction.&lt;/p&gt;

&lt;p&gt;Lastly, the UML diagram I created can be edited by downloading the attached XML file and editing with &lt;a href=&quot;http://draw.io&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://draw.io&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14695037" author="toffer" created="Thu, 13 Aug 2015 10:35:30 +0000"  >&lt;p&gt;draft of backported patch to 98.  need to run integration and unit tests then it should be good to go.&lt;/p&gt;</comment>
                            <comment id="14695050" author="toffer" created="Thu, 13 Aug 2015 10:47:38 +0000"  >&lt;blockquote&gt;
&lt;p&gt;1.	Within the interface GroupInfoManager.java, I noticed that the function getGroupOfServer returns a GroupInfo object, but the function getGroupOfTable returns a String object. Was there a performance consideration or some other reason for returning a string? (It seems the API would be more consistent to return a GroupInfo object.)&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yeah performance. I didn&apos;t want to have to gather the information to generate the GroupInfo object since most internal calls won&apos;t need it. The external api call is consistent tho.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;2.	For the function onlineRetainAssignment why are regions assigned to bogus so it ends up in RIT if a server is not available? (We would like to keep as few regions in RIT as possible in order to maximize our availability.)&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This guarantees isolation. Which is one of the key features of Region Server Groups. ie you don&apos;t want the reason that the region from one group to run out of live servers to affect the regions in another group. So worst case you affect the availability of the group and not the entire cluster. What&apos;s your use case for region server groups?&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;3.	On the topic of onlineRetainAssignment, what is the objective for separating online and offline servers? I noticed that another balancer such as the StochasticLoadBalancer does not make such a distinction.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes that&apos;s inherent in GroupBaseLoadBalancer. Stochastic only looks at what&apos;s online, while Group needs to look at which member servers are online.&lt;/p&gt;</comment>
                            <comment id="14695083" author="hadoopqa" created="Thu, 13 Aug 2015 11:34:50 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12750267/HBASE-6721_98_1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12750267/HBASE-6721_98_1.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 9c69bf766fcad024bef5760f242cae2bc609b374.&lt;br/&gt;
  ATTACHMENT ID: 12750267&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 33 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15084//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15084//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14695557" author="apurtell" created="Thu, 13 Aug 2015 16:53:30 +0000"  >&lt;blockquote&gt;&lt;p&gt;draft of backported patch to 98. need to run integration and unit tests then it should be good to go.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=toffer&quot; class=&quot;user-hover&quot; rel=&quot;toffer&quot;&gt;Francis Liu&lt;/a&gt;, let me know when you think it&apos;s ready to go in and I&apos;ll make a branch with its application&lt;/p&gt;</comment>
                            <comment id="14697355" author="toffer" created="Fri, 14 Aug 2015 16:48:13 +0000"  >&lt;p&gt;Tests passed tho I had to patch HBase/IntegrationTestingUtilitily to get the tests to run properly, there was a regression in an api that used to work in distributed mode and now it doesn&apos;t. Will deal with that issue in a separate jira. &lt;/p&gt;

&lt;p&gt;Reconciled some changes with internal implementation, rebased. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt; the patch should be good to commit. will need to create an addendum for trunk patch.&lt;/p&gt;</comment>
                            <comment id="14697394" author="apurtell" created="Fri, 14 Aug 2015 17:09:09 +0000"  >&lt;blockquote&gt;&lt;p&gt;the patch should be good to commit.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I made a branch &apos;hbase-6721-0.98&apos; with the v2 0.98 patch applied and pushed it.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;will need to create an addendum for trunk patch.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Please post the addendum here, I&apos;ll commit it to hbase-6721 branch.&lt;/p&gt;

&lt;p&gt;When updating the feature branches do you prefer me to merge or rebase? I typically rebase in my own work but will do what you prefer, just say.&lt;/p&gt;</comment>
                            <comment id="14697422" author="hadoopqa" created="Fri, 14 Aug 2015 17:27:37 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12750554/HBASE-6721_98_2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12750554/HBASE-6721_98_2.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 45aafb25b7911b5917ab47133e3e4268806e4c91.&lt;br/&gt;
  ATTACHMENT ID: 12750554&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 33 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15104//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15104//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14697611" author="ndimiduk" created="Fri, 14 Aug 2015 19:45:38 +0000"  >&lt;p&gt;Reattaching &apos;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6721&quot; title=&quot;RegionServer Group based Assignment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6721&quot;&gt;&lt;del&gt;HBASE-6721&lt;/del&gt;&lt;/a&gt;_0.98_2.patch&apos; with &apos;0.98&apos; in the name to match the branch-specific filter.&lt;/p&gt;</comment>
                            <comment id="14697875" author="apurtell" created="Fri, 14 Aug 2015 22:31:02 +0000"  >&lt;p&gt;I ran the binary compatibility checker tool comparing hbase-6721-0.98 with 0.98.13. The tool says hbase-6721-0.98 is 100% binary compatible with 0.98.13, with some source level incompatibility of mild concern in the MasterObserver interface. &lt;/p&gt;</comment>
                            <comment id="14697887" author="apurtell" created="Fri, 14 Aug 2015 22:39:39 +0000"  >&lt;p&gt;Do we need GroupAdmin and GroupAdminClient now? A hold over from an initial coprocessor based implementation?&lt;/p&gt;
</comment>
                            <comment id="14697919" author="hadoopqa" created="Fri, 14 Aug 2015 23:00:59 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12750586/HBASE-6721_0.98_2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12750586/HBASE-6721_0.98_2.patch&lt;/a&gt;&lt;br/&gt;
  against 0.98 branch at commit 45aafb25b7911b5917ab47133e3e4268806e4c91.&lt;br/&gt;
  ATTACHMENT ID: 12750586&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 33 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 28 warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 3913 checkstyle errors (more than the master&apos;s current 3876 errors).&lt;/p&gt;

&lt;p&gt;		    &lt;font color=&quot;red&quot;&gt;-1 InterfaceAudience&lt;/font&gt;.  The patch appears to contain InterfaceAudience from hadoop rather than hbase:&lt;br/&gt;
             +import org.apache.hadoop.classification.InterfaceAudience;&lt;br/&gt;
+import org.apache.hadoop.classification.InterfaceStability;&lt;br/&gt;
+import org.apache.hadoop.classification.InterfaceAudience;&lt;br/&gt;
+import org.apache.hadoop.classification.InterfaceAudience;.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 release audit&lt;/font&gt;.  The applied patch generated 1 release audit warnings (more than the master&apos;s current 0 warnings).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +        public GetGroupInfoResponse getGroupInfo(RpcController controller, GetGroupInfoRequest request) throws ServiceException {&lt;br/&gt;
+        public GetGroupInfoOfTableResponse getGroupInfoOfTable(RpcController controller, GetGroupInfoOfTableRequest request) throws ServiceException {&lt;br/&gt;
+        public GetGroupInfoOfServerResponse getGroupInfoOfServer(RpcController controller, GetGroupInfoOfServerRequest request) throws ServiceException {&lt;br/&gt;
+        public MoveServersResponse moveServers(RpcController controller, MoveServersRequest request) throws ServiceException {&lt;br/&gt;
+        public MoveTablesResponse moveTables(RpcController controller, MoveTablesRequest request) throws ServiceException {&lt;br/&gt;
+        public AddGroupResponse addGroup(RpcController controller, AddGroupRequest request) throws ServiceException {&lt;br/&gt;
+        public RemoveGroupResponse removeGroup(RpcController controller, RemoveGroupRequest request) throws ServiceException {&lt;br/&gt;
+        public BalanceGroupResponse balanceGroup(RpcController controller, BalanceGroupRequest request) throws ServiceException {&lt;br/&gt;
+        public ListGroupInfosResponse listGroupInfos(RpcController controller, ListGroupInfosRequest request) throws ServiceException {&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc GetGroupInfoOfTable(.GetGroupInfoOfTableRequest) returns (.GetGroupInfoOfTableResponse);&amp;lt;/code&amp;gt;&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 site&lt;/font&gt;.  The patch appears to cause mvn post-site goal to fail.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 5 zombie test(s): 	at org.apache.hadoop.hbase.regionserver.wal.TestLogRolling.testLogRolling(TestLogRolling.java:219)&lt;br/&gt;
	at org.apache.hadoop.hbase.TestIOFencing.testFencingAroundCompaction(TestIOFencing.java:227)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.TestSplitTransactionOnCluster.testRITStateForRollback(TestSplitTransactionOnCluster.java:292)&lt;br/&gt;
	at org.apache.hadoop.hbase.io.encoding.TestEncodedSeekers.testEncodedSeeker(TestEncodedSeekers.java:118)&lt;br/&gt;
	at org.apache.hadoop.hbase.TestClusterBootOrder.testBootRegionServerFirst(TestClusterBootOrder.java:104)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15105//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15105//testReport/&lt;/a&gt;&lt;br/&gt;
Release audit warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15105//artifact/patchprocess/patchReleaseAuditWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15105//artifact/patchprocess/patchReleaseAuditWarnings.txt&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15105//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15105//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15105//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15105//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Javadoc warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15105//artifact/patchprocess/patchJavadocWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15105//artifact/patchprocess/patchJavadocWarnings.txt&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15105//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15105//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14699177" author="toffer" created="Mon, 17 Aug 2015 08:28:30 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt; wasn&apos;t aware of that feature.&lt;/p&gt;</comment>
                            <comment id="14699179" author="toffer" created="Mon, 17 Aug 2015 08:30:43 +0000"  >&lt;blockquote&gt;
&lt;p&gt;I ran the binary compatibility checker tool comparing hbase-6721-0.98 with 0.98.13. The tool says hbase-6721-0.98 is 100% binary compatible with 0.98.13, with some source level incompatibility of mild concern in the MasterObserver interface. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This is prolly because of the new methods this patch adds to the interface. This shouldn&apos;t be a concern then?&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Do we need GroupAdmin and GroupAdminClient now? A hold over from an initial coprocessor based implementation?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This was based on review comments from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; tho I&apos;m not sure if the comment still stands post-cp implementation. I am fine either way. Should this be in HBaseAdmin then?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/27673/diff/2?file=751817#file751817line52&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/27673/diff/2?file=751817#file751817line52&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/27673/diff/2?file=751816#file751816line35&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/27673/diff/2?file=751816#file751816line35&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="14700022" author="apurtell" created="Mon, 17 Aug 2015 18:49:44 +0000"  >&lt;blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Do we need GroupAdmin and GroupAdminClient now? A hold over from an initial coprocessor based implementation?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This was based on review comments from Enis Soztutar tho I&apos;m not sure if the comment still stands post-cp implementation. I am fine either way. Should this be in HBaseAdmin then?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I opened &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14226&quot; title=&quot;Merge group admin APIs into Admin&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14226&quot;&gt;&lt;del&gt;HBASE-14226&lt;/del&gt;&lt;/a&gt; to discuss merging them.&lt;/p&gt;</comment>
                            <comment id="14700035" author="apurtell" created="Mon, 17 Aug 2015 18:58:44 +0000"  >&lt;blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;The tool says hbase-6721-0.98 is 100% binary compatible with 0.98.13, with some source level incompatibility of mild concern in the MasterObserver interface.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This is prolly because of the new methods this patch adds to the interface. This shouldn&apos;t be a concern then?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes, it will be a concern for things like Apache Phoenix. (See their IndexMasterObserver, etc.) We can handle this by using compatibility helpers that won&apos;t attempt to invoke the new APIs on MasterObservers that do not implement them. We do something like this in WALCoprocessorHost. &lt;/p&gt;</comment>
                            <comment id="14700490" author="enis" created="Tue, 18 Aug 2015 00:09:21 +0000"  >&lt;blockquote&gt;&lt;p&gt;This was based on review comments from Enis Soztutar tho I&apos;m not sure if the comment still stands post-cp implementation. I am fine either way. Should this be in HBaseAdmin then?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This comes back to the discussion of whether RS groups are coprocessor based or core feature. If a core feature, then GroupAdmin methods should move to Admin interface. Otherwise, a GroupAdmin interface + a way to construct the GroupAdminClient would be the way to go. &lt;/p&gt;</comment>
                            <comment id="14709590" author="toffer" created="Mon, 24 Aug 2015 16:45:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt; Attached is the addedum patch which addresses three things: 1. Forward port some changes from 0.98 feature branch, 2. Address CP backward compatibility support, 3. Address removal of GroupAdmin and GroupAdminClient and moving the apis to Admin. Let me know if you&apos;d like me to break these up into separate patches. Didn&apos;t do that as I thought it&apos;d be more complicated.&lt;/p&gt;</comment>
                            <comment id="14709756" author="hadoopqa" created="Mon, 24 Aug 2015 18:10:17 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12752029/HBASE-6721_hbase-6721_addendum.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12752029/HBASE-6721_hbase-6721_addendum.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 9334a47d4570f8adfc003f0fb2c5969a88c3bba0.&lt;br/&gt;
  ATTACHMENT ID: 12752029&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 21 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15222//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15222//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14709846" author="apurtell" created="Mon, 24 Aug 2015 18:51:19 +0000"  >&lt;blockquote&gt;&lt;p&gt;Let me know if you&apos;d like me to break these up into separate patches. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes, let&apos;s do that. Now that we have feature branches with the previous patches posted here committed, all new work are addendums. It&apos;s best IMHO if the addendums have their own JIRA identifiers so we can collect patches and any discussion for each on separate tickets instead of all lumped in here. &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;1. Forward port some changes from 0.98 feature branch&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This needs committing to the master branch only. I suggest opening a subtask for it.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;2. Address CP backward compatibility support&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This needs committing to both master and 0.98 branches. Work should be done on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14232&quot; title=&quot;Backwards compatiblity support for new MasterObserver APIs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14232&quot;&gt;&lt;del&gt;HBASE-14232&lt;/del&gt;&lt;/a&gt;. Pretty sure we will need two patches, one for master, one for 0.98&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;3. Address removal of GroupAdmin and GroupAdminClient and moving the apis to Admin. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This needs committing to both master and 0.98 branches. Work should be done on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14226&quot; title=&quot;Merge group admin APIs into Admin&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14226&quot;&gt;&lt;del&gt;HBASE-14226&lt;/del&gt;&lt;/a&gt;. Pretty sure we will need two patches, one for master, one for 0.98&lt;/p&gt;</comment>
                            <comment id="14712237" author="toffer" created="Wed, 26 Aug 2015 00:21:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt; created the patches in separate jiras. The patches are built on top of each other. The order is: &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14312&quot; title=&quot;Forward port some fixes from hbase-6721-0.98 to hbase-6721&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14312&quot;&gt;&lt;del&gt;HBASE-14312&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14232&quot; title=&quot;Backwards compatiblity support for new MasterObserver APIs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14232&quot;&gt;&lt;del&gt;HBASE-14232&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14226&quot; title=&quot;Merge group admin APIs into Admin&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14226&quot;&gt;&lt;del&gt;HBASE-14226&lt;/del&gt;&lt;/a&gt;. Let me know if you&apos;d like to rebase the succeeding patches once the one(s) prior are committed.&lt;/p&gt;</comment>
                            <comment id="14712238" author="toffer" created="Wed, 26 Aug 2015 00:22:36 +0000"  >&lt;p&gt;I&apos;ll create 98 whenver a trunk patch is committed.&lt;/p&gt;</comment>
                            <comment id="14715435" author="apurtell" created="Wed, 26 Aug 2015 20:14:49 +0000"  >&lt;blockquote&gt;&lt;p&gt;Let me know if you&apos;d like to rebase the succeeding patches once the one(s) prior are committed.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m thinking we start carving out work as subtasks, applying patches from the subtasks to hbase-6721 branch, make the 0.98 versions of them and apply them to hbase-6721-0.98 branch. This will make development on these branches almost exactly like dev on a release branch.&lt;/p&gt;

&lt;p&gt;On rebase vs. merge:&lt;br/&gt;
1. I can rebase, fix up for changes, then force push, for both hbase-6721 and hbase-6721-0.98&lt;br/&gt;
2. I can merge master into hbase-6721 (and 0.98 into hbase-6721-0.98), fix up for changes, commit the fixups in a merge commit, and then push the merged result.&lt;/p&gt;

&lt;p&gt;There are pros and cons to either approach. What would work best for you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=toffer&quot; class=&quot;user-hover&quot; rel=&quot;toffer&quot;&gt;Francis Liu&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="14717010" author="toffer" created="Thu, 27 Aug 2015 16:37:16 +0000"  >&lt;p&gt;Chatted with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt; at the powow. We&apos;ll be doing rebases when pulling in changes from master/0.98.&lt;/p&gt;</comment>
                            <comment id="14717875" author="enis" created="Fri, 28 Aug 2015 01:28:00 +0000"  >&lt;blockquote&gt;&lt;p&gt;Chatted with Andrew Purtell at the powow. We&apos;ll be doing rebases when pulling in changes from master/0.98.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;So how are we gonna do reviews? I think only the master patch reviews are fine, but it would be good if we list the RBs here. &lt;/p&gt;</comment>
                            <comment id="14717954" author="apurtell" created="Fri, 28 Aug 2015 02:45:48 +0000"  >&lt;p&gt;I was thinking review patches on subtasks as normal. Once the work in total is ready to attempt a branch merge we can put up a single merge patch for here and RB. At any time it&apos;s possible to generate omnibus patches for RB if that would be helpful. &lt;/p&gt;</comment>
                            <comment id="14720069" author="toffer" created="Fri, 28 Aug 2015 16:07:00 +0000"  >&lt;p&gt;Sounds good. I don&apos;t have any other changes pending so I&apos;m going to update RB with the new patch on trunk. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt; thanks for taking care of the backport to 0.98 for the patches.&lt;/p&gt;</comment>
                            <comment id="14720115" author="toffer" created="Fri, 28 Aug 2015 16:20:12 +0000"  >&lt;p&gt;Here&apos;s a new RB request:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/27673/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/27673/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14720119" author="toffer" created="Fri, 28 Aug 2015 16:21:57 +0000"  >&lt;p&gt;Sorry it&apos;s not a new RB request I updated the old one. Was thinking wether I should just create a new RB request. &lt;/p&gt;</comment>
                            <comment id="14720145" author="hadoopqa" created="Fri, 28 Aug 2015 16:29:03 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12753020/HBASE-6721_12.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12753020/HBASE-6721_12.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit cc1542828de93b8d54cc14497fd5937989ea1b6d.&lt;br/&gt;
  ATTACHMENT ID: 12753020&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 33 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15317//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15317//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14720273" author="eclark" created="Fri, 28 Aug 2015 17:23:06 +0000"  >&lt;p&gt;I&apos;m still officially -1 as long as this is built into the core. 99.99%(assuming 10k hbase users)  of HBase users should never ever run something like this. It will make an already very operationally complex system un-workable. Because of that anything that&apos;s in the default code, adds to the default admin, and is built in is something I can&apos;t see ever being ok with.&lt;/p&gt;

&lt;p&gt;All of this has already been tried at FB and it was a mistake.  This ends up looking functionally very similar to 0.89-fb&apos;s favored nodes. ( Only assign regions to specific set of machines that&apos;s configured by the admin ). It&apos;s so bad that almost every time we try and solve an issue on a cluster with favored nodes, the first thing we do is turn off the balancer so that we don&apos;t have to worry about which nodes are configured to have with regions. That&apos;s literally step one of debugging. Turn off this feature.&lt;br/&gt;
We&apos;ll have a party when FB no longer has this operational nightmare. I won&apos;t sign anyone up for the same. I won&apos;t sign myself up for the same.&lt;/p&gt;

&lt;p&gt;So I&apos;m -1 on anything that I can&apos;t completely remove. RM -RF.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Assignment manager is already too complex adding more complexity is awful&lt;/li&gt;
	&lt;li&gt;region movement is already too stateful. Adding more is awful&lt;/li&gt;
	&lt;li&gt;configuration of HBase is already way too complex. Multiplying that with multiple groups is awful.&lt;/li&gt;
	&lt;li&gt;Admin already has way too many things for users to do that cause issue. Adding more ways for a cluster to be borked is awful.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14720395" author="toffer" created="Fri, 28 Aug 2015 18:47:03 +0000"  >&lt;blockquote&gt;
&lt;p&gt;All of this has already been tried at FB and it was a mistake. This ends up looking functionally very similar to 0.89-fb&apos;s favored nodes. ( Only assign regions to specific set of machines that&apos;s configured by the admin ). It&apos;s so bad that almost every time we try and solve an issue on a cluster with favored nodes, the first thing we do is turn off the balancer so that we don&apos;t have to worry about which nodes are configured to have with regions. That&apos;s literally step one of debugging. Turn off this feature.&lt;br/&gt;
We&apos;ll have a party when FB no longer has this operational nightmare. I won&apos;t sign anyone up for the same. I won&apos;t sign myself up for the same.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;IMHO that&apos;s not an objective comparison. Favored Nodes and Region Server groups are very different. Their use cases are very different and their implementations are also very different.  &lt;/p&gt;

&lt;p&gt;As for how useful it is for us (and potenitally for others), if we actually removed region server groups I&apos;m pretty sure our HBase team and SEs would revolt &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. If we didn&apos;t have this feature we would be managing around 80 hbase clusters right now instead of the 6 multi-tenant cluster we are currently running. Step one of debugging is not turning of the balancer that would make things worse. In fact one of the useful features of region server groups is quickly isolating tables to a new group if they are misbehaving or their workload has changed. This can be done in a few minutes if not seconds. &lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Assignment manager is already too complex adding more complexity is awful&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;If you look at the patch, the change in AM is an extra 20 lines of code. 6 lines are just bugfixes that should be done to AM anyway and the other 14 lines which is fairly straightforward we can even live without if that&apos;s what it takes.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;region movement is already too stateful. Adding more is awful&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Adding more states?&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Configuration of HBase is already way too complex. Multiplying that with multiple groups is awful.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Not sure what the concern here is? That there&apos;s an option to configure a different balancer? &lt;/p&gt;




</comment>
                            <comment id="14720440" author="apurtell" created="Fri, 28 Aug 2015 19:28:04 +0000"  >&lt;p&gt;Agreed we should evaluate these changes on their own merit. &lt;/p&gt;

&lt;p&gt;No core changes at all isn&apos;t a reasonable precondition because even with implementing as a coprocessor based feature we&apos;d need new hooks. Those hooks would touch the same places. IMHO implementing as a coprocessor based feature makes little sense given the relatively small changes needed. it would unnecessarily pollute our space of admin APIs and shell commands with seperate APIs for optional feature like we have with security. &lt;/p&gt;

&lt;p&gt;Agreed the ops impact should be totally optional. Where these changes modify existing function it&apos;s reasonable to make sure the modified behavior all sits behind configuration based conditionals. &lt;/p&gt;</comment>
                            <comment id="14720445" author="apurtell" created="Fri, 28 Aug 2015 19:33:40 +0000"  >&lt;p&gt;I also find this a lot less impactful than MOB yet that went in. I think we need to be rational about the risks this change actually imposes. &lt;/p&gt;</comment>
                            <comment id="14720500" author="eclark" created="Fri, 28 Aug 2015 20:16:03 +0000"  >&lt;blockquote&gt;&lt;p&gt;I also find this a lot less impactful than MOB &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This is touching the code that empirically has been the worst part of hbase, and making it more complex. It&apos;s adding things that require user configuration. Adding things that require user interaction on failure (failed open is an awful thing to do to a table).&lt;/p&gt;

&lt;p&gt;This adds another table that&apos;s required for the master to interact with for assignment and region movement. Right now master is really struggling because of the feedback loop of rit -&amp;gt; meta -&amp;gt; meta moves -&amp;gt; rit. Now we have double the number of tables.&lt;/p&gt;

&lt;p&gt;On top of that it adds in more things to Zk while we&apos;re trying to remove as much data from there as possible.&lt;/p&gt;

&lt;p&gt;This patch breaks ipv6.&lt;br/&gt;
This patch has Copy Paste code.&lt;br/&gt;
This patch doesn&apos;t have the correct headers.&lt;br/&gt;
This patch doesn&apos;t load meta&apos;s hri from disk on move.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;IMHO that&apos;s not an objective comparison. Favored Nodes and Region Server groups are very different. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Not really they both are user configured places to put regions. Both features interact with the balancer and AM. Both features affect the cluster in disasters in basically the same way.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Adding more states?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Failed open due to bogus servers. So an old state used in a new way. That means something different than it did before.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;That there&apos;s an option to configure a different balancer?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;There are tons more configurations than that. There&apos;s namespace goups, table groups and groups for regionservers to be part of. Then there&apos;s all of the different configurations for the servers that are in different groups.&lt;/p&gt;

&lt;p&gt;This is the worst possible way to do multi-tenancy. We&apos;re layering a hack on rather than do the real thing.&lt;br/&gt;
You&apos;re getting the same number of SPOF&apos;s and an added operational complexity.&lt;/p&gt;

&lt;p&gt;If we want multi-tenancy, then lets do that right. We shouldn&apos;t accept hacks that don&apos;t help most users and make getting to the correct solution harder.&lt;/p&gt;</comment>
                            <comment id="14720602" author="enis" created="Fri, 28 Aug 2015 21:27:28 +0000"  >

&lt;blockquote&gt;&lt;p&gt;This patch breaks ipv6.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This patch has Copy Paste code.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This patch doesn&apos;t have the correct headers.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This patch doesn&apos;t load meta&apos;s hri from disk on move.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;These are review comments that are not related to the discussion right now. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;If we want multi-tenancy, then lets do that right. We shouldn&apos;t accept hacks that don&apos;t help most users and make getting to the correct solution harder.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I don&apos;t understand your reasoning. Yahoo has been running with this for &amp;gt;1 year, and we have other users that will run with RS groups once it is  in. The way I see it is not a hack, but a step towards better guarantees. Multi-tenancy and isolation will never be perfect and will always be an ongoing effort to improve it. For example, without making the coprocessors run in a colocated container, we cannot isolate one tenants co-processors from the others today. Saying that we should fix EVERY multitenancy/isolation problem which can take years is not realistic. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Agreed the ops impact should be totally optional.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;+1 to this. I think with the patch it is already the case. If you are not using the feature, you should not be affected in any way. Yes, with RS groups, if you do not know what you are doing, it is more states and more things can go wrong, but we are not making it default or anything. Memcache based block cache is only used by FB and it is just added complexity for remaining users, but we have it regardless. &lt;/p&gt;</comment>
                            <comment id="14720619" author="eclark" created="Fri, 28 Aug 2015 21:35:57 +0000"  >&lt;blockquote&gt;&lt;p&gt;we have other users that will run with RS groups once it is in. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;We&apos;re failing all of those users then.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Memcache based block cache is only used by FB and it is just added complexity for remaining users, but we have it regardless.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;It&apos;s a pluggable thing with it off and no added complexity to the default path. If you think it should be in a different module I would be amenable to moving it.&lt;br/&gt;
As i&apos;ve said before that&apos;s what I think we should do here. Make it pluggable with no changes to the core and I&apos;m fine with it.&lt;/p&gt;</comment>
                            <comment id="14720647" author="toffer" created="Fri, 28 Aug 2015 21:48:46 +0000"  >&lt;blockquote&gt;
&lt;p&gt;It&apos;s adding things that require user configuration. Adding things that require user interaction on failure (failed open is an awful thing to do to a table).&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This is a key feature, it&apos;s better to penalize a misbehaving table than have it affect and potentially take down the entire cluster. This will only happen if all the servers are down analogous to a cluster being down. It&apos;s pretty intuitive. We can add a better message if need be. &lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;This adds another table that&apos;s required for the master to interact with for assignment and region movement. Right now master is really struggling because of the feedback loop of rit -&amp;gt; meta -&amp;gt; meta moves -&amp;gt; rit. Now we have double the number of tables.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;It actually doesn&apos;t. The table is only read at startup and never again.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;On top of that it adds in more things to Zk while we&apos;re trying to remove as much data from there as possible.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes, this will be addressed just like the other modules that currently use zk. &lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;This patch breaks ipv6.&lt;br/&gt;
This patch has Copy Paste code.&lt;br/&gt;
This patch doesn&apos;t have the correct headers.&lt;br/&gt;
This patch doesn&apos;t load meta&apos;s hri from disk on move.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Thanks for the review. I&apos;ll make sure to address them. Can you point out which code is copy paste. Also please elaborate on meta hri? Prolly post it on RB so we don&apos;t pollute this discussion?&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Not really they both are user configured places to put regions. Both features interact with the balancer and AM. Both features affect the cluster in disasters in basically the same way.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;IMHO this is a huge oversimplification. I agree with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt; let&apos;s evaluate regionserver group on it&apos;s own merits. ie User configures regionservers to put tables on not regions. Region servers can be any number while in FN it can be at most (or only?) 3. FN was designed to guarantee performance, RS was meant to guarantee isolation.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;There are tons more configurations than that. There&apos;s namespace goups, table groups and groups for regionservers to be part of.&lt;/p&gt;&lt;/blockquote&gt; 
&lt;p&gt;Right now there&apos;s only group and it can have regionservers and tables as members.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Then there&apos;s all of the different configurations for the servers that are in different groups.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This is no different from configuring different clusters and is optional. A really good feature IMHO.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;This is the worst possible way to do multi-tenancy. We&apos;re layering a hack on rather than do the real thing.&lt;br/&gt;
You&apos;re getting the same number of SPOF&apos;s and an added operational complexity.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;IMHO the operational complexity is better than managing the same number of clusters. I honestly would not like to increase my number of SPOFs that increases the probability of one going down. Also isn&apos;t there NN HA already?   &lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;If we want multi-tenancy, then lets do that right. We shouldn&apos;t accept hacks that don&apos;t help most users and make getting to the correct solution harder.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;IMHO this will help a lot of users. This is not only a multi-tenancy solution but an isolation solution. It will help them isolate different workloads (ie CD/PROD, batch/realtime). It will also help them isolate system tables becoming unavailable because a user access pattern/data surfaced a bug which caused the RS to die. It also allows you to configure each group differently (ie GC settings). It also provides coprocessor isolation.&lt;/p&gt;








</comment>
                            <comment id="14720724" author="eclark" created="Fri, 28 Aug 2015 22:51:17 +0000"  >&lt;blockquote&gt;&lt;p&gt;IMHO this is a huge oversimplification.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;All of the bad parts are the same. You still have to config it. You still have really weird behavior on cluster instability.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Right now there&apos;s only group and it can have regionservers and tables as members.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The patch has a group attached to namespaces, and also provides the ability to move tables to different groups.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;IMHO this will help a lot of users.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Every user that&apos;s running this that doesn&apos;t have 10K machines is making a huge mistake. And we as the HBase developers should provide the better solution not the easiest solution. Not the one that works for one company.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;This is not only a multi-tenancy solution but an isolation solution. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Isolation is the worse solution for getting multi-tenancy.&lt;/p&gt;</comment>
                            <comment id="14720745" author="ndimiduk" created="Fri, 28 Aug 2015 22:55:41 +0000"  >&lt;blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is not only a multi-tenancy solution but an isolation solution.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Isolation is the worse solution for getting multi-tenancy.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Maybe you can elaborate on this point? Seems we need to quarantine users from each other, whether that&apos;s physically as per this patch or via imposed resource controls within a single process. Either way, &quot;quarantine&quot; is the same as &quot;isolation&quot;; we&apos;re isolating users from each other to achieve fairness of service delivery in a multi-tenant environment.&lt;/p&gt;</comment>
                            <comment id="14720921" author="apurtell" created="Sat, 29 Aug 2015 02:24:18 +0000"  >&lt;p&gt;Let&apos;s not let the perfect be the enemy of the good. A &quot;proper&quot; multi-layer admission control change isn&apos;t on the table, it isn&apos;t on anyone&apos;s roadmap, it isn&apos;t even something proposed on a JIRA and/or in a design document. Even if we have a proposal for HBase this will certainly be considered imperfect and incomplete by some without 100% agreement and a plan at the HDFS level, and getting that is as likely as finding a unicorn wandering around downtown SF. (Ok... maybe a horse dressed to look like a unicorn could be a thing...)  Meanwhile we have a patch on deck and we need to be evaluating it and its contributor&apos;s concerns on their merit.&lt;/p&gt;

&lt;p&gt;This is something that one of our esteemed users runs in production, is persistent about getting in and responsive to feedback, and both of those things in my opinion should carry a lot of weight. The same kind of weight that previously proposed changes like HFileV2 or the 0.90 master rewrite (remember that?), or the memcache-based block cache carried, or pending IPv6 related changes.&lt;/p&gt;

&lt;p&gt;That said, I don&apos;t think it&apos;s ready to be merged into master. We have it up in a feature branch. Let&apos;s continue that, address concerns, make sure it&apos;s totally optional for those who don&apos;t want it, measure its impact. &lt;/p&gt;</comment>
                            <comment id="14720933" author="eclark" created="Sat, 29 Aug 2015 02:55:48 +0000"  >&lt;blockquote&gt;&lt;p&gt;Maybe you can elaborate on this point?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Sure let me write up something more on that point.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Let&apos;s not let the perfect be the enemy of the good.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I&apos;m not asking for perfect. I&apos;m asking not to take a half step back for most users so that one user can merge this feature and take a single step forward.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Meanwhile we have a patch on deck and we need to be evaluating it and its contributor&apos;s concerns on their merit.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yeah and I have evaluated it and used my knowledge and judgement and cast my vote on this patch and feature in accordance with the Apache Foundation rules (&lt;a href=&quot;http://www.apache.org/foundation/voting.html#votes-on-code-modification&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.apache.org/foundation/voting.html#votes-on-code-modification&lt;/a&gt;)  . I have added my technical reasons. I have even outlined what I would need to vote a different way.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;the 0.90 master rewrite (remember that?)&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yeah that has since proved to be the wrong way to go. It put way too much in ZK and now we&apos;ve spent years un-doing it. We would have been better served with asking for parts to be pluggable and not on by default.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;or the memcache-based block cache carried&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;That followed the exact same bar that I&apos;m requesting here. No added complexity on the default use case. I&apos;ve even moved it into a different module so that it will be exactly what I&apos;m asking for here.&lt;/p&gt;</comment>
                            <comment id="14726603" author="apurtell" created="Wed, 2 Sep 2015 02:11:25 +0000"  >&lt;blockquote&gt;&lt;p&gt;No added complexity on the default use case.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;With the group assignment logic changes behind a default off conditional that criteria is met here too. &lt;/p&gt;</comment>
                            <comment id="14726614" author="apurtell" created="Wed, 2 Sep 2015 02:23:09 +0000"  >&lt;blockquote&gt;&lt;p&gt;Yeah and I have evaluated it and used my knowledge and judgement and cast my vote on this patch and feature in accordance with the Apache Foundation rules (&lt;a href=&quot;http://www.apache.org/foundation/voting.html#votes-on-code-modification&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.apache.org/foundation/voting.html#votes-on-code-modification&lt;/a&gt;) . I have added my technical reasons&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Let me collect them here:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Don&apos;t break ipv6.&lt;/li&gt;
	&lt;li&gt;Remove Copy Paste code.&lt;/li&gt;
	&lt;li&gt;Add correct headers.&lt;/li&gt;
	&lt;li&gt;Load meta&apos;s hri from disk on move.&lt;/li&gt;
	&lt;li&gt;No added complexity on the default path&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;d like to add:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Ops impact should be totally optional: configurable, default off. (This is related to the last point above.)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;If I&apos;ve missed any items please let me know. &lt;/p&gt;</comment>
                            <comment id="14728516" author="toffer" created="Thu, 3 Sep 2015 05:13:23 +0000"  >&lt;p&gt;In the interest of moving this feature forward I propose we change the current patch to use a coprocessor-based implementation. The broad strokes of the implementation are:&lt;/p&gt;

&lt;p&gt;1. Group APIs will move to a coprocessor endpoint&lt;br/&gt;
2. Other hooks into core code will utilize coprocessor observers and possibly add more cp hooks in core as needed.&lt;br/&gt;
3. Security checks will be embedded directly into the endpoint, which will be activated if security is enabled.&lt;br/&gt;
4. Add new api/semantic in LoadBalancer so that it can tell callees when regions should not be assigned (ie bogus server name).&lt;br/&gt;
5. CLI will remain as-is (same as security)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt; does this work for you?&lt;/p&gt;</comment>
                            <comment id="14728703" author="eclark" created="Thu, 3 Sep 2015 08:42:21 +0000"  >&lt;p&gt;That works great for me and would address the concerns I had.&lt;/p&gt;</comment>
                            <comment id="14729969" author="enis" created="Thu, 3 Sep 2015 22:50:46 +0000"  >&lt;p&gt;Great. &lt;br/&gt;
We can in theory define another Observer type (RSGroupObserver, etc) which will be the endpoint that coprocessors might implement for example for learning about RS groups operations. But it will be a coprocessor having its own co-processors which seems is not needed at the moment.&lt;/p&gt;</comment>
                            <comment id="14730127" author="toffer" created="Fri, 4 Sep 2015 01:04:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; I can do that too and have security make use of it. Should be just as much effort as embedding security directly as I already have the RS group cp hooks in place as part of the current patch?&lt;/p&gt;</comment>
                            <comment id="14730133" author="apurtell" created="Fri, 4 Sep 2015 01:13:18 +0000"  >&lt;blockquote&gt;&lt;p&gt;But it will be a coprocessor having its own co-processors which seems is not needed at the moment.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yeah, let&apos;s avoid that until/unless we really need it&lt;/p&gt;</comment>
                            <comment id="14730209" author="enis" created="Fri, 4 Sep 2015 02:30:20 +0000"  >&lt;p&gt;Agreed, that let&apos;s keep it simple for now unless needed.&lt;/p&gt;</comment>
                            <comment id="14737298" author="toffer" created="Wed, 9 Sep 2015 17:55:02 +0000"  >&lt;p&gt;Latest patch attached. The patch makes the implementation cp-based. &lt;/p&gt;

&lt;p&gt;To avoid confusion I&apos;ve created a new RB entry:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/38224/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/38224/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt; The new patch is based off of current master. Should we just replace the current branch with a new branch to go with the new patch? Also was wondering since this is now cp-based. Do we still need a branch? &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt; I believe I&apos;ve addressed most of your concerns. The only thing I missed was &quot;Load meta&apos;s hri from disk on move&quot; can you elaborate more one what needs to be done on RB?&lt;/p&gt;

</comment>
                            <comment id="14737308" author="hadoopqa" created="Wed, 9 Sep 2015 17:59:39 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12754964/HBASE-6721_13.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12754964/HBASE-6721_13.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 27d3ab43efeabe2a0e1173858b6994b17b5c355b.&lt;br/&gt;
  ATTACHMENT ID: 12754964&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 27 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to cause Findbugs (version 2.0.3) to fail.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +       * &amp;lt;code&amp;gt;rpc GetGroupInfo(.hbase.pb.GetGroupInfoRequest) returns (.hbase.pb.GetGroupInfoResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc GetGroupInfoOfTable(.hbase.pb.GetGroupInfoOfTableRequest) returns (.hbase.pb.GetGroupInfoOfTableResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc GetGroupInfoOfServer(.hbase.pb.GetGroupInfoOfServerRequest) returns (.hbase.pb.GetGroupInfoOfServerResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc MoveServers(.hbase.pb.MoveServersRequest) returns (.hbase.pb.MoveServersResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc MoveTables(.hbase.pb.MoveTablesRequest) returns (.hbase.pb.MoveTablesResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc RemoveGroup(.hbase.pb.RemoveGroupRequest) returns (.hbase.pb.RemoveGroupResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc BalanceGroup(.hbase.pb.BalanceGroupRequest) returns (.hbase.pb.BalanceGroupResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc ListGroupInfos(.hbase.pb.ListGroupInfosRequest) returns (.hbase.pb.ListGroupInfosResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+     * &amp;lt;code&amp;gt;rpc GetGroupInfo(.hbase.pb.GetGroupInfoRequest) returns (.hbase.pb.GetGroupInfoResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+     * &amp;lt;code&amp;gt;rpc GetGroupInfoOfTable(.hbase.pb.GetGroupInfoOfTableRequest) returns (.hbase.pb.GetGroupInfoOfTableResponse);&amp;lt;/code&amp;gt;&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 site&lt;/font&gt;.  The patch appears to cause mvn post-site goal to fail.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 1 zombie test(s): &lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15506//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15506//testReport/&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15506//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15506//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15506//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15506//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14743963" author="eclark" created="Mon, 14 Sep 2015 18:20:29 +0000"  >&lt;p&gt;Commenting on RB now.&lt;/p&gt;</comment>
                            <comment id="14747117" author="toffer" created="Wed, 16 Sep 2015 08:13:36 +0000"  >&lt;p&gt;Addressed comments on RB.&lt;/p&gt;</comment>
                            <comment id="14747190" author="hadoopqa" created="Wed, 16 Sep 2015 09:15:31 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12756192/HBASE-6721_14.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12756192/HBASE-6721_14.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit d2e338181800ae3cef55ddca491901b65259dc7f.&lt;br/&gt;
  ATTACHMENT ID: 12756192&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 27 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 6 warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 1859 checkstyle errors (more than the master&apos;s current 1835 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +       * &amp;lt;code&amp;gt;rpc GetGroupInfo(.hbase.pb.GetGroupInfoRequest) returns (.hbase.pb.GetGroupInfoResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc GetGroupInfoOfTable(.hbase.pb.GetGroupInfoOfTableRequest) returns (.hbase.pb.GetGroupInfoOfTableResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc GetGroupInfoOfServer(.hbase.pb.GetGroupInfoOfServerRequest) returns (.hbase.pb.GetGroupInfoOfServerResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc MoveServers(.hbase.pb.MoveServersRequest) returns (.hbase.pb.MoveServersResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc MoveTables(.hbase.pb.MoveTablesRequest) returns (.hbase.pb.MoveTablesResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc RemoveGroup(.hbase.pb.RemoveGroupRequest) returns (.hbase.pb.RemoveGroupResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc BalanceGroup(.hbase.pb.BalanceGroupRequest) returns (.hbase.pb.BalanceGroupResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc ListGroupInfos(.hbase.pb.ListGroupInfosRequest) returns (.hbase.pb.ListGroupInfosResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+     * &amp;lt;code&amp;gt;rpc GetGroupInfo(.hbase.pb.GetGroupInfoRequest) returns (.hbase.pb.GetGroupInfoResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+     * &amp;lt;code&amp;gt;rpc GetGroupInfoOfTable(.hbase.pb.GetGroupInfoOfTableRequest) returns (.hbase.pb.GetGroupInfoOfTableResponse);&amp;lt;/code&amp;gt;&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.client.TestAsyncProcess&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15618//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15618//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15618//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15618//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15618//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15618//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Javadoc warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15618//artifact/patchprocess/patchJavadocWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15618//artifact/patchprocess/patchJavadocWarnings.txt&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15618//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15618//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14876096" author="apurtell" created="Fri, 18 Sep 2015 18:25:35 +0000"  >&lt;blockquote&gt;&lt;p&gt;Andrew Purtell The new patch is based off of current master. Should we just replace the current branch with a new branch to go with the new patch?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I would say so if you want it. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Also was wondering since this is now cp-based. Do we still need a branch?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Up to you. We can rebase or delete, either way let me know.  &lt;/p&gt;

&lt;p&gt;Some issues with the current security integration. Coprocessors can&apos;t call into the internals of other coprocessors. I understand why this was done, but we can&apos;t have it. Coprocessors calling into the internals of other coprocessors, this is a non-negotiable point for the sake of sanity in maintenance of separate optional extensions. It&apos;s a catch-22 imposed on this change by the requirement it be a coprocessor only implementation.&lt;/p&gt;

&lt;p&gt;What I would suggest is introduce into the MasterObserver API hooks for the group admin APIs. Let the implementation of the group admin APIs and the authoritative security decisions both be separate mix-ins provided by different coprocessors. There needs to be common plumbing for the two. That belongs in MasterObserver. The plumbing could look like:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;MasterObserver support for pre/post group admin API action hooks&lt;/li&gt;
	&lt;li&gt;In GroupAdminEndpoint, get the coprocessor host with getMasterCoprocessorHost()&lt;/li&gt;
	&lt;li&gt;Invoke the public (technically, LimitedPrivate(COPROC)) APIs for pre/post group admin API actions.&lt;/li&gt;
	&lt;li&gt;AccessController implements the new MasterObserver APIs to provide security for the group admin APIs.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This is much more in spirit with current interfaces and audience scoping. It decouples GroupAdminEndpoint from AccessController. (If the AC is not installed, no harm, no NPEs, no security checking (by intention), it&apos;s all good.) It also addresses concerns about zero impact in the default case. Those upcalls will never be made unless the GroupAdminEndpoint is installed.&lt;/p&gt;</comment>
                            <comment id="14938222" author="toffer" created="Wed, 30 Sep 2015 18:27:05 +0000"  >&lt;p&gt;Addressed comments on RB. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt; let me know if the changes I made for security is what you expected. I pretty much just ported the security/cp stuff from the non-cp patch.&lt;/p&gt;</comment>
                            <comment id="14938331" author="hadoopqa" created="Wed, 30 Sep 2015 19:24:39 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12764454/HBASE-6721_15.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12764454/HBASE-6721_15.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 24370547c500df0026a71944d8be88cd5b51b23e.&lt;br/&gt;
  ATTACHMENT ID: 12764454&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 33 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 3 warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 1811 checkstyle errors (more than the master&apos;s current 1781 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +       * &amp;lt;code&amp;gt;rpc GetGroupInfo(.hbase.pb.GetGroupInfoRequest) returns (.hbase.pb.GetGroupInfoResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc GetGroupInfoOfTable(.hbase.pb.GetGroupInfoOfTableRequest) returns (.hbase.pb.GetGroupInfoOfTableResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc GetGroupInfoOfServer(.hbase.pb.GetGroupInfoOfServerRequest) returns (.hbase.pb.GetGroupInfoOfServerResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc MoveServers(.hbase.pb.MoveServersRequest) returns (.hbase.pb.MoveServersResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc MoveTables(.hbase.pb.MoveTablesRequest) returns (.hbase.pb.MoveTablesResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc RemoveGroup(.hbase.pb.RemoveGroupRequest) returns (.hbase.pb.RemoveGroupResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc BalanceGroup(.hbase.pb.BalanceGroupRequest) returns (.hbase.pb.BalanceGroupResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc ListGroupInfos(.hbase.pb.ListGroupInfosRequest) returns (.hbase.pb.ListGroupInfosResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+     * &amp;lt;code&amp;gt;rpc GetGroupInfo(.hbase.pb.GetGroupInfoRequest) returns (.hbase.pb.GetGroupInfoResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+     * &amp;lt;code&amp;gt;rpc GetGroupInfoOfTable(.hbase.pb.GetGroupInfoOfTableRequest) returns (.hbase.pb.GetGroupInfoOfTableResponse);&amp;lt;/code&amp;gt;&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.client.TestAsyncProcess&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15832//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15832//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15832//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15832//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15832//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15832//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Javadoc warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15832//artifact/patchprocess/patchJavadocWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15832//artifact/patchprocess/patchJavadocWarnings.txt&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15832//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15832//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14975598" author="enis" created="Tue, 27 Oct 2015 03:14:49 +0000"  >&lt;p&gt;I backported the current v15 patch for testing it with 1.1 code base. Just parking it here in case somebody else needs it. I&apos;ll get back to the review soon. &lt;/p&gt;</comment>
                            <comment id="14975765" author="hadoopqa" created="Tue, 27 Oct 2015 05:40:10 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12768882/hbase-6721-v15-branch-1.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12768882/hbase-6721-v15-branch-1.1.patch&lt;/a&gt;&lt;br/&gt;
  against branch-1.1 branch at commit 496d20cfca5a30bc72a29e4ef893424964f9fa91.&lt;br/&gt;
  ATTACHMENT ID: 12768882&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 33 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16242//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16242//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14983663" author="enis" created="Sat, 31 Oct 2015 00:17:21 +0000"  >&lt;p&gt;Finally got around testing the v15 patch on 1.1 code base with a 7 node cluster. Here are my test notes. Nothing too concerning, but we have to address some of these in the patch. This is the configuration to add to enable groups: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &amp;lt;property&amp;gt;
      &amp;lt;name&amp;gt;hbase.coprocessor.master.classes&amp;lt;/name&amp;gt;
      &amp;lt;value&amp;gt;org.apache.hadoop.hbase.group.GroupAdminEndpoint&amp;lt;/value&amp;gt;
    &amp;lt;/property&amp;gt;
    &amp;lt;property&amp;gt;
      &amp;lt;name&amp;gt;hbase.master.loadbalancer.class&amp;lt;/name&amp;gt;
      &amp;lt;value&amp;gt;org.apache.hadoop.hbase.group.GroupBasedLoadBalancer&amp;lt;/value&amp;gt;
    &amp;lt;/property&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;1. Need to add this diff, so that new PB files get compiled with -Pcompile-protobuf command: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
diff --git hbase-protocol/pom.xml hbase-protocol/pom.xml
index 8034576..d352373 100644
--- hbase-protocol/pom.xml
+++ hbase-protocol/pom.xml
@@ -180,6 +180,8 @@
                           &amp;lt;include&amp;gt;ErrorHandling.proto&amp;lt;/include&amp;gt;
                           &amp;lt;include&amp;gt;Filter.proto&amp;lt;/include&amp;gt;
                           &amp;lt;include&amp;gt;FS.proto&amp;lt;/include&amp;gt;
+                          &amp;lt;include&amp;gt;Group.proto&amp;lt;/include&amp;gt;
+                          &amp;lt;include&amp;gt;GroupAdmin.proto&amp;lt;/include&amp;gt;
                           &amp;lt;include&amp;gt;HBase.proto&amp;lt;/include&amp;gt;
                           &amp;lt;include&amp;gt;HFile.proto&amp;lt;/include&amp;gt;
                           &amp;lt;include&amp;gt;LoadBalancer.proto&amp;lt;/include&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;2. NPE in group shell commands with nonexisting groups: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hbase(main):015:0* balance_group &apos;nonexisting&apos; 

ERROR: java.io.IOException
	at org.apache.hadoop.hbase.ipc.RpcServer.call(RpcServer.java:2156)
	at org.apache.hadoop.hbase.ipc.CallRunner.run(CallRunner.java:101)
	at org.apache.hadoop.hbase.ipc.RpcExecutor.consumerLoop(RpcExecutor.java:130)
	at org.apache.hadoop.hbase.ipc.RpcExecutor$1.run(RpcExecutor.java:107)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
Caused by: java.lang.NullPointerException
	at org.apache.hadoop.hbase.group.GroupAdminServer.groupGetRegionsInTransition(GroupAdminServer.java:412)
	at org.apache.hadoop.hbase.group.GroupAdminServer.balanceGroup(GroupAdminServer.java:348)
	at org.apache.hadoop.hbase.group.GroupAdminEndpoint.balanceGroup(GroupAdminEndpoint.java:229)
	at org.apache.hadoop.hbase.protobuf.generated.GroupAdminProtos$GroupAdminService.callMethod(GroupAdminProtos.java:11156)
	at org.apache.hadoop.hbase.master.MasterRpcServices.execMasterService(MasterRpcServices.java:666)
	at org.apache.hadoop.hbase.protobuf.generated.MasterProtos$MasterService$2.callBlockingMethod(MasterProtos.java:51121)
	at org.apache.hadoop.hbase.ipc.RpcServer.call(RpcServer.java:2114)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hbase(main):030:0&amp;gt; get_group &apos;nonexisting&apos;
GROUP INFORMATION                                                                                                                                                                                                                                                  
Servers:                                                                                                                                                                                                                                                           

ERROR: undefined method `getServers&apos; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; nil:NilClass

Here is some help &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; command:
Get a region server group&apos;s information.

Example:

  hbase&amp;gt; get_group &apos;&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hbase(main):077:0* move_group_tables &apos;nonexisting&apos;

ERROR: undefined method `each&apos; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; nil:NilClass

Here is some help &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; command:
Reassign tables from one group to another.

  hbase&amp;gt; move_group_tables &apos;dest&apos;,[&apos;table1&apos;,&apos;table2&apos;]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hbase(main):173:0* move_group_servers &apos;nonexisting&apos;

ERROR: undefined method `each&apos; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; nil:NilClass

Here is some help &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; command:
Reassign a region server from one group to another.

  hbase&amp;gt; move_group_servers &apos;dest&apos;,[&apos;server1:port&apos;,&apos;server2:port&apos;]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;3. Group names should be restricted to alphanumeric only. This one is pretty easy, but important. This following caused the master to abort, and the master cannot restart after this point (without manually removing the rsgroup entry from the table which you cannot do without master). I had to nuke the hdfs and zk to start over. &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hbase(main):033:0&amp;gt; add_group &apos;a-/:*&apos;

ERROR: java.io.IOException: Failed to write to groupZNode
	at org.apache.hadoop.hbase.group.GroupInfoManagerImpl.flushConfig(GroupInfoManagerImpl.java:419)
	at org.apache.hadoop.hbase.group.GroupInfoManagerImpl.addGroup(GroupInfoManagerImpl.java:152)
	at org.apache.hadoop.hbase.group.GroupAdminServer.addGroup(GroupAdminServer.java:298)
	at org.apache.hadoop.hbase.group.GroupAdminEndpoint.addGroup(GroupAdminEndpoint.java:197)
	at org.apache.hadoop.hbase.protobuf.generated.GroupAdminProtos$GroupAdminService.callMethod(GroupAdminProtos.java:11146)
	at org.apache.hadoop.hbase.master.MasterRpcServices.execMasterService(MasterRpcServices.java:666)
	at org.apache.hadoop.hbase.protobuf.generated.MasterProtos$MasterService$2.callBlockingMethod(MasterProtos.java:51121)
	at org.apache.hadoop.hbase.ipc.RpcServer.call(RpcServer.java:2114)
	at org.apache.hadoop.hbase.ipc.CallRunner.run(CallRunner.java:101)
	at org.apache.hadoop.hbase.ipc.RpcExecutor.consumerLoop(RpcExecutor.java:130)
	at org.apache.hadoop.hbase.ipc.RpcExecutor$1.run(RpcExecutor.java:107)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
Caused by: org.apache.zookeeper.KeeperException$NoNodeException: KeeperErrorCode = NoNode &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; /hbase-unsecure/groupInfo/a-/:*
	at org.apache.zookeeper.KeeperException.create(KeeperException.java:111)
	at org.apache.zookeeper.KeeperException.create(KeeperException.java:51)
	at org.apache.zookeeper.ZooKeeper.create(ZooKeeper.java:783)
	at org.apache.hadoop.hbase.zookeeper.RecoverableZooKeeper.createNonSequential(RecoverableZooKeeper.java:575)
	at org.apache.hadoop.hbase.zookeeper.RecoverableZooKeeper.create(RecoverableZooKeeper.java:554)
	at org.apache.hadoop.hbase.zookeeper.ZKUtil.createAndFailSilent(ZKUtil.java:1261)
	at org.apache.hadoop.hbase.zookeeper.ZKUtil.createAndFailSilent(ZKUtil.java:1250)
	at org.apache.hadoop.hbase.zookeeper.ZKUtil.createAndFailSilent(ZKUtil.java:1233)
	at org.apache.hadoop.hbase.group.GroupInfoManagerImpl.flushConfig(GroupInfoManagerImpl.java:408)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;4. &lt;tt&gt;get_table_group&lt;/tt&gt; and &lt;tt&gt;get_server_group&lt;/tt&gt; shell commands do not work&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hbase(main):019:0* get_table_group &apos;nonexisting&apos;

ERROR: undefined local variable or method `s&apos; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; #&amp;lt;Hbase::GroupAdmin:0x64518270&amp;gt;

Here is some help &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; command:
Get the group name the given table is a member of.

  hbase&amp;gt; get_table_group &apos;myTable&apos;

 
hbase(main):022:0* get_server_group &apos;server&apos;

ERROR: undefined local variable or method `s&apos; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; #&amp;lt;Hbase::GroupAdmin:0x64518270&amp;gt;

Here is some help &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; command:
Get the group name the given region server is a member of.

  hbase&amp;gt; get_server_group &apos;server1:port1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;5. &lt;tt&gt;move_group_servers&lt;/tt&gt; and &lt;tt&gt;move_group_tables&lt;/tt&gt; arguments are listed as 1, although should be 2: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hbase(main):033:0* move_group_servers 

ERROR: wrong number of arguments (0 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 1)

Here is some help &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; command:
Reassign a region server from one group to another.

  hbase&amp;gt; move_group_servers &apos;dest&apos;,[&apos;server1:port&apos;,&apos;server2:port&apos;]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;6. Adding a server without port throws error, but no explanation (this one is a minor, not that important). &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hbase(main):070:0&amp;gt; move_group_servers &apos;group2&apos;, [&apos;os-enis-hbase-oct27-a-3.novalocal&apos;]  

ERROR: 

Here is some help &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; command:
Reassign a region server from one group to another.

  hbase&amp;gt; move_group_servers &apos;dest&apos;,[&apos;server1:port&apos;,&apos;server2:port&apos;]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;7. From all the above, it is clear that we need a unit test over the new shell commands. &lt;/p&gt;

&lt;p&gt;Other than these, the feature is working as expected. Defining groups, moving servers and tables work. Regions get reassigned according to their groups. Restarting the cluster keeps assignments, etc. &lt;/p&gt;

&lt;p&gt;Some more findings: &lt;br/&gt;
Test 1: &lt;br/&gt;
Killed the last regionserver of a group, all 15 regions are in FAILED_OPEN state. &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;restarted the master, regions still in FAILED_OPEN state (which is expected)&lt;/li&gt;
	&lt;li&gt;Added a new server to the group which had no remaining servers, regions still in FAILED_OPEN state (this is probably due to how assignment works, we give up after 10 retries and wait for manual assignment or master restart)&lt;/li&gt;
	&lt;li&gt;Started the region server that was killed before, still in FAILED_OPEN&lt;/li&gt;
	&lt;li&gt;Master restart reassigned these regions.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Test 2: &lt;br/&gt;
Tried to move all servers to a single group. Correctly handles last server in the default group by not allowing it to change. &lt;/p&gt;

&lt;p&gt;Test 3: &lt;br/&gt;
Killed the last server in the default group, while all system tables are in the default group (and hence in that server). &lt;br/&gt;
 -&amp;gt; hbase:meta was always in PENDING_OPEN in bogus server localhost,1,1. &lt;br/&gt;
 -&amp;gt; Upon restarting the killed server, meta and other tables in the default group (including rsgroup table) got reassigned. &lt;br/&gt;
 As a side note, having not enough servers in the group that has the meta or rsgroup table seems like a very good way of shoothing yourself in the foot. However, as discussed before this maybe needed for strong isolation. &lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Add non-existing server to the group. Is not allowed.&lt;/li&gt;
	&lt;li&gt;Checked JMX&lt;/li&gt;
	&lt;li&gt;Adding group information for tables and regionserver to the master UI would be helpful. We can leave this to a follow up.&lt;/li&gt;
	&lt;li&gt;Obviously there should be a follow up to add at least some basic documentation on how to enable and configure and use RS groups in the book.&lt;/li&gt;
&lt;/ul&gt;




</comment>
                            <comment id="14983740" author="enis" created="Sat, 31 Oct 2015 01:43:59 +0000"  >&lt;p&gt;Even more testing: &lt;br/&gt;
Test 4: Create namespace with hbase.rsgroup.name pointing to a group, then create a table in that namespace. Works as expected, the new table created in correct group &lt;/p&gt;

&lt;p&gt;Run the integration test on the 7 node cluster: &lt;br/&gt;
hbase org.apache.hadoop.hbase.IntegrationTestsDriver -regex IntegrationTestGroup &lt;br/&gt;
Failed. Inspecting. &lt;/p&gt;

&lt;p&gt;8. I was thinking of testing to remove the default group, but did not do it yet. Reading of the code seems to allow it. We should fix that. &lt;br/&gt;
9. We can add a description to the rsgroup table  (minor). The master UI displays the description. &lt;br/&gt;
10. In IntegrationTestGroup.java, the wait condition should not wait for exactly NUM_SLAVES_BASE, there can be more servers that NUM_SLAVES_BASE in an actual cluster. &lt;br/&gt;
11. Once balancer is turned off, there is no way to turn it on since GroupAdminEndpoint.preBalanceSwitch() always returns false. &lt;/p&gt;

</comment>
                            <comment id="14983743" author="enis" created="Sat, 31 Oct 2015 01:59:41 +0000"  >&lt;p&gt;We may have a problem with IntegrationTestGroup.testMoveServers. &lt;br/&gt;
12. Also the test leaves the balancer turned off, which should be be the case. &lt;/p&gt;
</comment>
                            <comment id="14983744" author="enis" created="Sat, 31 Oct 2015 02:02:09 +0000"  >&lt;p&gt;Here is a master patch that is: &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;rebased to latest master.&lt;/li&gt;
	&lt;li&gt;Addresses (1), (10), (11), and (12) as above.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14983799" author="hadoopqa" created="Sat, 31 Oct 2015 04:04:44 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12769912/hbase-6721-v16.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12769912/hbase-6721-v16.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 683f84e6a217dfd872e5f1be82c7aa4cdf232ec1.&lt;br/&gt;
  ATTACHMENT ID: 12769912&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 33 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 4 warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 1755 checkstyle errors (more than the master&apos;s current 1730 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +       * &amp;lt;code&amp;gt;rpc GetGroupInfo(.hbase.pb.GetGroupInfoRequest) returns (.hbase.pb.GetGroupInfoResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc GetGroupInfoOfTable(.hbase.pb.GetGroupInfoOfTableRequest) returns (.hbase.pb.GetGroupInfoOfTableResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc GetGroupInfoOfServer(.hbase.pb.GetGroupInfoOfServerRequest) returns (.hbase.pb.GetGroupInfoOfServerResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc MoveServers(.hbase.pb.MoveServersRequest) returns (.hbase.pb.MoveServersResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc MoveTables(.hbase.pb.MoveTablesRequest) returns (.hbase.pb.MoveTablesResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc RemoveGroup(.hbase.pb.RemoveGroupRequest) returns (.hbase.pb.RemoveGroupResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc BalanceGroup(.hbase.pb.BalanceGroupRequest) returns (.hbase.pb.BalanceGroupResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc ListGroupInfos(.hbase.pb.ListGroupInfosRequest) returns (.hbase.pb.ListGroupInfosResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+     * &amp;lt;code&amp;gt;rpc GetGroupInfo(.hbase.pb.GetGroupInfoRequest) returns (.hbase.pb.GetGroupInfoResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+     * &amp;lt;code&amp;gt;rpc GetGroupInfoOfTable(.hbase.pb.GetGroupInfoOfTableRequest) returns (.hbase.pb.GetGroupInfoOfTableResponse);&amp;lt;/code&amp;gt;&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.client.TestAsyncProcess&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16327//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16327//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16327//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16327//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16327//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16327//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Javadoc warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16327//artifact/patchprocess/patchJavadocWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16327//artifact/patchprocess/patchJavadocWarnings.txt&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16327//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16327//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14988851" author="enis" created="Wed, 4 Nov 2015 04:25:17 +0000"  >&lt;p&gt;Here is a v17 patch which has these changes on top of v16: &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Addresses item (4) above. Fixed get_server_group and get_table_group commands.&lt;/li&gt;
	&lt;li&gt;Some ruby changes&lt;/li&gt;
	&lt;li&gt;Changed the unit tests so that they will work the same on master code or branch-1 code (due to colocated master changes).&lt;/li&gt;
	&lt;li&gt;Fixed a timing issue with the test causing the IT to fail.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Now, I am able to run the IntegrationTestGroup in a 7 node cluster, and the unit test works. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=toffer&quot; class=&quot;user-hover&quot; rel=&quot;toffer&quot;&gt;Francis Liu&lt;/a&gt; I think there are only a couple of remaining items left. Let me know, if you need help in addressing some of them. &lt;/p&gt;</comment>
                            <comment id="14988935" author="hadoopqa" created="Wed, 4 Nov 2015 05:41:10 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12770514/hbase-6721-v17.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12770514/hbase-6721-v17.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit ceddec9141b658c790d2fb995c970982ab082028.&lt;br/&gt;
  ATTACHMENT ID: 12770514&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 36 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javac&lt;/font&gt;.  The patch appears to cause mvn compile goal to fail with Hadoop version 2.4.0.&lt;/p&gt;

&lt;p&gt;    Compilation errors resume:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; COMPILATION ERROR : &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase/hbase-server/src/main/java/org/apache/hadoop/hbase/group/GroupInfoManagerImpl.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;588,47&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.2:compile (default-compile) on project hbase-server: Compilation failure&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase/hbase-server/src/main/java/org/apache/hadoop/hbase/group/GroupInfoManagerImpl.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;588,47&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; symbol:   method getHRegionInfo(org.apache.hadoop.hbase.client.Result)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; location: class org.apache.hadoop.hbase.HRegionInfo&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; To see the full stack trace of the errors, re-run Maven with the -e switch.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Re-run Maven using the -X switch to enable full debug logging.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; For more information about the errors and possible solutions, please read the following articles:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; After correcting the problems, you can resume the build with the command&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt;   mvn &amp;lt;goals&amp;gt; -rf :hbase-server&lt;/p&gt;


&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16380//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16380//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15012021" author="toffer" created="Wed, 18 Nov 2015 21:29:45 +0000"  >&lt;p&gt;Thanks for the comprehensive testing and fixes &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt;. Let me try and sum up the outstanding things that need to be done. Let me know if I missed anything:&lt;/p&gt;

&lt;p&gt;1. Unit test for shell commands&lt;br/&gt;
2. Fix rsgroup table name description&lt;br/&gt;
3. &quot;NPE in group shell commands with nonexisting groups&quot;&lt;br/&gt;
4. &quot;Group names should be restricted to alphanumeric only. &quot;&lt;br/&gt;
5. &quot;move_group_servers and move_group_tables arguments are listed as 1, although should be 2:&quot;&lt;br/&gt;
6. File Jira for UI, do it as follow-up&lt;br/&gt;
7. File Jira for documentation, do it as follow-up. &lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;8. I was thinking of testing to remove the default group, but did not do it yet. Reading of the code seems to allow it. We should fix that. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This is being checked in GroupInfomManagerImpl.removeGroup so this is covered.&lt;/p&gt;

&lt;p&gt;With the next update, I can now buy the patch a beer (in some states). &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;



</comment>
                            <comment id="15012060" author="enis" created="Wed, 18 Nov 2015 21:44:37 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=toffer&quot; class=&quot;user-hover&quot; rel=&quot;toffer&quot;&gt;Francis Liu&lt;/a&gt;. The list sounds about right. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;With the next update, I can now buy the patch a beer (in some states).&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;We can all grab a (virtual) beer once this is committed. &lt;/p&gt;</comment>
                            <comment id="15015099" author="toffer" created="Fri, 20 Nov 2015 03:02:46 +0000"  >&lt;p&gt;Added v18 patch which addresses metnioned comments. Also rebased to HEAD and fixed issues.&lt;/p&gt;</comment>
                            <comment id="15015109" author="toffer" created="Fri, 20 Nov 2015 03:08:28 +0000"  >&lt;p&gt;Also moved unassign of misplaced regions out of the balancer and added unit test.&lt;/p&gt;

&lt;p&gt;Updated RB with both patches:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/38224/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/38224/&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="15015207" author="hadoopqa" created="Fri, 20 Nov 2015 04:41:56 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12773431/hbase-6721-v18.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12773431/hbase-6721-v18.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit ea48ef86512addc3dc9bcde4b7433a3ac5881424.&lt;br/&gt;
  ATTACHMENT ID: 12773431&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 42 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 5 warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 1752 checkstyle errors (more than the master&apos;s current 1727 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +       * &amp;lt;code&amp;gt;rpc GetGroupInfo(.hbase.pb.GetGroupInfoRequest) returns (.hbase.pb.GetGroupInfoResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc GetGroupInfoOfTable(.hbase.pb.GetGroupInfoOfTableRequest) returns (.hbase.pb.GetGroupInfoOfTableResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc GetGroupInfoOfServer(.hbase.pb.GetGroupInfoOfServerRequest) returns (.hbase.pb.GetGroupInfoOfServerResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc MoveServers(.hbase.pb.MoveServersRequest) returns (.hbase.pb.MoveServersResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc MoveTables(.hbase.pb.MoveTablesRequest) returns (.hbase.pb.MoveTablesResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc RemoveGroup(.hbase.pb.RemoveGroupRequest) returns (.hbase.pb.RemoveGroupResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc BalanceGroup(.hbase.pb.BalanceGroupRequest) returns (.hbase.pb.BalanceGroupResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc ListGroupInfos(.hbase.pb.ListGroupInfosRequest) returns (.hbase.pb.ListGroupInfosResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+     * &amp;lt;code&amp;gt;rpc GetGroupInfo(.hbase.pb.GetGroupInfoRequest) returns (.hbase.pb.GetGroupInfoResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+     * &amp;lt;code&amp;gt;rpc GetGroupInfoOfTable(.hbase.pb.GetGroupInfoOfTableRequest) returns (.hbase.pb.GetGroupInfoOfTableResponse);&amp;lt;/code&amp;gt;&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.master.normalizer.TestSimpleRegionNormalizer&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16603//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16603//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16603//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16603//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16603//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16603//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Javadoc warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16603//artifact/patchprocess/patchJavadocWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16603//artifact/patchprocess/patchJavadocWarnings.txt&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16603//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16603//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15042285" author="enis" created="Fri, 4 Dec 2015 21:45:22 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=toffer&quot; class=&quot;user-hover&quot; rel=&quot;toffer&quot;&gt;Francis Liu&lt;/a&gt; for the updated patch. All of the review items have been addressed, and hence I&apos;m +1 for committing this. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt; or others have any more concerns, feedback? Given that this is an optional coprocessor based thing, I think this can directly go to master. &lt;/p&gt;</comment>
                            <comment id="15042319" author="yuzhihong@gmail.com" created="Fri, 4 Dec 2015 22:13:05 +0000"  >&lt;p&gt;Running TestShell with latest patch, I got:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  1) Error:
test_Test_Basic_Group_Commands(Hbase::GroupShellTest):
NativeException: org.apache.hadoop.hbase.exceptions.UnknownProtocolException: org.apache.hadoop.hbase.exceptions.UnknownProtocolException: No registered master coprocessor     service found &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; name hbase.pb.GroupAdminService
  at org.apache.hadoop.hbase.master.MasterRpcServices.execMasterService(MasterRpcServices.java:682)
  at org.apache.hadoop.hbase.protobuf.generated.MasterProtos$MasterService$2.callBlockingMethod(MasterProtos.java:57964)
  at org.apache.hadoop.hbase.ipc.RpcServer.call(RpcServer.java:2184)
  at org.apache.hadoop.hbase.ipc.CallRunner.run(CallRunner.java:109)
  at org.apache.hadoop.hbase.ipc.RpcExecutor.consumerLoop(RpcExecutor.java:133)
  at org.apache.hadoop.hbase.ipc.RpcExecutor$1.run(RpcExecutor.java:108)
...
  2) Failure:
test_Test_bogus_arguments(Hbase::GroupShellTest)
    [./src/test/ruby/shell/group_shell_test.rb:85:in `test_Test_bogus_arguments&apos;
     org/jruby/RubyProc.java:270:in `call&apos;
     org/jruby/RubyKernel.java:2105:in `send&apos;
     org/jruby/RubyArray.java:1620:in `each&apos;
     org/jruby/RubyArray.java:1620:in `each&apos;]:
&amp;lt;ArgumentError&amp;gt; exception expected but was
&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;: &amp;lt;NativeException&amp;gt;
Message: &amp;lt;&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.hadoop.hbase.exceptions.UnknownProtocolException: org.apache.hadoop.hbase.exceptions.UnknownProtocolException: No registered master coprocessor service   found &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; name hbase.pb.GroupAdminService\n\tat org.apache.hadoop.hbase.master.MasterRpcServices.execMasterService(MasterRpcServices.java:682)\n\tat org.apache.hadoop.hbase.   protobuf.generated.MasterProtos$MasterService$2.callBlockingMethod(MasterProtos.java:57964)\n\tat org.apache.hadoop.hbase.ipc.RpcServer.call(RpcServer.java:2184)\n\tat org.    apache.hadoop.hbase.ipc.CallRunner.run(CallRunner.java:109)\n\tat org.apache.hadoop.hbase.ipc.RpcExecutor.consumerLoop(RpcExecutor.java:133)\n\tat org.apache.hadoop.hbase.ipc. RpcExecutor$1.run(RpcExecutor.java:108)\n\tat java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)\n&quot;&lt;/span&gt;&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Francis:&lt;br/&gt;
Do the tests pass for you ?&lt;/p&gt;</comment>
                            <comment id="15042474" author="yuzhihong@gmail.com" created="Sat, 5 Dec 2015 00:25:02 +0000"  >&lt;p&gt;Test failure in TestSimpleRegionNormalizer is reproducible:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
testNoNormalizationForMetaTable(org.apache.hadoop.hbase.master.normalizer.TestSimpleRegionNormalizer)  Time elapsed: 0.337 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
java.lang.IllegalArgumentException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
  at com.google.common.base.Preconditions.checkArgument(Preconditions.java:76)
  at com.google.common.net.HostAndPort.fromParts(HostAndPort.java:130)
  at org.apache.hadoop.hbase.ServerName.&amp;lt;init&amp;gt;(ServerName.java:105)
  at org.apache.hadoop.hbase.ServerName.valueOf(ServerName.java:158)
  at org.apache.hadoop.hbase.master.normalizer.TestSimpleRegionNormalizer.setupMocksForNormalizer(TestSimpleRegionNormalizer.java:223)
  at org.apache.hadoop.hbase.master.normalizer.TestSimpleRegionNormalizer.testNoNormalizationForMetaTable(TestSimpleRegionNormalizer.java:71)

testNoNormalizationIfTooFewRegions(org.apache.hadoop.hbase.master.normalizer.TestSimpleRegionNormalizer)  Time elapsed: 0.045 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
java.lang.IllegalArgumentException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
  at com.google.common.base.Preconditions.checkArgument(Preconditions.java:76)
  at com.google.common.net.HostAndPort.fromParts(HostAndPort.java:130)
  at org.apache.hadoop.hbase.ServerName.&amp;lt;init&amp;gt;(ServerName.java:105)
  at org.apache.hadoop.hbase.ServerName.valueOf(ServerName.java:158)
  at org.apache.hadoop.hbase.master.normalizer.TestSimpleRegionNormalizer.setupMocksForNormalizer(TestSimpleRegionNormalizer.java:223)
  at org.apache.hadoop.hbase.master.normalizer.TestSimpleRegionNormalizer.testNoNormalizationIfTooFewRegions(TestSimpleRegionNormalizer.java:90)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15049653" author="toffer" created="Wed, 9 Dec 2015 23:49:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tedyu@apache.org&quot;&gt;Ted Yu&lt;/a&gt; Looks like TestSimpleRegionNormalizer is using negative port numbers for ServerName. Should be a simple fix to update the test. How are you able to run TestShell? I only see an abstract class.&lt;/p&gt;</comment>
                            <comment id="15050242" author="toffer" created="Thu, 10 Dec 2015 07:24:07 +0000"  >&lt;p&gt;Patch fixes normalizer unit test failure.&lt;/p&gt;</comment>
                            <comment id="15050596" author="hadoopqa" created="Thu, 10 Dec 2015 11:02:36 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12776745/hbase-6721-v19.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12776745/hbase-6721-v19.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 9647fee3f0f196d064879afd41b9eff51d5aa036.&lt;br/&gt;
  ATTACHMENT ID: 12776745&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 45 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated new checkstyle errors. Check build console for list of new errors.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +       * &amp;lt;code&amp;gt;rpc GetGroupInfo(.hbase.pb.GetGroupInfoRequest) returns (.hbase.pb.GetGroupInfoResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc GetGroupInfoOfTable(.hbase.pb.GetGroupInfoOfTableRequest) returns (.hbase.pb.GetGroupInfoOfTableResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc GetGroupInfoOfServer(.hbase.pb.GetGroupInfoOfServerRequest) returns (.hbase.pb.GetGroupInfoOfServerResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc MoveServers(.hbase.pb.MoveServersRequest) returns (.hbase.pb.MoveServersResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc MoveTables(.hbase.pb.MoveTablesRequest) returns (.hbase.pb.MoveTablesResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc RemoveGroup(.hbase.pb.RemoveGroupRequest) returns (.hbase.pb.RemoveGroupResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc BalanceGroup(.hbase.pb.BalanceGroupRequest) returns (.hbase.pb.BalanceGroupResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc ListGroupInfos(.hbase.pb.ListGroupInfosRequest) returns (.hbase.pb.ListGroupInfosResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+     * &amp;lt;code&amp;gt;rpc GetGroupInfo(.hbase.pb.GetGroupInfoRequest) returns (.hbase.pb.GetGroupInfoResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+     * &amp;lt;code&amp;gt;rpc GetGroupInfoOfTable(.hbase.pb.GetGroupInfoOfTableRequest) returns (.hbase.pb.GetGroupInfoOfTableResponse);&amp;lt;/code&amp;gt;&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 zombies&lt;/font&gt;. No zombie tests found running at the end of the build.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16827//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16827//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16827//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16827//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16827//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16827//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16827//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16827//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15052376" author="toffer" created="Fri, 11 Dec 2015 07:58:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu&quot; class=&quot;user-hover&quot; rel=&quot;tedyu&quot;&gt;Ted Yu&lt;/a&gt; Looks like fixing the normalizer made the core tests pass, I&apos;m not able to reproduce the shell failure you presented?&lt;/p&gt;</comment>
                            <comment id="15053595" author="toffer" created="Fri, 11 Dec 2015 21:28:26 +0000"  >&lt;p&gt;Looks like &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu&quot; class=&quot;user-hover&quot; rel=&quot;tedyu&quot;&gt;Ted Yu&lt;/a&gt; is OOO.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt; Any other feedback/concerns? Anything else I should address? &lt;/p&gt;</comment>
                            <comment id="15056590" author="yuzhihong@gmail.com" created="Mon, 14 Dec 2015 19:46:59 +0000"  >&lt;p&gt;From &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16827/consoleFull&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16827/consoleFull&lt;/a&gt; :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
testKillRS(org.apache.hadoop.hbase.group.TestGroups)  Time elapsed: 10.725 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
java.lang.AssertionError: expected:&amp;lt;1&amp;gt; but was:&amp;lt;0&amp;gt;
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.failNotEquals(Assert.java:834)
	at org.junit.Assert.assertEquals(Assert.java:645)
	at org.junit.Assert.assertEquals(Assert.java:631)
	at org.apache.hadoop.hbase.group.TestGroupsBase.testKillRS(TestGroupsBase.java:612)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I am running TestShell locally to see if it passes.&lt;/p&gt;</comment>
                            <comment id="15056619" author="yuzhihong@gmail.com" created="Mon, 14 Dec 2015 20:01:16 +0000"  >&lt;p&gt;Francis:&lt;br/&gt;
You can copy the following file from branch-1.1 to master branch so that you can run TestShell:&lt;br/&gt;
hbase-shell/src/test/java/org/apache/hadoop/hbase/client/TestShell.java&lt;/p&gt;

&lt;p&gt;I ran TestShell locally and still got:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
test_Test_Basic_Group_Commands(Hbase::GroupShellTest):
NativeException: org.apache.hadoop.hbase.exceptions.UnknownProtocolException: org.apache.hadoop.hbase.exceptions.UnknownProtocolException: No registered master coprocessor    service found &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; name hbase.pb.GroupAdminService
  at org.apache.hadoop.hbase.master.MasterRpcServices.execMasterService(MasterRpcServices.java:682)
  at org.apache.hadoop.hbase.protobuf.generated.MasterProtos$MasterService$2.callBlockingMethod(MasterProtos.java:57964)
  at org.apache.hadoop.hbase.ipc.RpcServer.call(RpcServer.java:2213)
  at org.apache.hadoop.hbase.ipc.CallRunner.run(CallRunner.java:109)
  at org.apache.hadoop.hbase.ipc.RpcExecutor.consumerLoop(RpcExecutor.java:133)
  at org.apache.hadoop.hbase.ipc.RpcExecutor$1.run(RpcExecutor.java:108)
  at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)

    sun/reflect/NativeConstructorAccessorImpl.java:-2:in `newInstance0&apos;
    sun/reflect/NativeConstructorAccessorImpl.java:57:in `newInstance&apos;
    sun/reflect/DelegatingConstructorAccessorImpl.java:45:in `newInstance&apos;
    java/lang/reflect/Constructor.java:526:in `newInstance&apos;
    org/apache/hadoop/ipc/RemoteException.java:106:in `instantiateException&apos;
    org/apache/hadoop/ipc/RemoteException.java:95:in `unwrapRemoteException&apos;
    org/apache/hadoop/hbase/ipc/AsyncCall.java:127:in `setFailed&apos;
    org/apache/hadoop/hbase/ipc/AsyncServerResponseHandler.java:83:in `channelRead&apos;
    io/netty/channel/AbstractChannelHandlerContext.java:308:in `invokeChannelRead&apos;
    io/netty/channel/AbstractChannelHandlerContext.java:294:in `fireChannelRead&apos;
    io/netty/handler/codec/ByteToMessageDecoder.java:244:in `channelRead&apos;
    io/netty/channel/AbstractChannelHandlerContext.java:308:in `invokeChannelRead&apos;
    io/netty/channel/AbstractChannelHandlerContext.java:294:in `fireChannelRead&apos;
    io/netty/channel/DefaultChannelPipeline.java:846:in `fireChannelRead&apos;
    io/netty/channel/nio/AbstractNioByteChannel.java:131:in `read&apos;
    io/netty/channel/nio/NioEventLoop.java:511:in `processSelectedKey&apos;
    io/netty/channel/nio/NioEventLoop.java:468:in `processSelectedKeysOptimized&apos;
    io/netty/channel/nio/NioEventLoop.java:382:in `processSelectedKeys&apos;
    io/netty/channel/nio/NioEventLoop.java:354:in `run&apos;
    io/netty/util/concurrent/SingleThreadEventExecutor.java:110:in `run&apos;
    java/lang/&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745:in `run&apos;
    ./src/test/ruby/shell/group_shell_test.rb:43:in `test_Test_Basic_Group_Commands&apos;
    org/jruby/RubyProc.java:270:in `call&apos;
    org/jruby/RubyKernel.java:2105:in `send&apos;
    org/jruby/RubyArray.java:1620:in `each&apos;
    org/jruby/RubyArray.java:1620:in `each&apos;

  2) Failure:
test_Test_bogus_arguments(Hbase::GroupShellTest)
    [./src/test/ruby/shell/group_shell_test.rb:85:in `test_Test_bogus_arguments&apos;
     org/jruby/RubyProc.java:270:in `call&apos;
     org/jruby/RubyKernel.java:2105:in `send&apos;
     org/jruby/RubyArray.java:1620:in `each&apos;
     org/jruby/RubyArray.java:1620:in `each&apos;]:
&amp;lt;ArgumentError&amp;gt; exception expected but was
&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;: &amp;lt;NativeException&amp;gt;
Message: &amp;lt;&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.hadoop.hbase.exceptions.UnknownProtocolException: org.apache.hadoop.hbase.exceptions.UnknownProtocolException: No registered master coprocessor service  found &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; name hbase.pb.GroupAdminService\n\tat org.apache.hadoop.hbase.master.MasterRpcServices.execMasterService(MasterRpcServices.java:682)\n\tat org.apache.hadoop.hbase.  protobuf.generated.MasterProtos$MasterService$2.callBlockingMethod(MasterProtos.java:57964)\n\tat org.apache.hadoop.hbase.ipc.RpcServer.call(RpcServer.java:2213)\n\tat org.   apache.hadoop.hbase.ipc.CallRunner.run(CallRunner.java:109)\n\tat org.apache.hadoop.hbase.ipc.RpcExecutor.consumerLoop(RpcExecutor.java:133)\n\tat org.apache.hadoop.hbase.ipc.RpcExecutor$1.run(RpcExecutor.java:108)\n\tat java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)\n&quot;&lt;/span&gt;&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15056717" author="toffer" created="Mon, 14 Dec 2015 21:04:09 +0000"  >&lt;p&gt;Is this really how we&apos;re supposed to run the other shell unit tests? What if there&apos;s something that needs to be changed/fixed in TestShell?&lt;/p&gt;</comment>
                            <comment id="15056962" author="yuzhihong@gmail.com" created="Mon, 14 Dec 2015 23:27:09 +0000"  >&lt;p&gt;Took a quick look at GroupShellTest which misses master coprocessor setup similar to the following:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    TEST_UTIL.getConfiguration().set(CoprocessorHost.MASTER_COPROCESSOR_CONF_KEY,
+        GroupAdminEndpoint.class.getName());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15058465" author="toffer" created="Tue, 15 Dec 2015 18:14:58 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Took a quick look at GroupShellTest which misses master coprocessor setup similar to the following:&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Precisely, I created a separate ShellTest subclass as I needed to configure a different balancer and coprocessor which would not work with the existing shell unit tests. I think there&apos;s a bigger problem, that there is no proper way to run shell unit tests in trunk. I&apos;ve filed &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14981&quot; title=&quot;Shell unit tests are not running in trunk?&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14981&quot;&gt;&lt;del&gt;HBASE-14981&lt;/del&gt;&lt;/a&gt; to address that. I&apos;m going to address the non-shell unit test failures for now.&lt;/p&gt;</comment>
                            <comment id="15059541" author="toffer" created="Wed, 16 Dec 2015 05:50:57 +0000"  >&lt;p&gt;addressed failing non-shell unit tests&lt;/p&gt;</comment>
                            <comment id="15059609" author="toffer" created="Wed, 16 Dec 2015 07:09:07 +0000"  >&lt;p&gt;Looks like TestShell has been temporarily removed as part of test stabilization experiment in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14678&quot; title=&quot;Experiment: Temporarily disable balancer and a few others to see if root of crashed/timedout JVMs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14678&quot;&gt;&lt;del&gt;HBASE-14678&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Given how it looks like when it was still there:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/hbase/commit/f670649f0e2cfba8a2112eb5c1d79b8b7f52c3b2&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hbase/commit/f670649f0e2cfba8a2112eb5c1d79b8b7f52c3b2&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;All I need to do is include the group rb file in the TestShell class. So we can either apply the TestShell change once it&apos;s been re-enabled. Or commit the group shell unit tests as a follow-up once TestShell has been re-enabled. Thoughts?&lt;/p&gt;</comment>
                            <comment id="15059725" author="hadoopqa" created="Wed, 16 Dec 2015 09:02:28 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12777930/hbase-6721-v20.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12777930/hbase-6721-v20.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 60d33ce34191533bb858852584bd9bddfeb16a23.&lt;br/&gt;
  ATTACHMENT ID: 12777930&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 48 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated new checkstyle errors. Check build console for list of new errors.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +       * &amp;lt;code&amp;gt;rpc GetGroupInfo(.hbase.pb.GetGroupInfoRequest) returns (.hbase.pb.GetGroupInfoResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc GetGroupInfoOfTable(.hbase.pb.GetGroupInfoOfTableRequest) returns (.hbase.pb.GetGroupInfoOfTableResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc GetGroupInfoOfServer(.hbase.pb.GetGroupInfoOfServerRequest) returns (.hbase.pb.GetGroupInfoOfServerResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc MoveServers(.hbase.pb.MoveServersRequest) returns (.hbase.pb.MoveServersResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc MoveTables(.hbase.pb.MoveTablesRequest) returns (.hbase.pb.MoveTablesResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc RemoveGroup(.hbase.pb.RemoveGroupRequest) returns (.hbase.pb.RemoveGroupResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc BalanceGroup(.hbase.pb.BalanceGroupRequest) returns (.hbase.pb.BalanceGroupResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc ListGroupInfos(.hbase.pb.ListGroupInfosRequest) returns (.hbase.pb.ListGroupInfosResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+     * &amp;lt;code&amp;gt;rpc GetGroupInfo(.hbase.pb.GetGroupInfoRequest) returns (.hbase.pb.GetGroupInfoResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+     * &amp;lt;code&amp;gt;rpc GetGroupInfoOfTable(.hbase.pb.GetGroupInfoOfTableRequest) returns (.hbase.pb.GetGroupInfoOfTableResponse);&amp;lt;/code&amp;gt;&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 zombies&lt;/font&gt;. No zombie tests found running at the end of the build.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16873//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16873//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16873//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16873//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16873//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16873//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Javadoc warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16873//artifact/patchprocess/patchJavadocWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16873//artifact/patchprocess/patchJavadocWarnings.txt&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16873//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16873//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15059831" author="yuzhihong@gmail.com" created="Wed, 16 Dec 2015 11:08:01 +0000"  >&lt;blockquote&gt;&lt;p&gt;include the group rb file in the TestShell class&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;TestShell works by excluding replication related shell tests:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testRunShellTests() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.setProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;shell.test.exclude&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;replication_admin_test.rb&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Can you refer to hbase-shell//src/test/java/org/apache/hadoop/hbase/client/TestReplicationShell.java in branch-1.1 and create TestRegionServerGroupShell.java ?&lt;br/&gt;
This way, we don&apos;t need to wait for restoration of TestShell.&lt;/p&gt;</comment>
                            <comment id="15060385" author="toffer" created="Wed, 16 Dec 2015 17:47:16 +0000"  >&lt;p&gt;I pretty much did that with TestShellGroups class, I just used the &apos;shell.test&apos; property to define what test to be run intead of shell.test.include/shell.test.exclude. The reason the TestShell was failing was because you copied the TestShell class and did not exclude group_shell_test.rb similar to how replication_admin_test.rb is set. So we will need to update TestShell once it&apos;s restored so it doesn&apos;t fail because it tries to run  group_shell_test.rb.&lt;/p&gt;</comment>
                            <comment id="15060399" author="yuzhihong@gmail.com" created="Wed, 16 Dec 2015 17:53:40 +0000"  >&lt;p&gt;I see.&lt;br/&gt;
TestShellGroups passes locally.&lt;/p&gt;

&lt;p&gt;Mind addressing checkstyle warnings ?&lt;/p&gt;

&lt;p&gt;Patch on review board is v18.&lt;br/&gt;
Please upload v20 (or v21) there.&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="15060429" author="toffer" created="Wed, 16 Dec 2015 18:03:51 +0000"  >&lt;p&gt;I upload v20 on RB. Will address the checkstyle.&lt;/p&gt;</comment>
                            <comment id="15061745" author="toffer" created="Thu, 17 Dec 2015 08:59:55 +0000"  >&lt;p&gt;addressed checkstyle issues.&lt;/p&gt;</comment>
                            <comment id="15061977" author="hadoopqa" created="Thu, 17 Dec 2015 12:26:02 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12778218/hbase-6721-v21.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12778218/hbase-6721-v21.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit d78eddfdc8bad5068600e28a039276cc55063ce2.&lt;br/&gt;
  ATTACHMENT ID: 12778218&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 48 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated new checkstyle errors. Check build console for list of new errors.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +       * &amp;lt;code&amp;gt;rpc GetGroupInfo(.hbase.pb.GetGroupInfoRequest) returns (.hbase.pb.GetGroupInfoResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc GetGroupInfoOfTable(.hbase.pb.GetGroupInfoOfTableRequest) returns (.hbase.pb.GetGroupInfoOfTableResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc GetGroupInfoOfServer(.hbase.pb.GetGroupInfoOfServerRequest) returns (.hbase.pb.GetGroupInfoOfServerResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc MoveServers(.hbase.pb.MoveServersRequest) returns (.hbase.pb.MoveServersResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc MoveTables(.hbase.pb.MoveTablesRequest) returns (.hbase.pb.MoveTablesResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc RemoveGroup(.hbase.pb.RemoveGroupRequest) returns (.hbase.pb.RemoveGroupResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc BalanceGroup(.hbase.pb.BalanceGroupRequest) returns (.hbase.pb.BalanceGroupResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc ListGroupInfos(.hbase.pb.ListGroupInfosRequest) returns (.hbase.pb.ListGroupInfosResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+     * &amp;lt;code&amp;gt;rpc GetGroupInfo(.hbase.pb.GetGroupInfoRequest) returns (.hbase.pb.GetGroupInfoResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+     * &amp;lt;code&amp;gt;rpc GetGroupInfoOfTable(.hbase.pb.GetGroupInfoOfTableRequest) returns (.hbase.pb.GetGroupInfoOfTableResponse);&amp;lt;/code&amp;gt;&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 zombies&lt;/font&gt;. No zombie tests found running at the end of the build.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16903//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16903//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16903//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16903//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16903//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16903//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Javadoc warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16903//artifact/patchprocess/patchJavadocWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16903//artifact/patchprocess/patchJavadocWarnings.txt&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16903//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16903//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15062452" author="yuzhihong@gmail.com" created="Thu, 17 Dec 2015 18:07:18 +0000"  >&lt;p&gt;There&apos;re some import order check warnings left:&lt;/p&gt;

&lt;p&gt;./dev-support/checkstyle_report.py trunkCheckstyle.xml patchCheckstyle.xml&lt;br/&gt;
hbase-client/src/main/java/org/apache/hadoop/hbase/group/GroupAdminClient.java	ImportOrderCheck	0	1&lt;br/&gt;
hbase-server/src/main/java/org/apache/hadoop/hbase/master/HMaster.java	RedundantImportCheck	0	4&lt;br/&gt;
hbase-server/target/generated-jamon/org/apache/hadoop/hbase/tmpl/master/MasterStatusTmpl.java	ImportOrderCheck	12	13&lt;br/&gt;
hbase-server/target/generated-jamon/org/apache/hadoop/hbase/tmpl/master/MasterStatusTmpl.java	UnusedImportsCheck	20	21&lt;br/&gt;
hbase-server/target/generated-jamon/org/apache/hadoop/hbase/tmpl/master/MasterStatusTmplImpl.java	IndentationCheck	61	62&lt;br/&gt;
hbase-server/target/generated-jamon/org/apache/hadoop/hbase/tmpl/master/MasterStatusTmplImpl.java	ImportOrderCheck	12	13&lt;/p&gt;</comment>
                            <comment id="15062576" author="toffer" created="Thu, 17 Dec 2015 19:06:16 +0000"  >&lt;p&gt;Sorry missed that. Fixed in updated patch.&lt;/p&gt;</comment>
                            <comment id="15062636" author="enis" created="Thu, 17 Dec 2015 19:36:07 +0000"  >&lt;p&gt;Javadoc is not related. I think there is an issue tracking that already. &lt;/p&gt;</comment>
                            <comment id="15063049" author="hadoopqa" created="Thu, 17 Dec 2015 23:12:00 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12778306/hbase-6721-v22.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12778306/hbase-6721-v22.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 80fc18d2e1f72d312a4ab90a32d6e44c9b560493.&lt;br/&gt;
  ATTACHMENT ID: 12778306&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 48 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated new checkstyle errors. Check build console for list of new errors.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +       * &amp;lt;code&amp;gt;rpc GetGroupInfo(.hbase.pb.GetGroupInfoRequest) returns (.hbase.pb.GetGroupInfoResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc GetGroupInfoOfTable(.hbase.pb.GetGroupInfoOfTableRequest) returns (.hbase.pb.GetGroupInfoOfTableResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc GetGroupInfoOfServer(.hbase.pb.GetGroupInfoOfServerRequest) returns (.hbase.pb.GetGroupInfoOfServerResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc MoveServers(.hbase.pb.MoveServersRequest) returns (.hbase.pb.MoveServersResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc MoveTables(.hbase.pb.MoveTablesRequest) returns (.hbase.pb.MoveTablesResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc RemoveGroup(.hbase.pb.RemoveGroupRequest) returns (.hbase.pb.RemoveGroupResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc BalanceGroup(.hbase.pb.BalanceGroupRequest) returns (.hbase.pb.BalanceGroupResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc ListGroupInfos(.hbase.pb.ListGroupInfosRequest) returns (.hbase.pb.ListGroupInfosResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+     * &amp;lt;code&amp;gt;rpc GetGroupInfo(.hbase.pb.GetGroupInfoRequest) returns (.hbase.pb.GetGroupInfoResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+     * &amp;lt;code&amp;gt;rpc GetGroupInfoOfTable(.hbase.pb.GetGroupInfoOfTableRequest) returns (.hbase.pb.GetGroupInfoOfTableResponse);&amp;lt;/code&amp;gt;&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 zombies&lt;/font&gt;. No zombie tests found running at the end of the build.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16912//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16912//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16912//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16912//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16912//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16912//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16912//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16912//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15063102" author="toffer" created="Thu, 17 Dec 2015 23:41:49 +0000"  >&lt;p&gt;The remaining checkstyle failures are mainly because of the auto-generated MasterStatus java files. Do we need to fix this?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hbase-server/target/generated-jamon/org/apache/hadoop/hbase/tmpl/master/MasterStatusTmplImpl.java	IndentationCheck	61	62
hbase-server/target/generated-jamon/org/apache/hadoop/hbase/tmpl/master/MasterStatusTmplImpl.java	ImportOrderCheck	12	13
hbase-server/target/generated-jamon/org/apache/hadoop/hbase/tmpl/master/MasterStatusTmpl.java	ImportOrderCheck	12	13
hbase-server/target/generated-jamon/org/apache/hadoop/hbase/tmpl/master/MasterStatusTmpl.java	UnusedImportsCheck	20	21
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="15064706" author="toffer" created="Fri, 18 Dec 2015 20:24:41 +0000"  >&lt;p&gt;Looks like I can only influence the import order via the jamon file (which was a mess to begin with). The rest cannot be fixed it seems.&lt;/p&gt;</comment>
                            <comment id="15064781" author="hadoopqa" created="Fri, 18 Dec 2015 21:20:44 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12778573/hbase-6721-v23.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12778573/hbase-6721-v23.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit eb59d4d7690bb4d8d0afa460202c68885ef6a271.&lt;br/&gt;
  ATTACHMENT ID: 12778573&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 48 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16931//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16931//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15065002" author="toffer" created="Fri, 18 Dec 2015 23:51:58 +0000"  >&lt;p&gt;rebased patch&lt;/p&gt;</comment>
                            <comment id="15065203" author="hadoopqa" created="Sat, 19 Dec 2015 03:22:08 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12778630/hbase-6721-v25.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12778630/hbase-6721-v25.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit cdca22a36d0e2ec87cea732e0769c4fa4fa37e57.&lt;br/&gt;
  ATTACHMENT ID: 12778630&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 48 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated new checkstyle errors. Check build console for list of new errors.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +       * &amp;lt;code&amp;gt;rpc GetGroupInfo(.hbase.pb.GetGroupInfoRequest) returns (.hbase.pb.GetGroupInfoResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc GetGroupInfoOfTable(.hbase.pb.GetGroupInfoOfTableRequest) returns (.hbase.pb.GetGroupInfoOfTableResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc GetGroupInfoOfServer(.hbase.pb.GetGroupInfoOfServerRequest) returns (.hbase.pb.GetGroupInfoOfServerResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc MoveServers(.hbase.pb.MoveServersRequest) returns (.hbase.pb.MoveServersResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc MoveTables(.hbase.pb.MoveTablesRequest) returns (.hbase.pb.MoveTablesResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc RemoveGroup(.hbase.pb.RemoveGroupRequest) returns (.hbase.pb.RemoveGroupResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc BalanceGroup(.hbase.pb.BalanceGroupRequest) returns (.hbase.pb.BalanceGroupResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+       * &amp;lt;code&amp;gt;rpc ListGroupInfos(.hbase.pb.ListGroupInfosRequest) returns (.hbase.pb.ListGroupInfosResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+     * &amp;lt;code&amp;gt;rpc GetGroupInfo(.hbase.pb.GetGroupInfoRequest) returns (.hbase.pb.GetGroupInfoResponse);&amp;lt;/code&amp;gt;&lt;br/&gt;
+     * &amp;lt;code&amp;gt;rpc GetGroupInfoOfTable(.hbase.pb.GetGroupInfoOfTableRequest) returns (.hbase.pb.GetGroupInfoOfTableResponse);&amp;lt;/code&amp;gt;&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 zombies&lt;/font&gt;. No zombie tests found running at the end of the build.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16934//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16934//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16934//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16934//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16934//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16934//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16934//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16934//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15069811" author="yuzhihong@gmail.com" created="Wed, 23 Dec 2015 16:15:22 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hbase-server/target/generated-jamon/org/apache/hadoop/hbase/tmpl/master/MasterStatusTmpl.java	UnusedImportsCheck	20	21
hbase-server/target/generated-jamon/org/apache/hadoop/hbase/tmpl/master/MasterStatusTmplImpl.java	IndentationCheck	61	62
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;To my knowledge, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15015&quot; title=&quot;Checktyle plugin shouldn&amp;#39;t check Jamon-generated Java classes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15015&quot;&gt;&lt;del&gt;HBASE-15015&lt;/del&gt;&lt;/a&gt; (committed after the QA run) should have disabled the above check.&lt;/p&gt;</comment>
                            <comment id="15069827" author="yuzhihong@gmail.com" created="Wed, 23 Dec 2015 16:26:16 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;Francis:&lt;br/&gt;
Please update Release Note.&lt;/p&gt;</comment>
                            <comment id="15069839" author="yuzhihong@gmail.com" created="Wed, 23 Dec 2015 16:31:39 +0000"  >&lt;p&gt;Any more review comments ?&lt;/p&gt;</comment>
                            <comment id="15069872" author="eclark" created="Wed, 23 Dec 2015 17:02:26 +0000"  >&lt;p&gt;From what I can see most of my comments still stand. It&apos;s still built into the default client. It&apos;s still in the main module. Though I do appreciate that it&apos;s a co-processor.&lt;/p&gt;

&lt;p&gt;If we can move the co-processor to a different module and move the methods off the main admin classes I would be fine with it.&lt;/p&gt;</comment>
                            <comment id="15087285" author="enis" created="Thu, 7 Jan 2016 12:20:30 +0000"  >&lt;p&gt;With this patch, the RS groups is completely optional and non-core. I don&apos;t think having the code in a different module helps in any way.  &lt;br/&gt;
The patch corresponds to the plan that Francis put up here: &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6721?focusedCommentId=14728516&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14728516&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-6721?focusedCommentId=14728516&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14728516&lt;/a&gt;. I thought there was an agreement already for this. We did not talk about having a different module in that. &lt;/p&gt;</comment>
                            <comment id="15111314" author="devaraj" created="Thu, 21 Jan 2016 21:16:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt; ping. Please respond when you have a moment.&lt;/p&gt;</comment>
                            <comment id="15118361" author="enis" created="Wed, 27 Jan 2016 00:45:53 +0000"  >&lt;p&gt;There is a +1 outstanding for this patch. To reiterate the above comment, I think the current patch covers the already-agreed-upon requirement that the feature should be non-core and optional. We have not talked about needing a different module previously, and I am not sure why it is necessary. Unless, I hear otherwise by Friday, I&apos;ll go ahead with committing this. &lt;/p&gt;</comment>
                            <comment id="15119284" author="eclark" created="Wed, 27 Jan 2016 14:20:03 +0000"  >&lt;blockquote&gt;&lt;p&gt;I think the current patch covers the already-agreed-upon requirement that the feature should be non-core and optional.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The exact same was requested for memcached block cache, and it was reasonable then. I&apos;m simply asking for this feature to get the same treatment that optional off by default removable features should get. This feature should never be used by anyone other than yahoo and we have a duty to our users to make sure that they understand that.&lt;/p&gt;

&lt;p&gt;On top of that the naming on this is awful. Groups are something that users are a part of. Its a term that been around unix for a very long time. The term is used all over the Hadoop and HBase code. We shouldn&apos;t overload the term. rsgroup as used in the table name is better.&lt;br/&gt;
Why all the changes to comma for server name rather than colon ? Isn&apos;t that a breaking change? If it&apos;s not required then we should add tests, not change them.&lt;br/&gt;
Going around the current metrics system is a code smell.&lt;br/&gt;
Start code is optional on ServerName so no need to create a new protobuf.&lt;/p&gt;

&lt;p&gt;I have not withdrawn my explicit -1 as per the voting rules of Apache.&lt;/p&gt;</comment>
                            <comment id="15120692" author="enis" created="Thu, 28 Jan 2016 03:29:07 +0000"  >&lt;blockquote&gt;&lt;p&gt;The exact same was requested for memcached block cache, and it was reasonable then. I&apos;m simply asking for this feature to get the same treatment that optional off by default removable features should get&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yep, everybody agrees that it should be completely optional and non-core for this. What I am saying is that there is no need to fork out a different module for this. I just checked, nobody asked the memcache thing to be a different module above. &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;This feature should never be used by anyone other than yahoo and we have a duty to our users to make sure that they understand that.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;That is up for the users to decide. Sophisticated users can make their own decisions. &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;rsgroup as used in the table name is better.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Agreed. I&apos;ve brought this up in the review already. I thought we have addressed the cases, but if we haven&apos;t, we should stick with rsgroups rather than groups.  Having consistent naming is something we are lacking in hbase (alter table in shell vs modify table in java, etc).&lt;/p&gt;
</comment>
                            <comment id="15131277" author="clayb" created="Wed, 3 Feb 2016 22:32:13 +0000"  >&lt;p&gt;I would like to register that I am not at Yahoo! but as an operator of a large number of clusters will certainly take advantage of this feature. In fact, Guorui&apos;s work was motivated by the need for this feature here.&lt;/p&gt;</comment>
                            <comment id="15139863" author="stack" created="Tue, 9 Feb 2016 22:01:21 +0000"  >&lt;p&gt;What we going to do here?&lt;/p&gt;

&lt;p&gt;One of our biggest users has been working on getting this patch landed for years now. They put up a design and tried to address commentary as it came in. The patch has gone through many iterations. It even got deployed by another committer on a cluster and exercised. Implementation could be better but our internals are a little ahem, messy, so hard to overlay a new facility. A case has been made that this feature makes hbase palatable at scale, at least for how it is being used at Y!&lt;/p&gt;

&lt;p&gt;On the other hand, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt; objections are wholesome/valid. By default, this new code should not run. Having it out in a module doesn&apos;t sound like a bad idea if optional on and a bunch of new code. Yes, overloading &apos;group&apos; will confuse as we progress. You are probably busy &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt; but any chance of a list of what it would take to get you to drop your -1.&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="15145253" author="mbertozzi" created="Fri, 12 Feb 2016 20:38:25 +0000"  >&lt;p&gt;just gave a look at the patch. most of the code seems isolated. &lt;br/&gt;
the client is separate from Admin with its own GroupAdmin&lt;br/&gt;
the rpc is not in the master but in its own GroupAdminEndpoint&lt;br/&gt;
the &quot;group assignment&quot; logic seems isolated in GroupBasedLoadBalancer&lt;br/&gt;
and there are not many changes to the core. &lt;/p&gt;

&lt;p&gt;The only &quot;big&quot; thing that should be fixed are that too generic Group name and maybe doing something around that processBogusAssignments()/BOGUS_SERVER_NAME&lt;/p&gt;

&lt;p&gt;moving in its own module seems easy since most of the code is already isolated, but there are few things that we never done, like having the shell commands in a module different than hbase-shell&lt;/p&gt;</comment>
                            <comment id="15145474" author="stack" created="Fri, 12 Feb 2016 22:47:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt; if was in a separate module and feature name was changed to not be &apos;group&apos;, would you  your -1? Seems like it well isolated currently going by Matteo review above. Could hack on shell so it picked up commands at runtime so we could have downstream modules add commands....&lt;/p&gt;</comment>
                            <comment id="15145632" author="eclark" created="Sat, 13 Feb 2016 00:48:50 +0000"  >&lt;blockquote&gt;&lt;p&gt;That is up for the users to decide. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;And up the the PMC to steer people in the correct direction based upon having deep knowledge of running HBase in production. So I&apos;m doing that.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Elliott Clark if was in a separate module and feature name was changed to not be &apos;group&apos;, would you your -1?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yeah, address the groups naming thing.&lt;br/&gt;
Address the ServerName questions, breaking compat is not an option.&lt;br/&gt;
Don&apos;t go around the Metrics to get to jmx&lt;br/&gt;
Don&apos;t create a new protobuf class when not needed&lt;br/&gt;
Move it into a different module with a profile that doesn&apos;t include it.&lt;/p&gt;

&lt;p&gt;If/when those are addressed then I would remove my -1. I would be a -0.9 but I wouldn&apos;t block it.&lt;/p&gt;</comment>
                            <comment id="15145646" author="stack" created="Sat, 13 Feb 2016 00:59:23 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;How about we commit what we have here to a branch and then work on the list above to get it committed? I&apos;m game for helping out on fixing the ServerName stuff, the protobuf, and moving the thing to its own module (shell-work, etc.).&lt;/p&gt;</comment>
                            <comment id="15145682" author="toffer" created="Sat, 13 Feb 2016 01:34:33 +0000"  >&lt;p&gt;Thanks for the list &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt;. Some comments.&lt;/p&gt;

&lt;p&gt;&amp;gt; Yeah, address the groups naming thing.&lt;/p&gt;

&lt;p&gt;Sounds good. &lt;/p&gt;

&lt;p&gt;&amp;gt; moving in its own module seems easy since most of the code is already isolated, but there are few things that we never done, like having the shell commands in a module different than hbase-shell&lt;/p&gt;

&lt;p&gt;The previous agreement was to keep the gorup commands in hbase-shell the same as security before. Would guys still be ok with this? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbertozzi&quot; class=&quot;user-hover&quot; rel=&quot;mbertozzi&quot;&gt;Matteo Bertozzi&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&amp;gt; Address the ServerName questions, breaking compat is not an option.&lt;/p&gt;

&lt;p&gt;I think you misread the change. The code change was to actually fix a broken unit test as it was using colon as a delimiter to serverName. I just fixed it by changing the colon to &apos;,&apos;. If this is not the case please feel free to point it out in RB so I can address it properly.&lt;/p&gt;

&lt;p&gt;&amp;gt; Don&apos;t go around the Metrics to get to jmx&lt;/p&gt;

&lt;p&gt;The reason I went around metrics was because the information being published is not really what is consumed as metrics, it&apos;s basically just group information (name, tables, servers, etc) . It&apos;d be ugly but probably possible to shoehorn this into the metrics subsystem. Is this really how we do this even for non-metrics related information to be published? There&apos;s alot less flexibility in how we can structure the metadata. &lt;/p&gt;

&lt;p&gt;&amp;gt; Don&apos;t create a new protobuf class when not needed&lt;/p&gt;

&lt;p&gt;This was actually a review comment made by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jmhsieh&quot; class=&quot;user-hover&quot; rel=&quot;jmhsieh&quot;&gt;Jonathan Hsieh&lt;/a&gt;. I&apos;ll take a look if ServerName can suffice as a substitute. &lt;/p&gt;

&lt;p&gt;&amp;gt; Move it into a different module with a profile that doesn&apos;t include it.&lt;/p&gt;

&lt;p&gt;Will do.&lt;/p&gt;

&lt;p&gt;&amp;gt; If/when those are addressed then I would remove my -1. I would be a -0.9 but I wouldn&apos;t block it.&lt;/p&gt;

&lt;p&gt;Thanks. &lt;/p&gt;</comment>
                            <comment id="15145725" author="toffer" created="Sat, 13 Feb 2016 02:20:58 +0000"  >&lt;p&gt;Took a quick look at how the NN publishes metadata via JMX. And for the HA information at least it does it the same way this patch is doing in for HBase:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/hadoop/blob/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NameNode.java#L1727&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hadoop/blob/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NameNode.java#L1727&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Just in case it wasn&apos;t common knowledge. I&apos;ll publish the information in whatever form is acceptable.&lt;/p&gt;</comment>
                            <comment id="15145843" author="eclark" created="Sat, 13 Feb 2016 06:57:03 +0000"  >&lt;blockquote&gt;&lt;p&gt;Took a quick look at how the NN publishes metadata via JMX.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yeah hadoop can do whatever they want. I would prefer that HBase is consistent whenever interacting with jmx so when we make changes in the future it&apos;s all moving from the same base.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I think you misread the change. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Both formats have been able to be parsed for a long time. So if the test needs to be changed to pass then that&apos;s breaking change. If not then we shouldn&apos;t have changes that aren&apos;t needed in a patch this large.&lt;/p&gt;</comment>
                            <comment id="15162687" author="toffer" created="Wed, 24 Feb 2016 09:02:01 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Yeah hadoop can do whatever they want. I would prefer that HBase is consistent whenever interacting with jmx so when we make changes in the future it&apos;s all moving from the same base.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Took a look at this further it may be possible to reuse tags to publish metadata in some form but I would need to add APIs to the base (BaseSource?). Tho IMHO we could probably do better by providing a common base on which to publish metadata via jmx instead of retrofitting it into hadoop-metrics which looking at the direction hadoop went is not how they intend metrics subsystem to be used. So instead of addressing this in this patch I propose we create two new jiras: 1. create apis to publish metadata via jmx, 2. create jira to leverage #1 and publish region server groups metadata. Thoughts?&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Both formats have been able to be parsed for a long time. So if the test needs to be changed to pass then that&apos;s breaking change. If not then we shouldn&apos;t have changes that aren&apos;t needed in a patch this large.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I&apos;m not sure how the format used by TestMasterStatusServlet: rootserver:123,12345 is actually a valid format. It seems like a typo/bug to me. For a few reasons:&lt;/p&gt;

&lt;p&gt;1. The format is not documented in the javadoc&lt;br/&gt;
2. If you look at how the format mentioned is parsed the components would come out as host=rootserver:123/port=12345/startcode=12345. Which doesn&apos;t make much sense? Also &apos;:&apos; is not a valid character for a hostname according to RFC. &lt;/p&gt;

&lt;p&gt;What uses this format? Let me know what I&apos;m missing. On a related note if we support this format we really can&apos;t use HostAndPort as it assumes &apos;:&apos; will delimit a port and will throw an exception if it finds it in the hostname.&lt;/p&gt;

&lt;p&gt;On a related note another behavior change since the introduction of HostAndPort is that &apos;-1&apos; can no longer be used as a port number (or any negative number). Would this be a breaking change? Let me know how you&apos;d like to go about this change. &lt;/p&gt;
</comment>
                            <comment id="15166529" author="toffer" created="Thu, 25 Feb 2016 01:38:26 +0000"  >&lt;p&gt;Attached WIP rebased patch which addresses the following:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Yeah, address the groups naming thing. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Partially done. I renamed the main proto classes and package name to Group -&amp;gt; RSGroup. Should I just blindly prepend all entities with Group in it to RSGroup?&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Address the ServerName questions, breaking compat is not an option.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Waiting on response from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Don&apos;t go around the Metrics to get to jmx&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Waiting on response from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Don&apos;t create a new protobuf class when not needed&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Done&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Move it into a different module with a profile that doesn&apos;t include it.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Partially done. Most of the classes are in a different module. Need to address circular dependecy between hbase-rsgroup and hbase-server. Since the MasterObserver CP has hooks into the GroupAdminEndpoint. Pom file needs a bit of streamlining as well.&lt;/p&gt;</comment>
                            <comment id="15166846" author="hadoopqa" created="Thu, 25 Feb 2016 07:16:03 +0000"  >&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;&lt;/b&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Vote &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Runtime &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Comment &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt;0&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt; reexec &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt; 0m 0s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt; Docker mode activated. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; hbaseanti &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 0m 0s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Patch does not have any anti-patterns. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; @author &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 0m 0s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch does not contain any @author tags. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; test4tests &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 0m 0s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch appears to include 15 new or modified test files. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; mvninstall &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 4m 5s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 5m 35s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed with JDK v1.8.0_72 &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 5m 5s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed with JDK v1.7.0_95 &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; checkstyle &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 25m 35s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; mvneclipse &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 3m 4s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; hbaseprotoc &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 4m 0s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; findbugs &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; 10m 25s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; branch/. no findbugs output file (./target/findbugsXml.xml) &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; javadoc &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 3m 48s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed with JDK v1.8.0_72 &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; javadoc &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 4m 46s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed with JDK v1.7.0_95 &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; mvninstall &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 6m 30s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 5m 18s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed with JDK v1.8.0_72 &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; cc &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 5m 18s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; javac &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 5m 18s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 5m 32s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed with JDK v1.7.0_95 &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; cc &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 5m 32s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; javac &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 5m 32s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; checkstyle &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; 13m 3s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; Patch generated 17 new checkstyle issues in root (total was 637, now 650). &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; checkstyle &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; 1m 38s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; Patch generated 3 new checkstyle issues in hbase-client (total was 188, now 189). &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; checkstyle &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; 0m 12s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; Patch generated 4 new checkstyle issues in hbase-rsgroup (total was 0, now 4). &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; checkstyle &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; 3m 55s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; Patch generated 10 new checkstyle issues in hbase-server (total was 415, now 424). &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; mvneclipse &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 3m 16s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; rubocop &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; 0m 28s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; The applied patch generated 137 new rubocop issues (total was 263, now 399). &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; ruby-lint &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; 0m 11s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; The applied patch generated 68 new ruby-lint issues (total was 137, now 205). &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; whitespace &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; 0m 1s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; The patch has 94 line(s) that end in whitespace. Use git apply --whitespace=fix. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; xml &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 0m 2s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch has no ill-formed XML file. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; hadoopcheck &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 29m 22s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Patch does not cause any errors with Hadoop 2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.1 2.6.2 2.6.3 2.7.1. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; hbaseprotoc &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 3m 39s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; findbugs &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; 10m 49s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; patch/. no findbugs output file (./target/findbugsXml.xml) &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; findbugs &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; 1m 8s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; hbase-common introduced 3 new FindBugs issues. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; javadoc &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 4m 0s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed with JDK v1.8.0_72 &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; javadoc &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 4m 55s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed with JDK v1.7.0_95 &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; unit &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; 26m 7s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; root in the patch failed with JDK v1.8.0_72. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; unit &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 1m 3s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; hbase-client in the patch passed with JDK v1.8.0_72. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; unit &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 2m 1s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; hbase-common in the patch passed with JDK v1.8.0_72. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; unit &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 0m 19s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; hbase-it in the patch passed with JDK v1.8.0_72. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; unit &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 0m 29s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; hbase-protocol in the patch passed with JDK v1.8.0_72. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; unit &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 0m 23s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; hbase-rsgroup in the patch passed with JDK v1.8.0_72. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; unit &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; 18m 19s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; hbase-server in the patch failed with JDK v1.8.0_72. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; unit &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; 7m 47s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; hbase-shell in the patch failed with JDK v1.8.0_72. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; unit &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; 27m 30s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; root in the patch failed with JDK v1.7.0_95. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; unit &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 1m 3s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; hbase-client in the patch passed with JDK v1.7.0_95. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; unit &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 1m 56s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; hbase-common in the patch passed with JDK v1.7.0_95. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; unit &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 0m 20s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; hbase-it in the patch passed with JDK v1.7.0_95. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; unit &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 0m 26s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; hbase-protocol in the patch passed with JDK v1.7.0_95. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; unit &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 0m 23s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; hbase-rsgroup in the patch passed with JDK v1.7.0_95. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; unit &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; 18m 58s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; hbase-server in the patch failed with JDK v1.7.0_95. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; unit &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; 7m 16s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; hbase-shell in the patch failed with JDK v1.7.0_95. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; asflicense &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 1m 26s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Patch does not generate ASF License warnings. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt;&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; 297m 3s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Reason &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Tests &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; FindBugs &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; module:hbase-common &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  Class org.apache.hadoop.hbase.ServerName defines non-transient non-serializable instance field hostAndPort  In ServerName.java:instance field hostAndPort  In ServerName.java &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  Class org.apache.hadoop.hbase.rsgroup.GroupInfo defines non-transient non-serializable instance field servers  In GroupInfo.java:instance field servers  In GroupInfo.java &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  Class org.apache.hadoop.hbase.rsgroup.GroupInfo defines non-transient non-serializable instance field tables  In GroupInfo.java:instance field tables  In GroupInfo.java &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JDK v1.8.0_72 Failed junit tests &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; hadoop.hbase.ipc.TestRpcMetrics &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; hadoop.hbase.regionserver.TestMetricsRegion &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; hadoop.hbase.regionserver.TestMetricsRegionServer &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; hadoop.hbase.client.TestShell &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; hadoop.hbase.client.TestShellGroups &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; hadoop.hbase.ipc.TestRpcMetrics &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; hadoop.hbase.regionserver.TestMetricsRegion &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; hadoop.hbase.regionserver.TestMetricsRegionServer &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; hadoop.hbase.client.TestShell &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; hadoop.hbase.client.TestShellGroups &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JDK v1.7.0_95 Failed junit tests &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; hadoop.hbase.ipc.TestRpcMetrics &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; hadoop.hbase.regionserver.TestMetricsRegion &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; hadoop.hbase.regionserver.TestMetricsRegionServer &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; hadoop.hbase.client.TestShell &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; hadoop.hbase.client.TestShellGroups &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; hadoop.hbase.ipc.TestRpcMetrics &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; hadoop.hbase.regionserver.TestMetricsRegion &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; hadoop.hbase.regionserver.TestMetricsRegionServer &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; hadoop.hbase.client.TestShell &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; hadoop.hbase.client.TestShellGroups &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Report/Notes &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Docker &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Client=1.9.1 Server=1.9.1 Image:yetus/hbase:date2016-02-25 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Patch URL &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12789833/hbase-6721-v26_draft1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12789833/hbase-6721-v26_draft1.patch&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Issue &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6721&quot; title=&quot;RegionServer Group based Assignment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6721&quot;&gt;&lt;del&gt;HBASE-6721&lt;/del&gt;&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Optional Tests &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  asflicense  javac  javadoc  unit  findbugs  hadoopcheck  hbaseanti  checkstyle  compile  xml  cc  hbaseprotoc  rubocop  ruby_lint  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; uname &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Linux ae4c5edeceba 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Build tool &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; maven &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Personality &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/component/dev-support/hbase-personality.sh &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; git revision &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; master / 6e9d355 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; findbugs &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; v3.0.0 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; checkstyle &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/688/artifact/patchprocess/diff-checkstyle-root.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/688/artifact/patchprocess/diff-checkstyle-root.txt&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; checkstyle &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/688/artifact/patchprocess/diff-checkstyle-hbase-client.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/688/artifact/patchprocess/diff-checkstyle-hbase-client.txt&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; checkstyle &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/688/artifact/patchprocess/diff-checkstyle-hbase-rsgroup.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/688/artifact/patchprocess/diff-checkstyle-hbase-rsgroup.txt&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; checkstyle &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/688/artifact/patchprocess/diff-checkstyle-hbase-server.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/688/artifact/patchprocess/diff-checkstyle-hbase-server.txt&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; rubocop &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; v0.37.2 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; rubocop &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/688/artifact/patchprocess/diff-patch-rubocop.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/688/artifact/patchprocess/diff-patch-rubocop.txt&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; ruby-lint &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; v2.1.0 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; ruby-lint &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/688/artifact/patchprocess/diff-patch-ruby-lint.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/688/artifact/patchprocess/diff-patch-ruby-lint.txt&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; whitespace &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/688/artifact/patchprocess/whitespace-eol.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/688/artifact/patchprocess/whitespace-eol.txt&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; findbugs &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/688/artifact/patchprocess/new-findbugs-hbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/688/artifact/patchprocess/new-findbugs-hbase-common.html&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; unit &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/688/artifact/patchprocess/patch-unit-root-jdk1.8.0_72.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/688/artifact/patchprocess/patch-unit-root-jdk1.8.0_72.txt&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; unit &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/688/artifact/patchprocess/patch-unit-hbase-server-jdk1.8.0_72.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/688/artifact/patchprocess/patch-unit-hbase-server-jdk1.8.0_72.txt&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; unit &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/688/artifact/patchprocess/patch-unit-hbase-shell-jdk1.8.0_72.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/688/artifact/patchprocess/patch-unit-hbase-shell-jdk1.8.0_72.txt&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; unit &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/688/artifact/patchprocess/patch-unit-root-jdk1.7.0_95.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/688/artifact/patchprocess/patch-unit-root-jdk1.7.0_95.txt&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; unit &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/688/artifact/patchprocess/patch-unit-hbase-server-jdk1.7.0_95.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/688/artifact/patchprocess/patch-unit-hbase-server-jdk1.7.0_95.txt&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; unit &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/688/artifact/patchprocess/patch-unit-hbase-shell-jdk1.7.0_95.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/688/artifact/patchprocess/patch-unit-hbase-shell-jdk1.7.0_95.txt&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; unit test logs &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/688/artifact/patchprocess/patch-unit-root-jdk1.8.0_72.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/688/artifact/patchprocess/patch-unit-root-jdk1.8.0_72.txt&lt;/a&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/688/artifact/patchprocess/patch-unit-hbase-server-jdk1.8.0_72.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/688/artifact/patchprocess/patch-unit-hbase-server-jdk1.8.0_72.txt&lt;/a&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/688/artifact/patchprocess/patch-unit-hbase-shell-jdk1.8.0_72.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/688/artifact/patchprocess/patch-unit-hbase-shell-jdk1.8.0_72.txt&lt;/a&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/688/artifact/patchprocess/patch-unit-root-jdk1.7.0_95.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/688/artifact/patchprocess/patch-unit-root-jdk1.7.0_95.txt&lt;/a&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/688/artifact/patchprocess/patch-unit-hbase-server-jdk1.7.0_95.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/688/artifact/patchprocess/patch-unit-hbase-server-jdk1.7.0_95.txt&lt;/a&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/688/artifact/patchprocess/patch-unit-hbase-shell-jdk1.7.0_95.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/688/artifact/patchprocess/patch-unit-hbase-shell-jdk1.7.0_95.txt&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JDK v1.7.0_95  Test Results &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/688/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/688/testReport/&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; modules &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; C: . hbase-client hbase-common hbase-it hbase-protocol hbase-rsgroup hbase-server hbase-shell U: . &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Max memory used &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 195MB &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Powered by &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Apache Yetus 0.1.0   &lt;a href=&quot;http://yetus.apache.org&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://yetus.apache.org&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Console output &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/688/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/688/console&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;This message was automatically generated.&lt;/p&gt;
</comment>
                            <comment id="15173041" author="enis" created="Tue, 1 Mar 2016 01:16:44 +0000"  >&lt;blockquote&gt;&lt;p&gt;Need to address circular dependecy between hbase-rsgroup and hbase-server. Since the MasterObserver CP has hooks into the GroupAdminEndpoint.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;If it is a strict &quot;no&quot; on the RS Group coprocessor reaching out to the internals of AccessController (as per above comment from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;), then the only option is to add the rs group specific methods to the base MasterObserver. I think it is acceptable since they would be empty method declarations if the module is not used. &lt;/p&gt;

&lt;p&gt;For the ServerName change, this parts seems relevant (from ServerName.parseFrom()): &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-comment&quot;&gt;// The str returned could be old style -- pre hbase-1502 -- which was
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// hostname and port seperated by a colon rather than hostname, port and
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// startcode delimited by a &apos;,&apos;.&#8203;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 
&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1502&quot; title=&quot;Remove need for heartbeats in HBase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1502&quot;&gt;&lt;del&gt;HBASE-1502&lt;/del&gt;&lt;/a&gt; is committed around 0.92 timeframe, so I am not sure whether we will have any such server name strings around anymore. &lt;/p&gt;</comment>
                            <comment id="15176798" author="toffer" created="Thu, 3 Mar 2016 00:24:21 +0000"  >&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1502&quot; title=&quot;Remove need for heartbeats in HBase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1502&quot;&gt;&lt;del&gt;HBASE-1502&lt;/del&gt;&lt;/a&gt; is committed around 0.92 timeframe, so I am not sure whether we will have any such server name strings around anymore.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Thanks for pointing that out &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt;. This is a clear indication that the ServerNameform in TestMasterStatusServlet  is a typo &apos;rootserver:123,12345&apos; as it is neither the old form or the new form. Then that leaves wether negative port numbers are a breaking change or not? As HostAndPort doesn&apos;t allow it.&lt;/p&gt;</comment>
                            <comment id="15176824" author="eclark" created="Thu, 3 Mar 2016 00:36:28 +0000"  >&lt;p&gt;The negative port numbers are unlikely to cause any errors so I would say we can ignore that. So then the last part is getting better naming for things.&lt;/p&gt;</comment>
                            <comment id="15176837" author="toffer" created="Thu, 3 Mar 2016 00:43:07 +0000"  >&lt;p&gt;Attached patch which is pretty much done except for the negative port concern.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Yeah, address the groups naming thing.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Done. Change classes, packages, etc to RSGroups.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Address the ServerName questions, breaking compat is not an option.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;It seems clear now the serverName form I fixed in TestMasterStatusServlet is indeed a typo. So the current patch can still support the old form. Tho it cannot support negative port numbers due to port restrictions. Let me know if this is not acceptable. &lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Don&apos;t go around the Metrics to get to jmx&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Removed JMX this code from the base patch and filed &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15382&quot; title=&quot;Expose regionserver metadata (ie groups, tables, servers) via JMX&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15382&quot;&gt;HBASE-15382&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Don&apos;t create a new protobuf class when not needed&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Done&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Move it into a different module with a profile that doesn&apos;t include it.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Done. Tho RSGroup protos are still in hbase-protocol and there&apos;s one POJO (RSGroupInfo) that had to stay in hbase-common as it is needed by the RSGroup related MasterObserver CP methods. RSGroup shell is also still in hbase-shell.&lt;/p&gt;</comment>
                            <comment id="15176842" author="toffer" created="Thu, 3 Mar 2016 00:46:03 +0000"  >&lt;blockquote&gt;
&lt;p&gt;So then the last part is getting better naming &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Are you referring to the rename from Group -&amp;gt; RSGroup? Then the just uploaded patch should&apos;ve addressed it. Let me know if I missed anything. If not let me know what I&apos;m missing?&lt;/p&gt;</comment>
                            <comment id="15176862" author="eclark" created="Thu, 3 Mar 2016 00:52:35 +0000"  >&lt;p&gt;Oh I was looking at the draft rather than the last version. I see that lots of stuff has been fixed.  Thanks.&lt;/p&gt;

&lt;p&gt;Ok i&apos;m officially -0.9999 this patch. Not minus one.&lt;/p&gt;</comment>
                            <comment id="15176938" author="enis" created="Thu, 3 Mar 2016 01:44:43 +0000"  >&lt;p&gt;I skimmed the patch looking around the changes, looks good. One minor nit is that instead of &lt;tt&gt;mvn install -Dskip-rsgroup=false&lt;/tt&gt; which is double negation, we can do &lt;tt&gt;mvn install -Drsgroup=true&lt;/tt&gt;. &lt;/p&gt;

&lt;p&gt;Let&apos;s get a hadoopqa run. After we address the reported issues, I&apos;ll do the commit. &lt;/p&gt;
</comment>
                            <comment id="15177075" author="toffer" created="Thu, 3 Mar 2016 03:09:38 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt;!&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; doesn&apos;t the activation property actually only tests for the presence of a propery and ignores the value:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://maven.apache.org/guides/introduction/introduction-to-profiles.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://maven.apache.org/guides/introduction/introduction-to-profiles.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;So in your case  &apos;mvn install -Drsgroup=false&apos; would still enable the rsgroup profile?&lt;/p&gt;</comment>
                            <comment id="15177078" author="toffer" created="Thu, 3 Mar 2016 03:11:19 +0000"  >&lt;p&gt;I forgot to rebase when I did rebase had a minor conflict. So I uploaded a rebased patch.&lt;/p&gt;</comment>
                            <comment id="15178386" author="enis" created="Thu, 3 Mar 2016 19:04:56 +0000"  >&lt;blockquote&gt;&lt;p&gt;So in your case &apos;mvn install -Drsgroup=false&apos; would still enable the rsgroup profile?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;If that is the case, it is still fine. If you don&apos;t want to activate, don&apos;t pass the property at all. Then how we can activate this with &lt;tt&gt;!skip-rsgroup&lt;/tt&gt; ? I mean how do you activate the profile with the current patch without specifying &lt;tt&gt;-P&lt;/tt&gt;? &lt;/p&gt;</comment>
                            <comment id="15178768" author="toffer" created="Thu, 3 Mar 2016 22:53:27 +0000"  >&lt;blockquote&gt;
&lt;p&gt;If that is the case, it is still fine. If you don&apos;t want to activate, don&apos;t pass the property at all. Then how we can activate this with !skip-rsgroup ? I mean how do you activate the profile with the current patch without specifying -P?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It is active by default. If you don&apos;t specify the skip-rsgroup property the rsgroup module will get built. &lt;/p&gt;

&lt;p&gt;ie&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;builds hbase-rsgoup&lt;br/&gt;
mvn install &lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;#does not build hbase-rsgroup&lt;br/&gt;
mvn install -Dskip-rsgoup &lt;/p&gt;

&lt;p&gt;It&apos;s basically the same idea as -DskipITs and -DskipTests.&lt;/p&gt;

&lt;p&gt;Of course you can explicitly specify it via the -P switch as well:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;builds hbase-rsgoup&lt;br/&gt;
mvn install -P rsgroup&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;#does not build hbase-rsgroup&lt;br/&gt;
mvn install -P !rsgroup&lt;/p&gt;

</comment>
                            <comment id="15178876" author="enis" created="Thu, 3 Mar 2016 23:54:02 +0000"  >&lt;blockquote&gt;&lt;p&gt;It is active by default. If you don&apos;t specify the skip-rsgroup property the rsgroup module will get built.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Ok, perfect. I did not see the &lt;tt&gt;&amp;lt;activeByDefault&amp;gt;true&amp;lt;/activeByDefault&amp;gt;&lt;/tt&gt; tag, so I was assuming the other way around. &lt;/p&gt;

&lt;p&gt;Not sure why the hadoopqa is not running for the latest patches.  &lt;/p&gt;</comment>
                            <comment id="15179067" author="toffer" created="Fri, 4 Mar 2016 01:00:52 +0000"  >&lt;p&gt;Looks like the build aborted because it timed out. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/816/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/816/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Can we try and rerun the build? I&apos;m going to try and run the tests on my local machine as well.&lt;/p&gt;</comment>
                            <comment id="15179092" author="enis" created="Fri, 4 Mar 2016 01:16:55 +0000"  >&lt;p&gt;Reattaching for hadoopqa. &lt;/p&gt;</comment>
                            <comment id="15179101" author="hadoopqa" created="Fri, 4 Mar 2016 01:22:10 +0000"  >&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;&lt;/b&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Vote &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Runtime &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Comment &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt;0&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt; patch &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt; 0m 2s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;blue&quot;&gt; The patch file was not named according to hbase&apos;s naming conventions. Please see &lt;a href=&quot;https://yetus.apache.org/documentation/latest/precommit-patchnames&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://yetus.apache.org/documentation/latest/precommit-patchnames&lt;/a&gt; for instructions. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; patch &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; 0m 6s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6721&quot; title=&quot;RegionServer Group based Assignment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6721&quot;&gt;&lt;del&gt;HBASE-6721&lt;/del&gt;&lt;/a&gt; does not apply to master. Rebase required? Wrong Branch? See &lt;a href=&quot;https://yetus.apache.org/documentation/latest/precommit-patchnames&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://yetus.apache.org/documentation/latest/precommit-patchnames&lt;/a&gt; for help. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Report/Notes &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Patch URL &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12791376/hbase-6721-v27.patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12791376/hbase-6721-v27.patch.txt&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Issue &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6721&quot; title=&quot;RegionServer Group based Assignment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6721&quot;&gt;&lt;del&gt;HBASE-6721&lt;/del&gt;&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Powered by &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Apache Yetus 0.1.0   &lt;a href=&quot;http://yetus.apache.org&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://yetus.apache.org&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Console output &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/826/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/826/console&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;This message was automatically generated.&lt;/p&gt;
</comment>
                            <comment id="15179214" author="hadoopqa" created="Fri, 4 Mar 2016 03:05:32 +0000"  >&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;&lt;/b&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Vote &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Runtime &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Comment &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; patch &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; 0m 4s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6721&quot; title=&quot;RegionServer Group based Assignment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6721&quot;&gt;&lt;del&gt;HBASE-6721&lt;/del&gt;&lt;/a&gt; does not apply to master. Rebase required? Wrong Branch? See &lt;a href=&quot;https://yetus.apache.org/documentation/latest/precommit-patchnames&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://yetus.apache.org/documentation/latest/precommit-patchnames&lt;/a&gt; for help. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Report/Notes &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Patch URL &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12791388/hbase-6721-v27.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12791388/hbase-6721-v27.patch&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Issue &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6721&quot; title=&quot;RegionServer Group based Assignment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6721&quot;&gt;&lt;del&gt;HBASE-6721&lt;/del&gt;&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Powered by &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Apache Yetus 0.1.0   &lt;a href=&quot;http://yetus.apache.org&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://yetus.apache.org&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Console output &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/828/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/828/console&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;This message was automatically generated.&lt;/p&gt;
</comment>
                            <comment id="15179293" author="enis" created="Fri, 4 Mar 2016 04:28:41 +0000"  >&lt;p&gt;rebase. &lt;/p&gt;</comment>
                            <comment id="15180170" author="toffer" created="Fri, 4 Mar 2016 17:13:39 +0000"  >&lt;p&gt;rebased patch.&lt;/p&gt;</comment>
                            <comment id="15182415" author="toffer" created="Mon, 7 Mar 2016 00:41:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; Looks like the build aborted again due to 500mins timeout:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/843/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/843/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;m wondering if it&apos;s really expected to finish in 500 mins? &lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Pre-unit tests (~160mins total elapsed)&lt;/li&gt;
	&lt;li&gt;jdk7 unit tests (410mins total elapsed)&lt;br/&gt;
-jdk8....&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The longest component unit test run by a large margin is hbase-server and hbase-component. I compared the run times to other successful pre-commit builds and hbase-server runtime seems to be pretty similar. Tho I&apos;m wondering why we are running hbase-server again when hbase-component has already been run? The redundancy seems to be what&apos;s making the build go over the time limit?&lt;/p&gt;
</comment>
                            <comment id="15184369" author="enis" created="Tue, 8 Mar 2016 04:16:43 +0000"  >&lt;blockquote&gt;&lt;p&gt;The longest component unit test run by a large margin is hbase-server and hbase-component&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I am not sure what is /component. Maybe &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=busbey&quot; class=&quot;user-hover&quot; rel=&quot;busbey&quot;&gt;Sean Busbey&lt;/a&gt; can comment on it. &lt;/p&gt;

&lt;p&gt;At the worst we can run the tests locally (I can do that sometime this week). I saw a couple of checkstyle / findbugs issues. Did you have a chance to look into those? &lt;/p&gt;</comment>
                            <comment id="15185244" author="busbey" created="Tue, 8 Mar 2016 17:02:02 +0000"  >&lt;p&gt;I don&apos;t see a test result for &quot;hbase-component&quot; in the yetus output. the hbase-server module is ridiculously slow and I see that we&apos;re running both at &quot;root&quot; (the top of the project) and other individual modules. That looks like a bug.&lt;/p&gt;

&lt;p&gt;Can someone rebase the patch so I can retry now that we&apos;ve update to Yetus 0.2.0?&lt;/p&gt;

&lt;p&gt;There&apos;s an open discussion on the &quot;Testing and CI&quot; dev@hbase thread about switching to only doing unit tests with jdk7, which would also help keep us under the 500 minute limit by avoiding 2x hbase-server runs.&lt;/p&gt;</comment>
                            <comment id="15185249" author="busbey" created="Tue, 8 Mar 2016 17:04:33 +0000"  >&lt;blockquote&gt;&lt;p&gt;Can someone rebase the patch so I can retry now that we&apos;ve update to Yetus 0.2.0?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;And now I see that it is already doing this. Ignore this part &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15185258" author="busbey" created="Tue, 8 Mar 2016 17:07:36 +0000"  >&lt;p&gt;I started &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/894&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;build #894&lt;/a&gt; with the flags to tell yetus not to re-run unit tests per jdk.&lt;/p&gt;</comment>
                            <comment id="15185347" author="toffer" created="Tue, 8 Mar 2016 17:48:33 +0000"  >&lt;blockquote&gt;
&lt;p&gt;I don&apos;t see a test result for &quot;hbase-component&quot; in the yetus output. the hbase-server module is ridiculously slow and I see that we&apos;re running both at &quot;root&quot; (the top of the project) and other individual modules. That looks like a bug.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Thanks for taking a look at this &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=busbey&quot; class=&quot;user-hover&quot; rel=&quot;busbey&quot;&gt;Sean Busbey&lt;/a&gt;.  Sorry I meant &quot;root&quot;, I mentioned component because the directory is called &quot;component&quot; which I realize now just makes things confusing. If this is a bug that&apos;d be in Yetus?&lt;/p&gt;
</comment>
                            <comment id="15185452" author="toffer" created="Tue, 8 Mar 2016 18:37:44 +0000"  >&lt;p&gt;Addressed findbugs and checkstyle comments.&lt;/p&gt;

&lt;p&gt;Findbugs warned about ServerName being serializable while HostAndPort is not. So I made HostAndPort transient and resolved lazily. Let me know if I should be addressing this in another way.&lt;/p&gt;</comment>
                            <comment id="15185457" author="busbey" created="Tue, 8 Mar 2016 18:39:43 +0000"  >&lt;blockquote&gt;&lt;p&gt;Thanks for taking a look at this Sean Busbey. Sorry I meant &quot;root&quot;, I mentioned component because the directory is called &quot;component&quot; which I realize now just makes things confusing. If this is a bug that&apos;d be in Yetus?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Ah. the directory is named component because of how I set up the jenkins job. That&apos;s just to distinguish it from &quot;test_framework&quot; in a way that I can copy/paste as I set up other projects.&lt;/p&gt;

&lt;p&gt;We&apos;re definitely running individual modules even after we&apos;ve determined we have to run at the top level of the project. That&apos;s &lt;b&gt;probably&lt;/b&gt; a bug in yetus, but I haven&apos;t confirmed yet that we don&apos;t do module reordering in &lt;a href=&quot;https://github.com/apache/hbase/blob/master/dev-support/hbase-personality.sh&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;our test personality&lt;/a&gt;. If we do, then the bug could be in our personality rather than yetus proper.&lt;/p&gt;</comment>
                            <comment id="15186272" author="toffer" created="Wed, 9 Mar 2016 01:31:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=busbey&quot; class=&quot;user-hover&quot; rel=&quot;busbey&quot;&gt;Sean Busbey&lt;/a&gt; looks like the build timed out again but this time because each module was run twice? &lt;/p&gt;</comment>
                            <comment id="15186288" author="busbey" created="Wed, 9 Mar 2016 01:41:26 +0000"  >&lt;p&gt;thanks for finding an edge case for yetus. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I&apos;ll spin up a clean build environment and see what yetus does there.&lt;/p&gt;</comment>
                            <comment id="15189666" author="toffer" created="Thu, 10 Mar 2016 18:19:36 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=busbey&quot; class=&quot;user-hover&quot; rel=&quot;busbey&quot;&gt;Sean Busbey&lt;/a&gt;, please share a link to the build once it&apos;s running.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; Even tho the last run timed out, there are no longer any new checkstyle or findbugs issues.&lt;/p&gt;</comment>
                            <comment id="15194526" author="enis" created="Tue, 15 Mar 2016 01:27:44 +0000"  >&lt;p&gt;Given the recent problems with hadoopqa, I&apos;ve checked the &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/896&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/896&lt;/a&gt; manually which is a timed-out build. The findbugs and checkstyle issues are addressed. I&apos;ve also run the unit tests on a node, and it passed except for 1 flaky test. &lt;/p&gt;

&lt;p&gt;I&apos;ll commit this shortly. &lt;/p&gt;</comment>
                            <comment id="15194541" author="enis" created="Tue, 15 Mar 2016 01:45:50 +0000"  >&lt;p&gt;Committed this to master. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=toffer&quot; class=&quot;user-hover&quot; rel=&quot;toffer&quot;&gt;Francis Liu&lt;/a&gt; and others. &lt;/p&gt;
</comment>
                            <comment id="15194543" author="enis" created="Tue, 15 Mar 2016 01:47:15 +0000"  >&lt;p&gt;Added a release note as well. Hopefully it is clear enough. &lt;/p&gt;</comment>
                            <comment id="15194917" author="hudson" created="Tue, 15 Mar 2016 08:23:26 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-Trunk_matrix #777 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-Trunk_matrix/777/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-Trunk_matrix/777/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6721&quot; title=&quot;RegionServer Group based Assignment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6721&quot;&gt;&lt;del&gt;HBASE-6721&lt;/del&gt;&lt;/a&gt; RegionServer Group based Assignment (Francis Liu) (enis: rev ca816f0780f6e5a117b85810cf35f3b29c964ddc)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/shell/commands/get_table_rsgroup.rb&lt;/li&gt;
	&lt;li&gt;hbase-rsgroup/src/test/java/org/apache/hadoop/hbase/master/balancer/TestRSGroupBasedLoadBalancer.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/pom.xml&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/coprocessor/BaseMasterAndRegionObserver.java&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/hbase/rsgroup_admin.rb&lt;/li&gt;
	&lt;li&gt;hbase-it/pom.xml&lt;/li&gt;
	&lt;li&gt;hbase-rsgroup/pom.xml&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/shell/commands/balance_rsgroup.rb&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/shell/commands/move_rsgroup_servers.rb&lt;/li&gt;
	&lt;li&gt;hbase-rsgroup/src/main/java/org/apache/hadoop/hbase/rsgroup/RSGroupInfoManager.java&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/shell/commands/get_server_rsgroup.rb&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/LoadBalancer.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-it/src/test/java/org/apache/hadoop/hbase/rsgroup/IntegrationTestRSGroup.java&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/shell/commands/list_rsgroups.rb&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/shell/commands/get_rsgroup.rb&lt;/li&gt;
	&lt;li&gt;hbase-rsgroup/src/test/java/org/apache/hadoop/hbase/rsgroup/VerifyingRSGroupAdminClient.java&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/test/rsgroup/org/apache/hadoop/hbase/client/rsgroup/TestShellRSGroups.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/coprocessor/TestMasterObserver.java&lt;/li&gt;
	&lt;li&gt;hbase-rsgroup/src/main/java/org/apache/hadoop/hbase/rsgroup/RSGroupAdminServer.java&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/test/java/org/apache/hadoop/hbase/client/TestShell.java&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/shell/commands/add_rsgroup.rb&lt;/li&gt;
	&lt;li&gt;hbase-rsgroup/src/main/java/org/apache/hadoop/hbase/rsgroup/RSGroupableBalancer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/MasterCoprocessorHost.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/security/access/TestAccessController.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/normalizer/TestSimpleRegionNormalizer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestMasterStatusServlet.java&lt;/li&gt;
	&lt;li&gt;hbase-rsgroup/src/test/java/org/apache/hadoop/hbase/rsgroup/TestRSGroups.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/protobuf/RSGroupAdmin.proto&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/MasterServices.java&lt;/li&gt;
	&lt;li&gt;hbase-rsgroup/src/main/java/org/apache/hadoop/hbase/rsgroup/RSGroupAdminEndpoint.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/rsgroup/RSGroupInfo.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/security/access/AccessController.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/protobuf/RSGroup.proto&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/hbase.rb&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/RSGroupAdminProtos.java&lt;/li&gt;
	&lt;li&gt;hbase-rsgroup/src/main/java/org/apache/hadoop/hbase/rsgroup/RSGroupBasedLoadBalancer.java&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/test/ruby/test_helper.rb&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/RSGroupProtos.java&lt;/li&gt;
	&lt;li&gt;hbase-shell/pom.xml&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/test/ruby/shell/rsgroup_shell_test.rb&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/shell/commands/move_rsgroup_tables.rb&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/coprocessor/MasterObserver.java&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/hbase/hbase.rb&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/shell/commands/remove_rsgroup.rb&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/MasterRpcServices.java&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/shell.rb&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/coprocessor/BaseMasterObserver.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestAssignmentManagerOnCluster.java&lt;/li&gt;
	&lt;li&gt;hbase-rsgroup/src/main/java/org/apache/hadoop/hbase/rsgroup/RSGroupSerDe.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestCatalogJanitor.java&lt;/li&gt;
	&lt;li&gt;pom.xml&lt;/li&gt;
	&lt;li&gt;hbase-rsgroup/src/test/java/org/apache/hadoop/hbase/rsgroup/TestRSGroupsBase.java&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/shell/commands.rb&lt;/li&gt;
	&lt;li&gt;hbase-rsgroup/src/main/java/org/apache/hadoop/hbase/rsgroup/RSGroupInfoManagerImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-rsgroup/src/main/java/org/apache/hadoop/hbase/rsgroup/RSGroupAdminClient.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/jamon/org/apache/hadoop/hbase/tmpl/master/MasterStatusTmpl.jamon&lt;/li&gt;
	&lt;li&gt;hbase-rsgroup/src/main/java/org/apache/hadoop/hbase/rsgroup/RSGroupAdmin.java&lt;/li&gt;
	&lt;li&gt;hbase-rsgroup/src/test/java/org/apache/hadoop/hbase/rsgroup/TestRSGroupsOfflineMode.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/ServerName.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15195877" author="toffer" created="Tue, 15 Mar 2016 18:26:52 +0000"  >&lt;p&gt;Awesome! Thanks a lot &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt;! Thanks a lot to all the reviewers and commenters!&lt;/p&gt;

&lt;p&gt;BTW given this is pluggable any chance we can backport this to 1.x and 0.98 as an experimental feature? I&apos;d like to start using this version internally.&lt;/p&gt;</comment>
                            <comment id="15195954" author="busbey" created="Tue, 15 Mar 2016 18:50:43 +0000"  >&lt;p&gt;please move remaining open sub tasks to top-level tasks.&lt;/p&gt;

&lt;p&gt;If this is going to go back earlier than 2.0, I would like a &lt;span class=&quot;error&quot;&gt;&amp;#91;DISCUSS&amp;#93;&lt;/span&gt; thread on what folks want to use as a gating threshold.&lt;/p&gt;</comment>
                            <comment id="15196187" author="toffer" created="Tue, 15 Mar 2016 20:31:56 +0000"  >&lt;blockquote&gt;
&lt;p&gt;please move remaining open sub tasks to top-level tasks.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Will do. &lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;If this is going to go back earlier than 2.0, I would like a &lt;span class=&quot;error&quot;&gt;&amp;#91;DISCUSS&amp;#93;&lt;/span&gt; thread on what folks want to use as a gating threshold.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I can start the thread. Is the discussion about region server groups specifically or about a more general gating threshold?&lt;/p&gt;</comment>
                            <comment id="15196320" author="busbey" created="Tue, 15 Mar 2016 21:44:40 +0000"  >&lt;blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;If this is going to go back earlier than 2.0, I would like a [DISCUSS] thread on what folks want to use as a gating threshold.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I can start the thread. Is the discussion about region server groups specifically or about a more general gating threshold?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;In the past we&apos;ve only done such threads for specific issues. I&apos;d love to have a generally agreed upon set of gates for new features, but I&apos;m not sure we&apos;ll reach a conclusion in a timely manner. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I&apos;d say either of the two you&apos;d prefer to start is good.&lt;/p&gt;</comment>
                            <comment id="15196330" author="apurtell" created="Tue, 15 Mar 2016 21:50:00 +0000"  >&lt;p&gt;As where I was on the MOB backport, I think it would be good to have evidence from functional, stability, and performance tests (the basics: PE, LTT, YCSB, ITs) that the feature does not impact folks who don&apos;t want it. The way group based assignment is implemented suggests we will get a good result. &lt;/p&gt;</comment>
                            <comment id="15196335" author="apurtell" created="Tue, 15 Mar 2016 21:50:59 +0000"  >&lt;p&gt;BTW, if there were a backport to branch-1 we&apos;d probably try it. (Or if there were not a backport at the time, I might do it.)&lt;/p&gt;</comment>
                            <comment id="15197742" author="toffer" created="Wed, 16 Mar 2016 17:30:20 +0000"  >&lt;blockquote&gt;
&lt;p&gt;I&apos;d say either of the two you&apos;d prefer to start is good.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=busbey&quot; class=&quot;user-hover&quot; rel=&quot;busbey&quot;&gt;Sean Busbey&lt;/a&gt;, I started the discuss thread. Also, I&apos;ve moved the jiras. &lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;BTW, if there were a backport to branch-1 we&apos;d probably try it. (Or if there were not a backport at the time, I might do it.)&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Thanks! BTW I think &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; might already have a backport as he created one before. &lt;/p&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12613244">HBASE-7043</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12613240">HBASE-7042</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12514862">HBASE-4120</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12572461" name="6721-master-webUI.patch" size="3356" author="zjushch" created="Thu, 7 Mar 2013 01:59:06 +0000"/>
                            <attachment id="12749376" name="HBASE-6721 GroupBasedLoadBalancer Sequence Diagram.xml" size="27225" author="gwu91" created="Fri, 7 Aug 2015 23:57:59 +0000"/>
                            <attachment id="12580769" name="HBASE-6721-DesigDoc.pdf" size="93466" author="toffer" created="Fri, 26 Apr 2013 22:39:16 +0000"/>
                            <attachment id="12571504" name="HBASE-6721-DesigDoc.pdf" size="91119" author="toffer" created="Fri, 1 Mar 2013 00:10:21 +0000"/>
                            <attachment id="12571501" name="HBASE-6721-DesigDoc.pdf" size="88477" author="toffer" created="Fri, 1 Mar 2013 00:02:21 +0000"/>
                            <attachment id="12543877" name="HBASE-6721-DesigDoc.pdf" size="174954" author="avandana" created="Wed, 5 Sep 2012 17:42:43 +0000"/>
                            <attachment id="12750586" name="HBASE-6721_0.98_2.patch" size="897015" author="ndimiduk" created="Fri, 14 Aug 2015 19:45:38 +0000"/>
                            <attachment id="12581000" name="HBASE-6721_10.patch" size="799273" author="toffer" created="Mon, 29 Apr 2013 18:01:25 +0000"/>
                            <attachment id="12747704" name="HBASE-6721_11.patch" size="965057" author="toffer" created="Wed, 29 Jul 2015 03:19:14 +0000"/>
                            <attachment id="12753020" name="HBASE-6721_12.patch" size="898166" author="toffer" created="Fri, 28 Aug 2015 16:09:14 +0000"/>
                            <attachment id="12754964" name="HBASE-6721_13.patch" size="846172" author="toffer" created="Wed, 9 Sep 2015 17:50:20 +0000"/>
                            <attachment id="12756192" name="HBASE-6721_14.patch" size="831944" author="toffer" created="Wed, 16 Sep 2015 08:13:36 +0000"/>
                            <attachment id="12764454" name="HBASE-6721_15.patch" size="858027" author="toffer" created="Wed, 30 Sep 2015 18:27:05 +0000"/>
                            <attachment id="12580760" name="HBASE-6721_8.patch" size="796168" author="toffer" created="Fri, 26 Apr 2013 22:01:49 +0000"/>
                            <attachment id="12580943" name="HBASE-6721_9.patch" size="798060" author="toffer" created="Mon, 29 Apr 2013 07:11:02 +0000"/>
                            <attachment id="12580775" name="HBASE-6721_9.patch" size="793746" author="toffer" created="Fri, 26 Apr 2013 22:58:31 +0000"/>
                            <attachment id="12550601" name="HBASE-6721_94.patch" size="166361" author="toffer" created="Wed, 24 Oct 2012 08:00:41 +0000"/>
                            <attachment id="12550599" name="HBASE-6721_94.patch" size="119793" author="toffer" created="Wed, 24 Oct 2012 07:43:01 +0000"/>
                            <attachment id="12552073" name="HBASE-6721_94_2.patch" size="153361" author="toffer" created="Mon, 5 Nov 2012 08:36:44 +0000"/>
                            <attachment id="12552520" name="HBASE-6721_94_3.patch" size="134609" author="toffer" created="Wed, 7 Nov 2012 19:19:15 +0000"/>
                            <attachment id="12552446" name="HBASE-6721_94_3.patch" size="360803" author="toffer" created="Wed, 7 Nov 2012 09:21:26 +0000"/>
                            <attachment id="12559770" name="HBASE-6721_94_4.patch" size="184519" author="toffer" created="Thu, 6 Dec 2012 23:57:03 +0000"/>
                            <attachment id="12559999" name="HBASE-6721_94_5.patch" size="188521" author="toffer" created="Sat, 8 Dec 2012 01:20:39 +0000"/>
                            <attachment id="12567985" name="HBASE-6721_94_6.patch" size="201214" author="toffer" created="Tue, 5 Feb 2013 10:00:25 +0000"/>
                            <attachment id="12568784" name="HBASE-6721_94_7.patch" size="205772" author="toffer" created="Mon, 11 Feb 2013 02:49:31 +0000"/>
                            <attachment id="12750267" name="HBASE-6721_98_1.patch" size="963406" author="toffer" created="Thu, 13 Aug 2015 10:35:30 +0000"/>
                            <attachment id="12750554" name="HBASE-6721_98_2.patch" size="897015" author="toffer" created="Fri, 14 Aug 2015 16:48:13 +0000"/>
                            <attachment id="12752029" name="HBASE-6721_hbase-6721_addendum.patch" size="165102" author="toffer" created="Mon, 24 Aug 2015 16:45:33 +0000"/>
                            <attachment id="12571470" name="HBASE-6721_trunk.patch" size="789933" author="toffer" created="Thu, 28 Feb 2013 21:23:26 +0000"/>
                            <attachment id="12571466" name="HBASE-6721_trunk.patch" size="229930" author="toffer" created="Thu, 28 Feb 2013 20:51:27 +0000"/>
                            <attachment id="12571448" name="HBASE-6721_trunk.patch" size="229930" author="toffer" created="Thu, 28 Feb 2013 18:56:34 +0000"/>
                            <attachment id="12679818" name="HBASE-6721_trunk1.patch" size="839221" author="toffer" created="Thu, 6 Nov 2014 09:32:22 +0000"/>
                            <attachment id="12679918" name="HBASE-6721_trunk2.patch" size="839386" author="toffer" created="Thu, 6 Nov 2014 19:21:49 +0000"/>
                            <attachment id="12749375" name="balanceCluster Sequence Diagram.svg" size="83012" author="gwu91" created="Fri, 7 Aug 2015 23:57:59 +0000"/>
                            <attachment id="12768882" name="hbase-6721-v15-branch-1.1.patch" size="868603" author="enis" created="Tue, 27 Oct 2015 03:14:49 +0000"/>
                            <attachment id="12769912" name="hbase-6721-v16.patch" size="860131" author="enis" created="Sat, 31 Oct 2015 02:02:09 +0000"/>
                            <attachment id="12770514" name="hbase-6721-v17.patch" size="861401" author="enis" created="Wed, 4 Nov 2015 04:25:17 +0000"/>
                            <attachment id="12773431" name="hbase-6721-v18.patch" size="876156" author="toffer" created="Fri, 20 Nov 2015 02:59:00 +0000"/>
                            <attachment id="12776745" name="hbase-6721-v19.patch" size="877321" author="toffer" created="Thu, 10 Dec 2015 07:24:07 +0000"/>
                            <attachment id="12777930" name="hbase-6721-v20.patch" size="879142" author="toffer" created="Wed, 16 Dec 2015 05:50:57 +0000"/>
                            <attachment id="12778218" name="hbase-6721-v21.patch" size="881106" author="toffer" created="Thu, 17 Dec 2015 08:59:55 +0000"/>
                            <attachment id="12778306" name="hbase-6721-v22.patch" size="881606" author="toffer" created="Thu, 17 Dec 2015 19:05:33 +0000"/>
                            <attachment id="12778573" name="hbase-6721-v23.patch" size="883290" author="toffer" created="Fri, 18 Dec 2015 20:24:41 +0000"/>
                            <attachment id="12778630" name="hbase-6721-v25.patch" size="883300" author="toffer" created="Fri, 18 Dec 2015 23:51:58 +0000"/>
                            <attachment id="12791068" name="hbase-6721-v26.patch" size="873233" author="toffer" created="Thu, 3 Mar 2016 00:27:37 +0000"/>
                            <attachment id="12789833" name="hbase-6721-v26_draft1.patch" size="874001" author="toffer" created="Thu, 25 Feb 2016 01:33:27 +0000"/>
                            <attachment id="12791388" name="hbase-6721-v27.patch" size="873221" author="enis" created="Fri, 4 Mar 2016 02:27:45 +0000"/>
                            <attachment id="12791087" name="hbase-6721-v27.patch" size="873221" author="toffer" created="Thu, 3 Mar 2016 03:07:29 +0000"/>
                            <attachment id="12791376" name="hbase-6721-v27.patch.txt" size="873221" author="enis" created="Fri, 4 Mar 2016 01:16:55 +0000"/>
                            <attachment id="12791497" name="hbase-6721-v28.patch" size="872785" author="toffer" created="Fri, 4 Mar 2016 17:13:39 +0000"/>
                            <attachment id="12791397" name="hbase-6721-v28.patch" size="872355" author="enis" created="Fri, 4 Mar 2016 04:28:41 +0000"/>
                            <attachment id="12792055" name="hbase-6721-v29.patch" size="872583" author="toffer" created="Tue, 8 Mar 2016 18:37:44 +0000"/>
                            <attachment id="12749377" name="immediateAssignments Sequence Diagram.svg" size="95994" author="gwu91" created="Fri, 7 Aug 2015 23:57:59 +0000"/>
                            <attachment id="12749378" name="randomAssignment Sequence Diagram.svg" size="92462" author="gwu91" created="Fri, 7 Aug 2015 23:57:59 +0000"/>
                            <attachment id="12749379" name="retainAssignment Sequence Diagram.svg" size="153553" author="gwu91" created="Fri, 7 Aug 2015 23:57:59 +0000"/>
                            <attachment id="12749380" name="roundRobinAssignment Sequence Diagram.svg" size="97791" author="gwu91" created="Fri, 7 Aug 2015 23:57:59 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12606311">HBASE-6723</subtask>
                            <subtask id="12608195">HBASE-6837</subtask>
                            <subtask id="12613240">HBASE-7042</subtask>
                            <subtask id="12613244">HBASE-7043</subtask>
                            <subtask id="12663143">HBASE-9191</subtask>
                            <subtask id="12664399">HBASE-9263</subtask>
                            <subtask id="12856373">HBASE-14226</subtask>
                            <subtask id="12856701">HBASE-14232</subtask>
                            <subtask id="12858798">HBASE-14312</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>56.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 5 Sep 2012 17:42:43 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>242522</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            39 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02vfr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14694</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>[ADVANCED USERS ONLY] This patch adds a new experimental module hbase-rsgroup. It is an advanced feature for partitioning regionservers into distinctive groups for strict isolation, and should only be used by users who are sophisticated enough to understand the full implications and have a sufficient background in managing HBase clusters. &lt;br/&gt;
&lt;br/&gt;
RSGroups can be defined and managed with shell commands or corresponding Java APIs. A server can be added to a group with hostname and port pair, and tables can be moved to this group so that only regionservers in the same rsgroup can host the regions of the table. RegionServers and tables can only belong to 1 group at a time. By default, all tables and regionservers belong to the &amp;quot;default&amp;quot; group. System tables can also be put into a group using the regular APIs. A custom balancer implementation tracks assignments per rsgroup and makes sure to move regions to the relevant regionservers in that group. The group information is stored in a regular HBase table, and a zookeeper-based read-only cache is used at the cluster bootstrap time. </customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>