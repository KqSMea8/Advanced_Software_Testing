<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:59:00 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-2104/HBASE-2104.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-2104] No exception thrown while during scanning no connection can be made to the regionserver</title>
                <link>https://issues.apache.org/jira/browse/HBASE-2104</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;When a regionservers is stopped (shutdown or crash) and on the same moment a client performs a scan on that regionserver no exception is thrown at client side nor a reconnect toanother regionsserver is tried.&lt;br/&gt;
The ResultScanner.Iterator.hasNext ()just returns false, so the client assumes that there are no records anymore.&lt;/p&gt;


&lt;p&gt;In the ScannerCallable.call I notice that the java.net.ConnectionException is catched and a empyt Result array is returned.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12445191">HBASE-2104</key>
            <summary>No exception thrown while during scanning no connection can be made to the regionserver</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="robert.hofstra">Robert Hofstra</reporter>
                        <labels>
                    </labels>
                <created>Mon, 11 Jan 2010 15:52:11 +0000</created>
                <updated>Wed, 16 Jul 2014 18:56:20 +0000</updated>
                            <resolved>Wed, 16 Jul 2014 18:56:20 +0000</resolved>
                                    <version>0.20.1</version>
                                                    <component>Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12800706" author="robert.hofstra" created="Fri, 15 Jan 2010 14:09:40 +0000"  >&lt;p&gt;In our case, we building a lucune search index with a hadoop from entries in hbase &lt;br/&gt;
When a regionserver is stopped (because it&apos;s having problems) this index is smaller, because not all entries are included. &lt;/p&gt;

&lt;p&gt;What I expected, is a failed task in hadoop. Which result in a a new attempt to process the task, which could succeed, when another regionserver is serving the region.&lt;/p&gt;</comment>
                            <comment id="12800815" author="stack" created="Fri, 15 Jan 2010 18:23:36 +0000"  >&lt;p&gt;@Robert Is part of the issue the fact that Iterator is being used?  Its hasNext and next methods do not throw Exceptions?  If you used the next methods that do throw exceptions, would that work?  Or rather, ScannerCallable should let out certain types of exceptions?  Any chance of a patch?  One that works for you?  That&apos;d help us out.  Thanks.&lt;/p&gt;</comment>
                            <comment id="12800859" author="robert.hofstra" created="Fri, 15 Jan 2010 19:29:32 +0000"  >&lt;p&gt;Yes, I use an iterator, I made an integration test using the  a MiniHBaseCluster, which contains some specific business logic, so I skip some details&lt;/p&gt;

&lt;p&gt;... insert values, no do a scan on it&lt;br/&gt;
ResultScanner scanner = table.getScanner(galleryTableScan);&lt;br/&gt;
// stop all region servers&lt;br/&gt;
FullMiniCluster.getMiniHBaseCluster().stopRegionServer(1);&lt;br/&gt;
FullMiniCluster.getMiniHBaseCluster().stopRegionServer(0);&lt;/p&gt;

&lt;p&gt;try {&lt;br/&gt;
            for (Result result : scanner) &lt;/p&gt;
{
               result.getValue( ...
            }
&lt;p&gt;            Assert.fail(&quot;Expected an exception&quot;);&lt;br/&gt;
 } catch (Exception ex) {&lt;/p&gt;

&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;This test fails, I&apos;am going to add a test to this issue without the specific  business logic.&lt;/p&gt;


&lt;p&gt;I&apos;ve patch yesterday the code of the ScannerCallable, that  rethrows the exception if its not handled by the other exception handling code, it works for all our integrationtests but I don&apos;t  know if its generic enough for a serious patch.&lt;/p&gt;







</comment>
                            <comment id="12800902" author="larsgeorge" created="Fri, 15 Jan 2010 20:46:48 +0000"  >&lt;p&gt;Robert, see &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2013&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-2013&lt;/a&gt; I have a unit test there that I think simulates your scenario. It creates a case where during a MR job a RegionServer is killed. You have a 50/50 chance that the regions are not redeployed before the job passes the missing region.&lt;/p&gt;

&lt;p&gt;That is sort of a race condition and partially a design feature. But I have I guess similar concerns where I need to be able to rely on the MR to get all rows. I better have the job fail then silently skip rows.&lt;/p&gt;</comment>
                            <comment id="12801473" author="robert.hofstra" created="Sun, 17 Jan 2010 18:50:20 +0000"  >&lt;p&gt;Lars, can you explain me the design feature you mention?&lt;/p&gt;</comment>
                            <comment id="14063911" author="stack" created="Wed, 16 Jul 2014 18:56:20 +0000"  >&lt;p&gt;Stale&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 15 Jan 2010 18:23:36 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26146</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 22 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02bh3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11460</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>