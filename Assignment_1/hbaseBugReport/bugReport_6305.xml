<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:35:35 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6305/HBASE-6305.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6305] TestLocalHBaseCluster hangs with hadoop 2.0/0.23 builds.</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6305</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;trunk: mvn clean test -Dhadoop.profile=2.0 -Dtest=TestLocalHBaseCluster&lt;/p&gt;

&lt;p&gt;0.94: mvn clean test -Dhadoop.profile=23 -Dtest=TestLocalHBaseCluster&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
testLocalHBaseCluster(org.apache.hadoop.hbase.TestLocalHBaseCluster)  Time elapsed: 0.022 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
java.lang.RuntimeException: Master not initialized after 200 seconds
        at org.apache.hadoop.hbase.util.JVMClusterUtil.startup(JVMClusterUtil.java:208)
        at org.apache.hadoop.hbase.LocalHBaseCluster.startup(LocalHBaseCluster.java:424)
        at org.apache.hadoop.hbase.TestLocalHBaseCluster.testLocalHBaseCluster(TestLocalHBaseCluster.java:66)
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12596831">HBASE-6305</key>
            <summary>TestLocalHBaseCluster hangs with hadoop 2.0/0.23 builds.</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12609485">HBASE-6891</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="v.himanshu">Himanshu Vashishtha</assignee>
                                    <reporter username="jmhsieh">Jonathan Hsieh</reporter>
                        <labels>
                    </labels>
                <created>Mon, 2 Jul 2012 22:15:16 +0000</created>
                <updated>Mon, 3 Dec 2012 21:47:34 +0000</updated>
                            <resolved>Sat, 3 Nov 2012 06:23:16 +0000</resolved>
                                    <version>0.92.2</version>
                    <version>0.94.1</version>
                                    <fixVersion>0.94.3</fixVersion>
                                    <component>test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                <comments>
                            <comment id="13405496" author="jmhsieh" created="Tue, 3 Jul 2012 02:24:13 +0000"  >&lt;p&gt;RS fails to start due to a stack overflow in HDFS code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ABORTING region server localhost,51694,1341281069711: Unhandled exception: Region server startup failed
Cause:
java.io.IOException: Region server startup failed
	at org.apache.hadoop.hbase.regionserver.HRegionServer.convertThrowableToIOE(HRegionServer.java:1134)
	at org.apache.hadoop.hbase.regionserver.HRegionServer.handleReportForDutyResponse(HRegionServer.java:990)
	at org.apache.hadoop.hbase.regionserver.HRegionServer.run(HRegionServer.java:672)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:662)
Caused by: java.lang.StackOverflowError
	at java.util.HashMap.getEntry(HashMap.java:344)
	at java.util.HashMap.containsKey(HashMap.java:335)
	at org.apache.hadoop.conf.Configuration.isDeprecated(Configuration.java:307)
	at org.apache.hadoop.conf.Configuration.handleDeprecation(Configuration.java:323)
	at org.apache.hadoop.conf.Configuration.get(Configuration.java:688)
	at org.apache.hadoop.fs.FileSystem.getDefaultUri(FileSystem.java:159)
	at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:151)
	at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:268)
	at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:151)
... hilarity ensues ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13405513" author="jmhsieh" created="Tue, 3 Jul 2012 03:11:12 +0000"  >&lt;p&gt;Previous post was for 0.94&lt;/p&gt;

&lt;p&gt;for trunk, RS fails for a different reason:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2012-07-02 19:51:34,817 FATAL [Master:0;localhost,57965,1341283894193] master.HMaster(1763): Unhandled exception. Starting shutdown.
java.io.FileNotFoundException: File file:/tmp/hbase-jon/hbase/hbase.version does not exist
        at org.apache.hadoop.fs.RawLocalFileSystem.listStatus(RawLocalFileSystem.java:315)
        at org.apache.hadoop.fs.FileSystem.listStatus(FileSystem.java:1279)
        at org.apache.hadoop.fs.FileSystem.listStatus(FileSystem.java:1319)
        at org.apache.hadoop.fs.ChecksumFileSystem.listStatus(ChecksumFileSystem.java:557)
        at org.apache.hadoop.hbase.util.FSUtils.getVersion(FSUtils.java:270)
        at org.apache.hadoop.hbase.util.FSUtils.checkVersion(FSUtils.java:363)
        at org.apache.hadoop.hbase.master.MasterFileSystem.checkRootDir(MasterFileSystem.java:349)
        at org.apache.hadoop.hbase.master.MasterFileSystem.createInitialFileSystemLayout(MasterFileSystem.java:131)
        at org.apache.hadoop.hbase.master.MasterFileSystem.&amp;lt;init&amp;gt;(MasterFileSystem.java:116)
        at org.apache.hadoop.hbase.master.HMaster.finishInitialization(HMaster.java:589)
        at org.apache.hadoop.hbase.master.HMaster.run(HMaster.java:411)
        at org.apache.hadoop.hbase.TestLocalHBaseCluster$MyHMaster.run(TestLocalHBaseCluster.java:99)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:662)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13405615" author="ram_krish" created="Tue, 3 Jul 2012 04:37:34 +0000"  >&lt;p&gt;@Jon&lt;br/&gt;
We got this problem in  0.94 while running with hadoop 2.0&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6126&quot; title=&quot;Fix broke TestLocalHBaseCluster in 0.92/0.94&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6126&quot;&gt;&lt;del&gt;HBASE-6126&lt;/del&gt;&lt;/a&gt; added this line&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
conf.set(HConstants.HBASE_DIR, TEST_UTIL.getDataTestDir(&lt;span class=&quot;code-quote&quot;&gt;&quot;hbase.rootdir&quot;&lt;/span&gt;).toString());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;After again reverting this line i did not get the stack overflow errror.  But am not sure how this is related as i did not dig into it much.&lt;/p&gt;</comment>
                            <comment id="13405914" author="jmhsieh" created="Tue, 3 Jul 2012 13:26:00 +0000"  >&lt;p&gt;Definitely has something to do with the attempt to auto set fs.defaultFS.  For 0.94, I got it passing by removing these lines (note that fs.defaultFS == hbase.rootdir doesn&apos;t really make sense I believe):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
diff --git a/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java b/hbase-server/src/main/java/org/apache/hadoop/hbase/
index bad1d12..c0036c4 100644
--- a/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java
+++ b/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java
@@ -1071,12 +1071,6 @@ &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; class  HRegionServer &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; ClientProtocol,
       &lt;span class=&quot;code-comment&quot;&gt;// Save it in a file, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; will allow to see &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; we crash
&lt;/span&gt;       ZNodeClearer.writeMyEphemeralNodeOnDisk(getMyEphemeralNodePath());
 
-      &lt;span class=&quot;code-comment&quot;&gt;// Master sent us hbase.rootdir to use. Should be fully qualified
&lt;/span&gt;-      &lt;span class=&quot;code-comment&quot;&gt;// path with file system specification included. Set &apos;fs.defaultFS&apos;
&lt;/span&gt;-      &lt;span class=&quot;code-comment&quot;&gt;// to match the filesystem on hbase.rootdir &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; underlying hadoop hdfs
&lt;/span&gt;-      &lt;span class=&quot;code-comment&quot;&gt;// accessors will be going against wrong filesystem (unless all is set
&lt;/span&gt;-      &lt;span class=&quot;code-comment&quot;&gt;// to defaults).
&lt;/span&gt;-      &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.conf.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;fs.defaultFS&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.conf.get(&lt;span class=&quot;code-quote&quot;&gt;&quot;hbase.rootdir&quot;&lt;/span&gt;));
       &lt;span class=&quot;code-comment&quot;&gt;// Get fs instance used by &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; RS
&lt;/span&gt;       &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.fs = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HFileSystem(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.conf, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.useHBaseChecksum);
       &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.rootDir = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Path(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.conf.get(HConstants.HBASE_DIR));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Unfortunately, this doesn&apos;t fix trunk &amp;#8211; it&apos;s error looks directly related to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6306&quot; title=&quot;TestFSUtils fails against hadoop 2.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6306&quot;&gt;&lt;del&gt;HBASE-6306&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13406129" author="jmhsieh" created="Tue, 3 Jul 2012 22:37:02 +0000"  >&lt;p&gt;Attached as patch for 0.94.&lt;/p&gt;</comment>
                            <comment id="13406148" author="jmhsieh" created="Tue, 3 Jul 2012 23:00:52 +0000"  >&lt;p&gt;Just checked 0.92, problem exists there too, and the same fix seems to fix it.&lt;/p&gt;</comment>
                            <comment id="13406228" author="jmhsieh" created="Wed, 4 Jul 2012 01:30:31 +0000"  >&lt;p&gt;Trunk part of this problem was fixed via &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6506&quot; title=&quot;Setting CACHE_BLOCKS to false in an hbase shell scan doesn&amp;#39;t work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6506&quot;&gt;&lt;del&gt;HBASE-6506&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13406771" author="hadoopqa" created="Wed, 4 Jul 2012 22:22:19 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12534998/hbase-6305-94.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12534998/hbase-6305-94.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2321//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2321//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13408797" author="lhofhansl" created="Sat, 7 Jul 2012 22:33:12 +0000"  >&lt;p&gt;Discussed offline with Jon. Let&apos;s make this critical for 0.94.2.&lt;/p&gt;</comment>
                            <comment id="13442817" author="lhofhansl" created="Mon, 27 Aug 2012 23:55:46 +0000"  >&lt;p&gt;Pushing into the 0.94.3 train&lt;/p&gt;</comment>
                            <comment id="13475931" author="lhofhansl" created="Mon, 15 Oct 2012 01:08:34 +0000"  >&lt;p&gt;Since these are &quot;just&quot; tests and there is no movement, lowering to &quot;Major&quot;&lt;/p&gt;</comment>
                            <comment id="13482051" author="v.himanshu" created="Tue, 23 Oct 2012 02:19:41 +0000"  >&lt;p&gt;The issue is we set hbase.rootdir to &quot;/home/XXXX/hbase/target/test-data/23a0e003-29c2-42cb-8fe9-4fe601834521/hbase.rootdir&quot; in TestLocalHBaseCluster.java. Then in HRS (as suggested by the above patch), we set this value to fs.defaultFS too.&lt;br/&gt;
When doing a FileSystem.get(conf) in the subsequent codepath, it gets stuck in an infinite recursion call in FileSystem.java where both the URI.getScheme() and URI.getAuthority() is null. &lt;br/&gt;
It passes in hadoop1 as scheme is still &quot;file&quot;.&lt;/p&gt;

&lt;p&gt;Attached patch fixes this test for both hadoop1 and hadoop 2.&lt;/p&gt;</comment>
                            <comment id="13482071" author="yuzhihong@gmail.com" created="Tue, 23 Oct 2012 02:48:26 +0000"  >&lt;p&gt;Nice finding.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (scheme == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) 
+      scheme = &lt;span class=&quot;code-quote&quot;&gt;&quot;file&quot;&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above should be in one line.&lt;/p&gt;</comment>
                            <comment id="13482189" author="hadoopqa" created="Tue, 23 Oct 2012 08:12:26 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12550400/HBASE-6305-v1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12550400/HBASE-6305-v1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3122//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3122//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13482586" author="v.himanshu" created="Tue, 23 Oct 2012 19:12:45 +0000"  >&lt;p&gt;94 patch attached, with Ted&apos;s changes.&lt;/p&gt;</comment>
                            <comment id="13482597" author="yuzhihong@gmail.com" created="Tue, 23 Oct 2012 19:21:26 +0000"  >&lt;p&gt;@Himanshu:&lt;br/&gt;
Previous trunk patch didn&apos;t apply. Mind uploading a new one ?&lt;/p&gt;</comment>
                            <comment id="13482605" author="hadoopqa" created="Tue, 23 Oct 2012 19:29:52 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12550516/HBASE-6305-94-v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12550516/HBASE-6305-94-v2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3129//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3129//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13482617" author="v.himanshu" created="Tue, 23 Oct 2012 19:49:04 +0000"  >&lt;p&gt;The previous one was also for 94. Haven&apos;t looked at trunk yet.&lt;/p&gt;</comment>
                            <comment id="13482627" author="v.himanshu" created="Tue, 23 Oct 2012 20:06:51 +0000"  >&lt;p&gt;Trunk passes for me, without any change:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
mvn clean install -Dhadoop.profile=2.0 -P localTests -Dtest=TestImportExport

....
-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running org.apache.hadoop.hbase.mapreduce.TestImportExport

Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 99.997 sec

Results :

Tests run: 3, Failures: 0, Errors: 0, Skipped: 0

[INFO] 
[INFO] --- maven-surefire-plugin:2.12-TRUNK-HBASE-2:test (secondPartTestsExecution) @ hbase-server ---

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13482634" author="yuzhihong@gmail.com" created="Tue, 23 Oct 2012 20:14:34 +0000"  >&lt;p&gt;There is no change needed for trunk.&lt;/p&gt;</comment>
                            <comment id="13482640" author="v.himanshu" created="Tue, 23 Oct 2012 20:18:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt;: Can you try it on 0.94.X branch?&lt;/p&gt;</comment>
                            <comment id="13482700" author="lhofhansl" created="Tue, 23 Oct 2012 21:16:51 +0000"  >&lt;p&gt;Shouldn&apos;t we fix this in HBaseTestingUtil?&lt;/p&gt;</comment>
                            <comment id="13482708" author="v.himanshu" created="Tue, 23 Oct 2012 21:24:35 +0000"  >&lt;p&gt;No strong opinion as long as we don&apos;t find other similar failures. &lt;br/&gt;
BTW, I have tested this on 94.2 branch (with hadoop 1 and hadoop 2).&lt;/p&gt;</comment>
                            <comment id="13487995" author="v.himanshu" created="Wed, 31 Oct 2012 17:34:30 +0000"  >&lt;p&gt;Can someone please take a look at it. Internally, the attached patch has fixed the test (jenkins has run multiple times).&lt;/p&gt;</comment>
                            <comment id="13488032" author="jxiang" created="Wed, 31 Oct 2012 18:06:32 +0000"  >&lt;p&gt;If the scheme is not null.  The path will have the scheme twice.&lt;br/&gt;
The failure seems to be because of the null scheme.  Is there a better way to fix it?&lt;/p&gt;</comment>
                            <comment id="13488048" author="v.himanshu" created="Wed, 31 Oct 2012 18:20:46 +0000"  >&lt;blockquote&gt;&lt;p&gt;If the scheme is not null. The path will have the scheme twice.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Not following. &lt;br/&gt;
The default scheme is (usually) &quot;file&quot;. I just appended a &quot;://&quot; to the scheme. Previously, it was not taking any scheme as such.&lt;/p&gt;</comment>
                            <comment id="13488053" author="jxiang" created="Wed, 31 Oct 2012 18:24:55 +0000"  >&lt;p&gt;Path.toString() will add the scheme if it&apos;s not null.  We add one more time here.  So it is added twice.&lt;/p&gt;</comment>
                            <comment id="13488064" author="v.himanshu" created="Wed, 31 Oct 2012 18:32:49 +0000"  >&lt;p&gt;Path object, if you follow it how it is created, does not have any scheme attached to it. &lt;/p&gt;</comment>
                            <comment id="13488086" author="jxiang" created="Wed, 31 Oct 2012 18:52:40 +0000"  >&lt;p&gt;Can you do something like below?&lt;/p&gt;

&lt;p&gt;conf.set(HConstants.HBASE_DIR,&lt;br/&gt;
TEST_UTIL.getDataTestDir(&quot;hbase.rootdir&quot;).makeQualified(TEST_UTIL.getTestFileSystem()).toString());&lt;/p&gt;</comment>
                            <comment id="13488263" author="v.himanshu" created="Wed, 31 Oct 2012 21:49:50 +0000"  >&lt;p&gt;Ok. &lt;br/&gt;
The makeQualified(FileSystem) argument is deprecated. I used the newer method instead.&lt;/p&gt;</comment>
                            <comment id="13488264" author="v.himanshu" created="Wed, 31 Oct 2012 21:50:16 +0000"  >&lt;p&gt;It passes on hadoop 1 and hadoop 2, both.&lt;/p&gt;</comment>
                            <comment id="13488267" author="hadoopqa" created="Wed, 31 Oct 2012 21:52:06 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12551631/HBASE-6305-94-v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12551631/HBASE-6305-94-v2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3205//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3205//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13488280" author="jxiang" created="Wed, 31 Oct 2012 22:01:57 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13489109" author="v.himanshu" created="Thu, 1 Nov 2012 23:02:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt; The reason I didn&apos;t touch the HBaseTestingUtility class is the method is used by number of other methods (36 references to getTestDataDir()). I think it is beyond the scope of this jira. Thoughts? &lt;/p&gt;</comment>
                            <comment id="13489152" author="jxiang" created="Thu, 1 Nov 2012 23:52:32 +0000"  >&lt;p&gt;How about where this conf is used?&lt;/p&gt;</comment>
                            <comment id="13489847" author="lhofhansl" created="Fri, 2 Nov 2012 23:42:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=v.himanshu&quot; class=&quot;user-hover&quot; rel=&quot;v.himanshu&quot;&gt;Himanshu Vashishtha&lt;/a&gt; I see. Fair enough. We can always revisit this later. +1 on patch as it fixes the issue at hand.&lt;/p&gt;</comment>
                            <comment id="13489942" author="lhofhansl" created="Sat, 3 Nov 2012 06:23:16 +0000"  >&lt;p&gt;Committed to 0.94.&lt;br/&gt;
Thanks for the patch Himanshu.&lt;/p&gt;</comment>
                            <comment id="13489967" author="hudson" created="Sat, 3 Nov 2012 08:23:49 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #569 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/569/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/569/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6305&quot; title=&quot;TestLocalHBaseCluster hangs with hadoop 2.0/0.23 builds.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6305&quot;&gt;&lt;del&gt;HBASE-6305&lt;/del&gt;&lt;/a&gt; TestLocalHBaseCluster hangs with hadoop 2.0/0.23 builds. (Himanshu) (Revision 1405286)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/TestLocalHBaseCluster.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13490400" author="hudson" created="Mon, 5 Nov 2012 01:35:36 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security-on-Hadoop-23 #9 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/9/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/9/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6305&quot; title=&quot;TestLocalHBaseCluster hangs with hadoop 2.0/0.23 builds.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6305&quot;&gt;&lt;del&gt;HBASE-6305&lt;/del&gt;&lt;/a&gt; TestLocalHBaseCluster hangs with hadoop 2.0/0.23 builds. (Himanshu) (Revision 1405286)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/TestLocalHBaseCluster.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13490412" author="hudson" created="Mon, 5 Nov 2012 01:54:05 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #82 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/82/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/82/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6305&quot; title=&quot;TestLocalHBaseCluster hangs with hadoop 2.0/0.23 builds.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6305&quot;&gt;&lt;del&gt;HBASE-6305&lt;/del&gt;&lt;/a&gt; TestLocalHBaseCluster hangs with hadoop 2.0/0.23 builds. (Himanshu) (Revision 1405286)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/TestLocalHBaseCluster.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12558493">HBASE-6126</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12596835">HBASE-6307</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12551631" name="HBASE-6305-94-v2.patch" size="1050" author="v.himanshu" created="Wed, 31 Oct 2012 21:49:50 +0000"/>
                            <attachment id="12550516" name="HBASE-6305-94-v2.patch" size="1366" author="v.himanshu" created="Tue, 23 Oct 2012 19:12:45 +0000"/>
                            <attachment id="12550400" name="HBASE-6305-v1.patch" size="1365" author="v.himanshu" created="Tue, 23 Oct 2012 02:19:41 +0000"/>
                            <attachment id="12534998" name="hbase-6305-94.patch" size="1110" author="jmhsieh" created="Tue, 3 Jul 2012 22:37:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 3 Jul 2012 04:37:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>239589</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 6 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i00rgv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2382</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>