<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:46:09 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-7478/HBASE-7478.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-7478] Create a multi-threaded responder</title>
                <link>https://issues.apache.org/jira/browse/HBASE-7478</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Currently, we have multi-threaded readers and handlers, but a single threaded responder which is a bottleneck.&lt;/p&gt;

&lt;p&gt;ipc.server.reader.count  : number of reader threads to read data off the wire&lt;br/&gt;
ipc.server.handler.count : number of handler threads that process the request&lt;/p&gt;

&lt;p&gt;We need to have the ability to specify a &quot;ipc.server.responder.count&quot; to be able to specify the number of responder threads.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12625731">HBASE-7478</key>
            <summary>Create a multi-threaded responder</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="karthik.ranga">Karthik Ranganathan</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Jan 2013 21:48:53 +0000</created>
                <updated>Wed, 29 Jun 2016 19:07:22 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>12</watches>
                                                                <comments>
                            <comment id="13561964" author="stack" created="Thu, 24 Jan 2013 20:36:44 +0000"  >&lt;p&gt;Yeah, single responder thread only created up in Responder.  Looking at a site yesterday, saw pile up on the synchronize in the Responder#doRespond:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    void doRespond(Call call) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
      &lt;span class=&quot;code-comment&quot;&gt;// set the serve time when the response has to be sent later
&lt;/span&gt;      call.timestamp = &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.currentTimeMillis();

      &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; doRegister = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
      &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; (call.connection.responseQueue) {
        call.connection.responseQueue.addLast(call);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (call.connection.responseQueue.size() == 1) {
          doRegister = !processResponse(call.connection.responseQueue, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
        }
      }
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (doRegister) {
        enqueueInSelector(call);
      }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As I read it, we have pile up because all trying to respond to same client... so wonder if we will just move bottleneck to mutex&apos;ing over the wire and rather, we should have more than one connection from client to server (as has been said elsewhere)&lt;/p&gt;</comment>
                            <comment id="13562817" author="karthik.ranga" created="Fri, 25 Jan 2013 16:37:49 +0000"  >&lt;p&gt;Interesting... I thought the processResponse(..., false) does not write to the channel when there are a lot of writes, only the processResponse(..., true) variant does. So in effect we are only single threaded when we are pumping out a lot of info using multiple connections.&lt;/p&gt;</comment>
                            <comment id="15355326" author="yuzhihong@gmail.com" created="Wed, 29 Jun 2016 14:30:52 +0000"  >&lt;p&gt;I experimented with multi-threaded responder.&lt;br/&gt;
It was a bit slower for random read while a bit faster for range scan compared to single threaded Responder.&lt;/p&gt;</comment>
                            <comment id="15355397" author="stack" created="Wed, 29 Jun 2016 15:07:09 +0000"  >&lt;p&gt;For random reads, I was looking at this and it seemed like we usually respond inline in the handler and that when we have to service the queue, there is little in it (sometimes zero entries). This is when there is high throughput. In general, I&apos;m finding that the less threads we have, the faster we go so would be interested in evidence of speedup.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 24 Jan 2013 20:36:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>302282</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            24 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i16zvz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>248949</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>