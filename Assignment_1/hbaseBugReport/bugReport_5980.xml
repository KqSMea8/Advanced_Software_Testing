<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:32:43 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5980/HBASE-5980.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5980] Scanner responses from RS should include metrics on rows/KVs filtered</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5980</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Currently it&apos;s difficult to know, when issuing a filter, what percentage of rows were skipped by that filter. We should expose some basic counters back to the client scanner object. For example:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;number of rows filtered by row key alone (filterRowKey())&lt;/li&gt;
	&lt;li&gt;number of times each filter response was returned by filterKeyValue() - corresponding to Filter.ReturnCode&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;What would be slickest is if this could actually return a tree of counters for cases where FilterList or other combining filters are used. But a top-level is a good start.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12554582">HBASE-5980</key>
            <summary>Scanner responses from RS should include metrics on rows/KVs filtered</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jonathan.lawlor">Jonathan Lawlor</assignee>
                                    <reporter username="tlipcon">Todd Lipcon</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 May 2012 22:53:39 +0000</created>
                <updated>Sat, 23 May 2015 00:23:39 +0000</updated>
                            <resolved>Thu, 21 May 2015 18:16:21 +0000</resolved>
                                    <version>0.95.2</version>
                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>1.2.0</fixVersion>
                                    <component>Client</component>
                    <component>metrics</component>
                    <component>Operability</component>
                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>12</watches>
                                                                <comments>
                            <comment id="13272067" author="lhofhansl" created="Thu, 10 May 2012 04:02:44 +0000"  >&lt;p&gt;Do you see this as a measure of a how many KVs a scanner had to touch (and then filter)?&lt;/p&gt;

&lt;p&gt;Asking, because if the filter uses seek hints it is impossible to tell how many KVs it caused to skip.&lt;/p&gt;</comment>
                            <comment id="13272073" author="tlipcon" created="Thu, 10 May 2012 04:19:43 +0000"  >&lt;p&gt;Yep - some proxy for the efficiency of the filter. Often, newer HBase users apply filters expecting them to work like SQL WHERE clauses, and don&apos;t realize that even though their scan returns only 100 rows, it in fact is reading thousands or millions off disk.&lt;/p&gt;</comment>
                            <comment id="13272227" author="anoopsamjohn" created="Thu, 10 May 2012 09:50:03 +0000"  >&lt;p&gt;Nice idea..&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; So this metric will give a value some thing like rows(or KVs) included in result / total rows(KVs) the scanner actually touched &lt;span class=&quot;error&quot;&gt;&amp;#91;% of these&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;When use seek using hints from filter or use reseeks using coprocessors this % will be really good &lt;span class=&quot;error&quot;&gt;&amp;#91;Close to 100%&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;@Todd - Would it be nice to get some more metric out which tells ammount of the data, actually fetched from HDFS for this scan&lt;span class=&quot;error&quot;&gt;&amp;#91;next call&amp;#93;&lt;/span&gt;? May be we can tell how many HFile blocks fetched from the HDFS?&lt;/p&gt;</comment>
                            <comment id="14494766" author="jonathan.lawlor" created="Tue, 14 Apr 2015 19:58:37 +0000"  >&lt;p&gt;This one was recently closed due to inactivity but caught my eye because it sounds like a nice one to have. Currently we track some client side metrics during scans such as count of regions scanned, count of RPCs, etc... (full list available in ScanMetrics class). However, these client side metrics do not include information regarding events that have occurred server side (like how many kv&apos;s have been filtered). &lt;/p&gt;

&lt;p&gt;If we wanted to have these metrics available client side, I believe it could be achieved in the following manner:&lt;br/&gt;
1. Define a new class to encapsulate the server side metrics that we wish to access/track client side&lt;br/&gt;
2. Define a new protobuf message type for this new metrics class&lt;br/&gt;
3. Add the metrics as another field in the ScanResponse&lt;br/&gt;
4. Add new fields to ScanMetrics (the class that already exists client side) corresponding to the server side metrics and update these metrics after each RPC response in ScannerCallable&lt;/p&gt;

&lt;p&gt;In terms of how to actually track these metrics during Scan RPC&apos;s, we can add an instance of this new server side metrics class to the ScannerContext class that was added in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13421&quot; title=&quot;Reduce the number of object creations introduced by HBASE-11544 in scan RPC hot code paths&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13421&quot;&gt;&lt;del&gt;HBASE-13421&lt;/del&gt;&lt;/a&gt;. Then all metric tracking could be performed via ScannerContext#getMetrics()#update...&lt;/p&gt;

&lt;p&gt;Any thoughts/comments?&lt;/p&gt;</comment>
                            <comment id="14494769" author="stack" created="Tue, 14 Apr 2015 20:02:42 +0000"  >&lt;p&gt;I think folks would kill for such reporting. How cool would it be if you could scan with reporting in the shell when stuff is slow and then get a dump of what went on after you fired your scan? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14495693" author="lhofhansl" created="Wed, 15 Apr 2015 05:43:16 +0000"  >&lt;p&gt;That&apos;d be cool. There are some scan metrics... Need to look again what we report.&lt;br/&gt;
We could report on NEXTs, SKIPs, Cells filtered, Rows filtered, blocks loaded, and blocks found in the cache.&lt;br/&gt;
What about coprocessors?&lt;/p&gt;</comment>
                            <comment id="14498753" author="jonathan.lawlor" created="Thu, 16 Apr 2015 21:21:35 +0000"  >&lt;p&gt;Attaching a patch that exposes the following server side metrics to the client side ScanMetrics:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Number of rows scanned (metric name is &quot;ROWS_SCANNED&quot;)&lt;/li&gt;
	&lt;li&gt;Number of rows filtered (metric name is &quot;ROWS_FILTERED&quot;)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Important notes:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;ScanMetrics now contains a mix of both client side and server side metrics&lt;/li&gt;
	&lt;li&gt;AbstractScanMetrics and ServerSideScanMetrics were added to try and keep the ScanMetrics stuff clean&lt;/li&gt;
	&lt;li&gt;The following new arguments are now supported in scans from the shell:
	&lt;ul&gt;
		&lt;li&gt;GET_ALL_METRICS: boolean indicating whether or not all scan metrics should be output&lt;/li&gt;
		&lt;li&gt;GET_METRICS: array of metric keys the user wants to see (this argument trumps GET_ALL_METRICS)&lt;/li&gt;
		&lt;li&gt;Example usages:
		&lt;ul&gt;
			&lt;li&gt;scan &apos;table&apos;, 
{GET_ALL_METRICS =&amp;gt; true}&lt;/li&gt;
			&lt;li&gt;scan &apos;table&apos;, 
{GET_METRICS =&amp;gt; [&apos;RPC_RETRIES&apos;, &apos;ROWS_FILTERED&apos;]}&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Metrics are always output in alphabetical order&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Discussion points:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;I think the name of the metrics and shell arguments could be improved, just chose some easy names to show their usage. Thoughts?&lt;/li&gt;
	&lt;li&gt;The other metric mentioned above still needs to be added (number of times each filter response was returned by filterKeyValue() - corresponding to Filter.ReturnCode). Adding new metrics is easy: just specify the new field in ServerSideScanMetrics and add the appropriate tracking calls. I wanted to get some feedback on how these metrics looked first rather than add a bunch of metrics all at once.&lt;/li&gt;
	&lt;li&gt;All of the metrics &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt; mentioned sound great. In terms of coprocessors, what kind of metrics would be valuable to expose to the client?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14514681" author="stack" created="Mon, 27 Apr 2015 18:48:45 +0000"  >&lt;p&gt;Suggest folks review this one quick cos our mighty &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jonathan.lawlor&quot; class=&quot;user-hover&quot; rel=&quot;jonathan.lawlor&quot;&gt;Jonathan Lawlor&lt;/a&gt; is going back to school EOW &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;First blush:&lt;/p&gt;

&lt;p&gt;.. you need to add this option to the Scan help in the shell else no one will find it.&lt;/p&gt;

&lt;p&gt;Add this to the scan help in shell?&lt;/p&gt;

&lt;p&gt;scan &apos;table&apos;, &lt;/p&gt;
{GET_ALL_METRICS =&amp;gt; true}
&lt;p&gt;scan &apos;table&apos;, &lt;/p&gt;
{GET_METRICS =&amp;gt; [&apos;RPC_RETRIES&apos;, &apos;ROWS_FILTERED&apos;]}

&lt;blockquote&gt;&lt;p&gt;I think the name of the metrics and shell arguments could be improved, just chose some easy names to show their usage. Thoughts?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;d say drop the &apos;GET_&apos;... because redundant&lt;/p&gt;



&lt;p&gt;Patch looks good. Surprisingly little code (patch is big because of generated code).&lt;/p&gt;

&lt;p&gt;On naming of a client-side class server-side metrics, not sure what to do about that... it is only telling it as it is.  Purge the abstract class? Only used once?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;ScanMetrics now contains a mix of both client side and server side metrics&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Should we have ClientScanMetrics and ServerScanMetrics?&lt;/p&gt;

</comment>
                            <comment id="14515056" author="jonathan.lawlor" created="Mon, 27 Apr 2015 21:43:27 +0000"  >&lt;blockquote&gt;&lt;p&gt;you need to add this option to the Scan help in the shell else no one will find it.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Good point. Added explanation and examples to the scan help in next patch.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I&apos;d say drop the &apos;GET_&apos;... because redundant&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I like this proposal. Changed to ALL_METRICS and METRICS in latest patch&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Purge the abstract class? Only used once?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Makes sense to me. Purged the abstract class in latest patch and moved all of its functionality into ServerSideMetrics in latest patch.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Should we have ClientScanMetrics and ServerScanMetrics?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Hmm, interesting idea. So something like: add new class &quot;ClientScanMetrics&quot; and have instances of both &quot;ClientScanMetrics&quot; and &quot;ServerScanMetrics&quot; as members of a ScanMetrics instance? Since ScanMetrics is a public-evolving API, I think this change would be okay. The change would be beneficial in a clean-code sense. As a user, I don&apos;t think the distinction between client-side vs. server-side would be too important when looking at the metrics (a user probably just cares that a metric exists, not whether it is classified as server-side or client-side). How does that sound, worth doing?&lt;/p&gt;

&lt;p&gt;Note: In the latest patch I have also changed the interface audience of ServerSideScanMetrics to public-evolving to match the existing interface annotation of ScanMetrics. I did this because it seemed wrong that a public-evolving class inherited from a private class.&lt;/p&gt;</comment>
                            <comment id="14515058" author="jonathan.lawlor" created="Mon, 27 Apr 2015 21:44:17 +0000"  >&lt;p&gt;Attaching updated patch&lt;/p&gt;</comment>
                            <comment id="14517870" author="jonathan.lawlor" created="Tue, 28 Apr 2015 19:38:18 +0000"  >&lt;p&gt;Resubmitting patch since last time precommit build didn&apos;t kick off&lt;/p&gt;</comment>
                            <comment id="14517942" author="stack" created="Tue, 28 Apr 2015 20:13:19 +0000"  >&lt;blockquote&gt;&lt;p&gt;So something like: add new class &quot;ClientScanMetrics&quot; and have instances of both &quot;ClientScanMetrics&quot; and &quot;ServerScanMetrics&quot; as members of a ScanMetrics instance?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;d say don&apos;t worry about it.&lt;/p&gt;

&lt;p&gt;I looked at the patch and it looks nice to me. Let me wait on hadoopqa and will commit later this evening unless objection.&lt;/p&gt;</comment>
                            <comment id="14518023" author="jonathan.lawlor" created="Tue, 28 Apr 2015 20:50:35 +0000"  >&lt;p&gt;Reattaching patch because it looks like precommit build still didn&apos;t kick off. &lt;/p&gt;</comment>
                            <comment id="14518344" author="hadoopqa" created="Tue, 28 Apr 2015 23:26:53 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12728917/HBASE-5980-v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12728917/HBASE-5980-v2.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit ee562faeb3cd0b7a49a1319fdc775f1d43e32341.&lt;br/&gt;
  ATTACHMENT ID: 12728917&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.1 2.5.2 2.6.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 2 warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 1900 checkstyle errors (more than the master&apos;s current 1898 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +      &quot; \003(\014\&quot;\324\002\n\003Get\022\013\n\003row\030\001 \002(\014\022\027\n\006column\030\002 \003(&quot; +&lt;br/&gt;
+      &quot;unt\030\002 \001(\005\022\016\n\006exists\030\003 \001(\010\022\024\n\005stale\030\004 \001(\010&quot; +&lt;br/&gt;
+      &quot;\001 \002(\014\022\016\n\006family\030\002 \002(\014\022\021\n\tqualifier\030\003 \002(\014&quot; +&lt;br/&gt;
+              new java.lang.String[] &lt;/p&gt;
{ &quot;Region&quot;, &quot;Scan&quot;, &quot;ScannerId&quot;, &quot;NumberOfRows&quot;, &quot;CloseScanner&quot;, &quot;NextCallSeq&quot;, &quot;ClientHandlesPartials&quot;, &quot;ClientHandlesHeartbeats&quot;, &quot;TrackScanMetrics&quot;, }
&lt;p&gt;);&lt;br/&gt;
+              new java.lang.String[] &lt;/p&gt;
{ &quot;CellsPerResult&quot;, &quot;ScannerId&quot;, &quot;MoreResults&quot;, &quot;Ttl&quot;, &quot;Results&quot;, &quot;Stale&quot;, &quot;PartialFlagPerResult&quot;, &quot;MoreResultsInRegion&quot;, &quot;HeartbeatMessage&quot;, &quot;ScanMetrics&quot;, }
&lt;p&gt;);&lt;br/&gt;
+        raise(ArgumentError, &quot;Argument should be org.apache.hadoop.hbase.client.metrics.ScanMetrics&quot;) \&lt;br/&gt;
+        # save row count to restore after printing metrics (metrics should not count towards row count)&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.TestJMXListener&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 4 zombie test(s): 	at org.apache.hadoop.hbase.mapreduce.TestTableInputFormatScanBase.testScan(TestTableInputFormatScanBase.java:242)&lt;br/&gt;
	at org.apache.hadoop.hbase.mapreduce.TestTableInputFormatScan1.testScanEmptyToBBB(TestTableInputFormatScan1.java:84)&lt;br/&gt;
	at org.apache.hadoop.hbase.mapreduce.TestCellCounter.testCellCounter(TestCellCounter.java:99)&lt;br/&gt;
	at org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat2.testMRIncrementalLoadWithSplit(TestHFileOutputFormat2.java:380)&lt;br/&gt;
	at org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat.testMRIncrementalLoadWithSplit(TestHFileOutputFormat.java:378)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13870//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13870//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13870//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13870//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13870//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13870//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Javadoc warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13870//artifact/patchprocess/patchJavadocWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13870//artifact/patchprocess/patchJavadocWarnings.txt&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13870//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13870//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14518430" author="jonathan.lawlor" created="Wed, 29 Apr 2015 00:21:56 +0000"  >&lt;p&gt;Test failure looks unrelated. That test seems to be causing issues in other precommit builds as well as trunk: e.g. &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/6429/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/6429/testReport/&lt;/a&gt; and &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/6428/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/6428/testReport/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The checkstyle warning is due to the fact that ServerSideScanMetrics member&apos;s are public (but this is done to keep it consistent with ScanMetrics). &lt;/p&gt;

&lt;p&gt;Attaching a branch-1 patch&lt;/p&gt;</comment>
                            <comment id="14518664" author="hadoopqa" created="Wed, 29 Apr 2015 03:42:18 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12728989/HBASE-5980-branch-1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12728989/HBASE-5980-branch-1.patch&lt;/a&gt;&lt;br/&gt;
  against branch-1 branch at commit 7348a05e9959c0891e1baebeef28c3be8feeb172.&lt;br/&gt;
  ATTACHMENT ID: 12728989&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.1 2.5.2 2.6.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 2 warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 3796 checkstyle errors (more than the master&apos;s current 3792 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +      &quot; \003(\014\&quot;\324\002\n\003Get\022\013\n\003row\030\001 \002(\014\022\027\n\006column\030\002 \003(&quot; +&lt;br/&gt;
+      &quot;unt\030\002 \001(\005\022\016\n\006exists\030\003 \001(\010\022\024\n\005stale\030\004 \001(\010&quot; +&lt;br/&gt;
+      &quot;\001 \002(\014\022\016\n\006family\030\002 \002(\014\022\021\n\tqualifier\030\003 \002(\014&quot; +&lt;br/&gt;
+              new java.lang.String[] &lt;/p&gt;
{ &quot;Region&quot;, &quot;Scan&quot;, &quot;ScannerId&quot;, &quot;NumberOfRows&quot;, &quot;CloseScanner&quot;, &quot;NextCallSeq&quot;, &quot;ClientHandlesPartials&quot;, &quot;ClientHandlesHeartbeats&quot;, &quot;TrackScanMetrics&quot;, }
&lt;p&gt;);&lt;br/&gt;
+              new java.lang.String[] &lt;/p&gt;
{ &quot;CellsPerResult&quot;, &quot;ScannerId&quot;, &quot;MoreResults&quot;, &quot;Ttl&quot;, &quot;Results&quot;, &quot;Stale&quot;, &quot;PartialFlagPerResult&quot;, &quot;MoreResultsInRegion&quot;, &quot;HeartbeatMessage&quot;, &quot;ScanMetrics&quot;, }
&lt;p&gt;);&lt;br/&gt;
+        raise(ArgumentError, &quot;Argument should be org.apache.hadoop.hbase.client.metrics.ScanMetrics&quot;) \&lt;br/&gt;
+        # save row count to restore after printing metrics (metrics should not count towards row count)&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 5 zombie test(s): 	at org.apache.hadoop.hbase.security.visibility.TestVisibilityLabelsWithCustomVisLabService.testVisibilityLabelsInPutsThatDoesNotMatchAnyDefinedLabels(TestVisibilityLabelsWithCustomVisLabService.java:64)&lt;br/&gt;
	at org.apache.hadoop.hbase.security.visibility.TestVisibilityLabelsWithDeletes.testDeleteColumnWithLatestTimeStampWhenNoVersionMatches(TestVisibilityLabelsWithDeletes.java:1115)&lt;br/&gt;
	at org.apache.hadoop.hbase.security.visibility.TestVisibilityLabelsWithACL.testScanForUserWithFewerLabelAuthsThanLabelsInScanAuthorizations(TestVisibilityLabelsWithACL.java:119)&lt;br/&gt;
	at org.apache.hadoop.hbase.security.visibility.TestVisibilityLabels.testVisibilityLabelsInPutsThatDoesNotMatchAnyDefinedLabels(TestVisibilityLabels.java:245)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13874//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13874//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13874//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13874//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13874//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13874//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Javadoc warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13874//artifact/patchprocess/patchJavadocWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13874//artifact/patchprocess/patchJavadocWarnings.txt&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13874//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13874//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14519448" author="anoop.hbase" created="Wed, 29 Apr 2015 14:39:04 +0000"  >&lt;p&gt;Nice work Jonathan.&lt;br/&gt;
Some comments below.. Mainly I feel we can add some more tests. I fear whether we are missing the counting in places. I may be wrong but better to add tests which consider all return points of the scan loop in RegionScannerImpl.&lt;/p&gt;

&lt;p&gt;incrementCountOfRowsScannedMetric(scannerContext);&lt;br/&gt;
We are doing this in nextRow(ScannerContext scannerContext, byte[] currentRow, int offset, short length). This method basically skips all cells in a filtered row and call CP hook. Can we do this increment in calling place instead? That looks better for understanding for code (IMO)&lt;/p&gt;

&lt;p&gt;Can we add a test case for&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;There are N rows to scan totally and out of which M are filtered out and remaining returned back&lt;/li&gt;
	&lt;li&gt;Case where the size limit reaches in btw rows. (old batch case)&lt;/li&gt;
	&lt;li&gt;We have test for cases of rowKeys getting filtered out. But other cases are missing (like filterRow() etc). We have ColumnPrefixFilter but that seems not filtering any rows case.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14519680" author="jonathan.lawlor" created="Wed, 29 Apr 2015 16:33:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt; Good idea, let me add some more tests to see if we are indeed missing some counts. Thanks for taking a look &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="14519942" author="jonathan.lawlor" created="Wed, 29 Apr 2015 18:54:21 +0000"  >&lt;p&gt;Here&apos;s an updated patch with some new tests. The tests now stress more filter scenarios as well as different scan configurations (varying values of caching and max result size).&lt;/p&gt;

&lt;p&gt;Moved around the increment to the number of rows scanned to put it in a better spot (I agree with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt; that it doesn&apos;t belong in nextRow). Now it is incremented within populateResult once we have recognized that there are no more cells in the row.&lt;/p&gt;

&lt;p&gt;Let&apos;s see what QA has to say about this one, looks like the patch causing issues with test failures has been reverted so should be a cleaner run.&lt;/p&gt;</comment>
                            <comment id="14520246" author="hadoopqa" created="Wed, 29 Apr 2015 21:07:02 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12729259/HBASE-5980-v3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12729259/HBASE-5980-v3.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 60d7921a6a0378cec872658bf4469b09c542bed8.&lt;br/&gt;
  ATTACHMENT ID: 12729259&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.1 2.5.2 2.6.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 2 warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 1900 checkstyle errors (more than the master&apos;s current 1898 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +      &quot; \003(\014\&quot;\324\002\n\003Get\022\013\n\003row\030\001 \002(\014\022\027\n\006column\030\002 \003(&quot; +&lt;br/&gt;
+      &quot;unt\030\002 \001(\005\022\016\n\006exists\030\003 \001(\010\022\024\n\005stale\030\004 \001(\010&quot; +&lt;br/&gt;
+      &quot;\001 \002(\014\022\016\n\006family\030\002 \002(\014\022\021\n\tqualifier\030\003 \002(\014&quot; +&lt;br/&gt;
+              new java.lang.String[] &lt;/p&gt;
{ &quot;Region&quot;, &quot;Scan&quot;, &quot;ScannerId&quot;, &quot;NumberOfRows&quot;, &quot;CloseScanner&quot;, &quot;NextCallSeq&quot;, &quot;ClientHandlesPartials&quot;, &quot;ClientHandlesHeartbeats&quot;, &quot;TrackScanMetrics&quot;, }
&lt;p&gt;);&lt;br/&gt;
+              new java.lang.String[] &lt;/p&gt;
{ &quot;CellsPerResult&quot;, &quot;ScannerId&quot;, &quot;MoreResults&quot;, &quot;Ttl&quot;, &quot;Results&quot;, &quot;Stale&quot;, &quot;PartialFlagPerResult&quot;, &quot;MoreResultsInRegion&quot;, &quot;HeartbeatMessage&quot;, &quot;ScanMetrics&quot;, }
&lt;p&gt;);&lt;br/&gt;
+        raise(ArgumentError, &quot;Argument should be org.apache.hadoop.hbase.client.metrics.ScanMetrics&quot;) \&lt;br/&gt;
+        # save row count to restore after printing metrics (metrics should not count towards row count)&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 1 zombie test(s): &lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13888//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13888//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13888//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13888//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13888//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13888//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Javadoc warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13888//artifact/patchprocess/patchJavadocWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13888//artifact/patchprocess/patchJavadocWarnings.txt&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13888//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13888//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14520331" author="jonathan.lawlor" created="Wed, 29 Apr 2015 21:46:19 +0000"  >&lt;p&gt;Patch to address line length issues from non-generated code. The hanging test (TestRowCounter) passes when run locally, so retry.&lt;/p&gt;</comment>
                            <comment id="14520606" author="hadoopqa" created="Thu, 30 Apr 2015 00:34:20 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12729313/HBASE-5980-v4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12729313/HBASE-5980-v4.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit c65e4d554032edc756490d29fd3a357d82345a62.&lt;br/&gt;
  ATTACHMENT ID: 12729313&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.1 2.5.2 2.6.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 2 warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 1900 checkstyle errors (more than the master&apos;s current 1898 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +      &quot; \003(\014\&quot;\324\002\n\003Get\022\013\n\003row\030\001 \002(\014\022\027\n\006column\030\002 \003(&quot; +&lt;br/&gt;
+      &quot;unt\030\002 \001(\005\022\016\n\006exists\030\003 \001(\010\022\024\n\005stale\030\004 \001(\010&quot; +&lt;br/&gt;
+      &quot;\001 \002(\014\022\016\n\006family\030\002 \002(\014\022\021\n\tqualifier\030\003 \002(\014&quot; +&lt;br/&gt;
+              new java.lang.String[] &lt;/p&gt;
{ &quot;Region&quot;, &quot;Scan&quot;, &quot;ScannerId&quot;, &quot;NumberOfRows&quot;, &quot;CloseScanner&quot;, &quot;NextCallSeq&quot;, &quot;ClientHandlesPartials&quot;, &quot;ClientHandlesHeartbeats&quot;, &quot;TrackScanMetrics&quot;, }
&lt;p&gt;);&lt;br/&gt;
+              new java.lang.String[] &lt;/p&gt;
{ &quot;CellsPerResult&quot;, &quot;ScannerId&quot;, &quot;MoreResults&quot;, &quot;Ttl&quot;, &quot;Results&quot;, &quot;Stale&quot;, &quot;PartialFlagPerResult&quot;, &quot;MoreResultsInRegion&quot;, &quot;HeartbeatMessage&quot;, &quot;ScanMetrics&quot;, }
&lt;p&gt;);&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 1 zombie test(s): &lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13889//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13889//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13889//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13889//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13889//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13889//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Javadoc warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13889//artifact/patchprocess/patchJavadocWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13889//artifact/patchprocess/patchJavadocWarnings.txt&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13889//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13889//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14551518" author="stack" created="Wed, 20 May 2015 00:04:54 +0000"  >&lt;p&gt;Retry (had to do minor fixup so still applies)&lt;/p&gt;</comment>
                            <comment id="14551636" author="hadoopqa" created="Wed, 20 May 2015 01:48:26 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12734000/5980v5.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12734000/5980v5.txt&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 1fcee86978b20ac82647b5213eae389a38735cce.&lt;br/&gt;
  ATTACHMENT ID: 12734000&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 2 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.1 2.5.2 2.6.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 1900 checkstyle errors (more than the master&apos;s current 1898 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +      &quot; \003(\014\&quot;\324\002\n\003Get\022\013\n\003row\030\001 \002(\014\022\027\n\006column\030\002 \003(&quot; +&lt;br/&gt;
+      &quot;unt\030\002 \001(\005\022\016\n\006exists\030\003 \001(\010\022\024\n\005stale\030\004 \001(\010&quot; +&lt;br/&gt;
+      &quot;\001 \002(\014\022\016\n\006family\030\002 \002(\014\022\021\n\tqualifier\030\003 \002(\014&quot; +&lt;br/&gt;
+              new java.lang.String[] &lt;/p&gt;
{ &quot;Region&quot;, &quot;Scan&quot;, &quot;ScannerId&quot;, &quot;NumberOfRows&quot;, &quot;CloseScanner&quot;, &quot;NextCallSeq&quot;, &quot;ClientHandlesPartials&quot;, &quot;ClientHandlesHeartbeats&quot;, &quot;TrackScanMetrics&quot;, }
&lt;p&gt;);&lt;br/&gt;
+              new java.lang.String[] &lt;/p&gt;
{ &quot;CellsPerResult&quot;, &quot;ScannerId&quot;, &quot;MoreResults&quot;, &quot;Ttl&quot;, &quot;Results&quot;, &quot;Stale&quot;, &quot;PartialFlagPerResult&quot;, &quot;MoreResultsInRegion&quot;, &quot;HeartbeatMessage&quot;, &quot;ScanMetrics&quot;, }
&lt;p&gt;);&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 site&lt;/font&gt;.  The patch appears to cause mvn site goal to fail.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14108//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14108//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14108//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14108//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14108//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14108//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14108//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14108//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14551833" author="stack" created="Wed, 20 May 2015 05:21:35 +0000"  >&lt;p&gt;Retry&lt;/p&gt;</comment>
                            <comment id="14551993" author="hadoopqa" created="Wed, 20 May 2015 08:31:04 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12734067/5980v5.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12734067/5980v5.txt&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 132573792dc4947f2d7846f9e8093c9227c189da.&lt;br/&gt;
  ATTACHMENT ID: 12734067&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 2 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.1 2.5.2 2.6.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 1900 checkstyle errors (more than the master&apos;s current 1898 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +      &quot; \003(\014\&quot;\324\002\n\003Get\022\013\n\003row\030\001 \002(\014\022\027\n\006column\030\002 \003(&quot; +&lt;br/&gt;
+      &quot;unt\030\002 \001(\005\022\016\n\006exists\030\003 \001(\010\022\024\n\005stale\030\004 \001(\010&quot; +&lt;br/&gt;
+      &quot;\001 \002(\014\022\016\n\006family\030\002 \002(\014\022\021\n\tqualifier\030\003 \002(\014&quot; +&lt;br/&gt;
+              new java.lang.String[] &lt;/p&gt;
{ &quot;Region&quot;, &quot;Scan&quot;, &quot;ScannerId&quot;, &quot;NumberOfRows&quot;, &quot;CloseScanner&quot;, &quot;NextCallSeq&quot;, &quot;ClientHandlesPartials&quot;, &quot;ClientHandlesHeartbeats&quot;, &quot;TrackScanMetrics&quot;, }
&lt;p&gt;);&lt;br/&gt;
+              new java.lang.String[] &lt;/p&gt;
{ &quot;CellsPerResult&quot;, &quot;ScannerId&quot;, &quot;MoreResults&quot;, &quot;Ttl&quot;, &quot;Results&quot;, &quot;Stale&quot;, &quot;PartialFlagPerResult&quot;, &quot;MoreResultsInRegion&quot;, &quot;HeartbeatMessage&quot;, &quot;ScanMetrics&quot;, }
&lt;p&gt;);&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 2 zombie test(s): 	at org.apache.camel.component.jetty.jettyproducer.HttpJettyProducerRecipientListCustomThreadPoolTest.testRecipientList(HttpJettyProducerRecipientListCustomThreadPoolTest.java:40)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14111//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14111//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14111//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14111//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14111//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14111//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14111//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14111//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14552962" author="stack" created="Wed, 20 May 2015 19:40:56 +0000"  >&lt;p&gt;Unrelated project fail. Retrying patch.&lt;/p&gt;</comment>
                            <comment id="14553021" author="hadoopqa" created="Wed, 20 May 2015 20:06:35 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12734208/5980v5.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12734208/5980v5.txt&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 7f2b33dbbf90474a8f73e4d38ea8f6817ee3dcdb.&lt;br/&gt;
  ATTACHMENT ID: 12734208&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 2 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14125//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14125//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14553044" author="stack" created="Wed, 20 May 2015 20:27:16 +0000"  >&lt;p&gt;Committed by mistake against trunk. Reverted till sure this good.&lt;/p&gt;</comment>
                            <comment id="14553045" author="stack" created="Wed, 20 May 2015 20:27:43 +0000"  >&lt;p&gt;Retry&lt;/p&gt;</comment>
                            <comment id="14553313" author="hudson" created="Wed, 20 May 2015 23:15:47 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #6499 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/6499/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/6499/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5980&quot; title=&quot;Scanner responses from RS should include metrics on rows/KVs filtered&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5980&quot;&gt;&lt;del&gt;HBASE-5980&lt;/del&gt;&lt;/a&gt; Scanner responses from RS should include metrics on rows/KVs filtered (stack: rev dc72dad7cd5214f2dd416b89e4bfa1c83625aff0)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/NoLimitScannerContext.java&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/shell/commands/scan.rb&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ReversedRegionScannerImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/shell/formatter.rb&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/metrics/ServerSideScanMetrics.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ScannerContext.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/ClientProtos.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RSRpcServices.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/TestServerSideScanMetricsFromClientSide.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/hbase/table.rb&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/ResponseConverter.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/ScannerCallable.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/metrics/ScanMetrics.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/protobuf/Client.proto&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/hbase.rb&lt;br/&gt;
Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5980&quot; title=&quot;Scanner responses from RS should include metrics on rows/KVs filtered&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5980&quot;&gt;&lt;del&gt;HBASE-5980&lt;/del&gt;&lt;/a&gt; Scanner responses from RS should include metrics on rows/KVs filtered&quot; (stack: rev e2e9ea5bd5657f68606e9835d8de95180e4358bb)&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/shell/commands/scan.rb&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/ResponseConverter.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/ClientProtos.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ScannerContext.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/TestServerSideScanMetricsFromClientSide.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/protobuf/Client.proto&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/metrics/ScanMetrics.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ReversedRegionScannerImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/metrics/ServerSideScanMetrics.java&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/shell/formatter.rb&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/hbase.rb&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/NoLimitScannerContext.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/ScannerCallable.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/hbase/table.rb&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RSRpcServices.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14553365" author="hadoopqa" created="Wed, 20 May 2015 23:47:34 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12734230/5980v5.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12734230/5980v5.txt&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 3a1e101dcd4cf0e7149c0d8b1c13f96adf04278e.&lt;br/&gt;
  ATTACHMENT ID: 12734230&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 2 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.1 2.5.2 2.6.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 1896 checkstyle errors (more than the master&apos;s current 1894 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +      &quot; \003(\014\&quot;\324\002\n\003Get\022\013\n\003row\030\001 \002(\014\022\027\n\006column\030\002 \003(&quot; +&lt;br/&gt;
+      &quot;unt\030\002 \001(\005\022\016\n\006exists\030\003 \001(\010\022\024\n\005stale\030\004 \001(\010&quot; +&lt;br/&gt;
+      &quot;\001 \002(\014\022\016\n\006family\030\002 \002(\014\022\021\n\tqualifier\030\003 \002(\014&quot; +&lt;br/&gt;
+              new java.lang.String[] &lt;/p&gt;
{ &quot;Region&quot;, &quot;Scan&quot;, &quot;ScannerId&quot;, &quot;NumberOfRows&quot;, &quot;CloseScanner&quot;, &quot;NextCallSeq&quot;, &quot;ClientHandlesPartials&quot;, &quot;ClientHandlesHeartbeats&quot;, &quot;TrackScanMetrics&quot;, }
&lt;p&gt;);&lt;br/&gt;
+              new java.lang.String[] &lt;/p&gt;
{ &quot;CellsPerResult&quot;, &quot;ScannerId&quot;, &quot;MoreResults&quot;, &quot;Ttl&quot;, &quot;Results&quot;, &quot;Stale&quot;, &quot;PartialFlagPerResult&quot;, &quot;MoreResultsInRegion&quot;, &quot;HeartbeatMessage&quot;, &quot;ScanMetrics&quot;, }
&lt;p&gt;);&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14127//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14127//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14127//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14127//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14127//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14127//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14127//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14127//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14554763" author="stack" created="Thu, 21 May 2015 18:07:36 +0000"  >&lt;p&gt;What I pushed to master branch.&lt;/p&gt;</comment>
                            <comment id="14554777" author="stack" created="Thu, 21 May 2015 18:12:42 +0000"  >&lt;p&gt;Reattach what I pushed to master branch with a better name so it is clearly different from 5980v5.txt (this latter patch was applied to branch-1)&lt;/p&gt;</comment>
                            <comment id="14554788" author="stack" created="Thu, 21 May 2015 18:16:21 +0000"  >&lt;p&gt;Pushed to branch-1 and master.&lt;/p&gt;

&lt;p&gt;Nice facility that gives insight on what is going on server-side.&lt;/p&gt;

&lt;p&gt;It is off by default so should have no impact on scan perf.&lt;/p&gt;

&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jonathan.lawlor&quot; class=&quot;user-hover&quot; rel=&quot;jonathan.lawlor&quot;&gt;Jonathan Lawlor&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14554792" author="hadoopqa" created="Thu, 21 May 2015 18:19:42 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12734605/5980v5.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12734605/5980v5.txt&lt;/a&gt;&lt;br/&gt;
  against master branch at commit e1e8434340f02907976f20566c3e55d8d627d4c4.&lt;br/&gt;
  ATTACHMENT ID: 12734605&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 2 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14150//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14150//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14555101" author="hudson" created="Thu, 21 May 2015 21:34:19 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.2 #96 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2/96/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2/96/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5980&quot; title=&quot;Scanner responses from RS should include metrics on rows/KVs filtered&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5980&quot;&gt;&lt;del&gt;HBASE-5980&lt;/del&gt;&lt;/a&gt; Scanner responses from RS should include metrics on rows/KVs filtered (stack: rev 078a9a97c367a22926b066b7e00ea2613f15201b)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/NoLimitScannerContext.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ReversedRegionScannerImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/hbase/table.rb&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/hbase.rb&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/ScannerCallable.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ScannerContext.java&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/shell/formatter.rb&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/shell/commands/scan.rb&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RSRpcServices.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/ResponseConverter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/ClientProtos.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/protobuf/Client.proto&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/metrics/ScanMetrics.java&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5980&quot; title=&quot;Scanner responses from RS should include metrics on rows/KVs filtered&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5980&quot;&gt;&lt;del&gt;HBASE-5980&lt;/del&gt;&lt;/a&gt; Scanner responses from RS should include metrics on rows/KVs filtered; ADDENDUM &amp;#8211; ADD MISSING FILES (stack: rev a9e2f4cf319766bed3fe7c2cf601d53283c3cc5d)&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/metrics/ServerSideScanMetrics.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/TestServerSideScanMetricsFromClientSide.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14555119" author="hudson" created="Thu, 21 May 2015 21:43:21 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #6506 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/6506/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/6506/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5980&quot; title=&quot;Scanner responses from RS should include metrics on rows/KVs filtered&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5980&quot;&gt;&lt;del&gt;HBASE-5980&lt;/del&gt;&lt;/a&gt; Scanner responses from RS should include metrics on rows/KVs filtered (stack: rev e1e8434340f02907976f20566c3e55d8d627d4c4)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/ClientProtos.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ReversedRegionScannerImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/ResponseConverter.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/metrics/ScanMetrics.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/ScannerCallable.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/metrics/ServerSideScanMetrics.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ScannerContext.java&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/hbase.rb&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/shell/formatter.rb&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/shell/commands/scan.rb&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/TestServerSideScanMetricsFromClientSide.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/protobuf/Client.proto&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/NoLimitScannerContext.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RSRpcServices.java&lt;/li&gt;
	&lt;li&gt;hbase-shell/src/main/ruby/hbase/table.rb&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14557045" author="lhofhansl" created="Sat, 23 May 2015 00:23:39 +0000"  >&lt;p&gt;While we&apos;re at it. Would be useful to track blocks loaded, block cache hits, etc?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12734606" name="5980v5.master.txt" size="96360" author="stack" created="Thu, 21 May 2015 18:12:42 +0000"/>
                            <attachment id="12734230" name="5980v5.txt" size="97352" author="stack" created="Wed, 20 May 2015 20:27:43 +0000"/>
                            <attachment id="12734208" name="5980v5.txt" size="97352" author="stack" created="Wed, 20 May 2015 19:40:56 +0000"/>
                            <attachment id="12734067" name="5980v5.txt" size="97352" author="stack" created="Wed, 20 May 2015 05:21:35 +0000"/>
                            <attachment id="12734000" name="5980v5.txt" size="97352" author="stack" created="Wed, 20 May 2015 00:04:54 +0000"/>
                            <attachment id="12728989" name="HBASE-5980-branch-1.patch" size="93523" author="jonathan.lawlor" created="Wed, 29 Apr 2015 00:21:56 +0000"/>
                            <attachment id="12725983" name="HBASE-5980-v1.patch" size="89875" author="jonathan.lawlor" created="Thu, 16 Apr 2015 21:21:35 +0000"/>
                            <attachment id="12728917" name="HBASE-5980-v2.patch" size="93349" author="jonathan.lawlor" created="Tue, 28 Apr 2015 20:50:35 +0000"/>
                            <attachment id="12728515" name="HBASE-5980-v2.patch" size="93349" author="jonathan.lawlor" created="Mon, 27 Apr 2015 21:44:17 +0000"/>
                            <attachment id="12729259" name="HBASE-5980-v3.patch" size="99904" author="jonathan.lawlor" created="Wed, 29 Apr 2015 18:54:21 +0000"/>
                            <attachment id="12729313" name="HBASE-5980-v4.patch" size="99931" author="jonathan.lawlor" created="Wed, 29 Apr 2015 21:46:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 10 May 2012 04:02:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>238832</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 29 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02enj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11975</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Adds scan metrics to the result. In the shell, set the ALL_METRICS attribute to true on your scan to see dump of metrics after results (see the scan help for examples).&lt;br/&gt;
&lt;br/&gt;
If you would prefer to see only a subset of the metrics, the METRICS array can be defined to include the names of only the metrics you care about.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>