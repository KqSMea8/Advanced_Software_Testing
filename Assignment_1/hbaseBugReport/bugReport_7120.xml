<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:42:49 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-7120/HBASE-7120.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-7120] hbase-daemon.sh (start) missing necessary check when writing pid and log files</title>
                <link>https://issues.apache.org/jira/browse/HBASE-7120</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;$HBASE_HOME/bin/hbase-daemon.sh exit code is Zero, when runing hbase-daemon.sh failed with &quot;start&quot;, which doesn&#8217;t do required command exit code check, it&apos;s better to do necessary check when writing pid and log files. &lt;/p&gt;</description>
                <environment>&lt;p&gt;RHEL 5.3, open JDK 1.6&lt;/p&gt;</environment>
        <key id="12615249">HBASE-7120</key>
            <summary>hbase-daemon.sh (start) missing necessary check when writing pid and log files</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="4">Incomplete</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="michelle">Li Ping Zhang</reporter>
                        <labels>
                            <label>patch</label>
                    </labels>
                <created>Wed, 7 Nov 2012 22:57:04 +0000</created>
                <updated>Sat, 11 Apr 2015 00:30:27 +0000</updated>
                            <resolved>Sat, 11 Apr 2015 00:30:27 +0000</resolved>
                                    <version>0.94.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                    <timeoriginalestimate seconds="172800">48h</timeoriginalestimate>
                            <timeestimate seconds="172800">48h</timeestimate>
                                        <comments>
                            <comment id="13492795" author="stack" created="Wed, 7 Nov 2012 22:59:43 +0000"  >&lt;p&gt;Do you have a patch for us Li?&lt;/p&gt;</comment>
                            <comment id="13496342" author="michelle" created="Tue, 13 Nov 2012 17:18:08 +0000"  >&lt;p&gt;Yes, Stack, I have the patch generated from 0.94 branch and trunk, can I patch it? &lt;/p&gt;</comment>
                            <comment id="13496593" author="stack" created="Tue, 13 Nov 2012 22:01:29 +0000"  >&lt;p&gt;Add your patch here &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=michelle&quot; class=&quot;user-hover&quot; rel=&quot;michelle&quot;&gt;Li Ping Zhang&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="13505284" author="michelle" created="Wed, 28 Nov 2012 08:04:49 +0000"  >&lt;p&gt;Attached the patch for branch 0.94.&lt;/p&gt;</comment>
                            <comment id="13505285" author="michelle" created="Wed, 28 Nov 2012 08:05:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7120&quot; title=&quot;hbase-daemon.sh (start) missing necessary check when writing pid and log files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7120&quot;&gt;&lt;del&gt;HBASE-7120&lt;/del&gt;&lt;/a&gt;-trunk.patch is for trunk.&lt;/p&gt;</comment>
                            <comment id="13505672" author="stack" created="Wed, 28 Nov 2012 17:26:33 +0000"  >&lt;p&gt;In patch, if we fail, I see we echo a message.  Should we not also fail the startup if we can&apos;t write a pid file?&lt;/p&gt;</comment>
                            <comment id="13506282" author="michelle" created="Thu, 29 Nov 2012 07:25:41 +0000"  >&lt;p&gt;Yes, Stack, the patch will not interrupt the process if it can&apos;t write a log or pid file. I think for startup procedure, failing to write a pid file will impact &quot;stop&quot; procedure in hbase-daemon.sh when it use pid file to stop process, but it will not impact the real deamon to start process, anyhow giving warning messgae is needed. &lt;/p&gt;</comment>
                            <comment id="13506548" author="stack" created="Thu, 29 Nov 2012 15:50:01 +0000"  >&lt;p&gt;Agree that not having a pid will mess up our being able to stop the process.  I think though that failing to write a pid is a reason sufficient not to start hbase.  Can you store the pid in a variable in the start script and kill hbase if we fail writing the pid file?  Similar w/ log files.  If we can&apos;t write a log file, we should again fail the startup.  What do you think &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=michelle&quot; class=&quot;user-hover&quot; rel=&quot;michelle&quot;&gt;Li Ping Zhang&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="13531212" author="michelle" created="Thu, 13 Dec 2012 17:22:28 +0000"  >&lt;p&gt;Stack, agree. I will modifiy it and regenerate new patches with your good suggestion.&lt;/p&gt;</comment>
                            <comment id="13535047" author="michelle" created="Tue, 18 Dec 2012 16:59:51 +0000"  >&lt;p&gt;Thanks Stack, with your good suggestion, the updated patche &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7120&quot; title=&quot;hbase-daemon.sh (start) missing necessary check when writing pid and log files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7120&quot;&gt;&lt;del&gt;HBASE-7120&lt;/del&gt;&lt;/a&gt;-0.94-v1.patch is for branch 0.94.&lt;/p&gt;</comment>
                            <comment id="13535063" author="michelle" created="Tue, 18 Dec 2012 17:13:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7120&quot; title=&quot;hbase-daemon.sh (start) missing necessary check when writing pid and log files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7120&quot;&gt;&lt;del&gt;HBASE-7120&lt;/del&gt;&lt;/a&gt;-trunk-v1.patch is the new patch for trunk.&lt;/p&gt;</comment>
                            <comment id="13535145" author="hadoopqa" created="Tue, 18 Dec 2012 18:43:53 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12561518/HBASE-7120-trunk-v1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12561518/HBASE-7120-trunk-v1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 28 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.regionserver.TestAtomicOperation&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestAdmin&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are zombie tests. See build logs for details.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3587//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3587//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3587//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3587//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3587//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3587//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3587//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3587//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3587//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3587//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3587//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3587//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3587//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3587//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3587//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3587//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3587//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3587//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13589661" author="shubhamg" created="Thu, 28 Feb 2013 16:55:03 +0000"  >&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;Please find attach an updated patch. The patches attached in the attachment section are not working on my Hadoop+ZK+Hbase cluster setup. I am attaching a modified patch. I was successfully able &lt;br/&gt;
to start Hbase after applying this patch. It should apply to Hbase trunk cleanly.&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="13589663" author="hadoopqa" created="Thu, 28 Feb 2013 17:02:14 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12571428/HBASE-7120-trunk-working.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12571428/HBASE-7120-trunk-working.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4605//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4605//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12561514" name="HBASE-7120-0.94-v1.patch" size="1434" author="michelle" created="Tue, 18 Dec 2012 16:59:51 +0000"/>
                            <attachment id="12555134" name="HBASE-7120-0.94.patch" size="1410" author="michelle" created="Wed, 28 Nov 2012 08:04:49 +0000"/>
                            <attachment id="12561518" name="HBASE-7120-trunk-v1.patch" size="1410" author="michelle" created="Tue, 18 Dec 2012 17:13:43 +0000"/>
                            <attachment id="12571428" name="HBASE-7120-trunk-working.patch" size="1621" author="shubhamg" created="Thu, 28 Feb 2013 16:55:03 +0000"/>
                            <attachment id="12555135" name="HBASE-7120-trunk.patch" size="1386" author="michelle" created="Wed, 28 Nov 2012 08:05:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 7 Nov 2012 22:59:43 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>255853</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 42 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0fvcf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>90676</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>