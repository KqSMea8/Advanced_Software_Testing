<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:04:17 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-9422/HBASE-9422.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-9422] AsyncProcess and HTable will submit the same mutation twice if there is an error locating region.</title>
                <link>https://issues.apache.org/jira/browse/HBASE-9422</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;HTable#backgroundFlushCommits calls AsyncProcess#submit&lt;/p&gt;

&lt;p&gt;AsyncProcess#submit tries to get the region location but doesn&apos;t remove the mutation from the write buffer.  If it doesn&apos;t get the location the mutation is added to the error list.&lt;/p&gt;

&lt;p&gt;then HTable#backgroundFlushCommits takes all mutations from the error list and adds them to the write buffer list.&lt;/p&gt;

&lt;p&gt;This should result in two references to the same mutation being in the write buffer list twice.  It&apos;s not a big deal as two of the same mutation being executed should be ideponent (unless the two puts are executed across ms boundaries.)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12666755">HBASE-9422</key>
            <summary>AsyncProcess and HTable will submit the same mutation twice if there is an error locating region.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="nkeywal">Nicolas Liochon</assignee>
                                    <reporter username="eclark">Elliott Clark</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Sep 2013 21:03:05 +0000</created>
                <updated>Wed, 4 Sep 2013 17:22:16 +0000</updated>
                                            <version>0.98.0</version>
                    <version>0.96.0</version>
                                                    <component>Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13757107" author="eclark" created="Tue, 3 Sep 2013 21:34:36 +0000"  >&lt;p&gt;I should mention that it only happens if clearBufferOnFail is set to false.&lt;/p&gt;</comment>
                            <comment id="13757132" author="nkeywal" created="Tue, 3 Sep 2013 21:56:26 +0000"  >&lt;p&gt;Yep, it&apos;s not my favorite setting. Nevertheless, I will try to fix it (it&apos;s low priority for me, so in case someone wants to take it, no pb).&lt;/p&gt;</comment>
                            <comment id="13757134" author="eclark" created="Tue, 3 Sep 2013 21:59:07 +0000"  >&lt;p&gt;Yeah it&apos;s not even that big a deal as it is.  Just something I noticed while trying to dig into the client.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="13757340" author="sershe" created="Wed, 4 Sep 2013 00:57:55 +0000"  >&lt;p&gt;What if it&apos;s an increment? Or do only puts and deletes go there.&lt;/p&gt;</comment>
                            <comment id="13757986" author="nkeywal" created="Wed, 4 Sep 2013 17:22:16 +0000"  >&lt;p&gt;The AsyncProcess can support all type of mutations, but the HTable allows only put (that&apos;s historical). So you won&apos;t have the issue with an increment, as the bug occurs only with the !clearBufferOnFail, and it&apos;s a pure HTable behavior. &lt;/p&gt;

&lt;p&gt;As well, we don&apos;t retry within the AsyncProcess in this case: the retry is inside the getLocation, if the getLocation fails after its internal retries, we don&apos;t retry on top of it. So increments should be fine.&lt;/p&gt;

&lt;p&gt;I can fix it, but I wonder if we should not depreciate clearBufferOnFail. It&apos;s really strange, and it&apos;s expensive as we need to copy the data back.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 3 Sep 2013 21:56:26 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>346693</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 15 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ns7z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>346994</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>