<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:53:07 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1391/HBASE-1391.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1391] NPE in TableInputFormatBase$TableRecordReader.restart if zoo.cfg is wrong on tasktrackers</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1391</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Minor nit. If zoo.cfg is missing or incorrect on the task trackers, you&apos;ll get this NPE when the child task starts:&lt;/p&gt;

&lt;p&gt;09/05/08 02:46:15 INFO mapred.JobClient: Task Id : attempt_200905080240_0002_m_000000_2, Status : FAILED&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
        at org.apache.hadoop.hbase.mapred.TableInputFormatBase$TableRecordReader.restart(TableInputFormatBase.java:117)&lt;br/&gt;
        at org.apache.hadoop.hbase.mapred.TableInputFormatBase$TableRecordReader.init(TableInputFormatBase.java:128)&lt;br/&gt;
        at org.apache.hadoop.hbase.mapred.TableInputFormatBase.getRecordReader(TableInputFormatBase.java:249)&lt;br/&gt;
        at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:336)&lt;br/&gt;
        at org.apache.hadoop.mapred.MapTask.run(MapTask.java:305)&lt;br/&gt;
        at org.apache.hadoop.mapred.Child.main(Child.java:170)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12424885">HBASE-1391</key>
            <summary>NPE in TableInputFormatBase$TableRecordReader.restart if zoo.cfg is wrong on tasktrackers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="apurtell">Andrew Purtell</assignee>
                                    <reporter username="apurtell">Andrew Purtell</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 May 2009 02:50:36 +0000</created>
                <updated>Thu, 20 Sep 2012 22:10:38 +0000</updated>
                            <resolved>Tue, 12 May 2009 08:54:16 +0000</resolved>
                                                    <fixVersion>0.20.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12707229" author="stack" created="Fri, 8 May 2009 04:29:23 +0000"  >&lt;p&gt;I don&apos;t think the fellas who are stuck trying to figure why their MR job ain&apos;t working will think it a minor nit (smile).  Absence of zoo.cfg is not mentioned in the error message.&lt;/p&gt;</comment>
                            <comment id="12708094" author="stack" created="Mon, 11 May 2009 16:08:19 +0000"  >&lt;p&gt;Looking at code, there should have been complaint earlier in log when we tried create table in first place coming out of the configure:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void configure(JobConf job) {
    Path[] tableNames = FileInputFormat.getInputPaths(job);
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; colArg = job.get(COLUMN_LIST);
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] colNames = colArg.split(&lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt;);
    &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; [][] m_cols = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[colNames.length][];
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; m_cols.length; i++) {
      m_cols[i] = Bytes.toBytes(colNames[i]);
    }
    setInputColumns(m_cols);
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      setHTable(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HTable(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HBaseConfiguration(job), tableNames[0].getName()));
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
      LOG.error(e);
    }
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We should have triggered the LOG.error.&lt;/p&gt;

&lt;p&gt;The NPE happens when we try to use null table to get a scanner.&lt;/p&gt;

&lt;p&gt;Would my throwing an NPE inside in setHTable be enough?  We&apos;d still log the error in configure and continue, but then when the job tried to run, inside in getRecordReader, the job would fail because of a null table.&lt;/p&gt;

&lt;p&gt;The failure would be earlier.  Its not a complaint about missing zoo.cfg though.  We need that.&lt;/p&gt;
</comment>
                            <comment id="12708095" author="apurtell" created="Mon, 11 May 2009 16:12:34 +0000"  >&lt;p&gt;I&apos;m working on a complaint about missing or incorrect zoo.cfg. &lt;/p&gt;</comment>
                            <comment id="12708354" author="apurtell" created="Tue, 12 May 2009 07:43:10 +0000"  >&lt;p&gt;hbase-1391.patch: Log warnings if a quorum server listed in zoo.cfg cannot be resolved. Throw an exception if no valid quorum servers are found. Throw an exception out of TableInputFormat if a connection to the table could not be established for whatever reason. &lt;/p&gt;</comment>
                            <comment id="12708357" author="nitay" created="Tue, 12 May 2009 07:53:06 +0000"  >&lt;p&gt;+1 looks good to me Andrew.&lt;/p&gt;</comment>
                            <comment id="12708371" author="apurtell" created="Tue, 12 May 2009 08:54:16 +0000"  >&lt;p&gt;Thanks for the review Nitay. Committed to trunk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12407849" name="hbase-1391.patch" size="3676" author="apurtell" created="Tue, 12 May 2009 07:43:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 8 May 2009 04:29:23 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25732</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 32 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hcyv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99363</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>