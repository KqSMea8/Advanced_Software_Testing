<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 21:23:03 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-17278/HBASE-17278.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-17278] [C++] Cell Scanner Implementation to be used by ResultScanner</title>
                <link>https://issues.apache.org/jira/browse/HBASE-17278</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description></description>
                <environment></environment>
        <key id="13026504">HBASE-17278</key>
            <summary>[C++] Cell Scanner Implementation to be used by ResultScanner</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12914633">HBASE-14850</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="3" iconUrl="https://issues.apache.org/jira/images/icons/statuses/inprogress.png" description="This issue is being actively worked on at the moment by the assignee.">In Progress</status>
                    <statusCategory id="4" key="indeterminate" colorName="yellow"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="sudeeps">Sudeep Sunthankar</assignee>
                                    <reporter username="sudeeps">Sudeep Sunthankar</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 Dec 2016 23:05:15 +0000</created>
                <updated>Thu, 15 Dec 2016 09:17:48 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15730277" author="sudeeps" created="Wed, 7 Dec 2016 23:25:58 +0000"  >&lt;p&gt;First cut of CellScanner. CellScanner will be used by &lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;ResultScanner to parse cell returned in Scan response.&lt;/li&gt;
	&lt;li&gt;If Get response has any cells returned, CellScanner can be used for the same as well.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Unit tests are not added as yet. Will be added in the subsequent patches.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="15744192" author="enis" created="Tue, 13 Dec 2016 05:12:16 +0000"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Can you remove the DLOG statements (or maybe move them to a debug method):
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+#&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; 0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;Let&apos;s keep Cell class to be only the data structure, and move parsing / encoding logic to KeyValueCodec class. We can use the same Codec structure here as well with the Encoder and Decoder classes.&lt;/li&gt;
	&lt;li&gt;Normally, CellScanner is an interface in Java with different implementations. &lt;tt&gt;Result&lt;/tt&gt; also implements the CellScanner so, it maybe useful to have this to be an abstract base class, and the KeyValueDecoder to be an implementation.&lt;/li&gt;
	&lt;li&gt;Let&apos;s use ntohs and friends if possible for dealing with endianness. (&lt;a href=&quot;https://linux.die.net/man/3/ntohs&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://linux.die.net/man/3/ntohs&lt;/a&gt;) rather than SwapByteOrder methods.&lt;/li&gt;
	&lt;li&gt;Can we do this with zero-copy by overtaking the buffer:
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+void CellScanner::SetData(&lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt; *cell_block_data, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; data_length) {
+  cell_block_data_.reset(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt;[data_length]);
+  std::memcpy(cell_block_data_.get(), cell_block_data, data_length);
+  data_length_ = data_length;
+  cur_pos_ = 0;
+}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The only CellScanner implementation for now will be the scanner that will work on top of the IPC buffers, so we do not need to memcpy the bytes. Better yet, we should use the &lt;a href=&quot;https://github.com/facebook/folly/blob/master/folly/io/IOBuf.h&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/facebook/folly/blob/master/folly/io/IOBuf.h&lt;/a&gt; for the CellScanner since that is what will be coming from the network using wangle. &lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;Do we need the second Cell wrapper here?
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Cell(*Cell::ParseCellData(*current_cell_data))
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="15747652" author="sudeeps" created="Wed, 14 Dec 2016 08:26:44 +0000"  >&lt;p&gt;Thanks for the feedback &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt;. I will have a look at the points mentioned above.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12842240" name="HBASE-17278.HBASE-14850.v1.patch" size="14449" author="sudeeps" created="Wed, 7 Dec 2016 23:25:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 13 Dec 2016 05:12:16 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i37bi7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>