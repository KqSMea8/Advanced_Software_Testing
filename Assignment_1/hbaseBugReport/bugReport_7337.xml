<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:44:47 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-7337/HBASE-7337.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-7337] SingleColumnValueFilter seems to get unavailble data</title>
                <link>https://issues.apache.org/jira/browse/HBASE-7337</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;put multi versions of a row.&lt;br/&gt;
r1 cf:q  version:1 value:1&lt;br/&gt;
r1 cf:q  version:2 value:3&lt;br/&gt;
r1 cf:q  version:3 value:2&lt;br/&gt;
the filter in scan is set as below:&lt;br/&gt;
SingleColumnValueFilter valueF = new SingleColumnValueFilter(&lt;br/&gt;
        family,qualifier,CompareOp.EQUAL,new BinaryComparator(Bytes&lt;br/&gt;
.toBytes(&quot;2&quot;)));&lt;/p&gt;

&lt;p&gt;then i found all of the three versions will be emmitted, then i set latestVersionOnly to false, the result does no change.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; ReturnCode filterKeyValue(KeyValue keyValue) {
    &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;REMOVE KEY=&quot;&lt;/span&gt; + keyValue.toString() + &lt;span class=&quot;code-quote&quot;&gt;&quot;, value=&quot;&lt;/span&gt; + Bytes.toString(keyValue.getValue()));
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.matchedColumn) {
      &lt;span class=&quot;code-comment&quot;&gt;// We already found and matched the single column, all keys now pass
&lt;/span&gt;      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ReturnCode.INCLUDE;
    } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.latestVersionOnly &amp;amp;&amp;amp; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.foundColumn) {
      &lt;span class=&quot;code-comment&quot;&gt;// We found but did not match the single column, skip to next row
&lt;/span&gt;      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ReturnCode.NEXT_ROW;
    }
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!keyValue.matchingColumn(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.columnFamily, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.columnQualifier)) {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ReturnCode.INCLUDE;
    }
    foundColumn = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (filterColumnValue(keyValue.getBuffer(),
        keyValue.getValueOffset(), keyValue.getValueLength())) {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.latestVersionOnly? ReturnCode.NEXT_ROW: ReturnCode.INCLUDE;
    }
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.matchedColumn = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ReturnCode.INCLUDE;
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;From the code above, it seeems that version 3 will be first emmited, and set matchedColumn to true, which leads the following version 2 and 1 emmited too.&lt;/p&gt;
</description>
                <environment>&lt;p&gt;0.94&lt;/p&gt;</environment>
        <key id="12623495">HBASE-7337</key>
            <summary>SingleColumnValueFilter seems to get unavailble data</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="zhou wen jian">Zhou wenjian</assignee>
                                    <reporter username="zhou wen jian">Zhou wenjian</reporter>
                        <labels>
                    </labels>
                <created>Wed, 12 Dec 2012 07:29:57 +0000</created>
                <updated>Tue, 26 Feb 2013 04:29:02 +0000</updated>
                            <resolved>Tue, 26 Feb 2013 04:28:54 +0000</resolved>
                                    <version>0.94.3</version>
                    <version>0.95.2</version>
                                                    <component>Filters</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13529746" author="ram_krish" created="Wed, 12 Dec 2012 08:32:25 +0000"  >&lt;p&gt;Did you check with your values?  Like the inserted values are also String and the one that you are querying is also String?&lt;br/&gt;
Just to verify...&lt;/p&gt;</comment>
                            <comment id="13529773" author="zhou wen jian" created="Wed, 12 Dec 2012 09:27:22 +0000"  >&lt;p&gt;they are both String&lt;/p&gt;
</comment>
                            <comment id="13532042" author="anoopsamjohn" created="Fri, 14 Dec 2012 04:41:34 +0000"  >&lt;blockquote&gt;&lt;p&gt;then i set latestVersionOnly to false, the result does no change.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;latestVersionOnly in SCVF is not for determining what will get returned by the Scan. This specifies which value of a row column to be checked in case of multiple versions available for the cell. When latestVersionOnly = true, only the latest version value will get checked and so in your case only if the latest version value is &quot;2&quot; that row will get selected. When latestVersionOnly =false, it will check all the versions and if any of the version value is &quot;2&quot; that row will get selected.&lt;/p&gt;

&lt;p&gt;BTW how is the Scan object? I guess you have set in Scan to get all the versions.&lt;/p&gt;

&lt;p&gt;SCVF will not decide how many versions of a cell to be send back to client. It just checks the cell value with the value specified.&lt;/p&gt;</comment>
                            <comment id="13532066" author="zhou wen jian" created="Fri, 14 Dec 2012 05:27:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoopsamjohn&quot; class=&quot;user-hover&quot; rel=&quot;anoopsamjohn&quot;&gt;Anoop Sam John&lt;/a&gt;&lt;br/&gt;
actually i did get all the versions.&lt;br/&gt;
when using SCVF, it is not allowed to set version in the scan for it will get data againset SCVF,do you mean it? &lt;/p&gt;</comment>
                            <comment id="13532082" author="anoopsamjohn" created="Fri, 14 Dec 2012 06:16:05 +0000"  >&lt;p&gt;In Scan you can set how many version you need or you need all the versions or only latest version.....&lt;br/&gt;
This is irrespective of whether SCVF or any other filters are set on the Scan.&lt;/p&gt;

&lt;p&gt;In fact the filter will get to know all the versions. (in filterKeyValue)&lt;/p&gt;
</comment>
                            <comment id="13563756" author="lhofhansl" created="Sun, 27 Jan 2013 07:58:15 +0000"  >&lt;p&gt;Can we close this, or is this an actual issue?&lt;br/&gt;
Anyway, moving to 0.94.6&lt;/p&gt;</comment>
                            <comment id="13564032" author="anoopsamjohn" created="Mon, 28 Jan 2013 04:24:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zhou+wen+jian&quot; class=&quot;user-hover&quot; rel=&quot;zhou wen jian&quot;&gt;Zhou wenjian&lt;/a&gt;&lt;br/&gt;
When you scan data and your table having multiple versions for a cell, which all versions the scan should return to be specified in Scan object. By default HBase will return only the latest version. But you have setters on Scan object using which you can tell to get more version.&lt;br/&gt;
SCVF is used to specify a column value check. If the condition is not satisfied for a row, then that row will be fully filtered out from the returned results. Here using latestVersionOnly = true , you are specifying to check the condition only on the latest version. &lt;span class=&quot;error&quot;&gt;&amp;#91;*Not* that to return the latestVersion only in result&amp;#93;&lt;/span&gt;If this is set as false, all the versions will be checked for the condition and if any of the version value is satisfying the condition, that row will get included. But remember SCVF can not specify to return only latest version of cell or not. This is just for specifying the condition and all the filter will see all the versions of cells. Which version to be returned is decided down the line in another part of code which will be executed after this Filter#filterKeyValue(KeyValue)&lt;/p&gt;


&lt;p&gt;&quot;SingleColumnValueFilter seems to get unavailble data&quot; - Your heading says getting unavailable data. Can you tell more? Or your problem is getting the older versions?&lt;/p&gt;

&lt;p&gt;As per your reply we can check whether some real bug is there or not. If no issues we can close this.&lt;/p&gt;</comment>
                            <comment id="13586731" author="lhofhansl" created="Tue, 26 Feb 2013 04:28:54 +0000"  >&lt;p&gt;Closing as &quot;Won&apos;t fix&quot;.&lt;br/&gt;
Please reopen if you do not think that is the right way to handle this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 12 Dec 2012 08:32:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>297204</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 42 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i14n1j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>235198</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>