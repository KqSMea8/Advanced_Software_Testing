<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:33:59 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6122/HBASE-6122.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6122] Backup master does not become Active master after ZK exception</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6122</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;-&amp;gt; Active master gets ZK expiry exception.&lt;br/&gt;
-&amp;gt; Backup master becomes active.&lt;br/&gt;
-&amp;gt; The previous active master retries and becomes the back up master.&lt;br/&gt;
Now when the new active master goes down and the current back up master comes up, it goes down again with the zk expiry exception it got in the first step.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (abortNow(msg, t)) {
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (t != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) LOG.fatal(msg, t);
      &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; LOG.fatal(msg);
      &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.abort = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
      stop(&lt;span class=&quot;code-quote&quot;&gt;&quot;Aborting&quot;&lt;/span&gt;);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In ActiveMasterManager.blockUntilBecomingActiveMaster we try to wait till the back up master becomes active. &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.clusterHasActiveMaster) {
      &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.clusterHasActiveMaster.get() &amp;amp;&amp;amp; !&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.master.isStopped()) {
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
          &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.clusterHasActiveMaster.wait();
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (InterruptedException e) {
          &lt;span class=&quot;code-comment&quot;&gt;// We expect to be interrupted when a master dies, will fall out &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; so
&lt;/span&gt;          LOG.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Interrupted waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; master to die&quot;&lt;/span&gt;, e);
        }
      }
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!clusterStatusTracker.isClusterUp()) {
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.master.stop(&lt;span class=&quot;code-quote&quot;&gt;&quot;Cluster went down before &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; master became active&quot;&lt;/span&gt;);
      }
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.master.isStopped()) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; cleanSetOfActiveMaster;
      }
      &lt;span class=&quot;code-comment&quot;&gt;// Try to become active master again now that there is no active master
&lt;/span&gt;      blockUntilBecomingActiveMaster(startupStatus,clusterStatusTracker);
    }
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; cleanSetOfActiveMaster;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;When the back up master (it is in back up mode as he got ZK exception), once again tries to come to active we don&apos;t get the return value that comes out from &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// Try to become active master again now that there is no active master
&lt;/span&gt;      blockUntilBecomingActiveMaster(startupStatus,clusterStatusTracker);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We tend to return the &apos;cleanSetOfActiveMaster&apos; which was previously false.&lt;br/&gt;
Now because of this instead of again becoming active the back up master goes down in the abort() code.  Thanks to Gopi,my colleague for reporting this issue.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12558459">HBASE-6122</key>
            <summary>Backup master does not become Active master after ZK exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ram_krish">ramkrishna.s.vasudevan</assignee>
                                    <reporter username="ram_krish">ramkrishna.s.vasudevan</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 May 2012 17:08:30 +0000</created>
                <updated>Fri, 12 Oct 2012 05:36:19 +0000</updated>
                            <resolved>Thu, 31 May 2012 16:21:39 +0000</resolved>
                                    <version>0.94.0</version>
                                    <fixVersion>0.92.2</fixVersion>
                    <fixVersion>0.94.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                <comments>
                            <comment id="13284944" author="ram_krish" created="Tue, 29 May 2012 17:18:51 +0000"  >&lt;p&gt;I found some changes in the trunk code.  So not sure if it is applicable in trunk.  Attached patches for 0.94 and 0.92.&lt;/p&gt;</comment>
                            <comment id="13284961" author="lhofhansl" created="Tue, 29 May 2012 17:49:28 +0000"  >&lt;p&gt;+1 patch looks good to me.&lt;/p&gt;</comment>
                            <comment id="13285823" author="ram_krish" created="Wed, 30 May 2012 17:03:47 +0000"  >&lt;p&gt;Committed to 0.92 and 0.94.&lt;br/&gt;
Thanks for the review Lars.&lt;/p&gt;</comment>
                            <comment id="13285871" author="hudson" created="Wed, 30 May 2012 18:22:19 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #233 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/233/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/233/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6122&quot; title=&quot;Backup master does not become Active master after ZK exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6122&quot;&gt;&lt;del&gt;HBASE-6122&lt;/del&gt;&lt;/a&gt; Backup master does not become Active master after ZK exception (Ram) (Revision 1344348)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
ramkrishna : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/ActiveMasterManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13285959" author="hudson" created="Wed, 30 May 2012 19:53:46 +0000"  >&lt;p&gt;Integrated in HBase-0.92 #433 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92/433/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92/433/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6122&quot; title=&quot;Backup master does not become Active master after ZK exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6122&quot;&gt;&lt;del&gt;HBASE-6122&lt;/del&gt;&lt;/a&gt; Backup master does not become Active master after ZK exception (Ram) (Revision 1344350)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
ramkrishna : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/ActiveMasterManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13286070" author="stack" created="Wed, 30 May 2012 21:16:44 +0000"  >&lt;p&gt;Reopening.  Backing out these patches.  It seems reponsible for these failures:&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/HBase-0.92/433/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92/433/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13286072" author="stack" created="Wed, 30 May 2012 21:18:11 +0000"  >&lt;p&gt;I reverted from 0.92 and 0.94 branches till we figure the failures.&lt;/p&gt;</comment>
                            <comment id="13286166" author="hudson" created="Wed, 30 May 2012 22:58:18 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #236 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/236/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/236/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6122&quot; title=&quot;Backup master does not become Active master after ZK exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6122&quot;&gt;&lt;del&gt;HBASE-6122&lt;/del&gt;&lt;/a&gt; Backup master does not become Active master after ZK exception: REVERT (Revision 1344467)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/ActiveMasterManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13286235" author="hudson" created="Thu, 31 May 2012 00:46:28 +0000"  >&lt;p&gt;Integrated in HBase-0.92 #435 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92/435/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92/435/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6122&quot; title=&quot;Backup master does not become Active master after ZK exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6122&quot;&gt;&lt;del&gt;HBASE-6122&lt;/del&gt;&lt;/a&gt; Backup master does not become Active master after ZK exception: REVERT (Revision 1344466)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/ActiveMasterManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13286298" author="ram_krish" created="Thu, 31 May 2012 04:06:28 +0000"  >&lt;p&gt;Oh... Let me check out the reason for the failure.  Sorry for the mess.&lt;/p&gt;</comment>
                            <comment id="13286334" author="ram_krish" created="Thu, 31 May 2012 05:24:16 +0000"  >&lt;p&gt;I checked the test case.&lt;br/&gt;
Ideally the flow is making the master to become active but the problem as described in this JIRA still makes the master to go down.&lt;/p&gt;

&lt;p&gt;I added a log in ActiveMasterManager.blockUntilBecomingActiveMaster&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Master is now available &quot;&lt;/span&gt;+&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.sn);
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.clusterHasActiveMaster.set(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
        LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Master=&quot;&lt;/span&gt; + &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.sn);
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; cleanSetOfActiveMaster;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;See the below log in the logs.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2012-05-31 10:52:29,050 INFO  [pool-29-thread-1] master.ActiveMasterManager(149): Master is now available Htipl-01388.china.huawei.com,3569,1338441734226
2012-05-31 10:52:29,050 INFO  [pool-29-thread-1] master.ActiveMasterManager(151): Master=Htipl-01388.china.huawei.com,3569,1338441734226
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This means ideally the master should come up if there is no problem in again becoming active.  Along with the patch this testcase should be modified to make the assertTrue to assertFalse.&lt;/p&gt;

&lt;p&gt;Pls correct me if am wrong.  The fix still remains valid.&lt;/p&gt;</comment>
                            <comment id="13286344" author="ram_krish" created="Thu, 31 May 2012 05:43:38 +0000"  >&lt;p&gt;Pls take a look at the patch.  I have not corrected the test case for the testcase to pass.  Ideally the previous test was covering up the bug.  Correct me if am wrong.&lt;/p&gt;</comment>
                            <comment id="13286350" author="stack" created="Thu, 31 May 2012 05:53:36 +0000"  >&lt;p&gt;@Ram Which assert should be changed?  Do you want to include the assert change in your patch?  Or are you suggesting a previous test case is broke?  If so, which?  Thanks.&lt;/p&gt;</comment>
                            <comment id="13286353" author="ram_krish" created="Thu, 31 May 2012 05:56:23 +0000"  >&lt;p&gt;I have attached the patch Stack.  It is changing the assert of the testcase TestMasterZKSessionRecovery.testMasterZKSessionRecoveryFailure&lt;/p&gt;</comment>
                            <comment id="13286359" author="stack" created="Thu, 31 May 2012 06:15:04 +0000"  >&lt;p&gt;Looks good Ram.  +1&lt;/p&gt;</comment>
                            <comment id="13286711" author="ram_krish" created="Thu, 31 May 2012 16:21:39 +0000"  >&lt;p&gt;Committed again with the latest patch to 0.92 and 0.94.  Hope things are ok this time. Thanks Stack for your review.&lt;/p&gt;</comment>
                            <comment id="13286765" author="hudson" created="Thu, 31 May 2012 17:39:14 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #240 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/240/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/240/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6122&quot; title=&quot;Backup master does not become Active master after ZK exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6122&quot;&gt;&lt;del&gt;HBASE-6122&lt;/del&gt;&lt;/a&gt; Backup master does not become Active master after ZK exception (Ram) (Revision 1344798)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
ramkrishna : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/ActiveMasterManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/master/TestMasterZKSessionRecovery.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13286844" author="hudson" created="Thu, 31 May 2012 19:14:55 +0000"  >&lt;p&gt;Integrated in HBase-0.92 #439 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92/439/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92/439/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6122&quot; title=&quot;Backup master does not become Active master after ZK exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6122&quot;&gt;&lt;del&gt;HBASE-6122&lt;/del&gt;&lt;/a&gt; Backup master does not become Active master after ZK exception (Ram) (Revision 1344799)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
ramkrishna : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/ActiveMasterManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/master/TestMasterZKSessionRecovery.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13287164" author="hudson" created="Fri, 1 Jun 2012 05:42:54 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #33 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/33/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/33/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6122&quot; title=&quot;Backup master does not become Active master after ZK exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6122&quot;&gt;&lt;del&gt;HBASE-6122&lt;/del&gt;&lt;/a&gt; Backup master does not become Active master after ZK exception (Ram) (Revision 1344798)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6122&quot; title=&quot;Backup master does not become Active master after ZK exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6122&quot;&gt;&lt;del&gt;HBASE-6122&lt;/del&gt;&lt;/a&gt; Backup master does not become Active master after ZK exception: REVERT (Revision 1344467)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6122&quot; title=&quot;Backup master does not become Active master after ZK exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6122&quot;&gt;&lt;del&gt;HBASE-6122&lt;/del&gt;&lt;/a&gt; Backup master does not become Active master after ZK exception (Ram) (Revision 1344348)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
ramkrishna : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/ActiveMasterManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/master/TestMasterZKSessionRecovery.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/ActiveMasterManager.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;ramkrishna : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/ActiveMasterManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13287235" author="hudson" created="Fri, 1 Jun 2012 08:08:18 +0000"  >&lt;p&gt;Integrated in HBase-0.92-security #109 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92-security/109/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92-security/109/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6122&quot; title=&quot;Backup master does not become Active master after ZK exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6122&quot;&gt;&lt;del&gt;HBASE-6122&lt;/del&gt;&lt;/a&gt; Backup master does not become Active master after ZK exception (Ram) (Revision 1344799)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6122&quot; title=&quot;Backup master does not become Active master after ZK exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6122&quot;&gt;&lt;del&gt;HBASE-6122&lt;/del&gt;&lt;/a&gt; Backup master does not become Active master after ZK exception: REVERT (Revision 1344466)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6122&quot; title=&quot;Backup master does not become Active master after ZK exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6122&quot;&gt;&lt;del&gt;HBASE-6122&lt;/del&gt;&lt;/a&gt; Backup master does not become Active master after ZK exception (Ram) (Revision 1344350)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
ramkrishna : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/ActiveMasterManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/master/TestMasterZKSessionRecovery.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/ActiveMasterManager.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;ramkrishna : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/ActiveMasterManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13287278" author="nkeywal" created="Fri, 1 Jun 2012 09:06:22 +0000"  >&lt;p&gt;@ram&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;I found some changes in the trunk code. So not sure if it is applicable in trunk. Attached patches for 0.94 and 0.92.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Do you mean that the problem is not reproducible on trunk?&lt;/p&gt;</comment>
                            <comment id="13287296" author="ram_krish" created="Fri, 1 Jun 2012 09:44:20 +0000"  >&lt;p&gt;@N&lt;br/&gt;
The trunk code is different.  Currently there is a while(true) loop and as far as i see it should be ok in trunk.&lt;br/&gt;
I did not try to reproduce in trunk.&lt;/p&gt;</comment>
                            <comment id="13287306" author="nkeywal" created="Fri, 1 Jun 2012 09:57:35 +0000"  >&lt;p&gt;Thanks, I will give it a try to be sure.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12530333" name="HBASE-6122.patch" size="1727" author="ram_krish" created="Thu, 31 May 2012 05:42:43 +0000"/>
                            <attachment id="12530062" name="HBASE-6122_0.92.patch" size="715" author="ram_krish" created="Tue, 29 May 2012 17:18:51 +0000"/>
                            <attachment id="12530335" name="HBASE-6122_0.94.patch" size="1727" author="ram_krish" created="Thu, 31 May 2012 05:43:38 +0000"/>
                            <attachment id="12530061" name="HBASE-6122_0.94.patch" size="715" author="ram_krish" created="Tue, 29 May 2012 17:18:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 29 May 2012 17:49:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>245401</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 29 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i068an:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34275</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>