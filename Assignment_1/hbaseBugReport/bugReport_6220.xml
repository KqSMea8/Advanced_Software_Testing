<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:34:50 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6220/HBASE-6220.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6220] PersistentMetricsTimeVaryingRate gets used for non-time-based metrics</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6220</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;PersistentMetricsTimeVaryingRate gets used for metrics that are not time-based, leading to confusing names such as &quot;avg_time&quot; for compaction size, etc.  You hav to read the code in order to understand that this is actually referring to bytes, not seconds.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12560849">HBASE-6220</key>
            <summary>PersistentMetricsTimeVaryingRate gets used for non-time-based metrics</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulcavallaro">Paul Cavallaro</assignee>
                                    <reporter username="dsw">David S. Wang</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Jun 2012 23:59:26 +0000</created>
                <updated>Tue, 5 Aug 2014 20:11:43 +0000</updated>
                            <resolved>Wed, 18 Jul 2012 19:19:04 +0000</resolved>
                                    <version>0.95.2</version>
                                                    <component>metrics</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="13401085" author="paulcavallaro" created="Tue, 26 Jun 2012 01:31:44 +0000"  >&lt;p&gt;The &quot;_avg_time&quot; is hardcoded in org.apache.hadoop.metrics.util.MetricsTimeVaryingRate in hadoop-core. I could duplicate the functionality in order to change the String, or try to get a change pushed upstream. Both solutions seem like overkill. I also noticed that the underlying metrics package is deprecated and the metrics2 package seems to be the way forward. As I am a &quot;noob&quot; does anyone have thoughts on what the proper approach might be?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
-Paul&lt;/p&gt;</comment>
                            <comment id="13401100" author="eclark" created="Tue, 26 Jun 2012 01:49:02 +0000"  >&lt;p&gt;Creating another class is probably the correct way.  See how MetricsHistogram does it. Though there is a push to re-vamp the metrics usage in hbase so things could change with that.&lt;/p&gt;</comment>
                            <comment id="13401128" author="paulcavallaro" created="Tue, 26 Jun 2012 03:05:54 +0000"  >&lt;p&gt;I moved over the metrics that used PersistentMetricsTimeVaryingRate to MetricsHistogram because it seemed like a better fit. &lt;/p&gt;

&lt;p&gt;No tests are included, but I am looking for feedback for correct approach, and what areas to test. I could not find any tests that exercised RegionServerMetrics or MasterServerMetrics, so I did not have much to crib off of.&lt;/p&gt;</comment>
                            <comment id="13401129" author="paulcavallaro" created="Tue, 26 Jun 2012 03:06:51 +0000"  >&lt;p&gt;Sorry, I forgot to add that this obviously changes the metrics that are logged, and I am not sure if that is OK. Obviously this is something to consider. &lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;-Paul&lt;/p&gt;</comment>
                            <comment id="13401212" author="hadoopqa" created="Tue, 26 Jun 2012 07:22:44 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12533426/ServerMetrics_HBASE_6220.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12533426/ServerMetrics_HBASE_6220.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 6 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.replication.TestReplication&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2254//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2254//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2254//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2254//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2254//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2254//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2254//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2254//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13408082" author="paulcavallaro" created="Fri, 6 Jul 2012 15:46:25 +0000"  >&lt;p&gt;From the mailing list I assume this is getting swallowed up by the push to use metrics2 in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4050&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-4050&lt;/a&gt;. Let me know what action I should take as I am a new contributor.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;-Paul&lt;/p&gt;</comment>
                            <comment id="13408139" author="eclark" created="Fri, 6 Jul 2012 16:36:53 +0000"  >&lt;p&gt;looks good to me. Have you verified that the changed metrics then get out to jmx?&lt;/p&gt;</comment>
                            <comment id="13408166" author="zhihyu@ebaysf.com" created="Fri, 6 Jul 2012 17:21:01 +0000"  >&lt;p&gt;Patch integrated to trunk.&lt;/p&gt;

&lt;p&gt;Thanks for the patch, Paul.&lt;/p&gt;

&lt;p&gt;Thanks for the review, Elliot.&lt;/p&gt;</comment>
                            <comment id="13408347" author="stack" created="Fri, 6 Jul 2012 21:25:32 +0000"  >&lt;p&gt;Did Elliott&apos;s question of Paul get answered?  i.e. if the metrics come out in jmx (and in /jmx servlet?)  Good stuff.&lt;/p&gt;</comment>
                            <comment id="13408407" author="paulcavallaro" created="Fri, 6 Jul 2012 22:30:54 +0000"  >&lt;p&gt;@stack I don&apos;t think it did. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I&apos;ll take a look soon, hopefully this weekend, as I&apos;m not completely sure.&lt;/p&gt;</comment>
                            <comment id="13408619" author="stack" created="Sat, 7 Jul 2012 10:42:32 +0000"  >&lt;p&gt;@Paul Easy test is browse to /jmx on regionserver.  Look for your new metrics messings.  Thanks for the contrib.&lt;/p&gt;</comment>
                            <comment id="13410331" author="dsw" created="Tue, 10 Jul 2012 13:33:30 +0000"  >&lt;p&gt;Apologies for not getting to this earlier.&lt;/p&gt;

&lt;p&gt;I noticed that the flush metrics were not changed in the patch.  Was there a reason for that?&lt;/p&gt;</comment>
                            <comment id="13412230" author="paulcavallaro" created="Wed, 11 Jul 2012 22:27:00 +0000"  >&lt;p&gt;Sorry I&apos;ve been away this week with intermittent internet connectivity. I&apos;ll try to reply to all of this soon.&lt;/p&gt;</comment>
                            <comment id="13416765" author="paulcavallaro" created="Wed, 18 Jul 2012 00:32:28 +0000"  >&lt;p&gt;Hey all, back from the offline world, replies below:&lt;/p&gt;

&lt;p&gt;@stack Yep, everything seems to show up in /jmx just fine.&lt;/p&gt;

&lt;p&gt;@David Wang No reason that it wasn&apos;t included, I&apos;ve actually attached another patch to switch those over the Metrics Histogram as well if desired we can include it.&lt;/p&gt;

&lt;p&gt;Thanks all, and sorry for the slow responses.&lt;/p&gt;</comment>
                            <comment id="13416842" author="hadoopqa" created="Wed, 18 Jul 2012 03:32:30 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12536928/ServerMetrics_HBASE_6220_Flush_Metrics.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12536928/ServerMetrics_HBASE_6220_Flush_Metrics.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    -1 javac.  The applied patch generated 5 javac compiler warnings (more than the trunk&apos;s current 4 warnings).&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 10 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2396//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2396//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2396//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2396//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2396//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2396//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2396//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2396//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2396//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2396//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2396//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2396//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2396//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2396//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13417135" author="stack" created="Wed, 18 Jul 2012 14:48:57 +0000"  >&lt;p&gt;I made &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6419&quot; title=&quot;PersistentMetricsTimeVaryingRate gets used for non-time-based metrics (part2 of HBASE-6220)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6419&quot;&gt;&lt;del&gt;HBASE-6419&lt;/del&gt;&lt;/a&gt; to apply Pauls&apos; amendment.&lt;/p&gt;</comment>
                            <comment id="13417369" author="hudson" created="Wed, 18 Jul 2012 18:55:33 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3144 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3144/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3144/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6419&quot; title=&quot;PersistentMetricsTimeVaryingRate gets used for non-time-based metrics (part2 of HBASE-6220)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6419&quot;&gt;&lt;del&gt;HBASE-6419&lt;/del&gt;&lt;/a&gt; PersistentMetricsTimeVaryingRate gets used for non-time-based metrics (part2 of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6220&quot; title=&quot;PersistentMetricsTimeVaryingRate gets used for non-time-based metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6220&quot;&gt;&lt;del&gt;HBASE-6220&lt;/del&gt;&lt;/a&gt;) (Paul Cavallaro) (Revision 1363016)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/metrics/RegionServerMetrics.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13417388" author="paulcavallaro" created="Wed, 18 Jul 2012 19:15:21 +0000"  >&lt;p&gt;Should I resolve this or someone else? Thanks.&lt;/p&gt;</comment>
                            <comment id="13417856" author="hudson" created="Wed, 18 Jul 2012 23:44:05 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #98 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/98/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/98/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6419&quot; title=&quot;PersistentMetricsTimeVaryingRate gets used for non-time-based metrics (part2 of HBASE-6220)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6419&quot;&gt;&lt;del&gt;HBASE-6419&lt;/del&gt;&lt;/a&gt; PersistentMetricsTimeVaryingRate gets used for non-time-based metrics (part2 of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6220&quot; title=&quot;PersistentMetricsTimeVaryingRate gets used for non-time-based metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6220&quot;&gt;&lt;del&gt;HBASE-6220&lt;/del&gt;&lt;/a&gt;) (Paul Cavallaro) (Revision 1363016)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/metrics/RegionServerMetrics.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12533426" name="ServerMetrics_HBASE_6220.patch" size="4376" author="paulcavallaro" created="Tue, 26 Jun 2012 03:05:54 +0000"/>
                            <attachment id="12536928" name="ServerMetrics_HBASE_6220_Flush_Metrics.patch" size="2395" author="paulcavallaro" created="Wed, 18 Jul 2012 00:32:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 26 Jun 2012 01:31:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>245371</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 22 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0683z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34245</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>